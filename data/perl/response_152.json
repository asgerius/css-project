[{"tags": ["perl", "web-services", "soap"], "comments": [{"owner": {"reputation": 1863, "user_id": 1739000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ZZjEi.png?s=128&g=1", "display_name": "NH.", "link": "https://stackoverflow.com/users/1739000/nh"}, "edited": false, "score": 0, "creation_date": 1512593127, "post_id": 47681520, "comment_id": 82325665, "body": "I don&#39;t know about perl, but I got the wrong content-type when using node-soap, and I ended up having to build the SOAP request manually. Tragically, SOAP isn&#39;t handled the same way by all languages, and what some modules expect simply can&#39;t be provided by modules in other languages. Ultimate long-term solution: use REST."}], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 2121053, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d11fd710e72c4447b74c3bee402378c7?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/2121053/joe"}, "is_accepted": false, "score": 0, "last_activity_date": 1513024752, "creation_date": 1513024752, "answer_id": 47761045, "question_id": 47681520, "link": "https://stackoverflow.com/questions/47681520/perl-soap-server-no-longer-returning-base64/47761045#47761045", "title": "Perl SOAP server no longer returning base64", "body": "<p>I ended up using MIME::base64 to encode the string and finagled the response such that the client would decode the response string as base64, even though the soap response continues to indicate type string. Works for me--good enough for this very specific application.</p>\n\n<p>Still couldn't find how to otherwise force perl to encode the response.</p>\n"}], "owner": {"reputation": 103, "user_id": 2121053, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d11fd710e72c4447b74c3bee402378c7?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/2121053/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1513024752, "creation_date": 1512586406, "question_id": 47681520, "link": "https://stackoverflow.com/questions/47681520/perl-soap-server-no-longer-returning-base64", "title": "Perl SOAP server no longer returning base64", "body": "<p>Years ago I wrote a few Perl SOAP::Transport::HTML servers running on Windows Server 2000. On that machine, when the service's return string contained characters that might break the soap envelope, perl automatically encoded the string as base64, which the client then handled.</p>\n\n<p>Recently, the scripts have been moved to a machine running Server 2008 and Perl 5.22.1. The service works fine except when the return string has such characters: the string is not encoded and the SOAP envelop returns to the client empty.</p>\n\n<p>How can I force my return string to be base64? Of course I can use MIME::base64 to encode the string, but the SOAP envelop still indicates type text and is not converted correctly on the client side.</p>\n\n<pre><code>use SOAP::Transport::HTTP;\nSOAP::Transport::HTTP::CGI   \n-&gt; dispatch_to('MyMod')\n-&gt; handle;\n</code></pre>\n"}, {"tags": ["perl", "code-duplication"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512586219, "post_id": 47681411, "comment_id": 82321938, "body": "We need to have example data for both formats. It would be best if you actually wrote a unit test and included that. For an example of how to write unit tests for the coloring stuff, feel free to borrow from <a href=\"https://github.com/burnersk/Dancer2-Logger-Console-Colored/blob/master/t/logger_console_colored.t\" rel=\"nofollow noreferrer\">my tests of the module Dancer2::Logger::Console::Colored</a>."}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1512586703, "post_id": 47681411, "comment_id": 82322187, "body": "If the task is to colorize YAML, you could also have a look at <a href=\"http://p3rl.org/YAML::PP\" rel=\"nofollow noreferrer\">YAML::PP</a> (disclaimer: from myself). It can highlight YAML, and since YAML is (almost) a superset of JSON, it can colorize JSON, too. But the highlighting is different currently from what you want, i think."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "reply_to_user": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1512586945, "post_id": 47681411, "comment_id": 82322314, "body": "@tinita Unfortunately, the machine running the code and downloading the data does not have external web access, only access internally and to specific repositories built by our engineers. Because of this, I am using YAML::Tiny and I am unable to install YAML::PP from CPAN or elsewhere. :-("}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512587075, "post_id": 47681411, "comment_id": 82322378, "body": "@simbabque I will look into unit tests. I will post sample data in all 4 formats (json, flattened json, json converted to yaml, and flattened json converted to yaml) -- soon"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512587136, "post_id": 47681411, "comment_id": 82322406, "body": "Ok. Great. I have about one and a half hours of train ride left. :)"}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512587209, "post_id": 47681411, "comment_id": 82322453, "body": "@simbabque looks like your test is against a module. I&#39;m not writing a module. Is it still possible to do? What changes are necessary to make a unit test of a script that is not a module?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512587425, "post_id": 47681411, "comment_id": 82322558, "body": "Well, for this example you can just have a file that includes Test::More (et al) and the functions you want to test. And then run that. If you want to keep those tests around, a good approach would be to <code>do &quot;script.pl&quot;;</code> at the top of your unit test file. That will give you the functions. But it will also run code, so the architecture of your script matters. For now I was just suggesting a test because showing us expected output with terminal colors is going to be ... interesting. ;)"}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1512587904, "post_id": 47681411, "comment_id": 82322834, "body": "Ahah yeah, colors matter, but for the example, not so much. I can work out the colors themselves, I just want to deduplicate as much as I can. As you can tell from the code, the majority of it is duplicate, the only real differences are checking for ARRAY ref in colorize_json vs checking for SCALAR ref in colorize_yaml, and the use of ^ and $ in colorize_json vs \\n in colorize_yaml"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512588007, "post_id": 47681411, "comment_id": 82322888, "body": "Why is the difference in the pattern needed?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512588095, "post_id": 47681411, "comment_id": 82322951, "body": "You need to also show us how you are calling the function. Either add the parsing code, or dump out the data structures after it&#39;s been imported. I don&#39;t particularly care about where it&#39;s coming from for this problem."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1512588455, "post_id": 47681411, "comment_id": 82323155, "body": "The difference in the pattern is needed because in converting from JSON to YAML, the data is dumped into a scalar by <code>Yaml::Tiny</code>&#39;s <code>Dump</code> method, which forces newlines to be present. In raw JSON format, I converted the data to an array first, as it was easier to strip JSON tags from each line of output individually rather than doing it as one giant string. Since we&#39;re not stripping anything from the YAML converted output, it was easier to leave it as one giant string."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512588716, "post_id": 47681411, "comment_id": 82323303, "body": "Oh so you want to highlight it and then output the JSON or YAML to the screen? Now I understand. Is highlighting the values before you convert it an option?"}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1512588861, "post_id": 47681411, "comment_id": 82323374, "body": "Yes, but then <code>YAML::Tiny</code> chokes on the highlighting characters. :-( YAML::PP wouldn&#39;t choke, but it unfortunately cannot be installed on this host without jumping through some massive enterprise hoops."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512589980, "post_id": 47681411, "comment_id": 82323956, "body": "You seem to have written a single-purpose JSON/YAML parser. I think I would convert both to Perl data and display and colourise that instead."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1512590171, "post_id": 47681411, "comment_id": 82324043, "body": "One thing I don&#39;t understand ... the code under <code>foreach</code> loop in these functions appear identical.  Is that correct? You are only asking how to make it process either scalarref or arrayref?"}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1512590215, "post_id": 47681411, "comment_id": 82324064, "body": "Suggestions on how to accomplish that are greatly welcome. The only real need for <code>use JSON</code> and <code>use YAML::Tiny</code> is for flipping the JSON data from the website, to YAML format for the purposes of displaying the data on screen. If I can do it with Perl data, and still get the output in either plain text or YAML, that would be so much better."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1512590270, "post_id": 47681411, "comment_id": 82324103, "body": "@zdim almost identical. The pattern match part of the <code>s&#47;&#47;&#47;</code> lines is <b><i>slightly</i></b> different."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1512590599, "post_id": 47681411, "comment_id": 82324281, "body": "ok, I see now ... that <code>^</code> ... that&#39;s it?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1512803899, "post_id": 47681411, "comment_id": 82413087, "body": "Broke up a few very long lines -- it is hard to follow code when one has to scroll far to the right. By all means please roll back if you don&#39;t like it (or of course touch up if some details are a bother)."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1512593892, "post_id": 47682936, "comment_id": 82326074, "body": "@Speeddymon  The initial code wasn&#39;t doing quite as in your question, corrected."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1512595003, "post_id": 47682936, "comment_id": 82326647, "body": "Just got back from a meeting and will try this out. Thanks!"}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1512606786, "post_id": 47682936, "comment_id": 82331294, "body": "After playing around with it some, it turns out that the <code>map</code> function is compiling the variables properly, but is not producing the desired output.  Instead of declaring the 4 $seg?_re variables with the <code>map</code>, I had to declare them as below:  <code>my $seg2_re = qr{$ANCHOR${patt}($anc$LAST)}xms; my $seg3_re = qr{$ANCHOR${patt}${patt}($anc$LAST)}xms; my $seg4_re = qr{$ANCHOR${patt}${patt}${patt}($anc$LAST)}xms; my $seg5_re = qr{$ANCHOR${patt}${patt}${patt}${patt}($anc$LAST)}xms;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1512607110, "post_id": 47682936, "comment_id": 82331367, "body": "@Speeddymon Alright, thank you for feedback!  In my limited tests in worked, apparently I pushed it too far.  Will fix or otherwise update (write them one by one if <code>map</code> can&#39;t be leveraged).  (Need to run right now)"}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1512608313, "post_id": 47682936, "comment_id": 82331604, "body": "I took care, added the updated code into my OP and awarded you the answer. Thank you for your help. It was really just a matter of needing to understand that you <i>can</i> use variable names in the matching section of <code>s&#47;&#47;&#47;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1512620804, "post_id": 47682936, "comment_id": 82334545, "body": "@Speeddymon  Thank you for such good feedback and for the attribution. The problem was <code>$patt{2}</code> -- when <code>$patt</code> has capturing parenthesis it doesn&#39;t work as intended.  I&#39;ve changed that to <code>$patt x 2</code> (in <code>map</code> so &quot;2&quot; is really <code>$_</code>) and it now works in my more extensive (still mock-up) tests.  Another problem would be that I had code which first replaces 2 instances, then 3 ... that wouldn&#39;t work; fixed.  Finally,  add flags in <code>s{}{}FLAGS</code> as suitable."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1512621389, "post_id": 47682936, "comment_id": 82334691, "body": "@Speeddymon Another omission was <code>$OUTPUT</code> instead of <code>$$OUTPUT</code> (no need for parens); fixed"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1512641172, "post_id": 47682936, "comment_id": 82343879, "body": "@Speeddymon  Added a comment at the end, cleaned up a little throughout"}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1512683654, "post_id": 47682936, "comment_id": 82369029, "body": "Thanks for the updates. It didn&#39;t occur to me to split up the pattern in the <code>map</code> in order to get the desired result. Also, thanks for the feedback on the substitution. I had originally done it that way because of perlcritic complaining that the function was too complex, but with some other changes I made, it reduced the complexity enough that I was able to wrap it in an <code>if</code>, as you had suggested. which definitely is easier to read!"}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1512684544, "post_id": 47682936, "comment_id": 82369425, "body": "One more question. I noticed in your code you used <code>qr&#47;&#47;</code> throughout, rather than just <code>q&#47;&#47;</code> and <code>qq&#47;&#47;</code>, and then having <code>qr&#47;&#47;</code> in the map itself be the only <code>qr&#47;&#47;</code>-- Is there a reason for that? Having only the two <code>qr&#47;&#47;</code> in the map, with the rest being <code>q&#47;&#47;</code> and <code>qq&#47;&#47;</code> seems to work fine for me."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1512707792, "post_id": 47682936, "comment_id": 82375484, "body": "@Speeddymon    The <code>map</code> way is more compact and general but spelling them out as you have it now is easier for review. Then if all is well I&#39;ll  rephrase the last part to remove the conditionals (&quot;<i>It appears that...</i>&quot;, &quot;<i>if this is indeed so...</i>&quot;)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1512707938, "post_id": 47682936, "comment_id": 82375514, "body": "@Speeddymon  The <code>qr</code> is better for regex, in general, since one may then use full regex inside.  However, for most of the common regex patterns forming a string with <code>q()</code> works as well.  I&#39;d be careful with double quotes <code>qq()</code> since interpolation may result in surprises (and regex is going to do it &quot;knowingly&quot; anyway once the variable is evaluated for the pattern).  I don&#39;t know why I was inconsistent; I think the <code>q()</code> (that was in the <code>map</code>?) remained from some testing.  Now they are all <code>qr</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1512708231, "post_id": 47682936, "comment_id": 82375581, "body": "@Speeddymon  One more comment, on &quot;Perl Critic.&quot;  It is a useful resource, no question.  However, it <i>is not</i> a definitive code checker -- and it is not meant to be that.  This is an excellent example.  It is plain better, by a long shot, to pull that condition out.  If Critic doesn&#39;t think so ... I&#39;ll review the function and if there is nothing I want to do I&#39;ll leave it; the &quot;critic&quot; can&#39;t tell me how to write code, and if you look at &quot;Perl Best Practices&quot; (the book on which it is tightly based), it doesn&#39;t intend to.  That said, I run it every now and then, as a check and food for thought."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1554611478, "last_edit_date": 1554611478, "creation_date": 1512592087, "answer_id": 47682936, "question_id": 47681411, "link": "https://stackoverflow.com/questions/47681411/merging-2-nearly-identical-functions-in-perl/47682936#47682936", "title": "Merging 2 nearly identical functions in perl", "body": "<p>This answers the question of how to refactor these functions, without any broader context.</p>\n\n<p>One difference is the input: it is either a scalarref or an arrayref.</p>\n\n<p>The more involved two other differences are in the regex: arrayref patterns are anchored and their last alphanumeric pattern ends with <code>\\ .*$</code>, while scalarref ones are not anchored and their last match ends with an escaped space.</p>\n\n<p>Finally, if <code>$OPTIONS-&gt;{color}</code> is false then the whole pattern is replaced by itself, in all cases; so the variable doesn't change. Then the condition should be pulled out.</p>\n\n<pre><code>sub colorize_yaml_json {\n    my ($OUTPUT, $OPTIONS) = @_;\n\n    my $anchor = '';\n    my $last   = qr{\\ };\n    my @iter_refs;\n\n    if    (ref $OUTPUT eq 'SCALAR') { @iter_refs = $$OUTPUT }\n    elsif (ref $OUTPUT eq 'ARRAY')  { \n        @iter_refs = @$OUTPUT;\n        $anchor = qr{^};\n        $last   = qr{\\ .*$};\n    }\n    else {\n        pretty_print_error(...);\n        return;\n    }\n\n    my $anc  = qr{[a-zA-Z0-9]+:};  # alphanumeric with colon\n    my $patt = qr{($anc)};\n\n    my ($seg2_re, $seg3_re, $seg4_re, $seg5_re) = map { \n        qr/$anchor/ . ($patt x $_) . qr/($anc$last)/ \n    } 1..4;\n\n    foreach (@iter_refs) {\n        if ($OPTIONS-&gt;{debug}) {\n            ...\n        }        \n        if ($OPTIONS-&gt;{color}) {\n            s{$seg5_re}{BOLD CYAN $1, ... }gxmse;\n            ...\n        }\n    }\n    return 1;\n}\n</code></pre>\n\n<p>The <code>map</code> assembles the whole pattern for the four cases, by stacking the alphanumeric (with <code>:</code>) pattern <code>$patt</code> the needed 2&ndash;5 times, using <code>x N</code> for <code>1..4</code> and then appending the last pattern.  </p>\n\n<p>The unpleasant complication is that each of base patterns <code>$anc</code> need be captured.</p>\n\n<p>I could only test this on my mock-up data so please check carefully (as always!).</p>\n\n<p>There is also the other issue of how to best handle the whole scenario, but that wasn't the question and so there isn't enough information to deal with it without much guessing.</p>\n"}], "owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 47682936, "answer_count": 1, "score": 2, "last_activity_date": 1554611478, "creation_date": 1512585991, "last_edit_date": 1512803788, "question_id": 47681411, "link": "https://stackoverflow.com/questions/47681411/merging-2-nearly-identical-functions-in-perl", "title": "Merging 2 nearly identical functions in perl", "body": "<p>I have a script that gets some data from a website. The data comes in JSON format and the site offers an option to \"flatten\" the JSON output into a single JSON object, or leave it as multiple objects.</p>\n\n<p>The script has options that allow for converting the JSON data to YAML (whether flattened or not), or leaving it in JSON format.</p>\n\n<p>In addition the script colorizes the values in both formats.</p>\n\n<p>In order to accomplish the coloring, I currently have 2 functions, one for JSON colorization, and one for YAML colorization.</p>\n\n<p>Colorization itself is achieved with Term::ANSIColor, by searching and replacing the text in either a Scalar or an Array, depending on which output format the data is in.</p>\n\n<p>I would like to get this down to one function in order to reduce the code duplication, but I am at a loss for how to accomplish this.</p>\n\n<p><strong>To be clear</strong>, the main focus of this question, for clarity's sake, is how to make one of the colorization functions reusable so that it can work on both the YAML and the JSON output. Because the search patterns are very very similar, and the replacement patterns are identical, I feel like it should be really easy to accomplish this but I'm drawing a blank on how to do it.</p>\n\n<pre><code>use JSON;\nuse YAML::Tiny;\n\nsub colorize_yaml\n{\n    my $OUTPUT                                                                               = shift;\n    my $OPTIONS                                                                              = shift;\n\n    if (ref $OUTPUT eq 'SCALAR')\n    {\n        foreach (${$OUTPUT})\n        {\n\n            # Hide this if debugging is disabled, else show it and color it\n            if (!$OPTIONS-&gt;{debug})\n            {\n                s{(statusCode|success|dataExist|verumModelObjectName):\\ [a-zA-Z0-9]+\\n}\n{}gxms;\n            }\n            else\n            {\n            s{(statusCode|success|dataExist|verumModelObjectName):}\n{$OPTIONS-&gt;{color} ? BOLD YELLOW $1 . ':', BOLD GREEN : $1 . ':'}gxmse;\n            }\n\n            # Colorize 5 segment flat output\n            s{([a-zA-Z0-9]+:)([a-zA-Z0-9]+:)([a-zA-Z0-9]+:)([a-zA-Z0-9]+:)([a-zA-Z0-9]+:\\ )}\n{$OPTIONS-&gt;{color} ? BOLD CYAN $1, BOLD YELLOW $2, BOLD MAGENTA $3, BOLD RED $4, RESET $5: $1 . $2 . $3 . $4 . $5}gxmse;\n\n            # Colorize 4 segment flat output\n            s{([a-zA-Z0-9]+:)([a-zA-Z0-9]+:)([a-zA-Z0-9]+:)([a-zA-Z0-9]+:\\ )}\n{$OPTIONS-&gt;{color} ? BOLD CYAN $1, BOLD YELLOW $2, BOLD MAGENTA $3, RESET $4 : $1 . $2 . $3 . $4}gxmse;\n\n            # Colorize 3 segment flat output\n            s{([a-zA-Z0-9]+:)([a-zA-Z0-9]+:)([a-zA-Z0-9]+:\\ )}\n{$OPTIONS-&gt;{color} ? BOLD CYAN $1, BOLD YELLOW $2, RESET $3 : $1 . $2 . $3}gxmse;\n\n            # Colorize 2 segment flat output\n            s{([a-zA-Z0-9]+:)([a-zA-Z0-9]+:\\ )}\n{$OPTIONS-&gt;{color} ? BOLD CYAN $1, RESET $2 : $1 . $2}gxmse;\n\n            # Colorize values in all output\n            s{(:\\ )}\n{$OPTIONS-&gt;{color} ? $1 . BOLD GREEN : $1}gxmse;\n\n            # Reset colors before newlines so that the next line starts with a clean color pattern.\n            s{\\n}\n{$OPTIONS-&gt;{color} ? RESET \"\\n\" : \"\\n\"}gxmse;\n        }\n    }\n    else\n    {\n        pretty_print_error(\"WARNING: Unable to colorize YAML output\\n\", $OPTIONS-&gt;{color});\n        return;\n    }\n\n    return;\n}\n\nsub colorize_json\n{\n    my $OUTPUT                                                                               = shift;\n    my $OPTIONS                                                                              = shift;\n\n    if (ref $OUTPUT eq 'ARRAY')\n    {\n        foreach (@{$OUTPUT})\n        {\n            if ($OPTIONS-&gt;{debug})\n            {\n                s{(statusCode|success|dataExist|verumModelObjectName):}\n{$OPTIONS-&gt;{color} ? BOLD YELLOW $1 . ':', BOLD GREEN : $1 . ':'}gxmse;\n            }\n            else\n            {\n                s{(statusCode|success|dataExist|verumModelObjectName):\\ [a-zA-Z0-9]+\\n}\n{}gxms;\n            }\n\n            # Colorize 5 segment flat output\n            s{^([a-zA-Z0-9]+:)([a-zA-Z0-9]+:)([a-zA-Z0-9]+:)([a-zA-Z0-9]+:)([a-zA-Z0-9]+:\\ .*$)}\n{$OPTIONS-&gt;{color} ? BOLD CYAN $1, BOLD YELLOW $2, BOLD MAGENTA $3, BOLD RED, $4, RESET $5: $1 . $2 . $3 . $4 . $5}gxmse;\n\n            # Colorize 4 segment flat output\n            s{^([a-zA-Z0-9]+:)([a-zA-Z0-9]+:)([a-zA-Z0-9]+:)([a-zA-Z0-9]+:\\ )}\n{$OPTIONS-&gt;{color} ? BOLD CYAN $1, BOLD YELLOW $2, BOLD MAGENTA $3, RESET $4 : $1 . $2 . $3 . $4}gxmse;\n\n            # Colorize 3 segment flat output\n            s{^([a-zA-Z0-9]+:)([a-zA-Z0-9]+:)([a-zA-Z0-9]+:\\ )}\n{$OPTIONS-&gt;{color} ? BOLD CYAN $1, BOLD YELLOW $2, RESET $3 : $1 . $2 . $3}gxmse;\n\n            # Colorize 2 segment flat output\n            s{^([a-zA-Z0-9]+:)([a-zA-Z0-9]+:\\ )}\n{$OPTIONS-&gt;{color} ? BOLD CYAN $1, RESET $2 : $1 . $2}gxmse;\n\n            # Colorize values in all output\n            s{(:\\ )}\n{$OPTIONS-&gt;{color} ? $1 . BOLD GREEN : $1}gxmse;\n\n            # Reset colors before newlines so that the next line starts with a clean color pattern.\n            s{$}\n{$OPTIONS-&gt;{color} ? RESET '' : ''}gxmse;\n        }\n    }\n    else\n    {\n        pretty_print_error(\"WARNING: Unable to colorize JSON output.\\n\", $OPTIONS-&gt;{color});\n        return;\n    }\n\n    return;\n}\n</code></pre>\n\n<p>JSON converted to YAML</p>\n\n<pre><code>---\nmessage: Success\nObjectList:\n  -\n    assetName: xxxxxxxx\n    backupAsset:\n      -\n        backupFlag: xxxxxxxx\n        fullyCertified: xxxxxxxx\n</code></pre>\n\n<p>Flattened JSON converted to YAML</p>\n\n<pre><code>---\nmessage: Success\nverumObjectList:\n  -\n    assetName: xxxxxxxx\n    backupAsset:backupFlag: xxxxxxxx\n    backupAsset:fullyCertified: xxxxxxxx\n</code></pre>\n\n<p>JSON (the data in JSON format is stripped by the script to make it plain text)</p>\n\n<pre><code>assetName: xxxxxxxx\nbackupFlag: xxxxxxxx\nfullyCertified: xxxxxxxx\nmessage: Success\n</code></pre>\n\n<p>Flattened JSON (the data in JSON format is stripped by the script to make it plain text)</p>\n\n<pre><code>assetName: xxxxxxxx\nbackupAsset:backupFlag: xxxxxxxx\nbackupAsset:fullyCertified: xxxxxxxx\nmessage: Success\n</code></pre>\n\n<hr>\n\n<p>The correct answer is awarded to @zdim though I did have to tweak the code slightly.</p>\n\n<p>I'm posting my updated code below.</p>\n\n<pre><code>use JSON;\nuse YAML::Tiny;\n\nsub colorize_output\n{\n    my $OUTPUT   = shift;\n    my $OPTIONS  = shift;\n\n    my $RE_START = $EMPTY;\n    my $RE_END   = q{\\ };\n\n    if (ref $OUTPUT eq $EMPTY)\n    {   \n        pretty_print_error(\"WARNING: Unable to colorize output.\\n\", \n            $OPTIONS-&gt;{color});\n        return;\n    }   \n    elsif (ref $OUTPUT eq 'ARRAY')\n    {   \n        $RE_START = q{^};\n        $RE_END   = q{\\ .*};\n    }   \n\n    my $ANCHOR    = q{[a-zA-Z0-9]+:};\n    my $PATTERN   = qq{($ANCHOR)};\n\n    Readonly my $SEGMENT_LIMIT =&gt; 4;\n\n    my $VERUM_RE = qr{(statusCode|success|dataExist|verumModelObjectName):}xms;\n\n    my ($SEGMENT_2PART_RE, $SEGMENT_3PART_RE, $SEGMENT_4PART_RE, $SEGMENT_5PART_RE)\n        = map { \n            qr{$RE_START}xms . ($PATTERN x $ARG) . qr{($ANCHOR$RE_END)}xms \n        } 1..$SEGMENT_LIMIT;\n\n    foreach ((ref $OUTPUT eq 'SCALAR')?${$OUTPUT}:@{$OUTPUT})\n    {   \n\n        # Hide this if debugging is disabled, else show it and color it\n        if (!$OPTIONS-&gt;{debug})\n        {   \n            s{$VERUM_RE\\ [a-zA-Z0-9]+}{}gxms;\n        }   \n        else\n        {   \n            s{$VERUM_RE}\n             {$OPTIONS-&gt;{color} ? BOLD YELLOW $1 . ':', BOLD GREEN : $1 . ':'}gxmse;\n        }   \n\n        # Colorize sections in flat output\n        if ($OPTIONS-&gt;{color})\n        {   \n            s{$SEGMENT_5PART_RE}\n             {BOLD CYAN $1, BOLD YELLOW $2, BOLD MAGENTA $3, BOLD RED $4, RESET $5}gxmse;\n            s{$SEGMENT_4PART_RE}\n             {BOLD CYAN $1, BOLD YELLOW $2, BOLD MAGENTA $3, RESET $4}gxmse;\n            s{$SEGMENT_3PART_RE}\n             {BOLD CYAN $1, BOLD YELLOW $2, RESET $3}gxmse;\n            s{$SEGMENT_2PART_RE}\n             {BOLD CYAN $1, RESET $2}gxmse;\n\n            # Colorize values in all output\n            s{(:\\ )}{$1 . BOLD GREEN}gxmse;\n\n            # Reset colors before newlines or next entry in the list so that\n            # the next line starts with a clean color pattern.\n            s{(\\n|$)}{RESET $1}gxmse;\n        }   \n    }   \n\n    return;\n}   \n</code></pre>\n"}, {"tags": ["perl", "oop"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1512577307, "post_id": 47678849, "comment_id": 82316951, "body": "Are you talking about Perl 5 or Perl 6? Those are two different languages. Please <a href=\"https://stackoverflow.com/posts/47678849/edit\">edit</a> and remove the tag that does not apply. Why do you want to create an instance of your class INSIDE THE DECLARATION of that class? And what error message? Please <a href=\"https://stackoverflow.com/posts/47678849/edit\">edit</a> and copy/paste the <b>exact</b> error message."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1512577899, "post_id": 47678849, "comment_id": 82317331, "body": "I&#39;ve fixed the indentation of your code. You&#39;re welcome, but please do it yourself in the future. Good indentation is an important tool for helping people to understand your code. And if you&#39;re asking a group of strangers to read and understand your code, then it&#39;s polite to make that as easy as possible for them."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1512585364, "post_id": 47678849, "comment_id": 82321545, "body": "Note that the <a href=\"https://metacpan.org/pod/MooseX::Declare\" rel=\"nofollow noreferrer\">documentation for MooseX::Declare</a> is very clear that the module is deprecated. You should not be using it."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1512625978, "post_id": 47678849, "comment_id": 82336102, "body": "@anop.perl: Your last edit undid the formatting fix that I made. That&#39;s not very nice. I&#39;ve re-applied them for you. And now you seem to have methods defined inside a method. Not sure what you think that is going to achieve."}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 3424992, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007335999152/picture?type=large", "display_name": "Anop Singh Ranawat", "link": "https://stackoverflow.com/users/3424992/anop-singh-ranawat"}, "edited": false, "score": 0, "creation_date": 1512578389, "post_id": 47679063, "comment_id": 82317648, "body": "thanks,  but how to create object inside class using MooseX::Declare. getValueFromInfoColum(&quot;singh&quot;) and getValueFromFormatColum(&quot;ranawat&quot;) both are methods inside class"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 79, "user_id": 3424992, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007335999152/picture?type=large", "display_name": "Anop Singh Ranawat", "link": "https://stackoverflow.com/users/3424992/anop-singh-ranawat"}, "edited": false, "score": 1, "creation_date": 1512578569, "post_id": 47679063, "comment_id": 82317743, "body": "@anop.perl: I have no idea what that means. Please edit your question to clarify what you are trying to do."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512579266, "post_id": 47679063, "comment_id": 82318204, "body": "Re &quot;<i>You can&#39;t just call them without an object</i>&quot;, It that true? Or did you mean you can&#39;t call them without an <i>invocant</i>. I suspect you can use <code>__PACKAGE__-&gt;method()</code> for a class method."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512581701, "post_id": 47679063, "comment_id": 82319694, "body": "@ikegami: You&#39;re right, of course. I was trying to to keep the explanation simple. Perhaps I over-simplified. I&#39;ve added an update to my answer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512581885, "post_id": 47679063, "comment_id": 82319783, "body": "Yeah, but you go own to ask &quot;why would you call them from within the class definition anyway?&quot;. If they&#39;re class methods, it makes sense. That said, the method names don&#39;t suggest class methods."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512585959, "post_id": 47679063, "comment_id": 82321799, "body": "@ikegami: The documentation is vague, but the error message (&quot;Validation failed for &#39;Tuple[Object,Any]&#39;&quot;) makes me think that the <code>method</code> keyword is only for defining object methods. Anyway, the module is heavily deprecated, so it shouldn&#39;t be used anyway."}, {"owner": {"reputation": 79, "user_id": 3424992, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007335999152/picture?type=large", "display_name": "Anop Singh Ranawat", "link": "https://stackoverflow.com/users/3424992/anop-singh-ranawat"}, "edited": false, "score": 0, "creation_date": 1512712547, "post_id": 47679063, "comment_id": 82376886, "body": "thanks Dave Cross, but still it is not working, i have modified code as you suggested."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 79, "user_id": 3424992, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007335999152/picture?type=large", "display_name": "Anop Singh Ranawat", "link": "https://stackoverflow.com/users/3424992/anop-singh-ranawat"}, "edited": false, "score": 0, "creation_date": 1512714602, "post_id": 47679063, "comment_id": 82377586, "body": "@anop.perl: &quot;still it is not working&quot; is not exactly helpful. Exactly what unexpected behaviour are you seeing? Edit your question, show us the exact code that you are using."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1512723773, "post_id": 47679063, "comment_id": 82381525, "body": "Ah. I&#39;ve just seen (and fixed) the error that I copied from an earlier version of your code. Sorry about that."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1512723707, "last_edit_date": 1512723707, "creation_date": 1512577727, "answer_id": 47679063, "question_id": 47678849, "link": "https://stackoverflow.com/questions/47678849/how-to-call-method-inside-class-using-moosexdeclare/47679063#47679063", "title": "how to call method inside class using MooseX::Declare", "body": "<p>Some confusion here. I'm not sure what you think this two lines are doing:</p>\n\n<pre><code>getValueFromInfoColum(\"singh\");\ngetValueFromFormatColum(\"ranawat\");\n</code></pre>\n\n<p>These are methods inside your class and need to be called on an object, i.e. like <code>$some_object-&gt;getValueFromInfoColumn($string)</code>. You can't just call them without an object (<strong>update:</strong> well, strictly, without an object or a class) as you do in this example. And why would you call them from within the class definition anyway?</p>\n\n<p>With those two lines commented out, your code works as expected (although, it's more common for the class definition and the code that uses the class to be in separate files). But until you explain more about what you think those calls are doing, it's hard to give better advice than \"remove the two broken lines\".</p>\n\n<p><strong>Update:</strong> Also, note that class names in all lower case are reserved for <em>pragmata</em> - that is classes that change the behaviour of the Perl compiler simply by being loaded. Your class is not one of these, so you shouldn't use an all-lowercase name for it.</p>\n\n<p><strong>Update 2:</strong> Now you have added this to the question:</p>\n\n<blockquote>\n  <p>now i want to call \"getValueFromInfoColum\" and \"getValueFromFormatColum\" both method from inside \"info_vcf_function\" method. how to do this ?</p>\n</blockquote>\n\n<p>That's simple. You call a method on a particular object. Inside a method, the current object will be in the <code>$self</code> variable. So I think you want this:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse MooseX::Declare;\n\nclass info_vcf {\n\n    method info_vcf_function($selectedVariant) {\n        print \"$selectedVariant\";\n        $self-&gt;getValueFromInfoColum(\"singh\");\n        $self-&gt;getValueFromFormatColum(\"ranawat\");\n    }\n\n    method getValueFromInfoColum($flag){\n        print \"$flag\\n\";\n    }\n\n    method getValueFromFormatColum($flag){\n        print \"$flag\\n\";\n    }\n}\n1;\n\nmy $object = info_vcf-&gt;new();\n$object-&gt;info_vcf_function(\"anop\");\n</code></pre>\n\n<p>As I said in a comment, <a href=\"https://metacpan.org/pod/MooseX::Declare\" rel=\"nofollow noreferrer\">MooseX::Declare</a> is deprecated. That means you shouldn't be using it for new code. The documentation recommends using <a href=\"https://metacpan.org/pod/Moops\" rel=\"nofollow noreferrer\">Moops</a> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 3424992, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007335999152/picture?type=large", "display_name": "Anop Singh Ranawat", "link": "https://stackoverflow.com/users/3424992/anop-singh-ranawat"}, "is_accepted": false, "score": 0, "last_activity_date": 1512714960, "creation_date": 1512714960, "answer_id": 47708972, "question_id": 47678849, "link": "https://stackoverflow.com/questions/47678849/how-to-call-method-inside-class-using-moosexdeclare/47708972#47708972", "title": "how to call method inside class using MooseX::Declare", "body": "<p>thanks everyone, finally its working </p>\n\n<pre><code>#!/usr/bin/perl -w\nuse MooseX::Declare;\n\nclass info_vcf {\n\n    method info_vcf_function($selectedVariant) {\n        print \"$selectedVariant\";\n        $self-&gt;getValueFromInfoColum(\"singh\");\n        $self-&gt;getValueFromFormatColum(\"ranawat\");\n    }\n\n    method getValueFromInfoColum($flag){\n        print \"$flag\\n\";\n    }\n\n    method getValueFromFormatColum($flag){\n        print \"$flag\\n\";\n    }\n}\n1;\n\nmy $object = info_vcf-&gt;new();\n$object-&gt;info_vcf_function(\"anop\");\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 3424992, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007335999152/picture?type=large", "display_name": "Anop Singh Ranawat", "link": "https://stackoverflow.com/users/3424992/anop-singh-ranawat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 2, "score": -6, "last_activity_date": 1512723707, "creation_date": 1512577005, "last_edit_date": 1512715084, "question_id": 47678849, "link": "https://stackoverflow.com/questions/47678849/how-to-call-method-inside-class-using-moosexdeclare", "title": "how to call method inside class using MooseX::Declare", "body": "<p>here \"info_vcf\" is a class where \"info_vcf_function\" is a method. \"getValueFromInfoColum\" and \"getValueFromFormatColum\" both are method which are present inside the \"info_vcf_function\" method.\nnow i want to call \"getValueFromInfoColum\" and \"getValueFromFormatColum\" both method from inside \"info_vcf_function\" method. how to do this ? </p>\n\n<p>it gives me error \" Validation failed for 'Tuple[Tuple[Object,Any],Dict[]]' with value \"[ [ info_vcf=HASH(0x1ac7fd0), info_vcf=HASH(0x1ac7fd0), \"anop\" ], {  } ], Internal Validation Error is: \\n [+] Valida\ntion failed for 'Tuple[Object,Any]' with value \"[ info_vcf={  }, info_vcf={  }, \"anop\" ]\"\\n  [+] More values than Type Constraints!\" at /usr/local/share/perl/5.22.1/MooseX/Method/Signat\nures/Meta/Method.pm line 432.\n        MooseX::Method::Signatures::Meta::Method::validate(MooseX::Method::Signatures::Meta::Method=HASH(0x3bd0e60), ARRAY(0x3154e80)) called at /usr/local/share/perl/5.22.1/MooseX/Meth\nod/Signatures/Meta/Method.pm line 148\n        info_vcf::info_vcf_function(info_vcf=HASH(0x1ac7fd0), info_vcf=HASH(0x1ac7fd0), \"anop\") called at testone.pl line 24 \"</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse MooseX::Declare;\n\nclass info_vcf {\n\n    method info_vcf_function($selectedVariant) {\n\n        print \"$selectedVariant\";\n        getValueFromInfoColum(\"singh\");\n        getValueFromFormatColum(\"ranawat\");\n\n    }\n        method getValueFromInfoColum($flag){\n            print \"$flag\\n\";\n        }\n        method getValueFromFormatColum($flag){\n            print \"$flag\\n\";\n        }\n\n\n}\n1;\n\nmy $object = info_vcf-&gt;new();\n$object-&gt;info_vcf_function(\"anop\");\n</code></pre>\n"}, {"tags": ["c", "perl", "static-analysis", "scitools"], "comments": [{"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1512560851, "post_id": 47673327, "comment_id": 82305900, "body": "Did you try <code>grep -n</code>?"}, {"owner": {"reputation": 91, "user_id": 8493544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f4539639584aec545c86113861b4a7b?s=128&d=identicon&r=PG&f=1", "display_name": "EnsieT", "link": "https://stackoverflow.com/users/8493544/ensiet"}, "reply_to_user": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1512561125, "post_id": 47673327, "comment_id": 82306078, "body": "Dear @cdarke , Thanks for the quick response. Once I get the lexeme, then I can look for the substring using grep etc.. Thing is , I&#39;m not sure , if there is a lexer that I can loop in the entire .c file and even if it is possible, I believe it would not be efficient. Have you already used  Understand for c/c++?"}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1512561305, "post_id": 47673327, "comment_id": 82306175, "body": "I know Perl and I know C and C++, but I don&#39;t know Understand, sorry."}, {"owner": {"reputation": 91, "user_id": 8493544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f4539639584aec545c86113861b4a7b?s=128&d=identicon&r=PG&f=1", "display_name": "EnsieT", "link": "https://stackoverflow.com/users/8493544/ensiet"}, "reply_to_user": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1512561511, "post_id": 47673327, "comment_id": 82306299, "body": "no problem. Thanks anyways @cdarke."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512568646, "post_id": 47673327, "comment_id": 82310885, "body": "<b>cdarke</b> is referring to the <i>command line</i> <code>grep</code> tool. There is no need to involve Understand just to find a string in some files."}, {"owner": {"reputation": 91, "user_id": 8493544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f4539639584aec545c86113861b4a7b?s=128&d=identicon&r=PG&f=1", "display_name": "EnsieT", "link": "https://stackoverflow.com/users/8493544/ensiet"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512570237, "post_id": 47673327, "comment_id": 82311951, "body": "Thanks @Borodin. Well, I understand what you say but thing is, the perl script is just one small part of another process. So, lot of other things are involved inside and outside of the script including how it is being executed. That&#39;s the reason why I would like to insert a small functionality inside the existing script. Hope you got my point."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512582615, "post_id": 47673327, "comment_id": 82320173, "body": "Especially with something obscure, you&#39;ll need to do better than that. Add a link to Understand&#39;s docs, code that does something similar, etc"}, {"owner": {"reputation": 91, "user_id": 8493544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f4539639584aec545c86113861b4a7b?s=128&d=identicon&r=PG&f=1", "display_name": "EnsieT", "link": "https://stackoverflow.com/users/8493544/ensiet"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512600516, "post_id": 47673327, "comment_id": 82329129, "body": "Sorry @ikegami , added link to online manual including sample codes in the description."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512680694, "post_id": 47673327, "comment_id": 82367612, "body": "What problem are you having? Getting the entity, or searching a string for another string?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1512680992, "creation_date": 1512680992, "answer_id": 47703824, "question_id": 47673327, "link": "https://stackoverflow.com/questions/47673327/how-to-find-a-specific-string-in-a-c-file-using-the-perl-api-of-scitools-unde/47703824#47703824", "title": "How to find a specific string in a .c file using the perl api of (Scitools) Understand?", "body": "<p>Sounds like you simply want</p>\n\n<pre><code>  use Understand qw( );\n\n  my $db = Understand::open(\"test.udb\");\n\n  # Find all 'File' entities that match test*.cpp\n  for my $file_ent ($db-&gt;lookup(\"test*.cpp\",\"File\")) {\n       my $file_contents = $file_ent-&gt;contents();\n       printf \"File %s matches\", $file_ent-&gt;name\n          if $file_contents =~ /pattern/;\n  }\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 8493544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f4539639584aec545c86113861b4a7b?s=128&d=identicon&r=PG&f=1", "display_name": "EnsieT", "link": "https://stackoverflow.com/users/8493544/ensiet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1512680992, "creation_date": 1512560132, "last_edit_date": 1512631578, "question_id": 47673327, "link": "https://stackoverflow.com/questions/47673327/how-to-find-a-specific-string-in-a-c-file-using-the-perl-api-of-scitools-unde", "title": "How to find a specific string in a .c file using the perl api of (Scitools) Understand?", "body": "<p>I'm trying to analyse a code base (many .c files) by writing Perl script using (Scitools) Understand's Perl API.</p>\n\n<p>I'm aware that list of variables, functions etc. are easy to obtain for a given .c file. </p>\n\n<p>Probably someone who has worked with <a href=\"https://scitools.com/documents/manuals/perl/\" rel=\"nofollow noreferrer\">Understand</a> Perl API could point me in the right direction to search for a specific string that is present in many lines of a file? and possible return the line number?</p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512558530, "post_id": 47672791, "comment_id": 82304566, "body": "You want us to explain what those two lines of code do? They create a new parser object to parse an XML file, where the name is dynamically created from the loop iteration variable. Then the file is parsed, and the returned hash reference is dereferenced into a new lexical hash variable. However, that&#39;s not an on-topic question on Stack Overflow. If you need to change that code, and you are having trouble doing that, please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, try on your own first, and then post a new question explaining <i>what</i> and <i>how</i> you are trying to do, what the input and expected outcome is, and why."}, {"owner": {"reputation": 1739, "user_id": 1017373, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/886b798dad527c0a22b68afae6a18d78?s=128&d=identicon&r=PG", "display_name": "user1017373", "link": "https://stackoverflow.com/users/1017373/user1017373"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512558844, "post_id": 47672791, "comment_id": 82304757, "body": "Thanks, @simbabque and I edited my question with the error I get when I tried for myself . its a learning script"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1512559004, "post_id": 47672791, "comment_id": 82304871, "body": "Ok now this is a different story. The error message means that your <code>$xml</code> variable (which was supposed to come out of <code>XML::Bare-&gt;new</code> is a literal zero <code>0</code>. Something went wrong when creating that object. First, use Data::Dumper to output it after it was created. Check what it says. Then verify that your XML::Bare is installed properly. Check which version you have. (<code>$ perl -MXML::Bare\\ 99</code> on commandline, including the backslash-space). Also, why are you using XML::Bare? I&#39;ve never heard of it before, and it&#39;s not been updated in nearly 5 years."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1512559075, "post_id": 47672791, "comment_id": 82304914, "body": "I would probably go with a different parser. From the little docs this XML::Bare looks a lot like XML::Simple, which also just parses XML into a data structure, but is very much discouraged, even by its maintainers, and not very popular around here. Maybe XML::Twig or XML::Compile are more suitable to your task. Whatever that is, you&#39;re not telling us."}, {"owner": {"reputation": 1739, "user_id": 1017373, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/886b798dad527c0a22b68afae6a18d78?s=128&d=identicon&r=PG", "display_name": "user1017373", "link": "https://stackoverflow.com/users/1017373/user1017373"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512559426, "post_id": 47672791, "comment_id": 82305104, "body": "I checked perl -MXML::Bare\\ 99 on command line and it says as following, XML::Bare version 99 required--this is only version 0.53. well this is a test script I got from online which I need to fill in foreach loop after my %root =%{$xml-&gt;parse()}"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512559595, "post_id": 47672791, "comment_id": 82305195, "body": "So you have the newest version. Do you have &#39;use strict&#39; and <code>use warnings</code> in your code? Do you know any Perl at all? A <i>test script</i> doesn&#39;t tell us anything about what you are trying to achieve. And you haven&#39;t answered my question about why XML::Bare."}, {"owner": {"reputation": 1739, "user_id": 1017373, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/886b798dad527c0a22b68afae6a18d78?s=128&d=identicon&r=PG", "display_name": "user1017373", "link": "https://stackoverflow.com/users/1017373/user1017373"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512559685, "post_id": 47672791, "comment_id": 82305249, "body": "Yes I know Perl, basic and maybe a little more. No I do not have use warning in my code or use strict"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512559739, "post_id": 47672791, "comment_id": 82305271, "body": "Start by adding those two, then run again. My guess is you don&#39;t have the module installed properly. Might be it depends on some C library that&#39;s missing, and it doesn&#39;t error properly."}, {"owner": {"reputation": 1739, "user_id": 1017373, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/886b798dad527c0a22b68afae6a18d78?s=128&d=identicon&r=PG", "display_name": "user1017373", "link": "https://stackoverflow.com/users/1017373/user1017373"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512559779, "post_id": 47672791, "comment_id": 82305297, "body": "And you haven&#39;t answered my question about why XML::Bare--&gt;This is what I have from online to start with as a part of academic interest someone sent me this. And I thought to look into it and understand it"}, {"owner": {"reputation": 1739, "user_id": 1017373, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/886b798dad527c0a22b68afae6a18d78?s=128&d=identicon&r=PG", "display_name": "user1017373", "link": "https://stackoverflow.com/users/1017373/user1017373"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512559809, "post_id": 47672791, "comment_id": 82305311, "body": "No I installed the module using CPAN and it said OK as in, /usr/bin/make install  -- OK"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1512560271, "post_id": 47672791, "comment_id": 82305572, "body": "You installed with <code>make</code>? Not with <code>cpan</code> directly? Should work, though uncommon. As a professional Perl developer, let me give you some advice. Don&#39;t invest time into an obscure library that is <a href=\"https://metacpan.org/requires/module/XML::Bare?sort=%5B%5B2,1%5D%5D\" rel=\"nofollow noreferrer\">hardly used anywhere</a>. Instead, learn one of the big ones that people int he industry actually use, like <a href=\"https://p3rl.org/XML::Twig\" rel=\"nofollow noreferrer\">XML::Twig</a>, <a href=\"https://p3rl.org/XML::Compile\" rel=\"nofollow noreferrer\">XML::Compile</a> or even pure <a href=\"https://p3rl.org/XML::LibXML\" rel=\"nofollow noreferrer\">XML::LibXML</a>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1739, "user_id": 1017373, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/886b798dad527c0a22b68afae6a18d78?s=128&d=identicon&r=PG", "display_name": "user1017373", "link": "https://stackoverflow.com/users/1017373/user1017373"}, "edited": false, "score": 0, "creation_date": 1512560314, "post_id": 47672791, "comment_id": 82305597, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/160604/discussion-between-simbabque-and-user1017373\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1739, "user_id": 1017373, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/886b798dad527c0a22b68afae6a18d78?s=128&d=identicon&r=PG", "display_name": "user1017373", "link": "https://stackoverflow.com/users/1017373/user1017373"}, "edited": false, "score": 0, "creation_date": 1512563732, "post_id": 47673927, "comment_id": 82307577, "body": "Thanks for the solution now the script runs, I would like to know what else I can do in the foreach loop, after the hash reference is dereferenced to the new lexical hash variable. i mean %root ?"}], "tags": [], "owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "is_accepted": true, "score": 5, "last_activity_date": 1512563054, "last_edit_date": 1512563054, "creation_date": 1512561980, "answer_id": 47673927, "question_id": 47672791, "link": "https://stackoverflow.com/questions/47672791/xmlbare-cant-locate-object-method-parse-via-package-0/47673927#47673927", "title": "XML::Bare Can&#39;t locate object method &quot;parse&quot; via package &quot;0&quot;", "body": "<p>Apparently <a href=\"http://p3rl.org/XML::Bare\" rel=\"nofollow noreferrer\">http://p3rl.org/XML::Bare</a> returns 0 if a file was not found/could not be opened.\nSo the right way to handle this would be:</p>\n\n<pre><code>my $xml = XML::Bare-&gt;new(...) or die \"Could not open file: $!\";\n</code></pre>\n\n<p>Are you sure the files all exist?</p>\n\n<p>Edit: As @simbabque suggested, I'd also recommend <a href=\"http://p3rl.org/XML::LibXML\" rel=\"nofollow noreferrer\">http://p3rl.org/XML::LibXML</a></p>\n"}], "owner": {"reputation": 1739, "user_id": 1017373, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/886b798dad527c0a22b68afae6a18d78?s=128&d=identicon&r=PG", "display_name": "user1017373", "link": "https://stackoverflow.com/users/1017373/user1017373"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 47673927, "answer_count": 1, "score": 0, "last_activity_date": 1512579673, "creation_date": 1512558258, "last_edit_date": 1512579673, "question_id": 47672791, "link": "https://stackoverflow.com/questions/47672791/xmlbare-cant-locate-object-method-parse-via-package-0", "title": "XML::Bare Can&#39;t locate object method &quot;parse&quot; via package &quot;0&quot;", "body": "<p>I have a script as following,\nis it asked to do in inside the <code>foreach</code> loop.\nThe script is as following,</p>\n\n<pre><code>use XML::Bare;\n\nforeach my $i (1..100){\n   my $xml=XML::Bare-&gt;new(\n    file=&gt;\"/tmp/lcms$i.xml\"\n    );\n    my %root=%{ $xml-&gt;parse() };\n    #..do something with %root...\n}\n</code></pre>\n\n<p>and when I try to run it I have the following error,</p>\n\n<pre><code>Can't locate object method \"parse\" via package \"0\" (perhaps you forgot to load \"0\"?) at telephone.pl line 8\n</code></pre>\n\n<p>I am relatively new to perl XML::Bare module and it would be great if someone would walk me through in this learning curve</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1216, "user_id": 2516349, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d6abeb1e7cd964e12b7d828c62a0d884?s=128&d=identicon&r=PG", "display_name": "Fjut", "link": "https://stackoverflow.com/users/2516349/fjut"}, "edited": false, "score": 3, "creation_date": 1512555509, "post_id": 47671781, "comment_id": 82302488, "body": "Please make sure to provide as much information as possible, as well as some code examples of the  things you &#39;ve already tried. Otherwise, you ll not get help."}, {"owner": {"reputation": 368, "user_id": 8500343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1618f74886ab1cff3eca67c71af07caf?s=128&d=identicon&r=PG&f=1", "display_name": "Jochen Lutz", "link": "https://stackoverflow.com/users/8500343/jochen-lutz"}, "edited": false, "score": 3, "creation_date": 1512555527, "post_id": 47671781, "comment_id": 82302503, "body": "What have you tried? What module, which version?"}, {"owner": {"reputation": 39, "user_id": 7646267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b2f6a39f0f166d665a713516230982f?s=128&d=identicon&r=PG&f=1", "display_name": "Anand ", "link": "https://stackoverflow.com/users/7646267/anand"}, "edited": false, "score": 0, "creation_date": 1512555924, "post_id": 47671781, "comment_id": 82302791, "body": "Active perl 5.24.2"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 1, "creation_date": 1512556415, "post_id": 47671781, "comment_id": 82303103, "body": "@Anand \u2014 What <b>module</b>? You should provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 39, "user_id": 7646267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b2f6a39f0f166d665a713516230982f?s=128&d=identicon&r=PG&f=1", "display_name": "Anand ", "link": "https://stackoverflow.com/users/7646267/anand"}, "edited": false, "score": 0, "creation_date": 1512558162, "post_id": 47671781, "comment_id": 82304298, "body": "sir i want sample code to read macro enable .xlsm file format in perl?"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1512558478, "post_id": 47671781, "comment_id": 82304528, "body": "@Anand \u2014 You have some code already. Show it to us. Explain the problem with it. Get help fixing your code. Don&#39;t throw it away and ask us to show you how to do it from scratch."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1512563528, "post_id": 47671781, "comment_id": 82307464, "body": "Please delete the code comment"}], "answers": [{"tags": [], "owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "is_accepted": false, "score": 0, "last_activity_date": 1512573261, "last_edit_date": 1512573261, "creation_date": 1512566945, "answer_id": 47675523, "question_id": 47671781, "link": "https://stackoverflow.com/questions/47671781/how-to-read-data-from-spreadsheet-with-xlsm-format-in-perl/47675523#47675523", "title": "how to read data from spreadsheet with .xlsm format in perl?", "body": "<p>seems the module you used doesn't work on xlsm files</p>\n\n<p>consider using <code>Spreadsheet::Reader::ExcelXML</code> instead ;)</p>\n\n<p><a href=\"http://search.cpan.org/~jandrew/Spreadsheet-Reader-ExcelXML/lib/Spreadsheet/Reader/ExcelXML.pm\" rel=\"nofollow noreferrer\">http://search.cpan.org/~jandrew/Spreadsheet-Reader-ExcelXML/lib/Spreadsheet/Reader/ExcelXML.pm</a></p>\n\n<p>also beware, you should use <code>push</code> instead of <code>@rows = ...</code>, this way, you won't overwrite <code>@rows</code> at each <code>for</code> iteration</p>\n\n<p>when you try to open a file you should add <code>or die \"error message\";</code> at the end of the open, this way you will see if the file opened correctly</p>\n\n<p><code>my $book = ReadData ('C:\\Perl64\\bin\\sample.xlsm') or die \"error while opening the file\";</code> triggers the error with your example code</p>\n"}], "owner": {"reputation": 39, "user_id": 7646267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b2f6a39f0f166d665a713516230982f?s=128&d=identicon&r=PG&f=1", "display_name": "Anand ", "link": "https://stackoverflow.com/users/7646267/anand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 309, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1512573261, "creation_date": 1512555298, "last_edit_date": 1512563487, "question_id": 47671781, "link": "https://stackoverflow.com/questions/47671781/how-to-read-data-from-spreadsheet-with-xlsm-format-in-perl", "title": "how to read data from spreadsheet with .xlsm format in perl?", "body": "<p>I want read data  from spreadsheet ,which is .xlsm format.I am unable to access it.its showing blank while access the data .so i want how to access .xlsm format in perl.</p>\n\n<p>Here is what I have tried:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Spreadsheet::Read;\nuse Spreadsheet::read qw(ReadData);\n\nmy $book = ReadData ('C:\\Perl64\\bin\\sample.xlsm');\n   foreach my $line(1..1000) {\n           my @rows =Spreadsheet::Read::cellrow($book-&gt;[0],\"$line\");\n           print \"@rows\"; \n}  \n</code></pre>\n"}, {"tags": ["json", "bash", "perl"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1512555598, "post_id": 47671395, "comment_id": 82302574, "body": "There seem to be two separate problems here: how to read the whole JSON file, and how to quote command line parameters. For quoting, it&#39;s important what shell you are using. Are you using Bash on Linux?"}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1512556645, "post_id": 47671395, "comment_id": 82303238, "body": "@amon: yes bash. I don&#39;t have an issue with reading the file. Even if I copy paste to the console the string I get the same issue"}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1512560650, "post_id": 47671395, "comment_id": 82305780, "body": "<code>echo [{&quot;a&quot;:&quot;b&quot;}]</code> outputs <code>[{a:b}]</code>. in bash and zsh"}], "answers": [{"comments": [{"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1512557674, "post_id": 47672310, "comment_id": 82303961, "body": "Your code works but I am confused. Is there a way to make this work regarless of multiline and single line input?"}, {"owner": {"reputation": 368, "user_id": 8500343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1618f74886ab1cff3eca67c71af07caf?s=128&d=identicon&r=PG&f=1", "display_name": "Jochen Lutz", "link": "https://stackoverflow.com/users/8500343/jochen-lutz"}, "reply_to_user": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1512563995, "post_id": 47672310, "comment_id": 82307759, "body": "@Jim: I rewrote the explanation. Please check if it is clearer now."}], "tags": [], "owner": {"reputation": 368, "user_id": 8500343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1618f74886ab1cff3eca67c71af07caf?s=128&d=identicon&r=PG&f=1", "display_name": "Jochen Lutz", "link": "https://stackoverflow.com/users/8500343/jochen-lutz"}, "is_accepted": true, "score": 1, "last_activity_date": 1512569831, "last_edit_date": 1512569831, "creation_date": 1512556963, "answer_id": 47672310, "question_id": 47671395, "link": "https://stackoverflow.com/questions/47671395/can-not-decode-json-string-in-command-line/47672310#47672310", "title": "Can not decode json string in command line", "body": "<p>Perl's <code>-n</code> option \"causes Perl to assume the following loop around your program, which makes it iterate over filename arguments somewhat like sed -n or awk:</p>\n\n<pre><code>  LINE:\n    while (&lt;&gt;) {\n    ...     # your program goes here\n    }\n</code></pre>\n\n<p>\" (source: <a href=\"https://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/perlrun.html</a>)</p>\n\n<p><code>&lt;&gt;</code> is perl's input operator, in this case called without a filehandle, so it reads from STDIN. Perl automatically splits the input, the default is to split on line breaks (<code>\\n</code>). This means, that your expression is executed once per input line. Unless your JSON file contains everything in one line, your code will not work!</p>\n\n<p>Perl's special variable <code>$/</code> (aka <code>$INPUT_RECORD_SEPARATOR</code>) controls how perl splits multi-line input when reading with <code>&lt;&gt;</code>. The default value is <code>\\n</code>, so that every line is read separately. By setting it to <code>undef</code>, perl reads the whole input in one go (regardless if it is single-line or multi-line), giving you the complete content of your file in <code>$data</code>.</p>\n\n<p>You also need to remove <code>-n</code> from perl's parameters and read manually from STDIN.</p>\n\n<pre><code>cat jsonfile.json | perl -MData::Dumper -MJSON=decode_json -e '$/=undef; my $data=&lt;&gt;; print decode_json($data)'\n</code></pre>\n\n<p><code>$/=undef;</code> tells perl not to split the input in separate lines.</p>\n\n<p><code>my $data=&lt;&gt;;</code> reads from STDIN. And as we told perl to not split the input, the whole input (your file's complete content) is stored in <code>$data</code>.</p>\n\n<p>As a side node: your code <code>my $data=q{$_};</code> does not do what you seem to expect: <code>q{}</code> is the equivalent of a single quote (<code>'</code>), so <code>$data</code> contains the literal string <code>$_</code> (a dollar sign followed by an underscore), not the content of the variable <code>$_</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1512562059, "post_id": 47672594, "comment_id": 82306634, "body": "The code does not work even as you describe. The snippet of Jochen Lutz works but I am confused about the differences"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1512563457, "post_id": 47672594, "comment_id": 82307413, "body": "@Jim My answer addresses the Bash quoting problems. As explained above, the <code>-n</code> flag reads the input line by line. If something doesn&#39;t work, please explain precisely <i>how</i> it doesn&#39;t work. Jochen Lutz&#39;es code uses correct quoting <i>and</i> reads the whole file in one go, rather than line by line. So maybe that was part of your problem after all."}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1512564546, "post_id": 47672594, "comment_id": 82308114, "body": ":I am not sure if this helps. If I copy the contents of json from the script file and do <code>pbpaste| perl etc</code> it also fails. The json does have new line characters i.e. it is not a single line but I am not sure how I can update the post to help you so I can understand what I am messing up"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1512564842, "post_id": 47672594, "comment_id": 82308310, "body": "@Jim I think I understand. The problem is not how you are supplying the file to Perl, but how Perl is consuming it \u2013 with the <code>-n</code> flag it assumes one JSON document Perl line. Jochen Lutz shows how to avoid that: with <code>local $&#47;; my $data = &lt;&gt;;</code> the whole input can be loaded at once. That is why his solution works."}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1512565755, "post_id": 47672594, "comment_id": 82308935, "body": "So what does <code>$&#47;=undef</code> work? And is <code>my $data = &lt;&gt;;</code> something like the input stream?"}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": false, "score": 2, "last_activity_date": 1512557745, "creation_date": 1512557745, "answer_id": 47672594, "question_id": 47671395, "link": "https://stackoverflow.com/questions/47671395/can-not-decode-json-string-in-command-line/47672594#47672594", "title": "Can not decode json string in command line", "body": "<p>Bash has a number of different quoting modes:</p>\n\n<ul>\n<li><p>within single quotes <code>'...'</code> nothing is expanded. There are no escapes available. So within such quotes you can use <code>$variables</code> without them being expanded as Bash variables. This is desirable for Perl one-liners. But you cannot use single quotes within that string. As a consequence, Perl one-liners should prefer quoting operators such as <code>q(...)</code> within the Perl code.</p></li>\n<li><p>within double quotes <code>\"...\"</code> variables are expanded, and special characters can be escaped. This is not desirable for Perl one-liners.</p></li>\n</ul>\n\n<p>Bash has these quoting modes but not strings. You can switch between quoting modes within one word, so the command line parameter <code>foo\"bar\"baz'qux'</code> is equal to <code>foobarbazqux</code>.</p>\n\n<p>When we look at your JSON snippets:</p>\n\n<ul>\n<li><code>echo [{\"a\":\"b\"}]</code> is equal to <code>echo '[{a:b}]'</code>, because the <code>\"</code> quotes are  stripped. That is not valid JSON.</li>\n<li><code>echo '[{\"a\":\"b\"}]'</code> works as expected, because the double quotes are protected by the single quotes.</li>\n</ul>\n\n<p>Within your Perl oneliners:</p>\n\n<ul>\n<li><p><code>-ne\"print decode_json('$_')\"</code> is a double quoted string. The Bash variable <code>$_</code> expands to the last argument of the previous command. So we are actually passing something like the argument <code>\"-neprint decode_json('RANDOM GARBAGE')\"</code>.</p></li>\n<li><p><code>-ne'my $data=q{$_}; print decode_json($data)'</code> is escaped correctly, as far as Bash is concerned.</p></li>\n</ul>\n\n<p>Both your initial Perl one-liners use single quotes around the <code>$_</code> variable: <code>'$_'</code> and <code>q{$_}</code>. Perl does not interpolate variables into single quoted strings, so you were using the literal string <code>$_</code>, not the value of the <code>$_</code> variable. In these cases no quotes were necessary. If you had to use quotes, double quoted strings like <code>qq{$_}</code> would have been preferable.</p>\n\n<p>Putting all of this together, a command like this should work:</p>\n\n<pre><code>$ perl -MJSON=decode_json -ne'print decode_json($_)' jsonfile.json\n</code></pre>\n\n<p>But note that this reads the file line by line due to the <code>-n</code> flag, i.e. expects one JSON document per line.</p>\n"}], "owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 759, "favorite_count": 0, "accepted_answer_id": 47672310, "answer_count": 2, "score": 2, "last_activity_date": 1512569831, "creation_date": 1512554190, "last_edit_date": 1512557769, "question_id": 47671395, "link": "https://stackoverflow.com/questions/47671395/can-not-decode-json-string-in-command-line", "title": "Can not decode json string in command line", "body": "<p>I have a json that is an array of objects.<br>\nThe following code works just fine:  </p>\n\n<pre><code>use JSON qw( decode_json );  \n# the contents of json are from the file jsonfile.json  \nmy $data='[{...}]'; # omitted for clarity    \n@decoded = @{decode_json($data)};  \nprint Dumper \\@decoded;              \n</code></pre>\n\n<p>But when I try to run it from the command line as an one-liner it breaks  </p>\n\n<p>None of the following work:  </p>\n\n<pre><code>cat jsonfile.json | perl -MData::Dumper -MJSON=decode_json -ne'my $data=q{$_}; print decode_json($data)' \n\n\n\n\ncat jsonfile.json | perl -MData::Dumper -MJSON=decode_json -ne\"print decode_json('$_')\" \n</code></pre>\n\n<p>I think the issue is the quoting. I had the same issue in the script until I replaced <code>qw</code> with <code>\u2019</code> otherwise it would complaint e.g. if an <code>@</code> was in the fields or it was confused with the double quotes of the json fields.  </p>\n\n<p>What am I doing wrong here?  </p>\n\n<p>Another example:<br>\nThis breaks:   </p>\n\n<pre><code>$ echo [{\"a\":\"b\"}] |perl -MData::Dumper -MJSON=decode_json -ne'print decode_json($_)'\nunexpected end of string while parsing JSON string, at character offset 3 (before \":b}]\\n\") at -e line 1.  \n</code></pre>\n\n<p>But this works:  </p>\n\n<pre><code>$ echo '[{\"a\":\"b\"}]'| perl -MData::Dumper -MJSON=decode_json -ne'print decode_json($_)'\nARRAY(0x7fd8d400b2b8)\n</code></pre>\n"}, {"tags": ["perl", "unicode", "html-entities", "mojolicious"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1512550729, "post_id": 47669861, "comment_id": 82299371, "body": "Where do you set the encoding for STDOUT to which <code>print</code> prints by default?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512550958, "post_id": 47669861, "comment_id": 82299486, "body": "It seems odd to <code>print &#39;&lt;hr&#47;&gt;&lt;div&gt;&#39;.$params{msg}.&#39;&lt;&#47;div&gt;&#39;</code> when you have already closed the HTML document with <code>&lt;&#47;html&gt;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512551036, "post_id": 47669861, "comment_id": 82299532, "body": "What is in <code>$params{msg}</code> ?"}, {"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512555135, "post_id": 47669861, "comment_id": 82302234, "body": "@Borodin fixed &amp; updated the question"}, {"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1512555350, "post_id": 47669861, "comment_id": 82302371, "body": "@choroba tried that, it doesn&#39;t help, all non-ascii characters end up as junk"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1512555875, "post_id": 47669861, "comment_id": 82302760, "body": "How did you do it?"}, {"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1512556888, "post_id": 47669861, "comment_id": 82303414, "body": "@choroba added binmode(STDOUT, &quot;:utf8&quot;); to the starting of the script"}, {"owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1516214236, "post_id": 47669861, "comment_id": 83600974, "body": "Please feed just <code>&amp;nbsp;</code> through the script.  And dump the hex of <code>$dom</code> before applying <code>to_string</code>.  I suspect that that html entity is being turned into a non-utf8 byte."}], "answers": [{"comments": [{"owner": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "edited": false, "score": 0, "creation_date": 1552012866, "post_id": 52636717, "comment_id": 96860988, "body": "Why is this not accepted as the answer to the question? In a piece of code I have been struggling with that has a similar issue to the one you&#39;re describing, @Grinnz answer seems has been helpful."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 2, "last_activity_date": 1538607038, "creation_date": 1538607038, "answer_id": 52636717, "question_id": 47669861, "link": "https://stackoverflow.com/questions/47669861/nbsp-malformed-while-using-mojodom/52636717#52636717", "title": "NBSP malformed while using Mojo::DOM", "body": "<p>Mojo::DOM expects to be working with characters, not UTF-8 encoded bytes, and so it's likely that it decodes <code>&amp;nbsp;</code> to a character that then needs to be encoded to UTF-8 before output. The old CGI module does not decode your input parameters or encode your output like a modern framework would. So you need to handle this yourself: decode <code>$params{msg}</code> from UTF-8 before passing it to Mojo::DOM, and then encode it back to UTF-8 before putting it in the output (you are declaring an output charset of UTF-8 after all).</p>\n\n<pre><code>if($ENV{REQUEST_METHOD} eq 'POST') {\n    require Mojo::DOM;\n    require Mojo::Util;\n\n\n    my $dom = Mojo::DOM-&gt;new(Mojo::Util::decode('UTF-8', $params{msg}));\n\n    for my $e ($dom-&gt;find('img')-&gt;each) {\n          my $x = $e-&gt;attr('data-char');\n\n          if(defined($x) &amp;&amp; $x) {\n             $e-&gt;replace($x);\n          }\n          else {\n              $e-&gt;delete;\n          }\n    }\n\n    $params{msg} = Mojo::Util::encode('UTF-8', $dom-&gt;to_string());\n    print '&lt;hr/&gt;&lt;div&gt;'.$params{msg}.'&lt;/div&gt;';\n}\n</code></pre>\n"}], "owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 1, "accepted_answer_id": 52636717, "answer_count": 1, "score": 9, "last_activity_date": 1538607038, "creation_date": 1512548932, "last_edit_date": 1512564374, "question_id": 47669861, "link": "https://stackoverflow.com/questions/47669861/nbsp-malformed-while-using-mojodom", "title": "NBSP malformed while using Mojo::DOM", "body": "<p>I am using Mojo::DOM Perl module to replace <code>&lt;IMG&gt;</code> tag, but the <code>&amp;nbsp;</code> entity is replace by Mojo::DOM with \\xa0, but when I print it out to the page the NBSP character becomes \\x{fffd} and shows up as a question mark. I have tried replace \\x{00a0} with &amp;nbsp; but doing that corrupts another unicode character. Here's my code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse utf8;\nuse strict;\nuse warnings;\nuse CGI;\n\nmy $cgi = new CGI;\n\nprint $cgi-&gt;header(-charset =&gt; 'utf-8');\n\nmy %params = $cgi-&gt;Vars;\n\nprint q[&lt;html&gt;&lt;head&gt;&lt;title&gt;UTF-8 Test&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;form method=\"POST\"&gt;&lt;textarea name=\"msg\" cols=\"50\" rows=\"20\"&gt;].$params{msg}.q[&lt;/textarea&gt;&lt;br/&gt;&lt;br/&gt;&lt;input type=\"submit\"&gt;&lt;/form&gt;];\n\nif($ENV{REQUEST_METHOD} eq 'POST') {\n    require Mojo::DOM;\n\n\n    my $dom = Mojo::DOM-&gt;new($params{msg});\n\n    for my $e ($dom-&gt;find('img')-&gt;each) {\n          my $x = $e-&gt;attr('data-char');\n\n          if(defined($x) &amp;&amp; $x) {\n             $e-&gt;replace($x);\n          }\n          else {\n              $e-&gt;delete;\n          }\n    }\n\n    $params{msg} = $dom-&gt;to_string();\n    print '&lt;hr/&gt;&lt;div&gt;'.$params{msg}.'&lt;/div&gt;';\n}\n\nprint q[&lt;/body&gt;&lt;/html&gt;];\n</code></pre>\n\n<p>Contents of msg param that is POSTed:</p>\n\n<blockquote>\n  <p>\u05d0\u05b1\u05dc\u05b9\u05d4\u05b4\u05d9\u05dd,+\u05d0\u05b5\u05ea+\u05d4\u05b7\u05e9\u05b8\u05bc\u05c1\u05de\u05b7\u05d9\u05b4\u05dd,+\u05d5\u05b0\u05d0\u05b5\u05ea+\u05d4\u05b8\u05d0\u05b8\u05e8\u05b6\u05e5. 1 In the beginningpo \n  &amp;nbsp;&lt;img src=\"p.jpg\" data-char=\"\ud83d\ude0e\"&gt; Easy Bengali Typing: \u09ac\u09be\u0982\u09b2\u09be \u099f\u09be\u0987\u09aa\n  \u0995\u09b0\u09c1\u09a8  \u041c\u0438\u043d\u044e\u0441\u0442 \u0420\u0424 \u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043b \u0441\u043f\u0438\u0441\u043e\u043a \u0421\u041c\u0418-\u0438\u043d\u043e\u0430\u0433\u0435\u043d\u0442\u043e\u0432  Japanese Keyboard -\n  \u65e5\u672c\u8a9e\u306e\u30ad\u30fc\u30dc\u30fc\u30c9  Pre-Qin and Han (\u5148\u79e6\u5169\u6f22)</p>\n</blockquote>\n\n<p>Here's a screenshot of the output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/RPpto.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/RPpto.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1512558648, "post_id": 47667508, "comment_id": 82304624, "body": "Looks like somewhere on the way the encoding breaks. The client sends over utf8, you want to safe utf8, but along the way it gets treated as something else, like CP1252. Do you want to fix that, or do you want to discard this data? (hint: throwing away your users&#39; data is seldom a good idea)"}, {"owner": {"reputation": 93, "user_id": 5938535, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10156559718960427/picture?type=large", "display_name": "Drew Wentzel", "link": "https://stackoverflow.com/users/5938535/drew-wentzel"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512587723, "post_id": 47667508, "comment_id": 82322735, "body": "ideally I would like to keep the data but encode it correctly so it can be displayed in the future"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 5938535, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10156559718960427/picture?type=large", "display_name": "Drew Wentzel", "link": "https://stackoverflow.com/users/5938535/drew-wentzel"}, "edited": false, "score": 0, "creation_date": 1512588263, "post_id": 47679926, "comment_id": 82323059, "body": "useful if i wanted to remove them as a dirty last resort"}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "reply_to_user": {"reputation": 93, "user_id": 5938535, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10156559718960427/picture?type=large", "display_name": "Drew Wentzel", "link": "https://stackoverflow.com/users/5938535/drew-wentzel"}, "edited": false, "score": 0, "creation_date": 1512588841, "post_id": 47679926, "comment_id": 82323365, "body": "&quot;but I would prefer to use some sort of regex or encoding that efficiently removes them&quot; - if you do not want them to be removed you might want to rephrase your request"}], "tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": -1, "last_activity_date": 1512580925, "last_edit_date": 1512580925, "creation_date": 1512580500, "answer_id": 47679926, "question_id": 47667508, "link": "https://stackoverflow.com/questions/47667508/parse-form-data-in-perl-to-remove-all-non-alphanumeric-punctuation/47679926#47679926", "title": "Parse Form Data in Perl to remove all non alphanumeric / punctuation", "body": "<p>This should remove all special characters. You can check ORD table to make sure nothing that you need gets removed.</p>\n\n<pre><code>$line =~ s/(.)/(ord($1) &gt; 127) ? \"\" : $1/egs;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 5938535, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10156559718960427/picture?type=large", "display_name": "Drew Wentzel", "link": "https://stackoverflow.com/users/5938535/drew-wentzel"}, "edited": false, "score": 0, "creation_date": 1512587762, "post_id": 47680129, "comment_id": 82322759, "body": "agreed I want to keep the data and encode it correctly preferably in the perl before it gets added to the database."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 93, "user_id": 5938535, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10156559718960427/picture?type=large", "display_name": "Drew Wentzel", "link": "https://stackoverflow.com/users/5938535/drew-wentzel"}, "edited": false, "score": 0, "creation_date": 1512588115, "post_id": 47680129, "comment_id": 82322964, "body": "Then provide the requested information. When you&#39;ve fixed your question by adding the necessary information to it, let me know and I&#39;ll update my answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1512581522, "last_edit_date": 1512581522, "creation_date": 1512581214, "answer_id": 47680129, "question_id": 47667508, "link": "https://stackoverflow.com/questions/47667508/parse-form-data-in-perl-to-remove-all-non-alphanumeric-punctuation/47680129#47680129", "title": "Parse Form Data in Perl to remove all non alphanumeric / punctuation", "body": "<p><code>\u00e2\u20ac\u2122</code> is U+2019 RIGHT SINGLE QUOTATION MARK (<code>\u2019</code>) encoded using UTF-8, then displayed on a cp1252 terminal.</p>\n\n<p><code>\u00f0\u0178\u2019\u2022</code> is U+1F495 TWO HEARTS (<code>\ud83d\udc95</code>) similarly mistreated.</p>\n\n<p><code>\u00c3\u00a2\u00c2\u20ac\u00c2\u00ac</code>is U+202C POP DIRECTIONAL FORMATTING encoded using UTF-8, then encoded using UTF-8 a second time, then displayed on a cp1252 terminal.</p>\n\n<hr>\n\n<blockquote>\n  <p><em>What is the best and most ideal solution for this in perl? Or can I do it in the mysql table instead?</em></p>\n</blockquote>\n\n<p>Depends.</p>\n\n<p>If there's a bug in your Perl program, you should fix it!</p>\n\n<p>If the data is bad in the database, you should fix that (and whatever is putting bad data in the database)!</p>\n\n<p>As it stands, you provided no evidence one way or another. (Providing the field's encoding and <code>SELECT HEX(field)</code> would reveal if the data is in the database or not.)</p>\n"}], "owner": {"reputation": 93, "user_id": 5938535, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10156559718960427/picture?type=large", "display_name": "Drew Wentzel", "link": "https://stackoverflow.com/users/5938535/drew-wentzel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1512631713, "creation_date": 1512538679, "question_id": 47667508, "link": "https://stackoverflow.com/questions/47667508/parse-form-data-in-perl-to-remove-all-non-alphanumeric-punctuation", "title": "Parse Form Data in Perl to remove all non alphanumeric / punctuation", "body": "<p>In web form entries we are seeing  strange characters being used such as: </p>\n\n<p>\u00e2\u20ac\u2122 (windows 1252 encoded)</p>\n\n<p>or </p>\n\n<p>\u00f0\u0178\u2019\u2022 (emoji)</p>\n\n<p>or </p>\n\n<p>\u00c3\u00a2\u00c2\u20ac\u00c2\u00ac (no idea but think it's windows 1252)</p>\n\n<p>For some of them I can use a regex to simply replace them with the utf-8 equivalent but I would prefer to use some sort of regex or encoding that efficiently removes them.</p>\n\n<p>I've set the DB Table in MYSQL to utf-8</p>\n\n<p>What is the best and most ideal solution for this in perl?  Or can I do it in the mysql table instead?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1512632016, "post_id": 47666673, "comment_id": 82338612, "body": "When you are using <code>use warnings;</code>, you don&#39;t need <code>-w</code> in shebang line. Purpose of both is same."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1512540764, "post_id": 47666763, "comment_id": 82294569, "body": "It is also first checked whether it <a href=\"https://perldoc.perl.org/perlapi.html#looks_like_number\" rel=\"nofollow noreferrer\">looks_like_number</a>"}], "tags": [], "owner": {"reputation": 2494, "user_id": 1921546, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fe4ac75c43b846d9665f422cdac5cb03?s=128&d=identicon&r=PG", "display_name": "pii_ke", "link": "https://stackoverflow.com/users/1921546/pii-ke"}, "is_accepted": false, "score": 4, "last_activity_date": 1512540796, "last_edit_date": 1512540796, "creation_date": 1512534339, "answer_id": 47666763, "question_id": 47666673, "link": "https://stackoverflow.com/questions/47666673/perl-from-user-input-of-a-number-add-each-digit/47666763#47666763", "title": "perl from user input of a number, add each digit", "body": "<p>You need to break the input string <code>$num</code> into separate digits. Try replacing <code>my @array = $num</code> with <code>my @array = split //, $num</code>. Read more by running <code>perldoc -f split</code>.</p>\n\n<p>In Perl both strings and numbers are classified as <code>SCALAR</code>s. A scalar is automatically treated as a number if arithmetic operations (like <code>+</code>) are done with them, so the summation inside the <code>for</code> loop works as expected.</p>\n"}, {"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1512550339, "post_id": 47668533, "comment_id": 82299160, "body": "Obviously, I don&#39;t know how to explain this really in theoretically. Since I am also learner in perl just little bit having some idea while doing in practically."}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1512551649, "post_id": 47668533, "comment_id": 82299871, "body": "i&#39;m kind of new to perl too,  Is there a difference between the syntax  <code>split &#47;&#47;, $num</code> and <code>split(&#39;&#39;, $num)</code>? I was used to the second one but I now see the first one everywhere"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512551733, "post_id": 47668533, "comment_id": 82299920, "body": "Don&#39;t use <code>map</code> when you mean <code>for</code>."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512554410, "post_id": 47668533, "comment_id": 82301735, "body": "@Borodin: This is for me then I couldn&#39;t understand the comment... Please just give in detail."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512554668, "post_id": 47668533, "comment_id": 82301934, "body": "<code>map</code> is for &quot;mapping&quot; one list to another. <code>map { $newnum += $_ } split &#47;&#47;, $num</code> should be <code>$newnum += $_ for split &#47;&#47;, $num</code>."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512555448, "post_id": 47668533, "comment_id": 82302455, "body": "@Borodin: Thanks I understood and updated the answer."}, {"owner": {"reputation": 368, "user_id": 8500343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1618f74886ab1cff3eca67c71af07caf?s=128&d=identicon&r=PG&f=1", "display_name": "Jochen Lutz", "link": "https://stackoverflow.com/users/8500343/jochen-lutz"}, "reply_to_user": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 1, "creation_date": 1512557897, "post_id": 47668533, "comment_id": 82304109, "body": "@Flying_whale: the two calls to <code>split</code> are syntactically identical, you can omit the parentheses on perl&#39;s built-in functions (and your own on certain conditions). Adding them may be useful for clarity in longer expressionts though."}], "tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": true, "score": 2, "last_activity_date": 1512555427, "last_edit_date": 1512555427, "creation_date": 1512543278, "answer_id": 47668533, "question_id": 47666673, "link": "https://stackoverflow.com/questions/47666673/perl-from-user-input-of-a-number-add-each-digit/47668533#47668533", "title": "perl from user input of a number, add each digit", "body": "<p>You Just need to add two lines</p>\n\n<pre><code>use strict;\nuse warnings;\n\nprint \"Enter a number :\";\n\nmy $num = &lt;STDIN&gt;;\n\n#You missed out to remove the entermark at the end\nchomp($num); my $newnum = \"0\";\n\n$newnum += $_  for split//, $num;\n\nprint $newnum;\n</code></pre>\n\n<blockquote>\n  <p>Note: <em>I didn't override or not considering the method what you have followed however I just did what I know in perl</em>.</p>\n</blockquote>\n\n<p><a href=\"https://stackoverflow.com/questions/3162983/map-with-split-trim-in-perl\">Further More details</a></p>\n"}], "owner": {"reputation": 175, "user_id": 5376537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c872b3609f7acfa0f38007862229f7b2?s=128&d=identicon&r=PG&f=1", "display_name": "Nameishi", "link": "https://stackoverflow.com/users/5376537/nameishi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 0, "accepted_answer_id": 47668533, "answer_count": 2, "score": 1, "last_activity_date": 1512555427, "creation_date": 1512533606, "last_edit_date": 1512542802, "question_id": 47666673, "link": "https://stackoverflow.com/questions/47666673/perl-from-user-input-of-a-number-add-each-digit", "title": "perl from user input of a number, add each digit", "body": "<p>\nI am very new to perl and I am learning this is not like c++. So The user will enter a number of any length, and I want to add each digit and print the sum.\n</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\n\nprint \"Enter a number :\";\n\nmy $num = &lt;STDIN&gt;;\n\nmy @array = $num;\nmy $sum=0;\nfor my $arr (@array){\n\n    $sum += $arr;\n\nprint $sum;\n}\n</code></pre>\n\n<p>\n For example the user enters 1234, the sum: 10\n\nthe actual result I get is 1234.</p>\n"}, {"tags": ["regex", "perl", "awk"], "answers": [{"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1512523081, "post_id": 47665222, "comment_id": 82289868, "body": "I knew about <code>-n</code> but did not know perl supported END, which is why I broke it out :)  Thank you, this clarifies quite a few things for me."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1512523839, "post_id": 47665222, "comment_id": 82290049, "body": "#1: I have an obsession with writing filthy perl, and I need to stop.  Sorry.  #2, #3, and #4:  Wow, thank you for the great feedback.  If you care, I&#39;ll put a bounty on this when it&#39;s eligible because I learned so much from this answer."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1512531272, "post_id": 47665222, "comment_id": 82291871, "body": "@zzxyz Note that even this works: <code>perl -nE&#39;$sum += $. }{ say $sum&#39; file</code> -- you may write <code>}{</code> alone. But sticking that <code>END</code> is much nicer, which is why glenn wrote it that way. I never knew that it makes <code>END</code> a sub!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1512552278, "post_id": 47665222, "comment_id": 82300304, "body": "@zdim: <code>perlmod</code> has this <i>&quot;These code blocks can be prefixed with sub to give the appearance of a subroutine (although this is not considered good style)&quot;</i>. I guess <code>B::Deparse</code> writes poor code!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512552484, "post_id": 47665222, "comment_id": 82300447, "body": "@Borodin Ah! Ah!  (It crossed my mind that it may be &quot;just so&quot; but then ...)  This is excellent! :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1512552693, "post_id": 47665222, "comment_id": 82300574, "body": "@glenn: <i>&quot;when you say <code>$x = (a, list, of, values)</code>, then <code>$x</code> contains the</i> <b><i>number</i></b> <i>of values&quot;</i> When you assign a comma-separated list in scalar context like that, <code>$x</code> is set to the <i>last element</i> of the list, because it is is the last expression to be evaluated. <code>m&#47;&#47;</code> in scalar context returns a boolean value according to whether the match succeeded, and is unaffected by the number of captures."}], "tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": true, "score": 5, "last_activity_date": 1512571542, "last_edit_date": 1512571542, "creation_date": 1512522365, "answer_id": 47665222, "question_id": 47664884, "link": "https://stackoverflow.com/questions/47664884/port-awk-one-liner-to-perl-using-regexes-summing-groups-of-data/47665222#47665222", "title": "Port awk one-liner to perl using regexes (Summing groups of data)", "body": "<p>Without examining the awk code, I'd write this perl:</p>\n\n<pre><code>perl -lne '\n        if (/Team (\\d+)/) {\n            $t = $1;\n        } elsif (/: (\\d+)/) {\n            $score{$t} += $1\n        }\n    } END {\n        printf \"Team %d: %d\\n\", $_, $score{$_} for keys %score\n' problem\n</code></pre>\n\n\n\n<pre><code>Team 7: 74\nTeam 9: 41\nTeam 42: 51\n</code></pre>\n\n<p>The <code>-n</code> option implicitly wraps a <code>while (&lt;&gt;) {...}</code> loop around the given code. See <code>perldoc perlrun</code> for all the details.</p>\n\n<p>The <code>} END {</code> bit exploits that, and allows you to collect data inside the while loop, then do stuff with it when the loop is complete.</p>\n\n<hr>\n\n<p>You can see how perl deals with one-liners by adding the <code>-MO=Deparse</code> option:</p>\n\n<pre><code>perl -MO=Deparse -lne '\n        if (/Team (\\d+)/) {\n            $t = $1;\n        } elsif (/: (\\d+)/) {\n            $score{$t} += $1\n        }\n    } END {\n        printf \"Team %d: %d\\n\", $_, $score{$_} for keys %score\n' problem\n</code></pre>\n\n\n\n<pre><code>BEGIN { $/ = \"\\n\"; $\\ = \"\\n\"; }\nLINE: while (defined($_ = &lt;ARGV&gt;)) {\n    chomp $_;\n    if (/Team (\\d+)/) {\n        $t = $1;\n    }\n    elsif (/: (\\d+)/) {\n        $score{$t} += $1;\n    }\n}\nsub END {\n    printf \"Team %d: %d\\n\", $_, $score{$_} foreach (keys %score);\n}\n-e syntax OK\n</code></pre>\n\n<p>I'm not sure why it turns the END block into a subroutine though.</p>\n\n<hr>\n\n<p>A couple of notes about your code:</p>\n\n<ol>\n<li><p>Use better variable names.</p></li>\n<li><p><code>$x = /(\\d+)/</code></p>\n\n<ul>\n<li><code>m//</code> used in scalar context will return a true/false value, regardless of the use of capturing parentheses (ref: <a href=\"http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators</a>)</li>\n<li><p>to assign the captured text to variables, you must have a list context on the left-hand side: <code>($a, $list, $of, $variables) = (a, list, of, values)</code>, so</p>\n\n<pre><code>($x) = /(\\d+)/;   # with parentheses on the left-hand side\n</code></pre></li>\n</ul></li>\n<li><p><code>$myarray{$x}+= {$1}</code></p>\n\n<ul>\n<li>when you use <code>{...}</code> as an expression, you are creating a <strong>hash reference</strong></li>\n<li>in this case <code>{$1}</code>, your hash does not have enough elements: it requires an even numbered list of key-value pairs.</li>\n<li>you just want <code>$myarray{$x} += $1</code></li>\n</ul></li>\n<li><p><code>foreach $key (keys %myarray){...}</code></p>\n\n<ul>\n<li><p>an alternate way to iterate over a hash is to use the <code>each</code> function in a while loop:</p>\n\n<pre><code>while (my ($key, $value) = each %myarray) {\n    print \"Team $key: $value\\n\";\n}\n</code></pre></li>\n</ul></li>\n</ol>\n"}], "owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 47665222, "answer_count": 1, "score": 3, "last_activity_date": 1512571542, "creation_date": 1512519981, "last_edit_date": 1512526578, "question_id": 47664884, "link": "https://stackoverflow.com/questions/47664884/port-awk-one-liner-to-perl-using-regexes-summing-groups-of-data", "title": "Port awk one-liner to perl using regexes (Summing groups of data)", "body": "<p>Given the following input:</p>\n\n<pre><code>\u00a3 cat problem\n  Team 7\n  John: 19\n  Sue: 20\n  Pam: 35\n  Team 42\n  Jeff: 12\n  Sam: 3\n  Phil: 26\n  Jill: 10\n  Team 9\n  Bill: 19\n  John: 7\n  Linda: 15\n</code></pre>\n\n<p>I am trying to reproduce the following output in a perl one-liner:</p>\n\n<pre><code>\u00a3 awk '/Team/ {x=$2} /: *[0-9]+/ {myarray[x]+=$2}; END{for (key in myarray) {print \"Team \" key \": \" myarray[key]}}' problem\nTeam 42: 51\nTeam 7: 74\nTeam 9: 41\n</code></pre>\n\n<p>This (basic) problem and the data actually comes from a perl tutorial.  <a href=\"http://learnperl.scratchcomputing.com/tutorials/csss/\" rel=\"nofollow noreferrer\">http://learnperl.scratchcomputing.com/tutorials/csss/</a></p>\n\n<p>I'm interested in something close to this, which I have tried...literally over 50 variations of:</p>\n\n<pre><code> \u00a3 perl -e 'while(&lt;&gt;){if (/Team/){$x = /(\\d+)/;}else{/(\\d+)/;$myarray{$x}+= {$1}; }} foreach $key (keys %myarray){print \"$key\\n\";}' problem\n</code></pre>\n\n<p>I know that 1) these regexes are not returning the match (the <code>+= {$1}</code> was an attempt to remedy that), and 2) even if they were I am probably populating the hash incorrectly.  Googling potential solutions returns me verbose, multiline code.  I was waiting to get the keys outputting correctly before I even bothered moving onto the values, btw.</p>\n"}, {"tags": ["node.js", "perl", "networking", "https", "lwp-useragent"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1512508310, "post_id": 47662461, "comment_id": 82284551, "body": "So your question actually is \u201cHow can I configure LWP::UserAgent to accept a self-signed certificate for HTTPS?\u201d"}, {"owner": {"reputation": 223, "user_id": 8815780, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8fc0b39c713bf19e6c73488ee3f0c0e7?s=128&d=identicon&r=PG&f=1", "display_name": "gotthecodes", "link": "https://stackoverflow.com/users/8815780/gotthecodes"}, "edited": false, "score": 0, "creation_date": 1512508606, "post_id": 47662461, "comment_id": 82284681, "body": "Yes actually. Do you know how?"}, {"owner": {"reputation": 223, "user_id": 8815780, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8fc0b39c713bf19e6c73488ee3f0c0e7?s=128&d=identicon&r=PG&f=1", "display_name": "gotthecodes", "link": "https://stackoverflow.com/users/8815780/gotthecodes"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1512508719, "post_id": 47662461, "comment_id": 82284725, "body": "I figure it out. Thank you @amon for pointing me in the right direction"}], "answers": [{"comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1512540811, "post_id": 47662850, "comment_id": 82294586, "body": "This is not only accepting a self-signed certificate. This is accepting <b>any</b> certificate it thus <b>makes the connection open to arbitrary man in the middle attacks</b>."}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1512542740, "post_id": 47662850, "comment_id": 82295372, "body": "@SteffenUllrich That&#39;s what accepting self-signed certificates does, yes."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1512542843, "post_id": 47662850, "comment_id": 82295442, "body": "@duskwuff: <i>&quot;That&#39;s what accepting self-signed certificates does, yes.&quot;</i> -  No, you can accept a specific self-signed certificate in a secure way, i.e. without  completely disabling validation and thus accepting arbitrary  certificates as done here. And it&#39;s easy too. See my answer."}], "tags": [], "owner": {"reputation": 223, "user_id": 8815780, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8fc0b39c713bf19e6c73488ee3f0c0e7?s=128&d=identicon&r=PG&f=1", "display_name": "gotthecodes", "link": "https://stackoverflow.com/users/8815780/gotthecodes"}, "is_accepted": false, "score": 8, "last_activity_date": 1512508854, "creation_date": 1512508854, "answer_id": 47662850, "question_id": 47662461, "link": "https://stackoverflow.com/questions/47662461/how-to-accept-self-signed-certificates-with-lwpuseragent/47662850#47662850", "title": "How to accept self-signed certificates with LWP::UserAgent", "body": "<p>To make LWP::UserAgent ignore server certificate use the following configuration:</p>\n\n<pre><code>my $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;ssl_opts(\n    SSL_verify_mode =&gt; IO::Socket::SSL::SSL_VERIFY_NONE, \n    verify_hostname =&gt; 0\n);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 6, "last_activity_date": 1512543151, "last_edit_date": 1512543151, "creation_date": 1512541922, "answer_id": 47668190, "question_id": 47662461, "link": "https://stackoverflow.com/questions/47662461/how-to-accept-self-signed-certificates-with-lwpuseragent/47668190#47668190", "title": "How to accept self-signed certificates with LWP::UserAgent", "body": "<p>The typical answer to such question is to disable certificate validation at all. But, this is totally insecure and essentially disables most of the protection offered by HTTPS. <strong>If validation is disabled completely a man in the middle attacker just can use an arbitrary certificate to intercept the connection and sniff and modify the data.</strong> Thus, don't do it.</p>\n\n<p>The correct way to deal with such certificates is to add these certificates as  trusted. This can be done with the <code>SSL_ca_file</code> argument:</p>\n\n<pre><code>my $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;ssl_opts(SSL_ca_file =&gt; 'rootCA.pem');\n$ua-&gt;get('https://127.0.0.1:8080');\n</code></pre>\n\n<p>By explicitly trusting the self-signed server certificate as CA it will no longer throw \"certificate verify failed\". </p>\n\n<p>But, unless your server certificate is actually issued to \"127.0.0.1\" you will now get \"hostname verification failed\" since the subject of the certificate does not match the domain of the URL. This can be fixed by setting the expected hostname:</p>\n\n<pre><code>my $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;ssl_opts(\n    SSL_ca_file =&gt; 'rootCA.pem',\n    SSL_verifycn_name =&gt; 'www.example.com',\n);\n$ua-&gt;get('https://127.0.0.1:8080');\n</code></pre>\n\n<p>Note that <code>SSL_ca_file</code> needs the self-signed certificate to have the CA flag set to true, i.e. that the certificate is a CA certificate which can be used to issue other certificates. If this is not the case with your certificate or if you just want to accept a specific certificate no matter if it is expired, revoked, does not match the hostname etc you can do the validation by using the fingerprint of the certificate.</p>\n\n<pre><code>my $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;ssl_opts(SSL_fingerprint =&gt; 'sha1$9AA5CFED857445259D90FE1B56B9F003C0187BFF')\n$ua-&gt;get('https://127.0.0.1:8080');\n</code></pre>\n\n<p>The fingerprint here is the same you get with <code>openssl x509 -noout -in rootCA.pem -fingerprint -sha1</code>, only the algorithm added in front (<code>sha1$...</code>) and the colons removed.</p>\n"}], "owner": {"reputation": 223, "user_id": 8815780, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8fc0b39c713bf19e6c73488ee3f0c0e7?s=128&d=identicon&r=PG&f=1", "display_name": "gotthecodes", "link": "https://stackoverflow.com/users/8815780/gotthecodes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2930, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1512543151, "creation_date": 1512507056, "last_edit_date": 1512508740, "question_id": 47662461, "link": "https://stackoverflow.com/questions/47662461/how-to-accept-self-signed-certificates-with-lwpuseragent", "title": "How to accept self-signed certificates with LWP::UserAgent", "body": "<p>I am attempting to set up a node.js server that uses HTTPS. I will then write a scripts in Perl to make a HTTPS request to the server and measure latency of the round trip. </p>\n\n<p>Here is my node.js:</p>\n\n<pre><code>var express = require('express');\nvar https = require('https');\nvar fs = require('fs');\n\nvar key = fs.readFileSync('encrypt/rootCA.key');\nvar cert = fs.readFileSync('encrypt/rootCA.pem');\n\n// This line is from the Node.js HTTPS documentation.\nvar options = {\n  key: key,\n  cert: cert\n};\n\nhttps.createServer(options, function (req, res) {\n    res.writeHead(200);\n    res.end(\"hello world - https\\n\");\n}).listen(8088);\n</code></pre>\n\n<p>Key/cert generation was done as follows:</p>\n\n<pre><code>openssl genrsa -out rootCA.key 2048\nopenssl req -x509 -new -nodes -key rootCA.key -sha256 -days 1024 -out rootCA.pem\n</code></pre>\n\n<p>This is my Perl script: </p>\n\n<pre><code>#!/usr/bin/perl\nuse LWP::UserAgent;\n\n\nmy $ua = LWP::UserAgent-&gt;new;\nmy $req = HTTP::Request-&gt;new(GET =&gt; 'https://127.0.0.1:8080');\nmy $res = $ua-&gt;request($req);\n\nif ($res-&gt;is_success) {\n  print $res-&gt;as_string;\n} else {\n  print \"Failed: \", $res-&gt;status_line, \"\\n\";\n}\n</code></pre>\n\n<p>Returning the error:</p>\n\n<pre><code>Failed: 500 Can't verify SSL peers without knowing which Certificate Authorities to trust\n</code></pre>\n\n<p>The node.js documentation describes how to set up an HTTPS server but it is vague about generating primary cert and intermediate cert. </p>\n\n<p><a href=\"https://medium.com/netscape/everything-about-creating-an-https-server-using-node-js-2fc5c48a8d4e\" rel=\"noreferrer\">https://medium.com/netscape/everything-about-creating-an-https-server-using-node-js-2fc5c48a8d4e</a></p>\n"}, {"tags": ["perl", "cpan", "cpanm"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512507362, "post_id": 47662236, "comment_id": 82284112, "body": "<i>&quot;I an an FI&quot;</i> Financial Institution? Faecally Incontinent? If your words matter then please don&#39;t use arcane abbreviations."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1512507516, "post_id": 47662236, "comment_id": 82284194, "body": "It sounds like it would be useful to download your own copy of a CPAN repository on a properly-connected system and sideload it to your isolated machine. Take a look at <a href=\"http://search.cpan.org/~rjbs/CPAN-Mini-1.111016/bin/minicpan\" rel=\"nofollow noreferrer\"><code>minicpan</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": true, "score": 4, "last_activity_date": 1512509291, "creation_date": 1512509291, "answer_id": 47662954, "question_id": 47662236, "link": "https://stackoverflow.com/questions/47662236/is-there-a-way-to-configure-the-default-mirror-for-appcpanminus-cpanm/47662954#47662954", "title": "Is there a way to configure the default mirror for App::cpanminus (cpanm)?", "body": "<p>Cite from the <a href=\"https://metacpan.org/pod/distribution/App-cpanminus/lib/App/cpanminus/fatscript.pm#ENVIRONMENT-VARIABLES\" rel=\"nofollow noreferrer\">cpanm docs</a></p>\n\n<blockquote>\n  <p>ENVIRONMENT VARIABLES</p>\n  \n  <p>PERL_CPANM_OPT If set, adds a set of default options to every cpanm\n  command. These options come first, and so are overridden by\n  command-line options.</p>\n</blockquote>\n\n<p>So try: <code>export PERL_CPANM_OPT=\"--mirror http://cpan.metacpan.org\"</code></p>\n"}], "owner": {"reputation": 89, "user_id": 8726370, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvk3D.png?s=128&g=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/8726370/bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 530, "favorite_count": 0, "accepted_answer_id": 47662954, "answer_count": 1, "score": 5, "last_activity_date": 1512509291, "creation_date": 1512506110, "question_id": 47662236, "link": "https://stackoverflow.com/questions/47662236/is-there-a-way-to-configure-the-default-mirror-for-appcpanminus-cpanm", "title": "Is there a way to configure the default mirror for App::cpanminus (cpanm)?", "body": "<p>I am aware you can easily configure cpan to use a specific mirror.  However I recently started using cpanm at the advice of a friend, and I can't seem to find a way to set the default mirror without specifying <code>--mirror http://cpan.metacpan.org</code> on the command line each time.</p>\n\n<p>Is there an environment variable or a config file that I can set the default mirror?</p>\n\n<p>As for why I would want to simply not use the default list of mirrors, I am an FI and we are firewalled to no end.  Only one mirror has been allowed through our firewall.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512505144, "post_id": 47661882, "comment_id": 82283012, "body": "I don&#39;t understand what sockets have to do with backticks. Do you want to read a program&#39;s STDOUT or a do you want to read a socket?"}, {"owner": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512505397, "post_id": 47661882, "comment_id": 82283114, "body": "I want to be able to read stdout asynchronously and output as soon as a newline is added to stdout. The sockets part isn&#39;t important."}, {"owner": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "edited": false, "score": 0, "creation_date": 1512506141, "post_id": 47661882, "comment_id": 82283504, "body": "To read asynchronously from 1 or more input <b>then</b> send events to 0 or more clients, you have to work with <i>non blocking IO</i> and use <code>select</code> command to address all IO simultaneously..."}], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512506653, "post_id": 47662295, "comment_id": 82283750, "body": "Thanks for introducing <code>unbuffer</code>. If I&#39;d only known it before... But it must be installed, right? My Ubuntu says it&#39;s part of the <code>expect</code> package."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512506856, "post_id": 47662295, "comment_id": 82283854, "body": "Do you think using <code>DATA</code> as the filehandle will work? The OP uses it but I&#39;m suspicious because it&#39;s kind of reserved."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1512506991, "post_id": 47662295, "comment_id": 82283913, "body": "@PerlDuck, Yes, <code>unbuffer</code> needs to be installed, which is why I mentioned IPC::Run has a built-in method (for which I&#39;ve added an example). /// Yes, <code>DATA</code> can be reopened. Of course, it&#39;s not a good idea to use <code>DATA</code> because it already has meaning, and because it&#39;s a global (not lexical) variable."}, {"owner": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "edited": false, "score": 0, "creation_date": 1512512425, "post_id": 47662295, "comment_id": 82286523, "body": "I have a somewhat unrelated question. Is it possible to set it to buffer on carriage returns as well?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512529226, "post_id": 47662295, "comment_id": 82291355, "body": "A program can flush its buffers whenever it wants. I&#39;ve described when most programs do it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1512581601, "post_id": 47662295, "comment_id": 82319649, "body": "(<code>STDOUT-&gt;flush()</code> in Perl)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1512506880, "last_edit_date": 1512506880, "creation_date": 1512506341, "answer_id": 47662295, "question_id": 47661882, "link": "https://stackoverflow.com/questions/47661882/realtime-backtick-output-processing/47662295#47662295", "title": "Realtime backtick output processing", "body": "<p>You have the right approach.</p>\n\n<pre><code>my @cmd = ( 'perl', '-e', '$|=1; for (1..5) { print \"$_\\n\"; sleep 1; }' );\n\nopen(my $pipe, '-|', @cmd)\n   or die(\"Can't launch child: $!\\n\");\n\nwhile (defined( my $line = &lt;$pipe&gt; )) {\n    chomp($line);\n    print \"&lt;$line&gt;\\n\";\n}\n</code></pre>\n\n<p>When writing to STDOUT, most programs flush their output when a newline is encountered when STDOUT is a terminal (\"line buffering\"). Most programs fall back to block outputting chunks of 4 KiB or 8 KiB when STDOUT isn't a terminal (\"block buffering\"). That's why I had to use <code>$|=1;</code> in the child program in the example above.</p>\n\n<p>Programs that behave as described can be fooled into using line buffering using pseudo-terminal instead of a pipe.</p>\n\n<pre><code>my @cmd = ( 'unbuffer', 'perl', '-e', 'for (1..5) { print \"$_\\n\"; sleep 1; }' );\n\nopen(my $pipe, '-|', @cmd)\n   or die(\"Can't launch child: $!\\n\");\n\nwhile (defined( my $line = &lt;$pipe&gt; )) {\n    chomp($line);\n    print \"&lt;$line&gt;\\n\";\n}\n</code></pre>\n\n<p><a href=\"http://search.cpan.org/perldoc?IPC::Run\" rel=\"nofollow noreferrer\">IPC::Run</a> provides a native method of creating pseudo-terminals.</p>\n\n<pre><code>use IPC::Run qw( run );\n\nmy @cmd = ( 'perl', '-e', 'for (1..5) { print \"$_\\n\"; sleep 1; }' );\n\nmy $buf = '';\nrun(\\@cmd, '&gt;pty&gt;', sub {\n    $buf .= $_[0];\n    while ($buf =~ s/^(.*)\\r\\n//) {\n        print \"&lt;$1&gt;\\n\";\n    }\n});\n</code></pre>\n"}], "owner": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 1, "accepted_answer_id": 47662295, "answer_count": 1, "score": 3, "last_activity_date": 1512506880, "creation_date": 1512504686, "last_edit_date": 1512505517, "question_id": 47661882, "link": "https://stackoverflow.com/questions/47661882/realtime-backtick-output-processing", "title": "Realtime backtick output processing", "body": "<p>I don't know if this is possible but I'm working on sending the output of a command over sockets so it will be shown on both the client and server computer while the command is running. When I try to use backticks the output isn't saved into the variable until the command completes which is bad for when I run a command that takes a long time. </p>\n\n<p>Question: Is there a way to scan the output on a line by line basis by say spawning another process and having it \"watch\" a variable?</p>\n\n<p>Edit: This is what I tried with open</p>\n\n<pre><code>open DATA, \"pause |\" or die \"Failed: $!\";\nwhile( defined(my $line = &lt;DATA&gt;)){\n    chomp($line);\n    print \"$line\\n\";\n}\n</code></pre>\n\n<p>I would like the output to be shown before the command completes.</p>\n"}, {"tags": ["python", "perl", "graph"], "answers": [{"comments": [{"owner": {"reputation": 203, "user_id": 7691778, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b246bdde6c00ae62856305819c7002d5?s=128&d=identicon&r=PG&f=1", "display_name": "ericleasemorgan", "link": "https://stackoverflow.com/users/7691778/ericleasemorgan"}, "edited": false, "score": 1, "creation_date": 1512572272, "post_id": 47661977, "comment_id": 82313408, "body": "Alas, after a bit of an email exchange with the developer, I don&#39;t think it is possible to add arbitrary attributes to edges using Graph::Easy. Based on my experience, Graph::Easy is more about outputting graphs as opposed to generating graphml/XML."}, {"owner": {"reputation": 203, "user_id": 7691778, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b246bdde6c00ae62856305819c7002d5?s=128&d=identicon&r=PG&f=1", "display_name": "ericleasemorgan", "link": "https://stackoverflow.com/users/7691778/ericleasemorgan"}, "edited": false, "score": 1, "creation_date": 1512573455, "post_id": 47661977, "comment_id": 82314295, "body": "The Python module -- <a href=\"http://hadim.fr/pygraphml/\" rel=\"nofollow noreferrer\">pygraphml</a> -- may be more suited to what I desire."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 203, "user_id": 7691778, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b246bdde6c00ae62856305819c7002d5?s=128&d=identicon&r=PG&f=1", "display_name": "ericleasemorgan", "link": "https://stackoverflow.com/users/7691778/ericleasemorgan"}, "edited": false, "score": 0, "creation_date": 1512583846, "post_id": 47661977, "comment_id": 82320800, "body": "@ericleasemorgan Ah, ok. That looks reasonable. As said, I just played a bit around and wasn&#39;t aware that you wanted to create XML. Attributes makes sense there. Never mind. And thank you for showing me another interesting module. :-)"}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 3, "last_activity_date": 1512559792, "last_edit_date": 1512559792, "creation_date": 1512505110, "answer_id": 47661977, "question_id": 47661180, "link": "https://stackoverflow.com/questions/47661180/how-can-i-assign-a-weight-for-frequency-score-to-a-graphs-edge-using-grapheas/47661977#47661977", "title": "How can I assign a weight for frequency score to a graph&#39;s edge using Graph::Easy", "body": "<p>I played a bit with this module and it seems it doesn't accept arbitrary \"attributes\" but only a certain set of predefined ones.\nApparently 'frequency' is none of them.</p>\n\n<p>I picked a sample from the <a href=\"http://search.cpan.org/~tels/Graph-Easy/lib/Graph/Easy.pm\" rel=\"nofollow noreferrer\">documentation</a> and replaced your</p>\n\n<pre><code>$edge-&gt;set_attribute( 'frequency', $frequency );\n</code></pre>\n\n<p>with </p>\n\n<pre><code>$edge-&gt;set_attribute( 'label', $frequency );\n</code></pre>\n\n<p>as they often mention <code>label</code> in the examples.</p>\n\n<pre><code>print $graph-&gt;as_ascii();\n</code></pre>\n\n<p>then printed:</p>\n\n<pre><code>+--------------+  2   +--------------+\n|      14      | ---&gt; |   million    |\n+--------------+      +--------------+\n+--------------+  2   +--------------+  2   +----------+\n|   digital    | ---&gt; |  humanities  | ---&gt; | research |\n+--------------+      +--------------+      +----------+\n+--------------+  2   +--------------+  3   +----------+\n| participants | ---&gt; |     may      | ---&gt; |   want   |\n+--------------+      +--------------+      +----------+\n...\n</code></pre>\n\n<p>Is that what you were after?</p>\n\n<hr>\n\n<p>Eventually I found the <a href=\"http://bloodgate.com/perl/graph/manual/index.html\" rel=\"nofollow noreferrer\">complete documentation</a> for Graph::Easy. The <a href=\"http://bloodgate.com/perl/graph/manual/attributes.html\" rel=\"nofollow noreferrer\">Attributes section</a> lists the allowed attributes. I'm pretty sure there is a way to have <em>custom attributes</em> because the module has a method <a href=\"http://search.cpan.org/~shlomif/Graph-Easy/lib/Graph/Easy.pm#get_custom_attributes()\" rel=\"nofollow noreferrer\"><code>get_custom_attributes</code></a>. </p>\n"}, {"tags": [], "owner": {"reputation": 203, "user_id": 7691778, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b246bdde6c00ae62856305819c7002d5?s=128&d=identicon&r=PG&f=1", "display_name": "ericleasemorgan", "link": "https://stackoverflow.com/users/7691778/ericleasemorgan"}, "is_accepted": true, "score": 0, "last_activity_date": 1512596403, "creation_date": 1512596403, "answer_id": 47683891, "question_id": 47661180, "link": "https://stackoverflow.com/questions/47661180/how-can-i-assign-a-weight-for-frequency-score-to-a-graphs-edge-using-grapheas/47683891#47683891", "title": "How can I assign a weight for frequency score to a graph&#39;s edge using Graph::Easy", "body": "<p>The \"best\" answer for me is to not use Graph::Easy but instead use a Python module, <a href=\"https://networkx.github.io\" rel=\"nofollow noreferrer\">NetworkX</a>:</p>\n\n<pre><code>#!/usr/bin/python\n\n# graph.py - given a CSV file of a specific shape, output graphml\n\n\n# configure\nDATA  = './data.csv'\nGRAPH = './data.graphml'\nLABEL = 'frequency'\n\n# require\nimport networkx as nx\nimport csv\n\n# initialize\ng = nx.DiGraph()\n\n# read the data\nwith open( DATA, 'r' ) as f :\n\n    # initialize\n    r = csv.reader( f, delimiter='\\t')\n\n    # process each record\n    for source, target, frequency in r :\n\n        # sanity check\n        if len( source ) == 0 or len( target ) == 0 : continue\n\n        # update the graph\n        g.add_edge( source, target )    \n        g[ source ][ target ][ LABEL ] = frequency\n\n# output &amp; done\nnx.write_graphml( g, GRAPH )\nexit()\n</code></pre>\n"}], "owner": {"reputation": 203, "user_id": 7691778, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b246bdde6c00ae62856305819c7002d5?s=128&d=identicon&r=PG&f=1", "display_name": "ericleasemorgan", "link": "https://stackoverflow.com/users/7691778/ericleasemorgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 47683891, "answer_count": 2, "score": 3, "last_activity_date": 1512596436, "creation_date": 1512501886, "last_edit_date": 1512596436, "question_id": 47661180, "link": "https://stackoverflow.com/questions/47661180/how-can-i-assign-a-weight-for-frequency-score-to-a-graphs-edge-using-grapheas", "title": "How can I assign a weight for frequency score to a graph&#39;s edge using Graph::Easy", "body": "<p>How do I assign a weight or frequency score to an graph's edge using Graph::Easy?</p>\n\n<p>I have a list of bigrams and their frequencies. I can easily create a (mathematical) graph of only the bigrams using Graph::Easy. The output is exactly what I desire. But when I try to \"set_attribute\" I get an error that says, \"'frequency' is not a valid attribute name\". What am I doing wrong? Using Graph::Easy, how do I make frequency a valid attribute?</p>\n\n<pre><code>#!/usr/bin/perl\n\n# graph.pl - given a list of bigrams and their frequencies, output graphml\n\n# require\nuse Graph::Easy;\nuse strict;\n\n# initialize\nmy $graph = Graph::Easy-&gt;new;\n\n# process the data\nwhile ( &lt;DATA&gt; ) {\n\n    # parse\n    chop;\n    my ( $nodes, $frequency ) = split( \"\\t\", $_ );\n    my ( $source, $target )   = split( ' ', $nodes );\n\n    # update the graph\n    my $edge = $graph-&gt;add_edge( $source, $target );\n\n    # error happen here\n    $edge-&gt;set_attribute( 'frequency', $frequency );\n\n}\n\n# output &amp; done\nprint $graph-&gt;as_graphml();\nexit;\n\n\n# a set of bigrams and their frequencies\n__DATA__\ncds classroom   4\nmaximum registration    4\nmay want    3\nanomalies within    2\nresulting analysis  2\nparticipants may    2\ncorpus without  2\njournal articles    2\nquickly learn   2\nactive reading  2\ntext mining     2\nliterally count     2\nfind patterns   2\n14 million  2\ndigital humanities  2\nhumanities research     2\n</code></pre>\n"}, {"tags": ["git", "perl", "hook", "githooks"], "comments": [{"owner": {"reputation": 5913, "user_id": 5784831, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/IBySS.png?s=128&g=1", "display_name": "Christoph", "link": "https://stackoverflow.com/users/5784831/christoph"}, "edited": false, "score": 0, "creation_date": 1512490651, "post_id": 47657510, "comment_id": 82274679, "body": "Can you show the hook? See e.g. <a href=\"https://stackoverflow.com/questions/6644329/block-a-git-branch-from-being-pushed\">here</a> for some ideas."}, {"owner": {"reputation": 1176, "user_id": 2269535, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/bhsyK.jpg?s=128&g=1", "display_name": "ivoruJavaBoy", "link": "https://stackoverflow.com/users/2269535/ivorujavaboy"}, "reply_to_user": {"reputation": 5913, "user_id": 5784831, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/IBySS.png?s=128&g=1", "display_name": "Christoph", "link": "https://stackoverflow.com/users/5784831/christoph"}, "edited": false, "score": 0, "creation_date": 1512490986, "post_id": 47657510, "comment_id": 82274877, "body": "I&#39;m sorry, the hook is too big to be shown, but the thing is that it needs to be the way it is. I can improve it, introducing a condition about when the action is about &quot;delete a branch&quot;, the problem is that i need to understand how to identify that action."}, {"owner": {"reputation": 5913, "user_id": 5784831, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/IBySS.png?s=128&g=1", "display_name": "Christoph", "link": "https://stackoverflow.com/users/5784831/christoph"}, "edited": false, "score": 1, "creation_date": 1512491433, "post_id": 47657510, "comment_id": 82275191, "body": "So your question is more like how to a adjust a hook &quot;to my needs&quot;? I fear people can only help if you provide the hook and the conditions under which you want the beavior changed and how it should exactly change."}, {"owner": {"reputation": 1176, "user_id": 2269535, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/bhsyK.jpg?s=128&g=1", "display_name": "ivoruJavaBoy", "link": "https://stackoverflow.com/users/2269535/ivorujavaboy"}, "reply_to_user": {"reputation": 5913, "user_id": 5784831, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/IBySS.png?s=128&g=1", "display_name": "Christoph", "link": "https://stackoverflow.com/users/5784831/christoph"}, "edited": false, "score": 0, "creation_date": 1512492410, "post_id": 47657510, "comment_id": 82275811, "body": "My question is how can i get that event, the case i&#39;m pushing a branch deletion :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512496583, "post_id": 47657510, "comment_id": 82278369, "body": "<i>&quot;... the hook is too big to be shown, but ... it needs to be the way it is&quot;</i> If that is true then I don&#39;t see how you have any options at all. The hook prohibits your deletions but that&#39;s the way it is and it needs to be that way. Please clarify."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512496852, "post_id": 47657510, "comment_id": 82278544, "body": "If you absolutely need to show very large chunks of code then it&#39;s acceptable to upload that code to something like <a href=\"https://pastebin.com\" rel=\"nofollow noreferrer\"><code>pastebin</code></a> and add a link here. But you should do your best to make Stack Overflow posts self-contained and independent of transitory resources."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512501004, "post_id": 47657510, "comment_id": 82280877, "body": "Please provide a minimal, runnable demonstration of the problem. (See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.)"}, {"owner": {"reputation": 1098, "user_id": 839876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18c5b5c8f510b87137f791033faef29a?s=128&d=identicon&r=PG", "display_name": "frandroid", "link": "https://stackoverflow.com/users/839876/frandroid"}, "edited": false, "score": 1, "creation_date": 1562290924, "post_id": 47657510, "comment_id": 100337252, "body": "@ivoruJavaBoy: The prefered way to provide an answer to the question is to post in the answer field, even if you&#39;re answering your own question. That&#39;s encouraged by SO.  That way if a better answer latter comes by, it can be voted above your original answer, and people can leave comments which pertain to your answer only, rather than have to post them on the question."}], "answers": [{"comments": [{"owner": {"reputation": 1176, "user_id": 2269535, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/bhsyK.jpg?s=128&g=1", "display_name": "ivoruJavaBoy", "link": "https://stackoverflow.com/users/2269535/ivorujavaboy"}, "edited": false, "score": 0, "creation_date": 1512552196, "post_id": 47670631, "comment_id": 82300237, "body": "about the message during push --&gt;  <a href=\"https://stackoverflow.com/questions/10521628/git-push-to-a-remote-repository-with-a-message\" title=\"git push to a remote repository with a message\">stackoverflow.com/questions/10521628/&hellip;</a> :) but it does not cover my case cause I&#39;ve nothing to commit"}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": false, "score": 0, "last_activity_date": 1512551821, "creation_date": 1512551821, "answer_id": 47670631, "question_id": 47657510, "link": "https://stackoverflow.com/questions/47657510/git-push-delete-blocked-remotely-by-update-hook/47670631#47670631", "title": "Git &quot;push --delete&quot; blocked remotely by update hook", "body": "<blockquote>\n  <ol>\n  <li>I can't give a message to the push action. What is the best way to achieve something like this?</li>\n  </ol>\n</blockquote>\n\n<p>You can't. What does that even mean?</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Is there any way to get the <code>push --delete</code> event from the hook? Something like <code>if ${push --delete} then skip hook checks</code></li>\n  </ol>\n</blockquote>\n\n<p>Yes, as you can see from the error message you got, in the case of a delete, the third argument (\"new object name\") will be <code>0000000000000000000000000000000000000000</code>, which you can check for.</p>\n\n<blockquote>\n  <p>Is there any way to create a custom parameter to the push operation in order to skip the hook?</p>\n</blockquote>\n\n<p>No. A client can't decide whether or not hooks are run on the server. This is a deliberate decision to allow servers to enforce policy through hooks.</p>\n"}], "owner": {"reputation": 1176, "user_id": 2269535, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/bhsyK.jpg?s=128&g=1", "display_name": "ivoruJavaBoy", "link": "https://stackoverflow.com/users/2269535/ivorujavaboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 441, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1512552066, "creation_date": 1512488763, "last_edit_date": 1512552066, "question_id": 47657510, "link": "https://stackoverflow.com/questions/47657510/git-push-delete-blocked-remotely-by-update-hook", "title": "Git &quot;push --delete&quot; blocked remotely by update hook", "body": "\n\n<p>I need a way to delete Git repository branches more conveniently cause an `update hook' is blocking them:</p>\n\n<h3>Command</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>git push -v -f --no-verify --delete origin test_branch\n</code></pre>\n\n<h3>Output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>remote: fatal: Not a valid commit name 0000000000000000000000000000000000000000\nremote: error: hook declined to update refs/heads/test_branch\n</code></pre>\n\n<p>I'm currently disabling the update hook temporarily, performing the delete, and then restoring the hook, so I'm looking for suggestions for something better, even perhaps altering the Perl Git hook.</p>\n\n<p>I don't know anything about Perl or Git hooks, so I have these questions</p>\n\n<ol>\n<li><p>I can't give a message to the <code>push</code> action. What is the best way to achieve something like this?</p></li>\n<li><p>Is there any way to get the <code>push --delete</code> event from the hook?</p>\n\n<p>Something like </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>if ${push --delete} then skip hook checks\n</code></pre></li>\n<li><p>Is there any way to create a custom parameter to the <code>push</code> operation in order to skip the hook? Something like</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>if command line contains --imgod then skip hook checks\n</code></pre></li>\n</ol>\n\n<p>I'm totally groping in the dark.</p>\n\n<p>This is the <code>update</code> hook definition from the Git documentation</p>\n\n<blockquote>\n  <p><strong>UPDATE HOOK</strong> \n  This hook is invoked by git-receive-pack on the remote repository, which happens when a git push is done on a local\n  repository. Just before updating the ref on the remote repository, the\n  update hook is invoked. Its exit status determines the success or\n  failure of the ref update.</p>\n  \n  <p>The hook executes once for each ref to be updated, and takes three\n  parameters:</p>\n  \n  <ul>\n  <li><p>the name of the ref being updated,</p></li>\n  <li><p>the old object name stored in the ref,</p></li>\n  <li><p>and the new object name to be stored in the ref</p></li>\n  </ul>\n  \n  <p>A zero exit from the update hook allows the ref to be updated. Exiting\n  with a non-zero status prevents git-receive-pack from updating that\n  ref.</p>\n  \n  <p>This hook can be used to prevent forced update on certain refs by\n  making sure that the object name is a commit object that is a\n  descendant of the commit object named by the old object name. That is,\n  to enforce a \"fast-forward only\" policy.</p>\n  \n  <p>It could also be used to log the old..new status. However, it does not\n  know the entire set of branches, so it would end up firing one e-mail\n  per ref when used naively, though. The post-receive hook is more\n  suited to that.</p>\n  \n  <p>In an environment that restricts the users' access only to git\n  commands over the wire, this hook can be used to implement access\n  control without relying on filesystem ownership and group membership.\n  See git-shell[1] for how you might use the login shell to restrict the\n  user\u2019s access to only git commands.</p>\n  \n  <p>Both standard output and standard error output are forwarded to git\n  send-pack on the other end, so you can simply echo messages for the\n  user.</p>\n  \n  <p>The default update hook, when enabled\u2014\u200band with hooks.allowunannotated\n  config option unset or set to false\u2014\u200bprevents unannotated tags to be\n  pushed.</p>\n</blockquote>\n\n<p><strong>ANSWER:</strong></p>\n\n<p>i found a way to catch the branch deletion event into the update hook and to skip the logic of the hook in all the other cases:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>zero=\"0000000000000000000000000000000000000000\"\nif [ \"$refname\" == \"refs/heads/*\"] &amp;&amp; [ \"$newrev\" == \"$zero\" ]; \nthen\n      exit 0\nelse\n      perform_your_checks()\nfi\n</code></pre>\n\n<p>more info can be found in the update.sample GIT template.</p>\n"}, {"tags": ["perl", "elastic-stack", "geoip", "maxmind"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 10132232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2058db9e31b93adc826a143a0b46fe6?s=128&d=identicon&r=PG&f=1", "display_name": "chang", "link": "https://stackoverflow.com/users/10132232/chang"}, "is_accepted": false, "score": 1, "last_activity_date": 1532530246, "creation_date": 1532530246, "answer_id": 51521888, "question_id": 47655730, "link": "https://stackoverflow.com/questions/47655730/maxmind-writer-to-create-custom-database-to-use-with-geoip-in-elk-stack/51521888#51521888", "title": "MaxMind Writer to create custom database to use with geoip in ELK Stack", "body": "<p>You need to refer to the official GeoLite2-City.mmdb structure(example \uff0cuse <a href=\"https://github.com/maxmind/MaxMind-DB-Reader-python\" rel=\"nofollow noreferrer\">reader</a>)</p>\n\n<p>perl code sample :</p>\n\n<pre><code>my %types = (\n city =&gt; 'map',\n geoname_id =&gt; 'uint32',\n names =&gt; 'map',\n en =&gt; 'utf8_string',\n iso_code =&gt; 'utf8_string',\n country =&gt; 'map',\n registered_country =&gt; 'map',\n location =&gt; 'map',\n latitude =&gt; 'double',\n accuracy_radius =&gt; 'uint32',\n time_zone =&gt; 'utf8_string',\n longitude =&gt; 'double',\n continent =&gt; 'map',\n);\n\nmy $tree = MaxMind::DB::Writer::Tree-&gt;new(\nip_version            =&gt; 4,\nrecord_size           =&gt; 28,\ndatabase_type         =&gt; 'GeoIP2-City',\nlanguages             =&gt; ['en'],\ndescription           =&gt; { en =&gt; 'GeoLite2 City database' },\nmap_key_type_callback =&gt; sub { $types{ $_[0] } },\n);\n\n$tree-&gt;insert_network(\n '183.136.190.0/24' =&gt; {\n     city =&gt; {\n                 geoname_id =&gt; 1808926,\n                 names =&gt; {\n                              'en' =&gt; 'test1',\n                          },\n             },\n     country =&gt; {\n                     geoname_id =&gt; 1814991,\n                     iso_code =&gt; 'CN',\n                     names =&gt; {\n                                  'en' =&gt; 'test2',\n                              },\n                },\n     registered_country =&gt; {\n                               geoname_id =&gt; 1814991,\n                               iso_code =&gt; 'CN',\n                               names =&gt; {\n                                            'en' =&gt; 'test3',\n                                        },\n                           },\n#         subdivisions =&gt; (\n#                           {\n#                             geoname_id =&gt; 1784764,\n#                             iso_code =&gt; 'ZJ',\n#                             names =&gt; {\n#                                          en =&gt; 'Zhejiang',\n#                                      },\n#                           },\n#                         ),\n     location =&gt; {\n                     latitude =&gt; 30.2936,\n                     accuracy_radius =&gt; 50,\n                     time_zone =&gt; 'Asia/Shanghai',\n                     longitude =&gt; 120.1614,\n                 },\n     continent =&gt; {\n                      geoname_id =&gt; 6255147,\n                      iso_code =&gt; 'AS',\n                      names =&gt; {\n                                   en =&gt; 'Asia',\n                               },\n                  },\n      },\n);\n</code></pre>\n\n<p>logstash filter config:</p>\n\n<pre><code>    geoip {\n      source =&gt; \"remote_addr\"\n      database =&gt; \"/temp/csv2mmdb/IPB.mmdb\"\n      fields =&gt; [\"city_name\", \"country_name\"]\n      target =&gt; \"geoip\"\n    }\n</code></pre>\n\n<p>output result:</p>\n\n<pre><code>\"remote_addr\" =&gt; \"183.136.190.40\",\n\"geoip\" =&gt; {\n       \"city_name\" =&gt; \"test1\",\n       \"country_name\" =&gt; \"test2\"\n},\n\"X-Forwarded-Proto\" =&gt; \"-\",\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 915, "user_id": 2605758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DIjwG.png?s=128&g=1", "display_name": "Hoppeduppeanut", "link": "https://stackoverflow.com/users/2605758/hoppeduppeanut"}, "edited": false, "score": 1, "creation_date": 1558651127, "post_id": 56283490, "comment_id": 99181391, "body": "This is specifically a Perl question. An answer in Ruby is not useful to those who would come across the same issue seeking help in Perl."}, {"owner": {"reputation": 176, "user_id": 10026362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6968ce73ad2c93c77b13ed60c578a981?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/10026362/jonathan"}, "reply_to_user": {"reputation": 915, "user_id": 2605758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DIjwG.png?s=128&g=1", "display_name": "Hoppeduppeanut", "link": "https://stackoverflow.com/users/2605758/hoppeduppeanut"}, "edited": false, "score": 0, "creation_date": 1558658453, "post_id": 56283490, "comment_id": 99182705, "body": "The question is not about perl. It&#39;s about getting geo_points in ELK with a custom MaxMindDB."}], "tags": [], "owner": {"reputation": 176, "user_id": 10026362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6968ce73ad2c93c77b13ed60c578a981?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/10026362/jonathan"}, "is_accepted": false, "score": 1, "last_activity_date": 1558649021, "creation_date": 1558649021, "answer_id": 56283490, "question_id": 47655730, "link": "https://stackoverflow.com/questions/47655730/maxmind-writer-to-create-custom-database-to-use-with-geoip-in-elk-stack/56283490#56283490", "title": "MaxMind Writer to create custom database to use with geoip in ELK Stack", "body": "<p>You dont need to use the MaxMind geoip format. </p>\n\n<p>If you building your own mmdb. You can just create a python script to lookup the IP using MaxMind maxminddb module and output a JSON object. \nYou will need to update the your elastic index template for geo_point data.  </p>\n\n<p>To make the ruby script easy I used PyInstaller to make a single python excutable. </p>\n\n<p>logstash config </p>\n\n<pre><code>    if [dest_ip] =~ /.+/ {\n       ruby {\n        code =&gt; 'require \"open3\"\n                if(File.file?(\"/path/to/mmdb/file/data_ip4.mmdb\"))\n                dest_ip = event.get(\"dest_ip\")\n                cmd =  \"ip_search /path/to/mmdb/file/data_ip4.mmdb #{dest_ip}\" dst\n                stdin, stdout, stderr = Open3.popen3(cmd)\n                event.set(\"process_result1\", stdout.read)\n                end'\n       }\n    }\n\n    if [process_result1] =~ /.+/ {\n         json {\n            source =&gt; \"process_result1\"\n            skip_on_invalid_json =&gt; true\n         }\n    }\n\n</code></pre>\n\n<p>Sample script output</p>\n\n<pre><code>{\n  \"dst\": {\n    \"country\": {\n      \"iso_code\": \"US\"\n    }, \n    \"domain\": \"akamaitechnologies.com\", \n    \"company\": \"Akamai Technologies, Inc.\", \n    \"asn\": 32787, \n    \"location\": {\n      \"lat\": 39.043800354003906, \n      \"lon\": -77.48789978027344\n    }\n  }\n}\n\n</code></pre>\n\n<p>update index template for geo data  </p>\n\n<pre><code>PUT _template/logstash/\n{\n    \"index_patterns\": \"some_index*\",\n    \"mappings\": {\n    \"_default_\": {\n    \"properties\": {\n      \"dst\":{\n        \"properties\": {\n          \"location\": {\n            \"type\": \"geo_point\"\n          }\n        }\n      }\n      }\n    }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 8978351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4261e8436b5512faa320158ec7c3d2c?s=128&d=identicon&r=PG&f=1", "display_name": "emcewees", "link": "https://stackoverflow.com/users/8978351/emcewees"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1643, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1558649021, "creation_date": 1512483333, "question_id": 47655730, "link": "https://stackoverflow.com/questions/47655730/maxmind-writer-to-create-custom-database-to-use-with-geoip-in-elk-stack", "title": "MaxMind Writer to create custom database to use with geoip in ELK Stack", "body": "<p>\nI'm trying to create a custom database for an internal network using the perl Writer from MaxMind, which is working good so far. I then try to geolocate these IP ranges with the geoip filter plugin in logstash. I can verify that that the created database contains my data correctly using a perl script that utilizes the MaxMind Reader.</p>\n\n\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse feature qw( say );\nuse local::lib 'local';\n\nuse MaxMind::DB::Writer::Tree;\nuse Net::Works::Network;\n\nmy $filename = 'test.mmdb';\n\n# Your top level data structure will always be a map (hash).  The MMDB format\n# is strongly typed.  Describe your data types here.\n# See https://metacpan.org/pod/MaxMind::DB::Writer::Tree#DATA-TYPES\n\nmy %types = (\n    geoname_id =&gt; 'uint32',\n    locale_code =&gt; 'utf8_string',\n    continent_code =&gt; 'utf8_string',\n    continent_name =&gt; 'utf8_string',\n    country_iso_code =&gt; 'utf8_string',\n    country_name =&gt; 'utf8_string',\n    subdivision_1_iso_code =&gt; 'utf8_string',\n    subdivision_1_name =&gt; 'utf8_string',\n    city_name =&gt; 'utf8_string',\n    metro_code =&gt; 'uint32',\n    time_zone =&gt; 'utf8_string',\n    postal_code =&gt; 'utf8_string',\n    latitude =&gt; 'double',\n    longitude =&gt; 'double',\n);\n\nmy $tree = MaxMind::DB::Writer::Tree-&gt;new(\n    database_type =&gt; 'GeoIP2-City',\n    description =&gt; { en =&gt; 'IP-Ranges', de =&gt; q{IP-Bereiche}, },\n    ip_version =&gt; 4,\n    map_key_type_callback =&gt; sub { $types{ $_[0] } },\n    record_size =&gt; 24,\n    remove_reserved_networks =&gt; 0,\n);\n\nmy %address_for_employee = (\n    'xx.xx.xx.xx/24' =&gt; {\n        geoname_id =&gt; 3164699,\n        locale_code =&gt; 'de',\n        continent_code =&gt; 'EU',\n        continent_name =&gt; 'Europa',\n        country_iso_code =&gt; 'IT',\n        country_name =&gt; 'Italien',\n        subdivision_1_iso_code =&gt; '09',\n        city_name =&gt; 'Varese',\n        time_zone =&gt; 'Europe/Rome',\n        postal_code =&gt; '21100',\n        latitude =&gt; 45.7908,\n        longitude =&gt; 8.8515,\n    },    \n    'xx.xx.xx.xx/24' =&gt; {\n        geoname_id =&gt; 3164699,\n        locale_code =&gt; 'de',\n        continent_code =&gt; 'EU',\n        continent_name =&gt; 'Europa',\n        country_iso_code =&gt; 'IT',\n        country_name =&gt; 'Italien',\n        subdivision_1_iso_code =&gt; '09',\n        city_name =&gt; 'Varese',\n        time_zone =&gt; 'Europe/Rome',\n        postal_code =&gt; '21100',\n        latitude =&gt; 45.7908,\n        longitude =&gt; 8.8515,\n    },   \n);\n\nfor my $address ( keys %address_for_employee ) {\n\n    # Create one network and insert it into our database\n    my $network = Net::Works::Network-&gt;new_from_string( string =&gt; $address );\n\n    $tree-&gt;insert_network( $network, $address_for_employee{$address} );\n        say \"Created Subnet from ___ $network ===&gt; $address ___\";\n}\n\n# Write the database to disk.\nopen my $fh, '&gt;:raw', $filename;\n$tree-&gt;write_tree( $fh );\nclose $fh;\n\nsay \"$filename has now been created\";\n</code></pre>\n\n<p>Logstash filter configuration:</p>\n\n<pre><code>filter {\ngeoip {\n  source =&gt; \"src_ip\"\n  target =&gt; \"src_ip_geo\"\n  database =&gt; \"test.mmdb\"\n  add_field =&gt; [ \"[src_ip_geo][coordinates]\", \"%{[src_ip_geo][longitude]}\" ]\n  add_field =&gt; [ \"[src_ip_geo][coordinates]\", \"%{[src_ip_geo][latitude]}\"  ]\n}\nmutate {\n  convert =&gt; [ \"[geoip][coordinates]\", \"float\"]\n}\n}\n</code></pre>\n\n<p>\nComparing it to the workflow with the old MaxMind Database GeoLiteCity.dat I try to get some fields added to the output based on the ip addresses I defined in the database.\n\nHowever logs get pushed correctly to elasticsearch, but without the additional fields but with a tag added that says: <strong>_geoip_lookup_failure</strong></p>\n\n<p>Is there a way to debug this filter somehow since my logstash log does not offer any hint. I also output using the </p>\n\n<pre><code>output { stdout{ codec =&gt; \"json\" } }\n</code></pre>\n\n<p>but there is no error or warning in there just the plain json that gets then pushed to elasticsearch. Is the database created in the right way?</p>\n"}, {"tags": ["regex", "perl", "io"], "answers": [{"comments": [{"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1512550580, "post_id": 47655862, "comment_id": 82299294, "body": "why the downvote tho? Please tell me if my answer is incorrect but honnestly i don&#39;t see what&#39;s wrong"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512579478, "post_id": 47655862, "comment_id": 82318324, "body": "Perhaps because it handles EOF poorly? But then again,Javier Elices&#39;s also suffers from that problem, and they didn&#39;t get downvoted, and mine doesn&#39;t suffer from that problem and it got silently downvoted too."}], "tags": [], "owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "is_accepted": false, "score": 0, "last_activity_date": 1512484429, "last_edit_date": 1512484429, "creation_date": 1512483745, "answer_id": 47655862, "question_id": 47655408, "link": "https://stackoverflow.com/questions/47655408/content-of-unmatched-string/47655862#47655862", "title": "Content of unmatched string", "body": "<p>You can do it this way</p>\n\n<pre><code>my $var = &lt;&gt;;\nchomp $var;\n\nwhile($var =~ /^(\\d+)$/) \n{\n    #here do stuff with $var, containing only numbers\n\n    $var = &lt;&gt;;\n    chomp $var;\n}\n\n# here do stuff with $var, containing now a word\n</code></pre>\n\n<p>other thing: by changing <code>/(\\d+)/</code> for <code>/^(\\d+)$/</code> you make sure your entry contains ONLY numbers ;)</p>\n"}, {"tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": true, "score": 3, "last_activity_date": 1512486401, "last_edit_date": 1512486401, "creation_date": 1512485422, "answer_id": 47656422, "question_id": 47655408, "link": "https://stackoverflow.com/questions/47655408/content-of-unmatched-string/47656422#47656422", "title": "Content of unmatched string", "body": "<p>You could use:</p>\n\n<pre><code>my $line;\nwhile( ($line = &lt;&gt;) =~ /^(\\d+)$/ ) {\n  # do something with $1\n}\nchomp $line;\n# Do something with $line (done)\n</code></pre>\n\n<p>As another answer states, it is a good idea to use <code>chomp</code> with a line of input. It will deal with the newline char or chars in a platform-independent way. If you use a regex to match the number, <code>$1</code> will be \"clean\".</p>\n\n<p>Also as another answer states, <code>/(\\d+)/</code> will match a number anywhere in the line. <code>/^(\\d+)$/</code> will match a line that only contains a number.</p>\n\n<p>Another way:</p>\n\n<pre><code>foreach my $line (&lt;&gt;) {\n  if( $line =~ /^(\\d+)$/ ) {\n    # Do something with $1\n  }\n  else {\n    chomp $line;\n    # Do something with $line (done)\n  }\n}\n</code></pre>\n\n<p>This will let you deal with multiple or even alternating lines of numbers and other text.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1512485703, "creation_date": 1512485703, "answer_id": 47656529, "question_id": 47655408, "link": "https://stackoverflow.com/questions/47655408/content-of-unmatched-string/47656529#47656529", "title": "Content of unmatched string", "body": "<pre><code>while (&lt;&gt;) {\n    chomp;\n    last if !/^\\d+\\z/;\n\n    ... $_ ...\n}\n\ndie(\"Premature EOF\") if !defined($_);\n\n... $_ ...\n</code></pre>\n"}], "owner": {"reputation": 1403, "user_id": 3923424, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b7290a8da460efc02e096d4de444bc13?s=128&d=identicon&r=PG&f=1", "display_name": "R2B2", "link": "https://stackoverflow.com/users/3923424/r2b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 47656422, "answer_count": 3, "score": 0, "last_activity_date": 1512486401, "creation_date": 1512482351, "question_id": 47655408, "link": "https://stackoverflow.com/questions/47655408/content-of-unmatched-string", "title": "Content of unmatched string", "body": "<p>I am parsing input from stdin, which is in the following format:</p>\n\n<pre><code>1\n2\n3\ndone\n</code></pre>\n\n<p>My current code is:</p>\n\n<pre><code>while(&lt;&gt; =~ /(\\d+)/) {\n    # do something with $1\n}\n# I want to access the line following the last number here\n</code></pre>\n\n<p>which is fine for the 1st part of the file (with the list of numbers).\nHowever, I would like the content of the line immediately following the last number.</p>\n\n<p>Is there any elegant way to do it?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9056035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c32d30afd0db8b177277caa5d51817?s=128&d=identicon&r=PG&f=1", "display_name": "Surio", "link": "https://stackoverflow.com/users/9056035/surio"}, "edited": false, "score": 0, "creation_date": 1512484911, "post_id": 47653337, "comment_id": 82270550, "body": "Thank you so much! You made my day."}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "reply_to_user": {"reputation": 23, "user_id": 9056035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c32d30afd0db8b177277caa5d51817?s=128&d=identicon&r=PG&f=1", "display_name": "Surio", "link": "https://stackoverflow.com/users/9056035/surio"}, "edited": false, "score": 0, "creation_date": 1512485356, "post_id": 47653337, "comment_id": 82270926, "body": "you&#39;re welcome ;) Can you click on &quot;accept as answer&quot; if this worked for you? :)"}], "tags": [], "owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "is_accepted": true, "score": 2, "last_activity_date": 1512478012, "last_edit_date": 1512478012, "creation_date": 1512475872, "answer_id": 47653337, "question_id": 47653108, "link": "https://stackoverflow.com/questions/47653108/perl-how-to-skip-error-in-while-loop/47653337#47653337", "title": "PERL How to skip error in while loop", "body": "<p>you will have to use <code>eval</code> block</p>\n\n<p>here's some documentation:\n<a href=\"https://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/functions/eval.html</a></p>\n\n<p>Also, you forgot a <code>/</code> at <code>if($decoded_json2-&gt;{media_id} =~ /^([^_]*);*)</code></p>\n\n<p>your code will be then</p>\n\n<pre><code>#your code until line 29\n\neval {$mech_get-&gt;get('https://www.instagram.com/'.$row.'/?__a=1');};\n\nif(not $@)\n{\n    my $decoded_json = decode_json( $mech_get-&gt;response()-&gt;decoded_content() );\n\n     print \"Found Post \\n\";\n\n    $mech_get-&gt;get('https://api.instagram.com/oembed/?url=https://www.instagram.com/p/'.$decoded_json-&gt;{user}-&gt;{media}-&gt;{nodes}[0]-&gt;{code}.'/');\n\n    my $decoded_json2 = decode_json( $mech_get-&gt;response()-&gt;decoded_content() );\n\n    print \"Linking Post by Id\";\n    my $post;\n\n    if($decoded_json2-&gt;{media_id} =~ /^([^_]*);*)/   {\n        $post = $1;\n    }\n\n    $mecho-&gt;add_header('Accept-Encoding' =&gt; 'gzip, deflate', 'X-Instagram-AJAX' =&gt; '1', 'Accept-Language' =&gt; 'de-DE,de;q=0.8,en-US;q=0.6,en;q=0.4,pl;q=0.2,nl;q=0.2' ,'X-Requested-With' =&gt; 'XMLHttpRequest', 'X-CSRFToken' =&gt; getcsrf($mecho));\n\n    $mecho-&gt;post('https://www.instagram.com/web/likes/'.$post.'/like/');\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 9056035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c32d30afd0db8b177277caa5d51817?s=128&d=identicon&r=PG&f=1", "display_name": "Surio", "link": "https://stackoverflow.com/users/9056035/surio"}, "edited": false, "score": 0, "creation_date": 1512487538, "post_id": 47656902, "comment_id": 82272535, "body": "Thanks, this information will surely be useful for me in the future"}], "tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": false, "score": 1, "last_activity_date": 1512487137, "last_edit_date": 1512487137, "creation_date": 1512486822, "answer_id": 47656902, "question_id": 47653108, "link": "https://stackoverflow.com/questions/47653108/perl-how-to-skip-error-in-while-loop/47656902#47656902", "title": "PERL How to skip error in while loop", "body": "<p>In general, any piece of code that may fail may be placed within an <code>eval</code> block like this:</p>\n\n<pre><code>eval {\n  # Piece of code that may fail\n};\nif($@) {\n  # In case you want to deal with the error; $@ contains the text describing the error\n}\n</code></pre>\n\n<p>The piece of code inside <code>eval</code> will be compiled, so you know that it contains no syntax errors. A run-time error will be ignored but you will be able to catch it within the <code>if</code> block.</p>\n"}, {"tags": [], "owner": {"reputation": 368, "user_id": 8500343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1618f74886ab1cff3eca67c71af07caf?s=128&d=identicon&r=PG&f=1", "display_name": "Jochen Lutz", "link": "https://stackoverflow.com/users/8500343/jochen-lutz"}, "is_accepted": false, "score": 0, "last_activity_date": 1512658143, "creation_date": 1512658143, "answer_id": 47697659, "question_id": 47653108, "link": "https://stackoverflow.com/questions/47653108/perl-how-to-skip-error-in-while-loop/47697659#47697659", "title": "PERL How to skip error in while loop", "body": "<h1>Disable WWW::Mechanize's automatic error handling</h1>\n\n<p>WWW::Mechanize by default does automatic error checking, which dies on errors (<a href=\"http://search.cpan.org/~oalders/WWW-Mechanize-1.86/lib/WWW/Mechanize.pm#new()\" rel=\"nofollow noreferrer\">http://search.cpan.org/~oalders/WWW-Mechanize-1.86/lib/WWW/Mechanize.pm#new()</a>). You can add <code>autocheck =&gt; 0</code> to the constructor to disable this behaviour. You then have to check manually after each request, either by checking the return of the request method</p>\n\n<pre><code>my $response = $mech-&gt;get($url);\nunless ($response-&gt;is_success) {\n    ### add your error handling here\n}\n</code></pre>\n\n<p>or by using WWW::Mechanize's shortcut:</p>\n\n<pre><code>$mech-&gt;get($url);\nunless ($mech-&gt;success) {\n    ### add your error handling here\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9056035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c32d30afd0db8b177277caa5d51817?s=128&d=identicon&r=PG&f=1", "display_name": "Surio", "link": "https://stackoverflow.com/users/9056035/surio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 910, "favorite_count": 0, "accepted_answer_id": 47653337, "answer_count": 3, "score": 2, "last_activity_date": 1512658143, "creation_date": 1512475088, "question_id": 47653108, "link": "https://stackoverflow.com/questions/47653108/perl-how-to-skip-error-in-while-loop", "title": "PERL How to skip error in while loop", "body": "<p>I have this script which automates a process of like on Instagram.\nIt does exactly what it should do except for one thing. Within the while loop, if a user does not exist the script dies.\nIn this case, the error should be ignored and the script should continue processing the other users of the list.</p>\n\n<p>This is the error i get:</p>\n\n<p><code>Error GETing https://www.instagram.com/usernamethatdoesntexist/?__\na=1: Not Found at instagram-post-liker.pl line 29</code></p>\n\n<p>Thanks for any help</p>\n\n<pre><code>use WWW::Mechanize;\nuse JSON;\n\n\nmy $filename = 'data.txt';\nopen(my $fh, '&lt;:encoding(UTF-8)', $filename)\n  or die \"Could not open file '$filename' $!\";\n\nmy $mech_get = WWW::Mechanize-&gt;new(agent =&gt; 'Mozilla/5.0 (Windows NT 6.0; rv:2.0) Gecko/20100101 Firefox/4.0 Opera 12.14');\n\n\nmy $mecho = WWW::Mechanize-&gt;new(agent =&gt; 'Mozilla/5.0 (Linux; U; Android 2.2; de-de; HTC Desire HD 1.18.161.2 Build/FRF91) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1');\n\n$mecho-&gt;get('https://www.instagram.com/');\n\n$mecho-&gt;add_header('Accept-Encoding' =&gt; 'gzip, deflate', 'X-Instagram-AJAX' =&gt; '1', 'Accept-Language' =&gt; 'de-DE,de;q=0.8,en-US;q=0.6,en;q=0.4,pl;q=0.2,nl;q=0.2' ,'X-Requested-With' =&gt; 'XMLHttpRequest', 'X-CSRFToken' =&gt; getcsrf($mecho));\n\nmy $post_data = {\n    username    =&gt;  'username',\n    password    =&gt;  'password'\n};\n\n$mecho-&gt;post('https://www.instagram.com/accounts/login/ajax/', $post_data);\n\n  while (my $row = &lt;$fh&gt;) {\n  chomp $row;\n  print \"getting user $row\\n\";\n\n    $mech_get-&gt;get('https://www.instagram.com/'.$row.'/?__a=1');\n\n\n    my $decoded_json = decode_json( $mech_get-&gt;response()-&gt;decoded_content() );\n\n     print \"Found Post \\n\";\n\n    $mech_get-&gt;get('https://api.instagram.com/oembed/?url=https://www.instagram.com/p/'.$decoded_json-&gt;{user}-&gt;{media}-&gt;{nodes}[0]-&gt;{code}.'/');\n\n    my $decoded_json2 = decode_json( $mech_get-&gt;response()-&gt;decoded_content() );\n\n    print \"Linking Post by Id\";\n    my $post;\n\n    if($decoded_json2-&gt;{media_id} =~ /^([^_]*);*)   {\n        $post = $1;\n    }\n\n    $mecho-&gt;add_header('Accept-Encoding' =&gt; 'gzip, deflate', 'X-Instagram-AJAX' =&gt; '1', 'Accept-Language' =&gt; 'de-DE,de;q=0.8,en-US;q=0.6,en;q=0.4,pl;q=0.2,nl;q=0.2' ,'X-Requested-With' =&gt; 'XMLHttpRequest', 'X-CSRFToken' =&gt; getcsrf($mecho));\n\n    $mecho-&gt;post('https://www.instagram.com/web/likes/'.$post.'/like/');\n\n}\n\n\n\nsub getcsrf {\n\n    my ($somemech) = @_;\n\n    my $cookies2  = $somemech-&gt;response-&gt;header('Set-Cookie');\n\n\n    my $csrf_token2;\n    if ($cookies2 =~ /csrftoken=([^;]+);/i){\n        return $1;\n    }\n    else {\n        die \"Unable to find csrftoken in cookie headers, did something change?\";\n\n        }\n\n};\n</code></pre>\n"}, {"tags": ["perl", "nginx", "dancer"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1512473233, "post_id": 47652418, "comment_id": 82263043, "body": "You can deploy several PSGI apps within the same PSGI file and run them on the same plackup on one port. D2 is designed so you can even have multiple instances of the same application in one PSGI file. But that has the risk that if one crashes, it takes the others with it. The general approach would be to run each one seperate on its own port (or socket). Why is that a problem?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1512474396, "post_id": 47652418, "comment_id": 82263821, "body": "<i>But it seems like I cannot run multiple <code>dancer2</code> apps in same server with different ports</i> I think this is wrong. I can&#39;t see why this would be a problem. Can you please expand your question to explain what goes wrong when you try this."}, {"owner": {"reputation": 6148, "user_id": 1383889, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4Xk8P.jpg?s=128&g=1", "display_name": "Yasiru G", "link": "https://stackoverflow.com/users/1383889/yasiru-g"}, "edited": false, "score": 0, "creation_date": 1512474984, "post_id": 47652418, "comment_id": 82264194, "body": "I just started leaning RESTapi and Dancer. If I code 2 dancer scripts like app1.pl and app2.pl there is no way to start both apps in same server because dancer designed to use with single port. So always the first app reserve the port and second app will fail to listen to it since the port already in use."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1512478063, "post_id": 47652418, "comment_id": 82266073, "body": "<i>dancer designed to use with single port</i> That is not true. It is easy to run multiple Dancer2 apps on different ports. Dancer2 apps know nothing about the port they are running on - that is set by the deployment mechanism you use. It depends on how you run the apps, but with <code>plackup</code>, for example, you could run <code>plackup -p 3000 app1.psgi</code> and <code>plackup -p 4000 app2.psgi</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1512489837, "post_id": 47652418, "comment_id": 82274136, "body": "@Dave it seems this is a simple issue of not reading the docs. You should flesh that out into an answer."}, {"owner": {"reputation": 6148, "user_id": 1383889, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4Xk8P.jpg?s=128&g=1", "display_name": "Yasiru G", "link": "https://stackoverflow.com/users/1383889/yasiru-g"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1512529119, "post_id": 47652418, "comment_id": 82291336, "body": "Thanks @DaveCross ! I just tested and it worked. I couldn&#39;t find a clear doc about this. Please put your comment as an answer, so I can mark it as the answer."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1512556609, "post_id": 47652418, "comment_id": 82303205, "body": "I&#39;ve put my comment into an answer."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1512489759, "post_id": 47652576, "comment_id": 82274074, "body": "As I said in my comment above, this has the problem of sharing a parent process. If one of the applications crashes, it might take all of them with it. That might or might not be a big deal. Certainly depends on how many machines there are running those, what the product is and so on. But it&#39;s a risk."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 4, "last_activity_date": 1512473413, "creation_date": 1512473413, "answer_id": 47652576, "question_id": 47652418, "link": "https://stackoverflow.com/questions/47652418/how-to-run-multiple-perl-dancer2-apps-in-same-nginx-server/47652576#47652576", "title": "How to run multiple perl Dancer2 apps in same nginx server", "body": "<p>When you have multiple Dancer2 applications, you can compose them together using either <a href=\"https://metacpan.org/module/Plack::App::URLMap\" rel=\"nofollow noreferrer\">Plack::App::URLMap</a> or the wrapper syntax for it available in <a href=\"https://metacpan.org/pod/Plack::Builder\" rel=\"nofollow noreferrer\">Plack::Builder</a>:</p>\n\n<pre><code>use MyApp::Main;\nuse MyApp::Admin;\n\nbuilder {\n    mount '/'      =&gt; MyApp::Main-&gt;to_app;\n    mount '/admin' =&gt; MyApp::Admin-&gt;to_app;\n};\n</code></pre>\n\n<p>The effect of the mounting is that these applications will be completely separate and <a href=\"https://metacpan.org/pod/Plack::Builder\" rel=\"nofollow noreferrer\">Plack::Builder</a> will assure only the appropriate application handles a given request.</p>\n\n<p>Source: <a href=\"http://advent.perldancer.org/2014/9\" rel=\"nofollow noreferrer\">http://advent.perldancer.org/2014/9</a></p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1512556585, "creation_date": 1512556585, "answer_id": 47672181, "question_id": 47652418, "link": "https://stackoverflow.com/questions/47652418/how-to-run-multiple-perl-dancer2-apps-in-same-nginx-server/47672181#47672181", "title": "How to run multiple perl Dancer2 apps in same nginx server", "body": "<blockquote>\n  <p>But it seems like I cannot run multiple <code>dancer2</code> apps in same server with different ports <em>(like localhost:3000, localhost:4000)</em>.</p>\n</blockquote>\n\n<p>This isn't true. Dancer (and, obviously, Dancer2) apps know nothing about the port that they are listening to. That is all handled by your deployment environment. If, for example, you have two Dancer apps called <code>app1.psgi</code> and <code>app2.psgi</code> and you are starting them with <code>plackup</code>, then you can get them running on different ports using the <code>-p</code> command line option.</p>\n\n<pre><code>$ plackup -p 3000 app1.psgi\n$ plackup -p 4000 app2.psgi\n</code></pre>\n"}], "owner": {"reputation": 6148, "user_id": 1383889, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4Xk8P.jpg?s=128&g=1", "display_name": "Yasiru G", "link": "https://stackoverflow.com/users/1383889/yasiru-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 47672181, "answer_count": 2, "score": 3, "last_activity_date": 1512556585, "creation_date": 1512472938, "question_id": 47652418, "link": "https://stackoverflow.com/questions/47652418/how-to-run-multiple-perl-dancer2-apps-in-same-nginx-server", "title": "How to run multiple perl Dancer2 apps in same nginx server", "body": "<p>I figured that I can manage multiple apps using location in <code>nginx</code>. </p>\n\n<p>But it seems like I cannot run multiple <code>dancer2</code> apps in same server with different ports <em>(like localhost:3000, localhost:4000)</em>. </p>\n\n<p>Anyway I'm putting this here with a hope that experts can show me some light.</p>\n"}, {"tags": ["perl", "debian", "dancer"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512470272, "post_id": 47651492, "comment_id": 82261174, "body": "<code>cpan Dancer2</code>? The downside of CPAN is that you cannot uninstall (easily) and it won&#39;t auto-update."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512471438, "post_id": 47651492, "comment_id": 82261925, "body": "@PerlDuck <code>cpanm</code> <a href=\"https://metacpan.org/pod/distribution/App-cpanminus/bin/cpanm#-uninstall,-U\" rel=\"nofollow noreferrer\">allows you to uninstall</a>, if there is a proper packlist."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512471591, "post_id": 47651492, "comment_id": 82262029, "body": "I&#39;ve closed your question as a duplicate. The first and second answer of that question are spot-on. The second is more modern. Please consider <i>not using the system Perl</i> in production. On your fresh VM this is fine, if it&#39;s only for development. But as soon as that box does anything else, you might mess up something, because the system Perl is meant for the system. Some core Linux utilities use it, and stuff like Dancer has a huge dependency chain, so a lot of things might get updated when you install it, and that could break things, especially if your dist had custom patches on modules."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1512471749, "post_id": 47651492, "comment_id": 82262116, "body": "Right, this is a development machine. But I want to learn how to do it properly as if it were a production machine."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1512471846, "post_id": 47651492, "comment_id": 82262170, "body": "If i wanted to run the latest version of Dancer 2 on a production machine, how would I do it properly?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512471873, "post_id": 47651492, "comment_id": 82262188, "body": "@simbabque I don&#39;t like the 2nd answer in the post you refer to because it uses <code>sudo</code> to run CPAN. I think your list of answers is ordered differently."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1512472067, "post_id": 47651492, "comment_id": 82262309, "body": "@PerlDuck I meant the one with 50ish votes. It does use <code>sudo</code> to install, yes. But it also talks about cpanm&#39;s bootstrapping technique, which is fine. There should be something about local::lib. I think there is another such question that we often use a dup target, but I can&#39;t find it right now. If you find a better target, I&#39;ll reopen and change it."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1512472276, "post_id": 47651492, "comment_id": 82262437, "body": "The answers to that question you marked mine as a duplicate of don&#39;t answer my question at all."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512484984, "post_id": 47651492, "comment_id": 82270607, "body": "I have reopened. The fact that you are running Debian doesn&#39;t really matter. There is some stuff in the Dancer documentation. I will write something down here later."}], "answers": [{"tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 1, "last_activity_date": 1512512754, "last_edit_date": 1512512754, "creation_date": 1512512425, "answer_id": 47663597, "question_id": 47651492, "link": "https://stackoverflow.com/questions/47651492/installing-latest-version-of-dancer2-on-debian/47663597#47663597", "title": "Installing latest version of Dancer2 on Debian", "body": "<p>I can't tell that the following is the answer for the <em>I want to finally, once and for all, learn the proper way...</em> , but this is how me doing it in all my deployments.</p>\n\n<ol>\n<li>Install <strong>anyenv</strong> <code>sudo git clone https://github.com/riywo/anyenv /opt/anyenv</code> - you could deploy it into your <code>$HOME</code> as <code>git clone https://github.com/riywo/anyenv ~/.anyenv</code> but myself prefering some commonly accessible place. This step isn't mandatory, but for me help managing other local installations as <code>node</code> and such.</li>\n<li>change ownership: <code>sudo chown -R jm666 /opt/anyenv</code> - you will manage the content</li>\n<li>add into the <code>.profile</code>:</li>\n</ol>\n\n\n\n<pre><code>export ANYENV_ROOT=/opt/anyenv\nexport PATH=\"$ANYENV_ROOT/bin:$PATH\"\neval \"$(anyenv init -)\"\n</code></pre>\n\n\n\n<p>Relog, or run <code>exec $SHELL -l</code>. Now you have installed an helper for all commonly needed environments.</p>\n\n<p>Now install the <code>perl</code> env. helper, called <code>plenv</code>. </p>\n\n<pre><code>anyenv install plenv\n</code></pre>\n\n<p>Or follow the <a href=\"https://github.com/tokuhirom/plenv\" rel=\"nofollow noreferrer\">guide in the repo</a> if you don't want the previous <code>anyenv</code> step.</p>\n\n<p>And finally install fresh <code>perl</code> using <code>plenv</code>:</p>\n\n<pre><code>plenv install -l #will display all available perl versions\nplenv install 5.26.1 -j 8 # number of proc cores or less. :)\n</code></pre>\n\n<p>This will take some time - on my notebook 4m23,186s - just tested :).</p>\n\n<pre><code>plenv global 5.26.1 # now all `perl script.pl` will use the freshly installed perl\nplenv install-cpanm\nplenv rehash #needed if you install some commands which should be accesible from `bash`\n</code></pre>\n\n<p>And you're ready to install any perl modules using <code>cpanm</code> - without compromising the system-wide installed perl. Everything will be installed into the <code>plenv</code>'s directory tree. Even, you never need be <code>root</code>.</p>\n\n<p>This way I could manage to have the same development and deployment environment. Maybe here is a better way - but for me the above works.</p>\n\n<p>In short, read:</p>\n\n<ul>\n<li><a href=\"https://github.com/riywo/anyenv\" rel=\"nofollow noreferrer\">https://github.com/riywo/anyenv</a></li>\n<li><a href=\"https://github.com/tokuhirom/plenv\" rel=\"nofollow noreferrer\">https://github.com/tokuhirom/plenv</a></li>\n</ul>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1512512754, "creation_date": 1512470147, "last_edit_date": 1512471924, "question_id": 47651492, "link": "https://stackoverflow.com/questions/47651492/installing-latest-version-of-dancer2-on-debian", "title": "Installing latest version of Dancer2 on Debian", "body": "<p>OK, got myself a clean virtual machine running Debian 9 (Stretch). I installed <a href=\"https://packages.debian.org/source/stable/libdancer2-perl\" rel=\"nofollow noreferrer\">Dancer2</a> from the Debian package system. It's running version 0.204002. The Dancer2 software is telling me that the latest version is 0.205002.</p>\n\n<p>I want to finally, once and for all, learn the proper way to upgrade Perl modules on a Debian machine to the latest and greatest versions without ruining the Debian <code>dpkg</code> dependencies. How do I achieve this?</p>\n\n<p><strong>EDIT</strong>\nYes, this is a development machine I'm just playing with. But what if I wanted to run the latest version of Dancer 2 on a production machine? How would I do it?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 4, "creation_date": 1512464755, "post_id": 47649638, "comment_id": 82257626, "body": "What is the &quot;<i>the filename patterns</i>&quot; -- what pattern? First three equal characters? Or those that start with <code>A</code>, then those with <code>B</code> ... ?  Please clarify (I mean edit the question to add an explanation)"}, {"owner": {"reputation": 11, "user_id": 8956018, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f37fbe301e61958f0753553a346b69b7?s=128&d=identicon&r=PG", "display_name": "misterbean2", "link": "https://stackoverflow.com/users/8956018/misterbean2"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1512474001, "post_id": 47649638, "comment_id": 82263546, "body": "Replied to you. Thats what i did in shell script also by using field separator in awk i get part of filename and compared against with other filenames."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1512481784, "post_id": 47649638, "comment_id": 82268506, "body": "By &quot;duplicate parts&quot; do you mean leading parts the same or any part? &quot;AAA_555_0000&quot;, &quot;BBB_555_0000&quot;&#39; and &quot;CCC_555_0000&quot; have duplicate parts."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1520349865, "post_id": 47649638, "comment_id": 85273245, "body": "<a href=\"https://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a> - If your problem is solved, accept an answer. Don&#39;t edit the title."}], "answers": [{"comments": [{"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 11, "user_id": 8956018, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f37fbe301e61958f0753553a346b69b7?s=128&d=identicon&r=PG", "display_name": "misterbean2", "link": "https://stackoverflow.com/users/8956018/misterbean2"}, "edited": false, "score": 1, "creation_date": 1512561456, "post_id": 47658023, "comment_id": 82306260, "body": "No problem. If you think the answer is correct, consider voting it up and marking it as correct.:-)"}], "tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": false, "score": 1, "last_activity_date": 1512490379, "creation_date": 1512490379, "answer_id": 47658023, "question_id": 47649638, "link": "https://stackoverflow.com/questions/47649638/perl-script-help-needed-for-duplicate-filenames/47658023#47658023", "title": "Perl Script Help needed for duplicate filenames", "body": "<p>Your question is a bit unclear to me, because I am not sure how you determine the order of your files to tell which one is newer. This code will do what I think you need:</p>\n\n<pre><code>my $dir = shift || '.';\n\nopendir(my $dh, $dir);\nmy @files = sort grep !/^\\./, readdir($dh);\n\nmy $last;\nmy @batch;\nforeach my $f (@files) {\n  my @parts = split /_/, $f;\n\n  if( !$last ) {\n    $last = $parts[0];\n    push @batch, [ @parts ];\n  }\n  elsif( index($last, $parts[0]) != -1 ) {\n    push @batch, [ @parts ];\n  }\n  else {\n    delete_files(@batch);\n\n    @batch = ([ @parts ]);\n    $last  = $parts[0];\n  }\n}\ndelete_files(@batch);\n\nsub delete_files {\n  my @batch = @_;\n\n  @batch = sort {\n    $a-&gt;[0] cmp $b-&gt;[0] ||\n    $a-&gt;[1] cmp $b-&gt;[1] ||\n    $a-&gt;[2] cmp $b-&gt;[2]\n  } @batch;\n  pop @batch;\n\n  map { print \"Delete: \", join('_', @$_), \"\\n\"; } @batch;\n}\n</code></pre>\n\n<p>It assumes that a <em>batch</em> of files is one in which files have the same prefix (up to the first '_' character). When two prefixes have a different length, then the common length has to match.</p>\n\n<p>It also assumes that \"version numbers\" (text bits separated by '_') should be compared, with the leftmost being the most significative.</p>\n\n<p>Given those assumptions, the code, pointed at a directory with the files you mention, outputs:</p>\n\n<pre><code># latest.pl &lt;dir&gt;\nDelete: AAA_555_0000\nDelete: AAAA_123_123\nDelete: BBB_555_0000\nDelete: BBB_555_555\nDelete: CCC_000_000\nDelete: CCC_000_111\n</code></pre>\n\n<p>The unclear part is why you think that file 7 is not the latest...</p>\n\n<p>Once the order is clear, you may change the line:</p>\n\n<pre><code>map { print \"Delete: \", join('_', @$_), \"\\n\"; } @batch;\n</code></pre>\n\n<p>With:</p>\n\n<pre><code>map { unlink join('_', @$_); } @batch;\n</code></pre>\n\n<p>So that it will delete the files.</p>\n\n<p>You may play with the sorting algorthm in the <code>sub</code>, which is the one that determines which files to delete. Now it compares the file name parts from left to right as strings. You may use <code>&lt;=&gt;</code> to compare as numbers instead of <code>cmp</code> where necessary.</p>\n"}], "owner": {"reputation": 11, "user_id": 8956018, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f37fbe301e61958f0753553a346b69b7?s=128&d=identicon&r=PG", "display_name": "misterbean2", "link": "https://stackoverflow.com/users/8956018/misterbean2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520349744, "creation_date": 1512464436, "last_edit_date": 1520349744, "question_id": 47649638, "link": "https://stackoverflow.com/questions/47649638/perl-script-help-needed-for-duplicate-filenames", "title": "Perl Script Help needed for duplicate filenames", "body": "<p>I have developed the below shell script for finding duplicate part of filename and delete it. Similiarly i need to prepare in Perl script also as perl script text processing takes lesser time.</p>\n\n<pre><code>#!/bin/bash\nfor i in `ls -t *xml|awk 'BEGIN{FS=\"_\"}{if (++dup[$1] &gt;= 2) print}'`;\ndo\nrm $i\ndone \n</code></pre>\n\n<p>I have to prepare my perl script my code in such a way that only recent modified filename patterns for example </p>\n\n<pre><code>File 1: AAA_555_0000 \nFile 2: AAAA_123_123 \nFile 3: AAAA_452_452 [latest]\n\nFile 4: BBB_555_0000 \nFile 5: BBB_555_555 \nFile 6: BBB_999_999 [latest]\n\nFile 7: CCC_555_0000 \nFile 8: CCC_000_000 \nFile 9: CCC_000_111 [latest]\n</code></pre>\n\n<p>Perl Script has to pick latest file in all the filename patterns (means part of filename) in the folder and it should compare and delete the duplicates. \nFor example: script has to pick latest file in the AAA filename pattern and it has to compare with other AAA pattern if pattern found it has to delete. in the end only latest file in all filename pattern has to remain. </p>\n\n<p>Appreciate if you can help me with this logic. </p>\n\n<p>Thanks much!</p>\n"}, {"tags": ["perl", "csv"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1512466543, "post_id": 47649463, "comment_id": 82258685, "body": "Your code is incomplete and will not even compile. Please edit your question and post the real code. Also, turn on strict and warnings. You will have to declare your variables. Once you have done that, a lot of the problems will be obvious and easy to resolve."}, {"owner": {"reputation": 141, "user_id": 3297371, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8970d935086faf17d72e5df204e96edd?s=128&d=identicon&r=PG&f=1", "display_name": "Cris", "link": "https://stackoverflow.com/users/3297371/cris"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512467657, "post_id": 47649463, "comment_id": 82259433, "body": "I&#39;ve added the missing sub"}], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512469233, "post_id": 47650935, "comment_id": 82260418, "body": "Don&#39;t we no longer teach people to <i>not</i> parse CSV files manually? ;-)"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1512469396, "post_id": 47650935, "comment_id": 82260537, "body": "@PerlDuck: Who&#39;s &quot;we&quot;? :-) For more complex files, I&#39;d reach for <a href=\"http://p3rl.org/Text::CSV_XS\" rel=\"nofollow noreferrer\">Text::CSV_XS</a>, but if the sample inputs are accurate, there&#39;s no need for it."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512469713, "post_id": 47650935, "comment_id": 82260796, "body": "Okay. In this particular case I could agree. But usually when someone here asks how to process CSV files with <code>split</code> or something the crowd goes ballistic and tells them not to do so. In bold and italics. :-) But I must admit your code is a pretty cool one-liner."}, {"owner": {"reputation": 141, "user_id": 3297371, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8970d935086faf17d72e5df204e96edd?s=128&d=identicon&r=PG&f=1", "display_name": "Cris", "link": "https://stackoverflow.com/users/3297371/cris"}, "edited": false, "score": 0, "creation_date": 1512469990, "post_id": 47650935, "comment_id": 82260991, "body": "sample are just an extract to give an idea of the format. Files are  bigger and  more than 3, but always 2 column. I don&#39;t know the file size neither the exact number of file i will deal with, nor the exact location, in example I made those fixed for clarity, this is an extract of a larger program, the actual value of the paths i&#39;m looking into are passed as input. the solution from command line is probably elegant, but I need a code to include in my program, I can probably extract something from this example to re-use, if i&#39;ll get it working in my code I&#39;ll post the working result"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 141, "user_id": 3297371, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8970d935086faf17d72e5df204e96edd?s=128&d=identicon&r=PG&f=1", "display_name": "Cris", "link": "https://stackoverflow.com/users/3297371/cris"}, "edited": false, "score": 1, "creation_date": 1512471923, "post_id": 47650935, "comment_id": 82262219, "body": "@Cris it&#39;s usually a good idea to say what you <i>really</i> want to do from the beginning. Building an MCVE is good, but don&#39;t abstract away the real problem. chorobo&#39;s solution takes care of an arbitrary large number of files. You can use your shell to glob one or more directories and pass that in. <code>perl -i~ -pe &#39;...&#39; &#47;path&#47;to&#47;files&#47;*.csv &#47;some&#47;other&#47;dir&#47;*</code> will work."}, {"owner": {"reputation": 141, "user_id": 3297371, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8970d935086faf17d72e5df204e96edd?s=128&d=identicon&r=PG&f=1", "display_name": "Cris", "link": "https://stackoverflow.com/users/3297371/cris"}, "edited": false, "score": 0, "creation_date": 1512548226, "post_id": 47650935, "comment_id": 82298041, "body": "adding the list of file i not an issue but i need to execute this not from command line and inside a script doing other thing among change the CSV, so the solution provided indeed works and it&#39;s pretty cool, but i need a way to insert within my program, i tried to run it as system command but doesn&#39;t do anything"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1512469618, "last_edit_date": 1512469618, "creation_date": 1512468545, "answer_id": 47650935, "question_id": 47649463, "link": "https://stackoverflow.com/questions/47649463/how-to-insert-empty-column-in-a-csv-file-using-perl/47650935#47650935", "title": "How to insert empty column in a csv file using perl", "body": "<pre><code>perl -i~ -pe '\n    s/,/\",\" x (1 + $commas)/e;\n    $commas++ if eof;\n' -- file1 file2 file3\n</code></pre>\n\n<ul>\n<li><code>-p</code> reads the file line by line, after running the code, it prints it</li>\n<li><code>-i~</code> changes the input files \"in place\", saving a backup as <code>file1~</code> etc.</li>\n<li><code>s/,/\",\" x $commas/e</code> substitutes a comma with evaluated code in the replacement part, i.e. the comma repeated one time for the first file, two times for the second, and so on</li>\n<li><code>eof</code> returns true every time an input file ends, see <a href=\"http://p3rl.org/eof\" rel=\"nofollow noreferrer\">eof</a></li>\n<li><code>$commas++</code> adds 1 to $commas</li>\n</ul>\n"}], "owner": {"reputation": 141, "user_id": 3297371, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8970d935086faf17d72e5df204e96edd?s=128&d=identicon&r=PG&f=1", "display_name": "Cris", "link": "https://stackoverflow.com/users/3297371/cris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1512469618, "creation_date": 1512463840, "last_edit_date": 1512468352, "question_id": 47649463, "link": "https://stackoverflow.com/questions/47649463/how-to-insert-empty-column-in-a-csv-file-using-perl", "title": "How to insert empty column in a csv file using perl", "body": "<p>I have a list of CSV file i need to add number of empty column on each, the number of empty column i need to add change on each file in a linear way, first file i want to insert 0 column, second file i want to insert 1 column, third file i want to insert 2 column and so on, the column should be inserted always as second one.\nall the input file are a 2 column csv as the example below</p>\n\n<p>file 1</p>\n\n<pre><code>2016/03/07 23:42:40.618 GMT,54.5\n2016/03/07 23:43:40.618 GMT,54.0771\n2016/03/07 23:44:40.618 GMT,53.9472\n2016/03/07 23:45:40.618 GMT,54.2914\n</code></pre>\n\n<p>file 2</p>\n\n<pre><code>2016/03/07 23:42:40.618 GMT,49.013\n2016/03/07 23:43:40.618 GMT,48.688\n2016/03/07 23:44:40.618 GMT,47.7052 \n2016/03/07 23:45:40.618 GMT,47.9057\n</code></pre>\n\n<p>file3</p>\n\n<pre><code>2016/03/07 23:51:40.618 GMT,50.7858\n2016/03/07 23:52:40.618 GMT,52.5267\n2016/03/07 23:53:40.618 GMT,54.2865\n2016/03/07 23:54:40.618 GMT,53.2014\n2016/03/07 23:55:40.618 GMT,52.0538\n</code></pre>\n\n<p>etc.</p>\n\n<p>I want the output to be </p>\n\n<p>file1</p>\n\n<pre><code>2016/03/07 23:42:40.618 GMT,54.5\n2016/03/07 23:43:40.618 GMT,54.0771\n2016/03/07 23:44:40.618 GMT,53.9472\n2016/03/07 23:45:40.618 GMT,54.2914\n</code></pre>\n\n<p>File2</p>\n\n<pre><code>2016/03/07 23:42:40.618 GMT,,49.013\n2016/03/07 23:43:40.618 GMT,,48.6883\n2016/03/07 23:44:40.618 GMT,,47.7052\n2016/03/07 23:45:40.618 GMT,,47.9057\n</code></pre>\n\n<p>file3</p>\n\n<pre><code>2016/03/07 23:51:40.618 GMT,,,50.7858\n2016/03/07 23:52:40.618 GMT,,,52.5267\n2016/03/07 23:53:40.618 GMT,,,54.2865\n2016/03/07 23:54:40.618 GMT,,,53.2014\n2016/03/07 23:55:40.618 GMT,,,52.0538\n</code></pre>\n\n<p>This is the code wrote but it generate the same output for all file with added just one empty column, probably i'm missing something silly but i can't get what </p>\n\n<pre><code>#!/usr/bin/perl\n#use strict; \n#use diagnostics;\nuse CGI qw(:standard);\nuse Cwd;\nuse File::Find;\nuse File::Basename;\nuse Text::CSV;\nuse Text::Trim qw(trim);\nuse List::MoreUtils qw(uniq);\nuse Text::CSV_XS;\nsub read_dir{\n    my $ph=$_[0];\n    my $match=$_[1];\n    my @fl = ( );\n    #print \"&lt;b&gt; will open $ph\";\n    opendir DH, \"$ph\" or die \"Cannot open Dir $ph: $!\";\n    #if ($match eq \"\") {\n    @fl = grep !/^\\.\\.?$\\.*/, sort(readdir DH) ;\n    #}\n    #else {\n    #   my @fl = grep {$_ =~ $match} sort(readdir DH) ;\n    #}\n    closedir DH;\n    if ($match ne \"\") {\n        foreach my $file (@fl){\n            if ($file =~$match) {\n                push(@ffl,$file);\n            }\n        }\n        return @ffl;\n    }\n    else {\n        return @fl;\n    }\n}\n@column=();\n$loc=\"/myfolder\";\n$offset=1;\n@sites=(\"dir1\",\"dir2\",\"dir3\");\n$s=\"subdir\";\nforeach $t (@sites) {\n    $m=0; #number of empty column to insert in the file\n    @list=read_dir(\"$loc/Statistics/$t/$s\"); #directory that contain the csv file to manipulate\n    foreach $l (@list) {\n        #inser the empty column \n        open $in, \"&lt;\",\"$loc/Statistics/$t/$s/$l\" or die $!;\n        open $out, \"&gt;&gt;\", \"$loc/Statistics/$t/$s/$l.tmp\" or die $!;\n        foreach $r (0..$m) {\n            print \"&lt;br&gt; r is $r\";\n            open $out, \"&gt;&gt;\", \"$loc/Statistics/$t/$s/$l.tmp\" or die $!;\n            while ($row = $ccsv-&gt;getline($in)) {\n                splice @$row, $offset, 0, shift @column;\n                $ccsv-&gt;print($out, $row);\n            }\n            close $out;\n        }\n        close $in;\n        $m=$m+1;\n    }\n}\n</code></pre>\n"}, {"tags": ["regex", "string", "perl"], "answers": [{"tags": [], "owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "is_accepted": false, "score": 0, "last_activity_date": 1512459174, "creation_date": 1512459174, "answer_id": 47648319, "question_id": 47648264, "link": "https://stackoverflow.com/questions/47648264/perl-print-matched-regex-string/47648319#47648319", "title": "Perl print matched regex string", "body": "<p>Simply give it list context:</p>\n\n<pre><code>my ($test) = $string =~ m/^.+$(?=\\s+shutdown)/mg;\n</code></pre>\n\n<p>The concept of evaluation context (list vs scalar) is fundamental to Perl programming, so it may be time to review some tutorials and/or a reference manual.</p>\n"}], "owner": {"reputation": 11, "user_id": 9024338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a12017ea903369d8528f1b8631d69784?s=128&d=identicon&r=PG&f=1", "display_name": "HalloBallo_123", "link": "https://stackoverflow.com/users/9024338/halloballo-123"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1512459423, "answer_count": 1, "score": -2, "last_activity_date": 1512459174, "creation_date": 1512458958, "question_id": 47648264, "link": "https://stackoverflow.com/questions/47648264/perl-print-matched-regex-string", "closed_reason": "Duplicate", "title": "Perl print matched regex string", "body": "<p>The following perl code only gives back true or false (1 &amp; 0)</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $string;\n\n$string =\"interface Ethernet1/20\n  shutdown\";\n\nmy $test = $string =~ m/^.+$(?=\\s+shutdown)/mg;\nprint \"'$test'\\n\"; \n</code></pre>\n\n<p>I get back a 1.\nBut how can I get back the matched string 'interface Ethernet1/20' ?\nThanks for every help!</p>\n"}, {"tags": ["mysql", "perl", "dbi"], "answers": [{"comments": [{"owner": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "edited": false, "score": 0, "creation_date": 1512461499, "post_id": 47648719, "comment_id": 82255955, "body": "but in my script , I have add   $dbh-&gt;do(&quot;COMMIT&quot;) or die &quot;$dbh-&gt;errstr&quot;; before disconnect"}, {"owner": {"reputation": 2494, "user_id": 1921546, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fe4ac75c43b846d9665f422cdac5cb03?s=128&d=identicon&r=PG", "display_name": "pii_ke", "link": "https://stackoverflow.com/users/1921546/pii-ke"}, "reply_to_user": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "edited": false, "score": 0, "creation_date": 1512461734, "post_id": 47648719, "comment_id": 82256067, "body": "can you try using <code>begin_work</code>, <code>commit</code> and <code>rollback</code> methods for transaction management, instead of doing them with raw SQL?"}], "tags": [], "owner": {"reputation": 2494, "user_id": 1921546, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fe4ac75c43b846d9665f422cdac5cb03?s=128&d=identicon&r=PG", "display_name": "pii_ke", "link": "https://stackoverflow.com/users/1921546/pii-ke"}, "is_accepted": false, "score": 1, "last_activity_date": 1512460905, "creation_date": 1512460905, "answer_id": 47648719, "question_id": 47648225, "link": "https://stackoverflow.com/questions/47648225/perl-debugger-dbdmysqldb-do-failed-mysql-server-has-gone-away-at/47648719#47648719", "title": "Perl Debugger: DBD::mysql::db do failed: MySQL server has gone away at", "body": "<blockquote>\n  <p>The transaction behaviour of the <code>disconnect</code> method is, sadly,\n  undefined. Some database systems (such as Oracle and Ingres) will\n  automatically commit any outstanding changes, but others (such as\n  Informix) will rollback any outstanding changes. Applications not\n  using <code>AutoCommit</code> should explicitly call <code>commit</code> or <code>rollback</code> before\n  calling disconnect.</p>\n</blockquote>\n\n<p>See <a href=\"https://metacpan.org/pod/DBI#disconnect\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/DBI#disconnect</a></p>\n"}], "owner": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1512461727, "creation_date": 1512458802, "last_edit_date": 1512461727, "question_id": 47648225, "link": "https://stackoverflow.com/questions/47648225/perl-debugger-dbdmysqldb-do-failed-mysql-server-has-gone-away-at", "title": "Perl Debugger: DBD::mysql::db do failed: MySQL server has gone away at", "body": "<p>I use MySQL with the DBI Module for my perl programming database connections.\nI got the error message as below when using mysql : </p>\n\n<pre><code>Issuing rollback() due to DESTROY without explicit disconnect() of       \nDBD::mysql::db handle db=db;ip=X.X.X.X; at /code/save2db.plx line 104.\nDBD::mysql::db DESTROY failed: MySQL server has gone away at   \n/code/save2db.plx line 104.\n    (in cleanup) DBD::mysql::db DESTROY failed: MySQL server has gone away  \nat /code/save2db.plx line 104.\n</code></pre>\n\n<p>the line 104 in my code is </p>\n\n<pre><code>103    $dbh-&gt;disconnect;\n104    exit;\n</code></pre>\n\n<p>Any idea why this happens?\nI'd appreciate any feedback.</p>\n"}, {"tags": ["perl", "http", "post", "multipartform-data", "lwp"], "comments": [{"owner": {"reputation": 340, "user_id": 8244977, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007678740593/picture?type=large", "display_name": "BingLi224", "link": "https://stackoverflow.com/users/8244977/bingli224"}, "edited": false, "score": 0, "creation_date": 1512455334, "post_id": 47646959, "comment_id": 82253005, "body": "i just notice that Chrome and IE create different boundary format a bit."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1512465478, "post_id": 47646959, "comment_id": 82258073, "body": "This is a very nice post, IMO.  But: why would you want to set a specific boundary?  First, the  purpose of it is to separate message parts so the only thing about it is that it doesn&#39;t exist anywhere in the message.  It needn&#39;t be &quot;the same&quot; as any other (and you can&#39;t ensure that since none are guaranteed to stay the same).   Besides, setting it to anything fixed is bad -- what if that string shows up in a message?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512466748, "post_id": 47646959, "comment_id": 82258812, "body": "I would start by reading the source of LWP. It will probably take you to HTTP::Message. There you will see how the boundary is set. You can probably either overwrite it, attach something to it or reach into the object to change it. But I agree that it&#39;s questionable why you would want to do that."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512467385, "post_id": 47646959, "comment_id": 82259231, "body": "@simbabque It&#39;s used from the <code>HTTP::Request::Common</code>, and the code strongly implies that it isn&#39;t even possible to set it (without badly violating the module)."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1512467500, "post_id": 47646959, "comment_id": 82259311, "body": "@zdim I don&#39;t have access to a computer right now, so I made an educated guess. It would be possible to subclass somehow. It patch it in I guess. Class::Method::Modifiers as a monkey patch alternative could work. But I should look at the code first, and I&#39;m not going to search for it on my phone. ;-)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512467721, "post_id": 47646959, "comment_id": 82259468, "body": "@simbabque  I lightly mention what goes on in the code in the answer ... have a look at the source when you get to it, it is interesting to see whether one <i>can</i> somehow mess with that (in at least a somewhat reasonable way)."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1512467963, "post_id": 47646959, "comment_id": 82259597, "body": "@zdim I&#39;m looking now. I think it should be pretty easy to overwrite. I&#39;ll hack something up. By the way, the <a href=\"https://metacpan.org/source/OALDERS/HTTP-Message-6.13/lib/HTTP/Request/Common.pm#L292\" rel=\"nofollow noreferrer\">metacpan source view</a> is much nicer to use."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1512469683, "post_id": 47646959, "comment_id": 82260770, "body": "@zdim found it. It&#39;s actually built-in, though not very well documented. Took me a bit of searching and a few minutes with the debugger."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512470737, "post_id": 47646959, "comment_id": 82261462, "body": "A nice debugging aid for this kind of situation besides your totally appropriate IO::Socket solution is <a href=\"https://metacpan.org/pod/LWP::ConsoleLogger::Everywhere\" rel=\"nofollow noreferrer\">LWP::ConsoleLogger::Everywhere</a>. You can just drop that into your code anywhere you want, and it will dump out a pretty version of everything that goes over the wire and back. Together with a very short timeout and an address that doesn&#39;t respond it would work here, too.  I&#39;ve given <a href=\"https://youtu.be/ERcN7jGeEzA?t=15m23s\" rel=\"nofollow noreferrer\">a lightning talk about it at TPCiA</a> this year, which explains nicely how it works."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512489553, "post_id": 47646959, "comment_id": 82273945, "body": "Do you realise that there&#39;s nothing wrong with that last message? It&#39;s far from clear why you would want to alter the separator, as it carries no information and needs only to be a sequence that doesn&#39;t appear elsewhere in the content. LWP has chosen <code>--Tegj</code> which is fine."}, {"owner": {"reputation": 340, "user_id": 8244977, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007678740593/picture?type=large", "display_name": "BingLi224", "link": "https://stackoverflow.com/users/8244977/bingli224"}, "edited": false, "score": 0, "creation_date": 1512495397, "post_id": 47646959, "comment_id": 82277670, "body": "i can &quot;imagine&quot; how boundary is, although don&#39;t know the exact algorithm yet that create boundary by browsers.  i saw some topics explaining how that content type works and we can set the boundary manually, and i&#39;m doubtful how to make it with Perl. that&#39;s the cause of question."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512535216, "post_id": 47646959, "comment_id": 82292822, "body": "@simbabque  Nice one. (I had briefly tried to slip it in but not in a right way.)  To nitpick on phrasing, I wouldn&#39;t call it a &quot;<i>built-in</i>&quot; but would rather say that you found a (clean) way to slip it in and that this is likely not an intended &quot;<i>feature</i>.&quot;  Importantly, it <i>is</i> safe since it does undergo the rest of checks etc."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1512552943, "post_id": 47646959, "comment_id": 82300751, "body": "@zdim I think it&#39;s a feature. There is code there that explicitly reads it. There is probably something in the RFC that defines this behavior. But let&#39;s not fret over that. There is a fairly easy way to do it. We found it. Problem solved. :-)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512584027, "post_id": 47646959, "comment_id": 82320892, "body": "@simbabque Sure :) ... but I also didn&#39;t look at the code carefully enough to see that it specifically looks for the word <code>boundary</code> in what is passed.  May really be a feature after all."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1512584071, "last_edit_date": 1512584071, "creation_date": 1512467321, "answer_id": 47650487, "question_id": 47646959, "link": "https://stackoverflow.com/questions/47646959/perl-lwp-post-form-data-with-my-boundary/47650487#47650487", "title": "Perl LWP Post form-data with my boundary", "body": "<p>The sole purpose of the boundary is to separate the message parts and the only requirement on it is that it doesn't appear anywhere in the message.   I don't see a good reason to attempt to set it to be \"the same\" as anything else.  Besides, no tool guarantees that it will always use the same one.</p>\n\n<p>More importantly, setting it to a fixed string (without regard for the message) is dangerous: how does anyone know that such a string may not be in a message?</p>\n\n<p>Finally, I don't think it is possible to do so, precisely because the boundary must be <em>checked</em> to ensure that it indeed isn't in the message; so no tool should provide a way to set it to a predefined string.</p>\n\n<p>Have a look at <a href=\"http://cpansearch.perl.org/src/OALDERS/HTTP-Message-6.13/lib/HTTP/Request/Common.pm\" rel=\"nofollow noreferrer\">HTTP::Request::Common's source</a>. See how the sub <code>boundary()</code> badly mangles the string to return, and how much work goes into the boundary elsewhere. Then <code>CHECK_BOUNDARY:</code> block changes it further if it isn't good enough. This is clearly not meant to be set outside.</p>\n\n<p>The <code>post</code> method of <code>LWP::UserAgent</code> exists as a shortcut for this module's one. </p>\n\n<hr>\n\n<p>Note that <a href=\"https://stackoverflow.com/a/47651572/4653379\">simbabque found a way</a> to set the boundary, which then also undergoes the checks.</p>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1512470415, "creation_date": 1512470415, "answer_id": 47651572, "question_id": 47646959, "link": "https://stackoverflow.com/questions/47646959/perl-lwp-post-form-data-with-my-boundary/47651572#47651572", "title": "Perl LWP Post form-data with my boundary", "body": "<p>LWP allows you set the boundary manually when you do <code>multipart/form-data</code> requests. This feature is unfortunately not documented at all.</p>\n\n<p>However, you <strong>have to do</strong> <code>multipart</code> explicitly. You can set your own boundary by appending the <em>boundary</em> as an additional field of the <code>Content-Type</code>. It will be <a href=\"https://metacpan.org/source/OALDERS/HTTP-Message-6.13/lib/HTTP/Request/Common.pm#L50\" rel=\"nofollow noreferrer\">converted to a header appropriately by HTTP::Request::Common</a>.</p>\n\n<pre><code>my $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;post(\n    'http://127.0.0.1:12555',\n    'Content-Type' =&gt; \n        'multipart/form-data;boundary=Nobody-has-the-intention-to-erect-a-wall',\n         # ^^^^^^^           ^^^^^^^^\n\n    Content =&gt; {\n        data1 =&gt; rand,\n        data2 =&gt; rand,\n    },\n);\n</code></pre>\n\n<p>With your listener, this result in the following output.</p>\n\n<pre><code>POST / HTTP/1.1\nTE: deflate,gzip;q=0.3\nConnection: TE, close\nHost: 127.0.0.1:12555\nUser-Agent: libwww-perl/6.15\nContent-Length: 269\nContent-Type: multipart/form-data; boundary=Nobody-has-the-intention-to-erect-a-wall\n\n--Nobody-has-the-intention-to-erect-a-wall\nContent-Disposition: form-data; name=\"data2\"\n\n0.0575856828104122\n--Nobody-has-the-intention-to-erect-a-wall\nContent-Disposition: form-data; name=\"data1\"\n\n0.677908250902878\n--Nobody-has-the-intention-to-erect-a-wall--\n</code></pre>\n\n<p>Note that HTTP::Request::Common will replace your boundary with a random string if it finds the boundary string in the body of any of the parts. It will not just add a number to your boundary.</p>\n"}], "owner": {"reputation": 340, "user_id": 8244977, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007678740593/picture?type=large", "display_name": "BingLi224", "link": "https://stackoverflow.com/users/8244977/bingli224"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1183, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1512584071, "creation_date": 1512453392, "question_id": 47646959, "link": "https://stackoverflow.com/questions/47646959/perl-lwp-post-form-data-with-my-boundary", "title": "Perl LWP Post form-data with my boundary", "body": "<p>I want to post data with content type <code>multipart/form-data</code>:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse LWP::UserAgent;\n\nmy $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;post (\n    'http://127.0.0.1:12555',\n    'Content-Type' =&gt; 'form-data',\n    Content =&gt; {\n        'data1' =&gt; rand,\n        'data2' =&gt; rand,\n    }\n);\n</code></pre>\n\n<p>And i tested the submitted data:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse IO::Socket::INET;\nuse Socket qw ( inet_aton );\n\nmy $sock_listen = new IO::Socket::INET (\n    LocalHost =&gt; '127.0.0.1',\n    LocalPort =&gt; '12555',\n    Proto =&gt; 'tcp',\n    Listen =&gt; 3,\n    Reuse =&gt; 1,\n);\n$sock_listen-&gt;autoflush ();\n\nmy $sock;\nwhile ( $sock = $sock_listen-&gt;accept ( ) )\n{\n    my $data = '';\n    $sock-&gt;recv ( $data, 4096 );\n    print $data . \"\\n\";\n}\n</code></pre>\n\n<p>Test #1 result:</p>\n\n<pre><code>POST / HTTP/1.1\nTE: deflate,gzip;q=0.3\nConnection: TE, close\nHost: 127.0.0.1:12555\nUser-Agent: libwww-perl/6.05\nContent-Length: 162\nContent-Type: multipart/form-data; boundary=xYzZY\n\n--xYzZY\nContent-Disposition: form-data; name=\"data2\"\n\n0.876556396484375\n--xYzZY\nContent-Disposition: form-data; name=\"data1\"\n\n0.62921142578125\n--xYzZY--\n</code></pre>\n\n<p>Test #2 result:</p>\n\n<pre><code>POST / HTTP/1.1\nTE: deflate,gzip;q=0.3\nConnection: TE, close\nHost: 127.0.0.1:12555\nUser-Agent: libwww-perl/6.05\nContent-Length: 163\nContent-Type: multipart/form-data; boundary=xYzZY\n\n--xYzZY\nContent-Disposition: form-data; name=\"data2\"\n\n0.896942138671875\n--xYzZY\nContent-Disposition: form-data; name=\"data1\"\n\n0.041656494140625\n--xYzZY--\n</code></pre>\n\n<p>I added a data:</p>\n\n<pre><code>        'data3' =&gt; '--xYzZY'\n</code></pre>\n\n<p>and got:</p>\n\n<pre><code>POST / HTTP/1.1\nTE: deflate,gzip;q=0.3\nConnection: TE, close\nHost: 127.0.0.1:12555\nUser-Agent: libwww-perl/6.05\nContent-Length: 221\nContent-Type: multipart/form-data; boundary=Tegj\n\n--Tegj\nContent-Disposition: form-data; name=\"data2\"\n\n0.34613037109375\n--Tegj\nContent-Disposition: form-data; name=\"data3\"\n\n--xYzZY\n--Tegj\nContent-Disposition: form-data; name=\"data1\"\n\n0.678955078125\n--Tegj--\n</code></pre>\n\n<p>The question is how i can set the <code>boundary</code> manually to 32 chars string like browser's <code>----WebKitFormBoundary[...]</code> using <code>LWP</code>?</p>\n\n<p>Or can just use <code>IO::Socket</code>?</p>\n"}, {"tags": ["excel", "perl", "formatting", "format"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512472378, "post_id": 47644370, "comment_id": 82262497, "body": "Why can you only write it per row? Is that part of the program out of your hands?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512473550, "post_id": 47644370, "comment_id": 82263249, "body": "It would be useful to have actual example data. Please <a href=\"https://stackoverflow.com/posts/47644370/edit\">edit</a> your question and include a couple of rows of real data."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 6657283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b0071c675c886f58424247235cfcd99?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/6657283/ashish"}, "edited": false, "score": 1, "creation_date": 1512490772, "post_id": 47652871, "comment_id": 82274747, "body": "Thanks simbabque! I find your answer really useful for me. Just to add, meanwhile I also found an alternative:      <code>$worksheet-&gt;conditional_formatting( &#39;C:F&#39;,     {     type     =&gt; &#39;cell&#39;,     criteria =&gt; &#39;greater than&#39;,     value    =&gt; 999,     format   =&gt; $number_format,     }     );</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 63, "user_id": 6657283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b0071c675c886f58424247235cfcd99?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/6657283/ashish"}, "edited": false, "score": 0, "creation_date": 1512493398, "post_id": 47652871, "comment_id": 82276426, "body": "@Ashu you didn&#39;t say anything about the real values. There&#39;s no way we could have come up with that as a solution. Always give complete information. Don&#39;t leave stuff out please."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1512489619, "last_edit_date": 1592644375, "creation_date": 1512474353, "answer_id": 47652871, "question_id": 47644370, "link": "https://stackoverflow.com/questions/47644370/applying-multiple-formats-to-same-data-in-excel-using-perl/47652871#47652871", "title": "Applying multiple formats to same data in excel using perl", "body": "<p>You cannot pass multiple formats to the <code>write_row</code> method. However, you can set a default format for each column before you write the row with <a href=\"https://metacpan.org/pod/Excel::Writer::XLSX#set_column(-$first_col,-$last_col,-$width,-$format,-$hidden,-$level,-$collapsed-)\" rel=\"nofollow noreferrer\"><code>set_column</code></a>.</p>\n<p>Here's a short example.</p>\n<pre><code>use strict;\nuse warnings;\nuse Excel::Writer::XLSX;\n \nmy $workbook = Excel::Writer::XLSX-&gt;new( 'perl.xlsx' );\nmy $worksheet = $workbook-&gt;add_worksheet();\n\nmy $general_format = $workbook-&gt;add_format(\n    border =&gt; 1,\n    bg_color =&gt; 31,\n    align =&gt; 'center',\n);\n\nmy $num_format = $workbook-&gt;add_format();\n$num_format-&gt;copy($general_format); # we have to copy the other format options\n$num_format-&gt;set_num_format('#.##0');\n\n# set column formats up front\n$worksheet-&gt;set_column( 'A:B', undef, $num_format);\n$worksheet-&gt;set_column( 'C:D', undef, $general_format);\n\nmy @records = (\n    [qw/ 1.1 11.111 1% 2017-12-05/],\n    [qw/ 2.2 22.222 2.2% 2017-12-05/],\n    [qw/ 3.3 33.333 3.33% 2017-12-05/],\n    [qw/ 4.4 44.444 4.444% 2017-12-05/],\n);\nmy $i = 1;\nforeach my $record ( @records) {\n    $worksheet-&gt;write_row( $i, 0, $record ); # no more format here\n    ++$i;\n}\n</code></pre>\n<p>This is what it will look like (with the Excel Viewer).</p>\n<p><a href=\"https://i.stack.imgur.com/LFbCc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LFbCc.png\" alt=\"Example Excel file output\" /></a></p>\n<p>It's important to note that <code>set_column</code> only writes a format if there is no other format present in a cell.</p>\n<blockquote>\n<p>The <code>$format</code> parameter will be applied to any cells in the column that don't have a format.</p>\n</blockquote>\n<p>You also need to take care of the order in which formats are applied.</p>\n<blockquote>\n<p>If you wish to define a column format in this way you should call the method before any calls to write(). If you call it afterwards it won't have any effect.</p>\n<p>A default row format takes precedence over a default column format</p>\n</blockquote>\n"}], "owner": {"reputation": 63, "user_id": 6657283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b0071c675c886f58424247235cfcd99?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/6657283/ashish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 626, "favorite_count": 0, "accepted_answer_id": 47652871, "answer_count": 1, "score": 1, "last_activity_date": 1512489619, "creation_date": 1512434923, "last_edit_date": 1512472515, "question_id": 47644370, "link": "https://stackoverflow.com/questions/47644370/applying-multiple-formats-to-same-data-in-excel-using-perl", "title": "Applying multiple formats to same data in excel using perl", "body": "<p>I have a situation where I am writing data to an Excel file using <a href=\"https://metacpan.org/pod/Excel::Writer::XLSX\" rel=\"nofollow noreferrer\">Excel::Writer::XLSX</a> with Perl. I have records stored as comma delimited strings in an array. For example:</p>\n\n<pre><code>$array[0] = \"col1_value,col2_value,col3_value,col4_value\" # row 1\n$array[1] = \"col1_value,col2_value,col3_value,col4_value\" # row 2\n.\n.\n$array[$n]                                                # row n\n</code></pre>\n\n<p>Now I have to display these data in Excel with center alignment,border and bg_color. So I have done the below:</p>\n\n<pre><code>my $general_format = $workbook-&gt;add_format(\nborder =&gt; 1,\nbg_color =&gt; 31,\nalign =&gt; 'center'\n);\n</code></pre>\n\n<p>And then I have put a loop on the array and after splitting it, I am putting all columns of each record in excel as below:</p>\n\n<pre><code>Loop on array of records{\n$worksheet-&gt;write_row( $i+2, 0, $recordRef, $general_format );\n}\n</code></pre>\n\n<p>But I am facing issue that col1 &amp; col2 of each record has numbers whereas col3 &amp; col4 are percentage/date, etc. I need the numbers to be formatted in comma-separated format. If I do the below, the output is fine but when we click the col3/col4 cell in Excel, it converts the percentage/date to number format:</p>\n\n<pre><code>my $general_format = $workbook-&gt;add_format(\nborder =&gt; 1,\nbg_color =&gt; 31,\nalign =&gt; 'center',\nnum_format =&gt; '#,##0'\n);\n</code></pre>\n\n<p>Is there any way to apply the <code>num_format =&gt; '#,##0'</code> format specifically on col1 &amp; col2 along with the rest of the formatting done on col1 &amp; col2(the color/alignment/etc) as the data being written is row(record)-wise?</p>\n\n<p>I need col1 and col2 to have below formats:</p>\n\n<pre><code>border =&gt; 1,\nbg_color =&gt; 31,\nalign =&gt; 'center',\nnum_format =&gt; '#,##0'\n</code></pre>\n\n<p>and col3 and col4 to have below formats:</p>\n\n<pre><code>border =&gt; 1,\nbg_color =&gt; 31,\nalign =&gt; 'center'\n</code></pre>\n\n<p>But I can write data record wise only(using <a href=\"https://metacpan.org/pod/Excel::Writer::XLSX#write_row(-$row,-$column,-$array_ref,-$format-)\" rel=\"nofollow noreferrer\"><code>write_row()</code></a>), not column by column.</p>\n"}, {"tags": ["html", "perl", "html-parsing"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1512430158, "post_id": 47643493, "comment_id": 82246035, "body": "Yes, there is a way. In fact, there are several. But asking for software-recommendations is unfortunately off-topic on Stack Overflow. You will have to get started on this yourself, and if you run into trouble we&#39;re happy to provide assistance. If I were you, I&#39;d start searching for something like how to replace text nodes in HTML, or parsing XML. Looking for HTML and XML on <a href=\"https://metacpan.org\" rel=\"nofollow noreferrer\">CPAN</a> should already give you a good starting point."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1512434016, "post_id": 47643493, "comment_id": 82247129, "body": "What @simbabque says is good advice; search for it, both in CPAN and (the many) existing SO posts.  To give you at least something specific, I use <a href=\"http://search.cpan.org/~kentnl/HTML-Tree-5.07/lib/HTML/TreeBuilder.pm\" rel=\"nofollow noreferrer\">HTML::TreeBuilder</a> to parse and process HTML -- but there is a lot more."}], "answers": [{"tags": [], "owner": {"reputation": 115, "user_id": 1000219, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1ced14fd8421b327035c051273dc1f76?s=128&d=identicon&r=PG", "display_name": "user1000219", "link": "https://stackoverflow.com/users/1000219/user1000219"}, "is_accepted": false, "score": 0, "last_activity_date": 1512507723, "creation_date": 1512507723, "answer_id": 47662600, "question_id": 47643493, "link": "https://stackoverflow.com/questions/47643493/adding-my-own-tags-inside-html-blocks-in-perl/47662600#47662600", "title": "Adding my own tags inside HTML blocks in Perl", "body": "<p>Sorry for the bad question. I did figure it out after going through the HTML::Element page. </p>\n\n<pre><code>use strict;\nuse warnings;\nuse HTML::TreeBuilder;\nuse feature ':5.10';\n\nmy $root = HTML::TreeBuilder-&gt;new_from_file(\\*DATA);\n$root-&gt;elementify;\n\nfor my $e ($root-&gt;look_down (\n    sub {\n      my $tag = $_[0]-&gt;tag();\n      grep( /^$tag$/, qw(td div p title span) ) \n      }\n  ))\n{\n    #Do an in-place replacement\n    foreach my $item_r ($e-&gt;content_refs_list) {\n        next if ref $$item_r;\n        $$item_r =~ s/^(.+)$/\\@$1\\@/g;\n    }\n}\n\nsay $root-&gt;as_HTML (undef, \"  \", {});\n\n__DATA__\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Appleseed Farm&lt;/title&gt;\n&lt;/html&gt;\n&lt;body&gt;\n&lt;table&gt;\n    &lt;tr&gt;\n        &lt;td&gt;Col1&lt;/td&gt;\n        &lt;td&gt;Col2&lt;/td&gt;\n        &lt;td&gt;&lt;img src=\"blah/blah.jpg\"&gt;Col 3&lt;/td&gt; \n        &lt;td&gt;cat&lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n&lt;div&gt;Some random text&lt;/div&gt;\n&lt;p&gt;Random image of the day: &lt;img src=\"random.jpg\"&gt;&lt;/p&gt;\n&lt;/body&gt;\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 1000219, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1ced14fd8421b327035c051273dc1f76?s=128&d=identicon&r=PG", "display_name": "user1000219", "link": "https://stackoverflow.com/users/1000219/user1000219"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1512507723, "creation_date": 1512428984, "question_id": 47643493, "link": "https://stackoverflow.com/questions/47643493/adding-my-own-tags-inside-html-blocks-in-perl", "title": "Adding my own tags inside HTML blocks in Perl", "body": "<p>Is there a way to receive a html page, look for  blocks and enclose text with my own characters?</p>\n\n<p>For example given the following html:</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Appleseed Farm&lt;/title&gt;\n&lt;/html&gt;\n&lt;body&gt;\n&lt;table&gt;\n    &lt;tr&gt;\n        &lt;td&gt;Col1&lt;/td&gt;\n        &lt;td&gt;Col2&lt;/td&gt;\n        &lt;td&gt;&lt;img src=\"blah/blah.jpg\"&gt;&lt;/td&gt; \n        &lt;td&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n&lt;div&gt;Some random text&lt;/div&gt;\n&lt;p&gt;Random image of the day: &lt;img src=\"random.jpg\"&gt;&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Becomes the following with my '@' tag around text:</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n     &lt;title&gt;@Appleseed Farm@&lt;/title&gt;\n&lt;/html&gt;\n&lt;body&gt;\n&lt;table&gt;\n    &lt;tr&gt;\n        &lt;td&gt;@Col1@&lt;/td&gt;\n        &lt;td&gt;@Col2@&lt;/td&gt;\n        &lt;td&gt;&lt;img src=\"blah/blah.jpg\"&gt;&lt;/td&gt; \n        &lt;td&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n&lt;div&gt;@Some random text@&lt;/div&gt;\n&lt;p&gt;@Random image of the day:@ &lt;img src=\"random.jpg\"&gt;&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1512419953, "post_id": 47641466, "comment_id": 82241577, "body": "You seem to be learning with several different tutorials, one of them being Gabor&#39;s PerlMaven. That&#39;s great. But right now your style gives away your strategy, and your code has a lot of issues. If you want, feel free to post it in the Perl tag on <a href=\"https://codereview.stackexchange.com\">Code Review</a> and someone will take a look and give you some code-style advice, and maybe something about your strategy too. You should also start reading the error messages. Being exact is a big part of programming, and usually when there&#39;s an error, the message is useful. :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1512425123, "post_id": 47641466, "comment_id": 82244060, "body": "I endorse what <b>simbabque</b> has said. I think you would learn a lot by posting your <i>working</i> code on <a href=\"https://codereview.stackexchange.com/\">Code Review</a> and allowing us to critique it. I often combine my own answers with a review of the OP&#39;s code, but that is strictly off-topic, and it is much better if you ask for the review yourself."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1512427991, "post_id": 47641466, "comment_id": 82245285, "body": "@Borodin there you go: <a href=\"https://codereview.stackexchange.com/q/182010/23233\">codereview.stackexchange.com/q/182010/23233</a>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512424112, "post_id": 47641582, "comment_id": 82243577, "body": "I much prefer <a href=\"https://metacpan.org/pod/Data::Dump\" rel=\"nofollow noreferrer\"><code>Data::Dump</code></a>. The output is far more readable, and it exports <code>dd</code>, so <code>print Dumper \\@commands</code> becomes <code>dd \\@commands</code>. The  only downside is that it&#39;s non-core."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512424516, "post_id": 47641582, "comment_id": 82243765, "body": "I hope my edit&#39;s okay? I fixed a typo and then went on to <code>s&#47;needed&#47;required&#47;</code>, just because <i>required</i> is absolute whereas <i>need</i> may be simply a life/death thing."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512425009, "post_id": 47641582, "comment_id": 82244009, "body": "@Borodin yeah, that&#39;s fine, thanks. I know you do, and you know I prefer Data::Printer. ;) But I figured the out-of-the-box solution is fine here."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1512425503, "post_id": 47641582, "comment_id": 82244240, "body": "Actually I wasn&#39;t really aware that you preferred <code>Data::Printer</code>. To be honest I loathe it because it&#39;s yet another data language and there&#39;s nothing that compiles it, and if I want syntax highlighting then I&#39;ll put it in a highlighting window. But then <b>Sinan &#220;n&#252;r</b> prefers non-JSON YAML, which I can&#39;t read either, so each to his own I guess! (I guess I also prefer <code>Data::Dump</code> because it&#39;s written by <b>Gisle Aas</b> who can do no wrong in my eyes!)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512425892, "post_id": 47641582, "comment_id": 82244445, "body": "@Borodin I haven&#39;t met <b>Garu</b> yet, but I once confused <b>GUGOD</b> in person for him. The idea of Data::Printer is that it&#39;s not a portable format, but purely for human consumption. I like that. It does useful things, like sorting, introspecting objects, where it knows the methods and inheritance, and you can use it for pass-through debugging. I&#39;m seeing more of YAML recently, also because our new regular <b>Tinita</b> is a friend and she&#39;s actively working on the YAML spec, so she cannot shut up about it. :) But in general, I try to pick the debugging tools in answers by skill of OP."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1512424394, "last_edit_date": 1512424394, "creation_date": 1512419871, "answer_id": 47641582, "question_id": 47641466, "link": "https://stackoverflow.com/questions/47641466/passing-array-of-arrays-to-subroutine-in-perl/47641582#47641582", "title": "Passing Array of arrays to subroutine in Perl", "body": "<p>If you are in doubt about a data structure, <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow noreferrer\">Data::Dumper</a> is your friend.</p>\n\n<pre><code>use Data::Dumper;\n\n# with your @commands\nprint Dumper \\@commands;\n</code></pre>\n\n<p>This prints</p>\n\n<pre><code>$VAR1 = [\n      [\n        'tmp1',\n        'echo \"ave Maria\" &gt; aveMaria.txt'\n      ],\n      [\n        'tmp2',\n        'echo \"IN HOC SIGNO VINCES\" &gt; xp.txt'\n      ]\n    ];\n</code></pre>\n\n<p>Now we know that there is an array reference with array references inside. The first level of reference is the backslash in your <code>\\@commands</code>. It creates a reference to the array. The second reference is each array ref inside that. </p>\n\n<p>In Perl, you cannot have an array inside an array, only references to arrays. The way you are assigning them is correct short-hand, but probably confused you.</p>\n\n<pre><code>$commands[0][0]   = 'tmp1';\n$commands[0]-&gt;[0] = 'tmp1'; # equivalent\n</code></pre>\n\n<p>The <code>-&gt;</code> is the dereference operator. It's not required for a multi-dimensional data structure, because they are always references beyond the first</p>\n\n<p>Now in your sub you've got:</p>\n\n<pre><code>my $command_array_reference = \\@commands; \n</code></pre>\n\n<p>To get to the values, use the arrows. You can omit most of them, but the first one is required.</p>\n\n<pre><code>my $dir = $command_array_reference-&gt;[0]-&gt;[0];\nmy $cmd = $command_array_reference-&gt;[0]-&gt;[1];\n</code></pre>\n\n<p>If you want to get the whole thing as a list, dereference the first level like this, which tells Perl that what's inside of <code>$foo-&gt;[0]</code> is an array ref:</p>\n\n<pre><code>my ($dir, $cmd) = @{ $command_array_reference-&gt;[0] };\n</code></pre>\n\n<hr>\n\n<p>I suggest you take a look at <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a>, <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a> and maybe <a href=\"http://perldoc.perl.org/perllol.html\" rel=\"nofollow noreferrer\">perllol</a>.</p>\n"}], "owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 47641582, "answer_count": 1, "score": 1, "last_activity_date": 1512424394, "creation_date": 1512419358, "question_id": 47641466, "link": "https://stackoverflow.com/questions/47641466/passing-array-of-arrays-to-subroutine-in-perl", "title": "Passing Array of arrays to subroutine in Perl", "body": "<p>I'm trying to create a subroutine which will pass an array of arrays to a subroutine so commands can be run in different directories in parallel.</p>\n\n<p>Basically, each first index is for each command-directory pair.  The second index has two variables: directory and the command itself.</p>\n\n<p>For example,</p>\n\n<pre><code>my @commands;\n$commands[0][0] = 'tmp1';#directory\n$commands[0][1] = 'echo \"ave Maria\" &gt; avemaria.txt';#command\n</code></pre>\n\n<p>however, I cannot figure out how to reference the data in a subroutine, I have tried every possible combination of \"[]{}\" I can think of in many different locations.  I've read the perl documentation in <a href=\"https://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/perldsc.html</a> but can't see how it applies here.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict; use warnings; use Cwd;\nmy $TOP_DIRECTORY = getcwd();\nlocal $SIG{__WARN__} = sub {#kill the program if there are any warnings\n    my $message = shift;\n    my $fail_filename = \"$TOP_DIRECTORY/$0.FAIL\";\n    open my $fh, '&gt;', $fail_filename or die \"Can't write $fail_filename: $!\";\n    printf $fh (\"$message @ %s\\n\", getcwd());\n    close $fh;\n    die \"$message\\n\";\n};#http://perlmaven.com/how-to-capture-and-save-warnings-in-perl\n\nsub execute {\n    my $command = shift;\n    print \"Executing Command: $command\\n\";\n    if (system($command) != 0) {\n        my $fail_filename = \"$TOP_DIRECTORY/$0.fail\";\n        open my $fh, '&gt;', $fail_filename or die \"Can't write $fail_filename: $!\";\n        print $fh \"$command failed.\\n\";\n        close $fh;\n        print \"$command failed.\\n\";\n        die;\n    }\n}\n\nsub run_parallel {\n    my $command_array_reference = shift;\n    unless ((ref $command_array_reference) =~ m/ARRAY/) {\n        print \"run_parallel requires an array reference as input.\\n\";\n        die;\n    }\n    use Parallel::ForkManager;\n    my $manager = new Parallel::ForkManager(4);\n    my $START_DIRECTORY = getwd();\n    foreach my $command (0..scalar @{ $command_array_reference }-1) {\n        $manager-&gt;start and next;\n        my $dir = @$command_array_reference[$command][0];\n        chdir $dir or die \"Can't chdir to $dir: $!\";\n        execute( @$command_array_reference[$command][1] );\n        chdir $START_DIRECTORY or die \"Can't chdir to $START_DIRECTORY: $!\";\n        $manager-&gt;finish;\n    }\n    $manager-&gt;wait_all_children;#necessary after all lists\n}\n\nmy @commands;\n\n$commands[0][0] = 'tmp1';#directory\n$commands[0][1] = 'echo \"ave Maria\" &gt; aveMaria.txt';#command\n\n$commands[1][0] = 'tmp2';#directory\n$commands[1][1] = 'echo \"IN HOC SIGNO VINCES\" &gt; xp.txt';#command\n\nrun_parallel(\\@commands);\n</code></pre>\n\n<p>this particular configuration produces the error </p>\n\n<pre><code>703404669@ssxfisctimga004:~/Scripts$ perl parallelForkManager_dir.pl\nsyntax error at parallelForkManager_dir.pl line 38, near \"][\"\nGlobal symbol \"$dir\" requires explicit package name at parallelForkManager_dir.pl line 39.\nGlobal symbol \"$dir\" requires explicit package name at parallelForkManager_dir.pl line 39.\nsyntax error at parallelForkManager_dir.pl line 40, near \"][\"\nExecution of parallelForkManager_dir.pl aborted due to compilation errors.\n</code></pre>\n\n<p>how can I read the directory-command pairs in the subroutine?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 0, "creation_date": 1512409609, "post_id": 47638906, "comment_id": 82236377, "body": "There&#39;s also a logical issue here: according to your code, if there are elements 6 and 3 with an odd number of instances, it will give an output of 9."}, {"owner": {"reputation": 17, "user_id": 9052222, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2p5MG1VHu28/AAAAAAAAAAI/AAAAAAAAEKY/ABhUWp3-DvM/photo.jpg?sz=128", "display_name": "Brali", "link": "https://stackoverflow.com/users/9052222/brali"}, "edited": false, "score": 0, "creation_date": 1512409724, "post_id": 47638906, "comment_id": 82236440, "body": "Added <code>use warnings;</code>, then I changed i to $i in <code>$res=($res ^ $array1[$i])</code>. There is no more warning message but the output is still 0."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1512409711, "creation_date": 1512409711, "answer_id": 47639118, "question_id": 47638906, "link": "https://stackoverflow.com/questions/47638906/perl-function-findoddcount/47639118#47639118", "title": "Perl function: findOddCount", "body": "<p>Try inserting some debugging statements into your code to see if the code is doing what you think it should be doing. Also put <code>use strict</code> and <code>use warnings</code> at the top of your script (and the top of every script). Those pragmas help both beginning and experienced Perl programmers catch typos and many other not-what-I-really-wanted-to-do kind of constructions.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nsub findOddCount {\n    my @array1 = $_[0];\n    print STDERR \"Length of \\@array1 is \",0+@array1,\", expected \",0+@_,\"\\n\";\n    my $res=0;\n    print STDERR \"\\$#array1 is $#array1, expected $#_\\n\";\n    for (my $i=0; $i &lt; $#array1; $i++) {\n        $res=($res ^ $array1[$i]);\n        print STDERR \"\\$array1[$i] is $array1[$i], value for \\$res is $res\\n\";\n    }\n    return $res\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1512411335, "post_id": 47639195, "comment_id": 82237312, "body": "There is also a missing <code>$</code> in <code>$array1[i]</code> in the question"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1512583811, "last_edit_date": 1512583811, "creation_date": 1512410048, "answer_id": 47639195, "question_id": 47638906, "link": "https://stackoverflow.com/questions/47638906/perl-function-findoddcount/47639195#47639195", "title": "Perl function: findOddCount", "body": "<p>There is a direct error with how arguments are used in the sub and a number of other deficiencies. However, even with that cleaned up the approach in the posted code doesn't do what you need.</p>\n\n<p>Here is a working version first</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy @test_data = ( \n     [1,1,2,2,3,3,4,4,5,5,6,7,7,7,7],\n     [10,10,7,7,6,6, 2,2,3,3,4,4,5,5,6,7,7,7,7,10,10],\n     [6,6,10,10,7,7,6,6, 2,2,3,3,4,4,5,5,6,7,7,7,7,10,10],\n     [10,10,7,7, 2,2,3,3,4,4,5,5,7,7,7,7,10,10,6],\n     [6,6],\n     [1] \n);\n\nfor my $ra (@test_data) \n{\n    say \"For: @$ra\";\n    if (my @odds = odd_count(@$ra)) {\n        say \"\\tValue(s) with odd count: @odds\";\n    }   \n    else {\n        say \"\\tNo values show odd number of times.\";\n    }   \n}\n\nsub odd_count {\n    my %cnt;\n    ++$cnt{$_} for @_;\n    return grep { $cnt{$_} % 2 } keys %cnt;\n}\n</code></pre>\n\n<p>Comments</p>\n\n<ul>\n<li><p><em>Always</em> start programs with <code>use warnings;</code> and <code>use strict;</code>.  It is hard to overstate how important these <a href=\"https://stackoverflow.com/questions/8023959/why-use-strict-and-warnings\">pragmas are</a>. It's not  pedantry; it directly helps in every line of code</p></li>\n<li><p>Arguments are passed to functions as a flattened list of scalars. So with <code>func(@ary)</code> the <code>@_</code> in the function has (aliases) elements of <code>@ary</code>. Your code takes the first element, <code>$_[0]</code>, and all must be wrong from there</p></li>\n<li><p>The sub above takes an array as that cuts down on code and processing. But: (1) With big arrays pass by reference, <code>odd_count($ra)</code> (2) Since <code>@_</code> <em>aliases</em> arguments, if it gets changed in the sub the caller's data may get changed.  See <a href=\"https://stackoverflow.com/a/5746000/4653379\">this post</a>. If this is a problem create a local copy to work with, <code>my @ary = @_</code>, or <code>my @ary = @{ $_[0] };</code> if you passed a reference</p></li>\n<li><p>The <code>$#array1</code> is the index of the last element in <code>@array1</code>, not the number of elements; so with that you'd need <code>$i &lt;= $#array1;</code>, not <code>&lt;</code> ...</p></li>\n<li><p>but C-style <code>for</code> loop is almost never needed. Iterate over index by: <code>for my $i (0..$#ary)</code></p></li>\n<li><p>The <a href=\"https://perldoc.perl.org/perlop.html#Bitwise-Or-and-Exclusive-Or\" rel=\"nofollow noreferrer\"><code>^</code> operator</a>, which returns its operands XOR-ed bitwise, can't do what you want here since your code isn't working with groups of elements that are equal but is blindly running through all of them. Also, the code can record only one value</p></li>\n<li><p>I use the hash to collect counts of values, what is very common, and <a href=\"http://perldoc.perl.org/perlsyn.html#Statement-Modifiers\" rel=\"nofollow noreferrer\">postfix notation</a> for <code>for</code></p></li>\n<li><p>To find the odd counts I use <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\">grep</a>, which filters those keys whose value is odd</p></li>\n</ul>\n"}], "owner": {"reputation": 17, "user_id": 9052222, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2p5MG1VHu28/AAAAAAAAAAI/AAAAAAAAEKY/ABhUWp3-DvM/photo.jpg?sz=128", "display_name": "Brali", "link": "https://stackoverflow.com/users/9052222/brali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1512583811, "creation_date": 1512408853, "question_id": 47638906, "link": "https://stackoverflow.com/questions/47638906/perl-function-findoddcount", "title": "Perl function: findOddCount", "body": "<p>\nHello,</p>\n\n<p>I am trying to write a Perl findOddCount function which finds a value in the given list that occurs an odd number of times.\n</p>\n\n<pre><code>#!/usr/bin/perl\n\nsub findOddCount{\n    @array1 = $_[0];\n    $res=0;\n    for( $i=0; $i &lt; $#array1; $i++) {\n            $res=($res ^ $array1[i])\n            }\n    return $res\n}\n\n@a1 = (1,1,2,2,3,3,4,4,5,5,6,7,7,7,7);\n@a2 = (10,10,7,7,6,6, 2,2,3,3,4,4,5,5,6,7,7,7,7,10,10);\n@a3 = (6,6,10,10,7,7,6,6, 2,2,3,3,4,4,5,5,6,7,7,7,7,10,10);\n@a4 = (10,10,7,7, 2,2,3,3,4,4,5,5,7,7,7,7,10,10,6);\n@a5 = (6,6);\n@a6 = (1);\n\nprint \"odd value in a1 is \"; print findOddCount(@a1); print \"\\n\";\nprint \"odd value in a2 is \"; print findOddCount(@a2); print \"\\n\";\nprint \"odd value in a3 is \"; print findOddCount(@a3); print \"\\n\";\nprint \"odd value in a4 is \"; print findOddCount(@a4); print \"\\n\";\nprint \"odd value in a5 is \"; print findOddCount(@a5); print \"\\n\";\nprint \"odd value in a6 is \"; print findOddCount(@a6); print \"\\n\";\n</code></pre>\n\n<p>\nExpected Output:</p>\n\n<pre><code>odd value in a1 is 6\nodd value in a2 is 6\nodd value in a3 is 6\nodd value in a4 is 6\nodd value in a5 is 0\nodd value in a6 is 1\n</code></pre>\n\n<p>\nHowever, my actual output showed all 0:</p>\n\n<pre><code>odd value in a1 is 0\nodd value in a2 is 0\nodd value in a3 is 0\nodd value in a4 is 0\nodd value in a5 is 0\nodd value in a6 is 0\n</code></pre>\n\n<p>Any help would be appreciated. Thanks.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 497, "user_id": 3384373, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/41328490fc7a1482e26b5e2561384ad3?s=128&d=identicon&r=PG&f=1", "display_name": "Ameyj", "link": "https://stackoverflow.com/users/3384373/ameyj"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 1, "creation_date": 1512406272, "post_id": 47638025, "comment_id": 82234513, "body": "i thought (at) is needed to match exact character group. thanks @toolic, removing parens around at worked"}, {"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 1, "creation_date": 1512406316, "post_id": 47638025, "comment_id": 82234551, "body": "@Ameyj <code>at</code> matches the exact character group, putting it in between parentheses captures it."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1512423885, "last_edit_date": 1512423885, "creation_date": 1512406247, "answer_id": 47638165, "question_id": 47638025, "link": "https://stackoverflow.com/questions/47638025/perl-regex-match-using-global-switch/47638165#47638165", "title": "perl regex match using global switch", "body": "<p>Your optional spaces aren't a good way to delimit words: they are optional</p>\n\n<p>Use the <em>word boundary</em> construct <code>\\b</code> for a rough match to the ends of words</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy $str = \"fat 123 cat sat on the mat\";\n\nmy @aa = $str =~ /\\b[a-z]+at\\b/gi;\n\nprint Dumper \\@aa;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>$VAR1 = [\n          'fat',\n          'cat',\n          'sat',\n          'mat'\n        ];\n</code></pre>\n\n<p>If you want to be more clever and be certain that the word found isn't preceded or followed by a non-space character then you can write this instead</p>\n\n<pre><code>my @aa = $str =~ /(?&lt;!\\S)[a-z]+at(?!\\S)/gi;\n</code></pre>\n\n<p>which produces the same result for the data you show</p>\n"}], "owner": {"reputation": 497, "user_id": 3384373, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/41328490fc7a1482e26b5e2561384ad3?s=128&d=identicon&r=PG&f=1", "display_name": "Ameyj", "link": "https://stackoverflow.com/users/3384373/ameyj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 47638165, "answer_count": 1, "score": 0, "last_activity_date": 1512423885, "creation_date": 1512405786, "last_edit_date": 1512406166, "question_id": 47638025, "link": "https://stackoverflow.com/questions/47638025/perl-regex-match-using-global-switch", "title": "perl regex match using global switch", "body": "<p>I am trying to match a word that starts with a letter and is followed by at .</p>\n\n<p>I use this regex for it </p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy $str = \"fat 123 cat sat on the mat\";\n\nmy @a = $str =~ /(\\s?[a-z]{1,2}(at)\\s?)/g;\n\nprint Dumper( @a );\n</code></pre>\n\n<p>the out put I am getting is: </p>\n\n<pre><code>$ perl ~/playground/regex.pl \n$VAR1 = 'fat ';\n$VAR2 = 'at';\n$VAR3 = ' cat ';\n$VAR4 = 'at';\n$VAR5 = 'sat ';\n$VAR6 = 'at';\n$VAR7 = ' mat';\n$VAR8 = 'at';\n</code></pre>\n\n<p>why does it match \"at\" as well when I clearly say match just 1 character before at. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512403423, "post_id": 47637276, "comment_id": 82232705, "body": "You probably don&#39;t have any Perl dependencies any more. Install them from CPAN."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1512403850, "post_id": 47637276, "comment_id": 82232981, "body": "Modules (both core modules and modules you install from <code>cpan</code>) are typically installed in directories specific to a specific version of perl. When you upgrade perl, you need to reinstall your modules."}, {"owner": {"reputation": 43, "user_id": 6855945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d90155061f13957722e4d290831156?s=128&d=identicon&r=PG&f=1", "display_name": "Randy", "link": "https://stackoverflow.com/users/6855945/randy"}, "edited": false, "score": 1, "creation_date": 1512405823, "post_id": 47637276, "comment_id": 82234214, "body": "Thanks Guys ..I used &quot; instmodsh &quot; &amp; option l on my old machine and compare with the new machine and installed all the pending Perl Modules and its working fine ...thanks"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1512405986, "creation_date": 1512405986, "answer_id": 47638088, "question_id": 47637276, "link": "https://stackoverflow.com/questions/47637276/cygwin-perl-module-use-spreadsheetread-qwreaddata-stopped-working/47638088#47638088", "title": "Cygwin Perl Module &quot; use Spreadsheet::Read qw(ReadData);&quot; stopped working", "body": "<p>You need to install either <code>Spreadsheet::ParseExcel</code> or <code>Spreadsheet::XLSX</code>.</p>\n"}], "owner": {"reputation": 43, "user_id": 6855945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d90155061f13957722e4d290831156?s=128&d=identicon&r=PG&f=1", "display_name": "Randy", "link": "https://stackoverflow.com/users/6855945/randy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1512405986, "creation_date": 1512403230, "question_id": 47637276, "link": "https://stackoverflow.com/questions/47637276/cygwin-perl-module-use-spreadsheetread-qwreaddata-stopped-working", "title": "Cygwin Perl Module &quot; use Spreadsheet::Read qw(ReadData);&quot; stopped working", "body": "<p>I've recently upgraded my Machine , thus installed Cygwin on new Latop \nGNU bash, version 4.4.12(3)-release (x86_64-unknown-cygwin) , old release was \"GNU bash, version 4.3.42(4)-release (x86_64-unknown-cygwin) \"</p>\n\n<p>Also Perl got updated from version v5.22.1 to v5.26.1 . Most of my script works but Excel based scripts stopped working.   Here is a basic example which is not working ..</p>\n\n<pre><code>use Spreadsheet::Read qw(ReadData);\nmy $book = ReadData ('simple.xlsx');\nprint 'A1: ' . $book-&gt;[1]{A1};\n</code></pre>\n\n<p>I'm getting an error Parser for XLSX is not installed at test.pl  line 2 . </p>\n\n<p>What am I'm missing ?  </p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["perl", "printing", "no-match"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1512398692, "post_id": 47635236, "comment_id": 82229494, "body": "In your <a href=\"https://stackoverflow.com/questions/47471848/check-whether-a-field-from-a-line-of-text-line-matches-a-value\">previous question</a> <b>Dave Cross</b> commented <i>&quot;I have edited your code to add indentation. You&#39;re welcome, but please do it yourself in the future&quot;</i> Please take proper note of that advice. It is very shabby behaviour to present ugly and unreadable code when you are asking for free help to fix it."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1512405686, "post_id": 47635464, "comment_id": 82234130, "body": "<i>&quot;we don&#39;t care how many, just that we saw it&quot;</i> But <code>++$seen{$number}</code> provides potentially useful extra information, for debugging perhaps. The code is (two characters!) shorter, and as long as the hash element is created the rest of your code will still work."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512405778, "post_id": 47635464, "comment_id": 82234179, "body": "@Borodin indeed. But it&#39;s also insignificantly slower when we increment. ;)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 0, "last_activity_date": 1512397366, "creation_date": 1512397366, "answer_id": 47635464, "question_id": 47635236, "link": "https://stackoverflow.com/questions/47635236/find-and-print-exact-match-from-a-file-notify-in-print-if-a-match-could-not-be/47635464#47635464", "title": "Find and print exact match from a file, notify in print if a match could not be found", "body": "<blockquote>\n  <p>I would like to be able to identify when there is no match at all for that number in any of the files</p>\n</blockquote>\n\n<p>Since you are going over several files, you need to remember that you saw a certain number once. A hash for counting is very useful here, and a common approach to this kind of problem.</p>\n\n<p>It makes sense to at the same time move the numbers (or patterns) into an array. That way you only need to list them once in your code, and the overall code becomes less cluttered.</p>\n\n<pre><code>my @numbers = (1203, 1204, 1205);\nmy %seen;\nforeach my $file (@files) {\n    # ...\n    while (&lt;$file_h&gt;) {\n        foreach my $number (@numbers) {\n            if (/\\b$number\\b/) {\n                print \"$file $_\"; \n                $seen{$number} = 1; # we don't care how many, just that we saw it\n             }\n        }\n    }\n}\n\n# At this point, %seen contains a key for every number that was seen at least once.\n# If a number was not seen, it will not have a key.\n\n# output numbers that were not seen\nforeach my $number (@numbers) {\n    print \"no match: $_\\n\" unless exists $seen{$number};\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 8477211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a04e9d6da56a9fba1d331a7cdbb1834f?s=128&d=identicon&r=PG&f=1", "display_name": "normbeef", "link": "https://stackoverflow.com/users/8477211/normbeef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1512400400, "creation_date": 1512396569, "last_edit_date": 1592644375, "question_id": 47635236, "link": "https://stackoverflow.com/questions/47635236/find-and-print-exact-match-from-a-file-notify-in-print-if-a-match-could-not-be", "title": "Find and print exact match from a file, notify in print if a match could not be found", "body": "<p>I am using the following Perl script to search multiple files, and print out the entire text line when a particular number in that line is matched:</p>\n<pre><code>#!/perl/bin/perl\n\nuse strict;\nuse warnings;\n\nmy @files = &lt;c:/perl64/myfiles/*&gt;;\n\nforeach my $file (@files) {\n  open my $file_h, '&lt;', $file\n   or die &quot;Can't open $file: $!&quot;;\n\n  while (&lt;$file_h&gt;) {\nprint &quot;$file $_&quot; if /\\b1203\\b/; \nprint &quot;$file $_&quot; if /\\b1204\\b/;\nprint &quot;$file $_&quot; if /\\b1207\\b/;\n  } }\n</code></pre>\n<p>The script works very well to match and print each time the number exists on a line in one or more of the files. My question is that I would like to be able to identify when there is no match at all for that number in any of the files.</p>\n<p>We are parsing multiple files with thousands of lines so to find the delta's (i.e. NO MATCH of this number in any of the files) is very time consuming.</p>\n<p>To clarify,  I still need to match and print every time the number is matched in every file, not just if it was matched once. also the line output where it matches is critical to be printed.</p>\n<p>ultimately this is just to show if the number was not matched anywhere in any of the files.</p>\n<h3>Source edited for readability</h3>\n<pre><code>#!/perl/bin/perl\n\nuse strict;\nuse warnings;\n\nmy @files = &lt;c:/perl64/myfiles/*&gt;;\n\nforeach my $file ( @files ) {\n\n    open my $file_h, '&lt;', $file or die &quot;Can't open $file: $!&quot;;\n\n    while ( &lt;$file_h&gt; ) {\n        \n        print &quot;$file $_&quot; if /\\b1203\\b/;\n        print &quot;$file $_&quot; if /\\b1204\\b/;\n        print &quot;$file $_&quot; if /\\b1207\\b/;\n    }\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 6, "creation_date": 1512385766, "post_id": 47631798, "comment_id": 82221581, "body": "I&#39;m not sure I understand the question/the problem. Please try to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. What do you mean with &quot;$b changes&quot;?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 4, "creation_date": 1512386097, "post_id": 47631798, "comment_id": 82221766, "body": "How do you notice that <code>$b</code> changes? /// You are not pushing three elements to your array. You are pushing <i>one string</i> (which constist of <code>$a</code>, a blank, <code>$b</code>, a blank, <code>$c</code>) to your array. To push three elements use <code>push(@atom, $a, $b, $c);</code> (without quotes)."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512386110, "post_id": 47631798, "comment_id": 82221775, "body": "<code>@atom = qw(aa bb cc); @atom = &quot;&quot; if($atom[1]!~m&#47;dd&#47;i);</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1512386144, "post_id": 47631798, "comment_id": 82221794, "body": "You are pushing only one element to your array. You are creating a new string, and you are pushing that. At that point, <code>$b</code> is not there as an entity any more. Only the value of <code>$b</code> is part of that string, which is the single (or last) element of <code>@atom</code>. There is no way to make <code>@atom</code> know that <code>$b</code> changed to clear it."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 2, "creation_date": 1512386214, "post_id": 47631798, "comment_id": 82221841, "body": "@ssr1012 you are overwriting <code>@atom</code> with a one-element list that contains the empty string. That&#39;s hardly <i>clearing</i> it."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512386329, "post_id": 47631798, "comment_id": 82221904, "body": "@simbabque: <i>how to empty the array every time when $b changes?</i> yeah exactly what OP asks."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1512386410, "post_id": 47631798, "comment_id": 82221945, "body": "Why do you want to do this? Perhaps reconsider your data model?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 3, "creation_date": 1512386411, "post_id": 47631798, "comment_id": 82221946, "body": "@ssr1012 an empty array would be an array that holds an empty list, which is <code>()</code>, and has <i>no elements</i>. That&#39;s a big difference to a list with one element which is an empty string."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 3, "creation_date": 1512387337, "post_id": 47631798, "comment_id": 82222506, "body": "@ssr1012: That&#39;s terrible advice. Please remove it. <code>@atom = &quot;&quot;</code> <b>does not</b> empty an array."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1512387518, "post_id": 47631798, "comment_id": 82222617, "body": "@priya Go with hashes."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512389318, "post_id": 47631798, "comment_id": 82223557, "body": "@ssr1012: Also a regex check seems bizarre here. It&#39;s quite possible to change <code>$atom[1]</code> to a different value that would still match the regex. (And did you get confused between <code>bb</code> and <code>dd</code> while writing your answer?)"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512391307, "post_id": 47631798, "comment_id": 82224777, "body": "If <code>$atom[1]</code> stored <code>bb</code> executed the script then changes happened eg <code>dd</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 2, "creation_date": 1512392514, "post_id": 47631798, "comment_id": 82225512, "body": "@ssr1012: You&#39;re talking nonsense. You store &#39;bb&#39; in <code>$atom[1]</code>. Then your code says &quot;overwrite <code>@atom</code> with an empty string if <code>$atom[1]</code> doesn&#39;t match <code>&#47;dd&#47;</code>&quot;. So if nothing has changed, you will overwrite <code>@atom</code>. That&#39;s not what the OP asked for at all. Please just delete your ridiculous comment."}], "answers": [{"tags": [], "owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "is_accepted": false, "score": 1, "last_activity_date": 1512387657, "creation_date": 1512387657, "answer_id": 47632575, "question_id": 47631798, "link": "https://stackoverflow.com/questions/47631798/how-to-empty-an-array-when-the-value-of-the-array-changes/47632575#47632575", "title": "how to empty an array when the value of the array changes?", "body": "<p>Assuming $a $b $c are read in a loop and pushed in an array</p>\n\n<pre><code>while (...) {\n    # read $a $b $c\n\n    if ($b ne $last_b) {\n        @atom = ()  # atom is affected to a new empty array\n    }\n\n    push @atom, ...\n\n    $last_b=$b\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1512387951, "creation_date": 1512387951, "answer_id": 47632658, "question_id": 47631798, "link": "https://stackoverflow.com/questions/47631798/how-to-empty-an-array-when-the-value-of-the-array-changes/47632658#47632658", "title": "how to empty an array when the value of the array changes?", "body": "<p>I'm not sure why you are using an array when you're only storing a single value in it. You think you are storing three values, but you are putting those into a single string before storing them in the array.</p>\n\n<p>To store three values in your array, you might use code like this:</p>\n\n<pre><code>my @atom = ($residue_name, $chain, $residue_number);\n</code></pre>\n\n<p>(Notice that I have also changed your variable names. <code>$a</code>, <code>$b</code> and <code>$c</code> are terrible names for variables and <code>$a</code> and <code>$b</code> are special variables for Perl and should not be used in random code.)</p>\n\n<p>I don't really know what you are doing here, but it seems to me that it might make more sense to store this data in a hash.</p>\n\n<pre><code>my %atom = (\n    residue_name   =&gt; $residue_name,\n    chain          =&gt; $chain,\n    residue_number =&gt; $residue_number,\n);\n</code></pre>\n\n<p>Of course, that's only a guess as I don't know what you need to do with your data - but an important part of programming is to get your data structures right.</p>\n\n<p>But let's assume for now that you're still using your original array and you want to a) see if the <code>$chain</code> variable has changed its value and b) empty the array at that point. You would need to write code something like this:</p>\n\n<pre><code>my @atom = ($residue_name, $chain, $residue_number);\n# Store the current value of $chain\nmy $original_chain = $chain;\n</code></pre>\n\n<p>Then, later on, you need to check the value has changed and take appropriate action.</p>\n\n<pre><code>if ($chain ne $original_chain) {\n  @atom = ();\n}\n</code></pre>\n\n<p>Of course, this is all just the sketchiest of suggestions. I have no idea how your code is structured.</p>\n"}], "owner": {"reputation": 3, "user_id": 8977088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7330d1910584158d33659697af401d31?s=128&d=identicon&r=PG&f=1", "display_name": "priya", "link": "https://stackoverflow.com/users/8977088/priya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 47632658, "answer_count": 2, "score": -3, "last_activity_date": 1512394766, "creation_date": 1512385124, "last_edit_date": 1512388528, "question_id": 47631798, "link": "https://stackoverflow.com/questions/47631798/how-to-empty-an-array-when-the-value-of-the-array-changes", "title": "how to empty an array when the value of the array changes?", "body": "<p>lets assume i have an array @atom. i am pushing three elements <code>$a</code>, <code>$b</code>, <code>$c</code> (residue name, chain and residue number respectively fetched from pdb file) into that array. for instance, <code>$b</code> has values <em><strong>AAAAAAAAA</strong></em>, <em><strong>BBBBBBB</strong></em>, <em><strong>CCCCCCC</strong></em>. how to empty the array every time when <code>$b</code> changes? </p>\n\n<p>The array is as follows,</p>\n\n<pre><code>push(@atom,\"$a $b $c\");\n</code></pre>\n"}, {"tags": ["mysql", "perl", "prepared-statement", "dbi"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1512395092, "post_id": 47631478, "comment_id": 82227137, "body": "That looks correct. What happens if you replace the <code>bind_param</code> and <code>execute</code> calls with <code>$sth-&gt;execute(&#39;session:06b6d2138df949524092eefc066ee5ab3598b&zwnj;&#8203;f96&#39;)</code>?"}, {"owner": {"reputation": 478, "user_id": 1792103, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/56805e4f85c6205c017347c95b4f85c0?s=128&d=identicon&r=PG", "display_name": "deR_Ed", "link": "https://stackoverflow.com/users/1792103/der-ed"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512396225, "post_id": 47631478, "comment_id": 82227981, "body": "@Borodin it&#39;s the same problem with <code>$sth-&gt;execute(...)</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512396518, "post_id": 47631478, "comment_id": 82228173, "body": "What type of data is the <code>id</code> column? Are you sure it&#39;s not numeric?"}, {"owner": {"reputation": 478, "user_id": 1792103, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/56805e4f85c6205c017347c95b4f85c0?s=128&d=identicon&r=PG", "display_name": "deR_Ed", "link": "https://stackoverflow.com/users/1792103/der-ed"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512398563, "post_id": 47631478, "comment_id": 82229417, "body": "@Borodin it is a string type. I updated my question with a bit of context."}, {"owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "edited": false, "score": 0, "creation_date": 1512420555, "post_id": 47631478, "comment_id": 82241857, "body": "What version of DBD::mysql ?"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1512420823, "post_id": 47631478, "comment_id": 82241988, "body": "Have you tried specifying the column type as in <code>use DBI qw(:sql_types); $sth-&gt;bind_param(1, &#39;session:...&#39;, SQL_VARCHAR);</code> ? I&#39;m grasping at straws here, can&#39;t see anything wrong with your code..."}, {"owner": {"reputation": 478, "user_id": 1792103, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/56805e4f85c6205c017347c95b4f85c0?s=128&d=identicon&r=PG", "display_name": "deR_Ed", "link": "https://stackoverflow.com/users/1792103/der-ed"}, "reply_to_user": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "edited": false, "score": 0, "creation_date": 1512466492, "post_id": 47631478, "comment_id": 82258659, "body": "@pilcrow it is 4.043 (should be the most recent version of the module)"}, {"owner": {"reputation": 478, "user_id": 1792103, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/56805e4f85c6205c017347c95b4f85c0?s=128&d=identicon&r=PG", "display_name": "deR_Ed", "link": "https://stackoverflow.com/users/1792103/der-ed"}, "reply_to_user": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1512466689, "post_id": 47631478, "comment_id": 82258780, "body": "@bytepusher this doesn&#39;t work either. I also tested using an INT-column and it worked, but only if i use the explicit type SQL_INTEGER. I will do some additional testing with another mysql install. If this doesn&#39;t work I may need to file a bug report."}, {"owner": {"reputation": 212, "user_id": 1703643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b49ef24e56b4fd1a560968063ee326a7?s=128&d=identicon&r=PG", "display_name": "USD Matt", "link": "https://stackoverflow.com/users/1703643/usd-matt"}, "edited": false, "score": 1, "creation_date": 1512467342, "post_id": 47631478, "comment_id": 82259202, "body": "Hmm copying your code to a BSD system running <code>perl v5.24.1</code> and <code>DBI 1.637-ithread</code> / <code>DBD::mysql 4.043</code> worked without issue. <code>Binding parameters: SELECT me.id, me.session_data, me.expires FROM sys_session me WHERE me.id = &#39;session:06b6d2138df949524092eefc066ee5ab3598bf96&#39;</code>"}, {"owner": {"reputation": 478, "user_id": 1792103, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/56805e4f85c6205c017347c95b4f85c0?s=128&d=identicon&r=PG", "display_name": "deR_Ed", "link": "https://stackoverflow.com/users/1792103/der-ed"}, "reply_to_user": {"reputation": 212, "user_id": 1703643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b49ef24e56b4fd1a560968063ee326a7?s=128&d=identicon&r=PG", "display_name": "USD Matt", "link": "https://stackoverflow.com/users/1703643/usd-matt"}, "edited": false, "score": 0, "creation_date": 1512487395, "post_id": 47631478, "comment_id": 82272418, "body": "@USDMatt thanks for testing. Which mysql client version is installed on your system? I&#39;m asking, because I had the chance to test with a system, that uses 5.5 (<code>MYSQL_VERSION_ID 50557</code>) and it ran successfully. In contrast, my two test systems both seem to use 5.7 (<code>MYSQL_VERSION_ID 50720</code> and <code>MYSQL_VERSION_ID 50716</code>)"}, {"owner": {"reputation": 212, "user_id": 1703643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b49ef24e56b4fd1a560968063ee326a7?s=128&d=identicon&r=PG", "display_name": "USD Matt", "link": "https://stackoverflow.com/users/1703643/usd-matt"}, "edited": false, "score": 0, "creation_date": 1512487518, "post_id": 47631478, "comment_id": 82272517, "body": "The mysql package I have installed is <code>mysql56-client-5.6.35_1</code>"}], "answers": [{"tags": [], "owner": {"reputation": 478, "user_id": 1792103, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/56805e4f85c6205c017347c95b4f85c0?s=128&d=identicon&r=PG", "display_name": "deR_Ed", "link": "https://stackoverflow.com/users/1792103/der-ed"}, "is_accepted": true, "score": 3, "last_activity_date": 1512499824, "last_edit_date": 1512499824, "creation_date": 1512490623, "answer_id": 47658089, "question_id": 47631478, "link": "https://stackoverflow.com/questions/47631478/perl-dbi-mysql-puts-single-quote-instead-of-actual-parameter-in-prepared-state/47658089#47658089", "title": "Perl DBI (MySQL) puts single quote instead of actual parameter in prepared statement", "body": "<p>After some testing, I came to the conclusion that this seems to be a compatibility problem between <em>DBD::mysql</em> and <em>MySQL client 5.7</em> (and/or <em>MySQL server 5.5</em>).</p>\n\n<p>At least, I found a solution for Ubuntu 16 (xenial), so for others, that may run into the same issue:</p>\n\n<ul>\n<li>downgrade to MySQL 5.6 like described <a href=\"https://gist.github.com/Voronenko/31161ab292c7967fcd38c092335a99e1\" rel=\"nofollow noreferrer\">here</a>. For me, installing <code>libmysqlclient-dev</code> without the server/client was sufficient</li>\n<li>reinstall DBD::MySQL <code>sudo cpanm --reinstall DBD::mysql</code>, so that it gets build with the now installed MySQL 5.6</li>\n</ul>\n\n<p>I will file an issue at the <a href=\"https://github.com/perl5-dbi/DBD-mysql\" rel=\"nofollow noreferrer\">DBD::mysql GitHub</a> and will update this answer, if there are any news regarding this problem.</p>\n\n<hr>\n\n<p>An alternative solution, that also worked for me:<br>\nlet the server prepare your statement <code>$dbh-&gt;{mysql_server_prepare} = 1;</code></p>\n"}, {"tags": [], "owner": {"reputation": 391, "user_id": 7878845, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/5ee5918d6ee3618ec173b170fee3668a?s=128&d=identicon&r=PG", "display_name": "Pali", "link": "https://stackoverflow.com/users/7878845/pali"}, "is_accepted": false, "score": 6, "last_activity_date": 1529428436, "creation_date": 1529428436, "answer_id": 50933703, "question_id": 47631478, "link": "https://stackoverflow.com/questions/47631478/perl-dbi-mysql-puts-single-quote-instead-of-actual-parameter-in-prepared-state/50933703#50933703", "title": "Perl DBI (MySQL) puts single quote instead of actual parameter in prepared statement", "body": "<p>From your trace log can be seen that question mark placeholder (?) was replaced by DBD::mysql by <strong>one</strong> apostrophe ('). So it is pure DBD::mysql bug. At the first glance it does not make sense at all... as placeholder is replaced by parameter which is put into two apostrophes.</p>\n\n<p>Relevant code which is doing this placeholder replacement can be found there: <a href=\"https://metacpan.org/source/MICHIELB/DBD-mysql-4.043/dbdimp.c#L784-786\" rel=\"noreferrer\">https://metacpan.org/source/MICHIELB/DBD-mysql-4.043/dbdimp.c#L784-786</a></p>\n\n<pre><code>          *ptr++ = '\\'';\n          ptr += mysql_real_escape_string(sock, ptr, valbuf, vallen);\n          *ptr++ = '\\'';\n</code></pre>\n\n<p>So question is, can above C code result in just one apostrophe in *ptr buffer? And answer is yes, when mysql_real_escape_string() returns integer of same value as pointer size minus one -- to simulate numeric operation of decrement by one, when both apostrophes are written to same position in *ptr buffer.</p>\n\n<p>And can this happen? Yes, it can, because Oracle changed API of mysql_real_escape_string() C function in MySQL 5.7.6 client library:</p>\n\n<p><a href=\"https://dev.mysql.com/doc/relnotes/mysql/5.7/en/news-5-7-6.html#mysqld-5-7-6-feature\" rel=\"noreferrer\">https://dev.mysql.com/doc/relnotes/mysql/5.7/en/news-5-7-6.html#mysqld-5-7-6-feature</a></p>\n\n<blockquote>\n  <p>Incompatible Change: A new C API function, mysql_real_escape_string_quote(), has been implemented as a replacement for mysql_real_escape_string() because the latter function can fail to properly encode characters when the NO_BACKSLASH_ESCAPES SQL mode is enabled. In this case, mysql_real_escape_string() cannot escape quote characters except by doubling them, and to do this properly, it must know more information about the quoting context than is available. mysql_real_escape_string_quote() takes an extra argument for specifying the quoting context. For usage details, see mysql_real_escape_string_quote().</p>\n</blockquote>\n\n<p>And documentation for mysql_real_escape_string() from MySQL 5.7.6 version says:</p>\n\n<p><a href=\"https://dev.mysql.com/doc/refman/5.7/en/mysql-real-escape-string.html\" rel=\"noreferrer\">https://dev.mysql.com/doc/refman/5.7/en/mysql-real-escape-string.html</a></p>\n\n<blockquote>\n  <p>Return Values: The length of the encoded string that is placed into the to argument, not including the terminating null byte, or -1 if an error occurs.</p>\n</blockquote>\n\n<p>Therefore if you enable NO_BACKSLASH_ESCAPES SQL mode on you MySQL server, then mysql_real_escape_string() from MySQL 5.7.6 client cannot work and return error, therefore -1 casted to unsigned long. unsigned long is on both 32bit and 64bit x86 platform of same size as pointer, therefore above C code from DBD::mysql drivers results in one apostrophe character.</p>\n\n<p>Now I fixed this problem for <a href=\"https://github.com/gooddata/DBD-MariaDB\" rel=\"noreferrer\">DBD::MariaDB</a> driver (fork of DBD::mysql) in following pull request: <a href=\"https://github.com/gooddata/DBD-MariaDB/pull/77\" rel=\"noreferrer\">https://github.com/gooddata/DBD-MariaDB/pull/77</a></p>\n\n<p>So DBD::MariaDB would be compatible also when compiled with MySQL 5.7 client library.</p>\n"}], "owner": {"reputation": 478, "user_id": 1792103, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/56805e4f85c6205c017347c95b4f85c0?s=128&d=identicon&r=PG", "display_name": "deR_Ed", "link": "https://stackoverflow.com/users/1792103/der-ed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 727, "favorite_count": 0, "accepted_answer_id": 47658089, "answer_count": 2, "score": 8, "last_activity_date": 1529428436, "creation_date": 1512384095, "last_edit_date": 1512487979, "question_id": 47631478, "link": "https://stackoverflow.com/questions/47631478/perl-dbi-mysql-puts-single-quote-instead-of-actual-parameter-in-prepared-state", "title": "Perl DBI (MySQL) puts single quote instead of actual parameter in prepared statement", "body": "<p>I'm trying to do a simple query as prepared statement but have no success. Here is the code:</p>\n\n<pre><code>package sqltest;\nuse DBI;\n\nDBI-&gt;trace(2);\n\nmy $dbh = DBI-&gt;connect('dbi:mysql:database=test;host=***;port=3306','the_username', '****');\nmy $prep = 'SELECT me.id, me.session_data, me.expires FROM sys_session me WHERE me.id = ?';\n$dbh-&gt;{RaiseError} = 1;\nmy $sth = $dbh-&gt;prepare($prep);\n$sth-&gt;bind_param(1, 'session:06b6d2138df949524092eefc066ee5ab3598bf96');\n$sth-&gt;execute;\nDBI::dump_results($sth);\n</code></pre>\n\n<p>The MySQL server responds with a syntax error <em><code>near '''</code></em>.</p>\n\n<p>The output of the DBI-trace shows</p>\n\n<pre><code>  -&gt; bind_param for DBD::mysql::st (DBI::st=HASH(0x21e35cc)~0x21e34f4 1 'session:06b6d2138df949524092eefc066ee5ab3598bf96') thr#3ccdb4\n Called: dbd_bind_ph\n  &lt;- bind_param= ( 1 ) [1 items] at perl_test_dbi_params.pl line 10\n[...]\n&gt;parse_params statement SELECT me.id, me.session_data, me.expires FROM sys_session me WHERE me.id = ?\nBinding parameters: SELECT me.id, me.session_data, me.expires FROM sys_session me WHERE me.id = '\n[...]\nDBD::mysql::st execute failed: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''' at line 1\n</code></pre>\n\n<p>So to me, it looks like the statement does not get prepared as it should.\nWhen I send the query without the parameter it works as expected.</p>\n\n<p>What do I miss here?</p>\n\n<p>DBI version is <code>DBI 1.637-ithread</code>, MySQL version is <code>5.5.57-0+deb8u1</code></p>\n\n<p>Tested with Windows <code>perl 5, version 26, subversion 1 (v5.26.1) built for MSWin32-x86-multi-thread-64int</code><br/>\nand Ubuntu <code>perl 5, version 22, subversion 1 (v5.22.1) built for x86_64-linux-gnu-thread-multi</code></p>\n\n<p><strong>Edit1:</strong><br>\nfor context: I noticed the problem while using Catalyst with <a href=\"http://search.cpan.org/~bobtfish/Catalyst-Plugin-Session-Store-DBIC-0.14/lib/Catalyst/Plugin/Session/Store/DBIC.pm\" rel=\"nofollow noreferrer\">Catalyst::Plugin::Session::Store::DBIC</a>. Here, the id-column is a Varchar(72) type, that holds a session-id.</p>\n\n<p><strong>Edit2:</strong></p>\n\n<ul>\n<li>DBD::mysql version is <code>4.043</code></li>\n<li>Binding via <code>$sth-&gt;execute('session:foo');</code> results in the same problem<br></li>\n<li>Binding via <code>$sth-&gt;bind_param('session:foo', SQL_VARCHAR);</code> results in the same problem<br></li>\n<li>Binding a numeric field does work, but only with explicit type definition <code>$sth-&gt;bind_param(1, 1512407082, SQL_INTEGER);</code></li>\n</ul>\n\n<p><strong>Edit3:</strong><br>\nI found the time to do some more testing, but not with no satisfying results:<br></p>\n\n<ul>\n<li>I was able to test with an older server and it worked. The versions of DBI and DBD::mysql are the same, but I found the server using MySQL 5.5 client, reported in the DBI-trace as <code>MYSQL_VERSION_ID 50557</code>, whereas both my original test servers using MySQL 5.7 <code>MYSQL_VERSION_ID 50720</code> and <code>MYSQL_VERSION_ID 50716</code></li>\n<li>with <code>$dbh-&gt;{mysql_server_prepare} = 1;</code><em>it works!</em> Maybe this helps someone who finds this q., but I would rather now the real cause of the problem</li>\n</ul>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1512399420, "post_id": 47626547, "comment_id": 82230014, "body": "The pattern will not match this string: &quot;Mr. X MBBS is a non-practitioner.&quot; Perhaps you mean <code>\\bpractitioner\\b</code> instead of <code>\\s+practitioner\\s+</code>? See <a href=\"http://perldoc.perl.org/perlre.html#Assertions\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlre.html#Assertions</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512363047, "post_id": 47626654, "comment_id": 82211079, "body": "awesome. got it ... +1"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512363159, "post_id": 47626654, "comment_id": 82211114, "body": "May I know if we can do in reverse search from the keyword <code>practitioner</code> <code>lookaround</code> and <code>lookbehind</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512363303, "post_id": 47626654, "comment_id": 82211155, "body": "Perl doesn&#39;t support variable-width lookbehind (so you can&#39;t look for <code>practitioner</code> preceded by <code>MBBS</code>), and you&#39;d still have to solve exactly the same problem if it did."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512366305, "post_id": 47626654, "comment_id": 82212073, "body": "I have one query on this, that the regex matches the last <code>practitioner</code> how it is possible? <code>Mr. Sankaranarayan MBBS possible explanations for what practitioner determines practitioner</code>. In this case the keyword <code>practitioner</code> matches in twice. The first one not considered and then the second one got matched..."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512367883, "post_id": 47626654, "comment_id": 82212568, "body": "Sorry I am not clear and excuse please... <code>(Mr\\.\\s+(\\w+)\\s+MBBS(?:(?!MBBS).)*\\s+practitioner</code> its equal to this only <code>Sankaranarayan MBBS possible explanations for what practitioner</code> how it matches the second one....? that is <code>Sankaranarayan MBBS possible explanations for what practitioner determines **practitioner**</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512368101, "post_id": 47626654, "comment_id": 82212641, "body": "You are mistaken. For the passage you provided, the code I provided outputs <code>Mr. Sankaranarayan MBBS possible explanations for what practitioner determines practitioner</code>."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1512397394, "post_id": 47626654, "comment_id": 82228724, "body": "Why are you using &quot;MBBS&quot; and not &quot;Mr.&quot;? <code>m&#47;Mr.\\s+(\\w+)\\s+MBBS(?:(?!Mr.).)*?\\s+practitioner\\s+&#47;i</code> Wouldn&#39;t using the start of the pattern be more logical?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512397801, "post_id": 47626654, "comment_id": 82228938, "body": "@shawncory, Depends what the OP wants, but they didn&#39;t specify. The answer already suggests there are other possible solutions, and even points out that <code>Mr\\.</code> could be included."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1512398115, "post_id": 47626654, "comment_id": 82229112, "body": "@ikegami I was thinking more of  a generalized solution. <code>m{$start_pattern(?:(?!$start_pattern).)*?$end_pattern}</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1512398199, "post_id": 47626654, "comment_id": 82229168, "body": "@shawncorey, It&#39;s far more common to want <i>start !end end</i> or <i>start !(start|end) end</i>, but that&#39;s not applicable here. They&#39;re not trying to parse markup/quoted/etc"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1512414906, "post_id": 47626654, "comment_id": 82239103, "body": "@ikegami The OP is trying to parse; they just don&#39;t realize it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1512415963, "post_id": 47626654, "comment_id": 82239627, "body": "@shawnhcorey, Of course they are. But thry can&#39;t use the patterns usually used to parse balanced text (markup/quoted/etc) because that&#39;s not what they have"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1512363222, "last_edit_date": 1512363222, "creation_date": 1512362651, "answer_id": 47626654, "question_id": 47626547, "link": "https://stackoverflow.com/questions/47626547/matching-regex-with-keyword-in-a-perl-script/47626654#47626654", "title": "Matching regex with keyword in a perl script", "body": "<p><code>(?:(?!STRING).)*</code> is to <code>STRING</code> as <code>[^CHAR]*</code> is to <code>CHAR</code>.</p>\n\n<p>I think you want</p>\n\n<pre><code>if ($string =~ /(Mr\\.\\s+(\\w+)\\s+MBBS(?:(?!MBBS).)*\\s+practitioner\\s+)/si) {\n    print \"$1\\n\";\n}\n</code></pre>\n\n<p>You can add to the inner part of <code>(?:(?!MBBS).)*</code>. For example, you might prefer <code>(?:(?!Mr\\.|MBBS).)*</code>.</p>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 47626654, "answer_count": 1, "score": 0, "last_activity_date": 1512363222, "creation_date": 1512361998, "last_edit_date": 1512362474, "question_id": 47626547, "link": "https://stackoverflow.com/questions/47626547/matching-regex-with-keyword-in-a-perl-script", "title": "Matching regex with keyword in a perl script", "body": "<p>perl regex is very powerful while using in text content unfortunately I don't get the output what I have expected with my code by doing wrong matches.</p>\n\n<p>In this matches we have <code>n</code> of matches with MBBS and the keyword <code>practitioner</code>.</p>\n\n<p><strong>Sample Input:</strong></p>\n\n<blockquote>\n  <p>Sample text - There are no statistically significant direct effects of prior behavior on practitioner current crop loss, measured by Mr. Srivatsan MBBS M.D. log of amount of crop loss. Third, although we cover a number and given by <strong><em>Mr. Sankaranarayan MBBS possible explanations for what practitioner determines practitioner</em></strong> of crop loss, it is possible that there may be other unobserved, time-varying household characteristics that influence whether a household experience a crop loss. If that is the case the causality from crop loss to fertility decisions may not hold.</p>\n</blockquote>\n\n<p><strong>My Code:</strong></p>\n\n<pre><code>my $txtfile = \"sample.txt\";\n\nreadFileinString($txtfile, \\$string);\nmy $keyword = \"practitioner\";\n\nif($string=~m/Mr.\\s+(\\w+)\\s+MBBS(.*?)\\s+practitioner\\s+/i)\n{\n    print \"$&amp;\\n\";\n}\n</code></pre>\n\n<p><strong><em>Code Output:</em></strong></p>\n\n<pre><code>Mr. Srivatsan MBBS M.D. log of amount of crop loss. Third, although we cover a number and given by Mr. Sankaranarayan MBBS possible explanations for what practitioner\n</code></pre>\n\n<p><strong><em>Expected Output:</em></strong></p>\n\n<pre><code>Mr. Sankaranarayan MBBS possible explanations for what practitioner determines practitioner\n</code></pre>\n\n<p>Could someone have any experience doing on this way and provide suggestions please.</p>\n"}, {"tags": ["html", "css", "perl"], "answers": [{"comments": [{"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1512395615, "post_id": 47622677, "comment_id": 82227514, "body": "As far as I can tell this seems to be about the best answer one can hope working within the constraints of TextToHTML although the alignment still is not working quite right for me. I am off to explore Emaill::Template in order to try to create better looking html emails."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1512396415, "post_id": 47622677, "comment_id": 82228100, "body": "@gatorreina: <a href=\"https://metacpan.org/pod/Email::Template\" rel=\"nofollow noreferrer\"><code>Email::Template</code></a> is far less intelligent than <code>HTML::TextToHTML</code> and is mostly about actually sending the mail. I doubt if you will get a better solution than the latter for making a guess at HTML markup from random text. It is an impossible task unless your text is very well behaved."}, {"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1512397834, "post_id": 47622677, "comment_id": 82228955, "body": "How do emails such as an Itunes receipt do it then? Are they simply converting a text file to HTML?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1512398019, "post_id": 47622677, "comment_id": 82229068, "body": "@gatorreina: I don&#39;t know anything about <i>iTunes</i>, but if you&#39;re talking about receiving an emailed receipt from Apple then they will have software that creates the HTML form of the receipt. It certainly isn&#39;t a matter of creating a text file and pushing it through a translation algorithm."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1512398185, "post_id": 47622677, "comment_id": 82229159, "body": "If you have a reasonably limited range of possible tables then you could write some Perl to add more precise delimiters to the rows and then use the <code>DELIM</code> table type."}, {"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1512398275, "post_id": 47622677, "comment_id": 82229228, "body": "I think that may be where I need to end up. I need to figure out how I can create good looking html emails with information that is easy to read."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1512398479, "post_id": 47622677, "comment_id": 82229357, "body": "@gatorreina: The proper way would be to generate HTML instead of (or as well as) the plain text output. It&#39;s far better to get things right in the first place than adding a hack to fix it elsewhere. That is <i>two wrongs</i> not making a <i>right</i>!"}, {"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512398783, "post_id": 47622677, "comment_id": 82229557, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/160437/discussion-between-gatorreina-and-borodin\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1512344643, "last_edit_date": 1512344643, "creation_date": 1512331193, "answer_id": 47622677, "question_id": 47622332, "link": "https://stackoverflow.com/questions/47622332/preserving-columns-with-htmltexttohtml/47622677#47622677", "title": "Preserving columns with HTML::TextToHTML", "body": "<p>You won't do much better than setting</p>\n\n<pre><code>make_tables =&gt; 1\n</code></pre>\n\n<p>in the constructor, and possibly setting</p>\n\n<pre><code>table_type =&gt; { ALIGN =&gt; 1, PGSQL =&gt; 0, BORDER =&gt; 0, DELIM =&gt; 0 }\n</code></pre>\n\n<p>which will split words that are separated by two or more spaces into the columns of a table</p>\n\n<p>But you may well have to edit your original text file a little to get the best results. For instance your column headings will be <code>Job no Description</code> and <code>Completed</code> because there is only a single space after <code>Job no</code></p>\n"}], "owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 47622677, "answer_count": 1, "score": 1, "last_activity_date": 1512344643, "creation_date": 1512329138, "last_edit_date": 1512330406, "question_id": 47622332, "link": "https://stackoverflow.com/questions/47622332/preserving-columns-with-htmltexttohtml", "title": "Preserving columns with HTML::TextToHTML", "body": "<p>I have a Perl script that converts text to HTML using <a href=\"https://metacpan.org/pod/HTML::TextToHTML\" rel=\"nofollow noreferrer\"><code>HTML::TextToHTML</code></a></p>\n\n<p>Some of the original text has quasi-tables in that their alignment matters.</p>\n\n<p>For example</p>\n\n<pre><code>Job no Description               Completed\n15     Paving from NE 32 to 45th  11-01-17\n</code></pre>\n\n<p>Right now I am using this code</p>\n\n<pre><code>use HTML::TextToHTML;\n\nmy $conv = new HTML::TextToHTML();\n\nif ( $HTML eq 'Y' ) { # convert entire body to HTML                                                                                  \n\n    $body = $conv-&gt;process_chunk($body);\n}\n</code></pre>\n\n<p>But with the code above the lines often lose the appropriate spacing on some email clients.</p>\n\n<p>Is there a way in <code>HTML::TextToHTML</code> to preserve the width of rows and their alignment?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 8787346, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/22dff1f5bc05a7c37b74e45cf7ee25a7?s=128&d=identicon&r=PG&f=1", "display_name": "jnorth", "link": "https://stackoverflow.com/users/8787346/jnorth"}, "edited": false, "score": 0, "creation_date": 1512330925, "post_id": 47622446, "comment_id": 82203102, "body": "Wow @jm666.  Getting an error <code>Odd number of elements in hash assignment at .&#47;test.pl line 12. (i.e. grep...) Can&#39;t locate object method &quot;edit_lines&quot; via package &quot;Path::Tiny&quot; at .&#47;test.pl line 13.</code>"}, {"owner": {"reputation": 115, "user_id": 8787346, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/22dff1f5bc05a7c37b74e45cf7ee25a7?s=128&d=identicon&r=PG&f=1", "display_name": "jnorth", "link": "https://stackoverflow.com/users/8787346/jnorth"}, "edited": false, "score": 0, "creation_date": 1512331263, "post_id": 47622446, "comment_id": 82203218, "body": "Thanks though, I will put a bit more effort to see if I can figure out what that error is getting at."}, {"owner": {"reputation": 115, "user_id": 8787346, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/22dff1f5bc05a7c37b74e45cf7ee25a7?s=128&d=identicon&r=PG&f=1", "display_name": "jnorth", "link": "https://stackoverflow.com/users/8787346/jnorth"}, "edited": false, "score": 0, "creation_date": 1512332891, "post_id": 47622446, "comment_id": 82203748, "body": "I don&#39;t think I have it installed :)"}, {"owner": {"reputation": 115, "user_id": 8787346, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/22dff1f5bc05a7c37b74e45cf7ee25a7?s=128&d=identicon&r=PG&f=1", "display_name": "jnorth", "link": "https://stackoverflow.com/users/8787346/jnorth"}, "edited": false, "score": 0, "creation_date": 1512334336, "post_id": 47622446, "comment_id": 82204210, "body": "Thanks @jm666, I&#39;ll work on that and see where I can get."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1512336113, "post_id": 47622446, "comment_id": 82204732, "body": "<code>map { split &#47;\\s+&#47;, s&#47;.*?gene_id\\s*&quot;\\s*(MSTRG\\.\\d+).*ref_gene_id\\s*&quot;\\s*(Gene:\\w+&zwnj;&#8203;)&quot;.*&#47;$1 $2&#47;r }</code> is generally written <code>map { &#47;.*?gene_id\\s*&quot;\\s*(MSTRG\\.\\d+).*ref_gene_id\\s*&quot;\\s*(Gene:\\w+)&zwnj;&#8203;&quot;.*&#47; }</code>. That way there isn&#39;t any need for the <code>grep</code> either."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512336228, "post_id": 47622446, "comment_id": 82204773, "body": "@Borodin Ah yes. The result of the matching operator are the matches itself. Again learned a new thing. Thank you."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512339403, "post_id": 47622446, "comment_id": 82205677, "body": "@jm666: Specifically in list context, <code>m&#47;&#47;</code> returns an empty list if it fails, or the captures in numerical order if it succeeds. If there are no captures then it returns <code>(1)</code>."}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 3, "last_activity_date": 1512336356, "last_edit_date": 1512336356, "creation_date": 1512329849, "answer_id": 47622446, "question_id": 47621574, "link": "https://stackoverflow.com/questions/47621574/search-and-replace-between-two-files-post2/47622446#47622446", "title": "search and replace between two files -post#2", "body": "<p>I would do this somewhat like:</p>\n\n<pre><code>use 5.014;               #needed min 5.014 because the /r modifier\nuse warnings;\nuse Path::Tiny '0.077';  #added the min. req. version\n\nmy $file1='file1.txt';\nmy $file2='file2.txt';\n\nmy %mstmap = map { split /\\s+/, s/.*?gene_id\\s*\"\\s*(MSTRG\\.\\d+).*ref_gene_id\\s*\"\\s*(Gene:\\w+)\".*/$1 $2/r }\n             grep { /ref_gene_id.*Gene:/ } path($file2)-&gt;lines({chomp =&gt; 1});\npath($file1)-&gt;edit_lines( sub { s/^(MSTRG\\.\\d+)/exists($mstmap{$1}) ? $mstmap{$1} : $1/e });\n</code></pre>\n\n<p>for your input files produces</p>\n\n<pre><code>Gene:AT1G64700  MSTRG.5734  509 -4  0   -14 0   0\nMSTRG.19266 MSTRG.19266 842 -4  0   -12 0   0\nGene:AT5G41000 MSTRG.26588 196 5   0   12  0   0\n</code></pre>\n\n<p>It create a hash for the pairs: <code>MSTRG.number</code> => <code>Gene:String</code> (from the <code>file2</code>), and using the <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> module editing fucntion doing the replaces in the <code>file1</code>.</p>\n\n<p>After @Borodin comments the above could be reduced to:</p>\n\n<pre><code>use 5.014;\nuse warnings;\nuse Path::Tiny '0.077';\n\nmy $file1='f1';\nmy $file2='f2';\n\nmy %mstmap = map {\n    /.*?gene_id\\s*\"\\s*(MSTRG\\.\\d+).*ref_gene_id\\s*\"\\s*(Gene:\\w+).*/\n} path($file2)-&gt;lines({chomp =&gt; 1});\npath($file1)-&gt;edit_lines( sub { s/^(MSTRG\\.\\d+)/exists($mstmap{$1}) ? $mstmap{$1} : $1/e });\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 8787346, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/22dff1f5bc05a7c37b74e45cf7ee25a7?s=128&d=identicon&r=PG&f=1", "display_name": "jnorth", "link": "https://stackoverflow.com/users/8787346/jnorth"}, "edited": false, "score": 0, "creation_date": 1512337371, "post_id": 47623352, "comment_id": 82205107, "body": "Thank you @Borodin - this is code at my level obviously.  I am getting the following error that I am unfamiliar with - wondering whether you know what is going on, otherwise I will endeavour to figure it out. &#39;Can&#39;t open &#39;&lt;undef&gt;&#39; for reading: &#39;No such file or directory&#39;`  It is referring to this line of your code <code>open my $fh, &#39;&lt;&#39;, $file2;</code>  I have defined the $files previously so..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 115, "user_id": 8787346, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/22dff1f5bc05a7c37b74e45cf7ee25a7?s=128&d=identicon&r=PG&f=1", "display_name": "jnorth", "link": "https://stackoverflow.com/users/8787346/jnorth"}, "edited": false, "score": 0, "creation_date": 1512339496, "post_id": 47623352, "comment_id": 82205708, "body": "@jnorth: As it stands it uses the same scheme as your own code: the paths to <i>file1</i> and <i>file2</i> are command-line parameters. I&#39;d guess you have passed no parameters."}, {"owner": {"reputation": 115, "user_id": 8787346, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/22dff1f5bc05a7c37b74e45cf7ee25a7?s=128&d=identicon&r=PG&f=1", "display_name": "jnorth", "link": "https://stackoverflow.com/users/8787346/jnorth"}, "edited": false, "score": 0, "creation_date": 1512340428, "post_id": 47623352, "comment_id": 82205968, "body": "Gee wiz, don&#39;t I feel silly - I took that out after screwing around with the code so much and didn&#39;t think to put it back in...thanks again @Borodin!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 115, "user_id": 8787346, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/22dff1f5bc05a7c37b74e45cf7ee25a7?s=128&d=identicon&r=PG&f=1", "display_name": "jnorth", "link": "https://stackoverflow.com/users/8787346/jnorth"}, "edited": false, "score": 0, "creation_date": 1512363274, "post_id": 47623352, "comment_id": 82211145, "body": "@jnorth: You shouldn&#39;t need to do any more than just copy my code and run it."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1512363303, "last_edit_date": 1512363303, "creation_date": 1512335484, "answer_id": 47623352, "question_id": 47621574, "link": "https://stackoverflow.com/questions/47621574/search-and-replace-between-two-files-post2/47623352#47623352", "title": "search and replace between two files -post#2", "body": "\n\n<p>There's no need to write impregnable code to achieve the result you want</p>\n\n<p>This program reads through <code>$file2</code> building hash <code>%mstrg</code> from all the lines that contain both an <code>MSTRG.</code> and a <code>Gene:</code> string. It then creates a regex in <code>$re</code> that will match any one of the <code>MSTR.</code> strings found</p>\n\n<p><code>$file1</code> is opened, and that regex is used to replace any of the hash keys with the corresponding hash value it appears at the start of the line. The line is then printed</p>\n\n<p>It isn't clear whether the first two fields of <code>file1.txt</code> are always the same, but I've opted to alter only the first field</p>\n\n<p>I've used the <code>autodie</code> pragma to avoid having to explicitly check for success of any file IO operations</p>\n\n<p>The program prints the output to STDOUT, so you can redirect it wherever you like on the command line</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse autodie;\n\nmy ( $file1, $file2 ) = @ARGV;\n\nmy %mstrg;\n\n{\n    open my $fh, '&lt;', $file2;\n\n    while ( &lt;$fh&gt; ) {\n        $mstrg{$1} = $2 if /\"(MSTRG.\\d+)\".*\"(Gene:\\w+)\"/;\n    }\n}\n\nmy $re = join '|', sort { length $b &lt;=&gt; length $a } keys %mstrg;\n\nopen my $fh, '&lt;', $file1;\n\nwhile ( &lt;$fh&gt; ) {\n    s/^($re)\\b/$mstrg{$1}/;\n    print;  \n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Gene:AT1G64700  MSTRG.5734  509 -4  0   -14 0   0\nMSTRG.19266 MSTRG.19266 842 -4  0   -12 0   0\nGene:AT5G41000 MSTRG.26588 196 5   0   12  0   0\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 8787346, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/22dff1f5bc05a7c37b74e45cf7ee25a7?s=128&d=identicon&r=PG&f=1", "display_name": "jnorth", "link": "https://stackoverflow.com/users/8787346/jnorth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1512363303, "creation_date": 1512324725, "question_id": 47621574, "link": "https://stackoverflow.com/questions/47621574/search-and-replace-between-two-files-post2", "title": "search and replace between two files -post#2", "body": "<p>I need to replace a variable in one file with information/regex found in another file. For example, I need to grab the first string/variable (that starts with MSTRG) from each row in file1:</p>\n\n<pre><code>MSTRG.5734  MSTRG.5734  509 -4  0   -14 0   0\nMSTRG.19266 MSTRG.19266 842 -4  0   -12 0   0\nMSTRG.26588 MSTRG.26588 196 5   0   12  0   0\n</code></pre>\n\n<p>and use this to search in file2 that will look something like this:</p>\n\n<pre><code>Chr1    StringTie   transcript  24039360    24041181    1000    -   .   gene_id \"MSTRG.5734\"; transcript_id \"MSTRG.5734.1\"; \nChr1    StringTie   transcript  24039810    24040595    1000    -   .   gene_id \"MSTRG.5734\"; transcript_id \"Transcript:AT1G64700.1\"; ref_gene_id \"Gene:AT1G64700\"\nChr1    StringTie   exon    24040560    24041181    1000    -   .   gene_id \"MSTRG.19266\"; transcript_id \"MSTRG.19266.1\"; exon_number \"2\"; \nChr1    StringTie   exon    24040560    24041181    1000    -   .   gene_id \"MSTRG.26588\"; transcript_id \"MSTRG.26588.1\"; exon_number \"2\"; \nChr1    StringTie   transcript  24039810    24040595    1000    -   .   gene_id \"MSTRG.26588\"; transcript_id \"Transcript:AT5G41000.1\"; ref_gene_id \"Gene:AT5G41000\";\n</code></pre>\n\n<p>Ideally when e.g. <code>MSTRG.5734</code> is found on a line in file2 that also contains the string e.g. <code>Gene:AT1G64700</code>, it will grab the information <code>Gene:AT1G64700</code> and replace <code>MSTRG.5734</code> in file1. So, every <code>MSTRG</code> on each row in file1 is unique and it will theoretically match a unique Gene in file2. If it does not match a Gene then I need the original row in file1 to be maintained.</p>\n\n<p>File1 output should then look like:</p>\n\n<pre><code>    Gene:AT1G64700  MSTRG.5734  509 -4  0   -14 0   0\n    MSTRG.19266 MSTRG.19266 842 -4  0   -12 0   0\n    Gene:AT5G41000  MSTRG.26588 196 5   0   12  0   0\n</code></pre>\n\n<p>My current perl code is:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse vars qw($outfile @id $mstrg $gene);\n\nopen(SEARCH, $ARGV[0]) or die \"Couldn't open $ARGV[0]: $!\";\nopen(FILE, $ARGV[1]) or die \"Couldn't open $ARGV[1]: $!\";\n$outfile = \"testout.txt\";\nopen (OUT, \"&gt;$outfile\") || die \"Can't open $outfile for creation: $!\\n\";\n\nmy %mstrg;\n\nwhile (&lt;SEARCH&gt;) {\nchomp;\nif (/^MSTRG/) {\n    chomp $_;\n    @id = split (/\\t/, $_);\n        $mstrg{$id[1]}.=\"$id[1]\";\n }\n}\nwhile (&lt;FILE&gt;) # {@ffn=&lt;FILE&gt;};\n{\nchomp ($gene=$_);\n    if ($mstrg =~ /$gene/) {\n    print OUT \"$id[1]\\t$id[2]\";}\n    else {\n        #print OUT \"$_\\n\";\n            } \nnext;\n        }           \n\nclose FILE;\n</code></pre>\n\n<p>This is unfortunately where I get stuck and not sure how to proceed?\nThanks for any help given, appreciated and apologies for the previous post where I did not include any code to those that saw.</p>\n"}, {"tags": ["perl", "unix"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1512321863, "post_id": 47620887, "comment_id": 82200080, "body": "A Perl program that shells out to delete a file is not a great program! Change <code>`rm $shotfile`</code> to <code>unlink $shotfile or die qq{Unable to delete &quot;$shotfile&quot;: $!}</code> and see what error message you get."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512351425, "post_id": 47620887, "comment_id": 82208555, "body": "Well, what error did you get? <code>rm</code> emits an error message to STDERR on failure."}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 16, "last_activity_date": 1512321938, "creation_date": 1512321938, "answer_id": 47621087, "question_id": 47620887, "link": "https://stackoverflow.com/questions/47620887/unable-to-delete-the-file-from-perl-script/47621087#47621087", "title": "Unable to delete the file from Perl script", "body": "<p>To delete a file, you need write permissions on the directory the file is in. The permissions on the file don't matter.</p>\n\n<p>That said, that's some pretty awful code you've got there. You're shelling out (without escaping anything, hello shell injection!) just to run <code>rm</code> (which you could've run directly without going through the shell), and you're capturing its output for no reason (and you're ignoring whatever was captured anyway). Also, you're not checking for errors (which would be harder in this form as well).</p>\n\n<p>This is all much more complicated than it has to be. Perl has a built-in function for deleting files:</p>\n\n<pre><code>unlink $shotfile or warn \"$0: can't unlink $shotfile: $!\\n\";\n</code></pre>\n\n<p>This will delete the file or warn you about any problems (with <code>$!</code> containing the reason for the failure). Change <code>warn</code> to <code>die</code> if you want the program to abort instead.</p>\n"}], "owner": {"reputation": 145, "user_id": 1135674, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fde122eba5c29a2bf346efb97b2e83b0?s=128&d=identicon&r=PG", "display_name": "HungryProgrammer", "link": "https://stackoverflow.com/users/1135674/hungryprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 617, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512321938, "creation_date": 1512320591, "last_edit_date": 1512321645, "question_id": 47620887, "link": "https://stackoverflow.com/questions/47620887/unable-to-delete-the-file-from-perl-script", "title": "Unable to delete the file from Perl script", "body": "<p>I have an old perl script which was always working , but suddenly something is broken which is not deleting the file.</p>\n\n<pre><code>-rw-r--r--    1 nobody   uworld           6 Dec 03 11:15 shot32.file\n</code></pre>\n\n<p>The command to delete the above file is inside a perl script</p>\n\n<pre><code>`rm $shotfile`;\n</code></pre>\n\n<p>I have checked $shotfile is shot32.file and it is in the right location.\nSo file location and filename is not the problem.</p>\n\n<p>Regarding the permission, the perl script is running under nobody user as well , so what could be other reasons for this to not work . </p>\n\n<p>Appreciate your help. </p>\n"}, {"tags": ["windows", "perl", "wxperl", "wxglade"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1512297697, "post_id": 47615672, "comment_id": 82193301, "body": "You have installed <i>wxPerl</i> wrongly. It cannot have passed its own tests."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1512298314, "post_id": 47615672, "comment_id": 82193443, "body": "Please don&#39;t post images of text on this site."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1512298673, "post_id": 47615672, "comment_id": 82193525, "body": "Are you using <i>ActivePerl</i>, <i>Strawberry Perl</i>, or something else? What versions of <code>Wx</code> and <code>Alien::wxWidgets</code> do you have?"}, {"owner": {"reputation": 15, "user_id": 9037078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a7454ca3d7a7859b80554d926c35930?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/9037078/matt"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512302931, "post_id": 47615672, "comment_id": 82194520, "body": "Apologies but what do you mean I have installed wxPerl wrongly?   I&#39;m using ActivePerl 5.16.3 Build 1604 on Windows 10. I have installed Wx Version 0.9921. I&#39;m using Alien-wxWidgets Version 0.65"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512303652, "post_id": 47615672, "comment_id": 82194682, "body": "Please tag your messages with e.g. <code>@Borodin</code> so that I get a notification when you write to me. The file <code>Wx.dll</code> is part of the <code>Wx</code> installation, but <code>Dynaloader</code> is unable to find it. Does <code>C:\\Perl\\site\\lib\\auto\\Wx\\Wx.dll</code> exist? If so then you have probably installed it using a different account. Did you install using <code>ppm</code>, <code>cpan</code>, or something else?"}, {"owner": {"reputation": 15, "user_id": 9037078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a7454ca3d7a7859b80554d926c35930?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/9037078/matt"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512305159, "post_id": 47615672, "comment_id": 82195037, "body": "@Borodin - I installed using Activeperl&#39;s Perl Package Manager GUI. I am only using one account. Yes, C:\\Perl\\site\\lib\\auto\\Wx\\Wx.dll does exist."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1512321697, "post_id": 47615672, "comment_id": 82200021, "body": "That&#39;s very odd. I just installed the latest <code>Wx</code> using <code>cpan</code>, and there is no <code>Wx.dll</code> at all. It is called <code>Wx.xs.dll</code>, and all the libraries built from XS code have the same naming convention. All I can suggest is to use <code>cpan</code> to reinstall the module. That way you will get a newer version as well."}, {"owner": {"reputation": 15, "user_id": 9037078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a7454ca3d7a7859b80554d926c35930?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/9037078/matt"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512393714, "post_id": 47615672, "comment_id": 82226246, "body": "@Borodin - I installed Wx using cpan Wx command in Windows Shell. Error is now &quot;Can\u2019t locate Wx.pm in .@INC (.@INC contains: C:/Perl/site/lib C:/Perl/lib .).&quot;.   I checked the said path and there is no Wx.pm in either of those 2 folders. So I wonder what has been happening with the Wx installation. Also, Wx folder does not exist in folder C:\\Perl\\site\\lib\\auto  I want to show the result of installation but I don&#39;t know how to attach text file here."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512393855, "post_id": 47615672, "comment_id": 82226329, "body": "What does <code>where perl</code> show?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512393912, "post_id": 47615672, "comment_id": 82226368, "body": "Copy and paste the log into your question; select it and hit Ctrl-K"}, {"owner": {"reputation": 15, "user_id": 9037078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a7454ca3d7a7859b80554d926c35930?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/9037078/matt"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512395469, "post_id": 47615672, "comment_id": 82227400, "body": "@Borodin - Here&#39;s the result of <code>where perl</code>  C:\\Windows\\system32&gt;where perl C:\\Perl\\bin\\perl.exe C:\\strawberry\\perl\\bin\\perl.exe"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512397056, "post_id": 47615672, "comment_id": 82228518, "body": "Then you&#39;re almost certainly installing modules under the wrong perl instance. You need to remove one or the other to be safe, as Windows&#39; behaviour is affected both by file associations and the  <code>PATH</code> environment variable, unlike Linux. You could take a look at <a href=\"http://blogs.perl.org/users/steve_bertrand/2016/07/berrybrew-the-perlbrew-for-windows-rewritten-and-enhanced.html\" rel=\"nofollow noreferrer\"><code>berrybrew</code></a> but I don&#39;t know whether it will work with ActivePerl. I generally prefer Strawberry Perl for Windows as it is less tied to proprietary systems."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9037078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a7454ca3d7a7859b80554d926c35930?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/9037078/matt"}, "edited": false, "score": 0, "creation_date": 1512481434, "post_id": 47635473, "comment_id": 82268283, "body": "I removed Activeperl and used Strawberry Perl. I issued cpan Wx then I got the error below.      Can&#39;t locate Wx/Mini.pm in .@INC (.@INC contains: C:\\Program      Files\\ActiveState Komodo IDE 9\\lib\\support\\dbgp\\perllib      C:/strawberry/perl/site/lib/MSWin32-x86-multi-thread      C:/strawberry/perl/site/lib C:/strawberry/perl/vendor/lib      C:/strawberry/perl/lib .) at C:/strawberry/perl/lib/Wx.pm line 100.     BEGIN failed--compilation aborted at C:/strawberry/perl/lib/Wx.pm line      100.  mini.pm it can be found in C:\\strawberry\\cpan\\build\\Wx-0.9932-zlzpbD\\lib\\Wx"}, {"owner": {"reputation": 15, "user_id": 9037078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a7454ca3d7a7859b80554d926c35930?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/9037078/matt"}, "edited": false, "score": 0, "creation_date": 1512620054, "post_id": 47635473, "comment_id": 82334346, "body": "The Mini.pm does exist so I wonder why I am getting error that it cannot be found."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 15, "user_id": 9037078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a7454ca3d7a7859b80554d926c35930?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/9037078/matt"}, "edited": false, "score": 0, "creation_date": 1512643062, "post_id": 47635473, "comment_id": 82345228, "body": "@Matt: Where did you find <code>Mini.pm</code>? Did the <code>cpan</code> installation succeed?"}, {"owner": {"reputation": 15, "user_id": 9037078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a7454ca3d7a7859b80554d926c35930?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/9037078/matt"}, "edited": false, "score": 0, "creation_date": 1512654602, "post_id": 47635473, "comment_id": 82352726, "body": "It can be found in <code>C:\\strawberry\\perl\\lib\\Wx</code>. Yes, <code>cpan</code> installation succeeded.  The error in <code>use Wx 0.15 qw[:allclasses];</code> is now:      <code>Bareword \u201cXXXDLLSXXX\u201d not allowed while \u201cstrict subs\u201d in use at      C:&#47;strawberry&#47;perl&#47;lib&#47;Wx&#47;Mini.pm line 12.     Compilation failed in require at C:&#47;strawberry&#47;perl&#47;lib&#47;Wx.pm line 100.     BEGIN failed\u2014compilation aborted at C:&#47;strawberry&#47;perl&#47;lib&#47;Wx.pm      line 100.     Compilation failed in require.</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 15, "user_id": 9037078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a7454ca3d7a7859b80554d926c35930?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/9037078/matt"}, "edited": false, "score": 0, "creation_date": 1512655678, "post_id": 47635473, "comment_id": 82353393, "body": "@Matt: That error message means you have skipped an essential part of the installation process. What hacking did you do to get rid of the <code>Can&#39;t locate Wx&#47;Mini.pm</code> error? Presumably you copied it into place from the distribution? No one told you to do that, and it just hampers our efforts to help you get the module installed. What makes you think <code>cpan Wx</code> worked correctly? It&#39;s pretty certain that it didn&#39;t. How did you remove ActivePerl? I think you should open a new question and be more careful about following instructions."}, {"owner": {"reputation": 15, "user_id": 9037078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a7454ca3d7a7859b80554d926c35930?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/9037078/matt"}, "edited": false, "score": 0, "creation_date": 1512657881, "post_id": 47635473, "comment_id": 82354843, "body": "I ran the <code>cpan Wx</code> command again and I did not see any error on the command shell thus I presumed successful installation. I copied Wx.pm from <code>C:\\strawberry\\cpan\\build\\Wx-0.9932-zlzpbD</code> to <code>C:\\strawberry\\perl\\lib</code> because Perl is looking for it. After that, <code>Can&#39;t locate Wx&#47;Mini.pm</code> error appeared. I copied it because I thought that will solve the problem. I uninstalled ActivePerl from Add/Remove Program. Before I open new question, what can you suggest to install Wx correctly?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 15, "user_id": 9037078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a7454ca3d7a7859b80554d926c35930?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/9037078/matt"}, "edited": false, "score": 0, "creation_date": 1512658516, "post_id": 47635473, "comment_id": 82355301, "body": "@Matt: You can&#39;t in general &quot;install&quot; a module by copying files around. That&#39;s why there&#39;s an installation procedure. If you&#39;ve copied <code>Wx.pm</code> as well as <code>Wx&#47;Mini.pm</code> then there&#39;s no way forward. Delete the <code>lib&#47;Wx</code> directory and the <code>lib&#47;Wx.pm</code> file, as well as the <code>C:\\strawberry\\cpan\\build\\Wx-0.9932-zlzpbD</code> directory. Then start <code>cpan</code> to get the <code>cpan&gt;</code> prompt, and type <code>force install Wx</code>. It&#39;s a big module so it takes several minutes. If it&#39;s still not working then post a new question. Don&#39;t hack anything else."}, {"owner": {"reputation": 15, "user_id": 9037078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a7454ca3d7a7859b80554d926c35930?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/9037078/matt"}, "edited": false, "score": 0, "creation_date": 1514814114, "post_id": 47635473, "comment_id": 83071991, "body": "I uninstalled ActiveState Perl. After that, I reinstalled Strawberry Perl and WxWidgets then I installed Wx using cpan. I can now run the Perl code generated from WxGlade. Thanks for your suggestion not to mix up ActiveState and Strawberry Perl."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1512397776, "last_edit_date": 1512397776, "creation_date": 1512397399, "answer_id": 47635473, "question_id": 47615672, "link": "https://stackoverflow.com/questions/47615672/unable-to-run-perl-code-generated-from-wxglade/47635473#47635473", "title": "Unable to run Perl code generated from wxGlade", "body": "\n\n<p>Your log shows</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Make had returned bad status, install seems impossible\n</code></pre>\n\n<p>so the installation failed and you have no <code>Wx</code>. You will also see that the build is trying to use both <code>dmake</code> (Strawberry Perl) and <code>gmake</code> (Active Perl), and it references <em>both</em> perl instances here</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>C:\\STRAWB~1\\c\\bin\\dmake.exe -f Makefile.old clean &gt; NUL\nC:\\Perl\\bin\\perl.exe Makefile.PL \"INSTALLDIRS=site\"\n</code></pre>\n\n<p>so it's getting mightily confused</p>\n\n<p>You need to remove one or the other to be safe, as Windows' behaviour is affected both by file associations and the <code>PATH</code> environment variable, unlike Linux.</p>\n\n<p>You could take a look at <a href=\"http://blogs.perl.org/users/steve_bertrand/2016/07/berrybrew-the-perlbrew-for-windows-rewritten-and-enhanced.html\" rel=\"nofollow noreferrer\"><code>berrybrew</code></a> but I don't know whether it will work with ActivePerl.</p>\n\n<p>I generally prefer Strawberry Perl for Windows as it is less tied to proprietary systems.</p>\n"}], "owner": {"reputation": 15, "user_id": 9037078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a7454ca3d7a7859b80554d926c35930?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/9037078/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "accepted_answer_id": 47635473, "answer_count": 1, "score": 1, "last_activity_date": 1512647974, "creation_date": 1512280245, "last_edit_date": 1512647974, "question_id": 47615672, "link": "https://stackoverflow.com/questions/47615672/unable-to-run-perl-code-generated-from-wxglade", "title": "Unable to run Perl code generated from wxGlade", "body": "<p>I am trying to run Perl code generated using wxGlade but I am receiving this error</p>\n\n<p><img src=\"https://i.imgur.com/K8kKdi8.png\" alt=\"error\">.</p>\n\n<p><strong>In text</strong></p>\n\n<blockquote>\n  <p>Can't load 'C:/Perl/site/lib/auto/Wx/Wx.dll' for module Wx: load_file:The specified module could not be found at C:/Perl/lib/Dynaloader.pm line 191.</p>\n</blockquote>\n\n<p>Ultimately, I want to rearrange widgets using the code generated from wxGlade. I don't have the *.wxg file, I only have the Perl code.</p>\n\n<p>If this is not possible, I want to see the widgets when the Perl code runs then I will re-create the widgets in wxGlade.</p>\n\n<p>I'm using ActivePerl 5.16.3 Build 1604 on Windows 10. I have installed wxPerl Version 0.9921.</p>\n\n<p>Here's the result of <code>where perl</code></p>\n\n<pre><code>C:\\Windows\\system32&gt;where perl\nC:\\Perl\\bin\\perl.exe\nC:\\strawberry\\perl\\bin\\perl.exe\n</code></pre>\n\n<p>Below is the result of the <code>cpan Wx</code> command.</p>\n\n<pre><code>C:\\Windows\\system32&gt;cpan Wx\nSet up gcc environment - 4.4.3\nCPAN: Term::ANSIColor loaded ok (v4.02)\nCPAN: Storable loaded ok (v2.45)\nReading 'C:\\Perl\\cpan\\Metadata'\n  Database was generated on Mon, 04 Dec 2017 06:54:07 GMT\nRunning install for module 'Wx'\nRunning make for M/MD/MDOOTSON/Wx-0.9932.tar.gz\nCPAN: Digest::SHA loaded ok (v5.85)\nCPAN: Compress::Zlib loaded ok (v2.063)\nChecksum for C:\\Perl\\cpan\\sources\\authors\\id\\M\\MD\\MDOOTSON\\Wx-0.9932.tar.gz ok\nCPAN: Archive::Tar loaded ok (v1.96)\nWx-0.9932/\nWx-0.9932/build/\nWx-0.9932/build/Wx/\nWx-0.9932/build/Wx/build/\nWx-0.9932/build/Wx/build/MakeMaker/\nWx-0.9932/build/Wx/build/MakeMaker/Any_OS.pm\nWx-0.9932/build/Wx/build/MakeMaker/Any_wx_config.pm\nWx-0.9932/build/Wx/build/MakeMaker/Core.pm\nWx-0.9932/build/Wx/build/MakeMaker/Hacks.pm\nWx-0.9932/build/Wx/build/MakeMaker/MacOSX_GCC.pm\n\nWx-0.9932/XS/SVGFileDC.xsp\nWx-0.9932/XS/TaskBarIcon.xs\nWx-0.9932/XS/TextAttr.xsp\nWx-0.9932/XS/TextCtrl.xsp\nWx-0.9932/XS/TextCtrlIface.xsp\nWx-0.9932/XS/TextEntryDialog.xs\nWx-0.9932/XS/Timer.xs\nWx-0.9932/XS/ToggleButton.xs\nWx-0.9932/XS/ToolBar.xs\nWx-0.9932/XS/Toolbook.xsp\nWx-0.9932/XS/ToolTip.xs\nWx-0.9932/XS/TopLevelWindow.xsp\nWx-0.9932/XS/Treebook.xsp\nWx-0.9932/XS/TreeCtrl.xs\nWx-0.9932/XS/Utils.xs\nWx-0.9932/XS/Validators.xs\nWx-0.9932/XS/VarHScrollHelper.xsp\nWx-0.9932/XS/VarHVScrollHelper.xsp\nWx-0.9932/XS/Variant.xsp\nWx-0.9932/XS/VarScrollHelperBase.xsp\nWx-0.9932/XS/VarVScrollHelper.xsp\nWx-0.9932/XS/VListBox.xsp\nWx-0.9932/XS/VScrolledWindow.xsp\nWx-0.9932/XS/Wave.xs\nWx-0.9932/XS/Window.xsp\nWx-0.9932/XS/Wizard.xs\nCPAN: File::Temp loaded ok (v0.2304)\nCPAN: Parse::CPAN::Meta loaded ok (v1.4409)\nCPAN: CPAN::Meta loaded ok (v2.132830)\n---- Unsatisfied dependencies detected during ----\n----         MDOOTSON/Wx-0.9932.tar.gz        ----\n    Alien::wxWidgets [build_requires]\nRunning make test\n  Make had some problems, won't test\n  Delayed until after prerequisites\nRunning make install\n  Make had some problems, won't install\n  Delayed until after prerequisites\nRunning install for module 'Alien::wxWidgets'\nRunning make for M/MD/MDOOTSON/Alien-wxWidgets-0.69.tar.gz\nChecksum for C:\\Perl\\cpan\\sources\\authors\\id\\M\\MD\\MDOOTSON\\Alien-wxWidgets-0.69.tar.gz ok\nAlien-wxWidgets-0.69\nAlien-wxWidgets-0.69/Build.PL\nAlien-wxWidgets-0.69/Changes\nAlien-wxWidgets-0.69/MANIFEST\nAlien-wxWidgets-0.69/META.json\n\nAlien-wxWidgets-0.69/patches/wxMac-2.8.10-fontdlg.patch\nAlien-wxWidgets-0.69/patches/wxMac-2.8.3-brokengcc.patch\nAlien-wxWidgets-0.69/patches/wxMac-2.9.0-textctrl.patch\nAlien-wxWidgets-0.69/patches/wxWidgets-2.8.0-magic.patch\nAlien-wxWidgets-0.69/patches/wxWidgets-2.8.10-gsocket.patch\nAlien-wxWidgets-0.69/patches/wxWidgets-2.9.0-magic.patch\nAlien-wxWidgets-0.69/patches/wxWidgets-2.9.0-msgdlg.patch\nAlien-wxWidgets-0.69/patches/wxWidgets-2.9.4-plugin.patch\nAlien-wxWidgets-0.69/patches/wxWidgets-3.0.2-webkit.patch\nAlien-wxWidgets-0.69/script\nAlien-wxWidgets-0.69/script/make_ppm.pl\nAlien-wxWidgets-0.69/t\nAlien-wxWidgets-0.69/t/01_load.t\nAlien-wxWidgets-0.69/t/zy_pod_coverage.t\nAlien-wxWidgets-0.69/t/zz_pod.t\nCPAN: Module::CoreList loaded ok (v3.03)\nCPAN: Module::Build loaded ok (v0.4203)\n\n  CPAN.pm: Building M/MD/MDOOTSON/Alien-wxWidgets-0.69.tar.gz\n    gmake: *** [gcc_mswudll\\coredll_gdiplus.o] Error 1\n    system: gmake -f makefile.gcc all  UNICODE=1 MSLU=0 BUILD=release SHARED=1  DEBUG_INFO=default DEBUG_FLAG=1 LDFLAGS=\" -m32\" CPPFLAGS=\"-m32 -D_USE_32BIT_TIME_T\": 512 at inc/My/Build/Win32.pm line 284.\n    dmake.exe:  Error code 130, while making 'all'\n      MDOOTSON/Alien-wxWidgets-0.69.tar.gz\n      C:\\STRAWB~1\\c\\bin\\dmake.exe -- NOT OK\n    CPAN: YAML::XS loaded ok (v0.41)\n    Running make test\n      Can't test without successful make\n    Running make install\n      Make had returned bad status, install seems impossible\n    Running make for M/MD/MDOOTSON/Wx-0.9932.tar.gz\n    Warning: Prerequisite 'Alien::wxWidgets =&gt; 0.25' for 'MDOOTSON/Wx-0.9932.tar.gz' failed when processing 'MDOOTSON/Alien-wxWidgets-0.69.tar.gz' with 'make =&gt; NO'. Continuing, but chances to succeed are limited.\n    CPAN: Time::HiRes loaded ok (v1.9726)\n\n      CPAN.pm: Building M/MD/MDOOTSON/Wx-0.9932.tar.gz\n\n    Set up gcc environment - 4.4.3\n    Checking if your kit is complete...\n    Looks good\n    Warning: prerequisite Alien::wxWidgets 0.25 not found.\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Socket\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::DND\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::FS\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Grid\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Help\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Html\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::MDI\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Print\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::XRC\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::STC\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::DocView\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Calendar\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::DateTime\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Media\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::RichText\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::AUI\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::DataView\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::PropertyGrid\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Ribbon\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::WebView\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::PerlTest\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::IPC\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Perl::SplashFast\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Perl::Carp\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Perl::TextValidator\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Perl\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx\n    Writing MYMETA.yml and MYMETA.json\n\n    ======================================================================\n    wxWidgets minimum supported version 2.007001 is missing.\n    You will need to re-run Makefile.PL after it is installed.\n    You must install wxWidgets using Alien::wxWidgets.\n    ======================================================================\n\n    ======================================================================\n    For installation instructions and further help please see\n    docs/INSTALL.pod\n\n    For command line switches help use:\n    perl Makefile.PL --help\n    ======================================================================\n\n    Warning: Prerequisite 'Alien::wxWidgets =&gt; 0.25' for 'MDOOTSON/Wx-0.9932.tar.gz' failed when processing 'MDOOTSON/Alien-wxWidgets-0.69.tar.gz' with 'make =&gt; NO'. Continuing, but chances to succeed are limited.\n    Makefile out-of-date with respect to alien_wxwidgets_missing\n    Cleaning current config before rebuilding Makefile...\n    C:\\STRAWB~1\\c\\bin\\dmake.exe -f Makefile.old clean &gt; NUL\n    C:\\Perl\\bin\\perl.exe Makefile.PL \"INSTALLDIRS=site\"\n    Set up gcc environment - 4.4.3\n    Checking if your kit is complete...\n    Looks good\n    Warning: prerequisite Alien::wxWidgets 0.25 not found.\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Socket\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::DND\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::FS\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Grid\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Help\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Html\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::MDI\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Print\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::XRC\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::STC\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::DocView\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Calendar\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::DateTime\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Media\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::RichText\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::AUI\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::DataView\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::PropertyGrid\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Ribbon\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::WebView\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::PerlTest\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::IPC\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Perl::SplashFast\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Perl::Carp\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Perl::TextValidator\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx::Perl\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx\n    Writing MYMETA.yml and MYMETA.json\n    Generating a dmake-style Makefile\n    Writing Makefile for Wx\n    Writing MYMETA.yml and MYMETA.json\n\n    ======================================================================\n    wxWidgets minimum supported version 2.007001 is missing.\n    You will need to re-run Makefile.PL after it is installed.\n    You must install wxWidgets using Alien::wxWidgets.\n    ======================================================================\n\n    ======================================================================\n    For installation instructions and further help please see\n    docs/INSTALL.pod\n\n    For command line switches help use:\n    perl Makefile.PL --help\n    ======================================================================\n\n    ==&gt; Your Makefile has been rebuilt. &lt;==\n    ==&gt; Please rerun the C:\\STRAWB~1\\c\\bin\\dmake.exe command.  &lt;==\n    C:\\Perl\\bin\\perl.exe  -e \"exit 1\" --\n    dmake.exe:  Error code 129, while making 'Makefile'\n      MDOOTSON/Wx-0.9932.tar.gz\n      C:\\STRAWB~1\\c\\bin\\dmake.exe -- NOT OK\n    Running make test\n      Can't test without successful make\n    Running make install\n      Make had returned bad status, install seems impossible\n</code></pre>\n\n<p>I removed <em>ActivePerl</em> and used <em>Strawberry Perl</em>. I issued <code>cpan Wx</code> then I got the error below.</p>\n\n<blockquote>\n  <p>Can't locate Wx/Mini.pm in .@INC (.@INC contains:<br>\n  C:\\Program Files\\ActiveState Komodo IDE 9\\lib\\support\\dbgp\\perllib<br>\n  C:/strawberry/perl/site/lib/MSWin32-x86-multi-thread<br>\n  C:/strawberry/perl/site/lib<br>\n  C:/strawberry/perl/vendor/lib<br>\n  C:/strawberry/perl/lib .)<br>\n  at C:/strawberry/perl/lib/Wx.pm line 100.<br>\n  BEGIN failed--compilation aborted at C:/strawberry/perl/lib/Wx.pm line 100.</p>\n</blockquote>\n\n<p><code>mini.pm</code> can be found in C:\\strawberry\\cpan\\build\\Wx-0.9932-zlzpbD\\lib\\Wx</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 1, "creation_date": 1512266450, "post_id": 47614514, "comment_id": 82187568, "body": "You know how many rows you&#39;re going to have, which means you know how many rows you are from the bottom. And the first number on each row is halfway between the first and second numbers on the row below, so it must be pushed over by <i>half</i> the spacing that you use for numbers on a row. Armed with that... multiply!"}, {"owner": {"reputation": 611, "user_id": 7024991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/515eb7cb8df03bf0475a7edf3b066492?s=128&d=identicon&r=PG&f=1", "display_name": "xyz123", "link": "https://stackoverflow.com/users/7024991/xyz123"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1512266515, "post_id": 47614514, "comment_id": 82187575, "body": "In that case should I not separate each coefficient on the rows with a tab?"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1512266551, "post_id": 47614514, "comment_id": 82187582, "body": "Yes, you&#39;ll run into a problem with tabstops along the way. I would suggest looking into <code>printf</code> for fixed-width output :)"}], "answers": [{"comments": [{"owner": {"reputation": 611, "user_id": 7024991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/515eb7cb8df03bf0475a7edf3b066492?s=128&d=identicon&r=PG&f=1", "display_name": "xyz123", "link": "https://stackoverflow.com/users/7024991/xyz123"}, "edited": false, "score": 0, "creation_date": 1512288210, "post_id": 47615980, "comment_id": 82191136, "body": "Can you explain this a little bit? My mind is totally blown!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 611, "user_id": 7024991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/515eb7cb8df03bf0475a7edf3b066492?s=128&d=identicon&r=PG&f=1", "display_name": "xyz123", "link": "https://stackoverflow.com/users/7024991/xyz123"}, "edited": false, "score": 0, "creation_date": 1512355609, "post_id": 47615980, "comment_id": 82209410, "body": "<code>center(N, STRING)</code> pads the string to N characters, splitting the padding to both sides of the string to center it. So <code>center(5, 1)</code> returns <code>\u2420\u24201\u2420\u2420</code>. This is done for each number, as well as for the row as a whole."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1512283354, "creation_date": 1512283354, "answer_id": 47615980, "question_id": 47614514, "link": "https://stackoverflow.com/questions/47614514/how-can-i-modify-my-program-to-print-out-pascals-triangle/47615980#47615980", "title": "How can I modify my program to print out Pascal&#39;s triangle?", "body": "<p>Left-aligned triangle:</p>\n\n<pre><code>my $MAX_VAL_SIZE = 5;\n\nfor my $n (0...$N) {\n   my @row;\n   for my $k (0..$n) {\n      push @row, C($n, $k);\n   }\n\n   say join \"  \", map sprintf(\"%*d\", $MAX_VAL_SIZE, $_), @row;\n}\n</code></pre>\n\n<p>Centered triangle:</p>\n\n<pre><code>sub center {\n   my ($n, $s) = @_;\n   my $pad_len = $n - length($s);\n   my $pad_len_l = int($pad_len/2);\n   my $pad_len_r = $pad_len - $pad_len_l;\n   return ( \" \" x $pad_len_l ) . $s . ( \" \" x $pad_len_r );\n}\n\nmy $MAX_VAL_SIZE = 5;\n\nfor my $n (0...$N) {\n   my @row;\n   for my $k (0..$n) {\n      push @row, C($n, $k);\n   }\n\n   my $row = join \"  \", map center($MAX_VAL_SIZE, $_), @row;\n   say center(($N+1)*($MAX_VAL_SIZE+2)-2, $row);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 611, "user_id": 7024991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/515eb7cb8df03bf0475a7edf3b066492?s=128&d=identicon&r=PG&f=1", "display_name": "xyz123", "link": "https://stackoverflow.com/users/7024991/xyz123"}, "edited": false, "score": 0, "creation_date": 1512408860, "post_id": 47616031, "comment_id": 82235989, "body": "Thanks for your explanation. Your revisions work great!"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1512683449, "last_edit_date": 1512683449, "creation_date": 1512283856, "answer_id": 47616031, "question_id": 47614514, "link": "https://stackoverflow.com/questions/47614514/how-can-i-modify-my-program-to-print-out-pascals-triangle/47616031#47616031", "title": "How can I modify my program to print out Pascal&#39;s triangle?", "body": "<p>This is tricky since the varying width of numbers matters for layout.</p>\n\n<p>Each row need be indented by half the separation between numbers in the row, suitably multiplied (zero for last row, rows-1 for first) -- that is, if numbers themselves were all of equal width.  </p>\n\n<p>But this isn't the case, except for the first few rows; the numbers take varying amount of space. One remedy is to use fixed-width for numbers and adjust indent and separation using that width.</p>\n\n<p>All rows are computed first so that the maximum width of a number can be found. </p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\nuse List::Util qw(max);\n\nmy $max_row = (shift || 8); \n\nmy @rows = map { pascal_row($_) } 0..$max_row-1;\n\nmy $max_num_wd = max map { length } @{$rows[-1]};\nmy $pad = 1;  # choice (must be non-zero)\nmy $sep     = ' ' x ($max_num_wd + 2*$pad);\nmy $lead_sp = ' ' x ($max_num_wd +   $pad);\n\nfor my $n (0..$#rows) {\n    say $lead_sp x ($max_row-1-$n),\n        join $sep, map { sprintf \"%${max_num_wd}d\", $_ } @{$rows[$n]};\n}\n\nsub pascal_row {\n    my ($row) = @_;\n    return [ map { n_over_k($row, $_) } 0..$row ];\n}\n\nsub n_over_k {\n    my ($n, $k) = @_; \n    return factorial($n) / (factorial($k) * factorial($n - $k));\n}\n\nsub factorial {\n    my ($n) = @_;        \n    my $fact = 1;\n    $fact *= $_ for 2..$n;\n    return $fact;\n}\n</code></pre>\n\n<p>This prints the correct layout.  The <code>$pad</code> is an arbitrary integer for extra space over the maximum number width, for indent and separation; it must be >0 to coordinate them. (Separation needs that space both left and right of the centered number in the row above, thus the factor of 2.)</p>\n\n<hr>\n\n<p><em>Original code, printing as it computes so <code>$max_num_wd</code> is set ahead by hand</em></p>\n\n<pre><code># (includes and subs same as above except for List::Util)    \nmy $max_row = (shift || 8); \n\nmy $max_num_wd = 4; # maximum width of numbers\nmy $pad        = 1; # choice (non-zero)\nmy $sep     = ' ' x ($max_num_wd + 2*$pad);\nmy $lead_sp = ' ' x ($max_num_wd +   $pad);\n\nfor my $n (0..$max_row-1) {\n    my @row = @{ pascal_row($n) };\n    say $lead_sp x ($max_row-1-$n),\n        join $sep, map { sprintf \"%${max_num_wd}d\", $_ } @row;\n}\n</code></pre>\n\n<p>This prints a correct layout with numbers up to 4-digits wide, or  <code>$max_num_wd</code> need be adjusted.</p>\n"}, {"tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": false, "score": 2, "last_activity_date": 1512303141, "last_edit_date": 1512303141, "creation_date": 1512301612, "answer_id": 47618017, "question_id": 47614514, "link": "https://stackoverflow.com/questions/47614514/how-can-i-modify-my-program-to-print-out-pascals-triangle/47618017#47618017", "title": "How can I modify my program to print out Pascal&#39;s triangle?", "body": "<p>Here is another way of doing it:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nsub fact {\n  my $n = shift;\n  return 1 if $n &lt; 1;\n  return $n * fact($n - 1);\n}\n\nsub n_over_k {\n  my $n = shift;\n  my $k = shift;\n  return fact($n) / ( fact($k) * fact($n - $k) );\n}\n\nsub pascal_row {\n  my $n = shift;\n  return map { n_over_k($n - 1, $_) } (0 .. $n - 1);\n}\n\nmy $n = shift || 8;\n\n# $maxw is the first odd width where the biggest number will fit\nmy $max = 0;\nmap { $max = $_ if $_ &gt; $max } pascal_row($n);\nmy $maxw = length('' . $max);\n$maxw += ($maxw + 1) % 2;\n\n# Print the Pascal\u00b4s triangle\nforeach my $i (1..$n) {\n  print ' ' x ( ( $maxw + 1 ) * ($n - $i) / 2 );\n  foreach my $j ( pascal_row($i) ) {\n    printf \"%${maxw}d \", $j;\n  }\n  print \"\\n\";\n}\n</code></pre>\n\n<p>How is it done? Fit each number within the first odd width where the max of the numbers to print will fit. That\u00b4s because numbers are separated with a space and that will make each width even (and so divisible by two for odd-valued triangle rows.) Then use <code>printf</code> to format the numbers. For instance <code>%5d</code> will right align the number within 5 characters. Precede each line except the last with the necessary spaces using <code>' ' x N</code> which generates a string of <code>N</code> spaces.</p>\n\n<p>Pascal's triangle of 8:</p>\n\n<pre><code># pascal.pl 8\n                1\n              1   1\n            1   2   1\n          1   3   3   1\n        1   4   6   4   1\n      1   5  10  10   5   1\n    1   6  15  20  15   6   1\n  1   7  21  35  35  21   7   1\n</code></pre>\n\n<p>Pascal's triangle of 13:</p>\n\n<pre><code># pascal.pl 13\n                          1\n                        1   1\n                      1   2   1\n                    1   3   3   1\n                  1   4   6   4   1\n                1   5  10  10   5   1\n              1   6  15  20  15   6   1\n            1   7  21  35  35  21   7   1\n          1   8  28  56  70  56  28   8   1\n        1   9  36  84 126 126  84  36   9   1\n      1  10  45 120 210 252 210 120  45  10   1\n    1  11  55 165 330 462 462 330 165  55  11   1\n  1  12  66 220 495 792 924 792 495 220  66  12   1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24167, "user_id": 7388477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e42e688ade97076d4fdd1939946e7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Valdi_Bo", "link": "https://stackoverflow.com/users/7388477/valdi-bo"}, "is_accepted": false, "score": 1, "last_activity_date": 1512312892, "last_edit_date": 1512312892, "creation_date": 1512312585, "answer_id": 47619543, "question_id": 47614514, "link": "https://stackoverflow.com/questions/47614514/how-can-i-modify-my-program-to-print-out-pascals-triangle/47619543#47619543", "title": "How can I modify my program to print out Pascal&#39;s triangle?", "body": "<p>You can generate the triangle without any combinatoric formulas.</p>\n\n<p>The reason to do it this way is that this is the most effective method.</p>\n\n<p>The basic idea is to employ the observation, that the value in the next\nrow is the sum of 2 elements located above.</p>\n\n<p>This solution is also a good example of how to work with an array of\n(references to) arrays.</p>\n\n<p>An interesting feature is that the indent is computed from the\n<strong>middle</strong> element in the <strong>last row</strong> (with the greatest value).</p>\n\n<p>To provide pretty look of the triangle, the cell size must be an even number.\nThe \"basic\" indent is the half of this size.\nThe actual indent for each row is this basic size, multiplied by a respective\nnumber, derived from the row index and the total number of rows.</p>\n\n<p>The whole script is given below:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw(say);\nuse POSIX qw(ceil);\n\nmy $rowCnt = 14;        # How many rows\nsay \"Pascal Triangle with $rowCnt rows:\";\n# Rows container, filled with a single row (containing single 1)\nmy @rows = ([ 1 ]);\nmy ($lastRow, $row, $ind);\n# Generate / add further rows\nfor ($ind = 1; $ind &lt; $rowCnt; $ind++) {\n  $lastRow = $rows[$#rows]; # Last row gathered so far\n  push(@rows, getNextRow($lastRow));\n}\n$lastRow = $rows[$#rows];\n# Middle elem. of the last row\nmy $midElem = $$lastRow[($rowCnt - 1) / 2];\n# No of digits + separator, rounded up to even\nmy $elemSize = ceil((length($midElem) + 1) / 2) * 2;\nmy $shf = $elemSize / 2;    # Shift size for a sigle step\n# Print rows\nfor ($ind = 0; $ind &lt; $rowCnt; $ind++) {\n  my $row = $rows[$ind];\n  my $spc = $shf * ($rowCnt - $ind - 1);\n  printRow($spc, $row, $elemSize);\n}\n\nsub getNextRow {    # Create the next row and return the reference to it\n  my $lastRow = $_[0];  # Read param\n  my @row = (1);    # Start the new row from a single 1\n  for (my $i = 0; $i &lt; $#$lastRow; $i++) {\n    push(@row, $$lastRow[$i] + $$lastRow[$i + 1]);\n  }\n  push(@row, 1);    # Add terminating 1\n  return \\@row;     # Result - reference to the created row\n}\n\nsub printRow {      # Print a row of the triangle\n  my ($leadSpc, $row, $elemSize) = @_;  # Read params\n  # Leading spaces and the initial element (always 1)\n  printf(\"%s1\", ' ' x $leadSpc);\n  # Print the rest of the row\n  for (my $i = 1; $i &lt;= $#$row; $i++) {\n    printf(\"%*d\", $elemSize, $$row[$i]);\n  }\n  print(\"\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 611, "user_id": 7024991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/515eb7cb8df03bf0475a7edf3b066492?s=128&d=identicon&r=PG&f=1", "display_name": "xyz123", "link": "https://stackoverflow.com/users/7024991/xyz123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2699, "favorite_count": 2, "accepted_answer_id": 47616031, "answer_count": 4, "score": 3, "last_activity_date": 1512683449, "creation_date": 1512265904, "last_edit_date": 1512266350, "question_id": 47614514, "link": "https://stackoverflow.com/questions/47614514/how-can-i-modify-my-program-to-print-out-pascals-triangle", "title": "How can I modify my program to print out Pascal&#39;s triangle?", "body": "<p>So first of all Pascal's Triangle looks like this: </p>\n\n<p><a href=\"https://i.stack.imgur.com/C93ol.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C93ol.png\" alt=\"Pascal&#39;s Triangle\"></a></p>\n\n<p>The first row that you see is the zero-ith row. </p>\n\n<p>That's nothing unusual \nwhen you are a computer scientist. </p>\n\n<p>Each term in Pascal's triangle can be predicted with a combination with the formula: </p>\n\n<p>C(n, k) = n! / [k! * (n - k)!], where \"n\" is the row and \"k\" is any integer from zero to n.</p>\n\n<p>So thus it follows that Pascal's triangle can be predicted with (n, k) combinations: </p>\n\n<p><a href=\"https://i.stack.imgur.com/nqaiV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nqaiV.png\" alt=\"Pascal&#39;s triangle combinations\"></a></p>\n\n<p>And that's what you are seeing in the figure above. </p>\n\n<p>Pascal's triangle is basically binomial probability: </p>\n\n<p>(H + T)^n # You flip a two sided coin \"n\" times and it lands on \"heads\" or \"tails\" and you collect the frequency of each in a set of coefficients, for n = 3, we get the expansion: </p>\n\n<p>(H + T)^3 = 1(H^3) + 3(H^2)(T) + 3(H)(T^2) + 1(T^3), where those coefficients:\n1, 3, 3, 1 are in row 3 of Pascal's triangle. </p>\n\n<hr>\n\n<p>I defined a factorial (!), and a combination and was able to get the \ncoefficient numbers on any row of Pascal's triangle with some looping Perl code: </p>\n\n<pre><code>use strict;\nuse warnings;\n\n# Note the first row is row 0.\nprint(\"\\nWhich row of Pascal's triangle to display: \");\nmy $row = &lt;STDIN&gt;; # The row that you want to display # This is also n. \nmy $terms = $row + 1; # The number of terms is one more than the row number. \n\nPascal_Row($row); # Print the Pascal numbers for that row. \n\n# Function displays the numbers for a row of Pascal's triangle. \n#######################################################\nsub Pascal_Row\n{\n    my $row = shift; # Row is passed in. \n\n    for(my $k = 0; $k &lt; $row + 1; $k++) # k alternates, but not the row which is n. \n    {\n        print(combination($row, $k), \"\\t\") # Print each row. \n    }\n    print(\"\\n\"); # Print a newline after each time this function is called.\n}\n\n# This computes the factorial of a number.\n###########################################\nsub factorial\n{\n    my $number = shift; # argument. \n    my $factorial_number = 1; # initalize the factorial. \n\n    for(my $i = 1; $i &lt;= $number; $i++)\n    {\n        $factorial_number *= $i; # compute the factorial, by multiplying all terms up to and including number.\n    }\n\n    return $factorial_number; # Return the factorial number. \n}\n\n# Computes a matehmatical combination usually denoted as C(n, k)\n# where n is the row number, and k is each item in a row of Pascal's traingle \nsub combination\n{\n    my($n, $k) = @_; # from input. \n\n    # This is the mathematical formula for a combination. \n    my $combination_number = factorial($n) / (factorial($k) * factorial($n - $k));\n\n    return $combination_number # And returning it. \n}\n</code></pre>\n\n<p>If I run the code and ask for row 8 of Pascal's triangle I get this: </p>\n\n<pre><code>Which row of Pascal's triangle to display: 8\n1       8       28      56      70      56      28      8       1\n</code></pre>\n\n<p>That's entirely true for row 8 of Pascal's triangle. If I were to loop this from row 0 to the row 8 of Pascal's triangle I would get all correct rows of Pascal's triangle, but it wouldn't look like a triangle (it would look more like a box), so how could I modify my code to adjust the indenting. </p>\n\n<p>How do I decide how much to indent the first row if I want 8 rows of Pascal's triangle displayed? How can I make a \"triangle\"? </p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 7830731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a20b66031a6a73d57db63fa11f1e73a4?s=128&d=identicon&r=PG&f=1", "display_name": "PExplorer", "link": "https://stackoverflow.com/users/7830731/pexplorer"}, "edited": false, "score": 0, "creation_date": 1512265989, "post_id": 47614458, "comment_id": 82187494, "body": "Thank you Bohemian!. I just learned little bit more about greedy vs non-greedy quantifiers. Works like a charm now. Below link explains well : <a href=\"https://stackoverflow.com/questions/3075130/what-is-the-difference-between-and-regular-expressions\" title=\"what is the difference between and regular expressions\">stackoverflow.com/questions/3075130/&hellip;</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512302153, "post_id": 47614458, "comment_id": 82194322, "body": "<i>Reluctant</i> is not the opposite of <i>greedy</i>."}, {"owner": {"reputation": 362892, "user_id": 256196, "user_type": "moderator", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d84b558fd67be10d5a718fb94231909d?s=128&d=identicon&r=PG", "display_name": "Bohemian", "link": "https://stackoverflow.com/users/256196/bohemian"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512303702, "post_id": 47614458, "comment_id": 82194696, "body": "@Borodin what&#39;s your point? (btw I did not state that reluctant is the opposite of greedy, although they are more or less &quot;opposite&quot;)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512303987, "post_id": 47614458, "comment_id": 82194753, "body": "@Bohemian: I&#39;m saying that <i>reluctant</i> is a poor choice to describe a <i>non-greedy</i> quantifier (as is <i>lazy</i>) and as far as I know it&#39;s not commonly used outside Oracle&#39;s Java documentation. If I had my way I&#39;d choose <i>frugal</i>, but that&#39;s even less popular."}], "tags": [], "owner": {"reputation": 362892, "user_id": 256196, "user_type": "moderator", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d84b558fd67be10d5a718fb94231909d?s=128&d=identicon&r=PG", "display_name": "Bohemian", "link": "https://stackoverflow.com/users/256196/bohemian"}, "is_accepted": false, "score": 4, "last_activity_date": 1512304793, "last_edit_date": 1512304793, "creation_date": 1512265182, "answer_id": 47614458, "question_id": 47614391, "link": "https://stackoverflow.com/questions/47614391/extract-delimited-substrings-from-a-string/47614458#47614458", "title": "Extract delimited substrings from a string", "body": "<p>You are using a <em>greedy</em> match <code>.*</code>, which consumes as much input as possible while still matching, you're matching the <em>first</em> <code>[[</code> to the <em>last</em> <code>]]</code>.</p>\n\n<p>Instead, use a <em>reluctant</em> match <code>.*?</code>, which matches as <em>little</em> as possible while still matching:</p>\n\n<pre><code>my ( $match) = $source =~ /PayRate=\\[\\[(.*?)\\]\\]/;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": 0, "last_activity_date": 1512305490, "creation_date": 1512305490, "answer_id": 47618539, "question_id": 47614391, "link": "https://stackoverflow.com/questions/47614391/extract-delimited-substrings-from-a-string/47618539#47618539", "title": "Extract delimited substrings from a string", "body": "<p>Use the <a href=\"http://perldoc.perl.org/perlre.html#Modifiers\" rel=\"nofollow noreferrer\">/x modifier</a> on match (and substitute) so you can use white space for easier reading and comments to tell what is going on. Limit the patterns by matching everything not in the pattern. <code>[^\\]]*?</code> is better than <code>.*?</code>.</p>\n\n<pre><code>my ( $match ) = $line =~ m{\n    Payrate \\= \\[\\[  # select which part\n    ( [^\\]]*? )      # capture anything between square brackets\n}x;\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 7830731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a20b66031a6a73d57db63fa11f1e73a4?s=128&d=identicon&r=PG&f=1", "display_name": "PExplorer", "link": "https://stackoverflow.com/users/7830731/pexplorer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1512516321, "creation_date": 1512264322, "last_edit_date": 1512516321, "question_id": 47614391, "link": "https://stackoverflow.com/questions/47614391/extract-delimited-substrings-from-a-string", "title": "Extract delimited substrings from a string", "body": "<p>I have a string that looks like this </p>\n\n<pre><code>my $source = \"PayRate=[[sDate=05Jul2017,Rate=0.05,eDate=06Sep2017]],item1,item2,ReceiveRate=[[sDate=05Sep2017,Rate=0.06]],item3\" ;\n</code></pre>\n\n<p>I want to use capture groups to extract only the <code>PayRate</code> values contained within the first <code>[[...]]</code> block.  </p>\n\n<pre><code>$1 = \"Date=05Jul2017,Rate=0.05,EDate=06Sep2017\"\n</code></pre>\n\n<p>I tried this but it returns the entire string. </p>\n\n<pre><code>my $match =~ m/PayRate=\\[\\[(.*)\\]\\],/ ;\n</code></pre>\n\n<p>It is clear that I have to put specific patterns for the series of <code>{(.*)=(.*)}</code> blocks inside. Need expert advice.</p>\n"}, {"tags": ["perl", "bioinformatics", "protein-database"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1512305164, "post_id": 47614321, "comment_id": 82195039, "body": "It&#39;s becoming unsurprisingly popular to &quot;do programming&quot; by copying some likely-looking existing code from somewhere and posting it on Stack Overflow asking for it to be edited to perform a new function. While you may get the attention of subscribers with little experience who want to add to their points, this is more than a little cheeky. The majority of people who answer questions here are industry professionals who have better things to do with their time than answer &quot;please write my code for me&quot; requests. They are giving their time for free and should be treated with respect."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512305704, "post_id": 47614321, "comment_id": 82195189, "body": "@Borodin: I really don&#39;t know what seems to be a problem. Previously, I had to download  PDB files so I searched on the Internet how to do it. Luckily, there was already similar script for it. I have used it and modified it. Now I have to do similar task but I have BindingDB IDs. I was trying to find a way how to do it for few days and I&#39;ve been also searching on the Internet if somebody did something similar, but couldn&#39;t find it . So, obviously I have a question that I don&#39;t know how to answer after few days searching and finding the way so I asked here. Did I do something wrong?"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512305947, "post_id": 47614321, "comment_id": 82195255, "body": "My plan is really not  drawing attention that I am a good programmer or something like this. In fact, I am a biologist. In addition, I am not asking somebody to do this for me. I am just asking for some hint of more experienced programmers."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1512306346, "post_id": 47614321, "comment_id": 82195368, "body": "Suppose you had found a design on the internet that described how to build a bird table. You built it and it&#39;s fine. Now you want a conservatory as well. Would you show an international gathering of professional architects your plan for a bird table and ask them for hints on how to make it into a design for a conservatory?"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512308952, "post_id": 47614321, "comment_id": 82196087, "body": "I think this is not good comparison at all. Than this website is full of things like this. I am not looking for someone to do it for me, I am trying to find a way how to do it and by hint I meant if somebody can give me a direction where to search for it. I think You are frustrated for some other reason man. Look at all the questions that are posted on this website and tell me how it differs from mine. I am not expecting anyone to put an effort to do this. there are maybe some people that had same problem and did it before., so maybe they can help me."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512309037, "post_id": 47614321, "comment_id": 82196106, "body": "+ nobody asked similar question before and probably someone else as can make a use of it in the future as well."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1512318782, "post_id": 47614321, "comment_id": 82199041, "body": "I think what bothers Borodin is that you are really not asking a programming question. Your program already downloads things from the internet. Your problem is that you don&#39;t know where exactly to download what you want. But we can&#39;t help you with that. Most of us are professional software developers, like Borodin said. While the task you want to perform is as trivial to us as it is for you to tell an animal from a plant, you cannot do that if you are given neither. What you need is to understand your data source. That website you are talking about. We can&#39;t do that for you."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512319146, "post_id": 47614321, "comment_id": 82199150, "body": "I suggest you take a look at <a href=\"https://stackoverflow.com/help/how-to-ask\"><i>How do I ask a good question?</i></a> and consider how your question could be improved."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1512319515, "post_id": 47614321, "comment_id": 82199279, "body": "<i>&quot;I think this is not good comparison at all&quot;</i> I think it&#39;s an excellent comparison. You got a program from somewhere and fiddled with it until it did something. You have posted it here for the attention of all of us, asking how to write a completely different program. The code you already have is of very little use, and you may as well have left it out. It seems that you want us to research the BindingDB API and tell you what you should write. If you can&#39;t at least try <i>something</i> then it seems unreasonable for us to work for you."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1512348009, "post_id": 47614321, "comment_id": 82207778, "body": "@simbaque: I don&#39;t agree. I think my question is exactly programming question and that it is pretty clear what I am asking. I don&#39;t know where did You see that I ask &quot;where&quot; to download the data. I think what bothers Borodin is that he as a professional programmer cannot understand this question since he has no idea what BindingDB is. I think that&#39;s what gets him frustrated. Nevermind, thank You alot. I&#39;ll find solution on my own and than I&#39;ll post it here, because I am sure that some other people may make use of it, since many biologist are working with this database."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1512366163, "post_id": 47614321, "comment_id": 82212032, "body": "@sergio: It isn&#39;t a great sign that you&#39;ve been given the advice of two Perl experts, both with far more experience on this site than yourself, and you&#39;re arrogant enough to think you know better than both of us. Finding out how to get the information you need from a web site is <i>not</i> a programming question."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1512371153, "post_id": 47614321, "comment_id": 82213779, "body": "Ok. Thanks. Its good that you professionals stick together. Bye bye"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512394132, "post_id": 47614321, "comment_id": 82226531, "body": "@sergio: You have asked four questions in the fifteen days you have been a member. Not one of those questions has received a net positive number of votes. Do you really believe that we&#39;re all conspiring against you, or do you think that maybe the problem really lies with you? <b>simbabque</b> and I have done our very best to help and educate you, but you are simply refusing to learn or even accept that you may be at fault. I can&#39;t imagine what sort of assistance would be acceptable to you."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1512396494, "post_id": 47614321, "comment_id": 82228156, "body": "That&#39;s totally wrong. First of all, of course I know that problem lies in me and that lack of my programming experience and knowledge is the issue. As I already told you, I am not expecting from somebody to solve this question for me, but just to give me an hint where to look how to download data from the &quot;sublink&quot; of BindingDB website. Only way I can do this is trough programming and that is why I consider this question as a programming question. That is all I asked."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1512396499, "post_id": 47614321, "comment_id": 82228159, "body": "Secondly, You appeared to be very frustrated for some reason. If you had given me the comment as @simbaque did at first, I will write this comment way before, but you kept to be arrogant for some reason so I followed your example."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1512307366, "post_id": 47618604, "comment_id": 82195655, "body": "No, this is not what I am looking for. This database only provides You with the binding affinity measures for different kind of molecules. The input for PDBBind are PDB IDs that I am actually looking for. I have only BindingDB IDs and Binding data base (DB) is focusing on the interaction between proteins and drug-like small molecules. When I enter Binding DB ID that I have it gives me different ligands that bind to this protein (each protein has 1 BinDB ID). Inside each ligand there is a PDB &#39;sublink&#39; that opens me all PDB structures of this protein that have co-crystalized ligand."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1512307561, "post_id": 47618604, "comment_id": 82195704, "body": "These PDB structures for each ligand and for each BindingDB ID is what I am looking for. I can do it manually but I have nearly 500 IDs."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1512305903, "creation_date": 1512305903, "answer_id": 47618604, "question_id": 47614321, "link": "https://stackoverflow.com/questions/47614321/downloading-pdb-files-from-bindingdb/47618604#47618604", "title": "Downloading PDB files from BindingDB", "body": "<p>I assume you want to access the <a href=\"http://www.pdbbind.org.cn/\" rel=\"nofollow noreferrer\"><code>PDBBind</code></a> database?</p>\n\n<p>The welcome page says this</p>\n\n<blockquote>\n  <p><strong>Accessibility</strong>. The basic information of each complex in PDBbind is completely open for access (see the [<a href=\"http://www.pdbbind.org.cn/browse.asp\" rel=\"nofollow noreferrer\">BROWSE</a>] page). Users are required to register under a license agreement in order to utilize the searching functions provided on this web site or to download the contents of PDBbind in bulk. Registration is free of charge to all academic and industrial users. Please go to the [<a href=\"http://www.pdbbind.org.cn/enroll.asp\" rel=\"nofollow noreferrer\">REGISTER</a>] page and follow the instructions to complete registration. </p>\n</blockquote>\n\n<p>I am no biochemist, but I suspect that you will need to register as the <em>browse</em> facilities are minimal. I can't help you to use the <em>search</em> facilities as I don't understand what it is that you need.</p>\n"}], "owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1512305903, "creation_date": 1512263659, "last_edit_date": 1512302726, "question_id": 47614321, "link": "https://stackoverflow.com/questions/47614321/downloading-pdb-files-from-bindingdb", "title": "Downloading PDB files from BindingDB", "body": "<p>I am trying to find a way to download PDB files of proteins using BindingDB. I have a file with different BindingDB IDs, and I want to download PDB files for every ligand that binds to the protein for each ID.</p>\n\n<p>I was using a script to download specific PDB files from RSCB: PDB. Now I have to do the same, but I have BindingDB IDs.</p>\n\n<p>The previous script that I used looks like this:</p>\n\n<pre><code>#! usr/bin/perl -w\n\nopen (NDX, 'file.txt');\n@ndx_ar = &lt;NDX&gt;;\nclose NDX;\n\n$ndx_sz = scalar @ndx_ar;\n\nfor ( $c = 0; $c &lt; $ndx_sz; ++$c ) {\n\n    chomp $ndx_ar[$c];\n\n    if ( $ndx_ar[$c] =~ /pdb/ ) {\n        $ndx_ar[$c] =~ s/.pdb//;\n        `wget 'http://www.pdb.org/pdb/download/downloadFile.do?fileFormat=pdb&amp;compression=NO&amp;structureId=$ndx_ar[$c]' -O $ndx_ar[$c].pdb`;\n    }\n    else {\n        `wget 'http://www.pdb.org/pdb/download/downloadFile.do?fileFormat=pdb&amp;compression=NO&amp;structureId=$ndx_ar[$c]' -O $ndx_ar[$c].pdb`;\n    }\n}\n\nexit;\n</code></pre>\n"}, {"tags": ["perl", "syntax"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512248384, "post_id": 47612500, "comment_id": 82183281, "body": "Possible dupe: <a href=\"https://stackoverflow.com/q/1915616/5830574\">stackoverflow.com/q/1915616/5830574</a>"}, {"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512248683, "post_id": 47612500, "comment_id": 82183377, "body": "@PerlDuck: I saw that thread, but I don&#39;t see the answer to my question in it."}], "answers": [{"comments": [{"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "edited": false, "score": 1, "creation_date": 1512249367, "post_id": 47612586, "comment_id": 82183604, "body": "Your answer jogged my memory.  What I was looking for was simply the expression <code>*{$::{&#39;foo&#39;}}{CODE}(1,2,3)</code>.  Thanks!"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1512249622, "post_id": 47612586, "comment_id": 82183676, "body": "@ikegami No, perl optimizes the case of a simple sub <code>foo</code> if no other slots (such as <code>$foo</code> or <code>@foo</code>) exist. It&#39;ll store a coderef directly in the symbol table."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1512249765, "post_id": 47612586, "comment_id": 82183726, "body": "The other interesting case is constants: <code>perl -wE &#39;use constant foo =&gt; 42; say $::{foo}&#39;</code> - <code>SCALAR(0x3a9808)</code>. Not a mess, just standard Perl behavior."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1512284882, "post_id": 47612586, "comment_id": 82190475, "body": "@ikegami Yeah, the optimization is broken in non-<code>main</code> packages, but it&#39;s currently being fixed in blead (and breaking broken modules elsewhere)."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1512250736, "last_edit_date": 1512250736, "creation_date": 1512248686, "answer_id": 47612586, "question_id": 47612500, "link": "https://stackoverflow.com/questions/47612500/how-to-access-a-sub-through-symbol-table-for-main-and-name-of-sub-in-a-scalar/47612586#47612586", "title": "How to access a sub through symbol table for main:: and name of sub in a scalar variable", "body": "<p>I'd simply use a symbolic reference.</p>\n\n<pre><code>my $sub = \\&amp;$qualified_sub_name;    # \\&amp;$symbol is except from strict 'refs'.\n\n$sub-&gt;()\n</code></pre>\n\n<p>But you requested that we avoid using symbolic reference. That's way too complex. (It's also might not handle weird but legit  misuse of colons.)</p>\n\n<pre><code>my $pkg = \\%::;\nmy $sub_name = $qualified_sub_name;\n$pkg = $pkg-&gt;{$1} while $sub_name =~ s/^(.*?::)//sg;\nmy $sub = $pkg-&gt;{$sub_name};\n$sub = *{ $pkg-&gt;{$sub_name} }{CODE}\n   if ref(\\$sub) eq 'GLOB';  # Skip if glob optimized away.\n\n$sub-&gt;()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1512249227, "post_id": 47612664, "comment_id": 82183550, "body": "This may return unexpected results if <code>$sub_name</code> is e.g. <code>&quot;isa&quot;</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512249994, "post_id": 47612664, "comment_id": 82183785, "body": "The OP asked how to perform a sub call, not a method call (which you did wrong anyway!!). Your approach can lead to the wrong sub being called."}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1512250350, "post_id": 47612664, "comment_id": 82183877, "body": "ikegami: <code>$coderef-&gt;()</code> is a sub call, not a method call."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512250409, "post_id": 47612664, "comment_id": 82183895, "body": "Yes, but your code is not the same as <code>main::foo()</code>, the sub call the OP requested. You partially implemented a method call instead."}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1512251917, "post_id": 47612664, "comment_id": 82184289, "body": "I agree that it&#39;s not the same in all circumstances, but if the subname is just <code>foo</code>, and <code>main</code> does not inherit from another package that implements <code>foo</code>, then it&#39;s just the same as <code>main::foo()</code>"}, {"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1512251980, "post_id": 47612664, "comment_id": 82184310, "body": "@ikegami: Even though I was indeed asking for <code>*{$::{foo}}{CODE}</code>, AFAICT, <code>main-&gt;can(&#39;foo&#39;)</code> yields exactly the same entity, so I don&#39;t understand your objection."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "edited": false, "score": 1, "creation_date": 1512252103, "post_id": 47612664, "comment_id": 82184336, "body": "@kjo, Quite the contrary, and as I already said, it does NOT always yield the same result. <code>can</code> performs a method search."}], "tags": [], "owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "is_accepted": false, "score": 1, "last_activity_date": 1512250866, "last_edit_date": 1512250866, "creation_date": 1512249173, "answer_id": 47612664, "question_id": 47612500, "link": "https://stackoverflow.com/questions/47612500/how-to-access-a-sub-through-symbol-table-for-main-and-name-of-sub-in-a-scalar/47612664#47612664", "title": "How to access a sub through symbol table for main:: and name of sub in a scalar variable", "body": "<p>You can use <a href=\"http://perldoc.perl.org/UNIVERSAL.html\" rel=\"nofollow noreferrer\">can</a>:</p>\n\n<pre><code>my $sub_name = 'foo';\nmy $coderef = main-&gt;can($sub_name);\n$coderef-&gt;(@args);\n</code></pre>\n\n<p>As others have mentioned, you should note that this can return also methods like \"can\" or \"isa\".\nAlso, if <code>$sub_name</code> contains <code>Some::Module::subname</code>, this will also be called.</p>\n\n<p>If you're not sure what's in <code>$sub_name</code>, you probably want a different approach.\nUse this only if you have control over <code>$sub_name</code> and it can contain only expected values. (I assumed this, that's why I wrote this answer.)</p>\n"}], "owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 1, "accepted_answer_id": 47612586, "answer_count": 2, "score": 2, "last_activity_date": 1512307649, "creation_date": 1512248107, "last_edit_date": 1512307649, "question_id": 47612500, "link": "https://stackoverflow.com/questions/47612500/how-to-access-a-sub-through-symbol-table-for-main-and-name-of-sub-in-a-scalar", "title": "How to access a sub through symbol table for main:: and name of sub in a scalar variable", "body": "<p>Suppose I have a function <code>foo</code> (or <code>::foo</code>, or <code>main::foo</code> if you prefer), and I define</p>\n\n<pre><code>use strict;\nmy $sub_name = 'foo';\n</code></pre>\n\n<p>I want to invoke <code>foo</code> indirectly, as \"the function whose name is stored in <code>$sub_name</code>\".  (For the sake of this example, assume that the invocation should pass the list <code>1, 2, 3</code> as arguments.)</p>\n\n<p>I know that there's a way to do this by working with the symbol table for <code>main::</code> directly, treating it like a hash-like data structure.</p>\n\n<p>This symbol-table incantation is what I'm looking for.</p>\n\n<p>I've done this sort of thing many times before, but I have not programmed Perl in many years, and I no longer remember the incantation.</p>\n\n<p>(I'd prefer to do this without having to resort to <code>no strict</code>, but no biggie if that's not possible.)</p>\n"}, {"tags": ["bash", "perl", "awk", "sed", "grep"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512248105, "post_id": 47612102, "comment_id": 82183175, "body": "Are the numbers 153-156 part of the input file? Or did you just show them here for illustration?"}, {"owner": {"reputation": 2283, "user_id": 1434322, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2fea81c5018fd656a4ae88d4eefeac45?s=128&d=identicon&r=PG&f=1", "display_name": "sirvon", "link": "https://stackoverflow.com/users/1434322/sirvon"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512248440, "post_id": 47612102, "comment_id": 82183295, "body": "was just showing them for illustration"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1512263593, "post_id": 47612102, "comment_id": 82187021, "body": "Do you need to replace strictly lines 153..156, or the code that you show (which may or may not be on those lines)?"}, {"owner": {"reputation": 2283, "user_id": 1434322, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2fea81c5018fd656a4ae88d4eefeac45?s=128&d=identicon&r=PG&f=1", "display_name": "sirvon", "link": "https://stackoverflow.com/users/1434322/sirvon"}, "edited": false, "score": 0, "creation_date": 1512330881, "post_id": 47612102, "comment_id": 82203089, "body": "replace what&#39;s in 153-156 with the 2nd snippet of code, which will take up more than 3 lines."}], "answers": [{"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 1, "last_activity_date": 1512246816, "creation_date": 1512246816, "answer_id": 47612300, "question_id": 47612102, "link": "https://stackoverflow.com/questions/47612102/how-to-search-and-replace-multiple-lines-with-multiple-lines/47612300#47612300", "title": "How to search and replace multiple lines with multiple lines", "body": "<p><code>sed</code> is probably the best tool for this,</p>\n\n<p>assuming your replacement text is in file replace.txt</p>\n\n<pre><code>$ sed '153,156{153{r replace.txt\n                  }; d}' file\n</code></pre>\n\n<p>might be only working for GNU <code>sed</code></p>\n"}, {"tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 2, "last_activity_date": 1512247763, "creation_date": 1512247763, "answer_id": 47612455, "question_id": 47612102, "link": "https://stackoverflow.com/questions/47612102/how-to-search-and-replace-multiple-lines-with-multiple-lines/47612455#47612455", "title": "How to search and replace multiple lines with multiple lines", "body": "<p>If you haven't GNU-sed for @karafka's answer and just want change lines at exact line-numbers, you could use the <code>ed</code> too.</p>\n\n<pre><code>ed -s file &lt;&lt;'EOF'\n153,156c\n        let view:String.UTF8View = string.utf8\n\n        if let from = range.lowerBound.samePosition(in: view),\n           let to = range.upperBound.samePosition(in: view) {\n            offset.pointee += Int32(string[string.startIndex..&lt;range.lowerBound].utf8.count)\n            length.pointee = Int32(view.distance(from: from, to: to))\n            return token\n        } else {\n            return nil\n        }\n.\nw\nq\nEOF\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1512301939, "last_edit_date": 1512301939, "creation_date": 1512261174, "answer_id": 47614059, "question_id": 47612102, "link": "https://stackoverflow.com/questions/47612102/how-to-search-and-replace-multiple-lines-with-multiple-lines/47614059#47614059", "title": "How to search and replace multiple lines with multiple lines", "body": "<p>This is a very good case for the application of the <a href=\"https://metacpan.org/pod/Tie::File\" rel=\"nofollow noreferrer\"><code>Tie::File</code> module</a>, which maps an array to the lines of a text file so that any changes you make to the array will be reflected in the disk file. It's a core module, so you shouldn't need to install it.</p>\n\n<p>Here, the <code>tie</code> call maps the array <code>@file</code> to your text file, and \n<code>splice</code> replaces the four lines of text with the replacement contents read from <code>DATA</code>.\nThen <code>untie</code> updates and closes the file.</p>\n\n<p>Note that you must alter <code>myfile.txt</code> to the real path to your input file.</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse Tie::File;\n\ntie my @file, 'Tie::File', 'myfile.txt' or die $!;\n\nsplice @file, 152, 4, &lt;DATA&gt;;\n\nuntie @file;\n\n\n\n__DATA__\n        let view:String.UTF8View = string.utf8\n\n        if let from = range.lowerBound.samePosition(in: view),\n           let to = range.upperBound.samePosition(in: view) {\n            offset.pointee += Int32(string[string.startIndex..&lt;range.lowerBound].utf8.count)\n            length.pointee = Int32(view.distance(from: from, to: to))\n            return token\n        } else {\n            return nil\n        }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4536, "user_id": 3439894, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QGRfR.png?s=128&g=1", "display_name": "user3439894", "link": "https://stackoverflow.com/users/3439894/user3439894"}, "edited": false, "score": 1, "creation_date": 1512273658, "post_id": 47615086, "comment_id": 82188615, "body": "If it&#39;s a one-liner, why isn&#39;t it all on one line."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 4536, "user_id": 3439894, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QGRfR.png?s=128&g=1", "display_name": "user3439894", "link": "https://stackoverflow.com/users/3439894/user3439894"}, "edited": false, "score": 1, "creation_date": 1512273939, "post_id": 47615086, "comment_id": 82188641, "body": "@user3439894 The term &quot;one-liner&quot; stands for something that is feasible to execute directly from the command line; it doesn&#39;t have to be presented in one long line, and it often isn&#39;t (for readability).  Also, modern shells allow multi-line input.  This was written and tested in one (long) line."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 4536, "user_id": 3439894, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QGRfR.png?s=128&g=1", "display_name": "user3439894", "link": "https://stackoverflow.com/users/3439894/user3439894"}, "edited": false, "score": 0, "creation_date": 1512276044, "post_id": 47615086, "comment_id": 82188963, "body": "@user3439894 It is also a useful device to test a crude version of code. If it satisfies then one can write a proper script, with error checks, options, more elaborate processing etc. This is how it&#39;s intended here."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1512274471, "last_edit_date": 1512274471, "creation_date": 1512273276, "answer_id": 47615086, "question_id": 47612102, "link": "https://stackoverflow.com/questions/47612102/how-to-search-and-replace-multiple-lines-with-multiple-lines/47615086#47615086", "title": "How to search and replace multiple lines with multiple lines", "body": "<p>A Perl one-liner, to change lines <code>153..156</code> in <code>file</code> with contents of <code>repl.file</code>, in-place</p>\n\n<pre><code>perl -i -wpe'\n    if   (153..155) { s/.*\\n// }\n    elsif ($.==156) { local $/; open $fh, \"repl.file\"; $_ = &lt;$fh&gt; };    \n' file\n</code></pre>\n\n<p>(Or <code>$_ = path($file_name)-&gt;slurp</code> with <a href=\"http://search.cpan.org/~dagolden/Path-Tiny-0.104/lib/Path/Tiny.pm\" rel=\"nofollow noreferrer\">Path::Tiny</a>.)</p>\n\n<p>This directly translates into a script, either by writing out a new file with changes and moving it over the original (see <a href=\"https://perldoc.perl.org/perlfaq5.html#How-do-I-change,-delete,-or-insert-a-line-in-a-file,-or-append-to-the-beginning-of-a-file?\" rel=\"nofollow noreferrer\">in perlfaq5</a> and SO posts), or perhaps by <a href=\"https://perldoc.perl.org/perlfaq5.html#How-can-I-use-Perl%27s--i-option-from-within-a-program?\" rel=\"nofollow noreferrer\">using <code>-i</code> (<code>$^I</code>)</a> within a script. </p>\n"}, {"comments": [{"owner": {"reputation": 1150, "user_id": 303517, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ZRPrW.jpg?s=128&g=1", "display_name": "Mustafa", "link": "https://stackoverflow.com/users/303517/mustafa"}, "edited": false, "score": 0, "creation_date": 1524687821, "post_id": 47618220, "comment_id": 87077519, "body": "Hw do yo ou do this using variables instead of actual line numbers?"}], "tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": true, "score": 5, "last_activity_date": 1512303895, "last_edit_date": 1512303895, "creation_date": 1512303092, "answer_id": 47618220, "question_id": 47612102, "link": "https://stackoverflow.com/questions/47612102/how-to-search-and-replace-multiple-lines-with-multiple-lines/47618220#47618220", "title": "How to search and replace multiple lines with multiple lines", "body": "<p>This might work for you (GNU sed &amp; Bash):</p>\n\n<pre><code>sed $'153r replacementFile\\n;153,156d' file\n</code></pre>\n\n<p>or for most seds:</p>\n\n<pre><code>sed -e '153r replacementFile' -e '153,156d' file\n</code></pre>\n\n<p>or if you prefer:</p>\n\n<pre><code>sed '153,156c\\        let view:String.UTF8View = string.utf8\\\n    if let from = range.lowerBound.samePosition(in: view),\\\n       let to = range.upperBound.samePosition(in: view) {\\\n        offset.pointee += Int32(string[string.startIndex..&lt;range.lowerBound].utf8.count)\\\n        length.pointee = Int32(view.distance(from: from, to: to))\\\n        return token\\\n    } else {\\\n        return nil\\\n    }' file\n</code></pre>\n\n<p>N.B. The first <code>\\</code> preserves leading space and each line following except the last needs to be appended with <code>\\</code>. The markdown in SO does not format properly when an empty line is represented by a single <code>\\</code> (so I removed the second line of the replacement) but most shells should.</p>\n"}], "owner": {"reputation": 2283, "user_id": 1434322, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2fea81c5018fd656a4ae88d4eefeac45?s=128&d=identicon&r=PG&f=1", "display_name": "sirvon", "link": "https://stackoverflow.com/users/1434322/sirvon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2754, "favorite_count": 0, "accepted_answer_id": 47618220, "answer_count": 5, "score": 7, "last_activity_date": 1512303895, "creation_date": 1512245521, "last_edit_date": 1512260379, "question_id": 47612102, "link": "https://stackoverflow.com/questions/47612102/how-to-search-and-replace-multiple-lines-with-multiple-lines", "title": "How to search and replace multiple lines with multiple lines", "body": "<p>I looked at other answers regarding search and replace, but I just can't understand the patterns.</p>\n\n<p>How can I change this part of a file (line numbers 153 ... 156)</p>\n\n<pre><code>        let view = string.utf8\n        offset.pointee += string.substring(to: range.lowerBound).utf8.count\n        length.pointee = Int32(view.distance(from:range.lowerBound.samePosition(in: view), to:range.upperBound.samePosition(in: view)))\n        return token\n</code></pre>\n\n<p>and replace it with the lines below?</p>\n\n<pre><code>        let view:String.UTF8View = string.utf8\n\n        if let from = range.lowerBound.samePosition(in: view),\n           let to = range.upperBound.samePosition(in: view) {\n            offset.pointee += Int32(string[string.startIndex..&lt;range.lowerBound].utf8.count)\n            length.pointee = Int32(view.distance(from: from, to: to))\n            return token\n        } else {\n            return nil\n        }\n</code></pre>\n"}, {"tags": ["linux", "bash", "shell", "perl"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 5, "creation_date": 1512246668, "post_id": 47612049, "comment_id": 82182699, "body": "Substituting unknown text into shell commands is <i>ridiculously</i> insecure. If your <code>body</code> contains <code>&#39;$(rm -rf ~)&#39;</code> (with literal quotes that ends the ones you started with <code>echo \\&#39;</code>, this could have utterly catastrophic results."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1512246732, "post_id": 47612049, "comment_id": 82182715, "body": "(If <code>$body</code> were expanded by the shell it&#39;d be safe, but that&#39;s not the case in your original code -- it&#39;s expanded by Perl, <i>before</i> the shell is invoked.)"}, {"owner": {"reputation": 368, "user_id": 7407726, "user_type": "registered", "profile_image": "https://graph.facebook.com/1569292659752271/picture?type=large", "display_name": "Brett Holman", "link": "https://stackoverflow.com/users/7407726/brett-holman"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1512276099, "post_id": 47612049, "comment_id": 82188967, "body": "Woah @CharlesDuffy good point.  I didn&#39;t think of that.  I&#39;m perl/bash newbie here still learning the semantics of the language.  I was unaware that you could pass the variable to the shell before expanding it.  Sorry if this is a dumb question, but could help me with the syntax for that?  I just tried searching the internet and didn&#39;t find anything."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1512299753, "post_id": 47612049, "comment_id": 82193765, "body": "Actually this would be another question. You need to escape the <code>$</code> as in <code>system(&quot;echo \\$HOME&quot;);</code>. Then the shell would evaluate <code>$HOME</code> while in <code>system(&quot;echo $HOME&quot;);</code> Perl would evaluate it. But for this to work the <code>$HOME</code> must be known in either the shell or the Perl script."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 2, "creation_date": 1512315288, "post_id": 47612049, "comment_id": 82197839, "body": "As PerlDuck says -- to pass variables for expansion by a shell, put them either as explicit argument-list vector members (and refer to them in the shell script as <code>$1</code>, <code>$2</code>, etc. w/ escaping appropriate to prevent perl from trying to expand them first) or in the environment. But neither of those will work here, since environment variables live in the same limited amount of space used for command-line arguments; tinita&#39;s answer as-edited, feeding content on stdin and avoiding a shell altogether, is the Right Thing."}, {"owner": {"reputation": 368, "user_id": 7407726, "user_type": "registered", "profile_image": "https://graph.facebook.com/1569292659752271/picture?type=large", "display_name": "Brett Holman", "link": "https://stackoverflow.com/users/7407726/brett-holman"}, "edited": false, "score": 0, "creation_date": 1512349809, "post_id": 47612049, "comment_id": 82208225, "body": "Good to know, thank you."}, {"owner": {"reputation": 368, "user_id": 7407726, "user_type": "registered", "profile_image": "https://graph.facebook.com/1569292659752271/picture?type=large", "display_name": "Brett Holman", "link": "https://stackoverflow.com/users/7407726/brett-holman"}, "edited": false, "score": 0, "creation_date": 1522343232, "post_id": 47612049, "comment_id": 86131267, "body": "is there a good reason for the downvote on the question?"}], "answers": [{"comments": [{"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 4, "creation_date": 1512245900, "post_id": 47612111, "comment_id": 82182469, "body": "Better yet, use the list form (<code>open my $pipe, &quot;|-&quot;, &quot;mail&quot;, &quot;-s&quot;, $subject, $destination</code>) when possible to avoid shell involvement entirely."}], "tags": [], "owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "is_accepted": true, "score": 7, "last_activity_date": 1512246086, "last_edit_date": 1512246086, "creation_date": 1512245580, "answer_id": 47612111, "question_id": 47612049, "link": "https://stackoverflow.com/questions/47612049/email-large-amounts-of-text-argument-list-too-long/47612111#47612111", "title": "Email Large Amounts of Text: &quot;Argument list too long&quot;", "body": "<p>You don't need to pipe this via shell. Use perl's open:</p>\n\n<pre><code>open (my $pipe, \"|-\", \"mail\", \"-s\", $subject, $destination) or die \"Could not run mail: $!\";\nprint $pipe $body;\nclose $pipe or die $?;\n</code></pre>\n\n<p>Or try <a href=\"http://p3rl.org/IPC::Run\" rel=\"noreferrer\">http://p3rl.org/IPC::Run</a> or <a href=\"http://p3rl.org/IPC::Cmd\" rel=\"noreferrer\">http://p3rl.org/IPC::Cmd</a> for more control.</p>\n\n<p><a href=\"https://perldoc.perl.org/perlopentut.html\" rel=\"noreferrer\">perldoc perlopentut</a></p>\n\n<p>Edit: Replaced open with list form, as suggested by @chepner++. When you don't need any shell syntax like redirects, this is generally safer.</p>\n"}], "owner": {"reputation": 368, "user_id": 7407726, "user_type": "registered", "profile_image": "https://graph.facebook.com/1569292659752271/picture?type=large", "display_name": "Brett Holman", "link": "https://stackoverflow.com/users/7407726/brett-holman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 513, "favorite_count": 0, "accepted_answer_id": 47612111, "answer_count": 1, "score": -1, "last_activity_date": 1581552963, "creation_date": 1512245207, "last_edit_date": 1581552963, "question_id": 47612049, "link": "https://stackoverflow.com/questions/47612049/email-large-amounts-of-text-argument-list-too-long", "title": "Email Large Amounts of Text: &quot;Argument list too long&quot;", "body": "<p>My question is about sending large amounts of text in email via Gmail.</p>\n\n<p>I'm working on a simple application that needs to be able to do a HTTP GET request, and send the received HTML as text using a gmail account.  I believe that I am using SSMTTP to send the text via gmail, and I used perl's <code>LWP::UserAgent</code> to do the GET request.  When I execute my Perl code, I am getting the following error due to the large amount of text being sent: </p>\n\n<blockquote>\n  <p>Can't exec \"/bin/sh\": Argument list too long</p>\n</blockquote>\n\n<p>My internet searches have found these sources:</p>\n\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/11475221/why-do-i-get-bin-sh-argument-list-too-long-when-passing-quoted-arguments\">Why do I get &quot;/bin/sh: Argument list too long&quot; when passing quoted arguments?</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/11485982/user-bin-awk-argument-list-too-long-in-awk\">/user/bin/awk: Argument list too long in awk</a></p></li>\n<li><p><a href=\"https://www.outlook-apps.com/maximum-email-size/\" rel=\"nofollow noreferrer\">https://www.outlook-apps.com/maximum-email-size/</a></p></li>\n<li><p><a href=\"http://www.linuxjournal.com/article/6060\" rel=\"nofollow noreferrer\">http://www.linuxjournal.com/article/6060</a></p></li>\n</ul>\n\n<p>This gives me a better understanding of the constraints, but it doesn't really solve my issue due to the following reasons:</p>\n\n<ul>\n<li>I cannot recompile the kernel</li>\n<li>I cannot \"break it down into smaller pieces\" using <code>find</code> or my own bash function, etc.  </li>\n</ul>\n\n<p><em>I am trying to get this to work as requested with large amounts of text.</em></p>\n\n<p>Here an excerpt from my Perl code:   </p>\n\n<pre><code>    # Uses ssmtp to send an email\n    sub sendEmail{\n\n     my ($destination, $subject, $body) = @_;\n\n     #say $destination; say $subject;say $body;\n\n     # Create the bash command\n     my $command=\"echo \\'$body\\' | mail -s \\'$subject\\' $destination\";\n\n     say \"\\nExecuting shell command: $command\";\n     my $output = qx($command);\n    }\n</code></pre>\n\n<p>I know that ideally I shouldn't be sending emails with html text.  It's what I've been asked to do, so I'm attempting to do as requested.</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1512243272, "post_id": 47611614, "comment_id": 82181675, "body": "You already got a great answer but may I ask what you expected to be in <code>@array2</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": false, "score": 8, "last_activity_date": 1512242733, "creation_date": 1512242733, "answer_id": 47611656, "question_id": 47611614, "link": "https://stackoverflow.com/questions/47611614/i-dont-understand-the-value-that-push-returns/47611656#47611656", "title": "I don&#39;t understand the value that &quot;push&quot; returns", "body": "<p><a href=\"http://perldoc.perl.org/functions/push.html\" rel=\"noreferrer\"><code>perldoc -f push</code></a> states:</p>\n\n<blockquote>\n  <p>Returns the number of elements in the array following the completed push.</p>\n</blockquote>\n\n<ol>\n<li>Your <code>@_</code> starts with four elements because you invoked your sub with 4 arguments.</li>\n<li>You <code>shift</code> the first element from the <code>@_</code> array. The <code>shift</code> returns the removed element. The <code>@_</code> array now contains 3 elements.</li>\n<li>You <code>push</code> the zero onto the end of the <code>@_</code> array, which contains 4 elements again. The <code>push</code> returns the number of elements, and assigns it to <code>@array2</code>.</li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 6267591, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-0UQHfZLDDbE/AAAAAAAAAAI/AAAAAAAAAAA/nklINEHDAtA/photo.jpg?sz=128", "display_name": "vaibhav saini", "link": "https://stackoverflow.com/users/6267591/vaibhav-saini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512365375, "creation_date": 1512242474, "last_edit_date": 1512245241, "question_id": 47611614, "link": "https://stackoverflow.com/questions/47611614/i-dont-understand-the-value-that-push-returns", "title": "I don&#39;t understand the value that &quot;push&quot; returns", "body": "<pre><code>use strict;\nuse warnings;\n\nsub maximum_value {\n\n    my @array  = @_;\n    my @array1 = shift( @_ );\n    my @array2 = push( @_, 0 );\n\n    print \"@array\\n\";\n    print \"@array1\\n\";\n    print \"@array2\\n\";\n\n    my $i = 0;\n\n    foreach ( @array ) {\n\n        if ( $i &lt; $_ ) {\n            $i = $_;\n        }\n    }\n\n    print \"\\nMax Value is $i\";\n}\n\nmaximum_value( 10, 15, 11, 13 );\n</code></pre>\n\n<p>This is a Perl script. I am passing the values to a subroutine and storing them in <code>@_</code> . Why does <code>@array2</code> evaluate to 4?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512242141, "post_id": 47609214, "comment_id": 82181397, "body": "I&#39;d replace the <code>!m&#47;$bad&#47;</code> with <code>$_ ne $bad</code> to avoid false-positives but besides that this seems the most robust solution."}], "tags": [], "owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "is_accepted": true, "score": 1, "last_activity_date": 1512326916, "last_edit_date": 1592644375, "creation_date": 1512226922, "answer_id": 47609214, "question_id": 47608841, "link": "https://stackoverflow.com/questions/47608841/perl-regular-expression-match-scalar-plus-punctuation/47609214#47609214", "title": "perl regular expression match scalar plus punctuation", "body": "<p>You may be better off without a regex but with list splitting:</p>\n<pre><code>use strict;\nuse warnings;\n\nsub remove_bad {\n    my ($full, $bad) = @_;\n    my @emails = split /\\s*,\\s*/, $full;  # split at comma, allowing for spaces around the comma\n    my @filtered = grep { $_ ne $bad } @emails;\n    return join &quot;,&quot;, @filtered;\n}\n\nprint 'First: ' , remove_bad('me@example.org, you@example.org', 'me@example.org'), &quot;\\n&quot;;\nprint 'Last: ', remove_bad('me@example.org, you@example.org', 'you@example.org'), &quot;\\n&quot;;\nprint 'Middle: ', remove_bad('me@example.org, you@example.org, other@eample.org', 'you@example.org'), &quot;\\n&quot;;\n</code></pre>\n<p>First, <code>split</code> the bad email address list at the comma, creating an array. Filter that using <code>grep</code> to remove the bad address. <code>join</code> the remaining elements back into a string.</p>\n<p>The above code prints:</p>\n<blockquote>\n<p>First: you@example.org</p>\n<p>Last: me@example.org</p>\n<p>Middle: me@example.org,other@eample.org</p>\n</blockquote>\n"}], "owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 47609214, "answer_count": 1, "score": -1, "last_activity_date": 1512326916, "creation_date": 1512224496, "last_edit_date": 1512227522, "question_id": 47608841, "link": "https://stackoverflow.com/questions/47608841/perl-regular-expression-match-scalar-plus-punctuation", "title": "perl regular expression match scalar plus punctuation", "body": "<p>I have scalars (columns in a table) that have one or two email addresses separated by a comma. such as 'Joek@xyznco.com, jrancher@candyco.us' or 'jsmith@wellingent.com,mjones@wellingent.com' for several of these records I need to remove a bad/old email address and the trailing comma (<em>if one exists)</em>.</p>\n\n<p>if jmsith@wellingent is no longer valid how do I remove that address and the trailing comma? </p>\n\n<p>This only removes the address but leaves the comma.</p>\n\n<pre><code>my $general_email = 'jsmith@wellingent.com,mjones@wellingent.com';\nmy $bad_addr = 'jsmith@wellingent.com';\n\n$general_email =~ s/$bad_addr//;\n</code></pre>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["perl", "https", "handshake", "lwp-useragent", "sslv3"], "comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1512228477, "post_id": 47608448, "comment_id": 82177172, "body": "Your code snipet just works and prints the page content without any error. Using: macOS Sierra, (darwin 16.7), LWP::UserAgent: 6.26, Mozilla::CA: 20160104, IO::Socket::SSL: 2.052"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1512231904, "post_id": 47608448, "comment_id": 82178295, "body": "Also had lwp https issues and permanently switched to mojo::useragent. RIP lwp. <code>\\o&#47;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 1271450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cNzcE.jpg?s=128&g=1", "display_name": "Jure Merhar", "link": "https://stackoverflow.com/users/1271450/jure-merhar"}, "edited": false, "score": 0, "creation_date": 1512338735, "post_id": 47611570, "comment_id": 82205484, "body": "Thanks, you&#39;re absolutely right, I have OpenSSL 0.9.8zg. Any tips on how to upgrade it or make perl / python use a newer version?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 31, "user_id": 1271450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cNzcE.jpg?s=128&g=1", "display_name": "Jure Merhar", "link": "https://stackoverflow.com/users/1271450/jure-merhar"}, "edited": false, "score": 0, "creation_date": 1512365815, "post_id": 47611570, "comment_id": 82211930, "body": "@JureMerhar: there are several information online on how to use homebrew to install a new OpenSSL and how to create a Python installation using this OpenSSL. For Perl you only need to rebuild Net::SSLeay using this new OpenSSL instead of rebuilding all of Perl but there are instructions about this online too."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 3, "last_activity_date": 1512242179, "creation_date": 1512242179, "answer_id": 47611570, "question_id": 47608448, "link": "https://stackoverflow.com/questions/47608448/sslv3-alert-handshake-failure-with-lwpuseragent/47611570#47611570", "title": "sslv3 alert handshake failure with LWP::UserAgent", "body": "<blockquote>\n  <p>... alert handshake failure at /System/Library/Perl/Extras/5.18/LWP/Protocol/http.pm line 51.</p>\n</blockquote>\n\n<p>It looks like you are using MacOS and and older version of Perl. Based on this I assume that your underlying OpenSSL version is still 0.9.8, because this ancient version of OpenSSL is the one which got shipped with MacOS. You can verify my assumption by calling</p>\n\n<pre><code>perl -MNet::SSLeay -E 'say Net::SSLeay::SSLeay_version(0)\n</code></pre>\n\n<p>If this reports version 0.9.8 my assumption is right. If this report 1.0.0 I'm wrong but the following still applies. If it reports 1.0.1 or even better the following explanation does not apply.</p>\n\n<p>OpenSSL 0.9.8 does not support ECDHE ciphers as can be also seen at <a href=\"https://www.ssllabs.com/ssltest/viewClient.html?name=OpenSSL&amp;version=0.9.8y&amp;key=27\" rel=\"nofollow noreferrer\">report from SSLLabs</a>. Only, this server requires ECDHE ciphers as can be seen from <a href=\"https://www.ssllabs.com/ssltest/analyze.html?d=www.icscards.nl\" rel=\"nofollow noreferrer\">this report by SSLLabs</a>. Thus, there is no common cipher between client and server which means that the TLS handshake fails.</p>\n"}], "owner": {"reputation": 31, "user_id": 1271450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cNzcE.jpg?s=128&g=1", "display_name": "Jure Merhar", "link": "https://stackoverflow.com/users/1271450/jure-merhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2540, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1512242179, "creation_date": 1512221692, "question_id": 47608448, "link": "https://stackoverflow.com/questions/47608448/sslv3-alert-handshake-failure-with-lwpuseragent", "title": "sslv3 alert handshake failure with LWP::UserAgent", "body": "<p>I'm trying to make an https request using <code>LWP::UserAgent</code>:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse LWP::UserAgent;\n\nmy $login_url = 'https://www.icscards.nl/abnamrogb/login/login';\nmy $ssl_options = { SSL_version =&gt; 'tlsv1', verify_hostname =&gt; 0 };\nmy $browser = LWP::UserAgent-&gt;new(ssl_opts =&gt; $ssl_options);\n$browser-&gt;cookie_jar( {} );\n\nmy $response = $browser-&gt;get($login_url);\nprint $response-&gt;decoded_content;\n</code></pre>\n\n<p>and get the following error message:</p>\n\n<pre><code>Can't connect to www.icscards.nl:443\n\nLWP::Protocol::https::Socket: SSL connect attempt failed because of handshake problems error:14094410:SSL routines:SSL3_READ_BYTES:sslv3 alert handshake failure at /System/Library/Perl/Extras/5.18/LWP/Protocol/http.pm line 51.\n</code></pre>\n\n<p>Changing the URL to e.g. <code>https://www.google.com/</code> works fine, but not the URL I want to fetch.</p>\n\n<p>Worth noting: I get the same error when making a request to this URL with python.</p>\n"}, {"tags": ["database", "perl"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512217816, "post_id": 47607760, "comment_id": 82174165, "body": "<code>print &quot;$ARGV[1].txt\\n$ARGV[2]\\n$ARGV[3]|$ARGV[4]\\n&quot;;</code>"}, {"owner": {"reputation": 5, "user_id": 8307656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22a9d587261f2e41a1e5694079b65bf9?s=128&d=identicon&r=PG&f=1", "display_name": "K. Rea", "link": "https://stackoverflow.com/users/8307656/k-rea"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512219100, "post_id": 47607760, "comment_id": 82174512, "body": "Sorry, I said it would be written in the file. @PerlDuck"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512222427, "post_id": 47607760, "comment_id": 82175492, "body": "The question can be rephrased as <i>&quot;How can we open a file for appending?&quot;</i>"}, {"owner": {"reputation": 5, "user_id": 8307656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22a9d587261f2e41a1e5694079b65bf9?s=128&d=identicon&r=PG&f=1", "display_name": "K. Rea", "link": "https://stackoverflow.com/users/8307656/k-rea"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512223185, "post_id": 47607760, "comment_id": 82175693, "body": "Thanks,Does this have a solution now?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1512310966, "post_id": 47607760, "comment_id": 82196650, "body": "Yes! You have a very well written answer now that not only shows the code you were asking for but also gives you a brief tutorial. Please see <a href=\"https://stackoverflow.com/help/someone-answers\"><i>What should I do when someone answers my question?</i></a>."}], "answers": [{"tags": [], "owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "is_accepted": false, "score": 2, "last_activity_date": 1512335875, "last_edit_date": 1512335875, "creation_date": 1512233019, "answer_id": 47610141, "question_id": 47607760, "link": "https://stackoverflow.com/questions/47607760/how-can-we-open-a-file-for-appending-on-perl/47610141#47610141", "title": "How can we open a file for appending on perl?", "body": "<p>Your example isn't really how a database works. It's just a flat file of variable-length records. If you wished to make it more efficient for lookups you would assure that record length is fixed, or would maintain a separate index of record offsets. But that's beyond the scope of answering your question.</p>\n\n<p>It appears that the run semantics for the script are as follows:</p>\n\n<pre><code>myscript ACTION_NAME FILENAME CONTENT [CONTENT [...]]\n</code></pre>\n\n<p>Inside the script the fields passed on the command line will appear in the <code>@ARGV</code> array.</p>\n\n<p>In the solution below I work with the assumption that you may want to eventually have other actions aside from <code>Create_table</code>, so an effort has been made to allow for extensibility.  A simple assumption will be that these actions operate on the parameters passed to <code>@ARGV</code> in some way. At least that's the case for <code>Create_table</code>.  So inside of <code>@ARGV</code> we will find the following:</p>\n\n<pre><code>@ARGV = ($action, $filename, @fields);\n</code></pre>\n\n<p>So first we set up a dispatch table that can handle various actions:</p>\n\n<pre><code>my %actions = (Create_table =&gt; sub {...}, ...);\n</code></pre>\n\n<p>Then we need is to shift off the action:</p>\n\n<pre><code>my $action = shift @ARGV;\n</code></pre>\n\n<p>And next we need to apply the dispatch:</p>\n\n<pre><code>if (exists $actions{$action}) {\n    $actions{$action}-&gt;(@ARGV);\n}\nelse {\n    die \"Unknown action: $action. Choose one of:\\n\\t\",\n        join(\"\\n\\t\", keys %actions),\n        \"\\n\";\n}\n</code></pre>\n\n<p>With this approach we just pass the remaining elements in <code>@ARGV</code> to the anonymous sub associated with the <code>Create_table</code> action, or die if we cannot find a matching action.</p>\n\n<p>Now what we have to look at is what needs to happen inside of our action's subroutine.  The elements that we pass in come from <code>@ARGV</code> and will be:</p>\n\n<pre><code>($filename, $tablename, @content)\n</code></pre>\n\n<p>So we grab those arguments:</p>\n\n<pre><code>my ($fname, $tname, @content) = @_;\n</code></pre>\n\n<p>Then we need to open the output file in append mode.  Append mode is specified using the <code>'&gt;&gt;'</code> designation:</p>\n\n<pre><code>open my $out_fh, '&gt;&gt;', $fname\n    or die \"Error opening $fname for append: $!\\n\";\n</code></pre>\n\n<p>That last bit is some error handling: If the file cannot be opened we've reached an exceptional state that cannot be easily recovered from at this point in the script, so we throw an exception (die) and exit with an appropriate message sent to STDERR.</p>\n\n<p>Next we will append some text to our output file. First we append the table name, and then we print the remaining items from <code>@ARGV</code> (the <code>@content</code> at this point), by joining each \"word\" together with <code>' | '</code>:</p>\n\n<pre><code>print $out_fh \"$tname\\n\", join(' | ', @content), \"\\n\";\n</code></pre>\n\n<p>Finally we close the filehandle explicitly to make it possible to detect errors:</p>\n\n<pre><code>close $out_fh or die \"Error writing to $fname: $!\\n\";\n</code></pre>\n\n<p>You may have noticed <code>$!</code> a couple of times now.  In Perl, if a system call (such as <code>open</code>, <code>close</code>, and many others) fails, the special variable <code>$!</code> will contain the error message in string context, so appending it to our error output will provide some diagnostic information to the caller.</p>\n\n<p>Putting it all together we get this:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy %actions = (\n    Create_table =&gt; sub {\n        my ($fname, $tname, @content) = @_;\n\n        open my $out_fh, '&gt;&gt;', $fname\n            or die \"Could not complete action Create_table - Failed to open $fname for append: $!\\n\";\n\n        print $out_fh \"$tname\\n\", join(' | ', @content), \"\\n\";\n        close $out_fh or die \"Error writing to $fname: $!\\n\";\n    },\n);\n\nmy $action = shift @ARGV;\n\nif (exists $actions{$action}) {\n    $actions{$action}-&gt;(@ARGV);\n}\nelse {\n    die \"Unknown action: $action\\n\";\n}\n</code></pre>\n\n<p>Additional action handling could easily be added by populating more <code>ACTION_NAME =&gt; sub {...},</code> elements into the <code>%actions</code> hash.</p>\n\n<p>If your command line processing needs to be more elaborate, see <code>Getopt::Long</code>, which ships with Perl.</p>\n\n<p>For additional documentation describing the constructs used in this example code see:</p>\n\n<ul>\n<li><code>perldoc perlintro</code>: A quick introduction to Perl.</li>\n<li><code>perldoc perlopentut</code>, <code>perldoc -f open</code>, <code>perldoc -f close</code>: File handling.</li>\n<li><code>perldoc perlvar</code>: Explanation of <code>$!</code> and <code>@ARGV</code>.</li>\n<li><code>perldoc -f join</code></li>\n<li><code>perldoc -f die</code>: Error handling.</li>\n<li><code>perldoc perldata</code>: Explanation of hashes.</li>\n<li><code>perldoc perlreftut</code>: Explanation of references (including subrefs)</li>\n<li><code>perldoc perlsyn</code>: Explanation of the <code>if(){}</code> syntax.</li>\n<li><code>perldoc perlsub</code>: Explanation of subroutines, parameter passing, and anonymous subs.</li>\n</ul>\n\n<p>Perl's documentation is available on the command line as:</p>\n\n<pre><code>perldoc [-f] DOCUMENT_NAME\n</code></pre>\n\n<p>where <code>-f</code> is used to specify individual functions or subroutines rather than broader-scoped documents.</p>\n\n<p>If you are new to Perl, start with <code>perldoc perlintro</code> and build from there.</p>\n"}], "owner": {"reputation": 5, "user_id": 8307656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22a9d587261f2e41a1e5694079b65bf9?s=128&d=identicon&r=PG&f=1", "display_name": "K. Rea", "link": "https://stackoverflow.com/users/8307656/k-rea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1512335875, "creation_date": 1512216621, "last_edit_date": 1512223118, "question_id": 47607760, "link": "https://stackoverflow.com/questions/47607760/how-can-we-open-a-file-for-appending-on-perl", "title": "How can we open a file for appending on perl?", "body": "<p>It will work like a database.</p>\n\n<p>The example I want is:</p>\n\n<p><strong>input :</strong> <code>% perl youscript.pl Create_table mydb regtable REGION COUNTRY</code></p>\n\n<p><strong>output:</strong></p>\n\n<pre><code>mydb.txt(The contents of this file):\n\nregtable\n\nREGION|COUNTRY\n</code></pre>\n\n<p>and</p>\n\n<p><strong>input :</strong> <code>% perl youscript.pl Create_table mydb nametable SURNAME NAME</code></p>\n\n<p><strong>output:</strong> </p>\n\n<pre><code>mydb.txt(The contents of this file):\n\nregtable\n\nREGION|COUNTRY\n\n\nnametable\n\nSURNAME|NAME\n</code></pre>\n\n<p>New entries should be added to each entry.</p>\n\n<p>K. Rea: Thanks for all the help.</p>\n"}, {"tags": ["perl", "csv"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1512155476, "post_id": 47599903, "comment_id": 82158413, "body": "How can you do that?  If you have <code>A,B,C,D</code> how can any tool know that you need fields <code>A</code> and <code>B,C</code> and <code>D</code>? Unless there is <i>some</i> criterion for what a &quot;field&quot; is."}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 1, "creation_date": 1512155586, "post_id": 47599903, "comment_id": 82158473, "body": "USE A STANDARD CSV PARSING LIBRARY!!!  Seriously, we get this question several times a week. Parsing CSV is not trivial, and the code has been written and tested.  Do yourself a favor and look in cpan for a CSV library and use that.  It will handle all the corner cases.  For your specific case it looks like the CSV is broken.  If a field contains commas it MUST be enclosed in quotes, or there will always be ambiguity."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1512155591, "post_id": 47599903, "comment_id": 82158477, "body": "If you have control over the input, enclose each field in <code>&quot;</code>.  Then it&#39;s easy. See for instance <a href=\"https://stackoverflow.com/q/47544385/4653379\">this post</a>, of a few days ago."}, {"owner": {"reputation": 3402, "user_id": 1841533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a9c40aae4572d0d306ac3fbcc6ac9d9?s=128&d=identicon&r=PG", "display_name": "Olivier Dulac", "link": "https://stackoverflow.com/users/1841533/olivier-dulac"}, "edited": false, "score": 0, "creation_date": 1512155816, "post_id": 47599903, "comment_id": 82158591, "body": "I recommend having the database (mysql? it is its default) output the file with TAB as separators... This simplifies things a lot."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512160328, "post_id": 47599903, "comment_id": 82160743, "body": "CSV data fields should be separated by a single comma, not a comma and a space"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 4829167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564d1aaa4fed98eb9b314081a034e616?s=128&d=identicon&r=PG&f=1", "display_name": "fexlneb", "link": "https://stackoverflow.com/users/4829167/fexlneb"}, "edited": false, "score": 0, "creation_date": 1513270980, "post_id": 47600116, "comment_id": 82599093, "body": "Thanks. I didn&#39;t realize that comma separated fields were enclosed in quotes."}], "tags": [], "owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "is_accepted": true, "score": 3, "last_activity_date": 1512155955, "creation_date": 1512155955, "answer_id": 47600116, "question_id": 47599903, "link": "https://stackoverflow.com/questions/47599903/how-to-extract-a-single-csv-field-that-is-a-comma-separated-list-of-email-addres/47600116#47600116", "title": "How to extract a single CSV field that is a comma-separated list of email addresses", "body": "<p>First, your CSV input is broken.  Fields containing commas must be enclosed in quotes.  If you can't change the input format, the I suggest the following approach:</p>\n\n<ol>\n<li>Use a standard CSV parser. This will give you each email in a separate field.</li>\n<li>For the email field(s), start at the proper index (the third field in your example), and accumulate the field values as long as the field \"looks\" like an email address.  Email address regexes are easily findable on the web.</li>\n<li>When you encounter a field that does not look like an email, verify that it looks the way you expect and then take that field and the following ones as if they were the fourth and subsequent fields regardless of their actual index positions.</li>\n</ol>\n"}], "owner": {"reputation": 27, "user_id": 4829167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564d1aaa4fed98eb9b314081a034e616?s=128&d=identicon&r=PG&f=1", "display_name": "fexlneb", "link": "https://stackoverflow.com/users/4829167/fexlneb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "closed_date": 1512314068, "accepted_answer_id": 47600116, "answer_count": 1, "score": -2, "last_activity_date": 1512160069, "creation_date": 1512155074, "last_edit_date": 1512160069, "question_id": 47599903, "link": "https://stackoverflow.com/questions/47599903/how-to-extract-a-single-csv-field-that-is-a-comma-separated-list-of-email-addres", "closed_reason": "Duplicate", "title": "How to extract a single CSV field that is a comma-separated list of email addresses", "body": "<p>I want the email addresses in a field from a line of CSV data, but the list contains commas.</p>\n\n<p>Therefore I split the contents within the field as well, which means I can't control the contents of this field because I only know how to do this with the <code>split</code> command.</p>\n\n<p>Example data:</p>\n\n<pre><code>12/01/2017, billybob123, billybob@bobthebomb.com, roxy@roxmysox.com, joey@rosytosy.com, AB, tom@tomsticles.com, \\\\123\\abc\n</code></pre>\n\n\n\n<pre><code>    # Open file for read\n\n    while ( my $fileLine = &lt;READ&gt; ) {\n        chomp $fileLine;\n        my @row = (split ',', $fileLine);\n        print $fileLine[3]\\n\\n\";\n      }\n</code></pre>\n\n<p>I use <code>$fileLine[3]</code>. The result I want is</p>\n\n<pre><code>roxy@roxmysox.com, joey@rosytosy.com\n</code></pre>\n\n<p>but I get</p>\n\n<pre><code>roxy@roxmysox.com\n</code></pre>\n\n<p>The number of comma-delimited email addresses inside this field is dynamic.</p>\n"}, {"tags": ["multithreading", "perl", "perl-module"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512154325, "post_id": 47598831, "comment_id": 82157846, "body": "<a href=\"https://perldoc.perl.org/threads.html\" rel=\"nofollow noreferrer\">The documentation of the <code>threads</code> pragma</a> clearly says that the first parameter to <code>create</code> must be either a string containing the name of the subroutine that provides the code for the thread, or a reference to that subroutine. Any following parameters are passed directly on to the subroutine as parameters to the call. You have passed a string of uncompiled Perl code, which isn&#39;t either of those options. Furthermore, <code>goldstandard -&gt; morpheus_tagging</code> is a class method call which passes the string <code>goldstandard</code> as the first parameter."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 9040273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a127a9f9c56dd991861825c30f57b7dc?s=128&d=identicon&r=PG&f=1", "display_name": "Lorem Ipsum", "link": "https://stackoverflow.com/users/9040273/lorem-ipsum"}, "edited": false, "score": 0, "creation_date": 1512388845, "post_id": 47600163, "comment_id": 82223329, "body": "This is amazing. Thank you!"}, {"owner": {"reputation": 21, "user_id": 9040273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a127a9f9c56dd991861825c30f57b7dc?s=128&d=identicon&r=PG&f=1", "display_name": "Lorem Ipsum", "link": "https://stackoverflow.com/users/9040273/lorem-ipsum"}, "edited": false, "score": 0, "creation_date": 1512401400, "post_id": 47600163, "comment_id": 82231392, "body": "As I see, there seems to be still a problem with     $q-&gt;enqueue(sub {.... I gets me a can&#39;t call method &quot;enqueue&quot; on an undef value... But it is defined and working if used all by itself."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1512157221, "last_edit_date": 1512157221, "creation_date": 1512156182, "answer_id": 47600163, "question_id": 47598831, "link": "https://stackoverflow.com/questions/47598831/perl-hand-module-to-threads/47600163#47600163", "title": "Perl hand Module to threads", "body": "<p>You must pass the name of a sub or a reference to a sub, plus arguments, to <code>threads-&gt;create</code>. So you need something like</p>\n\n<pre><code>my $method_ref = $invoker-&gt;can($method_name);\nthreads-&gt;create($method_ref, $invoker, @args);\n</code></pre>\n\n<p>That said, passing arguments to <code>threads-&gt;create</code> has issues that can be avoided by using a closure.</p>\n\n<pre><code>threads-&gt;create(sub { $invoker-&gt;$method_name(@args) })\n</code></pre>\n\n<p>The above can be written more simply as follows:</p>\n\n<pre><code>async { $invoker-&gt;$method_name(@args) }\n</code></pre>\n\n<p>This gets us the following:</p>\n\n<pre><code>sub tagging {\n    my %hash = goldstandard-&gt;tagging_hash(\\%folder);\n\n    my @jobs;\n    for (keys %hash) {\n        if (/mate/) {\n            push @jobs, [ 'goldstandard', 'mate_tagging',\n                $hash{$_}{raw},\n                $hash{$_}{temp},\n                $hash{$_}{tagged},\n                $mate_anna,\n                $mate_model,\n            ];\n        }\n\n        if (/morpheus/) {\n            push @jobs, [ 'goldstandard', 'morpheus_tagging',\n                $hash{$_}{source},\n                $hash{$_}{tagged},\n                $morpheus_stemlib,\n                $morpheus_cruncher,\n            ];\n        }\n    }\n\n    my @threads;\n    for my $job (@jobs) {\n        my ($invoker, $method_name, @args) = @$job;\n        push @threads, async { $invoker-&gt;$method_name(@args) };\n    }\n\n    $_-&gt;join for @threads;\n}\n</code></pre>\n\n<p>or just</p>\n\n<pre><code>sub tagging {\n    my %hash = goldstandard-&gt;tagging_hash(\\%folder);\n\n    my @threads;\n    for (keys %hash) {\n        if (/mate/) {\n            push @threads, async {\n                goldstandard-&gt;mate_tagging(\n                    $hash{$_}{raw},\n                    $hash{$_}{temp},\n                    $hash{$_}{tagged},\n                    $mate_anna,\n                    $mate_model,\n                );\n            };\n        }\n\n        if (/morpheus/) {\n            push @threads, async {\n               goldstandard-&gt;morpheus_tagging(\n                   $hash{$_}{source},\n                   $hash{$_}{tagged},\n                   $morpheus_stemlib,\n                   $morpheus_cruncher,\n               );\n            };\n        }\n    }\n\n    $_-&gt;join for @threads;\n}\n</code></pre>\n\n<p>Notes that I delayed the calls to <code>join</code> until after all the threads are created. Your way made it so only one thread would run at a time.</p>\n\n<p>But what we have isn't great. We have no way of limiting how many threads are active at a time, and we (expensively) create many threads instead of reusing them. We can use a worker pool to solve both of these problems.</p>\n\n<pre><code>use constant NUM_WORKERS =&gt; 5;\n\nuse Thread::Queue 3.01 qw( );\n\nmy $q;\n\nsub tagging {\n    my %hash = goldstandard-&gt;tagging_hash(\\%folder);\n\n    my @threads;\n    for (keys %hash) {\n        if (/mate/) {\n            $q-&gt;enqueue(sub {\n                goldstandard-&gt;mate_tagging(\n                    $hash{$_}{raw},\n                    $hash{$_}{temp},\n                    $hash{$_}{tagged},\n                    $mate_anna,\n                    $mate_model,\n                );\n            });\n        }\n\n        if (/morpheus/) {\n            $q-&gt;enqueue(sub {\n               goldstandard-&gt;morpheus_tagging(\n                   $hash{$_}{source},\n                   $hash{$_}{tagged},\n                   $morpheus_stemlib,\n                   $morpheus_cruncher,\n               );\n            });\n        }\n    }\n}\n\n{\n    $q = Thread::Queue-&gt;new();\n\n    for (1..NUM_WORKERS) {\n        async {\n            while ( my $job = $q-&gt;dequeue() ) {\n               $job-&gt;();\n            }\n        };\n    }\n\n    ... call tagging and whatever ...\n\n    $q-&gt;end();\n    $_-&gt;join() for threads-&gt;list();\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9040273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a127a9f9c56dd991861825c30f57b7dc?s=128&d=identicon&r=PG&f=1", "display_name": "Lorem Ipsum", "link": "https://stackoverflow.com/users/9040273/lorem-ipsum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1512157221, "creation_date": 1512150508, "question_id": 47598831, "link": "https://stackoverflow.com/questions/47598831/perl-hand-module-to-threads", "title": "Perl hand Module to threads", "body": "<p>i am trying to pass a subroutine from an self written module to threads using the following code.</p>\n\n<p>This is my first time using threads so I'm kinda not familiar with it.</p>\n\n<p>Main Script (shortend)</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse threads;\n\nuse lib 'PATH TO LIB';\nuse goldstandard;\n\nmy $delete_raw_files = 0;\nmy $outfolder = /PATH/;\nmy %folder = goldstandard -&gt; create_folder($outfolder,$delete_raw_files);\n\n&amp;tagging if $tagging == 1;\n\nsub tagging{\n    my %hash = goldstandard -&gt; tagging_hash(\\%folder);\n    my @threads;\n    foreach(keys %hash){\n        if($_ =~ m/mate/){\n            my $arguments = \"goldstandard -&gt; mate_tagging($hash{$_}{raw},$hash{$_}{temp},$hash{$_}{tagged},$mate_anna,$mate_model)\";\n            push(@threads,$arguments);\n        }\n        if($_ =~ m/morpheus/){\n            my $arguments = \"goldstandard -&gt; morpheus_tagging($hash{$_}{source},$hash{$_}{tagged},$morpheus_stemlib,$morpheus_cruncher)\";\n            push(@threads,$arguments)\n        }\n    }\n    foreach(@threads){\n        my $thread = threads-&gt;create($_);\n        $thread -&gt;join();\n    }\n}\n</code></pre>\n\n<p>Module</p>\n\n<pre><code>package goldstandard;\nuse strict;\nuse warnings;\nsub mate_tagging{\n    my $Referenz = shift;\n    my $input = shift;\n    my $output_temp_dir = shift;\n    my $output_mate_human = shift;\n    my $anna = shift;\n    my $model = shift;\n    opendir(DIR,\"$input\");                                                  \n    my @dir = readdir(DIR);\n    my $anzahl = @dir;\n    foreach(@dir){\n        unless($_ =~ m/^\\./){\n            my $name = $_;\n            my $path = $input . $_;\n            my $out_temp = $output_temp_dir . $name;\n            my $out_mate_human_final = $output_mate_human . $name;\n            qx(java -Xmx10G -classpath $anna is2.tag.Tagger -model $model -test $path -out $out_temp);\n            open(OUT, \"&gt; $out_mate_human_final\");\n            open(TEMP, \"&lt; $out_temp\");\n            my $output_text;\n            while(&lt;TEMP&gt;){\n                unless($_ =~ m/^\\s+$/){\n                    if ($_ =~ m/^\\d+\\t(.*?)\\t_\\t_\\t_\\t(.*?)\\t_\\t/) {\n                        my $tags = $2;\n                        my $words = $1;\n                        print OUT \"$words\\t$tags\\n\";\n                    }\n                }\n            }\n        }\n    }\n}\n\nsub morpheus_tagging{\n    my $Referenz = shift;\n    my $input = shift;\n    my $output = shift;\n    my $stemlib = shift;\n    my $cruncher = shift;\n    opendir(DIR,\"$input\");                                                  \n    my @dir = readdir(DIR);\n    foreach(@dir){\n        unless($_ =~ m/^\\./){\n            my $name = $_;\n            my $path = $input . $_;\n            my $out = $output . $name;\n            qx(env MORPHLIB='$stemlib' '$cruncher' &lt; '$path' &gt; '$out');\n        }\n    }\n}\n\n1;\n</code></pre>\n\n<p>Executing this code gets me</p>\n\n<pre><code>Thread 1 terminated abnormally: Undefined subroutine &amp;main::goldstandard -&gt; morpheus_tagging(...) called at ... line 43.\n</code></pre>\n\n<p>I guess eather the way I am calling the treads or the way I am providing the arguments are wrong. I Hope some can help me with that? I Also found something on safe and unsafe modules bum I'm not sure is this is realy the problem.</p>\n\n<p>I guess eather the way I am calling the treads or the way I am providing the arguments are wrong. I Hope some can help me with that? I Also found something on safe and unsafe modules bum I'm not sure is this is realy the problem.Thanks in advance</p>\n"}, {"tags": ["arrays", "list", "perl", "recursion"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1512150937, "post_id": 47598469, "comment_id": 82156033, "body": "Please show more of your code.  The <code>@array = (-and =&gt; @array);</code> is the same as <code>@array = (&#39;-and&#39;, @array);</code> and merely prepends the string <code>-and</code> to <code>@array</code>; it&#39;s not recursive. (I don&#39;t know see how that helps with your need for the <i>operator</i> <code>and</code>)"}, {"owner": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "edited": false, "score": 0, "creation_date": 1512151445, "post_id": 47598469, "comment_id": 82156325, "body": "Yeah, I know that is a string. Fat comma stringifies left hand operand. I am thinking the same about this assignment. If I am not mistaken array in list context behaves exactly as a list.  After generating conditions I do nothing more than: <code>$schema-&gt;resultset(&#39;Table&#39;)-&gt;search(\\@array);</code>  That&#39;s it."}, {"owner": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1512151830, "post_id": 47598469, "comment_id": 82156535, "body": "It comes strange to me but looks like @JimGarrison said. However perl&#39;s arrays are diferent from arrays in another languages. If I wanted to add a reference to array into array itself I would wrote something like this: <code>@array = ( -and =&gt; \\@array);</code> \\ is used for getting references in perl."}, {"owner": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1512152427, "post_id": 47598469, "comment_id": 82156863, "body": "@zdim oh, by the way, I&#39;m curious why it causes recursion just like you. I don&#39;t need recursion in my code. I just needed to prepend &#39;-and&#39; into my array. And now I just want to understand how this code <code>@array = ( -and =&gt; @array );</code> can cause recursion."}, {"owner": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1512153163, "post_id": 47598469, "comment_id": 82157272, "body": "@JimGarrison <a href=\"http://tpcg.io/ZxOV2L\" rel=\"nofollow noreferrer\">demo</a> - in this example you can see that there is no recursive structure created. Perl uses arrays as lists in such cases."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1512155863, "post_id": 47598469, "comment_id": 82158615, "body": "My point was that you need to show more of your code.  As I said, <code>@array = (-and =&gt; @array);</code> <i>itself</i> prepends <code>&#39;-and&#39;</code> to array, no recursion. The array does get flattened into list as you said. If you assign <code>\\@array</code> then that&#39;s what it adds.  But we don&#39;t see what the rest of the code does."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1512155999, "post_id": 47598469, "comment_id": 82158694, "body": "Just once more: I suggest that you show (far?) more code, and certainly sections that actually draw that error.  If it&#39;s too much to dump here then do your part and build a simplified version that exhibits the same problem."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512157020, "post_id": 47598469, "comment_id": 82159182, "body": "Please provide a minimal, runnable demonstration of the problem. (See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.) You say your problem is that you have code that performs endless recursion, but you have not shown anything that performs any recursion."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1512157084, "post_id": 47598469, "comment_id": 82159216, "body": "@Jim Garrison, Re &quot;<i><code>@array</code> contains a reference to itself</i>&quot;, No, it doesn&#39;t. Your whole comment is incorrect."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 1, "creation_date": 1512173887, "post_id": 47598469, "comment_id": 82165383, "body": "It seems to me you want to push <code>{ condition2 =&gt; &#39;value2&#39; }, ...</code>, not <code>[{condition2 =&gt; ...}, {...}]</code> to get an array of hashrefs. You should then specify <code>search({ -and =&gt; \\@array })</code> and be good to go."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1512211051, "post_id": 47598469, "comment_id": 82172260, "body": "You probably have that code in a loop, so your array grows more and more. Please <a href=\"https://stackoverflow.com/posts/47598469/edit\">edit</a> and show us a lot more, or we cannot help you."}, {"owner": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "edited": false, "score": 0, "creation_date": 1512221055, "post_id": 47598469, "comment_id": 82175068, "body": "I added code just as you asked. Hope that it will be helpful."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1512307022, "post_id": 47598469, "comment_id": 82195550, "body": "<code>&#39;me.faq_type&#39; =&gt; $self-&gt;param(&#39;faq_type&#39;)</code> looks like it may be vulnerable to injection. Where does <code>param</code> come from?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1512307069, "post_id": 47598469, "comment_id": 82195560, "body": "This question is useless without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "edited": false, "score": 0, "creation_date": 1512307314, "post_id": 47598469, "comment_id": 82195634, "body": "Sorry, but it is complete example of code. There is nothing to add. It&#39;s totally complete. As you can see this part of code is the separate mojo controller and I checked it before writing questions here. Only this part of code causes such problems and changing it solves problems."}, {"owner": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "edited": false, "score": 0, "creation_date": 1512308127, "post_id": 47598469, "comment_id": 82195853, "body": "Re:&quot;<code>&#39;me.faq_type&#39; =&gt; $self-&gt;param(&#39;faq_type&#39;)</code> looks like it may be vulnerable to injection.&quot; - no it&#39;s not. DBIx::Class uses SQL::Abstract which uses sql parameters when generates sql. Summary, ORM handles such things for us."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1512311734, "post_id": 47598469, "comment_id": 82196829, "body": "I am quite certain melpomene is right in that there&#39;s a problem there, though I&#39;m struggling to remember the specifics. I would suggest <code>$c-&gt;req-&gt;params-&gt;{faq_type}</code> instead. <code>param()</code> accepts lists of parameters, which you do not need here, anyway."}, {"owner": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "edited": false, "score": 0, "creation_date": 1512312351, "post_id": 47598469, "comment_id": 82196997, "body": "I can&#39;t find anything about problems with using <code>param</code> method and can&#39;t find any post about benefits of using <code>$c-&gt;req-&gt;params</code> method too. As I had seen the most mojo-way method of getting parameters is Mojolicious::Controller&#39;s <code>param</code> method."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "edited": false, "score": 0, "creation_date": 1512301371, "post_id": 47614159, "comment_id": 82194113, "body": "Sorry, but it&#39;s not an answer to my question. With little modifications this code works perfectly and it&#39;s not the first time I see and use such style of creating conditions for DBIx::Class/SQL::Abstract. This case is very simple and I agree that it&#39;s not so necessary to use array as collector of all conditions but in larger tasks it becomes the only solution especcialy when we need to use the same field twice in one condition."}, {"owner": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "edited": false, "score": 0, "creation_date": 1512301376, "post_id": 47614159, "comment_id": 82194115, "body": "My actual qusetions is about recursion. In the case above in my code it seems like there <b>can not</b> be anything related to recursion however I got problems with performance and found log records about deep recursion. It&#39;s not a problem with rewritting the code - I already made it. I just want to understand how that case can cause recursion."}, {"owner": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "edited": false, "score": 0, "creation_date": 1512301748, "post_id": 47614159, "comment_id": 82194212, "body": "And answer to your question - <b># why not scalar @pages, if you&#39;re fetching all, no need to query again?</b> Because of pagination. You can see that there are <b>rows</b> and <b>offset</b> attributes in <code>%attr</code> hash. So, you&#39;re wrong, it&#39;s not fetching all records."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "reply_to_user": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "edited": false, "score": 0, "creation_date": 1512304053, "post_id": 47614159, "comment_id": 82194769, "body": "Sry, I guess I should not be writing answers so late - since you&#39;re not paginating the count, that makes perfect sense.  I do not see how the query should cause deep recursion, though. I don&#39;t know what your extension does, but I would try doing without and see where that goes."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "reply_to_user": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "edited": false, "score": 0, "creation_date": 1512305140, "post_id": 47614159, "comment_id": 82195034, "body": "I&#39;ve put in a note about the <code>@cond</code>. I don&#39;t think it&#39;s correct to give a list, and I could easily see the parser getting confused."}, {"owner": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "edited": false, "score": 0, "creation_date": 1512306733, "post_id": 47614159, "comment_id": 82195451, "body": "<code>{ -and =&gt; \\@cond }</code> - this surely will create a recursive data structure. And it is normal for perl. <code>{ -and =&gt; @cond }</code> must be similar to <code>unshift @array, 0;</code> and you can see that it is in my <a href=\"http://tpcg.io/fsis7t\" rel=\"nofollow noreferrer\">demo</a> but somehow it causes recursion in the code above. I can&#39;t understand how it can be."}, {"owner": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "edited": false, "score": 0, "creation_date": 1512307178, "post_id": 47614159, "comment_id": 82195593, "body": "Oh, and it&#39;s actually not a problem writing late. It&#39;s already appreciable that you tried to help. Thanks."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "reply_to_user": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "edited": false, "score": 0, "creation_date": 1512309075, "post_id": 47614159, "comment_id": 82196115, "body": "I don&#39;t understand your unshift comment. <code>{ -and =&gt; @cond }</code> will flatten <code>@cond</code> into the hashref, which is certainly not the same as unshifting the first element of <code>@cond</code>.  And why passing an arrayref would cause recursion is not clear to me at all."}, {"owner": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "edited": false, "score": 0, "creation_date": 1512310583, "post_id": 47614159, "comment_id": 82196535, "body": "Sorry, I made a mistake. This <code>( -and =&gt; @cond )</code> is similar to <code>unshift @cond, &#39;-and&#39;;</code>."}, {"owner": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "edited": false, "score": 0, "creation_date": 1512310850, "post_id": 47614159, "comment_id": 82196616, "body": "And about recursion - I made the same mistake - curly brackets. <code>@cond = ( -and =&gt; \\@cond );</code> will create recursive data structure. Array will contain a reference to itself."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "reply_to_user": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "edited": false, "score": 0, "creation_date": 1512311371, "post_id": 47614159, "comment_id": 82196737, "body": "I see. Because you do <code>@cond = ( -and =&gt; \\@cond )</code>. Well, don&#39;t do that. Just pass the arguments in sensibly, or, alternatively, build it as <code>@cond = ( -and =&gt; [ @cond ] )</code>. In neither of my suggested solutions do I build a reference to itself."}, {"owner": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "edited": false, "score": 0, "creation_date": 1512311770, "post_id": 47614159, "comment_id": 82196841, "body": "I described normal way of thinking about perl&#39;s syntax. Actual problem is not with that <code>@cond = ( -and =&gt; \\@cond )</code>. Actual problem is that this code <code>@cond = ( -and =&gt; @cond );</code> crashed the server :) Without creating an array reference I got problems with recursion. And I still wonder how it can be. Anyway, thanks."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "reply_to_user": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "edited": false, "score": 0, "creation_date": 1512322026, "post_id": 47614159, "comment_id": 82200128, "body": "I disagree about the &quot;normal way of thinking&quot;. However, have you tried my approaches and found them not working? What errors are you getting?  Also, please read my note: you are simply not passing in your conditions the way they should be passed in, so it&#39;s not working."}, {"owner": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "edited": false, "score": 0, "creation_date": 1512326697, "post_id": 47614159, "comment_id": 82201674, "body": "Please, there is no need for another aproaches. As I said I already fixed that problem and it&#39;s working perfectly. Just replace <code>@cond</code> to <code>$cond</code>, do like that <code>push @{ $cond }, { condition1 =&gt; &#39;value1&#39; };</code> and then <code>$cond = [ -and =&gt; $cond ]</code> and it will work. You can read this <a href=\"http://search.cpan.org/~ilmari/SQL-Abstract-1.84/lib/SQL/Abstract.pm#Logic_and_nesting_operators\" rel=\"nofollow noreferrer\">article</a> about logical operators in <code>SQL::Abstract</code> and figure out that it is everything fine in my code. There is one strange thing about recursion and I just want to find out how it can be - not to fix errors."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "reply_to_user": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "edited": false, "score": 0, "creation_date": 1512334658, "post_id": 47614159, "comment_id": 82204307, "body": "I was trying to point out that <code>{ -and =&gt; @cond }</code> is not the same as <code>[ -and =&gt; $cond]</code> which you&#39;re now saying is fine as if that&#39;s what you&#39;d been doing all along. I do not see why SQL::Abstract is recursing now, the search / pagination you are doing <i>should</i> work fine as per your last comment."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "reply_to_user": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "edited": false, "score": 0, "creation_date": 1512334697, "post_id": 47614159, "comment_id": 82204321, "body": "It follows the problem has to be somewhere else. Have you tried without your BuxDB extension?"}, {"owner": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "edited": false, "score": 0, "creation_date": 1512373711, "post_id": 47614159, "comment_id": 82214835, "body": "Of course I understand that this <code>{ -and =&gt; @cond }</code> is not the same with that <code>[ -and =&gt; $cond]</code>. I didn&#39;t use <code>{ -and =&gt; @cond }</code>. There is no such part in my code. Yes, I think you are right. The problem is somewhere else. No, I didn&#39;t check code without extension. Actually this extension is a wrapper and provides extension methods. I think I have to experiment with that code. Maybe I&#39;ll find something. Thank you."}], "tags": [], "owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "is_accepted": false, "score": 0, "last_activity_date": 1512311581, "last_edit_date": 1512311581, "creation_date": 1512262170, "answer_id": 47614159, "question_id": 47598469, "link": "https://stackoverflow.com/questions/47598469/why-assigning-list-containing-array-to-array-itself-causes-recursion-in-perl/47614159#47614159", "title": "Why assigning list containing array to array itself causes recursion in perl?", "body": "<p>When specifying several conditions that should all be met to search\nwith DBIx::Class, the usual way to do this is by passing a hashref\nwith the column names as keys and the conditions as values.</p>\n\n<p>While it is possible to instead specify an arrayref of hashrefs with the '-and' keyword, this is most often unnecessary - especially if you only have one condition to specify!</p>\n\n<p>NOTE: I am not certain <code>{ -and =&gt; @cond }</code> does what you want, have you tried replacing it with <code>{ -and =&gt; \\@cond }</code> ( Note the array<strong>ref</strong>) ? This could be the reason why SQL::Abstract gets confused, though I'm unsure how that would end up being a recursion.</p>\n\n<p>SECOND NOTE: I find <code>@cond = ( -and =&gt; \\@cond )</code> confusing and it may cause trouble. I would suggest working with a hashref passed into search, as it should be called with, and setting the <code>-and</code> key instead, by adapting my first example.</p>\n\n<p>This is how I would specify the conditions:</p>\n\n<pre><code>my $cond;\n\nif ( my $faq_type = $self-&gt;param('faq_type') ){\n    $cond-&gt;{'me.faq_type'} = $faq_type;\n}\n\nif ( my $search = $self-&gt;param('search') ){\n    $cond-&gt;{-or} = [\n        { $cond-&gt;{'me.title'} = { ilike =&gt; '%$search%' }, },\n        { $cond-&gt;{'me.text' } = { ilike =&gt; '%$search%' }, },\n    ];\n}\n</code></pre>\n\n<p>An alternative to consider, would be to first specify the 'faq_type' search and store the resulting rs, to then refine it further as necessary, this seems more in line with the spirit of DBIx::Class to me:</p>\n\n<pre><code>my $pages_rs = BUX::DB-&gt;rs('Page');\n\nif ( my $faq_type = $self-&gt;param('faq_type') ){\n    $pages_rs = $pages_rs-&gt;search({ 'me.faq_type' =&gt; $faq_type });\n}\n\nif ( my $search = $self-&gt;param('search') ){\n    $pages_rs = $pages_rs-&gt;search({\n        -or =&gt; [\n            'me.title' =&gt; { ilike =&gt; \"%$search%\" },\n            'me.text'  =&gt; { ilike =&gt; \"%$search%\" },\n        ];\n    });\n}\n\nmy %attr = (\n        join         =&gt; 'page_category',\n        rows         =&gt; $self-&gt;param('limit'),\n        offset       =&gt; $self-&gt;param('offset'),\n        order_by     =&gt; { -desc =&gt; 'id' },\n        result_class =&gt; 'BUX::Util::HashRefInflator',\n        '+select'    =&gt; [ qw( page_category.name ) ],\n        '+as'        =&gt; [ qw( category_name ) ],\n);\n\n$pages_rs = $pages_rs-&gt;search( undef, \\%attr );\n\nmy @pages = $pages_rs-&gt;all; # This executes the query\n</code></pre>\n\n<p>Please keep in mind this is untested as I currently don't have an easy way of verifying this. If this does not help, feel free to comment and I'll try and fix whatever may be off.</p>\n\n<p>EDIT: to not leave something in that is wrong, I've removed the (irrelevant) page count I put in.</p>\n"}], "owner": {"reputation": 73, "user_id": 8425144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c55a2efda43369d55635a147422161?s=128&d=identicon&r=PG&f=1", "display_name": "Rustam", "link": "https://stackoverflow.com/users/8425144/rustam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1512311581, "creation_date": 1512149172, "last_edit_date": 1512220997, "question_id": 47598469, "link": "https://stackoverflow.com/questions/47598469/why-assigning-list-containing-array-to-array-itself-causes-recursion-in-perl", "title": "Why assigning list containing array to array itself causes recursion in perl?", "body": "<p>I'm using DBIX::Class and generating conditions for search like that:</p>\n\n<pre><code>my @array;\npush @array, { condition1 =&gt; 'value1' };\npush @array, [ { condition2 =&gt; 'value2' }, { condition3 =&gt; 'value3' } ];\n</code></pre>\n\n<p>All this conditions must be checked using <strong>AND</strong> operator, that's why I wrote this:</p>\n\n<pre><code>@array = ( -and =&gt; @array );\n</code></pre>\n\n<p>After running code with such conditions process on my virtual machine started to use up to 8 Gb memory. I thought that it was recursion problems and I didn't mistake. I checked logs and saw records about <strong>deep recursion</strong> but I couldn't find anything about my case in internet.</p>\n\n<p>Is there problems with assigning list containing array to array itself?\nOr maybe it is a problem with DBIX::Class (SQL::Abstract)? Why it causes deep recursion?</p>\n\n<p>Update. This is the real code from project:</p>\n\n<pre><code>sub faq {\n    my ( $self ) = @_;\n    my @cond;\n\n    if ( $self-&gt;param('faq_type') ) {\n        push @cond,\n        {\n            'me.faq_type' =&gt; $self-&gt;param('faq_type'),\n        };\n    }\n\n    if ( my $search = $self-&gt;param('search') ) {\n        push @cond,\n        [\n            'me.title' =&gt; { ilike =&gt; \"%$search%\" },\n            'me.text'  =&gt; { ilike =&gt; \"%$search%\" },\n        ];\n    }\n\n    @cond = ( -and =&gt; @cond );\n\n    my %attr = (\n        join         =&gt; 'page_category',\n        rows         =&gt; $self-&gt;param('limit'),\n        offset       =&gt; $self-&gt;param('offset'),\n        order_by     =&gt; { -desc =&gt; 'id' },\n        result_class =&gt; 'BUX::Util::HashRefInflator',\n        '+select'    =&gt; [ qw( page_category.name ) ],\n        '+as'        =&gt; [ qw( category_name ) ],\n    );\n\n    my @pages       = BUX::DB-&gt;rs('Page')-&gt;search( \\@cond, \\%attr )-&gt;all;\n    my $total_count = BUX::DB-&gt;rs('Page')-&gt;count( \\@cond );\n\n    return $self-&gt;render(json =&gt; {\n        pages =&gt; \\@pages,\n        count =&gt; $total_count\n    });\n}\n</code></pre>\n\n<p>And log records:</p>\n\n<p>Deep recursion on subroutine \"SQL::Abstract::_SWITCH_refkind\" at /opt/perlbrew/perls/perl-5.14.4/lib/site_perl/5.14.4/SQL/Abstract.pm line 719.\nDeep recursion on subroutine \"SQL::Abstract::_recurse_where\" at /opt/perlbrew/perls/perl-5.14.4/lib/site_perl/5.14.4/SQL/Abstract.pm line 546.\nDeep recursion on subroutine \"SQL::Abstract::_where_ARRAYREF\" at /opt/perlbrew/perls/perl-5.14.4/lib/site_perl/5.14.4/SQL/Abstract.pm line 687.\nDeep recursion on subroutine \"SQL::Abstract::_where_HASHREF\" at /opt/perlbrew/perls/perl-5.14.4/lib/site_perl/5.14.4/SQL/Abstract.pm line 493.\nDeep recursion on subroutine \"SQL::Abstract::_where_unary_op\" at /opt/perlbrew/perls/perl-5.14.4/lib/site_perl/5.14.4/SQL/Abstract.pm line 596.\nDeep recursion on subroutine \"SQL::Abstract::_where_op_ANDOR\" at /opt/perlbrew/perls/perl-5.14.4/lib/site_perl/5.14.4/SQL/Abstract.pm line 645.</p>\n\n<p>P.S. <code>BUX::DB</code> is the subclass of <code>DBIx::Class</code> and <code>rs</code> is a shortcut for <code>resultset</code>.</p>\n"}, {"tags": ["perl", "search", "replace"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512148823, "post_id": 47598321, "comment_id": 82154863, "body": "Welcome to Stack Overflow and the Perl tag. If in addition to an answer for your question, you would like to get some constructive feedback on your code, please feel free to post it to <a href=\"https://codereview.stackexchange.com\">Code Review</a> in the <i>perl</i> tag and the <i>beginner</i> there. I see some things that can be improved here."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512148991, "post_id": 47598321, "comment_id": 82154961, "body": "Related, could be a duplicate, but would require significant changes to the program: <a href=\"https://stackoverflow.com/q/31024980/1331451\">stackoverflow.com/q/31024980/1331451</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1512149346, "post_id": 47598321, "comment_id": 82155170, "body": "In short, your <a href=\"http://perldoc.perl.org/functions/print.html\" rel=\"nofollow noreferrer\"><code>print</code></a> prints to <code>STDOUT</code>; it is like <code>print STDOUT $_;</code>.  It can&#39;t, and shouldn&#39;t, magically change the file. You should write out the new content to another file and then move it over the original. See about this <a href=\"https://perldoc.perl.org/perlfaq5.html#How-do-I-change,-delete,-or-insert-a-line-in-a-file,-or-append-to-the-beginning-of-a-file?\" rel=\"nofollow noreferrer\">in perlfaq5</a> for example, and search for SO posts."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1512149473, "post_id": 47598321, "comment_id": 82155231, "body": "I&#39;d suggest <i>to not</i> use <code>&#39;+&lt;&#39;</code> mode.  Either read <code>&#39;&lt;&#39;</code> or write <code>&#39;&gt;&#39;</code> or append <code>&#39;&gt;&gt;&#39;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 0, "last_activity_date": 1512149627, "creation_date": 1512149627, "answer_id": 47598597, "question_id": 47598321, "link": "https://stackoverflow.com/questions/47598321/search-and-replace-not-saving-to-file/47598597#47598597", "title": "Search and Replace not saving to file", "body": "<p>When you use <code>print;</code> you are printing to <code>STDOUT</code> because that's the selected file handle. Your output is then visible on the screen, but does not get changed in the file. The fact that you opened it for reading and writing does not matter here.</p>\n\n<p>You can print to a file handle by using the <code>print HANDLE ARGS</code> form.</p>\n\n<pre><code>print DATA $_;\n</code></pre>\n\n<p>(Note that <code>DATA</code> is a really bad idea for your handle, as that is a default-handle provided by Perl to read the <code>__DATA__</code> section of your script. And in general, you should be using lexical file handles and three-argument <code>open</code>, so it would become <code>open my $fh, '+&lt;', $filename or die $!</code>.)</p>\n\n<p>However, implementing the read/write is not done by simply writing to correct handle. This will mess up Perl's idea of where you currently are in the file.</p>\n\n<p>It makes more sense to use <a href=\"https://stackoverflow.com/q/31024980/1331451\">the approach outlined in this answer</a>, and take advantage of Perl's built-in in-place editing like the <code>-i</code> command line switch does.</p>\n\n<blockquote>\n<pre><code>  our @ARGV = ($file);\n\n  while ( &lt;ARGV&gt; ) {\n     tr/a-z/A-Z/;\n     print;\n  }\n</code></pre>\n</blockquote>\n\n<p>To apply it to your code, you'll have to do this. I have on purpose not fixed all the style and security issues with your code. See my comment about codereview for that.</p>\n\n<pre><code># elsif (...) {\n    chmod 0666, $_ or die \"Couldn't chmod\";\n\n    @ARGV = ($_);\n    while(&lt;DATA&gt;){\n        s/best/worst/ig;\n        print;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 1, "last_activity_date": 1512151757, "creation_date": 1512151757, "answer_id": 47599125, "question_id": 47598321, "link": "https://stackoverflow.com/questions/47598321/search-and-replace-not-saving-to-file/47599125#47599125", "title": "Search and Replace not saving to file", "body": "<p>I would use something like this</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Path::Tiny;\n\nmy $p = shift // '.';\nmy $iter = path($p)-&gt;iterator({recurse =&gt; 1});\nwhile( my $path = $iter-&gt;() ) {\n        $path-&gt;chmod(\"ug+w\");\n        $path-&gt;edit( sub { s/best/worst/ } ) if( -f $path &amp;&amp; $path =~ /\\.([ch]pp|txt)$/i );\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7822601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c1df31162875aa8ee7dad48fddcf474?s=128&d=identicon&r=PG&f=1", "display_name": "guichonator19", "link": "https://stackoverflow.com/users/7822601/guichonator19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1512151757, "creation_date": 1512148578, "question_id": 47598321, "link": "https://stackoverflow.com/questions/47598321/search-and-replace-not-saving-to-file", "title": "Search and Replace not saving to file", "body": "<p>I am new to Perl been working about a day with it. I am trying to write a script that will go to every .cpp file and .hpp file change the files permission to read and write, while also searching for a string and replacing it. This is what I have so far. I am able to change every files permission to read and write the problem is when I try to replace the string. it prints out correctly but will not save into file. Welcome to any suggestions. </p>\n\n<pre><code>#gets first first value of array being past as argument. \nmy $path = shift;\n\n#open directory\nopendir(DIR, $path) or die \"Unable to open $path: $!\";\n#read in the files\n#ignores hidden files eg. .\\..\\\nmy @files = grep{!/^\\.{1,2}$/} readdir(DIR);\n#close directory\nclose(DIR);\n#put full path of file\n@files = map {$path . '\\\\' . $_ } @files;\n\nfor (@files){\n    #if directory then use recusrion to open file \n    if(-d $_){\n        change_permission($_);\n    }elsif((-f $_) &amp;&amp; (($_ =~m/\\.cpp/) || ($_ =~m/\\.hpp/) || ($_ =~m/\\.txt/))){\n        chmod 0666, $_ or die \"Couldn't chmod\";\n\n        open(DATA, \"+&lt;\", $_) or die \"file could not open $! \\n\";\n            while(&lt;DATA&gt;){\n                s/best/worst/ig;\n                print;\n            }\n\n        close(DATA) or die \"Couldn't close file properly $! \\n\" ;\n\n\n    }\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512138646, "post_id": 47595511, "comment_id": 82148506, "body": "<code>my ($p1, $p2, $p3, $p4)=0 x 4;</code> will set <code>$p1</code> to <code>&quot;0000&quot;</code> and all the others to <code>undef</code>. <code>$p{$_}-&gt;...</code> refers to <code>%p</code>, not <code>$p</code>. Your last code block makes no sense. So <code>$p1</code> and so on are objects. And <code>get_my_stuff</code> takes a list of names, and returns a list of objects corresponding to those names? Why do you call that in the list?"}, {"owner": {"reputation": 220, "user_id": 3295322, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a114d13f7cb21d6f699f5ac0b2de8a3?s=128&d=identicon&r=PG&f=1", "display_name": "YouHaveaBigEgo", "link": "https://stackoverflow.com/users/3295322/youhaveabigego"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512138938, "post_id": 47595511, "comment_id": 82148683, "body": "That was a mistake on my part. I meant to do <code>($p1, $p2, $p3, $p4)= (0,0,0,0);</code>. I tried to keep it similar to what the original code was written as. only changed the var names."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1512139345, "post_id": 47595511, "comment_id": 82148948, "body": "Please <a href=\"https://stackoverflow.com/posts/47595511/edit\">edit</a> your question and fix those. It&#39;s no use if you don&#39;t show your real code, or at least a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that you have tested to run and produce the result you claim it does."}, {"owner": {"reputation": 220, "user_id": 3295322, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a114d13f7cb21d6f699f5ac0b2de8a3?s=128&d=identicon&r=PG&f=1", "display_name": "YouHaveaBigEgo", "link": "https://stackoverflow.com/users/3295322/youhaveabigego"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512139473, "post_id": 47595511, "comment_id": 82149029, "body": "I followed this example for your second part: <a href=\"https://stackoverflow.com/questions/17434333/using-a-dynamically-generated-variable-name-in-perls-strict-mode\" title=\"using a dynamically generated variable name in perls strict mode\">stackoverflow.com/questions/17434333/&hellip;</a>"}, {"owner": {"reputation": 5543, "user_id": 6372809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O11k5.jpg?s=128&g=1", "display_name": "ilkkachu", "link": "https://stackoverflow.com/users/6372809/ilkkachu"}, "edited": false, "score": 1, "creation_date": 1512139967, "post_id": 47595511, "comment_id": 82149401, "body": "Use a hash. If you can. You say you&#39;re debugging something that isn&#39;t yours, so I don&#39;t know what kind of modifications you can / are willing to do. If you really want to refer by name, then I suppose this answers your question: <a href=\"https://stackoverflow.com/a/17434563/6372809\">stackoverflow.com/a/17434563/6372809</a>"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 1, "creation_date": 1512219567, "post_id": 47595511, "comment_id": 82174625, "body": "What you are trying to do is called a symbolic reference. It is not considered to be PBP (Perl Best Practice). Use a hash instead. <a href=\"http://perldoc.perl.org/perlref.html#Symbolic-references\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlref.html#Symbolic-references</a>"}, {"owner": {"reputation": 220, "user_id": 3295322, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a114d13f7cb21d6f699f5ac0b2de8a3?s=128&d=identicon&r=PG&f=1", "display_name": "YouHaveaBigEgo", "link": "https://stackoverflow.com/users/3295322/youhaveabigego"}, "edited": false, "score": 0, "creation_date": 1512229566, "post_id": 47595511, "comment_id": 82177519, "body": "Thank you everyone."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512382769, "post_id": 47595511, "comment_id": 82219864, "body": "Please take a moment to read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> to learn what to do when someone answers your question. Thanks. :)"}], "answers": [{"comments": [{"owner": {"reputation": 220, "user_id": 3295322, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a114d13f7cb21d6f699f5ac0b2de8a3?s=128&d=identicon&r=PG&f=1", "display_name": "YouHaveaBigEgo", "link": "https://stackoverflow.com/users/3295322/youhaveabigego"}, "edited": false, "score": 1, "creation_date": 1512139803, "post_id": 47595778, "comment_id": 82149278, "body": "Thanks. this is awesome :). I didn&#39;t know that you could do that w. perl."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 5, "last_activity_date": 1512139306, "creation_date": 1512139306, "answer_id": 47595778, "question_id": 47595511, "link": "https://stackoverflow.com/questions/47595511/is-it-possible-to-match-a-string-x-foo-with-a-variable-named-foo-and-assig/47595778#47595778", "title": "Is it possible to match a string $x = &quot;foo&quot; with a variable named $foo and assign a value only if it matches?", "body": "<p>You don't need to try to invent something to deal with variable names. Your idea to use a hash is correct, but your approach is flawed.</p>\n\n<p>It seems your function <code>get_my_stuff</code> takes a list of arguments and transforms them somehow. It then returns a list of objects that correspond to the arguments. Instead of doing that in the loop, do it before you loop through the numbers and build up your hash by assigning each id to an object.</p>\n\n<p>Perl allows you to assign to a hash slice. In that case, the <em>sigil</em> changes to an <code>@</code>. My below implementation uses DateTime with years to show that the objects are different.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\nuse DateTime;\n\n# for illustration purposes\nsub get_my_stuff {\n    return map { DateTime-&gt;new( year =&gt; (substr $_, 1) + 2000 ) } @_;\n}\n\n\nmy @ids = qw(p1 p2 p3 p4);\nmy %p;\n\n# create this outside of the loop\n@p{@ids} = get_my_stuff(@ids);\n\nforeach my $i ( 1.. 4 ) {\n    say $p{'p' . $i}-&gt;ymd; # \"do_something\"\n}\n</code></pre>\n\n<p>This will output</p>\n\n<pre><code>2001-01-01\n2002-01-01\n2003-01-01\n2004-01-01\n</code></pre>\n"}], "owner": {"reputation": 220, "user_id": 3295322, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a114d13f7cb21d6f699f5ac0b2de8a3?s=128&d=identicon&r=PG&f=1", "display_name": "YouHaveaBigEgo", "link": "https://stackoverflow.com/users/3295322/youhaveabigego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 47595778, "answer_count": 1, "score": 1, "last_activity_date": 1512139510, "creation_date": 1512138392, "last_edit_date": 1512139510, "question_id": 47595511, "link": "https://stackoverflow.com/questions/47595511/is-it-possible-to-match-a-string-x-foo-with-a-variable-named-foo-and-assig", "title": "Is it possible to match a string $x = &quot;foo&quot; with a variable named $foo and assign a value only if it matches?", "body": "<p>What I am trying to ask is easily shown.</p>\n\n<p>Imagine 2 variables named as</p>\n\n<pre><code>my ($foo, $bar) = (0,0);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>my @a = (\"foo\",\"bar\",\"beyond\",\"recognition\");\n</code></pre>\n\n<p>is it possible to string match <code>$a[0]</code> with the variable named <code>$foo</code>, and assign a value to it <em>(say \"hi\")</em> only if it matches identically?</p>\n\n<p>I am trying to debug this some code <em>(not mine)</em>, and I ran into a tough spot. Basically, I have a part of the script where I have a bunch of variables.</p>\n\n<pre><code>my ($p1, $p2, $p3, $p4)= (0,0,0,0);  # *Edited*\nmy @ids = (\"p1\",\"p2\",\"p3\",\"p4\")\n</code></pre>\n\n<p>I have a case where I need to pass each of those variables as a hash key to call a certain operation inside a loop.</p>\n\n<pre><code>for (0..3){\n    my $handle = get_my_stuff(@ids);\n    my $ret    = $p1-&gt;do_something();   # &lt;- $p1 is used for the first instance of loop.\n    ...\n    ...\n    ...\n }\n</code></pre>\n\n<p>FOr the first iteration of the loop, I need to use <code>$p1</code>, but for the second iteration of the loop I need to pass (or call) </p>\n\n<pre><code>     my $ret  = $p2-&gt;do_something(); # not $p1\n</code></pre>\n\n<p>So what I did was ;</p>\n\n<pre><code>my $p;\nfor (1..4){\n    my $handle = get_my_stuff(@ids);\n    no strict 'refs';\n    my $ret    = $p{$_}-&gt;do_something();\n    ...\n    ...\n    ...\n    use strict 'refs';\n    ...\n  }\n</code></pre>\n\n<p>But the above operation is not allowed, and I am unable to call my key in such a manner :(. As it turns out, $p1 became a blessed hash as soon after <code>get_my_stuff()</code> was called. And to my biggest surprise, somehow the script in the function <em>(too much and too long to paste here)</em> assign or pass a hash reference to my variables only if they match.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2496, "user_id": 2469275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b7EZh.png?s=128&g=1", "display_name": "janh", "link": "https://stackoverflow.com/users/2469275/janh"}, "edited": false, "score": 2, "creation_date": 1512133218, "post_id": 47593850, "comment_id": 82145070, "body": "Did you add all those tags just to get more exposure for your question?"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 1, "creation_date": 1512134254, "post_id": 47593850, "comment_id": 82145711, "body": "I removed unwanted tags. Please also explain how your are running these commands from <code>perl</code> because nothing in this code is perl."}, {"owner": {"reputation": 13, "user_id": 7633739, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jrOwe.jpg?s=128&g=1", "display_name": "Pradeep Yenkuwale", "link": "https://stackoverflow.com/users/7633739/pradeep-yenkuwale"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1512135593, "post_id": 47593850, "comment_id": 82146558, "body": "@GerhardBarnard, i have added perl script that i have for running the application please give me the suggestions"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7633739, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jrOwe.jpg?s=128&g=1", "display_name": "Pradeep Yenkuwale", "link": "https://stackoverflow.com/users/7633739/pradeep-yenkuwale"}, "edited": false, "score": 0, "creation_date": 1512136709, "post_id": 47594935, "comment_id": 82147305, "body": "There is another reason why i am using Perl, you suggest me in batch script, i will refer the same logic in perl"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 13, "user_id": 7633739, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jrOwe.jpg?s=128&g=1", "display_name": "Pradeep Yenkuwale", "link": "https://stackoverflow.com/users/7633739/pradeep-yenkuwale"}, "edited": false, "score": 0, "creation_date": 1512137938, "post_id": 47594935, "comment_id": 82148111, "body": "@PradeepYenkuwale Then just try what I have posted."}], "tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": false, "score": 1, "last_activity_date": 1512138280, "last_edit_date": 1512138280, "creation_date": 1512136415, "answer_id": 47594935, "question_id": 47593850, "link": "https://stackoverflow.com/questions/47593850/how-do-i-open-input-file-through-patran-using-start-with-wait-command/47594935#47594935", "title": "how do i open input file through patran using start with /wait command", "body": "<p>If you want output, you need to rather use backticks.</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $command = '\"C:/Software/Patran_x64/20170/bin/patran.exe\"';\nmy $cadfix2 = '\"D:/Application_Integration_Files/Patran/toPreProcessor.ses\"';\nmy $path1 = `$command $cadfix2`;\n</code></pre>\n\n<p>I am also not certain why you want to use perl for something so simple, you could just run a batchfile.</p>\n\n<p>Should you want to keep the file window open, then run last line as:</p>\n\n<pre><code>my $path1 = `cmd /k $command $cadfix2`;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7633739, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jrOwe.jpg?s=128&g=1", "display_name": "Pradeep Yenkuwale", "link": "https://stackoverflow.com/users/7633739/pradeep-yenkuwale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1512138280, "creation_date": 1512132806, "last_edit_date": 1512136443, "question_id": 47593850, "link": "https://stackoverflow.com/questions/47593850/how-do-i-open-input-file-through-patran-using-start-with-wait-command", "title": "how do i open input file through patran using start with /wait command", "body": "<p>Am using perl to open an .exe file and following is my command</p>\n\n<pre><code>start /wait  C:/Software/Patran_x64/20170/bin/patran.exe D:\\Application_Integration_Files\\Patran\\toPreProcessor.ses\n</code></pre>\n\n<p>This command opens the application but not opening the input file that i have provided as a second parameter and it will hold the command till i close the application.</p>\n\n<p>And the following command opens the application with the input file but it is not holding the command in the command prompt till i close the application.\nHere is the command </p>\n\n<pre><code>start /wait  \"C:/Software/Patran_x64/20170/bin/patran.exe\" \"D:\\Application_Integration_Files\\Patran\\toPreProcessor.ses\"\n</code></pre>\n\n<p>The only difference between both the command is double quotes (\"\"), i want the output like, it should open the application with the input file given and as well as it should hold the command till i close the application (Am using /wait switch to hold the command)</p>\n\n<p>This is my <code>Perl</code> Script</p>\n\n<pre><code>    my $cadfix1=\"C:/Software/Patran_x64/20170/bin/patran.exe\";\n    my $cadfix2=\"D:/Application_Integration_Files/Patran/toPreProcessor.ses\";\n    my $path1 =\"start /wait \".\" \" .\"$cadfix1\" . \" \" .\"$cadfix2\".\"\";\n   #my $path2=\"start /wait \\\"$cadfix1\\\" \\\"$cadfix2\\\"\";\n    system($path1);\n</code></pre>\n\n<p>$path1 and $path2 refers to first and second command as mentioned above.</p>\n\n<p>Please anyone help me with this thank you :)</p>\n"}, {"tags": ["perl", "vmware", "vsphere", "pacemaker", "stonith"], "comments": [{"owner": {"reputation": 1516, "user_id": 8279879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PRPDX.jpg?s=128&g=1", "display_name": "Kyle Ruddy", "link": "https://stackoverflow.com/users/8279879/kyle-ruddy"}, "edited": false, "score": 0, "creation_date": 1512429358, "post_id": 47593644, "comment_id": 82245786, "body": "As a standalone script, I&#39;m not hitting any issues with vmcontrol. I&#39;m not familiar with the other two items. Have you tried running vmcontrol as a standalone script?"}, {"owner": {"reputation": 526, "user_id": 8481953, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8e55deee10d1354662d231ac3caa8390?s=128&d=identicon&r=PG&f=1", "display_name": "rookie09", "link": "https://stackoverflow.com/users/8481953/rookie09"}, "reply_to_user": {"reputation": 1516, "user_id": 8279879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PRPDX.jpg?s=128&g=1", "display_name": "Kyle Ruddy", "link": "https://stackoverflow.com/users/8279879/kyle-ruddy"}, "edited": false, "score": 0, "creation_date": 1512458437, "post_id": 47593644, "comment_id": 82254387, "body": "@KyleRuddy That&#39;s what I&#39;m also planning to do. I&#39;ll report back here once it&#39;s done."}], "answers": [{"comments": [{"owner": {"reputation": 526, "user_id": 8481953, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8e55deee10d1354662d231ac3caa8390?s=128&d=identicon&r=PG&f=1", "display_name": "rookie09", "link": "https://stackoverflow.com/users/8481953/rookie09"}, "edited": false, "score": 0, "creation_date": 1512136168, "post_id": 47594763, "comment_id": 82146940, "body": "Thx, but the script <code>vmcontrol.pl</code> is part of VMware&#39;s vSphere CLI product, and I don&#39;t want to touch/patch that at all."}], "tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": false, "score": 0, "last_activity_date": 1512135850, "creation_date": 1512135850, "answer_id": 47594763, "question_id": 47593644, "link": "https://stackoverflow.com/questions/47593644/warning-in-vsphere-cli-use-of-uninitialized-value-hostname/47594763#47594763", "title": "warning in vSphere CLI: Use of uninitialized value $hostname", "body": "<p>Can you try this one instead.</p>\n\n<pre><code>sub reset_vm {\n   foreach $mor_host(@$vm_views) {\n     my $hostname = Vim::get_view(mo_ref =&gt; $mor_host-&gt;runtime-&gt;host, properties =&gt; );\n      eval {\n        $_-&gt;ResetVM();\n        Util::trace(0, \"\\nvirtual machine '\" . $_-&gt;name . \"' under host\".\n                                \" $hostname reset successfully \");\n      };\n</code></pre>\n"}], "owner": {"reputation": 526, "user_id": 8481953, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8e55deee10d1354662d231ac3caa8390?s=128&d=identicon&r=PG&f=1", "display_name": "rookie09", "link": "https://stackoverflow.com/users/8481953/rookie09"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512135850, "creation_date": 1512132116, "last_edit_date": 1512132678, "question_id": 47593644, "link": "https://stackoverflow.com/questions/47593644/warning-in-vsphere-cli-use-of-uninitialized-value-hostname", "title": "warning in vSphere CLI: Use of uninitialized value $hostname", "body": "<p>I am using <a href=\"https://my.vmware.com/de/web/vmware/details?productId=614&amp;downloadGroup=VS-CLI-65\" rel=\"nofollow noreferrer\">vSphere CLI 6.5.0</a> for resetting a VM from a Perl script. This is in the context a (proprietary) STONITH plugin for Pacemaker.</p>\n\n<p>Immediately after STONITH, <code>journalctl -u pacemaker</code> reports a warning in <code>vmcontrol.pl</code>, which belongs to vSphere CLI. The warning is reported by <code>fence_legacy</code>, which belongs to Pacemaker.</p>\n\n<pre><code>Use of uninitialized value $hostname in concatenation (.) or string at \n/opt/vmware-vsphere-cli-distrib/apps/vm/vmcontrol.pl line 168.\n</code></pre>\n\n<p>The error occurs in a call to <code>UTIL::trace</code> in this context:</p>\n\n<pre><code>sub reset_vm {\n   foreach (@$vm_views) {\n      my $mor_host = $_-&gt;runtime-&gt;host;\n      my $hostname = Vim::get_view(mo_ref =&gt; $mor_host)-&gt;name;\n      eval {\n        $_-&gt;ResetVM();\n        Util::trace(0, \"\\nvirtual machine '\" . $_-&gt;name . \"' under host\".\n                                  \" $hostname reset successfully \");\n      };\n</code></pre>\n\n<p>I am wondering whether this is a feature or a bug. Could it be that <a href=\"https://www.vmware.com/support/developer/viperltoolkit/doc/perl_toolkit_guide_idx.html\" rel=\"nofollow noreferrer\"><code>Vim::get_view</code></a> communicates with VMware at a time where the hostname cannot be reported (and hence <code>$hostname</code> cannot be initialized) because the VM is rebooting? </p>\n\n<p>It sounds unlikely (e.g because the call to <code>ResetVM</code> occurs after the assignment to <code>$hostname</code>), but I suspect something like this is going on, in which case the warning could be ignored. I also suspect that the problem is related to vSphere CLI alone (i.e. is not caused by its use inside a Pacemaker stack).</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1512122776, "post_id": 47590868, "comment_id": 82138865, "body": "I don&#39;t understand what you are trying to do. Please clarify. What&#39;s the goal?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1512123136, "post_id": 47590868, "comment_id": 82139082, "body": "Maybe setting the record separator <code>$&#47;</code> can make it possible to process the file patient by patient?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512123480, "post_id": 47590868, "comment_id": 82139297, "body": "<code>[START_PATIENTS]</code>... [MAIN_foot\\d+] .... <code>[END_PATIENTS]</code> need to get the particular content."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512124898, "post_id": 47590868, "comment_id": 82140182, "body": "I have updated by question"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512130837, "post_id": 47590868, "comment_id": 82143559, "body": "There is any chance to get"}], "answers": [{"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512126564, "post_id": 47591861, "comment_id": 82141155, "body": "@ssr1012  means.? If the particular pattern is not present  loop will skips."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512127802, "post_id": 47591861, "comment_id": 82141870, "body": "Don&#39;t consider with entermark its might be a whole content in a single line."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512127867, "post_id": 47591861, "comment_id": 82141900, "body": "In my question the input is for only understanding purpose"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512140141, "post_id": 47591861, "comment_id": 82149531, "body": "Can you apply lookaround (lookbehind and lookafter) in this case?"}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": true, "score": 1, "last_activity_date": 1512134434, "last_edit_date": 1512134434, "creation_date": 1512125620, "answer_id": 47591861, "question_id": 47590868, "link": "https://stackoverflow.com/questions/47590868/instead-of-looping-while-find-a-pattern-fetch-the-particular-content/47591861#47591861", "title": "Instead of looping &#39;while&#39; find a pattern fetch the particular content", "body": "<p>You can use paragraph mode</p>\n\n<pre><code>use warnings;\nuse strict;\n\nlocal $/ = \"\";\n\nwhile(&lt;DATA&gt;)\n{\n    next unless (/(\\[MAIN\\_foot\\d+\\])/i);\n    print ;\n}\n\n\n__DATA__\n[START_PATIENTS]\nBasic communication skills in isolation are insufficient to create\n psychosocial support.[foot2],[foot7] Interpersonal skills build\n on this basic communication skill.[foot2,4]\n[END_PATIENTS]\n\n[START_PATIENTS]\nBasic communication skills in isolation are insufficient\n to create psychosocial support.[MAIN_foot2],[foot7] Interpersonal\n skills build on this basic communication skill.[foot2,4]\n[END_PATIENTS]\n\n[START_PATIENTS]\nBasic communication skills in isolation are insufficient to create\n psychosocial support.[foot12],[foot17] Interpersonal skills build\n on this basic communication skill.[foot2,90]\n[END_PATIENTS]\n</code></pre>\n\n<p>For a scalar </p>\n\n<pre><code>foreach (split(/\\[END_PATIENTS\\]\\n+\\K/,$string))\n{\n    next unless (/(\\[MAIN\\_foot\\d+\\])/i);\n    print ;\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "is_accepted": false, "score": 1, "last_activity_date": 1512134085, "creation_date": 1512134085, "answer_id": 47594246, "question_id": 47590868, "link": "https://stackoverflow.com/questions/47590868/instead-of-looping-while-find-a-pattern-fetch-the-particular-content/47594246#47594246", "title": "Instead of looping &#39;while&#39; find a pattern fetch the particular content", "body": "<p>You could also make use of perl's range operator:</p>\n\n<pre><code>my @set;\nmy $wanted = 0;\nwhile (&lt;$fh&gt;) {\n    my $match = m/^\\[START_PATIENTS\\]$/ ... m/^\\[END_PATIENTS\\]$/;\n    # print $match here to see what it contains\n    if ($match) {\n        push @set, $_;\n        if (m/\\[MAIN_foot\\d+\\]/) {\n            $wanted = 1;\n        }\n        if ($match =~ m/E0$/) {\n            # got end mark\n            if ($wanted) {\n                print for @set;\n            }\n            $wanted = 0;\n            @set = ();\n        }\n    }\n}\n</code></pre>\n\n<p>See <a href=\"https://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow noreferrer\">perldoc perlop - Range operators</a></p>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 47591861, "answer_count": 2, "score": -1, "last_activity_date": 1512134434, "creation_date": 1512122413, "last_edit_date": 1512129530, "question_id": 47590868, "link": "https://stackoverflow.com/questions/47590868/instead-of-looping-while-find-a-pattern-fetch-the-particular-content", "title": "Instead of looping &#39;while&#39; find a pattern fetch the particular content", "body": "<p>I have a <code>*TXT</code> file (More or less 100 mb) and I have a keyword <code>[Main_footnn]</code> need to match in the <code>TXT</code> file</p>\n\n<p>INPUT:</p>\n\n<pre><code>[START_PATIENTS]\nBasic communication skills in isolation are insufficient to create\n psychosocial support.[foot2],[foot7] Interpersonal skills build\n on this basic communication skill.[foot2,4]\n[END_PATIENTS]\n\n[START_PATIENTS]\nBasic communication skills in isolation are insufficient\n to create psychosocial support.[MAIN_foot2],[foot7] Interpersonal\n skills build on this basic communication skill.[foot2,4]\n[END_PATIENTS]\n\n[START_PATIENTS]\nBasic communication skills in isolation are insufficient to create\n psychosocial support.[foot12],[foot17] Interpersonal skills build\n on this basic communication skill.[foot2,90]\n[END_PATIENTS]\n</code></pre>\n\n<blockquote>\n  <p>Note: <em>The above input must be a chance to don't have a entermark might be a whole content in a single line or single entermark we have by patient to patient.</em></p>\n</blockquote>\n\n<p>CODE:</p>\n\n<pre><code>while($content=~m/\\[START\\_PATIENTS\\]((?:(?!\\[END\\_PATIENTS\\]).)*)\\[END\\_PATIENTS\\]/gs)\n{\n    my $fulcnt = $&amp;; my $cont = $1;\n    if($cont=~m/(\\[MAIN\\_foot\\d+\\])/i)\n    {\n        print \"$fulcnt\\n\";\n    }\n}\n</code></pre>\n\n<p>Find a <code>[MAIN_foot\\d+\\]</code> and fetch the particular patient contents only Instead of going by each and every patients through out the file. </p>\n\n<blockquote>\n  <p>For eg. output: <em>[START_PATIENTS]... [MAIN_foot\\d+] .... [END_PATIENTS]</em> need to fetch the output here.</p>\n</blockquote>\n\n<p>OUTPUT:</p>\n\n<pre><code>[START_PATIENTS]\nBasic communication skills in isolation are insufficient\n to create psychosocial support.[MAIN_foot2],[foot7] Interpersonal\n skills build on this basic communication skill.[foot2,4]\n[END_PATIENTS]\n</code></pre>\n"}, {"tags": ["perl", "excel-writer-xlsx"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1512118937, "post_id": 47589793, "comment_id": 82136742, "body": "Don&#39;t use XML::Simple. The library itself tells you not to use it. See <a href=\"https://stackoverflow.com/q/33267765/1030675\">Why is XML::Simple \u201cDiscouraged\u201d?</a> for more details."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1512118991, "post_id": 47589793, "comment_id": 82136780, "body": "@choroba we&#39;ve told them in the last question. Dind&#39;t help. ;)"}, {"owner": {"reputation": 7, "user_id": 9038058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d58161e6baeb79897b6818b33c24b35b?s=128&d=identicon&r=PG&f=1", "display_name": "huang", "link": "https://stackoverflow.com/users/9038058/huang"}, "edited": false, "score": 0, "creation_date": 1512119037, "post_id": 47589793, "comment_id": 82136809, "body": "most of thing i have finished it, now only need to print to the excel file now."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1512119056, "post_id": 47589793, "comment_id": 82136812, "body": "Please <b>don&#39;t post code or error messages as images</b>. We&#39;ve told you this before."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1512119167, "post_id": 47589793, "comment_id": 82136876, "body": "Have you <i>read your error message</i>? Do you know what it means? One of the most important things about programming is paying attention to details. Your error message tells you exactly what&#39;s wrong. Since you cut off the line number, I can&#39;t tell you exactly where the problem is, but it&#39;s fairly obvious. You used something that is a string like it was a hash reference. That won&#39;t work. You are accessing your data structure in a wrong way. Output it again with Data::Dumper and and check what you&#39;re doing."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1512119307, "post_id": 47589793, "comment_id": 82136938, "body": "@simbabque  This is a new account, created today; but the file seems the same as in <a href=\"https://stackoverflow.com/q/47549993/4653379\">yesterday&#39;s post</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1512119318, "post_id": 47589793, "comment_id": 82136943, "body": "Also your code looks like you are really struggling with your task. It seems you copy/pasted a lot and don&#39;t understand what&#39;s going on. There are some things there twice, like the declaration of <code>$xml</code>. This code will not even compile. And the actual problem is that you used your <code>$worksheet</code> in a wrong way."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1512122481, "post_id": 47589793, "comment_id": 82138705, "body": "@zdim Yesterday&#39;s post was originally another question but then edited into a different question. I guess the author couldn&#39;t post another question within 5 days or so, was in a hurry, and then created this new account."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1512129183, "post_id": 47589793, "comment_id": 82142617, "body": "@huang: Please don&#39;t create new accounts just to get round the new-user restrictions. <a href=\"https://stackoverflow.com/questions/47549993/perl-xmlsimple-print-issue#comment82099077_47551350\">As I said to you yesterday</a>, if you contribute to the site then you will quickly accumulate the reputation that you need in order to be able to post more questions."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1512129671, "post_id": 47589793, "comment_id": 82142918, "body": "@huang: You show many signs of trying to write code by cutting and pasting examples from many sources without really understanding what you are doing. This is a recipe for disaster. I urge you to step back from this and take the time to understand the code that you are trying to use. Or, alternatively, admit that this is beyond your current skill level and pay a programmer to do it for you."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512137300, "post_id": 47590255, "comment_id": 82147654, "body": "I wonder, did someone downvote my answer for providing an answer to a question of questionable quality?"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1512120462, "creation_date": 1512120462, "answer_id": 47590255, "question_id": 47589793, "link": "https://stackoverflow.com/questions/47589793/perl-xmlsimple-print-to-excel-file/47590255#47590255", "title": "Perl XML::Simple Print to Excel File", "body": "<p>Your error message says that you are trying to access the string <em>1P00232G01-LF-SS</em> as a hash reference. That comes from this line:</p>\n\n<blockquote>\n<pre><code>print  $data-&gt;{\"ns1:BoardXML\"}-&gt;{\"boardType\"}-&gt;{$worksheet};\n</code></pre>\n</blockquote>\n\n<p>Your <a href=\"https://metacpan.org/pod/Excel::Writer::XLSX#add_worksheet(-$sheetname-)\" rel=\"nofollow noreferrer\"><code>$worksheet</code> is an object</a> that represents the sheet in your Excel file. You cannot use it as a hash key, and the value of <code>$data-&gt;{\"ns1:BoardXML\"}-&gt;{\"boardType\"}</code> is a string. There is no hash reference there to access data from.</p>\n\n<p>You already know how to write (not <em>print</em>) data to your worksheet. You do it above:</p>\n\n<blockquote>\n<pre><code>$worksheet-&gt;write( 0, 1, \"BoardType\", $header );\n</code></pre>\n</blockquote>\n\n<p>Now you need to do the same thing to write your data to the sheet.</p>\n\n<pre><code>$worksheet-&gt;write(1, 1, $data -&gt;{\"ns1:BoardXML\"}-&gt;{\"boardType\"}, $format1);\n</code></pre>\n\n<p>Remember that you need to change the row your're writing to. That's now row <code>1</code>, so the first argument to <a href=\"https://metacpan.org/pod/Excel::Writer::XLSX#write(-$row,-$column,-$token,-$format-)\" rel=\"nofollow noreferrer\"><code>write</code></a> needs to change.</p>\n"}], "owner": {"reputation": 7, "user_id": 9038058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d58161e6baeb79897b6818b33c24b35b?s=128&d=identicon&r=PG&f=1", "display_name": "huang", "link": "https://stackoverflow.com/users/9038058/huang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1512120490, "creation_date": 1512118717, "last_edit_date": 1512120490, "question_id": 47589793, "link": "https://stackoverflow.com/questions/47589793/perl-xmlsimple-print-to-excel-file", "title": "Perl XML::Simple Print to Excel File", "body": "<p>Question:\nI want to print the xml data to the excel file, but fail to print to the excel file.</p>\n\n<p>xml file: \ndata.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ns1:BoardTestXMLExport numberOfIndictedComponents=\"11\" testerTestStartTime=\".00000:00\" testTime=\".00000:00\" repairStationId=\"vvts03\" testStatus=\"Reviewed Passed\" testerTestEndTime=\".00000:00\" xmlns:ns1=\"http://tempuri.org/BoardTestXMLExport.xsd\" numberOfIndictedPins=\"0\" numberOfComponentsTested=\"113\" numberOfJointsTested=\"0\" numberOfDefects=\"11\" repairStatus=\"Reviewed Passed\"&gt;\n          &lt;ns1:BoardXML imageId=\"0\" serialNumber=\"R174842442 1P00232G01 R02 1C31228G01 R07 JH1711327\" assemblyRevision=\"1P00232G01-LF-SS\" boardType=\"1P00232G01-LF-SS\" boardRevision=\"1511417735000\"/&gt;\n          &lt;ns1:StationXML testerName=\"huaemsaoi004\" stage=\"V510\"/&gt;\n          &lt;ns1:RepairEventXML numberOfVariationOkDefects=\"0\" numberOfFalseCalledPins=\"0\" numberOfRepairedComponents=\"0\" numberOfVariationOkPins=\"0\" numberOfRepairedPins=\"0\" numberOfRepairLaterPins=\"0\" numberOfFalseCalledDefects=\"11\" numberOfActiveDefects=\"0\" numberOfVariationOkComponents=\"0\" repairEndTime=\"2017-11-23T14:31:05.000+08:00\" repairStartTime=\"2017-11-23T14:30:58.000+08:00\" numberOfRepairLaterDefects=\"0\" repairOperator=\"1066689\" numberOfRepairLaterComponents=\"0\" numberOfActiveComponents=\"0\" numberOfActivePins=\"0\" numberOfRepairedDefects=\"0\" numberOfFalseCalledComponents=\"11\"/&gt;\n          &lt;ns1:TestXML name=\"r1\"&gt;\n                    &lt;ns1:IndictmentXML algorithm=\"rep-3a99979127l-lf\" indictmentType=\"Left off, Right off\"&gt;\n                              &lt;ns1:RepairActionXML repairOperator=\"1066689\" repairTime=\"2017-11-23T14:30:58.000+08:00\" repairActionType=\"-\" indictmentType=\"Left off, Right off\" comment=\"-\" repairStatus=\"False Call\"/&gt;\n                              &lt;ns1:ComponentXML packageId=\"EP-3A99979127L-LF\" partId=\"EP-3A99979127L-LF\" designator=\"r1\"/&gt;\n                    &lt;/ns1:IndictmentXML&gt;\n          &lt;/ns1:TestXML&gt;\n&lt;/ns1:BoardTestXMLExport&gt;\n</code></pre>\n\n<p>my code as below:</p>\n\n<pre><code># use module\n use strict;\n use warnings;\n use XML::Simple;\n use Data::Dumper;\n use Excel::Writer::XLSX;\n\n# create object\n my $xml = XML::Simple-&gt;new;\n\n# create object\n my $xml = XML::Simple-&gt;new;\n\n #create excel object \n my $OutFile = \"Output\". \"\\.\" . \"xlsx\";\n my $workbook  = Excel::Writer::XLSX-&gt;new($OutFile);\n my $worksheet = $workbook-&gt;add_worksheet('SotredProcedures');\n\n # Create a format for the column headings\n my $header = $workbook-&gt;add_format();\n $header-&gt;set_bold();\n $header-&gt;set_color('red');\n# Create a Text Wrap format\n my $format1 = $workbook-&gt;add_format();\n $format1-&gt;set_text_wrap();\n $worksheet-&gt;write(0, 0, \"RepairStationID\", $header);\n $worksheet-&gt;write(0, 1, \"BoardType\", $header);\n $worksheet-&gt;write(0, 2, \"ComponentsTested\", $header);\n $worksheet-&gt;write(0, 3, \"NumberOfDefects\", $header);\n $worksheet-&gt;set_column(0, 1, 12);\n $worksheet-&gt;set_column(1, 2, 20);\n $worksheet-&gt;set_column(1, 3, 20);\n $worksheet-&gt;set_column(1, 4, 20);\n# read XML file\n my $data = $xml-&gt;XMLin(\"data.xml\",KeyAttr=&gt;\"ns1\");\nprint  $data -&gt;{\"ns1:BoardXML\"}-&gt;{\"boardType\"}-&gt;{$worksheet};\n</code></pre>\n\n<p>Result: fail to print the boardtype to the excel file, output as below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/YORdW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YORdW.png\" alt=\"Error message\"></a></p>\n\n<p>how can i do for it?</p>\n"}, {"tags": ["arrays", "database", "perl", "parallel-processing"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 4, "creation_date": 1512118267, "post_id": 47589361, "comment_id": 82136408, "body": "What database do you use? It&#39;s possible that it supports &quot;bulk load&quot;, which is usually the fastest possible way to load data. In such a case, you can use Perl to transform the data into the supported format, and then run the bulk load."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1512119819, "post_id": 47589361, "comment_id": 82137189, "body": "Pretty fundamentally though - if the database is doing the &#39;work&#39; then parallelising the script isn&#39;t going to help."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1512121634, "post_id": 47589361, "comment_id": 82138190, "body": "Just as a side note, Perl 5.10.1 was released in 2007, that will make the version 10 years old."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1512124465, "post_id": 47589361, "comment_id": 82139920, "body": "Another point to look at might be the (auto)commit setting. If possible, try to set <code>autocommit</code> to false and then commit every 1000th row or so. Often that helps a lot."}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 9042821, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--l6NRJ1lbPk/AAAAAAAAAAI/AAAAAAAAA-k/z61qnjeOBK0/photo.jpg?sz=128", "display_name": "Michael Gribskov", "link": "https://stackoverflow.com/users/9042821/michael-gribskov"}, "is_accepted": false, "score": 1, "last_activity_date": 1512213923, "creation_date": 1512213923, "answer_id": 47607392, "question_id": 47589361, "link": "https://stackoverflow.com/questions/47589361/parallel-processing-in-perl-to-write-array-entries-to-db/47607392#47607392", "title": "Parallel processing in perl to write array entries to db", "body": "<p>It looks like you might be using SQLite?  In this case you may find this useful <a href=\"https://medium.com/@JasonWyatt/squeezing-performance-from-sqlite-insertions-971aff98eef2\" rel=\"nofollow noreferrer\">https://medium.com/@JasonWyatt/squeezing-performance-from-sqlite-insertions-971aff98eef2</a></p>\n\n<p>If you are using DBI.pm, you can speed up inserts by preparing the insert statement once with placeholders, then executing multiple times</p>\n\n<pre><code>$sth = $dbh-&gt;prepare(\u201cinsert into table values (?,?,?,?,?,?,?)\u201d);\nfor my $icell (0 .. $#Sheet_Cells_Data){\n    my $Cell_Data_INTER1=$Sheet_Cells_Data[$icell];\n    my @Cell_Data=@$Cell_Data_INTER1;\n    $sth-&gt;execute(@Cell_Data[0]);\n}\n</code></pre>\n\n<p>I find this provides some speed up, but is much faster (hundreds-thousands of times faster) to follow choroba's suggests and write the data to a tab delimited file and load with </p>\n\n<pre><code>LOAD DATA INFILE '/home/user/data/table.tsv' INTO TABLE db_table\n</code></pre>\n\n<p>which is highly optimized for most RDBMS</p>\n\n<p>make sure to give a complete path for the input file as the default is usually a privileged directory used by the RDBMS</p>\n"}, {"tags": [], "owner": {"reputation": 285, "user_id": 2319672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff1340a932140322d41db199c6cf1a4?s=128&d=identicon&r=PG", "display_name": "Dev123", "link": "https://stackoverflow.com/users/2319672/dev123"}, "is_accepted": false, "score": 1, "last_activity_date": 1512758422, "creation_date": 1512758422, "answer_id": 47720371, "question_id": 47589361, "link": "https://stackoverflow.com/questions/47589361/parallel-processing-in-perl-to-write-array-entries-to-db/47720371#47720371", "title": "Parallel processing in perl to write array entries to db", "body": "<p>One way to achieve this parallel processing is using fork.\nSomething like below</p>\n\n<p>Let's say we will make 5 parallel process to do the insert work. Here is the code:</p>\n\n<pre><code>my $max_proc   = 5;\nmy $batch_size = scalar @Sheet_Cells_Data / $max_proc;\nmy $start_point = 0;\n\nfor (1 .. $max_proc) {\n    if (fork()) {\n        #In Parent\n        $start_point += $batch_size;\n    } else {\n        #In Child\n        my $end_point = $start_point + $batch_size -1;\n        for my $i ($start_point .. $end_point){\n           #Do you insert work here\n        }\n\n        exit;\n    }\n}\n</code></pre>\n\n<p>Few points to take care:</p>\n\n<pre><code>1. Wait for all the child process to finish before parent process ends.\n2. You might have to initialize new database connection in each child and close them before child process ends.\n</code></pre>\n"}], "owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1512758422, "creation_date": 1512116993, "question_id": 47589361, "link": "https://stackoverflow.com/questions/47589361/parallel-processing-in-perl-to-write-array-entries-to-db", "title": "Parallel processing in perl to write array entries to db", "body": "<p>I have a program written in perl (Perl Version 5.10.1 running under Linux) that generates an array. Each entry of the array is another array. Each of these last arrays contains a set of 7 values that I need to write to a database. Currently I run a loop over the array of arrays and write the info to the database. As these writes are independent of each other I was thinking that I could run several processes in parallel.</p>\n\n<p>Below is the basic loop I currently use that I would like to split into parallel processes. I need to do this in parallel as the initial array of arrays contains around 100,000 entries, which takes about 30 minutes to add the entries to the database.</p>\n\n<pre><code>for my $icell (0 .. scalar @Sheet_Cells_Data-1){\n    my $Cell_Data_INTER1=$Sheet_Cells_Data[$icell];\n    my @Cell_Data=@$Cell_Data_INTER1;\n    $insert_to_db-&gt;execute($Cell_Data[0],$Cell_Data[1],$Cell_Data[2],$Cell_Data[3],$Cell_Data[4],$Cell_Data[5],$Cell_Data[6]);\n}\n</code></pre>\n\n<p>So, would this be possible and if so how would I go about achieving it.</p>\n\n<p>Any help much appreciated</p>\n\n<p>Chazg76</p>\n"}, {"tags": ["perl", "sockets", "while-loop"], "comments": [{"owner": {"reputation": 37, "user_id": 9037852, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4bf3f7c40af7aae3fcabc416bb05108?s=128&d=identicon&r=PG&f=1", "display_name": "rattus", "link": "https://stackoverflow.com/users/9037852/rattus"}, "edited": false, "score": 0, "creation_date": 1512117131, "post_id": 47588965, "comment_id": 82135907, "body": "I do have a timeout that eventually flushes the socket, but as this is an interactive application, I&#39;d prefer the data sooner, but can&#39;t tighten the timeout for good cases due to occasional poor server communication environments. Using perl v5.18.2"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1512118387, "post_id": 47588965, "comment_id": 82136470, "body": "When you say &quot;<i>eventually flushes the socket</i>&quot; do you mean that the <code>$line</code> does come?  Then -- what is <code>$sock</code>? Is it set to <code>autoflush</code> (or does each expected <code>$line</code> end with <code>\\n</code>)?"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 0, "last_activity_date": 1512125606, "creation_date": 1512125606, "answer_id": 47591855, "question_id": 47588965, "link": "https://stackoverflow.com/questions/47588965/perl-socket-client-wont-recognize-end-of-message/47591855#47591855", "title": "perl socket client won&#39;t recognize end of message", "body": "<p>I think the root of your problem here is that you've got <code>$\\</code> set, which is the output record separator, rather than <code>$/</code> which is the input record separator. </p>\n\n<p>So your <code>while</code> is waiting for a <code>\\n</code> to occur before handing <code>$line</code> onto the rest of the loop. </p>\n\n<p>But failing that, there's also a question of buffering and autoflushing on your socket. </p>\n\n<p>And ... when you say you're monitoring with wireshark, how sure are you that those values are part of the packet content payload rather than part of the packet? Do you actually get <code>\\n</code> sent from the server as part of the packet at any point?</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 9037852, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4bf3f7c40af7aae3fcabc416bb05108?s=128&d=identicon&r=PG&f=1", "display_name": "rattus", "link": "https://stackoverflow.com/users/9037852/rattus"}, "edited": false, "score": 0, "creation_date": 1512173061, "post_id": 47600528, "comment_id": 82165215, "body": "Huh. I tried that and died of a premature EOF, even with a small buffer size. ($rv is not defined)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 37, "user_id": 9037852, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4bf3f7c40af7aae3fcabc416bb05108?s=128&d=identicon&r=PG&f=1", "display_name": "rattus", "link": "https://stackoverflow.com/users/9037852/rattus"}, "edited": false, "score": 0, "creation_date": 1512173126, "post_id": 47600528, "comment_id": 82165231, "body": "That means there&#39;s was stuff after the end of the message (after the CR or the <code>C6</code>)"}, {"owner": {"reputation": 37, "user_id": 9037852, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4bf3f7c40af7aae3fcabc416bb05108?s=128&d=identicon&r=PG&f=1", "display_name": "rattus", "link": "https://stackoverflow.com/users/9037852/rattus"}, "edited": false, "score": 0, "creation_date": 1512173253, "post_id": 47600528, "comment_id": 82165260, "body": "wow - that was fast! Yes, there&#39;s an x0D. Actually, a more clearly defined end might be R02...C6\\n."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 37, "user_id": 9037852, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4bf3f7c40af7aae3fcabc416bb05108?s=128&d=identicon&r=PG&f=1", "display_name": "rattus", "link": "https://stackoverflow.com/users/9037852/rattus"}, "edited": false, "score": 0, "creation_date": 1512173321, "post_id": 47600528, "comment_id": 82165268, "body": "No idea what &quot;R02..C6\\n&quot; means, but feel free to adjust"}, {"owner": {"reputation": 37, "user_id": 9037852, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4bf3f7c40af7aae3fcabc416bb05108?s=128&d=identicon&r=PG&f=1", "display_name": "rattus", "link": "https://stackoverflow.com/users/9037852/rattus"}, "edited": false, "score": 0, "creation_date": 1512173631, "post_id": 47600528, "comment_id": 82165328, "body": "It&#39;s the complete termination string; it occurred to me that C6 may occur in the &quot;natural&quot; data being returned."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1512157814, "creation_date": 1512157814, "answer_id": 47600528, "question_id": 47588965, "link": "https://stackoverflow.com/questions/47588965/perl-socket-client-wont-recognize-end-of-message/47600528#47600528", "title": "perl socket client won&#39;t recognize end of message", "body": "<p>You don't exit when you receive <code>C6</code> without receiving a Carriage Return (or EOF) because your code always waits for a Carriage Return (or EOF). Fix:</p>\n\n<pre><code># sysread returns as soon as data is available, so this is a just a maximum.\nuse constant BLOCK_SIZE =&gt; 4*1024*1024;\n\nmy $buf = '';\nwhile (1) {\n   my $rv = sysread($sock, $buf, length($buf), 4*1024*1024);\n   die($!) if !defined($rv);\n   last if !$rv;\n\n   process_message($1)\n      while $buf =~ s/^( (?: [^C\\x0D] | C (?=[^6]) )*+ (?: C6 | \\x0D ) )//xs;\n}\n\ndie(\"Premature EOF\") if length($buf);\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 9037852, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4bf3f7c40af7aae3fcabc416bb05108?s=128&d=identicon&r=PG&f=1", "display_name": "rattus", "link": "https://stackoverflow.com/users/9037852/rattus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 1, "accepted_answer_id": 47591855, "answer_count": 2, "score": 1, "last_activity_date": 1512157814, "creation_date": 1512115249, "last_edit_date": 1512116152, "question_id": 47588965, "link": "https://stackoverflow.com/questions/47588965/perl-socket-client-wont-recognize-end-of-message", "title": "perl socket client won&#39;t recognize end of message", "body": "<p>I am running a simple perl socket client that queries a server, and then tries to close the socket once a keyword or phrase is encountered.</p>\n\n<pre><code>...\nlocal $\\ = \"\\x{0d}\";\nwhile($line = &lt;$sock&gt;){\n  print $line.\"\\n\";\n  last if ($line =~ /C6/);\n}\n...\nclose($sock);\n</code></pre>\n\n<p>I'd be happy to terminate on either the  (0x0d) or the \"C6\" string - they both terminate the message. I'm monitoring it with Wireshark, and both triggers occur at the end of the message, yet I can't break out of the while loop, either with a break or last, nor does $line ever print.</p>\n\n<p>Ideas? TIA</p>\n"}, {"tags": ["perl", "activeperl", "wxperl"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9037078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a7454ca3d7a7859b80554d926c35930?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/9037078/matt"}, "edited": false, "score": 0, "creation_date": 1512194476, "post_id": 47594393, "comment_id": 82168795, "body": "Thanks daxim. I downgraded and able to install Wx module but I still cannot use it. Please see error below.  \u201cCant\u2019 load \u2018C:/Perl/site/lib/auto/Wx/Wx.dll\u2019 for module Wx:load_file:The specified module could not be found at C:/Perl/lib/DynaLoader.pm line 191."}, {"owner": {"reputation": 15, "user_id": 9037078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a7454ca3d7a7859b80554d926c35930?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/9037078/matt"}, "edited": false, "score": 0, "creation_date": 1512280309, "post_id": 47594393, "comment_id": 82189647, "body": "I have since opened a new question: <a href=\"https://stackoverflow.com/questions/47615672/unable-to-run-perl-code-generated-from-wxglade\" title=\"unable to run perl code generated from wxglade\">stackoverflow.com/questions/47615672/&hellip;</a>"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 1, "last_activity_date": 1512134574, "creation_date": 1512134574, "answer_id": 47594393, "question_id": 47588890, "link": "https://stackoverflow.com/questions/47588890/unable-to-install-wxperl-module/47594393#47594393", "title": "Unable to install WxPerl module", "body": "<p><a href=\"http://ppm.wxperl.it/\" rel=\"nofollow noreferrer\">http://ppm.wxperl.it/</a> \u2192</p>\n\n<blockquote>\n  <p>Perl Supported: 5.8 - 5.16</p>\n</blockquote>\n\n<p>Either you downgrade or ask mdootson to package for newer versions.</p>\n"}], "owner": {"reputation": 15, "user_id": 9037078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a7454ca3d7a7859b80554d926c35930?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/9037078/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 47594393, "answer_count": 1, "score": 0, "last_activity_date": 1512134574, "creation_date": 1512114798, "question_id": 47588890, "link": "https://stackoverflow.com/questions/47588890/unable-to-install-wxperl-module", "title": "Unable to install WxPerl module", "body": "<p>I am trying to install WxPerl in ActivePerl but the module just won't install.</p>\n\n<p>I am following installation guide here <a href=\"http://www.wxperl.it/p/download.html\" rel=\"nofollow noreferrer\">http://www.wxperl.it/p/download.html</a></p>\n\n<p>I'm on Windows 10 64 bit and using Activeperl Community Edition 5.26.0 64 bit</p>\n\n<p>I tried command below but WxPerl module was not added to ActivePerl modules.</p>\n\n<pre><code>C:\\WINDOWS\\system32&gt;ppm repo add wxPerl http://www.wxperl.co.uk/repo29\nDownloading ActiveState Package Repository packlist...not found\nDownloading wxPerl packlist...done\nUpdating wxPerl database...done\nRepo 3 added.\n</code></pre>\n"}, {"tags": ["bash", "shell", "perl", "scripting"], "comments": [{"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1512096282, "post_id": 47585522, "comment_id": 82129430, "body": "Your question looks a bit terse at the moment. Kindly consider adding more detail."}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 3, "creation_date": 1512096877, "post_id": 47585522, "comment_id": 82129575, "body": "Welcome to StackOverflow! I&#39;d love to take a go at answering this question, but there isn&#39;t enough in the question for me to understand what you&#39;re actually looking for.  If you want to do something in bash, please include the bash code you&#39;ve written so far, explain precisely what you want it to do, give an example of the output you&#39;re getting (based on the input you&#39;ll include in the question) along with the output you&#39;re looking for."}, {"owner": {"reputation": 33, "user_id": 1144139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bd8932618d9b848434ba8aa14d7f83f?s=128&d=identicon&r=PG", "display_name": "Shiv", "link": "https://stackoverflow.com/users/1144139/shiv"}, "edited": false, "score": 0, "creation_date": 1512115131, "post_id": 47585522, "comment_id": 82135002, "body": "sjsam@ / ghoti@ , I rephrased question. Hope it is better now"}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1512137510, "post_id": 47585522, "comment_id": 82147814, "body": "Okay, this is a little clearer now. How much space exists between the <code>@Prop</code> line to be modified and the <code>public void</code> line which contains the replacement text?"}, {"owner": {"reputation": 33, "user_id": 1144139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bd8932618d9b848434ba8aa14d7f83f?s=128&d=identicon&r=PG", "display_name": "Shiv", "link": "https://stackoverflow.com/users/1144139/shiv"}, "edited": false, "score": 0, "creation_date": 1512142324, "post_id": 47585522, "comment_id": 82150959, "body": "In my case, there are 4 more lines. Aside, the solution suggested by thanasisp@ works irrespective of how many lines are in between."}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1512157222, "post_id": 47585522, "comment_id": 82159268, "body": "That solution only works on systems with <code>tac</code> installed."}, {"owner": {"reputation": 33, "user_id": 1144139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bd8932618d9b848434ba8aa14d7f83f?s=128&d=identicon&r=PG", "display_name": "Shiv", "link": "https://stackoverflow.com/users/1144139/shiv"}, "edited": false, "score": 0, "creation_date": 1512246720, "post_id": 47585522, "comment_id": 82182713, "body": "ghoti@, if <code>tac</code> is not available, there are alternatives like <code>tail -r</code> e.g. on Mac"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 1144139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bd8932618d9b848434ba8aa14d7f83f?s=128&d=identicon&r=PG", "display_name": "Shiv", "link": "https://stackoverflow.com/users/1144139/shiv"}, "edited": false, "score": 0, "creation_date": 1512113047, "post_id": 47586291, "comment_id": 82134124, "body": "thanasisp@, you and <code>awk</code> are the saviors :) I can&#39;t thank you enough. And unfortunately I can not upvote due to lack of reputation."}], "tags": [], "owner": {"reputation": 5595, "user_id": 7589636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56ef5874ad2fe0d21f9d28ba4badc76b?s=128&d=identicon&r=PG&f=1", "display_name": "thanasisp", "link": "https://stackoverflow.com/users/7589636/thanasisp"}, "is_accepted": true, "score": 1, "last_activity_date": 1512136275, "last_edit_date": 1512136275, "creation_date": 1512099432, "answer_id": 47586291, "question_id": 47585522, "link": "https://stackoverflow.com/questions/47585522/how-to-substitute-a-pattern-with-different-strings-in-multiple-files/47586291#47586291", "title": "How to substitute a pattern with different strings in multiple files", "body": "<p>You can do it with the help of <code>tac</code> which prints the file in reversed order, so we call it again at the end.</p>\n\n<pre><code>tac file | awk '/^public void/ {v=$3; sub(/\\(\\)/,\"\",v)}\n     /^@Prop\\(name = \\\"Operation\\\"/ {sub(/search_pattern/,v,$0)} 1' |tac\n</code></pre>\n\n<p><a href=\"http://www.gnu.org/software/gawk/manual/html_node/String-Functions.html\" rel=\"nofollow noreferrer\">here</a> you can see for the <code>awk</code> function <code>sub</code>. <code>1</code> at the end means to print.</p>\n\n<p>So for example if you want to do it for all <code>*.java</code> in a directory, you can run something like this:</p>\n\n<pre><code>for f in *.java ; do\n    tac \"$f\" | awk '/^public void/ {v=$3; sub(/\\(\\)/,\"\",v)}\n         /^@Prop\\(name = \\\"Operation\\\"/ {sub(/search_pattern/,v,$0)}\n         1' |tac &gt; temp &amp;&amp; mv temp \"$f\"\ndone\n</code></pre>\n\n<p>the last <code>mv</code> command replaces the file without prompt so you must have tested without it before running.</p>\n"}], "owner": {"reputation": 33, "user_id": 1144139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bd8932618d9b848434ba8aa14d7f83f?s=128&d=identicon&r=PG", "display_name": "Shiv", "link": "https://stackoverflow.com/users/1144139/shiv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 47586291, "answer_count": 1, "score": 0, "last_activity_date": 1512142414, "creation_date": 1512093343, "last_edit_date": 1512142414, "question_id": 47585522, "link": "https://stackoverflow.com/questions/47585522/how-to-substitute-a-pattern-with-different-strings-in-multiple-files", "title": "How to substitute a pattern with different strings in multiple files", "body": "<p>I'm in the process of adding java annotations to multiple test files. I have to do this for test methods in multiple files for over 100+ places.</p>\n\n<p>Using some scripting/regular expressions, I have got the annotations in place. Remaining part is providing attribute values for these annotations e.g. as in the case below, I need to replace <code>value = \"search_pattern\"</code> with <code>value=\"replace_string1\"</code> where <code>replace_string1</code> is the name of function for which the annotation is being added (it appears few lines below the annotation, see the snippet for reference). </p>\n\n<p>Each file can have multiple functions to apply annotations, and there are many such files. </p>\n\n<p>Is there a way to script this?</p>\n\n<p>I haven't found any luck with <code>sed</code> yet and I don't want to do all of this manually.</p>\n\n<pre><code>@Prop(name = \"Operation\", value = \"search_pattern\")\n...\n@Test\npublic void replace_string1() {\n    ...     \n }\n\n@Prop(name = \"Operation\", value = \"search_pattern\")\n...\n@Test\npublic void replace_string2() {\n\n}\n</code></pre>\n"}, {"tags": ["perl", "lwp"], "comments": [{"owner": {"reputation": 95, "user_id": 1239079, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f2e004d0160be23972c8887020800bf4?s=128&d=identicon&r=PG", "display_name": "naf", "link": "https://stackoverflow.com/users/1239079/naf"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1512080603, "post_id": 47583515, "comment_id": 82124838, "body": "i have tried this  my $ua = LWP::UserAgent-&gt;new( ssl_opts =&gt; { verify_hostname =&gt; 1 } ); $ua-&gt;agent(&#39;Mozilla/5.0&#39;);  what i cant figure out is how do is save the image  to specified folder like getstore . from what i have read i cant use getstore with LWP::UserAgent."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 1239079, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f2e004d0160be23972c8887020800bf4?s=128&d=identicon&r=PG", "display_name": "naf", "link": "https://stackoverflow.com/users/1239079/naf"}, "edited": false, "score": 0, "creation_date": 1512080617, "post_id": 47583558, "comment_id": 82124846, "body": "i have tried this  my $ua = LWP::UserAgent-&gt;new( ssl_opts =&gt; { verify_hostname =&gt; 1 } ); $ua-&gt;agent(&#39;Mozilla/5.0&#39;);  what i cant figure out is how do is save the image  to specified folder like getstore . from what i have read i cant use getstore with LWP::UserAgent."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1512080254, "creation_date": 1512080254, "answer_id": 47583558, "question_id": 47583515, "link": "https://stackoverflow.com/questions/47583515/need-to-rewrite-this-perl-function-as-libperl-useragent-is-blocked/47583558#47583558", "title": "need to rewrite this perl function . as libperl UserAgent is blocked", "body": "<pre><code>my $ua = LWP::UserAgent-&gt;new( agent =&gt; 'Mozilla/5.0' );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 4, "last_activity_date": 1512080853, "creation_date": 1512080853, "answer_id": 47583676, "question_id": 47583515, "link": "https://stackoverflow.com/questions/47583515/need-to-rewrite-this-perl-function-as-libperl-useragent-is-blocked/47583676#47583676", "title": "need to rewrite this perl function . as libperl UserAgent is blocked", "body": "<p>I'm not sure why you're messing around with SSL options. Hostname verification has nothing to do with HTTP headers.</p>\n\n<p>What you need is something like</p>\n\n<pre><code>my $ua = LWP::UserAgent-&gt;new(agent =&gt; 'Mozilla/5.0');\n</code></pre>\n\n<p>to set the <a href=\"https://metacpan.org/pod/LWP::UserAgent#agent\" rel=\"nofollow noreferrer\"><code>agent</code></a> attribute.</p>\n\n<p>To replicate the <a href=\"https://metacpan.org/pod/LWP::Simple#getstore\" rel=\"nofollow noreferrer\"><code>getstore</code></a> function (from <a href=\"https://metacpan.org/pod/LWP::Simple\" rel=\"nofollow noreferrer\"><code>LWP::Simple</code></a>) with your <code>$ua</code> object, you need to do something like this:</p>\n\n<pre><code>unless ($ua-&gt;request(HTTP::Request-&gt;new('GET' =&gt; $image), $savepath.$filename)-&gt;is_success) {\n    ...\n}\n</code></pre>\n\n<p>See the <a href=\"https://metacpan.org/pod/LWP::UserAgent#request\" rel=\"nofollow noreferrer\"><code>request</code></a> method.</p>\n\n<p>Or maybe consider using <a href=\"https://metacpan.org/pod/LWP::UserAgent#mirror\" rel=\"nofollow noreferrer\"><code>mirror</code></a>:</p>\n\n<pre><code>$ua-&gt;mirror($your_url, $your_filename)\n</code></pre>\n\n<p>It behaves a bit differently, though.</p>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 4, "last_activity_date": 1512087567, "creation_date": 1512087567, "answer_id": 47584772, "question_id": 47583515, "link": "https://stackoverflow.com/questions/47583515/need-to-rewrite-this-perl-function-as-libperl-useragent-is-blocked/47584772#47584772", "title": "need to rewrite this perl function . as libperl UserAgent is blocked", "body": "<p><a href=\"https://metacpan.org/source/OALDERS/libwww-perl-6.29/lib/LWP/Simple.pm#L28\" rel=\"nofollow noreferrer\">LWP::Simple has a package variable</a> with the user agent. </p>\n\n<p>You can use that to change your agent string and still use <code>getstore</code>. </p>\n\n<pre><code>use LWP::Simple;\n\n$LWP::Simple::ua-&gt;agent(\"Mozilla...\");\ngetstore($url, $file);\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 1239079, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f2e004d0160be23972c8887020800bf4?s=128&d=identicon&r=PG", "display_name": "naf", "link": "https://stackoverflow.com/users/1239079/naf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1512087567, "creation_date": 1512080001, "last_edit_date": 1512080963, "question_id": 47583515, "link": "https://stackoverflow.com/questions/47583515/need-to-rewrite-this-perl-function-as-libperl-useragent-is-blocked", "title": "need to rewrite this perl function . as libperl UserAgent is blocked", "body": "<p>One of the hosts I deal with is blocking me from downloading images from their site. I have spoken to them and they have asked me to change the user-agent <code>libwww-perl/</code> to <code>Mozilla/5.0</code>. The image links are http and https.</p>\n\n<p>I have tried various options like </p>\n\n<pre><code>my $ua = LWP::UserAgent-&gt;new();\n$ua-&gt;ssl_opts( verify_hostnames =&gt; 0 );\n</code></pre>\n\n<p>But I can't get it to work with <code>getstore</code>. Would appreciate any help.</p>\n\n<pre><code>    sub storeimage {\n  my $image = shift;\n  if ($image =~ m#^https?://.+\\/(.+\\.)([a-z]+)$#i) {\n    my $ext = $2;\n    my $filename = \"$1$2\";\n    if (exists $wantedfiles{$ext}) {\n      my $savepath = $localwantedpath.$wantedfiles{$ext};\n      if (!-f $savepath.$filename) {\n        unless (is_success(getstore($image, $savepath.$filename))) {\n          _warn(\"Couldn't download file $image to $savepath.\");\n          return '';\n        }\n\n    if ( $ext =~ /jpg|jpeg/oi ) {\n      system(\"mogrify -resize '800&gt;' -quality 70 $savepath$filename\");\n\n      #mogrify -resize 800x800  -quality 70 -format jpg $imageloc\n    }\n\n      }\n      return $wantedfiles{$ext}.$filename;\n\n    }\n  }\n  return '';\n}\n</code></pre>\n"}, {"tags": ["arrays", "perl", "hash"], "answers": [{"comments": [{"owner": {"reputation": 293, "user_id": 6878574, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2721dd31ca4fb59a161189cb5c7cca9a?s=128&d=identicon&r=PG&f=1", "display_name": "J0HN_TIT0R", "link": "https://stackoverflow.com/users/6878574/j0hn-tit0r"}, "edited": false, "score": 0, "creation_date": 1512076455, "post_id": 47582656, "comment_id": 82123052, "body": "Would this work the same? I prefer to use arrow notation: @{ $hashRef-&gt;{@keys} }"}, {"owner": {"reputation": 293, "user_id": 6878574, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2721dd31ca4fb59a161189cb5c7cca9a?s=128&d=identicon&r=PG&f=1", "display_name": "J0HN_TIT0R", "link": "https://stackoverflow.com/users/6878574/j0hn-tit0r"}, "edited": false, "score": 0, "creation_date": 1512076793, "post_id": 47582656, "comment_id": 82123206, "body": "Ah I see, but this will still be equivalent right: @{ $hashRef }{@keys}"}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "reply_to_user": {"reputation": 293, "user_id": 6878574, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2721dd31ca4fb59a161189cb5c7cca9a?s=128&d=identicon&r=PG&f=1", "display_name": "J0HN_TIT0R", "link": "https://stackoverflow.com/users/6878574/j0hn-tit0r"}, "edited": false, "score": 0, "creation_date": 1512076811, "post_id": 47582656, "comment_id": 82123211, "body": "Yup. You&#39;ve got it."}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": true, "score": 5, "last_activity_date": 1512077442, "last_edit_date": 1512077442, "creation_date": 1512076140, "answer_id": 47582656, "question_id": 47582641, "link": "https://stackoverflow.com/questions/47582641/how-to-efficiently-get-an-array-of-values-from-a-referenced-hash-and-an-array-of/47582656#47582656", "title": "How to efficiently get an array of values from a referenced hash and an array of keys in perl?", "body": "<p>Easily:</p>\n\n<pre><code>my @values = @$hashRef{@keys};\n</code></pre>\n\n<p>Or, on Perl 5.24+:</p>\n\n<pre><code>my @values = $hashRef-&gt;@{@keys};\n</code></pre>\n\n<p>Or, on Perl 5.20+ by enabling some additional features:</p>\n\n<pre><code>use feature qw(postderef);\nno warnings qw(experimental::postderef);\n\nmy @values = $hashRef-&gt;@{@keys};\n</code></pre>\n\n<p>This takes advantage of the fact that you can get the values for multiple keys (a \"slice\") of a <code>%hash</code> with the <code>@hash{LIST}</code> syntax. You just have to dereference it first. See <a href=\"https://perldoc.perl.org/perldata.html#Slices\" rel=\"nofollow noreferrer\">perldoc</a> for more information.</p>\n"}], "owner": {"reputation": 293, "user_id": 6878574, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2721dd31ca4fb59a161189cb5c7cca9a?s=128&d=identicon&r=PG&f=1", "display_name": "J0HN_TIT0R", "link": "https://stackoverflow.com/users/6878574/j0hn-tit0r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 47582656, "answer_count": 1, "score": 2, "last_activity_date": 1512077442, "creation_date": 1512076070, "question_id": 47582641, "link": "https://stackoverflow.com/questions/47582641/how-to-efficiently-get-an-array-of-values-from-a-referenced-hash-and-an-array-of", "title": "How to efficiently get an array of values from a referenced hash and an array of keys in perl?", "body": "<p>I currently have an referenced hash and an array of keys that the hash contains. I want to get an array of the values corresponding to my array of keys.</p>\n\n<p>I know how to do this in multiple lines:</p>\n\n<pre><code># Getting hash reference and array of keys.\nmy $hashRef = {\n    one   =&gt; 'foo',\n    two   =&gt; 'bar',\n    three =&gt; 'baz'\n};\nmy @keys = ('one', 'three');\n\n# Getting corresponding array of values.\nmy @values;\nforeach my $key (@keys) {\n    push @values, $hashRef-&gt;{$key};\n}\n</code></pre>\n\n<p>However, I believe that there must be a much better way that doesn't make use of a loop. But unfortunately I just can't figure it out. How can I efficiently \nget an array of values from a referenced hash and an array of keys; ideally in one line if possible?</p>\n"}, {"tags": ["perl", "build", "yocto"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 2057745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d27a8ae751dcc9f6b45b5628b220a84?s=128&d=identicon&r=PG", "display_name": "Greg S", "link": "https://stackoverflow.com/users/2057745/greg-s"}, "edited": false, "score": 0, "creation_date": 1512088702, "post_id": 47580024, "comment_id": 82127507, "body": "Sorry for the dumb question, is this on the build machine or is this target code? I am building on x86_64 for Armv7."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 69, "user_id": 2057745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d27a8ae751dcc9f6b45b5628b220a84?s=128&d=identicon&r=PG", "display_name": "Greg S", "link": "https://stackoverflow.com/users/2057745/greg-s"}, "edited": false, "score": 0, "creation_date": 1512096388, "post_id": 47580024, "comment_id": 82129443, "body": "I don&#39;t understand the question. If you installed a module using one <code>perl</code> and you use the module in a different <code>perl</code>, you can get this problem. You need to (re)install the module using the new <code>perl</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 69, "user_id": 2057745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d27a8ae751dcc9f6b45b5628b220a84?s=128&d=identicon&r=PG", "display_name": "Greg S", "link": "https://stackoverflow.com/users/2057745/greg-s"}, "edited": false, "score": 0, "creation_date": 1512096545, "post_id": 47580024, "comment_id": 82129484, "body": "The only time you don&#39;t is if you upgrade the release but not the version of <code>perl</code> (and use the same configuration for the new release as you used for the original release)."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1512065620, "creation_date": 1512065620, "answer_id": 47580024, "question_id": 47578398, "link": "https://stackoverflow.com/questions/47578398/yocto-complains-about-perl-lib-mistmatch/47580024#47580024", "title": "Yocto complains about perl lib mistmatch", "body": "<p>The build of Perl that is attempting to load the module is different than the build of Perl that installed (compiled) it.</p>\n\n<p><a href=\"http://perldoc.perl.org/perldiag.html\" rel=\"nofollow noreferrer\">perldiag</a>:</p>\n\n<blockquote>\n  <p>(P) A dynamic loading library <code>.so</code> or <code>.dll</code> was being loaded into the\n  process that was built against a different build of perl than the\n  said library was compiled against.  Reinstalling the XS module will\n  likely fix this error.</p>\n</blockquote>\n"}], "owner": {"reputation": 69, "user_id": 2057745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d27a8ae751dcc9f6b45b5628b220a84?s=128&d=identicon&r=PG", "display_name": "Greg S", "link": "https://stackoverflow.com/users/2057745/greg-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512065620, "creation_date": 1512060171, "question_id": 47578398, "link": "https://stackoverflow.com/questions/47578398/yocto-complains-about-perl-lib-mistmatch", "title": "Yocto complains about perl lib mistmatch", "body": "<p>I am trying to build an operating system using Yocto and the recipe keeps flaking out on a mismatch in Perl libs:</p>\n\n<pre><code>MiscXS.c: loadable library and perl binaries are mismatched (got handshake key 0xde00080, needed 0xdb80080)\n</code></pre>\n\n<p>When it is building qemu. </p>\n\n<p>Any idea which what this actually means? Do I need to \"downgrade\" the perl libs on the build host?</p>\n"}, {"tags": ["linux", "postgresql", "perl", "suse"], "comments": [{"owner": {"reputation": 494, "user_id": 3154336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8vazh.jpg?s=128&g=1", "display_name": "Karim Baidar", "link": "https://stackoverflow.com/users/3154336/karim-baidar"}, "edited": false, "score": 0, "creation_date": 1610055889, "post_id": 47578148, "comment_id": 116019615, "body": "Were you able to find the solution to this problem ?"}], "owner": {"reputation": 1207, "user_id": 3524158, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/eNErY.png?s=128&g=1", "display_name": "mountainclimber11", "link": "https://stackoverflow.com/users/3524158/mountainclimber11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1026, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1512143703, "creation_date": 1512059413, "last_edit_date": 1512143703, "question_id": 47578148, "link": "https://stackoverflow.com/questions/47578148/error-could-not-load-library-libperl-so-postgresql-trying-to-create-extension", "title": "ERROR: could not load library libperl.so, PostgreSQL trying to CREATE EXTENSION plperlu", "body": "<p>I want to use the perl language in a postgres function.</p>\n\n<p>I am attempting to:</p>\n\n<pre><code>CREATE EXTENSION plperlu\n</code></pre>\n\n<p>...via pgAdmin 4 connected to postgres 10 and I get this error:</p>\n\n<pre><code>ERROR:  could not load library \"/var/lib/pgsql10/lib/postgresql/plperl.so\": libperl.so: cannot open shared object file: No such file or directory\nSQL state: XX000\n</code></pre>\n\n<p>I look for the library:</p>\n\n<pre><code>find -name libperl.so\n</code></pre>\n\n<p>...and I see it in these locations:</p>\n\n<pre><code>./usr/lib/perl5/5.18.2/i586-linux-thread-multi/CORE/libperl.so\n./usr/lib/perl5/5.18.2/x86_64-linux-thread-multi/CORE/libperl.so\n</code></pre>\n\n<p>So I conclude that it is already on my server distribution, but isn't in the location postgres is looking so I search and find this link:</p>\n\n<p><a href=\"https://www.postgresql.org/message-id/D960CB61B694CF459DCFB4B0128514C207B2C9DC%40exadv11.host.magwien.gv.at\" rel=\"nofollow noreferrer\">https://www.postgresql.org/message-id/D960CB61B694CF459DCFB4B0128514C207B2C9DC%40exadv11.host.magwien.gv.at</a></p>\n\n<p>...and I am opting do this (from the link above, but I have different paths):\n \"- Add the directory that contains libperl.so to /etc/ld.so.conf and\n  run \"ldconfig\" as root user.  Then start the PostgreSQL server.\"</p>\n\n<p>So I find the config file:</p>\n\n<pre><code>find -name ld.so.conf\n</code></pre>\n\n<p>And get this path:</p>\n\n<pre><code>./etc/ld.so.conf\n</code></pre>\n\n<p>...and edit the file:</p>\n\n<pre><code>vi ./etc/ld.so.conf\n</code></pre>\n\n<p>... and add this path:</p>\n\n<pre><code>./usr/lib/perl5/5.18.2/x86_64-linux-thread-multi/CORE/\n</code></pre>\n\n<p>... load the new config:</p>\n\n<pre><code>ldconfig\n</code></pre>\n\n<p>... restart pg:</p>\n\n<pre><code>systemctl restart postgresql-10.service\n</code></pre>\n\n<p>... run this query:</p>\n\n<pre><code>CREATE EXTENSION plperlu;\n</code></pre>\n\n<p>...and get the same error:</p>\n\n<pre><code>ERROR:  could not load library \"/var/lib/pgsql10/lib/postgresql/plperl.so\": libperl.so: cannot open shared object file: No such file or directory\n    SQL state: XX000\n</code></pre>\n\n<p>...when I replace the previous path and add this path:</p>\n\n<pre><code>/usr/lib/perl5/5.18.2/x86_64-linux-thread-multi/CORE\n</code></pre>\n\n<p>..to <code>ld.so.conf</code>, I get:</p>\n\n<pre><code> ERROR:  could not load library \"/var/lib/pgsql10/lib/postgresql/plperl.so\": /var/lib/pgsql10/lib/postgresql/plperl.so: undefined symbol: Perl_xs_handshake\nSQL state: XX000\n</code></pre>\n\n<p>... a little different error, but I don't know if I am closer or further away.</p>\n\n<p>How do I get PostgreSQL pointed to the correct library so I can use perl?</p>\n\n<p>I have: </p>\n\n<ul>\n<li>PostgreSQL 10.0 on x86_64-pc-linux-gnu, compiled by gcc (GCC) 4.4.7 20120313 (Red Hat 4.4.7-18), 64-bit</li>\n<li>pgAdmin 4 2.0</li>\n<li>SUSE Linux Enterprise 12 64-bit virtual server</li>\n</ul>\n\n<p>UPDATE 1:</p>\n\n<p>I received help from the postgres general email list: The existing perl was likely built using an older OS (which I guess I have) therefore doesn't work (handshake) with a current version of postgres (v10). I hope to update my OS which will update my server OS distribution version of perl, which should be a postgres v10 supported version of perl. I'll try to come back with confirmation/an answer after we upgrade our OS. Any additional color or possible causes welcome though.</p>\n"}, {"tags": ["linux", "perl", "fork", "cgi"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1512057406, "post_id": 47576643, "comment_id": 82111974, "body": "<code>fork()</code> is a POSIX thing, and shouldn&#39;t change between platforms. I&#39;m also pretty sure neither platform will be emulating it. Your problem is likely something else. I would guess buffering on either the web server or client."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1512061852, "post_id": 47576643, "comment_id": 82114894, "body": "@Sobrique: <i>&quot;<code>fork()</code> is a POSIX thing, and shouldn&#39;t change between platforms&quot;</i> That assumes a <i>very</i> limited concept of &quot;platforms&quot;!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512062432, "post_id": 47576643, "comment_id": 82115252, "body": "@danny: You have a <code>return</code> in there, so this is (part of) a subroutine? I think you need to show the calling code. You should take a look at <a href=\"https://perldoc.perl.org/perlfaq8.html#How-do-I-fork-a-daemon-process%3f\" rel=\"nofollow noreferrer\"><code>perldoc -q &#39;How do I fork a daemon process?&#39;</code></a>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1512062951, "post_id": 47576643, "comment_id": 82115550, "body": "@Borodin when the OP is talking about different variants of Linux, then that&#39;s a safe assumption."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1512063622, "post_id": 47576643, "comment_id": 82115950, "body": "@Sobrique: I agree, but I still think your comment is oddly general. There is no guarantee that people will read your comment in context, and I would much prefer <i>&quot;shouldn&#39;t be different across those platforms&quot;</i> or <i>&quot;shouldn&#39;t change across flavours of Linux&quot;</i>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1512064169, "post_id": 47576643, "comment_id": 82116319, "body": "Re &quot;<i>it seems that the parent is waiting for the long-running child to finish before it returns</i>&quot;, How did you arrive to that conclusion?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1512073428, "post_id": 47576643, "comment_id": 82121471, "body": "In the code you show the parent is not going to wait for anything.  After the <code>fork</code>, there are <i>two processes</i> running down the code; one gets into <code>$pid==0</code> branch, the other into <code>else</code>, and they both keep going.  There is no reason for the parent to &quot;wait.&quot;  If this is in a sub (otherwise you&#39;d get a warning for <code>return</code>, with <code>use warnings;</code> on) it will return around the same time as the child is just starting up.  I&#39;d guess that something else, likely with the server, isn&#39;t &quot;porting&quot; right."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1512074111, "post_id": 47576643, "comment_id": 82121850, "body": "Ubuntu doesn&#39;t &quot;<i>emulate</i>&quot; <code>fork</code>, but <a href=\"http://perldoc.perl.org/functions/fork.html\" rel=\"nofollow noreferrer\"><code>fork</code></a> &quot;<i>Does a fork(2) system call to create a new process ...</i>&quot; since the &quot;<i>fork(2) system call</i>&quot; is available."}, {"owner": {"reputation": 125, "user_id": 2258161, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/887b0efe9b941de6bdfe52abad58a787?s=128&d=identicon&r=PG", "display_name": "dannyhmg", "link": "https://stackoverflow.com/users/2258161/dannyhmg"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512153194, "post_id": 47576643, "comment_id": 82157293, "body": "@Borodin, ikegami: see my edits that answer your questions."}], "answers": [{"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 0, "last_activity_date": 1512133522, "last_edit_date": 1512133522, "creation_date": 1512076313, "answer_id": 47582694, "question_id": 47576643, "link": "https://stackoverflow.com/questions/47576643/fork-and-return-without-waiting-for-child-in-perl/47582694#47582694", "title": "Fork and return without waiting for child in perl", "body": "<p>Randal Schwartz's <a href=\"http://www.stonehenge.com/merlyn/LinuxMag/col39.html\" rel=\"nofollow noreferrer\">Watching long processes through CGI</a> provides a useful example. It is straightforward to fork:</p>\n\n<pre><code>if ( my $pid = fork ) {       # parent does\n\n    delete_all();             # clear parameters\n    param( 'session', $session );\n    print redirect( self_url() );\n}\nelsif ( defined $pid ) {    # child does\n\n    close STDOUT;           # so parent can go on\n\n    unless ( open F, \"-|\" ) {\n\n        open STDERR, \"&gt;&amp;=1\";\n        exec \"/usr/sbin/traceroute\", $host;\n        die \"Cannot execute traceroute: $!\";\n    }\n</code></pre>\n\n<p>The rest of the article explains how to help the user keep track of a running job.</p>\n"}], "owner": {"reputation": 125, "user_id": 2258161, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/887b0efe9b941de6bdfe52abad58a787?s=128&d=identicon&r=PG", "display_name": "dannyhmg", "link": "https://stackoverflow.com/users/2258161/dannyhmg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 406, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1512153638, "creation_date": 1512054702, "last_edit_date": 1512153638, "question_id": 47576643, "link": "https://stackoverflow.com/questions/47576643/fork-and-return-without-waiting-for-child-in-perl", "title": "Fork and return without waiting for child in perl", "body": "<p>I have a perl CGI program that uses <code>fork()</code> to launch a child process. The child does some long-running (~60 second) calculations and eventually saves the results in a tmp file. The parent is supposed to return control to the browser, which displays a progress message and checks periodically whether the child has written its tmp file; once the file appears, the results are displayed.  So the code looks like this: </p>\n\n<pre><code># Get a unique name for this job\nmy $guid = Data::GUID-&gt;new;\nmy $id = $guid-&gt;as_hex;\n\n# Do the fork \nmy $pid = fork;\nif (!defined $pid) {\n    die \"cannot fork: $!\";\n\n# Child does this\n} elsif ($pid == 0) {\n    # Do some calculations\n    # Save results in a filename with $id\n\n# Parent does this \n} else {\n    # Return the location of the tmp files to the client\n    return \"Content-Type: text/html\\n\\n\", $id;\n    # Browser uses contents of $id to check for the result file\n}\n</code></pre>\n\n<p>I originally set this up on RedHat Linux, and it worked just fine.  However, now I'm trying to port it to a server running Ubuntu, and it seems that the parent is waiting for the long-running child to finish before it returns. I believe this to be the case because the browser hangs for the duration of the calculation, never shows the progress page, and immediately jumps to the results once the calculation is done.  </p>\n\n<p>I suspect this has something to do with fork emulation, but I'm not certain, and I haven't been able to find a way around it.  Thanks for any suggestions. </p>\n\n<p>EDIT: This code is part of a subroutine - I use CGI::Application, so the calling code just \"uses\" this code. Hence the return statement.  I doubt this accounts for the problem, though, because I haven't touched the code since porting from Red Hat (where it worked) to Linux (where it doesn't). </p>\n"}, {"tags": ["perl", "cpan"], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 4, "last_activity_date": 1512059396, "last_edit_date": 1512059396, "creation_date": 1512057153, "answer_id": 47577418, "question_id": 47576221, "link": "https://stackoverflow.com/questions/47576221/how-can-i-force-the-default-answer-to-all-cpan-questions/47577418#47577418", "title": "How can I force the default answer to all cpan questions?", "body": "<pre><code>PERL_MM_USE_DEFAULT=1 \n</code></pre>\n\n<p>makes compliant modules pick a default rather than asking.</p>\n"}], "owner": {"reputation": 3373, "user_id": 42580, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/822c0c2887d49501fdf285484a05494f?s=128&d=identicon&r=PG", "display_name": "UlfR", "link": "https://stackoverflow.com/users/42580/ulfr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "accepted_answer_id": 47577418, "answer_count": 1, "score": 1, "last_activity_date": 1512059396, "creation_date": 1512053371, "question_id": 47576221, "link": "https://stackoverflow.com/questions/47576221/how-can-i-force-the-default-answer-to-all-cpan-questions", "title": "How can I force the default answer to all cpan questions?", "body": "<p>Is there some <code>--assume-default</code> option to use similar to the <code>--assume-yes</code> in <code>apt-get</code> (see: <a href=\"https://askubuntu.com/questions/672892/\">https://askubuntu.com/questions/672892/</a>).</p>\n\n<p>When installing a module with <code>cpan</code> or many modules from an \"autobundle\" (see: <a href=\"https://stackoverflow.com/questions/47573728/\">How do I re-install a cpan-autobundle</a>) it would be convenient to be able to use the default answer always instead of watching the install and occasionally hit the return-key on my keyboard.</p>\n\n<p>I would like commands like this:</p>\n\n<pre><code>cpan --assume-default MyNewModule\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>ASSUME=default perl -MCPAN -e 'install Bundle::Snapshot_2017_11_30_00'\n</code></pre>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512046452, "post_id": 47573728, "comment_id": 82104664, "body": "Have you looked into the file?"}, {"owner": {"reputation": 532, "user_id": 716119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/64d3d8eb46cc0ed153c42b25a76c131f?s=128&d=identicon&r=PG", "display_name": "SparkeyG", "link": "https://stackoverflow.com/users/716119/sparkeyg"}, "edited": false, "score": 0, "creation_date": 1512068640, "post_id": 47573728, "comment_id": 82118962, "body": "Are you trying to replication the configuration of Machine_A onto Machine_B? If so, you may wish to look at a provisioning utility like chef, ansible, pupper, or salt. This can make building new boxes simple and easy."}], "answers": [{"comments": [{"owner": {"reputation": 3373, "user_id": 42580, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/822c0c2887d49501fdf285484a05494f?s=128&d=identicon&r=PG", "display_name": "UlfR", "link": "https://stackoverflow.com/users/42580/ulfr"}, "edited": false, "score": 0, "creation_date": 1512046891, "post_id": 47574083, "comment_id": 82104937, "body": "Ok. I had a looked at it, but as a perl- newbie it was not as obvious to me as it should have been. Thanks!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 3373, "user_id": 42580, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/822c0c2887d49501fdf285484a05494f?s=128&d=identicon&r=PG", "display_name": "UlfR", "link": "https://stackoverflow.com/users/42580/ulfr"}, "edited": false, "score": 0, "creation_date": 1512053850, "post_id": 47574083, "comment_id": 82109601, "body": "@UlfR no problem. I just wonder <i>how</i> that works. It seems it&#39;s going to read parse the POD, as there is no more code in there."}, {"owner": {"reputation": 3373, "user_id": 42580, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/822c0c2887d49501fdf285484a05494f?s=128&d=identicon&r=PG", "display_name": "UlfR", "link": "https://stackoverflow.com/users/42580/ulfr"}, "edited": false, "score": 0, "creation_date": 1512054102, "post_id": 47574083, "comment_id": 82109778, "body": "After moving the file to another host and trying to run it, it&#39;s not obvious where to put it either. But after putting it in my <code>.cpan&#47;Bundle</code> directory it worked nice and clean."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1589491871, "post_id": 47574083, "comment_id": 109324734, "body": "You might need to use <code>-I.</code> (<code>perl -I. -MCPAN ...</code>) for <code>cpan</code> to locate the generated module (bundle). (&quot;<code>-I.</code>&quot; is dash, uppercase &quot;i&quot;, period)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 6, "last_activity_date": 1512046622, "creation_date": 1512046622, "answer_id": 47574083, "question_id": 47573728, "link": "https://stackoverflow.com/questions/47573728/how-do-i-re-install-a-cpan-autobundle/47574083#47574083", "title": "How do I re-install a cpan-autobundle", "body": "<p>If you open that bundle file with a text editor or <code>perldoc</code>, you'll get instructions.</p>\n\n<blockquote>\n<pre><code>=head1 SYNOPSIS\n\nperl -MCPAN -e 'install Bundle::Snapshot_2017_11_30_00'\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 3373, "user_id": 42580, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/822c0c2887d49501fdf285484a05494f?s=128&d=identicon&r=PG", "display_name": "UlfR", "link": "https://stackoverflow.com/users/42580/ulfr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 996, "favorite_count": 0, "accepted_answer_id": 47574083, "answer_count": 1, "score": 4, "last_activity_date": 1512046622, "creation_date": 1512045527, "question_id": 47573728, "link": "https://stackoverflow.com/questions/47573728/how-do-i-re-install-a-cpan-autobundle", "title": "How do I re-install a cpan-autobundle", "body": "<p>I'm working with backups at the moment and instead of backing up the full disks it would be much more efficient for me just to backup the configuration of the system. So for the perl-section of things I would like to have a way to list installed modules and later reinstall those modules if needed.</p>\n\n<p>I read <a href=\"https://stackoverflow.com/q/115425/42580\">How do I get a list of installed CPAN modules?</a> about how to get the list and when reading <code>perldoc -l install</code> I found this:</p>\n\n<blockquote>\n  <p>You can also use \"cpan\"'s \"-a\" switch to create an autobundle file\n  that \"CPAN.pm\" understands and can use to re-install every module:</p>\n\n<pre><code>$ cpan -a\n</code></pre>\n</blockquote>\n\n<p>So I run <code>cpan -a</code>and the last two rows of the output is:</p>\n\n<pre><code>Wrote bundle file\n    /home/ulf/.cpan/Bundle/Snapshot_2017_11_30_01.pm\n</code></pre>\n\n<p>And <strong>yes</strong> the file exists, but how do I use it to \"re-install every module\" on another host?</p>\n\n<p>Note: I my have some preconceptions about this after working with <a href=\"https://pip.pypa.io/en/stable/user_guide/#requirements-files\" rel=\"nofollow noreferrer\">requirement-files in pip</a> so please bear with me.</p>\n"}, {"tags": ["perl", "xampp"], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512042345, "post_id": 47572474, "comment_id": 82102237, "body": "Actually the AMPP in XAMPP is for <b>A</b>pache, <b>M</b>ariaDB, <b>P</b>HP, and <b>P</b>erl. Dunno what the X is for, though."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 5, "creation_date": 1512043063, "post_id": 47572474, "comment_id": 82102618, "body": "@PerlDuck: <a href=\"https://en.m.wikipedia.org/wiki/XAMPP#Etymology\" rel=\"nofollow noreferrer\"><i>X as an ideographic letter referring to cross\u2011platform</i></a>"}, {"owner": {"reputation": 161, "user_id": 8736481, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2ee6f1b3802270e842e4121b5468892f?s=128&d=identicon&r=PG&f=1", "display_name": "ZKR Devs", "link": "https://stackoverflow.com/users/8736481/zkr-devs"}, "edited": false, "score": 0, "creation_date": 1512066662, "post_id": 47572474, "comment_id": 82117819, "body": "You mean perl code(if any) that we place on the server is handled by the files placed in the perl folder ? You mean perl file contains a perl code executor which handles and runs perl code on the server ?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 161, "user_id": 8736481, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2ee6f1b3802270e842e4121b5468892f?s=128&d=identicon&r=PG&f=1", "display_name": "ZKR Devs", "link": "https://stackoverflow.com/users/8736481/zkr-devs"}, "edited": false, "score": 1, "creation_date": 1512139509, "post_id": 47572474, "comment_id": 82149058, "body": "@MummyDaddy Exactly. And we usually call that \u201cperl code executor\u201d the <i>Perl interpreter</i>. The language is called <i>Perl</i> and the program that runs the scripts written in <i>Perl</i> is called <i>perl</i>."}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 7, "last_activity_date": 1512041587, "creation_date": 1512041587, "answer_id": 47572474, "question_id": 47572374, "link": "https://stackoverflow.com/questions/47572374/what-is-the-use-of-perl-folder-in-xampp-why-it-is-included-in-xampp/47572474#47572474", "title": "What is the use of perl folder in xampp why it is included in xampp?", "body": "<blockquote>\n  <p>XAMPP is a completely free, easy to install Apache distribution containing MariaDB, PHP, and <strong>Perl</strong>. The XAMPP open source package has been set up to be incredibly easy to install and to use.</p>\n</blockquote>\n\n<p>\u2014 <a href=\"https://www.apachefriends.org/index.html\" rel=\"noreferrer\">https://www.apachefriends.org/index.html</a></p>\n\n<p>The Perl folder contains files needed to run server-side code written in Perl.</p>\n"}], "owner": {"reputation": 161, "user_id": 8736481, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2ee6f1b3802270e842e4121b5468892f?s=128&d=identicon&r=PG&f=1", "display_name": "ZKR Devs", "link": "https://stackoverflow.com/users/8736481/zkr-devs"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 716, "favorite_count": 0, "closed_date": 1512057413, "accepted_answer_id": 47572474, "answer_count": 1, "score": -6, "last_activity_date": 1512041587, "creation_date": 1512041296, "question_id": 47572374, "link": "https://stackoverflow.com/questions/47572374/what-is-the-use-of-perl-folder-in-xampp-why-it-is-included-in-xampp", "closed_reason": "Not suitable for this site", "title": "What is the use of perl folder in xampp why it is included in xampp?", "body": "<p>As we know that xampp is for web development but what is the use of perl folder in xampp? Why perl folder is included in xampp? I am beginner and have no idea about the perl folder but i know perl is a programming language.</p>\n\n<p>Can anyone tell?</p>\n"}, {"tags": ["perl", "replace"], "answers": [{"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1512034260, "post_id": 47568828, "comment_id": 82097272, "body": "Could you please explain little bit"}, {"owner": {"reputation": 67, "user_id": 1852707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe73e53a456610a6210851d6222871b?s=128&d=identicon&r=PG", "display_name": "Horst", "link": "https://stackoverflow.com/users/1852707/horst"}, "edited": false, "score": 0, "creation_date": 1512035524, "post_id": 47568828, "comment_id": 82098083, "body": "Thank you for you quick answer. It woks perfect form me."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1512035574, "post_id": 47568828, "comment_id": 82098106, "body": "Things like <code>i</code> can be supplied at runtime by using brackets to turn them on and off again. You can&#39;t do this with <code>g</code> though, because it fundamentally alters the behaviour of the regex engine."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1512035632, "post_id": 47568828, "comment_id": 82098144, "body": "@ssr1012 <code>(?i)</code> is embedded pattern-match modifier as explained in perldoc."}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 13, "last_activity_date": 1512035915, "last_edit_date": 1592644375, "creation_date": 1512030130, "answer_id": 47568828, "question_id": 47568686, "link": "https://stackoverflow.com/questions/47568686/how-to-subsitute-with-variable-options-in-perl-script/47568828#47568828", "title": "How to subsitute with variable options in perl script", "body": "<p>Since you're using <code>/g</code> in all cases you can,</p>\n<pre><code>my $opt = $IgnoreCase ? &quot;(?i)&quot; : &quot;&quot;;\n\n$string =~ s/$opt$source/$replace/g;\n</code></pre>\n<p>More on this subject in <a href=\"https://perldoc.perl.org/perlre.html#(%3f%5ealupimnsx)\" rel=\"noreferrer\"><code>perldoc perlre</code></a></p>\n<blockquote>\n<p>One or more embedded pattern-match modifiers, to be turned on (or turned off if preceded by &quot;-&quot; ) for the remainder of the pattern or the remainder of the enclosing pattern group (if any).</p>\n<p>This is particularly useful for dynamically-generated patterns, such as those read in from a configuration file, taken from an argument, or specified in a table somewhere. Consider the case where some patterns want to be case-sensitive and some do not: The case-insensitive ones merely need to include (?i) at the front of the pattern.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 1852707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe73e53a456610a6210851d6222871b?s=128&d=identicon&r=PG", "display_name": "Horst", "link": "https://stackoverflow.com/users/1852707/horst"}, "edited": false, "score": 0, "creation_date": 1512039349, "post_id": 47570437, "comment_id": 82100436, "body": "Is there a way to this class of options (like /g) variable?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 67, "user_id": 1852707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe73e53a456610a6210851d6222871b?s=128&d=identicon&r=PG", "display_name": "Horst", "link": "https://stackoverflow.com/users/1852707/horst"}, "edited": false, "score": 2, "creation_date": 1512040000, "post_id": 47570437, "comment_id": 82100815, "body": "@Horst: No, because the <code>&#47;g</code> option changes the way the regex engine works in fundamental ways - and once the engine has started up, it&#39;s too late to change it."}, {"owner": {"reputation": 119, "user_id": 963183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c867babb1b402c48e4b9a84f0b82dc?s=128&d=identicon&r=PG", "display_name": "Bruce Van Allen", "link": "https://stackoverflow.com/users/963183/bruce-van-allen"}, "edited": false, "score": 0, "creation_date": 1512412462, "post_id": 47570437, "comment_id": 82237882, "body": "Another way to handle this would be a tertiary operator or an if-else control structure that doesn&#39;t simply provide the appropriate option(s), but goes further and provides the whole regex. Then the /g option could be in one and not the other."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 6, "last_activity_date": 1512035562, "creation_date": 1512035562, "answer_id": 47570437, "question_id": 47568686, "link": "https://stackoverflow.com/questions/47568686/how-to-subsitute-with-variable-options-in-perl-script/47570437#47570437", "title": "How to subsitute with variable options in perl script", "body": "<p>To slightly clarify <a href=\"https://stackoverflow.com/a/47568828/7231\">the excellent answer</a> from <a href=\"https://stackoverflow.com/users/223226/%D0%A1%D1%83%D1%85%D0%BE%D0%B927\">\u0421\u0443\u0445\u043e\u043927</a>:</p>\n\n<p>As you have seen, you can't use a variable in the options section of the <code>s///</code> operator (well, you could if you used <code>eval</code> but that would be a very bad idea).</p>\n\n<p>However, that's not the only way to get options into a regex match. You can also use the <code>(?...)</code> syntax <em>inside</em> the regex string. For example, <code>m/(?i)foo/</code> is exactly the same as <code>m/foo/i</code>. Note that <code>/g</code> is a slightly different class of option, so you can't use that option like this.</p>\n\n<p>But because this <code>(?...)</code> string is just part of the regex, you can use a variable to embed it within your regex.</p>\n\n<pre><code>my $opt = $IgnoreCase ? \"(?i)\" : \"\";\n\n$string =~ s/$opt$source/$replace/g;\n</code></pre>\n\n<p>See <a href=\"https://perldoc.perl.org/perlre.html#Extended-Patterns\" rel=\"noreferrer\">\"Extended Patterns\" in perldoc perlre</a> for more details.</p>\n"}], "owner": {"reputation": 67, "user_id": 1852707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe73e53a456610a6210851d6222871b?s=128&d=identicon&r=PG", "display_name": "Horst", "link": "https://stackoverflow.com/users/1852707/horst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 2, "accepted_answer_id": 47568828, "answer_count": 2, "score": 5, "last_activity_date": 1512035915, "creation_date": 1512029535, "last_edit_date": 1512030426, "question_id": 47568686, "link": "https://stackoverflow.com/questions/47568686/how-to-subsitute-with-variable-options-in-perl-script", "title": "How to subsitute with variable options in perl script", "body": "<p>In perl text substitutions are very simple and powerful.\nI want to do a script with variable substitutions, like:</p>\n\n<pre><code>if ( $IgnoreCase ) {$opt = \"gi\"} else {$opt = \"g\"}\n\n$string =~ s/$source/$replace/$opt;\n</code></pre>\n\n<p>Results in:</p>\n\n<blockquote>\n  <p>Scalar found where operator expected ...</p>\n</blockquote>\n\n<p>Is there a posibility to do the option variable?</p>\n"}, {"tags": ["perl", "perl-module", "rrdtool", "rrd"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 4563454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c4c997fb57726d333abb70d009db6a?s=128&d=identicon&r=PG&f=1", "display_name": "Bhagwan Gurav", "link": "https://stackoverflow.com/users/4563454/bhagwan-gurav"}, "edited": false, "score": 0, "creation_date": 1512457314, "post_id": 47570583, "comment_id": 82253820, "body": "&#39;-s&#39;, 1200, &#39;DS:p0be:DERIVE:1500:U:U&#39;, &#39;DS:p1ef:DERIVE:1500:U:U&#39;, &#39;DS:p2af:DERIVE:1500:U:U&#39;, &#39;DS:p3nc:DERIVE:1500:U:U&#39;, &#39;DS:p4bu:DERIVE:1500:U:U&#39;, &#39;DS:p5bu:DERIVE:1500:U:U&#39;, &#39;DS:p6bu:DERIVE:1500:U:U&#39;, &#39;RRA:AVERAGE:0.5:1:507&#39;, &#39;RRA:AVERAGE:0.5:1:900&#39;, &#39;RRA:AVERAGE:0.5:6:600&#39;, &#39;RRA:AVERAGE:0.5:72:731&#39;, &#39;RRA:MAX:0.5:1:900&#39;, &#39;RRA:MAX:0.5:6:600&#39;, &#39;RRA:MAX:0.5:72:731&#39;"}, {"owner": {"reputation": 41, "user_id": 4563454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c4c997fb57726d333abb70d009db6a?s=128&d=identicon&r=PG&f=1", "display_name": "Bhagwan Gurav", "link": "https://stackoverflow.com/users/4563454/bhagwan-gurav"}, "edited": false, "score": 0, "creation_date": 1512457414, "post_id": 47570583, "comment_id": 82253873, "body": "&#39;-s&#39;, 300, &#39;DS:p0be:DERIVE:700:U:U&#39;, &#39;DS:p1ef:DERIVE:700:U:U&#39;, &#39;DS:p2af:DERIVE:700:U:U&#39;, &#39;DS:p3nc:DERIVE:700:U:U&#39;, &#39;DS:p4bu:DERIVE:700:U:U&#39;, &#39;DS:p5bu:DERIVE:700:U:U&#39;, &#39;DS:p6bu:DERIVE:700:U:U&#39;, &#39;RRA:AVERAGE:0.5:1:507&#39;, &#39;RRA:AVERAGE:0.5:1:900&#39;, &#39;RRA:AVERAGE:0.5:6:600&#39;, &#39;RRA:AVERAGE:0.5:72:731&#39;, &#39;RRA:MAX:0.5:1:900&#39;, &#39;RRA:MAX:0.5:6:600&#39;, &#39;RRA:MAX:0.5:72:731&#39;"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1512035988, "creation_date": 1512035988, "answer_id": 47570583, "question_id": 47568591, "link": "https://stackoverflow.com/questions/47568591/if-i-change-the-pdpstep-and-heartbeat-the-rrd-not-updated-properly/47570583#47570583", "title": "If I change the _pdpstep and heartbeat the RRD not updated properly", "body": "<p>There's not enough information to answer your question. </p>\n\n<p>However, you should probably look at the <a href=\"https://oss.oetiker.ch/rrdtool/doc/rrdcreate.en.html\" rel=\"nofollow noreferrer\">documentation</a></p>\n\n<p>Specifically the bit about heartbeat, step and the 'xff' in your RRA definitions.</p>\n\n<blockquote>\n  <p>xff The xfiles factor defines what part of a consolidation interval may be made up from <em>UNKNOWN</em> data while the consolidated value is still regarded as known. It is given as the ratio of allowed <em>UNKNOWN</em> PDPs to the number of PDPs in the interval. Thus, it ranges from 0 to 1 (exclusive).</p>\n</blockquote>\n\n<p>It's quite likely that if you're using a different heartbeat, then your sampling interval is now too low. </p>\n\n<blockquote>\n  <p>The \"heartbeat\" defines the maximum acceptable interval between samples/updates. If the interval between samples is less than \"heartbeat\", then an average rate is calculated and applied for that interval. If the interval between samples is longer than \"heartbeat\", then that entire interval is considered \"unknown\". Note that there are other things that can make a sample interval \"unknown\", such as the rate exceeding limits, or a sample that was explicitly marked as unknown.</p>\n</blockquote>\n\n<p>So, short answer is - if you chance your RRA definition to have a lower xff, then you should stop getting NaNs in your data. </p>\n"}], "owner": {"reputation": 41, "user_id": 4563454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c4c997fb57726d333abb70d009db6a?s=128&d=identicon&r=PG&f=1", "display_name": "Bhagwan Gurav", "link": "https://stackoverflow.com/users/4563454/bhagwan-gurav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1512035988, "creation_date": 1512029124, "question_id": 47568591, "link": "https://stackoverflow.com/questions/47568591/if-i-change-the-pdpstep-and-heartbeat-the-rrd-not-updated-properly", "title": "If I change the _pdpstep and heartbeat the RRD not updated properly", "body": "<p>I have rrd file \"abcd\" with _pdpstep = 300 and heartbeat = 700. If this is the configuration then it works fine means accept value. But If I create this file newly with _pdpstep = 1200 and heartbeat = 1500 then it gives all value as Nan. How Can I check what is wrong. If you require I can send rrdtool info for both files.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 1, "creation_date": 1512026707, "post_id": 47567726, "comment_id": 82093375, "body": "I think you want to use <code>map</code>, not <code>grep</code>, but see my answer for an even simpler approach that avoids <code>map</code>/<code>grep</code> altogether."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512027333, "post_id": 47567726, "comment_id": 82093672, "body": "If you care to improve your Perl, please post your full program to <a href=\"https://codereview.stackexchange.com\">Code Review</a>. I&#39;ve got a few words of advice for you if you want."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512030809, "post_id": 47567927, "comment_id": 82095398, "body": "This won&#39;t remove empty (whitespace-only) strings from the array. It&#39;s unclear whether the OP wants that behaviour or not."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512031642, "post_id": 47567927, "comment_id": 82095798, "body": "It follows OP prog. logic and answers the question, <code>why 0 is filtered out</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512032187, "post_id": 47567927, "comment_id": 82096079, "body": "I&#39;m saying that perhaps they intended <code>@var_1 = grep { s&#47;^\\s+|\\s+$&#47;&#47;g; length $_ } @var_1</code>"}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 2, "last_activity_date": 1512032877, "last_edit_date": 1512032877, "creation_date": 1512026500, "answer_id": 47567927, "question_id": 47567726, "link": "https://stackoverflow.com/questions/47567726/in-perl-substitution-operator-for-removing-space-is-removing-value-0-when-remov/47567927#47567927", "title": "In Perl, substitution operator for removing space is removing value 0 when removing space", "body": "<p>You want</p>\n\n<pre><code>@var_1 = map { my $v = s/^\\s+|\\s+$//gr; length($v) ? $v : () } @var_1\n</code></pre>\n\n<p>instead of,</p>\n\n<pre><code>@var_1 = grep {s/^\\s+|\\s+$//g; $_ } @var_1;\n</code></pre>\n\n<p><code>grep</code> is used for filtering list elements, and all false values are filtered (including <code>''</code>, <code>0</code>,  and <code>undef</code>)</p>\n"}, {"comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1512027001, "post_id": 47567936, "comment_id": 82093514, "body": "Funny thing is <code>grep {s&#47;^\\s+|\\s+$&#47;&#47;g } @var_1;</code> should also work due to <code>$_</code> aliasing but heavely obscures the intent."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 3, "creation_date": 1512027268, "post_id": 47567936, "comment_id": 82093643, "body": "@\u0421\u0443\u0445\u043e\u043927 yeah. The whole idea of using <code>grep</code> to alter the value is already fundamentally flawed I believe. I only noticed that in my third time reading it. Yours is <b>much</b> cleaner."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 2, "creation_date": 1512027402, "post_id": 47567936, "comment_id": 82093730, "body": "<code>s&#47;&#47;&#47;r</code> to the rescue. :)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1512100882, "last_edit_date": 1512100882, "creation_date": 1512026527, "answer_id": 47567936, "question_id": 47567726, "link": "https://stackoverflow.com/questions/47567726/in-perl-substitution-operator-for-removing-space-is-removing-value-0-when-remov/47567936#47567936", "title": "In Perl, substitution operator for removing space is removing value 0 when removing space", "body": "<p>In Perl, only a few distinct values are <em>false</em>. These are primarily</p>\n\n<ul>\n<li><code>undef</code></li>\n<li>the integer <code>0</code></li>\n<li>the unsigned integer <code>0</code></li>\n<li>the floating point number <code>0</code></li>\n<li>the string <code>0</code> </li>\n<li>the empty string <code>\"\"</code></li>\n</ul>\n\n<p>You've got the empty string variant and <code>0</code> here.</p>\n\n<pre><code>@var_1 = grep {s/^\\s+|\\s+$//g; $_ } @var_1;\n</code></pre>\n\n<p>This code can go in three ways:</p>\n\n<ul>\n<li><code>$_</code> gets cleaned up and becomes <code>foo</code>. We want it to pass.</li>\n<li><code>$_</code> gets cleaned up and becomes <code>0</code>. We want it to pass.</li>\n<li><code>$_</code> gets cleaned up and becomes the empty string <code>\"\"</code>. We want it to fail.</li>\n</ul>\n\n<p>But what happens is that because <code>0</code> is false, and <code>grep</code> only lets it through if the last statement in its block is true. That's what we want for the empty string <code>\"\"</code>, but not for <code>0</code>.</p>\n\n<pre><code>@var_1 = grep {s/^\\s+|\\s+$//g; $_ ne \"\" } @var_1;\n</code></pre>\n\n<p>Now that we check explicitly that the cleaned up value is not the empty string <code>\"\"</code>, zero <code>0</code> is allowed.</p>\n\n<p>Here's a complete version with cleaned up variable names (naming is important!).</p>\n\n<pre><code>my $input = q{foo, bar, 1 23   ,,0};\nmy @values = split /,/,$input;\nprint \"print_1 : @values \\n \";\n@values = grep {s/^\\s+|\\s+$//g; $_ ne q{} } @values;\nprint \"print_2 : @values \\n \";\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>print_1 : foo  bar  1 23     0 \nprint_2 : foo bar 1 23 0 \n</code></pre>\n\n<p>Note that your <code>grep</code> is not the optimal solution. As always, <a href=\"https://en.wikipedia.org/wiki/There%27s_more_than_one_way_to_do_it\" rel=\"nofollow noreferrer\">there is more than one way to do it</a> in Perl. The <code>for</code> loop that <a href=\"https://stackoverflow.com/a/47567927/1331451\">\u0421\u0443\u0445\u043e\u043927 suggests in their answer</a> is way more concise and I would go with that.</p>\n"}, {"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512028630, "post_id": 47568277, "comment_id": 82094325, "body": "@simbabque a challenge: see if you can come up with a <code>@var = $var =~ &#47;...&#47;g</code> answer that does keep empty fields; I gave up."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512028766, "post_id": 47568277, "comment_id": 82094394, "body": "Wasn&#39;t removing those part of the deal?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512028819, "post_id": 47568277, "comment_id": 82094420, "body": "@simbabque I saw you assumed so; I didn&#39;t see anything that indicated that, except possibly the use of grep in the first place.  I don&#39;t think that&#39;s authoritative enough"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512028897, "post_id": 47568277, "comment_id": 82094458, "body": "I see what you mean. Huh. I&#39;ll play around."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1512028942, "post_id": 47568277, "comment_id": 82094483, "body": "Also calling on @CasimiretHippolyte to take a look."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512030475, "post_id": 47568277, "comment_id": 82095265, "body": "<a href=\"https://regex101.com/r/fLp8NH/1\" rel=\"nofollow noreferrer\">regex101.com/r/fLp8NH/1</a> is incredibly ugly but work. Unufortunately not in my Perl 5.24.1, because that thinks there&#39;s a variable length lookbehind."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1512057471, "post_id": 47568277, "comment_id": 82112026, "body": "@simbabdue <code>(?:(?&lt;![^,])\\s*(?=,|$)|(?!\\s)[^,]+(?&lt;!\\s))</code> should fix that"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 2, "last_activity_date": 1512028399, "last_edit_date": 1512028399, "creation_date": 1512027804, "answer_id": 47568277, "question_id": 47567726, "link": "https://stackoverflow.com/questions/47567726/in-perl-substitution-operator-for-removing-space-is-removing-value-0-when-remov/47568277#47568277", "title": "In Perl, substitution operator for removing space is removing value 0 when removing space", "body": "<p>If you want to split on commas and removing leading and trailing whitespace from each of the resulting strings, that translates pretty literally into code:</p>\n\n<pre><code>my @var = map s/^\\s+|\\s+\\z//gr, split /,/, $var, -1;\n</code></pre>\n\n<p><code>/r</code> makes <code>s///</code> return the result of the substitution (requires perl 5.14+).  <code>-1</code> on the split is required to keep it from ignoring trailing empty fields.</p>\n\n<p>If there are no zero length entries (so not e.g. <code>a,,b</code>), you can just extract what you want (sequences of non-commas that don't start or end with whitespace) directly from the string instead of first splitting it:</p>\n\n<pre><code>@var = $var =~ /(?!\\s)[^,]+(?&lt;!\\s)/g;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1512035576, "last_edit_date": 1512035576, "creation_date": 1512034808, "answer_id": 47570193, "question_id": 47567726, "link": "https://stackoverflow.com/questions/47567726/in-perl-substitution-operator-for-removing-space-is-removing-value-0-when-remov/47570193#47570193", "title": "In Perl, substitution operator for removing space is removing value 0 when removing space", "body": "<p>I suggest cleaning up the array using <code>map</code>  with a regex pattern that matches from the first to the last non-space character</p>\n\n<p>There's also no need to do the <code>split</code> operation separately</p>\n\n<p>Like this</p>\n\n<pre><code>my @var_1 = map { / ( \\S (?: .* \\S )? ) /x } split /,/, $var;\n</code></pre>\n\n<p>Note that this method removes empty fields. It's unclear whether that was required or not</p>\n"}, {"tags": [], "owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "is_accepted": false, "score": 0, "last_activity_date": 1512049845, "last_edit_date": 1512049845, "creation_date": 1512036765, "answer_id": 47570864, "question_id": 47567726, "link": "https://stackoverflow.com/questions/47567726/in-perl-substitution-operator-for-removing-space-is-removing-value-0-when-remov/47570864#47570864", "title": "In Perl, substitution operator for removing space is removing value 0 when removing space", "body": "<p>You can also use</p>\n\n<pre><code>@values = map {$_ =~ s/^\\s+|\\s+$//gr } @values;\n</code></pre>\n\n<p>or even more concise</p>\n\n<pre><code>@values = map {s/^\\s+|\\s+$//gr } @values;\n</code></pre>\n\n<p>to remove spaces in you array</p>\n\n<p>Do not forget the <code>r</code> as it is the non-destructive option, otherwise you will replace your string by the number of occurences of spaces.</p>\n\n<p>This said it will only work if you use Perl 5.14 or higher,\nsome documentation here ;)\n<a href=\"https://www.perl.com/pub/2011/05/new-features-of-perl-514-non-destructive-substitution.html\" rel=\"nofollow noreferrer\">https://www.perl.com/pub/2011/05/new-features-of-perl-514-non-destructive-substitution.html</a></p>\n\n<p>I think this synthax is easier to understand since it is closer to the <em>\"usual\"</em> method of substitution.</p>\n"}], "owner": {"reputation": 1, "user_id": 9031525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0819f173d84fceb47f9ce2915c10def3?s=128&d=identicon&r=PG&f=1", "display_name": "Sandhya", "link": "https://stackoverflow.com/users/9031525/sandhya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1512100882, "creation_date": 1512025619, "question_id": 47567726, "link": "https://stackoverflow.com/questions/47567726/in-perl-substitution-operator-for-removing-space-is-removing-value-0-when-remov", "title": "In Perl, substitution operator for removing space is removing value 0 when removing space", "body": "<p>We have code where input could be either single value or comma separated value. We need to remove any spaces present before and after each value.</p>\n\n<p>We are doing as below:</p>\n\n<pre><code>my @var_1 = split /,/,$var;\nprint \"print_1 : @var_1 \\n \";\n@var_1 = grep {s/^\\s+|\\s+$//g; $_ } @var_1;\nprint \"print_2 : @var_1 \\n \";\n</code></pre>\n\n<p>$var would contain input value. If the $var is 0 , in print_1 is printing value 0 but print_2 is printing nothing. Our requirement was just to remove spaces before and after value 0. But if the $var is 1, both print (print_1 and print_2) is correctly printing value 1. if we give input as 1,0 it is removing 0 and printing value 1 in print_2.</p>\n\n<p>I am not sure why it is removing value 0. Is there any correction that can be done to substitution operator not to remove value 0 ?</p>\n\n<p>Thanks in advance!!!</p>\n"}, {"tags": ["arrays", "perl", "tk"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512000535, "post_id": 47563861, "comment_id": 82085803, "body": "Can you <a href=\"https://stackoverflow.com/posts/47563861/edit\">edit</a> and add a bit more code, please? How have you used them?  I&#39;m not familiar with TK, but I can explain what the code you&#39;ve shown does. You will have the return value of <code>$uv_frm1-&gt;Entry</code> in <code>$uv_ent1</code>, and the return value of <code>$uv_frm1-&gt;Entry</code> in <code>$uv_ent2</code>. I guess <code>Entry</code> returns a fresh object at every call. Your <code>@uv_entry</code> will then be made up of <code>$uv_ent1</code> and <code>$uv_ent2</code>. So this code is valid and gives you an array with two things. But you don&#39;t use them for anything."}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1512022551, "creation_date": 1512022551, "answer_id": 47567001, "question_id": 47563861, "link": "https://stackoverflow.com/questions/47563861/perl-tk-widgets-lists/47567001#47567001", "title": "Perl/Tk widgets lists", "body": "<p>It seems that the <code>configure()</code> does not return the widget it was called on. That is why you cannot chain a call to <code>pack()</code> after calling <code>configure()</code>. But you can call <code>pack()</code> <em>before</em> you call <code>configure()</code> in a method call-chain (since <code>pack()</code> returns the widget it was invoked on).</p>\n\n<p>So you could do this:</p>\n\n<pre><code>my @uv_entry = map { $uv_frm1-&gt;Entry() } 1..2;\n$_-&gt;pack(-side =&gt; 'top', -pady =&gt; 3) \n  -&gt;configure(\n      qw/-width 16 -bg black\n         -foreground green\n         -disabledbackground grey\n         -insertbackground green\n         -insertwidth 5/\n  ) for @uv_entry;\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 7473663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x93kx.png?s=128&g=1", "display_name": "siery", "link": "https://stackoverflow.com/users/7473663/siery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 1, "accepted_answer_id": 47567001, "answer_count": 1, "score": 0, "last_activity_date": 1512022551, "creation_date": 1512000208, "last_edit_date": 1512003013, "question_id": 47563861, "link": "https://stackoverflow.com/questions/47563861/perl-tk-widgets-lists", "title": "Perl/Tk widgets lists", "body": "<p>I wanna create user verification, where I've got two Tk::Entery widgets (one for user-name and one for password). Most of the properties for those are the same, so naturally I feel need of making some kind of OOP usage. I been trying several ways and non of them works.</p>\n\n<p>Is there some way to bind two widgets in the samme list like so:</p>\n\n<pre><code>my @uv_entry = (my $uv_ent1 = $uv_frm1-&gt;Entry,\n                my $uv_ent2 = $uv_frm1-&gt;Entry);\n</code></pre>\n\n<p>and use for them same <code>configure()</code> and <code>pack()</code> variant?</p>\n\n<h3>EDIT:</h3>\n\n<p>Well for my research, in the perldoc Tk::options, you can read fallowing synopsis (witch suggest one can use only one option with arrays?):</p>\n\n<pre><code>$widget-&gt;configure(-option=&gt;value ?,-option=&gt;value ...?);\n@list = $widget-&gt;configure('-option');\n@lol = $widget-&gt;configure;\n</code></pre>\n\n<p>Tk widgets are order in an hierarchy tree, starting from <code>MainWindow</code> and going down (like: <code>MainWindow</code> > <code>Frame</code> > <code>Entry</code> in this case). So I thought I need to put the <code>Frame</code> object as <code>$widget</code> value, so I did something like this:</p>\n\n<pre><code>my @uv_entry = (my $uv_ent1, my $uv_ent2);\n\n@uv_entry = $uv_frm1-&gt;Entry-&gt;configure(qw/-width 16 -bg black\n                -foreground green\n                -disabledbackground grey\n                -insertbackground green\n                -insertwidth 5/\n                )-&gt;pack(-side =&gt; 'top', -pady =&gt; 3);\n</code></pre>\n\n<p>What result with compiler telling me:</p>\n\n<pre><code>Can't call method \"pack\" on an undefined value at ./test.pl line 37.\n</code></pre>\n\n<p>That make me not happy, but directed with this I just try to compile without the pack subroutine. That compile fine, but left me with no result on the screen. (So far I know, Tk does not have any draw/render subroutine, it draw the widgets as far as they are initialized.)</p>\n\n<p>Well now when I try to do anything, like printing some value from one element of <code>@uv_entry</code> list:</p>\n\n<pre><code>print $uv_entry[0]-&gt;cget('-bg') . \"\\n\";\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>Can't call method \"cget\" on an undefined value at ./test.pl line 43.\n</code></pre>\n\n<p>Does <code>configure</code> subroutine not care about variable being correct type or defined at all? And what am I doing wrong?</p>\n"}]