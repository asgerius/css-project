[{"tags": ["perl", "installation-package"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1568243707, "post_id": 57897632, "comment_id": 102216571, "body": "Try running <code>cpan Win32::Console</code> before running <code>perl -MCPAN -e shell</code>."}, {"owner": {"reputation": 2279, "user_id": 13563, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VoEyi.jpg?s=128&g=1", "display_name": "jimtut", "link": "https://stackoverflow.com/users/13563/jimtut"}, "edited": false, "score": 0, "creation_date": 1568249958, "post_id": 57897632, "comment_id": 102217721, "body": "Or <code>ppm install Win32-Console</code> since you said you&#39;re using ActiveState"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568270170, "post_id": 57897632, "comment_id": 102222415, "body": "hmmm, doesn&#39;t Win32::Console come with ActivePerl?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568270221, "post_id": 57897632, "comment_id": 102222440, "body": "(And I seriously doubt the message you got was &quot;<code>Can&#39;t located Win32::Console</code>&quot;)"}, {"owner": {"reputation": 167, "user_id": 3424840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0826df6889a623308eb929e15fdb61?s=128&d=identicon&r=PG&f=1", "display_name": "user3424840", "link": "https://stackoverflow.com/users/3424840/user3424840"}, "edited": false, "score": 0, "creation_date": 1568330676, "post_id": 57897632, "comment_id": 102249721, "body": "Try running cpan Win32::Console - I did - it show same error"}, {"owner": {"reputation": 167, "user_id": 3424840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0826df6889a623308eb929e15fdb61?s=128&d=identicon&r=PG&f=1", "display_name": "user3424840", "link": "https://stackoverflow.com/users/3424840/user3424840"}, "edited": false, "score": 0, "creation_date": 1568330767, "post_id": 57897632, "comment_id": 102249737, "body": "ppm install Win32-Console - can not find ppm - it does not come with v.5.26 - but I did use it in previous version of Perl. Now it is gone..."}, {"owner": {"reputation": 167, "user_id": 3424840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0826df6889a623308eb929e15fdb61?s=128&d=identicon&r=PG&f=1", "display_name": "user3424840", "link": "https://stackoverflow.com/users/3424840/user3424840"}, "edited": false, "score": 0, "creation_date": 1568330826, "post_id": 57897632, "comment_id": 102249746, "body": "Win32::Console come with ActivePerl - It should come - but since I&#39;ve installed Perl x64 - probably it should not use win32?"}, {"owner": {"reputation": 167, "user_id": 3424840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0826df6889a623308eb929e15fdb61?s=128&d=identicon&r=PG&f=1", "display_name": "user3424840", "link": "https://stackoverflow.com/users/3424840/user3424840"}, "edited": false, "score": 0, "creation_date": 1568331027, "post_id": 57897632, "comment_id": 102249789, "body": "Exact error message is Can&#39;t locate Win32::Console.pm (you may need to install win32::Console.pm) But how to install it ?"}, {"owner": {"reputation": 472, "user_id": 2001559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L1bvT.png?s=128&g=1", "display_name": "Maverick", "link": "https://stackoverflow.com/users/2001559/maverick"}, "edited": false, "score": 0, "creation_date": 1568449930, "post_id": 57897632, "comment_id": 102284099, "body": "Try running just &#39;cpan&#39;, since it is first insatallation it wil install &#39;MimGW&#39; and other thing. After than install any module"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1574023820, "post_id": 57897632, "comment_id": 104072848, "body": "See also <a href=\"https://stackoverflow.com/q/58538495/2173773\">ppm doesn&#39;t work after installing ActiveState Perl</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2903, "user_id": 6813506, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/Iwh4N.jpg?s=128&g=1", "display_name": "Rohit Gaikwad", "link": "https://stackoverflow.com/users/6813506/rohit-gaikwad"}, "edited": false, "score": 1, "creation_date": 1590673608, "post_id": 58904582, "comment_id": 109773423, "body": "This is because, strawberry perl already contains Win32 module in it. Download link -   <a href=\"http://strawberryperl.com/releases.html\" rel=\"nofollow noreferrer\">strawberryperl.com/releases.html</a>"}], "tags": [], "owner": {"reputation": 71, "user_id": 12388073, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/71ce8fe57ff2582f83971dca7d9a4a11?s=128&d=identicon&r=PG", "display_name": "lor3nz", "link": "https://stackoverflow.com/users/12388073/lor3nz"}, "is_accepted": false, "score": 7, "last_activity_date": 1574020479, "creation_date": 1574020479, "answer_id": 58904582, "question_id": 57897632, "link": "https://stackoverflow.com/questions/57897632/how-to-install-additional-perl-module-on-latest-perl-active-state/58904582#58904582", "title": "How to install additional perl module on latest perl (Active state)", "body": "<p>Had same problem, i installed <a href=\"http://strawberryperl.com/\" rel=\"noreferrer\">strawberry perl</a> and worked perfectly</p>\n"}], "owner": {"reputation": 167, "user_id": 3424840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0826df6889a623308eb929e15fdb61?s=128&d=identicon&r=PG&f=1", "display_name": "user3424840", "link": "https://stackoverflow.com/users/3424840/user3424840"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7689, "favorite_count": 1, "answer_count": 1, "score": 8, "last_activity_date": 1574020479, "creation_date": 1568241433, "last_edit_date": 1568266863, "question_id": 57897632, "link": "https://stackoverflow.com/questions/57897632/how-to-install-additional-perl-module-on-latest-perl-active-state", "title": "How to install additional perl module on latest perl (Active state)", "body": "<p>I've just installed Perl 5.26 x64 under Windows 10. </p>\n\n<p>The command below causes an error:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>perl -MCPAN -e shell\n\n</code></pre>\n\n<p>Error is: Can't located <code>Win32::Console</code></p>\n\n<p>Please help</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "edited": false, "score": 0, "creation_date": 1568215765, "post_id": 57892343, "comment_id": 102206223, "body": "Thanks! I&#39;ll try it as soon as I can."}], "tags": [], "owner": {"reputation": 18299, "user_id": 2191572, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/TWbVr.png?s=128&g=1", "display_name": "MonkeyZeus", "link": "https://stackoverflow.com/users/2191572/monkeyzeus"}, "is_accepted": false, "score": 0, "last_activity_date": 1568215505, "creation_date": 1568215505, "answer_id": 57892343, "question_id": 57892089, "link": "https://stackoverflow.com/questions/57892089/perl-regex-splitting-a-single-line/57892343#57892343", "title": "Perl regex splitting a single line", "body": "<p>You need to repeat your pattern as many times as needed and supply the appropriate capture groups:</p>\n\n<pre><code>#[0-9]+\\s*=\\s*[A-Z]+_[A-Z]+\\s*\\(\\s*'([A-Z]+)',\\s*\\(\\s*(-?\\d+\\.\\d+),\\s*(-?\\d+\\.\\d+),\\s*(-?\\d+\\.\\d+)\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/GJ6yDi/1/\" rel=\"nofollow noreferrer\">https://regex101.com/r/GJ6yDi/1/</a></p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1568216211, "creation_date": 1568216211, "answer_id": 57892525, "question_id": 57892089, "link": "https://stackoverflow.com/questions/57892089/perl-regex-splitting-a-single-line/57892525#57892525", "title": "Perl regex splitting a single line", "body": "<p>This is what <a href=\"https://metacpan.org/pod/Text::Balanced\" rel=\"nofollow noreferrer\">Text::Balanced</a> is for.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Text::Balanced qw[extract_bracketed];\nuse Data::Dumper;\n\nwhile (&lt;DATA&gt;) {\n  # Extract the bit of your string between the first and last brackets\n  my $extracted = extract_bracketed($_, '(', '[^()]*');\n  # Then split what's left on strings of brackets, whitespace and commas.\n  # But grep the list to remove any zero-length strings that you get.\n  my @bits = grep { length } split /[\\(\\)\\s,]+/, $extracted;\n  print Dumper \\@bits;\n}\n\n__DATA__\n#23 = CARTESIAN_POINT ( 'NONE',  ( -1.822612853216911200, 55.22284222837789300, 8.566382866014988600 ) ) ;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = [\n          '\\'NONE\\'',\n          '-1.822612853216911200',\n          '55.22284222837789300',\n          '8.566382866014988600'\n        ];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "edited": false, "score": 0, "creation_date": 1568230644, "post_id": 57893600, "comment_id": 102212855, "body": "Thanks for the detailed explanation!  I\u2019ll try it as soon as I can."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "edited": false, "score": 1, "creation_date": 1568360501, "post_id": 57893600, "comment_id": 102256517, "body": "@mHvNG You are most welcome.  Note that I edited a little in the meanwhile, and in particular I just added a &quot;<b>Note</b>&quot; at the end about how to modify it to work with multiline stirngs."}, {"owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "edited": false, "score": 0, "creation_date": 1568360840, "post_id": 57893600, "comment_id": 102256673, "body": "Thanks for the help. Its really appreciated!"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 4, "last_activity_date": 1568360688, "last_edit_date": 1568360688, "creation_date": 1568220438, "answer_id": 57893600, "question_id": 57892089, "link": "https://stackoverflow.com/questions/57892089/perl-regex-splitting-a-single-line/57893600#57893600", "title": "Perl regex splitting a single line", "body": "<p>This is fairly straightforward when broken into multiple (two) steps.</p>\n\n<p>First extract the text with coordinates, the stuff inside <code>CARTESIAN_POINT( ... )</code></p>\n\n<pre><code>my ($coord_text) = $string =~ /= \\s+ [A-Z_]+ \\s+ \\( \\s* (.+) \\s* \\)/x;\n</code></pre>\n\n<p>where <code>/x</code> allows for those spaces inside, for readability. The <code>.+</code> is <em>greedy</em> and gets everything up to the very last <code>)</code>, including the nested <code>(...)</code>. \nThen get coordinates out of that</p>\n\n<pre><code>my @coords = $coord_text =~ /([A-Z]+|[0-9-.]+)/g;\n</code></pre>\n\n<p>Here we allow <em>either</em> a word (like that <code>NONE</code>), <em>or</em> a number (in shown format<sup>&dagger;</sup>).</p>\n\n<p>Altogether, with the intermediate step \"hidden\" inside a <code>do</code> lexical scope</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $string = q(#23 = CARTESIAN_POINT ( 'NONE', ( -1.822612853216911200, 55.22284222837789300, 8.566382866014988600 ) ) ; );\n\nmy @coords = do {\n    my ($coord_text) = $string =~ /=\\s+[A-Z_]+\\s+\\(\\s*(.+)\\s*\\)/; \n    $coord_text =~ /([A-Z]+|[0-9-.]+)/g;\n};\n\nsay for @coords; \n</code></pre>\n\n<p>This is easily tweaked for variations in requirements/outcomes, slight or major</p>\n\n<ul>\n<li><p>To capture quotes around <code>NONE</code> as well (shown in OP), add quotes to the character class for the word, <code>[A-Z\\x22\\x27]</code>. I use hex in case this is a \"one-liner\" in a bash script or some such, since context isn't specified.  In a normal script you can use <code>\"</code> and <code>'</code></p></li>\n<li><p>To get numbers in a string instead of a list, as mentioned in the question, use</p>\n\n<pre><code>$coord_text =~ /([A-Z]+|\\([^)]+\\))/g;\n</code></pre>\n\n<p>instead of the second statement in the <code>do</code> block above</p></li>\n</ul>\n\n<p>I assume that you have a list containing either words (like <code>NONE</code>) or straight lists of coordinates (numbers), without any further nesting or similar syntactic complexities.</p>\n\n<p><strong>Note</strong>&nbsp; If the input can be a multiline string then add <code>/s</code> modifier to the regex. With it the <code>.</code> matches a newline as well and it all works the same as above (it does in my tests).  This should only be needed in the first regex, making it</p>\n\n<pre><code>my ($coord_text) = $string =~ /=\\s+[A-Z_]+\\s+\\(\\s*(.+)\\s*\\)/s;\n</code></pre>\n\n<p>but it won't hurt in the other one either.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup>&nbsp;The used character class <code>[0-9-.]</code> also allows garbage (like <code>-.-2</code> etc). If you need to confirm that you indeed have a number in the given format please add checks for that.  The best way to test for a number is <code>looks_like_number</code> from <a href=\"https://metacpan.org/pod/Scalar::Util\" rel=\"nofollow noreferrer\">Scalar::Util</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "is_accepted": false, "score": 0, "last_activity_date": 1568224772, "creation_date": 1568224772, "answer_id": 57894491, "question_id": 57892089, "link": "https://stackoverflow.com/questions/57892089/perl-regex-splitting-a-single-line/57894491#57894491", "title": "Perl regex splitting a single line", "body": "<p>If you don't care about the nesting, and just want to get all the \"values\" into an array, you might consider the simpler solution of just splitting on a discard of all unwanted (non-value) characters: <code>/[(),;=\\s]+/</code></p>\n\n<pre><code>$ cat line\n#23 = CARTESIAN_POINT ( 'NONE',  ( -1.822612853216911200, 55.22284222837789300, 8.566382866014988600 ) ) ;\n\n$ perl -ne '@array = split /[(),;=\\s]+/; print join \"|\", @array; print \"\\n\"' line\n#23|CARTESIAN_POINT|'NONE'|-1.822612853216911200|55.22284222837789300|8.566382866014988600\n\n\n</code></pre>\n"}], "owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 57893600, "answer_count": 4, "score": 1, "last_activity_date": 1568360688, "creation_date": 1568214570, "question_id": 57892089, "link": "https://stackoverflow.com/questions/57892089/perl-regex-splitting-a-single-line", "title": "Perl regex splitting a single line", "body": "<p>I'm having some problems with regex in Perl. </p>\n\n<p>I'm having a line: <code>#23 = CARTESIAN_POINT ( 'NONE',  ( -1.822612853216911200, 55.22284222837789300, 8.566382866014988600 ) ) ;</code></p>\n\n<p>And I want to split the line into different values.</p>\n\n<p>Right now I have <code>(#[0-9]+)\\s=\\s([A-Z]+_[A-Z]+)\\s(.*)</code> this. This will have these values as output: </p>\n\n<pre><code>$array[0]=#23\n$array[1]=CARTESIAN_POINT\n$array[2]=( 'NONE',  ( -1.822612853216911200, 55.22284222837789300, 8.566382866014988600 ) ) ;\n</code></pre>\n\n<p>I want this line: <code>( 'NONE',  ( -1.822612853216911200, 55.22284222837789300, 8.566382866014988600 ) ) ;</code> to split up to different values like.</p>\n\n<pre><code>PARAM[0] = 'NONE',\nPARAM[1] = ( -1.822612853216911200, 55.22284222837789300, 8.566382866014988600 )\n</code></pre>\n\n<p><strong><em>or</em></strong></p>\n\n<pre><code>PARAM[0] = 'NONE',\nPARAM[1] = -1.822612853216911200\nPARAM[2] = 55.22284222837789300\nPARAM[3] = 8.566382866014988600\n</code></pre>\n\n<p>But I can't quite figure out how to do it. I tried different things but none of them is mentioning worthy.</p>\n\n<p>I hope someone is able to help me or point me in the right direction. Thanks in advance!</p>\n"}, {"tags": ["perl", "chmod", "mkdir"], "answers": [{"comments": [{"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1568276231, "post_id": 57896362, "comment_id": 102225186, "body": "Thank you @miguel. Whatever permission you give inside <code>chmod =&gt;</code> by default its creating with <code>755</code>. If you do it manually it works. I was thinking whether it is something to do with OS version I am using?"}], "tags": [], "owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "is_accepted": false, "score": 1, "last_activity_date": 1568233615, "creation_date": 1568233615, "answer_id": 57896362, "question_id": 57891361, "link": "https://stackoverflow.com/questions/57891361/unable-to-set-permission-for-directory-in-perl/57896362#57896362", "title": "Unable to set permission for directory in Perl", "body": "<p>Use <code>chmod</code> instead of <code>mode</code> argument. Something like that:</p>\n\n<pre><code>make_path \"mydir\", {\n            verbose =&gt; 1,\n            chmod   =&gt; 0777,\n            owner   =&gt; \"vinod\"\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 750, "user_id": 386025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b94b0a0f6e412b5dfd000814b3c3f812?s=128&d=identicon&r=PG", "display_name": "donaldh", "link": "https://stackoverflow.com/users/386025/donaldh"}, "edited": false, "score": 0, "creation_date": 1591275957, "post_id": 62188394, "comment_id": 109998589, "body": "Octal 0777 and decimal 511 are equivalent once parsed."}], "tags": [], "owner": {"reputation": 9, "user_id": 13677757, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-P8OQD2U7Q74/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuck_kg5BoN59SoYIC2Xw0lRBYxP30Q/photo.jpg?sz=128", "display_name": "shubs", "link": "https://stackoverflow.com/users/13677757/shubs"}, "is_accepted": false, "score": 0, "last_activity_date": 1591252931, "creation_date": 1591252931, "answer_id": 62188394, "question_id": 57891361, "link": "https://stackoverflow.com/questions/57891361/unable-to-set-permission-for-directory-in-perl/62188394#62188394", "title": "Unable to set permission for directory in Perl", "body": "<p>chmod value should be decimal, what you are using is octal. Try changing the value to 511</p>\n"}], "owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1591252931, "creation_date": 1568211992, "question_id": 57891361, "link": "https://stackoverflow.com/questions/57891361/unable-to-set-permission-for-directory-in-perl", "title": "Unable to set permission for directory in Perl", "body": "<p>I am trying to create a directory with name <code>mydir</code> in current path where I am executing the perl script using File::Path module.</p>\n\n<p>Directory is being created if it is not already exists, but directory permission I am not able to set to <code>777</code>. y default its been setting permission as <code>755</code>.</p>\n\n<p>Here is my code.</p>\n\n<pre><code>use File::Path qw(make_path remove_tree);\n\nif (! -d \"mydir\") {\n    if (!make_path( \"mydir\", {\n            verbose =&gt; 1,\n            mode =&gt; 0777,\n            owner =&gt; \"vinod\",\n    })) {\n            print  \"Couldn't create dir\\n\";\n            return -1;\n    }\n}\n</code></pre>\n\n<p>I want directory to be created with permission <code>0777</code></p>\n"}, {"tags": ["perl", "variables"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 3, "creation_date": 1568213712, "post_id": 57891199, "comment_id": 102205055, "body": "Please, read <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a>, and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">How to create a Minimal, Reproducible Example</a>."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1568213721, "post_id": 57891199, "comment_id": 102205062, "body": "What is <code>$funcarg</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1568213734, "creation_date": 1568213734, "answer_id": 57891838, "question_id": 57891199, "link": "https://stackoverflow.com/questions/57891199/perl-variable-perl-variable/57891838#57891838", "title": "perl variable perl variable", "body": "<p>It's not clear how your command line argument gets from <code>@ARGV</code> to <code>$funcarg</code>. Or how it goes from <code>127.0.0.1</code> to (presumably) <code>test 127.0.0.1</code>. And I think that's where you're going wrong. I think that <code>$funcarg</code> doesn't contain what you think it does before you run the regex match.</p>\n\n<p>This code does what I think you want. But I've had to make up two lines (as marked with a comment) and I'm pretty sure that your version of those two lines is where your misunderstanding is.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\n@ARGV or die \"No argument given\\n\";\n\n# I've made up the next two lines. But I think\n# this is where your bug is.\nmy $host = $ARGV[0];\nmy $funcarg = \"test $host\";\n\nif ($funcarg =~ /^test (.*)/) {\n  my $target1 = \"http://$1/script/so.php\";\n  print \"$target1\\n\";\n  system(\"wget $target1\");\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8590159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa2216d19caf591895c1d8a83fa4230f?s=128&d=identicon&r=PG&f=1", "display_name": "ruyzclaudio", "link": "https://stackoverflow.com/users/8590159/ruyzclaudio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1568214093, "creation_date": 1568211480, "last_edit_date": 1568212198, "question_id": 57891199, "link": "https://stackoverflow.com/questions/57891199/perl-variable-perl-variable", "title": "perl variable perl variable", "body": "<p>my code : </p>\n\n<pre><code>if ($funcarg =~ /^test (.*)/) {\n  my $target1 = \"http://$1/script/so.php\";\n    system(\"wget $target1\");\n</code></pre>\n\n<p>so, when i type perl a.pl 127.0.0.1 the script must download <a href=\"http://127.0.0.1/script/so.php\" rel=\"nofollow noreferrer\">http://127.0.0.1/script/so.php</a>, but unfortunately it doesn't. where is my mistake?</p>\n\n<pre><code> [root@localhost perl]# perl a.pl 127.0.0.1\nhttp:///script/so.php: Invalid host name.\n</code></pre>\n"}, {"tags": ["perl", "operator-overloading"], "answers": [{"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1568214098, "post_id": 57891300, "comment_id": 102205295, "body": "Thanks! Any idea why <a href=\"https://metacpan.org/source/NUFFIN/MPEG-Audio-Frame-0.09/lib/MPEG/Audio/Frame.pm#L194\" rel=\"nofollow noreferrer\">this line</a> <code>my $fh = shift || return undef</code> worked fine with earlier perls (since the test must have passed when the author wrote them)?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1568214513, "post_id": 57891300, "comment_id": 102205524, "body": "Better to say &quot;boolean context&quot;, since even in your suggested code, it is used in scalar context."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1568225244, "post_id": 57891300, "comment_id": 102210540, "body": "Added <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=43015\" rel=\"nofollow noreferrer\">bug report</a>"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 4, "last_activity_date": 1568212261, "last_edit_date": 1568212261, "creation_date": 1568211781, "answer_id": 57891300, "question_id": 57890664, "link": "https://stackoverflow.com/questions/57890664/stringificaton-operator-unexpectedly-called/57891300#57891300", "title": "Stringificaton operator unexpectedly called", "body": "<p><code>shift || 0</code> will want to coerce the argument in <code>shift</code> to a scalar. There is no boolify or numify function overloads defined for <code>My::Module</code>, so Perl will use your stringify function.</p>\n\n<p>To avoid evaluating the object in scalar context, you could rephrase it as</p>\n\n<pre><code>my $fh  = @_ ? shift : 0;\n\n$fh = shift;\n$fh = 0 unless ref($fh) || $fh;\n</code></pre>\n\n<p>or define a <code>bool</code> function overload.</p>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 57891300, "answer_count": 1, "score": 1, "last_activity_date": 1568212261, "creation_date": 1568209746, "question_id": 57890664, "link": "https://stackoverflow.com/questions/57890664/stringificaton-operator-unexpectedly-called", "title": "Stringificaton operator unexpectedly called", "body": "<p>I am debugging <a href=\"https://metacpan.org/source/NUFFIN/MPEG-Audio-Frame-0.09/t/04-tie.t\" rel=\"nofollow noreferrer\">a test</a> in <a href=\"https://metacpan.org/pod/MPEG::Audio::Frame\" rel=\"nofollow noreferrer\">MPEG::Audio::Frame</a>. If I run this test, I get:</p>\n\n<pre><code>$ cpan -g MPEG::Audio::Frame\n$ tar zxvf MPEG-Audio-Frame-0.09.tar.gz\n$ cd MPEG-Audio-Frame-0.09\n$ perl Makefile.PL\n$ make\n$ perl -I./blib/lib t/04-tie.t \n1..5\nok 1 - use MPEG::Audio::Frame;\nok 2 - 'tie' isa 'MPEG::Audio::Frame'\nNot a HASH reference at blib/lib/MPEG/Audio/Frame.pm line 273, &lt;DATA&gt; line 1.\n# Looks like your test exited with 255 just after 2.\n</code></pre>\n\n<p>I narrowed down the problem to the following minimal example:</p>\n\n<pre><code>package My::Module;\nuse feature qw(say);\nuse strict;\nuse warnings;\nuse overload '\"\"' =&gt; \\&amp;asbin;\n\nsub asbin {\n    my $self = shift;\n    $self-&gt;{binhead}  # $self is not yet a hash, so execution stops here.\n}\n\nsub TIEHANDLE {\n    bless \\$_[1], $_[0]\n}\n\nsub READLINE {}\n\nsub read {\n    say \"reading..\";\n    my $pkg = shift;\n    my $fh = shift || 0;  # Why is the stringification operator called here?\n}\n\npackage main;\nuse feature qw(say);\nuse strict;\nuse warnings;\n\ntie *FH, 'My::Module', *DATA;\nMy::Module-&gt;read(\\*DATA); \n&lt;FH&gt;;\n\n__DATA__\nabc\n</code></pre>\n\n<p>Why is the stringification operator called for the statement <code>My::Module-&gt;read(\\*DATA)</code> ?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 4, "creation_date": 1568209708, "post_id": 57890503, "comment_id": 102202779, "body": "You need to <a href=\"http://p3rl.org/chomp\" rel=\"nofollow noreferrer\">chomp</a> the results of the `` operator."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 4, "creation_date": 1568210793, "post_id": 57890503, "comment_id": 102203390, "body": "<code>unless ($mail!=-1)</code> is a really confusing way to write <code>if $mail == -1</code> :-)"}, {"owner": {"reputation": 11, "user_id": 12053292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96717c9bc04ab3f2dc6ae414f238d07d?s=128&d=identicon&r=PG&f=1", "display_name": "InsideDreamy", "link": "https://stackoverflow.com/users/12053292/insidedreamy"}, "edited": false, "score": 0, "creation_date": 1568210870, "post_id": 57890503, "comment_id": 102203425, "body": "Thank you! It&#39;s working now. ;)"}], "owner": {"reputation": 11, "user_id": 12053292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96717c9bc04ab3f2dc6ae414f238d07d?s=128&d=identicon&r=PG&f=1", "display_name": "InsideDreamy", "link": "https://stackoverflow.com/users/12053292/insidedreamy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568209192, "creation_date": 1568209192, "question_id": 57890503, "link": "https://stackoverflow.com/questions/57890503/perl-handling-variables-in-different-ways-when-hardcoded-vs-red-from-file", "title": "Perl handling variables in different ways when hardcoded vs red from file", "body": "<p>I'm having issues when trying to use a variable value obtained from an external file with the Email::Send::SMTP::Gmail module. </p>\n\n<p>If I use the variable values hardcoded, they work as expected.</p>\n\n<p>However when I use them as the code below, the Email::Send::SMTP::Gmail module doesn't work correctly. It sends the email, but totally broken (no formatting - Content-Type: multipart/mixed; BOUNDARY=\"This-is-a-mail-boundary\").</p>\n\n<p>Is this the correct way to declare variable in modules?</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse utf8;\nuse Email::Send::SMTP::Gmail;\n\nmy $gmail_user = `cat ~/.mailconfig | grep GMAIL_USER | grep -o '\".*\"' | sed 's/\"//g'`;\nmy $gmail_pass = `cat ~/.mailconfig | grep GMAIL_PASS | grep -o '\".*\"' | sed 's/\"//g'`;\n\nmy ($mail,$error)=Email::Send::SMTP::Gmail-&gt;new( -layer=&gt;'ssl',\n                                                 -port=&gt;'465',\n                                                 -smtp=&gt;'smtp.gmail.com',\n                                                 -login=&gt;$gmail_user,\n                                                 -pass=&gt;$gmail_pass);\n                print \"session error: $error\" unless ($mail!=-1);\n                $mail-&gt;send(-to=&gt;'foo@bar.xyz',\n                                -subject=&gt;\"Subject\",\n                                -body=&gt;'html body',\n                                -contenttype=&gt;'text/html',\n                                -attachments=&gt;'./att.txt');\n                $mail-&gt;bye;\n</code></pre>\n"}, {"tags": ["perl", "awk", "sed", "grep", "text-processing"], "comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 2, "creation_date": 1568209879, "post_id": 57890320, "comment_id": 102202877, "body": "The desired output CSV header line <code>name, required_data, graph_caption</code> is 3 fields but the data line <code>&#39;COOL_FEATURE&#39;, [accounts, logs],&#39;Description of my feature&#39;</code> is 4 fields (count the commas). You need to enclose each field in double quotes and consequently also double up any double quotes that can be present in each field (you should include that in your example) to make the output a valid CSV."}], "answers": [{"comments": [{"owner": {"reputation": 6569, "user_id": 6220759, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0yuve.jpg?s=128&g=1", "display_name": "Josh Friedlander", "link": "https://stackoverflow.com/users/6220759/josh-friedlander"}, "edited": false, "score": 0, "creation_date": 1568211043, "post_id": 57890543, "comment_id": 102203522, "body": "Thanks this works really nicely. I can do it on the whole folder with <code>awk -f tst.awk *.py</code>, but is there a way to do it recursively for nested folders? (If not I can manage, you&#39;ve still saved me a ton of time!)"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 6569, "user_id": 6220759, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0yuve.jpg?s=128&g=1", "display_name": "Josh Friedlander", "link": "https://stackoverflow.com/users/6220759/josh-friedlander"}, "edited": false, "score": 2, "creation_date": 1568211284, "post_id": 57890543, "comment_id": 102203656, "body": "Keep your commands that find files and commands that operate on file contents separate. The command to find files is <code>find</code> so just use it to find the files (see the <code>find</code> man page) and then call the awk script I posted on the resulting list of files."}, {"owner": {"reputation": 6569, "user_id": 6220759, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0yuve.jpg?s=128&g=1", "display_name": "Josh Friedlander", "link": "https://stackoverflow.com/users/6220759/josh-friedlander"}, "edited": false, "score": 0, "creation_date": 1568211758, "post_id": 57890543, "comment_id": 102203902, "body": "I&#39;m using <code>find . -name &#39;*.py&#39; | awk -f tst.awk</code> in the parent folder, and don&#39;t get any results. Am I missing something?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 6569, "user_id": 6220759, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0yuve.jpg?s=128&g=1", "display_name": "Josh Friedlander", "link": "https://stackoverflow.com/users/6220759/josh-friedlander"}, "edited": false, "score": 1, "creation_date": 1568211864, "post_id": 57890543, "comment_id": 102203979, "body": "Yes - that&#39;s piping a list of file names to awk to read as input. You need to give awk a list of file names as arguments, not as input, so awk can open each file and read it&#39;s <b>contents</b> as input. I edited my answer to show the simplest way to use awk with find."}, {"owner": {"reputation": 6569, "user_id": 6220759, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0yuve.jpg?s=128&g=1", "display_name": "Josh Friedlander", "link": "https://stackoverflow.com/users/6220759/josh-friedlander"}, "edited": false, "score": 1, "creation_date": 1568212235, "post_id": 57890543, "comment_id": 102204202, "body": "Many thanks! Tangentially, is there a difference between <code>find -exec</code> and <code>find | xargs</code>?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 6569, "user_id": 6220759, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0yuve.jpg?s=128&g=1", "display_name": "Josh Friedlander", "link": "https://stackoverflow.com/users/6220759/josh-friedlander"}, "edited": false, "score": 2, "creation_date": 1568212296, "post_id": 57890543, "comment_id": 102204233, "body": "You&#39;re welcome. Yes but ask a new question tagged with those commands if you&#39;d like information about that."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": 1, "last_activity_date": 1568212020, "last_edit_date": 1568212020, "creation_date": 1568209306, "answer_id": 57890543, "question_id": 57890320, "link": "https://stackoverflow.com/questions/57890320/extract-lines-from-multiple-files-based-on-condition-in-one-line/57890543#57890543", "title": "Extract lines from multiple files based on condition in one line", "body": "<p>Whenever you have name=value pairs in your data I find it best to first create an array of those mappings and then simply access the values by their names. For example, with GNU awk for the 3rd arg to match() and ENDFILE:</p>\n\n<pre><code>$ cat tst.awk\nBEGIN {\n    OFS = \",\"\n    numNames = split(\"name required_data graph_caption\",names)\n}\n\nmatch($0,/^\\s*(\\w+)\\s*=\\s*(.*\\S)\\s*,\\s*$/,a) {\n    name  = a[1]\n    value = a[2]\n    name2value[name] = value\n}\n\nENDFILE {\n    if ( name2value[\"has_graph\"] == \"True\" ) {\n        if ( !doneHdr++ ) {\n            for (nameNr=1; nameNr&lt;=numNames; nameNr++) {\n                name = names[nameNr]\n                printf \"%s%s\", name, (nameNr&lt;numNames ? OFS : ORS)\n            }\n        }\n        for (nameNr=1; nameNr&lt;=numNames; nameNr++) {\n            name  = names[nameNr]\n            value = name2value[name]\n            gsub(/\"/,\"\\\"\\\"\",value)\n            printf \"\\\"%s\\\"%s\", value, (nameNr&lt;numNames ? OFS : ORS)\n        }\n    }\n    delete name2value\n}\n\n$ awk -f tst.awk file\nname,required_data,graph_caption\n\"'COOL_FEATURE'\",\"[accounts, logs]\",\"'Description of my feature'\"\n</code></pre>\n\n<p>I added double quotes before printing to make sure the output is a valid CSV even when your values contain <code>,</code> (as <code>[accounts, logs]</code> does) and/or double quotes.</p>\n\n<p>To use the above with <code>find</code> I'd do this:</p>\n\n<pre><code>find . -name '*.py' -exec awk -f tst.awk {} +\n</code></pre>\n\n<p>but remove this part of the script first:</p>\n\n<pre><code>        if ( !doneHdr++ ) {\n            for (nameNr=1; nameNr&lt;=numNames; nameNr++) {\n                name = names[nameNr]\n                printf \"%s%s\", name, (nameNr&lt;numNames ? OFS : ORS)\n            }\n        }\n</code></pre>\n\n<p>so you don't get a header line printed once for every batch of files passed to awk from find and just add the header line manually later or print it before running the script. There's other ways to deal with that but that's the simplest.</p>\n"}, {"tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 1, "last_activity_date": 1568211080, "last_edit_date": 1568211080, "creation_date": 1568209315, "answer_id": 57890546, "question_id": 57890320, "link": "https://stackoverflow.com/questions/57890320/extract-lines-from-multiple-files-based-on-condition-in-one-line/57890546#57890546", "title": "Extract lines from multiple files based on condition in one line", "body": "<p>Could you please try following(considering that your python files will have only 1 occurrence of this class). Tested and written in GNU <code>awk</code>.</p>\n\n<pre><code>awk '\nBEGIN{\n  FS=\"=\"\n  s1=\"\\047\"\n  OFS=\",\"\n  print \"name, required_data, graph_caption\"\n}\n/has_graph=True/{\n  found=1\n}\nfound &amp;&amp; /name/{\n  sub(/,/,\"\",$2)\n  name=$2\n  next\n}\nfound &amp;&amp; /required_data/{\n  sub(/,/,\"\",$2)\n  data=$2\n}\nfound &amp;&amp; /graph_caption/{\n  sub(/,/,\"\",$2)\n  print s1 name s1,s1 data s1,s1 $2 s1\n  nextfile\n}\n'  *.py\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6569, "user_id": 6220759, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0yuve.jpg?s=128&g=1", "display_name": "Josh Friedlander", "link": "https://stackoverflow.com/users/6220759/josh-friedlander"}, "edited": false, "score": 0, "creation_date": 1568211118, "post_id": 57890565, "comment_id": 102203556, "body": "Thanks, this is great, but it doesn&#39;t check for the condition, right?"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1568209397, "creation_date": 1568209397, "answer_id": 57890565, "question_id": 57890320, "link": "https://stackoverflow.com/questions/57890320/extract-lines-from-multiple-files-based-on-condition-in-one-line/57890565#57890565", "title": "Extract lines from multiple files based on condition in one line", "body": "<p>Perl solution:</p>\n\n<pre><code>perl -0777 -nE 'for my $key (qw( name required_data graph_caption )) {\n                  ($h{$key}) = /\\b$key=(.*),/;\n                }\n                say join \",\", @h{qw{ name required_data graph_caption }};\n               ' -- *.py\n</code></pre>\n\n<ul>\n<li><code>-n</code> reads the input record by record, executing the code for each one</li>\n<li><code>-0777</code> reads the whole file instead of reading it line by line</li>\n<li>the <code>%h</code> hash is populated with values captured from a regex match, <code>\\b</code> stands for a \"word boundary\"</li>\n</ul>\n"}], "owner": {"reputation": 6569, "user_id": 6220759, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0yuve.jpg?s=128&g=1", "display_name": "Josh Friedlander", "link": "https://stackoverflow.com/users/6220759/josh-friedlander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 1, "accepted_answer_id": 57890543, "answer_count": 3, "score": 1, "last_activity_date": 1568212020, "creation_date": 1568208479, "last_edit_date": 1568209900, "question_id": 57890320, "link": "https://stackoverflow.com/questions/57890320/extract-lines-from-multiple-files-based-on-condition-in-one-line", "title": "Extract lines from multiple files based on condition in one line", "body": "<p>I have a number of directories containing text files with a pattern like this:</p>\n\n<pre><code>class FeatureFE():\n    meta_data = MetaData(\n        name='COOL_FEATURE',\n        sub_type='EXTRA_COOL_FEATURES',\n        required_data=[accounts, logs],\n        has_graph=True,\n        x_axis_label='Time',\n        y_axis_label='Foo',\n        graph_caption='Description of my feature',\n        priority='low',\n    )\n</code></pre>\n\n<p>The task I have been given is to go through each <code>.py</code> file and, if <code>has_graph=True</code>, extract the <code>name</code>, <code>required_data</code> and <code>graph_caption</code> - the end goal being a CSV structured like this:</p>\n\n<pre><code>name, required_data, graph_caption\n'COOL_FEATURE', [accounts, logs],'Description of my feature',\n</code></pre>\n\n<p>This definitely seems doable with <code>awk</code>/<code>sed</code>/<code>grep</code>, but I'm struggling to get there. So far I've managed this:</p>\n\n<pre><code>grep -E -B 4 -A 5 \"has_graph=True\" feature_17.py | tr -s ' ' | grep '^ name\\|^ required_data\\|^ graph_caption' | sed 's/.*=//'\n</code></pre>\n\n<p>Which returns</p>\n\n<pre><code>'COOL_FEATURE',\n[accounts, logs],\n'Description of my feature',\n</code></pre>\n\n<p>for one file, but nothing when run on *.py.</p>\n\n<p>Help much appreciated!</p>\n"}, {"tags": ["perl", "awk", "sed"], "comments": [{"owner": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "edited": false, "score": 5, "creation_date": 1568205331, "post_id": 57889295, "comment_id": 102200211, "body": "What have you tried so far?"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1568206217, "creation_date": 1568206217, "answer_id": 57889597, "question_id": 57889295, "link": "https://stackoverflow.com/questions/57889295/get-column-list-using-sed-awk-perl/57889597#57889597", "title": "get column list using sed/awk/perl", "body": "<p>Perl solution:</p>\n\n<pre><code>perl -lne 'push @lines, $_;\n           close ARGV;\n           next if @lines &lt; 2;\n           @lines = sort { length $a &lt;=&gt; length $b } @lines;\n           if (0 == index \"$lines[1],\", $lines[0]) {\n               print $lines[1];\n           } else {\n               print \"Both file headers and positions are different\";\n           }' -- File1 File2\n</code></pre>\n\n<ul>\n<li><code>-n</code> reads the input line by line and runs the code for each line</li>\n<li><code>-l</code> removes newlines from input and adds them to printed lines</li>\n<li><a href=\"http://p3rl.org/close\" rel=\"nofollow noreferrer\">closing</a> the special file handle <a href=\"http://p3rl.org/perlvar#ARGV\" rel=\"nofollow noreferrer\">ARGV</a> makes Perl open the next file and read from it instead of processing the rest of the currently opened file.</li>\n<li><a href=\"http://p3rl.org/next\" rel=\"nofollow noreferrer\">next</a> makes Perl go back to the beginning of the code, it can continue once more than one input line has been read.</li>\n<li><a href=\"http://p3rl.org/sort\" rel=\"nofollow noreferrer\">sort</a> sorts the lines by length so that we know the longer one is in the second element of the array.</li>\n<li><a href=\"http://p3rl.org/index\" rel=\"nofollow noreferrer\">index</a> is used to check whether the shorter header is a prefix of the longer one (including the comma after the first header, so e.g. <code>no,names</code> is correctly rejected)</li>\n</ul>\n"}], "owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568206632, "creation_date": 1568205210, "question_id": 57889295, "link": "https://stackoverflow.com/questions/57889295/get-column-list-using-sed-awk-perl", "title": "get column list using sed/awk/perl", "body": "<p>I have different files like below format</p>\n\n<p><strong>Scenario 1 :</strong></p>\n\n<pre><code>File1\nno,name\n1,aaa\n20,bbb\n\nFile2\nno,name,address\n5,aaa,ghi\n7,ccc,mn\n</code></pre>\n\n<p>I would like to get column list which is having more number of columns and if it is in the same order</p>\n\n<pre><code>**Expected output for scenario 1 :**\nno,name,address\n</code></pre>\n\n<p><strong>Scenario 2 :</strong></p>\n\n<pre><code>File1\nno,name\n1,aaa\n20,bbb\n\nFile2\nno,age,name,address\n5,2,aaa,ghi\n7,3,ccc,mn\n</code></pre>\n\n<p>Expected Results : </p>\n\n<pre><code>Both file headers and positions are different as a message\n</code></pre>\n\n<p>I am interested in any short solution using bash / perl / sed / awk.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1568187563, "post_id": 57884278, "comment_id": 102191022, "body": "You have to modify the script, but we can&#39;t tell you how, as you haven&#39;t shown it. Or, make a copy of the files and run the script there."}, {"owner": {"reputation": 397, "user_id": 9892631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9270664e143242e154d99f1401acab12?s=128&d=identicon&r=PG&f=1", "display_name": "poisn", "link": "https://stackoverflow.com/users/9892631/poisn"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1568188138, "post_id": 57884278, "comment_id": 102191312, "body": "@choroba addet the script"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1568189363, "post_id": 57884278, "comment_id": 102191919, "body": "Set a flag (variable meant to be &quot;true&quot; or &quot;false&quot;) based on that command line option (to delete or not), and then make the deletion of files  conditional on this variable. To nicely deal with command line options use <a href=\"https://perldoc.perl.org/Getopt/Long.html\" rel=\"nofollow noreferrer\">Getopt::Long</a>"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1568204801, "post_id": 57884278, "comment_id": 102199886, "body": "Perhaps <a href=\"https://perldoc.perl.org/Safe.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/Safe.html</a>, <a href=\"https://perldoc.perl.org/ops.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/ops.html</a>"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1568207285, "post_id": 57884278, "comment_id": 102201356, "body": "I typically set a <code>debug</code> flag. then if debug true, it will <code>print</code> the result instead, if set to false, then perform the actual delete."}], "answers": [{"tags": [], "owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "is_accepted": true, "score": 2, "last_activity_date": 1568226533, "creation_date": 1568226533, "answer_id": 57894905, "question_id": 57884278, "link": "https://stackoverflow.com/questions/57884278/is-there-a-method-to-run-a-script-safely/57894905#57894905", "title": "Is there a method to run a script safely", "body": "<p>I would:</p>\n\n<p>1) add a new global array <code>my @dfiles;</code></p>\n\n<p>2) change all your <code>unlink $file;</code> statements to <code>push @dfiles, $file;</code></p>\n\n<p>3) add code at the end of main that displays the files:</p>\n\n<pre><code>print \"These are the files that would be deleted:\\n\";\nfor (@dfiles) {print; print \"\\n\"}\n</code></pre>\n\n<p>I'll leave it up to you how you want to handle whether files actually get deleted, either by switch or by y/n prompt. But if the files are to be deleted, then just:</p>\n\n<pre><code>for (@dfiles) {unlink $_}\n</code></pre>\n"}], "owner": {"reputation": 397, "user_id": 9892631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9270664e143242e154d99f1401acab12?s=128&d=identicon&r=PG&f=1", "display_name": "poisn", "link": "https://stackoverflow.com/users/9892631/poisn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 57894905, "answer_count": 1, "score": 0, "last_activity_date": 1568226533, "creation_date": 1568187371, "last_edit_date": 1568188124, "question_id": 57884278, "link": "https://stackoverflow.com/questions/57884278/is-there-a-method-to-run-a-script-safely", "title": "Is there a method to run a script safely", "body": "<p>I'm trying to delete log files on a server. But before the script is actually deleting files, I wan't to see which files would be deleted. My question is, is there a way to show which files would be deleted without actually deleting them? Preferably over a parameter.</p>\n\n<p>Like this: </p>\n\n<pre><code>perl -- DeleteLogs.pl C:\\Logs 14 -safeRun\n</code></pre>\n\n<p><strong>C:\\Logs</strong> is the path where the logs are saved.<br>\n<strong>14</strong> is the amount of days. Every file older than this argument should be deleted.<br>\n<strong>-safeRun</strong> this should be the argument who tells the script just to print out which files will be deleted but don't delete it yet.</p>\n\n<p><strong>The Script</strong></p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings FATAL =&gt; 'all';\nuse Scalar::Util qw(looks_like_number);\nuse File::Basename;\nuse local::lib;\nuse Data::Dumper qw(Dumper);\nuse File::Basename;\nuse DateTime;\nuse DateTime::Format::Strptime;\nuse DateTime::Duration;\nuse POSIX qw(strftime);\nuse Time::Local;\nuse Time::Piece;\nuse Time::Seconds 'ONE_WEEK';\n\n\nmy $logPath = $ARGV[0];\nmy $leaveLog = $ARGV[1];\nmy $file;\nmy $filename;\n\nif (not defined $logPath) {\n    die \"Need a correct path\\n\";\n}\n\nif (-d $logPath) {\n\n    print \"Directory exist\\n\";\n\n    if (looks_like_number($leaveLog)) {\n\n        print \"Everything correct\";\n        DoDir($logPath);\n\n    }\n    else {\n\n        die \"$leaveLog isn't a correct Integer\"\n    }\n\n}\nelse {\n\n    die \"Directory don't exist\\n\"\n}\n\nsub DoDir {\n\n    my $dir = shift;\n\n    opendir(DIR, $dir) || die \"Unable to open $dir: $!\";\n    my(@files) = grep {!/^\\.\\.?$/} readdir(DIR);\n    closedir(DIR);\n\n    foreach (@files) {\n\n        if (-d ($file = \"$dir\\\\$_\")) {\n            print \"Found a directory: $file\\n\";\n            DoDir($file);\n        }\n        else {\n\n            checkDate($file);\n        }\n    }\n}\n\nsub checkDate {\n\n    $filename = basename($file);\n\n    #Regex for pattern \"Normalfall\"\n    #Bsp: 2019_07_02_TEST_SERVER_ALL.log\n    if ($filename =~ m/^\\D?20\\d{2}_\\d{2}_\\d{2}_[\\w_]+.log$/) {\n\n        #Regex: \"\\D?\" match any char thats not a digit.\n        #       \"\\d{2}\\_\" expecting 2 random digits and underscore\n        #       \"[\\w_]+.\" expecting 1 to unlimited word char. matches with underscore char\n        #       \"log\"  matches with the characters log (case sensitive)\n        NormalFile();\n\n\n    }\n    #wl-deploy-181205082159_TEST-server_server-2019.log\n    elsif($filename =~ m/^wl-deploy-\\d+_[\\w\\-_.]+\\d+\\.log$/) {\n\n        #Regex: \"^\" asserts position at start of a line\n        #       \"wl-deploy-\" matches the character (case sensitive)\n        #       \"\\d+\" matches with a digit [0-9]\n        #       \"[\\w\\-_.]+\"\n        #           \"\\w\" matches any word char [a-zA-Z0-9]\n        #           \"\\-\" matches the char -\n        #           \"_.\" matches a single char in the list _.\n        DeployFile();\n    }\n    #2019_06_30_TestAdapter_BackendLog.log.gz_2019-07-03\n    elsif ($filename =~ m/^\\D?20(\\d{2}_){3}[\\w_]+\\.log\\.gz_\\D?20(\\d{2}-){2}\\d{2}$/) {\n\n        #print \"$filename: File match .log.gz\\n\";\n    }\n    #stdout.log.190529100348-190605092829.gz_2019-06-07\n    elsif ($filename =~ m/^stdout\\.log(\\.\\w+?-\\w+?(\\.gz_\\d{4}-\\d{2}-\\d{2})?)?$/) {\n\n        #Regex: \"stdout\" matches the chars\n        #       \"\\.\" matches the char .\n        #       \"log\" macthes the char log (case sensitive)\n        #       \"(\\.\\w+?-\\w+?(\\.gz_\\d{4}-\\d{2}-\\d{2})?)?\"\n        #           \"?\" matches between zero and one times, as many times as possible\n        #           \"\\w+?\" matches aby word chars\n        #           \"+?\" matches between one and unlimited times, as few times as possible\n        #           \"(\\.gz_\\d{4}-\\d{2}-\\d{2})?\" 2nd Capturing Group\n        #               \"\\d{4}\" matches a digit (equal to [0-9])\n        #               \"\\d{2}\" matches a digit (equal to [0-9])\n        #               \"\\d{2}\" matches a digit (equal to [0-9])\n        StdoutFile();\n        #print \"$filename: File match stdout\\n\";\n    }\n    #2019-01-13-18-45.wl-test.error\n    elsif ($filename =~ m/^\\D?20\\d{2}\\-\\d{2}\\-\\d{2}\\-\\d{2}\\-\\d{2}\\.[\\w\\-]+\\.error$/) {\n\n        #Regex: \"[\\w\\-]\"\n        #       \"\\w\" matches any word character\n        #       \"\\-\" matches the character - literally\n        ErrorFile();\n    }\n    #TT_TestAccessImpl_Statistic0.log.lck\n    elsif ($filename =~ m/^[\\w]{2}\\_[\\w]+\\.log\\.lck$/) {\n\n        #Regex:\n        LckFile();\n    }\n    #server.log00335\n    elsif ($filename =~ m/^server\\.log(\\d{5})?$/) {\n\n        #print \"$filename: File Match server\\n\";\n        ServerFile();\n    }\n    #access.log00021\n    elsif ($filename =~ m/^access\\.log(\\d{5})?$/) {\n\n        #print \"$filename: File match access\\n\";\n    }\n    else{\n\n        print \"$filename: don't match\\n\";\n    }\n}\n\n\nsub NormalFile() {\n\n    my $chars = substr($filename, 0 , 10);\n\n    my $date_parser = DateTime::Format::Strptime-&gt;new(\n\n        pattern  =&gt; '%Y_%m_%d',\n        on_error =&gt; 'croak',\n    );\n\n    my $dt = $date_parser-&gt;parse_datetime($chars);\n    my $day14 = DateTime-&gt;now-&gt;subtract (days =&gt; $leaveLog);\n    my $cmp = DateTime-&gt;compare($day14, $dt);\n\n    if ($cmp == -1 || $cmp == 0) {\n        print \"don't delete\\n\";\n    }\n    else {\n        print \"delete File: $file\\n\";\n        unlink $file;\n    }\n}\n\nsub DeployFile() {\n\n    $filename =~ s/[^\\d]//g;\n    my $dateFromString = substr($filename, 0 , 6);\n\n    my ($year, $month, $day) = unpack(\"(a2)*\", $dateFromString);\n    $year = \"20\".$year;\n\n    my $dateFromFile = $year.\"_\".$month.\"_\".$day;\n\n    my $date_parser = DateTime::Format::Strptime-&gt;new(\n\n        pattern  =&gt; '%Y_%m_%d',\n        on_error =&gt; 'croak',\n    );\n\n    my $dt = $date_parser-&gt;parse_datetime($dateFromFile);\n\n    my $day14 = DateTime-&gt;now-&gt;subtract (days =&gt; $leaveLog);\n    #print \"$day14\\n\";\n\n    my $cmp = DateTime-&gt;compare($day14, $dt);\n    #print \"$cmp\\n\";\n\n    if ($cmp == -1 || $cmp == 0) {\n        print \"don't delete\\n\";\n    }\n    else {\n        print \"delete File: $file\\n\";\n        unlink $file;\n    }\n}\n\nsub LckFile {\n\n    print \"$filename delete\\n\";\n}\n\nsub ErrorFile {\n\n    $filename = substr($filename, 0 , 10);\n    $filename =~ s/-/_/g;\n\n    my $date_parser = DateTime::Format::Strptime-&gt;new(\n\n        pattern  =&gt; '%Y_%m_%d',\n        on_error =&gt; 'croak',\n    );\n\n    my $dt = $date_parser-&gt;parse_datetime($filename);\n\n    my $day14 = DateTime-&gt;now-&gt;subtract (days =&gt; $leaveLog);\n    #print \"$day14\\n\";\n\n    my $cmp = DateTime-&gt;compare($day14, $dt);\n    #print \"$cmp\\n\";\n\n    if ($cmp == -1 || $cmp == 0) {\n        print \"don't delete\\n\";\n    }\n    else {\n        print \"delete File: $file\\n\";\n        unlink $file;\n    }\n}\n\nsub StdoutFile {\n\n    print \"$filename\\n\";\n    $filename =~ /^stdout\\.log\\.((?:\\d+?)|unknown)-(\\d+?)(?:\\.gz_\\d{4}-\\d{1,2}-\\d{1,2})?$/g;\n\n    unless (defined $1 and defined $2) {\n        warn \"Log file '$filename' does not match regex\\n\";\n        return;\n    }\n\n    if ($1 ne \"unknown\") {\n\n        my $firstDate = substr($1, 0, 6);\n        my ($year, $month, $day) = unpack(\"(a2)*\", $firstDate);\n        $year = \"20\" . $year;\n        $firstDate = $year . \"_\" . $month . \"_\" . $day;\n    }\n\n    my $secondDate = substr($2, 0, 6);\n    my ($year, $month, $day) = unpack(\"(a2)*\", $secondDate);\n    $year = \"20\" . $year;\n    $secondDate = $year . \"_\" . $month . \"_\" . $day;\n\n    my $date_parser = DateTime::Format::Strptime-&gt;new(\n\n        pattern  =&gt; '%Y_%m_%d',\n        on_error =&gt; 'croak',\n    );\n\n    my $dt = $date_parser-&gt;parse_datetime($secondDate);\n\n    my $day14 = DateTime-&gt;now-&gt;subtract ( days =&gt; $leaveLog);\n    #print \"$day14\\n\";\n\n    my $cmp = DateTime-&gt;compare($day14, $dt);\n    #print \"$cmp\\n\";\n\n    if ($cmp == -1 || $cmp == 0) {\n        print \"don't delete\\n\";\n    }\n    else {\n        print \"delete File $file\\n\";\n        unlink $file;\n    }\n}\n\nsub ServerFile {\n    #print \"$filename delete\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "ssl-certificate", "lwp-useragent"], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 1, "last_activity_date": 1598210366, "last_edit_date": 1598210366, "creation_date": 1568183154, "answer_id": 57883253, "question_id": 57879388, "link": "https://stackoverflow.com/questions/57879388/certificate-verify-failed-perl/57883253#57883253", "title": "Certificate verify failed perl", "body": "<blockquote>\n<p>SSLlabs.com says the site has &quot;Chain issues Contains anchor&quot;. Do I need to download one of the certificates to my server?</p>\n</blockquote>\n<p>While it is a misconfiguration of the server just having the root certificate (&quot;anchor&quot;) included in the certificates sent by the server is not a problem for the verification. It will be simply ignored. In fact, I have no problems accessing the site with a current LWP and with the default root CA on my installation at all.</p>\n<blockquote>\n<p>This used to run but now does not. I get the &quot;certificate verify failed&quot; message.</p>\n</blockquote>\n<p>As I said, it runs on my system without problems. And while the configuration of this server is terrible (<a href=\"https://www.ssllabs.com/ssltest/analyze.html?d=elibrary.ferc.gov\" rel=\"nofollow noreferrer\">grade F in the SSLLabs report</a>) the configuration of the certificate and thus the verification of these is not a real problem.</p>\n<p>Thus it is more likely that some changes were done on your system which caused it no longer to trust the necessary root CA (DigiCert Global Root CA). Unfortunately this configuration is outside of your code so it is unknown what was actually done here.</p>\n<p>But to fix the problem for your specific case you can just <a href=\"https://censys.io/certificates/4348a0e9444c78cb265e058d5e8944b4d84f9662bd26db257f8934a443c70161/pem\" rel=\"nofollow noreferrer\">download the necessary root certificate</a>, write it into a file (like <code>ca.pem</code>) and then give this file explicitly as root CA store for your program:</p>\n<pre><code>my $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;ssl_opts('SSL_ca_file' =&gt; 'ca.pem');\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11506690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd8dea046c60f03a4ca461e31f7803a?s=128&d=identicon&r=PG&f=1", "display_name": "wiedhas", "link": "https://stackoverflow.com/users/11506690/wiedhas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1598210366, "creation_date": 1568158837, "last_edit_date": 1568182480, "question_id": 57879388, "link": "https://stackoverflow.com/questions/57879388/certificate-verify-failed-perl", "title": "Certificate verify failed perl", "body": "<p>I am running this bit of code from a cgi.  It is supposed to insert a bit of text into the site: <a href=\"https://elibrary.ferc.gov/idmws/search/FercAdvSearch.asp\" rel=\"nofollow noreferrer\">https://elibrary.ferc.gov/idmws/search/FercAdvSearch.asp</a> and then return the response page and download the link on my server.  This used to run but now does not.  I get the \"certificate verify failed\" message.  I am running perl 5.18.2 and using lwp::UserAgent.  SSLlabs.com says the site has \"Chain issues    Contains anchor\".  Do I need to download one of the certificates to my server?</p>\n\n<pre><code>$q =~ s#\\n#&amp;#mg;\n\n# Create a request\nif( ! $acid ){\n    print $query-&gt;start_html('Problems');\n    print $query-&gt;h2('Request not processed.' . \" No accession             number supplied\" );\n    print  $query-&gt;end_html;\n}else{\n#    my $req = HTTP::Request-&gt;new(POST =&gt; \"https://elibrary.ferc.gov/idmws/search/advResults.asp\");\n    my $req = HTTP::Request-&gt;new(POST =&gt; \"https://elibrary.ferc.gov/idmws/search/fercadvsearch.asp\");\n    $req-&gt;content_type('application/x-www-form-urlencoded');\n    $req-&gt;content(\"$q\");\n\n    # Pass request to the user agent and get a response back\n    my $res = $ua-&gt;request($req);\n\n    #print \"$q&lt;br&gt;\\n\";\n    # Check the outcome of the response\n    if ($res-&gt;is_success) {\n        $html = $res-&gt;content;\n        $html =~ s#=\\s*'\\.\\./#='https://elibrary.ferc.gov/idmws/#g;\n        # ACTION=\"advResults.asp\"\n        $html =~ s#ACTION=\"#ACTION=\"https://elibrary.ferc.gov/idmws/search/#g;\n        $html =~ s#ACTION='#ACTION='https://elibrary.ferc.gov/idmws/search/#g;\n        $html =~ s#HREF='intermediate.asp#HREF='https://elibrary.ferc.gov/idmws/search/intermediate.asp#gm;\n        $html =~ s#HREF=(['\"])([a-z,A-Z,0-9,-,_./]+).asp#HREF=${1}https://elibrary.ferc.gov/idmws/search/$2.asp#gmi;\n        #&lt;A href='intermediate.asp?link_info=yes&amp;doclist=13518346'      target=\"_blank\"&gt;INFO&lt;/A&gt;&lt;BR&gt;&lt;BR&gt;\n        print $html;\n        print \"($EndDate) ($StartDate)\";\n    }\n    else {\n        print \"ERROR getting &lt;A HREF='https://elibrary.ferc.gov/idmws/search/advResults.asp'&gt;https://elibrary.ferc.gov/idmws/search/advResults.asp&lt;/a&gt;\" . $res-&gt;status_line. \"\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": ["regex", "perl", "pcre"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1568149205, "post_id": 57877780, "comment_id": 102181031, "body": "Why would you ever want to use 2 capture groups around the same bunch of constructs ? Really a bad idea. If your torn between 2 names, get creative.  <code>IdName</code>"}, {"owner": {"reputation": 502, "user_id": 921912, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3c07050ee10b0b556d058c27dfedbdd3?s=128&d=identicon&r=PG", "display_name": "Tim Brigham", "link": "https://stackoverflow.com/users/921912/tim-brigham"}, "edited": false, "score": 0, "creation_date": 1568160229, "post_id": 57877780, "comment_id": 102183507, "body": "@sln, the reason is this is actually used inside of logarithm. I need to retain the original feeling for the rules written by the company to function, but at the same time I need my alias to work for custom developed rules due to a product limitation."}], "answers": [{"comments": [{"owner": {"reputation": 502, "user_id": 921912, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3c07050ee10b0b556d058c27dfedbdd3?s=128&d=identicon&r=PG", "display_name": "Tim Brigham", "link": "https://stackoverflow.com/users/921912/tim-brigham"}, "edited": false, "score": 0, "creation_date": 1568148018, "post_id": 57877834, "comment_id": 102180656, "body": "Thank you! I knew there was a simple way to do this!"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 2, "last_activity_date": 1568147441, "creation_date": 1568147441, "answer_id": 57877834, "question_id": 57877780, "link": "https://stackoverflow.com/questions/57877780/multiple-names-for-the-same-perl-named-regex-extraction/57877834#57877834", "title": "Multiple names for the same perl named regex extraction", "body": "<p>Just wrap the named capture in another named capture group:</p>\n\n<pre><code>(-|(?&lt;objectID&gt;(?&lt;objectname&gt;.*\\\\(?&lt;process&gt;[^\\r\\n\\\\]+)))\n</code></pre>\n"}], "owner": {"reputation": 502, "user_id": 921912, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3c07050ee10b0b556d058c27dfedbdd3?s=128&d=identicon&r=PG", "display_name": "Tim Brigham", "link": "https://stackoverflow.com/users/921912/tim-brigham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 57877834, "answer_count": 1, "score": 1, "last_activity_date": 1568147441, "creation_date": 1568147161, "question_id": 57877780, "link": "https://stackoverflow.com/questions/57877780/multiple-names-for-the-same-perl-named-regex-extraction", "title": "Multiple names for the same perl named regex extraction", "body": "<p>I'm working a regex written by someone else. I need to have an existing named extraction aliased to use a different name. </p>\n\n<p>Basically the chunk of the regex I'm working with looks like this: </p>\n\n<pre><code>(-|(?&lt;objectname&gt;.*\\\\(?&lt;process&gt;[^\\r\\n\\\\]+))\n</code></pre>\n\n<p>This matches up to a part of a log, containing a path to an executable. </p>\n\n<p>Which pulls out the content that I need into objectname, and the executable name minus the path into process. </p>\n\n<p>I need to alias <code>objectname</code> to also be returned if I look for <code>objectID</code>. I'm not looking for the /j operator for multiple groups with the same name. </p>\n"}, {"tags": ["perl", "perlbrew"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568137212, "post_id": 57875733, "comment_id": 102176405, "body": "<a href=\"https://perl5.git.perl.org/perl.git/blob/44523d1ffde5f23de2e13216cdbac46357631904:/t/op/groups.t\" rel=\"nofollow noreferrer\"><code>groups.t</code> of 5.30.3</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568137655, "post_id": 57875733, "comment_id": 102176593, "body": "OS? Output of <code>id -a</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568137700, "post_id": 57875733, "comment_id": 102176616, "body": "It&#39;s probably a bad test rather than an actual problem."}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568137989, "post_id": 57875733, "comment_id": 102176731, "body": "@ikegami this is a CentOS system, id -a gives an answer too long to post here.  <code>rpm -q centos-release</code> gives <code>centos-release-7-6.1810.2.el7.centos.x86_64</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568138022, "post_id": 57875733, "comment_id": 102176745, "body": "To long to add to your question?"}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568138162, "post_id": 57875733, "comment_id": 102176810, "body": "@ikegami  I have added the output of <code>id -a</code> to the question"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568138284, "post_id": 57875733, "comment_id": 102176853, "body": "And the output of <code>.&#47;perl -le&#39;print $(&#39;</code> run from the build directory. (I think it&#39;s the <code>build&#47;perl-5.30.0&#47;perl-5.30.0</code> subdir of your perlbrew dir)"}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568138405, "post_id": 57875733, "comment_id": 102176899, "body": "@ikegami <code>703404669@bioitutil2:~&#47;perl5&#47;perlbrew&#47;build&#47;perl-5.30.0&#47;perl&zwnj;&#8203;-5.30.0$ .&#47;perl -le&#39;print $(&#39; 60513 10 2000 2002 3001 3002 3003 3004 3005 3006 3007 3008 60513 94696 94773 95046 97178 97179 137580 529018 562127 564451 576177 576507 615672 637092 639414 642499 656741 657700 657701 659636 667588 669081 677540 677669 677823 703542 703546 709223 709224 716197 716198 716199 719364 719474 722319 725674 736131 760563 796245 797952 889435 889439 1021861 1037894 1112173 1127635 1137950 1137980 1173104 1192175 1206723 1225668 1227493 1232214 1236548 1238714 1240689 1242875</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568141645, "post_id": 57875733, "comment_id": 102178154, "body": "I tried to step through, but it turned out to be more work than anticipated to fudge the code to allow me to do that on my system. Instead, let&#39;s start by running <code>t&#47;TEST op&#47;groups.t</code> from <code>~&#47;perl5&#47;perlbrew&#47;build&#47;perl-5.30.0&#47;perl-5.30.0</code>"}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568142392, "post_id": 57875733, "comment_id": 102178453, "body": "@ikegami <code>t&#47;op&#47;groups ... skipped FAILED--no tests were run for some reason.</code> &quot;for some reason&quot; isn&#39;t very helpful"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568142932, "post_id": 57875733, "comment_id": 102178667, "body": "huh? It wasn&#39;t skipped earlier. ?!?!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568143135, "post_id": 57875733, "comment_id": 102178746, "body": "Well, in any case, that&#39;s the command you need to debug."}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568313917, "post_id": 57875733, "comment_id": 102244814, "body": "@ikegami I really don&#39;t know how to debug this, when I run <code>perl groups.t</code> it says that it can&#39;t find test.pl in @INC how can I get this test.pl?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568314467, "post_id": 57875733, "comment_id": 102245045, "body": "<code>perl groups.t</code> is not the proper way to run <code>groups.t</code>, <code>t&#47;TEST op&#47;groups.t</code> (from the build dir) is"}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568321892, "post_id": 57875733, "comment_id": 102247657, "body": "@ikegami would it be okay to run &quot;--notest&quot;? I have no idea how to proceed with this"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568321997, "post_id": 57875733, "comment_id": 102247697, "body": "Yeah, you could ignore the error. At worse, some of user-group related stuff might not work. At best, it&#39;s a bad test and everything will work correctly."}], "owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1568138554, "creation_date": 1568136591, "last_edit_date": 1568138554, "question_id": 57875733, "link": "https://stackoverflow.com/questions/57875733/perlbrew-fails-to-install-perl-5-30-0-op-groups-t-at-fault", "title": "Perlbrew fails to install perl-5.30.0, op/groups.t at fault?", "body": "<p>I'm attempting to install perl 5.30.0 from perl 5.16.3,  I run</p>\n\n<p><code>perlbrew install perl-5.30.0</code></p>\n\n<p>but the installation fails, even with <code>-f</code>,</p>\n\n<p>and selections from the error file show:</p>\n\n<pre><code>~/perl5/perlbrew/build/perl-5.30.0/perl-5.30.0$ grep -A1 -B1 -i failed /home/703404669/perl5/perlbrew/build.perl-5.30.0.log\n    opmini.o perlmini.o  gv.o toke.o perly.o pad.o regcomp.o dump.o util.o mg.o reentr.o mro_core.o keywords.o hv.o av.o run.o pp_hot.o sv.o pp.o scope.o pp_ctl.o pp_sys.o doop.o doio.o regexec.o utf8.o taint.o deb.o universal.o globals.o perlio.o perlapi.o numeric.o mathoms.o locale.o pp_pack.o pp_sort.o caretx.o dquote.o time64.o  miniperlmain.o  -lpthread -lnsl -ldl -lm -lcrypt -lutil -lc \n./miniperl -w -Ilib -Idist/Exporter/lib -MExporter -e '&lt;?&gt;' || sh -c 'echo &gt;&amp;2 Failed to build miniperl.  Please run make minitest; exit 1'\n./miniperl -Ilib -f write_buildcustomize.pl\n--\nop/grep.t .......................................................... ok\n# Failed test 1 - perl's `$(' agrees with `id -a 2&gt;/dev/null || id 2&gt;/dev/null' at op/groups.t line 117\nop/groups.t ........................................................ \nFailed 1/2 subtests \nop/gv.t ............................................................ ok\n--\n-------------------\nop/groups.t                                                      (Wstat: 0 Tests: 2 Failed: 1)\n  Failed test:  1\nFiles=2656, Tests=1219021, 1082 wallclock secs (100.74 usr 14.39 sys + 712.86 cusr 87.83 csys = 915.82 CPU)\n--\nmake: *** [test_harness] Error 1\n##### Brew Failed #####\n</code></pre>\n\n<p>I can't find a solution on Google searches, I've found something similar on <a href=\"https://rt.perl.org/Public/Bug/Display.html?id=116775\" rel=\"nofollow noreferrer\">https://rt.perl.org/Public/Bug/Display.html?id=116775</a> but I don't see the solution, and I'm not even sure if that person had the same problem.</p>\n\n<p>How can I get perl-5.30.0 installed on my perlbrew?</p>\n\n<pre><code>~/perl5/perlbrew/build/perl-5.30.0/perl-5.30.0$ id -a\nuid=1227493(703404669) gid=60513(domain users) groups=60513(domain users),10(wheel),2000(bioinfom),2002(docker),3001(BUILTIN\\users),3002(geno studies),3003(clm_users),3004(shrsf_all_employees),3005(svh_owa_ext),3006(svh_owa_non),3007(citrix access gateway),3008(citrix - ms outlook 2010),94696(citrix access gateway),94773(clm_users),95046(geno studies),97178(svh_owa_ext),97179(svh_owa_non),137580(shrsf_all_employees),529018(citrix - ms outlook 2010),562127(sp lab clsi link visitors),564451(fgo_owa_non),576177(shrsf_esbc_biobank),576507(sioux falls region users),615672(fargo remote e-mail),637092(sf remote access audit group),639414(fgo remote access audit group),642499(all emps_all regions),656741(all sites_sioux falls_sd),657700(all emps_system_all regions),657701(all emps_system_sf region),659636(all emps_sf region),667588,669081(polycom-cantonhosp-cart1-author),677540(room-sf-surgicaltower dakotafoodcourttiledarea-author),677669(rtls_standard),677823(room-sf-surgicaltower g734residencyclassroom-reviewer),703542(benefits_all_sf region),703546(benefits_emps_sf region),709223(benefits_all_all regions),709224(benefits_emps_all regions),716197(remote access audit cag),716198(remote access audit owa),716199(remote access audit vpn),719364(room-sf-stevenscenter publicaffairs),719474(equipment-sf-sanfordcenter-intlclinicsconfline-reviewers),722319(all emps_all regions_&amp;_affiliates),725674(ent mobile connect),736131(ent lync users),760563(policies_sioux falls),796245(all emps_all regions_nonnested),797952(imagenetics - sioux falls),889435(one chart remote ent),889439(workflow tracer ent),1021861(avaya one-x communicator - sf),1037894(onerpt-admin-general),1112173(ent asa allowed),1127635(hrcommunications),1137950(ent remote connect),1137980(sioux falls users),1173104(all emps_all regions_non union),1192175(fgo owa groups),1206723(all emps_all regions_annual increase),1225668(ent symantec encryption users),1227493(703404669),1232214(avaya one-x communicator - sf-sp12),1236548(sccm_app_user_workflow tracer - mtn time - ltsr),1238714(sccm_app_user_workflow tracer - ltsr),1240689(sccm_app_user_one chart remote - ltsr),1242875 context=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023\n\n~/perl5/perlbrew/build/perl-5.30.0/perl-5.30.0$ ./perl -le'print $('\n60513 10 2000 2002 3001 3002 3003 3004 3005 3006 3007 3008 60513 94696 94773 95046 97178 97179 137580 529018 562127 564451 576177 576507 615672 637092 639414 642499 656741 657700 657701 659636 667588 669081 677540 677669 677823 703542 703546 709223 709224 716197 716198 716199 719364 719474 722319 725674 736131 760563 796245 797952 889435 889439 1021861 1037894 1112173 1127635 1137950 1137980 1173104 1192175 1206723 1225668 1227493 1232214 1236548 1238714 1240689 1242875\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568137404, "post_id": 57875189, "comment_id": 102176479, "body": "ALWAYS use <code>use strict; use warnings;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1568134280, "creation_date": 1568134280, "answer_id": 57875219, "question_id": 57875189, "link": "https://stackoverflow.com/questions/57875189/discard-a-seconds-from-localtime-in-perl/57875219#57875219", "title": "Discard a seconds from localtime in Perl", "body": "<p>You can replace it with <code>undef</code> on the left side of the assignment and Perl will not assign it.</p>\n\n<pre><code>(undef,$min,$hour,$mday,$mon,$year) = localtime($stop_epoch);\n</code></pre>\n\n<p>The other way to get rid of warnings, of course, is to disable warnings. It's not necessarily a bad programming practive if you do this in a small scope and in a context where you are sure the warning is spurious and unhelpful.</p>\n\n<pre><code>{\n    no warnings 'once';\n    ($sec,$min,$hour,$mday,$mon,$year) = localtime($stop_epoch);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 5, "last_activity_date": 1568135050, "last_edit_date": 1568135050, "creation_date": 1568134651, "answer_id": 57875310, "question_id": 57875189, "link": "https://stackoverflow.com/questions/57875189/discard-a-seconds-from-localtime-in-perl/57875310#57875310", "title": "Discard a seconds from localtime in Perl", "body": "<p>You should be using lexical variables wherever possible, for which this warning does not apply.</p>\n\n<pre><code>use strict;\nuse warnings;\nmy ($sec,$min,$hour,$mday,$mon,$year) = localtime($stop_epoch);\n</code></pre>\n\n<p>The <code>undef</code> assignment trick is also allowed in a <code>my</code>.</p>\n\n<pre><code>my (undef,$min,$hour,$mday,$mon,$year) = localtime($stop_epoch);\n</code></pre>\n\n<p>See <a href=\"https://perldoc.pl/perlsub#Private-Variables-via-my%28%29\" rel=\"noreferrer\">perlsub</a>. </p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1568137337, "creation_date": 1568137337, "answer_id": 57875898, "question_id": 57875189, "link": "https://stackoverflow.com/questions/57875189/discard-a-seconds-from-localtime-in-perl/57875898#57875898", "title": "Discard a seconds from localtime in Perl", "body": "<p>Always use <code>use strict; use warnings;</code>!</p>\n\n<p>If you had declared the variables instead of using global variables, you wouldn't have gotten this warning.</p>\n\n<pre><code>my ($sec,$min,$hour,$mday,$mon,$year) = localtime($stop_epoch);\n</code></pre>\n\n<p>That said, you don't have to use a variable you don't need. You could use</p>\n\n<pre><code>my (undef,$min,$hour,$mday,$mon,$year) = localtime($stop_epoch);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my ($year,$mon,$mday,$hour,$min) = ( localtime($stop_epoch) )[5,4,3,2,1];\n</code></pre>\n"}], "owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1568137337, "creation_date": 1568134158, "question_id": 57875189, "link": "https://stackoverflow.com/questions/57875189/discard-a-seconds-from-localtime-in-perl", "title": "Discard a seconds from localtime in Perl", "body": "<p>ALL,</p>\n\n<p>I have a following line in my script:</p>\n\n<pre><code>($sec,$min,$hour,$mday,$mon,$year) = localtime( $stop_epoch);\n</code></pre>\n\n<p>in order to generate Zulu time, which does not need seconds. And so when executing my script is printing a warning:</p>\n\n<pre><code>Name main::sec used only once: possible typo\n</code></pre>\n\n<p>Is there a way to get rid of this warning?</p>\n\n<p>TIA!!</p>\n"}, {"tags": ["sql-server", "perl", "stored-procedures", "sybase"], "answers": [{"tags": [], "owner": {"reputation": 546, "user_id": 3869484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LJ3Z0.jpg?s=128&g=1", "display_name": "Richard Crossley", "link": "https://stackoverflow.com/users/3869484/richard-crossley"}, "is_accepted": false, "score": 0, "last_activity_date": 1568162437, "creation_date": 1568162437, "answer_id": 57879684, "question_id": 57873319, "link": "https://stackoverflow.com/questions/57873319/perl-error-when-attempting-to-run-a-stored-procedure-in-sql-server/57879684#57879684", "title": "Perl, error when attempting to run a stored procedure in SQL Server", "body": "<p>It looks from the error message your Perl DBD driver for Sybase has been compiled using \"DBLib\" which hasn't really been maintained for years. It was replaced with CTLib in the 1990s. DBLib didn't support multi-byte character sets.</p>\n\n<p>You will probably want to upgrade/recompile the DBD Driver or replace it with an ODBC driver from Microsoft who provide such a driver for Linux alongside their MS SQL for Linux offering.</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/sql/connect/odbc/linux-mac/installing-the-microsoft-odbc-driver-for-sql-server?view=sql-server-2017\" rel=\"nofollow noreferrer\">MS SQL Sever ODBC Driver on Linux</a></p>\n\n<p>If you're using FreeTDS, you might have some mileage by changing the protocol version number as mentioned in this answer.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/5414890/mssql-query-issue-in-php-and-querying-text-data\">Change TDS Protocol Version</a></p>\n"}], "owner": {"reputation": 306, "user_id": 4520979, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/461450d2d32187c0e0fc9fb1d1a5a668?s=128&d=identicon&r=PG&f=1", "display_name": "schu777", "link": "https://stackoverflow.com/users/4520979/schu777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570899470, "creation_date": 1568126897, "last_edit_date": 1570899470, "question_id": 57873319, "link": "https://stackoverflow.com/questions/57873319/perl-error-when-attempting-to-run-a-stored-procedure-in-sql-server", "title": "Perl, error when attempting to run a stored procedure in SQL Server", "body": "<p>I'm trying to execute a stored procedure that has 3 columns of type <code>nvarchar(max)</code> on the table. However, I'm getting the following error:</p>\n\n<blockquote>\n  <p>Caught exception in H2::Controller::AP->apge \"DBD::Sybase::st fetchrow_hashref failed: Server message number=4004 severity=16 state=1 line=48 server=DEV procedure=sp_List text=Unicode data in a Unicode-only collation or ntext data cannot be sent to clients using DB-Library (such as ISQL) or ODBC version 3.7 or earlier.  at /AP.pm line 361.\"</p>\n</blockquote>\n\n<p>I've tried to have the columns cast as <code>varchar(max)</code> and <code>text</code>, yet it still fails. </p>\n\n<p>Running the SQL will retrieve the data just fine, but calling the stored procedure it errors out.</p>\n\n<p>A temp table has been created that has the type of text for the three columns. </p>\n\n<p>Which fails with error:</p>\n\n<blockquote>\n  <p>Caught exception in H2::Controller::AP->apge \"DBD::Sybase::st fetchrow_hashref failed: Server message number=4004 severity=16 state=1 line=47 server=DEV procedure=sp_List text=Unicode data in a Unicode-only collation or ntext data cannot be sent to clients using DB-Library (such as ISQL) or ODBC version 3.7 or earlier.  at /AP.pm line 361.\"</p>\n</blockquote>\n\n<p>The database connection is:</p>\n\n<pre><code> has 'dbh' =&gt; ( is =&gt; 'rw', isa =&gt; 'DBI::db', default =&gt; sub{ return DATABASE::connect( system =&gt; 'xx', database =&gt; 'xxx', user =&gt; 'xxx' ); } );\n</code></pre>\n\n<p>The call to the stored procedure:</p>\n\n<pre><code>my $sql =\"exec tskMngmnt.dbo.sp_List \";\n\nif (defined $a &amp;&amp; $a ne \"\" &amp;&amp; $a ne \"NONE\") {\n   $sql .= \"\\@e = $a \";\n} else {\n   $sql .= \"\\@e = NULL \";\n}\n</code></pre>\n\n<p>Here is the versions of DBI that we have installed:</p>\n\n<pre><code>perl -MDBI -e 'DBI-&gt; installed_versions;'\n  Perl            : 5.018002    (x86_64-linux-thread-multi)\n  OS              : linux   (4.4.92-31-default)\n  DBI             : 1.628\n  DBD::mysql      : 4.021\n  DBD::Sybase     : 1.15\n  DBD::Sponge     : 12.010003\n  DBD::SQLite     : 1.50\n  DBD::Proxy      : 0.2004\n  DBD::Gofer      : 0.015327\n  DBD::File       : 0.42\n  DBD::ExampleP   : 12.014311\n  DBD::DBM        : 0.08\n\n</code></pre>\n\n<p>The stored procedure should return 1 row of the columns I'm trying to retrieve.</p>\n"}, {"tags": ["perl", "pdf", "strftime"], "answers": [{"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1568122377, "post_id": 57871862, "comment_id": 102168728, "body": "<code>use strict; use warnings;</code> please (<code>$min</code> is undeclared). Also, it&#39;s much easier to read if you indent your code. Finally, I don&#39;t see why your function is better than using <code>strftime</code> (you&#39;re computing pretty much the same thing as <code>strftime &quot;%Y%m%d-%H%M%S&quot;, localtime</code>)."}, {"owner": {"reputation": 518, "user_id": 3617046, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/afad7c3481df3dcbbcd2b4366782e056?s=128&d=identicon&r=PG&f=1", "display_name": "Bulrush", "link": "https://stackoverflow.com/users/3617046/bulrush"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1568122592, "post_id": 57871862, "comment_id": 102168866, "body": "@Dada thanks. I fixed the lack of declaration of $min. This is designed to go into a library file like <code>util.pl</code> and <code>require</code>d into the main program. The main program should have <code>use strict; use warnings;</code>."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1568123177, "post_id": 57871862, "comment_id": 102169265, "body": "I don&#39;t blame you for not including strict/warnings in the snippet, but rather for not using it at all (since you forgot the declaration of $min). (You should still use strict/warnings in your libraries, and not only in the main)"}, {"owner": {"reputation": 518, "user_id": 3617046, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/afad7c3481df3dcbbcd2b4366782e056?s=128&d=identicon&r=PG&f=1", "display_name": "Bulrush", "link": "https://stackoverflow.com/users/3617046/bulrush"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1568123305, "post_id": 57871862, "comment_id": 102169349, "body": "@Dada Does the use strict/warnings have scope? So the use strict/warnings in my main program will not find the problems in my library? I guess it does have scope since my library never complained."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1568123441, "post_id": 57871862, "comment_id": 102169427, "body": "use strict/warnings have a scope indeed. But that shouldn&#39;t even come into consideration: you want to spot errors as soon as possible. You don&#39;t want to load 50 libraries in your main and get 3000 warnings."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1568123512, "post_id": 57871862, "comment_id": 102169472, "body": "(and seriously, <code>strftime</code> is much shorter, easier to read, and easier to maintain.. Want to change the format? easy, just change the format string. Want to add a separator? easy, just add a separator in the format string...)"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1568124879, "post_id": 57871862, "comment_id": 102170264, "body": "Please do not recommend requiring Perl 4-style &quot;library files&quot;."}], "tags": [], "owner": {"reputation": 518, "user_id": 3617046, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/afad7c3481df3dcbbcd2b4366782e056?s=128&d=identicon&r=PG&f=1", "display_name": "Bulrush", "link": "https://stackoverflow.com/users/3617046/bulrush"}, "is_accepted": false, "score": 0, "last_activity_date": 1568122517, "last_edit_date": 1568122517, "creation_date": 1568122027, "answer_id": 57871862, "question_id": 57871230, "link": "https://stackoverflow.com/questions/57871230/how-to-fix-usage-error-in-strftime-in-perl-script/57871862#57871862", "title": "How to fix Usage error in strftime in Perl script", "body": "<p>It looks like you are just getting a date and time stamp for something. So here's the code I use for the current date and time in a special format: </p>\n\n<pre><code>###########################################################################\n# July 2014\n# Usage: $ts=getfulldatetime();\n# Return current date and time in format: YYMMDD-hhmmss. Used on filenames.\nsub getfulldatetime\n{\n\nmy(@a,@b,$i,$j,$procname,$s,$t);\nmy($day,$mo,$sec,$year,$hr,$min);\n\n$procname=\"getfulldatetime\";\n@a=localtime();\n$day=sprintf(\"%02d\",$a[3]);\n$mo=sprintf(\"%02d\",$a[4]+1); # Month is 0-11.\n\n($sec,$min,$hr,$day, $mo, $year) = (localtime)[0,1,2,3,4,5];\n$year=sprintf(\"%04d\",$year);\n$mo = sprintf '%02d', $mo+1;\n$day   = sprintf '%02d', $day;\n$s= ($year+1900).$mo.$day;\n$s.=\"-\".sprintf(\"%02d\",$hr).sprintf(\"%02d\",$min).sprintf(\"%02d\",$sec);\n\nreturn $s; # getfulldatetime\n}\n\n</code></pre>\n\n<p>Remove whatever parts you don't need. This should not need any special <code>use</code> statements, it's pretty generic.</p>\n"}, {"tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": true, "score": 5, "last_activity_date": 1568122997, "creation_date": 1568122997, "answer_id": 57872151, "question_id": 57871230, "link": "https://stackoverflow.com/questions/57871230/how-to-fix-usage-error-in-strftime-in-perl-script/57872151#57872151", "title": "How to fix Usage error in strftime in Perl script", "body": "<p>In list context, <a href=\"https://perldoc.perl.org/functions/localtime.html\" rel=\"noreferrer\"><code>localtime</code></a> returns a list of 9 elements. However,</p>\n\n<blockquote>\n  <p>In scalar context, localtime returns the ctime(3) value:</p>\n</blockquote>\n\n<p>If you print <code>$timestamp</code>, you will get something like:</p>\n\n<pre><code>Tue Sep 10 15:37:22 2019\n</code></pre>\n\n<p><a href=\"https://perldoc.perl.org/POSIX.html#strftime\" rel=\"noreferrer\"><code>strftime</code></a>, as your error message says (and as the documentation shows) expects 7 parameters. You should therefore pass it what <code>localtime</code> returns in list context rather than in scalar context. That is, use:</p>\n\n<pre><code>my @localtime  = localtime;\nmy $tz         = POSIX::strftime(\"%z\", @localtime);\n$tz            =~ s/([\\+\\-])(\\d\\d)(\\d\\d)/$1$2'$3'/;\nmy $timestring = POSIX::strftime(\"D:%Y%m%d%H%M%S$tz\", @localtime);\n</code></pre>\n\n<hr>\n\n<p>For a small example reproducing what I'm talking about in my answer:</p>\n\n<pre><code>my $time = localtime;\nsay strftime \"%Y\", $time;\n</code></pre>\n\n<p>Will crash, whereas</p>\n\n<pre><code>my @time = localtime;\nsay strftime \"%Y\", @time;\n</code></pre>\n\n<p>Will work fine.</p>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 2, "last_activity_date": 1568125106, "creation_date": 1568125106, "answer_id": 57872786, "question_id": 57871230, "link": "https://stackoverflow.com/questions/57871230/how-to-fix-usage-error-in-strftime-in-perl-script/57872786#57872786", "title": "How to fix Usage error in strftime in Perl script", "body": "<p>The correct answer is to call localtime in list context, but an alternative is to use the core <a href=\"https://perldoc.pl/Time::Piece\" rel=\"nofollow noreferrer\">Time::Piece</a> module, which provides a <code>localtime</code> function that returns an object with a <code>strftime</code> method.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Time::Piece;\n\nmy $timepiece = localtime;\nmy $tz = $timepiece-&gt;strftime(\"%z\"); #etc\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 10500417, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lqs2wuzb-tM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVT92HTL5zhuL3XXyhn4btxjojg6A/mo/photo.jpg?sz=128", "display_name": "SaAsh Techs", "link": "https://stackoverflow.com/users/10500417/saash-techs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 1, "accepted_answer_id": 57872151, "answer_count": 3, "score": 2, "last_activity_date": 1568125106, "creation_date": 1568119886, "question_id": 57871230, "link": "https://stackoverflow.com/questions/57871230/how-to-fix-usage-error-in-strftime-in-perl-script", "title": "How to fix Usage error in strftime in Perl script", "body": "<p>I am writing Perl script signature.pl to build PDF Dictionary and Signature dictionary objects\nThis has the PEM and PDF in variables declared. I have used POSIX for strftime</p>\n\n<pre><code>use strict;\nuse warnings;\nuse PDF::API2;\nuse PDF::API2::Basic::PDF::Utils;\nuse File::Slurp;\nuse POSIX;\n\nuse Crypt::OpenSSL::RSA;\nuse Crypt::OpenSSL::X509 qw/FORMAT_UNDEF FORMAT_ASN1 FORMAT_TEXT FORMAT_PEM/;\nuse Digest::SHA1 qw(sha1 sha1_hex);\n\nmy $add_mdp = 0;\nmy $input_filename = \"signature.pdf\";\nmy $tempfilename   = 'tmp.pdf';\nmy $outfilename    = 'tmp.pdf';\n\nmy $sig_algorithm  = 'pkcs7';\nmy $sig_length     = 20480;\n\nmy $cacert_filename   = \"signature.pem\";\nmy $x509_filename     = \"signature.pem\";\nmy $priv_key_filename = \"signature.pem\";\n\nmy $cacert   = Crypt::OpenSSL::X509-&gt;new_from_file($cacert_filename);\nmy $x509     = Crypt::OpenSSL::X509-&gt;new_from_file($x509_filename);\nmy $priv_key = read_file($priv_key_filename);\n\nmy $timestamp  = localtime;\nmy $tz         = POSIX::strftime(\"%z\", $timestamp);\n$tz            =~ s/([\\+\\-])(\\d\\d)(\\d\\d)/$1$2'$3'/;\nmy $timestring = POSIX::strftime(\"D:%Y%m%d%H%M%S$tz\", $timestamp);\n\nmy $location   = `hostname`;\nchomp $location;\n\nmy $contact_info = PDFStr($x509-&gt;email());\n\nmy $signer_name  = PDFStr($x509-&gt;subject_name-&gt;as_string);\n\nmy $pdf = PDF::API2-&gt;open($input_filename);\nmy $p   = $pdf-&gt;{catalog}-&gt;{' parent'};\n\nmy $sigdict             = PDF::API2::Basic::PDF::Dict-&gt;new();\n$sigdict-&gt;{Type}        = PDFName(\"Sig\");\n$sigdict-&gt;{Filter}      = PDFName(\"Adobe.PPKLite\");\n$sigdict-&gt;{Reason}      = PDFStr(\"Testing my PDF Signature Demo Tool\");\n$sigdict-&gt;{Name}        = $signer_name;\n$sigdict-&gt;{ContactInfo} = $contact_info;\n$sigdict-&gt;{Location}    = $location;\n$sigdict-&gt;{M}           = $timestring;\n\nif ($sig_algorithm eq 'rsa') {\n    $sigdict-&gt;{SubFilter} = PDFName('adbe.x509.rsa.sha1');\n    my @certs;\n    push @certs, PDFStr $x509-&gt;as_string(FORMAT_ASN1);\n    push @certs, PDFStr $cacert-&gt;as_string(FORMAT_ASN1);\n    $sigdict-&gt;{Cert}      = PDFArray @certs if ($sig_algorithm eq 'rsa');\n} else {\n    $sigdict-&gt;{SubFilter} = PDFName('adbe.pkcs7.detached');\n}\n\n$sigdict-&gt;{Contents}  = PDFStrHex(\"\\0\" x $sig_length);\n$sigdict-&gt;{ByteRange} = PDF::API2::Basic::PDF::Literal-&gt;new(\"[0 00000000 00000000 00000000]\");\n\nif ($add_mdp) {\n    my $sigrefdict                 = PDF::API2::Basic::PDF::Dict-&gt;new();\n    $sigrefdict-&gt;{Type}            = PDFName(\"SigRef\");\n    $sigrefdict-&gt;{TransformMethod} = PDFName(\"DocMDP\");\n    $sigrefdict                    = $p-&gt;new_obj($sigrefdict);\n    $sigdict-&gt;{Reference}          = PDFArray($sigrefdict);\n}\n\n$sigdict = $p-&gt;new_obj($sigdict);\n\nmy $sigannotdict         = PDF::API2::Basic::PDF::Dict-&gt;new();\nmy $sigformdict          = PDF::API2::Basic::PDF::Dict-&gt;new();\n\n$sigannotdict-&gt;{Type}    = PDFName(\"Annot\");\n$sigannotdict-&gt;{Subtype} = PDFName(\"Widget\");\n$sigannotdict-&gt;{F}       = PDFNum(4);\n$sigannotdict-&gt;{Parent}  = $sigformdict;\n$sigannotdict-&gt;{Rect}    = PDF::API2::Basic::PDF::Literal-&gt;new(\"[0 0 0 0]\");\n$sigannotdict-&gt;{P}       = $pdf-&gt;openpage(1);\n$sigannotdict-&gt;{H}       = PDFName(\"N\");\n$sigannotdict            = $p-&gt;new_obj($sigannotdict);\n\n$sigformdict-&gt;{FT}       = PDFName(\"Sig\");\n$sigformdict-&gt;{T}        = PDFStr(\"Demo Signature\");\n$sigformdict-&gt;{V}        = $sigdict;\n$sigformdict-&gt;{Kids}     = PDFArray($sigannotdict);\n$sigformdict             = $p-&gt;new_obj($sigformdict);\n\nif ($add_mdp) {\n    my $permdict              = PDF::API2::Basic::PDF::Dict-&gt;new();\n    $permdict-&gt;{DocMDP}       = $sigdict;\n    $permdict                 = $p-&gt;new_obj($permdict);\n    $pdf-&gt;{catalog}-&gt;{'Perm'} = $permdict;\n}\n\nmy @formarray;\npush @formarray, $sigformdict;\nmy $acroformdict          = PDF::API2::Basic::PDF::Dict-&gt;new();\n$acroformdict-&gt;{Fields}   = PDFArray @formarray;\n$acroformdict-&gt;{SigFlags} = PDFNum(3);\n$acroformdict             = $p-&gt;new_obj($acroformdict);\n\n$pdf-&gt;{catalog}-&gt;{'AcroForm'} = $acroformdict;\n$pdf-&gt;{pdf}-&gt;out_obj($pdf-&gt;{catalog});\n\n\n$pdf-&gt;saveas($tempfilename);\nprint \"added AcroForm: $input_filename --&gt; $tempfilename\";\n</code></pre>\n\n<p>I am getting warning as below :</p>\n\n<pre><code>Usage: POSIX::strftime(fmt, sec, min, hour, mday, mon, year, wday = -1, yday = -1, isdst = -1) at signature.pl line 29\n</code></pre>\n\n<p>I used the code from <a href=\"https://mschuette.name/files/pdfsign.pl\" rel=\"nofollow noreferrer\">https://mschuette.name/files/pdfsign.pl</a> and <a href=\"https://www.perlmonks.org/?node_id=1171455\" rel=\"nofollow noreferrer\">https://www.perlmonks.org/?node_id=1171455</a> </p>\n\n<p>Can anyone please help? Thanks in advance</p>\n"}, {"tags": ["perl", "docker", "ubuntu"], "comments": [{"owner": {"reputation": 12307, "user_id": 8192635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcaf44c9ff9eeeb51fc78c816891d75a?s=128&d=identicon&r=PG&f=1", "display_name": "LinPy", "link": "https://stackoverflow.com/users/8192635/linpy"}, "edited": false, "score": 0, "creation_date": 1568100299, "post_id": 57865889, "comment_id": 102156978, "body": "use this image instead <a href=\"https://hub.docker.com/_/perlhttps://hub.docker.com/_/perl\" rel=\"nofollow noreferrer\">hub.docker.com/_/perlhttps://hub.docker.com/_/perl</a> it comes with different Debian dists"}, {"owner": {"reputation": 3056, "user_id": 1447071, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/f2e8cde14371d5e6c6b65545dccd4e39?s=128&d=identicon&r=PG", "display_name": "Rubber Duck", "link": "https://stackoverflow.com/users/1447071/rubber-duck"}, "reply_to_user": {"reputation": 12307, "user_id": 8192635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcaf44c9ff9eeeb51fc78c816891d75a?s=128&d=identicon&r=PG&f=1", "display_name": "LinPy", "link": "https://stackoverflow.com/users/8192635/linpy"}, "edited": false, "score": 0, "creation_date": 1568100500, "post_id": 57865889, "comment_id": 102157070, "body": "@LinPy The documentation on the link you sent me says this image runs Perl 5.2.7 &amp; 5.30"}, {"owner": {"reputation": 12307, "user_id": 8192635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcaf44c9ff9eeeb51fc78c816891d75a?s=128&d=identicon&r=PG&f=1", "display_name": "LinPy", "link": "https://stackoverflow.com/users/8192635/linpy"}, "edited": false, "score": 0, "creation_date": 1568101110, "post_id": 57865889, "comment_id": 102157356, "body": "you are right they remove the most of the  historical versions"}, {"owner": {"reputation": 12307, "user_id": 8192635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcaf44c9ff9eeeb51fc78c816891d75a?s=128&d=identicon&r=PG&f=1", "display_name": "LinPy", "link": "https://stackoverflow.com/users/8192635/linpy"}, "edited": false, "score": 0, "creation_date": 1568101185, "post_id": 57865889, "comment_id": 102157390, "body": "please add your Dockerfile to the question"}, {"owner": {"reputation": 3056, "user_id": 1447071, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/f2e8cde14371d5e6c6b65545dccd4e39?s=128&d=identicon&r=PG", "display_name": "Rubber Duck", "link": "https://stackoverflow.com/users/1447071/rubber-duck"}, "reply_to_user": {"reputation": 12307, "user_id": 8192635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcaf44c9ff9eeeb51fc78c816891d75a?s=128&d=identicon&r=PG&f=1", "display_name": "LinPy", "link": "https://stackoverflow.com/users/8192635/linpy"}, "edited": false, "score": 0, "creation_date": 1568101615, "post_id": 57865889, "comment_id": 102157589, "body": "@LinPy just added"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1568119492, "post_id": 57865889, "comment_id": 102167081, "body": "I am on Ubuntu 19.04. I was able to install perl v.5.8.9 using the command <code>perlbrew install perl-5.8.9</code>. Note that you may need to update perlbrew&#39;s <code>patchperl</code> first, see <a href=\"https://github.com/bingos/devel-patchperl/issues/23\" rel=\"nofollow noreferrer\">this issue</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1568119638, "post_id": 57865889, "comment_id": 102167171, "body": "See also <a href=\"https://stackoverflow.com/q/57657526/2173773\">Perlbrew switch fails on docker build</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568132730, "post_id": 57865889, "comment_id": 102174550, "body": "Re &quot;<i>error: ld returned 1 exit status</i>&quot;, What error message did <code>ld</code> produce?"}], "answers": [{"comments": [{"owner": {"reputation": 3056, "user_id": 1447071, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/f2e8cde14371d5e6c6b65545dccd4e39?s=128&d=identicon&r=PG", "display_name": "Rubber Duck", "link": "https://stackoverflow.com/users/1447071/rubber-duck"}, "edited": false, "score": 0, "creation_date": 1568104105, "post_id": 57866598, "comment_id": 102158795, "body": "I tried perlbrew and couldn&#39;t download even after creating the dir"}, {"owner": {"reputation": 3056, "user_id": 1447071, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/f2e8cde14371d5e6c6b65545dccd4e39?s=128&d=identicon&r=PG", "display_name": "Rubber Duck", "link": "https://stackoverflow.com/users/1447071/rubber-duck"}, "edited": false, "score": 0, "creation_date": 1568104135, "post_id": 57866598, "comment_id": 102158815, "body": "I also trie the instruction in the link"}], "tags": [], "owner": {"reputation": 1, "user_id": 8427893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab96bffb02b93f207496c301a5fcf8d0?s=128&d=identicon&r=PG&f=1", "display_name": "siva", "link": "https://stackoverflow.com/users/8427893/siva"}, "is_accepted": false, "score": 0, "last_activity_date": 1568105952, "last_edit_date": 1568105952, "creation_date": 1568103245, "answer_id": 57866598, "question_id": 57865889, "link": "https://stackoverflow.com/questions/57865889/how-to-install-perl-5-8-9-on-ubuntu/57866598#57866598", "title": "How to install Perl-5.8.9 on Ubuntu", "body": "<p>Run the following commands in the terminal one after another.</p>\n\n<pre><code>sudo apt-get install perlbrew\n\nperlbrew available\n\nperlbrew install perl-5.8.9\n</code></pre>\n\n<p>If it fails to download, create a directory as shown below</p>\n\n<pre><code>mkdir -p perl5/perlbrew/dists \n</code></pre>\n\n<p>Try again the following command</p>\n\n<pre><code>perlbrew install perl-5.8.9\n</code></pre>\n\n<p>For more info , please refer this:</p>\n\n<p><a href=\"https://askubuntu.com/questions/425427/how-to-install-perl-php-mysql-and-ruby-packages-on-ubuntu\">https://askubuntu.com/questions/425427/how-to-install-perl-php-mysql-and-ruby-packages-on-ubuntu</a></p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568132688, "post_id": 57874060, "comment_id": 102174527, "body": "That&#39;s effectively what <code>perlbrew</code> does (although it can run <code>patchperl</code> first to address issues with old versions), so this doesn&#39;t answer the question. It will still lead to the same error (whatever the unmentioned error is)"}, {"owner": {"reputation": 3056, "user_id": 1447071, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/f2e8cde14371d5e6c6b65545dccd4e39?s=128&d=identicon&r=PG", "display_name": "Rubber Duck", "link": "https://stackoverflow.com/users/1447071/rubber-duck"}, "edited": false, "score": 0, "creation_date": 1568493444, "post_id": 57874060, "comment_id": 102293590, "body": "It still leads to the same error which I will presently add to the question"}], "tags": [], "owner": {"reputation": 472, "user_id": 2001559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L1bvT.png?s=128&g=1", "display_name": "Maverick", "link": "https://stackoverflow.com/users/2001559/maverick"}, "is_accepted": false, "score": 0, "last_activity_date": 1568129678, "creation_date": 1568129678, "answer_id": 57874060, "question_id": 57865889, "link": "https://stackoverflow.com/questions/57865889/how-to-install-perl-5-8-9-on-ubuntu/57874060#57874060", "title": "How to install Perl-5.8.9 on Ubuntu", "body": "<p>In case you don't want to use perlbrew, here is another way- \nFrom <a href=\"https://stackoverflow.com/a/44441545/2001559\">https://stackoverflow.com/a/44441545/2001559</a></p>\n\n<p>In your docker file -</p>\n\n<pre><code>RUN apt-get install -y gcc\nADD http://www.cpan.org/src/5.0/perl-5.8.9.tar.gz /shared\nRUN tar -xzf perl-5.8.9.tar.gz\n\nWORKDIR /shared/perl-5.8.9\nRUN ./Configure -des -Dprefix=/opt/perl-5.8.9/localperl\n\nRUN make\nRUN make test\nRUN make install\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 3685393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82ae92eb4cd2f5c225a9db77b0b28038?s=128&d=identicon&r=PG&f=1", "display_name": "Kornell", "link": "https://stackoverflow.com/users/3685393/kornell"}, "is_accepted": false, "score": 0, "last_activity_date": 1590657747, "creation_date": 1590657747, "answer_id": 62061228, "question_id": 57865889, "link": "https://stackoverflow.com/questions/57865889/how-to-install-perl-5-8-9-on-ubuntu/62061228#62061228", "title": "How to install Perl-5.8.9 on Ubuntu", "body": "<p>perl-5.8.0  </p>\n\n<p>I solved the issue when created 2 directories:</p>\n\n<pre><code>mkdir -p /home/&lt;username&gt;/perl5/perlbrew/dists/\nmkdir -p /home/&lt;username&gt;/perl5/perlbrew/build/perl-5.8.0\n</code></pre>\n\n<p>Gave rwx-rwx-rwx (to avoid any problems with the access):</p>\n\n<pre><code>chmod -Rf 0777 /home/&lt;username&gt;/perl5/perlbrew/dists\nchmod -Rf 0777 /home/&lt;username&gt;/perl5/perlbrew/build/perl-5.8.0\n</code></pre>\n"}], "owner": {"reputation": 3056, "user_id": 1447071, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/f2e8cde14371d5e6c6b65545dccd4e39?s=128&d=identicon&r=PG", "display_name": "Rubber Duck", "link": "https://stackoverflow.com/users/1447071/rubber-duck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 903, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1590657747, "creation_date": 1568100176, "last_edit_date": 1568493793, "question_id": 57865889, "link": "https://stackoverflow.com/questions/57865889/how-to-install-perl-5-8-9-on-ubuntu", "title": "How to install Perl-5.8.9 on Ubuntu", "body": "<p>I have a legacy Perl 5.8.9 project which I need to run in a docker environment. Since I new it worked on Ubuntu I tried compiling it on an Ubuntu 16.1 and</p>\n\n<pre><code>FROM ubuntu\n\nRUN apt-get update \\\n    &amp;&amp; apt-get install -y curl \\\n    &amp;&amp; apt-get install -y wget \\\n    &amp;&amp; apt-get install -y perlbrew\n</code></pre>\n\n<p>NAME=\"Ubuntu\"\nVERSION=\"18.04.3 LTS (Bionic Beaver)\"\nImages</p>\n\n<p>since I couldn't find the version on perlbrew, I tried compiling from perl-5.8.9.tar.bz2 which I downloaded\nCompilation failed having something to do with miniperl.</p>\n\n<pre><code>perlio.c:515:2: note: in expansion of macro 'PerlLIO_write'\n  PerlLIO_write(dbg, s, len);\n  ^~~~~~~~~~~~~\nperlio.c: In function 'PerlIO_parse_layers':\nperlio.c:995:11: warning: this statement may fall through [-Wimplicit-                    \nfallthrough=]\n        if (*e++) {\n       ^\nperlio.c:1001:4: note: here\n    case '\\0':\n    ^~~~\nIn file included from perl.h:3169:0,\n                 from perlio.c:57:\nperlio.c: In function 'S_more_refcounted_fds':\niperlsys.h:762:39: warning: ignoring return value of 'write', declared             with attribute warn_unused_result [-Wunused-result]\n #define PerlLIO_write(fd, buf, count) write((fd), (buf), (count))\n                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~\nperlio.c:2307:2: note: in expansion of macro 'PerlLIO_write'\n  PerlLIO_write(PerlIO_fileno(Perl_error_log),\n  ^~~~~~~~~~~~~\n`sh  cflags \"optimize='-O2'\" perlapi.o`  perlapi.c\n          CCCMD =  cc -DPERL_CORE -c -fno-strict-aliasing -pipe -    I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -std=c89 -    O2  -Wall -ansi -pedantic -W -Wextra -Wdeclaration-after-statement -Wendif-labels -Wc++-compat -DPERL_GCC_PEDANTIC \n`sh  cflags \"optimize='-O2'\" numeric.o`  numeric.c\n          CCCMD =  cc -DPERL_CORE -c -fno-strict-aliasing -pipe -    I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -std=c89 -    O2  -Wall -ansi -pedantic -W -Wextra -Wdeclaration-after-statement -Wendif-    labels -Wc++-compat -DPERL_GCC_PEDANTIC \n`sh  cflags \"optimize='-O2'\" mathoms.o`  mathoms.c\n          CCCMD =  cc -DPERL_CORE -c -fno-strict-aliasing -pipe -    I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -std=c89 -    O2  -Wall -ansi -pedantic -W -Wextra -Wdeclaration-after-statement -Wendif-    labels -Wc++-compat -DPERL_GCC_PEDANTIC \n`sh  cflags \"optimize='-O2'\" locale.o`  locale.c\n          CCCMD =  cc -DPERL_CORE -c -fno-strict-aliasing -pipe -    I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -std=c89 -    O2  -Wall -ansi -pedantic -W -Wextra -Wdeclaration-after-statement -Wendif-    labels -Wc++-compat -DPERL_GCC_PEDANTIC \n`sh  cflags \"optimize='-O2'\" pp_pack.o`  pp_pack.c\n          CCCMD =  cc -DPERL_CORE -c -fno-strict-aliasing -pipe -    I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -std=c89 -    O2  -Wall -ansi -pedantic -W -Wextra -Wdeclaration-after-statement -Wendif-    labels -Wc++-compat -DPERL_GCC_PEDANTIC \npp_pack.c: In function 'S_pack_rec':\npp_pack.c:2716:7: warning: variable 'was_utf8' set but not used [-    Wunused-but-set-variable]\n   U32 was_utf8;\n   ^~~~~~~~\n`sh  cflags \"optimize='-O2'\" pp_sort.o`  pp_sort.c\n          CCCMD =  cc -DPERL_CORE -c -fno-strict-aliasing -pipe -    I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -std=c89 -    O2  -Wall -ansi -pedantic -W -Wextra -Wdeclaration-after-statement -Wendif-    labels -Wc++-compat -DPERL_GCC_PEDANTIC \n`sh  cflags \"optimize='-O2'\" opmini.o`  -DPERL_EXTERNAL_GLOB opmini.c\n          CCCMD =  cc -DPERL_CORE -c -fno-strict-aliasing -pipe -vI/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -std=c89 -    O2  -Wall -ansi -pedantic -W -Wextra -Wdeclaration-after-statement -Wendif-    labels -Wc++-compat -DPERL_GCC_PEDANTIC \nopmini.c: In function 'Perl_list':\nopmini.c:977:5: warning: this statement may fall through [-Wimplicit-    fallthrough=]\n  if (!o-&gt;op_next &amp;&amp; cUNOPo-&gt;op_first-&gt;op_type == OP_FLOP) {\n    ^\nopmini.c:981:5: note: here\n     case OP_LIST:\n     ^~~~\nopmini.c: In function 'Perl_mod':\nopmini.c:1277:11: warning: this statement may fall through [-Wimplicit-v\nfallthrough=]\n  PL_hints |= HINT_BLOCK_SCOPE;\nopmini.c:1278:5: note: here\n     case OP_SASSIGN:\n     ^~~~\nopmini.c: In function 'Perl_fold_constants':\nopmini.c:2119:40: warning: argument 'o' might be clobbered by 'longjmp'     or 'vfork' [-Wclobbered]\n Perl_fold_constants(pTHX_ register OP *o)\n                                    ^\ncc -L/usr/local/lib -o miniperl \\\n    `echo  gv.o toke.o perly.o op.o pad.o regcomp.o dump.o util.o mg.o     reentr.o hv.o av.o perl.o run.o pp_hot.o sv.o pp.o scope.o pp_ctl.o     pp_sys.o doop.o doio.o regexec.o utf8.o taint.o deb.o universal.o xsutils.o     globals.o perlio.o perlapi.o numeric.o mathoms.o locale.o pp_pack.o     pp_sort.o  | sed 's/ op.o / /'` \\\n   miniperlmain.o opmini.o \npp.o: In function `Perl_pp_pow':\npp.c:(.text+0x2d84): undefined reference to `pow'\npp.o: In function `Perl_pp_modulo':\npp.c:(.text+0x3b80): undefined reference to `fmod'\npp.o: In function `Perl_pp_atan2':\npp.c:(.text+0x8884): undefined reference to `atan2'\npp.o: In function `Perl_pp_sin':\npp.c:(.text+0x8978): undefined reference to `sqrt'\npp.c:(.text+0x8a23): undefined reference to `log'\npp.c:(.text+0x8a4e): undefined reference to `cos'\npp.c:(.text+0x8afb): undefined reference to `sin'\npp.c:(.text+0x8b13): undefined reference to `exp'\ncollect2: error: ld returned 1 exit status\nmakefile:313: recipe for target 'miniperl' failed\nmake: *** [miniperl] Error 1\n</code></pre>\n\n<p>Is there a ready docker image?\nIf not how do I install on ubuntu or preferably on alpine or another light container.</p>\n"}, {"tags": ["perl", "timestamp"], "comments": [{"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1568055943, "post_id": 57859440, "comment_id": 102145897, "body": "<code>+00:00</code> probably represents the same thing as <code>+0000</code>, so you could just massage out the final : in the timestamp, and then apply a <code>Time::Piece-&gt;strptime($timestamp, &quot;%Y-%m-%dT%T%z&quot;)</code> format string."}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1568056574, "post_id": 57859440, "comment_id": 102146148, "body": "@DavidO, thank you. I upvoted the answer."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1568066545, "post_id": 57860159, "comment_id": 102149539, "body": "Re &quot;<i>The colon is superfluous</i>&quot;, Well, it is required by RFC3339 and ISO8601, but I suppose you mean it doesn&#39;t convey any additional information."}], "tags": [], "owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "is_accepted": false, "score": 5, "last_activity_date": 1568057262, "creation_date": 1568057262, "answer_id": 57860159, "question_id": 57859440, "link": "https://stackoverflow.com/questions/57859440/timestamp-format/57860159#57860159", "title": "Timestamp format", "body": "<p>The colon is superfluous, and gets in the way of your parsing. There was a discussion in the Python bug tracker awhile back about parsing timezone offsets with the colon, and it never really got resolved.  The easiest solution is to just get rid of it:</p>\n\n<pre><code>use Time::Piece; # A core Perl module.\n\nmy $entry = '2019-09-06T16:06:36+00:00 some_text';\n\nmy ($timestamp, $text) = split(/\\s+/, $entry, 2);\n$timestamp =~ s/:(\\d+)$/$1/;\n\nmy $t = Time::Piece-&gt;strptime($timestamp, \"%Y-%m-%dT%T%z\");\n</code></pre>\n\n<p>In this example we split on the first whitespace to isolate the datestamp, and then substitute away the final colon. So <code>$timestamp</code> will now contain:</p>\n\n<pre><code>2019-09-06T16:06:36+0000\n</code></pre>\n\n<p>...and that is a timestamp that <code>strptime</code> can understand, given the appropriate format string.</p>\n"}, {"comments": [{"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1568059618, "post_id": 57860355, "comment_id": 102147348, "body": "thank you for the answer. My understanding is that <code>Time::Moment</code> is not a standard module. Unfortunately I&#39;m in a very restrictive environment and will not be able to install anything extra."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1568063974, "post_id": 57860355, "comment_id": 102148829, "body": "@Igor, Not so. If you can install code from SO, you can install code from CPAN"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1568058799, "last_edit_date": 1568058799, "creation_date": 1568058407, "answer_id": 57860355, "question_id": 57859440, "link": "https://stackoverflow.com/questions/57859440/timestamp-format/57860355#57860355", "title": "Timestamp format", "body": "<p><a href=\"https://metacpan.org/pod/Time::Moment\" rel=\"nofollow noreferrer\">Time::Moment</a>'s from_string constructor recognizes this ISO8601 format, even if the colon is present.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Time::Moment;\n\nmy $line = '2019-09-06T16:06:36+00:00 some_text';\nmy ($ts, $rest) = split ' ', $line, 2; # single space is a special case for split()\nmy $moment = Time::Moment-&gt;from_string($ts);\nmy $epoch = $moment-&gt;epoch;\n</code></pre>\n\n<p>The option <code>lenient =&gt; 1</code> may be needed if the format will be mixed (for example colons in the offset but not the time).</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1568068089, "last_edit_date": 1568068089, "creation_date": 1568064246, "answer_id": 57861373, "question_id": 57859440, "link": "https://stackoverflow.com/questions/57859440/timestamp-format/57861373#57861373", "title": "Timestamp format", "body": "<p>What you have is an RFC3339 timestamp. As such, you could use <a href=\"https://metacpan.org/pod/DateTime::Format::RFC3339\" rel=\"nofollow noreferrer\">DateTime::Format::RFC3339</a>.</p>\n\n<pre><code>use DateTime::Format::RFC3339 qw( );\n\nmy ($dt_str) = split ' ', '2019-09-06T16:06:36+00:00 some text';\n\nmy $format = DateTime::Format::RFC3339-&gt;new;\nmy $dt = $format-&gt;parse_datetime($dt_str);\nmy $epoch = $dt-&gt;epoch;\n</code></pre>\n\n<p>What you have is an ISO8601 timestamp. As such, you could use <a href=\"https://metacpan.org/pod/DateTime::Format::ISO8601\" rel=\"nofollow noreferrer\">DateTime::Format::ISO8601</a>.</p>\n\n<pre><code>use DateTime::Format::ISO8601 qw( );\n\nmy ($dt_str) = split ' ', '2019-09-06T16:06:36+00:00 some text';\n\nmy $format = DateTime::Format::ISO8601-&gt;new;\nmy $dt = $format-&gt;parse_datetime($dt_str);\nmy $epoch = $dt-&gt;epoch;\n</code></pre>\n"}], "owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1568068089, "creation_date": 1568053828, "question_id": 57859440, "link": "https://stackoverflow.com/questions/57859440/timestamp-format", "title": "Timestamp format", "body": "<p>ALL,</p>\n\n<p>I'm about to parse the log file file which has following format:</p>\n\n<pre><code>2019-09-06T16:06:36+00:00 some_text\n</code></pre>\n\n<p>Now what I'm curious about is to how to handle the numbers after the <code>+</code> sign.\nI can split the line by the \" \" character to get the timestamp, and then split the timestamp by the <code>T</code>, but will date/time functions in Perl will understand the <code>16:06:36+00:00</code> time? I will need to pass it to <code>timelocal()</code> to get an epoch time.</p>\n\n<p>TIA!</p>\n"}, {"tags": ["perl", "gmail"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1568054822, "post_id": 57858194, "comment_id": 102145441, "body": "It should be possible using the <code>UID SEARCH X-GM-MSGID</code> command, see <a href=\"https://developers.google.com/gmail/imap/imap-extensions\" rel=\"nofollow noreferrer\">this link</a> for more information. I am not sure if <code>Net::IMAP::Simple::Gmail</code> supports it though"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1568057114, "post_id": 57858194, "comment_id": 102146377, "body": "Thanks for the tip. Looks like this Perl module might do the trick: <a href=\"https://metacpan.org/pod/Mail::IMAPClient\" rel=\"nofollow noreferrer\">metacpan.org/pod/Mail::IMAPClient</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "is_accepted": false, "score": 1, "last_activity_date": 1568087442, "last_edit_date": 1568087442, "creation_date": 1568086851, "answer_id": 57863743, "question_id": 57858194, "link": "https://stackoverflow.com/questions/57858194/programmatically-downloading-email-body-from-gmail-url/57863743#57863743", "title": "Programmatically downloading email body from gmail url", "body": "<p>Here is a solution, though it's a bit convoluted:</p>\n\n<ol>\n<li>Navigate to the gmail message thread of interest in your browser</li>\n<li>Run the following JS in the developer console (or better, programmatically with Applescript, if using Safari, or some other browser automation program like WWW::Mechanize::Chrome) to get the \"legacy\" thread id:</li>\n</ol>\n\n<p><code>document.querySelector('[data-legacy-thread-id]').getAttribute('data-legacy-thread-id')</code></p>\n\n<ol start=\"3\">\n<li>Once you get the thread id, you then need to convert it to a decimal number. In Perl:</li>\n</ol>\n\n<p><code>my $dec_num = sprintf(\"%d\", hex($thread_id));</code></p>\n\n<ol start=\"4\">\n<li>Now that you have obtained the thread id, you can use the Perl <code>Mail::IMAPClient</code> cpan module to obtain the messages in the thread by searching on the thread id:</li>\n</ol>\n\n<pre><code>use Mail::IMAPClient;\nmy $imap = Mail::IMAPClient-&gt;new(\n  Server   =&gt; 'imap.gmail.com',\n  User     =&gt; 'me',\n  Password =&gt; 'blah',\n  Ssl      =&gt; 1,\n  Uid      =&gt; 1,\n);\n\nmy $folders = $imap-&gt;select('INBOX');\n\nmy $msgs = $imap-&gt;search(\"X-GM-THRID\", $decimal_thread_id);\nforeach my $msg (@$msgs) { \n  my $msg_st = $imap-&gt;message_string($msg);\n  # slice and dice messages with modules listed below\n}\n</code></pre>\n\n<p>Now you can use cpan modules like <code>Email::MIME</code> and <code>Email::MIME::Attachment::Stripper</code> and <code>Email::MIME::Encodings</code> to parse the emails in <code>$msgs</code> and decode them as necessary.</p>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568087442, "creation_date": 1568047918, "question_id": 57858194, "link": "https://stackoverflow.com/questions/57858194/programmatically-downloading-email-body-from-gmail-url", "title": "Programmatically downloading email body from gmail url", "body": "<p>I want to extract the body of an email from a gmail url: <code>https://mail.google.com/mail/u/0/#inbox/FMfBlahwDrHlsBlahlzHWzQXHFKhjpTp1</code></p>\n\n<p>I am using the Perl module: <a href=\"https://metacpan.org/pod/Net::IMAP::Simple::Gmail\" rel=\"nofollow noreferrer\"><code>Net::IMAP::Simple::Gmail</code></a> which gets me sequential access to the email inboxes and their imap ids. It also has a search method for searching emails. It also provides imap thread ids of each email.</p>\n\n<p>But I haven't found an easy way to link the thread's URL in the browser to a particular imap email id so I can extract the body.</p>\n"}, {"tags": ["arrays", "perl", "scalar"], "answers": [{"tags": [], "owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "is_accepted": true, "score": 3, "last_activity_date": 1568046392, "creation_date": 1568046392, "answer_id": 57857862, "question_id": 57857310, "link": "https://stackoverflow.com/questions/57857310/how-do-i-parse-an-array-in-perl-that-contains-subarrays/57857862#57857862", "title": "How do I parse an array in perl that contains subarrays?", "body": "<p>Using this:</p>\n\n<pre><code>        [\n          [\n            'Mirror to',\n            'test10@corp.com\\\\etest10@gmail.com\\\\etest10@corp1.com'\n          ],\n          [\n            'Discard',   \n            '---'\n          ]\n        ]\n</code></pre>\n\n<p>This is a reference to an array (the outer <code>[</code>..<code>]</code>) that has two items. Each item is again a reference to an array.</p>\n\n<p>First item (position 0 of outer array reference) is</p>\n\n<pre><code>          [\n            'Mirror to',\n            'test10@corp.com\\\\etest10@gmail.com\\\\etest10@corp1.com'\n          ],\n</code></pre>\n\n<p>and second (position 1) is:</p>\n\n<pre><code>          [\n            'Discard',   \n            '---'\n          ]\n</code></pre>\n\n<p>If <code>$ractions</code> is this outer array, then the above two items are respectively under <code>$ractions-&gt;[0]</code> and <code>$ractions-&gt;[1]</code>.</p>\n\n<p>Since they are both an array reference again you can access their items using the same construct, or using a Perl property, you can remove the second array.</p>\n\n<p>In short:</p>\n\n<ul>\n<li>'Mirror to' can be accessed by <code>$ractions-&gt;[0]-&gt;[0]</code> or shorter <code>$ractions-&gt;[0][0]</code></li>\n<li>'test10@corp.com\\etest10@gmail.com\\etest10@corp1.com' can be accessed by <code>$ractions-&gt;[0]-&gt;[1]</code></li>\n<li>'Discard' can be accessed by <code>$ractions-&gt;[1]-&gt;[0]</code></li>\n<li>'---' can be accessed by <code>$ractions-&gt;[1]-&gt;[1]</code></li>\n</ul>\n\n<p>Be aware however that <code>$VAR1 = \\[</code> shows that you have a reference over a reference. So you will need an extra step of derefencing:</p>\n\n<pre><code>  DB&lt;1&gt; use Data::Dumper;\n\n  DB&lt;2&gt; @a=(1,2)\n\n  DB&lt;3&gt; print Data::Dumper::Dumper(@a);\n$VAR1 = 1;\n$VAR2 = 2;\n\n  DB&lt;4&gt; print Data::Dumper::Dumper(\\@a);\n$VAR1 = [\n          1,\n          2\n        ];\n\n  DB&lt;5&gt; print Data::Dumper::Dumper(\\\\@a);\n$VAR1 = \\[\n            1,\n            2\n          ];\n</code></pre>\n\n<p>PS: do not use <code>corp.com</code> or anything like that when you need to obfuscate domain names. See guidance in RFC2606 or TL;DR: use <code>example.com</code></p>\n"}], "owner": {"reputation": 25, "user_id": 11978940, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oVZYMBPZ6cI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcKlRjsuDAdpvjyninTczfedQuoBA/photo.jpg?sz=128", "display_name": "sarge", "link": "https://stackoverflow.com/users/11978940/sarge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 57857862, "answer_count": 1, "score": 1, "last_activity_date": 1568046392, "creation_date": 1568044138, "question_id": 57857310, "link": "https://stackoverflow.com/questions/57857310/how-do-i-parse-an-array-in-perl-that-contains-subarrays", "title": "How do I parse an array in perl that contains subarrays?", "body": "<p>Let me preface by saying I'm a total novice at perl.</p>\n\n<p>I need to modify rules on a mail system. I can access the rules as an array and I believe the array contains subarrays. I need to modify one particular element and preserve the rest. My problem is I'm confused as to what the array type really is and how to consistently access the elements. </p>\n\n<p>There may be more than one set of rules, but I'm only interested in processing rules with a priority of '1', which is <code>$Rule[0]</code>. Within <code>$Rule[3]</code> I need to parse the addresses.</p>\n\n<pre><code>use strict;\nuse Data::Dumper qw(Dumper);\n\nmy $Rules=$cli-&gt;GetAccountMailRules($account);\n\nprint Dumper \\@$Rules;\n\n    foreach my $Rule (@$Rules) {\n      if($Rule-&gt;[0]=~/1/) {\n        my $pri=$Rule-&gt;[0];\n        my $type=$Rule-&gt;[1];\n        my $auto=$Rule-&gt;[2];\n        my $actions=$Rule-&gt;[3];\n        my $action1;\n        my $auto1;\n        my $auto2;\n        my @newRule;\n        my $oldDest;\n        print \"\\n\";\n\n        print \"Priority:\\n\";\n        print Dumper \\$pri;\n        print \"\\n\";\n\n        print \"Rule Type:\\n\";\n        print Dumper \\$type;\n        print \"\\n\";\n\n        print \"Forward Auto?:\\n\";\n        print Dumper \\$auto;\n        print \"\\n\";\n\n        print \"Actions:\\n\";\n        print Dumper \\$actions;\n        print \"\\n\";\n\n        foreach my $ax (@$actions) {\n          $action1=$ax-&gt;[0];\n          $oldDest=$ax-&gt;[1];\n        } \n\n        my @addresses=split /[;,]|\\\\e/, $oldDest;\n        my @dests = grep(/corp.com|corp1.com|corp2.com|corp3.com/, @addresses);\n        my $newDest = join(\",\", @dests);\n        if (@$auto) {\n          foreach my $au (@$auto) {\n            $auto1=$au-&gt;[0];\n            $auto2=$au-&gt;[1];    \n          }\n          @newRule=(\n            [ $pri, $type,\n            [[$auto1,$auto2]],\n            [[$action1,$newDest]]\n            ]\n            );\n        } else {\n          @newRule=(\n            [ $pri, $type,\n            [],\n            [[$action1,$newDest]]\n            ]\n            );\n        }\n      }  \n    }\n}\n</code></pre>\n\n<p>Output thusly:</p>\n\n<pre><code># perl removeRules.pl\n$VAR1 = [\n          [\n            '1',\n            '#Redirect',\n            [\n              [\n                'Human Generated',\n                '---'\n              ]\n            ],\n            [\n              [\n                'Mirror to',\n                'test10@corp.com\\\\etest10@gmail.com\\\\etest10@corp1.com'\n              ]\n            ]\n          ]\n        ];\n\nPriority:\n$VAR1 = \\'1';\n\nRule Type:\n$VAR1 = \\'#Redirect';\n\nForward Auto?:\n$VAR1 = \\[\n            [\n              'Human Generated',\n              '---'\n            ]\n          ];\n\nActions:\n$VAR1 = \\[\n            [\n              'Mirror to',\n              'test10@corp.com\\\\etest10@gmail.com\\\\etest10@corp1.com'\n            ]\n          ];\n</code></pre>\n\n<p>The problem I'm running into is there is an option within <code>$actions</code> to discard emails after forwarding, which introduces new elements (or subarray?) into <code>$actions</code>:</p>\n\n<pre><code># perl removeRules.pl\n$VAR1 = [\n          [\n            '1',\n            '#Redirect',\n            [\n              [\n                'Human Generated',\n                '---'\n              ]\n            ],\n            [\n              [\n                'Mirror to',\n                'test10@corp.com\\\\etest10@gmail.com\\\\etest10@corp1.com'\n              ],\n              [              &lt;---- Begin new elements\n                'Discard',   \n                '---'\n              ]              &lt;---- End new elements\n            ]\n          ]\n        ];\n\nPriority:\n$VAR1 = \\'1';\n\nRule Type:\n$VAR1 = \\'#Redirect';\n\nForward Auto?:\n$VAR1 = \\[\n            [\n              'Human Generated',\n              '---'\n            ]\n          ];\n\nActions:\n$VAR1 = \\[\n            [\n              'Mirror to',\n              'test10@corp.com\\\\etest10@gmail.com\\\\etest10@corp1.com'\n            ],\n            [\n              'Discard',\n              '---'\n            ]\n          ];\n</code></pre>\n\n<p>I tried testing to see if they can be referenced as additional elements in <code>$actions</code> but it throws off the index.</p>\n\n<pre><code>my $action2;\nmy $action3;\n\nprint \"Actions:\\n\";\nprint Dumper \\$actions;\nprint \"\\n\";\n\nforeach my $ax (@$actions) {\n  $action1=$ax-&gt;[0];\n  $oldDest=$ax-&gt;[1];\n  $action2=$ax-&gt;[2];\n  $action3=$ax-&gt;[3];\n} \n\nprint \"  action1 $action1\\n\";\nprint \"  oldDest $oldDest\\n\";\nprint \"  action2 $action2\\n\";\nprint \"  action3 $action3\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Actions:\n$VAR1 = \\[\n            [\n              'Mirror to',\n              'test10@corp.com\\\\etest10@gmail.com\\\\etest10@corp1.com'\n            ],\n            [\n              'Discard',\n              '---'\n            ]\n          ];\n\n  action1 Discard\n  oldDest ---\nUse of uninitialized value $action2 in concatenation (.) or string at removeRules.pl line 107, &lt;GEN0&gt; line 4.\n  action2\nUse of uninitialized value $action3 in concatenation (.) or string at removeRules.pl line 108, &lt;GEN0&gt; line 4.\n  action3\n</code></pre>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["perl", "web-scraping", "webbrowser-control", "lwp-useragent"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1568042301, "post_id": 57856721, "comment_id": 102139975, "body": "Well, what differences are there between the request?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1568042370, "post_id": 57856721, "comment_id": 102140009, "body": "LWP doesn&#39;t run JavaScript, but your browser does."}, {"owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568042863, "post_id": 57856721, "comment_id": 102140279, "body": "@ikegami wget and curl works return normal response while LWP returns 403 Forbidden."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568044223, "post_id": 57856721, "comment_id": 102140865, "body": "What differences are there between the <b>requests</b>? (Not the responses)"}, {"owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568044620, "post_id": 57856721, "comment_id": 102141097, "body": "@ikegami not sure I understand your question, I explained everything I am doing in the post. the  wget <a href=\"https://dreaminislam.com/a/\" rel=\"nofollow noreferrer\">dreaminislam.com/a</a>  and  curl <a href=\"https://dreaminislam.com/a/\" rel=\"nofollow noreferrer\">dreaminislam.com/a</a>  works from the console normal but the LWP code above gives  403 Forbidden and I am asking how to setup LWP to work like wget and curl."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1568044955, "post_id": 57856721, "comment_id": 102141247, "body": "LWP and wget are obviously sending different HTTP requests to the server if they are getting different responses from the server. What are those HTTP requests? You can&#39;t hope to reconcile the differences between the requests until you determine what those differences are!"}], "answers": [{"comments": [{"owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "edited": false, "score": 0, "creation_date": 1568049039, "post_id": 57858283, "comment_id": 102143036, "body": "Perfect, did it."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 4, "last_activity_date": 1568048988, "last_edit_date": 1568048988, "creation_date": 1568048363, "answer_id": 57858283, "question_id": 57856721, "link": "https://stackoverflow.com/questions/57856721/perl-lwpuseragent-simulate-browser/57858283#57858283", "title": "Perl LWP::UserAgent simulate browser", "body": "<p>It looks like there is some Anti-Bot protection installed at this site. It seems to require at least a <code>User-Agent</code> and a <code>Accept</code> header:</p>\n\n<pre><code>use LWP::UserAgent;\nuse HTTP::Request;\n\nmy $ua = LWP::UserAgent-&gt;new();\n\nmy $req = HTTP::Request-&gt;new(GET =&gt; 'https://dreaminislam.com/a/');\n$req-&gt;header('User-Agent' =&gt; 'Mozilla/5.0');\n$req-&gt;header('Accept' =&gt; '*/*');\nmy $response = $ua-&gt;request($req);\n\ndie $response-&gt;code if ! $response-&gt;is_success;\nprint $response-&gt;decoded_content;\n</code></pre>\n"}], "owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "accepted_answer_id": 57858283, "answer_count": 1, "score": 1, "last_activity_date": 1568048988, "creation_date": 1568041698, "last_edit_date": 1568042963, "question_id": 57856721, "link": "https://stackoverflow.com/questions/57856721/perl-lwpuseragent-simulate-browser", "title": "Perl LWP::UserAgent simulate browser", "body": "<p>I am trying to automate getting web page using LWP::UserAgent but I get 403 Forbidden error while if I use from console wget <a href=\"https://dreaminislam.com/a/\" rel=\"nofollow noreferrer\">https://dreaminislam.com/a/</a> or curl I get the page normal. How to set the correct options for LWP::UserAgent to get that page and similar to simulate real browser. Here is sample code.</p>\n\n<pre><code>use HTTP::CookieJar::LWP ();\nuse LWP::UserAgent;\nuse LWP::Simple;\n\n    my $url = qq{https://dreaminislam.com/a/};\n    my $content = getUrl($url);\n    exit;\n\nsub getUrl {\n\n    my $url = shift;\n    my $jar = HTTP::CookieJar::LWP-&gt;new;\n    my $ua = LWP::UserAgent-&gt;new(timeout =&gt; 180,  cookie_jar =&gt; $jar, protocols_allowed =&gt; ['http', 'https']);\n    $ua-&gt;agent(qq{Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0});\n\n    my $response = $ua-&gt;get($url);\n\n    if ($response-&gt;is_success) {\n        my $content = $response-&gt;decoded_content;\n        return $content;\n    } else {\n        my $content = $response-&gt;decoded_content;\n        printf \"Get url error [%d] %s.\\n\", $response-&gt;code, $response-&gt;message;\n    }\n}\n</code></pre>\n"}, {"tags": ["loops", "perl", "count"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1568037722, "post_id": 57854538, "comment_id": 102137427, "body": "Could you provide some input/output samples please?"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1568044155, "last_edit_date": 1568044155, "creation_date": 1568042150, "answer_id": 57856845, "question_id": 57854538, "link": "https://stackoverflow.com/questions/57854538/how-to-count-the-number-of-lines-in-an-array-with-similar-beginning-and-insert-c/57856845#57856845", "title": "How to count the number of lines in an array with similar beginning and insert counter in a new array?", "body": "<p>You can try this:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse open qw(:std :encoding(UTF-8));\n\nmy $fn = 'input.txt';\nopen ( my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\nmy @lines = &lt;$fh&gt;;\nclose $fh;\nmy $word;\nmy $prev_word = undef;\nmy $prev_line;\nmy $count = 0;\nmy @lines_out;\nfor my $i (0..$#lines) {\n    my $line = $lines[$i];\n    $word = $line =~ s/(.+)WORD.+/$1/gr;\n    $prev_line = $line if !defined $prev_line;\n    $prev_word = $word if !defined $prev_word;\n    if (((lc $word) ne (lc $prev_word))) {\n        my $new_line = $prev_line =~ s/(WORD)/$count $1/r;\n        push @lines_out, $new_line;\n        $prev_word = $word;\n        $prev_line = $line;\n        $count = 0;\n    }\n    if ( $i == $#lines ) {\n        $count++;\n        my $new_line = $prev_line =~ s/(WORD)/$count $1/r;\n        push @lines_out, $new_line;\n    }\n    $count++;\n}\nprint for @lines_out;\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>\u0411\u0443\u0440\u0433\u0430\u043d 8 WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d\u0433\u0430 2 WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d\u0434\u0430\u043d 2 WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0431\u0443\u0440\u0433\u0430\u043d\u043d\u0430\u0440\u043d\u044b\u04a3 1 WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d\u043d\u044b\u04a3 5 WORD \u0411\u0443\u0440\u0433\u0430\u043d\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 10233614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/485027085d25e4b2292a9940e24c6405?s=128&d=identicon&r=PG&f=1", "display_name": "fruit_alchemist", "link": "https://stackoverflow.com/users/10233614/fruit-alchemist"}, "edited": false, "score": 0, "creation_date": 1568053975, "post_id": 57857835, "comment_id": 102145092, "body": "Thanks! Very useful Tie::IxHash, was looking for something like this."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 1, "last_activity_date": 1568048590, "last_edit_date": 1568048590, "creation_date": 1568046260, "answer_id": 57857835, "question_id": 57854538, "link": "https://stackoverflow.com/questions/57854538/how-to-count-the-number-of-lines-in-an-array-with-similar-beginning-and-insert-c/57857835#57857835", "title": "How to count the number of lines in an array with similar beginning and insert counter in a new array?", "body": "<p>Using <a href=\"https://metacpan.org/pod/Tie::IxHash\" rel=\"nofollow noreferrer\">Tie::IxHash</a> to preserve the order of words in the original file helps keep things simple:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse warnings;\nuse strict;\nuse open qw/:std :encoding(UTF-8)/;\nuse feature qw/say/;\nuse Tie::IxHash;\n\ntie my %words, 'Tie::IxHash';\n\nwhile (&lt;&gt;) {\n  chomp;\n  my @F = split /\\s*WORD\\s*/;\n  if (exists $words{$F[0]}) {\n    $words{$F[0]}-&gt;[1] += 1;\n  } else {\n    $words{$F[0]} = [ $F[1], 1 ];\n  }\n}\n\nwhile (my ($word1, $val) = each %words) {\n  my ($word2, $count) = @$val;\n  say \"$word1 $count WORD $word2\";\n}\n</code></pre>\n\n<p>Example:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl wordcount.pl words.txt\n\u0411\u0443\u0440\u0433\u0430\u043d 8 WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d\u0433\u0430 2 WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d\u0434\u0430\u043d 2 WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0431\u0443\u0440\u0433\u0430\u043d\u043d\u0430\u0440\u043d\u044b\u04a3 1 WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d\u043d\u044b\u04a3 5 WORD \u0411\u0443\u0440\u0433\u0430\u043d\n</code></pre>\n\n<p>If you don't care about the order of the output, a regular hash can be used instead. Replace the <code>tie</code> line with just <code>my %words;</code>.</p>\n\n<hr>\n\n<p>And a non-perl oneliner using <a href=\"https://www.gnu.org/software/datamash/\" rel=\"nofollow noreferrer\">GNU datamash</a> and awk to rearrange the output:</p>\n\n<pre><code>datamash -Wfg 1 count 1 &lt; words.txt | awk '{ print $1, $4, $2, $3 }'\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10233614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/485027085d25e4b2292a9940e24c6405?s=128&d=identicon&r=PG&f=1", "display_name": "fruit_alchemist", "link": "https://stackoverflow.com/users/10233614/fruit-alchemist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 57857835, "answer_count": 2, "score": 0, "last_activity_date": 1568048590, "creation_date": 1568033879, "last_edit_date": 1568041063, "question_id": 57854538, "link": "https://stackoverflow.com/questions/57854538/how-to-count-the-number-of-lines-in-an-array-with-similar-beginning-and-insert-c", "title": "How to count the number of lines in an array with similar beginning and insert counter in a new array?", "body": "<p>I have a text file (a sorted array of lines) where are listed the occurrences of a word form (declination) in a given text and its accordance to the initial form of the word. I'd like to modify the file so that the similar forms are counted and a new file (array) created with a given form, the number of its occurrences and the initial form.</p>\n\n<p>I am writing in Perl, but i suppose it can be solved in pseudo code.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $word1 = '';\nmy $word2 = '';\nforeach my $line(@lines) { #read the array by lines \n  $word1 = $line;\n  $word1 =~ s/(.+)WORD.+/$1/g; #the given form and initial form are separated by \"WORD\" word, so i put in $word1 the given form.\n\n  if (lc $word1 ne lc $word2) { #if the given form doesn't match the previous form the line is added to a new list\n    push @lines_out, $line;\n    $word2 = $word1; #the used given form is $word2\n  }\n}\n</code></pre>\n\n<p>E.g. i have input:</p>\n\n<pre><code>\u0411\u0443\u0440\u0433\u0430\u043d WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d\u0433\u0430 WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d\u0433\u0430 WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d\u0434\u0430\u043d WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d\u0434\u0430\u043d WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0431\u0443\u0440\u0433\u0430\u043d\u043d\u0430\u0440\u043d\u044b\u04a3 WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d\u043d\u044b\u04a3 WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d\u043d\u044b\u04a3 WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d\u043d\u044b\u04a3 WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d\u043d\u044b\u04a3 WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d\u043d\u044b\u04a3 WORD \u0411\u0443\u0440\u0433\u0430\u043d\n</code></pre>\n\n<p>And i want output to be like:</p>\n\n<pre><code>\u0411\u0443\u0440\u0433\u0430\u043d WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d\u0433\u0430 WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d\u0434\u0430\u043d WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0431\u0443\u0440\u0433\u0430\u043d\u043d\u0430\u0440\u043d\u044b\u04a3 WORD \u0411\u0443\u0440\u0433\u0430\u043d\n\u0411\u0443\u0440\u0433\u0430\u043d\u043d\u044b\u04a3 WORD \u0411\u0443\u0440\u0433\u0430\u043d\n</code></pre>\n\n<p>But with a count of occurrences before \"WORD\".</p>\n\n<p>Where do i put the counter and how can i put it after the given form in a new array?\nThanks!</p>\n"}, {"tags": ["perl", "awk", "sed"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1568030012, "post_id": 57853364, "comment_id": 102133157, "body": "Try <code>perl -pe &#39;s&#47;(?&lt;![^;])&quot;.*?&quot;(?![^;])(*SKIP)(*FAIL)|([^;&quot;\\r\\n]+)&#47;&quot;$1&quot;&#47;g&#39; file</code>"}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1568030768, "post_id": 57853364, "comment_id": 102133521, "body": "Thanks Wiktor, It works fine. Can you explain bit more what does the above command does"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1568031226, "post_id": 57853364, "comment_id": 102133762, "body": "It matches all quoted fields and omits these matches, and then grabs all chunks of 1+ chars other than <code>&quot;</code>, <code>;</code> and CR/LFs, and wraps them with <code>&quot;</code>s."}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1568031325, "post_id": 57853364, "comment_id": 102133815, "body": "Thank you wiktor, I added scenario 2 in the same question"}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1568035110, "post_id": 57853364, "comment_id": 102135881, "body": "Any suggestions for scenario 2"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1568038533, "post_id": 57853364, "comment_id": 102137851, "body": "See <a href=\"https://stackoverflow.com/q/45420535/1745001\">stackoverflow.com/q/45420535/1745001</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1568032168, "post_id": 57853721, "comment_id": 102134341, "body": "for Scenario 1 Quotes are adding at beginning and ending not for each field"}, {"owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "reply_to_user": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1568032377, "post_id": 57853721, "comment_id": 102134438, "body": "@user1485267 from your request <code>&quot;1&quot;;&quot;AaA&quot;;&quot;mnop qrstzyx&quot;;&quot;M&quot;</code>  do you like this insted? <code>&quot;1;AaA;&quot;mnop qrstzyx&quot;;M&quot;</code>"}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1568032758, "post_id": 57853721, "comment_id": 102134637, "body": "Yes i need it like this &quot;1&quot;;&quot;AaA&quot;;&quot;mnop qrstzyx&quot;;&quot;M&quot;"}, {"owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "reply_to_user": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1568033277, "post_id": 57853721, "comment_id": 102134922, "body": "@user1485267 and my answer is not what you describe???  My answer <code>&quot;1&quot;;&quot;AaA&quot;;&quot;mnop qrstzyx&quot;;&quot;M&quot;</code>,  your request <code>&quot;1&quot;;&quot;AaA&quot;;&quot;mnop qrstzyx&quot;;&quot;M&quot;</code>"}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1568034113, "post_id": 57853721, "comment_id": 102135383, "body": "not sure why it doesn&#39;t worked to me.. Sorry it might be version issue"}, {"owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1568047876, "post_id": 57853721, "comment_id": 102142553, "body": "@EdMorton Do you mean change  <code>FPAT=&quot;([^;]+)|(\\&quot;[^\\&quot;]+\\&quot;)&quot;</code> to  <code>FPAT=&quot;([^;]*)|(\\&quot;[^\\&quot;]*\\&quot;)&quot;</code>?"}], "tags": [], "owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "is_accepted": false, "score": 3, "last_activity_date": 1568050683, "last_edit_date": 1568050683, "creation_date": 1568030815, "answer_id": 57853721, "question_id": 57853364, "link": "https://stackoverflow.com/questions/57853364/add-quotes-for-each-field-if-it-is-not-enclosed-with-quotes-using-sed-awk-perl/57853721#57853721", "title": "Add quotes for each field if it is not enclosed with quotes using sed/awk/perl", "body": "<p>Use <code>FPAT</code> with <code>gnu awk</code> to handle CSV files</p>\n\n<pre><code>awk -v FPAT='([^;]*)|(\"[^\"]+\")' -v OFS=\";\" '{for (i=1;i&lt;=NF;i++) {if ($i!~/^\\\"/) $i=\"\\\"\"$i\"\\\"\"}} 1' file\n\"eno\";\"ename\";\"address\";\"gender\"\n\"1\";\"AaA\";\"mnop qrstzyx\";\"M\"\n\"2\";\"bB\";\"abc\";\"F\"\n\"3\";\"cC\";\"adef;mnp\";\"ars\"\n\"4\";\"mnp\";\"ade\";\"M\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1568038841, "post_id": 57855304, "comment_id": 102138043, "body": "That would turn <code>a;&quot;b;c&quot;</code> into <code>&quot;a&quot;;&quot;&quot;b&quot;;&quot;c&quot;&quot;</code> instead of the desired <code>&quot;a&quot;;&quot;b;c&quot;</code>."}], "tags": [], "owner": {"reputation": 2274, "user_id": 6266192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iA0i.jpg?s=128&g=1", "display_name": "Dudi Boy", "link": "https://stackoverflow.com/users/6266192/dudi-boy"}, "is_accepted": false, "score": 0, "last_activity_date": 1568036666, "creation_date": 1568036666, "answer_id": 57855304, "question_id": 57853364, "link": "https://stackoverflow.com/questions/57853364/add-quotes-for-each-field-if-it-is-not-enclosed-with-quotes-using-sed-awk-perl/57855304#57855304", "title": "Add quotes for each field if it is not enclosed with quotes using sed/awk/perl", "body": "<p>I suggest a simple <code>awk</code> (standard Linux <code>gawk</code>) script that update each line and print it</p>\n\n<pre><code>awk '{\n     gsub(/;/, \"\\\";\\\"\"); # input line substitute all ; with \";\"\n     print \"\\\"\" $0 \"\\\"\"; # print input line wrapped with \"\n}' input.txt\n</code></pre>\n\n<p>or one liner</p>\n\n<pre><code>awk '{gsub(/;/, \"\\\";\\\"\");print \"\\\"\" $0 \"\\\"\";}' input.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1568276476, "post_id": 57855360, "comment_id": 102225291, "body": "Is there any way outfile can be placed directly to hadoop file system instead of local file system without landing to intermediate area by using your command"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1568277410, "post_id": 57855360, "comment_id": 102225771, "body": "@user1485267 Not a clue; I am completely ignorant of hadoop."}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1568278998, "post_id": 57855360, "comment_id": 102226601, "body": "Ok, No issues. Can we keep the output of data in memory and process output with redirection. for example perl &#39;command&#39; &gt; output.txt"}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 2, "last_activity_date": 1568044402, "last_edit_date": 1568044402, "creation_date": 1568036865, "answer_id": 57855360, "question_id": 57853364, "link": "https://stackoverflow.com/questions/57853364/add-quotes-for-each-field-if-it-is-not-enclosed-with-quotes-using-sed-awk-perl/57855360#57855360", "title": "Add quotes for each field if it is not enclosed with quotes using sed/awk/perl", "body": "<p>Perl one liner using the useful <a href=\"https://metacpan.org/pod/Text::AutoCSV\" rel=\"nofollow noreferrer\">Text::AutoCSV</a> module:</p>\n\n<pre><code>perl -MText::AutoCSV -e 'Text::AutoCSV-&gt;new(in_file=&gt;\"input.txt\",\n    out_file=&gt;\"output.txt\",\n    sep_char=&gt;\";\",\n    out_always_quote=&gt;1)-&gt;write()'\n</code></pre>\n\n<p>And to squash newlines in fields:</p>\n\n<pre><code>perl -MText::AutoCSV -e 'Text::AutoCSV-&gt;new(in_file=&gt;\"input.txt\",\n    out_file=&gt;\"output.txt\",\n    sep_char=&gt;\";\",\n    out_always_quote=&gt;1,\n    read_post_update_hr=&gt;sub{\n        while(my ($k,$v) = each %{$_[0]}){\n            ${$_[0]}{$k}=$v=~s/\\n//gr\n        } })-&gt;write()'\n</code></pre>\n\n<p>will output</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>\"eno\";\"ename\";\"address\";\"gender\"\n\"1\";\"AaA\";\"mnop qrstzyx\";\"M\"\n\"2\";\"bB\";\"abc\";\"F\"\n\"3\";\"cC\";\"adef;mnp\";\"ars\"\n\"4\";\"mnp\";\"ade\";\"M\"\n</code></pre>\n\n<p>If you have non-trivial CSV-like data like yours, it's always better to use an actual CSV parser instead of trying to hack around with regular expressions trying to get something to work.</p>\n"}, {"comments": [{"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1568095088, "post_id": 57856994, "comment_id": 102154917, "body": "it didnt work with the final solution.. it is adding quotes without appending to previous line.. if my filename is input.csv"}, {"owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "reply_to_user": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1568115988, "post_id": 57856994, "comment_id": 102165061, "body": "@user1485267 I do not understand your comment. For both scenario 1 and 2 I get the same result."}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1568117266, "post_id": 57856994, "comment_id": 102165765, "body": "when i run sed -Ez &#39;:a;s/^([^&quot;]*(&quot;[^&quot;\\n]*&quot;[^&quot;]*)*&quot;[^&quot;\\n]*)\\n/\\1/;ta&#39; input.csv | sed -E &#39;:a;s/^([^&quot;]*(&quot;[^&quot;;]*&quot;[^&quot;]*)*&quot;[^&quot;;]*);/\\1\\n/;ta;s/&quot;//g;s/[^;&zwnj;&#8203;]*/&quot;&amp;&quot;/g;y/\\n/;/&#39; like this i am getting issues syntax wrong"}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1568133330, "post_id": 57856994, "comment_id": 102174817, "body": "Thank u potong.. is there any way which i can run first command and save the result in one file and from that file i want to do second sed after pipe"}, {"owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "reply_to_user": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 1, "creation_date": 1568152090, "post_id": 57856994, "comment_id": 102181901, "body": "@user1485267 you can use a tee command e.g. <code>command1 inputFile | tee saveFile1 | command2  &gt;saveFile2</code>"}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1568210447, "post_id": 57856994, "comment_id": 102203205, "body": "It is only because of -Ez script causing me the issue when i ran your command with -Ez it gives me invalid option --z. Can you suggest me what will be  the other way to achive it without &#39;z&#39; parameter second command it doesn&#39;t work"}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1568210468, "post_id": 57856994, "comment_id": 102203215, "body": "I tried like below way by removing z in your command it didn&#39;t worked.sed -E &#39;:a;s/^([^&quot;]*(&quot;[^&quot;\\n]*&quot;[^&quot;]*)*&quot;[^&quot;\\n]*)\\n/\\1/;ta&#39; file | sed -E &#39;:a;s/^([^&quot;]*(&quot;[^&quot;;]*&quot;[^&quot;]*)*&quot;[^&quot;;]*);/\\1\\n/;ta;s/&quot;//g;s/[^;&zwnj;&#8203;]*/&quot;&amp;&quot;/g;y/\\n/;/&#39;"}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1568210613, "post_id": 57856994, "comment_id": 102203285, "body": "My sed version is GNU Sed 4.2.1"}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1568265915, "post_id": 57856994, "comment_id": 102220955, "body": "It throws an issue like below for the older sed&#39;s sed: -e expression #1, char 58: invalid reference \\1 on `s&#39; command&#39;s RHS.  Command : sed &#39;1h;1!H;$!d;x;:a;s/^([^&quot;]*(&quot;[^&quot;\\n]*&quot;[^&quot;]*)*&quot;[^&quot;\\n]*)\\n/\\1/;t&zwnj;&#8203;a&#39; file"}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1568266714, "post_id": 57856994, "comment_id": 102221221, "body": "Thank you it worked fine with adding extra -r in your last modified command i.e sed -r &#39;1h;1!H;$!d;x;:a;s/^([^&quot;]*(&quot;[^&quot;\\n]*&quot;[^&quot;]*)*&quot;[^&quot;\\n]*)\\n/\\1/;t&zwnj;&#8203;a&#39; file"}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "reply_to_user": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "edited": false, "score": 0, "creation_date": 1568267574, "post_id": 57856994, "comment_id": 102221524, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/199348/discussion-between-user1485267-and-potong\">continue this discussion in chat</a>."}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1568298338, "post_id": 57856994, "comment_id": 102237606, "body": "when the filesize is big the command gets hanged around 150MB file I am trying to replace it."}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1568298351, "post_id": 57856994, "comment_id": 102237621, "body": "Are there any suggestions which can be provided"}], "tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 2, "last_activity_date": 1568273231, "last_edit_date": 1568273231, "creation_date": 1568042786, "answer_id": 57856994, "question_id": 57853364, "link": "https://stackoverflow.com/questions/57853364/add-quotes-for-each-field-if-it-is-not-enclosed-with-quotes-using-sed-awk-perl/57856994#57856994", "title": "Add quotes for each field if it is not enclosed with quotes using sed/awk/perl", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed -E ':a;s/^([^\"]*(\"[^\";]*\"[^\"]*)*\"[^\";]*);/\\1\\n/;ta;s/\"//g;s/[^;]*/\"&amp;\"/g;y/\\n/;/' file\n</code></pre>\n\n<p>Change the <code>;</code>'s within double quoted strings to something else (<code>\\n</code>). Remove double quotes from all fields. Surround all characters which are not delimiters (<code>;</code>) by double quotes. Finally replace newlines by <code>;</code>'s. </p>\n\n<p>The second example needs newlines removed from within double quoted strings. A separate solution for this is:</p>\n\n<pre><code>sed -Ez ':a;s/^([^\"]*(\"[^\"\\n]*\"[^\"]*)*\"[^\"\\n]*)\\n/\\1/;ta' file\n</code></pre>\n\n<p>Or, for older seds:</p>\n\n<pre><code>sed -r '1h;1!H;$!d;x;:a;s/^([^\"]*(\"[^\"\\n]*\"[^\"]*)*\"[^\"\\n]*)\\n/\\1/;ta' file\n</code></pre>\n\n<p>The overall solution is a combination of the above, where the file is first treated by the second solution which is piped into the first solution e.g.</p>\n\n<pre><code>sed -Ez ':a;s/^([^\"]*(\"[^\"\\n]*\"[^\"]*)*\"[^\"\\n]*)\\n/\\1/;ta' file |\nsed -E ':a;s/^([^\"]*(\"[^\";]*\"[^\"]*)*\"[^\";]*);/\\1\\n/;ta;s/\"//g;s/[^;]*/\"&amp;\"/g;y/\\n/;/'\n</code></pre>\n"}], "owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1568273231, "creation_date": 1568029427, "last_edit_date": 1568031413, "question_id": 57853364, "link": "https://stackoverflow.com/questions/57853364/add-quotes-for-each-field-if-it-is-not-enclosed-with-quotes-using-sed-awk-perl", "title": "Add quotes for each field if it is not enclosed with quotes using sed/awk/perl", "body": "<p>I want to add quotes for each field if the field values is not enclosed with quotes.</p>\n\n<p>Scenario 1 :\nBelow is my input</p>\n\n<pre><code>eno;ename;address;gender\n1;AaA;\"mnop qrstzyx\";M\n2;bB;\"abc\";F\n3;cC;\"adef;mnp\";ars\n4;mnp;ade;M\n</code></pre>\n\n<p>Expected output </p>\n\n<pre><code>\"eno\";\"ename\";\"address\";\"gender\"\n\"1\";\"AaA\";\"mnop qrstzyx\";\"M\"\n\"2\";\"bB\";\"abc\";\"F\"\n\"3\";\"cC\";\"adef;mnp\";\"ars\"\n\"4\";\"mnp\";\"ade\";\"M\"\n</code></pre>\n\n<p>Options which i tried</p>\n\n<pre><code>sed 's/[^;]*/\"&amp;\"/g'\n</code></pre>\n\n<p>Scenario 2 :\nBelow is my input</p>\n\n<pre><code>eno;ename;address;gender\n1;AaA;\"mnop \nqrst\nzyx\";M\n2;bB;\"abc\";F\n3;cC;\"adef;\nmnp\";ars\n4;mnp;ade;M\n</code></pre>\n\n<p>Expected output </p>\n\n<pre><code>\"eno\";\"ename\";\"address\";\"gender\"\n\"1\";\"AaA\";\"mnop qrstzyx\";\"M\"\n\"2\";\"bB\";\"abc\";\"F\"\n\"3\";\"cC\";\"adef;mnp\";\"ars\"\n\"4\";\"mnp\";\"ade\";\"M\"\n</code></pre>\n"}, {"tags": ["perl", "xpath"], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 0, "last_activity_date": 1568039219, "creation_date": 1568039219, "answer_id": 57856007, "question_id": 57852957, "link": "https://stackoverflow.com/questions/57852957/xpath-get-element-name/57856007#57856007", "title": "Xpath get element name", "body": "<pre><code>use Web::Query::LibXML 'wq';\nmy $html = ...;\nmy (%r, $key);\nwq($html)-&gt;filter(sub { 1 })-&gt;each(sub {\n    if ($_-&gt;match('h2')) {\n        $key = $_-&gt;text;\n    } elsif ($_-&gt;match('p')) {\n        push @{ $r{$key} }, $_-&gt;text;\n    }\n});\n__END__\n(\n    Abbess =&gt; [\"text paragraph 4\", \"text paragraph 5\"],\n    Abbey  =&gt; [\"text paragraph 1\", \"text paragraph 2\", \"text paragraph 3\"],\n    Abbot  =&gt; [\"text paragraph 6\", \"text paragraph 7\", \"text paragraph 8\"],\n)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "edited": false, "score": 0, "creation_date": 1568064862, "post_id": 57856211, "comment_id": 102149117, "body": "worked exactly as needed with HTML::TreeBuilder::LibXML."}], "tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": true, "score": 1, "last_activity_date": 1568039921, "creation_date": 1568039921, "answer_id": 57856211, "question_id": 57852957, "link": "https://stackoverflow.com/questions/57852957/xpath-get-element-name/57856211#57856211", "title": "Xpath get element name", "body": "<p>I would simply use <a href=\"https://metacpan.org/pod/HTML::Element#find\" rel=\"nofollow noreferrer\"><code>find</code></a> to find \"h2\" nodes, and then <a href=\"https://metacpan.org/pod/HTML::Element#right\" rel=\"nofollow noreferrer\"><code>right</code></a> to get the following \"p\" nodes:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $tree = HTML::TreeBuilder-&gt;new_from_content( \"your HTML\" );\n\nmy %links;\nfor my $h2 ($tree-&gt;find('h2')) {\n    my $link = $h2-&gt;as_trimmed_text;\n    my $current = $h2-&gt;right;\n    while ($current &amp;&amp; $current-&gt;tag eq 'p') {\n        push @{$links{$link}}, $current-&gt;as_trimmed_text;\n        $current = $current-&gt;right;\n    }\n}\n</code></pre>\n\n<p>(<code>HTML::TreeBuilder</code> can be replace by <code>HTML::TreeBuilder::LibXML</code>; this code will still work)</p>\n"}], "owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 57856211, "answer_count": 2, "score": 1, "last_activity_date": 1568039921, "creation_date": 1568027967, "question_id": 57852957, "link": "https://stackoverflow.com/questions/57852957/xpath-get-element-name", "title": "Xpath get element name", "body": "<p>I am using Perl module HTML::TreeBuilder::LibXML to parse HTML page code below:</p>\n\n<pre><code>&lt;h2&gt;&lt;a name=\"abbey\"&gt;Abbey&lt;/a&gt;&lt;/h2&gt;\n\n&lt;p&gt;text paragraph 1&lt;/p&gt;\n\n&lt;p&gt;text paragraph 2&lt;/p&gt;\n\n&lt;p&gt;text paragraph 3&lt;/p&gt;\n\n&lt;h2&gt;&lt;a name=\"abbess\"&gt;Abbess&lt;/a&gt;&lt;/h2&gt;\n\n&lt;p&gt;text paragraph 4&lt;/p&gt;\n\n&lt;p&gt;text paragraph 5&lt;/p&gt;\n\n&lt;h2&gt;&lt;a name=\"abbot\"&gt;Abbot&lt;/a&gt;&lt;/h2&gt;\n\n&lt;p&gt;text paragraph 6&lt;/p&gt;\n\n&lt;p&gt;text paragraph 7&lt;/p&gt;\n\n&lt;p&gt;text paragraph 8&lt;/p&gt;\n</code></pre>\n\n<p>How to get a list of the p tags text following each  tag name marked by the h2. I mean I need an array of all the p tags text following the tag name, for example:</p>\n\n<pre><code>\"Abbey\" =&gt; (\ntext paragraph 1\ntext paragraph 2\ntext paragraph 3\n)\n\n\"Abbess\" =&gt; (\ntext paragraph 4\ntext paragraph 5\n)\n\n\"Abbot\" =&gt; (\ntext paragraph 6\ntext paragraph 7\ntext paragraph 8\n)\n</code></pre>\n\n<p>So how to check the node name is \"h2\" or \"p\" if I loop over the tree nodes something like this:</p>\n\n<pre><code>foreach my $node ($tree-&gt;findnodes(...)){\n if $node is h2 ....\n if $node is p...\n}\n</code></pre>\n\n<p>To build a hash of links and its paragraphs contents from the html code above.</p>\n"}, {"tags": ["perl", "subroutine"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1568038805, "post_id": 57851053, "comment_id": 102138019, "body": "If you are using the code in with <a href=\"https://perldoc.perl.org/threads.html\" rel=\"nofollow noreferrer\">threads</a> please show the relevant code"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1568045475, "post_id": 57851053, "comment_id": 102141492, "body": "See also <a href=\"https://stackoverflow.com/q/33020623/2173773\">Sharing a thread variable without making it global</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568067671, "post_id": 57851053, "comment_id": 102149776, "body": "Tip: <code>my @a = ();</code> is a weird way of writing <code>my @a;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11896915, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xXKXzldRw6c/AAAAAAAAAAI/AAAAAAAAAV4/8_3eug-B3-A/photo.jpg?sz=128", "display_name": "Farouk H", "link": "https://stackoverflow.com/users/11896915/farouk-h"}, "edited": false, "score": 0, "creation_date": 1568044122, "post_id": 57851226, "comment_id": 102140814, "body": "Thank you H&#229;kon for your answer,  So if I use a scope, I wouldn&#39;t be able to thread those subs, wright ? Since, the variables will get all mixed up in different processes. Especially that not both subs are threadded in the same way.  If not, I will pass vars in the arguments of the sub."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 1, "user_id": 11896915, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xXKXzldRw6c/AAAAAAAAAAI/AAAAAAAAAV4/8_3eug-B3-A/photo.jpg?sz=128", "display_name": "Farouk H", "link": "https://stackoverflow.com/users/11896915/farouk-h"}, "edited": false, "score": 0, "creation_date": 1568045147, "post_id": 57851226, "comment_id": 102141339, "body": "You are welcome! I am not sure what exactly you mean by <i>&quot;threadded&quot;</i>.. Note that lexical variables in <a href=\"https://perldoc.perl.org/threads.html\" rel=\"nofollow noreferrer\">threads</a> are separate, unless you <a href=\"https://perldoc.perl.org/threads/shared.html\" rel=\"nofollow noreferrer\">declare them as shared</a>. Please clarify what you are trying to do"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1568021796, "last_edit_date": 1568021796, "creation_date": 1568021190, "answer_id": 57851226, "question_id": 57851053, "link": "https://stackoverflow.com/questions/57851053/per-visibility-of-variables-of-a-subroutines-for-its-subroutine/57851226#57851226", "title": "Per: Visibility of variables of a subroutines for its subroutine", "body": "<p>You can contain (restrict the visibility of) the variables to the two subs by introducing a scope <code>{ ... }</code>, for example:</p>\n\n<pre><code>{ \n    my $esr ;\n    my @vpls = () ;\n    my @sap = ();\n    my @spoke = () ;\n\n    sub esr_info {\n        conf_esr($esr , 1);\n    }\n\n    sub conf_esr {\n        my $e = @_[0] ;\n        #some code (@vpls, @sap, @spoke);\n    }\n}\n</code></pre>\n\n<p>But note that the variables now retain the values after the subs are exited (they become state variables). This is also called a closure.</p>\n\n<p>But other approaches could be more appropriate (closures can make the code more difficult to read and hence to maintain) depending on you situation. For example, alternatives could be:</p>\n\n<ul>\n<li>you could pass references to the variables as arguments to <code>conf_esr</code>, or better</li>\n<li>use an object oriented approach where the variables are contained in a <code>$self</code> hash.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 11896915, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xXKXzldRw6c/AAAAAAAAAAI/AAAAAAAAAV4/8_3eug-B3-A/photo.jpg?sz=128", "display_name": "Farouk H", "link": "https://stackoverflow.com/users/11896915/farouk-h"}, "edited": false, "score": 0, "creation_date": 1568286462, "post_id": 57857804, "comment_id": 102230687, "body": "Okay, got it. I passed the arguments to the subroutine. Long work but works fine. Thanks a lot"}], "tags": [], "owner": {"reputation": 518, "user_id": 3617046, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/afad7c3481df3dcbbcd2b4366782e056?s=128&d=identicon&r=PG&f=1", "display_name": "Bulrush", "link": "https://stackoverflow.com/users/3617046/bulrush"}, "is_accepted": false, "score": 0, "last_activity_date": 1568046154, "creation_date": 1568046154, "answer_id": 57857804, "question_id": 57851053, "link": "https://stackoverflow.com/questions/57851053/per-visibility-of-variables-of-a-subroutines-for-its-subroutine/57857804#57857804", "title": "Per: Visibility of variables of a subroutines for its subroutine", "body": "<blockquote>\n  <p>My question : Can a subroutine access the vars of another without declaring those vars as global ?</p>\n</blockquote>\n\n<p>No. You should try passing in variables, it's better form, but you can also use global variables. </p>\n\n<pre><code>my $i=1;\nmysub(); # This will not change the global $i\nprint \"i=$i\\n\"; # This should print '1'\nexit;\n\n##########\nsub mysub\n{my $i=2; # This is a variable local to mysub() only.\nreturn;\n}\n</code></pre>\n\n<p>Type in the code above and run it with Perl. Notice that the $i in the subroutine <code>mysub()</code> is completely different than the global $i in the program itself, because the $i in the <code>mysub()</code> is a different memory address.</p>\n\n<p>Now let's change $i to global. <code>mysub()</code> will change the global $i because it doesn't have a local $i declared.</p>\n\n<pre><code>my $i=1;\nmysub(); # This will not change the global $i\nprint \"i=$i\\n\"; # This should print '2'\nexit;\n\n##########\nsub mysub\n{$i=2; # This is changing the value in the global $i memory area. \nreturn;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11896915, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xXKXzldRw6c/AAAAAAAAAAI/AAAAAAAAAV4/8_3eug-B3-A/photo.jpg?sz=128", "display_name": "Farouk H", "link": "https://stackoverflow.com/users/11896915/farouk-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1568046154, "creation_date": 1568020594, "last_edit_date": 1592644375, "question_id": 57851053, "link": "https://stackoverflow.com/questions/57851053/per-visibility-of-variables-of-a-subroutines-for-its-subroutine", "title": "Per: Visibility of variables of a subroutines for its subroutine", "body": "<p>I have a problem about variables of a subroutine which cannot be accessed by another subroutine.</p>\n<p>the first subroutine :</p>\n<pre><code>sub esr_info {\n    my $esr ;\n    my @vpls = () ;\n    my @sap = ();\n    my @spoke = () ;\n    &amp;conf_esr($esr , 1);\n}\n</code></pre>\n<p>the second :</p>\n<pre><code>sub conf_esr {\n     my $e = @_[0] ;\n     some code (@vpls, @sap, @spoke);\n}\n</code></pre>\n<p>the first calls the second, and I need the variables of the first to be local and not global for the whole code (for threading purposes). The second uses all the variables of the first . I get these errors :</p>\n<blockquote>\n<p>Global symbol &quot;$esr&quot; requires explicit package name (did you forget to declare &quot;my $esr&quot;?) at w.pl line 63.</p>\n<p>Global symbol &quot;@vpls&quot; requires explicit package name (did you forget to declare &quot;my @vpls&quot;?) at w.pl line 74.</p>\n</blockquote>\n<p>My question : Can a subroutine access the vars of another without declaring those vars as global ?</p>\n<p>Many thanks for reading the post.</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1568006619, "post_id": 57848099, "comment_id": 102123321, "body": "Putting the code in a function is just weird. Put it in a script file in your <code>PATH</code>. Moving the com+onent back and forth is also extremely suspicious. Would symlinking it to your home directory (just once) not work?"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1568007061, "post_id": 57848099, "comment_id": 102123431, "body": "OK, I put it in a script and it works. I originally had it in a function called &quot;osascript&quot; to override the system binary called &quot;osascript&quot; because of a bug with the Quicktime component. I always have to move it out of the way or I get buttload of errors every time I use the osascript binary."}, {"owner": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "edited": false, "score": 1, "creation_date": 1568012846, "post_id": 57848099, "comment_id": 102125275, "body": "<a href=\"https://www.perl.com/article/quoting-the-shell/\" rel=\"nofollow noreferrer\">perl.com/article/quoting-the-shell</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1568007536, "post_id": 57848333, "comment_id": 102123551, "body": "Double slashing did the trick and putting $command in double quotes did the trick. Of all the different iterations I tried, I guess I didn&#39;t try that one."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1568044566, "post_id": 57848333, "comment_id": 102141078, "body": "I would recommend against trying to defeat bash quoting manually when String::ShellQuote exists."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1568044666, "post_id": 57848333, "comment_id": 102141107, "body": "As outlined in the last paragraph, the proper solution in this case is to not avoid the problem entirely."}], "tags": [], "owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": true, "score": 1, "last_activity_date": 1568007078, "creation_date": 1568007078, "answer_id": 57848333, "question_id": 57848099, "link": "https://stackoverflow.com/questions/57848099/quoting-bash-command-for-perl-to-execute/57848333#57848333", "title": "Quoting bash command for perl to execute", "body": "<p>You can't nest stingle quotes like that.  For debugging, try</p>\n\n<pre><code>my $url = `printf '&gt;&gt;%s&lt;&lt;\\n' /usr/local/bin/bash -c '$command'`,\nprint \"$url\";\nexit;\n</code></pre>\n\n<p>to see how the command is tokenized by the shell.</p>\n\n<p>The simplest fix I can think of is</p>\n\n<pre><code>my $command = qq(source ~/.bashrc; do_osascript -e 'tell application \\\\\"Safari\\\\\" to return URL of current tab of window 1');\nmy $url = `printf '&gt;&gt;%s&lt;&lt;\\n' /usr/local/bin/bash -c \"$command\"`;\n</code></pre>\n\n<p>where I added backslash escapes before the double quotes in <code>$command</code>, and switched from single to double quotes in <code>$url</code>.  But seriously, having that function in your <code>.bashrc</code> is just weird. Put it in a script file instead and do away with the requirement to <code>bash -c \"source ~/.bashrc;\"</code> before the actual command.</p>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1568044655, "last_edit_date": 1568044655, "creation_date": 1568044333, "answer_id": 57857353, "question_id": 57848099, "link": "https://stackoverflow.com/questions/57848099/quoting-bash-command-for-perl-to-execute/57857353#57857353", "title": "Quoting bash command for perl to execute", "body": "<p>Use <a href=\"https://metacpan.org/pod/String::ShellQuote\" rel=\"nofollow noreferrer\">String::ShellQuote</a> to programmatically quote an argument or list of arguments so a bourne-compatible shell will treat each as a single argument, regardless of what it contains:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse String::ShellQuote;\n\nmy $command = shell_quote '/usr/local/bin/bash', '-c', qq(source ~/.bashrc; do_osascript -e 'tell application \"Safari\" to return URL of current tab of window 1');\n\nmy $url = `$command`;\n</code></pre>\n\n<p>Or invoke the program directly without having the shell parse it. There are many options for this, but the direct analogue of backticks would be using <a href=\"https://metacpan.org/pod/IPC::ReadpipeX\" rel=\"nofollow noreferrer\">IPC::ReadpipeX</a>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse IPC::ReadpipeX;\n\nmy $command = qq(source ~/.bashrc; do_osascript -e 'tell application \"Safari\" to return URL of current tab of window 1');\n\nmy $url = readpipex '/usr/local/bin/bash', '-c', $command;\n</code></pre>\n\n<p>Other good options for this are listed in that module's docs under <a href=\"https://metacpan.org/pod/IPC::ReadpipeX#SEE-ALSO\" rel=\"nofollow noreferrer\">SEE ALSO</a>.</p>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 57848333, "answer_count": 2, "score": 0, "last_activity_date": 1568044655, "creation_date": 1568005227, "question_id": 57848099, "link": "https://stackoverflow.com/questions/57848099/quoting-bash-command-for-perl-to-execute", "title": "Quoting bash command for perl to execute", "body": "<p>I've spent like an hour on this without success. Got this perl script which I want to call a wrapper bash function:</p>\n\n<pre><code>my $command = qq(source ~/.bashrc; do_osascript -e 'tell application \"Safari\" to return URL of current tab of window 1');\n\nmy $url = `/usr/local/bin/bash -c '$command'`;\nlogd $url;\n</code></pre>\n\n<p>And here is the wrapper bash function:</p>\n\n<pre><code>function do_osascript() {\n    if [ -e \"/Library/QuickTime/EyeTV MPEG Support.component\" ]; then\n        mv \"/Library/QuickTime/EyeTV MPEG Support.component\" ~\n    fi\n    command osascript \"$@\"\n    if [ -e \"${HOME}/EyeTV MPEG Support.component\" ]; then\n        mv \"${HOME}/EyeTV MPEG Support.component\" \"/Library/QuickTime/\"\n    fi\n}\n</code></pre>\n\n<p>UPDATE: Had some old code for bash. Updated.</p>\n\n<p>I've tried many different methods of escaping quotes but none of them work. I have confirmed that the command works fine when run from the command line.</p>\n"}, {"tags": ["unit-testing", "perl", "global-variables", "modulino"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1567967515, "post_id": 57844599, "comment_id": 102116566, "body": "Variable declared with <a href=\"http://p3rl.org/my\" rel=\"nofollow noreferrer\">my</a> isn&#39;t global."}, {"owner": {"reputation": 141, "user_id": 12038400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9fd9a82943326efc8bb953881273e54?s=128&d=identicon&r=PG&f=1", "display_name": "Rich Farmbrough", "link": "https://stackoverflow.com/users/12038400/rich-farmbrough"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1567968106, "post_id": 57844599, "comment_id": 102116694, "body": "(SMH) Thanks!  I thought It was something stupid on my part."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1567968508, "post_id": 57844599, "comment_id": 102116778, "body": "in general, you should not have require_ok and use_ok in the same test as tests of the code those load, since if the require fails that will cause the later tests to not actually be testing what they should and fail"}], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 12038400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9fd9a82943326efc8bb953881273e54?s=128&d=identicon&r=PG&f=1", "display_name": "Rich Farmbrough", "link": "https://stackoverflow.com/users/12038400/rich-farmbrough"}, "is_accepted": true, "score": 1, "last_activity_date": 1567970253, "creation_date": 1567970253, "answer_id": 57845025, "question_id": 57844599, "link": "https://stackoverflow.com/questions/57844599/accessing-a-global-in-a-perl-modulino-from-a-test/57845025#57845025", "title": "Accessing a global in a perl modulino from a test", "body": "<p>As pointed out by choroba, <code>my</code> variables aren't global.  The best solution for me,  and what I should have done to start with is to add a setter sub to the modulino, something like:</p>\n\n<pre><code>sub setItem\n{\n    $config{'Item'} = shift;\n    return;\n}\n</code></pre>\n\n<p>and since I am now going to want a unit test for that, a getter is also a good idea</p>\n\n<pre><code>sub getItem\n{\n    return $config{'Item'};\n}\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 12038400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9fd9a82943326efc8bb953881273e54?s=128&d=identicon&r=PG&f=1", "display_name": "Rich Farmbrough", "link": "https://stackoverflow.com/users/12038400/rich-farmbrough"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 57845025, "answer_count": 1, "score": 1, "last_activity_date": 1567970253, "creation_date": 1567966566, "question_id": 57844599, "link": "https://stackoverflow.com/questions/57844599/accessing-a-global-in-a-perl-modulino-from-a-test", "title": "Accessing a global in a perl modulino from a test", "body": "<p>In a unit test I need to set a global variable used in a perl script that I have changed into a modulino.  I'm calling subs in the modulino quite happily.</p>\n\n<p>Using perl (v5.18.2) built for x86_64-linux-gnu-thread-multi, on Ubuntu.</p>\n\n<p>Note the modulino is so simple it doesn't even require the \"caller()\" trick.</p>\n\n<p>test.pl</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy %config =\n(\n    Item =&gt; 5,\n);\n\nsub return_a_value{\n    return 3;\n}\n</code></pre>\n\n<p>test1.t </p>\n\n<pre><code>#!/user/bin/perl -w\nuse warnings;\nuse strict;\nuse Test::More;\nuse lib '.';\nrequire_ok ( 'test.pl' );\n\nprint return_a_value();\n</code></pre>\n\n<p>test2.t </p>\n\n<pre><code>#!/user/bin/perl -w\nuse warnings;\nuse strict;\nuse Test::More;\nuse lib '.';\nrequire_ok ( 'test.pl' );\n\n$config{'Item'} = 6;\n</code></pre>\n\n<p>test1.t displays as expected</p>\n\n<pre><code>ok 1 - require 'test.pl';\n3# Tests were run but no plan was declared and done_testing() was not seen\n</code></pre>\n\n<p>test2.t (fails to compile)</p>\n\n<pre><code>Global symbol \"%config\" requires explicit package name at test.t line 8.\nExecution of test.t aborted due to compilation errors.\n</code></pre>\n"}, {"tags": ["perl", "cron", "plack", "psgi"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567947861, "post_id": 57842092, "comment_id": 102111834, "body": "See also <a href=\"https://stackoverflow.com/q/3749289/2173773\">How can I tell Perl to run some code every 20 seconds?</a>"}, {"owner": {"reputation": 31, "user_id": 12037583, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EkmiunznOLo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc8Cn4E8o7IGsjGbtqQsO9K7es6RQ/photo.jpg?sz=128", "display_name": "Benjamin Wei&#223;", "link": "https://stackoverflow.com/users/12037583/benjamin-wei%c3%9f"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567947970, "post_id": 57842092, "comment_id": 102111853, "body": "Thanks, but the PSGI is async. I need a &quot;Cronjob&quot; completely indepentent from outside async calls, no bottleneck - no user should wait 60 sec. until the inner cron code lines are executed and the users request is then executed afterwards.."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567948205, "post_id": 57842092, "comment_id": 102111906, "body": "Can you use a daemon, e.g. <a href=\"https://metacpan.org/pod/Proc::Daemon\" rel=\"nofollow noreferrer\">Proc::Daemon</a> ?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567948636, "post_id": 57842092, "comment_id": 102112011, "body": "There is also a <a href=\"https://uwsgi-docs.readthedocs.io/en/latest/Signals.html\" rel=\"nofollow noreferrer\">uwsgi signal framework</a>, maybe that can be used to set up a timer?"}, {"owner": {"reputation": 31, "user_id": 12037583, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EkmiunznOLo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc8Cn4E8o7IGsjGbtqQsO9K7es6RQ/photo.jpg?sz=128", "display_name": "Benjamin Wei&#223;", "link": "https://stackoverflow.com/users/12037583/benjamin-wei%c3%9f"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567948804, "post_id": 57842092, "comment_id": 102112052, "body": "No, that won&#39;t work, unfortunately. Uwsgi, twiggy, plackup etc. will handle all the processes and workers. I need an inner solution, maybe in sub builder {} or some inner callback?"}, {"owner": {"reputation": 31, "user_id": 12037583, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EkmiunznOLo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc8Cn4E8o7IGsjGbtqQsO9K7es6RQ/photo.jpg?sz=128", "display_name": "Benjamin Wei&#223;", "link": "https://stackoverflow.com/users/12037583/benjamin-wei%c3%9f"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1567952368, "post_id": 57842092, "comment_id": 102112906, "body": "I read that docu so many times and I didn&#39;t see that :) I did some tests by registering the signal and include a sub routine in the PSGI, I guess signal framework is the right solution. Great. Thanks a lot!!!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1568025621, "post_id": 57842092, "comment_id": 102131108, "body": "Could you write an answer of your own when you&#39;re done please?"}], "owner": {"reputation": 31, "user_id": 12037583, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EkmiunznOLo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc8Cn4E8o7IGsjGbtqQsO9K7es6RQ/photo.jpg?sz=128", "display_name": "Benjamin Wei&#223;", "link": "https://stackoverflow.com/users/12037583/benjamin-wei%c3%9f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1567946821, "creation_date": 1567946821, "question_id": 57842092, "link": "https://stackoverflow.com/questions/57842092/cronjob-inside-a-psgi-script", "title": "&quot;Cronjob&quot; inside a PSGI script", "body": "<p>I have a PSGI script using plack builder which is being executed using uwgsi by having multiple processes spawned. I have to refresh every minute an internal hash by using a database call. Is it somehow possible, independent from outside process/worker execution, to have some code lines being executed every given intervall? </p>\n"}, {"tags": ["perl", "variables", "process", "plack", "psgi"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567936265, "post_id": 57840693, "comment_id": 102109489, "body": "Why did not <code>threads::shared</code> work?"}, {"owner": {"reputation": 59, "user_id": 7261395, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cb8db032eea597474e83a16939c3ec29?s=128&d=identicon&r=PG&f=1", "display_name": "user7261395", "link": "https://stackoverflow.com/users/7261395/user7261395"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567937838, "post_id": 57840693, "comment_id": 102109814, "body": "It worked partial, this module is limited to the default/local segment memory limit. The hash is pretty big though (min. 100K elements; small value). threads::shared went out of memory when setting the hash :("}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567939469, "post_id": 57840693, "comment_id": 102110139, "body": "<i>&quot;..100K elements..&quot;</i> How did you run out of memory? How much memory did your shared data consume? What error message did you get? I tried now with a shared variable of size 100M and I did not get any errors."}, {"owner": {"reputation": 59, "user_id": 7261395, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cb8db032eea597474e83a16939c3ec29?s=128&d=identicon&r=PG&f=1", "display_name": "user7261395", "link": "https://stackoverflow.com/users/7261395/user7261395"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567940026, "post_id": 57840693, "comment_id": 102110258, "body": "Sorry, I meant IPC::Shareable which run out of memory. threads::shared did not work. The second process didn&#39;t have and values of %hash. threads::shared works in PSGI enviroments? (I guess there is a parallel/separate process instead of a thread)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567940138, "post_id": 57840693, "comment_id": 102110278, "body": "Ok, so the question is how to share memory fast between processes ( not threads)?"}, {"owner": {"reputation": 59, "user_id": 7261395, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cb8db032eea597474e83a16939c3ec29?s=128&d=identicon&r=PG&f=1", "display_name": "user7261395", "link": "https://stackoverflow.com/users/7261395/user7261395"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567940410, "post_id": 57840693, "comment_id": 102110331, "body": "Yes.(UWSGI will do multiple processes which have multiple threads/workers though.)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567942254, "post_id": 57840693, "comment_id": 102110702, "body": "See also <a href=\"https://metacpan.org/pod/Cache::FastMmap\" rel=\"nofollow noreferrer\">Cache::FastMmap</a>"}, {"owner": {"reputation": 59, "user_id": 7261395, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cb8db032eea597474e83a16939c3ec29?s=128&d=identicon&r=PG&f=1", "display_name": "user7261395", "link": "https://stackoverflow.com/users/7261395/user7261395"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567942447, "post_id": 57840693, "comment_id": 102110746, "body": "Thanks just I tried it. 70 times hash get operations: 0.004306 sec. vs local hash: 0.000238 sec. (18 times faster). Is there a better (somehow local hash) way? Cache::Memcached::Fast performes at 0.006690 sec."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1567943217, "post_id": 57840693, "comment_id": 102110905, "body": "I&#39;m curious too. I believe redis is not any faster than memcached."}, {"owner": {"reputation": 59, "user_id": 7261395, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cb8db032eea597474e83a16939c3ec29?s=128&d=identicon&r=PG&f=1", "display_name": "user7261395", "link": "https://stackoverflow.com/users/7261395/user7261395"}, "edited": false, "score": 1, "creation_date": 1567943814, "post_id": 57840693, "comment_id": 102111017, "body": "You&#39;re right. Redis performs here at 0.010856 sec. (testing over multi processors; memcached should perform even better than redis). Any solution to come close to a &quot;locale hash performance&quot;"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1567979211, "post_id": 57840693, "comment_id": 102119165, "body": "&quot;<i>not fast enough</i>&quot; -- what do you expect, or, rather, want?  Each process has to work with the resource (that has data) and then there&#39;s more to do for data integrity (so they don&#39;t mess with it at the same time etc); it&#39;s got to be considerably slower.  Also, as we can&#39;t directly use <code>SysV IPC</code> or <code>mmap</code> (to share variables between processes in Perl) the modules that utilize these also use files (as far as I can tell) ... much slower yet. On the other hand, I don&#39;t know whether PSGI and related frameworks provide a way (and consider adapting what you want to do to what they have)?"}], "owner": {"reputation": 59, "user_id": 7261395, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cb8db032eea597474e83a16939c3ec29?s=128&d=identicon&r=PG&f=1", "display_name": "user7261395", "link": "https://stackoverflow.com/users/7261395/user7261395"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1567938015, "creation_date": 1567934731, "last_edit_date": 1567938015, "question_id": 57840693, "link": "https://stackoverflow.com/questions/57840693/share-and-modify-variables-in-psgi-between-processes", "title": "Share and modify variables in PSGI between processes", "body": "<p>We have a PSGI script using UWSGI with multi processes and threads, looking for a fast solution to share <b>editable</b> hashes between these processed and threads. I did tests by using in-memory storage like Cache::Memcached::Fast and Redis. </p>\n\n<p>There are fast but not fast enough, compared using just a locale hash</p>\n\n<pre><code>my %hash = ();\n</code></pre>\n\n<p>which is up to 10 times faster during our tests. Is there a way to share and editable variables in run time - <i>like having sort of a local hash scenario</i> - , e.g. that process 1 is updating </p>\n\n<pre><code>$hash{$id} = $new_val;\n</code></pre>\n\n<p>and process 2 has also that new value for $hash{$id}?</p>\n\n<p>I also tried IPC::Shareable, MCE::Shared::Minidb or threads::shared (threads::shared: segment memory limit) which did work for the PSGI.</p>\n\n<p>Is there a way to have FAST - editable - local variables between all processes on the same machine shared?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "edited": false, "score": 0, "creation_date": 1567878827, "post_id": 57835928, "comment_id": 102100733, "body": "can there be string like <code>AB {C { X Y } D} EF</code>  ?"}, {"owner": {"reputation": 349, "user_id": 893100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76e8b0b340466e987725ba07387dd456?s=128&d=identicon&r=PG", "display_name": "PLK", "link": "https://stackoverflow.com/users/893100/plk"}, "reply_to_user": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "edited": false, "score": 0, "creation_date": 1567878895, "post_id": 57835928, "comment_id": 102100756, "body": "Technically, yes, but I don&#39;t care about anything other than top-level braces."}, {"owner": {"reputation": 518, "user_id": 3617046, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/afad7c3481df3dcbbcd2b4366782e056?s=128&d=identicon&r=PG&f=1", "display_name": "Bulrush", "link": "https://stackoverflow.com/users/3617046/bulrush"}, "edited": false, "score": 0, "creation_date": 1568046323, "post_id": 57835928, "comment_id": 102141854, "body": "<b>Helpful tips:</b> You can test your own regex on your own data via <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">Regex101</a> or <a href=\"https://regexr.com/\" rel=\"nofollow noreferrer\">Regexr</a>. If you make an account you can also save your test cases."}], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 893100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76e8b0b340466e987725ba07387dd456?s=128&d=identicon&r=PG", "display_name": "PLK", "link": "https://stackoverflow.com/users/893100/plk"}, "edited": false, "score": 1, "creation_date": 1567877774, "post_id": 57835951, "comment_id": 102100444, "body": "Thank you - I added two more examples as it&#39;s a bit more difficult than that I think - I suspect it might need some recursion somewhere."}, {"owner": {"reputation": 349, "user_id": 893100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76e8b0b340466e987725ba07387dd456?s=128&d=identicon&r=PG", "display_name": "PLK", "link": "https://stackoverflow.com/users/893100/plk"}, "edited": false, "score": 1, "creation_date": 1567878526, "post_id": 57835951, "comment_id": 102100653, "body": "Just updated again - with another test which causes trouble with that ..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1567954996, "post_id": 57835951, "comment_id": 102113548, "body": "Doesn&#39;t work on nested braces, which the OP said can occur."}], "tags": [], "owner": {"reputation": 1, "user_id": 6553328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omcAX.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6553328/emma"}, "is_accepted": false, "score": -1, "last_activity_date": 1567955066, "last_edit_date": 1592644375, "creation_date": 1567877111, "answer_id": 57835951, "question_id": 57835928, "link": "https://stackoverflow.com/questions/57835928/regexp-to-split-on-spaces-which-are-not-inside-matching-braces/57835951#57835951", "title": "Regexp to split on spaces which are not inside matching braces", "body": "<p>My guess is that maybe this expression,</p>\n<pre><code>my @arr = $str =~ /(?:\\S+)?{[^}]*}(?:\\S+)?|\\S+/g;\n</code></pre>\n<p>might be just OK to look into.</p>\n<h3><a href=\"https://regex101.com/r/Ul6G6N/1/\" rel=\"nofollow noreferrer\">Demo</a></h3>\n<hr />\n<blockquote>\n<p>If you wish to explore/simplify/modify the expression, it's been\nexplained on the top right panel of\n<a href=\"https://regex101.com/r/lEiC2w/1/\" rel=\"nofollow noreferrer\">regex101.com</a>. If you'd like, you\ncan also watch in <a href=\"https://regex101.com/r/lEiC2w/1/debugger\" rel=\"nofollow noreferrer\">this\nlink</a>, how it would match\nagainst some sample inputs.</p>\n</blockquote>\n<hr />\n"}, {"comments": [{"owner": {"reputation": 349, "user_id": 893100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76e8b0b340466e987725ba07387dd456?s=128&d=identicon&r=PG", "display_name": "PLK", "link": "https://stackoverflow.com/users/893100/plk"}, "edited": false, "score": 2, "creation_date": 1567879473, "post_id": 57836098, "comment_id": 102100891, "body": "Excellent, that is very clever. I tried so many variations like this and this works."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567954899, "post_id": 57836098, "comment_id": 102113526, "body": "This works as long as <code>{</code> and <code>}</code> are balanced <i>and unnested</i> and there is no escaping. This fails for <code>AB {C { X Y } D} EF</code> which the OP said  can happen."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1567960558, "post_id": 57836098, "comment_id": 102114836, "body": "You may be right but looking at question none of the shown examples have nested brackets. My answer would have been totally different if it was asked in question by giving clear examples."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567969501, "post_id": 57836098, "comment_id": 102117022, "body": "Yes, the OP could have been clearer, but you didn&#39;t mention a major assumption you made. (Kudos for mentioning the other two, though.) And none of that changes the fact that this answer doesn&#39;t work."}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 0, "last_activity_date": 1567878385, "creation_date": 1567878385, "answer_id": 57836098, "question_id": 57835928, "link": "https://stackoverflow.com/questions/57835928/regexp-to-split-on-spaces-which-are-not-inside-matching-braces/57836098#57836098", "title": "Regexp to split on spaces which are not inside matching braces", "body": "<p>As long as <code>{</code> and <code>}</code> are balanced and there is no escaping you may use this regex for splitting on horizontal whitespaces that are not inside <code>{...}</code>:</p>\n\n<pre><code>/\\h+(?![^{]*})/\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/1vREVU/2\" rel=\"nofollow noreferrer\">RegEx Demo</a></p>\n\n<p><strong>RegEx Details:</strong></p>\n\n<ul>\n<li><code>\\h+</code>: Match 1 or more horizontal whitespaces</li>\n<li><code>(?![^{]*})</code>: Lookahead condition to assert a failure when we have 0 or more of non-<code>{</code> characters between current position and <code>}</code> </li>\n</ul>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1567983577, "post_id": 57844867, "comment_id": 102119859, "body": "<code>Requires well-balanced braces</code> It shouldn&#39;t, it should match junk as well, -1. And you should be able to do it using  just 1 capture group,"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567993560, "post_id": 57844867, "comment_id": 102121154, "body": "@sln, Re &quot;<i>it should match junk as well</i>&quot;, I don&#39;t know what you mean by that. I mean, the code I provided does accept junk. Of course, it returns junk when you do. Just like your solution."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1568055707, "post_id": 57844867, "comment_id": 102145807, "body": "<code>Just like your solution</code> Your&#39;s is nothing like my solution. Yours has standalone <code>\\G</code> which gives up entirely when it doesn&#39;t match. Yours doesn&#39;t match unpaired braces (the junk)  Yours uses 2 capture groups. Ignoring the fact that whitespace is part of your match, and your regex uses 2 capture groups -  Your regex doesn&#39;t work for <code>AB {C { X Y } D} EF {as  {d}f</code> capture group 1 gives <code>AB|{C { X Y } D}|EF</code> instead of the desired <code>AB|{C { X Y } D}|EF|{as|{d}f</code>. You put emphasis on balanced  braces but don&#39;t handle them if not. You care not for defaults and all cases, your regex quits."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568077925, "post_id": 57844867, "comment_id": 102151552, "body": "I never said it gives the same output as your solution."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": -1, "last_activity_date": 1567994000, "last_edit_date": 1567994000, "creation_date": 1567968627, "answer_id": 57844867, "question_id": 57835928, "link": "https://stackoverflow.com/questions/57835928/regexp-to-split-on-spaces-which-are-not-inside-matching-braces/57844867#57844867", "title": "Regexp to split on spaces which are not inside matching braces", "body": "<p>A regex-based solution will necessarily need to use recursion to handle nested braces.</p>\n\n<pre><code>my @a;\npush @a, $1\n   while\n      $str =~ /\n         \\G\n         \\s*+\n         (  (?: [^\\s{}]++\n            |   \\{ (?&amp;CURLY_BODY) \\}\n            )++\n         )\n\n         (?(DEFINE)\n            (?&lt;CURLY_BODY&gt;\n               (?: [^{}]++\n               |   \\{ (?&amp;CURLY_BODY) \\}\n               )*+\n            )\n         )\n      /xg;\n</code></pre>\n\n<p>Note that the above doesn't perform any validation, meaning it doesn't produces any errors on unmatched braces.</p>\n"}], "owner": {"reputation": 349, "user_id": 893100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76e8b0b340466e987725ba07387dd456?s=128&d=identicon&r=PG", "display_name": "PLK", "link": "https://stackoverflow.com/users/893100/plk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 1, "accepted_answer_id": 57836098, "answer_count": 3, "score": 0, "last_activity_date": 1568268674, "creation_date": 1567876875, "last_edit_date": 1568268674, "question_id": 57835928, "link": "https://stackoverflow.com/questions/57835928/regexp-to-split-on-spaces-which-are-not-inside-matching-braces", "title": "Regexp to split on spaces which are not inside matching braces", "body": "<p>In Perl (v5.30), I need to split strings on a whitespace, which is not inside matching braces. For example:</p>\n\n<pre><code>\"A {B C} D\"   -&gt; A|{B C}|D\n\"A{B C}D\"     -&gt; A{B C}D\n\"A{ B }C\"     -&gt; A{ B }C\n\"AB {C D} EF\" -&gt; AB|{C D}|EF\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["perl", "smtp", "ssmtp", "smtps"], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 2, "last_activity_date": 1567877220, "creation_date": 1567877220, "answer_id": 57835968, "question_id": 57835799, "link": "https://stackoverflow.com/questions/57835799/sendmail-use-localhost-localdomain/57835968#57835968", "title": "Sendmail use localhost.localdomain", "body": "<blockquote>\n<pre><code>Net::SMTPS=GLOB(0x2903e48)&gt;&gt;&gt; EHLO localhost.localdomain\n</code></pre>\n</blockquote>\n\n<p>From <a href=\"https://metacpan.org/pod/Email::Sender::Transport::SMTPS#ATTRIBUTES\" rel=\"nofollow noreferrer\">the documentation of Email::Sender::Transport::SMTPS</a>:</p>\n\n<blockquote>\n  <p>ATTRIBUTES<br>\n  The following attributes may be passed to the constructor:<br>\n  ...<br>\n  <strong>helo: what to say when saying HELO; no default</strong></p>\n</blockquote>\n\n<p>If nothing is given in <code>helo</code> the default from the underlying packet (Net::SMTPS) is used, which is <code>localhost.localdomain</code>. To use something different just do </p>\n\n<pre><code>my $transport = Email::Sender::Transport::SMTPS-&gt;new({\n    ...,\n    helo =&gt; 'whatever.you.want.to.use.instead.of.localhost.localdomain'\n});\n</code></pre>\n"}], "owner": {"reputation": 37436, "user_id": 1215106, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/615ff12525dbd5868b7c78d9754aed72?s=128&d=identicon&r=PG", "display_name": "\u2126mega", "link": "https://stackoverflow.com/users/1215106/%e2%84%a6mega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 57835968, "answer_count": 1, "score": 1, "last_activity_date": 1567921754, "creation_date": 1567875784, "last_edit_date": 1567921754, "question_id": 57835799, "link": "https://stackoverflow.com/questions/57835799/sendmail-use-localhost-localdomain", "title": "Sendmail use localhost.localdomain", "body": "<p>Sendmail with Perl uses <code>localhost.localdomain</code> instead of a fully qualified domain name (FQDN). Sendmail and server configuration is correct, hostname is setup with FQDN.</p>\n\n<p>My script contains the following lines:</p>\n\n<pre><code>use MIME::Lite;\nuse Email::Sender::Simple qw /sendmail/;\nuse Email::Sender::Transport::SMTPS;\n\n...\n\nmy $transport = Email::Sender::Transport::SMTPS-&gt;new({\n  host          =&gt;  $server,\n  ssl           =&gt; 'starttls',\n  port          =&gt;  $port,\n  sasl_username =&gt;  $user,\n  sasl_password =&gt;  $password,\n  debug         =&gt;  1,\n});\n\nsendmail($msg-&gt;as_string, { transport =&gt; $transport });\n</code></pre>\n\n<p>Mail is sent successfully, however <code>sendmail</code> use <code>localhost.localdomain</code> instead of FQDN with <code>EHLO</code>. Debug information shows:</p>\n\n<pre><code>Net::SMTPS&gt;&gt;&gt; Net::SMTPS(0.09)\nNet::SMTPS&gt;&gt;&gt;   IO::Socket::IP(0.39)\nNet::SMTPS&gt;&gt;&gt;     IO::Socket(1.40)\nNet::SMTPS&gt;&gt;&gt;       IO::Handle(1.40)\nNet::SMTPS&gt;&gt;&gt;         Exporter(5.73)\nNet::SMTPS&gt;&gt;&gt;   Net::SMTP(3.11)\nNet::SMTPS&gt;&gt;&gt;     Net::Cmd(3.11)\nNet::SMTPS=GLOB(0x2903e48)&lt;&lt;&lt; 220 smtp.gmail.com ESMTP l186sm18879092ioa.54 - gsmtp\nNet::SMTPS=GLOB(0x2903e48)&gt;&gt;&gt; EHLO localhost.localdomain\nNet::SMTPS=GLOB(0x2903e48)&lt;&lt;&lt; 250-smtp.gmail.com at your service, [masked IP address]\nNet::SMTPS=GLOB(0x2903e48)&lt;&lt;&lt; 250-SIZE 35882577\nNet::SMTPS=GLOB(0x2903e48)&lt;&lt;&lt; 250-8BITMIME\nNet::SMTPS=GLOB(0x2903e48)&lt;&lt;&lt; 250-STARTTLS\nNet::SMTPS=GLOB(0x2903e48)&lt;&lt;&lt; 250-ENHANCEDSTATUSCODES\nNet::SMTPS=GLOB(0x2903e48)&lt;&lt;&lt; 250-PIPELINING\nNet::SMTPS=GLOB(0x2903e48)&lt;&lt;&lt; 250-CHUNKING\nNet::SMTPS=GLOB(0x2903e48)&lt;&lt;&lt; 250 SMTPUTF8\nNet::SMTPS=GLOB(0x2903e48)&gt;&gt;&gt; STARTTLS\nNet::SMTPS=GLOB(0x2903e48)&lt;&lt;&lt; 220 2.0.0 Ready to start TLS\nNet::SMTPS=GLOB(0x2903e48)&gt;&gt;&gt; EHLO localhost.localdomain\nNet::SMTPS=GLOB(0x2903e48)&lt;&lt;&lt; 250-smtp.gmail.com at your service, [masked IP address]\nNet::SMTPS=GLOB(0x2903e48)&lt;&lt;&lt; 250-SIZE 35882577\nNet::SMTPS=GLOB(0x2903e48)&lt;&lt;&lt; 250-8BITMIME\nNet::SMTPS=GLOB(0x2903e48)&lt;&lt;&lt; 250-AUTH LOGIN PLAIN XOAUTH2 PLAIN-CLIENTTOKEN OAUTHBEARER XOAUTH\nNet::SMTPS=GLOB(0x2903e48)&lt;&lt;&lt; 250-ENHANCEDSTATUSCODES\nNet::SMTPS=GLOB(0x2903e48)&lt;&lt;&lt; 250-PIPELINING\nNet::SMTPS=GLOB(0x2903e48)&lt;&lt;&lt; 250-CHUNKING\nNet::SMTPS=GLOB(0x2903e48)&lt;&lt;&lt; 250 SMTPUTF8\n</code></pre>\n\n<p>When <code>sendmail</code> is used from the console directly (not using Perl), correct FQDN is used with <code>EHLO</code>.</p>\n"}, {"tags": ["perl", "awk", "sed"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "is_accepted": true, "score": 3, "last_activity_date": 1567949724, "last_edit_date": 1567949724, "creation_date": 1567849456, "answer_id": 57832503, "question_id": 57832184, "link": "https://stackoverflow.com/questions/57832184/matching-1st-and-2nd-columns-of-first-file-with-1st-column-of-second-file/57832503#57832503", "title": "Matching 1st and 2nd columns of first file with 1st column of second file", "body": "<p>Reading <code>file2</code> before <code>file1</code> is more practical.</p>\n\n<pre><code>$ awk 'NR==FNR {\n  a[$1]=($2 OFS $1 OFS $3 OFS $4)\n  next\n}\n($1 in a)&amp;&amp;($2 in a) {\n  print a[$1],a[$2],$3\n}' file2 file1\n3 b 33 44 5 d 12 21 0.1\n3 b 33 44 2 c 44 11 0.8\n2 c 44 11 3 b 33 44 0.7\n2 c 44 11 5 d 12 21 0.9\n5 d 12 21 2 c 44 11 0.3\n</code></pre>\n"}], "owner": {"reputation": 1200, "user_id": 11742141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/229fb31ba10e8dc02b2acd2e3b41a918?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Saroch", "link": "https://stackoverflow.com/users/11742141/ravi-saroch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 2, "accepted_answer_id": 57832503, "answer_count": 1, "score": 1, "last_activity_date": 1567949724, "creation_date": 1567846555, "last_edit_date": 1567849726, "question_id": 57832184, "link": "https://stackoverflow.com/questions/57832184/matching-1st-and-2nd-columns-of-first-file-with-1st-column-of-second-file", "title": "Matching 1st and 2nd columns of first file with 1st column of second file", "body": "<p>Want to compare the first and second column of first file with the 1st column of second file. </p>\n\n<p>I do the following:</p>\n\n<pre><code>awk 'FNR==NR{a[$1]=$2;next} ($1 in a) {print $2,$1,$3,$4}' file 1 file 2 \n</code></pre>\n\n<p>Result of my Script is</p>\n\n<pre><code>3 b 33 44\n2 c 44 11\n5 d 12 21\n</code></pre>\n\n<p>I got the result for first column only and it does not print the repeated value. I want my output with repeated value also.</p>\n\n<p>File1</p>\n\n<pre><code>a c 0.1\na b 0.4\nb d 0.1\nb a 0.8\nb c 0.8\nc b 0.7\nc a 0.6\nc d 0.9\nd c 0.3 \n</code></pre>\n\n<p>File2</p>\n\n<pre><code>b 3 33 44\nc 2 44 11\nd 5 12 21 \n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>3 b 33 44  5  d 12 21  0.1\n3 b 33 44  2  c 44 11  0.8\n2 c 44 11  3  b 33 44  0.7\n2 c 44 11  5  d 12 21  0.9\n5 d 12 21  2  c 44 11  0.3\n</code></pre>\n"}, {"tags": ["regex", "shell", "perl", "grep", "gnu-make"], "comments": [{"owner": {"reputation": 14334, "user_id": 1380680, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/TRgwX.png?s=128&g=1", "display_name": "Reinier Torenbeek", "link": "https://stackoverflow.com/users/1380680/reinier-torenbeek"}, "edited": false, "score": 0, "creation_date": 1567829597, "post_id": 57830570, "comment_id": 102090883, "body": "I am not sure whether I fully understand what you are trying to do. But the contents of your <code>.env</code> file look like they could be included into you makefile directly, right? See <a href=\"https://www.gnu.org/software/make/manual/html_node/Include.html\" rel=\"nofollow noreferrer\">3.3 Including Other Makefiles</a>."}, {"owner": {"reputation": 558, "user_id": 6350909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YP243.jpg?s=128&g=1", "display_name": "twgardner2", "link": "https://stackoverflow.com/users/6350909/twgardner2"}, "reply_to_user": {"reputation": 14334, "user_id": 1380680, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/TRgwX.png?s=128&g=1", "display_name": "Reinier Torenbeek", "link": "https://stackoverflow.com/users/1380680/reinier-torenbeek"}, "edited": false, "score": 0, "creation_date": 1567831257, "post_id": 57830570, "comment_id": 102091057, "body": "@ReinierTorenbeek - that seems to work. I had read about including other Makefiles, but didn&#39;t think that was applicable because I didn&#39;t consider my .env file a Makefile, but I guess it qualifies?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1567831853, "post_id": 57830570, "comment_id": 102091142, "body": "Thanks for such a thorough statement! I don&#39;t quite get it all though ... except that the question itself seems to involve that one string.  Please let me know if I actually oversimplified the matter in my answer"}, {"owner": {"reputation": 558, "user_id": 6350909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YP243.jpg?s=128&g=1", "display_name": "twgardner2", "link": "https://stackoverflow.com/users/6350909/twgardner2"}, "edited": false, "score": 0, "creation_date": 1567831976, "post_id": 57830570, "comment_id": 102091168, "body": "My first three bullet points are all I\u2019m trying to do: expose the .env key-value pairs to make, parse them into variables, then use them to build/deploy. Your answer looks like it fixes my Regex, although I think Reinier Torenbeek\u2019s comment/answer is exactly what I\u2019m looking for. I can test it out this weekend. Thanks to both of you!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1567833617, "post_id": 57830570, "comment_id": 102091382, "body": "OK, that clarifies it. Yes, you can directly pull definitions from the shown <code>.env</code> file.  Added to answer"}, {"owner": {"reputation": 14334, "user_id": 1380680, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/TRgwX.png?s=128&g=1", "display_name": "Reinier Torenbeek", "link": "https://stackoverflow.com/users/1380680/reinier-torenbeek"}, "edited": false, "score": 0, "creation_date": 1567833998, "post_id": 57830570, "comment_id": 102091437, "body": "@twgardner2 : Yes, the format that you used for <code>.env</code> qualifies as valid <code>makefile</code> syntax. I converted my comment into an answer. Good luck!"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1567834501, "post_id": 57830737, "comment_id": 102091501, "body": "I agree that <code>include .env</code> or equivalent looks like the &#39;obvious&#39; way to solve the problem."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1567928941, "post_id": 57830737, "comment_id": 102108209, "body": "@JonathanLeffler Thank you for saying that -- the overall purpose escaped me at first, in spite of the detailed statement in the thorough and carefully written question."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1574457054, "last_edit_date": 1574457054, "creation_date": 1567831294, "answer_id": 57830737, "question_id": 57830570, "link": "https://stackoverflow.com/questions/57830570/makefile-variable-replace-whitespace-in-variable/57830737#57830737", "title": "Makefile Variable - Replace Whitespace in Variable", "body": "<p>I don't fully get what is going on but I take it that you want to extract values from a string such as</p>\n\n<pre><code>SSH_CREDENTIALS=path/to/my/key ANOTHER_VAR=somethingelse YET_ANOTHER_VAR=yetanothersomething\n</code></pre>\n\n<p>That is, the path for <code>SSH_CREDENTIALS</code>.</p>\n\n<p>If that's indeed the main objective, you're missing it by very little:</p>\n\n<ul>\n<li><p>That <code>.*</code> in the regex is <em>greedy</em> as it matches <em>as much as it can</em> so to still satisfy the regex.  Sicne it is followed by a lookahead for whitespace it will match up to <em>the very last</em> whitespace in the string.  Instead, you want to restrict it with <code>?</code>, so to use <code>.*?</code> which matches up to the <em>first</em> of the following pattern (space here)</p>\n\n<pre><code>grep -o -P '(?&lt;=SSH_CREDENTIALS=).*?(?=[[:space:]])'\n</code></pre>\n\n<p>This works correctly in my test. Note that you can simply match non-space characters</p>\n\n<pre><code>grep -o -P '(?&lt;=SSH_CREDENTIALS=)\\S+'\n</code></pre></li>\n<li><p>I see a commented-out <code>sed</code> snippet and Perl is tagged. Regex with these tools is simpler with no need for lookaheads.  So pipe into</p>\n\n<pre><code>perl -wne'/SSH_CREDENTIALS=(.*?)\\s/; print $1'\n</code></pre>\n\n<p>or, again, can match all consecutive non-space characters</p>\n\n<pre><code>perl -wne'/SSH_CREDENTIALS=(\\S+)/; print $1'\n</code></pre>\n\n<p>I assumed that you don't need a newline. You can also use <code>[[:space:]]</code>.</p></li>\n</ul>\n\n<p>See your favorite regex resource. In Perl that'd be tutorial <a href=\"https://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a> and reference <a href=\"https://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a>.</p>\n\n<hr>\n\n<p>With the clarification it appears that the whole objective is to pull variable definitions from another file into the Makefile. If the format of the file is exactly as shown, it can be directly <a href=\"https://www.gnu.org/software/make/manual/html_node/Include.html\" rel=\"nofollow noreferrer\">included</a> and thus provide those variable definitions. A simple example</p>\n\n<p>A file <strong>.env</strong></p>\n\n<pre>\nSSH_CREDENTIALS=path/to/my/key\nANOTHER_VAR=somethingelse\n</pre>\n\n<p>A <strong>Makefile</strong></p>\n\n<pre><code>INCL = /usr/include/boost\n\ninclude .env\n\nfake: \n    @echo \"a variable: $(INCL)\"\n    @echo \"a variable from the included file:   $(SSH_CREDENTIALS)\"\n    @echo \"another variable from included file: $(ANOTHER_VAR)\"\n</code></pre>\n\n<p>With <code>make</code> we get the expected printout.  </p>\n\n<p>Keep in mind that <code>include</code> works with <em>a makefile</em>, so the file to include must satisfy that format.</p>\n"}, {"tags": [], "owner": {"reputation": 14334, "user_id": 1380680, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/TRgwX.png?s=128&g=1", "display_name": "Reinier Torenbeek", "link": "https://stackoverflow.com/users/1380680/reinier-torenbeek"}, "is_accepted": false, "score": 2, "last_activity_date": 1567833887, "creation_date": 1567833887, "answer_id": 57830931, "question_id": 57830570, "link": "https://stackoverflow.com/questions/57830570/makefile-variable-replace-whitespace-in-variable/57830931#57830931", "title": "Makefile Variable - Replace Whitespace in Variable", "body": "<p>The contents of your <code>.env</code> file look like they could be included into you <code>makefile</code> directly, like this:</p>\n\n<pre><code>include .env\n</code></pre>\n\n<p>See <a href=\"https://www.gnu.org/software/make/manual/html_node/Include.html\" rel=\"nofollow noreferrer\">3.3 Including Other Makefiles</a></p>\n"}], "owner": {"reputation": 558, "user_id": 6350909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YP243.jpg?s=128&g=1", "display_name": "twgardner2", "link": "https://stackoverflow.com/users/6350909/twgardner2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 953, "favorite_count": 0, "accepted_answer_id": 57830737, "answer_count": 2, "score": 2, "last_activity_date": 1574457054, "creation_date": 1567828910, "question_id": 57830570, "link": "https://stackoverflow.com/questions/57830570/makefile-variable-replace-whitespace-in-variable", "title": "Makefile Variable - Replace Whitespace in Variable", "body": "<p>I am trying to:</p>\n\n<ol>\n<li>Export the path to a <code>.env</code> file so that it is accessible to <code>make</code></li>\n<li>In my <code>Makefile</code>, read the contents of the <code>.env</code> into a variable</li>\n<li>Parse the contents out into variables that I will use to build and deploy my application</li>\n</ol>\n\n<p>The problem is:</p>\n\n<ul>\n<li>I can't seem to find a regex to match on the spaces that <code>make</code> replaces my newlines with in order to parse out my variables. My regex is getting the right starting point, but includes the remainder of the <code>.env</code> file, rather than stopping at the whitespace after the value I want to extract.</li>\n</ul>\n\n<p>I understand that when I <code>cat</code> my file into a variable, <code>make</code> strips newline characters. From <a href=\"https://www.gnu.org/software/make/manual/make.html#Shell-Function\" rel=\"nofollow noreferrer\">GNU Make docs</a>:</p>\n\n<blockquote>\n  <p>The shell function performs the same function that backquotes (\u2018`\u2019)\n  perform in most shells: it does command expansion. This means that it\n  takes as an argument a shell command and evaluates to the output of\n  the command. The only processing make does on the result is to convert\n  each newline (or carriage-return / newline pair) to a single space. If\n  there is a trailing (carriage-return and) newline it will simply be\n  removed.</p>\n</blockquote>\n\n<p>However, I can't get any regex to either recognize these spaces in a lookahead to extract my variables or replace these spaces with another character to aid in the extraction.</p>\n\n<p>Example:</p>\n\n<p><code>.env</code>:</p>\n\n<pre><code>SSH_CREDENTIALS=path/to/my/key\nANOTHER_VAR=somethingelse\nYET_ANOTHER_VAR=yetanothersomething\n</code></pre>\n\n<p><code>Makefile</code>:</p>\n\n<pre><code>ENV_FILE_CONTENTS := $(shell cat $(ENV_FILE_PATH) )  # | sed -e 's/[[:space:]]/x/g'\n$(info $(ENV_FILE_CONTENTS))\n\nSSH_CREDENTIALS := $(shell echo $(ENV_FILE_CONTENTS) | grep -o -P '(?&lt;=SSH_CREDENTIALS=).*(?=[[:space:]])' )\n$(info $(SSH_CREDENTIALS))\n\nSSH_CREDENTIALS := $(shell echo $(ENV_FILE_CONTENTS) | grep -o -P '(?&lt;=SSH_CREDENTIALS=).*(?=\\s)' )\n$(info $(SSH_CREDENTIALS))\n\n[recipes below]\n</code></pre>\n\n<p>Command and result:</p>\n\n<pre><code>$ export ENV_FILE_PATH=./env/.env; make print_env_var\nSSH_CREDENTIALS=path/to/my/key ANOTHER_VAR=somethingelse YET_ANOTHER_VAR=yetanothersomething # My .env file without the newlines\npath/to/my/key ANOTHER_VAR=somethingelse # Attempt to extract the path to the SSH credentials fails (doesn't recognize whitespace lookahead)\npath/to/my/key ANOTHER_VAR=somethingelse # Samething when trying \\s instead of [[:space:]]\n</code></pre>\n\n<p>I've tried many other regexes and commands (<code>sed</code> to replace space with a character I can then target in the lookahead, etc.), with no luck. </p>\n\n<p>What am I doing wrong? Thank you.</p>\n"}, {"tags": ["perl", "octal", "leading-zero", "radix"], "comments": [{"owner": {"reputation": 518, "user_id": 3617046, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/afad7c3481df3dcbbcd2b4366782e056?s=128&d=identicon&r=PG&f=1", "display_name": "Bulrush", "link": "https://stackoverflow.com/users/3617046/bulrush"}, "edited": false, "score": 0, "creation_date": 1568046511, "post_id": 57825865, "comment_id": 102141935, "body": "<b>Helpful tip</b>: To drop leading zeroes from a string which is otherwise a valid number do this: <code>$s=$s+0; # Just add zero to it</code> But first check your string is a valid number."}], "answers": [{"comments": [{"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1567789033, "post_id": 57825914, "comment_id": 102082076, "body": "Solution2 is what I was looking for.  In my actual program, I have to use the keys themselves as numbers in other arithmetic, so it&#39;s the <code>0+</code> numification that I was searching for.   I was actually using <code>sprintf &quot;%d&quot;,$1</code> where you have suggested <code>0+$1</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 3, "creation_date": 1567789680, "post_id": 57825914, "comment_id": 102082323, "body": "In Perl, scalars are coerced into numbers where a number is expected (addition, multiplication, <code>sprintf %d</code>, etc), and coerced into strings when a string is expected (<code>print</code>, hash key, etc).  <code>sprintf %d</code> is fine, but <code>0+</code> is cheaper and a bit more self-documenting (because noone would use <code>0+</code> for anything else)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1567790714, "post_id": 57825914, "comment_id": 102082731, "body": "@ysth, I do use <code>END { }</code> personally. Saving 4 chars is no reason to use <code>}{</code>. The <code>}{</code> is from the OP&#39;s code. But you know what, I already added a <code>sort</code>, so I&#39;ll have the program use <code>END { }</code>."}, {"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1567795541, "post_id": 57825914, "comment_id": 102084510, "body": "In the real program, I have <code>sub n {$a &lt;=&gt; $b};</code> once and <code>sort n keys %l... </code> wherever I need a numerical sort.  Numbers with different numbers of characters don&#39;t sort well.  But that and the eskimo kiss operator weren&#39;t the point."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567795994, "post_id": 57825914, "comment_id": 102084663, "body": "<code>sort</code>&#39;&#39;s default sort function works fine where I used it because the numbers were padded to the same length using zeroes"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1567790947, "last_edit_date": 1567790947, "creation_date": 1567788544, "answer_id": 57825914, "question_id": 57825865, "link": "https://stackoverflow.com/questions/57825865/best-way-to-ensure-decimal-interpretation-of-string-with-leading-zeros/57825914#57825914", "title": "Best way to ensure decimal interpretation of string with leading zeros?", "body": "<p>The problem with the original code is that hash keys are strings, and <code>011</code> and <code>11</code> are different strings.</p>\n\n<hr>\n\n<p>Solution 1: Use the correct string.</p>\n\n<pre><code>perl -ne'\n   /C(\\d\\d\\d)=(.*)/; $l{$1}=$2;\n   END {\n      $l{\"013\"}=($l{\"015\"}-$l{\"011\"})/2+$l{\"011\"};\n      printf \"C%s=%f\\n\",$_,$l{$_} for sort keys %l;\n   }\n'\n</code></pre>\n\n<p>It's simpler to include the <code>C</code>.</p>\n\n<pre><code>perl -ne'\n   /(C\\d\\d\\d)=(.*)/; $l{$1}=$2;\n   END {\n      $l{C013}=($l{C015}-$l{C011})/2+$l{C011};\n      printf \"%s=%f\\n\",$_,$l{$_} for sort keys %l;'\n   }\n'\n</code></pre>\n\n<hr>\n\n<p>Solution 2: Convert the captured strings to match those produced by the code.</p>\n\n<p>Replace <code>$l{$1}=$2</code> with <code>$l{0+$1}=$2</code>.</p>\n\n<p>This will numify <code>011</code> to eleven, then stringify that to <code>11</code>.</p>\n\n<p>This supports any number of leading zeros.</p>\n"}], "owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 57825914, "answer_count": 1, "score": 1, "last_activity_date": 1568605995, "creation_date": 1567788306, "last_edit_date": 1568605995, "question_id": 57825865, "link": "https://stackoverflow.com/questions/57825865/best-way-to-ensure-decimal-interpretation-of-string-with-leading-zeros", "title": "Best way to ensure decimal interpretation of string with leading zeros?", "body": "<p>I have some simple data with leading zeros, and I want to interpolate some additional values.  Something like this:</p>\n\n<p><code>$ printf \"C011=4\\nC015=8\\n\" | perl -ne '/C(\\d\\d\\d)=(.*)/; $l{$1}=$2 }{ $l{13}=($l{15}-$l{11})/2+$l{11}; printf \"C%03d=%f\\n\",$_,$l{$_} for keys %l;'</code></p>\n\n<pre><code>C011=4.000000\nC013=0.000000\nC015=8.000000\n</code></pre>\n\n<p>Okay.  Perl's not matching <code>11</code> to <code>011</code></p>\n\n<p>In the simple case above, you might think, hey, whatever, let's use the leading zeros in the hash keys for the arithmetic:</p>\n\n<p><code>$ printf \"C011=4\\nC015=8\\n\" | perl -ne '/C(\\d\\d\\d)=(.*)/; $l{$1}=$2 }{ $l{013}=($l{015}-$l{011})/2+$l{011}; printf \"C%03d=%f\\n\",$_,$l{$_} for keys %l;'</code></p>\n\n<pre><code>C011=4.000000\nC011=0.000000\nC015=8.000000\n</code></pre>\n\n<p>Here I apparently have as keys the string 011 which <code>printf</code> turns into 11, and the octal number 013, which printf turns into 11.  And the lookup of the <code>011</code> and <code>015</code> values <em>still</em> failed.</p>\n\n<p>What are the options in perl for avoiding the behavior of numbers with leading zeros (and no 9's) being interpreted as octal?  I want the hash keys to have their appropriate decimal value.</p>\n\n<p>I have a workaround.  I just want to see if it's the most succinct solution.  Something like a global don't-do-this, I'm never using octals.</p>\n\n<p>Expected output:</p>\n\n<pre><code>C011=4.000000\nC013=6.000000\nC015=8.000000\n</code></pre>\n"}, {"tags": ["sql", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1567793750, "post_id": 57825407, "comment_id": 102083922, "body": "Doesn&#39;t seem like the module supports functions. Maybe write your own postprosessing method or consider asking for a new feature <a href=\"https://github.com/tokuhirom/SQL-Maker/issues\" rel=\"nofollow noreferrer\">at the issue tracker</a>"}, {"owner": {"reputation": 19222, "user_id": 789186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d232cc5abe46092d3972d4f85833e42?s=128&d=identicon&r=PG", "display_name": "user4035", "link": "https://stackoverflow.com/users/789186/user4035"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1567799629, "post_id": 57825407, "comment_id": 102085803, "body": "@H&#229;konH&#230;gland I added the issue to github. But as it seems to me, the module is abandoned as the last issues are hanging from 2012 and a pull request from 2013. Maybe, doing my own fork and writing the feature is an option?"}], "answers": [{"comments": [{"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1567939780, "post_id": 57841249, "comment_id": 102110200, "body": "or just write your own plain old SQL, since you already know the desired statement"}], "tags": [], "owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "is_accepted": false, "score": 1, "last_activity_date": 1567939761, "creation_date": 1567939761, "answer_id": 57841249, "question_id": 57825407, "link": "https://stackoverflow.com/questions/57825407/sqlmaker-how-to-add-functions-to-fields/57841249#57841249", "title": "SQL::Maker how to add functions to fields", "body": "<p>the following may or may not work, <code>quote_char</code> sometimes can be omitted, but the risks being introduced are up to you to evaluate:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>our $builder = SQL::Maker-&gt;new(\n    driver =&gt; 'MySQL',\n    quote_char =&gt; '',\n);\n</code></pre>\n\n<p>and later</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my @fields = (\n    ['ABS(`field`)'  =&gt; 'VAT'],\n);\n</code></pre>\n\n<p>this gives:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT ABS(`field`) AS VAT\nFROM test\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19222, "user_id": 789186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d232cc5abe46092d3972d4f85833e42?s=128&d=identicon&r=PG", "display_name": "user4035", "link": "https://stackoverflow.com/users/789186/user4035"}, "is_accepted": true, "score": 1, "last_activity_date": 1570465585, "creation_date": 1570465585, "answer_id": 58273578, "question_id": 57825407, "link": "https://stackoverflow.com/questions/57825407/sqlmaker-how-to-add-functions-to-fields/58273578#58273578", "title": "SQL::Maker how to add functions to fields", "body": "<p>In order to get the verbatim code, we need to quote the field name:</p>\n\n<pre><code>my @fields = (\n    [\\'ABS(field)'  =&gt; 'VAT'],\n);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>SELECT ABS(field) AS `VAT`\nFROM `test`\n</code></pre>\n"}], "owner": {"reputation": 19222, "user_id": 789186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d232cc5abe46092d3972d4f85833e42?s=128&d=identicon&r=PG", "display_name": "user4035", "link": "https://stackoverflow.com/users/789186/user4035"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 58273578, "answer_count": 2, "score": 1, "last_activity_date": 1570465585, "creation_date": 1567786054, "question_id": 57825407, "link": "https://stackoverflow.com/questions/57825407/sqlmaker-how-to-add-functions-to-fields", "title": "SQL::Maker how to add functions to fields", "body": "<p>MWE:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse SQL::Maker;\n\nour $builder = SQL::Maker-&gt;new(\n    driver =&gt; 'mysql',\n);\n\nmy @fields = (\n    ['ABS(field)'  =&gt; 'VAT'],\n);\n\nmy ($sql, @bind) = $builder-&gt;select(\"test\", \\@fields);\nprint $sql;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>SELECT `ABS(field)` AS `VAT`\nFROM `test`\n</code></pre>\n\n<p>How can I get:</p>\n\n<pre><code>SELECT ABS(`field`) AS `VAT`\nFROM `test`\n</code></pre>\n\n<p>?</p>\n"}, {"tags": ["perl", "ubuntu"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1567779554, "post_id": 57823793, "comment_id": 102077681, "body": "How do you run the script? What are all the permissions of the file?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1567779716, "post_id": 57823793, "comment_id": 102077766, "body": "What do you see if you type <code>ls -l .&#47;script.pl</code>?"}, {"owner": {"reputation": 43, "user_id": 12030930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66e8ff440432166c6ae7a232d1c54b50?s=128&d=identicon&r=PG&f=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/12030930/leon"}, "edited": false, "score": 0, "creation_date": 1567783913, "post_id": 57823793, "comment_id": 102079886, "body": "I get: -r--r--r-- 1 [username] [username] 12466"}, {"owner": {"reputation": 518, "user_id": 3617046, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/afad7c3481df3dcbbcd2b4366782e056?s=128&d=identicon&r=PG&f=1", "display_name": "Bulrush", "link": "https://stackoverflow.com/users/3617046/bulrush"}, "edited": false, "score": 0, "creation_date": 1568046673, "post_id": 57823793, "comment_id": 102142011, "body": "You must also give permissions to the directory that contains the script: <code>chmod a+rwx dirname</code>. I&#39;ve had this problem a few times myself on Ubuntu 14.04. This is why I no longer make dirs on a Ubuntu box via the Windows mapped drive and Windows File Explorer, it doesn&#39;t get the permissions right. I always make new dirs in Ubuntu via the command line."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 12030930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66e8ff440432166c6ae7a232d1c54b50?s=128&d=identicon&r=PG&f=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/12030930/leon"}, "edited": false, "score": 1, "creation_date": 1567784221, "post_id": 57824339, "comment_id": 102080034, "body": "I tried that, and now I get the message: -bash: ./script.pl: Permission denied"}, {"owner": {"reputation": 116, "user_id": 6172366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd2fb48cb08930b9ae031b3a4e487bd6?s=128&d=identicon&r=PG&f=1", "display_name": "shau.malh", "link": "https://stackoverflow.com/users/6172366/shau-malh"}, "reply_to_user": {"reputation": 43, "user_id": 12030930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66e8ff440432166c6ae7a232d1c54b50?s=128&d=identicon&r=PG&f=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/12030930/leon"}, "edited": false, "score": 1, "creation_date": 1567784470, "post_id": 57824339, "comment_id": 102080152, "body": "@Leon I&#39;ve updated the command. Can you please try with the updated one?"}, {"owner": {"reputation": 43, "user_id": 12030930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66e8ff440432166c6ae7a232d1c54b50?s=128&d=identicon&r=PG&f=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/12030930/leon"}, "edited": false, "score": 0, "creation_date": 1567784531, "post_id": 57824339, "comment_id": 102080177, "body": "Hang on, I did sudo chmod a+x before the script again and now it works OK - so I think your suggestion must have fixed my problem! Thanks!."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567788286, "post_id": 57824339, "comment_id": 102081757, "body": "Ah yes. The app doesn&#39;t support post deletion (regardless of reputation)."}], "tags": [], "owner": {"reputation": 116, "user_id": 6172366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd2fb48cb08930b9ae031b3a4e487bd6?s=128&d=identicon&r=PG&f=1", "display_name": "shau.malh", "link": "https://stackoverflow.com/users/6172366/shau-malh"}, "is_accepted": true, "score": 2, "last_activity_date": 1567784343, "last_edit_date": 1567784343, "creation_date": 1567781653, "answer_id": 57824339, "question_id": 57823793, "link": "https://stackoverflow.com/questions/57823793/cant-open-perl-script-script-pl-permission-denied/57824339#57824339", "title": "Can&#39;t open perl script &quot;./script.pl&quot;: Permission denied", "body": "<p>The error message indicates that <code>perl</code> is unable to read the contents of the file <code>script.pl</code>.</p>\n\n<p>Since it is not clear who the script's owner is, you may give read permission to everyone using the following, <code>sudo chmod a=rx path/to/script.pl</code>.</p>\n"}], "owner": {"reputation": 43, "user_id": 12030930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66e8ff440432166c6ae7a232d1c54b50?s=128&d=identicon&r=PG&f=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/12030930/leon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1171, "favorite_count": 0, "accepted_answer_id": 57824339, "answer_count": 1, "score": 4, "last_activity_date": 1567784405, "creation_date": 1567779464, "question_id": 57823793, "link": "https://stackoverflow.com/questions/57823793/cant-open-perl-script-script-pl-permission-denied", "title": "Can&#39;t open perl script &quot;./script.pl&quot;: Permission denied", "body": "<p>I get the error when trying to run a script. The script previously worked, but I edited one part of the code in Notepad++ (I change a \">\" to a \"&lt;\" ).</p>\n\n<p>Any help would be appreciated! I was wondering whether it was a formatting issue after editing and saving in Notepad++ or if somehow my edit breaks the script.</p>\n\n<p>(I'm using Ubuntu for Windows)</p>\n\n<p>I've tried using sudo &amp; sudo chmod a+x before the script, but this doesn't seem to help.</p>\n"}, {"tags": ["javascript", "jquery", "ajax", "perl"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1567777901, "post_id": 57823315, "comment_id": 102076813, "body": "<a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#CGI.pm-HAS-BEEN-REMOVED-FROM-THE-PERL-CORE\" rel=\"nofollow noreferrer\">You should avoid the CGI module</a>"}, {"owner": {"reputation": 125, "user_id": 11639109, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_A87s7O8XQQ/AAAAAAAAAAI/AAAAAAAAAAA/nlD-KX5oxew/photo.jpg?sz=128", "display_name": "Bart", "link": "https://stackoverflow.com/users/11639109/bart"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1567777966, "post_id": 57823315, "comment_id": 102076839, "body": "@Quentin, I&#39;m aware of that, but the perl version I have available will not be upgraded that fast"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1567777973, "post_id": 57823315, "comment_id": 102076848, "body": "Why are you encoding the result as JSON? It is <i>already</i> JSON."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 2, "creation_date": 1567777997, "post_id": 57823315, "comment_id": 102076859, "body": "Using an old version of Perl is not a good reason to use out of date programming techniques!"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1567778032, "post_id": 57823315, "comment_id": 102076877, "body": "&quot;it seems the receiver.pl doesn&#39;t seem to get the data.&quot; \u2014  How can you tell? What do the logs say? Does the file get written? Does it have <i>anything</i> in it?"}, {"owner": {"reputation": 125, "user_id": 11639109, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_A87s7O8XQQ/AAAAAAAAAAI/AAAAAAAAAAA/nlD-KX5oxew/photo.jpg?sz=128", "display_name": "Bart", "link": "https://stackoverflow.com/users/11639109/bart"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1567778080, "post_id": 57823315, "comment_id": 102076901, "body": "@Quentin, problem is logs do not show anything, file is not created, as if the script was not invoked, though access log shows successful POST towards receiver.pl"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 1, "creation_date": 1567778135, "post_id": 57823315, "comment_id": 102076928, "body": "I&#39;d start by adding more logs (adding some <code>warn $string</code> for example) and simplifying the script (e.g. by removing all use the JSON module for it)"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1567782350, "post_id": 57823315, "comment_id": 102079128, "body": "you don&#39;t specify the full path for the output file, so how do you know where it will end up?"}, {"owner": {"reputation": 125, "user_id": 11639109, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_A87s7O8XQQ/AAAAAAAAAAI/AAAAAAAAAAA/nlD-KX5oxew/photo.jpg?sz=128", "display_name": "Bart", "link": "https://stackoverflow.com/users/11639109/bart"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1567782907, "post_id": 57823315, "comment_id": 102079427, "body": "@ChrisTurner yes, that is on purpose for sake of this question"}, {"owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 0, "creation_date": 1567812504, "post_id": 57823315, "comment_id": 102088940, "body": "Doublecheck the URL"}, {"owner": {"reputation": 125, "user_id": 11639109, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_A87s7O8XQQ/AAAAAAAAAAI/AAAAAAAAAAA/nlD-KX5oxew/photo.jpg?sz=128", "display_name": "Bart", "link": "https://stackoverflow.com/users/11639109/bart"}, "reply_to_user": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 0, "creation_date": 1567837953, "post_id": 57823315, "comment_id": 102091983, "body": "@Holli URL is fine as it&#39;s logged in apache access log"}], "answers": [{"tags": [], "owner": {"reputation": 125, "user_id": 11639109, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_A87s7O8XQQ/AAAAAAAAAAI/AAAAAAAAAAA/nlD-KX5oxew/photo.jpg?sz=128", "display_name": "Bart", "link": "https://stackoverflow.com/users/11639109/bart"}, "is_accepted": true, "score": 0, "last_activity_date": 1568025195, "creation_date": 1568025195, "answer_id": 57852261, "question_id": 57823315, "link": "https://stackoverflow.com/questions/57823315/ajax-call-to-perl-script/57852261#57852261", "title": "Ajax call to perl script", "body": "<p>So, the problem in my case was Apache missing CGI execution handler... Had to add </p>\n\n<pre><code>&lt;Files ~ \"\\.(pl|cgi)$\"&gt;\n    SetHandler perl-script\n    PerlResponseHandler ModPerl::PerlRun\n    Options +ExecCGI\n    PerlSendHeader On\n&lt;/Files&gt;\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 11639109, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_A87s7O8XQQ/AAAAAAAAAAI/AAAAAAAAAAA/nlD-KX5oxew/photo.jpg?sz=128", "display_name": "Bart", "link": "https://stackoverflow.com/users/11639109/bart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 57852261, "answer_count": 1, "score": 1, "last_activity_date": 1568025195, "creation_date": 1567777727, "last_edit_date": 1592644375, "question_id": 57823315, "link": "https://stackoverflow.com/questions/57823315/ajax-call-to-perl-script", "title": "Ajax call to perl script", "body": "<p>I am using perl Mason for web development.</p>\n<p>I have an application, that takes data from user uploaded file, and puts it into a html table.</p>\n<p>Then, I want to digest the data, and after user validation, save it to csv file on the server.</p>\n<p>I tried AJAX call from javascript grabbing data from the table to perl receiver, but that doesn't seem to work... (error log does not show anything, file is not created, as if the script was not invoked, though access log shows successful POST towards <strong><code>receiver.pl</code></strong>)</p>\n<p>My code is as follows:</p>\n<h3>HTML</h3>\n<p>The table contains a lot of rows, about 200, if that matters.</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div&gt;\n  &lt;button id=&quot;btnConvert&quot;&gt;Update Data&lt;/button&gt;\n&lt;/div&gt;\n&lt;table id=&quot;v12&quot;&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;ID&lt;/th&gt;\n      &lt;th&gt;Data&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n  &lt;tbody&gt;\n    &lt;tr&gt;\n      &lt;td&gt;1&lt;/td&gt;\n      &lt;td&gt;some data&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n      &lt;td&gt;2&lt;/td&gt;\n      &lt;td&gt;some data2&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n      &lt;td&gt;3&lt;/td&gt;\n      &lt;td&gt;some data3&lt;/td&gt;\n    &lt;/tr&gt;\n    [...]\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n<h3>JavaScript</h3>\n<pre class=\"lang-js prettyprint-override\"><code>$(document).ready(function() {\n  $('#btnConvert').click(function() {\n    var tableData = JSON.stringify(makeJsonFromTable('v12'));\n    $.ajax({\n      type: 'POST',\n      url: 'receiver.pl',\n      data: {\n        r: tableData\n      },\n      success: function(data, textStatus, jqXHR) {\n        alert('string saved to file');\n        console.log(tableData);\n      },\n      dataType: 'json'\n    });\n  });\n});\n</code></pre>\n<h3>Converting table to JSON</h3>\n<pre class=\"lang-js prettyprint-override\"><code>var makeJsonFromTable=function(a){\nvar b=$(&quot;#&quot;+a),c=$(b).find(&quot;thead&quot;),d=$(b).find(&quot;tbody&quot;),e=$(b).find(&quot;tbody&gt;tr&quot;).length,f=[],g=[];\n$.each($(c).find(&quot;tr&gt;th&quot;),function(a,b){f.push($(b).text())}),$.each($(d).find(&quot;tr&quot;),function(a,b){for(var c={},d=0;d&lt;f.length;d++)c[f[d]]=$(this).find(&quot;td&quot;).eq(d).text();g.push(c)});\nvar h={};return h.count=e,h.value=g,h\n};\n</code></pre>\n<h3>Perl</h3>\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse CGI qw(-debug);\nuse JSON;\nuse Data::Dumper;\nuse CGI::Carp 'fatalsToBrowser';\n\nmy $cgi = CGI-&gt;new;\nprint $cgi-&gt;header('application/json;charset=UTF-8');\nmy $string = $cgi-&gt;param('r');\nprint $string;\nopen (FILE, &quot;&gt;&quot;, &quot;text.txt&quot;) || die &quot;Could not open: $!&quot;;\nprint FILE $string;\nclose FILE;\n</code></pre>\n<p>Browser side, I can see the data is being passed in Params (seen in browser developer tools), but it seems the <strong><code>receiver.pl</code></strong> doesn't seem to get the data.</p>\n<p>What could the issue here be?</p>\n<h2>EDIT</h2>\n<p>When running <strong><code>receiver.pl</code></strong> from command line, the data is parsed:</p>\n<pre><code># QUERY_STRING=&quot;r={dasdsa}&quot; ./receiver.pl \nContent-Type: application/json;charset=UTF-8\n\n{dasdsa}\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 2, "creation_date": 1567770597, "post_id": 57821416, "comment_id": 102072939, "body": "If you want to add it to your answer, <a href=\"https://perldoc.perl.org/perlsyn.html#Foreach-Loops\" rel=\"nofollow noreferrer\">perlsyn</a> says &quot;The foreach loop iterates over a normal list value and sets the scalar variable VAR to be each element of the list in turn. If the variable is preceded with the keyword my, then it is lexically scoped, and is therefore visible only within the loop. Otherwise, the variable is implicitly local to the loop and regains its former value upon exiting the loop.&quot;"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1567770687, "post_id": 57821416, "comment_id": 102072984, "body": "@Dada: hm. Where this localization is handy?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1567772082, "post_id": 57821416, "comment_id": 102073683, "body": "@EugenKonkov: As the for loop aliases the elements it iterates over, keeping the last value might cause weird changes at a distance."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1567772249, "post_id": 57821416, "comment_id": 102073767, "body": "@Eugen Konkov, It would have been super useful before lexical vars were introduced. Now, we use <code>for my $x ()</code> instead."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1567772193, "last_edit_date": 1567772193, "creation_date": 1567770406, "answer_id": 57821416, "question_id": 57821354, "link": "https://stackoverflow.com/questions/57821354/why-value-is-destroyed/57821416#57821416", "title": "Why value is destroyed?", "body": "<p>The loop var is scoped to the loop.</p>\n\n<p>Use</p>\n\n<pre><code>my ($field) = grep { $user-&gt;$_ =~ /\\Q$search/ } qw( email phone name );\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use List::Util qw( first );\n\nmy $field = first { $user-&gt;$_ =~ /\\Q$search/ } qw( email phone name );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 2095288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwS1o.png?s=128&g=1", "display_name": "ExamplePerl", "link": "https://stackoverflow.com/users/2095288/exampleperl"}, "is_accepted": false, "score": 0, "last_activity_date": 1567775134, "creation_date": 1567775134, "answer_id": 57822625, "question_id": 57821354, "link": "https://stackoverflow.com/questions/57821354/why-value-is-destroyed/57822625#57822625", "title": "Why value is destroyed?", "body": "<p>You will get more detail understanding from below example.</p>\n\n<pre><code>  1 #!/usr/bin/perl\n  2\n  3 my $field;\n  4 my $user  = {\n  5     'email' =&gt; 'my@email.com'\n  6 };\n  7\n  8 foreach my $search ( \"email\" , \"phone\", \"name\" ) {\n  9     if ($user-&gt;{$search} ){\n 10         $field = $user-&gt;{$search};\n 11         last;\n 12     }\n 13 }\n 14 print \"\\n===field========$field====\\n\";\n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1567873692, "post_id": 57832522, "comment_id": 102099480, "body": "no, <code>$field</code> is in scope of file, but it is implicitly localized to the loop too. Like <code>local $field</code>. See @Dada comment above"}], "tags": [], "owner": {"reputation": 478, "user_id": 1338382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vs6If.jpg?s=128&g=1", "display_name": "rprakash", "link": "https://stackoverflow.com/users/1338382/rprakash"}, "is_accepted": false, "score": 1, "last_activity_date": 1567930853, "last_edit_date": 1567930853, "creation_date": 1567849577, "answer_id": 57832522, "question_id": 57821354, "link": "https://stackoverflow.com/questions/57821354/why-value-is-destroyed/57832522#57832522", "title": "Why value is destroyed?", "body": "<p>Your code is not working since the \"$field\" is in global scope it is implicitly localised in the for loop since the same variable is used there as well. If your requirement is just to print or get the matched value in a variable then your code should be similar to :</p>\n\n<pre><code>#This variable will have the field name\nmy $result;\n\nforeach my $field ( qw ' email phone name ' ) {\n    if ($user-&gt;{$field} =~ /$search/) {\n        $result = $field;\n        last;\n    }\n}\n\nprint $result;\n</code></pre>\n\n<p>or, grep can be used to filter values from an array. <a href=\"https://perlmaven.com/filtering-values-with-perl-grep\" rel=\"nofollow noreferrer\">Filtering values using Perl grep\n</a></p>\n\n<p>P.S. updated my answer after @Eugen's comment.</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 57821416, "answer_count": 3, "score": 3, "last_activity_date": 1567930853, "creation_date": 1567770143, "question_id": 57821354, "link": "https://stackoverflow.com/questions/57821354/why-value-is-destroyed", "title": "Why value is destroyed?", "body": "<p>I looking for field name where <code>search</code> text is found</p>\n\n<pre><code>my $field;\nfor $field ( qw' email phone name ' ) {\n    last   if $user-&gt;$field =~ /$search/;\n}\nprint $field; # undef\n</code></pre>\n\n<p>Here if <code>$user-&gt;email</code> matched then the <code>last</code> command is called.\nThus I expect <code>$field</code> should have <code>email</code> as value. But it is actually <code>undef</code></p>\n\n<p>Why value of <code>$field</code> variable after the loop is <code>undef</code>?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1567752615, "post_id": 57816962, "comment_id": 102064748, "body": "Is this literally the whole program?  It calls <code>write_mdin0()</code> before <code>$angle</code> is ever touched and in that function it attempts to interpolate that <code>$angle</code> (in here-doc, in <code>&lt;&lt;EOF</code>).  Which has not been defined yet (&quot;<i>initialized</i>&quot;) and thus the warning."}, {"owner": {"reputation": 25, "user_id": 8171849, "user_type": "registered", "profile_image": "https://graph.facebook.com/2269780149914388/picture?type=large", "display_name": "sacky0003", "link": "https://stackoverflow.com/users/8171849/sacky0003"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1567753184, "post_id": 57816962, "comment_id": 102064968, "body": "Can you edit my code? I will be highly grateful. I am a beginner in Perl."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 3, "creation_date": 1567753705, "post_id": 57816962, "comment_id": 102065206, "body": "Fixed indentation.  Notes: (1) <b>Always</b> start with<code>use strict;</code> (then you&#39;ll have to declare variables), and <code>use warnings;</code> (and not <code>-w</code>) (2) No need for <code>&amp;</code> in front of function calls and can be misleading (3) Everything that a function may need should be passed to it as an argument; refrain from using variables from the higher scope (that are indeed visible in the function)  (4) Every <code>open</code> <b>must</b> be checked for failure, <code>open ...  or die &quot;Can&#39;t ... $!&quot;;</code> (here <code>$!</code> has the actual error)"}, {"owner": {"reputation": 25, "user_id": 8171849, "user_type": "registered", "profile_image": "https://graph.facebook.com/2269780149914388/picture?type=large", "display_name": "sacky0003", "link": "https://stackoverflow.com/users/8171849/sacky0003"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1567754031, "post_id": 57816962, "comment_id": 102065352, "body": "Can please you edit in my code? I have not understood yet."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1567754201, "post_id": 57816962, "comment_id": 102065428, "body": "&quot;<i>Can please you edit in my code</i>&quot;  -- I don&#39;t understand: I did, I fixed indentation so that the code is clearer to read.   If you mean that I fix the programming error in it then that I shouldn&#39;t do -- that&#39;s what the answers are for.  But I can&#39;t answer because I don&#39;t know what that <code>$angle</code> should be initialized to.  I did tell you what seems to be the problem: <code>$angle</code> is used (in the function) before it has any value.  Give it some starting value, like you did with <code>$dihed</code>?"}, {"owner": {"reputation": 25, "user_id": 8171849, "user_type": "registered", "profile_image": "https://graph.facebook.com/2269780149914388/picture?type=large", "display_name": "sacky0003", "link": "https://stackoverflow.com/users/8171849/sacky0003"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1567754681, "post_id": 57816962, "comment_id": 102065629, "body": "$angle and $dihed use for print the value. There is no such particular function."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1567755499, "post_id": 57816962, "comment_id": 102065975, "body": "In your <code>prepare_input()</code> function you call <code>write_mdin0()</code> function, and in it <code>$angle</code> is used (...<code>remd-${angle}</code>...).  But <code>$angle</code> is not defined before <code>write_mdin0()</code> is called the first time. So when it&#39;s used it is undefined and you get a warning for that."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 0, "last_activity_date": 1567778943, "last_edit_date": 1567778943, "creation_date": 1567778344, "answer_id": 57823460, "question_id": 57816962, "link": "https://stackoverflow.com/questions/57816962/use-of-uninitialized-value-angle-in-concatenation-or-string-at-perl-remd-gr/57823460#57823460", "title": "Use of uninitialized value $angle in concatenation (.) or string at perl-remd-grp.perl line 22", "body": "<p>You should add <code>use strict</code> to your code and then consider the scope of your variables.</p>\n\n<p>In <code>write_mdin0()</code> you use a global variable called <code>$angle</code>. But look at your <code>while</code> loop.</p>\n\n<pre><code>while ($dihed &lt;= 130) {\n    print \"Processing dihedral: $dihed\\n\";\n    &amp;write_mdin0();    # &lt;--- $angle is used in here\n    $dihed += $incr;\n    $angle = $dihed-1; # &lt;--- But $angle isn't set until here\n}\n</code></pre>\n\n<p>The first time through this loop, <code>$angle</code> hasn't been given a value when <code>write_mdin0()</code> is called.</p>\n\n<p>I don't really understand your code, but perhaps you need to initialise <code>$angle</code> at the same time as you initialise <code>$dihed</code>.</p>\n\n<pre><code>sub prepare_input() {\n    $dihed = 120;\n    $angle = $dihed - 1;\n    while ($dihed &lt;= 130) {\n        ...\n    }\n}\n</code></pre>\n\n<p>Relying on global variables is to ignore one of the most useful lessons in the history of software development. Unless you have a very good reason, a subroutine should only use variables that are defined within it or parameters that are passed to it.</p>\n\n<p>I'll also add, that using <code>&amp;</code> on subroutine calls is a hangover from Perl 4. It is very rarely needed in Perl 5 and using it only makes your code harder to understand.</p>\n\n<p>Update: I imagine your code should look like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nprint \"Preparing input files\\n\";\n\nprepare_input();\n\nsub prepare_input {\n    my $dihed = 120;\n    my $angle = $dihed - 1;\n\n    # Only used in this subroutine, so define it here\n    my $incr = 1;\n\n    while ($dihed &lt;= 130) {\n        print \"Processing dihedral: $dihed\\n\";\n        write_mdin0($dihed, $angle);\n        $dihed += $incr;\n        $angle = $dihed-1;\n    }\n}\n\nsub write_mdin0 {\n    my ($dihed, $angle) = @_;\n\n    open my $mdin_fh,'&gt;', \"remd-$dihed-grp.ref\";\n    print $mdin_fh &lt;&lt;EOF;\n# Replica REPNUM\n-O -i remd-${dihed}.rep.REPNUM -p conf-non-pol-1kf1-k-0mm.prmtop -c remd-${angle}-rst.rep.REPNUM -o remd-${dihed}-out.rep.REPNUM -r remd-${dihed}-rst.rep.REPNUM -x remd-${dihed}-nc.rep.REPNUM\nEOF\n    # Lexical filehandle closed automatically\n    # as the variable goes out of scope\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8171849, "user_type": "registered", "profile_image": "https://graph.facebook.com/2269780149914388/picture?type=large", "display_name": "sacky0003", "link": "https://stackoverflow.com/users/8171849/sacky0003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 57823460, "answer_count": 1, "score": -1, "last_activity_date": 1567778943, "creation_date": 1567752172, "last_edit_date": 1567753414, "question_id": 57816962, "link": "https://stackoverflow.com/questions/57816962/use-of-uninitialized-value-angle-in-concatenation-or-string-at-perl-remd-gr", "title": "Use of uninitialized value $angle in concatenation (.) or string at perl-remd-grp.perl line 22", "body": "<p>I am getting this kind of error:</p>\n\n<pre>\nUse of uninitialized value $angle in concatenation (.) or string at perl-remd-grp.perl line 22.\n</pre>\n\n<p>It prints all file except 121 and 122.</p>\n\n<pre><code>#!/usr/bin/perl -w\nprint \"Preparing input files\\n\";\n\n$incr=1;\n\n&amp;prepare_input();\n\nsub prepare_input() {\n    $dihed=120;\n    while ($dihed &lt;= 130) {\n        print \"Processing dihedral: $dihed\\n\";\n        &amp;write_mdin0();\n        $dihed += $incr;\n        $angle = $dihed-1;\n    }\n}\n\nsub write_mdin0 {\n    open MDINFILE,'&gt;', \"remd-$dihed-grp.ref\";\n    print MDINFILE &lt;&lt;EOF;\n# Replica REPNUM\n-O -i remd-${dihed}.rep.REPNUM -p conf-non-pol-1kf1-k-0mm.prmtop -c remd-${angle}-rst.rep.REPNUM -o remd-${dihed}-out.rep.REPNUM -r remd-${dihed}-rst.rep.REPNUM -x remd-${dihed}-nc.rep.REPNUM\nEOF\n    close MDINFILE;\n}\n</code></pre>\n\n<p>It should print all files.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 9, "creation_date": 1567739768, "post_id": 57815235, "comment_id": 102061556, "body": "<a href=\"https://perldoc.perl.org/perlop.html#Equality-Operators\" rel=\"nofollow noreferrer\">Docs for spaceship</a>. <a href=\"https://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">Docs for <code>sort</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1567778191, "post_id": 57815259, "comment_id": 102076961, "body": "Some operators are only documented in <a href=\"https://metacpan.org/pod/perlsecret\" rel=\"nofollow noreferrer\">perlsecret</a>."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1567780904, "post_id": 57815259, "comment_id": 102078370, "body": "@mob Those aren&#39;t real operators though; they are just combinations of other operators, all documented in perlop."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 8, "last_activity_date": 1567739803, "creation_date": 1567739803, "answer_id": 57815259, "question_id": 57815235, "link": "https://stackoverflow.com/questions/57815235/what-does-this-line-of-perl-mean-do/57815259#57815259", "title": "What does this line of perl mean/do?", "body": "<p>Like all operators, <code>&lt;=&gt;</code> (sometimes known as the spaceship operator) is documented in <a href=\"https://perldoc.pl/perlop#Equality-Operators\" rel=\"noreferrer\"><code>perldoc perlop</code></a>:</p>\n\n<blockquote>\n  <p>Binary <code>&lt;=&gt;</code> returns -1, 0, or 1 depending on whether the left argument is numerically less than, equal to, or greater than the right argument. If your platform supports <code>NaN</code>'s (not-a-numbers) as numeric values, using them with <code>&lt;=&gt;</code> returns undef.</p>\n</blockquote>\n\n<p>The code sorts an array of references to arrays by the first element of each sub-array in numerically descending order.</p>\n\n<p>See also: <a href=\"https://perldoc.pl/functions/sort\" rel=\"noreferrer\"><code>perldoc -f sort</code></a>, <a href=\"https://perldoc.pl/perlreftut\" rel=\"noreferrer\"><code>perldoc perlreftut</code></a></p>\n"}, {"tags": [], "owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "is_accepted": false, "score": 2, "last_activity_date": 1567740020, "creation_date": 1567740020, "answer_id": 57815284, "question_id": 57815235, "link": "https://stackoverflow.com/questions/57815235/what-does-this-line-of-perl-mean-do/57815284#57815284", "title": "What does this line of perl mean/do?", "body": "<p>The <code>&lt;=&gt;</code> is the <a href=\"https://www.perltutorial.org/perl-operators/#Comparison_operators_for_numbers\" rel=\"nofollow noreferrer\">spaceship operator</a> (because of how it looks). It's used to compare it arguments (on the left and on the right) numerically and return a value less than 0 if left is smaller than right, 0 if they are equal, or greater than zero if the right side is smaller than the left.</p>\n\n<p>The <a href=\"https://www.perltutorial.org/perl-sort/\" rel=\"nofollow noreferrer\">sort</a> function can take e.g., a block of code (the part in curly braces) that defines how to sort the elements of <code>@unsorted</code>, and the sorted result is stored in <code>@sorted</code>.</p>\n"}], "owner": {"reputation": 77, "user_id": 1843391, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/faad34ae357ad307fa78a53ff9b88afc?s=128&d=identicon&r=PG", "display_name": "Randy Strauss", "link": "https://stackoverflow.com/users/1843391/randy-strauss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1567740203, "creation_date": 1567739597, "last_edit_date": 1567740203, "question_id": 57815235, "link": "https://stackoverflow.com/questions/57815235/what-does-this-line-of-perl-mean-do", "title": "What does this line of perl mean/do?", "body": "<p>The code I'm curious about:</p>\n\n<pre><code>my @sorted=sort { $b-&gt;[0] &lt;=&gt; $a-&gt;[0] } @unsorted\n</code></pre>\n\n<p>My guess is that <code>@sorted</code> is the sorted <code>@unsorted</code> array.</p>\n\n<p>What does <code>&lt;=&gt;</code> mean?  My guess is that the array is an array of arrays, so it's comparing the first items of every pair of arrays.\nI can't find <code>&lt;=&gt;</code> in the perl doc.</p>\n"}, {"tags": ["excel", "perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1567721763, "post_id": 57813553, "comment_id": 102058335, "body": "Why does the output of <code>random_color_select</code> include a newline?"}, {"owner": {"reputation": 1, "user_id": 12027646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/462ef99ee8bfcc63326775b275a3b0a1?s=128&d=identicon&r=PG&f=1", "display_name": "nitin ", "link": "https://stackoverflow.com/users/12027646/nitin"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1567722981, "post_id": 57813553, "comment_id": 102058626, "body": "That was just used to print the $color more clearly. Removed it and tried again, didn&#39;t work."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1567724182, "post_id": 57813553, "comment_id": 102058849, "body": "if you always want a color, do <code>my $random = int(rand(@colors));</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1534, "user_id": 189095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93335ee418c767bd4a62b3f641bc01ff?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/189095/bruce"}, "is_accepted": false, "score": 1, "last_activity_date": 1567769288, "creation_date": 1567769288, "answer_id": 57821146, "question_id": 57813553, "link": "https://stackoverflow.com/questions/57813553/unable-to-print-background-colors-while-writing-to-excel/57821146#57821146", "title": "Unable to print background colors while writing to Excel", "body": "<p>One of the issues with your code is:</p>\n\n<pre><code>$random = int(rand(10)); \n</code></pre>\n\n<p>Unless you have 10 colours in the array, it will sometimes return a null value.\nMuch better to use the length of the array as @ysth commented.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Spreadsheet::WriteExcel;\nuse 5.014;\n\nmain();\n\nsub main\n{\n    my $workbook = Spreadsheet::WriteExcel-&gt;new('background_colour_test.xls');\n    my $worksheet = $workbook-&gt;add_worksheet();\n\n    ## get random colour \n    my $color = &amp;random_color_select();\n    say \"Colour is \".$color;\n\n    #  Add and define a format\n    my $format = $workbook-&gt;add_format(\"bg_color\" =&gt; $color);\n\n    my $col = 0;\n    my $row = 0;\n\n    $worksheet-&gt;write($row, $col, 'Cell with Background color', $format);\n    $row++;\n    $worksheet-&gt;write($row, $col, 'Cell without background color');\n}\n\n\nsub random_color_select \n{\n    my @colors= (\"blue\",\"brown\",\"cyan\",\"gray\", \"green\", \"lime\", \"yellow\");\n    my $random_color = int(rand(@colors));\n    return $colors[$random_color];\n}\n\nexit;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12027646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/462ef99ee8bfcc63326775b275a3b0a1?s=128&d=identicon&r=PG&f=1", "display_name": "nitin ", "link": "https://stackoverflow.com/users/12027646/nitin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567769288, "creation_date": 1567721557, "question_id": 57813553, "link": "https://stackoverflow.com/questions/57813553/unable-to-print-background-colors-while-writing-to-excel", "title": "Unable to print background colors while writing to Excel", "body": "<p>I am trying to generate a background color randomly and print the Excel \nfield using that color. I put all the colors in an array and generated a \nrandom number to get an element randomly. This part is done but the \n\"add_format( bg_color => $color ) isn't working as no color is printed \n when using 'write' function with $format specified.</p>\n\n<p>If i try a fixed value like 'add_format( bg_color => 'red' )' rather than \na $color, then the excel is printed with red color. But the 'add_format( \nbg_color => \"$color\" ) doesn't seem to work.</p>\n\n<pre><code>  sub random_color_select {\n      my @colors= (\"blue\",\"brown\",\"cyan\",\"gray\", \"green\", \"lime\", \"yellow\") ;\n      my $random = int(rand(10));          \n      return \"$colors[$random]\\n\";\n   }\n\n   sub print_excel {     \n      my $color = &amp;random_color_select();\n      my $format = $workbook_mtr-&gt;add_format();\n      my %hash1= (\"bg_color\" =&gt; \"$color\");\n      $format-&gt;set_bg_color($hash1{bg_color});\n\n      //No color is printed using below line               \n      $worksheet-&gt;write(\"A${row_mem}\", \"mod\", $format);\n    }\n</code></pre>\n\n<p>Expect the output excel file to have different color each time run the \n script but no color is printed as background.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3641, "user_id": 4400820, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-zJIsBHmva1w/AAAAAAAAAAI/AAAAAAAAAFA/VyUtonEauos/photo.jpg?sz=128", "display_name": "D. Ben Knoble", "link": "https://stackoverflow.com/users/4400820/d-ben-knoble"}, "edited": false, "score": 0, "creation_date": 1567717070, "post_id": 57812884, "comment_id": 102057104, "body": "If perl has something conceptually similar to eval, you could do it, but be wary of injection attacks. Ideally you\u2019re looking for string interpolation or some kind of template"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1567717552, "creation_date": 1567717552, "answer_id": 57812979, "question_id": 57812884, "link": "https://stackoverflow.com/questions/57812884/perl-is-it-possible-to-have-interpolated-variables-when-a-string-is-read-from/57812979#57812979", "title": "(Perl) Is it possible to have interpolated variables when a string is read from a file?", "body": "<p>So you want your file to be a template. Why not use a proper template language like <a href=\"http://search.cpan.org/perldoc?Template\" rel=\"noreferrer\">this one</a>?</p>\n\n<pre><code>use Template qw( );\n\nmy %vars = (\n   name =&gt; \"Foo\",\n);\n\nmy $tt = Template-&gt;new();\n$tt-&gt;process($qfn, \\%vars)\n   or die($tt-&gt;error());\n</code></pre>\n\n<p>Template:</p>\n\n<pre><code>Hello [% name %]\n</code></pre>\n\n<p>The output can be captured instead of printed by using <code>-&gt;process</code>'s third arg.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567765172, "post_id": 57819985, "comment_id": 102070477, "body": "The referenced answer gives horrible advice. Using a system that doesn&#39;t provide an escape for actually including <code>$foo</code>? BAD! Providing access to all variables? BAD! (Beause you can&#39;t change your program without risking breaking a template.) If your template uses the <code>$foo</code> notation, use String::Interpolate at least (though it has a weird interface)."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1567766133, "post_id": 57819985, "comment_id": 102070919, "body": "@ikegami: Perhaps you&#39;d consider <a href=\"https://github.com/perl-doc-cats/perlfaq/\" rel=\"nofollow noreferrer\">submitting a patch</a> to improve this documentation?"}, {"owner": {"reputation": 355, "user_id": 10250306, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215114273521700/picture?type=large", "display_name": "Muhamad Gafar", "link": "https://stackoverflow.com/users/10250306/muhamad-gafar"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568210214, "post_id": 57819985, "comment_id": 102203061, "body": "@ikegami I&#39;m a Perl newbie and don&#39;t understand what you&#39;re saying well. Are you saying that using a template is bad? To give more context, I am trying to load in a .sql file into a string and replace some of the variables. I then pass it on to a different function a colleague wrote that executes the string as a sql statement. The current solution I have working is using the string substitution method. I tried using templates but out company system has a small selection of libraries."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 355, "user_id": 10250306, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215114273521700/picture?type=large", "display_name": "Muhamad Gafar", "link": "https://stackoverflow.com/users/10250306/muhamad-gafar"}, "edited": false, "score": 1, "creation_date": 1568210642, "post_id": 57819985, "comment_id": 102203297, "body": "@MuhamadGafar: No, ikegami is pointing out some shortcomings in the answer from the FAQ (particularly the first version). Using a proper templating system is definitely the best approach."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1567764561, "last_edit_date": 1592644375, "creation_date": 1567764561, "answer_id": 57819985, "question_id": 57812884, "link": "https://stackoverflow.com/questions/57812884/perl-is-it-possible-to-have-interpolated-variables-when-a-string-is-read-from/57819985#57819985", "title": "(Perl) Is it possible to have interpolated variables when a string is read from a file?", "body": "<p>The correct answer to the question (as you've already seen) is to use a proper templating system instead.</p>\n<p>But it's worth noting that this is answered in the <a href=\"https://perldoc.pl/perlfaq\" rel=\"nofollow noreferrer\">Perl FAQ</a>.</p>\n<blockquote>\n<p><strong><a href=\"https://perldoc.pl/perlfaq4#How-can-I-expand-variables-in-text-strings?\" rel=\"nofollow noreferrer\">How can I expand variables in text strings?</a></strong></p>\n<p>If you can avoid it, don't, or if you can use a templating system, such as Text::Template or Template Toolkit, do that instead. You might even be able to get the job done with <code>sprintf</code> or <code>printf</code>:</p>\n<pre><code>my $string = sprintf 'Say hello to %s and %s', $foo, $bar;\n</code></pre>\n<p>However, for the one-off simple case where I don't want to pull out a full templating system, I'll use a string that has two Perl scalar variables in it. In this example, I want to expand <code>$foo</code> and <code>$bar</code> to their variable's values:</p>\n<pre><code>my $foo = 'Fred';\nmy $bar = 'Barney';\n$string = 'Say hello to $foo and $bar';\n</code></pre>\n<p>One way I can do this involves the substitution operator and a double <code>/e</code> flag. The first <code>/e</code> evaluates <code>$1</code> on the replacement side and turns it into <code>$foo</code>. The second <code>/e</code> starts with <code>$foo</code> and replaces it with its value. <code>$foo</code>, then, turns into 'Fred', and that's finally what's left in the string:</p>\n<pre><code>$string =~ s/(\\$\\w+)/$1/eeg; # 'Say hello to Fred and Barney'\n</code></pre>\n<p>The <code>/e</code> will also silently ignore violations of strict, replacing undefined variable names with the empty string. Since I'm using the <code>/e</code> flag (twice even!), I have all of the same security problems I have with eval in its string form. If there's something odd in <code>$foo</code>, perhaps something like <code>@{[ system &quot;rm -rf /&quot; ]}</code>, then I could get myself in trouble.</p>\n<p>To get around the security problem, I could also pull the values from a hash instead of evaluating variable names. Using a single <code>/e</code>, I can check the hash to ensure the value exists, and if it doesn't, I can replace the missing value with a marker, in this case <code>???</code> to signal that I missed something:</p>\n<pre><code>my $string = 'This has $foo and $bar';\n\nmy %Replacements = (\n  foo  =&gt; 'Fred',\n);\n\n# $string =~ s/\\$(\\w+)/$Replacements{$1}/g;\n$string =~ s/\\$(\\w+)/\n  exists $Replacements{$1} ? $Replacements{$1} : '???'\n/eg;\n\nprint $string;\n</code></pre>\n</blockquote>\n<p>If you're going to be using Perl, then it's really worth your while to spend an afternoon getting to know the <a href=\"https://perldoc.pl/perlfaq\" rel=\"nofollow noreferrer\">FAQ</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 262929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r8kGV.jpg?s=128&g=1", "display_name": "Eduardo Ver&#237;ssimo", "link": "https://stackoverflow.com/users/262929/eduardo-ver%c3%adssimo"}, "is_accepted": false, "score": 0, "last_activity_date": 1603786324, "creation_date": 1603786324, "answer_id": 64550387, "question_id": 57812884, "link": "https://stackoverflow.com/questions/57812884/perl-is-it-possible-to-have-interpolated-variables-when-a-string-is-read-from/64550387#64550387", "title": "(Perl) Is it possible to have interpolated variables when a string is read from a file?", "body": "<p>Simplest way:</p>\n<pre><code>my $foo = 'Fred';\nmy $bar = 'Barney';\nmy $string = 'Say hello to $foo and $bar';\n\nsay eval qq{&quot;$string&quot;}\n</code></pre>\n"}], "owner": {"reputation": 355, "user_id": 10250306, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215114273521700/picture?type=large", "display_name": "Muhamad Gafar", "link": "https://stackoverflow.com/users/10250306/muhamad-gafar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "accepted_answer_id": 57812979, "answer_count": 3, "score": 2, "last_activity_date": 1603786324, "creation_date": 1567716928, "question_id": 57812884, "link": "https://stackoverflow.com/questions/57812884/perl-is-it-possible-to-have-interpolated-variables-when-a-string-is-read-from", "title": "(Perl) Is it possible to have interpolated variables when a string is read from a file?", "body": "<p>I am working on a script that has some variables which are passed on to a string and then they a printed out. The initial string was only 6 lines I didn't need an external file for it but I now have a new string which can fill over 1000 lines. The new string also has some fields that are to be replaced by variables declared in the script.</p>\n\n<p>The text file has something like:</p>\n\n<pre><code>Hello $name\n</code></pre>\n\n<p>The code is supposed to have several parts to it.</p>\n\n<ol>\n<li>Declaration of variable</li>\n</ol>\n\n<pre><code>my $name = 'Foo';\n</code></pre>\n\n<ol start=\"2\">\n<li>Open file and read it into a string.</li>\n</ol>\n\n<pre><code>my $content;\nopen(my $fh, '&lt;', $filename) or die \"cannot open file $filename\";\n{\n    local $/;\n    $content = &lt;$fh&gt;;\n}\nclose($fh);\n</code></pre>\n\n<ol start=\"3\">\n<li>Print string</li>\n</ol>\n\n<pre><code>print $content\n</code></pre>\n\n<p>Expected outcome:</p>\n\n<pre><code>Hello Foo\n</code></pre>\n\n<p>I am wondering if it's possible to read \"Hello $name\" from a file but print it as \"Hello Foo\" since the variable name is declared as Foo.</p>\n"}, {"tags": ["perl", "xpath", "html-treebuilder"], "comments": [{"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 1, "creation_date": 1567715751, "post_id": 57810933, "comment_id": 102056660, "body": "When calling <code>$post-&gt;findnodes</code> the XPath expression should probably start with a dot, e.g.: <code>&#39;.&#47;&#47;div[@data-testid=&quot;story-subtitle&quot;]&#47;&#47;a&#47;@href&#39;</code>.  The dot make it a relative path.  Starting with a slash means it starts at the top of the document."}, {"owner": {"reputation": 101, "user_id": 2787859, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004041835408/picture?type=large", "display_name": "\u0e15\u0e49\u0e2d\u0e07 \u0e40\u0e2d\u0e01\u0e21\u0e31\u0e22", "link": "https://stackoverflow.com/users/2787859/%e0%b8%95%e0%b9%89%e0%b8%ad%e0%b8%87-%e0%b9%80%e0%b8%ad%e0%b8%81%e0%b8%a1%e0%b8%b1%e0%b8%a2"}, "reply_to_user": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1567741074, "post_id": 57810933, "comment_id": 102061802, "body": "Thank, Work now. So <code>$post-&gt;findnodes</code> still known all data equivalent with <code>$tree</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1567762909, "post_id": 57810933, "comment_id": 102069316, "body": "@\u0e15\u0e49\u0e2d\u0e07 \u0e40\u0e2d\u0e01\u0e21\u0e31\u0e22, A leading <code>&#47;</code> means start at the root just like with file paths. <code>&#47;&#47;div[...]&#47;...</code> is short for <code>&#47;descendant:div[...]&#47;...</code>. If you want to start with a child of the context node, simply use <code>div[...]&#47;...</code>. If you want to start with a descendant of the current node use <code>descendant:div[...]&#47;...</code> or <code>.&#47;&#47;div[...]&#47;...</code>."}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 2787859, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004041835408/picture?type=large", "display_name": "\u0e15\u0e49\u0e2d\u0e07 \u0e40\u0e2d\u0e01\u0e21\u0e31\u0e22", "link": "https://stackoverflow.com/users/2787859/%e0%b8%95%e0%b9%89%e0%b8%ad%e0%b8%87-%e0%b9%80%e0%b8%ad%e0%b8%81%e0%b8%a1%e0%b8%b1%e0%b8%a2"}, "edited": false, "score": 0, "creation_date": 1567711419, "post_id": 57811108, "comment_id": 102054999, "body": "I have check <code>print $post-&gt;as_HTML();</code> is valid. It changed in every loop. But <code>$id</code> is the same for every loop. <code>$message</code> also weird too."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 101, "user_id": 2787859, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004041835408/picture?type=large", "display_name": "\u0e15\u0e49\u0e2d\u0e07 \u0e40\u0e2d\u0e01\u0e21\u0e31\u0e22", "link": "https://stackoverflow.com/users/2787859/%e0%b8%95%e0%b9%89%e0%b8%ad%e0%b8%87-%e0%b9%80%e0%b8%ad%e0%b8%81%e0%b8%a1%e0%b8%b1%e0%b8%a2"}, "edited": false, "score": 0, "creation_date": 1567717706, "post_id": 57811108, "comment_id": 102057301, "body": "I don&#39;t understand. Is that a new question?"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1567763139, "last_edit_date": 1592644375, "creation_date": 1567707846, "answer_id": 57811108, "question_id": 57810933, "link": "https://stackoverflow.com/questions/57810933/how-to-loop-the-result-from-findnodes-with-htmltreebuilderxpath/57811108#57811108", "title": "How to loop the result from findnodes() with HTML::TreeBuilder::XPath", "body": "<p>The post is unclear and it seems to contain multiple questions. This needs to be fixed, but in the mean time, I'll address the following:</p>\n<blockquote>\n<p><em>I would like to loop posts one by one to find a desired data.</em></p>\n</blockquote>\n<hr />\n<p>From <a href=\"https://metacpan.org/pod/HTML::TreeBuilder::XPath\" rel=\"nofollow noreferrer\">HTML::TreeBuilder::XPath</a>,</p>\n<blockquote>\n<p><strong>findnodes ($path)</strong></p>\n<p>Returns a list of nodes found by <code>$path</code>. In scalar context returns an <code>Tree::XPathEngine::NodeSet</code> object.</p>\n</blockquote>\n<p>From <a href=\"https://metacpan.org/pod/Tree::XPathEngine::NodeSet\" rel=\"nofollow noreferrer\">Tree::XPathEngine::NodeSet</a>,</p>\n<blockquote>\n<p><strong>get_nodelist()</strong></p>\n<p>Returns a list of nodes. See <a href=\"https://metacpan.org/pod/Tree::XPathEngine::XMLParser\" rel=\"nofollow noreferrer\">Tree::XPathEngine::XMLParser</a> for the format of the nodes.</p>\n</blockquote>\n<p>So,</p>\n<pre><code>my @posts = $tree-&gt;findnodes('...');\nfor my $post (@posts) { ... }\n</code></pre>\n<p>or</p>\n<pre><code>my $posts = $tree-&gt;findnodes('...');\nfor my $post ($posts-&gt;get_nodelist()) { ... }\n</code></pre>\n<hr />\n<p>Any other questions should be posted as separate Questions.</p>\n"}], "owner": {"reputation": 101, "user_id": 2787859, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004041835408/picture?type=large", "display_name": "\u0e15\u0e49\u0e2d\u0e07 \u0e40\u0e2d\u0e01\u0e21\u0e31\u0e22", "link": "https://stackoverflow.com/users/2787859/%e0%b8%95%e0%b9%89%e0%b8%ad%e0%b8%87-%e0%b9%80%e0%b8%ad%e0%b8%81%e0%b8%a1%e0%b8%b1%e0%b8%a2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1567763139, "creation_date": 1567706921, "last_edit_date": 1567711119, "question_id": 57810933, "link": "https://stackoverflow.com/questions/57810933/how-to-loop-the-result-from-findnodes-with-htmltreebuilderxpath", "title": "How to loop the result from findnodes() with HTML::TreeBuilder::XPath", "body": "<p>I have my script to monitor some Facebook pages. Since Facebook API banned page public access permission on 4-SEP-2019. I need to parse the content by xpath method.</p>\n\n<p>Each Facebook post is wrap by <code>div[contains(@class,\"userContentWrapper\")]</code>. I would like to loop posts one by one to find a desired data.</p>\n\n<p>I don't known why <code>$message = $post-&gt;findvalue('//div[@data-testid=\"post_message\"]//p');</code>  show all text in <code>&lt;p&gt;</code> of every posts.</p>\n\n<pre><code>use LWP::UserAgent;\n$ua       = new LWP::UserAgent;\n$request  = new HTTP::Request;\n$request-&gt;url('https://www.facebook.com/pg/FIFA/posts/');\n$request-&gt;method('GET');\n$request-&gt;header('User-Agent' =&gt; 'Mozilla/5.0 Chrome/71.0.3578.98 Safari/537.36');\n$response = $ua-&gt;request($request);\n\n\nopen(HTM, \"&gt;zzz.htm\");\nprint HTM $response-&gt;content;\nclose(HTM);\n\n\nuse HTML::TreeBuilder::XPath;\n$tree = HTML::TreeBuilder::XPath-&gt;new_from_content($response-&gt;content);\n\n\n$posts = $tree-&gt;findnodes('//div[contains(@class,\"userContentWrapper\")]');\n\n\nfor my $post (@{$posts})\n{\n    $id =  $post-&gt;findnodes('//div[@data-testid=\"story-subtitle\"]/@id');\n    $id =  $id-&gt;[0]-&gt;getValue;\n    print \"id = $id\\n\\n\";\n\n    $object_id =  $post-&gt;findnodes('//div[@data-testid=\"story-subtitle\"]//a/@href');\n    $object_id =  'https://www.facebook.com' . $object_id-&gt;[0]-&gt;getValue;\n    print \"object_id = $object_id\\n\\n\";\n\n    $message = $post-&gt;findvalue('//div[@data-testid=\"post_message\"]//p');\n#   $message = $message-&gt;[0]-&gt;getValue;\n    print \"$message\\n\\n\";\n\n    $ajaxify =  $post-&gt;findnodes('//div[@class=\"mtm\"]//a/@ajaxify');\n    $ajaxify =  $ajaxify-&gt;[0]-&gt;getValue;\n    print \"ajaxify = $ajaxify\\n\\n\";\n\n    $ploi = $post-&gt;findnodes('//div[@class=\"mtm\"]//a/@data-ploi');\n    $ploi = $ploi-&gt;[0]-&gt;getValue;\n    print \"ploi = $ploi\\n\\n\";\n\n#   $plsi = $post-&gt;findnodes('//div[@class=\"mtm\"]//a/@data-plsi');\n#   $plsi = $plsi-&gt;[0]-&gt;getValue;\n#   print \"plsi = $plsi\\n\\n\";\n\n    $href =  $post-&gt;findnodes('//div[@class=\"mtm\"]//a/@href');\n    $href =  'https://www.facebook.com' . $href-&gt;[0]-&gt;getValue;\n    print \"href = $href\\n\\n\";\n\n    print \"---------------------------------------------------------\\n\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "logging"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1567698427, "post_id": 57807838, "comment_id": 102049606, "body": "Consider using a new Log::Dispatch object for each case - there isn&#39;t really any benefit to reusing the object for different file outputs."}], "answers": [{"tags": [], "owner": {"reputation": 497, "user_id": 1235777, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa26410672147914cae5de97ad99bdf2?s=128&d=identicon&r=PG", "display_name": "user1235777", "link": "https://stackoverflow.com/users/1235777/user1235777"}, "is_accepted": false, "score": 2, "last_activity_date": 1567710399, "creation_date": 1567710399, "answer_id": 57811628, "question_id": 57807838, "link": "https://stackoverflow.com/questions/57807838/perl-logdispatch-change-logging-location-mid-run/57811628#57811628", "title": "Perl Log::Dispatch: Change logging location mid-run?", "body": "<p>Right. I abandoned <code>MooseX::LogDispatch</code> and did it myself. </p>\n\n<p>When we have a new [thing], I just call a trigger to fire a <code>_set_logger</code> method:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub _set_logger {\n    my ($self, $thing) = @_;\n\n    my $log_dir = $self-&gt;config-&gt;{log_dir}; # /path/to/log_dir\n    my $log_file_base = $self-&gt;config-&gt;{log_file_base}; # e.g. process-thing-log\n\n    my $t = localtime;\n\n    my $logfile = $log_dir . \"/\" . $log_file_base . $thing-&gt;{name} . \"-\" . $t-&gt;ymd . \".log\";\n\n    my $logger = Log::Dispatch-&gt;new(\n    outputs =&gt; [\n        [ 'File',\n          min_level =&gt; 'debug',\n          filename =&gt; $logfile,\n          mode =&gt; '&gt;&gt;',\n          newline =&gt; 1,\n       ],\n     ],\n    );\n\n    $self-&gt;logger($logger);\n    $self-&gt;logger-&gt;info(\"Started run at \" . scalar localtime);\n}\n</code></pre>\n\n<p>Don't know if it's \"right\", but it's working smoothly.</p>\n"}], "owner": {"reputation": 497, "user_id": 1235777, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa26410672147914cae5de97ad99bdf2?s=128&d=identicon&r=PG", "display_name": "user1235777", "link": "https://stackoverflow.com/users/1235777/user1235777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1567710399, "creation_date": 1567694197, "question_id": 57807838, "link": "https://stackoverflow.com/questions/57807838/perl-logdispatch-change-logging-location-mid-run", "title": "Perl Log::Dispatch: Change logging location mid-run?", "body": "<p>I'm using <code>Log::Dispatch</code> in a large Mooseified app, via <code>MooseX::LogDispatch</code>. My setup is more or less:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use Moose;\nwith 'MooseX::LogDispatch';\n\nhas log_dispatch_conf =&gt; (\n    is =&gt; 'ro',\n    isa =&gt; 'HashRef',\n    lazy =&gt; 1,\n    required =&gt; 1,\n    default =&gt; sub {\n        my $self = shift;\n        return {\n            class =&gt; 'Log::Dispatch::File',\n            min_level =&gt; 'debug',\n            filename =&gt; $self-&gt;config-&gt;{logfile},\n            mode =&gt; '&gt;&gt;',\n            newline =&gt; 1\n        };\n    },\n);\n</code></pre>\n\n<p>Is there any way I can change the location of the log file in the middle of a running process? My specific use case is that I'm processing a number of different large [things], which are passed in at runtime, and I'd like each [thing] to log to its own file. Something like this:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>foreach my $thing (@things) {\n    my $logfile = $self-&gt;config-&gt;{log_base} . $thing-&gt;{name} . time() . \".log\";\n    # do something here to set log location\n    $self-&gt;logger-&gt;info(\"Start processing \" . $thing-&gt;{name} . \" at \" . scalar localtime());\n    # process $thing\n}\n</code></pre>\n"}, {"tags": ["perl", "mojolicious"], "comments": [{"owner": {"reputation": 205, "user_id": 1195114, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VKAyN.jpg?s=128&g=1", "display_name": "daleif", "link": "https://stackoverflow.com/users/1195114/daleif"}, "edited": false, "score": 0, "creation_date": 1567689004, "post_id": 57806176, "comment_id": 102044095, "body": "Hmm, seems <code>$v -&gt; output( { %{ $v -&gt; output }, &#39;foo&#39; =&gt; &#39;&#39; } );</code> is one approach, seems a bit hackish though"}], "owner": {"reputation": 205, "user_id": 1195114, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VKAyN.jpg?s=128&g=1", "display_name": "daleif", "link": "https://stackoverflow.com/users/1195114/daleif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567688713, "creation_date": 1567688713, "question_id": 57806176, "link": "https://stackoverflow.com/questions/57806176/mojolicious-parameter-validation-optional-with-an-empty-value", "title": "Mojolicious parameter validation: optional with an empty value", "body": "<p>In my app I use the validation to verify and filter my input data before using the validated data to be saved to the DB (using DBIX::Class).</p>\n\n<p>I have a few optional fields, but when these are empty they never show up in the validated output, which can be a problem if the edit to be saved went from a having a filled in optional field to an empty optional field. Then the empty data is not picked up in the output.  </p>\n\n<p>Is there a proper appoach to handling these from the validation side of things? Like telling the validator that the value is undef/empty string and that the field is valid. Or what is a good approach to this?</p>\n\n<p>For saving an edit I'd like to just feed the passed fields into the proper <code>DBIx::Class::Row</code> object and update it. Thus the missing empty optional fields is a problem.</p>\n\n<p>Here is a minimal example of using the validation:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse utf8;\nuse Modern::Perl;\nuse Mojolicious::Validator;\n\nmy $validator = Mojolicious::Validator -&gt; new;\nmy $v         = $validator -&gt; validation;\n\n$v -&gt; input({foo =&gt; '', bar =&gt; 'bar' });\n\n$v -&gt; optional('foo');\n$v -&gt; required('bar');\n\n\nfor my $f ( @{ $v -&gt; failed } ) {\n  say sprintf '\"%s\" failed validation, reason: \"%s\"', $f, $v -&gt; error($f) -&gt; [0];\n}\n\nfor my $f ( @{ $v -&gt; passed } ) {\n  say sprintf '\"%s\" passed validation, value: \"%s\"', $f, $v -&gt; param($f);\n}\n</code></pre>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 429, "user_id": 11940163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54fd03e0a47aa014dfd25c7063607192?s=128&d=identicon&r=PG&f=1", "display_name": "bigdataolddriver", "link": "https://stackoverflow.com/users/11940163/bigdataolddriver"}, "edited": false, "score": 2, "creation_date": 1567666623, "post_id": 57799713, "comment_id": 102032216, "body": "swap them?call analyze(&#39;Hi&#39;,@content) instead"}, {"owner": {"reputation": 429, "user_id": 11940163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54fd03e0a47aa014dfd25c7063607192?s=128&d=identicon&r=PG&f=1", "display_name": "bigdataolddriver", "link": "https://stackoverflow.com/users/11940163/bigdataolddriver"}, "edited": false, "score": 2, "creation_date": 1567666799, "post_id": 57799713, "comment_id": 102032274, "body": "easy to mess up with $ and @ , so i would suggest put all $ args in front of any @ arg , or use dict as arg completely"}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 2, "creation_date": 1567708414, "post_id": 57799713, "comment_id": 102053760, "body": "As an aside: <code>break</code> is not a Perl keyword. What you want here is probably <code>last</code>."}], "answers": [{"comments": [{"owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "edited": false, "score": 0, "creation_date": 1567673445, "post_id": 57801667, "comment_id": 102035437, "body": "Thanks for the explanation! I&#39;m a new to perl so I appreciate it."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1567705336, "last_edit_date": 1567705336, "creation_date": 1567673104, "answer_id": 57801667, "question_id": 57799713, "link": "https://stackoverflow.com/questions/57799713/perl-array-and-string-as-method-arguments/57801667#57801667", "title": "Perl array and string as method arguments", "body": "<p>You can't pass arrays to subs (or methods), only a list of scalars. As such,</p>\n\n<pre><code>$analyzer-&gt;analyze(@lines, 'Hi');\n</code></pre>\n\n<p>is the same as as </p>\n\n<pre><code>$analyzer-&gt;analyze($lines[0], $lines[1], ..., 'Hi');\n</code></pre>\n\n<p>It means that the following won't work well:</p>\n\n<pre><code>my (@strings, $target) = @_;\n</code></pre>\n\n<p>Perl doesn't know how many items belonged to the original array, so it places them all in <code>@strings</code>, leaving <code>$target</code> undefined.</p>\n\n<hr>\n\n<p><strong>Solutions</strong></p>\n\n<p>You can do what you want as follows:</p>\n\n<pre><code>sub analyze {\n    my $self = shift;\n    my $target = pop;\n    my @strings = @_\n    for my $string (@strings) {\n       ...\n    }\n}\n\n$analyzer-&gt;analyze(@lines, 'Hi')\n</code></pre>\n\n<p>Or without the needless copy:</p>\n\n<pre><code>sub analyze {\n    my $self = shift;\n    my $target = pop;\n    for my $string (@_) {\n       ...\n    }\n}\n\n$analyzer-&gt;analyze(@lines, 'Hi')\n</code></pre>\n\n<p>Passing the target first can be easier.</p>\n\n<pre><code>sub analyze {\n    my ($self, $target, @strings) = @_;\n    for my $string (@strings) {\n       ...\n    }\n}\n\n$analyzer-&gt;analyze('Hi', @lines)\n</code></pre>\n\n<p>Or without the needless copy:</p>\n\n<pre><code>sub analyze {\n    my $self = shift;\n    my $target = shift;\n    for my $string (@_) {\n       ...\n    }\n}\n\n$analyzer-&gt;analyze('Hi', @lines)\n</code></pre>\n\n<p>You could also pass a reference to the array (in any order you like) since a reference is a scalar.</p>\n\n<pre><code>sub analyze {\n    my ($self, $target, $strings) = @_;\n    for my $string (@$strings) {\n       ...\n    }\n}\n\n$analyzer-&gt;analyze('Hi', \\@lines)\n</code></pre>\n\n<p>I would go with the second to last. It follows the same general pattern as the well-known <code>grep</code>.</p>\n\n<pre><code>my @matches = grep { condition($_) } @strings;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568132046, "post_id": 57858099, "comment_id": 102174217, "body": "Passing a reference was already mentioned. All you added is <code>my @arr=@$aref;</code>. <b>That&#39;s awful! Don&#39;t even do that!!!</b> You&#39;re copying all the elements for nothing!"}, {"owner": {"reputation": 518, "user_id": 3617046, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/afad7c3481df3dcbbcd2b4366782e056?s=128&d=identicon&r=PG&f=1", "display_name": "Bulrush", "link": "https://stackoverflow.com/users/3617046/bulrush"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568197618, "post_id": 57858099, "comment_id": 102196117, "body": "@ikegami It&#39;s not awful, it helps beginners understand how references work. This shouldn&#39;t be an elitist site for advanced people only."}], "tags": [], "owner": {"reputation": 518, "user_id": 3617046, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/afad7c3481df3dcbbcd2b4366782e056?s=128&d=identicon&r=PG&f=1", "display_name": "Bulrush", "link": "https://stackoverflow.com/users/3617046/bulrush"}, "is_accepted": false, "score": 0, "last_activity_date": 1568047402, "creation_date": 1568047402, "answer_id": 57858099, "question_id": 57799713, "link": "https://stackoverflow.com/questions/57799713/perl-array-and-string-as-method-arguments/57858099#57858099", "title": "Perl array and string as method arguments", "body": "<p>I'd just like to add a slightly different method of passing an array to a subroutine.</p>\n\n<pre><code># Begin main program\nmy @arr=(1,2,3);\nmy $i=0;\nmysub(\\@arr,$i); # Pass the reference to the array\n\nexit; # Exit main program\n##########\nsub mysub\n{my($aref,$i)=@_; # We are receiving an array ref. \n\nmy @arr=@$aref; # Now we are back to a regular array.\nprint \"$arr[0]\\n$arr[1]\\n$arr[2]\\n\";\n\nreturn;\n}\n</code></pre>\n"}], "owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 57801667, "answer_count": 2, "score": 4, "last_activity_date": 1568047402, "creation_date": 1567665570, "question_id": 57799713, "link": "https://stackoverflow.com/questions/57799713/perl-array-and-string-as-method-arguments", "title": "Perl array and string as method arguments", "body": "<p>I have a method where I give two arguments: <strong><em>one array and one string</em></strong>. The problem is when I initialise two different variables, one for the array and one for the string, I get the first element of the array in the first variable and the second element in the second variable. My question is how can I get the whole array in a variable and the string in a different variable?</p>\n\n<p><strong>Analyze.pm</strong></p>\n\n<pre><code>sub analyze {\n    my $self = shift;\n    my ($content, $stringToSearch) = @_; \n    # my ($stringToSearch) = @_;\n    print \"$stringToSearch\";\n    if (!defined($stringToSearch) or length($stringToSearch) == 0) { die 'stringToSearch is not defined yet! ' }\n    foreach my $element ($content) {\n        #print \"$element\";\n        my $loc = index($element, $stringToSearch);\n        # print \"$loc\\n\";\n        given ($stringToSearch) {\n            when ($stringToSearch eq \"Hi\") {\n                if ($loc != 0) {\n                    print \"Searched word is Hi \\n\"; \n                } else {\n                    print \"No word found like this one! \"\n                }\n            }\n            #when ($stringToSearch == 'ORIENTED_EDGE') {\n            #   print 'Searched word is ORIENTED_EDGE';\n            #} # Printed out because i dont need it now!\n        }\n        break; # For testing\n    }\n}\n</code></pre>\n\n<p><strong>example.pm</strong></p>\n\n<pre><code>my @fileContent = ('Hi', 'There', 'Its', 'Me')\nmy $analyzer = Analyze-&gt;new();\n$analyzer-&gt;analyze(@fileContent, 'Hi');\n</code></pre>\n\n<p>When I change <code>$content</code> to <code>@content</code> it puts all the values of the array and the string in <code>@content</code></p>\n\n<p>I hope someone is able to help me. I'm a beginner in Perl. Thanks in advance </p>\n"}]