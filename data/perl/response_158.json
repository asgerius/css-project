[{"tags": ["perl", "unix", "sed", "concatenation"], "comments": [{"owner": {"reputation": 1, "user_id": 9231932, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213669318385773/picture?type=large", "display_name": "Pixon", "link": "https://stackoverflow.com/users/9231932/pixon"}, "reply_to_user": {"reputation": 3919, "user_id": 3132718, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Dv45L.png?s=128&g=1", "display_name": "Al.G.", "link": "https://stackoverflow.com/users/3132718/al-g"}, "edited": false, "score": 0, "creation_date": 1516226311, "post_id": 48310634, "comment_id": 83607069, "body": "Because its a Perl script I use &quot;system&quot; to use unix command inside (its just a part of the script)  <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/system.html</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516226410, "post_id": 48310634, "comment_id": 83607119, "body": "Don&#39;t forget that <code>$</code> and <code>\\ </code> are special characters in double-quoted strings..."}, {"owner": {"reputation": 1, "user_id": 9231932, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213669318385773/picture?type=large", "display_name": "Pixon", "link": "https://stackoverflow.com/users/9231932/pixon"}, "edited": false, "score": 0, "creation_date": 1516226652, "post_id": 48310634, "comment_id": 83607228, "body": "Thanks Ikegami I already tried to put a \\ before the $ but I forgot before the \\ its finaly appear yo works thanks you very much :)"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 2, "creation_date": 1516241617, "post_id": 48310634, "comment_id": 83611480, "body": "egad, why are you calling out to sed from perl? perl can do everything sed can do, and certainly faster without having to invoke a shell and sed several times."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1516272958, "post_id": 48310634, "comment_id": 83624509, "body": "You could also condense all those <code>s&#47;||&#47;|&#47;g</code> replacements into just one regex, something like <code>s&#47;|\\{2,6\\}&#47;|&#47;g</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9231932, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213669318385773/picture?type=large", "display_name": "Pixon", "link": "https://stackoverflow.com/users/9231932/pixon"}, "edited": false, "score": 0, "creation_date": 1516227286, "post_id": 48310718, "comment_id": 83607530, "body": "My problem is solve , a \\ was needed before &quot;\\&quot; and &quot;$&quot; Thanks you very much for all the answers/comment :)"}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516251106, "post_id": 48310718, "comment_id": 83613741, "body": "@ikegami I saw the point there..But I am pretty sure the op grabbed the idea from this, corrected anyways and thank you for the great eyes. <code>:-)</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516252563, "post_id": 48310718, "comment_id": 83614197, "body": "@sjsam, Actually, the OP &quot;grabbed the idea&quot; from a comment on the question before you even added the broken code to your answer. Either way, the comment pointing out that your answer needed to be fixed was justified."}], "tags": [], "owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "is_accepted": false, "score": -1, "last_activity_date": 1516250044, "last_edit_date": 1516250044, "creation_date": 1516226437, "answer_id": 48310718, "question_id": 48310634, "link": "https://stackoverflow.com/questions/48310634/sed-and-system-in-perl-concatenation/48310718#48310718", "title": "sed and &quot;system&quot; in Perl Concatenation", "body": "<blockquote>\n  <p>$! is the error returned by the last system call.</p>\n</blockquote>\n\n<p>Since the variable expansion do take place inside double quotes, my educated guess is that <code>$!</code> expands in the last <code>sed</code> command and it is possibly breaking the <code>sed</code> expression</p>\n\n<p>A simple workaround would be to escape the dollar sign and also the escape character to make it literal <code>\\</code></p>\n\n<pre><code>system \"sed ':a;N;\\$!ba;s/\\\\n//g' prixmodifAyc11.txt&gt;prixmodifAyc12.txt\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1516227335, "creation_date": 1516227335, "answer_id": 48310905, "question_id": 48310634, "link": "https://stackoverflow.com/questions/48310634/sed-and-system-in-perl-concatenation/48310905#48310905", "title": "sed and &quot;system&quot; in Perl Concatenation", "body": "<p>Don't forget that <code>$</code> and <code>\\</code> are special characters in double-quoted strings. You're actually execucting something like</p>\n\n<pre><code>sed ':a;N;0ba;s/\n//g' prixmodifAyc11.txt&gt;prixmodifAyc12.txt\n</code></pre>\n\n<p>You could use</p>\n\n<pre><code>system \"sed ':a;N;\\$!ba;s/\\\\n//g' prixmodifAyc11.txt &gt;prixmodifAyc12.txt\";\n</code></pre>\n\n<p>or</p>\n\n<pre><code>system q{sed ':a;N;$!ba;s/\\\\n//g' prixmodifAyc11.txt &gt;prixmodifAyc12.txt};\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\n\nsystem(shell_quote('sed', ':a;N;$!ba;s/\\\\n//g').' prixmodifAyc11.txt &gt;prixmodifAyc12.txt');\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9231932, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213669318385773/picture?type=large", "display_name": "Pixon", "link": "https://stackoverflow.com/users/9231932/pixon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1516250044, "creation_date": 1516226062, "question_id": 48310634, "link": "https://stackoverflow.com/questions/48310634/sed-and-system-in-perl-concatenation", "title": "sed and &quot;system&quot; in Perl Concatenation", "body": "<p>I'm trying to transform a file text in a specific format so I use a lot of \"sed\"</p>\n\n<p>when I try all my command line on unix it works but when I put the command in my script perl like this :</p>\n\n<pre><code>system \"sed 's/( )//g' prix$arg1.txt&gt;prixmodifAyc.txt\";\nsystem \"sed 's/ /|/g' prixmodifAyc.txt&gt;prixmodifAyc3.txt\";\nsystem \"sed 's/||/|/g' prixmodifAyc3.txt&gt;prixmodifAyc4.txt\";\nsystem \"sed 's/||/|/g' prixmodifAyc4.txt&gt;prixmodifAyc5.txt\";\nsystem \"sed 's/||/|/g' prixmodifAyc5.txt&gt;prixmodifAyc6.txt\";\nsystem \"sed 's/||/|/g' prixmodifAyc6.txt&gt;prixmodifAyc7.txt\";\nsystem \"sed 's/||/|/g' prixmodifAyc7.txt&gt;prixmodifAyc8.txt\";\nsystem \"sed 's/|\u20ac|/|/g' prixmodifAyc8.txt&gt;prixmodifAyc9.txt\";\nsystem \"sed 's/|key/ key/g' prixmodifAyc9.txt&gt;prixmodifAyc10.txt\";\nsystem \"sed 's/%|/|/g' prixmodifAyc10.txt&gt;prixmodifAyc11.txt\";\nsystem \"sed ':a;N;$!ba;s/\\n//g' prixmodifAyc11.txt&gt;prixmodifAyc12.txt\";\n</code></pre>\n\n<p>All lines works but not the last one and I can't find why (I'm not an expert of perl at all and I'm really sorry if my post is not understandable but english is not my main language.)</p>\n\n<p>The error I got is in french :</p>\n\n<p>sed: -e expression n\u00b01, caract\u00e8re 10: commande `s' inachev\u00e9e</p>\n\n<p>I think that its a concatenation problem (as the command works in terminal) but I can't find where is the problem hope someone will be able to help</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1516233219, "post_id": 48309575, "comment_id": 83609537, "body": "Do it the way @ikegami has it. If you do the loop this way, it will be an endless loop, always finding the first <code>&lt;tag&gt;(.*?)&lt;\\&#47;tag&gt;</code> Because <code>s&#47;&#47;&#47;e</code> is not global, you&#39;d need <code>s&#47;&#47;&#47;eg</code> to move past that match."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1516271405, "post_id": 48309575, "comment_id": 83623517, "body": "This looks a bit like it might be <code>xml</code>. Is it? If so, the solution is pretty easy with a parser."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516304056, "post_id": 48309575, "comment_id": 83643633, "body": "@sln, You are mistaken. Because the replacement will never include <code>&lt;tag&gt;...&lt;&#47;tag&gt;</code>, it&#39; s not an infinite loop. It is, however, inefficient because the match starts from the start each time."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516315816, "post_id": 48309575, "comment_id": 83648950, "body": "@ikegami - Yeah, my oversight."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1516221574, "creation_date": 1516221574, "answer_id": 48309635, "question_id": 48309575, "link": "https://stackoverflow.com/questions/48309575/perl-capturing-the-replaced-with-string/48309635#48309635", "title": "perl: capturing the replaced-with string", "body": "<pre><code>my $i = 0;\ns{&lt;tag&gt;(.*?)&lt;/tag&gt;}{\n   my $entity = sprintf(\"&amp;CITE%03d;\", $i++);\n   $cite{$entity} = $1;\n   $entity\n}eg;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5754171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c0a5b2b4419de8b4cb8e527bcb06e99?s=128&d=identicon&r=PG&f=1", "display_name": "user5754171", "link": "https://stackoverflow.com/users/5754171/user5754171"}, "is_accepted": false, "score": 0, "last_activity_date": 1516309378, "creation_date": 1516309378, "answer_id": 48330255, "question_id": 48309575, "link": "https://stackoverflow.com/questions/48309575/perl-capturing-the-replaced-with-string/48330255#48330255", "title": "perl: capturing the replaced-with string", "body": "<p>I did a something of a hacque, but really wanted something a bit more elegant.  What I ended up doing (for now) is</p>\n\n<pre><code>my $t;  \nfor( my $i=0; $t = sprintf(\"&amp;CITE%04d;\",$i), $all =~ s/($oct.*?$cct)/$t/s; $i++ ){  \n    $cites{$t} = $1;  \n    }\n</code></pre>\n\n<p>but I really wanted something even more \"self-contained\".</p>\n\n<p>Just being able to grab the replacement string would've made things much simpler, though.  This is a simple read-modify-write op.</p>\n\n<p>True, adding the 'g' modifier should help shave some microseconds off it.  :D</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516316510, "post_id": 48331545, "comment_id": 83649177, "body": "The <code>my</code> for the three vars used in the <code>(?{ })</code> should be <code>local our</code>. (Move code into a sub you call twice to see that <code>my</code> is the wrong choice.)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516316891, "post_id": 48331545, "comment_id": 83649281, "body": "I think <code>(?{..})</code> can referenced vars from the outter scope just fine. Setting them local within the regex, just cause them to reset upon unwinding a quantified scope. As in the case of a counter. Local regex declarations are only used in this case, where the outter scoped var is assigned the local val at the end of the regex."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516317037, "post_id": 48331545, "comment_id": 83649318, "body": "I told you how to make the failure obvious. You obviously didn&#39;t try it, so why are you contradicting me? /// The fact that you don&#39;t even know the pitfalls of your approch just goes to show how complex it is. I recommend against using experimental <code>(?{ })</code> when is easily avoidable"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516317130, "post_id": 48331545, "comment_id": 83649348, "body": "Not sure what you mean, so you&#39;ll have to produce some code I can examine."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516317188, "post_id": 48331545, "comment_id": 83649369, "body": "Literally just put your code in a sub and call the sub twice."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516317238, "post_id": 48331545, "comment_id": 83649388, "body": "The whole thing? I&#39;ll try it and let you know."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516317401, "post_id": 48331545, "comment_id": 83649440, "body": "<code>(?{ })</code> captures at compile-time like a named sub (unlike <code>sub BLOCK</code> which captures at run-time). As such, it suffers from the same problem as nested named subs."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516318017, "post_id": 48331545, "comment_id": 83649615, "body": "I&#39;ve been away from Perl for a while. I added a sub for you. Not sure what you mean by <code>(?{ }) captures</code>, do you mean the <code>$^N</code> variable. It is runtime . There are definitely <i>scope</i> issues in Perl, but code constructs are pretty consistent."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516318629, "post_id": 48331545, "comment_id": 83649776, "body": "And, I guess you could put <code>$cnt,$key</code> local to the sub now. Added that feature."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516319548, "post_id": 48331545, "comment_id": 83650019, "body": "Capturing a variable is what allows a sub to reference a var even after it&#39;s gone out of scope.  <code>{ my $s = &quot;abc&quot;; sub f { say $s; } } f();</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516322234, "post_id": 48331545, "comment_id": 83650654, "body": "Well, I found this <code>Due to an unfortunate implementation issue, the Perl code contained in these blocks is treated as a compile time closure that can have seemingly bizarre consequences when used with lexically scoped variables inside of subroutines or loops. There are various workarounds for this, including simply using global variables instead.</code> and I guess I never used sub lexical scope before. I guess they fixed it anyway, since I don&#39;t see the those warnings (bizzarr behavior so to speak). Anyway, don&#39;t throw out the baby with the bathwater."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516322810, "post_id": 48331545, "comment_id": 83650771, "body": "Btw, to be honest, in the past I had seen this <code>will not stay shared at (re_eval 1) </code> a few times, and even with globally scoped vars. Seems to happen when you call some perl intrinsic functions. And, moving them around or using a different function fixes it. I&#39;d say for this case, it&#39;s all safe. Won&#39;t stop me from using code constructs, most needs are simple though."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 0, "last_activity_date": 1516321521, "last_edit_date": 1516321521, "creation_date": 1516315595, "answer_id": 48331545, "question_id": 48309575, "link": "https://stackoverflow.com/questions/48309575/perl-capturing-the-replaced-with-string/48331545#48331545", "title": "perl: capturing the replaced-with string", "body": "<p>I think any method other than re-starting the search from the start of the target<br>\nis <em>always</em> the better choice.  </p>\n\n<p>In that vein and, as an alternative, you can move the logic inside the regex<br>\nvia a <em>Code Construct</em> <code>(?{ code })</code> and leverage the fact that <code>$^N</code> contains<br>\nthe last capture content.  </p>\n\n<p>Perl  </p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n$Data::Dumper::Sortkeys = 1;\n\nmy $target = \"&lt;tag&gt;zero&lt;/tag&gt;\\n&lt;tag&gt;one&lt;/tag&gt;\\n&lt;tag&gt;two&lt;/tag&gt;\\n&lt;tag&gt;three&lt;/tag&gt;\";\n\nmy %cite;\nmy ($cnt,$key) = (0,'');\n\n$target =~ s/\n    &lt;tag&gt; (.*?) &lt;\\/tag&gt;\n    (?{\n      $key = sprintf(\"&amp;CITE%03d;\", $cnt++);\n      $cite{$key} = $^N;\n    })\n  /$key/xg;\n\nprint $target, \"\\n\";\n\nprint Dumper(\\%cite);\n</code></pre>\n\n<p>Output  </p>\n\n<pre><code>&amp;CITE000;\n&amp;CITE001;\n&amp;CITE002;\n&amp;CITE003;\n$VAR1 = {\n          '&amp;CITE000;' =&gt; 'zero',\n          '&amp;CITE001;' =&gt; 'one',\n          '&amp;CITE002;' =&gt; 'two',\n          '&amp;CITE003;' =&gt; 'three'\n        };\n</code></pre>\n\n<hr>\n\n<p>Edited/code by @Ikegami</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n$Data::Dumper::Sortkeys = 1;\n\nsub f {\n    my $target = \"&lt;tag&gt;zero&lt;/tag&gt;\\n&lt;tag&gt;one&lt;/tag&gt;\\n&lt;tag&gt;two&lt;/tag&gt;\\n&lt;tag&gt;three&lt;/tag&gt;\";\n\n    my %cite;\n    my ($cnt,$key) = (0,'');\n\n    $target =~ s/\n        &lt;tag&gt; (.*?) &lt;\\/tag&gt;\n        (?{\n          $key = sprintf(\"&amp;CITE%03d;\", $cnt++);\n          $cite{$key} = $^N;\n        })\n      /$key/xg;\n\n    print $target, \"\\n\";\n\n    print Dumper(\\%cite);\n}\n\nf() for 1..2;\n</code></pre>\n\n<p>Output  </p>\n\n<pre><code>Variable \"$key\" will not stay shared at (re_eval 1) line 2.\nVariable \"$cnt\" will not stay shared at (re_eval 1) line 2.\nVariable \"%cite\" will not stay shared at (re_eval 1) line 3.\n&amp;CITE000;\n&amp;CITE001;\n&amp;CITE002;\n&amp;CITE003;\n$VAR1 = {\n          '&amp;CITE000;' =&gt; 'zero',\n          '&amp;CITE001;' =&gt; 'one',\n          '&amp;CITE002;' =&gt; 'two',\n          '&amp;CITE003;' =&gt; 'three'\n        };\n\n\n\n\n$VAR1 = {};\n</code></pre>\n\n<p>This issue has been addressed in 5.18.</p>\n\n<hr>\n\n<p>Perl by @sln</p>\n\n<p>See, now I don't get that issue in version 5.20.<br>\nAnd, I don't believe I got it in 5.12 either.  </p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n$Data::Dumper::Sortkeys = 1;\n\nsub wrapper {\n   my ($targ, $href) = @_;\n   my ($cnt, $key) = (0,'');\n   $$targ =~ s/&lt;tag&gt;(.*?)&lt;\\/tag&gt;(?{ $key = sprintf(\"&amp;CITE%03d;\", $cnt++); $href-&gt;{$key} = $^N; })/$key/g;\n}\n\nmy ($target,%cite) = (\"&lt;tag&gt;zero&lt;/tag&gt;\\n&lt;tag&gt;one&lt;/tag&gt;\\n&lt;tag&gt;two&lt;/tag&gt;\\n&lt;tag&gt;three&lt;/tag&gt;\", ());\nwrapper( \\$target, \\%cite );\nprint $target, \"\\n\";\nprint Dumper(\\%cite);\n\n($target,%cite) = (\"&lt;tag&gt;zero&lt;/tag&gt;\\n&lt;tag&gt;one&lt;/tag&gt;\\n&lt;tag&gt;two&lt;/tag&gt;\\n&lt;tag&gt;three&lt;/tag&gt;\", ());\nwrapper( \\$target, \\%cite );\nprint $target, \"\\n\";\nprint Dumper(\\%cite);\n</code></pre>\n\n<p>Output  </p>\n\n<pre><code>&amp;CITE000;\n&amp;CITE001;\n&amp;CITE002;\n&amp;CITE003;\n$VAR1 = {\n          '&amp;CITE000;' =&gt; 'zero',\n          '&amp;CITE001;' =&gt; 'one',\n          '&amp;CITE002;' =&gt; 'two',\n          '&amp;CITE003;' =&gt; 'three'\n        };\n&amp;CITE000;\n&amp;CITE001;\n&amp;CITE002;\n&amp;CITE003;\n$VAR1 = {\n          '&amp;CITE000;' =&gt; 'zero',\n          '&amp;CITE001;' =&gt; 'one',\n          '&amp;CITE002;' =&gt; 'two',\n          '&amp;CITE003;' =&gt; 'three'\n        };\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5754171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c0a5b2b4419de8b4cb8e527bcb06e99?s=128&d=identicon&r=PG&f=1", "display_name": "user5754171", "link": "https://stackoverflow.com/users/5754171/user5754171"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1516321521, "creation_date": 1516221327, "question_id": 48309575, "link": "https://stackoverflow.com/questions/48309575/perl-capturing-the-replaced-with-string", "title": "perl: capturing the replaced-with string", "body": "<p>I have code in a loop similar to</p>\n\n<pre><code>for( my $i=0; $a =~ s/&lt;tag&gt;(.*?)&lt;\\/tag&gt;/sprintf(\"&amp;CITE%03d;\",$i)/e ; $i++ ){  \n    %cite{ $i } = $1;  \n    }\n</code></pre>\n\n<p>but instead of just the integer index, I want to make the keys of the hash the actual replaced-with text (placeholder \"&CITE001;\", etc.) without having to redo the sprintf().</p>\n\n<p>I was almost sure there was a way to do it (variable similar to $&amp; and such, but maybe I was thinking of vim's substitutions and not perl.  :)</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1516203224, "post_id": 48304606, "comment_id": 83594290, "body": "Simplified: the hashing algorithm works in a way that during the same execution of the program, the order for the items in a given hash is random but guaranteed to be the same. If the data structure changes, the order might change. It is not guaranteed to be the same when you call the program a second time."}], "answers": [{"tags": [], "owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "is_accepted": false, "score": 13, "last_activity_date": 1516203568, "creation_date": 1516203568, "answer_id": 48304812, "question_id": 48304606, "link": "https://stackoverflow.com/questions/48304606/hash-keys-and-values-in-the-right-order/48304812#48304812", "title": "Hash keys and values in the right order", "body": "<p>See <a href=\"https://perldoc.perl.org/functions/keys.html\" rel=\"noreferrer\">perldoc -f keys</a></p>\n\n<blockquote>\n  <p>So long as a given hash is unmodified you may rely on keys, values and each to repeatedly return the same order as each other.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1516211279, "last_edit_date": 1516211279, "creation_date": 1516205546, "answer_id": 48305464, "question_id": 48304606, "link": "https://stackoverflow.com/questions/48304606/hash-keys-and-values-in-the-right-order/48305464#48305464", "title": "Hash keys and values in the right order", "body": "<p>A hash is an array of linked lists. A hashing function converts the key into a number which is used as the index of the array element (\"bucket\") into which to store the value. More than one key can hash to the same index (\"collision\"), a situation handled by the linked lists.</p>\n\n<p>The iterator used by <code>keys</code>, <code>values</code> and <code>each</code> returns the elements in a order consistent with their location in the hash. I imagine it iterates over the linked list in the first bucket, then over the linked list in the second bucket, etc. The points is that it doesn't randomize the order in which it iterates over the elements of the hash. That's why the docs guarantee the following:</p>\n\n<blockquote>\n  <p>So long as a given hash is unmodified you may rely on keys, values and each to repeatedly return the same order as each other.</p>\n</blockquote>\n\n<p>What is \"random\"<sup>[1]</sup> is in which bucket number to which a key will hash. Each hash has a random secret number that perturbs the hashing function. This causes the order of the elements in a hash to be different for each hash and for each run of a program.<sup>[2]</sup></p>\n\n<p>Adding elements to a hash can cause the number of buckets to increase, and it can cause trigger the secret number to change (if one of the linked lists becomes abnormally long). Both of these will change the order of the elements in that hash.</p>\n\n<pre><code>$ perl -le'\n   my %h1 = map { $_ =&gt; 1 } \"a\"..\"j\";\n   my %h2 = map { $_ =&gt; 1 } \"a\"..\"j\";\n   print keys(%$_) for \\%h1, \\%h1, \\%h2, \\%h2;\n'\nhjfeadbigc\nhjfeadbigc\nbdgcifjhae\nbdgcifjhae\n\n$ perl -le'\n   my %h1 = map { $_ =&gt; 1 } \"a\"..\"j\";\n   my %h2 = map { $_ =&gt; 1 } \"a\"..\"j\";\n   print keys(%$_) for \\%h1, \\%h1, \\%h2, \\%h2;\n'\ndcahigjbfe\ndcahigjbfe\ngihacdefbj\ngihacdefbj\n</code></pre>\n\n<hr>\n\n<ol>\n<li>It's not quite random. If you insert two elements in a hash, the second element has a greater than 50% chance of being returned after the first by the iterator.</li>\n<li>In older versions of Perl, things weren't quite as random.</li>\n</ol>\n"}], "owner": {"reputation": 747, "user_id": 2474912, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/i6p16.gif?s=128&g=1", "display_name": "JohnnyLoo", "link": "https://stackoverflow.com/users/2474912/johnnyloo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "accepted_answer_id": 48305464, "answer_count": 2, "score": 9, "last_activity_date": 1516211279, "creation_date": 1516202954, "last_edit_date": 1516206371, "question_id": 48304606, "link": "https://stackoverflow.com/questions/48304606/hash-keys-and-values-in-the-right-order", "title": "Hash keys and values in the right order", "body": "<p>I've seen many times the following piece of code to join a hash to another hash</p>\n\n<pre><code>%hash1 = ('one' =&gt; \"uno\");\n%hash2 = ('two' =&gt; \"dos\", 'three' =&gt; \"tres\");\n\n@hash1{keys %hash2} = values %hash2;\n</code></pre>\n\n<p>I thought that every time the \"values\" or \"keys\" function is called, their output order was random. If this is true, how does the statement above gets the keys and values in the right order on both sides?</p>\n\n<p>In other words, why there is not a chance of getting 'two' => 'tres' in %hash1 after merging both hashes? \nIs Perl smart enough to know that if \"keys\" and \"values\" are called on the same line, then keys and values must be given in the same order?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 6, "creation_date": 1516202574, "post_id": 48304117, "comment_id": 83593804, "body": "There is no JSON in your question. Those are Perl data structures. They can be converted to JSON, but your question as it stands has nothing to do with JSON. From your title, I was expecting some obscure regex magic that would avoid full parsing. I&#39;m glad it&#39;s not."}, {"owner": {"reputation": 9501, "user_id": 55366, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/89489696e09f6d1307ce5726c35a2c3e?s=128&d=identicon&r=PG", "display_name": "Orjanp", "link": "https://stackoverflow.com/users/55366/orjanp"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1516259443, "post_id": 48304117, "comment_id": 83616625, "body": "Hehe. In my original code I decoded a json string and was parsing it. So I was hung up on that, and put the json tag here. But you are right, this example does not."}], "answers": [{"tags": [], "owner": {"reputation": 494, "user_id": 52284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b99ee71d7a5df9d94be418c0d21723c2?s=128&d=identicon&r=PG", "display_name": "atomicstack", "link": "https://stackoverflow.com/users/52284/atomicstack"}, "is_accepted": false, "score": 1, "last_activity_date": 1516211404, "last_edit_date": 1516211404, "creation_date": 1516202070, "answer_id": 48304309, "question_id": 48304117, "link": "https://stackoverflow.com/questions/48304117/perl-iterate-through-a-json-string-get-key-value-object-in-one-variable/48304309#48304309", "title": "Perl, iterate through a json string, get key/value object in one variable", "body": "<p>There are many ways to do what you want, here's one way:</p>\n\n<p><code>my %slice = map { $_ =&gt; $grades-&gt;{$_} } qw/Petibar/</code></p>\n\n<p>The <code>qw//</code> list at the end means you can easily add more keys to extract from the same structure, if needed.</p>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1516202450, "creation_date": 1516202450, "answer_id": 48304440, "question_id": 48304117, "link": "https://stackoverflow.com/questions/48304117/perl-iterate-through-a-json-string-get-key-value-object-in-one-variable/48304440#48304440", "title": "Perl, iterate through a json string, get key/value object in one variable", "body": "<p>If your Perl is at least version 5.20, you can use <a href=\"https://perldoc.perl.org/perldata.html#Key%2FValue-Hash-Slices\" rel=\"nofollow noreferrer\">a hash slice</a> for this. </p>\n\n<pre><code>my %foo = qw/a 1 c 2 e 3/;\nmy %bar = %foo{qw/a c/};\n</code></pre>\n\n<p>Yes, that's right, there is a <code>%</code> sigil in front of the <code>{}</code>. There can be a list inside the curly braces.</p>\n\n<p>This is what <code>%bar</code> will contain.</p>\n\n<pre><code>(\n    a =&gt;  1,\n    c =&gt;  2\n)\n</code></pre>\n\n<p>Typically that would be done with a hash, but since you've got a hash reference, you need to dereference, and then create a new anonymous reference that the key/value pair(s) go into.</p>\n\n<pre><code>my $slice = { %{$grades}{PetiBar} };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "is_accepted": true, "score": 2, "last_activity_date": 1516203173, "creation_date": 1516203173, "answer_id": 48304681, "question_id": 48304117, "link": "https://stackoverflow.com/questions/48304117/perl-iterate-through-a-json-string-get-key-value-object-in-one-variable/48304681#48304681", "title": "Perl, iterate through a json string, get key/value object in one variable", "body": "<p>The following does exactly what you asked for, but see the other answers if you need something more flexible:</p>\n\n<pre><code>my $petibar = { PetiBar =&gt; $grades-&gt;{PetiBar} };\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9501, "user_id": 55366, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/89489696e09f6d1307ce5726c35a2c3e?s=128&d=identicon&r=PG", "display_name": "Orjanp", "link": "https://stackoverflow.com/users/55366/orjanp"}, "edited": false, "score": 1, "creation_date": 1516693416, "post_id": 48342079, "comment_id": 83780470, "body": "Nice, this will come in handy."}], "tags": [], "owner": {"reputation": 1073, "user_id": 1039320, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/28ba137ea03056ffb3a2e6db49ac29cd?s=128&d=identicon&r=PG", "display_name": "jreisinger", "link": "https://stackoverflow.com/users/1039320/jreisinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1516368040, "creation_date": 1516368040, "answer_id": 48342079, "question_id": 48304117, "link": "https://stackoverflow.com/questions/48304117/perl-iterate-through-a-json-string-get-key-value-object-in-one-variable/48342079#48342079", "title": "Perl, iterate through a json string, get key/value object in one variable", "body": "<p>You can set <code>Data::Dumper</code>'s <a href=\"http://perldoc.perl.org/Data/Dumper.html#Configuration-Variables-or-Methods\" rel=\"nofollow noreferrer\">configuration variable</a> <code>$Data::Dumper::Varname</code> to the value of the key:</p>\n\n<pre><code>foreach my $key ( keys %$grades ) {\n    $Data::Dumper::Varname = $key;\n    ## remove '#' to enable the if clause\n    print Dumper $grades-&gt;{$key} # if $key eq \"PetiBar\";\n}\n</code></pre>\n\n<p>This will result in the following output:</p>\n\n<pre><code>$FooBar1 = {\n             'Mathematics' =&gt; 97,\n             'Literature' =&gt; 67\n           };\n$PetiBar1 = {\n              'Mathematics' =&gt; 82,\n              'Literature' =&gt; 88,\n              'Art' =&gt; 99\n            };\n</code></pre>\n"}], "owner": {"reputation": 9501, "user_id": 55366, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/89489696e09f6d1307ce5726c35a2c3e?s=128&d=identicon&r=PG", "display_name": "Orjanp", "link": "https://stackoverflow.com/users/55366/orjanp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 912, "favorite_count": 0, "accepted_answer_id": 48304681, "answer_count": 4, "score": 1, "last_activity_date": 1516368040, "creation_date": 1516201473, "last_edit_date": 1516259506, "question_id": 48304117, "link": "https://stackoverflow.com/questions/48304117/perl-iterate-through-a-json-string-get-key-value-object-in-one-variable", "title": "Perl, iterate through a json string, get key/value object in one variable", "body": "<p>Have been looking for a way to get both the key\\value from a json string without having to build a new json string based on the pair.</p>\n\n<p>Having the following example code: (I have modified code from <a href=\"https://perlmaven.com/multi-dimensional-hashes\" rel=\"nofollow noreferrer\">Here</a>)</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Data::Dumper qw(Dumper);\n\nmy $grades = {'PetiBar' =&gt; {\n                          'Mathematics' =&gt; 82,\n                          'Art' =&gt; 99,\n                          'Literature' =&gt; 88\n                        },\n          'FooBar' =&gt; {\n                         'Mathematics' =&gt; 97,\n                         'Literature' =&gt; 67\n                       }\n        };\n</code></pre>\n\n<p>The result I'm looking after is:</p>\n\n<pre><code>'PetiBar' =&gt; {\n             'Mathematics' =&gt; 82,\n             'Art' =&gt; 99,\n             'Literature' =&gt; 88\n             }\n</code></pre>\n\n<p>This will give both objects, not only one:</p>\n\n<pre><code>foreach my $val ($grades) {\n    print Dumper $val;\n}\n</code></pre>\n\n<p>This will only give me the values without the key:</p>\n\n<pre><code>foreach my $key (keys %{$grades}) {\n    print Dumper $grades-&gt;{$key};\n}\n</code></pre>\n\n<p>How do I get both in a variable? Do I have to take the key and value, and build a new json string from them?</p>\n\n<p>I have some running code <a href=\"http://jdoodle.com/a/jKy\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": ["perl", "awk"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1516204448, "post_id": 48304042, "comment_id": 83595141, "body": "Are the related records always next to each other in the input file, or could line 10 contain <code>1 299 309  DDD A@XXX  345</code> and line 20 contain <code>1 299 309  DDD A@XXX  678</code> while data lines starting with <code>2</code> (so they don&#39;t match either line 10 or 20) could appear on lines 11-19?  It&#39;s a lot easier to deal with if the related lines are adjacent, but that could be a fluke of the example data.  Also, will you ever get more than two records in a row matching?  Could you have a required output line like <code>1 299 309  DDD A@ZZZ  345,678,901,234</code>?"}, {"owner": {"reputation": 806, "user_id": 3932463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9770a533e1ea10e8dd5693dc562402c0?s=128&d=identicon&r=PG&f=1", "display_name": "bapors", "link": "https://stackoverflow.com/users/3932463/bapors"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1516205206, "post_id": 48304042, "comment_id": 83595670, "body": "Yes I do. It can get to 7-8 records"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1516205326, "post_id": 48304042, "comment_id": 83595756, "body": "And if you get 7-8 records in a row, will they all be together in the input?  I note that you have two different sets of values in columns 1-4 with the same value <code>A@QQQ</code> in column 5, and they get treated together (both end up with the concatenated values from column 5."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1516205034, "post_id": 48304316, "comment_id": 83595554, "body": "Two passes over the data file works provided you have a data file.  It means you can&#39;t take the input direct from a pipe, though \u2014 or a terminal."}], "tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 1, "last_activity_date": 1516202087, "creation_date": 1516202087, "answer_id": 48304316, "question_id": 48304042, "link": "https://stackoverflow.com/questions/48304042/concatenate-the-columns-if-there-is-a-match-in-the-same-file-perl-awk/48304316#48304316", "title": "Concatenate the columns if there is a match in the same file perl/awk", "body": "<p>Following <code>awk</code> may help you in same.</p>\n\n<pre><code>awk 'FNR==NR{a[$5]=a[$5] &amp;&amp; $NF~/[0-9]+/?a[$5]\",\"$NF:($NF~/[0-9]+/?$NF:a[$5]);next} {$NF=$5 in a?$NF!~/[0-9]+/?$5 FS a[$5]:a[$5]:$5;} 1'  Input_file  Input_file\n</code></pre>\n\n<p><strong><em>EDIT:</em></strong> Adding a non-one liner form of solution too now. Will add explanation soon too here.</p>\n\n<pre><code>awk '\nFNR==NR{\n  a[$5]=a[$5] &amp;&amp; $NF~/[0-9]+/?a[$5]\",\"$NF:($NF~/[0-9]+/?$NF:a[$5]);\n  next\n}\n{\n  $NF=$5 in a?$NF!~/[0-9]+/?$5 FS a[$5]:a[$5]:$5;\n}\n1\n'   Input_file  Input_file\n</code></pre>\n\n<p>Output will be as follows.</p>\n\n<pre><code>1 101 111 BCX A@WWW 123\n1 298 306 CCC A@QQQ 234\n1 299 308 CCD A@QQQ 234\n1 299 309 DDD A@ZZZ 345,678\n1 299 309 DDD A@ZZZ 345,678\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1516205067, "post_id": 48304481, "comment_id": 83595571, "body": "Two passes over the data file works provided you have a data file.  It means you can&#39;t take the input direct from a pipe, though \u2014 or a terminal."}], "tags": [], "owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "is_accepted": true, "score": 1, "last_activity_date": 1516202565, "creation_date": 1516202565, "answer_id": 48304481, "question_id": 48304042, "link": "https://stackoverflow.com/questions/48304042/concatenate-the-columns-if-there-is-a-match-in-the-same-file-perl-awk/48304481#48304481", "title": "Concatenate the columns if there is a match in the same file perl/awk", "body": "<pre><code>awk 'FNR==NR{\n       if($6!=\"\")\n       a[$5]=($5 in a ? a[$5] \",\":\"\")$6;\n       next\n     }\n     {\n       $6=a[$5]\n     }1' infile infile\n</code></pre>\n\n<p>Test Results:</p>\n\n<pre><code>$ cat f\n1 101 111  BCX A@WWW  123\n1 298 306  CCC A@QQQ  234\n1 299 308  CCD A@QQQ  \n1 299 309  DDD A@ZZZ  345\n1 299 309  DDD A@ZZZ  678\n\n$ awk 'FNR==NR{if($6!=\"\")a[$5]=($5 in a ? a[$5] \",\":\"\")$6;next}{$6=a[$5]}1' f f\n1 101 111 BCX A@WWW 123\n1 298 306 CCC A@QQQ 234\n1 299 308 CCD A@QQQ 234\n1 299 309 DDD A@ZZZ 345,678\n1 299 309 DDD A@ZZZ 345,678\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 806, "user_id": 3932463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9770a533e1ea10e8dd5693dc562402c0?s=128&d=identicon&r=PG&f=1", "display_name": "bapors", "link": "https://stackoverflow.com/users/3932463/bapors"}, "edited": false, "score": 0, "creation_date": 1516266277, "post_id": 48304802, "comment_id": 83620176, "body": "This code loses the first 4 columns. They are different but it duplicates it"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "reply_to_user": {"reputation": 806, "user_id": 3932463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9770a533e1ea10e8dd5693dc562402c0?s=128&d=identicon&r=PG&f=1", "display_name": "bapors", "link": "https://stackoverflow.com/users/3932463/bapors"}, "edited": false, "score": 0, "creation_date": 1516275305, "post_id": 48304802, "comment_id": 83625866, "body": "This is what was asked <i>&quot;I am trying to merge the 6th column, if the 5th column is the same.&quot;</i>"}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 2, "last_activity_date": 1516204880, "last_edit_date": 1516204880, "creation_date": 1516203540, "answer_id": 48304802, "question_id": 48304042, "link": "https://stackoverflow.com/questions/48304042/concatenate-the-columns-if-there-is-a-match-in-the-same-file-perl-awk/48304802#48304802", "title": "Concatenate the columns if there is a match in the same file perl/awk", "body": "<p>another <code>awk</code>, without changing the input spacing</p>\n\n<pre><code>$ awk 'NR==FNR {a[$5]=$5 in a?a[$5] ($6==\"\"?\"\":\",\"$6):$0; next} \n               {print a[$5]}' file{,}\n\n1 101 111  BCX A@WWW  123\n1 298 306  CCC A@QQQ  234\n1 298 306  CCC A@QQQ  234\n1 299 309  DDD A@ZZZ  345,678\n1 299 309  DDD A@ZZZ  345,678\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1516210447, "creation_date": 1516210447, "answer_id": 48306878, "question_id": 48304042, "link": "https://stackoverflow.com/questions/48304042/concatenate-the-columns-if-there-is-a-match-in-the-same-file-perl-awk/48306878#48306878", "title": "Concatenate the columns if there is a match in the same file perl/awk", "body": "<p>It's tagged perl, so I feel we need a perl answer:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\n#read all the rows from STDIN or specified file into an array of arrays. \nmy @rows = map { [split] } &lt;&gt;; \n\n#define a hash to look for lines with matching keys. \nmy %value_lookup;\n#iterate the rows.\nforeach my $row ( @rows ) {\n   #check if there's a '6th field' (one of the examples is blank)\n   if ( $row -&gt; [5] ) { \n     #push it into a lookup list if there is one. (might only be one element for non dupes. \n     push ( @{$value_lookup{$row -&gt; [4]}}, $row -&gt; [5]);\n  }\n}\n\n#iterate each row, replacing the 6th element (index 5)\n#with whatever is in the value lookup above. \n#or blank, if relevant. \nforeach my $row ( @rows ) {\n   $row -&gt; [5] = join ( \",\", @{$value_lookup{$row-&gt;[4]}});\n   #print output, tab separated. \n   print join (\"\\t\", @$row ),\"\\n\";\n}\n</code></pre>\n\n<p>This is a more exhaustive solution, as it'll work with any line ordering. If you can rely on it just being consecutive lines being merged, it simplifies somewhat. </p>\n\n<p>With your input, this gives:</p>\n\n<pre><code>1   101 111 BCX A@WWW   123\n1   298 306 CCC A@QQQ   234\n1   299 308 CCD A@QQQ   234\n1   299 309 DDD A@ZZZ   345,678\n1   299 309 DDD A@ZZZ   345,678\n</code></pre>\n"}], "owner": {"reputation": 806, "user_id": 3932463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9770a533e1ea10e8dd5693dc562402c0?s=128&d=identicon&r=PG&f=1", "display_name": "bapors", "link": "https://stackoverflow.com/users/3932463/bapors"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 1, "accepted_answer_id": 48304481, "answer_count": 4, "score": 0, "last_activity_date": 1516210447, "creation_date": 1516201275, "last_edit_date": 1516204272, "question_id": 48304042, "link": "https://stackoverflow.com/questions/48304042/concatenate-the-columns-if-there-is-a-match-in-the-same-file-perl-awk", "title": "Concatenate the columns if there is a match in the same file perl/awk", "body": "<p>I have a file as following:\nfile1.txt</p>\n\n<pre><code>1 101 111  BCX A@WWW  123\n1 298 306  CCC A@QQQ  234\n1 299 308  CCD A@QQQ  \n1 299 309  DDD A@ZZZ  345\n1 299 309  DDD A@ZZZ  678\n</code></pre>\n\n<p>I am trying to merge the 6th column, if the 5th column is the same.\nThe output should be:</p>\n\n<pre><code>1 101 111  BCX A@WWW  123\n1 298 306  CCC A@QQQ  234\n1 299 308  CCD A@QQQ  234\n1 299 309  DDD A@ZZZ  345,678\n1 299 309  DDD A@ZZZ  345,678\n</code></pre>\n\n<p>So if 5th column is the same, the 6th column should be the same.</p>\n\n<p>What I am trying makes me lose data as it doesn't keep the line if 6th column is empty:</p>\n\n<pre><code>perl -lane 'if($.==1){@a=@F;next} if($F[4]eq$a[4]){$a[5].=\";$F[5]\";}else{for($i=0;$i&lt;@a;$i++){printf \"\\t%s\",$a[$i]};print\"\";@a=@F}\n            END{for($i=0;$i&lt;@a;$i++){printf \"\\t%s\",$a[$i]};print\"\"}' file1.txt \n    1   101 111 BCX A@WWW   123\n    1   298 306 CCC A@QQQ   234;\n    1   299 309 DDD A@ZZZ   345;678\n</code></pre>\n\n<p>How can I keep all lines?</p>\n"}, {"tags": ["function", "perl"], "answers": [{"comments": [{"owner": {"reputation": 158, "user_id": 4163998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100003763206409/picture?type=large", "display_name": "Ricardo Lucca", "link": "https://stackoverflow.com/users/4163998/ricardo-lucca"}, "edited": false, "score": 0, "creation_date": 1516201821, "post_id": 48304085, "comment_id": 83593228, "body": "Thanks, I thought that maybe perl has something like None (I dont have a value) and NULL (I have a value that is no value)."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 158, "user_id": 4163998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100003763206409/picture?type=large", "display_name": "Ricardo Lucca", "link": "https://stackoverflow.com/users/4163998/ricardo-lucca"}, "edited": false, "score": 3, "creation_date": 1516204820, "post_id": 48304085, "comment_id": 83595397, "body": "@RicardoLucca it does have <code>undef</code> which is similar to those, but that doesn&#39;t have anything to do with this case."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 6, "last_activity_date": 1516201382, "creation_date": 1516201382, "answer_id": 48304085, "question_id": 48303983, "link": "https://stackoverflow.com/questions/48303983/why-a-function-without-returning-value-has-a-value-in-perl/48304085#48304085", "title": "Why a function without returning value has a value in perl?", "body": "<p><a href=\"http://p3rl.org/print\" rel=\"noreferrer\">print</a> is documented to return a value:</p>\n\n<blockquote>\n  <p>Returns true if successful.</p>\n</blockquote>\n\n<p>And subroutines are documented to return the last expression evaluated when no explicit <a href=\"http://p3rl.org/return\" rel=\"noreferrer\">return</a> is present.</p>\n\n<blockquote>\n  <p>(In the absence of an explicit return, a subroutine, eval, or do FILE automatically returns the value of the last expression evaluated.)</p>\n</blockquote>\n"}], "owner": {"reputation": 158, "user_id": 4163998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100003763206409/picture?type=large", "display_name": "Ricardo Lucca", "link": "https://stackoverflow.com/users/4163998/ricardo-lucca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 48304085, "answer_count": 1, "score": 0, "last_activity_date": 1516201382, "creation_date": 1516201084, "question_id": 48303983, "link": "https://stackoverflow.com/questions/48303983/why-a-function-without-returning-value-has-a-value-in-perl", "title": "Why a function without returning value has a value in perl?", "body": "<p>I'm trying to undestand why a function without a value being returned has a value defined. Could someone explain?</p>\n\n<p>This is the code:</p>\n\n<pre><code>perl -le 'sub xxx { print 2; } print defined(xxx);'\n</code></pre>\n\n<p>The console output is:</p>\n\n<pre><code>2\n1\n</code></pre>\n\n<p>I was expecting that the value returned was undef and a defined value.... </p>\n\n<pre><code>$ perl -v\n\nThis is perl 5, version 22, subversion 1 (v5.22.1) built for x86_64-linux-gnu-thread-multi\n</code></pre>\n"}, {"tags": ["linux", "perl", "perl-module"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1516197902, "post_id": 48302869, "comment_id": 83590563, "body": "Try taking out the space after <code>-I</code>, I think you are effectively losing the directory you are trying to add here because only a single option string is supported on the shebang line."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1516198044, "post_id": 48302869, "comment_id": 83590681, "body": "And as usual, <code>use strict; use warnings;</code> yada yada."}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 1, "creation_date": 1516198155, "post_id": 48302869, "comment_id": 83590760, "body": "Works for me with CentOS 7.4.1708. How did you install Shell.pm?"}, {"owner": {"reputation": 1, "user_id": 9229811, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-z8ygoPxsPe4/AAAAAAAAAAI/AAAAAAAACfs/jhaI_vmlIRE/photo.jpg?sz=128", "display_name": "Sebastao", "link": "https://stackoverflow.com/users/9229811/sebastao"}, "edited": false, "score": 0, "creation_date": 1516202877, "post_id": 48302869, "comment_id": 83594037, "body": "Removing space after -I has no effect"}, {"owner": {"reputation": 1, "user_id": 9229811, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-z8ygoPxsPe4/AAAAAAAAAAI/AAAAAAAACfs/jhaI_vmlIRE/photo.jpg?sz=128", "display_name": "Sebastao", "link": "https://stackoverflow.com/users/9229811/sebastao"}, "edited": false, "score": 0, "creation_date": 1516202989, "post_id": 48302869, "comment_id": 83594107, "body": "Same script is OK on a previous version of Centos. Maybe troubles with Perl installation. I am going to see the admin !"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1516212918, "post_id": 48302869, "comment_id": 83600313, "body": "You realize that this &quot;<a href=\"http://search.cpan.org/~ferreira/Shell-0.73/Shell.pm\" rel=\"nofollow noreferrer\">shouldn&#39;t be used for production programs</a>&quot; ?  Don&#39;t &quot;<i>rewrite [...] with <code>system</code></i>&quot; -- use another module, out of almost half-dozen well established ones."}, {"owner": {"reputation": 1, "user_id": 9229811, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-z8ygoPxsPe4/AAAAAAAAAAI/AAAAAAAACfs/jhaI_vmlIRE/photo.jpg?sz=128", "display_name": "Sebastao", "link": "https://stackoverflow.com/users/9229811/sebastao"}, "edited": false, "score": 0, "creation_date": 1516267630, "post_id": 48302869, "comment_id": 83621065, "body": "Perl is Installed with Centos kickstart, CPAN with yum"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9229811, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-z8ygoPxsPe4/AAAAAAAAAAI/AAAAAAAACfs/jhaI_vmlIRE/photo.jpg?sz=128", "display_name": "Sebastao", "link": "https://stackoverflow.com/users/9229811/sebastao"}, "is_accepted": false, "score": 0, "last_activity_date": 1516281381, "creation_date": 1516281381, "answer_id": 48322293, "question_id": 48302869, "link": "https://stackoverflow.com/questions/48302869/package-shell-system-commands-doesnt-work-with-centos-7-4/48322293#48322293", "title": "package Shell: System commands doesn&#39;t work with Centos 7.4", "body": "<p>Finally I succeeded to make it work !\nInstallation was not quite good.</p>\n\n<p>I had to run : </p>\n\n<pre><code>cpan App::cpanminus\n</code></pre>\n\n<p>then</p>\n\n<pre><code>cpanm Shell\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9229811, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-z8ygoPxsPe4/AAAAAAAAAAI/AAAAAAAACfs/jhaI_vmlIRE/photo.jpg?sz=128", "display_name": "Sebastao", "link": "https://stackoverflow.com/users/9229811/sebastao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516281381, "creation_date": 1516197411, "last_edit_date": 1516215736, "question_id": 48302869, "link": "https://stackoverflow.com/questions/48302869/package-shell-system-commands-doesnt-work-with-centos-7-4", "title": "package Shell: System commands doesn&#39;t work with Centos 7.4", "body": "<p>Shell module, Shell.pm, does not seem to run shell commands with Centos 7.4.</p>\n\n<p>For instance following script is OK with Centos 6.4:</p>\n\n<pre><code>#!/usr/bin/perl\nuse Shell qw(ps);\n\n$cmd=ps;\nprint  $cmd . \"\\n\";\n</code></pre>\n\n<p>Result is as expected:</p>\n\n<pre><code>PID TTY          TIME CMD\n29090 pts/1    00:00:00 bash\n29325 pts/1    00:00:00 test.pm\n29326 pts/1    00:00:00 ps\n</code></pre>\n\n<p>But with Centos 7.4 </p>\n\n<pre><code>#!/usr/bin/perl -I /usr/share/perl5/CPAN\n\nuse Shell qw(ps);\n\n$cmd=ps;\nprint  $cmd . \"\\n\";\n</code></pre>\n\n<p>Result is:</p>\n\n<pre><code>ps\n</code></pre>\n\n<p>If i add to the previous script:</p>\n\n<pre><code>cat(\"/etc/passwd\");\n</code></pre>\n\n<p>Following error is raised:</p>\n\n<pre><code>Undefined subroutine &amp;main::cat called at ./test.pm line 10\n</code></pre>\n\n<p>With a real script none of system commands are well interpreted. Should I  rewrite everything with <code>system('command')</code>!?</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 2, "creation_date": 1516196916, "post_id": 48300211, "comment_id": 83589933, "body": "Have you added <code>use warnings; use strict;</code> to your code?"}, {"owner": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1516199105, "post_id": 48300211, "comment_id": 83591387, "body": "No, but I&#39;m adding it now."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1516199758, "post_id": 48300211, "comment_id": 83591842, "body": "Probably unrelated, but I noticed that the Reuse parameter has been deprecated in favor of ReuseAddr: <a href=\"https://perldoc.perl.org/IO/Socket/INET.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/IO/Socket/INET.html</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1516210222, "post_id": 48300211, "comment_id": 83598808, "body": "Start by adding <code>use strict; use warnings qw( all );</code> and <i>properly</i> scoping your variables using <code>my</code>. /// You mentioned signals. Make you sure you don&#39;t enable unsafe signals."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1516215025, "post_id": 48300211, "comment_id": 83601381, "body": "Then split that statement? <code>my $addr = $sock-&gt;peerhost(); $clients-&gt;{$addr} = 1;</code>"}, {"owner": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "edited": false, "score": 0, "creation_date": 1516274328, "post_id": 48300211, "comment_id": 83625320, "body": "Thank all of you, I did all of these, now I just have to wait..."}, {"owner": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "edited": false, "score": 0, "creation_date": 1530183801, "post_id": 48300211, "comment_id": 89150807, "body": "So many months have passed and the error never returned... It&#39;s a mistery."}, {"owner": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "edited": false, "score": 0, "creation_date": 1545217862, "post_id": 48300211, "comment_id": 94547426, "body": "Finally an error appeared, it says: <code>Use of uninitialized value $addr in hash element</code> at the line with <code>$clients-&gt;{$addr} = 1;</code> That would mean that $sock-&gt;peerhost() returns undef. Anyone knows how is that possible?"}], "answers": [{"tags": [], "owner": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "is_accepted": false, "score": 1, "last_activity_date": 1605535485, "creation_date": 1605535485, "answer_id": 64859510, "question_id": 48300211, "link": "https://stackoverflow.com/questions/48300211/perl-modification-of-a-read-only-value-attempted-for-hash/64859510#64859510", "title": "Perl Modification of a read-only value attempted for hash", "body": "<p>After a lot of investigation I found the answer. It can happen that the connection is lost between accept() and peerhost(). In this case the peeerhost() function's return value is not suitable as a hash key. The solution is very simple, if peerhost() returns a &quot;false&quot; ignore the connection alltogether.</p>\n"}], "owner": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1605535485, "creation_date": 1516188946, "question_id": 48300211, "link": "https://stackoverflow.com/questions/48300211/perl-modification-of-a-read-only-value-attempted-for-hash", "title": "Perl Modification of a read-only value attempted for hash", "body": "<p>I have a server that also counts the number of distinct IPs connected in a minute. I get a \"Modification of a read-only value attempted\" in the marked line in the code below:  </p>\n\n<pre><code>$lsock=new IO::Socket::INET(LocalPort=&gt;$port,Proto=&gt;'tcp',Listen=&gt;1,Reuse=&gt;1);\n$clients={};\nwhile (1) {\n    $sock=$lsock-&gt;accept();\n    if ($sock) {\n        $clients-&gt;{$sock-&gt;peerhost()}=1; # THIS LINE !!!\n        ...\n    }\n}\n\n# then later from an alarm signal I do:\nsub save_stats {\n    my $cnt=scalar keys %$clients;\n    $clients={};\n    ...\n}\n</code></pre>\n\n<p>The error appears very rarely, once a month or less, but it's driving me insane, can someone please explain it to me why and what can I do?</p>\n"}, {"tags": ["perl", "perl-xs", "perlapi"], "answers": [{"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1516260509, "post_id": 48309088, "comment_id": 83617159, "body": "It seems every current thing is available as <code>PL_cur*</code>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1516304226, "last_edit_date": 1516304226, "creation_date": 1516219235, "answer_id": 48309088, "question_id": 48299848, "link": "https://stackoverflow.com/questions/48299848/how-to-get-access-to-current-context-from-xs/48309088#48309088", "title": "How to get access to current context from XS?", "body": "<p>Copied from <a href=\"https://perl5.git.perl.org/perl.git/blob/v5.26.1:/util.c#l1424\" rel=\"nofollow noreferrer\"><code>mess_sv</code></a> (called by Perl API functions <code>warn</code> and <code>croak</code>, which append line information like the Perl functions <code>warn</code> and <code>die</code>):</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw( say );\n\nuse Inline C =&gt; &lt;&lt;'__EOS__';\n\nvoid testing() {\n    dXSARGS;\n\n    /*\n     * Try and find the file and line for PL_op.  This will usually be\n     * PL_curcop, but it might be a cop that has been optimised away.  We\n     * can try to find such a cop by searching through the optree star ting\n     * from the sibling of PL_curcop.\n     */\n    if (PL_curcop) {\n        const COP *cop =\n            Perl_closest_cop(aTHX_ PL_curcop, OpSIBLING(PL_curcop), PL_op, FALSE);\n        if (!cop)\n            cop = PL_curcop;\n\n        if (CopLINE(cop)) {\n            EXTEND(SP, 2);\n            mPUSHs(newSVpv(OutCopFILE(cop), 0));\n            mPUSHs(newSViv((IV)CopLINE(cop)));\n            XSRETURN(2);\n        }\n    }\n\n    XSRETURN(0);\n}\n\n__EOS__\n\nsay join \":\", testing();\n</code></pre>\n\n<p>A little bit about <code>PL_curcop</code> <a href=\"https://perl5.git.perl.org/perl.git/blob/v5.26.1:/cop.h#l9\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 48309088, "answer_count": 1, "score": 2, "last_activity_date": 1516304226, "creation_date": 1516187856, "question_id": 48299848, "link": "https://stackoverflow.com/questions/48299848/how-to-get-access-to-current-context-from-xs", "title": "How to get access to current context from XS?", "body": "<p>When a user calls <code>XS</code> from <code>main::</code> package we can not use</p>\n\n<pre><code>caller_cx(0, NULL);\n</code></pre>\n\n<p>because there is no frames for <code>main::</code> and for <code>XSUB</code> <a href=\"https://perldoc.perl.org/perlapi.html#caller_cx\" rel=\"nofollow noreferrer\">DOC</a></p>\n\n<blockquote>\n  <p>Note that XSUBs don't get a stack frame, so C will return information for the immediately-surrounding Perl code</p>\n</blockquote>\n\n<p>How to get the <code>file:line</code> info the <code>XSUB</code> is called from, hints for <code>main::</code> scope etc. info?</p>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1516184938, "post_id": 48298769, "comment_id": 83582114, "body": "Bareword &quot;example&quot; not allowed while &quot;strict subs&quot; in use at ./1.pl line 5. Bareword &quot;txt&quot; not allowed while &quot;strict subs&quot; in use at ./1.pl line 5."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1516185011, "creation_date": 1516185011, "answer_id": 48298889, "question_id": 48298769, "link": "https://stackoverflow.com/questions/48298769/reading-a-file-with-fixed-size-column/48298889#48298889", "title": "Reading a file with fixed size column", "body": "<p>The spaces are still there, but they are rendered as one space by the browser. Use <code>&lt;pre&gt;</code> to display them exactly as in the input.</p>\n"}], "owner": {"reputation": 141, "user_id": 3297371, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8970d935086faf17d72e5df204e96edd?s=128&d=identicon&r=PG&f=1", "display_name": "Cris", "link": "https://stackoverflow.com/users/3297371/cris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 48298889, "answer_count": 1, "score": -2, "last_activity_date": 1516185360, "creation_date": 1516184677, "last_edit_date": 1516185360, "question_id": 48298769, "link": "https://stackoverflow.com/questions/48298769/reading-a-file-with-fixed-size-column", "title": "Reading a file with fixed size column", "body": "<p>using perl CGI  I'm trying to read from a file with fixed width columns and insert each column value into an array.\nI thought to rea the file per line and then with substr extract each column.\nThe number of column is fixed and each column has a different width, space is always separating 2 columns but blank space are also used inside the column values an example below (4 column)</p>\n\n<pre><code>this is filed1       field2   this is nextfield3 field4\nline2field1          l2field2 field3             and field4 line2\nfirst field          second   third              fourth\n</code></pre>\n\n<p>The problem is when i read the file the multiple space are automatically replaced by a single space see the example below</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict; \nuse diagnostics;\nuse warnings;\nmy $file=\"example.txt\";\nopen(my $fh, '&lt;:encoding(UTF-8)', $file)  or die \"Could not open file '$file' $!\";      \nwhile (my $ll =&lt;$fh&gt;) {\n    print \"&lt;br&gt;line is $ll\";\n}\nclose $fh;\n</code></pre>\n\n<p>The output of this (assuming example.txt is the one above) is:</p>\n\n<pre><code>this is filed1 field2 this is nextfield3 field4\nline2field1 l2field2 field3 and field4 line2\nfirst field second third fourth\n</code></pre>\n\n<p>and this do not really allow me to use substr to manipulate the string using the known fixed width.\nAny idea why it's happening and how I can read the file keeping the extra spaced between fields?\nI also opened the file with text editor like notepad++ to make sure the extra space were not due to special character and I can confirm they are just blank spaces.</p>\n"}, {"tags": ["perl", "moose"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1516191331, "post_id": 48297110, "comment_id": 83586290, "body": "This method could typically also be called <code>TO_JSON</code>, which is what modules like <code>JSON</code> look for when serializing objects."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1516213777, "post_id": 48297110, "comment_id": 83600757, "body": "@simbabque Good point, thank you -- but there is no guarantee that it will actually be a <i>valid</i> JSON?"}, {"owner": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516216569, "post_id": 48297110, "comment_id": 83602200, "body": "Thanks @zdim just what I was looking for. Also related, Is it possible if you have an attribute that contains a hash, can you add a custom toString() that formats the values and returns a string of them ? So can call like $data-&gt;myHash-&gt;toString();"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516217073, "post_id": 48297110, "comment_id": 83602466, "body": "@williamt Glad to hear that :).  Now, as for that string -- first, you mean like <code>attr =&gt; { ... }</code> (so, a hashref)? The interface you show wouldn&#39;t work, since <code>$data</code> is a hashref (not object, if you mean <code>$data</code> from this answer), and then <code>$data-&gt;myHash</code> is a hashref -- so you can&#39;t call a method on it.  But, you can write another method for that. Or, <code>get_data</code> method can take arguments, a list of attribute names for example, for which it will return serialized values."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516217081, "post_id": 48297110, "comment_id": 83602469, "body": "@williamt you cannot have a method call on a hash. Your myHash would have to be an object."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516217499, "post_id": 48297110, "comment_id": 83602676, "body": "@williamt Then precisely how you stringify/serialize can indeed be in another method, which can either be internal (so you only offer <code>get_data</code> interface for all such needs), or a normal method which can then be used on its own as well. But then that could end up a little messy, with overlapping methods -- think through this nicely so that you end up with an intuitive and clean design."}, {"owner": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516218401, "post_id": 48297110, "comment_id": 83603179, "body": "@zdim thanks. This is what I came up with. See any problems or know of a more elegant way? code posted above because of formatting."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516219730, "post_id": 48297110, "comment_id": 83603909, "body": "@williamt Right, some such ... will get back in a bit and comment/edit.  (One thing, <code>join &#39;&#39;</code> will stick them together -- you want space I guess, or return a list?)"}, {"owner": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516221966, "post_id": 48297110, "comment_id": 83605071, "body": "@zdim no I want them together. building a format string for unpack. thanks!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516222621, "post_id": 48297110, "comment_id": 83605411, "body": "@williamt Added some code, not realizing that you have a very specific purpose with this (to pack them for <code>unpack</code>) ... hopefully it&#39;s still useful. I&#39;d suggest to mark that last segment with <b>EDIT</b> and add a note on the purpose of it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516227432, "post_id": 48297110, "comment_id": 83607600, "body": "@williamt The ability to do <code>say $obj;</code> and have it stringified and printed nicely.  Btw, come to think of it, how are you going to unpack those glued values? If it&#39;s <code>unpack</code>, it would need to know the lengths of packed stirngs."}, {"owner": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516227709, "post_id": 48297110, "comment_id": 83607723, "body": "@zdim I understand what stringify is. I just didn&#39;t see what made it available to use. When I ran it I got a no method found error. The hash values provide the formatting. So when ran I can use it like this: \\@data = unpack &quot;a1A2A10A10A6A4A1A3A2A1a23a23A8&quot;, $record;"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516228035, "post_id": 48297110, "comment_id": 83607829, "body": "@williamt ugh -- the sub was meant to be called <code>stringify</code> and not &quot;serialize&quot; ... :( ... fixed, thank you!  As for <code>unpack</code> -- but how do you know those lengths?  Where do they come from?  You aren&#39;t planning on <i>knowing</i> and typing them in?  (That can be returned by the sub, as well; one string with the <code>unpack</code> template, built by <code>length</code> on keys, and another with packed values. Unless you do have something else in mind.)"}, {"owner": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516228377, "post_id": 48297110, "comment_id": 83607956, "body": "@zdim The keys could be used for something else later. These attribute hashes are all known and predefined.$obj-&gt;stringify(&#39;attr1&#39;) would just return the values all joined together to be used as a template to unpack. Its a shame that I can&#39;t make $obj-&gt;attr1-&gt;stringify work."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516253712, "post_id": 48297110, "comment_id": 83614602, "body": "@williamt Wait, what can you not make work? Doesn&#39;t <code>$obj-&gt;record_format(@attr);</code> do that? (In <code>record_format</code> instead of <code>@fields=...</code> you take them from <code>@_</code> of course.).  I still don&#39;t see how you intend to unpack.  You return packed values from <code>record_format</code>, but <code>unpack</code> also needs their lengths, <code>unpack &quot;a1a4a3&quot;, $str;</code> where <code>$str = pack &quot;a1a4a3&quot;, qw(v1 val2 vv3);</code>.  (You may well have a good system in mind, I just don&#39;t see it.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516254119, "post_id": 48297110, "comment_id": 83614724, "body": "@williamt  I mistyped a length above, should be <code>&quot;a2a4a3&quot;</code>. (And you don&#39;t have to <code>pack</code> them first of course, <code>unpack &quot;a2a4&quot;, &#39;v1val2&#39;;</code> is fine.)"}, {"owner": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516257849, "post_id": 48297110, "comment_id": 83615940, "body": "@zdim <code>@attr</code> needs to be stored somewhere so I stuck it in the record_format sub. It could be an attribute I suppose. It&#39;s really only needed to pull the values out in an ordered fashion. <code>@data = unpack &quot;a2a4&quot;, &#39;v1val2&#39;;</code> works just fine. I&#39;m not sure what other lengths you are talking about. The lengths are included in the hash values <code>a1 A6</code> etc. These are just fixed length text records. Am I missing something?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516258075, "post_id": 48297110, "comment_id": 83616017, "body": "@williamt I&#39;m asking -- how do you know at runtime that it&#39;s &quot;a2a4&quot;? Hang on ... do you need this always for all attributes (or all values of one attribute&#39;s hashref)? So it&#39;s a hard-coded string somewhere? Or you&#39;ll form it when you form an object?  It&#39;s still better to form it dynamically, even perhaps as another attribute, at construction."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516258355, "post_id": 48297110, "comment_id": 83616130, "body": "@williamt Come to think of it, if this is all fixed it can all be done in constructor."}, {"owner": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516259194, "post_id": 48297110, "comment_id": 83616509, "body": "@zdim The object is responsible for parsing a file with several different record types. The idea is to have a hash attribute that contains the field names and unpack format for each record type. so record one might be <code>{id =&gt; a1, desc =&gt; A24, number =&gt; a10}</code> while record2 might be <code>{id =&gt; a1, addr =&gt; A64, zip =&gt; a5}</code>. The format string for each record never changes but is tied to the attribute. I&#39;m not sure how it would be done in the constructor. I certainly could just store a pre-formatted string like a1A64a5, but I think its a lot more descriptive and easier to maintain this way."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516259586, "post_id": 48297110, "comment_id": 83616704, "body": "@williamt OK, I see; rather thought out and involved.  I had just updated the answer with something that seemed suitable but I now understand that it probably isn&#39;t. If it&#39;s off-point or useless let me know and I&#39;ll roll it back."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516259916, "post_id": 48297110, "comment_id": 83616860, "body": "@williamt What I just added seems completely <i>not</i> what you need; I now get those <code>@fields</code> etc.  Let me know whether it&#39;s still of some use so I leave it, or to roll it back (and edit some)."}, {"owner": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516260023, "post_id": 48297110, "comment_id": 83616918, "body": "@zdim Its not really suitable to my situation but I like it. :) The problem with using values %$val, is that the values will be returned in a &quot;random&quot; order which is not what you want if you are expecting a certain format of record."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516260540, "post_id": 48297110, "comment_id": 83617168, "body": "@williamt  Right, I see that after your explanation of what it&#39;s about. Also, you do know that it&#39;s a hashref and you know exactly which attritube (and you want to supply names of <i>fields</i> that that attribute collects, etc). So it&#39;s just off ... I&#39;ll consider whether to leave it, edit, or remove and edit."}, {"owner": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516262849, "post_id": 48297110, "comment_id": 83618290, "body": "@zdim Thanks a lot for your help on this. See my edit about an Attribute Trait. What do you think?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "edited": false, "score": 0, "creation_date": 1516263166, "post_id": 48297110, "comment_id": 83618455, "body": "@williamt  Interesting, and may well be for a job for a role ... I&#39;ll look nicely tomorrow (and will certainly edit my answer)."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1523042529, "last_edit_date": 1523042529, "creation_date": 1516179453, "answer_id": 48297110, "question_id": 48296252, "link": "https://stackoverflow.com/questions/48296252/better-way-to-get-all-attributes-from-a-moose-class-as-a-hash/48297110#48297110", "title": "Better way to get all attributes from a Moose class as a hash", "body": "<p>I would much rather pack that into a method, but your \"ideal\" case is almost there</p>\n\n<pre><code>my $data = { %{ Diag-&gt;new( {range =&gt;1, code =&gt; 'AB'} ) } };\n</code></pre>\n\n<p>The <code>%{...}</code> returns a (<em>key,value,...</em>) list so you want <code>{}</code> to make a hashref out of it, not <code>\\</code> (which curiously turns it back into an object).</p>\n\n<p>But really, that should be tucked away in a method</p>\n\n<pre><code>my $data = Diag-&gt;new(...)-&gt;get_data;\n\npackage Diag;\n...\nsub get_data { return { %{$_[0]} } };\n...\n1;\n</code></pre>\n\n<hr>\n\n<p>For purely presentational purposes &ndash; to print them out &ndash; consider using a module, so you don't have to worry about (or know) which attributes have what reference as a value. I use <a href=\"http://search.cpan.org/~gaas/Data-Dump-1.23/lib/Data/Dump.pm\" rel=\"nofollow noreferrer\">Data::Dump</a> for conciseness of its output</p>\n\n<pre><code>my $obj = Diag-&gt;new(...);\n\nsay $obj-&gt;stringify();                           # whole object serialized\n\nsay for $obj-&gt;stringify('attr1', 'attr1', ...);  # serialized values for each\n\npackage Diag;\n...\nuse Data::Dump qw(pp);\n...\nsub stringify {\n    my $self = shift;\n    return map { pp $self-&gt;{$_} } @_  if @_;\n    return { pp %$self } }\n}\n</code></pre>\n\n<p>If native OO is used and not <code>Moo</code>/<code>Moose</code> also overload <code>\"\"</code> for <code>say $obj;</code> use </p>\n\n<pre><code>use overload q(\"\") =&gt; sub { return shift-&gt;stringify() }\n</code></pre>\n\n<p>In <code>Moo</code> and <code>Moose</code> the stringification of object under <code>\"\"</code> (implied in prints as well) is provided.</p>\n\n<hr>\n\n<p><em>By further clarifications the code below doesn't address the actual problem. I'll edit but I am leaving this for now as it was deemed generally useful.</em></p>\n\n<p>It has come up in comments and question edit that a part of the intent is to be able to retrieve values for attribute(s) as well, and packed.  The added code does that, but as there is explicit dereferencing a check with <code>ref</code> should be added so to correctly retrieve all values, from either of arrayref,  hashref, or string/number. For example</p>\n\n<pre><code>sub record_format {\n    my ($self, @attrs) = @_;\n    @attrs = qw(attr1 attr2 ...) if not @attrs;  # default list\n    my $packed;\n    foreach my $attr (@attrs) {\n        my $val = $self-&gt;{$attr};\n        my $rv = ref $val;\n        if    (not $rv)        { $packed .= $val }\n        elsif ($rv eq 'HASH')  { $packed .= join '', values %$val }\n        elsif ($rv eq 'ARRAY') { $packed .= join '', @$val }   \n    }\n    return $packed;\n}\n</code></pre>\n\n<p>This packs values of the passed attributes or of the listed defaults.</p>\n\n<p>The desired <code>$self-&gt;record-&gt;format</code> can't work nicely since <code>$self-&gt;record</code> doesn't return an object so you can't string another method call. You <em>can</em> write an accessor but if you made it return an object under any circumstances that would likely be a surprising behavior, thus not good design.</p>\n"}], "owner": {"reputation": 303, "user_id": 3871692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/62b39c18cd5f61bda659d852d594aacc?s=128&d=identicon&r=PG&f=1", "display_name": "williamt", "link": "https://stackoverflow.com/users/3871692/williamt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 951, "favorite_count": 0, "accepted_answer_id": 48297110, "answer_count": 1, "score": 3, "last_activity_date": 1523042529, "creation_date": 1516176280, "last_edit_date": 1516262807, "question_id": 48296252, "link": "https://stackoverflow.com/questions/48296252/better-way-to-get-all-attributes-from-a-moose-class-as-a-hash", "title": "Better way to get all attributes from a Moose class as a hash", "body": "<p>I want to get all attributes back from a class as a hash.\nIs there any better way to do it than this ?\nIdeally(?) I would like to be able to say something like:</p>\n\n<pre><code>my $hash = \\%{ Diag-&gt;new( {range =&gt;1, code =&gt; 'AB'} ) };\n</code></pre>\n\n<p>But will settle for:</p>\n\n<pre><code>my $d = Diag-&gt;new( {range =&gt;1, code =&gt; 'AB'} );\nmy $hash = $d-&gt;hash;\n\npackage Diag;\nuse Moose;\n\nmy @attrs = qw/range code severity source message/;\n\nhas 'range'    =&gt; ( is =&gt; 'rw', isa =&gt; 'Int' );\nhas 'code'     =&gt; ( is =&gt; 'rw', isa =&gt; 'String' );\nhas 'severity' =&gt; ( is =&gt; 'rw', isa =&gt; 'Int' );\nhas 'source'   =&gt; ( is =&gt; 'rw', isa =&gt; 'String' );\nhas 'message'  =&gt; ( is =&gt; 'rw', isa =&gt; 'String' );\n\nsub hash {\n    my $self = shift;\n    my $hash = {};\n    for (@attrs) {\n        $hash-&gt;{$_} = $self-&gt;$_;\n    }\n    return $hash;\n}\n\nno Moose;\n1;\n</code></pre>\n\n<p><strong>EDIT</strong> Hash with string output for pack/unpack:</p>\n\n<pre><code># Combining this attribute and the record_format would be great.\n# if $self-&gt;record-&gt;format worked that would be cool.\nhas 'record' =&gt; (\n    is =&gt; 'ro',\n    isa =&gt; 'HashRef',\n    default =&gt; sub {\n        {  \n            foo =&gt; 'A5',\n            foo2 =&gt; 'A16',\n        }\n);\n\nsub record_format \n{\n    my $self = shift;\n    my @fields = qw( foo foo2 );\n\n    return _build_format_string($self-&gt;record, \\@fields);\n}\n\nsub _build_format_string {\n    return join '', map { $_[1]-&gt;{$_} } @{ $_[2] };\n}\n</code></pre>\n\n<p><strong>EDIT2</strong>\nI found that if I created an Attribute Trait I could make this a little nicer. This way the hash order is with the attribute and only one format method is needed.</p>\n\n<pre><code>package Order;\nuse Moose::Role;\n\n  has order =&gt; (\n      is        =&gt; 'ro',\n      isa       =&gt; 'ArrayRef',\n      predicate =&gt; 'has_order',\n  );\n\nMoose::Util::meta_attribute_alias('Order');\n1;\n\npackage Record;\nuse Moose;\n\nhas 'record' =&gt; (\n    traits  =&gt; [qw/Order/],\n    is      =&gt; 'ro',\n    isa     =&gt; 'HashRef',\n    default =&gt; sub {\n        {\n            foo  =&gt; 'A5',\n            foo2 =&gt; 'A16',\n        },\n        ;\n    },\n    order =&gt; [qw(foo foo2)]\n);\n\nsub format {\n    my ( $self, $attr ) = @_;\n    my $fields = $self-&gt;meta-&gt;get_attribute($attr)-&gt;order();\n    return join '', map { $self-&gt;{$attr}{$_} } @$fields;\n}\n\n1;\n\n\nmy $r = Record-&gt;new();\nprint $r-&gt;format(\"record\");\nOutputs: A5A16\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1516178614, "post_id": 48296089, "comment_id": 83578180, "body": "have a look at <a href=\"https://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">sort</a>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1516181748, "post_id": 48296089, "comment_id": 83580040, "body": "Well, we can&#39;t see that output, because we don&#39;t have your input data source."}, {"owner": {"reputation": 27, "user_id": 6780943, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5aa345ac3eb2e6032d8129a0286b0ce9?s=128&d=identicon&r=PG&f=1", "display_name": "andrew99", "link": "https://stackoverflow.com/users/6780943/andrew99"}, "edited": false, "score": 0, "creation_date": 1516182808, "post_id": 48296089, "comment_id": 83580679, "body": "the input is,data1 data2 data3"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 6780943, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5aa345ac3eb2e6032d8129a0286b0ce9?s=128&d=identicon&r=PG&f=1", "display_name": "andrew99", "link": "https://stackoverflow.com/users/6780943/andrew99"}, "edited": false, "score": 0, "creation_date": 1516182717, "post_id": 48297941, "comment_id": 83580628, "body": "Thanks!i get it,but is that possible collated them while/before the threads running?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 27, "user_id": 6780943, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5aa345ac3eb2e6032d8129a0286b0ce9?s=128&d=identicon&r=PG&f=1", "display_name": "andrew99", "link": "https://stackoverflow.com/users/6780943/andrew99"}, "edited": false, "score": 1, "creation_date": 1516184304, "post_id": 48297941, "comment_id": 83581671, "body": "You can collate as you go, but you  can&#39;t sort an incomplete list. Nor do you know the execution sequence of the threads."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1516182262, "creation_date": 1516182262, "answer_id": 48297941, "question_id": 48296089, "link": "https://stackoverflow.com/questions/48296089/sorting-array-systematically-in-perl/48297941#48297941", "title": "Sorting array systematically in perl", "body": "<p>OK, so you've got a problem here - you're doing your <code>print</code> within a worker, and that's within an <code>async</code> block.</p>\n\n<p>The WHOLE POINT of threading and <code>async</code> means that execution order is undefined, and thus you're simply never going to get your expected and desired result.</p>\n\n<p>You need to collate and post-process your data if you want it sorted. </p>\n\n<p>So define yourself an output queue, queue your results to it, and collated them after you've ended your threads.</p>\n\n<p>Something like this: </p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings qw( all );\nuse threads;\nuse Thread::Queue qw( );\n\nmy $output_q = Thread::Queue -&gt; new; \n\nuse constant NUM_WORKERS =&gt; 10;\n\nsub worker {\n   my ($core) = @_;\n\n   @data1 = qw(john amount );\n   @data2 = qw(test1 test2 );\n   foreach $loop1 (@data1) {\n      foreach $loop2 (@data2) {\n\n         #print(\"$core $loop1 $loop2\\n\");\n         $output_q -&gt; enqueue ( \"$core $loop1 $loop2\" ); \n      }\n   }\n}\n{\n   my $core_data = \"data.txt\";\n   open( my $core_dat, '&lt;', $core_data )\n     or die(\"Can't open \\\"$core_data\\\": $!\\n\");\n\n   my $q = Thread::Queue-&gt;new();\n   for ( 1 .. NUM_WORKERS ) {\n      async {\n         while ( defined( my $core = $q-&gt;dequeue() ) ) {\n            worker($core);\n         }\n      };\n   }\n\n   while ( my $file = &lt;$core_dat&gt; ) {\n      chomp($file);\n      $q-&gt;enqueue($file);\n   }\n\n   $q-&gt;end();\n\n   $_-&gt;join() for threads-&gt;list();\n   $output_q -&gt; end; \n   #dequeue everything from $output_q and then sort it. \n   print join \"\\n\", sort $output_q-&gt;dequeue_nb($output_q -&gt; pending); \n}\n</code></pre>\n\n<p>Note - this will pass back one string per result, and then sort on that. That <em>might</em> not be exactly what you want (although it'll work based on what you've given so far). </p>\n\n<p>You could for example:</p>\n\n<pre><code>$output_q -&gt; enqueue ( [ $core, $loop1, $loop2 ]); \n</code></pre>\n\n<p>And then treat each <code>$output_q</code> item as an array reference, and sort based on that. I would suggest that's probably best framed as another question if that's the road you want to go down though. </p>\n"}], "owner": {"reputation": 27, "user_id": 6780943, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5aa345ac3eb2e6032d8129a0286b0ce9?s=128&d=identicon&r=PG&f=1", "display_name": "andrew99", "link": "https://stackoverflow.com/users/6780943/andrew99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1516325681, "creation_date": 1516175613, "last_edit_date": 1516325681, "question_id": 48296089, "link": "https://stackoverflow.com/questions/48296089/sorting-array-systematically-in-perl", "title": "Sorting array systematically in perl", "body": "<p>i had some problem,how to make output more systematically</p>\n"}, {"tags": ["perl", "line"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1516174870, "post_id": 48295790, "comment_id": 83576287, "body": "So where&#39;s the code? You are not being clear, what should happen to the remainder of the lines? Throw them away or start a new file etc?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1516175098, "post_id": 48295790, "comment_id": 83576409, "body": "head -n 200 some_file"}, {"owner": {"reputation": 57, "user_id": 4030161, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-MdFYaPQ8rDM/AAAAAAAAAAI/AAAAAAAAALY/KE28Zun_0mY/photo.jpg?sz=128", "display_name": "nandeesh v", "link": "https://stackoverflow.com/users/4030161/nandeesh-v"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1516175298, "post_id": 48295790, "comment_id": 83576508, "body": "@GerhardBarnard. The part of the code is in a big Perl file. Will share that chunk. Yes, need to discard the rest of the lines."}, {"owner": {"reputation": 57, "user_id": 4030161, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-MdFYaPQ8rDM/AAAAAAAAAAI/AAAAAAAAALY/KE28Zun_0mY/photo.jpg?sz=128", "display_name": "nandeesh v", "link": "https://stackoverflow.com/users/4030161/nandeesh-v"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1516175344, "post_id": 48295790, "comment_id": 83576531, "body": "@xxfelixxx Thanks. Will try this."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1516175569, "post_id": 48295790, "comment_id": 83576627, "body": "@xxfelixxx why do you need to go outside of perl tools to perform this task if perl can do it?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1516175747, "post_id": 48295790, "comment_id": 83576719, "body": "You don&#39;t of course...but the OP hasn&#39;t given us any code...so by far the easiest thing to do is just pipe the output to head."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1516175792, "post_id": 48295790, "comment_id": 83576746, "body": "@xxfelixxx Sure thing, but what if OP does not have a *nix environment? :)"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1516177377, "post_id": 48295790, "comment_id": 83577501, "body": "@nandeeshv  I hope you forget the <code>$.</code> for getting the current line.  Instead of making the variable count"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1516180911, "post_id": 48295790, "comment_id": 83579531, "body": "@nandeeshv see edit in my answer below writing back to original file."}], "answers": [{"tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": false, "score": 2, "last_activity_date": 1516439499, "last_edit_date": 1516439499, "creation_date": 1516175739, "answer_id": 48296117, "question_id": 48295790, "link": "https://stackoverflow.com/questions/48295790/to-trim-lines-based-on-line-number-in-perl/48296117#48296117", "title": "To trim lines based on line number in perl", "body": "<p><strong>xxfelixxx</strong> already gave you the correct answer. I am just changing my earlier posted answer, to clean up your code and to <strong>write back</strong> to the original file:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @array;\nmy $filename=\"channel.txt\";\nopen my $fh, '&lt;', $filename or die \"Can't open &gt; $filename: $!\";\n\nwhile( my $line = &lt;$fh&gt; ) {\n    last if $. &gt; 200;\n    push @array, $line;\n}\nclose($fh);\nopen $fh, '&gt;', $filename or die \"Can't open &gt; $filename: $!\";\nprint $fh @array;\nclose($fh);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1516178021, "post_id": 48296542, "comment_id": 83577852, "body": "<code>$.</code> starts at 1, not 0.  Try this to see:  <code>seq 1 10 | perl -ne &#39;print &quot;$. : $_&quot;;&#39;</code>"}, {"owner": {"reputation": 57, "user_id": 4030161, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-MdFYaPQ8rDM/AAAAAAAAAAI/AAAAAAAAALY/KE28Zun_0mY/photo.jpg?sz=128", "display_name": "nandeesh v", "link": "https://stackoverflow.com/users/4030161/nandeesh-v"}, "edited": false, "score": 0, "creation_date": 1516179071, "post_id": 48296542, "comment_id": 83578429, "body": "Is there any way I can modify the same file instead of writing to another file?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 57, "user_id": 4030161, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-MdFYaPQ8rDM/AAAAAAAAAAI/AAAAAAAAALY/KE28Zun_0mY/photo.jpg?sz=128", "display_name": "nandeesh v", "link": "https://stackoverflow.com/users/4030161/nandeesh-v"}, "edited": false, "score": 0, "creation_date": 1516179932, "post_id": 48296542, "comment_id": 83578948, "body": "@nandeeshv  Well, yes, you can read into memory the first 200 lines in the same way, then reopen that file for writing and dump those 200 lines back into it.  But why?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516180017, "post_id": 48296542, "comment_id": 83579000, "body": "No reason to <code>chomp</code> and then <code>print</code> with a newline: <code>while (&lt;$fh&gt;) { last if $. &gt; 200; print $fh1 $_;}</code>. (Unless it&#39;s meant to be pedagocical.)"}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 1, "last_activity_date": 1516177436, "creation_date": 1516177436, "answer_id": 48296542, "question_id": 48295790, "link": "https://stackoverflow.com/questions/48295790/to-trim-lines-based-on-line-number-in-perl/48296542#48296542", "title": "To trim lines based on line number in perl", "body": "<p>There is no need to keep your own counter, perl has a special variable <code>$.</code> which keeps track of the input line number.  You can simplify your loop like so:</p>\n\n<pre><code>while( chomp( my $line = &lt;$fh&gt; ) ) {\n    last if $. &gt; 200;\n    print $fh1 \"$line\\n\";\n}\n</code></pre>\n\n<p><a href=\"https://perldoc.perl.org/perlvar.html#Variables-related-to-filehandles\" rel=\"nofollow noreferrer\">perldoc perlvar</a> - Search for <strong>INPUT_LINE_NUMBER</strong>.</p>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 4030161, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-MdFYaPQ8rDM/AAAAAAAAAAI/AAAAAAAAALY/KE28Zun_0mY/photo.jpg?sz=128", "display_name": "nandeesh v", "link": "https://stackoverflow.com/users/4030161/nandeesh-v"}, "edited": false, "score": 0, "creation_date": 1516184627, "post_id": 48298207, "comment_id": 83581891, "body": "Thanks. I upvoted. Do I need to include this statement as a system command? system(&quot;perl -pe &#39;last if($. == 201);&#39; input.text &gt;result.txt &quot;); Also, I have to write it into same file."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 57, "user_id": 4030161, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-MdFYaPQ8rDM/AAAAAAAAAAI/AAAAAAAAALY/KE28Zun_0mY/photo.jpg?sz=128", "display_name": "nandeesh v", "link": "https://stackoverflow.com/users/4030161/nandeesh-v"}, "edited": false, "score": 0, "creation_date": 1516186614, "post_id": 48298207, "comment_id": 83583254, "body": "@nandeeshv no, this is a standalone onliner. so you run this from commandline instead of a script, if you really want to run this from a script you can call it as system, or use backticks, but that kindoff defeats the purpose of oneliners, as you call perl twice, once by calling the script and within the script you call perl again."}, {"owner": {"reputation": 57, "user_id": 4030161, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-MdFYaPQ8rDM/AAAAAAAAAAI/AAAAAAAAALY/KE28Zun_0mY/photo.jpg?sz=128", "display_name": "nandeesh v", "link": "https://stackoverflow.com/users/4030161/nandeesh-v"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1516186868, "post_id": 48298207, "comment_id": 83583415, "body": "@GerhardBarnard. Thanks. I followed your code. It worked well. I was wondering whether I can use this one-liner in system command or backtick to reduce the number of lines. Nevertheless, I don&#39;t have to optimize too much. Thanks again for the help."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 57, "user_id": 4030161, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-MdFYaPQ8rDM/AAAAAAAAAAI/AAAAAAAAALY/KE28Zun_0mY/photo.jpg?sz=128", "display_name": "nandeesh v", "link": "https://stackoverflow.com/users/4030161/nandeesh-v"}, "edited": false, "score": 0, "creation_date": 1516186911, "post_id": 48298207, "comment_id": 83583448, "body": "@nandeeshv you can, though it is not appropriate. You are calling perl with the script, then within the script you call perl again. The idea of oneliners is to avoid scripts, if I have to say it in so many words."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 57, "user_id": 4030161, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-MdFYaPQ8rDM/AAAAAAAAAAI/AAAAAAAAALY/KE28Zun_0mY/photo.jpg?sz=128", "display_name": "nandeesh v", "link": "https://stackoverflow.com/users/4030161/nandeesh-v"}, "edited": false, "score": 1, "creation_date": 1516187806, "post_id": 48298207, "comment_id": 83584016, "body": "@nandeeshv Don&#39;t do like that. If you are writing the Perl Script you go with Gerhard Barnard answer."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 57, "user_id": 4030161, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-MdFYaPQ8rDM/AAAAAAAAAAI/AAAAAAAAALY/KE28Zun_0mY/photo.jpg?sz=128", "display_name": "nandeesh v", "link": "https://stackoverflow.com/users/4030161/nandeesh-v"}, "edited": false, "score": 0, "creation_date": 1516188286, "post_id": 48298207, "comment_id": 83584286, "body": "@nandeeshv I have edited my answer you can try this method also in your script."}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": true, "score": 2, "last_activity_date": 1516188225, "last_edit_date": 1516188225, "creation_date": 1516183037, "answer_id": 48298207, "question_id": 48295790, "link": "https://stackoverflow.com/questions/48295790/to-trim-lines-based-on-line-number-in-perl/48298207#48298207", "title": "To trim lines based on line number in perl", "body": "<p>I have already mentioned in my comment, this is short version of that comment If you actually trying to trim the file you can use the Perl One Liner instead of writing the whole code</p>\n\n<pre><code>perl -pe 'last if($. == 201);' input.text &gt;result.txt\n</code></pre>\n\n<blockquote>\n  <p>-p used for process the file line by line an print the output</p>\n  \n  <p>-e execute flag, to execute the Perl syntax</p>\n</blockquote>\n\n<p>With Perl script you can do this also</p>\n\n<pre><code>open my $fh,\"&lt;\",\"input.txt\";\nopen my $wh,\"&gt;\",\"result.txt\";\n\nprint $wh scalar &lt;$fh&gt; for(1..10);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 1908007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2977c73e9198551a32917c33df5095d7?s=128&d=identicon&r=PG", "display_name": "johnny", "link": "https://stackoverflow.com/users/1908007/johnny"}, "is_accepted": false, "score": 0, "last_activity_date": 1516464200, "creation_date": 1516464200, "answer_id": 48358159, "question_id": 48295790, "link": "https://stackoverflow.com/questions/48295790/to-trim-lines-based-on-line-number-in-perl/48358159#48358159", "title": "To trim lines based on line number in perl", "body": "<p>To write back to the original file: <code>input.txt</code> without using redirection:</p>\n\n<pre><code>perl -pi.tmp -we \"last if $.&gt;200;\" input.txt\n</code></pre>\n\n<p>where</p>\n\n<pre><code>-i : opens a temp file and automatically replaces the file to be \n     edited with the temporary file after processing (the '.tmp'\n     is the suffix to use for the temp file during processing)\n-w : command line flag to 'use warnings'\n-p : magic; basically equivalent to coding:\n     LINE: while (defined $_ = &lt;ARGV&gt;)) {\n         \"your code here\"\n     }\n-e : perl code follows this flag (enclosed in double quotes for MSWin32 aficiandos)\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 4030161, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-MdFYaPQ8rDM/AAAAAAAAAAI/AAAAAAAAALY/KE28Zun_0mY/photo.jpg?sz=128", "display_name": "nandeesh v", "link": "https://stackoverflow.com/users/4030161/nandeesh-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 1, "accepted_answer_id": 48298207, "answer_count": 4, "score": 2, "last_activity_date": 1516464200, "creation_date": 1516174341, "last_edit_date": 1516176310, "question_id": 48295790, "link": "https://stackoverflow.com/questions/48295790/to-trim-lines-based-on-line-number-in-perl", "title": "To trim lines based on line number in perl", "body": "<p>My Perl file generates the text file which usually contains 200 lines. Sometimes it exceeds 200 lines (For example 217 lines). I need to trim off the rest of the lines from the 201st line. I have used the counter method to trim the exceeded lines. Is there any other simple and efficient way to do this? </p>\n\n<p>Code:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\n\nmy $filename1=\"channel.txt\";\nmy $filename2=\"channel1.txt\";\nmy $fh;\nmy $fh1;\nmy $line;\nmy $line1;\nmy $count=1;\nopen  $fh, '&lt;', $filename1 or die \"Can't open &gt; $filename1: $!\";\nopen  $fh1, '&gt;', $filename2 or die \"Can't open &gt; $filename2: $!\";\n\nwhile(my $line = &lt;$fh&gt;)\n{ \n  chomp $line;\n  chomp $line1;\n  if($count&lt;201)\n     {\n        print $fh1 \"$line\\n\";\n     } \n     $count++;\n}\nclose ($fh1);\nclose($fh);\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1516174169, "post_id": 48293033, "comment_id": 83575960, "body": "So perl arrays are 0-based, you might want to try to decrement your indices by one.  <code>@or</code> doesn&#39;t get filled because you don&#39;t have any matching lines that start with <code>SOURCE....</code>. <code>@ac</code> gets filled with <code>(&#39;NOT&#39;, &#39;APPLICABLE.&#39;)</code>, so <code>$ac[0]</code> and <code>$ac[1]</code> only have values."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1516174302, "post_id": 48293033, "comment_id": 83576015, "body": "You probably also need to escape the <code>&#47;</code> in your substitution, i.e. <code>s&#47;foo\\&#47;&#47;bar&#47;;</code> or just use a different delimiter: <code>s|foo&#47;|bar|;</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1516181003, "post_id": 48293033, "comment_id": 83579591, "body": "What&#39;s your actual desired output?"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1516181660, "post_id": 48297461, "comment_id": 83579972, "body": "If you ask another question with desired input/output formats, I&#39;m happy enough to rework the solution I&#39;ve posted to be more exact."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517978874, "post_id": 48297461, "comment_id": 84310130, "body": "@Sorbique I am very sorry for my late response but wasn&#39;t available during the last three weeks. Yees, the code of yours looks extremely efficient and simple..wish I could reach half of that level of programming one day :) I will edit the question so I can include what is the desired output. The main thing is that I want all rows from the input (except <code>END</code>) to put as a columns in output and seperate them by tab. Each column will be followed by rows that are remainings or extension of each row from an input..It is a bit harder to explain so I will edit a comment. Thanks!"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517980702, "post_id": 48297461, "comment_id": 84310666, "body": "@Sorbique one more thing that may play role is that my real input file is big and it is multiplication of input file from example, so just imagine input file from example <code>*90 000</code>. And, not that there can be more <code>HET</code> and <code>FORMUL</code> lines so in that case I would like only one title for example <code>HET</code> or <code>FORMUL</code> that should be followed by all lines..Ill edit it as well"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517996841, "post_id": 48297461, "comment_id": 84318516, "body": "If it&#39;s hard to explain, it&#39;s probably worth another question."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517997394, "post_id": 48297461, "comment_id": 84318887, "body": "@Sorbique But thats why I have edited it so it can be easier to understand :)"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1516181600, "last_edit_date": 1516181600, "creation_date": 1516180679, "answer_id": 48297461, "question_id": 48293033, "link": "https://stackoverflow.com/questions/48293033/error-use-of-uninitialized-value-although-it-is-initialized/48297461#48297461", "title": "Error use of uninitialized value although it is initialized", "body": "<p>The root of your error is that:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy @ac = ();\n\nmy $str = \"REMARK   2 RESOLUTION. NOT APPLICABLE.   \";\n$str =~ s/^REMARK   2 RESOLUTION.//;\n@ac = ( @ac, split '\\s+', $str );\nprint Dumper \\@ac;\n</code></pre>\n\n<p>The contents of <code>@ac</code> is:</p>\n\n<pre><code>$VAR1 = [\n          '',\n          'NOT',\n          'APPLICABLE.'\n        ];\n</code></pre>\n\n<p>There is no <code>$ac[3]</code>, you only have elements 0,1,2 in there. </p>\n\n<p>With your <code>@or</code> error, you don't have any lines matching: <code>/^SOURCE   2 ORGANISM_SCIENTIFIC/</code></p>\n\n<p>So that array is empty, and that too, means you've got no <code>$or[2]</code> to print. </p>\n\n<p>More generally - what you're doing here is actually really quite clunky, and there's a much cleaner solution.</p>\n\n<p>How about:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\n#set the text \"END\" as our record separator\nlocal $/ = 'END';\n\n#define the fields to print out. \nmy @field_order = qw ( HEADER EXPDTA REMARK HETNAM FORMUL ); \n\nprint join ( \",\", @field_order), \"\\n\"; #print header row\n\n#iterate STDIN or file named on command line.\n#just like you're doing with open (FILE, $ARGV[0]) \nwhile ( &lt;&gt; ) {\n   #select key value pairs into a hash - first word on the line is the 'key'\n   #and the value is 'anything else'. \n   my %this_entry = m/^(\\w+)\\s+(.*)$/gm;\n   next unless $this_entry{'HEADER'}; #check we have a header.\n\n   s/\\s+/ /g for values %this_entry; #strip repeated spaces from fields; \n   s/\\s+$//g for values %this_entry; #strip trailing whitespace. \n\n   #split 'header' row into separate subfields\n   #this is an example of how you could transform other fields. \n   ($this_entry{'HEADER'}, $this_entry{'DATE'}, $this_entry{'STRUCT'} ) = split ' ', $this_entry{'HEADER'};\n\n\n   print join (\",\", @this_entry{@field_order} ), \"\\n\";\n}\n</code></pre>\n\n<p>This will - given your input - print:</p>\n\n<pre><code>HEADER,DATE,STRUCT,EXPDTA,REMARK,HETNAM,FORMUL\nOXIDOREDUCTASE,08-JUN-12,2LU5,SOLID-STATE NMR,2 RESOLUTION. NOT APPLICABLE.,CU COPPER (II) ION,2 CU CU 2+\n</code></pre>\n\n<p>Which isn't quite what your output matches, but hopefully it's illustrated how much simpler this task could be?  </p>\n"}], "owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 889, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1517981160, "creation_date": 1516158850, "last_edit_date": 1517981160, "question_id": 48293033, "link": "https://stackoverflow.com/questions/48293033/error-use-of-uninitialized-value-although-it-is-initialized", "title": "Error use of uninitialized value although it is initialized", "body": "<p>I am trying to make a table looking content of one input file but it constantly gives me an error </p>\n\n<pre><code>Use of uninitialized value $ac[3] in concatenation (.) or string at table.pl\n    line 58 (#1)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Use of uninitialized value $or[2] in concatenation (.) or string at table.pl\n    line 61 (#1)\n</code></pre>\n\n<p>and although I made almost every possible changes it still gives me an error and does not print well. </p>\n\n<p>This is how my input file looks like:</p>\n\n<pre><code>HEADER    OXIDOREDUCTASE                          08-JUN-12   2LU5              \nEXPDTA    SOLID-STATE NMR                                                       \nREMARK   2 RESOLUTION. NOT APPLICABLE.                                          \nHETNAM     CU COPPER (II) ION \nHETNAM     ZN ZINC                                              \nFORMUL   2   CU    CU 2+\nFORMUL   2   ZN    ZN 2+                                                        \nEND   \n</code></pre>\n\n<p>This is a script I am using:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse diagnostics;\n\n#my $testfile=shift;\nopen(INPUT, \"$ARGV[0]\") or die 'Cannot make it';\nmy @file=&lt;INPUT&gt;;\nclose INPUT;\nmy @ac=();\nmy @dr=();\nmy @os=();\nmy @or=();\nmy @fo=();\n\nfor (my $line=0;$line&lt;=$#file;$line++)\n{\n    chomp($file[$line]);\n    if ($file[$line] =~ /^HEADER/)\n    {\n        print( (split '\\s+', $file[$line])[-1]);\n        print \"\\t\";\n\n        while ($file[$line] !~ /^END /)\n        {\n            $line++;\n            if ($file[$line]=~/^EXPDTA/)\n            {\n                $file[$line]=~s/^EXPDTA//;\n                @os=(@os,split '\\s+', $file[$line]);\n            }\n            if ($file[$line] =~ /^REMARK   2 RESOLUTION./)\n            {\n                $file[$line]=~s/^REMARK   2 RESOLUTION.//;\n                @ac = (@ac,split'\\s+',$file[$line]);\n            }\n            if ($file[$line] =~ /^HETNAM/)\n            {\n                $file[$line]=~s/^HETNAM//;\n                $file[$line] =~ s/\\s+//;\n                push @dr, $file[$line];\n            }\n            if ($file[$line] =~ /^SOURCE   2 ORGANISM_SCIENTIFIC/)\n            {\n                $file[$line]=~s/^SOURCE   2 ORGANISM_SCIENTIFIC//;\n                @or = (@or,split'\\s+',$file[$line]);\n            }\n            if ($file[$line] =~ /^FORMUL/)\n            {\n                $file[$line]=~s/^FORMUL//;\n                $file[$line] =~ s/\\s+//;\n                push @fo, $file[$line];\n            }\n        }\n        print \"$os[1] $os[2]\\t\";\n        print \"\\t\";\n        @os=();\n        print \"$ac[3] $ac[4]\\t\" or die \"Cannot be printed\"; #line 58\n        print \"\\t\";\n        @ac=();\n        print \"$or[2] $or[3]\\t\" or die \"Cannot be printed\";  #line 61\n        print \"\\t\";\n        @or=();\n        foreach (@dr)\n        {\n            print \"$_\";\n            print \"\\t\\t\\t\\t\\t\";\n        }\n        @dr=();\n        print \"\\n\";\n    }\n}\n</code></pre>\n\n<p>And this is the output it gives me, but it doesnt seems to print well and I am really not sure why:</p>\n\n<pre><code>2LU5    SOLID-STATE NMR                     CU COPPER (II) ION \n</code></pre>\n\n<p>Desired output that I am expecting is :</p>\n\n<pre><code>HEADER                       EXPDTA               REMARK                         HETNAM                                                                                                       FORMUL\nOXIDOREDUCTASE  2LU5         SOLID-STATE NMR      RESOLUTION. NOT APPLICABLE.    COPPER (II) ION (here better to say last column because certain diversity exists before \"copper\")             CU 2+\n                                                                                 ZN ZINC                                                       ZN 2+\n</code></pre>\n"}, {"tags": ["regex", "perl", "ssh", "pcre", "openssh"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516140827, "post_id": 48290582, "comment_id": 83566396, "body": "Are the fields required to be in the shown order?  How does one distinguish a single option from a keytype, as they are described in the question?  Does the encoded key must have <code>=</code> in it?"}, {"owner": {"reputation": 643, "user_id": 2300151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o7Vid.png?s=128&g=1", "display_name": "Medievalist", "link": "https://stackoverflow.com/users/2300151/medievalist"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516199947, "post_id": 48290582, "comment_id": 83591979, "body": "@zdim, yes, that is the required order.  Keytypes and options vary depending on what version of OpenSSH you are running; for example older versions may not support the <code>ed25519</code> keytype or the <code>restrict</code> keyword.  Base64 uses the <code>=</code> sign as padding, so it can only occur at the end of an encoded key, and does not always occur."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516212775, "post_id": 48290582, "comment_id": 83600232, "body": "OK. Then I don&#39;t see how a program can tell whether the first word is a single option (no comma) or a keytype, or how many keytypes there are before an encoded key. By what you are saying they are no different; they may all be just alphanumeric strings."}, {"owner": {"reputation": 643, "user_id": 2300151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o7Vid.png?s=128&g=1", "display_name": "Medievalist", "link": "https://stackoverflow.com/users/2300151/medievalist"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516317362, "post_id": 48290582, "comment_id": 83649429, "body": "@zdim, there can only be one keytype per line.  But yes, you&#39;ve found the conundrum; making the first field optional was a very strange design choice.   (I&#39;m kind of surprised at the downvotes, given how important OpenSSH is in the computing industry.  I think it is an interesting problem!)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516318694, "post_id": 48290582, "comment_id": 83649795, "body": "The fact that there can only be one keytype per line, and one out of a given set -- which I got from <a href=\"https://stackoverflow.com/a/48309005/4653379\">PerlDuck answer</a> -- solves the parsing, as seen in @PerlDuck answer.  Without that constraint it would not be possible to parse it, which is why I kept asking."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1516318944, "post_id": 48290582, "comment_id": 83649864, "body": "I&#39;d guess for downvotes (I didn&#39;t do it) that it is because the question merely asks, with no code shown, so it is off-topic by site&#39;s letter and spirit.  Your code posted as answer is something else, while if you had included it in the question it would be more suitable for code review.  It&#39;s a conundrum: this is an important topic but you do have working code."}], "answers": [{"comments": [{"owner": {"reputation": 643, "user_id": 2300151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o7Vid.png?s=128&g=1", "display_name": "Medievalist", "link": "https://stackoverflow.com/users/2300151/medievalist"}, "reply_to_user": {"reputation": 15906, "user_id": 3527940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1R45.jpg?s=128&g=1", "display_name": "jcaron", "link": "https://stackoverflow.com/users/3527940/jcaron"}, "edited": false, "score": 0, "creation_date": 1516200151, "post_id": 48290583, "comment_id": 83592099, "body": "Thanks, I wasn&#39;t familiar with stackexchange codereview until you mentioned it! I did it here so that anyone searching for such a regex would easily find it."}], "tags": [], "owner": {"reputation": 643, "user_id": 2300151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o7Vid.png?s=128&g=1", "display_name": "Medievalist", "link": "https://stackoverflow.com/users/2300151/medievalist"}, "is_accepted": false, "score": 1, "last_activity_date": 1516228587, "last_edit_date": 1516228587, "creation_date": 1516140335, "answer_id": 48290583, "question_id": 48290582, "link": "https://stackoverflow.com/questions/48290582/best-perl-regex-for-openssh-authorized-keys-file/48290583#48290583", "title": "Best perl regex for OpenSSH authorized_keys file?", "body": "<p>This is what I've come up with, and it works on my test data.</p>\n\n<pre><code>  if (my ($koptions, $ktype, $kbase64, $kcomment) =$_ !~\n\n       /^(?:((?:[!-~]|\\s(?=.*\"))+)\\s+)? # optional key options\n         ([a-z0-9_-]+)\\s+               # key type followed by a space\n         ([\\.=a-z0-9\\/+_-]+)            # RFC4253 base64 encoded key\n         (?:\\s+(.*))?$                  # optional comment\n       /xxia) {             # ASCII, Case Insensitive, and exploded\n\n    $koptions //= \"NONE\";\n    $kcomment //= \"NONE\";\n    print \"\\nkoptions are $koptions\\n\";\n    print \"ktype is $ktype\\n\";\n    print \"kbase64 is $kbase64\\n\";\n    print \"kcomment is $kcomment\\n\";\n  } else {\n    print \"Incomprehensible line in ~/.ssh/authorized_keys!\\n\"\n  }\n</code></pre>\n\n<p>Example file:</p>\n\n<pre><code>ssh-rsa AAAAB3Nza...LiPk== user@example.net\nfrom=\"*.sales.example.net,!pc.sales.example.net\" ssh-rsa AAAAB2...19Q== john@example.net\nssh-ed25519 AAA3Nzsdfsfsd...fdsXhsdfsfWqfw this is a comment\ncommand=\"dump /home\",no-pty,no-port-forwarding ssh-dss AAAAC3...51R== example.net\npermitopen=\"192.0.2.1:80\",permitopen=\"192.0.2.2:25\" ssh-dss AAAAB5...21S==\ntunnel=\"0\",command=\"sh /etc/netstart tun0\" ssh-rsa AAAA...== jane@example.net\nrestrict,command=\"uptime\" ecdsa-sha2-nistp521 AAAA1C8...32Tv==\nrestrict,pty,command=\"nethack\" ssh-rsa AAAA1f8...IrrC5== user@example.net\n</code></pre>\n\n<p>My apologies for the style, or lack thereof.</p>\n\n<p>Does anyone have anything more elegant?</p>\n"}, {"comments": [{"owner": {"reputation": 643, "user_id": 2300151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o7Vid.png?s=128&g=1", "display_name": "Medievalist", "link": "https://stackoverflow.com/users/2300151/medievalist"}, "edited": false, "score": 1, "creation_date": 1516228433, "post_id": 48309005, "comment_id": 83607973, "body": "The man page is mostly right, although it&#39;s version specific.  It does fail to mention that the comment can have unquoted spaces in it, or be missing entirely, but your code handles that just fine.  I like the way you built the regex up by joining an array,  that&#39;s a really good maintainable idiom.  A junior programmer (or a unix greybeard in a hurry) would find this very easy to update when the permissible encryption types inevitably change in the future."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 2, "last_activity_date": 1516218945, "creation_date": 1516218945, "answer_id": 48309005, "question_id": 48290582, "link": "https://stackoverflow.com/questions/48290582/best-perl-regex-for-openssh-authorized-keys-file/48309005#48309005", "title": "Best perl regex for OpenSSH authorized_keys file?", "body": "<p>The <a href=\"https://en.wikibooks.org/wiki/OpenSSH/Client_Configuration_Files#~/.ssh/authorized_keys\" rel=\"nofollow noreferrer\">docs</a> for OpenSSH say</p>\n\n<blockquote>\n  <p>The format of authorized_keys is described in the sshd(8) manual page.</p>\n</blockquote>\n\n<p>The <a href=\"http://man.openbsd.org/sshd.8\" rel=\"nofollow noreferrer\">sshd(8) manual page</a> says</p>\n\n<blockquote>\n  <p>AuthorizedKeysFile specifies the files containing public keys [\u2026] Each\n  line of the file contains one key (empty lines and lines starting with\n  a \u2018#\u2019 are ignored as comments). <strong>Public keys consist of the following\n  space-separated fields: options, keytype, base64-encoded key,\n  comment.</strong> The options field is optional.\n  <strong>The keytype is \u201cecdsa-sha2-nistp256\u201d, \u201cecdsa-sha2-nistp384\u201d, \u201cecdsa-sha2-nistp521\u201d, \u201cssh-ed25519\u201d, \u201cssh-dss\u201d or \u201cssh-rsa\u201d;</strong> the\n  comment field is not used for anything (but may be convenient for the\n  user to identify the key). [\u2026] The options (if present) consist of\n  comma-separated option specifications. No spaces are permitted, except\n  within double quotes.</p>\n</blockquote>\n\n<p>If I rely on this documentation and take the possible keytypes literal, then I\nget the following solution:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy $possible_types = join('|', qw(ecdsa-sha2-nistp256 \n                                  ecdsa-sha2-nistp384 \n                                  ecdsa-sha2-nistp521 \n                                  ssh-ed25519 \n                                  ssh-dss \n                                  ssh-rsa));\n\nmy $pattern = qr/^(?:(.*)\\s+)?                 # optional options\n                  ($possible_types) \\s+ (\\S+)  # mandatory type and key\n                  (?:\\s+(.*))?$/x;             # optional comment\n\nwhile( &lt;DATA&gt; ) {\n    if (/$pattern/) {\n        my ($options, $type, $key, $comment) = ($1 // 'NONE', $2, $3, $4);\n        print \"options: '$options'\\n\";\n        print \"type:    '$type'\\n\";\n        print \"key:     '$key'\\n\";\n        print \"comment: '$comment'\\n\";\n    } else {\n        print \"unrecognized line: $_\";\n    }\n    print '-' x 30, \"\\n\";\n}\n\n__DATA__\nfrom=\"*.sales.example.net,!pc.sales.example.net\" ssh-rsa AAAAB2...19Q== john@example.net\nssh-ed25519 AAA3Nzsdfsfsd...fdsXhsdfsfWqfw this is a comment\ncommand=\"dump /home\",no-pty,no-port-forwarding ssh-dss AAAAC3...51R== example.net\npermitopen=\"192.0.2.1:80\",permitopen=\"192.0.2.2:25\" ssh-dss AAAAB5...21S==\ntunnel=\"0\",command=\"sh /etc/netstart tun0\" ssh-rsa AAAA...== jane@example.net\nrestrict,command=\"uptime\" ecdsa-sha2-nistp521 AAAA1C8...32Tv==\nrestrict,pty,command=\"nethack\" ssh-rsa AAAA1f8...IrrC5== user@example.net\n</code></pre>\n\n<p>This works because it takes the six possible keytypes for granted and then searches <em>around</em>: The options (if any) must be the string before the keytype; the keytype is followed by the key (always), and optionally a comment follows.</p>\n\n<p>I don't like this approach, though, because it has the possible keytypes hardcoded. For your input it prints:</p>\n\n<pre><code>options: 'from=\"*.sales.example.net,!pc.sales.example.net\"'\ntype:    'ssh-rsa'\nkey:     'AAAAB2...19Q=='\ncomment: 'john@example.net'\n------------------------------\noptions: 'NONE'\ntype:    'ssh-ed25519'\nkey:     'AAA3Nzsdfsfsd...fdsXhsdfsfWqfw'\ncomment: 'this is a comment'\n------------------------------\noptions: 'command=\"dump /home\",no-pty,no-port-forwarding'\ntype:    'ssh-dss'\nkey:     'AAAAC3...51R=='\ncomment: 'example.net'\n------------------------------\noptions: 'permitopen=\"192.0.2.1:80\",permitopen=\"192.0.2.2:25\"'\ntype:    'ssh-dss'\nkey:     'AAAAB5...21S=='\ncomment: ''\n------------------------------\noptions: 'tunnel=\"0\",command=\"sh /etc/netstart tun0\"'\ntype:    'ssh-rsa'\nkey:     'AAAA...=='\ncomment: 'jane@example.net'\n------------------------------\noptions: 'restrict,command=\"uptime\"'\ntype:    'ecdsa-sha2-nistp521'\nkey:     'AAAA1C8...32Tv=='\ncomment: ''\n------------------------------\noptions: 'restrict,pty,command=\"nethack\"'\ntype:    'ssh-rsa'\nkey:     'AAAA1f8...IrrC5=='\ncomment: 'user@example.net'\n------------------------------\n</code></pre>\n"}], "owner": {"reputation": 643, "user_id": 2300151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o7Vid.png?s=128&g=1", "display_name": "Medievalist", "link": "https://stackoverflow.com/users/2300151/medievalist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1516228587, "creation_date": 1516140335, "last_edit_date": 1516199466, "question_id": 48290582, "link": "https://stackoverflow.com/questions/48290582/best-perl-regex-for-openssh-authorized-keys-file", "title": "Best perl regex for OpenSSH authorized_keys file?", "body": "<p>I wrote a small program in perl that parses authorization files containing public keys created by OpenSSH's ssh-keygen.</p>\n\n<ul>\n<li>Each valid line in the file contains one public key.</li>\n<li>Empty lines and lines starting with a \u2018#\u2019 are skipped.</li>\n<li>Lines can be extremely long, up to 8kB.</li>\n</ul>\n\n<p>Public keys consist of the following space-separated fields, in order:</p>\n\n<ul>\n<li>options [optional] any number of comma-separated case-insensitive option specifications.  No spaces are permitted, except within double quotes..</li>\n<li>keytype [required] keytype is an alphanumeric string that can contain dashes or underscores.</li>\n<li>base64-encoded key [required] a string containing no spaces</li>\n<li>comment [optional] a string which may contain spaces</li>\n</ul>\n\n<p>Note, I validate the keytype and base64-encoded key outside the regex in the actual program, for easier future maintenance as key algorithms are added or removed from OpenSSH.  The regex just parses the lines.</p>\n"}, {"tags": ["perl", "mason"], "comments": [{"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1516141787, "post_id": 48290475, "comment_id": 83566774, "body": "What error message?"}, {"owner": {"reputation": 193, "user_id": 4392714, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9d145af011ef0de49a0ec9e2ed2ef322?s=128&d=identicon&r=PG&f=1", "display_name": "rainmaker", "link": "https://stackoverflow.com/users/4392714/rainmaker"}, "reply_to_user": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1516144324, "post_id": 48290475, "comment_id": 83567654, "body": "The one I push into array, I edited the question so it is more clear (I hope)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1516196166, "post_id": 48290475, "comment_id": 83589464, "body": "<i>&quot;I use [...] Mason&quot;</i> Why oh why?"}], "answers": [{"tags": [], "owner": {"reputation": 14587, "user_id": 5724303, "user_type": "registered", "profile_image": "https://graph.facebook.com/1100229700001875/picture?type=large", "display_name": "Kosh", "link": "https://stackoverflow.com/users/5724303/kosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1516328596, "creation_date": 1516328596, "answer_id": 48333252, "question_id": 48290475, "link": "https://stackoverflow.com/questions/48290475/getting-attachment-from-request-in-perl/48333252#48333252", "title": "Getting attachment from request in perl", "body": "<p>Looks like you're using <code>hidden</code> attribute the wrong way.\nPlease read this: <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/hidden\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/hidden</a></p>\n\n<p>So I'd suggest replace this:</p>\n\n<pre><code>&lt;input type=\"checkbox\" id=\"submited_chck\" name=\"submited\" checked hidden&gt;\n</code></pre>\n\n<p>with this:</p>\n\n<pre><code>&lt;input type=\"hidden\" id=\"submited_chck\" name=\"submited\" value=\"on\"&gt;\n</code></pre>\n\n<p>Then investigate further.</p>\n"}, {"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1516371771, "post_id": 48341610, "comment_id": 83671755, "body": "What the hell is <code>$m</code>?"}], "tags": [], "owner": {"reputation": 193, "user_id": 4392714, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9d145af011ef0de49a0ec9e2ed2ef322?s=128&d=identicon&r=PG&f=1", "display_name": "rainmaker", "link": "https://stackoverflow.com/users/4392714/rainmaker"}, "is_accepted": true, "score": 0, "last_activity_date": 1516366436, "creation_date": 1516366436, "answer_id": 48341610, "question_id": 48290475, "link": "https://stackoverflow.com/questions/48290475/getting-attachment-from-request-in-perl/48341610#48341610", "title": "Getting attachment from request in perl", "body": "<p>I just had to change:</p>\n\n<pre><code>my $req = new CGI;\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>my $req = $m-&gt;cgi_object;\n</code></pre>\n\n<p>and now it works perfectly.</p>\n"}], "owner": {"reputation": 193, "user_id": 4392714, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9d145af011ef0de49a0ec9e2ed2ef322?s=128&d=identicon&r=PG&f=1", "display_name": "rainmaker", "link": "https://stackoverflow.com/users/4392714/rainmaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 48341610, "answer_count": 2, "score": 0, "last_activity_date": 1516366436, "creation_date": 1516139835, "last_edit_date": 1516144388, "question_id": 48290475, "link": "https://stackoverflow.com/questions/48290475/getting-attachment-from-request-in-perl", "title": "Getting attachment from request in perl", "body": "<p>I want to use a form to submit fields of email so server can send it. I use Perl and Mason to handle this. I want a user to be able to add multiple attachments, however I am encountering a problem that I can not solve. This is my code simplified as much as possible and with added check for the attachments. ( After submit I want to stay at the same page, that is why there is a hidden check-box and condition in Init section, so that it does nothing when I visit the page for the first time. )</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n%foreach (@messages) {\n    &lt;div class=\"alert\"&gt;\n        &lt;% $_ | h %&gt;\n    &lt;/div&gt;\n%}\n    &lt;body&gt;\n       &lt;form action=\"/Tools/SendEmail.html\" name=\"form\" enctype=\"multipart/form-data\" method=post&gt;\n            &lt;input type=\"checkbox\" id=\"submited_chck\" name=\"submited\" checked hidden&gt;\n            &lt;input type=\"file\" name=\"attached_files\" id=\"file_upload_btn\" multiple&gt; \n            &lt;input type=\"submit\" value=\"Submit\"&gt;\n        &lt;/form&gt; \n    &lt;/body&gt; \n&lt;/html&gt;\n\n&lt;%args&gt;\n@messages =&gt; ()\n$submited =&gt; ''\n&lt;/%args&gt;\n\n&lt;%init&gt;\n\nuse strict;\nuse warnings;\nuse CGI;\n\nif($submited eq 'on') {\n\n    my $req = new CGI;\n\n    my @attachments = $req-&gt;param('attached_files');\n\n    unless (@attachments) {\n        push @messages, \"Attachments do not exist\";\n    }\n}\n\n&lt;/%init&gt;\n</code></pre>\n\n<p>The problem is that if I do any request before submit and add any number of attachments it does not get the attachment from request and the error message is pushed into array and displayed. It does not push the error message only if I restart apache service and submit the form right after it. Any ideas what can cause this?</p>\n"}, {"tags": ["regex", "shell", "perl"], "comments": [{"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1516132852, "post_id": 48288793, "comment_id": 83562777, "body": "Something like <a href=\"https://regexr.com/3j9vt\" rel=\"nofollow noreferrer\"><b><code>import(?:(?!from).)*(?:{[^{}]+})?\\s*from\\s*&#39;\\Kbar-shared</code></b></a> ?"}, {"owner": {"reputation": 874, "user_id": 6535641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa91de216e37b552d355915aa73e4c16?s=128&d=identicon&r=PG&f=1", "display_name": "ULick", "link": "https://stackoverflow.com/users/6535641/ulick"}, "edited": false, "score": 0, "creation_date": 1516133950, "post_id": 48288793, "comment_id": 83563295, "body": "in addition to removing <code>^</code>  you have to change <code>(.*)</code> to <code>(.*?)</code>. You want to capture only up to the next <code>&#39;</code>. Otherwise it would match the rest of the line in the first go."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1516147129, "last_edit_date": 1516147129, "creation_date": 1516133547, "answer_id": 48289086, "question_id": 48288793, "link": "https://stackoverflow.com/questions/48288793/recursive-multiline-find-replace-from-command-line/48289086#48289086", "title": "Recursive multiline find/replace from command line", "body": "<p>It seems that you always need to match from <code>import</code> to the first <code>from 'bar-shared'</code>. Then</p>\n\n<pre><code>perl -i -0777 -wpe's{import.*?from\\s+\\x27\\Kbar\\-shared}{\\@bar/core}gs'\n</code></pre>\n\n<p>The <code>\\x27</code> is the <a href=\"https://perldoc.perl.org/perlrebackslash.html#Character-Escapes\" rel=\"nofollow noreferrer\">hexadecimal escape</a> for the single quote (27). The <code>/s</code> modifier makes <code>.</code> match newlines, too, which is all you need to process this multiline string in this way. The <code>\\K</code> discards all previous matches so they need not be captured and replaced.</p>\n\n<p>Tested on your example but I am not sure what may appear inside <code>import</code> blocks in JS.</p>\n"}], "owner": {"reputation": 2807, "user_id": 75095, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/649db8855ca1649830d486854fc502ef?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/75095/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 48289086, "answer_count": 1, "score": 1, "last_activity_date": 1516147129, "creation_date": 1516132167, "last_edit_date": 1516134793, "question_id": 48288793, "link": "https://stackoverflow.com/questions/48288793/recursive-multiline-find-replace-from-command-line", "title": "Recursive multiline find/replace from command line", "body": "<p>I am trying to do a find and replace for import statements in js files. There are a few different variants that I need to be able to account for:</p>\n\n<pre><code>// default-import.js\nimport foo from 'bar-shared';\n\n// named-import.js\nimport {Foo} from 'bar-shared/foo';\n\n// type-import.js\nimport type {FooType} from 'bar-shared/foo';\n\n// multiline-import.js\nimport {\n  Foo,\n  reduceFoo,\n} from 'bar-shared/foo';\n\n// multiline-with-type-import.js\nimport {\n  Foo,\n  reduceFoo,\n  type FooType,\n} from 'bar-shared/foo';\n\n// multiple-import.js\nimport foo from 'bar-shared';\nimport {Foo} from 'bar-shared/foo';\nimport {\n  Baz\n  reduceBaz\n} from 'bar-shared/baz';\n</code></pre>\n\n<p>My end goal is to replace <code>bar-shared</code> with <code>@bar/core</code>. But the limitations are:\n- I don't know what the specific imports are\n- An import statement can be over multiple lines\n- There can be multiple import statements for <code>bar-shared</code> in a single file</p>\n\n<p>I have gotten reasonably close on with the following:</p>\n\n<pre><code>find . -type f -name \"*.js\" -exec \\\n  perl -0777 -p -i -e \"s/^import ([\\s\\S]*?) from 'bar-shared(.*)'/import \\1 from '\\@bar\\/core\\2'/gms\" {} +\n</code></pre>\n\n<p>That script doesn't seem to be finding all of the instances though. Specifically the final example type, with more than one import statement in the file, seems to be the real problem.</p>\n"}, {"tags": ["regex", "bash", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1516123863, "post_id": 48286728, "comment_id": 83558322, "body": "Don&#39;t use <code>ALL_UPPERCASE</code> for your shell variables; those are reserved for the system."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1516124005, "post_id": 48286728, "comment_id": 83558411, "body": "By the way, <code>-0</code> (NUL-terminated lines) should be <code>-0777</code> (slurp mode)"}, {"owner": {"reputation": 5696, "user_id": 4421870, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/38f9356608b91648b260644fc7a1b6a3?s=128&d=identicon&r=PG&f=1", "display_name": "Mako212", "link": "https://stackoverflow.com/users/4421870/mako212"}, "edited": false, "score": 1, "creation_date": 1516124035, "post_id": 48286728, "comment_id": 83558432, "body": "You can use a <code>sub</code> statement with the pattern <code>(?&lt;=\\w)\\n</code> substituting with <code>,</code>"}, {"owner": {"reputation": 5696, "user_id": 4421870, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/38f9356608b91648b260644fc7a1b6a3?s=128&d=identicon&r=PG&f=1", "display_name": "Mako212", "link": "https://stackoverflow.com/users/4421870/mako212"}, "edited": false, "score": 0, "creation_date": 1516124106, "post_id": 48286728, "comment_id": 83558470, "body": "<a href=\"https://regex101.com/r/93iF2C/2\" rel=\"nofollow noreferrer\">regex101.com/r/93iF2C/2</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1516125763, "post_id": 48286728, "comment_id": 83559385, "body": "Consider allowing a trailing comma (after <code>PROJECT</code>), which is legal as of C99 and C++11. A lot of work will be considerably smoother."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8680478"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1516155345, "post_id": 48286728, "comment_id": 83570460, "body": "@melpomene, Where do you read that <i>ALL_UPPERCASE</i> vars are <i>reserved</i> for the system?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1516127979, "last_edit_date": 1516127979, "creation_date": 1516123986, "answer_id": 48286847, "question_id": 48286728, "link": "https://stackoverflow.com/questions/48286728/how-can-you-use-perl-and-regex-to-append-character-at-end-of-each-new-line-betwe/48286847#48286847", "title": "How can you use perl and regex to append character at end of each new line between match", "body": "<p>With trailing comma:</p>\n\n<pre><code>s{enum[^{]*\\{\\K([^}]*)}{ $1 =~ s/\\n/,\\n/gr }seg\n</code></pre>\n\n<p>Without:</p>\n\n<pre><code>s{enum[^{]*\\{\\K([^}]*)}{ $1 =~ s/\\n/,\\n/gr =~ s/,(?=[^,]*\\z// }seg\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 172306, "user_id": 164835, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ayYoh.jpg?s=128&g=1", "display_name": "Kent", "link": "https://stackoverflow.com/users/164835/kent"}, "is_accepted": false, "score": 0, "last_activity_date": 1516124278, "creation_date": 1516124278, "answer_id": 48286912, "question_id": 48286728, "link": "https://stackoverflow.com/questions/48286728/how-can-you-use-perl-and-regex-to-append-character-at-end-of-each-new-line-betwe/48286912#48286912", "title": "How can you use perl and regex to append character at end of each new line between match", "body": "<p>an awk one-liner works for your example:</p>\n\n<pre><code> awk '/enum .*\\{/{print;next}p{print p (/\\}/?\"\":\",\")}{p=$0}END{print p}' file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1603960621, "last_edit_date": 1603960621, "creation_date": 1516126307, "answer_id": 48287408, "question_id": 48286728, "link": "https://stackoverflow.com/questions/48286728/how-can-you-use-perl-and-regex-to-append-character-at-end-of-each-new-line-betwe/48287408#48287408", "title": "How can you use perl and regex to append character at end of each new line between match", "body": "<p>If a trailing comma (after <code>PROJECT</code>) is allowed, which is legal as of C99 and C++11</p>\n<pre><code>perl -i -pe'if ($r = /^\\s*enum/ .. /}\\s*$/) { s/$/,/ if $r!=1 &amp;&amp; $r!~/E0$/ }' file\n</code></pre>\n<p>This uses <a href=\"https://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow noreferrer\">range operator</a>, and its return with which to exclude its first and last line.</p>\n"}, {"tags": [], "owner": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "is_accepted": false, "score": 0, "last_activity_date": 1516126801, "creation_date": 1516126801, "answer_id": 48287525, "question_id": 48286728, "link": "https://stackoverflow.com/questions/48286728/how-can-you-use-perl-and-regex-to-append-character-at-end-of-each-new-line-betwe/48287525#48287525", "title": "How can you use perl and regex to append character at end of each new line between match", "body": "<p>If <code>,</code> is allowed after <code>PROJECT</code>:</p>\n\n<pre><code>awk '$1==\"}\"{f=0} f{$0=$0 \",\"} $1==\"enum\"{f=1} 1' data\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 6032263, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/185eb0201e5d5727983c8650d1a6768d?s=128&d=identicon&r=PG&f=1", "display_name": "firedev", "link": "https://stackoverflow.com/users/6032263/firedev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 48287408, "answer_count": 4, "score": 0, "last_activity_date": 1603960621, "creation_date": 1516123558, "last_edit_date": 1516123925, "question_id": 48286728, "link": "https://stackoverflow.com/questions/48286728/how-can-you-use-perl-and-regex-to-append-character-at-end-of-each-new-line-betwe", "title": "How can you use perl and regex to append character at end of each new line between match", "body": "<p>I am using <code>bash</code> <code>perl</code> and <code>sed</code> to take GraphQL queries and convert them to TypeScript types. I have it all figured out except one piece - I cannot figure out how to insert a comma at the end of each line within a regex match.</p>\n\n<p>This is the raw <code>*.graphqls</code> text that I'm successfully matching:</p>\n\n<pre><code>enum ContentType {\n    LESSON\n    WARMUP\n    QUIZ\n    PROJECT\n}\n</code></pre>\n\n<p>The Regex that makes the match (selects everything between and including <code>enum</code> and <code>}</code> ):</p>\n\n<p><code>s/(?s)(?=enum).*?(})</code></p>\n\n<p>I can easily replace this entire segment with <code>bash</code> and <code>perl</code>:</p>\n\n<pre><code>ENUM_MATCH=\"s/(?s)(?=enum).*?(})/replacement/\"\n\nperl -i -0pe \"${ENUM_MATCH}\" \"${FULL_PATH}\"\n</code></pre>\n\n<p>But what I need to do is replace this enum text with the same text, except with a comma on each enum line item - end result would look like this:</p>\n\n<pre><code>enum ContentType {\n    LESSON,\n    WARMUP,\n    QUIZ,\n    PROJECT\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1516119914, "post_id": 48285668, "comment_id": 83555801, "body": "You want to include something, and exclude others?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516121020, "post_id": 48285668, "comment_id": 83556496, "body": "You have three requirements here: 1) <i>&quot;find all lines without a specific string&quot;</i>  2) <i>&quot;avoid finding no relevant strings?&quot;</i> 3) Avoid <code>my @subStrToAvoid = qw&#47; strToAvoid1 strToAvoid2 strToAvoid3 &#47;</code>    Those are incompatible. Why do you want to avoid finding no strings, and why do you want to avoid that array assignment?"}, {"owner": {"reputation": 355, "user_id": 5565000, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/0073c6037644a49b0ddff6669b4bf0ee?s=128&d=identicon&r=PG&f=1", "display_name": "Eli Borodach", "link": "https://stackoverflow.com/users/5565000/eli-borodach"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1516177803, "post_id": 48285668, "comment_id": 83577743, "body": "@Sobrique - yes.  Borodin - Let me explain again. I want to the answer to include specific strings (strToFind1 or strToFind2) and exclude others (strToAvoid1, strToAvoid2 and strToAvoid3)"}], "answers": [{"tags": [], "owner": {"reputation": 109, "user_id": 2672337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5652f692b5a269ab99d35d0cbedf8319?s=128&d=identicon&r=PG", "display_name": "Eily", "link": "https://stackoverflow.com/users/2672337/eily"}, "is_accepted": false, "score": 0, "last_activity_date": 1516124118, "last_edit_date": 1516124118, "creation_date": 1516119994, "answer_id": 48285745, "question_id": 48285668, "link": "https://stackoverflow.com/questions/48285668/call-grep-in-a-way-that-finds-all-lines-without-a-specific-string/48285745#48285745", "title": "Call grep in a way that finds all lines without a specific string?", "body": "\n\n<p>The first parameter to grep is a condition, which can be negated like any other condition with <code>!</code>:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $ignore = join \"|\", qw/ strToAvoid1 strToAvoid2 strToAvoid3 /;\nmy @result = grep !/$ignore/, @listOfLines;\n</code></pre>\n\n<p>You can chain the greps if needed:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>my @out = grep /$ok/, grep !/$notOk/, @list;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1516121126, "post_id": 48285749, "comment_id": 83556556, "body": "I didn&#39;t understand the question. Perhaps you should describe the question that you&#39;re answering?"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 4, "last_activity_date": 1516120229, "last_edit_date": 1516120229, "creation_date": 1516120010, "answer_id": 48285749, "question_id": 48285668, "link": "https://stackoverflow.com/questions/48285668/call-grep-in-a-way-that-finds-all-lines-without-a-specific-string/48285749#48285749", "title": "Call grep in a way that finds all lines without a specific string?", "body": "<p>Easily - perl's <code>grep</code> function isn't a simple regex grep, it can do all sorts of magic on the default. You can take pretty much any code block that returns a true/false result, and 'feed' it with <code>$_</code>. <code>regex</code> by default will act on <code>$_</code> so you can have multiple regex conditionals quite easily. </p>\n\n<p>So you can:</p>\n\n<pre><code>#turn your 'avoid' list into a regex\nmy $avoid = join ( \"|\", map { quotemeta } @subStrToAvoid );\n#note - quotemeta is here in case @subStrToAvoid includes \n#regex meta characters like \"|\" or \".\"\n   $avoid = qr/($avoid)/;\n#match your regex but exclude the avoid regex\nmy @results = grep { m/$strToGrep/ and not m/$avoid/ } @listOfLines; \n</code></pre>\n"}], "owner": {"reputation": 355, "user_id": 5565000, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/0073c6037644a49b0ddff6669b4bf0ee?s=128&d=identicon&r=PG&f=1", "display_name": "Eli Borodach", "link": "https://stackoverflow.com/users/5565000/eli-borodach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1516124118, "creation_date": 1516119694, "last_edit_date": 1516120774, "question_id": 48285668, "link": "https://stackoverflow.com/questions/48285668/call-grep-in-a-way-that-finds-all-lines-without-a-specific-string", "title": "Call grep in a way that finds all lines without a specific string?", "body": "<p>I am trying to build a Perl program in which uses <code>grep</code> to find specific strings and to avoid others.</p>\n\n<p>The solution for finding the relevant strings is easy:</p>\n\n<pre><code>open(FILE, \"&lt;\".$file) or next;\nmy @listOfLines = &lt;FILE&gt;;\nclose FILE;\n\nmy $strToGrep = \"strToFind1|strToFind2\";\n\nmy @results   = grep /$strToGrep/, @listOfLines;\n</code></pre>\n\n<p>But how do I avoid finding no relevant strings?</p>\n\n<p>I want to avoid: </p>\n\n<pre><code>my @subStrToAvoid = qw/ strToAvoid1 strToAvoid2 strToAvoid3 /;\n</code></pre>\n\n<p>Is there a way you can use Perl's <code>grep</code> in the same way as the \n<code>grep</code> utility with certain flags from bash?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1516112358, "post_id": 48283290, "comment_id": 83550472, "body": "Change <code>system (&quot;mv $fh mp&quot;);</code>  to  <code>system (&quot;mv $fh mp&quot;) or die &quot;Error: $!&quot;;</code> to see if you get any error"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 1, "creation_date": 1516112461, "post_id": 48283290, "comment_id": 83550531, "body": "@Jens <code>and die</code> as <a href=\"http://p3rl.org/system\" rel=\"nofollow noreferrer\">system</a> returns the exit status. It would be better to use <a href=\"http://p3rl.org/rename\" rel=\"nofollow noreferrer\">rename</a>."}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1516112560, "post_id": 48283290, "comment_id": 83550586, "body": "are you on Linux or Windows? if you are on Windows, the command is <code>move</code> not <code>mv</code>"}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1516112702, "post_id": 48283290, "comment_id": 83550673, "body": "Oh I see, I don&#39;t get any error. I guess it was something in this line although it didn&#39;t gave me any error before as well. How can I close each file so that it can move? Thanks!"}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1516112766, "post_id": 48283290, "comment_id": 83550713, "body": "Linux, linux. I previously used this command that why I was confused."}, {"owner": {"reputation": 725, "user_id": 1147654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bs8pG.jpg?s=128&g=1", "display_name": "saudic", "link": "https://stackoverflow.com/users/1147654/saudic"}, "edited": false, "score": 0, "creation_date": 1516114162, "post_id": 48283290, "comment_id": 83551723, "body": "I think the file is moved before being closed."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 725, "user_id": 1147654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bs8pG.jpg?s=128&g=1", "display_name": "saudic", "link": "https://stackoverflow.com/users/1147654/saudic"}, "edited": false, "score": 0, "creation_date": 1516114954, "post_id": 48283290, "comment_id": 83552255, "body": "@saudic: Why do you think that? (Please give evidence.) And what is the solution? (Please offer a correction.)"}, {"owner": {"reputation": 40406, "user_id": 459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db193fbf6f0929c49dd9704698204ff?s=128&d=identicon&r=PG", "display_name": "dlamblin", "link": "https://stackoverflow.com/users/459/dlamblin"}, "edited": false, "score": 0, "creation_date": 1516955414, "post_id": 48283290, "comment_id": 83908465, "body": "milan Do you work with @Djordje ?  <a href=\"https://stackoverflow.com/questions/48394267/renaming-a-file-if-it-fulfills-two-conditions/48395306?noredirect=1#comment83866522_48395306\" title=\"renaming a file if it fulfills two conditions\">stackoverflow.com/questions/48394267/&hellip;</a>"}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1517191662, "post_id": 48283290, "comment_id": 83980099, "body": "@dlamblim I have no idea who djordje is"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1516117877, "post_id": 48284626, "comment_id": 83554325, "body": "Hm, I see. Thanks!"}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1516120795, "post_id": 48284626, "comment_id": 83556373, "body": "In some cases, I get this warning as well <code>Argument &quot;&quot; isn&#39;t numeric in subtraction (-) at distaces_try.pl line 44. Use of uninitialized value $y1 in subtraction (-) at distaces_try.pl line 44</code>. Does it matter?"}, {"owner": {"reputation": 725, "user_id": 1147654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bs8pG.jpg?s=128&g=1", "display_name": "saudic", "link": "https://stackoverflow.com/users/1147654/saudic"}, "reply_to_user": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1516124668, "post_id": 48284626, "comment_id": 83558793, "body": "@milan The way you parse data in your file <code>my @array = (substr($line, 30, 8),substr($line,38,8),substr($line,46,8));</code> probably catches things that are not numbers and you end up having things that are not numbers in your distance computation."}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1516125257, "post_id": 48284626, "comment_id": 83559091, "body": "Hm, yes. That is surely the case. Thanks!"}], "tags": [], "owner": {"reputation": 725, "user_id": 1147654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bs8pG.jpg?s=128&g=1", "display_name": "saudic", "link": "https://stackoverflow.com/users/1147654/saudic"}, "is_accepted": true, "score": -1, "last_activity_date": 1516116327, "creation_date": 1516116327, "answer_id": 48284626, "question_id": 48283290, "link": "https://stackoverflow.com/questions/48283290/moving-an-input-file-into-another-folder-whenever-it-encounters-specific-result/48284626#48284626", "title": "Moving an input file into another folder whenever it encounters specific result", "body": "<p>At the beginning you open the file for reading in perl </p>\n\n<pre><code> open my $fh, '&lt;', $txt;\n</code></pre>\n\n<p>Then in your test for distance, before the last, you should close the file (using the filehandle) and then move the file (and not the filehandle as you are doing).</p>\n\n<pre><code>if ($dist &lt;= 5)\n   {\n    print \"Distance for calculation between $ref and $atom is $dist\\n\";\n    close($fh);\n    system(\"mv $txt mp\");\n    last;\n   }\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 48284626, "answer_count": 1, "score": 1, "last_activity_date": 1516122791, "creation_date": 1516112136, "last_edit_date": 1516122791, "question_id": 48283290, "link": "https://stackoverflow.com/questions/48283290/moving-an-input-file-into-another-folder-whenever-it-encounters-specific-result", "title": "Moving an input file into another folder whenever it encounters specific result", "body": "<p>I have written a script in perl that reads each file in current directory and calculates distances between protein and ligand atom. Whenever it encounters condition that the result is <code>&lt;=5</code> it should break the loop (<code>last</code>) and move this file into another directory (<code>mp</code>) that was previously made. For some reason I have a problem with this script; it calcluates the distances correctly but does not move these files into another folder. It does not give me any error tough. I am trying to figure out what  seems to be a problem. </p>\n\n<p>This is the script that I have been using:</p>\n\n<pre><code>#!/usr/local/bin/perl \n\nuse strict;\nuse warnings;\nuse File::Glob;\n\nmkdir \"mp\";\nmy $txt;\n\nfor my $txt ( glob '*.txt' ) \n{\n\n    open my $fh, '&lt;', $txt;\n    my $out_fh;\n\n    my (@refer, @points);\n    my $part = 0;\n    my $dist;\n\n    while (my $line = &lt;$fh&gt;) \n    { \n        chomp($line);\n\n        $part++ if ($line =~ /^HETATM/);\n\n        my @array = (substr($line, 30, 8),substr($line,38,8),substr($line,46,8));\n        #print \"@array\\n\";\n\n        if ($part == 0) \n        {\n            push @refer, [ @array ]; \n        } \n\n        elsif ($part)\n        {\n            push @points, [ @array ]; \n        }\n\n        my $atom;\n\n        foreach my $ref(@refer) \n        {\n            my ($x1, $y1, $z1) = @{$ref};\n            foreach my $atom(@points) \n            {\n               my ($x, $y, $z) = @{$atom};\n               my $dist = sqrt( ($x-$x1)**2 + ($y-$y1)**2 + ($z-$z1)**2 );\n               if ($dist &lt;= 5)\n               {\n                    print \"Distance for calculation between $ref and                                 $atom is $dist\\n\";\n                    last;\n                    system (\"mv $fh mp\");\n                }\n            }\n\n\n        }\n    }\n}\n</code></pre>\n\n<p>The content of my input file looks like this:</p>\n\n<pre><code>ATOM   1593 HD21 LEU D  46      11.528  -8.800   5.301  1.00  0.00           H  \nATOM   1594 HD22 LEU D  46      12.997  -9.452   4.535  1.00  0.00           H  \nATOM   1595 HD23 LEU D  46      11.722  -8.718   3.534  1.00  0.00           H  \nHETATM 1597  N1  308 A   1       0.339   6.314  -9.091  1.00  0.00           N  \nHETATM 1598  C10 308 A   1      -0.195   5.226  -8.241  1.00  0.00           C  \n</code></pre>\n\n<p>The result that script gives me in terminal looks like this:</p>\n\n<pre><code>Distance for calculation between ARRAY(0x1c61fa8) and ARRAY(0x1c6f950) is 4.98553437456809\nDistance for calculation between ARRAY(0x1c62098) and ARRAY(0x1c6ffe0) is 4.98962253081333\n</code></pre>\n\n<p>But it does not move the files.</p>\n"}, {"tags": ["perl", "soap", "wsdl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516117270, "post_id": 48282905, "comment_id": 83553895, "body": "The <i>service address</i> is different from the <i>proxy address</i>. The WSDL URL that you are using seems to be valid, yet the library is claiming that it doesn&#39;t have a service description. If you have working Python code then please edit your question to show it."}, {"owner": {"reputation": 666, "user_id": 2277482, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/54cf932829bb4b3629c314af939f7525?s=128&d=identicon&r=PG", "display_name": "Vinc", "link": "https://stackoverflow.com/users/2277482/vinc"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516117860, "post_id": 48282905, "comment_id": 83554314, "body": "@Borodin see edit in post. That is using python 3."}], "answers": [{"tags": [], "owner": {"reputation": 666, "user_id": 2277482, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/54cf932829bb4b3629c314af939f7525?s=128&d=identicon&r=PG", "display_name": "Vinc", "link": "https://stackoverflow.com/users/2277482/vinc"}, "is_accepted": true, "score": 0, "last_activity_date": 1516621146, "creation_date": 1516621146, "answer_id": 48380761, "question_id": 48282905, "link": "https://stackoverflow.com/questions/48282905/getting-a-service-address-has-not-been-specified-when-using-perl-soaplite/48380761#48380761", "title": "Getting &quot;A service address has not been specified...&quot; when using Perl SOAP::Lite to do call using wsdl", "body": "<p>I posted this question to PerlMonks as well since it didn't seem to be doing well here. According to the answer I received <a href=\"http://www.perlmonks.org/?node_id=1207459\" rel=\"nofollow noreferrer\">there</a> <code>SOAP::Lite</code> isn't ideal for a complex service using the WSDL. Instead everything should be specified using the <code>uri()</code> and <code>proxy()</code> methods. If the WSDL is to be used then <code>XML::Compile::WSDL11</code> is the module to look at.</p>\n\n<p>The answer supplies working code for the call using <code>SOAP::Lite</code> without the WSDL as follows : </p>\n\n<pre><code>$client = SOAP::Lite-&gt;new(\n        uri   =&gt; 'http://www.webserviceX.NET/',\n        proxy =&gt; 'http://www.webservicex.net/ConvertSpeed.asmx',\n           );\n\n$client-&gt;on_action(sub {\"http://www.webserviceX.NET/ConvertSpeed\"});\n$client-&gt;autotype(0);\n$sheader = SOAP::Header-&gt;new('');\n$sheader-&gt;type(xml =&gt; '');\n$client-&gt;ns('http://www.webserviceX.NET/','web');\n$client-&gt;envprefix('soapenv');\n\npush @request, SOAP::Data-&gt;name(speed =&gt; 100)-&gt;prefix('web');\npush @request, SOAP::Data-&gt;name(FromUnit =&gt; 'kilometersPerhour')-&gt;prefix('web');\npush @request, SOAP::Data-&gt;name(ToUnit =&gt; 'milesPerhour')-&gt;prefix('web');\n\n$soapResp = $client-&gt;ConvertSpeed($sheader,@request);\n\nprint $soapResp-&gt;result,\"\\n\";\n</code></pre>\n\n<p>If I get a working example using <code>XML::Compile::WSDL11</code> I will post it here. As I am unsure if I am going to look into it soon I decided to at least post this since the question is more focused on using a WSDL with <code>SOAP::Lite</code></p>\n"}], "owner": {"reputation": 666, "user_id": 2277482, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/54cf932829bb4b3629c314af939f7525?s=128&d=identicon&r=PG", "display_name": "Vinc", "link": "https://stackoverflow.com/users/2277482/vinc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "accepted_answer_id": 48380761, "answer_count": 1, "score": 2, "last_activity_date": 1516621146, "creation_date": 1516110993, "last_edit_date": 1516196606, "question_id": 48282905, "link": "https://stackoverflow.com/questions/48282905/getting-a-service-address-has-not-been-specified-when-using-perl-soaplite", "title": "Getting &quot;A service address has not been specified...&quot; when using Perl SOAP::Lite to do call using wsdl", "body": "<p>I'm trying to do a SOAP call to <code>http://www.webservicex.net/ConvertSpeed.asmx</code> using the WSDL.</p>\n\n<p>My code is as follows</p>\n\n<pre><code>use SOAP::Lite;\n\nmy $client = SOAP::Lite-&gt;new;\n$client    = $client-&gt;service( \"http://www.webservicex.net/ConvertSpeed.asmx?wsdl\" );\n\nmy $soapResp = $client-&gt;call( \"ConvertSpeed\", 100, \"kilometersPerhour\", \"milesPerhour\" );\n\nif ( $soapResp-&gt;fault ) {\n    print $soapResp-&gt;faultstring;\n}\nelse {\n    print $soapResp-&gt;result;\n}\n</code></pre>\n\n<p>This gives me the following error</p>\n\n<blockquote>\n  <p>A service address has not been specified either by using SOAP::Lite->proxy() or a service description)</p>\n</blockquote>\n\n<p>I believe that the WSDL is supposed to provide the service address, but it does not seem to be doing that here.</p>\n\n<p>I have tried setting the service address to <code>http://www.webservicex.net/ConvertSpeed.asmx</code> via <code>$client-&gt;proxy(\"http://www.webservicex.net/ConvertSpeed.asmx\")</code> after <code>$client-&gt;service()</code>, but that just gives me an error saying:</p>\n\n<pre><code>Server did not recognize the value of HTTP header SOAPAction: #ConvertSpeed\n</code></pre>\n\n<p>I assumed the WSDL was supposed to provide the service address and so omitted the <code>$client-&gt;proxy()</code> bit and tried other stuff.</p>\n\n<p>This ranged from chaining methods differently and eventually chaining as little as possible (the code above) to changing the way the call is made.</p>\n\n<p>From <a href=\"https://stackoverflow.com/a/9099785/2277482\">this answer</a> I tried</p>\n\n<pre><code>$client-&gt;ConvertSpeed(100, \"kilometersPerhour\", \"milesPerhour\")\n</code></pre>\n\n<p>which just seems to return nothing.</p>\n\n<p>This is running on Perl 5.10 and version 0.714 of SOAP::Lite.</p>\n\n<p>I'm not sure what else to try, but I have confirmed that the same SOAP call works from Python(see edit).</p>\n\n<p>EDIT: </p>\n\n<pre class=\"lang-python prettyprint-override\"><code>from zeep import Client\n\nclient = Client('http://www.webservicex.net/ConvertSpeed.asmx?wsdl')\nresult = client.service.ConvertSpeed(100, 'kilometersPerhour', 'milesPerhour')\n\nprint(result)\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 2, "creation_date": 1516110438, "post_id": 48282702, "comment_id": 83549128, "body": "Are you expecting us to write this for you? Not showing any of your attempts and where you failed?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1516111132, "post_id": 48282702, "comment_id": 83549637, "body": "This looks like <code>xml</code>. Is it? If so, then the tool for the job is <code>xpath</code> not <code>regex</code>. And even if not - don&#39;t try and execute conditionals in regex. Use the parent scripting language (e.g. perl)"}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1516112804, "post_id": 48282702, "comment_id": 83550743, "body": "<a href=\"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags\">H\u0368\u034a\u033d\u0305\u033e\u030e\u0321\u0338\u032a\u032fE\u033e\u035b\u036a\u0344\u0300\u0301\u0327\u0358\u032c\u0329 \u0367\u033e\u036c\u0327\u0336\u0328\u0331\u0339\u032d\u032fC\u036d\u030f\u0365\u036e\u035f\u0337\u0319\u0332\u031d\u0356O\u036e\u034f\u032e\u032a\u031d\u034dM\u034a\u0312\u031a\u036a\u0369\u036c\u031a\u035c\u0332\u0316E\u0311\u0369\u034c\u035d\u0334\u031f\u031f\u0359\u031eS\u036f\u033f\u0314\u0328\u0340\u0325\u0345\u032b\u034e\u032d</a> - use a parser"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1516116738, "post_id": 48282702, "comment_id": 83553519, "body": "What have you tried? What problems are you having? Please show us your code. If you don&#39;t have code, then perhaps Stack Overflow isn&#39;t the best place for your question. (Also, please don&#39;t parse XML with regexes.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1516119712, "post_id": 48282702, "comment_id": 83555654, "body": "Why do people who can&#39;t write a parser insist on writing one themselves instead of using an existing one!? Use XML::LibXML!!!"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 2688465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/046866c0d190327a4c352f852dd82d83?s=128&d=identicon&r=PG&f=1", "display_name": "user2688465", "link": "https://stackoverflow.com/users/2688465/user2688465"}, "is_accepted": false, "score": -1, "last_activity_date": 1516337260, "creation_date": 1516337260, "answer_id": 48334263, "question_id": 48282702, "link": "https://stackoverflow.com/questions/48282702/perl-conditional-regex-check/48334263#48334263", "title": "perl conditional regex check", "body": "<p>if ($row =~ m/name=\"(.+?)\"\\spath=\"(.+?)\"\\srevision=\"(.+?)\"/g)\n{\nprint \"$1 $3\\n\";<code>test</code>\n}<code>enter code here</code>\nelsif ($row =~ m/name=\"(.+?)\"\\srevision=\"(.+?)\"/g)\n{<code>test</code>\nprint \"$1 $2\\n\";\n}\n}<code>test</code></p>\n"}], "owner": {"reputation": 1, "user_id": 2688465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/046866c0d190327a4c352f852dd82d83?s=128&d=identicon&r=PG&f=1", "display_name": "user2688465", "link": "https://stackoverflow.com/users/2688465/user2688465"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1516337260, "creation_date": 1516110301, "last_edit_date": 1516110673, "question_id": 48282702, "link": "https://stackoverflow.com/questions/48282702/perl-conditional-regex-check", "title": "perl conditional regex check", "body": "<pre><code>&lt;project name=\"kernel/lk\" path=\"bootable/bootloader/lk\" revision=\"e48c9314142c2ae93619ccd14aba2bc975165ffd\"/&gt;\n&lt;Project name=\"device/google/contexthub\" revision=\"c453c8b8fb25fb8e1c59e8288331a70dbff44061\" /&gt;\n</code></pre>\n\n<p>I have above two lines in a file.\nI need to get the path and revision , If path is not available in the line it has to get the name and revision as output and save in a file</p>\n\n<blockquote>\n  <p>Expected output :</p>\n</blockquote>\n\n<pre><code>name=\"kernel/lk\" , revision=\"e48c9314142c2ae93619ccd14aba2bc975165ffd\"\npath=\"device/google/contexthub\" , revision=\"c453c8b8fb25fb8e1c59e8288331a70dbff44061\"\n</code></pre>\n\n<p>It will be great helpful,if someone gives me the code snippet.</p>\n"}, {"tags": ["perl", "variables", "multiline"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1516098887, "post_id": 48279140, "comment_id": 83541864, "body": "<code>while (&lt;$fh&gt;){ print;  }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1516108641, "post_id": 48279330, "comment_id": 83547948, "body": "<i>&quot;When you store the file handle into the scalar variable it will read the next line from the file&quot;</i> That isn&#39;t what happens when you store a file handle in a variable. When you call <code>readline</code> on a file handle, maybe."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1516110031, "post_id": 48279330, "comment_id": 83548820, "body": "<i>When you store the file handle into the scalar variable it will read the next line from the file</i> Or as perldoc, more accurately, puts it: &quot;In scalar context, evaluating a filehandle in angle brackets yields the next line from that file&quot;."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1516172377, "post_id": 48279330, "comment_id": 83575101, "body": "@DaveCross and Borodin Thanks for your comment Post edited"}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": true, "score": 0, "last_activity_date": 1516172300, "last_edit_date": 1516172300, "creation_date": 1516099269, "answer_id": 48279330, "question_id": 48279140, "link": "https://stackoverflow.com/questions/48279140/open-multiline-text-file-in-perl/48279330#48279330", "title": "open multiline text file in perl", "body": "<blockquote>\n  <p>In scalar context, evaluating a filehandle in angle brackets yields the next line from that file</p>\n</blockquote>\n\n<p>so you can use while loop to read the lines (preferred method)</p>\n\n<pre><code>while (&lt;$fh&gt;) #output will store into default variable $_\n{\n    print ; \n\n}\n</code></pre>\n\n<p>Or you can use the array but you are trying to storing the all content of the file at time in the variable</p>\n\n<pre><code>my @array = &lt;$fh&gt;;\n</code></pre>\n\n<p>And the slurp mode to read all file in the scalar variable</p>\n\n<pre><code>my $multiline = do { local $/; &lt;$fh&gt;; } #$/ input record seprator\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1516100025, "creation_date": 1516100025, "answer_id": 48279541, "question_id": 48279140, "link": "https://stackoverflow.com/questions/48279140/open-multiline-text-file-in-perl/48279541#48279541", "title": "open multiline text file in perl", "body": "<p>If you read the <a href=\"https://perldoc.perl.org/perlop.html#I%2FO-Operators\" rel=\"nofollow noreferrer\">section on I/O operators</a> in <a href=\"https://perldoc.perl.org/perlop.html\" rel=\"nofollow noreferrer\">perldoc perlop</a>, you will see the following:</p>\n\n<blockquote>\n  <p>In scalar context, evaluating a filehandle in angle brackets yields the next line from that file</p>\n</blockquote>\n\n<p>And, a bit further down:</p>\n\n<blockquote>\n  <p>If a <code>&lt;FILEHANDLE&gt;</code> is used in a context that is looking for a list, a list comprising all input lines is returned, one line per list element.</p>\n</blockquote>\n\n<p>If you assign <code>&lt;FILEHANDLE&gt;</code> to a scalar variable, you will get the next line (actually record) from the file. This is what you are doing:</p>\n\n<pre><code>my $text = &lt;$fh&gt;;\n</code></pre>\n\n<p>If you assign <code>&lt;FILEHANDLE&gt;</code> to an array, you will get all of the remaining data from the file, with each line (actually record) in a separate element of the array.</p>\n\n<pre><code>my @text = &lt;$fh&gt;;\n</code></pre>\n\n<p>If you want to get all data from a file into a scalar, there are a few approaches you can take. The naive approach is to read the data in list context and then join it using an empty string:</p>\n\n<pre><code>my $text = join '', &lt;$fh&gt;;\n</code></pre>\n\n<p>You can use <code>$/</code> to change Perl's idea of a \"record\" (often done in a <code>do</code> block):</p>\n\n<pre><code>my $text = do { local $/; &lt;$fh&gt; };\n</code></pre>\n\n<p>I like <a href=\"https://metacpan.org/pod/Path::Tiny#slurp,-slurp_raw,-slurp_utf8\" rel=\"nofollow noreferrer\">the <code>slurp</code> method from Path::Tiny</a>.</p>\n\n<pre><code>use Path::Tiny;\n\nmy $text = path($filename)-&gt;slurp;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9223653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e5daeb21aac3c487a4fbbbbe791cec9?s=128&d=identicon&r=PG&f=1", "display_name": "JF Forget", "link": "https://stackoverflow.com/users/9223653/jf-forget"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 48279330, "answer_count": 2, "score": 0, "last_activity_date": 1516172300, "creation_date": 1516098649, "last_edit_date": 1516099293, "question_id": 48279140, "link": "https://stackoverflow.com/questions/48279140/open-multiline-text-file-in-perl", "title": "open multiline text file in perl", "body": "<p>I have the following text file</p>\n\n<pre><code>Hello my\nname is\nJeff\n</code></pre>\n\n<p>and I want to open it using perl. However, when using this code</p>\n\n<pre><code>use strict;\nuse warnings;\nopen(my $fh, \"&lt;\", \"input.txt\") or die \"cannot open input text!\";\nmy $text= &lt;$fh&gt;;\nprint $text;\n</code></pre>\n\n<p>The output text is only <code>Hello my</code>. How can I make it print all of my input text lines and not just the first one ? </p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1516096109, "post_id": 48278247, "comment_id": 83539974, "body": "<a href=\"http://p3rl.org/Net::SFTP\" rel=\"nofollow noreferrer\">Net::SFTP</a> or <a href=\"http://p3rl.org/Net::SFTP::Foreign\" rel=\"nofollow noreferrer\">Net::SFTP::Foreign</a>?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1516098270, "post_id": 48278247, "comment_id": 83541419, "body": "<a href=\"https://stackoverflow.com/questions/1873329/how-do-i-install-perl-modules-on-machines-without-an-internet-connection\" title=\"how do i install perl modules on machines without an internet connection\">stackoverflow.com/questions/1873329/&hellip;</a>"}, {"owner": {"reputation": 291, "user_id": 4481279, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fda3f2f603df0fbc39f0c9db77cae3be?s=128&d=identicon&r=PG&f=1", "display_name": "AJ_NOVICE", "link": "https://stackoverflow.com/users/4481279/aj-novice"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1516103464, "post_id": 48278247, "comment_id": 83544644, "body": "NET::SFTP @choroba"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516107837, "post_id": 48278247, "comment_id": 83547433, "body": "@AJ_NOVICE: Please use capital letters correctly. In this case it&#39;s clear that you mean <code>Net::SFTP</code>, but often it is not."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1516107980, "creation_date": 1516107980, "answer_id": 48281992, "question_id": 48278247, "link": "https://stackoverflow.com/questions/48278247/how-to-install-netsftp-perl-module-in-red-hat-enterprise-linux/48281992#48281992", "title": "How to install Net::SFTP perl module in Red Hat Enterprise Linux", "body": "<p>You should take a look at the\n<a href=\"https://metacpan.org/pod/CPAN::Mini\" rel=\"nofollow noreferrer\"><code>CPAN::Mini</code></a>\nmodule. It allows you to download a snapshot of the CPAN repository which you can copy to your isolated system and use to build modules as normal</p>\n"}], "owner": {"reputation": 291, "user_id": 4481279, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fda3f2f603df0fbc39f0c9db77cae3be?s=128&d=identicon&r=PG&f=1", "display_name": "AJ_NOVICE", "link": "https://stackoverflow.com/users/4481279/aj-novice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 684, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516107980, "creation_date": 1516095832, "last_edit_date": 1516107784, "question_id": 48278247, "link": "https://stackoverflow.com/questions/48278247/how-to-install-netsftp-perl-module-in-red-hat-enterprise-linux", "title": "How to install Net::SFTP perl module in Red Hat Enterprise Linux", "body": "<p>I am looking to implement an SFTP module for my Linux log archival and need some help to install the\n<a href=\"https://metacpan.org/pod/Net::SFTP\" rel=\"nofollow noreferrer\"><code>Net::SFTP</code></a>\nmodule.</p>\n\n<p>I am using a RHEL7 system which does not have internet access or an active yum repository and also do not have\n<a href=\"https://metacpan.org/pod/CPAN\" rel=\"nofollow noreferrer\"><code>CPAN</code></a>\ninstalled.</p>\n\n<p>I tried to build the module but got the below error</p>\n\n<blockquote>\n  <p>Net-SFTP-Foreign-1.87]$ perl Makefile.PL<br>\n  Can't locate ExtUtils/MakeMaker.pm in @INC (@INC contains: /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .) at Makefile.PL line 4.\n  BEGIN failed--compilation aborted at Makefile.PL line 4.</p>\n</blockquote>\n"}, {"tags": ["perl", "xs", "perlapi"], "comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1516100375, "post_id": 48277764, "comment_id": 83542757, "body": "@GerhardBarnard: If I understand right, when SV has string and this string contain integer value the <code>SVp_IOK</code> will be true and <code>SV_IOK</code> will be false, will not?"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1516101955, "post_id": 48277764, "comment_id": 83543757, "body": "@GerhardBarnard: Do you know the case when only one of two flags is used?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1516104042, "post_id": 48277764, "comment_id": 83544995, "body": "@Gerhard: This is mostly wrong, and I don&#39;t know what you mean you mean by the <i>lower</i> flags."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516104149, "post_id": 48277764, "comment_id": 83545067, "body": "@Borodin  lower case I mean. will delete and repost as I cannot edit the comments."}], "answers": [{"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1516113285, "post_id": 48281266, "comment_id": 83551091, "body": "the <code>SVp_IOK</code> mask has only <i>one</i> bit set: <code>0x00001000</code>. What do you mean: &quot;It forms a pair?&quot;"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1516113404, "post_id": 48281266, "comment_id": 83551193, "body": "<code>that POK&#47;pPOK and POK&#47;pPOK are set</code>: Do you mean <code>that POK and pPOK are set</code>. If so, please fix"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1516119238, "post_id": 48281266, "comment_id": 83555303, "body": "@EugenKonkov: I mean that <code>IOK</code> and <code>pIOK</code> are a pair. I have already said that <i>&quot;<code>pIOK</code> is always set if <code>IOK</code> is set&quot;</i> and I don&#39;t know how to write it any more clearly."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1516119554, "post_id": 48281266, "comment_id": 83555540, "body": "@Eugen: If you are so unfamiliar with perl internals then you should rely on the <code>SvIOK(SV*)</code> macro. It will suffice except for advanced XS code (which is already an advanced technique)."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 7, "last_activity_date": 1528388920, "last_edit_date": 1528388920, "creation_date": 1516105540, "answer_id": 48281266, "question_id": 48277764, "link": "https://stackoverflow.com/questions/48277764/what-does-flag-piok-mean/48281266#48281266", "title": "What does flag `pIOK` mean?", "body": "\n\n<p><code>pIOK</code> is how <code>Devel::Peek</code> represents the bit corresponding to bit mask <code>SVp_IOK</code>. The <code>p</code> indicates a \"private\" flag, and it forms a pair with \"public\" flag <code>IOK</code> (bit mask <code>SVf_IOK</code>)</p>\n\n<p>The exact meaning of the private flags has changed across perl versions, but in general terms they mean that the <code>IV</code> (or <code>NV</code> or <code>PV</code>) field of the <code>SV</code> is \"inaccurate\" in some way</p>\n\n<p>The most common situation where <code>pIOK</code> is set on its own (<code>pIOK</code> is always set if <code>IOK</code> is set) is where a <code>PV</code> has been converted to a numeric <code>NV</code> value. The <code>NV</code> and <code>IV</code> fields are both populated, but if the <code>IV</code> value isn't an accurate representation of the number (i.e. it has been truncated) then <code>pIOK</code> is set but <code>IOK</code> is cleared</p>\n\n<p>This code shows a way to reach that state. Variable <code>$pi_str</code> is set to a <em>string</em> value for \u03c0 and it is converted to a floating-point value by adding 0.0 and storing it into <code>$pi_num</code>. <code>Devel::Peek</code> now shows that <code>NOK/pNOK</code> and <code>POK/pPOK</code> are <em>set</em>, but only <code>pIOK</code> while <code>IOK</code> remains clear. Looking at the <code>IV</code> value we can see why: it is set to 3, which is the cached value of <code>int $pi_str</code> in case we need it again, but it is <em>not</em> an accurate representation of the string <code>\"3.14159\"</code> in integer form</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse Devel::Peek 'Dump';\n\nmy $pi_str = \"3.14159\";\n\nmy $pi_num = $pi_str + 0.0;\n\nDump $pi_str;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>SV = PVNV(0x28fba68) at 0x3f30d30\n  REFCNT = 1\n  FLAGS = (NOK,POK,IsCOW,pIOK,pNOK,pPOK)\n  IV = 3\n  NV = 3.14159\n  PV = 0x3fb7ab8 \"3.14159\"\\0\n  CUR = 7\n  LEN = 10\n  COW_REFCNT = 1\n</code></pre>\n\n<p>Perl v5.16 and before used to use the flag to indicate \"magic\" variables (such as <em>tied</em> values) because the value in the <code>IV</code> field could not be used directly. That was changed in v5.18 and later, and magic values now use <code>pIOK</code> in the same way as any other value</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 3, "accepted_answer_id": 48281266, "answer_count": 1, "score": 5, "last_activity_date": 1528389576, "creation_date": 1516094395, "last_edit_date": 1528389576, "question_id": 48277764, "link": "https://stackoverflow.com/questions/48277764/what-does-flag-piok-mean", "title": "What does flag `pIOK` mean?", "body": "<p>When dumping perl SV with <code>Devel::Peek</code> I can see:</p>\n\n<pre><code>SV = IV(0x1c13168) at 0x1c13178\n  REFCNT = 1\n  FLAGS = (IOK,pIOK)\n  IV = 2\n</code></pre>\n\n<p>But can not find the description what <code>pIOK</code> mean.</p>\n\n<p>I tried to look it at <code>Devel::Peek</code>, <code>perlapi</code> , <code>perlguts</code>, <code>perlxs</code> ...\nIn sources I found that:</p>\n\n<pre><code>{SVp_IOK, \"pIOK,\"}\n</code></pre>\n\n<p>But still can not find what <code>SVp_IOK</code> is. What is it?    </p>\n\n<p><strong>UPD</strong><br>\nI found <a href=\"http://cpansearch.perl.org/src/RURBAN/illguts-0.49/index.html\" rel=\"nofollow noreferrer\">this document</a>. It shed the light a bit what flags mean and where they are situated. (beware this DOC is outdated a bit)</p>\n\n<p><a href=\"https://i.stack.imgur.com/03YIl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/03YIl.png\" alt=\"enter image description here\"></a></p>\n\n<blockquote>\n  <p>This flag indicates that the object has a valid non-public IVX field value. It can only be set for value type SvIV or subtypes of it. </p>\n</blockquote>\n\n<p><strong>UPD</strong>  </p>\n\n<p><a href=\"https://perldoc.perl.org/perlguts.html#What&#39;s-Really-Stored-in-an-SV?\" rel=\"nofollow noreferrer\">Why private and public flags are differ</a></p>\n"}, {"tags": ["perl", "xs"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516108979, "post_id": 48276411, "comment_id": 83548127, "body": "Why do you want to do this? Have you run the module tests? If you are working with the system perl but are unable to install modules in the system library locations then you should install them under your <code>users</code> directory and add to <code>@INC</code>."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1516113950, "post_id": 48276411, "comment_id": 83551565, "body": "@Borodin: I study <code>XS</code>. I create boilerplate, make changes to <code>.xs</code>, build, run code and see what happen: <code>.&#47;Build &amp;&amp; perl -Iblib&#47;lib -Iblib&#47;arch -MModule -e &#39;Module::Test()&#39;</code> (earlier I make changes, build, install, run code)"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1516109134, "post_id": 48276597, "comment_id": 83548227, "body": "This is a dreadful hack. And why do you have a <code>blib</code> directory in your current working directory? You <b><i>must not</i></b> use the  files in <code>blib</code>. They are <i>temporary files</i> created by <code>MakeMaker</code> in an intermediate stage of a module build. They are liable to be deleted at any time. If you want to do this as a temporary measure then use the <a href=\"https://metacpan.org/pod/blib\" rel=\"nofollow noreferrer\"><code>blib</code></a> module with <code>-Mblib</code> on the command line, but it is <b><i>not</i></b> a permanent solution."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516115189, "post_id": 48276597, "comment_id": 83552406, "body": "Please tag your comments with, for example <code>@Borodin</code> so that I am notified if a message is waiting for me."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516115262, "post_id": 48276597, "comment_id": 83552455, "body": "It is not meant to be a solution. <b><i>Don&#39;t use software from <code>blib</code></i></b> it may well vanish one day because it is just a partial build remnant."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516126987, "post_id": 48276597, "comment_id": 83559975, "body": "@Borodin: See comment at question why I need this."}], "tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": 2, "last_activity_date": 1516114164, "last_edit_date": 1592644375, "creation_date": 1516089993, "answer_id": 48276597, "question_id": 48276411, "link": "https://stackoverflow.com/questions/48276411/how-to-use-a-module-from-the-local-library-without-installing-it/48276597#48276597", "title": "How to use a module from the local library without installing it?", "body": "<p>I pry into <a href=\"https://perldoc.perl.org/perlxstut.html#EXAMPLE-2\" rel=\"nofollow noreferrer\"><code>xstut</code></a>:</p>\n<pre><code>perl -MExtUtils::Command::MM -e &quot;test_harness(0, 'blib/lib', 'blib/arch')&quot; t/*.t\n</code></pre>\n<p>And then <a href=\"https://perldoc.perl.org/ExtUtils/Command/MM.html#*test_harness*\" rel=\"nofollow noreferrer\">here</a>:</p>\n<blockquote>\n<pre><code> test_harness($verbose, @test_libs);\n</code></pre>\n<p>Runs the tests on @ARGV via Test::Harness passing through the $verbose flag. Any @test_libs will be unshifted onto the test's @INC.</p>\n</blockquote>\n<p>So I should include both paths into <code>@INC</code>:</p>\n<pre><code>$ perl -Iblib/lib -Iblib/arch -MModule -e 'my $x; $x=1'\n</code></pre>\n<p><strong>UPD</strong><br />\nAs @Borodin said, the better solution is to use <code>blib</code> module:</p>\n<pre><code>$ perl -Mblib -MModule -e 'my $x; $x=1'\n</code></pre>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1516127127, "creation_date": 1516089282, "last_edit_date": 1516127127, "question_id": 48276411, "link": "https://stackoverflow.com/questions/48276411/how-to-use-a-module-from-the-local-library-without-installing-it", "title": "How to use a module from the local library without installing it?", "body": "<p>I have an XS module. After building it with <code>./Build</code> the <code>Module.so</code> is placed into <code>blib/arch/auto/XS</code> directory.</p>\n\n<p>In my <code>Module.pm</code> I have:</p>\n\n<pre><code>require XSLoader;\nXSLoader::load( 'Module', $VERSION );\n</code></pre>\n\n<p>And I run program as:</p>\n\n<pre><code>$ perl -Iblib/lib -MModule -e 'my $x; $x=1'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$ perl -Iblib -MModule -e 'my $x; $x=1'\n</code></pre>\n\n<p>In both cases the module installed to a system earlier is used.</p>\n\n<p>Which option I should use to run code with <code>Module.so</code> from <code>blib/arch/auto</code>?</p>\n\n<p><strong>UPD</strong><br>\nI try to use module from <code>blib</code> because I have not need to install it during developing and experiments with <code>XS</code></p>\n"}, {"tags": ["linux", "perl", "curl", "bitcoin"], "comments": [{"owner": {"reputation": 23, "user_id": 9222702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J0xKX.jpg?s=128&g=1", "display_name": "Rahman", "link": "https://stackoverflow.com/users/9222702/rahman"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1516086620, "post_id": 48275608, "comment_id": 83534882, "body": "According to reference link 1, it is correct."}, {"owner": {"reputation": 23, "user_id": 9222702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J0xKX.jpg?s=128&g=1", "display_name": "Rahman", "link": "https://stackoverflow.com/users/9222702/rahman"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1516087273, "post_id": 48275608, "comment_id": 83535186, "body": "Just tried, didn&#39;t work. Still the same error."}, {"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "edited": false, "score": 0, "creation_date": 1516087566, "post_id": 48275608, "comment_id": 83535307, "body": "try using gettimeofday instead of time"}, {"owner": {"reputation": 23, "user_id": 9222702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J0xKX.jpg?s=128&g=1", "display_name": "Rahman", "link": "https://stackoverflow.com/users/9222702/rahman"}, "edited": false, "score": 0, "creation_date": 1516087809, "post_id": 48275608, "comment_id": 83535390, "body": "Just tried, same output, same result."}, {"owner": {"reputation": 23, "user_id": 9222702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J0xKX.jpg?s=128&g=1", "display_name": "Rahman", "link": "https://stackoverflow.com/users/9222702/rahman"}, "edited": false, "score": 0, "creation_date": 1516088386, "post_id": 48275608, "comment_id": 83535652, "body": "Thanks to those who tried to help."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9222702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J0xKX.jpg?s=128&g=1", "display_name": "Rahman", "link": "https://stackoverflow.com/users/9222702/rahman"}, "edited": false, "score": 0, "creation_date": 1516088330, "post_id": 48276141, "comment_id": 83535621, "body": "Correct. Missed that (<a href=\"https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#general-api-information\" rel=\"nofollow noreferrer\">github.com/binance-exchange/binance-official-api-docs/blob/&zwnj;&#8203;&hellip;</a>). Thank you."}, {"owner": {"reputation": 23, "user_id": 9222702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J0xKX.jpg?s=128&g=1", "display_name": "Rahman", "link": "https://stackoverflow.com/users/9222702/rahman"}, "edited": false, "score": 0, "creation_date": 1516089972, "post_id": 48276141, "comment_id": 83536438, "body": "Thank you for the suggestion. Will re-do everything once the project is finished."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1516089036, "last_edit_date": 1516089036, "creation_date": 1516088239, "answer_id": 48276141, "question_id": 48275608, "link": "https://stackoverflow.com/questions/48275608/binance-api-error-code-1102-mandatory-parameter-timestamp-was-not-sent-wa/48276141#48276141", "title": "Binance API, Error Code: -1102, Mandatory parameter &#39;timestamp&#39; was not sent, was empty/null, or malformed", "body": "<blockquote>\n  <p>For <code>GET</code> endpoints, parameters must be sent as a <code>query string</code>.</p>\n</blockquote>\n\n<p>Basically, the point of using <code>GET</code> is to allow the response to be cached, and having to deal with a request body would make that needlessly complicated. Therefore, the body of <code>GET</code> requests <a href=\"https://stackoverflow.com/a/983458/589924\">should always be ignored</a>, so <code>-d</code> never makes sense for a <code>GET</code> request. </p>\n\n<p>You can properly form the URL as follows:</p>\n\n<pre><code>use URI qw( );\n\nmy $url = URI-&gt;new('https://api.binance.com/api/v3/account');\n$url-&gt;query_form(\n   recvWindow =&gt; 2000\n   timestamp  =&gt; int(time() * 1000),\n   signature  =&gt; uc(hmac_sha256_hex($data, $api_secret)),\n);\n</code></pre>\n\n<p>You didn't just build the parameters incorrectly. You also had code injection bugs. You can properly form the shell command as follows:</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\n\nmy $cmd = shell_quote(\n   'curl',\n   '-s',\n   '-m' =&gt; 3,\n   '-H' =&gt; 'X-MBX-APIKEY: $api_key',\n   '-X' =&gt; 'GET',\n   $url,\n);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9222702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J0xKX.jpg?s=128&g=1", "display_name": "Rahman", "link": "https://stackoverflow.com/users/9222702/rahman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4422, "favorite_count": 0, "accepted_answer_id": 48276141, "answer_count": 1, "score": 2, "last_activity_date": 1539384446, "creation_date": 1516086031, "question_id": 48275608, "link": "https://stackoverflow.com/questions/48275608/binance-api-error-code-1102-mandatory-parameter-timestamp-was-not-sent-wa", "title": "Binance API, Error Code: -1102, Mandatory parameter &#39;timestamp&#39; was not sent, was empty/null, or malformed", "body": "<p>I am trying to get my account info from Binance.com with the following Perl code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Digest::SHA qw(hmac_sha256_hex);\nuse Time::HiRes qw(time);\n\nmy $api_key = \"X\";\nmy $api_secret = \"X\";\n\nmy $data = \"recvWindow=2000&amp;timestamp=\" . int(time() * 1000);\nmy $signature = uc(hmac_sha256_hex($data, $api_secret));\n\nprint `curl -s -m 3 -H 'X-MBX-APIKEY: $api_key' -d '$data&amp;signature=$signature' -X GET 'https://api.binance.com/api/v3/account'` . \"\\n\";\n</code></pre>\n\n<p>That code looks correct and should work, but I get the following error:</p>\n\n<pre><code>{\"code\":-1102,\"msg\":\"Mandatory parameter 'timestamp' was not sent, was empty/null, or malformed.\"}\n</code></pre>\n\n<p>Ofcourse, the timestamp parameter is sent and not empty or null, nor malformed.</p>\n\n<p>If I print the output to console, it shows the following:</p>\n\n<pre><code>curl -s -m 3 -H 'X-MBX-APIKEY: X' -d 'recvWindow=2000&amp;timestamp=1516082731909&amp;signature=X' -X GET 'https://api.binance.com/api/v3/account'\n</code></pre>\n\n<p>Can someone help please?\nThank you.</p>\n\n<p>References:</p>\n\n<ol>\n<li><a href=\"https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#signed-endpoint-examples-for-post-apiv1order\" rel=\"nofollow noreferrer\">Binance API official documentation / SIGNED Endpoint Examples</a></li>\n<li><a href=\"https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#account-information-user_data\" rel=\"nofollow noreferrer\">Account information</a></li>\n</ol>\n\n<p>Note: I replaced API Key/Secret and Signature with 'X'</p>\n"}, {"tags": ["perl", "ssl", "starman"], "answers": [{"comments": [{"owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "edited": false, "score": 0, "creation_date": 1516137944, "post_id": 48277710, "comment_id": 83565153, "body": "Gotcha! Yes - it&#39;s true! However I now found out that going to https times out. Any idea? Should I re-ask the question?"}, {"owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "edited": false, "score": 0, "creation_date": 1516140350, "post_id": 48277710, "comment_id": 83566225, "body": "Turns out you need to enable https on AWS&#39;s firewall rules on the console"}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 3, "last_activity_date": 1516094195, "creation_date": 1516094195, "answer_id": 48277710, "question_id": 48275426, "link": "https://stackoverflow.com/questions/48275426/why-does-ssl-fail-in-starman/48277710#48277710", "title": "Why does SSL fail in Starman", "body": "<blockquote>\n  <p>Could not finalize SSL connection with client handle (SSL accept attempt failed error:1407609C:SSL routines:SSL23_GET_CLIENT_HELLO:http request) </p>\n</blockquote>\n\n<p>This indicates that the client has send a HTTP request instead of the expected HTTPS request. Please check all URL's used by the client - they should all be <code>https://</code> and not <code>http://</code> since you setup your server to be accessible by HTTPS only.</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 9173801, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EW9nJ.png?s=128&g=1", "display_name": "a153", "link": "https://stackoverflow.com/users/9173801/a153"}, "is_accepted": false, "score": 0, "last_activity_date": 1608732321, "creation_date": 1608732321, "answer_id": 65425588, "question_id": 48275426, "link": "https://stackoverflow.com/questions/48275426/why-does-ssl-fail-in-starman/65425588#65425588", "title": "Why does SSL fail in Starman", "body": "<p>I has such issue and resolved it by installing\n<strong>python-certbot-apache</strong>\nfrom debian apt repo</p>\n<p>But now i have another issue:</p>\n<p>SSL_cert_file /etc/letsencrypt/live/..<em>domain_here</em>../cert.pem can't be used: Permission denied at /usr/local/share/perl/5.28.1/IO/Socket/SSL.pm line 2375.</p>\n<p>chown of dir doesn't help.</p>\n"}], "owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1608732321, "creation_date": 1516085106, "last_edit_date": 1516085360, "question_id": 48275426, "link": "https://stackoverflow.com/questions/48275426/why-does-ssl-fail-in-starman", "title": "Why does SSL fail in Starman", "body": "<p>My setup works perfectly until I enable SSL.</p>\n\n<p>This</p>\n\n<pre><code>starman -p 3001 app.psgi\n</code></pre>\n\n<p>works fine, but this:</p>\n\n<pre><code>starman --enable-ssl --ssl-cert a.crt --ssl-key a.key -p 3001 app.psgi\n</code></pre>\n\n<p>does not - generating this error:</p>\n\n<pre><code>Could not finalize SSL connection with client handle (SSL accept attempt failed error:1407609C:SSL routines:SSL23_GET_CLIENT_HELLO:http request) \n</code></pre>\n\n<p>on every request.</p>\n\n<p>Running on perl 5, version 22, subversion 1 on AWS's Ubuntu 16.04.2 LTS</p>\n\n<p>Ports seem to be forwarded ok:</p>\n\n<pre><code>Chain PREROUTING (policy ACCEPT)\nnum  target     prot opt source               destination         \n1    REDIRECT   tcp  --  anywhere             anywhere             tcp dpt:https redir ports 3001\n2    REDIRECT   tcp  --  anywhere             anywhere             tcp dpt:https redir ports 3001\n3    REDIRECT   tcp  --  anywhere             anywhere             tcp dpt:http-alt redir ports 3001\n4    REDIRECT   tcp  --  anywhere             anywhere             tcp dpt:http redir ports 3001\n</code></pre>\n"}, {"tags": ["perl", "web-services", "logging", "dancer"], "comments": [{"owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1516052712, "post_id": 48269556, "comment_id": 83525859, "body": "Regarding your first problem (ensuring that &#39;config.yml&#39; is actually being read), it might be worth checking that permissions are set correctly on the config file (i.e. that the user under which plackup / Starman is being run actually has permission to read it). And - just in case - that it&#39;s in the correct directory (root for PSGI application)?"}, {"owner": {"reputation": 5844, "user_id": 11827, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/19821078d3ecf265b2af009548e98ef3?s=128&d=identicon&r=PG", "display_name": "szabgab", "link": "https://stackoverflow.com/users/11827/szabgab"}, "edited": false, "score": 0, "creation_date": 1516085705, "post_id": 48269556, "comment_id": 83534507, "body": "What is your directory structure for this project?"}, {"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1516086703, "post_id": 48269556, "comment_id": 83534927, "body": "It&#39;s just what you see there, that simple file and the config file, both in the same directory, same privs, and running as user."}], "answers": [{"comments": [{"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1516084563, "post_id": 48271956, "comment_id": 83534059, "body": "Thanks for the answer but it does not work either. In fact, that was my last test, only I used &#39;file&#39; instead of &#39;File&#39;. I have upgraded Perl to 5.24, Dancer2 to v0.205002 but no joy. Is there some version magic going on?"}], "tags": [], "owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "is_accepted": false, "score": 2, "last_activity_date": 1516060832, "last_edit_date": 1516060832, "creation_date": 1516057758, "answer_id": 48271956, "question_id": 48269556, "link": "https://stackoverflow.com/questions/48269556/dancer2-not-writing-anything-to-a-log-file-or-maybe-not-reading-config-file/48271956#48271956", "title": "Dancer2 not writing anything to a log file or maybe not reading config file", "body": "<h2>1. Ensuring the configuration file is read</h2>\n\n<p>My only suggestions here are</p>\n\n<ol>\n<li>Ensure that you have the YAML module installed.</li>\n<li>Check the <em>permissions</em> on the configuration file - i.e. that the user running the script has read permissions.</li>\n<li>Check the location and name of the configuration file. It should be one of the the following: a) <code>appdir/config.yml</code>, b) <code>appdir/environments/development.yml</code>, or c) <code>appdir/environments/production.yml</code> (where <code>appdir</code> is where your Dancer application is located). See <a href=\"https://metacpan.org/pod/Dancer2::Manual#CONFIGURATION\" rel=\"nofollow noreferrer\">here</a> for more info.</li>\n</ol>\n\n<p>You also mentioned that you</p>\n\n<blockquote>\n  <p>tried to use the JSON configuration option.</p>\n</blockquote>\n\n<p>I'm not sure what you mean by this. (The configuration file is written in YAML - not JSON.)</p>\n\n<h2>2. Logging configuration</h2>\n\n<p>You wrote above that </p>\n\n<blockquote>\n  <p>I have also tried code from this test and copied it verbatim (set logger after set engines and low-case file were the only differences)</p>\n</blockquote>\n\n<p>I think this might be one of your problems. If you are setting the configuration programmatically (i.e. not in the configuration file), try placing</p>\n\n<pre><code>set logger =&gt; 'File';\n</code></pre>\n\n<p><em>after</em></p>\n\n<pre><code>set engines =&gt; { ...`\n</code></pre>\n\n<p>I.e., instead of</p>\n\n<pre><code>set logger =&gt; 'File';\nset engines =&gt; {\n    logger =&gt; {\n        File =&gt; {\n            log_dir =&gt; $log_dir,\n            log_level =&gt; $log_level,\n            file_name =&gt; $log_filename,\n        }\n    }\n};\n</code></pre>\n\n<p>try the following.</p>\n\n<pre><code>set engines =&gt; {\n    logger =&gt; {\n        File =&gt; {\n            log_dir =&gt; $log_dir,\n            log_level =&gt; $log_level,\n            file_name =&gt; $log_filename,\n        }\n    }\n};\nset logger =&gt; 'File';\n</code></pre>\n\n<p>The second approach works for me. The former doesn't.</p>\n\n<p><a href=\"https://metacpan.org/pod/Dancer2::Manual#CONFIGURATION\" rel=\"nofollow noreferrer\">1</a> <a href=\"https://metacpan.org/pod/Dancer2::Manual#CONFIGURATION\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Dancer2::Manual#CONFIGURATION</a> .</p>\n"}, {"comments": [{"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1516089920, "post_id": 48275584, "comment_id": 83536399, "body": "It mainly works now, so thanks. I still can&#39;t figure out what was the problem. However, there are a couple of things that do not work now: I try to set <code>port: 31415 content_type: &quot;application&#47;json&quot;</code> in the configuration file and it just does not do anything, it&#39;s still using the default settings. Setting content_type on the program does not work either. Any idea?"}, {"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1612370055, "post_id": 48275584, "comment_id": 116747374, "body": "Coming back here because I&#39;m finding the same problem, 3 years later...  The only difference I see between your set up and mine is that you use &quot;start&quot; instead of &quot;dance&quot;.  What&#39;s the deal with param: Foo also?"}], "tags": [], "owner": {"reputation": 5844, "user_id": 11827, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/19821078d3ecf265b2af009548e98ef3?s=128&d=identicon&r=PG", "display_name": "szabgab", "link": "https://stackoverflow.com/users/11827/szabgab"}, "is_accepted": true, "score": 3, "last_activity_date": 1516085961, "creation_date": 1516085961, "answer_id": 48275584, "question_id": 48269556, "link": "https://stackoverflow.com/questions/48269556/dancer2-not-writing-anything-to-a-log-file-or-maybe-not-reading-config-file/48275584#48275584", "title": "Dancer2 not writing anything to a log file or maybe not reading config file", "body": "<p><code>app.psgi</code> looks like this:</p>\n\n<pre><code>use v5.14;\nuse Dancer2;\nset content_type =&gt; 'application/json';\nget '/' =&gt; sub {\n    debug \"Hello World\";\n    return to_json config;\n};\nstart;\n</code></pre>\n\n<p>In the same directory <code>config.yml</code> looks like this:</p>\n\n<pre><code>param: Foo\nlogger : \"File\"\nengines:\n  logger:\n    File:\n      log_level: core\n      log_dir: \"/tmp\"\n      file_name: \"p5hitos.log\"\n</code></pre>\n\n<p>I launch the application as <code>plackup app.psgi</code> and then access it from another window as <code>curl http://0:5000/ | jq</code></p>\n\n<p>The log entry is saved in the /tmp/p5hitos.log as expected and in the output on the command line I can see all the configuration values. Both the default ones and the ones I provided.</p>\n"}], "owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "accepted_answer_id": 48275584, "answer_count": 2, "score": 1, "last_activity_date": 1516085961, "creation_date": 1516044837, "last_edit_date": 1516046737, "question_id": 48269556, "link": "https://stackoverflow.com/questions/48269556/dancer2-not-writing-anything-to-a-log-file-or-maybe-not-reading-config-file", "title": "Dancer2 not writing anything to a log file or maybe not reading config file", "body": "<p>Here's the Dancer2 mini-app:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse v5.14;\n\nuse Dancer2;\nuse File::Slurper qw(read_text);\n\nset content_type =&gt; 'application/json';\n\nmy $path;\nfor my $p ( qw( hitos.json /data/hitos.json ./data/hitos.json ../data/hitos.json) ) {\n  if ( -r $p ) {\n    $path = $p;\n  }\n}\n\nmy $hitos = from_json read_text($path);\n\nget '/status' =&gt; sub {\n  return to_json { status =&gt; 'OK' };\n};\n\nget '/all' =&gt; sub {\n  return to_json $hitos;\n};\n\nstart;\n</code></pre>\n\n<p>with this configuration file:</p>\n\n<pre><code>logger : \"File\"\nengines:\n  logger:\n    File:\n      log_level: core\n      log_dir: \"/tmp\"\n      file_name: \"p5hitos.log\"\n</code></pre>\n\n<p>I have named it <code>config.yml</code> and <code>config.yaml</code>, and also tried to use the JSON configuration option. I have tried to set the port from it, and it does not \"catch\" the port setting, so could the problem be the configuration file failing silently? I have also tried to set the configuration on the same file:</p>\n\n<pre><code>set content_type =&gt; 'application/json';\nset logger =&gt; \"File\";\nset port =&gt; 31415;\nset engines =&gt; { logger =&gt; { File =&gt; { log_level =&gt; \"core\",\n                       log_dir =&gt; \".\",\n                       file_name =&gt; \"p5hitos.log\" }}};\n</code></pre>\n\n<p>In this case, the port and content-type are set correctly, but still no go, either with this log_dir or with <code>/tmp</code>. I have also tried code from <a href=\"https://github.com/PerlDancer/Dancer2/blob/703d5826177657e756f67b7ef0121ebe1923e5ff/t/issues/gh-634.t\" rel=\"nofollow noreferrer\">this test</a> and copied it verbatim (set logger after set engines and low-case <code>file</code> were the only differences). It does not change. <code>config</code> is still the same:</p>\n\n<pre><code>0  HASH(0x2a3d070)\n   'appdir' =&gt; '/home/jmerelo/'\n   'apphandler' =&gt; 'Standalone'\n   'behind_proxy' =&gt; 0\n   'charset' =&gt; ''\n   'content_type' =&gt; 'application/json'\n   'engines' =&gt; HASH(0x2947a58)\n      'logger' =&gt; HASH(0x2947008)\n         'File' =&gt; HASH(0xa438b0)\n            'file_name' =&gt; 'p5hitos.log'\n            'log_dir' =&gt; '/tmp'\n   'environment' =&gt; 'development'\n   'host' =&gt; '0.0.0.0'\n   'logger' =&gt; Dancer2::Logger::File=HASH(0x2a7ef58)\n      'app_name' =&gt; 'main'\n      'config' =&gt; HASH(0x2a7f1b0)\n           empty hash\n      'environment' =&gt; 'development'\n      'file_name' =&gt; 'p5hitos.log'\n      'location' =&gt; '/home/jmerelo/'\n      'log_dir' =&gt; '/tmp'\n      'log_format' =&gt; '[%a:%P] %L @%T&gt; %m in %f l. %l'\n      'log_level' =&gt; 'debug'\n   'no_server_tokens' =&gt; 0\n   'port' =&gt; 31415\n   'public_dir' =&gt; '/home/jmerelo/public'\n   'route_handlers' =&gt; ARRAY(0x2779490)\n      0  ARRAY(0x27791d8)\n         0  'AutoPage'\n         1  1\n   'startup_info' =&gt; 1\n   'static_handler' =&gt; undef\n   'template' =&gt; 'Tiny'\n   'traces' =&gt; 0\n   'views' =&gt; '/home/jmerelo/views'\n</code></pre>\n\n<p>It starts up and returns the two routes correctly, but the log file is not created and obviously nothing is written on it. There's no error either on the console, and it's not logging to it either. It just shows the startup message: <code>&gt;&gt; Dancer2 v0.204001 server 16427 listening on http://0.0.0.0:3000</code>. The Log file object seems to have been created correctly, but it does not respond. Any idea?</p>\n"}, {"tags": ["perl", "http", "cpan"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1516043697, "post_id": 48269324, "comment_id": 83521959, "body": "Why not just test error codes? If it&#39;s &quot;can&#39;t connect&quot; or &quot;hostname not found&quot;, interpret accordingly."}, {"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1516044308, "post_id": 48269324, "comment_id": 83522268, "body": "I like the direct way. Instead of parsing error-codes I would rather parse URLs and go with the socket."}, {"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1516044916, "post_id": 48269324, "comment_id": 83522536, "body": "Because it does not support a whole URL."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1516044805, "creation_date": 1516044805, "answer_id": 48269547, "question_id": 48269324, "link": "https://stackoverflow.com/questions/48269324/perl-cpan-module-for-network-connectivity/48269547#48269547", "title": "Perl CPAN: module for network-connectivity", "body": "<p>You can parse URLs to obtain the host and port using <a href=\"http://search.cpan.org/perldoc?URI\" rel=\"noreferrer\">URI</a> module.</p>\n\n<p>Creating a connection can be done using the functions provided by <a href=\"http://search.cpan.org/perldoc?Socket\" rel=\"noreferrer\">Socket</a>, or using the higher-level class <a href=\"http://search.cpan.org/perldoc?IO::Socket::IP\" rel=\"noreferrer\">IO::Socket::IP</a>.</p>\n"}], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 48269547, "answer_count": 1, "score": 0, "last_activity_date": 1516044805, "creation_date": 1516043566, "question_id": 48269324, "link": "https://stackoverflow.com/questions/48269324/perl-cpan-module-for-network-connectivity", "title": "Perl CPAN: module for network-connectivity", "body": "<p>I need to check the network-availability of some webservers (HTTP/HTTPS).\nFor that I just need ip/dns and port. But I have a list of URLs.\nAnd I would like to use a CPAN-module for that job.</p>\n\n<p>But:\n- HTTP::Tiny, LWP::UserAgent, ... checks the HTTP-stats, not the network-status. I need to check the 2nd (connection established) and I dont care about the HTTP-header and content.</p>\n\n<ul>\n<li>A simple socket does not support URL-format for defining the destination.\nIt needs ip and port.</li>\n</ul>\n\n<p>So any ideas if a HTTP-module also provides a network-status??</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["algorithm", "perl", "mariadb", "hashtable"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1516039964, "post_id": 48268304, "comment_id": 83520214, "body": "Do you have a question? What&#39;s the problem? (Hint: see <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and <a href=\"https://stackoverflow.com/posts/48268304/edit\">edit</a> your question to include one)"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1516040387, "creation_date": 1516040387, "answer_id": 48268664, "question_id": 48268304, "link": "https://stackoverflow.com/questions/48268304/how-to-append-values-taken-from-sql-to-multiple-hashes-and-then-compare-them/48268664#48268664", "title": "How to append values taken from SQL to multiple hashes and then compare them", "body": "<p>The following replaces all existing values in the hash:</p>\n\n<pre><code>%cmhash = (\n  $material =&gt; {\n    txt =&gt; $txt,\n    price =&gt; $price,\n  },\n);\n</code></pre>\n\n<p>Replace the above code with the following:</p>\n\n<pre><code>$cmhash{$material} = {\n    txt =&gt; $txt,\n    price =&gt; $price,\n};\n</code></pre>\n\n<p>This assumes the values of <code>$material</code> are unique.</p>\n"}], "owner": {"reputation": 934, "user_id": 1136236, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5c4f2b250d57a1ebf233426012487539?s=128&d=identicon&r=PG", "display_name": "Jonathan Dewein", "link": "https://stackoverflow.com/users/1136236/jonathan-dewein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 48268664, "answer_count": 1, "score": 0, "last_activity_date": 1516040387, "creation_date": 1516038905, "last_edit_date": 1516039344, "question_id": 48268304, "link": "https://stackoverflow.com/questions/48268304/how-to-append-values-taken-from-sql-to-multiple-hashes-and-then-compare-them", "title": "How to append values taken from SQL to multiple hashes and then compare them", "body": "<p>I want to store the values taken from my database into hash. Then, I want to compare and see if they have the same <code>material</code>. If they have the same <code>material</code>, I want to compare the <code>txt</code>. If the <code>txt</code> is different, I want to use storedisp. If the text is the same, I want to use coursemat:</p>\n\n<pre><code>my $stmt1 = qq(select txt, price, material from coursemat);\nmy $sth1 = $pagev-&gt;runQ($stmt1); #run query in house function\nmy $stmt2 = qq(select material from storedisp);\nmy $sth2 = $pagev-&gt;runQ($stmt2);\n\nwhile(my ($txt, $price, $material) = $sth-&gt;fetchrow_array) {\n  %cmhash = (\n    $material =&gt; {\n      txt =&gt; $txt,\n      price =&gt; $price,\n    },\n  );\n}\n\nwhile(my $txt = $sth-&gt;fetchrow) {\n  %sdhash = (\n    $material =&gt; {\n      txt =&gt; $txt,\n    },\n  );\n}\n</code></pre>\n"}, {"tags": ["xml", "perl", "csv", "parsing"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1516037881, "post_id": 48267816, "comment_id": 83519267, "body": "XML::Parser, the default parser for XML::Simple, doesn&#39;t support namespaces. Avoid the <a href=\"https://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\">all-around bad</a> parser XML::Simple. I recommend XML::LibXML."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1516038609, "post_id": 48267816, "comment_id": 83519610, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/48229571/xml-to-csv-with-nested-and-definite-elements-in-perl\">XML to CSV with nested and definite elements in Perl</a>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1516109781, "post_id": 48267816, "comment_id": 83548639, "body": "What&#39;s your desired output?"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1516046115, "post_id": 48269142, "comment_id": 83523071, "body": "@StayCalm I don&#39;t see what you need to extract from the link and how that should go into CSV, but I hope that the above may be good enough. If you do need more detail, or something on CSV, let me know (and please edit the question with that info)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516049281, "post_id": 48269142, "comment_id": 83524428, "body": "@StayCalm Added what I guess the desired output is. Please edit the question with a clear statement on it."}, {"owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1516115264, "post_id": 48269142, "comment_id": 83552458, "body": "I see result in shell, but my output file contains just Header without https links. And I have with warning: Can&#39;t use string (&quot;<a href=\"https://hostname:9060/ers/conf&quot;...\" rel=\"nofollow noreferrer\">hostname:9060/ers/conf&quot;...</a>) as an ARRAY ref while &quot;strict refs&quot; in use at                <code>say $fh_out join &#39;,&#39;, @$_  for @links;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1516127474, "post_id": 48269142, "comment_id": 83560195, "body": "@StayCalm The last code snippet is copied out of a test script. The <code>@$_</code>  derefences the <code>[ ... ]</code> for each of <code>@links</code>, producing the list that is joined with <code>,</code>. It shouldn&#39;t throw that warning, and it should work?  (Note, if you use the first (full) script, you can&#39;t use the last line from the last snippet to write to file -- that&#39;s when it <i>would</i> throw that warning.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1516127768, "post_id": 48269142, "comment_id": 83560332, "body": "@StayCalm I see the edit to the question, thank you. To clarify: it says that you want the url ... is it only that, no id as a separate CSV field? (If that is so you don&#39;t need the last code snippet in this answer.)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 7, "last_activity_date": 1561687538, "last_edit_date": 1561687538, "creation_date": 1516042596, "answer_id": 48269142, "question_id": 48267816, "link": "https://stackoverflow.com/questions/48267816/insert-value-from-xml-file-with-name-spaces-to-csv-file/48269142#48269142", "title": "Insert value from xml file with name spaces to csv file", "body": "<p>The standard, excellent libraries for XML are <a href=\"http://search.cpan.org/dist/XML-LibXML/LibXML.pod\" rel=\"nofollow noreferrer\">XML::LibXML</a> and <a href=\"http://search.cpan.org/~mirod/XML-Twig-3.49/Twig.pm\" rel=\"nofollow noreferrer\">XML::Twig</a>.  </p>\n\n<p>Please <a href=\"https://stackoverflow.com/q/33267765/4653379\">do not use XML::Simple</a>.  Long ago its own <a href=\"http://search.cpan.org/~grantm/XML-Simple-2.24/lib/XML/Simple.pm#STATUS_OF_THIS_MODULE\" rel=\"nofollow noreferrer\">documentation said</a> that</p>\n\n<blockquote>\n  <p>The use of this module in new code is discouraged. </p>\n</blockquote>\n\n<p>and long ago its own author wrote up a <a href=\"https://grantm.github.io/perl-libxml-by-example/\" rel=\"nofollow noreferrer\">detailed tutorial for XML::LibXML</a>. Heed the advice.</p>\n\n<p>An example with <code>XML::LibXML</code></p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse XML::LibXML;\n\nmy $file = shift @ARGV || 'Get_All_Prime.xml'\n\nmy $reader = XML::LibXML-&gt;new();\nmy $doc = $reader-&gt;load_xml(location =&gt; $file, no_blanks =&gt; 1);\n\nmy $xpath = '//ns3:searchResult/ns3:resources/ns5:resource/link';\n\nmy @links;\nforeach my $node ($doc-&gt;findnodes($xpath)) {\n    push @links, $node-&gt;findvalue('./@href');\n}\nsay for @links;\n</code></pre>\n\n<p>This finds the <code>&lt;link ...&gt;</code> element first, as an example; or you can go directly for <code>'href'</code></p>\n\n<pre><code>my $xpath = '//ns3:searchResult/ns3:resources/ns5:resource/link/@href';\nforeach my $href ($doc-&gt;findnodes($xpath) {\n    push @links, $href-&gt;to_literal;\n}\n</code></pre>\n\n<p>The <code>XML::LibXML</code> is a complete library with full support for working with <code>XML</code>.  See <a href=\"https://stackoverflow.com/a/40556199/4653379\">this post</a> and <a href=\"https://stackoverflow.com/a/41051651/4653379\">this post</a> for where to start with its extensive and structured documentation.</p>\n\n<hr>\n\n<p>I'll go out on a limb and assume that the desired CSV output file has lines <code>link_url,id</code></p>\n\n<pre><code>my $outfile = 'output.csv';\nopen my $fh_out, '&gt;', $outfile or die \"Can't open $outfile: $!\";\nsay $fh_out 'url,id';  # header\n\nmy $xpath = '//ns3:searchResult/ns3:resources/ns5:resource/link';\nmy @links;\nforeach my $node ($doc-&gt;findnodes($xpath)) {\n    #say $node-&gt;findvalue('./@href'), ' =&gt; ', $node-&gt;findvalue('../@id');\n    push @links, [ map { $node-&gt;findvalue($_) } qw(./@href ../@id) ];\n}\nsay $fh_out join ',', @$_  for @links;\n</code></pre>\n\n<p>For more extensive work with CSV use <a href=\"http://search.cpan.org/~ishigaki/Text-CSV-1.95/lib/Text/CSV.pm\" rel=\"nofollow noreferrer\">Text::CSV</a>, a \"<em>thin wrapper</em>\" for <a href=\"http://search.cpan.org/~hmbrand/Text-CSV_XS-1.34/CSV_XS.pm\" rel=\"nofollow noreferrer\">Text::CSV_XS</a>.</p>\n"}], "owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 48269142, "answer_count": 1, "score": 2, "last_activity_date": 1561687538, "creation_date": 1516036616, "last_edit_date": 1516113644, "question_id": 48267816, "link": "https://stackoverflow.com/questions/48267816/insert-value-from-xml-file-with-name-spaces-to-csv-file", "title": "Insert value from xml file with name spaces to csv file", "body": "<p>I'm trying to save HTTPs with IDs, like this one</p>\n\n<pre><code>https://hostname:9060/ers/config/networkdevice/1\n</code></pre>\n\n<p>in 'output.csv'. After that I want use these links in my get requests to get more Information from Management System about device.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?&gt;\n&lt;ns3:searchResult total=\"3\" xmlns:ns5=\"ers.ise.cisco.com\" xmlns:ers-v2=\"ers-v2\" \n    xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:ns3=\"v2.ers.ise.cisco.com\"&gt;\n  &lt;ns3:resources&gt;\n    &lt;ns5:resource id=\"1\" \n        name=\"Device1\"&gt;\n        &lt;link rel=\"self\" href=\"https://hostname:9060/ers/config/networkdevice/1\"\n        type=\"application/xml\"/&gt;\n    &lt;/ns5:resource&gt;\n    &lt;ns5:resource id=\"2\" \n        name=\"Device2\"&gt;\n        &lt;link rel=\"self\" href=\"https://hostname:9060/ers/config/networkdevice/2\"\n        type=\"application/xml\"/&gt;\n    &lt;/ns5:resource&gt;\n    &lt;ns5:resource id=\"3\" \n        name=\"Device3\"&gt;\n        &lt;link rel=\"self\" href=\"https://hostname:9060/ers/config/networkdevice/3\"\n        type=\"application/xml\"/&gt;\n    &lt;/ns5:resources&gt;\n&lt;/ns3:resources&gt;\n&lt;/ns3:searchResult&gt;\n</code></pre>\n\n<p>But after using my Perl Script, my file is empty.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\nuse XML::Simple;\n\n#NOTE: Update this to contain my elements  in  CSV      \nmy @Fields = qw{id};\n\nmy $xml = XMLin('Get_All_Prime.xml', ForceArray =&gt; ['link']);\n\nforeach my $link ( @{ $xml-&gt;{link} } ) { \n    print Dumper $link;\n\n    foreach my $link ( @{ $xml-&gt;{link} } ) { \n        print join( ',', @{ $link-&gt;{href} }{@Fields} ) . \"\\n\";\n    }   \n}   \n\nopen(my $out, '&gt;', 'output.csv') or die \"Output: $!\\n\";\nforeach my $link ( @{ $xml-&gt;{link} } ) { \n    print $out join ( ',', @{$link-&gt;{href} }{@Fields} ) . \"\\n\";\n}\n</code></pre>\n\n<p>I'm not sure, that I use the right tag</p>\n\n<pre><code> ForceArray =&gt; ['link']\n</code></pre>\n\n<p>But what should I use in this case?</p>\n"}, {"tags": ["perl", "grep", "substitution"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1516038911, "post_id": 48266754, "comment_id": 83519751, "body": "It&#39;s much more readable to use an alternative delimiter for <code>s&#47;&#47;&#47;</code> if the pattern itself contains a slash. A pipe character, for instance: <code>s|&#47;X$||</code>"}, {"owner": {"reputation": 825, "user_id": 395222, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4dac21aea5a5fb6051dc78a582dfcee9?s=128&d=identicon&r=PG", "display_name": "Patrik", "link": "https://stackoverflow.com/users/395222/patrik"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516178090, "post_id": 48266754, "comment_id": 83577894, "body": "True. I assume Perl is as liberal as sed regarding the delimiters"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1516046447, "last_edit_date": 1516046447, "creation_date": 1516033075, "answer_id": 48266848, "question_id": 48266754, "link": "https://stackoverflow.com/questions/48266754/apply-substitution-to-the-first-item-returned-by-grep/48266848#48266848", "title": "Apply substitution to the first item returned by grep", "body": "<pre><code>my ($x) = map { s{/X$}{}r } grep { /X$/ } f();\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $x = ( grep { /X$/ } f() )[0] =~ s{/X$}{}r;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use List::Util qw( first );\n\nmy $x = ( first { /X$/ } f() ) =~ s{/X$}{}r;\n</code></pre>\n\n<p>The first silently sets <code>$x</code> to <code>undef</code> if <code>f()</code> returns nothing, while the other two set <code>$x</code> to the empty string with a warning in that situation. The second avoids unnecessary work. The third avoids even more.</p>\n\n<hr>\n\n<p>As an aside, you asked for the equivalent of the following</p>\n\n<pre><code>my ($x) = map { s{/X$}{}r } grep { m{X$} } f();\n</code></pre>\n\n<p>But I think you want the following:</p>\n\n<pre><code>my ($x) = map { s{/X$}{}r } grep { m{/X$} } f();\n</code></pre>\n\n<p>Let's avoid that duplication to avoid making the mistake again!</p>\n\n<pre><code>my ($x) = map { my $s=$_; $s =~ s{/X$}{} ? $s : () } f();\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use File::Basename qw( fileparse );\n\nmy ($x) = map { my ($fn, $dir_qn) = fileparse($_); $fn eq 'X' ? $dir_qn : () }  f();\n</code></pre>\n"}], "owner": {"reputation": 825, "user_id": 395222, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4dac21aea5a5fb6051dc78a582dfcee9?s=128&d=identicon&r=PG", "display_name": "Patrik", "link": "https://stackoverflow.com/users/395222/patrik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 1, "accepted_answer_id": 48266848, "answer_count": 1, "score": 4, "last_activity_date": 1516046447, "creation_date": 1516032747, "last_edit_date": 1516038772, "question_id": 48266754, "link": "https://stackoverflow.com/questions/48266754/apply-substitution-to-the-first-item-returned-by-grep", "title": "Apply substitution to the first item returned by grep", "body": "\n\n<p>I have this program</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub f {                                                                                                                                                                                                                       \n    return (\"A/X\", \"B/X\");                                                                                                   \n}                                                                                                                            \n\n$x = grep( /X$/, f() ) =~ s/\\/X$//r;                                                                                           \nprint \"$x\\n\";                                                                                                                \n\n($x) = grep( /X$/, f() ) =~ s/\\/X$//r;                                                                                         \nprint \"$x\\n\";                                                                                                                \n\n( ($x) = grep( /X$/, f() ) ) =~ s/\\/X$//;                                                                                        \nprint \"$x\\n\";                                                                                                                \n\n($x) = grep( /X$/, f() );                                                                                                      \n$x =~ s/\\/X//;                                                                                                               \nprint \"$x\\n\";\n</code></pre>\n\n<p>The result is</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>2\n2\nA/X\nA\n</code></pre>\n\n<p>The result I want is</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>A\n</code></pre>\n\n<p>but only the last attempt produces it.</p>\n\n<p>In my full program, I want to do this with a single line since I have to do it many times. I want to avoid things like <code>$x[0]</code> and <code>f()</code> is a much more complex function</p>\n\n<p>How can I do it?</p>\n"}, {"tags": ["html", "r", "perl", "networkd3"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516095229, "post_id": 48265484, "comment_id": 83539377, "body": "Please take a look at <a href=\"https://stackoverflow.com/help/someone-answers\"><b><i>What should I do when someone answers my question?</i></b></a>"}, {"owner": {"reputation": 703, "user_id": 291652, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/659f65ae402a90d1a4586bf27cb76d6a?s=128&d=identicon&r=PG", "display_name": "urema", "link": "https://stackoverflow.com/users/291652/urema"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516101599, "post_id": 48265484, "comment_id": 83543548, "body": "Basically you have to not set the &quot;height&quot; and &quot;weight&quot; parameters , then save the network - this works!"}], "answers": [{"comments": [{"owner": {"reputation": 703, "user_id": 291652, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/659f65ae402a90d1a4586bf27cb76d6a?s=128&d=identicon&r=PG", "display_name": "urema", "link": "https://stackoverflow.com/users/291652/urema"}, "edited": false, "score": 0, "creation_date": 1516092290, "post_id": 48265888, "comment_id": 83537649, "body": "Solution from R-side, executing this from perl does not work - same issue different mode of execution"}, {"owner": {"reputation": 6442, "user_id": 4389763, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8f8cVbp-uMs/AAAAAAAAAAI/AAAAAAAANb0/Yjs4P3Dus-E/photo.jpg?sz=128", "display_name": "CJ Yetman", "link": "https://stackoverflow.com/users/4389763/cj-yetman"}, "reply_to_user": {"reputation": 703, "user_id": 291652, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/659f65ae402a90d1a4586bf27cb76d6a?s=128&d=identicon&r=PG", "display_name": "urema", "link": "https://stackoverflow.com/users/291652/urema"}, "edited": false, "score": 0, "creation_date": 1516110150, "post_id": 48265888, "comment_id": 83548915, "body": "What does this have to do with Perl?"}, {"owner": {"reputation": 703, "user_id": 291652, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/659f65ae402a90d1a4586bf27cb76d6a?s=128&d=identicon&r=PG", "display_name": "urema", "link": "https://stackoverflow.com/users/291652/urema"}, "edited": false, "score": 0, "creation_date": 1516195035, "post_id": 48265888, "comment_id": 83588640, "body": "The problem was setting the browser and viewer in R from PERL... using Statistics::R..... your solution is perfect from an R perspective"}, {"owner": {"reputation": 6442, "user_id": 4389763, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8f8cVbp-uMs/AAAAAAAAAAI/AAAAAAAANb0/Yjs4P3Dus-E/photo.jpg?sz=128", "display_name": "CJ Yetman", "link": "https://stackoverflow.com/users/4389763/cj-yetman"}, "reply_to_user": {"reputation": 703, "user_id": 291652, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/659f65ae402a90d1a4586bf27cb76d6a?s=128&d=identicon&r=PG", "display_name": "urema", "link": "https://stackoverflow.com/users/291652/urema"}, "edited": false, "score": 0, "creation_date": 1516195126, "post_id": 48265888, "comment_id": 83588699, "body": "oh... you must have changed the question/target after I wrote my answer"}, {"owner": {"reputation": 6442, "user_id": 4389763, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8f8cVbp-uMs/AAAAAAAAAAI/AAAAAAAANb0/Yjs4P3Dus-E/photo.jpg?sz=128", "display_name": "CJ Yetman", "link": "https://stackoverflow.com/users/4389763/cj-yetman"}, "reply_to_user": {"reputation": 703, "user_id": 291652, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/659f65ae402a90d1a4586bf27cb76d6a?s=128&d=identicon&r=PG", "display_name": "urema", "link": "https://stackoverflow.com/users/291652/urema"}, "edited": false, "score": 0, "creation_date": 1516230715, "post_id": 48265888, "comment_id": 83608848, "body": "maybe you should run a list of all the R commands in one run() command? or write the R commands into a file and use run_from_file()?"}, {"owner": {"reputation": 703, "user_id": 291652, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/659f65ae402a90d1a4586bf27cb76d6a?s=128&d=identicon&r=PG", "display_name": "urema", "link": "https://stackoverflow.com/users/291652/urema"}, "edited": false, "score": 0, "creation_date": 1516269140, "post_id": 48265888, "comment_id": 83622030, "body": "Setting the height and width parameters in the forcedNetwork call caused the issue - without these then the fill properties seems to work for me"}], "tags": [], "owner": {"reputation": 6442, "user_id": 4389763, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8f8cVbp-uMs/AAAAAAAAAAI/AAAAAAAANb0/Yjs4P3Dus-E/photo.jpg?sz=128", "display_name": "CJ Yetman", "link": "https://stackoverflow.com/users/4389763/cj-yetman"}, "is_accepted": false, "score": 1, "last_activity_date": 1516029806, "creation_date": 1516029806, "answer_id": 48265888, "question_id": 48265484, "link": "https://stackoverflow.com/questions/48265484/forcenetwork-in-r/48265888#48265888", "title": "forceNetwork in R", "body": "<pre><code>library(networkD3)\n\ndata(MisLinks)\ndata(MisNodes)\n\nfn &lt;- forceNetwork(Links = MisLinks, Nodes = MisNodes, Source = \"source\", \n                   Target = \"target\", Value = \"value\", NodeID = \"name\",\n                   Group = \"group\", opacity = 0.4, zoom = TRUE)\n\nfn$sizingPolicy$viewer$fill &lt;- TRUE\nfn$sizingPolicy$browser$fill &lt;- TRUE\n\nfn$sizingPolicy$viewer$padding &lt;- 20\nfn$sizingPolicy$browser$padding &lt;- 20\n\nsaveNetwork(fn, \"forceNetwork.html\", selfcontained = TRUE)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": -1, "last_activity_date": 1516030650, "creation_date": 1516030650, "answer_id": 48266133, "question_id": 48265484, "link": "https://stackoverflow.com/questions/48265484/forcenetwork-in-r/48266133#48266133", "title": "forceNetwork in R", "body": "<p>A quick search reveals that the <code>htmlwidgets</code> package provides <code>sizingPolicy</code> which allows you to adjust the required parameters </p>\n\n<p>Something like this</p>\n\n<pre><code>sizingPolicy(padding = 0, browser.fill = TRUE)\n</code></pre>\n"}], "owner": {"reputation": 703, "user_id": 291652, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/659f65ae402a90d1a4586bf27cb76d6a?s=128&d=identicon&r=PG", "display_name": "urema", "link": "https://stackoverflow.com/users/291652/urema"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1523282124, "creation_date": 1516028350, "last_edit_date": 1523282124, "question_id": 48265484, "link": "https://stackoverflow.com/questions/48265484/forcenetwork-in-r", "title": "forceNetwork in R", "body": "<p>I have called the following and it makes an HTML file with networkD3 perfectly.</p>\n\n<pre><code>forceNetwork(Links=g2$links, Nodes=g2$nodes, Source='source', Target='target', NodeID='name', Group='group', opacityNoHover=TRUE, Nodesize='group',height = 1000, width = 1000, fontSize = 20,linkDistance=200,clickAction = mcs2, zoom=TRUE)  %&gt;% saveNetwork(file = \"test-network.html\")\n</code></pre>\n\n<p>However in the created HTML it sets the <code>fill</code> parameter for the browser and viewer to be <code>false</code>.</p>\n\n<pre><code>&lt;script type=\"application/htmlwidget-sizing\" data-for=\"htmlwidget-18644f4e905f10bd8c40\"&gt;\n    {\"viewer\":{\"width\":1300,\"height\":1300,\"padding\":10,\"fill\":false},\"browser\":{\"width\":1300,\"height\":1300,\"padding\":10,\"fill\":false}}\n&lt;/script&gt;\n</code></pre>\n\n<p>The above is from the generated HTML file and is the final <code>&lt;script&gt;</code> tag that is generated from the <code>saveNetwork</code> call. </p>\n\n<p>How can I change the <code>fill</code> and <code>padding</code> values from R before calling <code>saveNetwork</code> in R through perl? Below is the code that does not produce the desired effects.</p>\n\n<pre><code>$r-&gt;run(q`fn &lt;- fn &lt;- forceNetwork(Links = MisLinks, Nodes = MisNodes, Source = \"source\", \n               Target = \"target\", Value = \"value\", NodeID = \"name\",\n               Group = \"group\", opacity = 0.4, zoom = TRUE)`);\n$r -&gt; run(q`fn$sizingPolicy$viewer$fill &lt;- TRUE`);\n$r -&gt; run(q`fn$sizingPolicy$browser$fill &lt;- TRUE`);\n$r -&gt; run(q`saveNetwork(fn, file = \"test-network.html\", selfcontained=TRUE)`);\n</code></pre>\n\n<p>However this still outputs the fill parameter with \"false\".</p>\n"}, {"tags": ["regex", "perl", "sftp"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1516023462, "post_id": 48264106, "comment_id": 83511042, "body": "The <code>*</code> is a special character in regular expressions. Your pattern is invalid. Remove it."}, {"owner": {"reputation": 146, "user_id": 2503801, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0d61ba76fec5ee0062ad1288d0fe5e11?s=128&d=identicon&r=PG&f=1", "display_name": "r1pster", "link": "https://stackoverflow.com/users/2503801/r1pster"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1516023538, "post_id": 48264106, "comment_id": 83511080, "body": "Using qr/xml/ makes no difference."}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1516023735, "post_id": 48264106, "comment_id": 83511184, "body": "adding a <code>.</code> before the <code>*</code> or simply removing <code>*</code> should do the work.  you can also add <code>$</code>at the end of the regex to specify you want <code>xml</code> at the end of the string"}, {"owner": {"reputation": 146, "user_id": 2503801, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0d61ba76fec5ee0062ad1288d0fe5e11?s=128&d=identicon&r=PG&f=1", "display_name": "r1pster", "link": "https://stackoverflow.com/users/2503801/r1pster"}, "edited": false, "score": 0, "creation_date": 1516024615, "post_id": 48264106, "comment_id": 83511668, "body": "Thanks, I have corrected my regex but no files get downloaded. I believe this could be related to how the &quot;wanted&quot; option in this Perl module should be used. If I remove the wanted option altogether, I see all files beeing downloaded including all the XML files."}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1516175239, "post_id": 48264106, "comment_id": 83576489, "body": "It the source directory is flat (without subdirectories), you can also use <code>mget</code> which accepts names with willcards: <code>$sftp-&gt;set_cwd($remote_dir); $sftp-&gt;mget(&quot;*.xml&quot;, $local_dir, newer_only =&gt; 1)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 146, "user_id": 2503801, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0d61ba76fec5ee0062ad1288d0fe5e11?s=128&d=identicon&r=PG&f=1", "display_name": "r1pster", "link": "https://stackoverflow.com/users/2503801/r1pster"}, "edited": false, "score": 1, "creation_date": 1516029121, "post_id": 48264164, "comment_id": 83514309, "body": "@r1pster: You&#39;ll have to give a little from your end. What you have been given should work and we can only make guesses about what mistakes you have made. Are you sure that you have copied the regex pattern precisely? Please give examples of some real-world files that are not being retrieved when you think they should be. Have you tried doing a case-insensitive match, with <code>qr&#47;\\.xml$&#47;i</code>? Have you tried using the <code>ls</code> method to read what files are in that directory? Have you tried enabling verbose mode with <code>more =&gt; &#39;-v&#39;</code> when you create the object? There is a lot you could try."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1516023605, "creation_date": 1516023605, "answer_id": 48264164, "question_id": 48264106, "link": "https://stackoverflow.com/questions/48264106/filtering-files-with-a-regex-pattern-in-netsftpforeign/48264164#48264164", "title": "Filtering files with a regex pattern in Net::SFTP::Foreign", "body": "<p>Your pattern has a syntax error. If I run it, I get this:</p>\n\n<blockquote>\n  <p>Quantifier follows nothing in regex; marked by &lt;-- HERE in m/* &lt;-- HERE .xml/ at ...</p>\n</blockquote>\n\n<p>That's because the <code>*</code> is a special character. It cannot stand on its own, and it is not used as a wildcard like it would be on the shell. Remove it.</p>\n\n<p>A good, valid pattern for getting only XML files could be</p>\n\n<pre><code>qr/\\.xml$/\n</code></pre>\n\n<p>The <code>$</code> denotes the end of the string, so that you would not download all files in a folder called <code>foo/bar.xml/baz/</code>.</p>\n\n<p>The pattern will match everything that contains it, regardless of what comes before the match.</p>\n"}], "owner": {"reputation": 146, "user_id": 2503801, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0d61ba76fec5ee0062ad1288d0fe5e11?s=128&d=identicon&r=PG&f=1", "display_name": "r1pster", "link": "https://stackoverflow.com/users/2503801/r1pster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 414, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516028328, "creation_date": 1516023348, "last_edit_date": 1516028328, "question_id": 48264106, "link": "https://stackoverflow.com/questions/48264106/filtering-files-with-a-regex-pattern-in-netsftpforeign", "title": "Filtering files with a regex pattern in Net::SFTP::Foreign", "body": "<p>Using the\n<a href=\"https://metacpan.org/pod/Net::SFTP::Foreign\" rel=\"nofollow noreferrer\"><code>Net::SFTP::Foreign</code></a>\nmodule, is it possible to download only files with a specific extension. For example, all <code>.xml</code> files</p>\n\n<p>What I've tried so far:</p>\n\n<pre><code>say \"Downloading files...\";\n\n$sftp-&gt;rget(\n        REMOTE_DIR,\n        LOCAL_DIR,\n        newer_only =&gt; 'true',\n        wanted     =&gt; qr/*\\.xml/\n);\n</code></pre>\n\n<p>This downloads no files. If I remove the <code>wanted</code> option then all files are downloaded.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 7975, "user_id": 3836111, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc8e3526756540925b0536455b280205?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Proske", "link": "https://stackoverflow.com/users/3836111/sebastian-proske"}, "edited": false, "score": 0, "creation_date": 1516016949, "post_id": 48261769, "comment_id": 83507555, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/721304/insert-commas-into-number-string\">Insert commas into number string</a>"}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1516019496, "post_id": 48261769, "comment_id": 83508911, "body": "Not a duplicate. The linked question just asks <i>how</i> to do it. This question starts with the regex provided in answers to the other question and asks <i>why</i> the regex works."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516021135, "post_id": 48261769, "comment_id": 83509811, "body": "It doesn&#39;t help that your regex is <i>wrong</i>. That substitution leaves the string <code>12,</code>. Your second (capturing) group should be a look-ahead instead to avoid deleting digits."}, {"owner": {"reputation": 233, "user_id": 2285126, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f15c9d0cefae86018ea997c5caedf70b?s=128&d=identicon&r=PG", "display_name": "surya", "link": "https://stackoverflow.com/users/2285126/surya"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516021416, "post_id": 48261769, "comment_id": 83509949, "body": "@Borodin, Sorry , edited."}], "answers": [{"tags": [], "owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "is_accepted": false, "score": 3, "last_activity_date": 1516015389, "creation_date": 1516015389, "answer_id": 48261977, "question_id": 48261769, "link": "https://stackoverflow.com/questions/48261769/matching-3-digit-groups-in-a-string-using-regular-expressions/48261977#48261977", "title": "Matching 3-digit-groups in a string using regular expressions", "body": "<p>Adding thousands-separating commas to a number is inherently the kind of thing which is easier to do from right to left, because one counts in this direction.  The algorithm for the reversed number is simple: replace every group of three numbers by those three numbers followed by a comma.  In the code snippet below I use this reverse trick, and then reverse the amended number again at the end.</p>\n\n<pre><code>$s = \"12345678\";\nprint $s . \"\\n\";\n$t = reverse $s;\n$t =~ s/(\\d{3})/${1},/g;\n$s = reverse $t;\nprint $s;\n\n12345678\n12,345,678\n</code></pre>\n\n<p><a href=\"http://rextester.com/EUFDF40547\" rel=\"nofollow noreferrer\"><h2>Demo</h2></a></p>\n"}, {"comments": [{"owner": {"reputation": 233, "user_id": 2285126, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f15c9d0cefae86018ea997c5caedf70b?s=128&d=identicon&r=PG", "display_name": "surya", "link": "https://stackoverflow.com/users/2285126/surya"}, "edited": false, "score": 0, "creation_date": 1516016261, "post_id": 48262120, "comment_id": 83507133, "body": "My bad. Corrected"}, {"owner": {"reputation": 233, "user_id": 2285126, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f15c9d0cefae86018ea997c5caedf70b?s=128&d=identicon&r=PG", "display_name": "surya", "link": "https://stackoverflow.com/users/2285126/surya"}, "edited": false, "score": 0, "creation_date": 1516016543, "post_id": 48262120, "comment_id": 83507291, "body": "But by that logic, shouldn&#39;t only match 678 ( the last 3 digits ) ? The cursor should be at the position between 5 and 6 to insert the comma. As i understand, the regex pointer should only move forward from here. Is that not right ?"}, {"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "reply_to_user": {"reputation": 233, "user_id": 2285126, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f15c9d0cefae86018ea997c5caedf70b?s=128&d=identicon&r=PG", "display_name": "surya", "link": "https://stackoverflow.com/users/2285126/surya"}, "edited": false, "score": 0, "creation_date": 1516016662, "post_id": 48262120, "comment_id": 83507350, "body": "i&#39;ve just seen that <a href=\"https://regex101.com/r/vlHBeB/1/\" rel=\"nofollow noreferrer\">regex101</a> provides also a debugger maybe can help clicking on regex debugger below tools"}, {"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "reply_to_user": {"reputation": 233, "user_id": 2285126, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f15c9d0cefae86018ea997c5caedf70b?s=128&d=identicon&r=PG", "display_name": "surya", "link": "https://stackoverflow.com/users/2285126/surya"}, "edited": false, "score": 0, "creation_date": 1516018198, "post_id": 48262120, "comment_id": 83508261, "body": "at (\\d\\d\\d)+ (?!\\d), regex engine can choose between two paths : if next character is a digit (it must match three if there&#39;s less than three it must backtrack), else (it&#39;s not a digit) match is done"}, {"owner": {"reputation": 233, "user_id": 2285126, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f15c9d0cefae86018ea997c5caedf70b?s=128&d=identicon&r=PG", "display_name": "surya", "link": "https://stackoverflow.com/users/2285126/surya"}, "edited": false, "score": 0, "creation_date": 1516021561, "post_id": 48262120, "comment_id": 83510011, "body": "The text I was referencing did not introduce backtrack , so thank you for that. I am referencing <a href=\"https://stackoverflow.com/questions/9011592/in-regular-expressions-what-is-a-backtracking-back-referencing\" title=\"in regular expressions what is a backtracking back referencing\">stackoverflow.com/questions/9011592/&hellip;</a> . Backtracking should happen when the regex fails to find a match. However, the regex would find a match at the very end ( last 3 digits ) and should stop. Why did it go back ?"}], "tags": [], "owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "is_accepted": true, "score": 5, "last_activity_date": 1516023808, "last_edit_date": 1516023808, "creation_date": 1516015910, "answer_id": 48262120, "question_id": 48261769, "link": "https://stackoverflow.com/questions/48261769/matching-3-digit-groups-in-a-string-using-regular-expressions/48262120#48262120", "title": "Matching 3-digit-groups in a string using regular expressions", "body": "<pre><code>(?&lt;=\\d)(\\d\\d\\d)+(?!\\d)\n</code></pre>\n\n<p>how it works, reading from the right :</p>\n\n<ul>\n<li><code>(?!\\d)</code> lookahead assertion ensures there is no digit just after this point, the cursor (in input) is is just after the last digit</li>\n<li><code>(\\d\\d\\d)+</code> matches 1 or more groups of three digits</li>\n<li><code>(?&lt;=\\d)</code> ensures there is still a digit before the first digit of a group</li>\n</ul>\n\n<p>update about backtracking: taking 123456789</p>\n\n<p>first engine starts whenever it find a digit before cursor : after 1</p>\n\n<pre><code>1.23456789\n</code></pre>\n\n<p>then it tries to match at least 1 and as many group of three digits</p>\n\n<pre><code>1.234.567.89\n</code></pre>\n\n<p>after 89 it fails to find a third digit, also backtracking it can't match because of negative lookahead, so it backtracks at the begining and goes to the following character : 2</p>\n\n<pre><code>12.345.678.9\n</code></pre>\n\n<p>again it fails to find a second digit within a group of three so it goes to 3</p>\n\n<pre><code>123.456.789\n</code></pre>\n\n<p>now there is no more digit so it matches.</p>\n\n<p>Note that the worst case is when numbre is a multiple of 3, and it is what it is done for each replacement because the lookahead not move forward the input cursor.</p>\n\n<p>including perl one-liner</p>\n\n<pre><code>perl -pe 's/(?&lt;=\\d)(?=(\\d{3}(?{print \"matched $&amp;.\\n\"}))+(?!\\d(?{print \"failed: $&amp;.\\n\"})))/,/g'  &lt;&lt;&lt;123456789\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 212, "user_id": 8332519, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/701313eb2b62158bcacc70bd31762e32?s=128&d=identicon&r=PG&f=1", "display_name": "San", "link": "https://stackoverflow.com/users/8332519/san"}, "is_accepted": false, "score": 3, "last_activity_date": 1516034876, "creation_date": 1516034876, "answer_id": 48267377, "question_id": 48261769, "link": "https://stackoverflow.com/questions/48261769/matching-3-digit-groups-in-a-string-using-regular-expressions/48267377#48267377", "title": "Matching 3-digit-groups in a string using regular expressions", "body": "<p>This is simple way to get the data    </p>\n\n<pre><code>$num=12345678;\n$num =~ s/(\\d)(?=(\\d{3})+(\\D|$))/$1\\,/g;\nprint $num;\n</code></pre>\n"}], "owner": {"reputation": 233, "user_id": 2285126, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f15c9d0cefae86018ea997c5caedf70b?s=128&d=identicon&r=PG", "display_name": "surya", "link": "https://stackoverflow.com/users/2285126/surya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1444, "favorite_count": 0, "accepted_answer_id": 48262120, "answer_count": 3, "score": 0, "last_activity_date": 1516034876, "creation_date": 1516014523, "last_edit_date": 1516021773, "question_id": 48261769, "link": "https://stackoverflow.com/questions/48261769/matching-3-digit-groups-in-a-string-using-regular-expressions", "title": "Matching 3-digit-groups in a string using regular expressions", "body": "<p>This is what I am trying to do : </p>\n\n<blockquote>\n  <p>Given a string, 12345678, commify(str) should give me 12,345,678.</p>\n</blockquote>\n\n<p>The problem is to be solved using regex with Perl, and the solution that works for this problem is this : </p>\n\n<blockquote>\n  <p>s/(?&lt;=\\d)(?=(\\d\\d\\d)+(?!\\d))/,/g</p>\n</blockquote>\n\n<p><strong>Source</strong> : Mastering Regular Expressions </p>\n\n<p>The problem I am having in understanding this is how we are able to capture the \"345\" part of this string. One thing that I could think about is that the regex pointer \"i\" ( this is how I am visualising it ) starts at 1, another pointer \"j\" traverses the entire string and finds the appropriate location between 5 and 6. Then i moves to 2. \"j\" traverses the entire string again, finds the appropriate position between 2 and 3(since now a comma has been inserted between 5 and 6).\nIs my understanding correct ? If not, could anybody help me to visualise this process ?</p>\n\n<p>Note : I have found similar questions but they don't seem to explain how the problem is solved but rather state the exact answer.  </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 109, "user_id": 2672337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5652f692b5a269ab99d35d0cbedf8319?s=128&d=identicon&r=PG", "display_name": "Eily", "link": "https://stackoverflow.com/users/2672337/eily"}, "edited": false, "score": 1, "creation_date": 1516013748, "post_id": 48261119, "comment_id": 83505748, "body": "Can you show us a case that is not a &quot;perfect result&quot;? We can&#39;t help you correct your code if you only show us the part that works."}, {"owner": {"reputation": 3, "user_id": 9187218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf19e6f0460160684c94064b6d293cdc?s=128&d=identicon&r=PG&f=1", "display_name": "user9187218", "link": "https://stackoverflow.com/users/9187218/user9187218"}, "reply_to_user": {"reputation": 109, "user_id": 2672337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5652f692b5a269ab99d35d0cbedf8319?s=128&d=identicon&r=PG", "display_name": "Eily", "link": "https://stackoverflow.com/users/2672337/eily"}, "edited": false, "score": 0, "creation_date": 1516014521, "post_id": 48261119, "comment_id": 83506200, "body": "Is there any more accurate way to match first word and last word as i shown in my example"}], "answers": [{"comments": [{"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1516014830, "post_id": 48261816, "comment_id": 83506354, "body": "in this case <code>\\b</code> assertions are useless because \\w+ can&#39;t match non word character and can&#39;t backtrack"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1516015002, "post_id": 48261816, "comment_id": 83506457, "body": "Actually, in this case, one of the <code>\\b</code> assertions is essential. Can you tell which one it is? :-)"}, {"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 1, "creation_date": 1516015071, "post_id": 48261816, "comment_id": 83506494, "body": "indeed the one after <code>.*</code>"}, {"owner": {"reputation": 3, "user_id": 9187218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf19e6f0460160684c94064b6d293cdc?s=128&d=identicon&r=PG&f=1", "display_name": "user9187218", "link": "https://stackoverflow.com/users/9187218/user9187218"}, "edited": false, "score": 0, "creation_date": 1516015994, "post_id": 48261816, "comment_id": 83506978, "body": "Ya thanks man now it is working fine, after adding boundary condition to it."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 0, "last_activity_date": 1516014703, "creation_date": 1516014703, "answer_id": 48261816, "question_id": 48261119, "link": "https://stackoverflow.com/questions/48261119/regular-expression-remove-the-and-delimited-comment-and-extract-first-and/48261816#48261816", "title": "Regular expression: remove the (* and *)-delimited comment and extract first and last words", "body": "<p>You don't need two regexes.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nwhile (&lt;DATA&gt;) {\n  # skip empty lines\n  next unless /\\S/;\n\n  my ($first, $last) = /\\b(\\w+)\\b.*\\b(\\w+)\\b\\s*;/;\n\n  say \"$first / $last\";\n}\n\n__DATA__\nWynk (* it is a Music online music player ; We can listen a song online and offline *) PAID;\n\nyoutube (* it is video player ; we can see the video online and we can download it *) free;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Wynk / PAID\nyoutube / free\n</code></pre>\n\n<p>But I think this isn't very different from what you already had. So I suspect you probably need to give us more details about what a \"perfect result\" is.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1516040713, "creation_date": 1516040713, "answer_id": 48268747, "question_id": 48261119, "link": "https://stackoverflow.com/questions/48261119/regular-expression-remove-the-and-delimited-comment-and-extract-first-and/48268747#48268747", "title": "Regular expression: remove the (* and *)-delimited comment and extract first and last words", "body": "<pre><code>while (&lt;&gt;) {\n   chomp;\n   s/;\\s*\\z//;\n   my ($id, $status) = /^ (.*) \\(\\* .* \\)\\* (.*)/sx\n      or die;\n\n   s/^\\s+//, s/\\s+\\z// for $id, $status;\n\n   ...\n}\n</code></pre>\n\n<p>This solution works for ids like <code>Yahoo!</code> and <code>Joe's Streaming Service</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 9187218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf19e6f0460160684c94064b6d293cdc?s=128&d=identicon&r=PG&f=1", "display_name": "user9187218", "link": "https://stackoverflow.com/users/9187218/user9187218"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 48261816, "answer_count": 2, "score": -1, "last_activity_date": 1562593369, "creation_date": 1516012200, "last_edit_date": 1562593369, "question_id": 48261119, "link": "https://stackoverflow.com/questions/48261119/regular-expression-remove-the-and-delimited-comment-and-extract-first-and", "title": "Regular expression: remove the (* and *)-delimited comment and extract first and last words", "body": "<p>I am facing an Issue while using regular expression,\nEg: I have something like this:</p>\n\n<pre><code>Wynk (* it is a Music online music player ; We can listen a song online and offline *) PAID;\nyoutube (* it is video player ; we can see the video online and we can download it *) free;\n</code></pre>\n\n<p>In above mentioned example I need to remove the <code>(*</code> and <code>*)</code>-delimited comment and extract the data \"Wynk\" and \"PAID\" from the first line and  \"youtube\" and \"free\" from the second.</p>\n\n<p>I have done something like this</p>\n\n<pre><code>($first_word) =$_ =~ /^\\s*(\\w+)/; ($last_word) = $_ =~ /(\\w+)\\s*\\;$/;\n</code></pre>\n\n<p>But I am not able to get perfect result for all data which looks similar to above mentioned example.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516007406, "post_id": 48259714, "comment_id": 83502293, "body": "What is in <code>@gitFile</code>?  All lines of a file?"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1516007695, "post_id": 48259714, "comment_id": 83502447, "body": "if I understant, you want to extract all IPs that are in a file? Is it correct? Can we have an example of what the input looks like?"}, {"owner": {"reputation": 33, "user_id": 8191890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10210222397819480/picture?type=large", "display_name": "Vibes", "link": "https://stackoverflow.com/users/8191890/vibes"}, "edited": false, "score": 0, "creation_date": 1516008290, "post_id": 48259714, "comment_id": 83502705, "body": "access-list firewall1  permit tcp 10.100.38.224 255.255.255.240 10.185.34.240 255.255.255.240 eq 9012...This is how the content looks like. I want to search based on 3rd,4th, 6th and 9th field and extract the lines having this combination"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516008932, "post_id": 48259714, "comment_id": 83503037, "body": "Please: edit the question with clarifications. A lot is rather unclear.  (Btw, your example shows 3rd, 6th, and 9th field -- no 4th that you mention in the comment?)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1516013350, "post_id": 48259714, "comment_id": 83505533, "body": "In order to answer this we need some example data and the desired output.  We can&#39;t guess what&#39;s going on really, without that. Please <a href=\"https://stackoverflow.com/posts/48259714/edit\">edit</a> your question to include these things."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1516091821, "last_edit_date": 1516091821, "creation_date": 1516008852, "answer_id": 48260196, "question_id": 48259714, "link": "https://stackoverflow.com/questions/48259714/how-to-search-for-multiple-strings-in-same-line-using-perl/48260196#48260196", "title": "How to search for multiple strings in same line using perl?", "body": "<p>Without complete code it is not clear what is going on in your program. I infer by context that <code>$line</code> has a template for a line so you extract patterns from it, and that <code>@gitFile</code> has all lines from a file. Then among those lines you want to identify the ones that have all three patterns.</p>\n\n<ul>\n<li><p>The first attempt should be written as</p>\n\n<pre><code>my @gitLines = grep { /$fld0/ &amp;&amp; /$fld1/ &amp;&amp; /$fld2/ } @gitFile;\n</code></pre>\n\n<p>While you may indeed pick your delimiters, for any other than <code>//</code> there must be the <code>m</code>, so you can have <code>grep { m\"$fld0\" &amp;&amp; .. }</code> (there is no value in explicit <code>$_</code> as it only adds noise). But I find it only obscuring to use uncommon delimiters in this case.</p></li>\n<li><p>The second attempt is wrong as you cannot match an array. Also, using the alternation <code>|</code> would match even when only one pattern matches.</p></li>\n<li><p>Another way is to form a regex to parse the line instead of matching separately on each field</p>\n\n<pre><code>my $re = join '.*?', map { quotemeta } (split ' ', $line)[3,6,9];\nmy @gitLines = grep { /$re/ } @gitFile;\n</code></pre>\n\n<p>Regex patterns should be  built using <a href=\"http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\"><code>qr</code> operator</a> but for the simple <code>.*?</code> pattern a string works.</p>\n\n<p>Here the patterns need be present in a line in the exact order, unlike in the <code>grep</code> above. A clear advantage is that it runs regex over the line once, while in <code>grep</code> the engine starts three times.    </p></li>\n</ul>\n\n<p>Note that it is generally better to process files line-by-line, unless there are specific reasons to read the whole file ahead of time.  For example</p>\n\n<pre><code># $line contains patterns that must all match at indices 3,6,9\nmy $re = join '.*?', map { quotemeta } (split ' ', $line)[3,6,9];\n\nmy @gitLines;\nopen my $fh, '&lt;', $git_file_name  or die \"Can't open $git_file_name: $!\"; \nwhile (&lt;$fh&gt;) {\n    next if not /$re/;\n    push @gitLines, $_;\n}\n</code></pre>\n\n<p>More than the efficiency this has the advantage of being more easily maintained.</p>\n"}, {"tags": [], "owner": {"reputation": 16, "user_id": 7305079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f70eae1885bd8d3cd1e2b3d5ba56292?s=128&d=identicon&r=PG&f=1", "display_name": "livs", "link": "https://stackoverflow.com/users/7305079/livs"}, "is_accepted": true, "score": 0, "last_activity_date": 1516110442, "last_edit_date": 1516110442, "creation_date": 1516101764, "answer_id": 48280093, "question_id": 48259714, "link": "https://stackoverflow.com/questions/48259714/how-to-search-for-multiple-strings-in-same-line-using-perl/48280093#48280093", "title": "How to search for multiple strings in same line using perl?", "body": "<p>Basicaly, I believe you are trying to find more than 1 match in a line and you have got each line in an array called <code>@gitFile</code>.</p>\n\n<p>I am trying to do it in a simpler way as per my understanding.</p>\n\n<pre><code>$fld0 = 'pattern1';\n$fld1 = 'pattern2';\n\nforeach(@gitFile)\n{\n     if(($_=~ m/$fld0/ &amp;&amp; $_ =~ m/$fld1/))  \n     { \n         push(@gitLines ,$_);\n     }\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 8191890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10210222397819480/picture?type=large", "display_name": "Vibes", "link": "https://stackoverflow.com/users/8191890/vibes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1487, "favorite_count": 0, "accepted_answer_id": 48280093, "answer_count": 2, "score": 0, "last_activity_date": 1516110442, "creation_date": 1516006899, "question_id": 48259714, "link": "https://stackoverflow.com/questions/48259714/how-to-search-for-multiple-strings-in-same-line-using-perl", "title": "How to search for multiple strings in same line using perl?", "body": "<p>I know how to extract a line by searching for a single string in a file inside perl script and below command worked perfectly fine which gave the lines having 255.255.255.255 in it.</p>\n\n<pre><code>my @newList = grep /255.255.255.255/, @File1;\n</code></pre>\n\n<p>However when I want to search for multiple strings(fields) in a file, grep command is not working</p>\n\n<p>I have below file where if sourceipaddress, destipaddr and port number matches, it should extract the entire line and write into an array</p>\n\n<p>gitFile:</p>\n\n<p>access abc permit tcp sourceipaddress sourcesubnet destipaddr destsubnet eq portnumber</p>\n\n<p>This is the way I have chosen to resolve the issue where I'm splitting based on the fields and searching for those fields in an array using grep but it does not seem to work (Tried 5 different ways which are commented below but none of the commands worked). I just want a way to search multiple strings(which includes ipaddress) in a line. Kindly help as I\u2019m struggling with this as I\u2019m new to perl.</p>\n\n<pre><code>my @columns = split(' ',$line);\n    my $fld0 = $columns[3];\n    my $fld3 = $columns[6];\n    my $fld5 = $columns[9];\n\n    #my @gitLines = grep {$_ =~ \"$fld0\" &amp;&amp; $_ =~ \"$sIP\" &amp;&amp; $_ =~ \"$dIP\" &amp;&amp; $_ =~ \"$fld5\"} @gitFile;\n\n  #my @gitLines = @gitFile =~ /$fld0|$sIP|$dIP|$fld5/;\n\n   #my @gitLines = grep /$fld0/ &amp;&amp; /$sIP/ &amp;&amp; /$dIP/ &amp;&amp;/$fld5/,@gitFile;\n\n   #grep {$fld0} &amp;&amp; {$sIP} &amp;&amp; {$dIP} &amp;&amp; {$fld5} @gitFile;\n\n  #my @gitLines = grep /255.255.255.255/ &amp;&amp; /$fld0/, @File1;\n</code></pre>\n\n<p>I'm trying this in Linux GNU/Linux flavor</p>\n"}, {"tags": ["arrays", "perl", "loops", "infinite-loop"], "answers": [{"comments": [{"owner": {"reputation": 1088, "user_id": 1013823, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pkbV7.jpg?s=128&g=1", "display_name": "Kris Oye", "link": "https://stackoverflow.com/users/1013823/kris-oye"}, "edited": false, "score": 0, "creation_date": 1515998223, "post_id": 48257797, "comment_id": 83498498, "body": "I do like the roll-your-own method although it needs to be tweaked a little to meet the original spec of getting N elements.  I thought about doing something similar but state just popped out of my head onto the page.  Very nice."}], "tags": [], "owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "is_accepted": true, "score": 6, "last_activity_date": 1516009172, "last_edit_date": 1516009172, "creation_date": 1515996872, "answer_id": 48257797, "question_id": 48257595, "link": "https://stackoverflow.com/questions/48257595/how-to-make-an-array-loop-indefinitely/48257797#48257797", "title": "How to make an array loop indefinitely?", "body": "<p>It's not that hard to roll your own iterator, but <a href=\"http://perldoc.perl.org/perlfaq4.html#How-do-I-handle-circular-lists%3F\" rel=\"nofollow noreferrer\"><code>perlfaq4</code></a> has your need covered:</p>\n\n<hr>\n\n<blockquote>\n  <h2>How do I handle circular lists?</h2>\n  \n  <p>(contributed by brian d foy) </p>\n  \n  <p>If you want to cycle through an array endlessly, you can increment the\n  index modulo the number of elements in the array:</p>\n\n<pre><code>my @array = qw( a b c );\nmy $i = 0;\nwhile( 1 ) {\n    print $array[ $i++ % @array ], \"\\n\";\n    last if $i &gt; 20;\n} \n</code></pre>\n  \n  <p>You can also use <a href=\"https://metacpan.org/pod/Tie::Cycle\" rel=\"nofollow noreferrer\"><code>Tie::Cycle</code></a> to use a scalar that always has the next element of the circular array:</p>\n\n<pre><code>use Tie::Cycle;\ntie my $cycle, 'Tie::Cycle', [ qw( FFFFFF 000000 FFFF00 ) ];\nprint $cycle; # FFFFFF\nprint $cycle; # 000000\nprint $cycle; # FFFF00\n</code></pre>\n  \n  <p>The <a href=\"https://metacpan.org/pod/Array::Iterator::Circular\" rel=\"nofollow noreferrer\"><code>Array::Iterator::Circular</code></a> creates an iterator object for circular arrays:</p>\n\n<pre><code>use Array::Iterator::Circular;\nmy $color_iterator = Array::Iterator::Circular-&gt;new(\n    qw(red green blue orange)\n    );\nforeach ( 1 .. 20 ) {\n    print $color_iterator-&gt;next, \"\\n\";\n}\n</code></pre>\n</blockquote>\n\n<hr>\n\n<h2>The roll-your-own variety</h2>\n\n<p>The subroutine is really quite simple (implemented as <code>circularize</code> in the code below). The value of <code>$i</code> is retained in <code>$colors</code>'s scope, so no need for state variables:</p>\n\n<pre><code>sub circularize {\n  my @array = @_;\n  my $i = 0;\n  return sub { $array[ $i++ % @array ] }\n}\n\nmy $colors = circularize( qw( red blue orange purple ) ); # Initialize\n\nprint $colors-&gt;(), \"\\n\" for 1 .. 14; # Use\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1515997962, "post_id": 48257809, "comment_id": 83498417, "body": "See my answer on how this can be done without relying on <code>state</code> variables"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1515998284, "post_id": 48257809, "comment_id": 83498516, "body": "Need <code>use feature &#39;state&#39;;</code> (or <code>use v5.10;</code>).  @Zaid, I like your answer (+1) but as for <code>state</code> feature -- it is conceptually simpler than a closure."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1515998318, "post_id": 48257809, "comment_id": 83498525, "body": "To each his own :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1515999980, "post_id": 48257809, "comment_id": 83499123, "body": "Comments.  Relying on global <code>@names</code> in the sub limits its use. The <code>$length</code> need not be <code>state</code>, and <code>scalar</code> isn&#39;t needed, just <code>my $len = @names;</code>. I don&#39;t see the benefit of using a prototype here (and it is not used in the example)."}, {"owner": {"reputation": 1088, "user_id": 1013823, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pkbV7.jpg?s=128&g=1", "display_name": "Kris Oye", "link": "https://stackoverflow.com/users/1013823/kris-oye"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1516008841, "post_id": 48257809, "comment_id": 83502986, "body": "True true... not a very useful snippet of code.  @Zaid&#39;s code is definitely more geared towards re-use."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516010676, "post_id": 48257809, "comment_id": 83504013, "body": "@KrisOye I didn&#39;t mean that and I don&#39;t think so -- all these are easily remedied. I think that this is one good solution for the problem."}], "tags": [], "owner": {"reputation": 1088, "user_id": 1013823, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pkbV7.jpg?s=128&g=1", "display_name": "Kris Oye", "link": "https://stackoverflow.com/users/1013823/kris-oye"}, "is_accepted": false, "score": 3, "last_activity_date": 1515996944, "creation_date": 1515996944, "answer_id": 48257809, "question_id": 48257595, "link": "https://stackoverflow.com/questions/48257595/how-to-make-an-array-loop-indefinitely/48257809#48257809", "title": "How to make an array loop indefinitely?", "body": "<p>I never fully understood that mechanism (is it only on foreach?).  I would just use state values, e.g.:</p>\n\n<pre><code>my @names = qw(John Peter Michael);\n\nsub GetNames($) {\n  my $count = shift;\n  my @result = ();\n\n  state $index = 0;\n  state $length = scalar(@names);\n\n  while($count--) {\n    push(@result, $names[($index++ % $length)]);\n  }\n  return @result;\n}\n\n\nprint join(\", \", GetNames(2)), \"\\n\\n\";\nprint join(\", \", GetNames(4)), \"\\n\";\n</code></pre>\n\n<p>Outputs:</p>\n\n<p>John, Peter</p>\n\n<p>Michael, John, Peter, Michael</p>\n"}], "owner": {"reputation": 303, "user_id": 6312266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/628952e3fa60c849c9df20cc3ef354ee?s=128&d=identicon&r=PG&f=1", "display_name": "DisplayMyName", "link": "https://stackoverflow.com/users/6312266/displaymyname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 2, "accepted_answer_id": 48257797, "answer_count": 2, "score": 3, "last_activity_date": 1516009241, "creation_date": 1515995557, "last_edit_date": 1516009241, "question_id": 48257595, "link": "https://stackoverflow.com/questions/48257595/how-to-make-an-array-loop-indefinitely", "title": "How to make an array loop indefinitely?", "body": "<p>I have a list of names:</p>\n\n<pre><code>@names = qw(John Peter Michael);\n</code></pre>\n\n<p>I want to take 2 values from it, so I get John and Peter. If I want to take 2 more - I get Michael and John. 1 more - Peter. 3 more - Michael John and Peter, and so on.</p>\n\n<p>I've started writing a subroutine where a global index ID would be set and remembered, and would reset itself to zero once it reaches scalar limit of an array, but then I read somewhere that Perl arrays \"remember\" the position they were looped.</p>\n\n<p>Is that true or am I misunderstanding something? Is there a way to do my task an easy way?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 263, "user_id": 4995259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4d0fa9012306fa48b9ef275998c4a18?s=128&d=identicon&r=PG&f=1", "display_name": "criz", "link": "https://stackoverflow.com/users/4995259/criz"}, "edited": false, "score": 0, "creation_date": 1515995547, "post_id": 48257583, "comment_id": 83497756, "body": "aaa should just remain as is"}], "answers": [{"comments": [{"owner": {"reputation": 263, "user_id": 4995259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4d0fa9012306fa48b9ef275998c4a18?s=128&d=identicon&r=PG&f=1", "display_name": "criz", "link": "https://stackoverflow.com/users/4995259/criz"}, "edited": false, "score": 0, "creation_date": 1515996033, "post_id": 48257610, "comment_id": 83497888, "body": "Thanks I tried it. It works for &quot;aa&quot; but &quot;aazzz&quot; should also be &quot;azzz&quot;."}, {"owner": {"reputation": 263, "user_id": 4995259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4d0fa9012306fa48b9ef275998c4a18?s=128&d=identicon&r=PG&f=1", "display_name": "criz", "link": "https://stackoverflow.com/users/4995259/criz"}, "edited": false, "score": 0, "creation_date": 1515996204, "post_id": 48257610, "comment_id": 83497941, "body": "Sorry. It seems to work by adding the &quot;g&quot; modifier. Thank you!"}, {"owner": {"reputation": 263, "user_id": 4995259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4d0fa9012306fa48b9ef275998c4a18?s=128&d=identicon&r=PG&f=1", "display_name": "criz", "link": "https://stackoverflow.com/users/4995259/criz"}, "edited": false, "score": 0, "creation_date": 1515996814, "post_id": 48257610, "comment_id": 83498095, "body": "Done. Though some parts of the regex code I still don&#39;t understand but I will try to learn it one by one. Thanks again for the very quick help on this."}], "tags": [], "owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "is_accepted": true, "score": 3, "last_activity_date": 1515996574, "last_edit_date": 1515996574, "creation_date": 1515995685, "answer_id": 48257610, "question_id": 48257583, "link": "https://stackoverflow.com/questions/48257583/is-it-possible-to-substitute-adjacent-characters-in-a-string-using-regex-if-coun/48257610#48257610", "title": "Is it possible to substitute adjacent characters in a string using regex if count is 2?", "body": "<p>Lookarounds come in handy here, and we can try matching <code>aa</code> on the condition that both what comes before <code>aa</code> and after it is not another <code>a</code>.  Use this pattern:</p>\n\n<pre><code>(?&lt;!a)aa(?!a)\n</code></pre>\n\n<p>Here is a working code snippet (demo below):</p>\n\n<pre><code>my $old = 'abc aa efg a aaa hijk aazzz';\nmy $new = $old =~ s/(?&lt;!a)aa(?!a)/a/rg;\nprint $new;\n\nabc a efg a aaa hijk azzz\n</code></pre>\n\n<p><a href=\"http://rextester.com/VHN30747\" rel=\"nofollow noreferrer\"><h2>Demo</h2></a></p>\n"}], "owner": {"reputation": 263, "user_id": 4995259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4d0fa9012306fa48b9ef275998c4a18?s=128&d=identicon&r=PG&f=1", "display_name": "criz", "link": "https://stackoverflow.com/users/4995259/criz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 48257610, "answer_count": 1, "score": 1, "last_activity_date": 1515996574, "creation_date": 1515995447, "question_id": 48257583, "link": "https://stackoverflow.com/questions/48257583/is-it-possible-to-substitute-adjacent-characters-in-a-string-using-regex-if-coun", "title": "Is it possible to substitute adjacent characters in a string using regex if count is 2?", "body": "<p>String: abc aa efg a aaa hijk aazzz</p>\n\n<p>Using regex, I would like to substitute only the 2 adjacent \"a\" into a single \"a\".</p>\n\n<ol>\n<li>aa to a</li>\n<li>aazzz to azzz</li>\n</ol>\n\n<p>My code is this but it also substitutes the 3 \"a\".</p>\n\n<pre><code>s/(aa)/a/g;\n</code></pre>\n"}, {"tags": ["regex", "shell", "perl"], "comments": [{"owner": {"reputation": 4232, "user_id": 6772373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wMTdt.jpg?s=128&g=1", "display_name": "Mike Tung", "link": "https://stackoverflow.com/users/6772373/mike-tung"}, "edited": false, "score": 0, "creation_date": 1515978722, "post_id": 48255797, "comment_id": 83494344, "body": "Where are you actually writing to <code>output.html</code>? It isn&#39;t anywhere in your pl."}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 1, "creation_date": 1515979299, "post_id": 48255797, "comment_id": 83494476, "body": "More important, a list is passed by value so <code>enter_site_info</code> does not change the value of its argument.  You are not scraping anything."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1515980202, "post_id": 48255797, "comment_id": 83494651, "body": "If it weren&#39;t for the subroutine calls without <code>&amp;</code> and the <code>my</code> declarations, I&#39;d assume this is perl4 code from 1992 or so. Start with <code>use strict; use warnings;</code> and fix all the problems."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515993971, "post_id": 48255797, "comment_id": 83497338, "body": "You should avoid <code>chop</code>. <code>chomp</code> is much safer. And the first index of a Perl array is zero. You have written <i>way</i> too much before stopping to test your code. You should write just a very few lines at a time before running the program to make sure that it works so far. You certainly shouldn&#39;t get anywhere near finishing the program before testing unless it is a trivial piece of code just a line or two long. And you should write your code so that the comments are unnecessary. Only particularly tricky techniques need an advisory comment."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 4232, "user_id": 6772373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wMTdt.jpg?s=128&g=1", "display_name": "Mike Tung", "link": "https://stackoverflow.com/users/6772373/mike-tung"}, "edited": false, "score": 1, "creation_date": 1515994218, "post_id": 48255797, "comment_id": 83497412, "body": "@Mike: Try scrolling the code"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1515998470, "post_id": 48255797, "comment_id": 83498556, "body": "why would you use CGI in 2018?"}, {"owner": {"reputation": 11, "user_id": 9217344, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156864277618561/picture?type=large", "display_name": "T. Sinister Porpoise", "link": "https://stackoverflow.com/users/9217344/t-sinister-porpoise"}, "edited": false, "score": 0, "creation_date": 1516045220, "post_id": 48255797, "comment_id": 83522662, "body": "Because this script has gone through changes. The initial intent was to return the variable values to the main program.  And it looks like I got Python and Perl mixed up with chop and chomp."}, {"owner": {"reputation": 11, "user_id": 9217344, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156864277618561/picture?type=large", "display_name": "T. Sinister Porpoise", "link": "https://stackoverflow.com/users/9217344/t-sinister-porpoise"}, "edited": false, "score": 0, "creation_date": 1516045238, "post_id": 48255797, "comment_id": 83522672, "body": "Also, I&#39;m not a fan of commenting in general, but people expect it."}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 3, "last_activity_date": 1515982121, "creation_date": 1515982121, "answer_id": 48256114, "question_id": 48255797, "link": "https://stackoverflow.com/questions/48255797/screen-scraper-script-wont-write-to-ouptut-file/48256114#48256114", "title": "Screen scraper script won&#39;t write to ouptut file", "body": "<p>While you're checking some, you're not checking all of your <code>open</code> or <code>system</code> calls. If they fail, the program will keep going without an error message telling you why.</p>\n\n<p>You can add checks to all of these, but it's easy to forget. Instead, use <a href=\"https://metacpan.org/pod/autodie\" rel=\"nofollow noreferrer\"><code>autodie</code></a> to do the checks for you.</p>\n\n<p>You'll also want to <code>use strict</code> to ensure you haven't made any variable typos, and <code>use warnings</code> to warn you about small mistakes. See <a href=\"https://stackoverflow.com/questions/8023959/why-use-strict-and-warnings#8024241\">this answer for more</a>.</p>\n\n<p>Also <code>@global_sites</code> is empty so <code>enter_site_info()</code> isn't going to do anything. And <code>scrape_sites()</code> does nothing with its argument, <code>@ss_info</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1515985017, "creation_date": 1515985017, "answer_id": 48256384, "question_id": 48255797, "link": "https://stackoverflow.com/questions/48255797/screen-scraper-script-wont-write-to-ouptut-file/48256384#48256384", "title": "Screen scraper script won&#39;t write to ouptut file", "body": "<p>You're making assumptions about the current work directory that are often incorrect. You seem to assume the current work directory is the directory in which the script resides, but that's never guaranteed, and it's often <code>/</code> for CGI scripts.</p>\n\n<pre><code>\"sitedata.txt\"\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>use FindBin qw( $RealBin );\n\n\"$RealBin/sitedata.txt\"\n</code></pre>\n\n<p>There could also be a permission error. You should include the error cause (<code>$!</code>) in your error message when <code>open</code> fails so you know what is causing the problem!</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9217344, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156864277618561/picture?type=large", "display_name": "T. Sinister Porpoise", "link": "https://stackoverflow.com/users/9217344/t-sinister-porpoise"}, "is_accepted": false, "score": 0, "last_activity_date": 1516046889, "last_edit_date": 1516046889, "creation_date": 1516046569, "answer_id": 48269908, "question_id": 48255797, "link": "https://stackoverflow.com/questions/48255797/screen-scraper-script-wont-write-to-ouptut-file/48269908#48269908", "title": "Screen scraper script won&#39;t write to ouptut file", "body": "<p>All of these things are helpful. Thank you. I found the problem. I was opening the <em>wrong</em> file.  It was putting the error-checking in on the file that let me spot the error. It should have been</p>\n\n<p>open (TEMPFILE, \"index.html\") || die (\"Cannot open index.html\\n\");  </p>\n\n<p>I have taken as many of the suggestions as I remembered and included them in the code. I still need to implement the directory advice, but it should not be difficult.</p>\n"}], "owner": {"reputation": 11, "user_id": 9217344, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156864277618561/picture?type=large", "display_name": "T. Sinister Porpoise", "link": "https://stackoverflow.com/users/9217344/t-sinister-porpoise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1516046889, "creation_date": 1515978590, "last_edit_date": 1515993357, "question_id": 48255797, "link": "https://stackoverflow.com/questions/48255797/screen-scraper-script-wont-write-to-ouptut-file", "title": "Screen scraper script won&#39;t write to ouptut file", "body": "<p>I can't get the Perl script below to write to the file <code>output.html</code>.</p>\n\n<p>I doesn't need to be a CGI script yet, but that is the ultimate intention.</p>\n\n<p>Can anyone tell me why it isn't writing any text to output.html?</p>\n\n<pre><code>#!/usr/bin/perl\n\n#-----------------------------------------------------------------------\n# This script should work as a CGI script, if I get it correctly.\n# Most CGI scripts for Perl begin with the same line and must be\n# stored in your servers cgi-bin directory. (I think this is set by\n# your web server.\n#\n# This scripts will scrape news sites for stories about topics input\n# by the users.\n#\n# Lara Landis\n# Sinister Porpoise Computing\n# 1/4/2018\n# Personal Perl Project\n#-----------------------------------------------------------------------\n\n@global_sites = ();\n\nprint( \"Starting program.\\n\" );\n\nif ( !( -e \"sitedata.txt\" ) ) {\n    enter_site_info( @global_sites );\n}\n\nif ( !( -e \"scrpdata.txt\" ) ) {\n\n    print( \"scrpdata.txt does not exist. Creating file now.\\n\" );\n    print( \"Enter the search words you wish to search for below. Press Ctrl-D to finish.\\n\" );\n\n    open( SCRAPEFILE, \"&gt;scrpdata.txt\" );\n    while ( $line = &lt;STDIN&gt; ) {\n        chop( $line );\n        print SCRAPEFILE ( \"$line\\n\" );\n    }\n    close( SCRAPEFILE );\n}\n\nprint( \"Finished getting site data...\" );\nscrape_sites( @global_sites );\n\n#----------------------------------------------------------------------\n# This routine gets information from the user after the file has been\n# created. It also has some basic checking to make sure that the lines\n# fed to it are legimate domains.  This is not an exhaustive list of\n# all domains in existence.\n#----------------------------------------------------------------------\nsub enter_site_info {\n    my ( @sisites ) = @_;\n\n    $x = 1;\n\n    open( DATAFILE, \"&gt;sitedata.txt\" ) || die( \"Could not open datafile.\\n\" );\n    print( \"Enter websites below. Press Crtl-D to finish.\\n\" );\n\n    while ( $x &lt;= @sisites ) {\n\n        $sisites[$x] = &lt;STDIN&gt;;\n\n        print( \"$sisites[$x] added.\\n\" );\n        print DATAFILE ( \"$sisites[$x]\\n\" );\n\n        $x++;\n    }\n\n    close( DATAFILE );\n\n    return @sisites;\n}\n\n#----------------------------------------------------------------------\n# If the file exists, just get the information from it.  Read info in\n# from the sites. Remember to create a global array for the sites\n# data.\n#-----------------------------------------------------------------------\n\n#-----------------------------------------------------------------------\n# Get the text to find in the sites that are being scraped. This requires\n# nested loops. It starts by going through the loops for the text to be\n# scraped, and then it goes through each of the websites listend in the\n# sitedata.txt file.\n#-----------------------------------------------------------------------\nsub scrape_sites {\n    my ( @ss_info ) = @_;\n\n    @gsi_info = ();\n    @toscrape = ();\n    $y        = 1;\n\n    #---------------------------\n    # Working code to be altered\n    #---------------------------\n    print( \"Getting site info...\" );\n\n    $x = 1;\n\n    open( DATAFILE, \"sitedata.txt\" ) || die( \"Can't open sitedata.txt.txt\\n\" );\n    while ( $gsi_info[$x] = &lt;DATAFILE&gt; ) {\n\n        chop( $gsi_info[$x] );\n        print( \"$gsi_info[$x]\\n\" );\n\n        $x++;\n    }\n\n    close( DATAFILE );\n\n    open( SCRAPEFILE, \"scrpdata.txt\" ) || die( \"Can't open scrpdata.txt\\n\" );\n    print( \"Getting scrape data.\\n\" );\n\n    $y = 1;\n\n    while ( $toscrape[$y] = &lt;SCRAPEFILE&gt; ) {\n        chop( $toscrape[$y] );\n        $y++;\n    }\n\n    close( SCRAPEFILE );\n\n    print( \"Now opening the output file.\\n\" );\n\n    $z = 1;\n\n    open( OUTPUT, \"&gt;output.html\" );\n    print( \"Now scraping sites.\\n\" );\n\n    while ( $z &lt;= @gsi_info ) {    #This loop contains SITES\n\n        system( \"rm -f index.html.*\" );\n        system( \"wget $gsi_info[$z]\" );\n\n        $z1 = 1;\n\n        print( \"Searching site $gsi_info[$z] for $toscrape[$z1]\\n\" );\n        open( TEMPFILE, \"$gsi_info[$z]\" );\n\n        $comptext = &lt;TEMPFILE&gt;;\n\n        while ( $comptext =~ /$toscrape[z1]/ig ) {    # This loop fetches data from the search terms\n\n            print( \"Now scraping $gsi_info[$z] for $toscrape[$z1]\\n\" );\n            print OUTPUT ( \"$toscrape[$z1]\\n\" );\n\n            $z1++;\n        }\n\n        close( TEMPFILE );\n\n        $z++;\n    }\n\n    close( OUTPUT );\n\n    return ( @gsi_info );\n}\n</code></pre>\n"}, {"tags": ["regex", "string", "bash", "perl"], "comments": [{"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 7, "creation_date": 1515912357, "post_id": 48247289, "comment_id": 83477245, "body": "What did you try for yourself? Post your research efforts"}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1515916170, "post_id": 48247289, "comment_id": 83477828, "body": "I don&#39;t think this could be anywhere near easy with <code>sed</code>. But perl ofcourse"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1515924974, "post_id": 48247289, "comment_id": 83479582, "body": "Why is this as a &quot;<i>regex question</i>&quot;?  It is the last tool I&#39;d use for this. Did you try to break each string into an array (of its characters) and iterate by index, comparing their characters? That is basic and simple to do, and it is predictable (it <i>will</i> work out)."}], "answers": [{"tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": true, "score": 0, "last_activity_date": 1515924654, "last_edit_date": 1515924654, "creation_date": 1515924302, "answer_id": 48248491, "question_id": 48247289, "link": "https://stackoverflow.com/questions/48247289/finding-and-replacing-matched-letters-at-same-position/48248491#48248491", "title": "Finding and replacing matched letters at same position", "body": "<p>Here is an answer in sed.<br>\nIt assumes that the lines are always equally long and only contain \"0\"s and \"1\"s.<br>\nOnly \"0\"s or \"1\"s especially covers the assumption 'no \">\" anywhere'.<br>\nIt seems to be somewhat robust against differently long lines (I did a few simple tests), but no guarantee.</p>\n\n<pre><code>sed -En \"N;s/^(.*)\\n(.*)$/&gt;\\1\\n&gt;\\2/;:a;s/&gt;([01])(.*)\\n(.*)&gt;\\1/.&gt;\\2\\n\\3.&gt;/;ta;s/&gt;([^$\\n])/\\1&gt;/g;ta;s/&gt;//g;p\"\n</code></pre>\n\n<p>The code means:</p>\n\n<ul>\n<li><code>-En</code> use extended regexes, do not print automatically</li>\n<li><code>N</code>  look at this and next line at once</li>\n<li><code>s///</code> do a single replace, non-globally because of the absence of <code>g</code></li>\n<li>first replace introduces a cursor \"<code>&gt;</code>\" at the start of both lines</li>\n<li><code>:a</code> introduce a label for looping</li>\n<li>second replace does replace<br>\ncursor, 0 or 1, rest of first line,<br>\nstart of second line, cursor, same 0 or 1<br>\nby<br>\ndot, cursor, rest of line one,<br>\nstart of second line, dot cursor</li>\n<li>then, in case of successful replace, loop to label</li>\n<li>otherwise third replace moves boths cursors one ahead and loops,<br>\nexcept if end of line is reached</li>\n<li>fourth replace remoces the cursors</li>\n<li><code>p</code> print result</li>\n</ul>\n\n<p>Output for you sample input (interleaved with sample input):</p>\n\n<pre><code>1100110010\n1100101100\n.....1001.\n.....0110.\n0011001100\n0110101111\n.0.10...00\n.1.01...11\n</code></pre>\n\n<p>The output differs in line two from your stated desired output, \".\" instead of \"0\",<br>\nbut with all due respect, I think your desired output is incorrect there.</p>\n\n<p>Using: GNU sed version 4.2.1</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1515956842, "post_id": 48250549, "comment_id": 83488770, "body": "Or you can change both arrays during a single pass over the index, when needed -- <code>if ($d1[$i1] ne $d2[$i2]) { $d1[i1] = $d2[i2] = &#39;.&#39; }</code> (with <code>d</code> for <code>data</code>)."}], "tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": 2, "last_activity_date": 1515940052, "creation_date": 1515940052, "answer_id": 48250549, "question_id": 48247289, "link": "https://stackoverflow.com/questions/48247289/finding-and-replacing-matched-letters-at-same-position/48250549#48250549", "title": "Finding and replacing matched letters at same position", "body": "<p>Here is a Perl version:</p>\n\n<pre><code>#!/usr/bin/env perl\n\n# always use these two\nuse strict;\nuse warnings;\n\n# handle errors in open and close\nuse autodie; # See http://perldoc.perl.org/autodie.html\n\nwhile( ! eof( DATA ) ){\n    chomp( my $line1 = &lt;DATA&gt; );\n    chomp( my $line2 = &lt;DATA&gt; );\n\n    my @data1 = split //, $line1;\n    my @data2 = split //, $line2;\n\n    # do the first\n    for my $i ( 0 .. $#data1 ){\n        if( $data1[$i] eq $data2[$i] ){\n            print \".\";\n        }else{\n            print $data1[$i];\n        }\n    }\n    print \"\\n\";\n\n    # do the second\n    for my $i ( 0 .. $#data2 ){\n        if( $data1[$i] eq $data2[$i] ){\n            print \".\";\n        }else{\n            print $data2[$i];\n        }\n    }\n    print \"\\n\";\n\n}\n\n__DATA__\n1100110010\n1100101100\n0011001100\n0110101111\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "is_accepted": false, "score": 5, "last_activity_date": 1515953882, "creation_date": 1515953882, "answer_id": 48252685, "question_id": 48247289, "link": "https://stackoverflow.com/questions/48247289/finding-and-replacing-matched-letters-at-same-position/48252685#48252685", "title": "Finding and replacing matched letters at same position", "body": "<p>Perl using <a href=\"https://perldoc.perl.org/perlop.html#Bitwise-String-Operators\" rel=\"noreferrer\">bitwise operators</a>:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse v5.10;\n\nwhile ( !eof(DATA) ) {\n    chomp( my $line1 = &lt;DATA&gt; );\n    chomp( my $line2 = &lt;DATA&gt; );\n\n    ( my $uniq_mask = $line1 ^ $line2 ) =~ s/[^\\0]/\\xFF/g;\n\n    my $uniq1 = $line1;\n    my $uniq2 = $line2;\n\n    for ( $uniq1, $uniq2 ) {\n        $_ &amp;= $uniq_mask;\n        s/\\0/./g;\n    }\n\n    say for $line1, $line2, $uniq1, $uniq2, '';\n}\n\n__DATA__\n1100110010\n1100101100\n0011001100\n0110101111\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>1100110010\n1100101100\n.....1001.\n.....0110.\n\n0011001100\n0110101111\n.0.10...00\n.1.01...11\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1516030708, "last_edit_date": 1516030708, "creation_date": 1515969064, "answer_id": 48254820, "question_id": 48247289, "link": "https://stackoverflow.com/questions/48247289/finding-and-replacing-matched-letters-at-same-position/48254820#48254820", "title": "Finding and replacing matched letters at same position", "body": "<p>Since you mentioned xor,</p>\n\n<pre><code>my $xor = $s1 ^ $s2;\nmy $mask = $xor =~ tr/\\x01-\\xFF/\\xFF/r;\nmy $dots = $xor =~ tr/\\x00\\x01-\\xFF/.\\x00/r;\n\nsay $s1 &amp; $mask | $dots;\nsay $s2 &amp; $mask | $dots;\n</code></pre>\n\n<p>This code assumes the line feed has been removed, and it assumes the length of <code>$s1</code> and <code>$s2</code> are the same.</p>\n"}], "owner": {"reputation": 339, "user_id": 5683724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-ys-8Xx_dcVY/AAAAAAAAAAI/AAAAAAAAACg/QkZg_guBu6g/photo.jpg?sz=128", "display_name": "Jaeyoung Park", "link": "https://stackoverflow.com/users/5683724/jaeyoung-park"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 2, "accepted_answer_id": 48248491, "answer_count": 4, "score": 3, "last_activity_date": 1516030708, "creation_date": 1515912283, "last_edit_date": 1515924467, "question_id": 48247289, "link": "https://stackoverflow.com/questions/48247289/finding-and-replacing-matched-letters-at-same-position", "title": "Finding and replacing matched letters at same position", "body": "<p>It is a regex question, but I could not find a proper option for my case in Wiki page so I decided to ask here. May be a simple unknown option of regex can resolve my case. </p>\n\n<p>I have a log file(a.txt) which has multiple lines of strings. I want to compare every two lines (1st vs. 2nd, 3rd vs. 4th...) and replace matched letter (not a string) to \".\"(or any special character).</p>\n\n<p>a.txt:</p>\n\n<pre><code>1100110010\n1100101100\n0011001100\n0110101111\n.\n.\n.\n</code></pre>\n\n<p>result.txt:</p>\n\n<pre><code>.....1001.\n.....01100\n.0.10...00\n.1.01...11\n.\n.\n.\n</code></pre>\n\n<p>This may be XOR problem of two strings, so I tried this way, but it needed to be converted to ASCII and then XOR is doable (may be this approach is not right). I think there is a very simple way to do this job with SED/PERL. Any suggestion and/or guidance is appreciated. Thank you for reading my question. </p>\n"}, {"tags": ["bash", "perl", "fasta"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515884507, "post_id": 48244008, "comment_id": 83472864, "body": "Why have you chosen to do two substitutions, first <code>s&#47;N+&#47;*&#47;g</code> and then <code>s&#47;\\*&#47;\\n&gt;contig1\\n&#47;g</code>? Surely <code>s&#47;N+&#47;\\n&gt;contig1\\n&#47;g</code> will have the same effect?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1515886337, "post_id": 48244008, "comment_id": 83473298, "body": "Can the header itself ever contain multiple N? (Your example doesn&#39;t) Btw, you want regex pattern <code>NN+</code> (or <code>N{2,}</code>); the <code>N+</code> matches a single one as well."}], "answers": [{"comments": [{"owner": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 0, "creation_date": 1515881246, "post_id": 48244707, "comment_id": 83472062, "body": "What&#39;s the <code>cat</code> for? :( Also note that this will remove all newlines."}, {"owner": {"reputation": 13849, "user_id": 4201810, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y_UkutO0V_M/AAAAAAAAAAI/AAAAAAAAAjQ/PK7PzkynAm0/photo.jpg?sz=128", "display_name": "georgexsh", "link": "https://stackoverflow.com/users/4201810/georgexsh"}, "reply_to_user": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 1, "creation_date": 1515881474, "post_id": 48244707, "comment_id": 83472116, "body": "@PesaThe for file input, it is easier to do pipeline processing. feed the filename as an argument of the first perl if you like."}, {"owner": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 0, "creation_date": 1515881526, "post_id": 48244707, "comment_id": 83472126, "body": "Maybe easier, but creating unnecessary process."}, {"owner": {"reputation": 13849, "user_id": 4201810, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y_UkutO0V_M/AAAAAAAAAAI/AAAAAAAAAjQ/PK7PzkynAm0/photo.jpg?sz=128", "display_name": "georgexsh", "link": "https://stackoverflow.com/users/4201810/georgexsh"}, "reply_to_user": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 4, "creation_date": 1515881746, "post_id": 48244707, "comment_id": 83472180, "body": "@PesaThe haha, so you are worrying an extra <code>cat</code> process when you are piping two or more Perl interpreters...? IMO you should focus on your problem before any optimize."}, {"owner": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 0, "creation_date": 1515881882, "post_id": 48244707, "comment_id": 83472219, "body": "That&#39;s not a really good attitude honestly. Let&#39;s do this then: <code>cat file | cat | cat | perl ...</code>.  Anyway, <a href=\"http://porkmail.org/era/unix/award.html\" rel=\"nofollow noreferrer\">Useless Use of Cat Award</a>."}, {"owner": {"reputation": 13849, "user_id": 4201810, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y_UkutO0V_M/AAAAAAAAAAI/AAAAAAAAAjQ/PK7PzkynAm0/photo.jpg?sz=128", "display_name": "georgexsh", "link": "https://stackoverflow.com/users/4201810/georgexsh"}, "reply_to_user": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 2, "creation_date": 1515882276, "post_id": 48244707, "comment_id": 83472308, "body": "whatever, I have my own view of the use of <code>cat</code>, and I don&#39;t plan to change it anytime soon. of course, I could put the filename as the argument of Perl, how hard can it be? but when I begin work on this problem, how could I know I will use Perl as the first part of this pipe chain?"}, {"owner": {"reputation": 13849, "user_id": 4201810, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y_UkutO0V_M/AAAAAAAAAAI/AAAAAAAAAjQ/PK7PzkynAm0/photo.jpg?sz=128", "display_name": "georgexsh", "link": "https://stackoverflow.com/users/4201810/georgexsh"}, "reply_to_user": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 0, "creation_date": 1515882932, "post_id": 48244707, "comment_id": 83472466, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/163119/discussion-between-georgexsh-and-pesathe\">continue this discussion in chat</a>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 1, "creation_date": 1515885521, "post_id": 48244707, "comment_id": 83473114, "body": "@Pesa: I think it is your own attitude that is by far the worst here. Mindlessly committing to the dogma of never using <code>cat</code> if it can possibly be avoided isn&#39;t a good use of what is really just a rule of thumb. In this case the additional line makes the command much clearer to read, and causes no significant overhead. Note that not one of your comments here has received an up vote, whereas every one of george&#39;s has."}], "tags": [], "owner": {"reputation": 13849, "user_id": 4201810, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y_UkutO0V_M/AAAAAAAAAAI/AAAAAAAAAjQ/PK7PzkynAm0/photo.jpg?sz=128", "display_name": "georgexsh", "link": "https://stackoverflow.com/users/4201810/georgexsh"}, "is_accepted": false, "score": 1, "last_activity_date": 1515881104, "creation_date": 1515881104, "answer_id": 48244707, "question_id": 48244008, "link": "https://stackoverflow.com/questions/48244008/bash-transform-scaffold-fasta/48244707#48244707", "title": "bash: transform scaffold fasta", "body": "<p>I expaned your perl one-liner a bit:</p>\n\n<pre><code>cat file.fasta | \\\nperl -pe 's/\\n//g unless /^&gt;/; s/&gt;/\\n&gt;/g;' | \\\nperl -pe 's/N+(?{$n++})/\\n&gt;contig${n}\\n/g unless /^&gt;/'\n</code></pre>\n\n<p>the first part is to remove newlines between bases, the second part is to replace continuous 'N'.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1515897555, "post_id": 48245514, "comment_id": 83475114, "body": "The comment in the first sentence about &quot;one&quot;-liners isn&#39;t criticism of other answer(s). It is my take on suitability of one-liners for production.  Apart from quick little jobs I find them to be good only as easily testable demos of approaches, which should be transferred into scripts. My opinion."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1515920407, "last_edit_date": 1515920407, "creation_date": 1515888614, "answer_id": 48245514, "question_id": 48244008, "link": "https://stackoverflow.com/questions/48244008/bash-transform-scaffold-fasta/48245514#48245514", "title": "bash: transform scaffold fasta", "body": "<p>I'd suggest to use <code>split</code> instead of trying to get a regex <em>just</em> right, and in a script instead of a brittle and crammed \"one\"-liner.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $file = shift @ARGV;\ndie \"Usage: $0 filename\\n\" if !$file;  # also check submitted $file\n\nmy $content = do {  # or:  my $content = Path::Tiny::path($file)-&gt;slurp; \n    local $/; \n    open my $fh, '&lt;', $file or die \"Can't open $file: $!\"; \n    &lt;$fh&gt;; \n};\n\nmy @f = grep { /\\S/ } split /(?&lt;!&gt;)NN+/, $content; \nsay shift @f; \n\nmy $cnt;\nfor (@f) {\n    say \"\\n&gt;contig\", (++$cnt), \":\\n$_\";\n}\n</code></pre>\n\n<p>This slurps the file into <code>$content</code> since <code>NN+</code> can span multiple lines; <a href=\"http://search.cpan.org/~dagolden/Path-Tiny-0.104/lib/Path/Tiny.pm\" rel=\"nofollow noreferrer\">Path::Tiny</a> module can make that cleaner. The first element of the obtained array needs no <code>&gt;contig</code> so it is shifted away.</p>\n\n<p>The <a href=\"https://perldoc.perl.org/perlretut.html#Looking-ahead-and-looking-behind\" rel=\"nofollow noreferrer\">negative lookbehind</a> <code>(?&lt;!...)</code> makes the regex in <code>split</code>'s separator pattern match <code>NN+</code> only when not preceded by <code>&gt;</code>, thus protecting (excluding) header lines that may start with that.  If headers may contain consecutive <code>N</code> which are not right after <code>&gt;</code> then you need to refine this.</p>\n"}], "owner": {"reputation": 672, "user_id": 7421940, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ba36d1dca63cd1671c842dc1153e3d0d?s=128&d=identicon&r=PG&f=1", "display_name": "rororo", "link": "https://stackoverflow.com/users/7421940/rororo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 48245514, "answer_count": 2, "score": 1, "last_activity_date": 1515920407, "creation_date": 1515875249, "question_id": 48244008, "link": "https://stackoverflow.com/questions/48244008/bash-transform-scaffold-fasta", "title": "bash: transform scaffold fasta", "body": "<p>I have a fasta file with the following sequences:</p>\n\n<pre><code>&gt;NZ_OCNF01123018.1\nTACAAATACAACAAATACAAGTACACCAAGTACAAATACAAGTATCCCAAGTACAAATACAAGTA\nTCCCAAGTACAAATACAAGTATTCCAAGTACAAATACAAAACCTGTTGAGCAACCTAAACCTGTTGAAC\nAGCCCAAACCTGTTGAACAGCNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN\nNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNAAACCTTTATCCGCACTTA\nCGAGCAAATACACCAATACCGCTTTATCGGCACAGTCTGCCCAAATTGACGGATGCACCATGTTACCCAACAC\nATCAATCAACGTTTGTGGGATCACCTGAAAAAGGGCGCGGTTTGTGGTTGATG\n\n&gt;NZ_OCNF01123018.2\nAATTGTCGTGTAAAGCCACACCAAACCCCATTATAGCCCCAAAAACACCAAAAAGGCTGCCTGAACCACATTTCAGACAG\n</code></pre>\n\n<p>And I want to split the all sequences in the file that contain multiple <code>N</code> at the site where it occurs and make two sequences out of it.</p>\n\n<p>Expected solution:</p>\n\n<pre><code>&gt;NZ_OCNF01123018.1\nTACAAATACAACAAATACAAGTACACCAAGTACAAATACAAGTATCCCAAGTACAAATACAAGTA\nTCCCAAGTACAAATACAAGTATTCCAAGTACAAATACAAAACCTGTTGAGCAACCTAAACCTGTTGAAC\nAGCCCAAACCTGTTGAACAGC\n&gt;contig1\nAAACCTTTATCCGCACTTA\nCGAGCAAATACACCAATACCGCTTTATCGGCACAGTCTGCCCAAATTGACGGATGCACCATGTTACCCAACAC\nATCAATCAACGTTTGTGGGATCACCTGAAAAAGGGCGCGGTTTGTGGTTGATG\n\n&gt;NZ_OCNF01123018.2\nAATTGTCGTGTAAAGCCACACCAAACCCCATTATAGCCCCAAAAACACCAAAAAGGCTGCCTGAACCACATTTCAGACAG\n</code></pre>\n\n<p>my (inelegant) approach would be this:</p>\n\n<pre><code>perl -pe 's/[N]+/\\*/g' $file | perl -pe 's/\\*/\\n&gt;contig1\\n/g'\n</code></pre>\n\n<p>of course that also replaces the <code>N</code> of the sequence header and creates headers without a sequence. As a plus, it would be nice to number the new 'contigs' from 1 to x in case there are multiple sequences with <code>N</code>.\nWhat do you suggest?</p>\n"}, {"tags": ["perl", "systemd", "mojolicious"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1515863969, "post_id": 48242004, "comment_id": 83466993, "body": "I usually control my <code>systemd</code> units with <code>systemctl start&#47;stop&#47;status&#47;restart $serviceName</code>. Does that make any difference? I.e. <code>systemctl stop ldsquiz-org</code>?"}, {"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1515869716, "post_id": 48242004, "comment_id": 83468902, "body": "@PerlDuck that seems to have the same problem for me. It thinks that the app has been stopped but the original processes are still hanging around."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1515870062, "post_id": 48242004, "comment_id": 83468995, "body": "I know the docs you refer to say <code>Type=simple</code> but this <code>prefork</code> parameter makes me doubt. Perhaps give <code>Type=forking</code> a try. See <a href=\"https://www.freedesktop.org/software/systemd/man/systemd.service.html#Type=\" rel=\"nofollow noreferrer\">here</a> for the possible values. Perhaps you also need to play a bit with the <code>KillMode=</code> setting. See <a href=\"https://www.freedesktop.org/software/systemd/man/systemd.kill.html#KillMode=\" rel=\"nofollow noreferrer\">here</a> for the possible values. And remember to call <code>systemctl daemon-reload</code> whenever you fiddle with the unit file."}, {"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1515870691, "post_id": 48242004, "comment_id": 83469183, "body": "@PerlDuckwonderful! <code>KillMode=control-group</code> did the trick for me. Looks like I&#39;ll need to see about a Mojo doc patch.  If you&#39;d like to write an answer I&#39;m happy to accept it."}, {"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1517862098, "post_id": 48242004, "comment_id": 84258691, "body": "As an addendum, this issue has now been addressed in the Mojo docs: <a href=\"https://github.com/kraih/mojo/commit/393daba639d1a4d3f3c07c4094425a35a78889ca\" rel=\"nofollow noreferrer\">github.com/kraih/mojo/commit/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1374, "user_id": 514032, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5d14f5a30225fab8a0fc2cf40b17ca31?s=128&d=identicon&r=PG", "display_name": "Kevin G.", "link": "https://stackoverflow.com/users/514032/kevin-g"}, "edited": false, "score": 1, "creation_date": 1594915751, "post_id": 48243638, "comment_id": 111300977, "body": "Yes. That &quot;KillMode&quot; setting has since been removed from the example docs: <a href=\"https://github.com/mojolicious/mojo/pull/1183\" rel=\"nofollow noreferrer\">github.com/mojolicious/mojo/pull/1183</a>"}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 8, "last_activity_date": 1515872528, "creation_date": 1515872528, "answer_id": 48243638, "question_id": 48242004, "link": "https://stackoverflow.com/questions/48242004/why-cant-i-stop-my-mojo-app-using-systemd/48243638#48243638", "title": "Why can&#39;t I stop my Mojo app using systemd?", "body": "<p>Apparently there's a flaw in the <em>Mojolicious Cookbook</em> w.r.t. preforking and systemd units.</p>\n\n<p><a href=\"http://mojolicious.org/perldoc/Mojolicious/Guides/Cookbook#Pre-forking\" rel=\"noreferrer\">They say</a>:</p>\n\n<blockquote>\n  <p>And to manage the pre-forking web server with systemd, you can use a\n  unit configuration file like this.    </p>\n\n<pre><code>[Unit]\nDescription=My Mojolicious application\nAfter=network.target\n\n[Service]\nType=simple\nExecStart=/home/sri/myapp/script/my_app prefork -m production -l http://*:8080\nKillMode=process\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>\n</blockquote>\n\n<p>The <code>KillMode=process</code> setting turns out to be wrong and needs to be replaced with <code>KillMode=control-group</code> \u2014 which is the default setting, so we can drop it altogether.</p>\n\n<p>The <a href=\"https://www.freedesktop.org/software/systemd/man/systemd.kill.html#KillMode=\" rel=\"noreferrer\">KillMode docs</a> say:</p>\n\n<blockquote>\n  <p><strong>If set to <code>control-group</code>, all remaining processes</strong> in the control group\n  of this unit <strong>will be killed</strong> on unit stop (for services: after the stop\n  command is executed, as configured with ExecStop=). <strong>If set to\n  <code>process</code>, only the main process itself is killed.</strong></p>\n</blockquote>\n\n<p><sup>(emphasis mine)</sup></p>\n\n<p>Thus:</p>\n\n<pre><code>[Unit]\nDescription=My Mojolicious application\nAfter=network.target\n\n[Service]\nType=simple\nExecStart=/home/sri/myapp/script/my_app prefork -m production -l http://*:8080\nKillMode=control-group\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>\n\n<p>Note that the <code>KillMode=control-group</code> can be omitted as this setting is the default.</p>\n\n<p>References:</p>\n\n<ul>\n<li><a href=\"https://www.freedesktop.org/software/systemd/man/systemd.kill.html#KillMode=\" rel=\"noreferrer\">https://www.freedesktop.org/software/systemd/man/systemd.kill.html#KillMode=</a></li>\n<li><a href=\"https://www.freedesktop.org/software/systemd/man/systemd.service.html#Type=\" rel=\"noreferrer\">https://www.freedesktop.org/software/systemd/man/systemd.service.html#Type=</a></li>\n</ul>\n"}], "owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 1, "accepted_answer_id": 48243638, "answer_count": 1, "score": 10, "last_activity_date": 1515872528, "creation_date": 1515861879, "question_id": 48242004, "link": "https://stackoverflow.com/questions/48242004/why-cant-i-stop-my-mojo-app-using-systemd", "title": "Why can&#39;t I stop my Mojo app using systemd?", "body": "<p>I can fire up my Mojo app via <code>systemd</code> without any issues, but I can't stop or restart it in the same way.  I've poached my config mostly from the Mojo docs at <a href=\"http://mojolicious.org/perldoc/Mojolicious/Guides/Cookbook#Pre-forking\" rel=\"noreferrer\">http://mojolicious.org/perldoc/Mojolicious/Guides/Cookbook#Pre-forking</a>:</p>\n\n<pre><code>[Unit]\nDescription=ldsquiz.org\nAfter=network.target\n\n[Service]\nType=simple\nRestart=always\nRestartSec=30\nExecStart=/home/sites/www.ldsquiz.org/checkout/bin/carton-exec app.pl prefork -m production -l http://*:5103\nKillMode=process\nUser=ldsquiz\nGroup=ldsquiz\nSyslogIdentifier=ldsquiz-org\n\n[Install]\nWantedBy=multi-user.target \n</code></pre>\n\n<p>If I stop it via <code>sudo service ldsquiz-org stop</code> then syslog says <code>Jan 13 16:37:48 web-hosting systemd[1]: Stopped ldsquiz.org.</code> but the processes are still running.</p>\n\n<p>A <code>restart</code> via <code>systemd</code> looks like I would expect, since the listen socket is still in use because of the failed shutdown:</p>\n\n<pre><code>Jan 13 16:39:13 web-hosting systemd[1]: Stopped ldsquiz.org.\nJan 13 16:39:13 web-hosting systemd[1]: Started ldsquiz.org.\nJan 13 16:39:14 web-hosting ldsquiz-org[20353]: Can't create listen socket: Address already in use at \n/home/sites/www.ldsquiz.org/checkout/local/lib/perl5/Mojo/IOLoop.pm line 126.\nJan 13 16:39:14 web-hosting systemd[1]: ldsquiz-org.service: Main process exited, code=exited, status=98/n/a\nJan 13 16:39:14 web-hosting systemd[1]: ldsquiz-org.service: Unit entered failed state.\nJan 13 16:39:14 web-hosting systemd[1]: ldsquiz-org.service: Failed with result 'exit-code'.\nJan 13 16:39:15 web-hosting ldsquiz-org[16886]: [Sat Jan 13 16:39:15 2018] [info] Creating process id file \"/tmp/prefork.pid\"\n</code></pre>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["linux", "perl", "terminal", "debian", "file-rename"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1515840440, "post_id": 48239101, "comment_id": 83460513, "body": "I think you will be better off asking this question on <a href=\"https://superuser.com\">superuser</a> or <a href=\"https://askubuntu.com\">askubuntu</a>. Over here we are programmers, and expect you to make an attempt to programatically solve your own problem first."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1515840529, "post_id": 48239101, "comment_id": 83460541, "body": "That said, yes it can be done in Perl with a few lines of code. But I would be scared to run this over all the file system. If it&#39;s only your home directory (or Windows user dir) it&#39;s probably pretty safe though."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1515841110, "post_id": 48239101, "comment_id": 83460694, "body": "Stack Overflow is a site for programming and development questions. This question appears to be off-topic because it is not about programming or development. See <a href=\"http://stackoverflow.com/help/on-topic\">What topics can I ask about here</a> in the Help Center. Perhaps <a href=\"http://superuser.com/\">Super User</a> or <a href=\"http://unix.stackexchange.com/\">Unix &amp; Linux Stack Exchange</a> would be a better place to ask."}, {"owner": {"reputation": 37, "user_id": 7888896, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208820198209388/picture?type=large", "display_name": "Gab", "link": "https://stackoverflow.com/users/7888896/gab"}, "edited": false, "score": 0, "creation_date": 1515846411, "post_id": 48239101, "comment_id": 83461979, "body": "OK thanks, I&#39;ll keep it in mind for next time!"}], "answers": [{"tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": true, "score": -1, "last_activity_date": 1515843773, "creation_date": 1515843773, "answer_id": 48239513, "question_id": 48239101, "link": "https://stackoverflow.com/questions/48239101/deleting-backup-appendix-form-file-name-in-multiple-files-linux/48239513#48239513", "title": "Deleting backup appendix form file name in multiple files (Linux)", "body": "<p>The shell solution, assuming everything after the first <code>(</code> should be replaced with <code>.html</code>, is</p>\n\n<pre><code>for f in *.html; do\n  mv \"$f\" \"${f%%\\(*}.html\"\ndone\n</code></pre>\n\n<p>which is easily extended to work recursively:</p>\n\n<pre><code>find . -name '*.html' |\nwhile read f; do\n  mv \"$f\" \"${f%%\\(*}.html\"\ndone\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 7888896, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208820198209388/picture?type=large", "display_name": "Gab", "link": "https://stackoverflow.com/users/7888896/gab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 48239513, "answer_count": 1, "score": 0, "last_activity_date": 1515843773, "creation_date": 1515840302, "question_id": 48239101, "link": "https://stackoverflow.com/questions/48239101/deleting-backup-appendix-form-file-name-in-multiple-files-linux", "title": "Deleting backup appendix form file name in multiple files (Linux)", "body": "<p>I recently went from windows to Linux (Debian based) and I imported all my files from a backup drive. The problem is that now all the files are named with the original name + an appendix with the date of the backup inside a pair of brackets.</p>\n\n<blockquote>\n  <p><strong>Example:</strong></p>\n  \n  <p><em>index (2017_12_01 15_56_03 UTC).html</em></p>\n  \n  <p>Instead of <em>index.html</em></p>\n</blockquote>\n\n<p>How do I <strong>delete</strong> from <strong>all</strong> the files the informations added by the backup?\nI am searching for a function that could go trough all the files in a directory and delete the brackets part.</p>\n\n<p>Or is there a way I can reimport without it?</p>\n"}, {"tags": ["python", "perl", "cgi"], "comments": [{"owner": {"reputation": 4110, "user_id": 3810748, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/H7MEA.png?s=128&g=1", "display_name": "AlanSTACK", "link": "https://stackoverflow.com/users/3810748/alanstack"}, "edited": false, "score": 0, "creation_date": 1515835192, "post_id": 48238452, "comment_id": 83459315, "body": "We use Django for our stuff here in python."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 9, "creation_date": 1515836827, "post_id": 48238452, "comment_id": 83459649, "body": "The Perl code you&#39;ve shown is massively outdated. The CGI module has not in the Perl code for several years, and the HTML generation functions you have used have been removed from the CGI distribution and moved into their own module. <a href=\"https://www.youtube.com/watch?v=jKOqtRMT85s\" rel=\"nofollow noreferrer\">The whole thing is highly discouraged</a>. Regardless of if you want to do Perl or Python, please invest some time to learn a more modern approach. That can be a web framework, but it does not have to be. At least use a template engine, do not mix code and HTML. That is horrible to maintain."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8651755"}, "edited": false, "score": 0, "creation_date": 1515836880, "post_id": 48238452, "comment_id": 83459658, "body": "In this day and age, I would say that using CGI is probably a bad idea, maybe even a terrible idea. Then again, I don&#39;t know what you&#39;re doing, so maybe not. Using a framework like Django, Pyramid, or Flask is almost certainly a better way to go."}, {"owner": {"reputation": 343895, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1518004010, "post_id": 48238452, "comment_id": 84323294, "body": "unrelated: you don&#39;t need <code>&#39;\\r\\n\\r\\n&#39;</code>. In Python, <code>print</code> already writes the newline i.e, to writes headers: <code>print &#39;Content-type:text&#47;html&#39;; print;</code> (<a href=\"https://tools.ietf.org/html/rfc3875#section-6.3.4\" rel=\"nofollow noreferrer\">CGI header syntax may differ from HTTP header syntax</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7021662, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bd6lLDv3iH8/AAAAAAAAAAI/AAAAAAAAAKM/rSV8dmGc-pM/photo.jpg?sz=128", "display_name": "Pranay Vishwanath", "link": "https://stackoverflow.com/users/7021662/pranay-vishwanath"}, "edited": false, "score": 0, "creation_date": 1518022144, "post_id": 48662696, "comment_id": 84336032, "body": "Thank you for the response, it was illuminating. As you&#39;ve recommended (and since so many people have been pointing me away from it), I&#39;m likely going to ditch the cgi I know and start from scratch. The <code>bottle</code> web framework seems as good a place as any to start again."}, {"owner": {"reputation": 343895, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "reply_to_user": {"reputation": 21, "user_id": 7021662, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bd6lLDv3iH8/AAAAAAAAAAI/AAAAAAAAAKM/rSV8dmGc-pM/photo.jpg?sz=128", "display_name": "Pranay Vishwanath", "link": "https://stackoverflow.com/users/7021662/pranay-vishwanath"}, "edited": false, "score": 0, "creation_date": 1526473006, "post_id": 48662696, "comment_id": 87757276, "body": "@PranayVishwanath: <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "tags": [], "owner": {"reputation": 343895, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "is_accepted": true, "score": 1, "last_activity_date": 1518002932, "creation_date": 1518002932, "answer_id": 48662696, "question_id": 48238452, "link": "https://stackoverflow.com/questions/48238452/python-equivalent-of-a-perl-function-based-cgi-style/48662696#48662696", "title": "Python equivalent of a Perl function-based cgi style", "body": "<p>Here's a CGI script written in a \"function-based\" style using <a href=\"http://bottlepy.org/docs/dev/\" rel=\"nofollow noreferrer\"><code>bottle</code> Python web framework</a>:</p>\n\n\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/env python\nfrom bottle import route, run, template\n\n@route('/hello/&lt;name&gt;')\ndef index(name):\n    return template('&lt;b&gt;Hello {{name}}&lt;/b&gt;!', name=name)\n\nrun(server='cgi') # transform the application into a valid CGI script\n</code></pre>\n\n<p>To install <code>bottle</code> module, run the usual <code>pip install bottle</code> or just <a href=\"https://bottlepy.org/docs/dev/tutorial.html#installation\" rel=\"nofollow noreferrer\">download a single <code>bottle.py</code> file</a>.</p>\n\n<p>To try it, make the script executable:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>$ chmod +x cgi-bin/cgi-script\n</code></pre>\n\n<p>Start [development] CGI server in the current directory:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>$ python3 -mhttp.server --cgi --bind localhost\n</code></pre>\n\n<p>Open the page:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>$ python -mwebbrowser http://localhost:8000/cgi-bin/cgi-script/hello/World\n</code></pre>\n\n<p>Unless you must use CGI, consider other <a href=\"https://bottlepy.org/docs/dev/deployment.html\" rel=\"nofollow noreferrer\">deployment options</a>.</p>\n"}], "owner": {"reputation": 21, "user_id": 7021662, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bd6lLDv3iH8/AAAAAAAAAAI/AAAAAAAAAKM/rSV8dmGc-pM/photo.jpg?sz=128", "display_name": "Pranay Vishwanath", "link": "https://stackoverflow.com/users/7021662/pranay-vishwanath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 1, "accepted_answer_id": 48662696, "answer_count": 1, "score": 1, "last_activity_date": 1518004076, "creation_date": 1515834700, "last_edit_date": 1518004076, "question_id": 48238452, "link": "https://stackoverflow.com/questions/48238452/python-equivalent-of-a-perl-function-based-cgi-style", "title": "Python equivalent of a Perl function-based cgi style", "body": "<p>I was taught to use Perl cgi (CGI(':standard')) like so:</p>\n\n<pre><code>#!/usr/local/bin/perl\nuse CGI qw/:standard/;           # load standard CGI routines\nprint header,                    # create the HTTP header\n      start_html('hello world'), # start the HTML\n      h1('hello world'),         # level 1 header\n      end_html;                  # end the HTML\n</code></pre>\n\n<p>When moving over to Python, I find I have to do this:</p>\n\n<pre><code>#!/usr/bin/python\nprint \"Content-type:text/html\\r\\n\\r\\n\"\nprint '&lt;html&gt;'\nprint '&lt;head&gt;'\nprint '&lt;title&gt;Hello Word&lt;/title&gt;'\nprint '&lt;/head&gt;'\nprint '&lt;body&gt;'\nprint '&lt;h1&gt;Hello Word!&lt;/h1&gt;'\nprint '&lt;/body&gt;'\nprint '&lt;/html&gt;'\n</code></pre>\n\n<p>Is a function-based approach to cgi possible with Python as it is in Perl? What major challenges would you anticipate in trying to create such a package (should one not exist)?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1515785728, "post_id": 48232946, "comment_id": 83448243, "body": "Why not just remove whitespace?"}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1515785784, "post_id": 48232946, "comment_id": 83448276, "body": "or else <code>s&#47;(?&lt;=[0-9])\\s+(?=[0-9])&#47;&#47;g</code>"}, {"owner": {"reputation": 321, "user_id": 5296516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1076a72417cf6bea1a43cff823cd9b12?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5296516/rob"}, "edited": false, "score": 1, "creation_date": 1515785881, "post_id": 48232946, "comment_id": 83448326, "body": "I can&#39;t just remove whitespace because I only want to remove the white space between numbers."}, {"owner": {"reputation": 321, "user_id": 5296516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1076a72417cf6bea1a43cff823cd9b12?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5296516/rob"}, "edited": false, "score": 1, "creation_date": 1515786094, "post_id": 48232946, "comment_id": 83448448, "body": "Thank you: anubhava&#39;s answer works. I would appreciate an explanation for it if someone wants to write it up as an answer. For example, why are the numbers not deleted in the replace?"}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "reply_to_user": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 1, "creation_date": 1515786117, "post_id": 48232946, "comment_id": 83448466, "body": "@anubhava post as answer."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1515786136, "post_id": 48232946, "comment_id": 83448478, "body": "You use a lookahead (that checks forward) at the wrong place, also you can avoid the capture groups, the references and the <code>+</code> quantifiers: <code>$test =~ s&#47;[0-9]\\K (?=[0-9])&#47;&#47;g;</code>"}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 2, "creation_date": 1515786260, "post_id": 48232946, "comment_id": 83448529, "body": "@Rob <code>(?&lt;=)</code> is a positive lookbehind. It ensures what precedes matches without consuming characters. Casimir&#39;s example uses <code>\\K</code> instead which resets the starting point of the match (all previously consumed characters are excluded from the final match). The <code>(?=)</code> is a positive lookahead ensuring what follows matches without consuming characters. The only <i>matched</i> characters in both cases are the whitespace characters between numbers. But I&#39;m sure both of them will explain these tokens in their answer(s)"}], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 5296516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1076a72417cf6bea1a43cff823cd9b12?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5296516/rob"}, "edited": false, "score": 1, "creation_date": 1515786951, "post_id": 48233070, "comment_id": 83448821, "body": "Great thank you: that is a helpful explanation and will help me to add another tool to my toolbox. A bonus would be to include Casimir&#39;s variation and ctwheels explanation."}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 5, "last_activity_date": 1515786360, "creation_date": 1515786360, "answer_id": 48233070, "question_id": 48232946, "link": "https://stackoverflow.com/questions/48232946/how-to-match-overlapping-perl-regex/48233070#48233070", "title": "How to match overlapping perl regex?", "body": "<p>To be able to remove spaces between digits you can use <a href=\"https://www.regular-expressions.info/lookaround.html\" rel=\"noreferrer\">zero-width look-arounds assertions</a>:</p>\n\n<pre><code>$test =~ s/(?&lt;=[0-9])\\s+(?=[0-9])//g;\n</code></pre>\n\n<p><strong>Breakup:</strong></p>\n\n<ul>\n<li><code>(?&lt;=[0-9])</code>: Assert that we have a digit at previous position</li>\n<li><code>\\s+</code>: Match 1+ whitespaces</li>\n<li><code>(?=[0-9])</code>: Assert that we have a digit at next position</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1515796770, "last_edit_date": 1515796770, "creation_date": 1515795675, "answer_id": 48234811, "question_id": 48232946, "link": "https://stackoverflow.com/questions/48232946/how-to-match-overlapping-perl-regex/48234811#48234811", "title": "How to match overlapping perl regex?", "body": "<p>Problems are encountered when both adjacent digits are part of the match.</p>\n\n<pre><code>$test =~ s/([0-9])\\s+([0-9])/$1$2/g;   # XXX Bad\n</code></pre>\n\n<p>Solutions:</p>\n\n<pre><code>$test =~ s/(?&lt;=[0-9])\\s+(?=[0-9])//g;\n</code></pre>\n\n<p>or the more efficient</p>\n\n<pre><code>$test =~ s/[0-9]\\K\\s+(?=[0-9])//g;   # 5.10+\n</code></pre>\n\n<p>In the former, the adjacent digits are never part of the match.</p>\n\n<p>In the latter, only the preceding digit is part of the match.</p>\n"}], "owner": {"reputation": 321, "user_id": 5296516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1076a72417cf6bea1a43cff823cd9b12?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5296516/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 48233070, "answer_count": 2, "score": 1, "last_activity_date": 1515796770, "creation_date": 1515785671, "question_id": 48232946, "link": "https://stackoverflow.com/questions/48232946/how-to-match-overlapping-perl-regex", "title": "How to match overlapping perl regex?", "body": "<p>I am trying to get a regex to match an overlapping section when using /g. I believe I need to use lookbehind, but I'm having trouble understanding the documentation and getting it to match.</p>\n\n<p>For example, the test case:</p>\n\n<pre><code>use feature ':5.18';\nuse warnings;\nuse diagnostics;\nuse utf8;\n\nmy $test = '1 1 1';\n$test =~ s/(?=[0-9]+) ([0-9]+)/$1$2/g;\nsay $test;      # still get '1 1 1'\n</code></pre>\n\n<p>How do I get rid of the spaces? The output should be '111'.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1515777550, "post_id": 48231038, "comment_id": 83444402, "body": "What are you going to do with that <code>$1</code>? Can you provide more context and a sample config?"}, {"owner": {"reputation": 737, "user_id": 2196094, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/L1bvt.png?s=128&g=1", "display_name": "cornelinux", "link": "https://stackoverflow.com/users/2196094/cornelinux"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1515793679, "post_id": 48231038, "comment_id": 83451456, "body": "@melpomene actually I have a 2fa auth system that can return e.g. the group memberships of a user as DN. A perl freeradius plugin is supposed to forward not the complete DN but a substring of the DN as RADIUS attributes to a VPN server. And of course, yes, this should be super flexible.  So the $1 should be written to a radius attribute."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1515856746, "post_id": 48231038, "comment_id": 83464763, "body": "Why are you declaring <code>$m</code> outside of the block it is used in? And if you&#39;re using it later, then give it a better name."}, {"owner": {"reputation": 737, "user_id": 2196094, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/L1bvt.png?s=128&g=1", "display_name": "cornelinux", "link": "https://stackoverflow.com/users/2196094/cornelinux"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1515859567, "post_id": 48231038, "comment_id": 83465611, "body": "@shawnhcorey this code is an example! <code>$m</code> is actually read from a config file and would have another name."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1515874233, "post_id": 48231038, "comment_id": 83470213, "body": "@cornelinux That&#39;s called a symbolic reference and is not PBP (Perl Best Practice)."}], "answers": [{"comments": [{"owner": {"reputation": 737, "user_id": 2196094, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/L1bvt.png?s=128&g=1", "display_name": "cornelinux", "link": "https://stackoverflow.com/users/2196094/cornelinux"}, "edited": false, "score": 0, "creation_date": 1515793864, "post_id": 48231249, "comment_id": 83451537, "body": "Thx. I first need to process and understand this... :-)"}, {"owner": {"reputation": 737, "user_id": 2196094, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/L1bvt.png?s=128&g=1", "display_name": "cornelinux", "link": "https://stackoverflow.com/users/2196094/cornelinux"}, "edited": false, "score": 0, "creation_date": 1515794289, "post_id": 48231249, "comment_id": 83451681, "body": "This perl module does not seem to be packed for ubuntu. Makes it harder to use the code in my project."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1515778086, "creation_date": 1515778086, "answer_id": 48231249, "question_id": 48231038, "link": "https://stackoverflow.com/questions/48231038/read-matching-rules-from-a-file-pattern-contained-in-a-variable/48231249#48231249", "title": "Read matching rules from a file. Pattern contained in a variable", "body": "<p>You can view <code>$m</code> as Perl code to be executed, or as a template. The latter is the much better approach. You can use String::Substitution's <code>interpolate_match_vars</code> as your template processor.</p>\n\n<pre><code>use String::Substitution qw( interpolate_match_vars last_match_vars );\n\nmy $interpolated = interpolate_match_vars($m, last_match_vars());\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 737, "user_id": 2196094, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/L1bvt.png?s=128&g=1", "display_name": "cornelinux", "link": "https://stackoverflow.com/users/2196094/cornelinux"}, "edited": false, "score": 0, "creation_date": 1515793755, "post_id": 48232359, "comment_id": 83451492, "body": "This is interesting and does the job. I was however hoping for a more flexible solution in the long run. I even would like to add even static parts. maybe like <code>$1-static-suffix</code>. I was experimenting with <code>$user =~ s&#47;$pattern&#47;$1some static part&#47;</code> but also could not get this as strings from a config file."}, {"owner": {"reputation": 14587, "user_id": 5724303, "user_type": "registered", "profile_image": "https://graph.facebook.com/1100229700001875/picture?type=large", "display_name": "Kosh", "link": "https://stackoverflow.com/users/5724303/kosh"}, "reply_to_user": {"reputation": 737, "user_id": 2196094, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/L1bvt.png?s=128&g=1", "display_name": "cornelinux", "link": "https://stackoverflow.com/users/2196094/cornelinux"}, "edited": false, "score": 0, "creation_date": 1515798225, "post_id": 48232359, "comment_id": 83452972, "body": "@cornelinux, Thank you for your interest, but it looks like you&#39;re changing your requirements. You asked the question and received several answers. And now you want something different. Do you really know what you need? If yes, does your question reflect your needs?"}, {"owner": {"reputation": 737, "user_id": 2196094, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/L1bvt.png?s=128&g=1", "display_name": "cornelinux", "link": "https://stackoverflow.com/users/2196094/cornelinux"}, "edited": false, "score": 0, "creation_date": 1515831861, "post_id": 48232359, "comment_id": 83458675, "body": "You are right. My initially question was my main pain. And you are right. I added a nice-to-have requirement, which I did not mention in the first place, because I though it would be to complicated and because it is a nice to have thingy. If I need more than one match your answer is definitvely the way to go. So for other readers of the thread I will mark this as answer. :-) (If I ever figure out how to solve my nice-to-have wish I will add this here, too)"}], "tags": [], "owner": {"reputation": 14587, "user_id": 5724303, "user_type": "registered", "profile_image": "https://graph.facebook.com/1100229700001875/picture?type=large", "display_name": "Kosh", "link": "https://stackoverflow.com/users/5724303/kosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1515783050, "creation_date": 1515783050, "answer_id": 48232359, "question_id": 48231038, "link": "https://stackoverflow.com/questions/48231038/read-matching-rules-from-a-file-pattern-contained-in-a-variable/48232359#48232359", "title": "Read matching rules from a file. Pattern contained in a variable", "body": "<p>Probably this might help you:</p>\n\n<pre><code>my $user = 'CN=vpn,ou=test';\nmy $pattern = 'CN=(.*),ou=test';\nmy $m = 1; # number of capturing group\n\nif (my @c = $user =~ /$pattern/) {\n    print \"match\\n\";\n    print $c[$m-1];\n};\n</code></pre>\n"}], "owner": {"reputation": 737, "user_id": 2196094, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/L1bvt.png?s=128&g=1", "display_name": "cornelinux", "link": "https://stackoverflow.com/users/2196094/cornelinux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 48232359, "answer_count": 2, "score": 0, "last_activity_date": 1515783050, "creation_date": 1515777316, "question_id": 48231038, "link": "https://stackoverflow.com/questions/48231038/read-matching-rules-from-a-file-pattern-contained-in-a-variable", "title": "Read matching rules from a file. Pattern contained in a variable", "body": "<p>I would like to read a matching pattern from a config file using Config::INifiles.\nI.e. everything is contained in variables.</p>\n\n<p>Matching works fine:</p>\n\n<pre><code>my $user = \"CN=vpn,ou=test\";\nmy $pattern = 'CN=(.*),ou=test';\n\nif ($user =~ /$pattern/) {\n    print \"match\\n\";\n    print $1;\n};\n</code></pre>\n\n<p>But now I would also like to access the first match using <code>$1</code>, which I would also like to read from the config file.</p>\n\n<p>Is there a way to achieve this?</p>\n\n<pre><code>my $user = \"CN=vpn,ou=test\";\nmy $pattern = 'CN=(.*),ou=test';\nmy $m = \"\\\\$1\";\n\nif ($user =~ /$pattern/) {\n    print \"match\\n\";\n    print $m;\n};\n</code></pre>\n"}, {"tags": ["json", "perl", "encoding"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1515775049, "post_id": 48230351, "comment_id": 83443019, "body": "The converter for converting Perl data structures to YAML is one of the many YAML modules on CPAN. <a href=\"https://metacpan.org/search?q=YAML\" rel=\"nofollow noreferrer\">Take your pick</a>. No need to reinvent the wheel or even do this by hand."}, {"owner": {"reputation": 655, "user_id": 1802024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a773984688057cd3920e3bbdf02e187?s=128&d=identicon&r=PG", "display_name": "Nico Villanueva", "link": "https://stackoverflow.com/users/1802024/nico-villanueva"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1515775160, "post_id": 48230351, "comment_id": 83443086, "body": "Why didn&#39;t I find that module before... Also, didn&#39;t know about metacpan. Thanks for the tip. Anyhow, my problem is that I have to manipulate the data a bit, and I&#39;d take days to do so in Perl, considering how little I know of it. In Python I did it in a few minutes. However, I like this lib, and maybe I could save a conversion. Thanks!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1515775285, "post_id": 48230351, "comment_id": 83443153, "body": "And in regards to <i>Perl does not play well with YAML</i>, you do know that <a href=\"https://en.wikipedia.org/wiki/YAML#History_and_name\" rel=\"nofollow noreferrer\">one of the three core people behind YAML</a> is actually <a href=\"https://metacpan.org/author/INGY\" rel=\"nofollow noreferrer\">a big name in the Perl community</a>? There are actually a few people from the Perl world involved with YAML. :) There is also a trove of stuff about Perl and YAML in <a href=\"http://blogs.perl.org/users/tinita/\" rel=\"nofollow noreferrer\">tinita&#39;s blog on blogs.perl.org</a>."}, {"owner": {"reputation": 655, "user_id": 1802024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a773984688057cd3920e3bbdf02e187?s=128&d=identicon&r=PG", "display_name": "Nico Villanueva", "link": "https://stackoverflow.com/users/1802024/nico-villanueva"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1515775542, "post_id": 48230351, "comment_id": 83443327, "body": "You are completely right. In fact, I think I made that statement entirely out of not knowing enough Perl and avoiding delving deeper into it. Saaaadly, the problem stands. Just changed the lib used, and the output is still messed up: <code>subject: &#195;&#161; &#195;&#169; &#195;&#173; &#195;&#179; &#195;&#186;</code> :("}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1515775590, "post_id": 48230351, "comment_id": 83443361, "body": "Don&#39;t worry about it. Your approach to convert to a known format was sound. You just lacked some research. :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1515775658, "post_id": 48230351, "comment_id": 83443400, "body": "Does the Perl config file have the <code>use utf8</code> pragma? I see you have it in yoru <i>converter</i>, but it only has an effect of how Perl treats strings from the source code of the file that pragma is in. It has nothing to do with input and output."}, {"owner": {"reputation": 655, "user_id": 1802024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a773984688057cd3920e3bbdf02e187?s=128&d=identicon&r=PG", "display_name": "Nico Villanueva", "link": "https://stackoverflow.com/users/1802024/nico-villanueva"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1515775948, "post_id": 48230351, "comment_id": 83443565, "body": "No! It was a bare Perl file, with only variable definitions! Adding the pragma did the trick! This makeshift converter is wrapped in a Bash script, so I may do a <code>grep</code> on it before converting, and adding the pragma if not found. Or is there a way to force it upon reading the file? (also, please move this to an answer so I can accept it!)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1515776706, "post_id": 48230351, "comment_id": 83443964, "body": "Looks like mob beat me. That&#39;s ok though. They need the points to get to the t-shirt, and I already have two! :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1515778028, "post_id": 48230351, "comment_id": 83444646, "body": "@simbabque: You have <i>two</i>? What makes you so special!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1515780099, "post_id": 48230351, "comment_id": 83445696, "body": "@Borodin I got them both from the 10m questions thing. One for writing a post about a special answer on SO, and one for apparently someone writing one about me, though I never found it. I also have a mug and a load of stickers."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1515780315, "post_id": 48230351, "comment_id": 83445792, "body": "@simbabque: Oh, I think you&#39;ve talked about it before. Well done!"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1515776760, "post_id": 48230735, "comment_id": 83443987, "body": "Option 2 gives me the creeps."}, {"owner": {"reputation": 655, "user_id": 1802024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a773984688057cd3920e3bbdf02e187?s=128&d=identicon&r=PG", "display_name": "Nico Villanueva", "link": "https://stackoverflow.com/users/1802024/nico-villanueva"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1515777239, "post_id": 48230735, "comment_id": 83444237, "body": "In the question&#39;s comments, @simbabque mentioned the YAML library, and I think I&#39;ll go straight to YAML. With that, the option 2 looks good (even considering the creeps). However, doesn&#39;t seem to load the file correctly, as the <code>sites</code> variable is still uninitialized (the resulting yaml is empty). Any idea why that might be?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1515777242, "post_id": 48230735, "comment_id": 83444239, "body": "Option 2 is exactly as creepy as <code>do $conf</code>"}, {"owner": {"reputation": 655, "user_id": 1802024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a773984688057cd3920e3bbdf02e187?s=128&d=identicon&r=PG", "display_name": "Nico Villanueva", "link": "https://stackoverflow.com/users/1802024/nico-villanueva"}, "edited": false, "score": 0, "creation_date": 1515777330, "post_id": 48230735, "comment_id": 83444290, "body": "In hindsight, I feel like most of the stuff I&#39;m doing here is creepy."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515777939, "post_id": 48230735, "comment_id": 83444603, "body": "I have a feeling that I&#39;m going to be embarrassed here, but why do you have both <code>do</code> and <code>eval</code>? I can&#39;t see why <code>{ local $&#47;; eval &lt;CFG&gt;; }</code>wouldn&#39;t do everything you need when you&#39;re discarding the result of <code>do</code>."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1515778307, "post_id": 48230735, "comment_id": 83444781, "body": "For decoration? You&#39;re right -- the <code>do</code> is optional here."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1515776171, "creation_date": 1515776171, "answer_id": 48230735, "question_id": 48230351, "link": "https://stackoverflow.com/questions/48230351/json-encoding-in-perl-output/48230735#48230735", "title": "JSON encoding in Perl output", "body": "<p>The sites config file is UTF-8 encoded. Here are three workarounds:</p>\n\n<ol>\n<li><p>Put <code>use utf8</code> pragma inside the site configuration file. The <code>use utf8</code> pragma in the main script is not sufficient to treat files included with <code>do</code>/<code>require</code> as UTF-8 encoded.</p></li>\n<li><p>If that is not feasible, decode the input before you pass it to the JSON encoder. Something like</p>\n\n<pre><code>open CFG, \"&lt;:encoding(utf-8)\", $conf;\ndo { local $/; eval &lt;CFG&gt; };\nclose CFG;\n</code></pre></li>\n</ol>\n\n<p>instead of</p>\n\n<pre><code>do $conf\n</code></pre>\n\n<ol start=\"3\">\n<li>Use <code>JSON::to_json</code> instead of <code>JSON::encode_json</code>. <code>encode_json</code> expects decoded input (Unicode code points) and the output is UTF-8 encoded. The output of <code>to_json</code> is not encoded, or rather, it will have the same encoding as the input, which is what you want.</li>\n</ol>\n\n<p>There is no need to encode the final output as UTF-8. Using any of the three workarounds will already produce UTF-8 encoded output.</p>\n"}], "owner": {"reputation": 655, "user_id": 1802024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a773984688057cd3920e3bbdf02e187?s=128&d=identicon&r=PG", "display_name": "Nico Villanueva", "link": "https://stackoverflow.com/users/1802024/nico-villanueva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "accepted_answer_id": 48230735, "answer_count": 1, "score": 0, "last_activity_date": 1515776171, "creation_date": 1515774698, "last_edit_date": 1515776125, "question_id": 48230351, "link": "https://stackoverflow.com/questions/48230351/json-encoding-in-perl-output", "title": "JSON encoding in Perl output", "body": "<p><strong>Context:</strong><br>\nI have to migrate a Perl script, into Python. The problem resides in that the configuration files that this Perl script uses, is actually valid Perl code. My Python version of it, uses .yaml files as config.</p>\n\n<p><s>Therefore, I basically had to write a converter between Perl and yaml. Given that, from what I found, Perl does not play well with Yaml, but there are libs that allow dumping Perl hashes into JSON, and that Python works with JSON -almost- natively, I used this format as an intermediate: Perl -> JSON -> Yaml. The first conversion is done in Perl code, and the second one, in Python code (which also does some mangling on the data).</s></p>\n\n<p>Using the library mentioned by @simbabque, I can output YAML natively, which afterwards I must modify and play with. As I know next to nothing of Perl, I prefer to do so in Python.</p>\n\n<p><strong>Problem:</strong><br>\nThe source config files look something like this:</p>\n\n<pre><code>$sites = {\n    \"0100101001\" =&gt; {\n        mail =&gt; 1,\n        from =&gt; 'mail@mail.com',\n        to =&gt; 'mail@mail.com',\n        subject =&gt; '\u00e1 \u00e9 \u00ed \u00f3 \u00fa',\n        msg =&gt; '\u00e1 \u00e9 \u00ed \u00f3 \u00fa',\n        ftp =&gt; 0,\n        sftp =&gt; 0,\n    },\n    \"22222222\" =&gt; {\n[...]\n</code></pre>\n\n<p>And many more of those.</p>\n\n<p>My \"parsing\" code is the following:</p>\n\n<pre><code>use strict;\nuse warnings;\n\n# use JSON;\nuse YAML;\nuse utf8;\nuse Encode;\nuse Getopt::Long;\n\nmy $conf;\nGetOptions('conf=s' =&gt; \\$conf) or die;\nour (\n    $sites\n);\ndo $conf;\n\n# my $json = encode_json($sites);\nmy $yaml = Dump($sites);\n\nbinmode(STDOUT, ':encoding(utf8)');\n# print($json);\nprint($yaml);\n</code></pre>\n\n<p>Nothing out of the ordinary. I simply need the <s>JSON</s> YAML version of the Perl data. In fact, it mostly works. My problem is with the encoding.</p>\n\n<p>The output of the above code is this:</p>\n\n<pre><code>  [...snip...]\n  mail: 1\n  msg: \u00c3\u00a1 \u00c3\u00a9 \u00c3\u00ad \u00c3\u00b3 \u00c3\u00ba\n  sftp: 0\n  subject: \u00c3\u00a1 \u00c3\u00a9 \u00c3\u00ad \u00c3\u00b3 \u00c3\u00ba\n  [...snip...]\n</code></pre>\n\n<p>The encoding goes to hell and back. As far as I read, UTF-8 is the default, and just in case, I force it with binmode, but to no avail.</p>\n\n<p>What am I missing here? Any workaround?</p>\n\n<p>Note: I thought I may have been my shell, but <code>locale</code> outputs this:</p>\n\n<pre><code>\u276f locale\nLANG=\nLC_COLLATE=\"C\"\nLC_CTYPE=\"UTF-8\"\nLC_MESSAGES=\"C\"\nLC_MONETARY=\"C\"\nLC_NUMERIC=\"C\"\nLC_TIME=\"C\"\nLC_ALL=\n</code></pre>\n\n<p>Which seems ok.</p>\n\n<p>Note 2: I know next to nothing of Perl, and is not my intent to be an expert on it, so any enhancements/tips are greatly appreciated too.</p>\n\n<p>Note 3: I read <a href=\"https://stackoverflow.com/a/35494740/1802024\">this answer</a>, and my code is loosely based on it. The main difference is that I'm not sure how to <em>encode</em> a file, instead of a simple string.</p>\n"}, {"tags": ["regex", "perl", "pcre"], "comments": [{"owner": {"reputation": 109, "user_id": 2672337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5652f692b5a269ab99d35d0cbedf8319?s=128&d=identicon&r=PG", "display_name": "Eily", "link": "https://stackoverflow.com/users/2672337/eily"}, "edited": false, "score": 0, "creation_date": 1515774665, "post_id": 48230208, "comment_id": 83442788, "body": "I&#39;m not sure what you&#39;re trying to do with passthrough, it matches but doesn&#39;t change anything? Why match at all then? If that&#39;s correct, you can just remove PASSTHROUGH on the left side and use the return value of s{SEARCH}{REPLACE}"}, {"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1515774841, "post_id": 48230208, "comment_id": 83442897, "body": "the special map %+ is reset each time regex matches so there is no other way to get count than using <code>++$cnt</code> maybe <code>\\K</code> can be used to avoid replacing passthrough matches, for example <code>((?:&#39;$PASSTHROUGH&#39;\\K)|&#39;$REPLACE&#39;)</code>"}, {"owner": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "reply_to_user": {"reputation": 109, "user_id": 2672337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5652f692b5a269ab99d35d0cbedf8319?s=128&d=identicon&r=PG", "display_name": "Eily", "link": "https://stackoverflow.com/users/2672337/eily"}, "edited": false, "score": 0, "creation_date": 1515774847, "post_id": 48230208, "comment_id": 83442904, "body": "@Eily because <code>$REPLACE</code> would otherwise match things matched by <code>$PASSTHROUGH</code>. <code>$PASSTHROUGH</code> is a rather complex pattern made of several other subpatterns and uses recursion and it is not possible to my knowledge to do what I need without it."}, {"owner": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "reply_to_user": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1515774916, "post_id": 48230208, "comment_id": 83442941, "body": "@NahuelFouilleul my problem is not with the count per se <code>++$cnt</code> is working fine for me. I need a way of getting <code>$cnt</code> without actually modifying the file. I will look into <code>\\K</code>. Thank you."}, {"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1515775007, "post_id": 48230208, "comment_id": 83442996, "body": "@BradAllred, in the code you&#39;ve shown we can&#39;t see the file is modified maybe there&#39;s the <code>-i</code> option can be removed to not modify the file"}, {"owner": {"reputation": 109, "user_id": 2672337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5652f692b5a269ab99d35d0cbedf8319?s=128&d=identicon&r=PG", "display_name": "Eily", "link": "https://stackoverflow.com/users/2672337/eily"}, "edited": false, "score": 0, "creation_date": 1515775167, "post_id": 48230208, "comment_id": 83443089, "body": "@BradAllred maybe a negative look-ahead assertion can help, <code>(?!THAT)(THIS)</code> will check that the current position can&#39;t match <code>THAT</code> before it even tries matching <code>THIS</code>, so this effictively gives the possibility to match &quot;THIS but not THAT&quot;."}, {"owner": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "reply_to_user": {"reputation": 109, "user_id": 2672337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5652f692b5a269ab99d35d0cbedf8319?s=128&d=identicon&r=PG", "display_name": "Eily", "link": "https://stackoverflow.com/users/2672337/eily"}, "edited": false, "score": 0, "creation_date": 1515775373, "post_id": 48230208, "comment_id": 83443204, "body": "@Eily That is the first thing I tried. Unfortunately negative look arounds are limited. I no longer recall which advanced feature Perl complained about, but the error was something along the lines of <code>X cannot be used with negative look around</code>. I suspect the recursion."}, {"owner": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "reply_to_user": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1515775438, "post_id": 48230208, "comment_id": 83443255, "body": "@NahuelFouilleul I will try removing the -i. If it is that simple I will feel silly :)"}, {"owner": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "reply_to_user": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1515776259, "post_id": 48230208, "comment_id": 83443728, "body": "@NahuelFouilleul using <code>\\K</code> on the <code>$PASSTHROUGH</code> didn&#39;t work. It is now making bizzare substitutions that are duplicating things."}], "answers": [{"comments": [{"owner": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "edited": false, "score": 0, "creation_date": 1515775529, "post_id": 48230550, "comment_id": 83443316, "body": "I will update the question with the complete Perl command. My apologies."}, {"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "reply_to_user": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "edited": false, "score": 0, "creation_date": 1515775639, "post_id": 48230550, "comment_id": 83443393, "body": "ok note that the files were always modified because of the <code>print &quot;$cnt&quot;</code> at the end which is written in file"}, {"owner": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "edited": false, "score": 0, "creation_date": 1515775813, "post_id": 48230550, "comment_id": 83443499, "body": "I&#39;m not so sure about that. the files don&#39;t contain anything of the sort after running this. only the replacements made by the pattern. git shows no other changes and such changes would cause compile errors."}, {"owner": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "edited": false, "score": 0, "creation_date": 1515775999, "post_id": 48230550, "comment_id": 83443598, "body": "I&#39;ve updated with the missing switches. I believe the <code>-0777</code> is somehow to process the entire file rather than line-by-line."}, {"owner": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "edited": false, "score": 0, "creation_date": 1515776528, "post_id": 48230550, "comment_id": 83443875, "body": "Thank you so much. I believe this works! allow me to run some more tests before I accept. Would you mind explaining the <code>-ne</code> options?"}, {"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "reply_to_user": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "edited": false, "score": 0, "creation_date": 1515776906, "post_id": 48230550, "comment_id": 83444058, "body": "<code>perl -h</code> can give information on switchs similar to sed,  <code>-e</code> is followed by perl expression,  <code>-n</code> loops over input without printing, otherwise if there&#39;s many files after perl program it could be useful to print current file &#39;print $ARGV&#39;"}, {"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "reply_to_user": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "edited": false, "score": 0, "creation_date": 1515777286, "post_id": 48230550, "comment_id": 83444268, "body": "little change which is important, because not tested, <code>$cnt=@a=m{..}g</code> because <code>m{..}g</code> must be evaled in array context to give all matches and <code>@a</code> in scalar context to give number of matches"}], "tags": [], "owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "is_accepted": true, "score": 3, "last_activity_date": 1515777190, "last_edit_date": 1515777190, "creation_date": 1515775492, "answer_id": 48230550, "question_id": 48230208, "link": "https://stackoverflow.com/questions/48230208/how-to-count-matches-for-a-named-capture-group-in-perl/48230550#48230550", "title": "How to count matches for a named capture group in Perl", "body": "<p>EDIT after question update</p>\n\n<ul>\n<li><code>-0777</code> means the whole file is read once (input record separator undef)</li>\n<li><code>-i</code> : edit file inplace (like sed -i), must be removed to avoid to modify file </li>\n<li><code>-p</code> : prints lines</li>\n</ul>\n\n<p>following command should just print the number of matches</p>\n\n<pre><code>perl -0777 -ne '$cnt=@a=m{('$PASSTHROUGH'(*SKIP)(?!)|'$REPLACE')}pg;print \"$cnt\\n\"'\n</code></pre>\n\n<p>it is done differently : </p>\n\n<ul>\n<li>the principle of pattern alternation is to match first what should fail to keep what we want</li>\n<li><code>(*SKIP)</code> : is a backtracking control verb which prevent regex engine to backtrack after match fail, that's what is done normally</li>\n<li><code>(?!)</code> : is the same as <code>(*FAIL)</code> </li>\n</ul>\n"}], "owner": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 48230550, "answer_count": 1, "score": 0, "last_activity_date": 1515777190, "creation_date": 1515774104, "last_edit_date": 1515775558, "question_id": 48230208, "link": "https://stackoverflow.com/questions/48230208/how-to-count-matches-for-a-named-capture-group-in-perl", "title": "How to count matches for a named capture group in Perl", "body": "<p>I have a Perl command I cobbled together that runs a regex find and replace on a file. It works great, but has the unfortunate side effect of \"modifying\" the file even if the resulting file is identical. This makes sense since it is replacing the matches with themselves. We cant have this because the result is part of a <code>make</code> pipeline and causes an entire rebuild every time it is run.</p>\n\n<p>I would now like to run a command to get a count of matches for a specific named capture group so that I can test if anything needs to be replaced before actually running the first command.</p>\n\n<p>The command is executed though <code>bash</code> with some bash variables: <code>perl -0777 -i -pe '$cnt=0;s{('$PASSTHROUGH'|'$REPLACE')}{$+{PASSTHROUGH}?$+{PASSTHROUGH}:(++$cnt,'$REPLACEMENT')\")}peg; END{print \"$cnt\\n\"}'</code></p>\n\n<p>Again, this works great and gives me the number of actual replacements made since <code>$cnt</code> is only incremented in the <code>else</code> branch of the ternary operator. If I were to run a match for only the <code>$REPLACE</code> pattern I would not get the correct number since often it would match things in the <code>$PASSTHROUGH</code> group.</p>\n\n<p>I suspect there is a way to retrieve the count of a specific group, but I don't know Perl or the terminology, so I am struggling to find an answer to how I can alter this command to <em>not</em> do a replace, but rather simply count the matches to the <code>$REPLACE</code> sub-pattern only. It is a named group: <code>(?&lt;REPLACE&gt;some-regex-pattern)</code></p>\n"}, {"tags": ["perl", "debugging"], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1515782726, "last_edit_date": 1515782726, "creation_date": 1515779711, "answer_id": 48231657, "question_id": 48229672, "link": "https://stackoverflow.com/questions/48229672/how-to-restrict-perl-debugging-in-a-given-set-of-modules-or-lib-path/48231657#48231657", "title": "How to restrict perl debugging in a given set of modules or lib path?", "body": "<p>The <a href=\"https://metacpan.org/source/SHAY/perl-5.26.1/lib/perl5db.pl#L5131\" rel=\"nofollow noreferrer\"><code>DB::cmd_b_sub</code></a> or <a href=\"https://metacpan.org/source/SHAY/perl-5.26.1/lib/perl5db.pl#L5092\" rel=\"nofollow noreferrer\"><code>DB::break_subroutine</code></a> functions set a breakpoint at the start of an arbitrary function. You can walk the stash to find the set of arguments to pass to this function. For example,</p>\n\n<pre><code>sub add_breakpoints_for_module {\n    my $module = shift;\n    return unless $INC{\"perl5db.pl\"};    # i.e., unless debugger is on\n    no strict 'refs';\n    for my $sub (eval \"values %\" . $module . \"::\") {\n        if (defined &amp;$sub) {          # if the symbol is valid sub name\n            DB::cmd_b_sub(substr($sub,1));   # add breakpoint\n        }\n    }\n}\n</code></pre>\n\n<p>This code should be run after the relevant modules have been loaded.</p>\n\n<hr>\n\n<p>And here's how to use this idea as a separate library. Save this code to <code>Devel/ModuleBreaker.pm</code> somewhere on your <code>@INC</code> path and invoke the debugger as</p>\n\n<pre><code>perl -d:ModuleBreaker=Some::Module,Some::Other::Module script_to_debug.pl args\n</code></pre>\n\n<p>.</p>\n\n<pre><code># Devel/ModuleBreaker.pm - automatically break in all subs in arbitrary modules\npackage Devel::ModuleBreaker;\nsub import {\n    my ($class,@modules) = @_;\n    our @POSTPONE = @modules;\n    require \"perl5db.pl\";\n}\nCHECK { # expect compile-time mods have been loaded before CHECK phase\n    for my $module (our @POSTPONE) {\n        no strict 'refs';\n        for my $sub (eval \"values %\" . $module . \"::\") {\n            defined &amp;$sub &amp;&amp; DB::cmd_b_sub(substr($sub,1));\n        }\n    }\n}\n1;\n</code></pre>\n\n<hr>\n\n<p>And here's a version that will break on subroutines that match arbitrary patterns (which should make it easier to break inside submodules). It takes advantage of the <code>%DB::sub</code> table, which has information about all loaded subroutines (including anonymous subs).</p>\n\n<pre><code>package Devel::SubBreaker;\n# install as Devel/SubBreaker.pm on @INC\n# usage:  perl -d:SubBreaker=pattern1,pattern2,... script_to_debug.pl args\nsub import {\n    my $class = shift;\n    our @patterns = @_;\n    require \"perl5db.pl\";\n}\nCHECK {\n    foreach my $sub (keys %DB::sub) {\n        foreach my $pattern (our @patterns) {\n            $sub =~ $pattern and DB::cmd_b_sub($sub), last;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 5376182, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206090505395883/picture?type=large", "display_name": "vp8", "link": "https://stackoverflow.com/users/5376182/vp8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1515782726, "creation_date": 1515772290, "question_id": 48229672, "link": "https://stackoverflow.com/questions/48229672/how-to-restrict-perl-debugging-in-a-given-set-of-modules-or-lib-path", "title": "How to restrict perl debugging in a given set of modules or lib path?", "body": "<p>When debugging a perl program with <code>perl -d</code>, How can I restrict it to step in only given set of modules or a path to <code>lib</code> ?</p>\n"}, {"tags": ["xml", "perl", "csv", "data-conversion"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1515772394, "post_id": 48229571, "comment_id": 83441452, "body": "You should not use XML::Simple in new code. It&#39;s not simple, often wrong and the documentation suggests to not use it."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1515772444, "post_id": 48229571, "comment_id": 83441485, "body": "The <code>ipAddress</code> is an <i>element</i>, not an <i>attribute</i>."}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1515774079, "post_id": 48229904, "comment_id": 83442438, "body": "Thank you a lot for advise! It works! But my file output.csv is empty.  Should I write             <code>open(my $out, &#39;&gt;&#39;, &#39;output.csv&#39;) or die &quot;Output: $!\\n&quot;;              print $out join(&#39;,&#39;, @Fields) . &quot;\\n&quot;;</code> at the end of script?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1515774154, "post_id": 48229904, "comment_id": 83442474, "body": "@StayCalm you didn&#39;t show your full code, so I don&#39;t know. If you have a follow up question, please ask it as new question."}, {"owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1515774249, "post_id": 48229904, "comment_id": 83442536, "body": "This peace of code is from that one, I&#39;ve posted :)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1515773042, "creation_date": 1515773042, "answer_id": 48229904, "question_id": 48229571, "link": "https://stackoverflow.com/questions/48229571/xml-to-csv-with-nested-and-definite-elements-in-perl/48229904#48229904", "title": "XML to CSV with nested and definite elements in Perl", "body": "<p>When dealing with XML::Simple, it's always a good idea to use <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow noreferrer\">Data::Dumper</a> <strong>first</strong> to look at the data structure.</p>\n\n<pre><code>foreach my $entity ( @{ $xml-&gt;{entity} } ) {\n    print Dumper $entity;\n</code></pre>\n\n<p>This will show you:</p>\n\n<pre><code>$VAR1 = {\n          'url' =&gt; 'https://hostname/webacs/api/v1/data/Devices/20',\n          'type' =&gt; 'Devices',\n          'dtoType' =&gt; 'devicesDTO',\n          'devicesDTO' =&gt; {\n                          'displayName' =&gt; '20',\n                          'creationTime' =&gt; '2016-02-29T17:32:13.116+01:00',\n                          'warningAlarms' =&gt; '0',\n                          'ipAddress' =&gt; '1.1.1.1',\n                          'clearedAlarms' =&gt; '1',\n                          'majorAlarms' =&gt; '0',\n                          'collectionDetail' =&gt; '&lt;status&gt;&lt;general code=\"SUCCESS\"/&gt;&lt;/status&gt;',\n                          'location' =&gt; {},\n                          'collectionTime' =&gt; '2017-03-30T09:47:07.606+02:00',\n                          'softwareType' =&gt; 'IOS',\n                          'id' =&gt; '20',\n                          'softwareVersion' =&gt; '12.2(55)SE9'\n                        }\n        };\n</code></pre>\n\n<p>So it's quite clear that your <code>@Fields</code> are in the wrong place. Those keys are not in <code>$entity</code> directly, but rather in <code>$entity-&gt;{devicesDTO}</code>.</p>\n\n<p>There is also no need to use <code>$_-&gt;{content}</code> with the <code>map</code>. In fact, there are no <code>content</code> keys in that data structure.</p>\n\n<pre><code>foreach my $entity ( @{ $xml-&gt;{entity} } ) {\n    print join( ',', @{ $entity-&gt;{devicesDTO} }{@Fields} ) . \"\\n\";\n}\n</code></pre>\n\n<p>This will produce the output</p>\n\n<pre><code>id,ipAddress\n20,1.1.1.1\n21,2.2.2.2\n</code></pre>\n\n<hr>\n\n<p>Note that you have a stray comma in your <code>qw{}</code> that you don't need. The idea of <code>qw</code> is that you do not need to use commas. You should also decide if you want your variables to have lower case letters or not. Mixing that is bad style, and the convention in Perl is to use snake case.</p>\n\n<pre><code>my @fields = qw{id ipAddress};\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "accepted_answer_id": 48229904, "answer_count": 1, "score": 0, "last_activity_date": 1515773042, "creation_date": 1515771978, "last_edit_date": 1515772660, "question_id": 48229571, "link": "https://stackoverflow.com/questions/48229571/xml-to-csv-with-nested-and-definite-elements-in-perl", "title": "XML to CSV with nested and definite elements in Perl", "body": "<p>I need to convert my xml file to csv Format. But I in csv file I need not all Information fron the XML, just 2 elements (IP Address and id from device). </p>\n\n<pre><code> #!/usr/bin/perl\n use strict;\n use warnings;\n use Data::Dumper;\n use XML::Simple;\n\n  #Elements, that I want see in my csv\n  my @Fields = qw{id, ipAddress};\n\n  open(my $out, '&gt;', 'output.csv') or die \"Output: $!\\n\";\n  print $out join(',', @Fields) . \"\\n\";\n\n  my $xml = XMLin('input.xml', ForceArray =&gt; ['entity']);\n  foreach my $entity (@{$xml-&gt;{entity}}) {\n  no warnings;\n  print $out join(',', map{$_-&gt;{content}} @{$entity}{@Fields}) . \"\\n\";\n</code></pre>\n\n<p>Input.xml</p>\n\n<hr>\n\n<pre><code>      &lt;?xml version=\"1.0\" ?&gt;\n          &lt;queryResponse last=\"41\" first=\"0\" count=\"42\" type=\"Devices\" responseType=\"listEntityInstances\" requestUrl=\"https://hostname/webacs/api/v1/data/Devices?.full=true\" rootUrl=\"https://hostname/webacs/api/v1/data\"&gt;\n             &lt;entity dtoType=\"devicesDTO\" type=\"Devices\" url=\"https://hostname/webacs/api/v1/data/Devices/20\"&gt;\n               &lt;devicesDTO displayName=\"20\" id=\"20\"&gt;\n               &lt;clearedAlarms&gt;1&lt;/clearedAlarms&gt;\n               &lt;collectionDetail&gt;&amp;lt;status&amp;gt;&amp;lt;general code=\"SUCCESS\"/&amp;gt;&amp;lt;/status&amp;gt;&lt;/collectionDetail&gt;\n               &lt;collectionTime&gt;2017-03-30T09:47:07.606+02:00&lt;/collectionTime&gt;\n               &lt;creationTime&gt;2016-02-29T17:32:13.116+01:00&lt;/creationTime&gt;\n               &lt;ipAddress&gt;1.1.1.1&lt;/ipAddress&gt;\n               &lt;location&gt; &lt;/location&gt;\n               &lt;majorAlarms&gt;0&lt;/majorAlarms&gt;\n                &lt;softwareType&gt;IOS&lt;/softwareType&gt;\n                &lt;softwareVersion&gt;12.2(55)SE9&lt;/softwareVersion&gt;\n                &lt;warningAlarms&gt;0&lt;/warningAlarms&gt;\n             &lt;/devicesDTO&gt;\n          &lt;/entity&gt;\n          &lt;entity dtoType=\"devicesDTO\" type=\"Devices\" url=\"https://hostname/webacs/api/v1/data/Devices/21\"&gt;\n               &lt;devicesDTO displayName=\"21\" id=\"21\"&gt;\n               &lt;clearedAlarms&gt;1&lt;/clearedAlarms&gt;\n               &lt;collectionDetail&gt;&amp;lt;status&amp;gt;&amp;lt;general code=\"SUCCESS\"/&amp;gt;&amp;lt;/status&amp;gt;&lt;/collectionDetail&gt;\n               &lt;collectionTime&gt;2017-03-30T09:47:07.606+02:00&lt;/collectionTime&gt;\n               &lt;creationTime&gt;2016-02-29T17:32:13.116+01:00&lt;/creationTime&gt;\n               &lt;ipAddress&gt;2.2.2.2&lt;/ipAddress&gt;\n               &lt;location&gt; &lt;/location&gt;\n               &lt;majorAlarms&gt;0&lt;/majorAlarms&gt;\n                &lt;softwareType&gt;IOS&lt;/softwareType&gt;\n                &lt;softwareVersion&gt;12.2(55)SE9&lt;/softwareVersion&gt;\n                &lt;warningAlarms&gt;0&lt;/warningAlarms&gt;\n             &lt;/devicesDTO&gt;\n          &lt;/entity&gt;\n        &lt;/queryResponse&gt; \n</code></pre>\n\n<p>As result I have</p>\n\n<pre><code> id, ipAddress\n ,\n ,\n</code></pre>\n\n<p>I am not sure that:</p>\n\n<pre><code>     my $xml = XMLin('input.xml', ForceArray =&gt; ['entity']);\n     foreach my $entity (@{$xml-&gt;{entity}})\n</code></pre>\n\n<p>is right in my case. Should I do it with tag <strong>entity</strong>?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27, "user_id": 4829167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564d1aaa4fed98eb9b314081a034e616?s=128&d=identicon&r=PG&f=1", "display_name": "fexlneb", "link": "https://stackoverflow.com/users/4829167/fexlneb"}, "edited": false, "score": 0, "creation_date": 1515771885, "post_id": 48229520, "comment_id": 83441125, "body": "A server from which I cannot access the internet."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1515772424, "post_id": 48229520, "comment_id": 83441472, "body": "Perhaps it&#39;s possible for you to have a local CPAN mirror on the non-internet server? <a href=\"https://stackoverflow.com/a/44543813/5830574\">This answer</a> (to a similar question) describes how to set one up. It&#39;s quite easy."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1515773018, "post_id": 48229520, "comment_id": 83441841, "body": "I edited your comment about the lack of internet access from your server into your question. You can rollback that edit if you prefer or <a href=\"https://stackoverflow.com/posts/48229520/edit\">edit</a> the question yourself and change it."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1515773529, "post_id": 48229520, "comment_id": 83442133, "body": "do you have more than one perl installed?  can you show the actual commands you ran to install Sub::Identify and SUPER and their output?  where did you get the things you are installing?  what versions are you installing?"}, {"owner": {"reputation": 27, "user_id": 4829167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564d1aaa4fed98eb9b314081a034e616?s=128&d=identicon&r=PG&f=1", "display_name": "fexlneb", "link": "https://stackoverflow.com/users/4829167/fexlneb"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1515774330, "post_id": 48229520, "comment_id": 83442584, "body": "ok thank you @PerlDuck. i&#39;ll doc that as an option. also the Q&amp;A format for personal notes is awesome."}, {"owner": {"reputation": 27, "user_id": 4829167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564d1aaa4fed98eb9b314081a034e616?s=128&d=identicon&r=PG&f=1", "display_name": "fexlneb", "link": "https://stackoverflow.com/users/4829167/fexlneb"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1515774898, "post_id": 48229520, "comment_id": 83442930, "body": "@ysth <b>Question1:</b> i discern only perl 5.14 installed when i <code>perl -v</code>. <b>Question2:</b> <code>perl Makefile.PL</code>. <b>Question3:</b> CPAN. <b>Question4:</b> Sub-Identify-0.14 and SUPER-1.20141117."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1515775511, "post_id": 48229520, "comment_id": 83443301, "body": "<code>perl Makefile.PL</code> doesn&#39;t install anything; edit your question to show your command for installing SUPER and the output"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1515778419, "post_id": 48229520, "comment_id": 83444831, "body": "<code>Sub-Identify-0.14&#47;lib</code> is the source module directory. You haven&#39;t even built the module yet, let alone installed it."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1515778476, "post_id": 48229520, "comment_id": 83444860, "body": "Try <code>cpan .</code> in <code>Sub-Identify-0.14</code> to install from the current directory."}, {"owner": {"reputation": 27, "user_id": 4829167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564d1aaa4fed98eb9b314081a034e616?s=128&d=identicon&r=PG&f=1", "display_name": "fexlneb", "link": "https://stackoverflow.com/users/4829167/fexlneb"}, "edited": false, "score": 0, "creation_date": 1515778534, "post_id": 48229520, "comment_id": 83444878, "body": "Ok sorry I&#39;ve never done this before. I was referencing this: <a href=\"https://stackoverflow.com/questions/7541019/manual-installation-of-a-perl-module\" title=\"manual installation of a perl module\">stackoverflow.com/questions/7541019/&hellip;</a>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1515778773, "post_id": 48229520, "comment_id": 83445001, "body": "So why did you skip half of the instructions in there (all the <code>make</code>/<code>.&#47;Build</code> parts)?"}, {"owner": {"reputation": 27, "user_id": 4829167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564d1aaa4fed98eb9b314081a034e616?s=128&d=identicon&r=PG&f=1", "display_name": "fexlneb", "link": "https://stackoverflow.com/users/4829167/fexlneb"}, "edited": false, "score": 0, "creation_date": 1515779077, "post_id": 48229520, "comment_id": 83445136, "body": "Because after <code>perl makefile.pl</code> I enter <code>make</code>. And the output is that make is not a recognizable command. So I abandoned those instructions after that happened."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1515779123, "post_id": 48229520, "comment_id": 83445161, "body": "Then you need to install <code>make</code>."}, {"owner": {"reputation": 27, "user_id": 4829167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564d1aaa4fed98eb9b314081a034e616?s=128&d=identicon&r=PG&f=1", "display_name": "fexlneb", "link": "https://stackoverflow.com/users/4829167/fexlneb"}, "edited": false, "score": 0, "creation_date": 1515779849, "post_id": 48229520, "comment_id": 83445565, "body": "Ok. <code>make</code> is a perl module? I tried looking in CPAN and I see File-Info-1.02"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1515784944, "post_id": 48229520, "comment_id": 83447874, "body": "No, <code>make</code> is not a Perl module. <code>perl Makefile.PL</code> generates a <code>Makefile</code> which you then process by issuing the <code>make</code> command. If you don&#39;t have <code>make</code> installed, then install it."}], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1515785022, "post_id": 48232754, "comment_id": 83447912, "body": "From the comments it seems that <code>make</code> isn&#39;t installed on the OP&#39;s machine. I thought that&#39;s <i>always</i> installed?! Unfortunately I cannot remember what package it is part of."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1515785123, "post_id": 48232754, "comment_id": 83447955, "body": "@PerlDuck, Nah, it&#39;s common to not have <code>make</code> installed. That&#39;s the case for Ubuntu, for example. Just gotta install it. (<code>apt-get install make</code> on Ubuntu. Not sure how to do that offline.)"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1515785234, "post_id": 48232754, "comment_id": 83448001, "body": "Hmm. I also suggested a CPAN mirror and the OP liked that idea, but does that work without <code>make</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1515785329, "post_id": 48232754, "comment_id": 83448047, "body": "@PerlDuck, Of course not. <code>cpan</code> is not actually an installer. It&#39;s a downloader and dependency walker that runs the installers provided by the distros as shown in my answer."}, {"owner": {"reputation": 27, "user_id": 4829167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564d1aaa4fed98eb9b314081a034e616?s=128&d=identicon&r=PG&f=1", "display_name": "fexlneb", "link": "https://stackoverflow.com/users/4829167/fexlneb"}, "edited": false, "score": 0, "creation_date": 1517231384, "post_id": 48232754, "comment_id": 83997331, "body": "Ok. Appreciate your patience. I understand what the problem/solution is."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 0, "last_activity_date": 1515785056, "last_edit_date": 1515785056, "creation_date": 1515784798, "answer_id": 48232754, "question_id": 48229520, "link": "https://stackoverflow.com/questions/48229520/perl-module-prerequisite-not-found/48232754#48232754", "title": "Perl module prerequisite not found", "body": "<p>You didn't install Sub::Identify.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>tar zvzf Sub-Identify-0.14.tar.gz\ncd Sub-Identify-0.14\nperl MakeFile.pl\nmake test            # missing\nmake install         # missing\ncd ..\n\ntar zvzf SUPER-1.20141117.tar.gz\ncd SUPER-1.20141117\nperl Build.PL\n./Build.PL test\n./Build.PL install\ncd ..\n</code></pre>\n\n<hr>\n\n<p>By the way, you could create a mirror of CPAN using <a href=\"http://search.cpan.org/perldoc?CPAN::Mini\" rel=\"nofollow noreferrer\">CPAN::Mini</a>. If you copy this mirror to your offline machine, you could use <code>cpan</code> to install modules despite not being online.</p>\n"}], "owner": {"reputation": 27, "user_id": 4829167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564d1aaa4fed98eb9b314081a034e616?s=128&d=identicon&r=PG&f=1", "display_name": "fexlneb", "link": "https://stackoverflow.com/users/4829167/fexlneb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1053, "favorite_count": 0, "accepted_answer_id": 48232754, "answer_count": 1, "score": -1, "last_activity_date": 1515785056, "creation_date": 1515771827, "last_edit_date": 1515778426, "question_id": 48229520, "link": "https://stackoverflow.com/questions/48229520/perl-module-prerequisite-not-found", "title": "Perl module prerequisite not found", "body": "<p>End goal is to install Excel::Writer::XLSX on a server without internet access.</p>\n\n<p>I want to install SUPER as its a prerequisite. Sub::Identify is a prerequisite of SUPER. I believe I installed Sub:Identify successfully. But when I attempt to install SUPER I am prompted that the prerequisite is not installed. Here are the commands I entered on command prompt and the output:</p>\n\n<ol>\n<li><code>cd Sub-Identify-0.14</code></li>\n<li><code>perl MakeFile.pl</code></li>\n<li><code>perldoc -l Sub::Identify</code></li>\n<li>Output: <code>lib\\Sub\\Identify.pm\\</code></li>\n<li><code>cd SUPER-1.20141117</code></li>\n<li>perl <code>Build.PL</code></li>\n<li>Output: <code>Sub::Identify is not installed</code></li>\n<li><code>perl Makefile.PL</code></li>\n<li>Output: <code>Warning: prerequisite Sub::Identify 0 not found.</code></li>\n</ol>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 4, "creation_date": 1515752354, "post_id": 48224080, "comment_id": 83429642, "body": "What is the eror message?"}, {"owner": {"reputation": 1370, "user_id": 8130632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKRe6.jpg?s=128&g=1", "display_name": "spi", "link": "https://stackoverflow.com/users/8130632/spi"}, "edited": false, "score": 2, "creation_date": 1515752362, "post_id": 48224080, "comment_id": 83429648, "body": "maybe you have an error message?"}, {"owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1515752785, "post_id": 48224080, "comment_id": 83429939, "body": "Try running a plain (non-CGI) Perl script to make it easier to diagnose your problem (i.e. directly on the command line). Alternatively (even better) run the SQL directly in a MySQL console (or via phpMyAdmin if you don&#39;t have console access)."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9208402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4d1afba4e88453a1636a5650aa8705?s=128&d=identicon&r=PG&f=1", "display_name": "e dogan", "link": "https://stackoverflow.com/users/9208402/e-dogan"}, "edited": false, "score": 0, "creation_date": 1515966774, "post_id": 48224138, "comment_id": 83491686, "body": "MANY THANKS. I was away couple of days. &#39;PRIMARY KEY&#39;  worked! I was getting desperate. This was great help."}], "tags": [], "owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 6, "last_activity_date": 1515752466, "creation_date": 1515752466, "answer_id": 48224138, "question_id": 48224080, "link": "https://stackoverflow.com/questions/48224080/create-table-mysql-perlstatement-i-use-doesnt-work/48224138#48224138", "title": "CREATE TABLE (MYSQL PERL)statement I use doesn&#39;t work", "body": "<p>In order to use <code>AUTO_INCREMENT</code> on a column it has to be declared as the primary key of the table.</p>\n\n<pre><code>$dbh-&gt;do(\"CREATE TABLE IF NOT EXISTS tt1 (\nid INT(4) NOT NULL AUTO_INCREMENT PRIMARY KEY, \nname VARCHAR(10), \nsurname VARCHAR(10),\ncompany_name VARCHAR(20),\nbuilding_number VARCHAR(4),\naddress VARCHAR(100),\npostcode VARCHAR(6)\n)\");\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9208402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4d1afba4e88453a1636a5650aa8705?s=128&d=identicon&r=PG&f=1", "display_name": "e dogan", "link": "https://stackoverflow.com/users/9208402/e-dogan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1516002025, "creation_date": 1515752278, "last_edit_date": 1516002025, "question_id": 48224080, "link": "https://stackoverflow.com/questions/48224080/create-table-mysql-perlstatement-i-use-doesnt-work", "title": "CREATE TABLE (MYSQL PERL)statement I use doesn&#39;t work", "body": "<p>My Code is as below. The code runs OK up to the <code>CREATE TABLE</code> statement.</p>\n\n<pre><code>#!/usr/local/bin/perl\nprint \"Content-type: text/html\\n\\n\";\n\nuse DBI;\n\n\n$dbh = DBI-&gt;connect(\"DBI:mysql:DBNAME:DatabaseHost\", \"DATABASE\", \n\n\"PASSWORD\");\n\n\n$dbh-&gt;do(\"CREATE TABLE IF NOT EXISTS tt1 (\nid INT(4) NOT NULL AUTO_INCREMENT, \nname VARCHAR(10), \nsurname VARCHAR(10),\ncompany_name VARCHAR(20),\nbuilding_number VARCHAR(4),\naddress VARCHAR(100),\npostcode VARCHAR(6)\n)\");\n\nprint \"table created\";\n</code></pre>\n"}, {"tags": ["string", "perl", "sed", "match"], "comments": [{"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1515712051, "post_id": 48217003, "comment_id": 83416427, "body": "your requirement has counting in nature. you cannot simply rely onregex to do that, and that means you will need more sophisticated procedure for that?"}, {"owner": {"reputation": 339, "user_id": 5683724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-ys-8Xx_dcVY/AAAAAAAAAAI/AAAAAAAAACg/QkZg_guBu6g/photo.jpg?sz=128", "display_name": "Jaeyoung Park", "link": "https://stackoverflow.com/users/5683724/jaeyoung-park"}, "reply_to_user": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1515712613, "post_id": 48217003, "comment_id": 83416618, "body": "I see, then I think character-based search is the only way like zdim&#39;s reply."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515712720, "post_id": 48217003, "comment_id": 83416650, "body": "Your code doesn&#39;t even try to follow the rules that you describe. <i>Stack Overflow</i> isn&#39;t here to do your job when you don&#39;t want to try any more. Regular expressions cannot do this, and you should design and implement an algorithm that does what you need. If you make a genuine attempt and are still struggling then post your code here for help to see what you&#39;ve missed. As it stands, you&#39;re just asking for code to be written for free, and that&#39;s unforgiveable."}, {"owner": {"reputation": 339, "user_id": 5683724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-ys-8Xx_dcVY/AAAAAAAAAAI/AAAAAAAAACg/QkZg_guBu6g/photo.jpg?sz=128", "display_name": "Jaeyoung Park", "link": "https://stackoverflow.com/users/5683724/jaeyoung-park"}, "edited": false, "score": 0, "creation_date": 1515910789, "post_id": 48217003, "comment_id": 83476974, "body": "Hi, I am sorry, I did know the rules. If my question and code are not following the rule, I would remove my questions. Sorry about this."}, {"owner": {"reputation": 339, "user_id": 5683724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-ys-8Xx_dcVY/AAAAAAAAAAI/AAAAAAAAACg/QkZg_guBu6g/photo.jpg?sz=128", "display_name": "Jaeyoung Park", "link": "https://stackoverflow.com/users/5683724/jaeyoung-park"}, "edited": false, "score": 0, "creation_date": 1515911012, "post_id": 48217003, "comment_id": 83477014, "body": "I tried to remove this post since my cod did not follow the rules. Icannot remove this post"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515713327, "post_id": 48217208, "comment_id": 83416839, "body": "An empty pattern like <code>&#47;&#47;</code> normally tries to match the pattern that successfully matched most recently. But <code>split</code> is exempt from this, so that <code>split &#47;&#47;</code> will correctly divide a string into a list of characters. I think it&#39;s always best to use <code>&#47;</code> as the delimiter for the split pattern, to emphasize that the parameter is a regex pattern and at least to distinguish between <code>split &#39; &#39;</code> and <code>split &#47; &#47;</code> which are very different."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515713677, "post_id": 48217208, "comment_id": 83416930, "body": "@Borodin  Eh ... I just can&#39;t decide there.  I had <code>&#47;&#47;</code> at first but then I like <code>&#39;&#39;</code> to &quot;emphasize&quot; that it uses a literal string. That&#39;s probably silly (and moot, it runs regex anyway I think) though.  (Also, I do twitch a little bit at <code>&#47;&#47;</code> in regex, but that is clear inside <code>split</code>.)  Reconsidering..."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1516002413, "last_edit_date": 1516002413, "creation_date": 1515711798, "answer_id": 48217208, "question_id": 48217003, "link": "https://stackoverflow.com/questions/48217003/partial-match-of-strings/48217208#48217208", "title": "Partial match of strings", "body": "<p>You need to check character by character, so why not break strings up and count</p>\n\n<pre><code>sub is_match {\n    my ($target, $search, threshold) = @_;\n    return if length($target) != length($search);\n    $treshold //= 5;\n\n    my @tgt = split //, $target;\n    my @sr  = split //, $search;\n\n    for my $i (0..$#tgt) {\n        ++$m if $tgt[$i] eq $sr[$i] or $sr[$i] eq 'X';\n    }\n\n    return $m &gt;= $treshold ? $m : 0;\n}\n</code></pre>\n\n<p>I return the full count, as that may come in handy. But if you only ever care for 1/0, it may makes sense to return early if the strings can be large or are compared many times</p>\n\n<pre><code>    ...\n    for my $i (0..$#tgt) {\n        ++$m if $tgt[$i] eq $sr[$i] or $sr[$i] eq 'X';\n        return 1 if $m == $treshold;\n    }\n    return 0;\n</code></pre>\n\n<p>Note that returning right out of a loop is in general not good practice since multiple (hidden) returns can make the program flow hard to follow. They can also easily be overlooked later.</p>\n\n<p>I've added only a basic check that strings are of equal length. The <code>undef</code> returned in that case can be used simply as 'false' if that case is acceptable. If not you can throw a <code>die</code> instead.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1515721118, "post_id": 48217520, "comment_id": 83418717, "body": "Tested. Fixed problems."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1516722961, "last_edit_date": 1516722961, "creation_date": 1515714008, "answer_id": 48217520, "question_id": 48217003, "link": "https://stackoverflow.com/questions/48217003/partial-match-of-strings/48217520#48217520", "title": "Partial match of strings", "body": "<p>The following is a fast solution. It performs best when most strings match.</p>\n\n<pre><code>sub is_match { ( ( $_[0] ^ $_[1] ) =~ tr/\\x00\\x68\\x69// ) &gt;= 5 }\n\nwhile (&lt;DATA&gt;) {\n   my ( undef, $target ) = split;\n   for my $query (@inputs) {\n      if (is_match($query, $target)) {\n         print;\n         last;             \n      }\n   }\n}\n</code></pre>\n\n<p>How it works:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>    Hex of characters\n    =================\n\n    30 30 31 31 58 58  \"0011XX\"\n    30 31 30 31 30 31  \"010101\"\nXOR -----------------\n    00 01 01 00 68 69\n    ^^       ^^ ^^ ^^  4 matches\n</code></pre>\n\n<p>This solution even works if one of the strings is shorter than the other (since the XOR will result in <code>30</code>, <code>31</code> or <code>58</code> for the extra characters).</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1515721121, "post_id": 48218174, "comment_id": 83418718, "body": "Tested. Fixed problems."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": -1, "last_activity_date": 1516722951, "last_edit_date": 1516722951, "creation_date": 1515719311, "answer_id": 48218174, "question_id": 48217003, "link": "https://stackoverflow.com/questions/48217003/partial-match-of-strings/48218174#48218174", "title": "Partial match of strings", "body": "<p>The following is a fast solution. It performs best when there are many queries and/or when most strings don't match.</p>\n\n<pre><code>use Algorithm::Loops qw( NestedLoops );\nuse Regexp::Assemble qw( );\n\nsub make_matcher {\n   my $ra = Regexp::Assemble-&gt;new( flags =&gt; 's' );\n   for (@_) {\n      my $query = tr/X/./r;\n      my @query = split //, $query;     #/\n      my $extra = @query - 5;\n      if ($extra &lt;= 0) {\n         $ra-&gt;add(\"^$query\") if $extra == 0;\n         next;\n      }\n\n      NestedLoops(\n         [\n            [ 0..$#query ],\n            ( sub { [ $_+1..$#query ] } ) x ( $extra - 1 ),\n         ],\n         sub {\n            local @query[@_] = (\".\") x @_;\n            $ra-&gt;add( \"^\" . ( join(\"\", @query) =~ s/\\.+\\z//r ) );\n         },\n      );\n   }\n\n   return $ra-&gt;re();\n}\n\nmy $re = make_matcher(@inputs);\nwhile (&lt;DATA&gt;) {\n   my ( undef, $target ) = split;\n   print if $target =~ $re;\n}\n</code></pre>\n\n<p>It works by creating a large regular expression similar to the following:</p>\n\n<pre><code># For @inputs = qw( 000000 111111 );\nmy $re = qr/\n      ^.00000\n   |  ^0.0000\n   |  ^00.000\n   |  ^000.00\n   |  ^0000.0\n   |  ^00000\n   |  ^.11111\n   |  ^1.1111\n   |  ^11.111\n   |  ^111.11\n   |  ^1111.1\n   |  ^11111\n/xs;\n</code></pre>\n\n<p>The actual pattern:</p>\n\n<pre><code>my $re = qr/(?s:^(?:0(?:0(?:0(?:0.?|.0)|.00)|.000)0|1(?:1(?:1(?:1.?|.1)|.11)|.111)1|.(?:00000|11111)))/;\n</code></pre>\n\n<p>This solution even works if one of the strings is shorter than the other.</p>\n\n<p>Note that <code>make_matcher</code> could be optimized. I didn't deem it important because it's only called once.</p>\n"}], "owner": {"reputation": 339, "user_id": 5683724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-ys-8Xx_dcVY/AAAAAAAAAAI/AAAAAAAAACg/QkZg_guBu6g/photo.jpg?sz=128", "display_name": "Jaeyoung Park", "link": "https://stackoverflow.com/users/5683724/jaeyoung-park"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 1, "closed_date": 1515903026, "answer_count": 3, "score": 0, "last_activity_date": 1516722961, "creation_date": 1515710630, "last_edit_date": 1515712525, "question_id": 48217003, "link": "https://stackoverflow.com/questions/48217003/partial-match-of-strings", "closed_reason": "Needs more focus", "title": "Partial match of strings", "body": "\n\n<p>I would like to find a way to do a partial match of strings. </p>\n\n<p>I have two 50-bit binary inputs. If any input is matched with data at least 5-bit in database (array), I would print the input.</p>\n\n<p>Let's say my input is like this. <code>X</code> is a \"don't care\" bit; it would be changed to <code>.</code>, </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>11XX1100100010110111110110101001000010110101111111\n</code></pre>\n\n<p>And the data in database are</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>11001100100010110111110110101001000010110101111111\n11001011011101001000001001010110111101001010000000\n00110011011101001000001001010110111101001010000111\n</code></pre>\n\n<p>The first line of data fully matches the input so I will print this.</p>\n\n<p>The second line of data is not fully matched with the input, but the first 5-bit is matched, so I will print this also. </p>\n\n<p>The third line of data is not fully matched with the input, but the 2nd and 3rd bits are matched because of don't care condition and the last 3-bit are matched. Therefore, 5-bit (2nd + 3rd + the last 3-bit) is matched, so I will print this.  </p>\n\n<p>I have a Perl script only for fully matched cases, but I don't know how to modify this for the partially matched cases.</p>\n\n<h3>input.txt</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>11XX1100100010110111110110101001000010110101111111\n1000011000111101001011110111001100100101111000010X\n</code></pre>\n\n<h3>search.pl</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\n\n# Read input\nopen my $input_fh, '&lt;', 'input.txt' or die $! ;\nchomp ( my @input = &lt;$input_fh&gt; );\n\n# input\n#   11XX11001000101101111101101010010000101101011111X1\n#   1000011000111101001011110111001100100101111000010X\n\n# Replace 'X' with '.' which is the regex \"don't care\" character.                 \ns/X/./g for @input;\n\n# Compile a regex made of these two patterns. \nmy $search = join ( \"|\", @input ); \n$search = qr/$search/;      \n\n# Iterate database ( pasted in 'data' block for illustrative purposes )\nwhile ( &lt;DATA&gt; ) {\n    my ( $id, $target, @rest ) = split;\n    # print if the target line matches\n    print if $target =~ /$search/;\n}\n\n# Currently, only fully matched ones are printed \n\n__DATA__\n11001100100010110111110110101001000010110101111101\n11001011011101001000001001010110111101001010011111\n00110011011101001000001001010110111101001010000111\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "edited": false, "score": 0, "creation_date": 1516225904, "post_id": 48215730, "comment_id": 83606900, "body": "Use of uninitialized value $file1_line in pattern match (m//)."}, {"owner": {"reputation": 2177, "user_id": 5324657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/t1fGJ.png?s=128&g=1", "display_name": "Jeremy Jones", "link": "https://stackoverflow.com/users/5324657/jeremy-jones"}, "reply_to_user": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "edited": false, "score": 0, "creation_date": 1516824071, "post_id": 48215730, "comment_id": 83852211, "body": "Ok I&#39;ve updated to skip the loop if there&#39;s no content to read."}], "tags": [], "owner": {"reputation": 2177, "user_id": 5324657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/t1fGJ.png?s=128&g=1", "display_name": "Jeremy Jones", "link": "https://stackoverflow.com/users/5324657/jeremy-jones"}, "is_accepted": false, "score": 1, "last_activity_date": 1516824044, "last_edit_date": 1516824044, "creation_date": 1515704517, "answer_id": 48215730, "question_id": 48215462, "link": "https://stackoverflow.com/questions/48215462/read-two-files-after-skipping-line-starting-with-from-one-file/48215730#48215730", "title": "Read two files after skipping line starting with ## from one file", "body": "<p>In the loop, skip file1's lines until they're valid, and <code>last</code> out when either of the files is done:</p>\n\n<pre><code>open my $file1, \"&lt;\", \"file1.txt\" or die $!;\nopen my $file2, \"&lt;\", \"file2.txt\" or die $!;\n\nwhile (1) {\n    my $file1_line = &lt;$file1&gt; or next;\n    next if $file1_line =~ /^##/;  # skip commented lines in file1\n\n    my $file2_line = &lt;$file2&gt; or next;\n\n    last if not ($file1_line and $file2_line);\n\n    chomp $file1_line;\n    chomp $file2_line;\n\n    print \"$file1_line\\t$file2_line\\n\";\n}\n\nclose $file1;\nclose $file2;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ cat file1.txt\n##\n##\n##\nheader1 header2\n\n$ cat file2.txt \nheader3 header4\n\n$ perl mysolution.pl\nheader1 header2 header3 header4\n\n$ \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1595753102, "last_edit_date": 1595753102, "creation_date": 1515708075, "answer_id": 48216508, "question_id": 48215462, "link": "https://stackoverflow.com/questions/48215462/read-two-files-after-skipping-line-starting-with-from-one-file/48216508#48216508", "title": "Read two files after skipping line starting with ## from one file", "body": "<p>One way: skip through each file until its marker is reached; continue reading them in a new loop</p>\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy ($file1, $file2) = @ARGV;\ndie &quot;Usage: $0 file1 file2\\n&quot; if !$file1 or !$file2;\n\nopen my $fh1, '&lt;', $file1 or die &quot;Can't open $file1: $!&quot;;\nopen my $fh2, '&lt;', $file2 or die &quot;Can't open $file2: $!&quot;;\n\n# Second file's empty marker means it reads it from the beginning\nmy ($re_marker1, $re_marker2) = (qr/^##/, qr//);\n\nwhile (&lt;$fh1&gt;) { last if /$re_marker1/ }; \nwhile (&lt;$fh2&gt;) { last if /$re_marker2/ };\n\nwhile (1) { \n    my $l1 = &lt;$fh1&gt;; \n    my $l2 = &lt;$fh2&gt;; \n    chomp ($l1, $l2); \n \n    say &quot;$l1  |  $l2&quot;; \n\n    last if eof $fh1 or eof $fh2;\n}\n</code></pre>\n<p>After the two <code>while</code> loops the filehandles <code>$fh1</code> and <code>$fh2</code> are positioned so to read the next line after the line with marker that was just read, each for its file.</p>\n<p>Then you continue reading from them in another loop. That loop exits once either of the files has read its last line, checked by <a href=\"http://perldoc.perl.org/functions/eof.html\" rel=\"nofollow noreferrer\">eof</a> (returns 1 if the next read will be end-of-file). You can then test filehandles again to see which one still has something to read, if you need to print that file further. Or print from both again, <code>print $_ while &lt;$fh&gt;;</code>, which does nothing for the exhausted filehandle.</p>\n<p>Note that we seldom need <code>eof</code>, this being one of rare situations where it is just the right tool.</p>\n<p>The markers can be made into command-line options, as well. This does make a few simple assumptions around some unspecified problem details, inferred from the question.</p>\n"}], "owner": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1595753102, "creation_date": 1515703229, "last_edit_date": 1515703293, "question_id": 48215462, "link": "https://stackoverflow.com/questions/48215462/read-two-files-after-skipping-line-starting-with-from-one-file", "title": "Read two files after skipping line starting with ## from one file", "body": "<p>I want to read two files concurrently after skipping lines starting with ## from one file.</p>\n\n<pre><code>file1.txt:\n##\n##\n##\nheader1 header2\n\nfile2.txt:\nheader3 header4\n</code></pre>\n\n<p>Is there any way to skip ## and afterwards read lines in both files concurrently?</p>\n\n<pre><code>open IN1, \"file1.txt\";\nopen IN2, \"file2.txt\";\n\nif &lt;IN1&gt; ^## skip\nwhile(my $one = &lt;IN1&gt;, my $two = &lt;IN2&gt;){\n    print \"$one\\t$two\";\n\n}\n\nOutputs:\nheader1 header2    header1 header2\n</code></pre>\n"}, {"tags": ["mysql", "sql", "perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1515699612, "post_id": 48214617, "comment_id": 83411040, "body": "Please, post the actual code. It&#39;s unclear what you&#39;re trying to achieve."}, {"owner": {"reputation": 1215, "user_id": 3525290, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/303246ebe05535ca2f4e437eb6cfb7f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3525290", "link": "https://stackoverflow.com/users/3525290/user3525290"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1515699890, "post_id": 48214617, "comment_id": 83411174, "body": "That is it.  I run a select statement and data gets returned to returndata array.  But I need to replace the 3rd element from each row.  I don&#39;t know what else you need?"}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1515700722, "post_id": 48214617, "comment_id": 83411600, "body": "<code>@$_[2] = &#39;replace me&#39;;</code> will replace the 3rd element of the array."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1515701731, "post_id": 48214617, "comment_id": 83412087, "body": "@Barmar: It will, but it&#39;s much better as <code>$_-&gt;[2] = &#39;replace me&#39;</code> or even <code>${$_}[2] = &#39;replace me</code>."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1515703782, "last_edit_date": 1515703782, "creation_date": 1515700730, "answer_id": 48214927, "question_id": 48214617, "link": "https://stackoverflow.com/questions/48214617/perl-update-array/48214927#48214927", "title": "Perl Update array", "body": "<p>If <code>$self-&gt;_exec_and_fetch_all</code> can return <code>undef</code>,</p>\n\n<pre><code>my $rows = $self-&gt;_exec_and_fetch_all($sql);\nif ($rows) {\n   for my $row (@$rows) {\n      $row-&gt;[2] = 'replaceme';\n   }\n}\n\nreturn $rows;\n</code></pre>\n\n<p>Otherwise,</p>\n\n<pre><code>my $rows = $self-&gt;_exec_and_fetch_all($sql);\nfor my $row (@$rows) {\n   $row-&gt;[2] = 'replaceme';\n}\n\nreturn $rows;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $rows = $self-&gt;_exec_and_fetch_all($sql);\n$_-&gt;[2] = 'replaceme' for @$rows;\nreturn $rows;\n</code></pre>\n"}], "owner": {"reputation": 1215, "user_id": 3525290, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/303246ebe05535ca2f4e437eb6cfb7f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3525290", "link": "https://stackoverflow.com/users/3525290/user3525290"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 48214927, "answer_count": 1, "score": -3, "last_activity_date": 1515703782, "creation_date": 1515699388, "last_edit_date": 1515701673, "question_id": 48214617, "link": "https://stackoverflow.com/questions/48214617/perl-update-array", "title": "Perl Update array", "body": "<p>I am getting data back from a database query but I need to update an array.</p>\n\n<pre><code>sub get_query_data{\n   my ($self, $user_id) = @_;\n\n   my $sql_query = \"Select * from table\";\n   my ( $returndata ) = $self-&gt;_exec_and_fetch_all( $sql );\n\n   for ( @$returndata ) {\n       push( @$_, 'replace me' );\n   }\n\n   return $returndata;\n}\n</code></pre>\n\n<p>How do I replace the third element when I am looping through the data?\nThere is data coming back from the query but he above is not working.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1515748880, "post_id": 48213939, "comment_id": 83427458, "body": "I would normally recommend using <code>glob</code> instead of <code>readdir</code> as it returns the full path to the file and lets you do shellglob matching, rather than regex with <code>grep</code>. Which in <i>many</i> cases is sufficient."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1515696872, "creation_date": 1515696872, "answer_id": 48214046, "question_id": 48213939, "link": "https://stackoverflow.com/questions/48213939/perl-cannot-stat/48214046#48214046", "title": "Perl cannot stat $_", "body": "<p><code>readdir</code> only returns the name of the file in the directory. You need to provide a qualified path to the file to <code>stat</code>.</p>\n\n<pre><code>my $dir_qfn = ...;\nopendir(my $dh, $dir_qfn)\n    or do {\n        warn(\"Can't read dir \\\"$dir_qfn\\\": $!\\n\");\n        next;\n    };\n\nwhile (defined( my $fn = readdir($dh) )) {\n   next if $fn =~ /^\\.\\.?\\z/;\n\n   my $qfn = \"$dir_qfn/$fn\";\n   my $mtime = ( stat($qfn) )[9];\n   defined($mtime)\n       or do {\n           warn(\"Can't stat file \\\"$file_qfn\\\": $!\\n\");\n           next;\n       };\n\n   ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 4829167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564d1aaa4fed98eb9b314081a034e616?s=128&d=identicon&r=PG&f=1", "display_name": "fexlneb", "link": "https://stackoverflow.com/users/4829167/fexlneb"}, "edited": false, "score": 0, "creation_date": 1515703143, "post_id": 48214149, "comment_id": 83412732, "body": "so my $_ is in this format: \\\\client\\Z\\folder\\folder2\\file.txt  I successfully built the full path to then do the stat command on the variable. I still get the &quot;use of initialized value on $epoch_timestamp&quot;."}, {"owner": {"reputation": 27, "user_id": 4829167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564d1aaa4fed98eb9b314081a034e616?s=128&d=identicon&r=PG&f=1", "display_name": "fexlneb", "link": "https://stackoverflow.com/users/4829167/fexlneb"}, "edited": false, "score": 0, "creation_date": 1515758648, "post_id": 48214149, "comment_id": 83433437, "body": "Ok got it to work. For some reason this works: my $f=stat($filepath)-&gt;mtime; but this does not work: my $epoch_timestamp = ( stat( $_ ) )[9];"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1515698469, "last_edit_date": 1515698469, "creation_date": 1515697314, "answer_id": 48214149, "question_id": 48213939, "link": "https://stackoverflow.com/questions/48213939/perl-cannot-stat/48214149#48214149", "title": "Perl cannot stat $_", "body": "<p><code>readdir</code> returns only the names of the files. If your current working directory is different then you must build the full path as you did with the parameter to <code>opendir</code>. The easiest way is to use <code>map</code> in the list for the <code>for</code> loop</p>\n\n<p>I'm concerned about your statement</p>\n\n<pre><code>opendir( D, $path . '\\/' . $_ ) or die \"$!\";\n</code></pre>\n\n<p>which will put, literally, <code>\\/</code> between <code>$path</code> and <code>$_</code>. I think you need just <code>/</code>, but it is simplest to <em>interpolate</em> the variables with</p>\n\n<pre><code>opendir( D, \"$path/$_\" ) or die \"$!\";\n</code></pre>\n\n<p>But <code>$_</code> comes from the array <code>@Files</code>. If these are indeed file names then your <code>opendir</code> will fail. They need to be directory names</p>\n\n<p>In my solution I've built the variable <code>$dir</code> as</p>\n\n<pre><code>my $dir = \"$path/$_\"\n</code></pre>\n\n<p>so that it can be used in the call to <code>opendir</code> as well as to build the full path to the files in the following <code>for</code> loop</p>\n\n<p>Note that I have also used a lexical directory handle <code>my $dh</code>, which are far superior to global handles <code>D</code></p>\n\n<pre><code>for ( @Files ) {\n\n    my $dir = \"$path/$_\";\n\n    opendir my $dh, $dir or die $!;\n    my @textfiles = grep { ! /^\\.{1,2}$/ } readdir $dh;\n\n    for ( map { \"$dir/$_\" } @textfiles ) {\n\n        #    print \"$_\\n\";   &lt;----the file names.\n        my $epoch_timestamp = ( stat( $_ ) )[9];\n\n        print \"$epoch_timestamp\\n\";\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1515710606, "post_id": 48214856, "comment_id": 83415951, "body": "@ikegami Ah, right, you told me that already! Will adjust. Thank you, and for edits.  I &quot;in-lined&quot; filtering to not  pass over the list twice but that&#39;s non-sense as this is so much cleaner and probably not slower at all (with an <code>if</code> branch in that souped up <code>map</code>), except for extremely long lists."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1515724791, "post_id": 48214856, "comment_id": 83419454, "body": "This is IO-driven. The extra sub calls (which are actually lighter-than-normal &quot;multi-calls&quot;) that are incurred from using <code>grep</code>+<code>map</code> instead of just <code>map</code> are not gonna make a difference, and well worth the extra readability (especially in a SO answer)."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 0, "last_activity_date": 1516428593, "last_edit_date": 1516428593, "creation_date": 1515700361, "answer_id": 48214856, "question_id": 48213939, "link": "https://stackoverflow.com/questions/48213939/perl-cannot-stat/48214856#48214856", "title": "Perl cannot stat $_", "body": "<p>Using <code>glob</code> instead</p>\n\n<pre><code>my $dir = ...;\n\nmy %ts =\n    map { $_ =&gt; (stat $_)[9] }\n        grep { !m{/\\.\\.?\\z} }    #/\n            glob \"\\Q$dir\\E/{*,.*}\";\n\nsay \"ts{$_} =&gt; $_\" for sort keys %ts;\n</code></pre>\n\n<p>I use a hash <em>name => timestamp</em> to collect both in a data structure.  The pattern <code>$dir/{*,.*}</code> is there to catch dot files as well, or it would be just <code>$dir/*</code>. </p>\n\n<p>The <code>grep</code> filters out <code>.</code> and <code>..</code> filenames, found in path by <code>m{..}</code> match. Its pattern needs <code>\\Q..\\E</code> to prevent an injection bug with particular directory names.  It also escapes spaces so <code>File::Glob</code> with its <code>:bsd_glob</code>option isn't needed. Thanks to <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a> for comments.</p>\n\n<p>If you'd rather process files one at a time, retrieve the list with <code>glob</code> and then iterate through it.    </p>\n"}, {"tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 1, "last_activity_date": 1515701884, "last_edit_date": 1515701884, "creation_date": 1515700912, "answer_id": 48214953, "question_id": 48213939, "link": "https://stackoverflow.com/questions/48213939/perl-cannot-stat/48214953#48214953", "title": "Perl cannot stat $_", "body": "<p>Or alternatively to above perfect answers, you could use some modules and make your life more easy. :) Like: <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a><sup>[1]</sup></p>\n\n<pre><code>use 5.014;\nuse warnings;\n\nuse Path::Tiny;\n\nmy $path = path('/etc');\nmy @Files = qw(defaults cups ssl);\n\nfor my $dir (@Files) {\n    my @textfiles = $path-&gt;child($dir)-&gt;children;\n    for my $file (@textfiles) {\n        say \"$file: \", $file-&gt;stat-&gt;mtime;\n    }\n}\n</code></pre>\n\n<p>Of course, the above the nested loop could be written as</p>\n\n<pre><code>for my $dir (@Files) {\n    my @textfiles = $path-&gt;child($dir)-&gt;children;\n    say \"$_: \", $_-&gt;stat-&gt;mtime for (@textfiles);\n}\n</code></pre>\n\n<p>and also storing the list of files into <code>@textfiles</code> isn't necessary, so it could be reduced to:</p>\n\n<pre><code>for my $dir (@Files) {\n    say \"$_: \", $_-&gt;stat-&gt;mtime for ( $path-&gt;child($dir)-&gt;children );\n}\n</code></pre>\n\n<hr>\n\n<ol>\n<li>Path::Tiny conveniently throws a clean exception message on error.</li>\n</ol>\n"}], "owner": {"reputation": 27, "user_id": 4829167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564d1aaa4fed98eb9b314081a034e616?s=128&d=identicon&r=PG&f=1", "display_name": "fexlneb", "link": "https://stackoverflow.com/users/4829167/fexlneb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 48214149, "answer_count": 4, "score": 1, "last_activity_date": 1516428593, "creation_date": 1515696340, "last_edit_date": 1515696790, "question_id": 48213939, "link": "https://stackoverflow.com/questions/48213939/perl-cannot-stat", "title": "Perl cannot stat $_", "body": "<p>I want the last modified time for each file in the directory. To make sure my loop is working I print $_ and I see the file names of the directory:</p>\n\n<pre><code>for ( @Files ) {\n\n    opendir( D, $path . '\\/' . $_ ) or die \"$!\";\n    my @textfiles = grep { ! /^\\.{1,2}$/ } readdir( D );\n\n    for ( @textfiles ) {\n\n        #    print \"$_\\n\";   &lt;----the file names.\n        my $epoch_timestamp = ( stat( $_ ) )[9];\n        print \"$epoch_timestamp\\n\";\n    }\n</code></pre>\n\n<p>I get this error</p>\n\n<blockquote>\n  <p>Use of uninitialized value $epoch_timestamp in concatenation (.) or string</p>\n</blockquote>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515702102, "post_id": 48213281, "comment_id": 83412262, "body": "Note that the taint flag <code>-T</code> is useless on the shebang line."}, {"owner": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515772595, "post_id": 48213281, "comment_id": 83441573, "body": "@Borodin I verified the taint flag on my system using ${^TAINT} and conducted a test. It works and produces the desired effect. Is &quot;useless&quot; a portability thing?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515776412, "post_id": 48213281, "comment_id": 83443816, "body": "By the time perl reads the shebang line, it is too late in the compilation process to apply tainting. This is a fatal error unless <code>-T</code> is also applied to the command line, in which case its appearance on the shebang line is irrelevant. I suppose you could say that it has some use because it prevents the code from being run without taint mode enabled, but it cannot enable the mode on its own"}], "answers": [{"comments": [{"owner": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "edited": false, "score": 0, "creation_date": 1515697930, "post_id": 48213863, "comment_id": 83410201, "body": "As soon as I realized what was happening, I implemented the +0 solution. Thanks!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1515696536, "last_edit_date": 1515696536, "creation_date": 1515696025, "answer_id": 48213863, "question_id": 48213281, "link": "https://stackoverflow.com/questions/48213281/string-and-number-produce-different-results/48213863#48213863", "title": "String and number produce different results", "body": "<p><code>is_usfed_holiday</code> uses <code>join($;, @_)</code> as the key to a hash. It therefore uses the stringification rather than the numification of its arguments.</p>\n\n<p>Solutions:</p>\n\n<pre><code>is_usfed_holiday(0+$y, 0+$m, 0+$d)\n\nis_usfed_holiday(map 0+$_, $y,$m,$d)\n</code></pre>\n\n<hr>\n\n<p>Someone should contact the author to raise the following issues:</p>\n\n<ul>\n<li><code>is_usfed_holiday</code> should normalize its inputs to avoid the problem you encountered.</li>\n<li>The module shouldn't rely on the existing value of <code>$;</code>.</li>\n</ul>\n\n<p>Also, some might find of a variant of <code>is_usfed_holiday</code> that takes the result of <code>localtime</code> (e.g. <code>is_usfed_holiday_time(localtime)</code>) useful.</p>\n"}], "owner": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 48213863, "answer_count": 1, "score": 1, "last_activity_date": 1515701965, "creation_date": 1515693727, "last_edit_date": 1515701965, "question_id": 48213281, "link": "https://stackoverflow.com/questions/48213281/string-and-number-produce-different-results", "title": "String and number produce different results", "body": "<pre><code>#!/usr/bin/perl -T\n\nuse strict;\nuse warnings;\n\nuse Date::Holidays::USFederal;\n\nif ( is_usfed_holiday( '2018', '01', '01' ) ) {    # strings\n    print \"holiday\\n\";\n}\nelse {\n    print \"not holiday\\n\";\n}\n\nif ( is_usfed_holiday( 2018, 1, 1 ) ) {            # numbers\n    print \"holiday\\n\";\n}\nelse {\n    print \"not holiday\\n\";\n}\n\nexit;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>not holiday\nholiday\n</code></pre>\n\n<p>I thought Perl was a context-based language and that strings were automatically used as numbers when needed. This cost me a little debugging time today. I'm no expert, but this confuses me.</p>\n\n<p>Can anyone explain why this is?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1515692159, "post_id": 48212790, "comment_id": 83407135, "body": "How can that regex distinguish <code>end detailX</code>; from <code>end John;</code> ?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1515692339, "post_id": 48212790, "comment_id": 83407227, "body": "What is unique in a record ... <code>&#47;&#47;Details of</code> perhaps? Having so many <code>end</code> words will make parsing the file as a whole picky. It&#39;d be nice if you can separate records first."}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1515692384, "post_id": 48212790, "comment_id": 83407252, "body": "Would <a href=\"https://regex101.com/r/ZDbQPj/2\" rel=\"nofollow noreferrer\"><code>^user\\h+\\KJohn\\b|^end\\h+(?:user\\h+)?(?:John\\b)?</code></a> work for you?"}, {"owner": {"reputation": 111, "user_id": 6538494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d645a82a300c6b4c98e0eaeaff2bd8c0?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/6538494/anil"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1515692445, "post_id": 48212790, "comment_id": 83407287, "body": "@zdim That is what I felt. But since I have $ARGV[2] at the end in $match it copies everything till John(at the end). I know it may not be correct. Please suggest changes that can work in all cases.Thanks"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1515692636, "post_id": 48212790, "comment_id": 83407407, "body": "I am looking at it, and my first comment meant to say that I don&#39;t think you can do that easily when the name is absent.  But my second comment conveys that more information would be needed -- is there something unique in a record? An empty line? Un-indented lines? That <code>&#47;&#47;Detail...</code> line?"}, {"owner": {"reputation": 111, "user_id": 6538494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d645a82a300c6b4c98e0eaeaff2bd8c0?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/6538494/anil"}, "reply_to_user": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1515692666, "post_id": 48212790, "comment_id": 83407426, "body": "@ctwheels I thinsk I will not be able to write it in perl script as  - ^user\\h+\\K$ARGV[2]\\b|^end\\h+(?:user\\h+)?(?:$ARGV[2]\\b)? in positive lookahead"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1515693304, "post_id": 48212790, "comment_id": 83407797, "body": "It&#39;s not part of your question, but this line is broken: <code>open OUTFILE, &quot;&gt;$ARGV[0]&quot; || die &quot;Failed to create $ARGV[0]\\n&quot;;</code> - you need to use brackets, or <code>or</code> instead of <code>||</code>, because of precedence. Also - why not write two separate regex?"}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1515693472, "post_id": 48212790, "comment_id": 83407893, "body": "@BigA there aren&#39;t any positive lookaheads in my pattern. Just give it a try and let me know it if works for you."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515693727, "post_id": 48212790, "comment_id": 83408017, "body": "What file format is this?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1515694152, "post_id": 48212790, "comment_id": 83408215, "body": "Without a name for end: (1) With <code>user NAME</code> start, you can&#39;t easily distinguish <code>end detail</code> and <code>end user</code> and <code>end;</code> for the record end.  You can, though, go line by line and when you see <code>user NAME</code> again then back up, since then you know that a record just finished. That&#39;s messy though. It will be much easier if <i>there is something unique in a record</i>."}, {"owner": {"reputation": 111, "user_id": 6538494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d645a82a300c6b4c98e0eaeaff2bd8c0?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/6538494/anil"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1515696041, "post_id": 48212790, "comment_id": 83409287, "body": "@zdim The only uniqueness I can think of is that John which I have to update can only precede with \\,&lt;space&gt; &amp; can be followed by \\,&lt;space&gt; or ; .If \\ appears before and after John it should have &lt;space&gt; before and after \\. Will setting regex as (\\s[\\&#93;*)$ARGV[2]([\\\\;]*\\s) work?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1515748206, "post_id": 48212790, "comment_id": 83427044, "body": "Why are you doing this? It looks like someone wanted a database, but decided to invent their own file format instead. If you have a particular reason for not storing this data in a database, then please consider using an industry-standard file format like JSON, YAML or XML."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1516428302, "post_id": 48212790, "comment_id": 83692907, "body": "A reminder in case this fell through the cracks, see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 6538494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d645a82a300c6b4c98e0eaeaff2bd8c0?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/6538494/anil"}, "edited": false, "score": 0, "creation_date": 1515696247, "post_id": 48213344, "comment_id": 83409407, "body": "In the end stanza there are 3 possible format rules as explained in 2.1,2.2,2.3. Will it work for all the 3 cases?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 111, "user_id": 6538494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d645a82a300c6b4c98e0eaeaff2bd8c0?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/6538494/anil"}, "edited": false, "score": 0, "creation_date": 1515747843, "post_id": 48213344, "comment_id": 83426849, "body": "If it doesn&#39;t, extend the pattern slightly - write them as separate rules, and you&#39;re good."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1515693922, "creation_date": 1515693922, "answer_id": 48213344, "question_id": 48212790, "link": "https://stackoverflow.com/questions/48212790/perl-script-to-update-contents-of-file-with-records/48213344#48213344", "title": "Perl script to update contents of file with records", "body": "<p>I think you're making a mistake here, in that you're looking for a single magic regex. </p>\n\n<p>Instead, you should be breaking your problem down because it's both clearer and easier to write:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy ( $input_filename, $newname, $oldname ) = @ARGV;\nopen ( my $input, '&lt;', $input_filename ) or die $!;\n\n\nwhile ( &lt;$input&gt; ) { \n\n   #match start of user stanza\n   if ( /^User $oldname is/i ) {\n      #replace text\n      s/\\Q$oldname\\E/$newname/i;\n   }\n   #match end of user stanza\n   if ( /^end user $oldname/i )  {\n         s/\\Q$oldname\\E/$newname/i;\n   }\n   print;\n}\n</code></pre>\n\n<p>And that's it. </p>\n"}], "owner": {"reputation": 111, "user_id": 6538494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d645a82a300c6b4c98e0eaeaff2bd8c0?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/6538494/anil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1528013825, "creation_date": 1515691735, "last_edit_date": 1515736363, "question_id": 48212790, "link": "https://stackoverflow.com/questions/48212790/perl-script-to-update-contents-of-file-with-records", "title": "Perl script to update contents of file with records", "body": "<p>I have a file containing some details of a user. I have written a perl script to update the contents of this file ,only updating the user name.\nBelow is the format of content of the file - </p>\n\n<pre><code>//Details of John\nUser John is\n  details1:(group = \"abc\")\n  end detail1;\n  detail2:(team = \"pqr\")\n  end detail2;\n  other_detail1:(someOtherDetail = John_123)\n  end other_detail1;\nend user John;\n</code></pre>\n\n<p>The format rules allows following - <br>\n1)The Content can be in Upper case (eg. USER John ......END USER John;)<br>\n2)The last line can be written as - <br>\n&nbsp;2.1)end ; (number of spaces after end does not matter)<br>\n&nbsp;2.2)end user John; <br>\n&nbsp;2.3)end John; <br>\n&nbsp;3)User name(John) can be written with escape characters like \\John.In such case new file will also contain user name with escape sequence.<br><br>\nNow I want only \"John\" to change at lines - \"User John is\" &amp; \"end user John\"(if john is present.In case 2.1 John is not present) &amp; rest details remain same in updated file.</p>\n\n<p>Following is my perl script - </p>\n\n<pre><code>#!/usr/bin/perl -w\nBEGIN {undef $/;}\n\nmy $match;\n\nmy $filename = $ARGV[0];\n\nopen (INFILE, \"&lt;\", $filename)  or  die \"Failed to read file $filename : $! \\n\";\n\n$string =  &lt;INFILE&gt;;\nclose INFILE;\n\n$match = \"(?&lt;=user )(.*?)$ARGV[2](.*?)(?&lt;=end )(.*?)$ARGV[2]\";\n$string =~ s/$match/$1$ARGV[1]$2$3$ARGV[1]/gis;\n\nopen OUTFILE, \"&gt;$ARGV[0]\" || die \"Failed to create $ARGV[0]\\n\";\nprint OUTFILE ($string);\nclose OUTFILE;\n</code></pre>\n\n<p>The input to this script is in form - \nmyscript filepath new_name old_name</p>\n\n<p>This works for every rule explained above except 2.1 .Please suggest a way so that $match can work for rule 2.1.\n<br>Also I want to know if in any case end of detail(s) will affect \"end user...;\" since I am using end in $match.</p>\n"}, {"tags": ["perl", "mojolicious"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1515690178, "post_id": 48212137, "comment_id": 83406007, "body": "Welcome to Stack Overflow and the Perl tag. You seem to have forgotten to ask a question."}, {"owner": {"reputation": 13, "user_id": 9204876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b18a62b1d15d8f821e53cd180d4ccdd?s=128&d=identicon&r=PG&f=1", "display_name": "dae", "link": "https://stackoverflow.com/users/9204876/dae"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1520768908, "post_id": 48212137, "comment_id": 85442879, "body": "sorry, i just dont understand something the Mojo::IOloop give."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9204876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b18a62b1d15d8f821e53cd180d4ccdd?s=128&d=identicon&r=PG&f=1", "display_name": "dae", "link": "https://stackoverflow.com/users/9204876/dae"}, "edited": false, "score": 0, "creation_date": 1520768611, "post_id": 48732382, "comment_id": 85442804, "body": "thanks Tim! I edit my code3.pl according to your answer! but the error &quot;Subprocesses do not support fork emulation at ...&quot; still exsist( using strawberry perl 5.26, WinXP). I find some info about &quot;d_pseudofork&quot; in google, the code below gives details:  use Config qw(myconfig config_sh config_vars config_re); #print myconfig(); print config_sh();  Output is:  d_printf_format_null=&#39;undef&#39; d_procselfexe=&#39;undef&#39; d_pseudofork=&#39;define&#39; d_pthread_atfork=&#39;undef&#39; d_pthread_attr_setscope=&#39;undef&#39; d_pthread_yield=&#39;undef&#39; d_ptrdiff_t=&#39;define&#39;  seems that the &quot;&quot;d_pseudofork&quot; option is ok?"}, {"owner": {"reputation": 13, "user_id": 9204876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b18a62b1d15d8f821e53cd180d4ccdd?s=128&d=identicon&r=PG&f=1", "display_name": "dae", "link": "https://stackoverflow.com/users/9204876/dae"}, "edited": false, "score": 0, "creation_date": 1520768842, "post_id": 48732382, "comment_id": 85442863, "body": "and another question: I want the &#39;finish&#39; event of $loop emit in my code to calculate how long time the task use, that seems not work :(, have idea about it?"}], "tags": [], "owner": {"reputation": 241, "user_id": 5249935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EryrM.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/5249935/tim"}, "is_accepted": true, "score": 1, "last_activity_date": 1518358171, "creation_date": 1518358171, "answer_id": 48732382, "question_id": 48212137, "link": "https://stackoverflow.com/questions/48212137/understanding-mojoioloop-recurring-and-subprocess/48732382#48732382", "title": "understanding Mojo::IOLoop recurring and subprocess", "body": "<p>First of all, <code>Mojo::IOLoop::Subprocess</code> is used incorrectly in your third example. The <a href=\"http://mojolicious.org/perldoc/Mojo/IOLoop#subprocess\" rel=\"nofollow noreferrer\">documentation</a> states that <code>run</code> method needs to be given 2 subroutines, first is one that will be executed in \"background\" and should return resulting values, if any, which will be processed by a second subroutine. In your case you should create new subprocess object for each element in <code>@files</code>.</p>\n\n<p>Relatively the error <code>code3.pl</code> returns, it looks like <code>Mojo::IOLoop</code> or at least your version don't work on Perl compiled with <code>d_pseudofork</code> flag. Consider using <a href=\"http://strawberryperl.com/\" rel=\"nofollow noreferrer\">Strawberry Perl</a> on WinXP as it is open source distribution and better optimized for Windows.</p>\n"}], "owner": {"reputation": 13, "user_id": 9204876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b18a62b1d15d8f821e53cd180d4ccdd?s=128&d=identicon&r=PG&f=1", "display_name": "dae", "link": "https://stackoverflow.com/users/9204876/dae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 590, "favorite_count": 0, "accepted_answer_id": 48732382, "answer_count": 1, "score": 0, "last_activity_date": 1518358171, "creation_date": 1515689397, "question_id": 48212137, "link": "https://stackoverflow.com/questions/48212137/understanding-mojoioloop-recurring-and-subprocess", "title": "understanding Mojo::IOLoop recurring and subprocess", "body": "<p>I have some JPG files in './photo ' directory, I use Image::Thumbnail and GD to create thumbnails of them.</p>\n\n<p>code1.pl:</p>\n\n<pre><code>use Image::Thumbnail;\nmy $dir = './photos' ;\nopendir(DIR, $dir) or die \"Can not open dir\\n\";\nmy @files = grep { /\\.JPG/ &amp;&amp; -f \"$dir/$_\" ; } readdir( DIR );\nclosedir DIR;\n\nmy $t1 = time;\nfor my $f (@files){\n    print $f, \"\\n\";\n    my $t = new Image::Thumbnail(\n        module     =&gt; 'GD',\n        size       =&gt; 200,\n        create     =&gt; 1,\n        input      =&gt; $dir . '/' . $f,\n        outputpath =&gt; $dir . '/' . 'thumb_' . $f,\n    );\n}\n\nprint \"Time used: \", time-$t1, \"\\n\";\n</code></pre>\n\n<p>I test 9 photos with each size about 4M\uff0cthe code1.pl running 9~10s in total.</p>\n\n<p>code2.pl:\n(use Mojo::IOLoop\uff0cin fact I want to process photos uploaded by client in mojo web app )</p>\n\n<pre><code>use Image::Thumbnail;\nuse Mojo::Base -strict;\nuse Mojo::IOLoop;\n\nmy $dir = './photos' ;\nopendir(DIR, $dir) or die \"Can not open dir\\n\";\nmy @files = grep { /\\.JPG/ &amp;&amp; -f \"$dir/$_\" ; } readdir( DIR );\nclosedir DIR;\n\nmy $t1 = time;\n\nmy $loop = Mojo::IOLoop-&gt;singleton;\n$loop-&gt;recurring( \n    0 =&gt; sub {\n        $loop-&gt;stop and return unless my $f = shift @files;\n        print $f, \"\\n\";\n        my $t = new Image::Thumbnail(\n            module     =&gt; 'GD',\n            size       =&gt; 200,\n            create     =&gt; 1,\n            input      =&gt; $dir . '/' . $f,\n            outputpath =&gt; $dir . '/' . 'thumb_' . $f,\n        );\n    } \n);\n\n$loop-&gt;on(finish =&gt; sub {\n  print \"Time used: \", time-$t1, \"\\n\";\n});\n\n$loop-&gt;start;\n</code></pre>\n\n<p>This code2.pl can run correctly, but the time consumed seems unchanged.</p>\n\n<p>code3.pl:\n(I change recurring to subprocess)</p>\n\n<pre><code>use Image::Thumbnail;\nuse Mojo::Base -strict;\nuse Mojo::IOLoop;\n\nmy $dir = './photos' ;\nopendir(DIR, $dir) or die \"Can not open dir\\n\";\nmy @files = grep { /\\.JPG/ &amp;&amp; -f \"$dir/$_\" ; } readdir( DIR );\nclosedir DIR;\n\nmy $t1 = time;\n\nmy $loop = Mojo::IOLoop-&gt;singleton;\n$loop-&gt;subprocess( \n    map{\n        sub {\n            #$loop-&gt;stop and return unless my $f = shift @files;\n            my $f = $_ ;\n            my $t = new Image::Thumbnail(\n                module     =&gt; 'GD',\n                size       =&gt; 200,\n                create     =&gt; 1,\n                input      =&gt; $dir . '/' . $f,\n                outputpath =&gt; $dir . '/t_' . $f,\n            );\n            print $f, \"\\n\";\n        }\n    } @files\n);\n\n$loop-&gt;on(finish =&gt; sub {\n  print \"Time used: \", time-$t1, \"\\n\";\n});\n\n$loop-&gt;start;\n</code></pre>\n\n<p>the code3.pl raise error:</p>\n\n<pre><code>Subprocesses do not support fork emulation at C:/Perl/site/lib/Mojo/IOLoop.pm line 152.\nshell returned 255\n</code></pre>\n\n<p>I use activeperl on winXP, (v5.20.2), look forward for your help.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1515689138, "post_id": 48212031, "comment_id": 83405334, "body": "Hash values are scalars, so you need <code>$currentBook</code> instead of <code>%currentBook</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1515689645, "post_id": 48212031, "comment_id": 83405658, "body": "@Matt Jacob, Re &quot;<i>Hash values are scalars, so [...]</i>&quot;, Not a good thing to teach! <code>*g</code> is a scalar. <code>@a[@i]</code> isn&#39;t an array. <code>%h{@k}</code> isn&#39;t a hash."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 7, "last_activity_date": 1515747976, "last_edit_date": 1515747976, "creation_date": 1515690009, "answer_id": 48212308, "question_id": 48212031, "link": "https://stackoverflow.com/questions/48212031/cant-modify-key-value-hash-slice-in-list-assignment-at-metro-pl-line-31-near/48212308#48212308", "title": "Can&#39;t modify key/value hash slice in list assignment at .\\metro.pl line 31, near &quot;$year;&quot;", "body": "<p>You've already got the answer <a href=\"https://stackoverflow.com/questions/48212031/cant-modify-key-value-hash-slice-in-list-assignment-at-metro-pl-line-31-near#comment83405306_48212031\">in a comment by toolic</a>, but I will elaborate why this happens.</p>\n\n<pre><code>my %books = ( year =&gt; 2017 );\n%books{year} = 2018;\n</code></pre>\n\n<p>This code will throw the error you saw.</p>\n\n<blockquote>\n  <p>Can't modify key/value hash slice in list assignment at\n  /home/simbabque/code/scratch.pl line 6313, near \"2018;\"<br>\n  Execution of /home/simbabque/code/scratch.pl aborted due to compilation errors.</p>\n</blockquote>\n\n<p>To make your program do what you intended, you need to use the <code>$</code> <a href=\"https://en.wikipedia.org/wiki/Sigil_(computer_programming)\" rel=\"noreferrer\"><em>sigil</em></a>, not the <code>%</code> <em>sigil</em>, because the value inside <code>$books{year}</code> is a scalar.</p>\n\n<p>But why the error message?</p>\n\n<p>Actually, <code>%books{year}</code> is a totally valid Perl expression.</p>\n\n<pre><code>use Data::Dumper;\n\nmy %books = ( year =&gt; 2017 );\nprint Dumper %books{year};\n</code></pre>\n\n<p>This will print</p>\n\n<pre><code>$VAR1 = 'year';\n$VAR2 = 2017;\n</code></pre>\n\n<p>The construct <code>%book{year}</code> is a so-called <em>hash slice</em>, and it returns a list of key/value pairs. You can also put in a list of keys, and get a list of both the keys and their values out. This is useful to quickly construct a sub hash.</p>\n\n<pre><code>my %timestamp = ( year =&gt; 2017, month =&gt; 12, day =&gt; 31, hour =&gt; 23, minute =&gt; 59 );\nmy %date = %timestamp{ 'year', 'month', 'day' };\n\nprint Dumper \\%date;\n</code></pre>\n\n<p>The output of that is</p>\n\n<pre><code>$VAR1 = {\n          'day' =&gt; 31,\n          'month' =&gt; 12,\n          'year' =&gt; 2017\n        };\n</code></pre>\n\n<p>However, this kind of behavior does not allow you to assign to <code>%books{year}</code>. It simply does not make sense, because it returns a list of key/value pairs. That's why this construct is not what we call an <a href=\"https://perldoc.perl.org/perlglossary.html#lvalue\" rel=\"noreferrer\"><em>lvalue</em></a> in Perl, so it cannot be <a href=\"https://en.wikipedia.org/wiki/Sides_of_an_equation\" rel=\"noreferrer\">on the left hand side of an assignment</a>.</p>\n"}], "owner": {"reputation": 55, "user_id": 8264427, "user_type": "registered", "profile_image": "https://graph.facebook.com/1401538693247479/picture?type=large", "display_name": "\u041f\u0430\u0432\u0435\u043b \u041c\u0438\u0445\u0430\u043b\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/8264427/%d0%9f%d0%b0%d0%b2%d0%b5%d0%bb-%d0%9c%d0%b8%d1%85%d0%b0%d0%bb%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2461, "favorite_count": 0, "accepted_answer_id": 48212308, "answer_count": 1, "score": 5, "last_activity_date": 1515747976, "creation_date": 1515689034, "question_id": 48212031, "link": "https://stackoverflow.com/questions/48212031/cant-modify-key-value-hash-slice-in-list-assignment-at-metro-pl-line-31-near", "title": "Can&#39;t modify key/value hash slice in list assignment at .\\metro.pl line 31, near &quot;$year;&quot;", "body": "<p>I'm new in Perl. I can not understand why I can not assign year to the hash field in string <pre>   <code>%currentBook{year}=$year;</code> </pre>\nFull code here.\n</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Scalar::Util qw(looks_like_number);\nuse Time::localtime; \n\nmy $maxYear = Time::localtime-&gt;year+1;\nmy $year = $maxYear;\nmy %currentBook = (name=&gt;\"firstCurrentBook\",\n    author=&gt;\"NO\",\n    place=&gt;\"NO\",\n    year=&gt;0);\nmy %maxBook = %currentBook;\nmy %minBook = %currentBook;\nprint \"Choose action\\n1 - Input book\\n2 - Print min max year\\n3 = exit\\n-&gt;\";\nmy $cond = &lt;STDIN&gt;;\nwhile ($cond  != 3)\n{\n    if ($cond == 1){\n        print \"\\nInput book name: \";\n        $currentBook{name} = &lt;STDIN&gt;;\n        print \"\\nInput author surname and initials: \";\n        $currentBook{author} = &lt;STDIN&gt;;\n        print \"\\nInput place: \";\n        $currentBook{place} = &lt;STDIN&gt;;    \n        do{\n            print \"\\nInput year of book: \";\n            $year = &lt;STDIN&gt;;\n            chomp $year;\n        } while  (!looks_like_number($year) || $year &lt; 0 || $year &gt; Time::localtime-&gt;year);\n        %currentBook{year}=$year;\n        if (%currentBook{year} &gt; %maxBook{year}){\n            %maxBook=%currentBook;\n        }\n        if (%currentBook{year} &lt; %minBook{year}){\n            %minBook=%currentBook;\n        }\n    }\n}\n</code></pre>\n\n<p></p>\n"}, {"tags": ["perl", "email", "base64", "email-headers"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1515681156, "post_id": 48209031, "comment_id": 83399799, "body": "&quot;It comes out fine&quot;, &quot;I get the expected output&quot;. You don&#39;t seem to have explained what the problem is."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1515681448, "post_id": 48209031, "comment_id": 83400032, "body": "@DaveCross - I&#39;ve added a couple of screenshots to try and explain better :)"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1515682175, "post_id": 48209031, "comment_id": 83400588, "body": "Email::MIME obviously does not expect the encoded subject since it encodes it again. It is unclear how you set the header but <code>header_str_set</code> and in most cases <code>header</code> expects the unicode string and not the encoded string. See documentation."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1515682313, "post_id": 48209031, "comment_id": 83400666, "body": "@SteffenUllrich - aahhhh thats the job! Changing the encoding to base64 in the &quot;main&quot; object did it: <code>attributes =&gt; { encoding =&gt; &#39;base64&#39;, charset  =&gt; &quot;UTF-8&quot;, content_type =&gt; &quot;multipart&#47;alternative&quot;, disposition  =&gt; &quot;inline&quot; }</code>. Could you give an answer so I can accept? :)"}], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 5, "last_activity_date": 1515682880, "creation_date": 1515682880, "answer_id": 48210022, "question_id": 48209031, "link": "https://stackoverflow.com/questions/48209031/base64-email-subject-not-decoding-correctly/48210022#48210022", "title": "Base64 email subject not decoding correctly", "body": "<p>You are using <code>Email::MIME</code> with <code>header_str</code> and then you try to give the encoded subject, i.e. something like this:</p>\n\n<pre><code>my $mail = Email::MIME-&gt;create(\n    header_str =&gt; [\n        Subject =&gt; '=?UTF-8?B?w4PChHJnZXJsaWNoZSBHcsODwrzDg8KfZQ==?='\n    ]\n);\n</code></pre>\n\n<p>As <a href=\"https://metacpan.org/pod/Email::MIME#create\" rel=\"noreferrer\">documented</a> <code>header_str</code> expects the unencoded (i.e. unicode) string and will encode the string itself. This results in the double encoding you see. To cite from the documentation:</p>\n\n<blockquote>\n  <p>The <code>header_str</code> parameter is a list of headers pairs to include in the message. The value for each pair is expected to be a text string <strong>that will be MIME-encoded as needed</strong>.</p>\n</blockquote>\n\n<p>Correct use would instead provide the unencoded string like this:</p>\n\n<pre><code>my $mail = Email::MIME-&gt;create(\n    header_str =&gt; [\n        Subject =&gt; '\u00c4rgerliche Gr\u00fc\u00dfe'\n    ]\n);\n</code></pre>\n\n<p>Alternatively you could provide the encoded string by using <code>header</code>:</p>\n\n<pre><code>my $mail = Email::MIME-&gt;create(\n    header =&gt; [\n        Subject =&gt; '=?UTF-8?B?w4PChHJnZXJsaWNoZSBHcsODwrzDg8KfZQ==?='\n    ]\n);\n</code></pre>\n\n<p>To cite the documentation:</p>\n\n<blockquote>\n  <p>A similar <code>header</code> parameter can be provided in addition to or instead of <code>header_str</code>. <strong>Its values will be used verbatim</strong>.</p>\n</blockquote>\n"}], "owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1712, "favorite_count": 0, "accepted_answer_id": 48210022, "answer_count": 1, "score": 1, "last_activity_date": 1515682880, "creation_date": 1515679865, "last_edit_date": 1515682465, "question_id": 48209031, "link": "https://stackoverflow.com/questions/48209031/base64-email-subject-not-decoding-correctly", "title": "Base64 email subject not decoding correctly", "body": "<p>I'm trying to see why my <strong>base64</strong> email subject isn't decoding. I use this <em>Perl</em> code to create it:</p>\n\n<pre><code>use MIME::Base64;\nuse Encode;\n$subject = \"=?UTF-8?B?\" . encode_base64(encode(\"utf8\", $subject), \"\") . \"?=\";\n</code></pre>\n\n<p>Which gives me:</p>\n\n<pre><code>=?UTF-8?B?w63DsyBEZW1hbmRlIGRlIHJlc2VydmF0aW9uIGR1IHd3dy5jaGFtYnJlc2Rob3Rlcy5vcmcgLSBSZXNlcnZhdGlvbiByZXF1ZXN0IGZyb20gd3d3LmNoYW1icmVzZGhvdGVzLm9yZyBbI10=?=\n</code></pre>\n\n<p>If I copy and paste:</p>\n\n<pre><code>w63DsyBEZW1hbmRlIGRlIHJlc2VydmF0aW9uIGR1IHd3dy5jaGFtYnJlc2Rob3Rlcy5vcmcgLSBSZXNlcnZhdGlvbiByZXF1ZXN0IGZyb20gd3d3LmNoYW1icmVzZGhvdGVzLm9yZyBbI10=\n</code></pre>\n\n<p>...into this site to decode it:</p>\n\n<p><a href=\"http://www.webatic.com/run/convert/base64.php\" rel=\"nofollow noreferrer\">http://www.webatic.com/run/convert/base64.php</a></p>\n\n<p>..then it comes out fine!</p>\n\n<p>The full email header looks like:</p>\n\n<pre><code>Subject: =?UTF-8?B?w63DsyBEZW1hbmRlIGRlIHJlc2VydmF0aW9uIGR1IHd3dy5jaGFtYnJlc2Rob3Rlcy5vcmcgLSBSZXNlcnZhdGlvbiByZXF1ZXN0IGZyb20gd3d3LmNoYW1icmVzZGhvdGVzLm9yZyBbI10=?=\n</code></pre>\n\n<p>This is how it comes out in my email client:</p>\n\n<p><a href=\"https://i.stack.imgur.com/eTTOf.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eTTOf.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>...and this is how I see it when converting it via an online tool:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ieFEg.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ieFEg.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>UPDATE: This is actually how <strong>Email::MIME</strong> is creating the email:</p>\n\n<pre><code>From: \"Andy chambresdhotes.org\" &lt;test@foo.org&gt;\nTo: andynewby@bar.com\nSubject: =?UTF-8?B?PT9VVEYtOD9CP3c2M0RzeUJFWlcxaGJtUmxJR1JsSUhKbGMyVnlk?=\n =?UTF-8?B?bUYwYVc5dUlHUjFJSGQzZHk1amFHRnRZbkpsYzJSb2IzUmxjeTV2Y21jZ0xT?=\n =?UTF-8?B?QlNaWE5sY25aaGRHbHZiaUJ5WlhGMVpYTjBJR1p5YjIwZ2QzZDNMbU5vWVcx?=\n =?UTF-8?B?aWNtVnpaR2h2ZEdWekxtOXlaeUJiSTEwPT89?=\nDate: Thu, 11 Jan 2018 14:46:05 +0000\nMIME-Version: 1.0\nContent-Type: multipart/alternative; boundary=\"15156819650.22DF651.1990\"\nContent-Transfer-Encoding: 7bit\nContent-Disposition: inline\n</code></pre>\n\n<p>The full Perl code I used to make the header, is:</p>\n\n<pre><code>    my $email = Email::MIME-&gt;create(\n      header_str =&gt; [\n          From =&gt; $from,\n          To =&gt; [ $to ],\n          Subject =&gt; $subject,\n      ],\n      parts =&gt; \\@parts,\n      attributes =&gt; {\n            encoding =&gt; 'base64', # this was the trick\n            charset  =&gt; \"UTF-8\",\n            content_type =&gt; \"multipart/alternative\",\n            disposition  =&gt; \"inline\",\n        }\n  );\n</code></pre>\n"}, {"tags": ["perl", "win32gui"], "comments": [{"owner": {"reputation": 14587, "user_id": 5724303, "user_type": "registered", "profile_image": "https://graph.facebook.com/1100229700001875/picture?type=large", "display_name": "Kosh", "link": "https://stackoverflow.com/users/5724303/kosh"}, "edited": false, "score": 0, "creation_date": 1515717960, "post_id": 48205626, "comment_id": 83417998, "body": "Have you tried <code>+{35}</code> ?"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "reply_to_user": {"reputation": 14587, "user_id": 5724303, "user_type": "registered", "profile_image": "https://graph.facebook.com/1100229700001875/picture?type=large", "display_name": "Kosh", "link": "https://stackoverflow.com/users/5724303/kosh"}, "edited": false, "score": 0, "creation_date": 1515747687, "post_id": 48205626, "comment_id": 83426756, "body": "just tried, It behave the same than with +{END}, it seems to only take the {35} into consideration but thanks for your answer :)"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 10004640, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Pl6YGqCAd5I/AAAAAAAAAAI/AAAAAAAAAJI/L9WCXY0Xn-c/photo.jpg?sz=128", "display_name": "Andreas Kneissl", "link": "https://stackoverflow.com/users/10004640/andreas-kneissl"}, "is_accepted": false, "score": 1, "last_activity_date": 1530178280, "creation_date": 1530178280, "answer_id": 51079359, "question_id": 48205626, "link": "https://stackoverflow.com/questions/48205626/unable-to-send-shift-end-with-win32guitest/51079359#51079359", "title": "unable to send shift-end with Win32::GuiTest", "body": "<p>Late answer, anyway, maybe it is of help to somebody...</p>\n\n<p>Shift{foo} commands like Shift{End} need to be performed with low-level keybd_event via the SendRawKey wrapper. So this is what you are looking for:</p>\n\n<pre><code>    SendRawKey(VK_LSHIFT, KEYEVENTF_EXTENDEDKEY);\n    SendKeys('{END}');\n    SendRawKey(VK_RSHIFT, KEYEVENTF_KEYUP);\n    SendRawKey(VK_LSHIFT, KEYEVENTF_KEYUP);\n</code></pre>\n\n<p>Full sample (copies a complete line into the clipboard):</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Win32::Clipboard;\nuse Win32::GuiTest qw (:ALL);   # Win32-GuiTest-1.63 used\n\nprint \"place cursor now...\\n\"; sleep(5); print get_line();\n\nsub get_line {\n\n    Win32::Clipboard()-&gt;Empty();\n\n    SendKeys('{HOME}');\n    SendRawKey(VK_LSHIFT, KEYEVENTF_EXTENDEDKEY);\n    SendKeys('{END}');\n    SendRawKey(VK_RSHIFT, KEYEVENTF_KEYUP);\n    SendRawKey(VK_LSHIFT, KEYEVENTF_KEYUP);\n\n    SendKeys('^c');\n    return Win32::Clipboard()-&gt;GetText();\n}\n</code></pre>\n"}], "owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1530178280, "creation_date": 1515668876, "last_edit_date": 1515674759, "question_id": 48205626, "link": "https://stackoverflow.com/questions/48205626/unable-to-send-shift-end-with-win32guitest", "title": "unable to send shift-end with Win32::GuiTest", "body": "<p>I would need to automate some keyboard entries inside my perl script. For this, I use  <a href=\"http://search.cpan.org/~karasik/Win32-GuiTest-1.63/lib/Win32/GuiTest.pm\" rel=\"nofollow noreferrer\">Win32::GuiTest</a> module. \nThis works fine for all entries I need except for shift-end.</p>\n\n<p>Here's what I send</p>\n\n<pre><code>Win32::GuiTest::SendKeys(\"+{END}\");\n</code></pre>\n\n<p>but it seems that it only takes the {END}.</p>\n\n<p>The weird thing is that</p>\n\n<pre><code>Win32::GuiTest::SendKeys(\"+(some text)\");\n</code></pre>\n\n<p>works fine and sends <code>SOME TEXT</code></p>\n\n<p>In fact, I am unable to do <code>+{}</code> commands, it always take only the key inside the <code>{}</code></p>\n\n<p>On the other hand, commands with <code>^</code> (ctrl) or <code>%</code> (alt) work fine for example <code>Win32::GuiTest::SendKeys(\"%{F4}\")</code> closes the window</p>\n\n<p>does anybody would know why?</p>\n\n<p>Thanks :)</p>\n"}, {"tags": ["perl", "email", "multipart"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1515664359, "post_id": 48203418, "comment_id": 83389159, "body": "Your updated code still has two sets of <code>attributes</code> in each call to <code>create()</code>."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1515664610, "post_id": 48203418, "comment_id": 83389325, "body": "@DaveCross - that is how they show to do it though? <a href=\"http://search.cpan.org/~rjbs/Email-MIME-1.946/lib/Email/MIME.pm#SYNOPSIS\" rel=\"nofollow noreferrer\">search.cpan.org/~rjbs/Email-MIME-1.946/lib/Email/&hellip;</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1515665076, "post_id": 48203418, "comment_id": 83389651, "body": "Take a closer look at your original code and your &quot;updated&quot; code. There is no difference. The both have the doubled <code>attributes</code> key."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1515665219, "post_id": 48203418, "comment_id": 83389745, "body": "@Dave - oh, weird. I must have not copied and pasted the right version. I&#39;ve updated it now."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1515665761, "post_id": 48203418, "comment_id": 83390090, "body": "Ok. It now looks like your code is generating the correct multi-part email - one plain text part and one HTML part. The fact that Gmail isn&#39;t displaying it how you want, is something you might have to take up with Google :-)"}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1515666553, "post_id": 48203418, "comment_id": 83390655, "body": "@DaveCross - yeah I still don&#39;t get why its not working. Maybe I&#39;ll take a break and come back to it ;) Will post once I have a solution!"}], "answers": [{"comments": [{"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 0, "creation_date": 1515663237, "post_id": 48203548, "comment_id": 83388390, "body": "Thanks. Yeah, well its <i>supposed</i> to be sending one in html, and the other as plain text - thus:  <code>content_type =&gt; &quot;text&#47;plain&quot;,</code> and <code>content_type =&gt; &quot;text&#47;html&quot;,</code> in the <code>@parts</code> bit... but for some reason its trying to send it all as text/plain??"}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 0, "creation_date": 1515663365, "post_id": 48203548, "comment_id": 83388469, "body": "ah man, I figured it out!!! What a <i>duh</i> moment! I had <code>attributes =&gt;  }</code> defined at the top of the part, and then also a few lines down. I&#39;ve merged it all into one for each part, and it works now. Duh!"}, {"owner": {"reputation": 969, "user_id": 3647971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/008855d3dc309b4a91c222be24197fd9?s=128&d=identicon&r=PG&f=1", "display_name": "user3647971", "link": "https://stackoverflow.com/users/3647971/user3647971"}, "reply_to_user": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 0, "creation_date": 1515663510, "post_id": 48203548, "comment_id": 83388563, "body": "Nice, so it defaulted to text/plain? I was gonna suggest to change transfer encoding for the html part next but oh well :) gj"}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 0, "creation_date": 1515664267, "post_id": 48203548, "comment_id": 83389093, "body": "oh actually, maybe it didn&#39;t work :( I&#39;ve just updated my question above. Its not correctly setting the content-types, but it still shows both on the email. Any ideas?"}], "tags": [], "owner": {"reputation": 969, "user_id": 3647971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/008855d3dc309b4a91c222be24197fd9?s=128&d=identicon&r=PG&f=1", "display_name": "user3647971", "link": "https://stackoverflow.com/users/3647971/user3647971"}, "is_accepted": false, "score": 1, "last_activity_date": 1515662736, "creation_date": 1515662736, "answer_id": 48203548, "question_id": 48203418, "link": "https://stackoverflow.com/questions/48203418/email-with-2-multiparts-shows-as-one/48203548#48203548", "title": "Email with 2 multiparts shows as one", "body": "<p>I'm not sure what's the question, but I could try to open up what's going on in there. So the parts you have defined are meant for different content-types and transfer encodings for example attachment's etc. So when you use boundary it can differentiate between these parts that have different content and encodings so it can be interpreted correctly when received. I assume you thought it would split the message to multiple parts and send them separately?</p>\n"}, {"comments": [{"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 0, "creation_date": 1515663152, "post_id": 48203589, "comment_id": 83388323, "body": "I do know what a multipart email is :) I&#39;ve been using them before with success. I&#39;m trying to move to a different module so it works better with utf8. I did just notice that is has <code>Content-Type: text&#47;plain; charset=&quot;UTF-8&quot;</code>:, even though I have  <code>content_type =&gt; &quot;text&#47;html&quot;,</code> for one, and <code>Content-Type: text&#47;html; charset=&quot;UTF-8&quot;</code> for the other?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 1, "creation_date": 1515664482, "post_id": 48203589, "comment_id": 83389234, "body": "@AndrewNewby: Perhaps your question needs clarification. You say &quot;I&#39;m trying to figure out why my multipart email all comes out as one email:&quot;. I&#39;ve explained that it&#39;s because a mutlipart email <b>is</b> one email. I&#39;m not sure what you&#39;re actually asking."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 0, "creation_date": 1515664560, "post_id": 48203589, "comment_id": 83389291, "body": "it is supposed to have both a html and plain text email, all in one. So for most people they would see the html version, but for some devices it would show the plain text. Thanks!"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 2, "creation_date": 1515664669, "post_id": 48203589, "comment_id": 83389368, "body": "@AndrewNewby: You don&#39;t mean &quot;email&quot; there, do you? You mean &quot;part&quot;. You want a plain text part and an HTML part - both in the <b>same</b> email. That&#39;s why we&#39;re getting confused."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 0, "creation_date": 1515664930, "post_id": 48203589, "comment_id": 83389558, "body": "@AndrewNewby: Please edit your question to clarify this - so other people don&#39;t reading make the same mistake you do. Perhaps more coffee isn&#39;t the best idea. Take an hour away from the computer. Go for a walk. Watch Netflix. Be with the real people for a while."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 0, "creation_date": 1515665328, "post_id": 48203589, "comment_id": 83389815, "body": "I think I&#39;ve modified the question to make more sense. WRT to the break - its 10am in the UK =)"}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 0, "creation_date": 1515669897, "post_id": 48203589, "comment_id": 83392832, "body": "I finally worked it out! I was doing: <code>Content-Type: multipart&#47;mixed;</code>, but it needed to be <code>Content-Type: multipart&#47;alternative;</code> :) I&#39;ve posted it as an answer"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1515668735, "last_edit_date": 1515668735, "creation_date": 1515662898, "answer_id": 48203589, "question_id": 48203418, "link": "https://stackoverflow.com/questions/48203418/email-with-2-multiparts-shows-as-one/48203589#48203589", "title": "Email with 2 multiparts shows as one", "body": "<p>I think you misunderstand what a multi-part email is. A multi-part email is a single email which is made up of many parts. Each part can be another email message or the contents of another file.</p>\n\n<p>You have created a single email which contains a number of other emails.</p>\n\n<p>If you want to send separate emails then you need to... well... send separate emails :-)</p>\n\n<p><strong>Update:</strong> Ok, so it was the terminology that was wrong here. The OP didn't actually want a multi-part email to be separate emails, he wanted the separate parts to be displayed separately in his email client. After a minor tweak to his code, the email created looks correct - but Gmail is (for some reason) displaying the two parts (one plain text and the other HTML) at the same time.</p>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1515672385, "post_id": 48205941, "comment_id": 83394218, "body": "You don&#39;t need to use <code>content_type_set()</code>, you can use <code>attributes =&gt; { content_type =&gt; &#39;multipart&#47;mixed&#39; } }</code> when creating the wrapper MIME object. Or you could avoid all of this by using <a href=\"https://metacpan.org/pod/Email::Stuffer\" rel=\"nofollow noreferrer\">Email::Stuffer</a> instead."}], "tags": [], "owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "is_accepted": true, "score": 1, "last_activity_date": 1515669830, "creation_date": 1515669830, "answer_id": 48205941, "question_id": 48203418, "link": "https://stackoverflow.com/questions/48203418/email-with-2-multiparts-shows-as-one/48205941#48205941", "title": "Email with 2 multiparts shows as one", "body": "<p>I finally worked it out by comparing an email that I knew worked as I was expecting, to mine. </p>\n\n<p>The emails I was sending out, had:</p>\n\n<pre><code>Content-Type: multipart/mixed; boundary=\"_----------=xxxxx\"\n</code></pre>\n\n<p>But the working ones had:</p>\n\n<pre><code>Content-Type: multipart/alternative; boundary=\"_----------=xxxxx\"\n</code></pre>\n\n<p>Sure enough, seeing the <strong>multipart/mixed</strong>, it now works fine:</p>\n\n<pre><code>$email-&gt;content_type_set( 'multipart/alternative' );\n</code></pre>\n"}], "owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 48205941, "answer_count": 3, "score": 1, "last_activity_date": 1515669830, "creation_date": 1515662195, "last_edit_date": 1515665191, "question_id": 48203418, "link": "https://stackoverflow.com/questions/48203418/email-with-2-multiparts-shows-as-one", "title": "Email with 2 multiparts shows as one", "body": "<p>I'm trying to figure out why my multi-part email all comes out as one:</p>\n\n<p><a href=\"https://i.stack.imgur.com/eY4bE.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eY4bE.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>The code I'm using to create 2 \"parts\" for my email, is:</p>\n\n<pre><code>  use Email::MIME;\n  use Email::Address::XS;\n  use Email::Sender::Simple qw(sendmail);\n\n  # multipart message\n  my @parts = (\n      Email::MIME-&gt;create(\n          attributes =&gt; {\n              content_type =&gt; \"text/plain\",\n              disposition  =&gt; \"inline\",\n              charset      =&gt; \"UTF-8\",\n          },\n          body_str =&gt; \"Hello there \u00e9!\",\n          attributes =&gt; {\n                encoding =&gt; 'quoted-printable',\n                charset  =&gt; \"UTF-8\",\n          }\n      ),\n      Email::MIME-&gt;create(\n          attributes =&gt; {\n              content_type =&gt; \"text/html\",\n              disposition  =&gt; \"inline\",\n              charset      =&gt; \"UTF-8\",\n          },\n          body_str =&gt; \"Hello there \u00e9\u00ed\u00f3!\",\n          attributes =&gt; {\n                encoding =&gt; 'quoted-printable',\n                charset  =&gt; \"UTF-8\",\n          }\n      )\n  );\n\n  my $email = Email::MIME-&gt;create(\n      header_str =&gt; [\n          From =&gt; 'andy@mysite.org',\n          To =&gt; [ 'Name &lt;andy@foo.com&gt;' ],\n          Subject =&gt; \"foo\"\n      ]\n  );\n  $email-&gt;parts_set( \\@parts );\n\n  print $email-&gt;as_string;\n\n  sendmail($email-&gt;as_string);\n</code></pre>\n\n<p>The email is sent and comes out like so:</p>\n\n<pre><code>Delivered-To: andy@foo.com\nReceived: by 10.223.130.5 with SMTP id 5csp329339wrb;\n        Thu, 11 Jan 2018 01:09:17 -0800 (PST)\nX-Google-Smtp-Source: ACJfBotkcH6W0rsnQMkLx9pPqbt1rUgKaC9ShvWLQbn6u8muQbVnCjTCZRmf0d5RzegqW4AGpFHP\nX-Received: by 10.28.92.146 with SMTP id q140mr474098wmb.5.1515661757887;\n        Thu, 11 Jan 2018 01:09:17 -0800 (PST)\nReturn-Path: &lt;andy@mysite.org&gt;\nFrom: andy@mysite.org\nTo: Name &lt;andy@foo.com&gt;\nSubject: foo\nDate: Thu, 11 Jan 2018 09:09:17 +0000\nMIME-Version: 1.0\nContent-Transfer-Encoding: 7bit\nContent-Type: multipart/mixed; boundary=\"15156617570.82fd1E.6414\"\nMessage-Id: &lt;E1eZYrN-0001fT-Hp@admin.myserver.org&gt;\n\n--15156617570.82fd1E.6414\nDate: Thu, 11 Jan 2018 09:09:17 +0000\nMIME-Version: 1.0\nContent-Type: text/plain; charset=\"UTF-8\"\nContent-Transfer-Encoding: quoted-printable\n\nHello there =C3=A9!\n--15156617570.82fd1E.6414\nDate: Thu, 11 Jan 2018 09:09:17 +0000\nMIME-Version: 1.0\nContent-Type: text/plain; charset=\"UTF-8\"\nContent-Transfer-Encoding: quoted-printable\n\nHello there =C3=A9=C3=AD=C3=B3!\n--15156617570.82fd1E.6414--\n</code></pre>\n\n<p>I can see the split \"parts\", but for some reason they show up together?</p>\n\n<p><strong>UPDATE:</strong> : I thought I had fixed this - I had 2 of these <code>attributes =&gt; { }</code> values for each <code>@part</code>, and that was causing the content_type to be text/plain as a default. So I now have:</p>\n\n<pre><code>  my @parts = (\n      Email::MIME-&gt;create(\n          body_str =&gt; \"Hello there &lt;b&gt;\u00e9!&lt;/b&gt;\",\n          attributes =&gt; {\n                encoding =&gt; 'quoted-printable',\n                charset  =&gt; \"UTF-8\",\n                content_type =&gt; \"text/plain\",\n                disposition  =&gt; \"inline\",\n          }\n      ),\n      Email::MIME-&gt;create(\n\n          body_str =&gt; \"Hello there &lt;b&gt;\u00e9\u00ed\u00f3!&lt;/b&gt;\",\n          attributes =&gt; {\n                content_type =&gt; \"text/html\",\n                disposition  =&gt; \"inline\",\n                charset      =&gt; \"UTF-8\",\n                encoding     =&gt; 'quoted-printable',\n          }\n      )\n  );\n</code></pre>\n\n<p>...and the email comes out as:</p>\n\n<pre><code>From: andy@mysite.org\nTo: Name &lt;andy@foo.com&gt;\nSubject: foo\nDate: Thu, 11 Jan 2018 09:45:21 +0000\nMIME-Version: 1.0\nContent-Transfer-Encoding: 7bit\nContent-Type: multipart/mixed; boundary=\"15156639210.d5dF6bf.14583\"\n\n\n--15156639210.d5dF6bf.14583\nDate: Thu, 11 Jan 2018 09:45:21 +0000\nMIME-Version: 1.0\nContent-Type: text/plain; charset=\"UTF-8\"\nContent-Disposition: inline\nContent-Transfer-Encoding: quoted-printable\n\nHello there &lt;b&gt;=C3=A9!&lt;/b&gt;\n\n\n--15156639210.d5dF6bf.14583\nDate: Thu, 11 Jan 2018 09:45:21 +0000\nMIME-Version: 1.0\nContent-Type: text/html; charset=\"UTF-8\"\nContent-Disposition: inline\nContent-Transfer-Encoding: quoted-printable\n\nHello there &lt;b&gt;=C3=A9=C3=AD=C3=B3!&lt;/b&gt;\n\n\n--15156639210.d5dF6bf.14583--\n</code></pre>\n\n<p>...but its still showing both the plain text and HTML parts at the same time. The weird part, is that if I put <b></b> tags around some of it, I get what I would expect:</p>\n\n<p><a href=\"https://i.stack.imgur.com/PuEca.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PuEca.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>...but it just shows them both side by side :/</p>\n"}, {"tags": ["perl", "unit-testing", "mocking"], "owner": {"reputation": 5810, "user_id": 2547017, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8916fcee33c7955aa821e07f5648f8a9?s=128&d=identicon&r=PG", "display_name": "Ishan Bhatt", "link": "https://stackoverflow.com/users/2547017/ishan-bhatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1515657243, "creation_date": 1515657243, "question_id": 48202202, "link": "https://stackoverflow.com/questions/48202202/how-to-mock-system-call-with-argument-in-whole-directory", "title": "How to mock system call with argument in whole directory?", "body": "<p>I have a directory in my app which has several test cases.\nThose test cases use some third party software using either `` or system calls.\nAnd I need to mock those calls.</p>\n\n<p>What I can't figure out is how do I mock those calls for that particular directory? </p>\n\n<p>I had been trying <a href=\"http://search.cpan.org/~dmuey/Test-Mock-Cmd-0.7/lib/Test/Mock/Cmd.pm\" rel=\"nofollow noreferrer\">Test::Mock::Cmd</a></p>\n\n<p>But I can not figure out how to keep hold of the arguments that I provide for my system call and how to keep it across the directory.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1515711660, "post_id": 48201508, "comment_id": 83416306, "body": "You&#39;re lying to us, and that isn&#39;t a good look. You were told in your <a href=\"https://stackoverflow.com/questions/48166370/how-to-delete-lines-that-match-elements-from-another-file\">previous question</a> to add <code>use strict</code> and <code>use warnings &#39;all&#39;</code> to the beginning. You have added those lines to the top of this question only to avoid the same  scolding, but you have never run your program that way. The code you show doesn&#39;t even compile: it produces twenty lines of errors starting with <code>&quot;my&quot; variable @ion masks earlier declaration in same scope</code> because you have declared <code>@ion</code> twice."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1515711943, "post_id": 48201508, "comment_id": 83416395, "body": "I understand that you may be unfamiliar with Perl, but that lack of knowledge doesn&#39;t explain you posting code that you haven&#39;t tried to run. Together with the appearance that, instead of copying and pasting any solutions here you&#39;re trying to copy-type them in, so as to mistake <code>:bsd_glob</code> for <code>bsd_glob</code> <i>twice</i> from <i>two different answers</i>, it is pretty much impossible to know how to advise you. If we can&#39;t trust anything that you write then we have absolutely no basis to diagnose your problems."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515658162, "post_id": 48202004, "comment_id": 83385586, "body": "Thank You for Your answer. I get this error <code>Can&#39;t locate List&#47;MoreUtils.pm in @INC </code> which probably means that I have to install this module. I have just to check it is it possible on Centos 6.9. Thanks"}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515659438, "post_id": 48202004, "comment_id": 83386196, "body": "Hi, I have installed this module and now when I run the script id does not gives me any error, it doesn creates new <code>txt.new</code> files but they are empty?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515660736, "post_id": 48202004, "comment_id": 83386873, "body": "@milan I tested with files derived from the one you show, and with the reference file that you show.  It puts the new files in the same directory where the files are (but you can set names as you wish)."}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515661368, "post_id": 48202004, "comment_id": 83387177, "body": "@ zdim: Thanks..very strange. When I create a new file with the same content that I put above and run the script it also gives me blank txt.new. Have to check why is this happening when I run it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515662606, "post_id": 48202004, "comment_id": 83387943, "body": "@milan This is how I test. I make a directory and put a file like the one you show there (and make up another, similar one). Then I put <code>ions_..</code> reference file in the directory with the script.  (I actually enter the name of the directory where the file is in the code instead of <code>&#39;.&#39;</code> but you can also give its name when you run the script.) So the file is in <code>test_dir&#47;</code>, the reference file is where the script is, and then run <code>script test_dir</code>. That&#39;s it. I re-tested afresh."}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515663852, "post_id": 48202004, "comment_id": 83388802, "body": "Haha maan..I did the same and now I run it again and it gives me this error :P <code>&quot;bsd_glob&quot; is not defined in %File::Glob::EXPORT_TAGS at removing_lines.pl line 5 \tmain::BEGIN() called at &#47;usr&#47;share&#47;perl5&#47;Carp.pm line 5 \teval {...} called at &#47;usr&#47;share&#47;perl5&#47;Carp.pm line 5 Can&#39;t continue after import errors at removing_lines.pl line 5 BEGIN failed--compilation aborted at removing_lines.pl line 5.</code> I will install it now as well. Sorry to bother You and thank You!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 1, "creation_date": 1515663950, "post_id": 48202004, "comment_id": 83388873, "body": "@milan Huh?  <code>File::Glob</code> is core.  Btw, you can just drop that, just remove <code>use File::Glob</code>.  The effect of that is to replace the basic <a href=\"http://perldoc.perl.org/functions/glob.html\" rel=\"nofollow noreferrer\">glob</a> with the BSD one, but the basic <code>glob</code> will work fine if your files don&#39;t have spaces in their names."}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515665173, "post_id": 48202004, "comment_id": 83389710, "body": "Hm, yes..I did it and it still prints blank page. I went trought the script and it seems to be fine. Maybe something is wrong with my computer or tiredness, Ill try it on other operative system or later on the same and Ill came back to You tomorrow. Anyway, thank You for this, You helped me alot!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515695799, "post_id": 48202004, "comment_id": 83409149, "body": "<code>next if not &#47;^HETATM&#47;</code> will remove all non-<code>HETATM</code> from the output; I think they&#39;re supposed to remain in place. And <code>next if any { $fields[3] =~ &#47;$_&#47; } @ion_terms</code> will match if an element of <code>@ion_terms</code> is a <i>substring</i> of the data field; I think you want just <code>eq</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515696377, "post_id": 48202004, "comment_id": 83409493, "body": "<i>&quot;I use <code>File::Glob</code> since its glob handles spaces in filenames&quot;</i> Yes, but only if you enable the <code>:bsd_glob</code> option"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515696533, "post_id": 48202004, "comment_id": 83409564, "body": "@milan: This is the same mistake you made with your previous question. There is a <i>colon</i> before <code>bsd_glob</code>. You need <code>use File::Glob &#39;:bsd_glob&#39;</code> as zdim shows in his solution. You must <i>copy and paste</i> code from the internet to your editor. If you try to type it in there may be any number of errors that we don&#39;t know about and so can&#39;t help you with."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515701713, "post_id": 48202004, "comment_id": 83412072, "body": "@Borodin As for <code>File::Glob</code> -- indeed, and this is the second time you tell me that! Thank you, will clarify.  As for the other two remarks: (1) upon closer reading, apparently I got it wrong (may have something to do with their original &quot;format&quot;?), will change (2) The &quot;<i>matches with</i>&quot; makes me think that it needn&#39;t be <code>eq</code>; also, they had those <code>**ZN**</code> -- presumably to label the example but i wasn&#39;t sure; will comment.  Thank you very much for comments"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515710933, "post_id": 48202004, "comment_id": 83416067, "body": "@zdim: I wasn&#39;t aware that I&#39;d mentioned it before; I&#39;m sorry to repeat myself. And the OP is particularly unclear with their requirement, making it very hard to be certain of anything, espcially when it seems that they&#39;re typing in the solutions instead of using the clipboard. Given their apparent skills I doubt that you can use <i>matches with</i> to represent anything reliable. Common parlance would use <i>match</i> for strings and <i>equal</i> for numbers."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515713357, "post_id": 48202004, "comment_id": 83416845, "body": "@Borodin On the contrary -- thank you again! I apologize for not internalizing that before.  I also find some requirements unclear but hopefully they&#39;ll come back with/for clarifications. I wish I knew why exactly it isn&#39;t working for them though :("}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515713467, "post_id": 48202004, "comment_id": 83416876, "body": "@zdim: With the <code>:bsd_glob</code> mistakes there&#39;s no way of telling what they&#39;re actually running. Your solution works fine for me too, so it&#39;s not at your end. I&#39;ve commented on the lack of precision beneath the question; let&#39;s hope it&#39;s understood."}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515748669, "post_id": 48202004, "comment_id": 83427325, "body": "@Borodin Of course I <i>copy</i> and <i>past</i> the script but it keeps giving me the same problem. That was the error that I have copied from my Terminal. I am not sure why it is a problem if this module is a core and should be installed. However I have just deleted this part with <code>:bsd_glob</code> and it works fine. @zdim Your editted script gives me blank output, I went through it in detail and everything seems to be fine, but it creates new files but prints nothing inside. It is very strange, however I have used <code>****</code> just for labelling, sorry I should have mentioned it as well"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515750565, "post_id": 48202004, "comment_id": 83428490, "body": "@milan  OK, let&#39;s see; let&#39;s debug it. Add printing statements in the <code>while</code> loop: after the line with <code>split</code> add <code>say &quot;@fields&quot;;</code> and <code>say &quot;@ion&quot;;</code>. Check out what they print. My first guess is that there is something in the data that you don&#39;t realize so that it always goes <code>next</code> and never actually gets to the line where it would print to the output file.  But you&#39;ll see when you start printing."}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515751678, "post_id": 48202004, "comment_id": 83429209, "body": "@zdim: Thanks. I have just made these changes that You have told me and  in terminal it prints all lines that start with <code>HETATM</code> including one with the Zn as well.. it as well creates output of new file but it is still blank."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515784838, "post_id": 48202004, "comment_id": 83447822, "body": "@milan Well, what does it look like? The <code>$fields[3]</code> is compared against each term in <code>@ion_terms</code> and if it matches any then the line <i>is not printed</i> to file.  One way to get nothing in the output file is that <code>$fields[3]</code> <i>always</i> matches a term in <code>@ion_terms</code> ... does it?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1516043565, "post_id": 48202004, "comment_id": 83521914, "body": "@milan  I see further questions on this problem ... what happened with this question? Did you get it working, and if not what is the outcome of the debugging I suggested above?  It&#39;s got to be something really simple.  Also, please see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>  You have privileges for all of that. It is difficult for us to keep answering next queries when current or previous ones aren&#39;t resolved."}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1516110138, "post_id": 48202004, "comment_id": 83548907, "body": "@zdim: Thank You zdim for everyting. If You dont mind I will answer what was wrong with the script tomorrow cause I am extremely busy today and have to finish something till tomorrow. Many thanks!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1516128425, "post_id": 48202004, "comment_id": 83560647, "body": "@milan  By all means, take your time -- thank you for responding.  When you get to this please make sure to also read the link in my previous comment. Not only for this question but for the future as well."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1516128587, "post_id": 48202004, "comment_id": 83560727, "body": "@milan A tip: I know cultures where it is polite and proper to capitalize the word &quot;you,&quot; so one respectfully writes &quot;You&quot; -- but this is not so in English. One never capitalizes this word in English and &quot;You&quot; has no particular meaning.  (People may or may not understand that you mean to be respectful.)"}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1516152838, "post_id": 48202004, "comment_id": 83569944, "body": "@zdIm: Thanks, I will read link for sure, no worries. It will be useful for the future as well. Oh really, I didn&#39;t know that. I am not for England; probably once I have seen people are using this to refer to respect as I did. Thanks! It is good to have knowledgable people so you can learn from them. Thanks! Will respond to script shortly."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1516940188, "post_id": 48202004, "comment_id": 83904304, "body": "@milan May I remind you to see the very short page <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>  (At this point you have the needed reputation to vote on answers, while you can always accept the one you like best.) It is difficult for us to address next questions when the current ones are left unresolved.  I hope that this doesn&#39;t bother you -- I will not bring it up again."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1515729208, "last_edit_date": 1515729208, "creation_date": 1515656417, "answer_id": 48202004, "question_id": 48201508, "link": "https://stackoverflow.com/questions/48201508/how-to-delete-lines-that-in-specific-column-match-elements-from-another-file/48202004#48202004", "title": "How to delete lines that in specific column match elements from another file", "body": "<p>There is a number of needed improvements, and a few direct errors.</p>\n\n<p>First a simple working code, with some assumptions taken from the question</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\n#use File::Glob ':bsd_glob';   # using \\Q..\\E in glob, no need for this\nuse File::Copy qw(move);\nuse List::MoreUtils qw(any);\n\nmy $dirname = shift @ARGV || '.';\n\nmy $ionfile = 'ions_solvents_cofactors';\nopen my $fh, '&lt;', $ionfile or die \"Can't open $ionfile: $!\";\nmy @ion_terms = &lt;$fh&gt;;\nchomp @ion_terms;\n\nmy @files = glob \"\\Q$dirname\\E/*.txt\";\n\nforeach my $file (@files) {\n    open my $fh, '&lt;', $file or do {\n       warn \"Can't open $file: $!\";\n       next;\n    };\n    my $outfile = $file . '_new';\n    open my $fh_out, '&gt;', $outfile or die \"Can't open $outfile: $!\";\n\n    while (&lt;$fh&gt;) {\n        next if not /^HETATM/;\n        my @fields = split;\n        next if any { $fields[3] =~ /$_/ } @ion_terms;\n        print $fh_out $_; \n    }   \n\n    # Uncomment to overwrite, when thoroughly tested\n    #move $outfile, $file or warn \"Can't move $outfile to $file: $!\"\n}\n</code></pre>\n\n<p>Comments</p>\n\n<ul>\n<li><p>The reference file need be opened only once; get it out of the loop</p></li>\n<li><p>No purpose in \"initializing\" an array to emtpy, like <code>my @ion = ()</code>. You get that when you declare it with <code>my @ion</code>. (If you need to clear an array, then <code>@ary = ();</code> makes sense)</p></li>\n<li><p>Use lexical filehandles, <code>open my $fh, ...</code>, instead of typeglobs <code>FH</code>. Use lexical filehandles. Use lexical filehandles. See end of <a href=\"https://perldoc.perl.org/perldata.html#Typeglobs-and-Filehandles\" rel=\"nofollow noreferrer\">Typeglobs and Filehandles</a> and read <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">open</a></p></li>\n<li><p>There is practically never a need for a C-style <code>foreach</code> loop. If you need to iterate over index, <code>for my $i (0..$#ary)</code> is great. But most of the time you need <em>elements</em>, like here</p></li>\n<li><p>Instead of the <code>\\s+</code> pattern used in <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a> you should use <code>' '</code>, which is also <code>split</code>'s default. This is why the code above doesn't need it, as <code>split;</code> is the same as <code>split ' ', $_;</code></p></li>\n<li><p>The <code>@file_each</code> is not a good name for lines in the file</p></li>\n<li><p>Direct error: you are attempting to <code>rm</code> what is a <em>line</em> in a file! Better naming would've helped</p></li>\n<li><p>Your use of <code>opendir</code> and <code>readdir</code> is fine (except for <code>DIR</code> instead of a lexical filehandle!!), but <code>glob</code> is better here. &nbsp; <strong>Edit:</strong> &nbsp; I use <a href=\"https://perldoc.perl.org/perlre.html#Quoting-metacharacters\" rel=\"nofollow noreferrer\"><code>\\Q..\\E</code></a> in <code>glob</code>, to prevent possible injection bug whereby an unusual directory name triggers unintended processing. Since those also escape spaces the <a href=\"https://perldoc.perl.org/File/Glob.html\" rel=\"nofollow noreferrer\">File::Glob</a> with its <code>bsd_glob()</code> isn't needed any more</p></li>\n<li><p>I use <a href=\"http://search.cpan.org/~rehsack/List-MoreUtils-0.428/lib/List/MoreUtils.pm#any_BLOCK_LIST\" rel=\"nofollow noreferrer\">List::MoreUtils::any</a> to find whether any element from <code>@ion_terms</code> satisfies the condition in the block, to match <code>$fields[3]</code>. This can be done with <code>grep</code> as well.  Also, if your list of terms is as short as shown, you can assemble a regex pattern with it  </p>\n\n<pre><code>my $re = join '|', { quotemeta } @ion_terms;  # before the loop\nnext if $fields[3] =~ /$re/;\n</code></pre></li>\n<li><p>Some of the code above can be written more concisely and simply</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1515695383, "creation_date": 1515695383, "answer_id": 48213693, "question_id": 48201508, "link": "https://stackoverflow.com/questions/48201508/how-to-delete-lines-that-in-specific-column-match-elements-from-another-file/48213693#48213693", "title": "How to delete lines that in specific column match elements from another file", "body": "<p></p>\n\n<p>I'm sorry if I was unclear with my advice regarding to your\nprevious question\n<a href=\"https://stackoverflow.com/questions/48166370/how-to-delete-lines-that-match-elements-from-another-file\"><em>How to delete lines that match elements from another file</em></a>. I suggested that you should post another question because you brought up new issues, but I intended that you should work from where we had got to, whereas you seem to have discarded all of that and started again with your original code, including shelling out to <code>rm</code> in the mistaken belief that it would delete a line from a file</p>\n\n<p>Now that you have shown a full version of <code>ions_solvents_cofactors</code> I can see that my assumptions were correct, and the only other problem that you raised was that only lines starting <code>HETATM</code> should be removed from the PDB file, which you didn't say in your question</p>\n\n<p>This is very similar to my previous solution, but I have added a check for <code>HETATM</code> data. I have also improved the log output so that it says which value from <code>ions_solvents_cofactors</code> was matched to cause the deletion</p>\n\n<p>Please try this new code, and report if you find any problems</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse File::Glob ':bsd_glob';\nuse Tie::File;\n\nmy %matches = do {\n    open my $fh, '&lt;', 'ions_solvents_cofactors';\n    local $/;\n    map { $_ =&gt; 1 } split ' ', &lt;$fh&gt;;\n};\n\nfor my $pdb ( glob '*.txt' ) {\n\n    tie my @file, 'Tie::File', $pdb or die $!;\n\n    for ( my $i = 0; $i &lt; @file; ) {\n\n        my ($id, undef, undef, $col4) = split ' ', $file[$i];\n\n        if ( $id eq 'HETATM' and $col4 and $matches{$col4} ) {\n\n            printf qq{Removing line %d from \"%s\" (matches %s)\\n},\n                    $i+1, $pdb, $col4;\n\n            splice @file, $i, 1;\n        }\n        else {\n            ++$i;\n        }\n    } \n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Removing line 6 from \"test.txt\" (matches ZN)\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1515729208, "creation_date": 1515654398, "last_edit_date": 1515711070, "question_id": 48201508, "link": "https://stackoverflow.com/questions/48201508/how-to-delete-lines-that-in-specific-column-match-elements-from-another-file", "title": "How to delete lines that in specific column match elements from another file", "body": "\n\n<p>I have a folder with many text files that look like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ATOM   5132 HG22   ILE   B 162     -10.906  60.208   9.028  1.00  0.00           H  \nATOM   5133 HG23   ILE   B 162     -11.193  58.585   9.650  1.00  0.00           H  \nATOM   5134 HD11   ILE   B 162      -9.888  57.413   9.161  1.00  0.00           H  \nATOM   5135 HD12   ILE   B 162      -8.448  57.195   8.181  1.00  0.00           H  \nATOM   5136 HD13   ILE   B 162      -9.913  56.300   7.799  1.00  0.00           H  \nHETATM 5138 ZN    ZN A 190      30.757  32.494  -1.721  1.00  0.00          ZN  \nHETATM 5139  C1  UQ1 B 501       2.889  33.364  18.810  1.00  0.00           C  \nHETATM 5140  O1  UQ1 B 501       2.849  32.140  19.037  1.00  0.00           O  \nHETATM 5141  C2  UQ1 B 501       4.162  33.930  18.303  1.00  0.00           C  \nHETATM 5142  O2  UQ1 B 501       5.209  33.069  18.099  1.00  0.00           O  \nHETATM 5143  CM2 UQ1 B 501       5.802  32.349  19.180  1.00  0.00           C  \nHETATM 5144  C3  UQ1 B 501       4.270  35.396  18.017  1.00  0.00           C  \n</code></pre>\n\n<p>I have a file <code>ions_solvents_cofactors</code> that contains different number of symbols, and look like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ZN\n008\n03S\n06C\n0KA\n0NG\n0NM\n0QE\n144\n1CL\n1SA\n1TP\n202\n21H\n2A6\n2BM\n2F2\n2HE\n2HP\n2MO\n2NO\n2PA\n2PN\n2PO\n2T8\n</code></pre>\n\n<p>I wrote a program that \nshould open and read each <code>.txt</code> file in the current folder and delete those lines where column 4 matches with any value from the file <code>ions_solevnts_cofactors</code> when column 1 is <code>HETATM</code>. </p>\n\n<p>It gives me this error</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>rm: cannot remove `ATOM': No such file or directory\nrm: cannot remove `1459': No such file or directory\nrm: cannot remove `HB': No such file or directory\nrm: cannot remove `ILE': No such file or directory\n</code></pre>\n\n<p>This is the script</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/local/bin/perl\n\nuse strict;\nuse warnings;\n\n$dirname = '.';\nopendir( DIR, $dirname ) or die \"cannot open directory\";\n@files = grep( /\\.txt$/, readdir( DIR ) );\n\nforeach $files ( @files ) {\n\n    open( FH, $files ) or die \"could not open $files\\n\";\n    @file_each = &lt;FH&gt;;\n    close FH;\n\n    close DIR;\n\n    my @ion = ();\n\n    my $ionfile = 'ions_solvents_cofactors';\n\n    open( ION, $ionfile ) or die \"Could not open $ionfile, $!\";\n    my @ion = &lt;ION&gt;;\n    close ION;\n\n    for ( my $line = 0; $line &lt;= $#file_each; $line++ ) {\n\n        chomp( $file_each[$line] );\n\n        if ( $file_each[$line] =~ /^HETATM/ ) {\n            @is = split '\\s+', $file_each[$line];\n            chomp $is[3];\n        }\n\n        foreach ( $file_each[$line] ) {    # line 39\n\n            if ( \"@ion\" =~ $is[3] ) {\n                system( \"rm $file_each[$line]\" );\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>I want the script to overwrite each text file and reads only the fourth column of the lines that starts with <code>HETATM</code>. If it matches any of the elements from file <code>ions_solvents_cofactors</code> then this line should be deleted.</p>\n\n<p>So, for example</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>HETATM 5138 ZN    ZN A 190      30.757  32.494  -1.721  1.00  0.00          ZN\n</code></pre>\n\n<p>this line should be deleted from the file because <code>ZN</code> matches.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 8191890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10210222397819480/picture?type=large", "display_name": "Vibes", "link": "https://stackoverflow.com/users/8191890/vibes"}, "edited": false, "score": 1, "creation_date": 1515686199, "post_id": 48200841, "comment_id": 83403304, "body": "Thank you so much for your time and patiently answering in detail...it helped a lot"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 2, "last_activity_date": 1515651839, "last_edit_date": 1515651839, "creation_date": 1515651405, "answer_id": 48200841, "question_id": 48200395, "link": "https://stackoverflow.com/questions/48200395/to-increase-the-performance-of-a-script-in-perl/48200841#48200841", "title": "To increase the performance of a script in perl", "body": "<p>First thing to do before any optimization is to profile your code. Rather than guessing, this will tell you what lines are taking up the most time, and how often they're called. <a href=\"https://metacpan.org/pod/Devel::NYTProf\" rel=\"nofollow noreferrer\">Devel::NYTProf</a> is a good tool for the job.</p>\n\n<hr>\n\n<p>This is a problem.</p>\n\n<pre><code>my @LookupFile = read_file (\"$LookupFile\");\nmy @newFile = read_file (\"$newFile\"); \n@LookupFile = split (/\\n/,$LookupFile[0]);\n@newLines = split (/\\n/,$newFile[0]);\n</code></pre>\n\n<p><code>read_file</code> reads the whole file in as one big string (it should be <code>my $contents = read_file(...)</code>, using an array is awkward). Then it splits the whole thing into newlines, copying everything in the file. This is very slow and hard on memory and unnecessary.</p>\n\n<p>Instead, use <code>read_lines</code>. This will split the file into lines as it reads avoiding a costly copy.</p>\n\n<pre><code>my @lookups = read_lines($LookupFile);\nmy @new     = read_lines($newFile);\n</code></pre>\n\n<hr>\n\n<p>Next problem is <code>$newFile</code> is opened again and iterated through line by line.</p>\n\n<pre><code>open FILE1, \"$newFile\" or die \"Could not open file: $! \\n\";\nwhile(my $line = &lt;FILE1&gt;) {\n</code></pre>\n\n<p>This is a waste as you've already read that file into memory. Use one or the other. However, in general, it's better to work with files line-by-line than to slurp them all into memory.</p>\n\n<hr>\n\n<p>The above will speed things up, but they don't get at the crux of the problem. This is likely the real problem...</p>\n\n<blockquote>\n  <p><em>The contents in newFile will be searched in LookupFile and further processing happens.</em></p>\n</blockquote>\n\n<p>You didn't show what you're doing, but I'm going to imagine it looks something like this...</p>\n\n<pre><code>for my $line (@lines) {\n    for my $thing (@lookups) {\n        ...\n    }\n}\n</code></pre>\n\n<p>That is, for each line in one file, you're looking at every line in the other. This is what is known as an O(n^2) algorithm meaning that as you double the size of the files you quadruple the time.</p>\n\n<p>If each file has 10 lines, it will take 100 (10^2) turns through the inner loop. If they have 100 lines, it will take 10,000 (100^2). With 1,000 lines it will take 1,000,000 times.</p>\n\n<p>With O(n^2) as the sizes get bigger things get very slow very quickly.</p>\n\n<blockquote>\n  <p><em>Could you please let me know if we can convert files into hash to increase performance?</em></p>\n</blockquote>\n\n<p>You've got the right idea. You could convert the lookup file to a hash to speed things up. Let's say they're both lists of words.</p>\n\n<pre><code># input\nfoo\nbar\nbiff\nup\ndown\n\n# lookup\nfoo\nbar\nbaz\n</code></pre>\n\n<p>And you want to check if any lines in <code>input</code> match any lines in <code>lookup</code>.</p>\n\n<p>First you'd read <code>lookup</code> in and turn it into a hash. Then you'd read <code>input</code> and check if each line is in the hash.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie;\nuse v5.10;\n\n...\n\n# Populate `%lookup`\nmy %lookup;\n{\n    open my $fh, $lookupFile;\n    while(my $line = &lt;$fh&gt;) {\n        chomp $line;\n        $lookup{$line} = 1;\n    }\n}\n\n# Check if any lines are in %lookup\nopen my $fh, $inputFile;\nwhile(my $line = &lt;$fh&gt;) {\n    chomp $line;\n    print $line if $lookup{$line};\n}\n</code></pre>\n\n<p>This way you only iterate through each file once. This is an O(n) algorithm meaning is scales linearly, because hash lookups are basically instantaneous. If each file has 10 lines, it will only take 10 iterations of each loop. If they have 100 lines it will only take 100 iterations of each loop. 1000 lines, 1000 iterations.</p>\n\n<hr>\n\n<p>Finally, what you really want to do is skip all this and create a database for your data and search that. <a href=\"https://sqlite.org/\" rel=\"nofollow noreferrer\">SQLite</a> is a SQL database that requires no server, just a file. Put your data in there and perform SQL queries on it using <a href=\"https://metacpan.org/pod/DBD::SQLite\" rel=\"nofollow noreferrer\">DBD::SQLite</a>.</p>\n\n<p>While this means you have to learn SQL, and there is a cost to building and maintaining the database, this is fast and most importantly very flexible. SQLite can do all sorts of searches quickly without you having to write a bunch of extra code. SQL databases are a very common, so it's a very good investment to learn SQL.</p>\n\n<p>Since you're splitting the file up with <code>my @columns = split(' ',$line);</code> it's probably a file with many fields in it. That will likely map to a SQL table very well.</p>\n\n<p>SQLite can even import files like that for you. See <a href=\"https://stackoverflow.com/a/42563133/14660\">this answer</a> for details on how to do that.</p>\n"}], "owner": {"reputation": 33, "user_id": 8191890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10210222397819480/picture?type=large", "display_name": "Vibes", "link": "https://stackoverflow.com/users/8191890/vibes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 48200841, "answer_count": 1, "score": 0, "last_activity_date": 1515651839, "creation_date": 1515649018, "last_edit_date": 1515649694, "question_id": 48200395, "link": "https://stackoverflow.com/questions/48200395/to-increase-the-performance-of-a-script-in-perl", "title": "To increase the performance of a script in perl", "body": "<p>I have 2 files here which is newFile and LookupFile (which are huge files).\nThe contents in newFile will be searched in LookupFile and further processing happens. This script is working fine, however, it is taking more time to execute. Could you please let me know what can be done here to increase the performance? Could you please let me know if we can convert files into hash to increase performance?</p>\n\n<p>My file looks like below</p>\n\n<p>NewFile and LookupFile:</p>\n\n<p>acl sourceipaddress subnet destinationipaddress subnet portnumber\n .\n .   </p>\n\n<p>Script:</p>\n\n<pre><code>    #!/usr/bin/perl \n    use strict;\n    use warnings; \n    use File::Slurp::Tiny 'read_file'; \n    use File::Copy; \n    use Data::Dumper; \n    use File::Copy qw(copy); \n    my %options = (\n            LookupFile =&gt; {\n                type =&gt; \"=s\",\n                help =&gt; \"File name\",\n                variable =&gt; 'gitFile',\n                required =&gt; 1,\n             },    newFile =&gt; {\n                type =&gt; \"=s\",\n                help =&gt; \"file containing the acl lines to checked for\",\n                variable =&gt; \u2018newFile\u2019,\n                required =&gt; 1,\n             }  );\n\n                $opts-&gt;addOptions(%options); \n                $opts-&gt;parse(); \n                $opts-&gt;validate();\n        my $newFile = $opts-&gt;getOption('newFile'); \n        my $LookupFile = $opts-&gt;getOption('LookupFile');\n\n    my @LookupFile = read_file (\"$LookupFile\");\n    my @newFile = read_file (\"$newFile\"); \n    @LookupFile = split (/\\n/,$LookupFile[0]);\n    @newLines = split (/\\n/,$newFile[0]);\n    open FILE1, \"$newFile\" or die \"Could not open file: $! \\n\";\n\nwhile(my $line = &lt;FILE1&gt;)\n    {\n        chomp($line);\n        my @columns = split(' ',$line);\n        $var = @columns;\n        my $fld1;\n        my $cnt;\n        my $fld2;\n        my $fld3;\n        my $fld4;\n        my $fld5;\n        my $dIP;\n        my $sIP;\n        my $sHOST;\n        my $dHOST;\n       if(....)\n         if (....) further checks and processing\n\n)\n</code></pre>\n"}]