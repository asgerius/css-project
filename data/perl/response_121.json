[{"tags": ["regex", "perl", "diacritics"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 2, "creation_date": 1493855488, "post_id": 43771707, "comment_id": 74584849, "body": "Sure, add them to the character class ?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1493877507, "post_id": 43771707, "comment_id": 74590629, "body": "Do you want to keep e.g. Chinese characters?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1493878070, "post_id": 43771707, "comment_id": 74590892, "body": "Do you care about combining accents? E.g. if you have LATIN SMALL LETTER O followed by COMBINING DIAERESIS, do you want to keep both of them?"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 1, "creation_date": 1493888708, "post_id": 43776481, "comment_id": 74597376, "body": "@jm666  Thank you for the comment. I wasn&#39;t very concerned with the exact regex, since the OP doesn&#39;t say much -- and I thought that the rest is really more important.  You are right, need to throw in <code>\\pM</code> into the character class ... will add, with an example."}, {"owner": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "edited": false, "score": 0, "creation_date": 1493906136, "post_id": 43776481, "comment_id": 74610194, "body": "I somewhat understand. My ultimate purpose is to untaint CGI input, store in MySQL, then retrieve and use in HTML. My confusion lies in decode/encode. Is it proper to store decoded value in database and encode before use? I need to properly work with the wacky stuff customers enter that I currently strip out. Thanks!"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "edited": false, "score": 0, "creation_date": 1493909013, "post_id": 43776481, "comment_id": 74612457, "body": "@TimothyB. You&#39;ve got it backwards. You need to <i>en</i>code before storing it in the database and <i>de</i>code when you pull it back out again. If you&#39;re using DBI and your database and database handle are set up properly, this is done for you."}, {"owner": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "edited": false, "score": 0, "creation_date": 1493912414, "post_id": 43776481, "comment_id": 74615076, "body": "Thanks! Here&#39;s what I ended up with. DBI connection uses mysql_enable_utf8. Decode untainted param() input. Write to database. Read from database. Encode and this displays properly in HTML. Bonus: I can search MySQL for &quot;nino&quot; (plain text) and it matches. I have this up and running. I mention it here in case I&#39;m still doing something wrong."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "edited": false, "score": 0, "creation_date": 1493922498, "post_id": 43776481, "comment_id": 74621090, "body": "@TimothyB. Since it&#39;s DB a lot gets done for us as Matt says, but keep your eyes open.  In your program you want to decode everything that comes in, for processing, and then encode it for output.  Make sure that your HTML specifies encodings as well. What you say sounds good."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "edited": false, "score": 0, "creation_date": 1493964923, "post_id": 43776481, "comment_id": 74635586, "body": "@TimothyB.  I forgot to say -- I&#39;ve updated the post, with more suitable references, and with needed <code>\\p{Mn}</code> (non-spacing mark) instead of <code>\\p{M}</code> (mark)."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 7, "last_activity_date": 1547879818, "last_edit_date": 1547879818, "creation_date": 1493882746, "answer_id": 43776481, "question_id": 43771707, "link": "https://stackoverflow.com/questions/43771707/strip-string-but-allow-umlauts/43776481#43776481", "title": "Strip string but allow umlauts", "body": "<p>For the direct question, you may simply need <code>\\p{L}</code> (Letter) <a href=\"http://perldoc.perl.org/perlunicode.html#Unicode-Character-Properties\" rel=\"nofollow noreferrer\">Unicode Character Property</a></p>\n\n<p>However, more importantly, <em>decode all your input and encode output</em>.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse utf8;   # allow non-ascii (UTF-8) characters in the source\n\nuse open ':std', ':encoding(UTF-8)';  # for standard streams\n\nuse Encode qw(decode_utf8);           # @ARGV escapes the above\n\nmy $string = 'El Guap\u00f6';\nif (@ARGV) {\n    $string = join ' ', map { decode_utf8($_) } @ARGV;\n}\nsay \"Input:     $string\";\n\n$string =~ s/[^\\p{L} ]//g;\n\nsay \"Processed: $string\";\n</code></pre>\n\n<p>When run as &nbsp; <code>script.pl 123 El Guap\u00f6=_</code></p>\n\n<pre>\nInput:     123 El Guap\u00f6=_\nProcessed:  El Guap\u00f6\n</pre>\n\n<p>I've used the \"blanket\" <code>\\p{L}</code> property (<em>Letter</em>), as specific description is lacking; adjust if/as needed. The Unicode properties provide a lot, see the link above and the complete list at <a href=\"https://perldoc.perl.org/perluniprops.html\" rel=\"nofollow noreferrer\">perluniprops</a>.</p>\n\n<p>The space between <code>123 El</code> remains, perhaps strip leading (and trailing) spaces in the end.</p>\n\n<p>Note that there is also <code>\\P{L}</code>, where the capital <code>P</code> indicates negation. </p>\n\n<hr>\n\n<p>The above simple-minded <code>\\pL</code> won't work with <a href=\"https://en.wikipedia.org/wiki/Combining_Diacritical_Marks\" rel=\"nofollow noreferrer\">Combining Diacritical Marks</a>, as the mark will be removed as well. Thanks to <a href=\"https://stackoverflow.com/users/632407/jm666\">jm666</a> for pointing this out.</p>\n\n<p>This happens when an accented \"logical\" character (what appears as a single character) is written using separate characters for its base and for non-spacing mark(s) (<em>combining accents</em>). Often a single character for it (<a href=\"http://perldoc.perl.org/perlunicode.html#Extended-Grapheme-Clusters-%28Logical-characters%29\" rel=\"nofollow noreferrer\">extended grapheme cluster</a>) with its codepoint also exists. </p>\n\n<p>Example: in <code>ni\u00f1o</code> the <code>\u00f1</code> is <code>U+OOF1</code> but it can also be written as <code>\"n\\x{303}\"</code>.</p>\n\n<p>To keep accents written this way add <code>\\p{Mn}</code> (<code>\\p{NonspacingMark}</code>) to the character class</p>\n\n<pre><code>my $string = \"El Guap\u00f6=_ ni\\N{U+00F1}o.* nin\\x{303}o+^\";\nsay $string;\n\n(my $nodiac = $string) =~ s/[^\\pL ]//g;      #/ naive, accent chars get removed\nsay $nodiac;\n\n(my $full = $string) =~ s/[^\\pL\\p{Mn} ]//g;  # add non-spacing mark\nsay $full;\n</code></pre>\n\n<p>Output</p>\n\n<pre>\nEl Guap\u00f6=_  ni\u00f1o.* ni\u00f1o+^\nEl Guap\u00f6 ni\u00f1o nino\nEl Guap\u00f6 ni\u00f1o ni\u00f1o\n</pre>\n\n<p>So you want <code>s/[^\\p{L}\\p{Mn} ]//g</code> in order to keep the combining accents.</p>\n"}], "owner": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "accepted_answer_id": 43776481, "answer_count": 1, "score": 2, "last_activity_date": 1547879818, "creation_date": 1493855048, "question_id": 43771707, "link": "https://stackoverflow.com/questions/43771707/strip-string-but-allow-umlauts", "title": "Strip string but allow umlauts", "body": "<pre><code>#!/usr/bin/perl -T\nuse strict;\nuse warnings;\nuse utf8;\nmy $s = shift || die;\n$s =~ s/[^A-Za-z ]//g;\nprint \"$s\\n\";\nexit;\n\n&gt; ./poc.pl \"El Guap\u00f6\"\nEl Guap\n</code></pre>\n\n<p>Is there a way to modify this Perl code so that various umlauts and character accents are not stripped out? Thanks!</p>\n"}, {"tags": ["perl", "hash", "hashtable"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 3, "creation_date": 1493853622, "post_id": 43771413, "comment_id": 74584354, "body": "Hi and welcome to Stack Overflow! We prefer it if you show what you&#39;ve tried rather than writing all the code for you. What have you tried? <a href=\"http://stackoverflow.com/a/42563133/14660\">You may wish to look at doing this with SQLite</a>."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1493861828, "post_id": 43771413, "comment_id": 74586130, "body": "How big is the file? Are the blocks always grouped by the value in the first column and separated by <code>\\n\\n</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 6562915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbd4697b11ef770ba1224a511c43e3d3?s=128&d=identicon&r=PG&f=1", "display_name": "Leonardo Berbert", "link": "https://stackoverflow.com/users/6562915/leonardo-berbert"}, "edited": false, "score": 0, "creation_date": 1493858548, "post_id": 43771945, "comment_id": 74585304, "body": "The only problem is that it should have generated one row for each record, but two lines were generated for one of the records. See below: 21998|||70049,,20170428154818,20170527235959; 70070,,20170428154739,20170527235959; 70071,,20170428154739,20170527235959||| 21998|||70049,,20170428154818,20170527235959; 70070,,20170428154739,20170527235959; 70071,,20170428154739,20170527235959||| 21998|||70049,,20170428154818,20170527235959; 70070,,20170428154739,20170527235959; 70071,,20170428154739,20170527235959||| 21997|||70049,,20170428154818,20170527235959; 70070,,20170428154739,20170527235959|||"}, {"owner": {"reputation": 74, "user_id": 4109113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88acb982d7434e525fb84036d8dd74fa?s=128&d=identicon&r=PG&f=1", "display_name": "bislinks", "link": "https://stackoverflow.com/users/4109113/bislinks"}, "reply_to_user": {"reputation": 15, "user_id": 6562915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbd4697b11ef770ba1224a511c43e3d3?s=128&d=identicon&r=PG&f=1", "display_name": "Leonardo Berbert", "link": "https://stackoverflow.com/users/6562915/leonardo-berbert"}, "edited": false, "score": 0, "creation_date": 1493858851, "post_id": 43771945, "comment_id": 74585377, "body": "It worked perfectly for me from what you gave: I got only two records/lines"}, {"owner": {"reputation": 15, "user_id": 6562915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbd4697b11ef770ba1224a511c43e3d3?s=128&d=identicon&r=PG&f=1", "display_name": "Leonardo Berbert", "link": "https://stackoverflow.com/users/6562915/leonardo-berbert"}, "edited": false, "score": 1, "creation_date": 1493859005, "post_id": 43771945, "comment_id": 74585417, "body": "The Error was in my test mass with the ^ M in the content. Now it worked perfectly. Thanks for the help."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1493884723, "post_id": 43771945, "comment_id": 74594920, "body": "Please use modern best practices (lexical filehandles and three-arg <code>open()</code>) in example code. Also, you should consider reading the file a line at a time instead of reading it all into <code>@file</code>."}], "tags": [], "owner": {"reputation": 74, "user_id": 4109113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88acb982d7434e525fb84036d8dd74fa?s=128&d=identicon&r=PG&f=1", "display_name": "bislinks", "link": "https://stackoverflow.com/users/4109113/bislinks"}, "is_accepted": false, "score": -1, "last_activity_date": 1493857488, "creation_date": 1493857488, "answer_id": 43771945, "question_id": 43771413, "link": "https://stackoverflow.com/questions/43771413/doubts-group-data/43771945#43771945", "title": "Doubts group data", "body": "<pre><code>my $unified_output;\nmy %out;\n\nopen(FILE, \"./raw-file.txt\") or die $!;\n    my @file = &lt;FILE&gt;;\nclose FILE;\n\nfor (@file) {       \n    next if $_ =~ /$^/;         \n    my @line = split(/\\|\\|\\|/, $_) if $_;       \n    $out{\"$line[0]\"} .= qq~$line[1]; ~ if $_ and $_ =~ /^$line[0]/;     \n}\n\nfor (keys %out) {\n    $out{$_} =~ s!\\; $!!;\n    $unified_output .= qq~$_|||$out{$_}|||\\n~ if $_ and $out{$_};\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 6562915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbd4697b11ef770ba1224a511c43e3d3?s=128&d=identicon&r=PG&f=1", "display_name": "Leonardo Berbert", "link": "https://stackoverflow.com/users/6562915/leonardo-berbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1493857488, "creation_date": 1493853101, "question_id": 43771413, "link": "https://stackoverflow.com/questions/43771413/doubts-group-data", "title": "Doubts group data", "body": "<p>I need a help with the following problem. I have a file with the following data.</p>\n\n<pre><code>21997|||70049,,20170428154818,20170527235959|||\n21997|||70070,,20170428154739,20170527235959|||\n\n21998|||70049,,20170428154818,20170527235959|||\n21998|||70070,,20170428154739,20170527235959|||\n21998|||70071,,20170428154739,20170527235959|||\n</code></pre>\n\n<p>I need to unify the file as follows.</p>\n\n<pre><code>21997|||70049,,20170502172844,20170531235959; 70070,,20170502172844,20170531235959|||\n\n21998|||70049,,20170502172844,20170531235959; 70070,,20170502172844,20170531235959; 70071,,20170502172844|||\n</code></pre>\n\n<p>Can someone help me please?</p>\n"}, {"tags": ["html", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493852869, "post_id": 43771271, "comment_id": 74584115, "body": "There is no <code>$file</code> variable. I don&#39;t understand your question."}, {"owner": {"reputation": 159, "user_id": 7953993, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/baed6e00580948e99f7df622f59cd066?s=128&d=identicon&r=PG&f=1", "display_name": "PHP Developer", "link": "https://stackoverflow.com/users/7953993/php-developer"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493861907, "post_id": 43771271, "comment_id": 74586154, "body": "I&#39;m sorry. Is variable $html."}, {"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 2, "creation_date": 1493888638, "post_id": 43771271, "comment_id": 74597329, "body": "@PHPDeveloper then correct your question"}], "answers": [{"tags": [], "owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "is_accepted": false, "score": 2, "last_activity_date": 1493872322, "creation_date": 1493872322, "answer_id": 43773935, "question_id": 43771271, "link": "https://stackoverflow.com/questions/43771271/extract-link-from-page-html-with-perl/43773935#43773935", "title": "Extract link from page HTML with Perl", "body": "<p>You can <code>use WWW::Mechanize;</code> to accomplish your task.</p>\n\n<pre><code>my $mech  = WWW::Mechanize-&gt;new();\n\n$mech-&gt;get( $url );     #url to extract links\nmy @links = $mech-&gt;links();\nforeach my $link (@links) {\n     my $curr_url = $link-&gt;url_abs; \n}\n</code></pre>\n\n<p>For complete documentation of this module refer <a href=\"http://search.cpan.org/~oalders/WWW-Mechanize-1.84/lib/WWW/Mechanize.pm\" rel=\"nofollow noreferrer\">WWW::Mechaniize</a></p>\n"}, {"comments": [{"owner": {"reputation": 159, "user_id": 7953993, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/baed6e00580948e99f7df622f59cd066?s=128&d=identicon&r=PG&f=1", "display_name": "PHP Developer", "link": "https://stackoverflow.com/users/7953993/php-developer"}, "edited": false, "score": 0, "creation_date": 1493902056, "post_id": 43778605, "comment_id": 74606914, "body": "I use open( SITE, &quot;&lt; index.html&quot; );  my $html =  do {  \tlocal $/;  \t&lt;SITE&gt;  };\t But not work good! Do you have any opinion?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 159, "user_id": 7953993, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/baed6e00580948e99f7df622f59cd066?s=128&d=identicon&r=PG&f=1", "display_name": "PHP Developer", "link": "https://stackoverflow.com/users/7953993/php-developer"}, "edited": false, "score": 0, "creation_date": 1493902275, "post_id": 43778605, "comment_id": 74607076, "body": "@Developer: My opinion is that you should try the code I suggested. And please don&#39;t just say something &quot;doesn&#39;t work&quot;; it gives us no information whatsoever."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1493889108, "creation_date": 1493889108, "answer_id": 43778605, "question_id": 43771271, "link": "https://stackoverflow.com/questions/43771271/extract-link-from-page-html-with-perl/43778605#43778605", "title": "Extract link from page HTML with Perl", "body": "<p>Your program opens file <code>index.html</code>, reads <em>one line</em> of it into <code>$html</code>, and then tries to parse the string <code>index.html</code> as if it were HTML data</p>\n\n<p>Forget about opening and reading the file; you can get <code>XML::LibXML</code> to do all of that for you, with</p>\n\n<pre><code>my $content =  XML::LibXML-&gt;load_html( location =&gt; 'index.html', recover =&gt; 1 );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 648, "user_id": 1204911, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/49ffe233c02befbec1ec3195553fdec8?s=128&d=identicon&r=PG", "display_name": "toreau", "link": "https://stackoverflow.com/users/1204911/toreau"}, "is_accepted": false, "score": 1, "last_activity_date": 1493906963, "creation_date": 1493906963, "answer_id": 43785236, "question_id": 43771271, "link": "https://stackoverflow.com/questions/43771271/extract-link-from-page-html-with-perl/43785236#43785236", "title": "Extract link from page HTML with Perl", "body": "<p>You can use <a href=\"https://metacpan.org/pod/Mojo::DOM\" rel=\"nofollow noreferrer\">Mojo::DOM</a> (part of <a href=\"https://metacpan.org/pod/Mojolicious\" rel=\"nofollow noreferrer\">Mojolicious</a>) which allows you to use CSS selectors, which I feel is a much better approach;</p>\n\n<pre><code>use Mojo::DOM;\nuse Mojo::File qw( path );\n\nmy $dom = Mojo::DOM-&gt;new( path('index.html')-&gt;slurp );\n\nforeach ( $dom-&gt;find('a')-&gt;each ) {\n    # Do something with $_\n}\n\nmy $html = $dom-&gt;to_string;\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 7953993, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/baed6e00580948e99f7df622f59cd066?s=128&d=identicon&r=PG&f=1", "display_name": "PHP Developer", "link": "https://stackoverflow.com/users/7953993/php-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1493906963, "creation_date": 1493852115, "question_id": 43771271, "link": "https://stackoverflow.com/questions/43771271/extract-link-from-page-html-with-perl", "title": "Extract link from page HTML with Perl", "body": "<p>To extract links from HTML pages use the code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\nuse XML::LibXML;\n\nopen( SITE, \"&lt; index.html\" );\n\nmy $html = &lt;SITE&gt;; # load the HTML file\n\nmy $content = 'XML::LibXML'-&gt;load_html(string =&gt; \"index.html\", recover =&gt; 1);\n\nmy @del = qw( Contact Tables );\nmy $condition = join ' or ', map \"text()='$_'\", @del;\n\nfor my $anch ($content-&gt;findnodes(\"//a[$condition]/..\")) {\n$anch-&gt;parentNode-&gt;removeChild($anch);\n}\nopen (NOTEPAD, \"&gt;&gt; index.html\"); \n\nprint NOTEPAD \"$content\"; \n\nclose(NOTEPAD);\n</code></pre>\n\n<p>My problem is use the $file variable to read the contents of HTML page, it not work.</p>\n\n<p>If I use the HTML tags inside the $file variable it works. But not is solution.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1493848879, "post_id": 43770694, "comment_id": 74582823, "body": "You need to <a href=\"https://regex101.com/r/xl5VOT/1\" rel=\"nofollow noreferrer\">make <code>(?:WORDS: )?</code> optional</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1493854465, "post_id": 43770694, "comment_id": 74584562, "body": "Are you showing all the possible strings you will encounter ? Then what is this supposed to match <code>[^:]*</code>. Btw, <code>(?|&quot;([^&quot;]*)|([^:]*))</code> will match <i>nothing</i> if given the chance. And <code>i really dont want to go with &quot;global&quot; match</code> doesn&#39;t relate here unless you have a single string with all your data in it."}, {"owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1493913534, "post_id": 43770694, "comment_id": 74615947, "body": "@WiktorStribi\u017cew Thank you so much. Please put that in answer section so i can accept it."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1493914351, "post_id": 43770694, "comment_id": 74616508, "body": "@Raja: Posted. Please check."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1493934856, "post_id": 43770694, "comment_id": 74627426, "body": "@Raja: Glad it worked for you. If you find it helpful, please also consider upvoting."}], "answers": [{"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1493914258, "creation_date": 1493914258, "answer_id": 43787976, "question_id": 43770694, "link": "https://stackoverflow.com/questions/43770694/regex-match-two-words-or-at-least-one/43787976#43787976", "title": "Regex match two words or at least one", "body": "<p>You need to make <code>WORDS:&lt;space&gt;</code>  optional by enclosing it with an <em>optional</em> non-capturing group:</p>\n\n<pre><code>1\\.2\\.3\\.4\\.(\\d+) = (?:WORDS: )?(?|\"([^\"]*)|([^:]*))\n</code></pre>\n\n<p>See the <a href=\"https://regex101.com/r/xl5VOT/1\" rel=\"nofollow noreferrer\">regex demo</a>.</p>\n\n<p>The <code>(?:WORDS: )?</code> matches 1 or 0 sequences (due to the <code>?</code> quantifier) of <code>WORDS:</code> substring followed with a space.</p>\n"}], "owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1031, "favorite_count": 0, "accepted_answer_id": 43787976, "answer_count": 1, "score": 2, "last_activity_date": 1493914258, "creation_date": 1493848747, "last_edit_date": 1493848968, "question_id": 43770694, "link": "https://stackoverflow.com/questions/43770694/regex-match-two-words-or-at-least-one", "title": "Regex match two words or at least one", "body": "<p>I have problem with my regex string. I have two combinations of strings as follows,</p>\n\n<pre><code>2.3.8.2.2.1.2.3.4.12345 = WORDS: \"String to capture\"\n2.3.8.2.2.1.2.3.4.12345 = \"\"\n</code></pre>\n\n<p>Regex: </p>\n\n<pre><code>1\\.2\\.3\\.4\\.(\\d+) = WORDS: (?|\"([^\"]*)|([^:]*))\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/kQ3wT5/8\" rel=\"nofollow noreferrer\">https://regex101.com/r/kQ3wT5/10</a> - matching </p>\n\n<p><a href=\"https://regex101.com/r/kQ3wT5/9\" rel=\"nofollow noreferrer\">https://regex101.com/r/kQ3wT5/9</a> - Not matching</p>\n\n<p>This regex is matching only for the first string and not for the second where i have empty string. So the regex has to match on both scenario. And one more thing i really dont want to go with \"global\" match.</p>\n\n<p>Please help me on this. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1493842853, "post_id": 43769151, "comment_id": 74580010, "body": "Constants are just functions in Perl. They return values. Try it. It will work."}, {"owner": {"reputation": 1091, "user_id": 4474629, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e3d1d6e41980939611b75370816b8843?s=128&d=identicon&r=PG&f=1", "display_name": "Little Code", "link": "https://stackoverflow.com/users/4474629/little-code"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493844505, "post_id": 43769151, "comment_id": 74580864, "body": "@simbabque See later comment. I meant INSIDE the template, not a constant as a template !"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1493844683, "post_id": 43769151, "comment_id": 74580953, "body": "I have not cast a vote yet. I think the question is not bad, but didn&#39;t have enough information. It now has more, which is good."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493846715, "post_id": 43769151, "comment_id": 74581971, "body": "So, you are just asking how to interpolate a compile time constant produced using <code>use constant</code> into a string ... That really does not have anything to do with <code>pack</code>/<code>unpack</code>."}], "answers": [{"tags": [], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "is_accepted": true, "score": 1, "last_activity_date": 1493877626, "last_edit_date": 1493877626, "creation_date": 1493845004, "answer_id": 43769885, "question_id": 43769151, "link": "https://stackoverflow.com/questions/43769151/using-constants-inside-perl-pack-unpack-template-strings/43769885#43769885", "title": "Using constants inside perl pack/unpack template strings", "body": "<p>You may you <code>Const::Fast</code> module.</p>\n\n<pre><code>use Const::Fast;\nconst my $foo =&gt; 'a scalar value';\nprint \"X${foo}X\\n\";\n</code></pre>\n"}], "owner": {"reputation": 1091, "user_id": 4474629, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e3d1d6e41980939611b75370816b8843?s=128&d=identicon&r=PG&f=1", "display_name": "Little Code", "link": "https://stackoverflow.com/users/4474629/little-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 43769885, "answer_count": 1, "score": 0, "last_activity_date": 1493963268, "creation_date": 1493842326, "last_edit_date": 1493963268, "question_id": 43769151, "link": "https://stackoverflow.com/questions/43769151/using-constants-inside-perl-pack-unpack-template-strings", "title": "Using constants inside perl pack/unpack template strings", "body": "<p>Is it possible to use constants in <code>pack()</code> and <code>unpack()</code> templates ?</p>\n\n<p>I've had a quick look through the docs (<a href=\"http://perldoc.perl.org/functions/pack.html\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/functions/pack.html</a>) and whilst I see you can use standard variables (i.e. <code>$foo $bar</code>), I can't see any reference to using constants.</p>\n\n<p>For the downvoters: I meant <strong><em>INSIDE</em></strong> the template....</p>\n\n<p>e.g. instead of <code>pack(\"a$civ a*......\"</code> use a constant instead of <code>$civ</code></p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 7474325, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-HRAn73LrBXc/AAAAAAAAAAI/AAAAAAAAABo/A31S4W4vv2k/photo.jpg?sz=128", "display_name": "Gopal Krishna", "link": "https://stackoverflow.com/users/7474325/gopal-krishna"}, "edited": false, "score": 0, "creation_date": 1493838113, "post_id": 43767101, "comment_id": 74577552, "body": "Thanks for the reply.I have edited the question.please guide me"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 61, "user_id": 7474325, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-HRAn73LrBXc/AAAAAAAAAAI/AAAAAAAAABo/A31S4W4vv2k/photo.jpg?sz=128", "display_name": "Gopal Krishna", "link": "https://stackoverflow.com/users/7474325/gopal-krishna"}, "edited": false, "score": 1, "creation_date": 1493839608, "post_id": 43767101, "comment_id": 74578301, "body": "Perl doesn&#39;t have macros. If you need that level of optimization, you shouldn&#39;t be using Perl in the first place."}, {"owner": {"reputation": 61, "user_id": 7474325, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-HRAn73LrBXc/AAAAAAAAAAI/AAAAAAAAABo/A31S4W4vv2k/photo.jpg?sz=128", "display_name": "Gopal Krishna", "link": "https://stackoverflow.com/users/7474325/gopal-krishna"}, "edited": false, "score": 0, "creation_date": 1493871341, "post_id": 43767101, "comment_id": 74588497, "body": "Yeah I know,but what is the closest way to implement this perl.Like using const SWITCH =&gt; 1 or something..."}, {"owner": {"reputation": 61, "user_id": 7474325, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-HRAn73LrBXc/AAAAAAAAAAI/AAAAAAAAABo/A31S4W4vv2k/photo.jpg?sz=128", "display_name": "Gopal Krishna", "link": "https://stackoverflow.com/users/7474325/gopal-krishna"}, "edited": false, "score": 0, "creation_date": 1493872232, "post_id": 43767101, "comment_id": 74588751, "body": "Can you tell me what the first check is doing? I dont know about ? : operator"}, {"owner": {"reputation": 476, "user_id": 498267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQ8zV.png?s=128&g=1", "display_name": "Ouki", "link": "https://stackoverflow.com/users/498267/ouki"}, "edited": false, "score": 0, "creation_date": 1493882167, "post_id": 43767101, "comment_id": 74593300, "body": "This &quot;?&quot; and &quot;:&quot; is called the ternary operator and it is basically a &quot;if...else&quot; statement. In this case, <code>$var</code> value set the &quot;if&quot; expression."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493912794, "post_id": 43767101, "comment_id": 74615379, "body": "Ouki is mistaken. <code>?:</code> is <i>a</i> ternary operator called the <i>conditional operator</i>. It&#39;s an if-then-else that can be used as follows: <code>my $x = condition() ? 4 : 5;</code>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1524592738, "last_edit_date": 1524592738, "creation_date": 1493834663, "answer_id": 43767101, "question_id": 43766887, "link": "https://stackoverflow.com/questions/43766887/multiple-conditions-check-in-perl/43767101#43767101", "title": "Multiple Conditions Check in Perl", "body": "<p>This performs the check as you described it in English:</p>\n\n<pre><code>if ($var ? $a &amp;&amp; $b : $a)\n</code></pre>\n\n<p>This is an equivalent check:</p>\n\n<pre><code>if ($a &amp;&amp; ( !$var || $b ))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1493835173, "post_id": 43767196, "comment_id": 74575829, "body": "One shouldn&#39;t use <code>== 0</code> and <code>== 1</code> to check for truth."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1493835232, "post_id": 43767196, "comment_id": 74575869, "body": "The <code>$var == 1 &amp;&amp;</code> is completely useless."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1493835334, "post_id": 43767196, "comment_id": 74575921, "body": "Agree, but OP does not say that he is checking for truth ( he might be checking numerical values ). And yes the statement is completely useless for a machine, but maybe not for a human? So I included it for readability"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493835587, "post_id": 43767196, "comment_id": 74576058, "body": "If you look at the comments and code, it&#39;s clear all three vars can only be 1 or 0. Even if you don&#39;t consider clear, it&#39;s almost certain, and thus an explanation (that you&#39;d write different code if they were boolean) is in order."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493835630, "post_id": 43767196, "comment_id": 74576081, "body": "How is <code>$var == 1 &amp;&amp; $b == 1</code> more readable for a human than <code>$b == 1</code>?"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1493834971, "creation_date": 1493834971, "answer_id": 43767196, "question_id": 43766887, "link": "https://stackoverflow.com/questions/43766887/multiple-conditions-check-in-perl/43767196#43767196", "title": "Multiple Conditions Check in Perl", "body": "<pre><code>if ($a == 1) {\n    if( ($var != 1) || ($var == 1 &amp;&amp; $b == 1)  ) {\n        say \" hey ,it worked \" ;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 7474325, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-HRAn73LrBXc/AAAAAAAAAAI/AAAAAAAAABo/A31S4W4vv2k/photo.jpg?sz=128", "display_name": "Gopal Krishna", "link": "https://stackoverflow.com/users/7474325/gopal-krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1177, "favorite_count": 0, "accepted_answer_id": 43767101, "answer_count": 2, "score": -2, "last_activity_date": 1524592738, "creation_date": 1493833888, "last_edit_date": 1493838047, "question_id": 43766887, "link": "https://stackoverflow.com/questions/43766887/multiple-conditions-check-in-perl", "title": "Multiple Conditions Check in Perl", "body": "<p>I am trying to write a Perl program.The program is simple.If the variables $a and $b are equal to 1 then something is to be printed.But the catch is the program has to check for the value of $b only if $var == 1. Otherwise,if $ $var == 0,only $a value has to be checked.</p>\n\n<p>I have tried to write it by using nested if.But I am getting errors.(I tried to do it the same way how it can be done in C by using MACROS.)</p>\n\n<pre><code>my $var = 1 ;\n\nmy $a = 1 ;\nmy $b = 1 ;\n\nif(($a == 1)\n{\nif($var == 1 )\n{\n&amp;&amp; ($b == 1)\n}\n\n)\n\nprint \" hey ,it worked \" ;\n\n}\n</code></pre>\n\n<p>Case:1 ) So,$var==1 ,it has to check for the value of $b before printing.</p>\n\n<pre><code>my $var = 1 ;\n\nmy $a = 1 ;\nmy $b = 0 ;\n\nif(($a == 1)\n{\nif($var == 1 )\n{\n&amp;&amp; ($b == 1)\n}\n\n)\n\nprint \" hey ,it worked \" ;\n\n}\n</code></pre>\n\n<p>Case:2 ) $b==0,nothing gets printed.</p>\n\n<pre><code>my $var = 0 ;\n\nmy $a = 1 ;\nmy $b = 1 ;\n\nif(($a == 1)\n{\nif($var == 1 )\n{\n&amp;&amp; ($b == 1)\n}\n\n)\n\nprint \" hey ,it worked \" ;\n\n}\n</code></pre>\n\n<p>Case : 3 )$var==0,it shouldn't check for the value of $b and the line is printed.\nI should get the above mentioned results.But I am not getting how to do it.Kindly Help.</p>\n\n<p>Thanks for the replies.But you did not understand my question.What I really want to do is ,way back I had written a program in C where I will define the macro in .h file something like,</p>\n\n<pre><code>#define SWITCH 1\n</code></pre>\n\n<p>In .c file,I will check for the condition.</p>\n\n<pre><code> if((a == 1)\n#if SWITCH \n        &amp;&amp; (b == 1)    \n        )\n       { \n        print \" hey ,it worked \" ; \n       }\n</code></pre>\n\n<p>So,here $b will be checked ,only if the macro value SWITCH is 1 in .h file.If the value is changed to 0,</p>\n\n<pre><code>#define SWITCH 0\n</code></pre>\n\n<p>then print statement depends only on the value of a and b value is not checked.I want to do the same thing in Perl.</p>\n"}, {"tags": ["perl", "upload", "cgi", "temp"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1493834557, "post_id": 43766230, "comment_id": 74575459, "body": "<a href=\"https://metacpan.org/source/LEEJO/CGI-4.36/lib/CGI.pm#L1025\" rel=\"nofollow noreferrer\">metacpan.org/source/LEEJO/CGI-4.36/lib/CGI.pm#L1025</a> so it should be <code>$ENV{TEMP}</code> for windows and <code>$ENV{TMPDIR}</code> otherwise."}], "answers": [{"tags": [], "owner": {"reputation": 259, "user_id": 1257259, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/744ca01142ae95c73b605425164fcd72?s=128&d=identicon&r=PG", "display_name": "Denis BUCHER", "link": "https://stackoverflow.com/users/1257259/denis-bucher"}, "is_accepted": true, "score": 1, "last_activity_date": 1493889493, "creation_date": 1493889493, "answer_id": 43778762, "question_id": 43766230, "link": "https://stackoverflow.com/questions/43766230/perl-cgi-change-location-for-temporary-uploaded-files/43778762#43778762", "title": "perl cgi - change location for temporary uploaded files", "body": "<p>Thanks a lot, \u0421\u0443\u0445\u043e\u043927, for your comment, the solution is very simple (once you know it) I just replaced the code above with :</p>\n\n<pre><code>$ENV{TMPDIR}=$temp_dir;\n</code></pre>\n"}], "owner": {"reputation": 259, "user_id": 1257259, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/744ca01142ae95c73b605425164fcd72?s=128&d=identicon&r=PG", "display_name": "Denis BUCHER", "link": "https://stackoverflow.com/users/1257259/denis-bucher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 768, "favorite_count": 0, "accepted_answer_id": 43778762, "answer_count": 1, "score": 1, "last_activity_date": 1493889493, "creation_date": 1493831500, "question_id": 43766230, "link": "https://stackoverflow.com/questions/43766230/perl-cgi-change-location-for-temporary-uploaded-files", "title": "perl cgi - change location for temporary uploaded files", "body": "<p>Having moved an existing script to a new server, a function is not working anymore :</p>\n\n<pre><code>$CGITempFile::TMPDIRECTORY = $TempFile::TMPDIRECTORY = $temp_dir;\n</code></pre>\n\n<p>I discovered that : \"Changes in temporary file handling (v4.05+) : CGI.pm had its temporary file handling significantly refactored, this logic is now all deferred to File::Temp [...]\" that you can fully read here : <a href=\"http://docs.activestate.com/activeperl/5.22/lib/CGI.html\" rel=\"nofollow noreferrer\">Link to CGI doc</a></p>\n\n<p>Consequently I search in the documentation of File::Temp (and many forums) but found nothing on how to change the path for temporary files.</p>\n\n<p>Any help would be highly appreciated !</p>\n\n<p>P. S. For the context it looks like this</p>\n\n<pre><code>use CGI::Carp qw(fatalsToBrowser);\nuse CGI;\n[...]\n$CGITempFile::TMPDIRECTORY = $TempFile::TMPDIRECTORY = $temp_dir;\n[...]\nmy $cg = new CGI;\n</code></pre>\n"}, {"tags": ["perl", "db2", "exponential"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 2, "creation_date": 1493830053, "post_id": 43765741, "comment_id": 74572839, "body": "Don&#39;t interpolate <code>$capacity</code> into the SQL. Instead, use <a href=\"https://metacpan.org/pod/DBI#Placeholders-and-Bind-Values\" rel=\"nofollow noreferrer\">placeholders</a>."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1493830383, "post_id": 43765741, "comment_id": 74573037, "body": "<code>SELECT MEASUREMENT FROM TABLE WHERE CAPACITY=(SELECT CAPACITY FROM TABLE where ..?)</code> if you want to leave all decimal numbers at <code>db2</code> level (no need to fetch capacity)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493831316, "post_id": 43765741, "comment_id": 74573579, "body": "If you <i>really</i> have <code>5.4835615662+003</code> then something has gone wrong and you need to show exactly how you got that string from the database. It should be <code>5.4835615662E+003</code>. Is that a mistake, or is the value really like that?"}, {"owner": {"reputation": 16538, "user_id": 1227152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4hr5l.jpg?s=128&g=1", "display_name": "mustaccio", "link": "https://stackoverflow.com/users/1227152/mustaccio"}, "edited": false, "score": 2, "creation_date": 1493838182, "post_id": 43765741, "comment_id": 74577577, "body": "What&#39;s the column data type? &quot;numeric&quot; != &quot;floating point&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1493830672, "post_id": 43765833, "comment_id": 74573206, "body": "Is there some guarantee that perl will always follow db2 idea of what is the exact decimal value?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1493832020, "post_id": 43765833, "comment_id": 74573993, "body": "@\u0421\u0443\u0445\u043e\u043927: Perl DBI will pass a binary floating point value to the SQL engine for comparison. However, ther is no guarantee that a value that has been converted to a text string and back again (as must have happened here since Perl will not show <code>5.4835615662+003</code> when asked to print <code>5483.5615662</code>) will be equal to the original value. Floating-point comparisons require an exact bit-for-bit equality, and a discrepancy that isn&#39;t visible in printed output can easily cause a test for equality to fail."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1493837325, "post_id": 43765833, "comment_id": 74577083, "body": "Your diagnosis is wrong. <code>perl -E &#39;$x = 5483.5615662; say qq{$x};&#39;</code> prints <code>5483.5615662</code> as expected. Only <code>sprintf &#39;%e&#39;</code> will result in that format. There <i>must</i> be some code that forces scientific notation on that value, converting it to a string with only 11 significant digits, which is <i>bound</i> to be unequal (when converted back to a float) to the original database value."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493838290, "post_id": 43765833, "comment_id": 74577633, "body": "@Borodin Note <code>perl -E &quot;say 1 if &#39;5.4835615662E+003&#39;==5483.5615662&quot;</code> ... If the value is passed in a placeholder, if the column in the database is numeric, the driver will pass along a number. On the other hand, if the entire statement is a string, then we are relying on DB2&#39;s parser to convert <code>5.4835615662E+003</code> correctly to a number. I&#39;d rather take that step out of the equation. Of course, I do not have access to a DB2 database nor do I have any experience with it, so I don&#39;t know what happens."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1493838784, "post_id": 43765833, "comment_id": 74577885, "body": "@Sinan&#220;n&#252;r: I agree.  I was challenging <i>&quot;You are interpolating the value of $capacity into a string&quot;</i>, assuming you meant that the exponent was being added by stringification. I showed a counter example to that. But this whole thing is a complication of the old <i>never compare floating point values for equality</i>, and I wouldn&#39;t expect a Perl value\u2014even passed by placeholder\u2014to be equal to the database value where it originated."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1493839110, "post_id": 43765833, "comment_id": 74578042, "body": "@Sinan&#220;n&#252;r: The <a href=\"http://stackoverflow.com/questions/43765741/exponential-values-manipulation-in-perl/43766140?noredirect=1#comment74573037_43765741\">comment from <b>\u0421\u0443\u0445\u043e\u043927</b></a> is the only resolution possible, but even then I wouldn&#39;t expect values from different tables, which represent the same value only nominally, to be identical. This is why we have ID fields on tables."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 3, "last_activity_date": 1493838055, "last_edit_date": 1493838055, "creation_date": 1493830171, "answer_id": 43765833, "question_id": 43765741, "link": "https://stackoverflow.com/questions/43765741/exponential-values-manipulation-in-perl/43765833#43765833", "title": "Exponential values manipulation in perl", "body": "<p>You are interpolating the value of <code>$capacity</code> into a string. Instead, you should use <a href=\"https://metacpan.org/pod/DBI#Placeholders-and-Bind-Values\" rel=\"nofollow noreferrer\">placeholders</a> as in:</p>\n\n<pre><code> my $sth = $dbh-&gt;prepare(q{SELECT MEASUREMENT FROM TABLE WHERE CAPACITY=?});\n $sth-&gt;execute($capacity);\n</code></pre>\n\n<p>It is hard to say if there are any other problems because the code snippets you provide don't really do anything.</p>\n\n<p>It is likely that the number stored in the database is not exactly <code>5483.5615662</code> and that is just the displayed string when you query it.</p>\n\n<p>If possible, I would recommend taking @\u0421\u0443\u0445\u043e\u043927's advice and letting the database do the work for you:</p>\n\n<pre><code>SELECT MEASUREMENT FROM TABLE\nWHERE CAPACITY = (SELECT CAPACITY FROM TABLE where ..?)\n</code></pre>\n\n<p>Alternatively, decide ahead of time how many digits past the decimal point really matter and use <a href=\"https://www.ibm.com/support/knowledgecenter/en/SSEPGG_9.8.0/com.ibm.db2.luw.sql.ref.doc/doc/r0000845.html\" rel=\"nofollow noreferrer\">ROUND</a> or similar functionality:</p>\n\n<pre><code> my $sth = $dbh-&gt;prepare(q{\n     SELECT MEASUREMENT FROM TABLE\n     WHERE ROUND(CAPACITY, 6)=ROUND(?, 6)\n });\n $sth-&gt;execute($capacity);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 6171224, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--HOQpJyYMoQ/AAAAAAAAAAI/AAAAAAAAADo/hRBtWndcISU/photo.jpg?sz=128", "display_name": "Sharda Deshmukh", "link": "https://stackoverflow.com/users/6171224/sharda-deshmukh"}, "edited": false, "score": 0, "creation_date": 1493832643, "post_id": 43766140, "comment_id": 74574337, "body": "my mistake it is 5.4835615662E+003 only.but when I use it in where condition it does not return any result as it expects  5483.5615662"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5, "user_id": 6171224, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--HOQpJyYMoQ/AAAAAAAAAAI/AAAAAAAAADo/hRBtWndcISU/photo.jpg?sz=128", "display_name": "Sharda Deshmukh", "link": "https://stackoverflow.com/users/6171224/sharda-deshmukh"}, "edited": false, "score": 1, "creation_date": 1493836472, "post_id": 43766140, "comment_id": 74576609, "body": "@ShardaDeshmukh: I think your diagnosis is wrong. Comparing floating-point numbers for equality is inadvisable, especially when one of the values has been converted to a string and back. Neither Perl nor any SQL I know would return <code>5.4835615662E+003</code> for <code>5483.5615662</code>, and somehow you have converted the value to a string with that format. You show no real code, and it is impossible to know how that has happened. Have you read the link in my answer?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1493838539, "last_edit_date": 1592644375, "creation_date": 1493831219, "answer_id": 43766140, "question_id": 43765741, "link": "https://stackoverflow.com/questions/43765741/exponential-values-manipulation-in-perl/43766140#43766140", "title": "Exponential values manipulation in perl", "body": "\n<p>Please take a look at <a href=\"https://stackoverflow.com/questions/8839460/why-doesnt-this-sql-query-return-any-results-comparing-floating-point-numbers\"><em>Why doesn't this sql query return any results comparing floating point numbers?</em></a></p>\n<p>I'm concerned about the <code>5.4835615662+003</code> that you show in your question. That isn't a valid representation of a number, and it means just <code>5.4835615662 + 3</code>. You need an <code>E</code> or an <code>e</code> before the exponent to use it as it is</p>\n<p>There is also an issue with <a href=\"http://floating-point-gui.de/errors/comparison/\" rel=\"nofollow noreferrer\">comparing floating-point values</a>, whereby two numbers that are essentially equal may have a slightly different binary representation, and so will not compare as equal. If your value has been converted to a string (and that seems highly likely, as Perl will not use an exponent to display 5483.5615662 unless told to do so) and back again to floating point, then it is extremely unlikely to result in <em>exactly</em> the same value. Your comparisons will always fail</p>\n<p>In Perl, and most other languages, a numeric values has no specific format. For example, if I run this</p>\n<pre class=\"lang-none prettyprint-override\"><code>perl -E 'say 5.4835615662E+003'\n</code></pre>\n<p>I get the output</p>\n<pre class=\"lang-none prettyprint-override\"><code>5483.5615662\n</code></pre>\n<p>showing that the two <em>string</em> representations are equivalent</p>\n<p>It would help to see exactly how you got the value of <code>$capacity</code> from the database, because if it were a simple number then it wouldn't use the scientific representation. You would have to use <code>sprintf</code> to get what you have shown</p>\n<p>SQL is the same and doesn't care about the format of the number as long as it's valid, so if you wrote</p>\n<pre class=\"lang-none prettyprint-override\"><code>SELECT measurement FROM table WHERE capacity = 5.4835615662E+003\n</code></pre>\n<p>then you would get a result where <code>capacity</code> is <em><strong>exactly</strong></em> equal to that value. But since it has been trimmed to eleven significant digits, you are hugely unlikely to find the record that the value came from, unless it contains <code>5483.56156620000000000</code></p>\n<br/>\n<hr />\n<h3>Update</h3>\n<p>If I run</p>\n<pre class=\"lang-none prettyprint-override\"><code>perl -MMath::Trig=pi -E 'for (0 .. 20) { $x = pi * 10**$_; say qq{$x}; }'\n</code></pre>\n<p>I get this result</p>\n<pre class=\"lang-none prettyprint-override\"><code>3.14159265358979\n31.4159265358979\n314.159265358979\n3141.59265358979\n31415.9265358979\n314159.265358979\n3141592.65358979\n31415926.5358979\n314159265.358979\n3141592653.58979\n31415926535.8979\n314159265358.979\n3141592653589.79\n31415926535897.9\n314159265358979\n3.14159265358979e+015\n3.14159265358979e+016\n3.14159265358979e+017\n3.14159265358979e+018\n3.14159265358979e+019\n3.14159265358979e+020\n</code></pre>\n<p>So by default Perl <em>won't</em> resort to using scientific notation until the value reaches 10<sup>15</sup>. It clearly doesn't apply to <code>5483.5615662</code>. Something has coerced the floating-point value in the question to a much less precise string in scientific notation. Comparing that for equality doesn't stand a chance of succeeding</p>\n"}], "owner": {"reputation": 5, "user_id": 6171224, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--HOQpJyYMoQ/AAAAAAAAAAI/AAAAAAAAADo/hRBtWndcISU/photo.jpg?sz=128", "display_name": "Sharda Deshmukh", "link": "https://stackoverflow.com/users/6171224/sharda-deshmukh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 516, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1493838539, "creation_date": 1493829885, "last_edit_date": 1493832680, "question_id": 43765741, "link": "https://stackoverflow.com/questions/43765741/exponential-values-manipulation-in-perl", "title": "Exponential values manipulation in perl", "body": "<p>I have a select statement which return capacity as exponential value e.g. </p>\n\n<pre><code>Capacity=5.4835615662E+003\n</code></pre>\n\n<p>in Perl code</p>\n\n<p>I am using a db2 database, and if I explicitly run a query in database it returns </p>\n\n<pre><code>5483.5615662\n</code></pre>\n\n<p>but when I use next select query when I use capacity value in condition it doesn't match</p>\n\n<p>e.g. pseudo code is as below,</p>\n\n<pre><code>my $capacity = 'SELECT capacity FROM table';\n\n# it returns $capacity = 5.4835615662E+003\n\nmy $result = \"SELECT MEASUREMENT FROM TABLE WHERE CAPACITY = $capacity\";\n</code></pre>\n\n<p>Here <code>$capacity</code> is <code>5.4835615662E+003</code>, so it does not match any row in the table. It should be <code>5483.5615662</code>.</p>\n\n<p>How to convert exponential value to float without rounding off?</p>\n"}, {"tags": ["arrays", "perl", "csv"], "answers": [{"tags": [], "owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "is_accepted": false, "score": 3, "last_activity_date": 1493828892, "creation_date": 1493828892, "answer_id": 43765475, "question_id": 43765415, "link": "https://stackoverflow.com/questions/43765415/not-able-to-access-array-even-though-it-is-declared-outside-while-loop-in-perl/43765475#43765475", "title": "Not able to access array even though it is declared outside while loop in perl", "body": "<p>It's not that you can't access them outside the array, the problem is that your program never reaches those last print statements. As you have:</p>\n\n<pre><code>if ($line =~ m/Time/)\n{\n    exit 0;\n}\n</code></pre>\n\n<p>And the last line of your CSV has <code>Time</code>, the program exits before reaching the final print.</p>\n\n<p>If you meant the if statement to stop the loop only, you can use <code>last</code>. Then the <code>else</code> itself is not needed as well, becoming a more common loop idiom:</p>\n\n<pre><code>while( my $line=&lt;FH&gt;)\n{\n    last if ($line =~ m/Time/);\n\n    @arr = split(/,/,$line);\n    #print \"@arr[1]\\n\";\n    push(@x_ax,$arr[1]);\n    print \"@x_ax \\n\";\n    push(@dat,$arr[2]);\n}\n</code></pre>\n"}], "owner": {"reputation": 68, "user_id": 6164487, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/c14618116ef81fd1e1ccf70d8eb9c522?s=128&d=identicon&r=PG&f=1", "display_name": "k189", "link": "https://stackoverflow.com/users/6164487/k189"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1493828892, "creation_date": 1493828685, "question_id": 43765415, "link": "https://stackoverflow.com/questions/43765415/not-able-to-access-array-even-though-it-is-declared-outside-while-loop-in-perl", "title": "Not able to access array even though it is declared outside while loop in perl", "body": "<p>I'm trying to read a CVS file to fetch 2nd and 3rd column in it. I have declared empty array <code>@x_ax</code> and <code>@dat</code> outside the while loop. I'm using <code>@x_ax</code> to store 2nd column and <code>@dat</code> to store 3rd column of CSV file.\nContents of <code>@x_ax</code> and <code>@dat</code> is getting printed inside while loop only but not outside. </p>\n\n<p>below is my code and output.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\n\nmy @arr=();\nmy @x_ax=();\nmy @dat=();\nopen(FH,\"new1.csv\") || die \"Not able to open new1.csv file $!\\n\";\n\nwhile( my $line=&lt;FH&gt;)\n{\n        if ($line =~ m/Time/)\n        {\n                exit 0;\n        }\n        else\n        {\n                @arr=split(/,/,$line);\n                #print \"@arr[1]\\n\";\n                push(@x_ax,$arr[1]);\n                print \"@x_ax \\n\";\n                push(@dat,$arr[2]);\n        }\n}\n\nprint @x_ax;\nprint \"$#x_ax and $#dat \\n\";\n\n[root@localhost perl_practice]# perl test.pl \nAX_1 \nAX_1 SAL \nAX_1 SAL BAS \nAX_1 SAL BAS OPT \nAX_1 SAL BAS OPT LES \nAX_1 SAL BAS OPT LES MSS\n</code></pre>\n\n<p>below is my CSV file contents</p>\n\n<pre><code>17:00:01,AX_1,0,0,0,0,0\n17:00:01,SAL,0,0,0,0,0\n17:00:01,BAS,0,0,0,0,0\n16:55:02,OPT,0,0,0,0,0\n17:00:01,LES,0,0,0,0,0\n16:55:02,MSS,0,0,0,0,0\nTime,info,dat1,dat2,dat3,dat4,dat5\n</code></pre>\n\n<p>How to access <code>@x_ax</code> and <code>@dat</code> outside while loop?.</p>\n"}, {"tags": ["perl", "concatenation"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 5, "creation_date": 1493826659, "post_id": 43764730, "comment_id": 74570832, "body": "<code>cat *.txt &gt; combined_file.txt</code>"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493826660, "post_id": 43764730, "comment_id": 74570833, "body": "What is the current encoding used for the files? Why do you think you need Perl for this?"}, {"owner": {"reputation": 7, "user_id": 7860780, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10209902719497429/picture?type=large", "display_name": "JB670", "link": "https://stackoverflow.com/users/7860780/jb670"}, "edited": false, "score": 0, "creation_date": 1493826848, "post_id": 43764730, "comment_id": 74570955, "body": "I need to use perl because it&#39;s the only language I know lol. And the current encoding is UTF8"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1493826948, "post_id": 43764730, "comment_id": 74571016, "body": "So, if you are on a unixy system, use @HunterMcMillen&#39;s suggestion. On Windows, use <code>copy &#47;b *.txt combined_file.txt</code>."}], "answers": [{"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1493827000, "post_id": 43764849, "comment_id": 74571041, "body": "And maybe prepend <code>@ARGV = glob &#39;*.txt&#39;;</code>."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 1, "creation_date": 1493827276, "post_id": 43764849, "comment_id": 74571217, "body": "Maybe <code>@ARGV ||= glob &#39;*.txt&#39;</code>? To make it more flexible"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493827304, "post_id": 43764849, "comment_id": 74571233, "body": "In <code>cmd.exe</code>, use <code>copy &#47;b *.txt combined_file.txt</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1493827336, "post_id": 43764849, "comment_id": 74571255, "body": "@Hunter McMillen, I think you mean <code>@ARGV = glob &#39;*.txt&#39; if !@ARGV;</code>, but that would be quite unconventional. I recommend against it"}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1493830748, "post_id": 43764849, "comment_id": 74573247, "body": "@ikegami Yep, that was what I meant. This was only in the event that the script defaulted to globing all text files, I don&#39;t think that is a good idea either."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1493827019, "last_edit_date": 1493827019, "creation_date": 1493826925, "answer_id": 43764849, "question_id": 43764730, "link": "https://stackoverflow.com/questions/43764730/concatenate-several-files/43764849#43764849", "title": "Concatenate several files", "body": "<p>If the input and the output have the same encoding, no need to go through the effort of decoding and re-encoding.</p>\n\n<pre><code>print while &lt;&gt;;\n</code></pre>\n\n<p>For example,</p>\n\n<pre><code>perl -e'print while &lt;&gt;' *.txt &gt;combined_file.txt\n</code></pre>\n\n<p>or just</p>\n\n<pre><code>perl -pe1 *.txt &gt;combined_file.txt\n</code></pre>\n\n<p>or just</p>\n\n<pre><code>cat *.txt &gt;combined_file.txt\n</code></pre>\n\n<hr>\n\n<p>If you don't want the wildcard to be passed as an argument, you can use the following:</p>\n\n<pre><code>my @qfns = glob('*.txt');\n</code></pre>\n\n<p>You can then open each of those files in turn.</p>\n"}], "owner": {"reputation": 7, "user_id": 7860780, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10209902719497429/picture?type=large", "display_name": "JB670", "link": "https://stackoverflow.com/users/7860780/jb670"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493827173, "creation_date": 1493826550, "last_edit_date": 1493827173, "question_id": 43764730, "link": "https://stackoverflow.com/questions/43764730/concatenate-several-files", "title": "Concatenate several files", "body": "<p>I need to concatenate 20 .txt files into one with a UTF-8 encoding. The 20 files are all in the same directory. \nCan you help me ?\nI was thinking about something like that</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $fichier = \"*.txt\";\n    open(FIC,\"&gt;&gt;:encoding(UTF-8)\", $fichier) o\n    close (FIC);\n\n&lt;&gt;;\n</code></pre>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1493824691, "post_id": 43763930, "comment_id": 74569420, "body": "Use <code>use strict; use warnings;</code> in your code. Do you want to add all digits found in any columns separated by <b>space</b> for each row?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 3, "creation_date": 1493824742, "post_id": 43763930, "comment_id": 74569459, "body": "<a href=\"https://stackoverflow.com/a/1829927/100754\">When you find yourself adding an integer suffix to variable names, think &quot;I should have used an array.&quot;</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493825843, "post_id": 43763930, "comment_id": 74570280, "body": "I count 17 columns, or are they tab-separated?"}, {"owner": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "edited": false, "score": 0, "creation_date": 1493826292, "post_id": 43763930, "comment_id": 74570578, "body": "yes they are tab separated, and \u0131 didnt add all of the codes just added the codes about the addition part."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493834934, "post_id": 43763930, "comment_id": 74575689, "body": "You need to include <code>@username</code> for the person to get notified (unless the comment is in response to their Q or their A.) I&#39;ve adjusted my answer to split on tabs."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1493878349, "post_id": 43763930, "comment_id": 74591038, "body": "Ok, that massively changes the question. Most important point - how do the numbers in your input map to your output. They don&#39;t appear connected."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1493878759, "post_id": 43763930, "comment_id": 74591223, "body": "In the inputs, is if key, column ID, value?"}, {"owner": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "edited": false, "score": 0, "creation_date": 1493913696, "post_id": 43763930, "comment_id": 74616069, "body": "hi Sobrique, in every input file column ID 3 ( when considered tab separated)  is the value that I want to show in the output file and also want to add."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1493834876, "last_edit_date": 1493834876, "creation_date": 1493824862, "answer_id": 43764134, "question_id": 43763930, "link": "https://stackoverflow.com/questions/43763930/how-can-i-add-all-the-numbers-in-multiple-arrays-and-write-into-another-array-in/43764134#43764134", "title": "How can I add all the numbers in multiple arrays and write into another array in Perl", "body": "<pre><code>sub sum { my $sum; $sum += $_ for @_; $sum }\n\nmy $sum = sum\n   @count,\n   @count1,\n   ...\n   @count10,\n   @count11;\n</code></pre>\n\n<hr>\n\n<p>Rather than having a ton of arrays, you should probably have an array of arrays (or hash of arrays).</p>\n\n<pre><code>sub sum { my $sum; $sum += $_ for @_; $sum }\n\nwhile (&lt;&gt;) {\n    chomp;\n    my @fields = split /\\t/;\n    push @aoa, \\@fields;\n}\n\nmy $sum = sum map { @$_[4..15] } @aoa;\n</code></pre>\n\n<p>or just</p>\n\n<pre><code>my $sum;\nwhile (&lt;&gt;) {\n    chomp;\n    my @fields = split /\\t/;\n    $sum += $_ for @fields[4..15];\n}\n</code></pre>\n\n<p>(There appears to be 17 columns, yet you say there are 16, so I'm assuming the whitespace beteween <code>ACME A</code> isn't a tab. Adjust the indexes as needed.)</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493855322, "post_id": 43764138, "comment_id": 74584800, "body": "It looks like you need to <code>chomp; my @row = split &#47;\\t&#47;;</code> as one of the fields contains whitespace. See the comments on the question."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493855488, "post_id": 43764138, "comment_id": 74584848, "body": "And I would <code>use List::Util &#39;sum&#39;</code> and <code>my $sum = sum map { &#47;^\\d+$&#47; ? $_ : 0 } @row</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493878151, "post_id": 43764138, "comment_id": 74590939, "body": "Without chomp, it still works, as the linefeed numifies correctly."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493892442, "post_id": 43764138, "comment_id": 74600046, "body": "Sure, but I don&#39;t like doing that in case the values are ever used for something else. In particular <code>&quot;0&quot;</code> is <i>false</i> while <code>&quot;0\\n&quot;</code> is <i>true</i>."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 4, "last_activity_date": 1493825300, "last_edit_date": 1493825300, "creation_date": 1493824867, "answer_id": 43764138, "question_id": 43763930, "link": "https://stackoverflow.com/questions/43763930/how-can-i-add-all-the-numbers-in-multiple-arrays-and-write-into-another-array-in/43764138#43764138", "title": "How can I add all the numbers in multiple arrays and write into another array in Perl", "body": "<p>OK, any point you start numbering variables, you should be seriously thinking about using an array instead. </p>\n\n<p>And that goes if they're arrays too. So you might be able to use an array of arrays, but it's unclear quite what you're actually putting into <code>$count</code>. </p>\n\n<p>But for your problem, I'd tackle it like this: </p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\n\n#iterate the DATA filehandle below, line by line. \nwhile ( &lt;DATA&gt; ) {\n    #split the row on whitespace. \n    my @row = split; \n    my $sum;\n    #iterate each field\n    foreach my $value ( @row ) {  \n        #increment the sum by the value, if it's numeric. \n        if ( $value =~ m/^\\d+$/ ) { \n           $sum += $value; \n        }\n    }\n    #print the sum for this row. \n    print $sum,\"\\n\";\n}\n\n\n__DATA__\n2017-02-03 0 ACME A 0   2   4   43  4   4   25  4   3   26  4   4   18\n</code></pre>\n\n<p>And that way, you don't actually need an array of arrays at all. </p>\n\n<p>Note - you can scale this up to your input, probably by just using <code>&lt;&gt;</code> as your input file handle, which reads files specified on command line or STDIN rather than the <code>__DATA__</code> filehandle. </p>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 2, "last_activity_date": 1493825292, "creation_date": 1493825292, "answer_id": 43764278, "question_id": 43763930, "link": "https://stackoverflow.com/questions/43763930/how-can-i-add-all-the-numbers-in-multiple-arrays-and-write-into-another-array-in/43764278#43764278", "title": "How can I add all the numbers in multiple arrays and write into another array in Perl", "body": "<p>The script below will sum all numeric columns in the data individually and put the sums in an hash called <code>%counts</code>. The keys of the hash will be variable names (which I would normally infer from the header of the file, but you do not provide it, so I made them up).</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse List::Util qw( sum );\n\nmy %counts;\n\nwhile (my $line = &lt;DATA&gt;) {\n    my (@cols) = split ' ', $line;\n    my @numeric = map [$_, $cols[$_]], grep $cols[$_] =~ /^[0-9]+\\z/, 0 .. $#cols;\n    for my $entry ( @numeric ) {\n        $counts{ 'VAR' . $entry-&gt;[0] } += $entry-&gt;[1];\n    }\n}\n\nuse Data::Dumper;\nprint Dumper \\%counts;\n\nprintf \"Grand total = %d\\n\", sum values %counts;\n\n__DATA__\n2017-02-03 0 ACME A 0   2   4   43  4   4   25  4   3   26  4   4   18\n2017-02-03 0 ACME A 0   2   4   43  4   4   25  4   3   26  4   4   18\n2017-02-03 0 ACME A 0   2   4   43  4   4   25  4   3   26  4   4   18\n2017-02-03 0 ACME A 0   2   4   43  4   4   25  4   3   26  4   4   18\n2017-02-03 0 ACME A 0   2   4   43  4   4   25  4   3   26  4   4   18\n</code></pre>\n\n<p>Output:</p>\n\n<pre>$ perl s.pl                                     \n$VAR1 = {                                       \n          'VAR7' => 215,                        \n          'VAR15' => 20,                        \n          'VAR8' => 20,                         \n          'VAR11' => 20,                        \n          'VAR14' => 20,                        \n          'VAR10' => 125,                       \n          'VAR12' => 15,                        \n          'VAR1' => 0,                          \n          'VAR4' => 0,                          \n          'VAR5' => 10,                         \n          'VAR6' => 20,                         \n          'VAR9' => 20,                         \n          'VAR16' => 90,                        \n          'VAR13' => 130                        \n        };                                      \nGrand total = 705                               </pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1493829147, "last_edit_date": 1493829147, "creation_date": 1493828839, "answer_id": 43765456, "question_id": 43763930, "link": "https://stackoverflow.com/questions/43763930/how-can-i-add-all-the-numbers-in-multiple-arrays-and-write-into-another-array-in/43765456#43765456", "title": "How can I add all the numbers in multiple arrays and write into another array in Perl", "body": "\n\n<p>This solution reads the input file and splits each line, storing the result as an array of arrays. A pair of <code>map</code> calls reduces that data to an array of column totals</p>\n\n<p>There is clearly an issue with some of the data not being numeric, so each column is tested to see if it contains any non-numeric values, in which case <code>undef</code> is provided as the total</p>\n\n<p>I have used <code>first</code> from <code>List::Util</code> even though <code>all</code> would be clearer because it is only more recent versions of the module that provide the latter</p>\n\n<p>I have tested this by creating a file with two copies of your line of data. (Please provide a more comprehensive data sample in the future.)</p>\n\n<p>The program expects the path to the input file as a parameter on the command line</p>\n\n<p>I have used <code>Data::Dumper</code> only to reveal the result of the calculation</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse List::Util   qw/ first sum /;\nuse Scalar::Util qw/ looks_like_number /;\n\nour @ARGV = 'data.txt';\n\nmy @data = map [ split ], &lt;&gt;;\n\nmy @totals = map {\n    my $i = $_;\n    my @column = map { $_-&gt;[$i] }  @data;\n    defined( first { not looks_like_number($_) } @column) ? undef : sum(@column);\n} 0.. $#{$data[0]};\n\nuse Data::Dumper;\nprint Dumper \\@totals;\n</code></pre>\n\n<p>If you are using a more recent copy of <code>List::Util</code> that provided <code>all</code>, then you can make use of it by changing the <code>use</code> statement to</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>use List::Util qw/ all sum /;\n</code></pre>\n\n<p>and rewriting the <code>defined( ... )</code> line to</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>all { looks_like_number($_) } @column ? sum(@column) : undef;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>$VAR1 = [\n          undef,\n          '0',\n          undef,\n          undef,\n          '0',\n          '4',\n          '8',\n          '86',\n          '8',\n          '8',\n          '50',\n          '8',\n          '6',\n          '52',\n          '8',\n          '8',\n          '36'\n        ];\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1493870744, "creation_date": 1493824341, "last_edit_date": 1493870744, "question_id": 43763930, "link": "https://stackoverflow.com/questions/43763930/how-can-i-add-all-the-numbers-in-multiple-arrays-and-write-into-another-array-in", "title": "How can I add all the numbers in multiple arrays and write into another array in Perl", "body": "<p>Actually in this assignment, I need to combine 12 input file datas into only one output file. Each input file like this,</p>\n\n<pre><code>ACME A  0   2\nACME A  1   0\nACME A  2   0\nACME A  3   0\nACME A  4   0\nACME A  5   0\nACME A  6   0\n</code></pre>\n\n<p>In output file \u0131 want to obtain, all related data like this;</p>\n\n<pre><code>**********************************************************************\n2017-02-03 0 ACME A 0   2   4   43  4   4   25  4   3   26  4   4   18\n2017-02-03 0 ACME A 0   2   4   43  4   4   25  4   3   26  4   4   0\n2017-02-03 0 ACME A 0   2   4   43  4   4   25  4   3   26  4   4   0\n2017-02-03 0 ACME A 0   2   4   43  4   4   25  4   3   26  4   4   1\n</code></pre>\n\n<p>Here is my full code.</p>\n\n<pre><code>#! /usr/bin/perl -w\n\n#compiler profilleri\nuse strict;\nuse warnings;\n\nsub trim($)\n{\nmy $string = shift;\n$string =~ s/^\\s+//;\n$string =~ s/\\s+$//;\nreturn $string;\n}\n\n#dosya locationlar\u0131\n\nmy $input_file=\"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_01.txt\";\nmy $input_file1=\"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_06.txt\";\nmy $input_file2=\"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_11.txt\";\nmy $input_file3=\"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_16.txt\";\nmy $input_file4=\"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_21.txt\";\nmy $input_file5=\"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_26.txt\";\nmy $input_file6=\"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_31.txt\";\nmy $input_file7=\"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_36.txt\";\nmy $input_file8=\"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_41.txt\";\nmy $input_file9=\"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_46.txt\";\nmy $input_file10=\"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_51.txt\";\nmy $input_file11=\"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_56.txt\";\n\nmy $output_file=\"C:/Perl64/output/denemecik.txt\";\n\n#komutlar######\nmy $ne;  my @cc_type; my @cc_count;\nmy @cc_count1; my @cc_count2; my @cc_count3; my @cc_count4; my @cc_count5;\nmy @cc_count6; my @cc_count7; my @cc_count8; my @cc_count9; my @cc_count10; my @cc_count11;\nmy @total; my $i;\n\nmy @count=0; my @count1=0; my @count2=0; my @count3=0; my @count4=0; my @count5=0; my @count6=0;\nmy @count7=0; my @count8=0; my @count9=0; my @count10=0; my @count11=0;\n\nmy $date='sbc_cause_comp_intraday_2017-02-03_00_01';\nmy $date1=substr($date,24,10);\nmy $hour=substr($date,35,1);\n#print ($hour);\n\nopen INPUT, \"&lt; $input_file\" or die \"$0: open of $input_file failed, error: $! \\n\";\nopen INPUT1, \"&lt; $input_file1\" or die \"$0: open of $input_file1 failed, error: $! \\n\";\nopen INPUT2, \"&lt; $input_file2\" or die \"$0: open of $input_file2 failed, error: $! \\n\";\nopen INPUT3, \"&lt; $input_file3\" or die \"$0: open of $input_file3 failed, error: $! \\n\";\nopen INPUT4, \"&lt; $input_file4\" or die \"$0: open of $input_file4 failed, error: $! \\n\";\nopen INPUT5, \"&lt; $input_file5\" or die \"$0: open of $input_file5 failed, error: $! \\n\";\nopen INPUT6, \"&lt; $input_file6\" or die \"$0: open of $input_file6 failed, error: $! \\n\";\nopen INPUT7, \"&lt; $input_file7\" or die \"$0: open of $input_file7 failed, error: $! \\n\";\nopen INPUT8, \"&lt; $input_file8\" or die \"$0: open of $input_file8 failed, error: $! \\n\";\nopen INPUT9, \"&lt; $input_file9\" or die \"$0: open of $input_file9 failed, error: $! \\n\";\nopen INPUT10, \"&lt; $input_file10\" or die \"$0: open of $input_file10 failed, error: $! \\n\";\nopen INPUT11, \"&lt; $input_file11\" or die \"$0: open of $input_file11 failed, error: $! \\n\";\n\nopen OUTPUT, \"&gt; $output_file\" or die \"$0: open of $output_file failed, error: $! \\n\";\n\nprint OUTPUT (\"**********************************************************************\\n\");\nwhile ( defined ($_=&lt;INPUT&gt;) )\n{   \n\n    my $line = $_;\n    my ( $ne, $cc_type, $cc_count) = split ('\\t',$line);\n    my $count=trim($cc_count);\n    print(\"$ne\\n\");\n    while ( defined ($_=&lt;INPUT1&gt;) )\n    {\n        my $line1 = $_;\n        my ( undef, undef, $cc_count1) = split ('\\t',$line1);\n        my $count1=trim($cc_count1);\n        #print(\"$count1\\n\");\n        while ( defined ($_=&lt;INPUT2&gt;) )\n        {\n           my $line2 = $_;\n           my ( undef, undef, $cc_count2) = split ('\\t',$line2);\n           my $count2=trim($cc_count2);\n           #print(\"$cc_count2\\n\");\n           while ( defined ($_=&lt;INPUT3&gt;) )\n            {\n                my $line3 = $_;\n                my ( undef, undef, $cc_count3) = split ('\\t',$line3);\n                my $count3=trim($cc_count3);\n                #print(\"$cc_count3\\n\");\n                while ( defined ($_=&lt;INPUT4&gt;) )\n                {\n                     my $line4 = $_;\n                     my ( undef, undef, $cc_count4) = split ('\\t',$line4);\n                     my $count4=trim($cc_count4);\n                    # print(\"$cc_count4\\n\");\n                     while ( defined ($_=&lt;INPUT5&gt;) )\n                     {\n                        my $line5 = $_;\n                        my ( undef, undef, $cc_count5) = split ('\\t',$line5);\n                        my $count5=trim($cc_count5);\n                        #print(\"$cc_count5\\n\");\n                        while ( defined ($_=&lt;INPUT6&gt;) )\n                        {\n                            my $line6 = $_;\n                            my ( undef, undef, $cc_count6) = split ('\\t',$line6);\n                            my $count6=trim($cc_count6);\n                            #print(\"$cc_count6\\n\");\n                            while ( defined ($_=&lt;INPUT7&gt;) )\n                            {\n                                my $line7 = $_;\n                                my ( undef, undef, $cc_count7) = split ('\\t',$line7);\n                                my $count7=trim($cc_count7);\n                                #print(\"$cc_count7\\n\");\n                                while ( defined ($_=&lt;INPUT8&gt;) )\n                                {\n                                    my $line8 = $_;\n                                    my ( undef, undef, $cc_count8) = split ('\\t',$line8);\n                                    my $count8=trim($cc_count8);\n                                    #print(\"$cc_count8\\n\");\n                                    while ( defined ($_=&lt;INPUT9&gt;) )\n                                    {\n                                         my $line9 = $_;\n                                         my ( undef, undef, $cc_count9) = split ('\\t',$line9);\n                                         my $count9=trim($cc_count9);\n                                         #print(\"$cc_count9\\n\");\n                                         while ( defined ($_=&lt;INPUT10&gt;) )\n                                         {\n                                             my $line10 = $_;\n                                             my ( undef, undef, $cc_count10) = split ('\\t',$line10);\n                                             my $count10=trim($cc_count10);\n                                             #print(\"$cc_count10\\n\");\n                                             while ( defined ($_=&lt;INPUT11&gt;) )\n                                             {\n                                                my $line11 = $_;\n                                                my ( undef, undef, $cc_count11) = split ('\\t',$line11);\n                                                my $count11=trim($cc_count11);\n                                                #print(\"$cc_count11\\n\");\n\n                                                for( $i=0; $i&lt; scalar @count; $i++ )\n                                                {\n                                                  $total[$i] = $count[$i] + $count1[$i] + $count2[$i] + $count3[$i] + $count4[$i] + $count5[$i] + $count6[$i] + $count7[$i] + $count8[$i] + $count9[$i] + $count10[$i] + $count11[$i];\n                                                #   print(\"@total\\n\");\n                                                }\n                                                 print OUTPUT (\"$date1 $hour $ne $cc_type   $count  $count1 $count2 $count3 $count4 $count5 $count6 $count7 $count8 $count9 $count10    $count11 $total\\n\");   \n                                               #   print(\"@total\\n\");\n\n\n                                             }\n                                          }\n                                    }\n                                 }\n                               }\n                        }\n                    }\n                }\n            }\n        }\n    }           \n\n}\n\nclose OUTPUT;\nclose INPUT;\nclose INPUT1;\nclose INPUT2;\nclose INPUT3;\nclose INPUT4;\nclose INPUT5;\nclose INPUT6;\nclose INPUT7;\nclose INPUT8;\nclose INPUT9;\nclose INPUT10;\nclose INPUT11;\n</code></pre>\n\n<p>I am a newbie in perl. Can you please help me to write this code more logically. For example how can \u0131 read multiple input files without using a lot of while loop and writing into only one output file. Right now, output file shows only first row as true, and the remaining rows just the iteration of the first one, so it is not true. The second problem is,I dont know how to add number values in one row properly. For example I want to add 2 to 18 ( 12 values) and write this value as a final column in output file.\nThanks in advance.</p>\n"}, {"tags": ["arrays", "list", "perl", "awk"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1493822901, "post_id": 43763310, "comment_id": 74568018, "body": "You&#39;ll get better answers if you post the code you&#39;ve got so far. And also explain why you&#39;re artificially restricting the solution space to not include modules. You can, however, have hashes of arrays, and arrays of hashes.   Or hashes of hashes. Or compound hash-keys."}, {"owner": {"reputation": 6626, "user_id": 4907913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2769a366bde01ddbf60008819e371c?s=128&d=identicon&r=PG&f=1", "display_name": "thewaywewere", "link": "https://stackoverflow.com/users/4907913/thewaywewere"}, "edited": false, "score": 4, "creation_date": 1493823350, "post_id": 43763310, "comment_id": 74568365, "body": "Welcome to SO! Please read this <a href=\"http://stackoverflow.com/help/how-to-ask\">how-to-ask</a>  and follow the guidelines to include sufficient information to describe your problem."}, {"owner": {"reputation": 1, "user_id": 7957945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea323326ce3756da0a17172024febf9b?s=128&d=identicon&r=PG&f=1", "display_name": "epknims", "link": "https://stackoverflow.com/users/7957945/epknims"}, "edited": false, "score": 0, "creation_date": 1493827616, "post_id": 43763310, "comment_id": 74571457, "body": "To Sobrique: The reason for not wanting to use modules, is that I want to share my final code with my colleagues, we are not able to use CPAN in the setup we have... Our main env is Windows based, and we have to use Cygwin to run this, and our Cygwin setup that we have to use, does not allow adding modules :-("}], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 0, "last_activity_date": 1494045558, "creation_date": 1494045558, "answer_id": 43816777, "question_id": 43763310, "link": "https://stackoverflow.com/questions/43763310/how-to-remove-redundant-similar-items-from-a-2-dimensional-array-in-perl/43816777#43816777", "title": "How to remove redundant (similar items) from a 2 dimensional array in perl", "body": "<p>Here is a naive implementation in perl using state variables that achieves the same result.  If you actually have more than 3 variables to consier (XX,YY,ZZ here), you could generalize this into a state array and a function that updates the array and decides what to do based on the state of the array.</p>\n\n<p><strong>filter.pl</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\n\nmy $last_customer = '';\nmy ($seen_xx, $seen_yy, $seen_zz);\n\nwhile (my $line = &lt;&gt;) {\n    # Header\n    if ($. == 1) {\n        print $line;\n        next;\n    }\n\n    # Data\n    my ($customer_name, $customer_id, $product_line, $platform, $version) = split /;/, $line;\n    die \"Unable to parse line : $line\"\n        unless defined $customer_name;\n\n    if ($customer_name ne $last_customer) {\n        $last_customer = $customer_name;\n        ($seen_xx, $seen_yy, $seen_zz) = (0,0,0); # Reset\n    }\n\n    if (not $seen_xx and $product_line eq 'XX') {\n        # Print first XX\n        print $line;\n        ($seen_xx, $seen_yy, $seen_zz) = (1,1,1); # Ignore the others\n    }\n\n    if (not $seen_yy and $product_line eq 'YY') {\n        # Print first YY if no XX\n        print $line;\n        $seen_yy = 1;\n    }\n\n    if (not $seen_zz and $product_line eq 'ZZ') {\n        # Print first ZZ if no XX\n        print $line;\n        $seen_zz = 1;\n    }\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>cat input | perl filter.pl\nCustomer;CustomerID;ProductLine;Platform;Version\noperatorx;1234;XX;Linux;15\noperatory;2345;YY;x86;8\noperatory;2345;ZZ;x86;7.2\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7957945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea323326ce3756da0a17172024febf9b?s=128&d=identicon&r=PG&f=1", "display_name": "epknims", "link": "https://stackoverflow.com/users/7957945/epknims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1494045558, "creation_date": 1493822675, "last_edit_date": 1493883322, "question_id": 43763310, "link": "https://stackoverflow.com/questions/43763310/how-to-remove-redundant-similar-items-from-a-2-dimensional-array-in-perl", "title": "How to remove redundant (similar items) from a 2 dimensional array in perl", "body": "<p>I am rather new to perl, but so far I have found it a very strong language.\nEvery month I pull an extract from a license register for a product that I am managing, and the data is in CSV format.\nI have managed to complete the code to get a sorted list, and also sorted as per my requirements. The list is some 1200 rows.</p>\n\n<p>The format of the list looks like this (I have kept only the vital parts):</p>\n\n<pre><code>Customer;CustomerID;ProductLine;Platform;Version\noperatorx;1234;XX;Linux;15\noperatorx;1234;YY;x86;7\noperatorx;1234;ZZ;Sparc;7\noperatory;2345;YY;x86;8\noperatory;2345;YY;Sparc;7.1\noperatory;2345;ZZ;x86;7.2\n</code></pre>\n\n<p>The output wanted is like this for the above:</p>\n\n<pre><code>Customer;CustomerID;ProductLine;Platform;Version\noperatorx;1234;XX;Linux;15\noperatory;2345;YY;x86;8\noperatory;2345;ZZ;x86;7.2\n</code></pre>\n\n<p>My list in the code does not contain any ';', the values are stored in a array like this:</p>\n\n<pre><code>@sortedlist = ([Customer,customerID,ProductLine,Platform,Version])\n</code></pre>\n\n<p>So any customer can have many rows in my original list, but if the product is XX, then only the first occurrence in the list should be kept, and no occurrences of product YY or ZZ can be kept.\nIf a customer has no product XX, then the first occurrence of product YY and first occurrence of product ZZ should be kept.</p>\n\n<p>The list is sorted so that the \"best\" entry is always the first per customerID.</p>\n\n<p>I have tried a very simple code, checking that current customerID != prevCustomerID then push the row to a new list, but this makes me miss out when a customer has both products YY and ZZ...\nI have also tried nesting a lot of if statements, to try to keep track of current row and previous row... but the code grew a lot, and still didn't give me the expected result :-(</p>\n\n<p>I am starting to think that I approach this from the wrong angle, and I have tried to dig into hashes, but since a customer can actually have one or two entries in the final list, I think a hash is disqualified, as the key value here has to be customerID, and in a hash, there should only be one occurrence per customerID.</p>\n\n<p>Does anyone have any idea on how to attack this problem?\nStarting from the top, push the very first element to a new list, and then for each consecutive row, check if it exists in the new list, and what product the new list contains, and if product == XX, then scrap the rest for the same customerID, or if product in the new list == YY, scrap the rest until it finds product == ZZ for the same customerID. Then repeat the same, until it finds a new customerID?</p>\n\n<p>--- updated ---\nI managed to solve my issue using awk instead.</p>\n\n<pre><code>./myperlscript.pl input.csv | awk -F ';' '!array[$1,$2,$3]++'| awk -F ';' '{ {if ($2 != prev) {print $0; prev = $2; prevprod = $3}} {if ($2 = prev &amp;&amp; prevprod != \"XX\") { prev =$2}}} &gt; output.csv\n</code></pre>\n\n<p>But if anyone whould know how to achieve the same with standard perl, it would be very nice.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 1039, "user_id": 1004770, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e62b558be16f282dcd824c35f4240129?s=128&d=identicon&r=PG", "display_name": "Suresh", "link": "https://stackoverflow.com/users/1004770/suresh"}, "edited": false, "score": 0, "creation_date": 1493831621, "post_id": 43763192, "comment_id": 74573784, "body": "I will try this and thanks a lot for the links for giving the hints and explanation. &#39;/=/&#39; - will this check the end of the file?"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 1039, "user_id": 1004770, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e62b558be16f282dcd824c35f4240129?s=128&d=identicon&r=PG", "display_name": "Suresh", "link": "https://stackoverflow.com/users/1004770/suresh"}, "edited": false, "score": 0, "creation_date": 1493873474, "post_id": 43763192, "comment_id": 74589099, "body": "@Suresh Means.? please share the some sample"}, {"owner": {"reputation": 1039, "user_id": 1004770, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e62b558be16f282dcd824c35f4240129?s=128&d=identicon&r=PG", "display_name": "Suresh", "link": "https://stackoverflow.com/users/1004770/suresh"}, "edited": false, "score": 0, "creation_date": 1493874080, "post_id": 43763192, "comment_id": 74589278, "body": "In your code after unless we have unless (/=/). Does that check for end of file?"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 1039, "user_id": 1004770, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e62b558be16f282dcd824c35f4240129?s=128&d=identicon&r=PG", "display_name": "Suresh", "link": "https://stackoverflow.com/users/1004770/suresh"}, "edited": false, "score": 0, "creation_date": 1493874184, "post_id": 43763192, "comment_id": 74589304, "body": "@Suresh For check the end of file use <a href=\"https://perldoc.perl.org/functions/END.html\" rel=\"nofollow noreferrer\">END</a>. <code>perl -ne &#39;END{print; } &#39; input.txt</code> it will print the end of line."}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 1, "last_activity_date": 1493873542, "last_edit_date": 1493873542, "creation_date": 1493822405, "answer_id": 43763192, "question_id": 43762655, "link": "https://stackoverflow.com/questions/43762655/perl-finda-text-in-a-file-and-then-a-new-line-addition/43763192#43763192", "title": "perl finda text in a file and then a new line addition", "body": "<p>Try the following one liner</p>\n\n<pre><code>perl -ne 'next unless (/=/); s/(var\\s*(\\w+)\\s*\\=.+)/$1\\nprintln \"the variable $2 is \\$$2\"/; print; ' input.txt\n</code></pre>\n\n<p>Then read the following links you will get a idea about what I did. </p>\n\n<p><a href=\"https://perldoc.perl.org/functions/next.html\" rel=\"nofollow noreferrer\">next</a></p>\n\n<p><a href=\"https://perldoc.perl.org/functions/unless.html\" rel=\"nofollow noreferrer\">unless</a></p>\n\n<p><a href=\"https://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">Regular Expression</a>  <code>\\w</code>  , <code>\\s</code> , <code>.</code> , <code>+</code> ,<code>*</code></p>\n\n<p><a href=\"http://perldoc.perl.org/perlrequick.html#Search-and-replace\" rel=\"nofollow noreferrer\">Substitution</a> <code>s///</code></p>\n\n<p><a href=\"https://perldoc.perl.org/perlretut.html#Grouping-things-and-hierarchical-matching\" rel=\"nofollow noreferrer\"> RegEx grouping</a> <code>()</code> , <code>$1</code> , <code>$2</code></p>\n"}], "owner": {"reputation": 1039, "user_id": 1004770, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e62b558be16f282dcd824c35f4240129?s=128&d=identicon&r=PG", "display_name": "Suresh", "link": "https://stackoverflow.com/users/1004770/suresh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1493877023, "answer_count": 1, "score": -2, "last_activity_date": 1493873542, "creation_date": 1493821085, "question_id": 43762655, "link": "https://stackoverflow.com/questions/43762655/perl-finda-text-in-a-file-and-then-a-new-line-addition", "closed_reason": "Needs more focus", "title": "perl finda text in a file and then a new line addition", "body": "<p>Basically my requirement is a replace in a file using perl. The string that to be found is ' = '. The contents of the file should be modified in a way that end of the line where this string is found, it should add one more line as below. Please hep me here. I am not able to find on adding a new line also on how to get the word just before \" = \". This has to be replaced in all occurences of the string within the file.</p>\n\n<pre><code>var b = \"text\"\nvar c = \"integ\"\n</code></pre>\n\n<p>should be replaced by </p>\n\n<pre><code>var b = \"text\"\nprintln \"the variable b is $b\"\nvar c = \"integ\"\nprintln \"the variable c is $c\"\n</code></pre>\n"}, {"tags": ["perl", "scripting", "exec", "command-line-arguments", "stdin"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1493820902, "post_id": 43762144, "comment_id": 74566398, "body": "Use <code>print while &lt;&gt;</code> instead of <code>print for &lt;&gt;</code> to avoid memory wastage and prevent holding things up until stdin reaches eof."}, {"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493821007, "post_id": 43762144, "comment_id": 74566461, "body": "@Borodin: sorry, that was a typo; fixed now; thanks!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1493821512, "post_id": 43762144, "comment_id": 74566875, "body": "You should know by now that you pretty much never get an explanation for votes, but I know it&#39;s frustrating."}, {"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493822881, "post_id": 43762144, "comment_id": 74568006, "body": "@Borodin: I know; every once in a blue moon requesting for an explanation does work, though..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1493824592, "post_id": 43762144, "comment_id": 74569357, "body": "I think that tactic may work rather better if you weren&#39;t so scathing about the character of the voter! You could ask a general question: &quot;I see that I have a downvote. Can anyone see what may be wrong with my post?&quot;"}, {"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493825301, "post_id": 43762144, "comment_id": 74569876, "body": "@Borodin: thank you for your patience; point taken."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1493831358, "post_id": 43762144, "comment_id": 74573615, "body": "@kjo It may be just me, but I don&#39;t really understand what you&#39;re after. (I don&#39;t know details of <code>zsh</code> and can&#39;t parse the example.)  To prepend/append command-line arguments (?) to ... what otherwise would be the script&#39;s output (&quot;main functionality&quot;)?  Or is it more involved? I don&#39;t see a reason to spawn extra processes.  (Sure you can, in many ways, back and forth. It&#39;s just better not to if not needed.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1493831441, "post_id": 43762144, "comment_id": 74573673, "body": "@kjo As for the segregation of processing that you want, that requirement is cleanly handled by writing a module.  Then you just <code>use</code> it, and call its subs as desired."}], "answers": [{"comments": [{"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "edited": false, "score": 0, "creation_date": 1493825542, "post_id": 43763197, "comment_id": 74570050, "body": "Questions of legibility/clarity/good design/etc. aside, is it really not possible for a Perl script to do a self-exec maneuver like the one I showed (i.e. one where content is piped to the exec&#39;d process)?"}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 3, "last_activity_date": 1493826301, "last_edit_date": 1493826301, "creation_date": 1493822416, "answer_id": 43763197, "question_id": 43762144, "link": "https://stackoverflow.com/questions/43762144/how-to-exec-self-with-command-line-arguments-added-to-stdin/43763197#43763197", "title": "How to exec self with command-line arguments added to stdin?", "body": "<p>Unless the Perl script needs to be as cryptic as the shell script, I would do something like this:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse autouse Carp =&gt; qw( croak );\n\nuse IO::Interactive qw( is_interactive );\n\nrun( \\*STDIN, is_interactive() ? [] : (\\@ARGV, [qw(ya ba da ba doo)]) );\n\nsub run {\n    my $appender = mk_appender(@_);\n    printf \"%6d\\t%s\", @$_ while $_ = $appender-&gt;();\n}\n\nsub mk_appender {\n    my $fh = shift;\n    my $line_number = 0;\n    my $i = 0;\n\n    my @readers = (\n        sub { scalar &lt;$fh&gt; },\n        (\n            map { my $argv = $_; sub {\n                ($i &lt; @$argv) ? $argv-&gt;[$i++] . \"\\n\" : ();\n            }} @_\n        ),\n    );\n\n    return sub {\n        @readers or return;\n        while ( @readers ) {\n            my $line = $readers[0]-&gt;();\n            return [++$line_number, $line] if defined $line;\n            shift @readers;\n            $i = 0;\n        }\n        return;\n    };\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre>$ seq 3 | perl t.pl foo bar baz         \n     1  1                               \n     2  2                               \n     3  3                               \n     4  foo                             \n     5  bar                             \n     6  baz                             \n     7  ya                              \n     8  ba                              \n     9  da                              \n    10  ba                              \n    11  doo                             </pre>\n\n<p>Some advantages of using the facilities offered by Perl instead of trying to replicate the shell script include the fact that you can avoid spawning additional processes, reading through the entire standard input twice etc.</p>\n\n<p>I also write about reading from multiple files at the same time in <a href=\"https://www.nu42.com/2016/06/sum-multiple-files-using-perl.html\" rel=\"nofollow noreferrer\">How to sum data from multiple files in Perl?</a></p>\n\n<p>If you are intent on reading the same input twice, see <a href=\"https://perldoc.perl.org/functions/pipe.html\" rel=\"nofollow noreferrer\">pipe</a> and <a href=\"https://perldoc.perl.org/perlipc.html#Bidirectional-Communication-with-Yourself\" rel=\"nofollow noreferrer\">Bidirectional communication with yourself</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1493840098, "last_edit_date": 1493840098, "creation_date": 1493838860, "answer_id": 43768233, "question_id": 43762144, "link": "https://stackoverflow.com/questions/43762144/how-to-exec-self-with-command-line-arguments-added-to-stdin/43768233#43768233", "title": "How to exec self with command-line arguments added to stdin?", "body": "<p>Might be easier just using <code>cat</code> with some common shell features. (<code>bash</code> used here.)</p>\n\n<pre><code>cat &lt;( seq 3 ) &lt;( printf 'foo\\nbar\\nbaz\\n' ) | prog\n</code></pre>\n\n<hr>\n\n<p>Solution:</p>\n\n<pre><code>use POSIX qw( );\n\nsub munge_stdin {\n   pipe(my $r, my $w) or die(\"pipe: $!\");\n   $w-&gt;autoflush();\n\n   local $SIG{CHLD} = 'IGNORE';\n   defined( my $pid = fork() ) or die(\"fork: $!\");\n   if (!$pid) {\n      eval {\n         close($r) or die(\"close pipe: $!\");\n\n         while (&lt;STDIN&gt;) {\n            print($w $_) or die(\"print: $!\");\n         }\n\n         for (@ARGV) {\n            print($w \"$_\\n\") or die(\"print: $!\");\n         }\n\n         POSIX::_exit(0);\n      };\n\n      warn($@);\n      POSIX::_exit(1);\n   }\n\n   close($w) or die(\"close pipe: $!\");\n   open(STDIN, '&lt;&amp;', $r) or die(\"dup: $!\");\n   @ARGV = ();\n}\n\nmunge_stdin();\nprint while &lt;&gt;;   # or: exec(\"cat\") or die(\"exec: $!\");\n</code></pre>\n\n<ul>\n<li>This solution supports <code>exec()</code> in the Perl script.</li>\n<li>This solution won't deadlock no matter how large the inputs are.</li>\n</ul>\n"}], "owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "accepted_answer_id": 43768233, "answer_count": 2, "score": 0, "last_activity_date": 1493840098, "creation_date": 1493819782, "last_edit_date": 1493825788, "question_id": 43762144, "link": "https://stackoverflow.com/questions/43762144/how-to-exec-self-with-command-line-arguments-added-to-stdin", "title": "How to exec self with command-line arguments added to stdin?", "body": "<p><strong>EDIT:</strong> just to clarify, I want to know how one would implement the piping of content to an <code>exec</code>'d process, <em>putting aside</em> the question of whether Perl offers better ways to achieve the same end-result that don't involve this technique.</p>\n\n<hr>\n\n<p>It's easier to describe what I want to do with a <em>toy</em> <code>zsh</code> script example:</p>\n\n<pre><code>#!/usr/bin/env zsh\n\n# -----------------------------------------------------------------------------\n# handle command-line arguments if any\n# nb: ${(%):-%x} is zsh-speak for \"yours truly\"\n\n# (( $# % 2 )) &amp;&amp; (print -rl -- \"$@\"; [[ -t 0 ]] || cat) | exec ${(%):-%x}\n(( $# &gt; 0 )) &amp;&amp; ([[ -t 0 ]] || cat; print -rl -- \"$@\") | exec ${(%):-%x}\n\n# -----------------------------------------------------------------------------\n# standard operation below this line\n\nnl\n</code></pre>\n\n<p>The script above is pretty much a pass-through wrapper for the <code>nl</code> (\"number lines\") utility, except that, if command-line arguments are present, it will append them to to its stdin.  For example:</p>\n\n<pre><code>$ seq 3 | /tmp/nlwrapper.sh\n     1      1\n     2      2\n     3      3\n$ seq 3 | /tmp/nlwrapper.sh foo bar baz\n     1      1\n     2      2\n     3      3\n     4      foo\n     5      bar\n     6      baz\n</code></pre>\n\n<p>Note that</p>\n\n<ol>\n<li><p>the command-line arguments could have just as easily been <em>prepended</em> to stdin (in fact, if one uncomments the script's 7th line, the resulting script will prepend or append the command-line arguments to stdin depending on whether their number is odd or even, respectively); <em>I am interested in both functionalities</em>.</p></li>\n<li><p>the script consists of two <em>entirely independent</em> sections: a preamble that handles the command-line arguments (if any), and the body (in this toy example consisting of a single line) that takes care of the script's main functionality (numbering lines); <em>this is an essential design feature</em>.</p></li>\n</ol>\n\n<p>To elaborate on these two points a bit further: the \"body\" section knows <em>nothing</em> about the business with the command-line arguments.  The code that implements this handling of command-line arguments could be prepended pretty much \"as-is\" to any <code>zsh</code> script that processes stdin.  Moreover, changes to how the command-line arguments are handled (prepend vs append, etc) leave everything below the comment <code># standard operation below this line</code> untouched.  The two sections are <em>truly</em> independent of each other.</p>\n\n<hr>\n\n<p>What would be the equivalent of the preamble above in a Perl script?</p>\n\n<hr>\n\n<p>I know that the Perl-equivalent of the script above would have the general form</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse English;\n\n# -----------------------------------------------------------------------------\n# handle command-line arguments if any\n\nif ( @ARGV &gt; 0 ) {\n\n   # (mumble, mumble)   ...   -t STDIN   ...   exec $PROGRAM_NAME;\n\n}\n\n# -----------------------------------------------------------------------------\n# standard operation below this line\n\nprintf \"%6d\\t$_\", $., $_ while &lt;&gt;;\n</code></pre>\n\n<p>My problem is implementing this bit:</p>\n\n<pre><code>([[ -t 0 ]] || cat; print -rl -- \"$@\") |\n</code></pre>\n\n<p>I do know that</p>\n\n<ol>\n<li>the <code>[[ -t 0 ]]</code> test in Perl is <code>-t STDIN</code>;</li>\n<li>the <code>cat</code> part could be implemented with <code>print while &lt;&gt;</code>; and</li>\n<li>the <code>print -rl -- \"$@\"</code> bit could be implemented with <code>CORE::say for @ARGV</code></li>\n</ol>\n\n<p>What I don't know is how to put these elements together to get the desired functionality.</p>\n"}, {"tags": ["perl", "dancer"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 2, "creation_date": 1493816936, "post_id": 43760883, "comment_id": 74563083, "body": "See <a href=\"https://metacpan.org/pod/distribution/Dancer/lib/Dancer/Deployment.pod\" rel=\"nofollow noreferrer\">Dancer::Deployment</a> and <a href=\"https://metacpan.org/pod/distribution/Dancer2/lib/Dancer2/Manual/Deployment.pod\" rel=\"nofollow noreferrer\">Dancer2::Manual::Deployment</a>."}, {"owner": {"reputation": 156, "user_id": 2032419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dec6201728aab2650e746997d6f958?s=128&d=identicon&r=PG", "display_name": "wizardfan", "link": "https://stackoverflow.com/users/2032419/wizardfan"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1493820068, "post_id": 43760883, "comment_id": 74565721, "body": "Many thanks for the links which I failed to find on the perldancer website"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1493820815, "last_edit_date": 1493820815, "creation_date": 1493819648, "answer_id": 43762085, "question_id": 43760883, "link": "https://stackoverflow.com/questions/43760883/how-to-allow-multiple-connections-to-dancer2/43762085#43762085", "title": "How to allow multiple connections to Dancer2", "body": "<p>How are you deploying your Dancer2 app? If you're using <code>plackup</code>, then you should realise that the default server that <code>plackup</code> uses only supports a single connection. But you can use the <code>-s</code> option to change to something like <a href=\"https://metacpan.org/release/Starman\" rel=\"nofollow noreferrer\">Starman</a>, which supports multiple connections. See <a href=\"https://metacpan.org/pod/Dancer2::Manual::Deployment\" rel=\"nofollow noreferrer\">Dancer2::Manual::Deployment</a> for more details.</p>\n\n<p>If that's not the case, then you need to tell us more about your application. Is it possible that requests are blocking because they all need access to some shared resource?</p>\n"}], "owner": {"reputation": 156, "user_id": 2032419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dec6201728aab2650e746997d6f958?s=128&d=identicon&r=PG", "display_name": "wizardfan", "link": "https://stackoverflow.com/users/2032419/wizardfan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 43762085, "answer_count": 1, "score": 0, "last_activity_date": 1493820815, "creation_date": 1493816621, "last_edit_date": 1493820340, "question_id": 43760883, "link": "https://stackoverflow.com/questions/43760883/how-to-allow-multiple-connections-to-dancer2", "title": "How to allow multiple connections to Dancer2", "body": "<p>I am using Perl Dancer2 as the RESTful service framework with the basic setting (using command </p>\n\n<blockquote>\n  <p>dancer2 -a MyWeb::App</p>\n</blockquote>\n\n<p>to generate template files and add \"get\" routes in the auto-generated MyWeb-App/lib/MyWeb/App.pm file). Recently I found out that when one request needs a long period of time to finish, the server is locked to only serve that request. For example</p>\n\n<pre><code>get '/' =&gt; sub {# simple request to redirect to a static page\n    template 'index'; #template directive Templates all go into the views/\n};\nget '/compute' =&gt; sub{\n    for (my $i=0;$i&lt;1000000;$i++){\n         wait(1000);  #simulate long computation time \n    }\n    return \"Done!\";\n};\n</code></pre>\n\n<p>When firstly in one tab <code>http://myhost.com/compute</code> is entered, in another tab the link <code>http://myhost.com/</code> won't display anything until the previous /compute route finishes, which seems to me that only one connection is allowed at a time. The question is how to set up the Dancer2 server to allow multiple connections, i.e. the two tabs mentioned above can be run at the same time?  </p>\n\n<p>Many thanks!</p>\n"}, {"tags": ["perl", "libsodium"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493819354, "post_id": 43759288, "comment_id": 74565115, "body": "Did you do <code>Dumper(\\@keyPair)</code> or <code>Dumper(@keyPair)</code>?  I suspect you did the latter, in which case <code>$VAR1</code> is the first (and only) element of <code>@keyPair</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493819978, "post_id": 43759288, "comment_id": 74565640, "body": "Your values are accessible as <code>$keyPair[0][0]</code> and <code>$keyPair[0][1]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493813107, "post_id": 43759449, "comment_id": 74560166, "body": "While that&#39;s correct, the documentation says it returns a list."}, {"owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493813301, "post_id": 43759449, "comment_id": 74560305, "body": "<code>box_keypair</code>, does. Looks like the OP is using <code>crypto_box_keypair</code>, which is undocumented and returns the arrayref. Updated the answer to clarify."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493813387, "post_id": 43759449, "comment_id": 74560366, "body": "It&#39;s not undocumented. It&#39;s <a href=\"https://metacpan.org/source/MGREGORO/Crypt-Sodium-0.11/Sodium.xs#L526\" rel=\"nofollow noreferrer\">the underlying XS implementation</a>. The <code>box_keypair</code> function which is written in Perl calls <code>crypto_box_keypair</code> and <a href=\"https://metacpan.org/source/MGREGORO/Crypt-Sodium-0.11/lib/Crypt/Sodium.pm#L262\" rel=\"nofollow noreferrer\">dereferences the the array ref which that returns</a>."}, {"owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 5, "creation_date": 1493813679, "post_id": 43759449, "comment_id": 74560592, "body": "If you need to look into the underlying implementation to find the definition, rather than reading the documentation, I think that counts as being undocumented. ;)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1493820485, "post_id": 43759449, "comment_id": 74566050, "body": "It&#39;s odd that <code>crypto_box_keypair</code> is exported at all. In fact the module exports nearly seventy symbols, most of which are undocumented. I wonder how the OP discovered the <code>crypto_box_keypair</code> function at all, as it&#39;s visible only in the source code. The &quot;official&quot; access to the function seems to be through <code>box_keypair</code>, which just dereferences the result of a call to <code>crypto_box_keypair</code> and returns the (two-element) list. I don&#39;t understand how a prefix of <code>crypto_</code> can indicate that the result is returned by reference. An odd module altogether."}, {"owner": {"reputation": 1091, "user_id": 4474629, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e3d1d6e41980939611b75370816b8843?s=128&d=identicon&r=PG&f=1", "display_name": "Little Code", "link": "https://stackoverflow.com/users/4474629/little-code"}, "edited": false, "score": 0, "creation_date": 1493827321, "post_id": 43759449, "comment_id": 74571248, "body": "Can&#39;t remember off the top my my head, but I think the <code>crypto_box_keypair</code> &#39;idea&#39; (in my head to use the function) came from the underlying libsodium c library.  It is indeed its a bit of a shame its an &quot;odd&quot; Perl module, but I haven&#39;t found much better in terms of Perl cryptography (and libsodium access, or at least access to the sort of functionality in libsodium)"}], "tags": [], "owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "is_accepted": false, "score": 6, "last_activity_date": 1493813243, "last_edit_date": 1493813243, "creation_date": 1493812742, "answer_id": 43759449, "question_id": 43759288, "link": "https://stackoverflow.com/questions/43759288/trouble-accessing-element-from-perl-anonymous-array/43759449#43759449", "title": "Trouble accessing element from Perl anonymous array", "body": "<p>If it returns an array reference, you need to use a scalar to store the result, not an array.</p>\n\n<pre><code>my $keyPair = crypto_box_keypair();\nsay scalar @$keyPair;\nsay $keyPair-&gt;[0];\nsay $keyPair-&gt;[1];\n</code></pre>\n\n<p>When you did <code>my @keyPair=crypto_box_keypair();</code>, you assigned the whole array reference to the first element of a new array, which is why the size is 1 and you can see the contents when you dump it.</p>\n\n<p>According to the documentation <code>box_keypair()</code> (not <code>crypto_box_keypair()</code>) does return a list. So in that case</p>\n\n<pre><code>my @keyPair = box_keypair();\n</code></pre>\n\n<p>should work fine.</p>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 1, "last_activity_date": 1493816738, "creation_date": 1493816738, "answer_id": 43760936, "question_id": 43759288, "link": "https://stackoverflow.com/questions/43759288/trouble-accessing-element-from-perl-anonymous-array/43760936#43760936", "title": "Trouble accessing element from Perl anonymous array", "body": "<p>While @Adam Millerchip showed you how to access the elements you want, I am going to comment on the other part of your problem. You say:</p>\n\n<blockquote>\n  <p>My understanding (confirmed by <code>Data::Dumper</code>)</p>\n</blockquote>\n\n<p>In fact, no such thing was confirmed by <code>Data::Dumper</code>. If you want to see what is in <code>@keyPair</code>, you must pass a reference to <code>@keyPair</code> to <code>Dumper</code>. That is, you must use</p>\n\n<pre><code>print Dumper \\@keypair;\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>print Dumper @keypair; # I suspect you did this\n</code></pre>\n\n<p>If you had passed a reference to <code>@keyPair</code>, you would have clearly seen it was an array which contained a single anonymous array.</p>\n\n<p>Instead, by not passing a reference, you passed the elements of <code>@keyPair</code> as arguments to <code>Dumper</code>. In this case, <code>@keyPair</code> has a single element, a reference to an anonymous array with two elements. The output from <code>Dumper</code> thus fooled you into thinking <code>@keyPair</code> had two elements.</p>\n\n<p>That is, you code is equivalent to:</p>\n\n<pre><code> my @x = (['a', 'b']);\n print Dumper @x;\n</code></pre>\n\n<p>that is the same as <code>print Dumper $x[0]</code>. If you want to see what is in <code>@x</code>, you must pass a reference to <code>@x</code> as in:</p>\n\n<pre><code> print Dumper \\@x;\n</code></pre>\n\n<p>Examples:</p>\n\n<pre>$ perl -MData::Dumper -e \"@x=(['a','b']);print Dumper @x\"\n$VAR1 = [\n          'a',\n          'b'\n        ];</pre>\n\n<pre>$ perl -MData::Dumper -e \"@x=(['a','b']);print Dumper $x[0]\"\n$VAR1 = [\n          'a',\n          'b'\n        ];</pre>\n\n<pre>$ perl -MData::Dumper -e \"@x=(['a','b']);print Dumper \\@x\"\n$VAR1 = [\n          [\n            'a',\n            'b'\n          ]\n        ];</pre>\n"}, {"comments": [{"owner": {"reputation": 1091, "user_id": 4474629, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e3d1d6e41980939611b75370816b8843?s=128&d=identicon&r=PG&f=1", "display_name": "Little Code", "link": "https://stackoverflow.com/users/4474629/little-code"}, "edited": false, "score": 0, "creation_date": 1493820764, "post_id": 43762034, "comment_id": 74566266, "body": "Dumper(@keyPair) indeed !  Thank you for pointing out and explaining the error or my ways !"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1493819502, "creation_date": 1493819502, "answer_id": 43762034, "question_id": 43759288, "link": "https://stackoverflow.com/questions/43759288/trouble-accessing-element-from-perl-anonymous-array/43762034#43762034", "title": "Trouble accessing element from Perl anonymous array", "body": "<p>Did you do <code>Dumper(\\@keyPair)</code> or <code>Dumper(@keyPair)</code>?  I suspect you did the latter, in which case <code>$VAR1</code> is the first (and only) element of <code>@keyPair</code>. If you want to dump an array, pass a reference to it; it's far easier to grasp that way.</p>\n\n<p>Continuing with that assumption, <code>crypto_box_keypair</code> appears to return a reference to an array rather than multiple scalars. As such, the usage should be</p>\n\n<pre><code>my $keyPair = crypto_box_keypair();\nsay scalar @$keyPair;\nsay $keyPair-&gt;[0];\nsay $keyPair-&gt;[1];\n</code></pre>\n"}], "owner": {"reputation": 1091, "user_id": 4474629, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e3d1d6e41980939611b75370816b8843?s=128&d=identicon&r=PG&f=1", "display_name": "Little Code", "link": "https://stackoverflow.com/users/4474629/little-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 43762034, "answer_count": 3, "score": 0, "last_activity_date": 1493819502, "creation_date": 1493812336, "last_edit_date": 1493814461, "question_id": 43759288, "link": "https://stackoverflow.com/questions/43759288/trouble-accessing-element-from-perl-anonymous-array", "title": "Trouble accessing element from Perl anonymous array", "body": "<p>I am trying to use <code>crypto_box_keypair</code> from\n<a href=\"https://metacpan.org/pod/Crypt::Sodium\" rel=\"nofollow noreferrer\"><code>Crypt::Sodium</code></a>:</p>\n\n<pre><code>my @keyPair = crypto_box_keypair();\n</code></pre>\n\n<p>My understanding (confirmed by <code>Data::Dumper</code>) is that <code>Crypt::Sodium</code> returns an anonymous array:</p>\n\n<pre><code>$VAR1 = [\n          'k?@\u02b5????$p?-0?3',\n          '?1????qRo??;???1?'\n        ];\n</code></pre>\n\n<p>But I can't seem to access the individual elements.</p>\n\n<pre><code>say scalar @keyPair;\n</code></pre>\n\n<p>Returns 1, despite two elements being clearly shown by <code>Data::Dumper</code>?</p>\n\n<p>And </p>\n\n<pre><code>$keyPair[1] \n</code></pre>\n\n<p>is <code>undef</code>.</p>\n"}, {"tags": ["perl", "perl-data-structures", "perl-hash"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1493804816, "post_id": 43756386, "comment_id": 74554440, "body": "I fixed the missing <code>&#39;</code> and <code>,</code>. Please take more care when you build a data structure from hand next time. Is <code>$VAR1</code> one element in <code>@$course_sections</code>?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1493804980, "post_id": 43756386, "comment_id": 74554572, "body": "<code>@sorted</code> is an array, not a hash. Is each element in <code>$course_sections</code> a row? Please <a href=\"https://stackoverflow.com/posts/43756386/edit\">edit</a> and show expected output."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493805520, "post_id": 43756386, "comment_id": 74554920, "body": "Is altering the overall data structure allowed? I.e. can we sort <code>instructors</code> in place?"}], "answers": [{"comments": [{"owner": {"reputation": 344, "user_id": 1254174, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/2416cff2f4d8dd65a5bf52228d86208a?s=128&d=identicon&r=PG", "display_name": "Ash_and_Perl", "link": "https://stackoverflow.com/users/1254174/ash-and-perl"}, "edited": false, "score": 1, "creation_date": 1493808613, "post_id": 43757298, "comment_id": 74557036, "body": "Awesome code. It worked like charm. Thanks for sharing the knowledge related to autovivification, I wasn&#39;t aware of it before. Sorry couldn&#39;t reply to your previous comments."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1493806770, "creation_date": 1493806770, "answer_id": 43757298, "question_id": 43756386, "link": "https://stackoverflow.com/questions/43756386/how-to-sort-this-custom-hashes-of-hashes-in-perl-on-the-value/43757298#43757298", "title": "How to sort this custom hashes of hashes in perl on the value", "body": "<p>You need to replace each <code>instructors</code> array ref with the sorted version that you created in your <code>foreach</code> loop. That way you get the instructors of each individual row sorted. Then you can sort the whole <code>$course_sections</code> by the name of the first instructor of each row.</p>\n\n<pre><code># sort the instructors in-place\nforeach my $elem (@$course_sections) {\n    $elem-&gt;{'instructors'} = [\n        map  { $_-&gt;[1] }\n        sort { $a-&gt;[0] cmp $b-&gt;[0] }\n        map  { [ $_-&gt;{'lname'}, $_ ] } @{ $elem-&gt;{'instructors'} }\n    ];\n}\n\n# sort the courses by first instructor\n$course_sections = [\n    map      { $_-&gt;[1] }\n        sort { $a-&gt;[0] cmp $b-&gt;[0] }\n        map  { [ ( $_-&gt;{'instructors'}-&gt;[0] ? $_-&gt;{'instructors'}-&gt;[0]-&gt;{'lname'} : q{} ), $_ ] }\n        @$course_sections\n];\n</code></pre>\n\n<p>Make sure to replace <code>undef</code> values with empty strings so the <code>cmp</code> doesn't blow up. We shouldn't do <code>$_-&gt;{'instructors'}-&gt;[0]-&gt;{'lname'} // q{}</code> because autovivification might create a bunch of empty stuff in our data structure.</p>\n\n<p>Here's your example data pulled together:</p>\n\n<pre><code>my $course_sections = [\n    {\n        'instructors' =&gt; [\n            {\n                'is_placeholder' =&gt; 0,\n                'lname'          =&gt; 'Lordy',\n                'name'           =&gt; 'Daniel Lordy'\n            },\n            {\n                'is_placeholder' =&gt; 0,\n                'lname'          =&gt; 'Fisher',\n                'name'           =&gt; 'Bethy Fisher'\n            },\n            {\n                'is_placeholder' =&gt; 0,\n                'lname'          =&gt; 'Jaya',\n                'name'           =&gt; 'Jennifer Jaya'\n            },\n        ],\n        'id'  =&gt; '1237058',\n        'XXX' =&gt; {\n            'name' =&gt; 'Fall 2015 MFT Master 695',\n        },\n        'YYY' =&gt; '45'\n    },\n    {\n        'instructors' =&gt; [],\n        'id'          =&gt; '1237058',\n        'XXX'         =&gt; {\n            'name' =&gt; 'Fall 2015 MFT Master 695',\n        },\n        'YYY' =&gt; '45'\n    }\n];\n</code></pre>\n\n<p>And this is the output, dumped with Data::Printer.</p>\n\n<pre><code>\\ [\n    [0] {\n        id            1237058,\n        instructors   [],\n        XXX           {\n            name   \"Fall 2015 MFT Master 695\"\n        },\n        YYY           45\n    },\n    [1] {\n        id            1237058,\n        instructors   [\n            [0] {\n                is_placeholder   0,\n                lname            \"Fisher\",\n                name             \"Bethy Fisher\"\n            },\n            [1] {\n                is_placeholder   0,\n                lname            \"Jaya\",\n                name             \"Jennifer Jaya\"\n            },\n            [2] {\n                is_placeholder   0,\n                lname            \"Lordy\",\n                name             \"Daniel Lordy\"\n            }\n        ],\n        XXX           {\n            name   \"Fall 2015 MFT Master 695\"\n        },\n        YYY           45\n    }\n]\n</code></pre>\n"}], "owner": {"reputation": 344, "user_id": 1254174, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/2416cff2f4d8dd65a5bf52228d86208a?s=128&d=identicon&r=PG", "display_name": "Ash_and_Perl", "link": "https://stackoverflow.com/users/1254174/ash-and-perl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 43757298, "answer_count": 1, "score": 0, "last_activity_date": 1493806770, "creation_date": 1493804318, "last_edit_date": 1493804668, "question_id": 43756386, "link": "https://stackoverflow.com/questions/43756386/how-to-sort-this-custom-hashes-of-hashes-in-perl-on-the-value", "title": "How to sort this custom hashes of hashes in perl on the value", "body": "<p>I am facing an issue with the sort functionality on my Application. I need to sort my Hash of hashes on the <code>lname</code> key under the <code>instructors</code>. The legacy \napplication is written in Perl.</p>\n\n<p>Here is the dump of the Hash which i need to sort.</p>\n\n<pre><code>$VAR1 = {\n      'instructors' =&gt; [\n                         {\n                           'is_placeholder' =&gt; 0,\n                           'lname' =&gt; 'Lordy',\n                           'name' =&gt; 'Daniel Lordy'\n                         },\n                         {\n                           'is_placeholder' =&gt; 0,\n                           'lname' =&gt; 'Fisher',\n                           'name' =&gt; 'Bethy Fisher'\n                         },\n                         {\n                           'is_placeholder' =&gt; 0,\n                           'lname' =&gt; 'Jaya',\n                           'name' =&gt; 'Jennifer Jaya'\n                         },\n                       ],\n      'id' =&gt; '1237058',\n      'XXX' =&gt; {\n                  'name' =&gt; 'Fall 2015 MFT Master 695',\n                },\n      'YYY' =&gt; '45'\n    };\n</code></pre>\n\n<p>The instructors key in the above structure can be empty as well. \nFor Example:</p>\n\n<pre><code>$VAR1 = {\n      'instructors' =&gt; [],\n      'id' =&gt; '1237058',\n      'XXX' =&gt; {\n                  'name' =&gt; 'Fall 2015 MFT Master 695',\n                },\n      'YYY' =&gt; '45'\n    };\n</code></pre>\n\n<p>In my application, Users have an option to sort the column based on instructor names. So when user sorts by ascending order, the application should show rows which have instructors are empty at the start and then show the rest of the rows in which each row has the instructor names sorted in ascending order. Vice versa for Descending Order.</p>\n\n<p>This is the code which I have tried until now.</p>\n\n<pre><code>if( $sort_order eq 'ASC' ) {\n  foreach my $elem ( @$course_sections ) {\n    my @sorted = map { $_-&gt;[1] }\n                  sort { $a-&gt;[0] cmp $b-&gt;[0] }\n                    map { [$_-&gt;{'lname'}, $_] } @{$elem-&gt;{'instructors'}};\n\n}\nif( $sort_order eq 'DESC' ) {\n  foreach my $elem ( @$course_sections ) {\n    my @sorted = map { $_-&gt;[1] }\n                  sort { $b-&gt;[0] cmp $a-&gt;[0] }\n                    map { [$_-&gt;{'lname'}, $_] } @{$elem-&gt;{'instructors'}};\n\n}\n</code></pre>\n\n<p>How do I get this <code>@sorted</code> hash affect the order of rows in <code>@$course_sections</code>. Let me know if there is any easier way to do it.</p>\n\n<p>Thanks in Advance.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1493804141, "post_id": 43755481, "comment_id": 74553903, "body": "@H&#229;konH&#230;gland Yes, it&#39;s a full path"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493818115, "post_id": 43755481, "comment_id": 74564095, "body": "I am assuming this is on Windows, and you are running into one of the many limitations of <code>perl</code> using ANSI versions of Win32 API functions.  You may instead want to give <a href=\"https://metacpan.org/pod/Win32::LongPath\" rel=\"nofollow noreferrer\">Win32::LongPath</a> a try while specifying <code>no_chdir</code> in <code>find</code>."}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493906118, "post_id": 43755481, "comment_id": 74610178, "body": "@Sinan&#220;n&#252;r correct assumming. I will give it a try, but as I specified in my question, I can&#39;t use no chdir, since in the current architecture(an ancient one), we use full paths."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493906746, "post_id": 43755481, "comment_id": 74610695, "body": "I don&#39;t understand. You are saying something like because the ocean temperatures are cold, I can&#39;t go skiing in the Alps. Maybe it makes complete sense, but there is no relevant information in your post that would put that statement in a meaningful context. You should be able to use <code>chdirL</code> provided by the module in your <code>wanted</code>."}], "owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 468, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1493806222, "creation_date": 1493801786, "last_edit_date": 1493806222, "question_id": 43755481, "link": "https://stackoverflow.com/questions/43755481/filefind-cant-cd", "title": "File::Find can&#39;t cd", "body": "<p>Using the <code>find()</code> function provided by <code>File::Find</code> I run into an unexpected exit. I localized the problem to be in the file <code>Find.pm</code> in <code>_find_dir($$$)</code> function at those lines :</p>\n\n<pre><code>die \"Can't cd to $tmp from $dir_name\"\nunless chdir ($tmp);\n</code></pre>\n\n<p>I printed out <code>$tmp</code> and <code>$dir_name</code>. <code>$tmp</code> is <code>../..</code> and <code>$dir_name</code> is a 255 char full path(<code>d:\\first_dir\\second_dir\\...\\last_dir</code>). Is there any way I could overpass this limitation? ( I still want to get the full paths, so the <code>no_chdir</code> option for the <code>find()</code> function is excluded).</p>\n\n<p>Also by changing the directory from command line to that 255 path and trying to run <code>cd ../..</code> fails with the message <code>The filename or extension is too long.</code></p>\n"}, {"tags": ["perl", "grep"], "answers": [{"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 1, "last_activity_date": 1493804904, "last_edit_date": 1493804904, "creation_date": 1493804276, "answer_id": 43756373, "question_id": 43755382, "link": "https://stackoverflow.com/questions/43755382/how-to-check-if-all-ids-inside-an-array-exist-in-a-csv-file/43756373#43756373", "title": "How to check if all ids inside an array exist in a csv file?", "body": "<p>With <a href=\"https://perldoc.perl.org/functions/splice.html\" rel=\"nofollow noreferrer\"> splice</a> try the follow</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy @BLOCK_X= (1,2,3,4);\n\nmy @BLOCK_Y= (3,6,2,5);\n\nopen my $wh,\"&lt;\",\"file.csv\";\n\n&lt;$wh&gt;; #remove header\n\nwhile(&lt;$wh&gt;)\n{\n\n    my ($x,$y) = (split\";\")[0,1];  #store the first column in $x and second column in $y\n\n    foreach my $i(0..$#BLOCK_X)\n    {\n\n      splice(@BLOCK_X,$i,1) if(($BLOCK_X[$i]) &amp;&amp; ($x == int($BLOCK_X[$i]))); #Check if it is values are equal and variable is declared.\n\n      splice(@BLOCK_Y,$i,1) if(($BLOCK_Y[$i]) &amp;&amp; ($y == int($BLOCK_Y[$i])));\n\n    }\n}\n\nprint \"@BLOCK_X\\n\";\nprint \"@BLOCK_Y\\n\";\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 6235589, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/9e62de362533777ba04f9cbc4a45c1e2?s=128&d=identicon&r=PG&f=1", "display_name": "Moehre", "link": "https://stackoverflow.com/users/6235589/moehre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493804904, "creation_date": 1493801482, "last_edit_date": 1493803427, "question_id": 43755382, "link": "https://stackoverflow.com/questions/43755382/how-to-check-if-all-ids-inside-an-array-exist-in-a-csv-file", "title": "How to check if all ids inside an array exist in a csv file?", "body": "<p>I have two arrays:</p>\n\n<pre><code>BLOCK_X= (1,2,3,4)\nBLOCK_Y= (3,6,2,5)\n</code></pre>\n\n<p><strong>CSV</strong></p>\n\n<pre><code>BLOCK_X,BLOCK_Y;DISPLAYTYPE;URBAN;LINKLENGTH;PARENTID;SOURCEID;TRUCKTOLL\n1;3;19;;;;1;0\n2;6;21;;;;2;0\n3;2;23;;;;3;0\n</code></pre>\n\n<p>Now I will check if all values of <em>BLOCK_X</em> and <em>BLOCK_Y</em> are inside the field <code>BLOCK_X</code> and <code>BLOCK_Y</code> of that csv file. Otherwise it should appeare a message which values are not inside.</p>\n\n<p>In this case it should appear that value <code>BLOCK_X = 4</code>, <code>BLOCK_Y = 5</code> are not inside the csv file. How can I realize this?</p>\n"}, {"tags": ["arrays", "perl", "template-toolkit"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493798049, "post_id": 43754194, "comment_id": 74549944, "body": "The <code>FOREACH item IN list</code> is correct. But you want to regroup them, right? This is like a pivot in Excel. You have something like <code>{ 1 =&gt; &#39;foo&#39;, 2 =&gt; &#39;bar&#39;, 3 =&gt; &#39;foo&#39; }</code> and you want to show that user <code>foo</code> has <code>1, 3</code> and <code>bar</code> has <code>2</code>. Did I understand?"}, {"owner": {"reputation": 157, "user_id": 5576428, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f1a36e8580fcbeaf19b1c57616a46dad?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/5576428/albert"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493798154, "post_id": 43754194, "comment_id": 74550018, "body": "Yes, that&#39;s correct. You got it absolutely correct"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493798621, "post_id": 43754194, "comment_id": 74550286, "body": "Is there more than one admin? I don&#39;t understand the expected output yet."}, {"owner": {"reputation": 157, "user_id": 5576428, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f1a36e8580fcbeaf19b1c57616a46dad?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/5576428/albert"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493798735, "post_id": 43754194, "comment_id": 74550359, "body": "The admin is going to be the same, I mean, that it&#39;s going to be the same admin for several groups. but I want to capture the groups and the admin in hash form. Later I will do something more with the admin but not for now. So now the desire output it would be the group name and id."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493799516, "post_id": 43754194, "comment_id": 74550835, "body": "So you want to group by admin? That is logic that really shouldn&#39;t go into the template. But it&#39;s possible."}, {"owner": {"reputation": 157, "user_id": 5576428, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f1a36e8580fcbeaf19b1c57616a46dad?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/5576428/albert"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493799585, "post_id": 43754194, "comment_id": 74550866, "body": "Correct, so what would you suggest?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1493800084, "post_id": 43754194, "comment_id": 74551164, "body": "I am struggling with the TT syntax right now."}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 5576428, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f1a36e8580fcbeaf19b1c57616a46dad?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/5576428/albert"}, "edited": false, "score": 0, "creation_date": 1493799187, "post_id": 43754461, "comment_id": 74550621, "body": "ok, but then how I an access to the id in $gr in the template?"}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 3, "last_activity_date": 1493798647, "creation_date": 1493798647, "answer_id": 43754461, "question_id": 43754194, "link": "https://stackoverflow.com/questions/43754194/access-an-array-item-that-is-an-anonymous-hash-in-template-toolkit-in-perl/43754461#43754461", "title": "Access an array item that is an anonymous hash in Template Toolkit in Perl", "body": "<p>You will need to rework your code significantly to make this possible.</p>\n\n<p>Keys in Perl hashes are <em>strings</em>, not scalars. Using anything that isn't a string as a key in a hash (e.g, <code>$gr</code> in the expression <code>{ $gr =&gt; $gra }</code> will cause it to be stringified, just as if you had interpolated it into a string or printed it. Unless you have explicitly overloaded the <code>\"\"</code> operator on the <code>My::Model::Group</code> object, the key will end up being stored as a literal string along the lines of:</p>\n\n<pre><code>\"My::Model::Group=HASH(0x1234567890)\"\n</code></pre>\n\n<p>This string cannot be converted back to the original object -- in fact, the original object was probably garbage-collected as soon as it went out of scope, so it no longer exists at all.</p>\n\n<p>Consider storing the pair as an array reference instead, e.g.</p>\n\n<pre><code>push @$groups, [$gr, $gra];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 157, "user_id": 5576428, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f1a36e8580fcbeaf19b1c57616a46dad?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/5576428/albert"}, "edited": false, "score": 0, "creation_date": 1493802878, "post_id": 43755703, "comment_id": 74552974, "body": "with that snippet of code I got it. Thanks a lot! You guys made my day"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 157, "user_id": 5576428, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f1a36e8580fcbeaf19b1c57616a46dad?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/5576428/albert"}, "edited": false, "score": 0, "creation_date": 1493802994, "post_id": 43755703, "comment_id": 74553057, "body": "@Albert the really important part is the <code>DEFAULT</code>. That&#39;s what took me a while to figure out."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1493820823, "post_id": 43755703, "comment_id": 74566314, "body": "As you mentioned, this is best done in Perl (not TT), so I added the Perl code to do it."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493821300, "post_id": 43755703, "comment_id": 74566702, "body": "Thank you @ikegami."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1493820576, "last_edit_date": 1495542879, "creation_date": 1493802492, "answer_id": 43755703, "question_id": 43754194, "link": "https://stackoverflow.com/questions/43754194/access-an-array-item-that-is-an-anonymous-hash-in-template-toolkit-in-perl/43755703#43755703", "title": "Access an array item that is an anonymous hash in Template Toolkit in Perl", "body": "<p><a href=\"https://stackoverflow.com/a/43754461/1331451\">duskwuff already explains in their answer</a> that you can't use objects as hash keys as they get serialized and you'll lose the object-ness. My answer builds on that.</p>\n\n<p>Let's say you have an array of arrays instead, where each inner array holds a pair of objects. I've created Moo classes to illustrate.</p>\n\n<pre><code>package My::Model::Group;\nuse Moo;\nhas [qw/id name/] =&gt; ( is =&gt; 'ro' );\n\npackage My::Model::Group::Admin;\nuse Moo;\nhas [qw/id name/] =&gt; ( is =&gt; 'ro' );\n\npackage main;\n\nmy $groups = [\n    [\n        My::Model::Group-&gt;new( id =&gt; 1, name =&gt; 'group1' ) =&gt;\n            My::Model::Group::Admin-&gt;new( id =&gt; 1, name =&gt; 'foo' )\n    ],\n    [\n        My::Model::Group-&gt;new( id =&gt; 2, name =&gt; 'group2' ) =&gt;\n            My::Model::Group::Admin-&gt;new( id =&gt; 1, name =&gt; 'foo' )\n    ],\n    [\n        My::Model::Group-&gt;new( id =&gt; 3, name =&gt; 'group3' ) =&gt;\n            My::Model::Group::Admin-&gt;new( id =&gt; 1, name =&gt; 'bar' )\n    ],\n    [\n        My::Model::Group-&gt;new( id =&gt; 4, name =&gt; 'group4' ) =&gt;\n            My::Model::Group::Admin-&gt;new( id =&gt; 1, name =&gt; 'foo' )\n    ],\n];\n</code></pre>\n\n<p>There are four pairs. Two admins, four groups. Three of the groups belong to the <em>foo</em> admin, and one to <em>bar</em>. Now let's look at the template.</p>\n\n<pre><code>use Template;\n\nmy $tt = Template-&gt;new();\n$tt-&gt;process( \\*DATA, { groups =&gt; $groups }, \\my $output )\n   or die $tt-&gt;error;\n\nprint $output;\n__DATA__\n[%- FOREACH item IN groups -%]\n    [%- DEFAULT by_admin.${item.1.name} = [] -%]\n    [%- by_admin.${item.1.name}.push(item.0) -%]\n[%- END -%]\n\n[%- FOREACH admin IN by_admin.keys.sort -%]\n    [%- FOREACH group IN by_admin.$admin -%]\n        [%- admin %] -&gt; [% group.id %]\n\n    [%- END -%]\n[%- END -%]\n</code></pre>\n\n<p>The relevant part obviously is the <code>DATA</code> section. We need to reorganize the array data structure into a hash that has the admins, and then each group sorted into one of the admin slots.</p>\n\n<p>We don't need to create the <code>by_admin</code> variable. It will be created globally implicitly. But we do need to set a default value for <code>$by_admin-&gt;{$item[0]-&gt;name}</code> (I'm using Perl syntax now, to make it easier to understand). It seems like Template Toolkit does not know <a href=\"https://en.wikipedia.org/wiki/Autovivification\" rel=\"nofollow noreferrer\">autovivification</a>, and <a href=\"http://www.template-toolkit.org/docs/manual/Directives.html#section_DEFAULT\" rel=\"nofollow noreferrer\">the <code>DEFAULT</code> keyword</a> is similar to the <a href=\"http://perldoc.perl.org/perlop.html#Assignment-Operators\" rel=\"nofollow noreferrer\"><code>//=</code> assignment operator in Perl</a>.</p>\n\n<p>We can then <a href=\"http://www.template-toolkit.org/docs/manual/VMethods.html#method_unshift_item_push\" rel=\"nofollow noreferrer\"><code>push</code></a> the first element of <code>item</code> into the array ref we just created (if it didn't exist yet) inside the hash ref element with the key <code>item.1.name</code> inside <code>by_name</code>.</p>\n\n<p>Once we're done preparing, the rest is just a simple loop. We iterate the <a href=\"http://www.template-toolkit.org/docs/manual/VMethods.html#section_sort_nsort\" rel=\"nofollow noreferrer\"><code>sort</code>ed</a> <a href=\"http://www.template-toolkit.org/docs/manual/VMethods.html#section_keys\" rel=\"nofollow noreferrer\"><code>keys</code></a> of <code>by_admin</code>, and then iterate the array ref that's behind that key.</p>\n\n<p>Here's the output:</p>\n\n<pre><code>bar -&gt; 3\nfoo -&gt; 1\nfoo -&gt; 2\nfoo -&gt; 4\n</code></pre>\n\n<p>It would make sense to do the preprocessing not in a template, but in your controller instead. As normal Perl code it should be easier to read.</p>\n\n<pre><code>my %by_admin;\nfor my $group (@$groups) {\n    push @{ $by_admin{ $group-&gt;[1]{name} } }, $group-&gt;[0];\n}\n</code></pre>\n\n<hr>\n\n<p>Note that I have omitted <code>use strict</code> and <code>use warnings</code> for brevity.</p>\n"}], "owner": {"reputation": 157, "user_id": 5576428, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f1a36e8580fcbeaf19b1c57616a46dad?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/5576428/albert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "accepted_answer_id": 43755703, "answer_count": 2, "score": 0, "last_activity_date": 1493820576, "creation_date": 1493797773, "question_id": 43754194, "link": "https://stackoverflow.com/questions/43754194/access-an-array-item-that-is-an-anonymous-hash-in-template-toolkit-in-perl", "title": "Access an array item that is an anonymous hash in Template Toolkit in Perl", "body": "<p>I have this piece of code as part of a foreach loop in my controller:</p>\n\n<pre><code>my $gr = My::Model::Group-&gt;new(id =&gt; $gra-&gt;gr_id);\n$gra = My::Model::Group::Admin-&gt;new(id =&gt; $gra-&gt;id);\npush(@$groups, {$gr =&gt; $gra});\n</code></pre>\n\n<p>In @$groups array I want to store anonymous hashes where the key element is the group object and the value element is the admin of that group object. Then in the template I want to show the list of different groups that the admin can log in, for that I have this code:</p>\n\n<pre><code>[%- FOREACH  gr IN groups -%]\n  &lt;li&gt;&lt;input type=\"radio\" name=\"group\" value=\"[% gr.id %]\"&gt;[% gr.name %]&lt;/input&gt;&lt;/li&gt;\n[%- END -%]\n</code></pre>\n\n<p>I know that the p IN partners is not right but is to show you what I want to achieve. Any suggestions on the template code?</p>\n"}, {"tags": ["perl", "loops", "hash", "foreach", "key-value"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1493797726, "post_id": 43754058, "comment_id": 74549752, "body": "you are getting referencing the hashes in scalar?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1493798005, "post_id": 43754058, "comment_id": 74549910, "body": "If the variable <code>$HashVariable</code> is indeed a hashref the only possibility is that it is empty, without any keys.  Otherwise the code would get in the loop."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1493798247, "post_id": 43754058, "comment_id": 74550077, "body": "could you please share the hash where is getting from"}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 1, "creation_date": 1493801433, "post_id": 43754058, "comment_id": 74551966, "body": "Show us the output of <code>print Dumper($HashVariable);</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1493808501, "post_id": 43754058, "comment_id": 74556963, "body": "@emma: We really need to see how the variable <code>$HashVariable</code> is constructed. Without that all our answers are guesses."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1493808259, "last_edit_date": 1493808259, "creation_date": 1493799938, "answer_id": 43754888, "question_id": 43754058, "link": "https://stackoverflow.com/questions/43754058/printing-hash-value-in-perl/43754888#43754888", "title": "Printing hash value in Perl", "body": "<p>I can't answer completely, because it depends entirely on what's in <code>$HashVariable</code>. </p>\n\n<p>The easiest way to tell what's in there is:</p>\n\n<pre><code>use Data::Dumper;\nprint Dumper $HashVariable;\n</code></pre>\n\n<p>Assuming this is a hash <em>reference</em> - which it would be, if <code>print $HashVariable</code> gives <code>HASH(0xdeadbeef)</code> as an output. </p>\n\n<p>So this <em>should</em> work:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy $HashVariable = { somekey =&gt; 'somevalue' }; \n\nforeach my $key ( keys %$HashVariable ) { \n   print $key, \" =&gt; \", $HashVariable-&gt;{$key},\"\\n\";\n}\n</code></pre>\n\n<p>The  only mistake you're making is that <code>$HashVariable{$key}</code> won't work - you need to dereference, because as it stands it refers to <code>%HashVariable</code> not <code>$HashVariable</code> which are two completely different things. </p>\n\n<p>Otherwise - if it's not entering the loop - it may mean that <code>keys %$HashVariable</code> isn't returning anything. Which is why that <code>Dumper</code> test would be useful - is there any chance you're either not populating it correctly, or you're <em>writing</em> to <code>%HashVariable</code> instead. </p>\n\n<p>E.g.:</p>\n\n<pre><code>my %HashVariable;\n$HashVariable{'test'} = \"foo\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1493809392, "creation_date": 1493809392, "answer_id": 43758209, "question_id": 43754058, "link": "https://stackoverflow.com/questions/43754058/printing-hash-value-in-perl/43758209#43758209", "title": "Printing hash value in Perl", "body": "<p>There's an obvious problem here, but it wouldn't cause the behaviour that you are seeing.</p>\n\n<p>You think that you have a hash reference in <code>$HashVariable</code> and that sounds correct given the <code>HASH(0xd1007d0)</code> output that you see when you print it.</p>\n\n<p>But setting up a hash reference and running your code, gives slightly strange results:</p>\n\n<pre><code>my $HashVariable = {\n  foo =&gt; 1,\n  bar =&gt; 2,\n  baz =&gt; 3,\n};\n\nforeach my $var(keys %{$HashVariable}){\n    print\"In the loop \\n\";\n    print\"$var and $HashVariable{$var}\\n\";\n}\n</code></pre>\n\n<p>The output I get is:</p>\n\n<pre><code>In the loop \nbaz and \nIn the loop \nbar and \nIn the loop \nfoo and \n</code></pre>\n\n<p>Notice that the values aren't being printed out. That's because of the problem I mentioned above. Adding <code>use strict</code> to the program (which you should always do) tells us what the problem is.</p>\n\n<pre><code>Global symbol \"%HashVariable\" requires explicit package name (did you forget to declare \"my %HashVariable\"?) at hash line 14.\nExecution of hash aborted due to compilation errors.\n</code></pre>\n\n<p>You are using <code>$HashVariable{$var}</code> to look up a key in your hash. That would be correct if you had a hash called <code>%HashVariable</code>, but you don't - you have a hash reference called <code>$HashVariable</code> (note the <code>$</code> instead of <code>%</code>). To look up a key from a hash reference, you need to use a dereferencing arrow - <code>$HashVariable-&gt;{$var}</code>.</p>\n\n<p>Fixing that, your program works as expected.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $HashVariable = {\n  foo =&gt; 1,\n  bar =&gt; 2,\n  baz =&gt; 3,\n};\n\nforeach my $var(keys %{$HashVariable}){\n    print\"In the loop \\n\";\n    print\"$var and $HashVariable-&gt;{$var}\\n\";\n}\n</code></pre>\n\n<p>And I see:</p>\n\n<pre><code>In the loop \nbar and 2\nIn the loop \nfoo and 1\nIn the loop \nbaz and 3\n</code></pre>\n\n<p>The only way that you could get the results you describe (the <code>HASH(0xd1007d0)</code> output but no iterations of the loop) is if you have a hash reference but the hash has no keys.</p>\n\n<p>So (as I said in a comment) we need to see how your hash reference is created.</p>\n"}], "owner": {"reputation": 85, "user_id": 7854056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d75dfefc367145352edc4341c08a4025?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/7854056/emma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8927, "favorite_count": 0, "accepted_answer_id": 43754888, "answer_count": 2, "score": 1, "last_activity_date": 1493809392, "creation_date": 1493797355, "last_edit_date": 1493802820, "question_id": 43754058, "link": "https://stackoverflow.com/questions/43754058/printing-hash-value-in-perl", "title": "Printing hash value in Perl", "body": "<p>When I print a variable, I am getting a <code>HASH(0xd1007d0)</code> value. I need to print the values of all the keys and values. However, I am unable to as the control does not enter the loop.</p>\n\n<pre><code>foreach my $var(keys %{$HashVariable}){\n    print\"In the loop \\n\";\n    print\"$var and $HashVariable{$var}\\n\";\n\n}\n</code></pre>\n\n<p>But the control is not even entering the loop. I am new to perl.</p>\n"}, {"tags": ["perl", "segmentation-fault", "freeze-thaw"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1493787330, "post_id": 43750879, "comment_id": 74544864, "body": "Can you explain &quot;<i>immediately after it prints</i>&quot;?  At what point in the code does it crash?  From the question it seems that <code>thaw</code> worked fine ...? Also, why are you assigning to a plain array from <code>thaw</code> and why are you printing a plain array with <code>Dumper</code> (should be a reference)?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1493787692, "post_id": 43750879, "comment_id": 74544980, "body": "Is the server on another machine?  If so, you should use <code>nfreeze</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1493788051, "post_id": 43750879, "comment_id": 74545106, "body": "Are the classes from which the objects are serialized (on client) and to which it is deserialized (on the server) the same, or compatible enough?"}, {"owner": {"reputation": 29, "user_id": 5762089, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--XweSDQhHjI/AAAAAAAAAAI/AAAAAAAAAkA/nb9RnQqB9pw/photo.jpg?sz=128", "display_name": "kaleemulla sharief", "link": "https://stackoverflow.com/users/5762089/kaleemulla-sharief"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1493789611, "post_id": 43750879, "comment_id": 74545643, "body": "Hi, i have used Dumper just to check if the array is reaching the server. it stops after the line &quot;print Dumper(@got);&quot; after a successful print. the server and client are on same machine but are different programs doing different jobs."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1507582621, "post_id": 43750879, "comment_id": 80258968, "body": "This is way off topic, but I see lazier English every day and it&#39;s frustrating. I&#39;m sure you&#39;re aware that <b><i>I</i></b> should be a <i>capital letter</i>, and you probably know that you should use <i>articles</i> like <b><i>a</i></b>, <b><i>an</i></b>, and <b><i>the</i></b>? I think it&#39;s only polite to use your best English when you&#39;re asking for free help."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1507582727, "post_id": 43750879, "comment_id": 80259005, "body": "What is <code>$mq</code>? It&#39;s important to explain how your data us being transmitted."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1493832194, "post_id": 43751903, "comment_id": 74574087, "body": "Note that Storable provides <a href=\"http://search.cpan.org/perldoc?Storable#Hooks\" rel=\"nofollow noreferrer\">hooks</a> that can be used to define how to freeze and thaw objects of a class."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 5, "last_activity_date": 1493790161, "creation_date": 1493790161, "answer_id": 43751903, "question_id": 43750879, "link": "https://stackoverflow.com/questions/43750879/call-to-thaw-throwing-segmentation-fault/43751903#43751903", "title": "Call to thaw throwing segmentation fault", "body": "<p>Freeze/thaw won't work on <code>NetSNMP::OID</code> objects.</p>\n\n<p><code>NetSNMP::OID</code> uses <a href=\"https://metacpan.org/source/HARDAKER/NetSNMP-OID-5.0404/OID.xs\" rel=\"noreferrer\">XS code</a>. The XS code allocates a data structure in C, and makes the address of that data available in Perl. The only data that is stored in the Perl object, and the only data that gets saved and restores with <code>freeze</code> and <code>thaw</code>, is that address. The contents of that address will not survive across processes or across a client-server boundary on different machines.</p>\n\n<p>The crash occurs because the server takes what is basically a random memory address, and tries to make sense of it as a <a href=\"https://metacpan.org/source/HARDAKER/NetSNMP-OID-5.0404/OID.xs#L12\" rel=\"noreferrer\"><code>netsnmp_oid_t</code> data structure</a>.</p>\n\n<p>You will have to come up with another way to access and serialize the actual contents of your <code>NetSNMP::OID</code> object.</p>\n"}], "owner": {"reputation": 29, "user_id": 5762089, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--XweSDQhHjI/AAAAAAAAAAI/AAAAAAAAAkA/nb9RnQqB9pw/photo.jpg?sz=128", "display_name": "kaleemulla sharief", "link": "https://stackoverflow.com/users/5762089/kaleemulla-sharief"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 1, "accepted_answer_id": 43751903, "answer_count": 1, "score": 1, "last_activity_date": 1507582223, "creation_date": 1493784370, "last_edit_date": 1507582223, "question_id": 43750879, "link": "https://stackoverflow.com/questions/43750879/call-to-thaw-throwing-segmentation-fault", "title": "Call to thaw throwing segmentation fault", "body": "\n\n<p>I am using the\n<a href=\"https://metacpan.org/pod/FreezeThaw\" rel=\"nofollow noreferrer\"><code>FreezeThaw</code></a> module\nto send serialized objects from a client to a server. It is working fine for array references with a limited number of entries, but when I do the same for a bigger array of blessed objects the server is stopping with</p>\n\n<blockquote>\n  <p>Segmentation fault (core dumped)</p>\n</blockquote>\n\n<p>Below is what I am using </p>\n\n<p>Client:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>my $message = freeze $_[1]; # encode_json\n$mq-&gt;publish($channel_id, $routing_key, $message);\n</code></pre>\n\n<p>Server:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>my $message  = $payload-&gt;{body} ;\nmy @got = thaw $message;\nprint Dumper(@got);\n</code></pre>\n\n<p>When I use the below array reference it reaches the server, but immediately after it prints, the server stops with a segmentation fault error.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$VAR1 = [\n          [\n            bless( {\n                     'oidptr' =&gt; bless( do{\\(my $o = '140488241049968')}, 'netsnmp_oidPtr' )\n                   }, 'NetSNMP::OID' ),\n            '600',\n            67\n          ],\n\n... approximately 200 lines repeated\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 6, "creation_date": 1493773228, "post_id": 43749409, "comment_id": 74541640, "body": "You have to dereference the hash reference. <code>keys %$result</code>."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 10, "last_activity_date": 1493778910, "creation_date": 1493778910, "answer_id": 43750145, "question_id": 43749409, "link": "https://stackoverflow.com/questions/43749409/trouble-counting-the-number-of-keys-in-a-hash-reference/43750145#43750145", "title": "Trouble counting the number of keys in a hash reference", "body": "<p><code>keys %result</code> passes the wrong hash.</p>\n\n<p><code>keys $result</code> doesn't pass a hash.</p>\n\n<p>You need <code>keys %$result</code>.</p>\n\n<p>References:</p>\n\n<ul>\n<li><a href=\"http://www.perlmonks.org/?node_id=977408\" rel=\"noreferrer\">Mini-Tutorial: Dereferencing Syntax</a></li>\n<li><a href=\"http://www.perlmonks.org/?node_id=69927\" rel=\"noreferrer\">References quick reference</a></li>\n<li><a href=\"http://perldoc.perl.org/perlref.html\" rel=\"noreferrer\">perlref</a></li>\n<li><a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"noreferrer\">perlreftut</a></li>\n<li><a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"noreferrer\">perldsc</a></li>\n<li><a href=\"http://perldoc.perl.org/perllol.html\" rel=\"noreferrer\">perllol</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7956028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zsV42.jpg?s=128&g=1", "display_name": "Vijay Nyalpelli", "link": "https://stackoverflow.com/users/7956028/vijay-nyalpelli"}, "is_accepted": false, "score": 0, "last_activity_date": 1493797936, "creation_date": 1493797936, "answer_id": 43754246, "question_id": 43749409, "link": "https://stackoverflow.com/questions/43749409/trouble-counting-the-number-of-keys-in-a-hash-reference/43754246#43754246", "title": "Trouble counting the number of keys in a hash reference", "body": "<p>I think we need to de-reference as follows using {}</p>\n\n<pre><code>    %{$result}\n</code></pre>\n\n<p>I understood this from below link, <a href=\"http://perlmeme.org/howtos/using_perl/dereferencing.html\" rel=\"nofollow noreferrer\">http://perlmeme.org/howtos/using_perl/dereferencing.html</a></p>\n"}], "owner": {"reputation": 31, "user_id": 5454989, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-c8a8-_DTcqs/AAAAAAAAAAI/AAAAAAAAACY/87ie5mOjBqU/photo.jpg?sz=128", "display_name": "Prajesh", "link": "https://stackoverflow.com/users/5454989/prajesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1052, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1493797936, "creation_date": 1493772969, "last_edit_date": 1493792937, "question_id": 43749409, "link": "https://stackoverflow.com/questions/43749409/trouble-counting-the-number-of-keys-in-a-hash-reference", "title": "Trouble counting the number of keys in a hash reference", "body": "<p>I am trying to calculate the number of elements in a scalar variable which stores a reference to a hash:</p>\n\n<pre><code>$result = $test-&gt;call($val);\n</code></pre>\n\n<p>I have tried <code>keys %result</code>, <code>keys $result</code>. But this has failed.</p>\n\n<p>My understanding is that <code>$result</code> is a scalar variable storing reference to an anonymous hash, because </p>\n\n<pre><code>print \"Test $results \\n\";\n</code></pre>\n\n<p>gives </p>\n\n<pre><code>Test YYY::ZZZ::AAA=HASH(0x1133d80)\n</code></pre>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1493768879, "post_id": 43748799, "comment_id": 74540799, "body": "The <code>ls -ld *&#47;</code> gives you the long listing of only directories, no need for Perl.  Is that what you need?  As for <code>|</code>, you are opening a process there and the pipe signifies whether you write to it (<code>&quot;| command&quot;</code>) or read from it (<code>&quot;command |&quot;</code>).  See <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">open</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1493769066, "post_id": 43748799, "comment_id": 74540841, "body": "In a Perl one-liner: <code>perl -we&#39;print grep { &#47;^d&#47; } qx(ls -l)&#39;</code>"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1493769154, "post_id": 43748799, "comment_id": 74540866, "body": "&quot;A Perl one-liner that behaves the same as <code>ls -l</code>...&quot; So, uhh, what&#39;s wrong with just using <code>ls -l</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 333, "user_id": 6009572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7899bee63fefec4974ebc4e92809e695?s=128&d=identicon&r=PG&f=1", "display_name": "w13rfed", "link": "https://stackoverflow.com/users/6009572/w13rfed"}, "edited": false, "score": 0, "creation_date": 1493812745, "post_id": 43749067, "comment_id": 74559910, "body": "Thanks, I&#39;m just trying to get my head around bits of Perl, what does the curly braces around the regex do in the one-liner?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 333, "user_id": 6009572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7899bee63fefec4974ebc4e92809e695?s=128&d=identicon&r=PG&f=1", "display_name": "w13rfed", "link": "https://stackoverflow.com/users/6009572/w13rfed"}, "edited": false, "score": 0, "creation_date": 1493829467, "post_id": 43749067, "comment_id": 74572505, "body": "@W22  It&#39;s syntax for <code>grep</code>: <code>my @result = grep { code } LIST;</code>, where <code>code</code> runs on each item from (input) <code>LIST</code>. Those elements for which it evaluates to true are passed.  It&#39;s a filter.  Inside the block <code>{ }</code> each element is available as <code>$_</code>, the default variable for many things.  So above is <code>grep { $_ =~ &#47;^d&#47; } LIST</code> and if an element is matched the regex returns true.  You may omit <code>$_ =~</code> since regex also defaults to matching <code>$_</code>. The input here is a list of lines returned by <code>qx(ls -l)</code> (<code>qx</code> is an operator for backticks, which I always forget how to enter in these comments)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 333, "user_id": 6009572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7899bee63fefec4974ebc4e92809e695?s=128&d=identicon&r=PG&f=1", "display_name": "w13rfed", "link": "https://stackoverflow.com/users/6009572/w13rfed"}, "edited": false, "score": 0, "creation_date": 1493829579, "post_id": 43749067, "comment_id": 74572569, "body": "@W22  Documentation: <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\">grep</a> and <a href=\"http://perldoc.perl.org/perlvar.html#General-Variables\" rel=\"nofollow noreferrer\">General Variables in perlvar (for <code>$_</code>)</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 333, "user_id": 6009572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7899bee63fefec4974ebc4e92809e695?s=128&d=identicon&r=PG&f=1", "display_name": "w13rfed", "link": "https://stackoverflow.com/users/6009572/w13rfed"}, "edited": false, "score": 0, "creation_date": 1493830117, "post_id": 43749067, "comment_id": 74572872, "body": "@W22  Examples. (1) Have an array with numbers and you want only positive ones: <code>my @pos = grep { $_ &gt; 0 } @nums;</code>  (2) Have a list of words, and you want only those which are made up strictly of digits: <code>my @nums = grep { &#47;^\\d+$&#47; } @words;</code> (3) Have a list, filter out <code>undef</code>s <code>my @good = grep { defined } @ary;</code> (again, <code>defined</code> by default uses <code>$_</code>, so it&#39;s the same as <code>{ defined $_ }</code>) (4) Filter out elements which are empty strings or only spaces <code>my @nonempty = grep { &#47;\\S&#47; } @ary;</code> (so each elem has at least one non-space, <code>\\S</code>) // This is a very random scoop.."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 333, "user_id": 6009572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7899bee63fefec4974ebc4e92809e695?s=128&d=identicon&r=PG&f=1", "display_name": "w13rfed", "link": "https://stackoverflow.com/users/6009572/w13rfed"}, "edited": false, "score": 0, "creation_date": 1493841209, "post_id": 43749067, "comment_id": 74579125, "body": "@W22  I also added a note at the end, please have a look"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1493841170, "last_edit_date": 1493841170, "creation_date": 1493770071, "answer_id": 43749067, "question_id": 43748799, "link": "https://stackoverflow.com/questions/43748799/listing-directories-on-terminal-with-perl/43749067#43749067", "title": "Listing Directories on terminal with Perl", "body": "<p>The long listing of directories can be directly obtained with</p>\n\n<pre><code>ls -ld */\n</code></pre>\n\n<p>without a need to filter the output.</p>\n\n<p>As for the <code>|</code>, that is how you tell <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">open</a> to open a process and replace its <code>STDIN</code> or <code>STDOUT</code></p>\n\n<blockquote>\n  <p>For three or more arguments if MODE is <code>|-</code>, the filename is interpreted as a command to which output is to be piped, and if MODE is <code>-|</code>, the filename is interpreted as a command that pipes output to us. In the two-argument (and one-argument) form, one should replace dash (<code>-</code>) with the command. See <a href=\"http://perldoc.perl.org/perlipc.html#Using-open%28%29-for-IPC\" rel=\"nofollow noreferrer\">Using open() for IPC in perlipc</a> for more examples of this.</p>\n</blockquote>\n\n<p>Without <code>|</code>, so with <code>open(LS_D, \"ls -l\")</code>, you are trying to open a <em>file</em>, with the name <code>'ls -l'</code></p>\n\n<p>The three-argument <code>open</code>, which is recommended with its lexical filehandle, would be</p>\n\n<pre><code>open my $read_fh, '-|', 'ls', '-l';\n</code></pre>\n\n<p>where the command with arguments is supplied as a list.</p>\n\n<p>Finally, what you have in your Perl script can be done with a one-liner for example as</p>\n\n<pre><code>perl -we'print grep { /^d/ } `ls -l`'\n</code></pre>\n\n<p>but, as shown above, you can get that directly with <code>ls</code> on the command line.</p>\n\n<hr>\n\n<p>I should add</p>\n\n<ul>\n<li><p>Always have <code>use warnings;</code> and <code>use strict;</code> at the top of your programs</p></li>\n<li><p>Always check calls like <code>open</code> and you'll know about, and see the reason for, the failure</p>\n\n<pre><code>open my $fh ...  or die \"Can't open ... : $!\";\n</code></pre>\n\n<p>See <a href=\"http://perldoc.perl.org/perlvar.html#Error-Variables\" rel=\"nofollow noreferrer\">Error Variables in perlvar</a> for <code>$!</code></p></li>\n</ul>\n"}], "owner": {"reputation": 333, "user_id": 6009572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7899bee63fefec4974ebc4e92809e695?s=128&d=identicon&r=PG&f=1", "display_name": "w13rfed", "link": "https://stackoverflow.com/users/6009572/w13rfed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 43749067, "answer_count": 1, "score": 0, "last_activity_date": 1493841170, "creation_date": 1493767871, "question_id": 43748799, "link": "https://stackoverflow.com/questions/43748799/listing-directories-on-terminal-with-perl", "title": "Listing Directories on terminal with Perl", "body": "<p>I'm trying to write a perl one liner for listing the content of a directory like with the \"ls -l\" Unix command however I only want to output directories and not files</p>\n\n<p>I have managed to do it using a perl script but I want to try and see if it can be reduced to a single line using a pipe like </p>\n\n<pre><code>ls -l | grep \"something\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>ls -l | perl -...\n</code></pre>\n\n<p>the way I have done it so far is this</p>\n\n<pre><code>#!/usr/bin/perl\n\nopen(LS_D, \"ls -l |\");\n\nwhile(&lt;LS_D&gt;) {\n  print if /^d.*/; #print line if line starts with d\n}\n</code></pre>\n\n<p>Also could you tell me why this works with the pipe in \"ls -l |\" but not with \"ls -l\"?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "diamond-operator", "scalar-context"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 4, "creation_date": 1493764319, "post_id": 43747871, "comment_id": 74539633, "body": "<code>$ARGV</code> and <code>@ARGV</code> are not the same thing!"}, {"owner": {"reputation": 261, "user_id": 3470733, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b363c669098b0ef4b0e4656616c2094a?s=128&d=identicon&r=PG&f=1", "display_name": "Alan W", "link": "https://stackoverflow.com/users/3470733/alan-w"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1493767095, "post_id": 43747871, "comment_id": 74540398, "body": "I thought that <code>@LIST</code> and <code>$LIST</code> referred to the same variable since <code>$LIST[0]</code> is the first index of <code>@LIST</code>. Perl is a confusing beast."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1493767177, "post_id": 43747871, "comment_id": 74540428, "body": "<code>$ARGV[n]</code> is accessing <code>@ARGV</code>. <code>$ARGV</code> is a separate variable."}], "answers": [{"tags": [], "owner": {"reputation": 72378, "user_id": 183172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vhpvg.jpg?s=128&g=1", "display_name": "martin clayton", "link": "https://stackoverflow.com/users/183172/martin-clayton"}, "is_accepted": true, "score": 4, "last_activity_date": 1493763081, "last_edit_date": 1493763081, "creation_date": 1493762743, "answer_id": 43747990, "question_id": 43747871, "link": "https://stackoverflow.com/questions/43747871/perl-argv-value-in-scalar-context/43747990#43747990", "title": "Perl ARGV value in scalar context", "body": "<p>In answer to your specific question: <em>\"How does $ARGV work?\"</em></p>\n\n<blockquote>\n  <p>$ARGV Contains the name of the current file when reading from &lt;> .</p>\n</blockquote>\n\n<p>from <em><a href=\"http://perldoc.perl.org/perlvar.html#Variables-related-to-filehandles\" rel=\"nofollow noreferrer\">Variables related to filehandles</a></em> in the Perl docs.</p>\n\n<p>Although at the point you print <code>$ARGV</code> you've finished reading from file4, the variable still holds the name of the file.</p>\n"}], "owner": {"reputation": 261, "user_id": 3470733, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b363c669098b0ef4b0e4656616c2094a?s=128&d=identicon&r=PG&f=1", "display_name": "Alan W", "link": "https://stackoverflow.com/users/3470733/alan-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 43747990, "answer_count": 1, "score": 0, "last_activity_date": 1493763081, "creation_date": 1493762102, "question_id": 43747871, "link": "https://stackoverflow.com/questions/43747871/perl-argv-value-in-scalar-context", "title": "Perl ARGV value in scalar context", "body": "<p>Given the following Perl script:</p>\n\n<pre><code># USAGE: ./flurp -x -vf file1 file2 file3 file4\n\n# e.\n$a = shift;\n$b = shift;\n$c = shift;\n@d = &lt;&gt;;\n\n# ei.  value of $b = -vf\n# eii. value of @d = content of file2, file3, file4\n\nprint \"$b\\n\";\nprint \"@d\\n\";\nprint \"$ARGV\\n\";\n</code></pre>\n\n<p>This is the output:</p>\n\n<pre><code>-vf\n{contents of file2, file3, file4}\nfile4\n</code></pre>\n\n<p>I am puzzled by the output of <code>print \"$ARGV\\n\"</code>. If I try to do <code>print \"$ARGV[-1]\\n\"</code>, an empty line is printed out to STDOUT. If I directly reference <code>$ARG[2]</code>, I get an empty line as well. </p>\n\n<p>Why is the script printing <code>file4</code> when <code>$ARGV</code> is used?</p>\n\n<p>As a counter-example, I tried <code>print \"$d\\n\"</code>, expecting to get the last line of <code>file4</code>. Instead of the expected output I got an empty line. How does <code>$ARGV</code> work?</p>\n"}, {"tags": ["regex", "perl", "bioinformatics"], "comments": [{"owner": {"reputation": 25, "user_id": 7086743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36f8ccccbe2ae210455878fb2a6d9259?s=128&d=identicon&r=PG&f=1", "display_name": "Gingerbeardman", "link": "https://stackoverflow.com/users/7086743/gingerbeardman"}, "edited": false, "score": 1, "creation_date": 1493762989, "post_id": 43747392, "comment_id": 74539185, "body": "By site I just meant a given position in the string. I&#39;m telling the program to extract out characters of the string at various positions, forming a new string. The program tests the new string for matches to the regular expression. I&#39;ve updated the question to (hopefully) improve clarity."}, {"owner": {"reputation": 25, "user_id": 7086743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36f8ccccbe2ae210455878fb2a6d9259?s=128&d=identicon&r=PG&f=1", "display_name": "Gingerbeardman", "link": "https://stackoverflow.com/users/7086743/gingerbeardman"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1493763695, "post_id": 43747392, "comment_id": 74539441, "body": "@sln I guess that was part of my question. If there is a reasonable way to write a regular expression that would accomplish this task, then it would save me from writing a script from scratch (but I&#39;m not totally opposed to doing that). I&#39;m just trying to gauge if that is necessary. To some extent I am generally just curious if this is something that is possible with regular expressions or if this is beyond the limits of what they are capable of doing."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1493763831, "post_id": 43747392, "comment_id": 74539483, "body": "<i>&quot;I can only provide one regular expression and no other code&quot;</i> If you have the string to match against, why can you not just split it up as you want? Please explain"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1493764342, "post_id": 43747392, "comment_id": 74539639, "body": "Well, I mean it&#39;s pretty simple isn&#39;t it. You have to have an even character number in a string: <code>12345678</code>. Sit in a loop peeling off the ends, towards the middle, <code>if ( ($str = $a . $b) =~&#47;(AU|CG|U[AG]|G[CU])&#47; ) { print &quot;found $1 at $loopvariable\\r\\n&quot;; }</code>"}, {"owner": {"reputation": 25, "user_id": 7086743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36f8ccccbe2ae210455878fb2a6d9259?s=128&d=identicon&r=PG&f=1", "display_name": "Gingerbeardman", "link": "https://stackoverflow.com/users/7086743/gingerbeardman"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1493764345, "post_id": 43747392, "comment_id": 74539640, "body": "@H&#229;konH&#230;gland Essentially I have ~10k sequences/strings. I can indicate to the program what positions I am interested in looking at and give it a regex. The program then goes line by line and extracts out the characters at those positions. I assume creates a new string with it, checks for a match with the regex, and if a match occurs it keeps the sequence and then moves on to the next line. So I can provide it a regex and tell it what to check against, but that&#39;s about it. It would be some work, but the best solution might just be to write a script from scratch so I have more functionality."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1493765083, "post_id": 43747392, "comment_id": 74539867, "body": "@Gingerbeardman When you give the position and the regex, for example <code>$pos = 10</code> and <code>$regex = qr&#47;(?:AU|CG)|(?:U[AG]|G[CU])&#47;</code>, will it then anchor the match to position 10 in the string, such that it will only look at positions 10 and 11, or will it look further down the string and check for matches at positions 11 and 12, and then 12 and 13, and so on?"}, {"owner": {"reputation": 25, "user_id": 7086743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36f8ccccbe2ae210455878fb2a6d9259?s=128&d=identicon&r=PG&f=1", "display_name": "Gingerbeardman", "link": "https://stackoverflow.com/users/7086743/gingerbeardman"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1493765573, "post_id": 43747392, "comment_id": 74540022, "body": "@H&#229;konH&#230;gland It only looks at the positions I indicate. So I might tell it <code>$pos = 10,12,14,17</code> and then it will only use the characters at those 4 characters  (or however many I indicate) in the regex evaluation. Really I add a line under all of the sequences and add an <code>X</code> at the positions I want to look at and it extracts those. So unfortunately I also couldn&#39;t rearrange the positions to something like <code>$pos = 10,17,12,14</code>."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1493765921, "post_id": 43747392, "comment_id": 74540133, "body": "@Gingerbeardman So if the string is <code>ACGU</code> and <code>$pos = 1,2</code> and <code>$regex</code> as above, it will not find the GU match at pos 3 and 4, since you constrained it to only look at pos 1 and 2?"}, {"owner": {"reputation": 25, "user_id": 7086743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36f8ccccbe2ae210455878fb2a6d9259?s=128&d=identicon&r=PG&f=1", "display_name": "Gingerbeardman", "link": "https://stackoverflow.com/users/7086743/gingerbeardman"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1493765994, "post_id": 43747392, "comment_id": 74540151, "body": "@H&#229;konH&#230;gland Correct"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1493766345, "post_id": 43747392, "comment_id": 74540242, "body": "@Gingerbeardman What if <code>$pos = 1,2,3</code> and regex as above.. now regex will match only two consecutive characters (due to the way the specific regex above is written), will it now try to match at pos 1,2 and then 2,3 ( with the above given specific regex), or will it produce an error, or will it only try to match at pos 1 and 2 and ignore pos 3?"}, {"owner": {"reputation": 25, "user_id": 7086743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36f8ccccbe2ae210455878fb2a6d9259?s=128&d=identicon&r=PG&f=1", "display_name": "Gingerbeardman", "link": "https://stackoverflow.com/users/7086743/gingerbeardman"}, "edited": false, "score": 0, "creation_date": 1493767293, "post_id": 43747392, "comment_id": 74540457, "body": "@sln Ah, I see. I think I can make that work. Thanks for your help!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1493767629, "post_id": 43747392, "comment_id": 74540539, "body": "Well, good luck then. If you want me to write that particular part, just let me know."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1493794552, "post_id": 43747392, "comment_id": 74547899, "body": "What version of Perl are you using?"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7086743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36f8ccccbe2ae210455878fb2a6d9259?s=128&d=identicon&r=PG&f=1", "display_name": "Gingerbeardman", "link": "https://stackoverflow.com/users/7086743/gingerbeardman"}, "edited": false, "score": 1, "creation_date": 1493806499, "post_id": 43753434, "comment_id": 74555614, "body": "This blew my mind. I never even considered the possibility of writing a script that would output a regex. What a great idea!"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 0, "last_activity_date": 1493795438, "creation_date": 1493795438, "answer_id": 43753434, "question_id": 43747392, "link": "https://stackoverflow.com/questions/43747392/is-it-possible-to-search-a-string-for-base-pairs-using-regular-expressions/43753434#43753434", "title": "Is it possible to search a string for base pairs using regular expressions?", "body": "<p>You can try generate the regexp given a set of patterns and positions. For example:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Regexp::Assemble;\n\nmy @patterns = qw( AU CG UA UG GC GU );\nmy @match_pos = qw( 14 23 );\nmy $pat_size = 4;\nmy $regex = build_regex( \\@patterns, \\@match_pos, $pat_size );\n\nsub build_regex {\n    my ( $patterns, $match_pos, $size ) = @_;\n    my $ra = Regexp::Assemble-&gt;new();\n\n    for my $pos_str ( @$match_pos ) {\n        my @pos = map { $_ - 1 } split //, $pos_str;\n        for my $pat_short ( @$patterns ) {\n            my @pat = ('.') x $pat_size;\n            my @chars = split //, $pat_short;\n            @pat[@pos] = @chars;\n            my $pat = join '', @pat;\n            $ra-&gt;add($pat);\n        }\n    }\n    my $regex = $ra-&gt;re;\n    return $regex;\n}\n</code></pre>\n\n<p>This regexp will match all the patterns at either positions 1 and 4 or at positions 2 or 3.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 0, "last_activity_date": 1493830793, "creation_date": 1493830793, "answer_id": 43766017, "question_id": 43747392, "link": "https://stackoverflow.com/questions/43747392/is-it-possible-to-search-a-string-for-base-pairs-using-regular-expressions/43766017#43766017", "title": "Is it possible to search a string for base pairs using regular expressions?", "body": "<p>It seems you just want to get two columns and see if they match your<br>\nregex pair.   </p>\n\n<p>There is no need to try and do this all in a single regex.  </p>\n\n<p>This is the faster way to do it. Use substr() to make your target, then<br>\ntest it with the regex.  </p>\n\n<p>Keep all the input and output together in a structure.<br>\nIn the below sample, this is the  <em>Que</em> hash.   </p>\n\n<p>It doesn't have to be so complicated.  </p>\n\n<p>Perl code  </p>\n\n<pre><code>use strict;\nuse warnings;\n\n\nmy $FullSequence = 'AUGCCGU';\n\nmy %Que = (\n\n # structure:\n #  item =   col pair  ,  results ( target , match )\n    '1' =&gt; [  1,    7,     '', '' ],\n    '2' =&gt; [  2,    1,     '', '' ],\n    '3' =&gt; [  2,    3,     '', '' ],\n    '4' =&gt; [  5,    3,     '', '' ],\n    '5' =&gt; [  5,    2,     '', '' ],\n    '6' =&gt; [  2,    3,     '', '' ],\n\n      # simple overlap test\n    '7a' =&gt; [ 1,    2,     '', '' ],\n    '7b' =&gt; [ 2,    3,     '', '' ],\n    '7c' =&gt; [ 3,    4,     '', '' ],\n    '7d' =&gt; [ 4,    5,     '', '' ],\n    '7e' =&gt; [ 5,    6,     '', '' ],\n    '7f' =&gt; [ 6,    7,     '', '' ],\n);\n\n# Process Que\n  for my $key (keys %Que )\n  {\n     # Get target pair at column locations\n      my $target = substr( $FullSequence, $Que{$key}-&gt;[0] - 1, 1 ) . substr( $FullSequence, $Que{$key}-&gt;[1] - 1, 1 );\n      $Que{$key}-&gt;[2] = $target; \n\n     # Get match result of target\n      if ( $target =~ /(AU|CG|U[AG]|G[CU])/ ) {\n          $Que{$key}-&gt;[3] = $1;\n          next;\n      }\n      $Que{$key}-&gt;[3] = 'no match';\n  }\n\n# Print Que result\n  for my $key ( sort (keys %Que) )\n  {\n      print \"item $key = \";\n      print \"cols (\" . $Que{$key}-&gt;[0] . \",\" . $Que{$key}-&gt;[1] . \") \";\n      print \"result (\" . $Que{$key}-&gt;[2]. \")  = \" . $Que{$key}-&gt;[3] . \"\\n\";\n\n  }\n</code></pre>\n\n<p>Output  </p>\n\n<pre><code>item 1 = cols (1,7) result (AU)  = AU\nitem 2 = cols (2,1) result (UA)  = UA\nitem 3 = cols (2,3) result (UG)  = UG\nitem 4 = cols (5,3) result (CG)  = CG\nitem 5 = cols (5,2) result (CU)  = no match\nitem 6 = cols (2,3) result (UG)  = UG\nitem 7a = cols (1,2) result (AU)  = AU\nitem 7b = cols (2,3) result (UG)  = UG\nitem 7c = cols (3,4) result (GC)  = GC\nitem 7d = cols (4,5) result (CC)  = no match\nitem 7e = cols (5,6) result (CG)  = CG\nitem 7f = cols (6,7) result (GU)  = GU      \n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7086743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36f8ccccbe2ae210455878fb2a6d9259?s=128&d=identicon&r=PG&f=1", "display_name": "Gingerbeardman", "link": "https://stackoverflow.com/users/7086743/gingerbeardman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 43753434, "answer_count": 2, "score": 0, "last_activity_date": 1493830793, "creation_date": 1493759840, "last_edit_date": 1493762368, "question_id": 43747392, "link": "https://stackoverflow.com/questions/43747392/is-it-possible-to-search-a-string-for-base-pairs-using-regular-expressions", "title": "Is it possible to search a string for base pairs using regular expressions?", "body": "<p>I'm trying to use regular expressions to look for RNA base pairs (ie. AU, CG, GC, UA, GU, UG) at positions within a string. I'm co-opting a Perl program that will extract characters at certain positions and looks for a match using a regular expression I provide. For example, given the string <code>AUGCCGU</code>, I could extract the first and last characters, <code>AU</code>, and then check to see if they match a regex I provide. \nSide note: I can only provide one regular expression and no other code.</p>\n\n<p>Testing for a single base pair after extracting 2 characters was pretty straight forward: <code>(AU)|(CG)|(U[AG])|(G[CU])</code>. <code>UA = match</code>, <code>UC = no match</code>, etc. However, <strong>I'm wondering if there is a reasonable way to test 4 (or more) characters and look for 1 (or more) base pair matches.</strong> In other words: given 4 extracted characters, look for pairs between characters 1&amp;4 and 2&amp;3 and report a match if 1 or more pairs are found:\n<code>ACGU = match</code> (2 pairs - AU, CG), <code>ACCU = match</code> (1 pair, AU), <code>ACUC = no match</code> (0 pairs).</p>\n\n<p>Any suggestions would be appreciated. I feel like a combination of back references and conditionals could be required, but I'm really stuck trying to figure out how to apply them here. Or is this even possible?</p>\n"}, {"tags": ["perl", "anyevent"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1493756152, "post_id": 43746282, "comment_id": 74535987, "body": "Well it uses that in a <code>BEGIN</code> block, and you probably <code>use</code> the module that has this code. Please show that part, and how you set the <code>$ENV{..}</code> exactly."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 443, "user_id": 7757812, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8bb8d0f617ac02473b73e4e66a8e5fa5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/7757812/dmitriy"}, "edited": false, "score": 0, "creation_date": 1493756720, "post_id": 43746572, "comment_id": 74536306, "body": "@Dmitry you&#39;re welcome. If you&#39;re not familiar with <code>BEGIN</code>, check out the docs I linked. This is one of the easy parts of the weirder things in Perl. :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1493757021, "post_id": 43746572, "comment_id": 74536473, "body": "@HunterMcMillen yeah, I guess I double-clicked that in the question. Thanks. Feel free to fix that kind of typo in my posts when you see it. :)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1493756981, "last_edit_date": 1493756981, "creation_date": 1493756471, "answer_id": 43746572, "question_id": 43746282, "link": "https://stackoverflow.com/questions/43746282/how-to-define-an-environment-variable-before-loading-modules/43746572#43746572", "title": "How to define an environment variable before loading modules?", "body": "<p>Since the code that checks the environment variable is in a <code>BEGIN</code> block, it will be run immediately once the Perl compiler reaches it. </p>\n\n<p>When Perl starts compiling your script, it checks for <code>use</code> statements first. So when you <code>use AnyEvent::DNS</code>, Perl loads that module and parses the file. <code>BEGIN</code> blocks are executed at that stage, while code in methods will only be compiled, not executed.</p>\n\n<p>So if you have something like the following, the code you showed above will be run before you even set that variable.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse AnyEvent::DNS;\n\n$ENV{PERL_ANYEVENT_PROTOCOLS} = 'ipv4';\n...\n</code></pre>\n\n<p>There are two ways you can circumvent that.</p>\n\n<p>You can put the assignment in your own <code>BEGIN</code> block before you load AnyEvent::DNS. That way it will be set first.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nBEGIN {\n    $ENV{PERL_ANYEVENT_PROTOCOLS} = 'ipv4';\n}\n\nuse AnyEvent::DNS;\n</code></pre>\n\n<p>Alternatively, you can just call your program with the environment variable set for it from the shell.</p>\n\n<pre><code>$ PERL_ANYEVENT_PROTOCOLS=ipv4 perl resolver.pl\n</code></pre>\n\n<p>The second one is more portable, in case you later want it to do IPv6 after all.</p>\n\n<p>Read more about <code>BEGIN</code> in <a href=\"http://perldoc.perl.org/perlmod.html#BEGIN%2C-UNITCHECK%2C-CHECK%2C-INIT-and-END\" rel=\"nofollow noreferrer\">perlmod</a>.</p>\n"}], "owner": {"reputation": 443, "user_id": 7757812, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8bb8d0f617ac02473b73e4e66a8e5fa5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/7757812/dmitriy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "accepted_answer_id": 43746572, "answer_count": 1, "score": 1, "last_activity_date": 1493757170, "creation_date": 1493755291, "last_edit_date": 1493757170, "question_id": 43746282, "link": "https://stackoverflow.com/questions/43746282/how-to-define-an-environment-variable-before-loading-modules", "title": "How to define an environment variable before loading modules?", "body": "<p>I use the <a href=\"https://metacpan.org/pod/AnyEvent::DNS\" rel=\"nofollow noreferrer\"><code>AnyEvent::DNS</code></a> module.</p>\n\n<p>I want to disable IPv6, so that the resolver only makes a request for <code>A</code> record.</p>\n\n<p><code>AnyEvent::DNS</code>, uses the environment variable <code>$ENV{PERL_ANYEVENT_PROTOCOLS}</code></p>\n\n<p>But setting the variable does not work; the resolver still sends two requests <code>A</code> and <code>AAAA</code></p>\n\n<p>Code from <code>AnyEvent::DNS</code>:</p>\n\n<pre><code>our %PROTOCOL; # (ipv4|ipv6) =&gt; (1|2), higher numbers are preferred\n\nBEGIN {\n   ...;\n   my $idx;\n   $PROTOCOL{$_} = ++$idx\n      for reverse split /\\s*,\\s*/,\n             $ENV{PERL_ANYEVENT_PROTOCOLS} || \"ipv4,ipv6\";\n}\n</code></pre>\n\n<p>How to define an environment variable before loading modules?</p>\n"}, {"tags": ["linux", "perl", "sorting", "unix", "uniq"], "comments": [{"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 4, "creation_date": 1493749000, "post_id": 43744597, "comment_id": 74532105, "body": "What did you try?"}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1493749779, "post_id": 43744597, "comment_id": 74532511, "body": "So you would expect <code>33 x ...</code>, <code>11 y ...</code>, and <code>6 z ....</code> ?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1493752191, "post_id": 43744597, "comment_id": 74533906, "body": "Try this: <code>perl -lanE &#39;($v,$k)=@F[0..1];$h{$k}=$_,$j{$k}=$v if $j{$k}&lt;$v;END{say for values %h}&#39; file</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493754820, "post_id": 43744597, "comment_id": 74535250, "body": "Please show the expected output for the input you use as illustration."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1493814995, "post_id": 43744597, "comment_id": 74561562, "body": "Use the Linux <code>sort</code> tool to sort by column 2 and column 1 in descending order. That will give you a list with all the x&#39;s together with the highest number on top, all the y&#39;s together with the highest on top, etc. Then <code>uniq --skip-fields=1</code> will take the first line of each group, giving you the output you desire."}], "answers": [{"comments": [{"owner": {"reputation": 874, "user_id": 6535641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa91de216e37b552d355915aa73e4c16?s=128&d=identicon&r=PG&f=1", "display_name": "ULick", "link": "https://stackoverflow.com/users/6535641/ulick"}, "edited": false, "score": 0, "creation_date": 1493761791, "post_id": 43745087, "comment_id": 74538726, "body": "You don&#39;t need the flag and max.  Remove line 2 and 3 in the first block, and change the if in line 4 to <code>if ( value[key] &lt; $1)</code>."}, {"owner": {"reputation": 2159, "user_id": 3476320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9087e94ba44696e7d0705220c7761a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/3476320/andrey"}, "reply_to_user": {"reputation": 874, "user_id": 6535641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa91de216e37b552d355915aa73e4c16?s=128&d=identicon&r=PG&f=1", "display_name": "ULick", "link": "https://stackoverflow.com/users/6535641/ulick"}, "edited": false, "score": 0, "creation_date": 1493766652, "post_id": 43745087, "comment_id": 74540308, "body": "@ULick if the first column contains negative numbers, your version might not work properly (default values are 0 and &quot;&quot;)."}, {"owner": {"reputation": 874, "user_id": 6535641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa91de216e37b552d355915aa73e4c16?s=128&d=identicon&r=PG&f=1", "display_name": "ULick", "link": "https://stackoverflow.com/users/6535641/ulick"}, "edited": false, "score": 0, "creation_date": 1493831194, "post_id": 43745087, "comment_id": 74573516, "body": "True. Can be solved by <code>if ( ! (key in value) || $1 &gt; value[key] )</code>.  Still no flag, but loosing readability."}, {"owner": {"reputation": 9, "user_id": 7953580, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9I8TV5iQGNA/AAAAAAAAAAI/AAAAAAAAHZk/dcdzYAfynBE/photo.jpg?sz=128", "display_name": "kaur", "link": "https://stackoverflow.com/users/7953580/kaur"}, "edited": false, "score": 0, "creation_date": 1493841144, "post_id": 43745087, "comment_id": 74579070, "body": "this works perfect \\nperl -lanE &#39;($v,$k)=@F[0..1];$h{$k}=$_,$j{$k}=$v if $j{$k}&lt;$v;END{say for values %h}&#39; file"}], "tags": [], "owner": {"reputation": 2159, "user_id": 3476320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9087e94ba44696e7d0705220c7761a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/3476320/andrey"}, "is_accepted": false, "score": 1, "last_activity_date": 1493750769, "creation_date": 1493750769, "answer_id": 43745087, "question_id": 43744597, "link": "https://stackoverflow.com/questions/43744597/sort-and-uniquize-a-tab-separated-file-for-two-columns/43745087#43745087", "title": "sort and uniquize a tab separated file for two columns", "body": "<p>You can do this with <code>awk</code>:</p>\n\n<pre><code>awk '\n{\n  key = $2;\n  flag = 0;\n  if (key in value) { max = value[key] ; flag = 1 };\n  if (flag == 0 || max &lt; $1) { value[key] = $1; line[key] = $0 };\n}\nEND {\n  for (key in line) { print line[key] };\n}\n' data.tsv\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 7953580, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9I8TV5iQGNA/AAAAAAAAAAI/AAAAAAAAHZk/dcdzYAfynBE/photo.jpg?sz=128", "display_name": "kaur", "link": "https://stackoverflow.com/users/7953580/kaur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "closed_date": 1493767172, "answer_count": 1, "score": -3, "last_activity_date": 1493750769, "creation_date": 1493748876, "last_edit_date": 1493749637, "question_id": 43744597, "link": "https://stackoverflow.com/questions/43744597/sort-and-uniquize-a-tab-separated-file-for-two-columns", "closed_reason": "Not suitable for this site", "title": "sort and uniquize a tab separated file for two columns", "body": "<p>i have a very large tab separated file, a part of which looks like this:</p>\n\n<pre><code>33  x   171 297 126\n4   x   171 300 129\n2   x   171 303 132\n11  y   163 289 126\n5   y   163 290 127\n3   y   163 291 128\n2   y   163 292 129\n2   y   170 289 119\n2   z   166 307 141\n2   z   166 308 142\n6   z   166 309 143\n4   z   166 329 163\n2   z   166 330 164\n</code></pre>\n\n<p>i want to sort and select only one line for each: x,y, z based on the highest value associated with it in the first column (in unix)</p>\n"}, {"tags": ["perl", "cryptography", "rsa"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493733129, "post_id": 43739061, "comment_id": 74522177, "body": "What did you find when you searched for a solution yourself?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493734417, "post_id": 43739061, "comment_id": 74523178, "body": "<i>&quot;Please explain about <b>n</b> and <b>e</b> extraction&quot;</i> What do you mean here? The public and private keys each consist of two values. They have the same <i>modulus*\u2014**n**\u2014and different *exponents*\u2014**e*</i> and <b>d</b> respectively. This isn&#39;t the place to explain more in detail."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1493733393, "creation_date": 1493733393, "answer_id": 43739784, "question_id": 43739061, "link": "https://stackoverflow.com/questions/43739061/how-do-i-extract-n-e-key-from-rsa256-public-key-in-perl/43739784#43739784", "title": "How do I extract n,e key from RSA256 public key in perl?", "body": "<p>You would want</p>\n\n<pre><code>my $key = Crypt::RSA::Key::Public-&gt;new( Filename =&gt; 'public.key' );\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7952156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cfa731102d01262a236178ead3cad7f?s=128&d=identicon&r=PG&f=1", "display_name": "pwned", "link": "https://stackoverflow.com/users/7952156/pwned"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1493733768, "creation_date": 1493731439, "last_edit_date": 1493733768, "question_id": 43739061, "link": "https://stackoverflow.com/questions/43739061/how-do-i-extract-n-e-key-from-rsa256-public-key-in-perl", "title": "How do I extract n,e key from RSA256 public key in perl?", "body": "<p>I use this Python code</p>\n\n<pre><code>from Crypto.PublicKey import RSA\nkey = RSA.importKey( open('public.key').read() )\n</code></pre>\n\n<p>But I have no idea how to extract <strong>n</strong> and <strong>e</strong> keys in Perl.</p>\n\n<p>Please explain about <strong>n</strong> and <strong>e</strong> extraction.</p>\n"}, {"tags": ["perl", "sockets", "unix-socket", "perl-io"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1493733117, "post_id": 43738770, "comment_id": 74522165, "body": "Out of curiosity: What is the purpose of the null character in the beginning of the <code>Peer</code> name?"}, {"owner": {"reputation": 1075, "user_id": 4282604, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ujVHc.png?s=128&g=1", "display_name": "robbie", "link": "https://stackoverflow.com/users/4282604/robbie"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1493735806, "post_id": 43738770, "comment_id": 74524223, "body": "@H&#229;konH&#230;gland On Linux, the null character creates an abstract Unix socket. This is a socket that exists outside of the filesystem."}], "answers": [{"comments": [{"owner": {"reputation": 1075, "user_id": 4282604, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ujVHc.png?s=128&g=1", "display_name": "robbie", "link": "https://stackoverflow.com/users/4282604/robbie"}, "edited": false, "score": 0, "creation_date": 1493732710, "post_id": 43739431, "comment_id": 74521868, "body": "OK, thanks. How would I instruct it to only get one line?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1493732926, "post_id": 43739431, "comment_id": 74522010, "body": "To read from <code>$sock</code> in scalar context: <code>print scalar &lt;$sock&gt;</code>. This will read a single line"}], "tags": [], "owner": {"reputation": 6928, "user_id": 1015385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc84a03227c566697c4a16b2e9f8782?s=128&d=identicon&r=PG", "display_name": "JRFerguson", "link": "https://stackoverflow.com/users/1015385/jrferguson"}, "is_accepted": true, "score": 2, "last_activity_date": 1493746924, "last_edit_date": 1493746924, "creation_date": 1493732442, "answer_id": 43739431, "question_id": 43738770, "link": "https://stackoverflow.com/questions/43738770/reading-one-line-from-a-unix-domain-socket/43739431#43739431", "title": "Reading one line from a Unix domain socket", "body": "<p><code>print &lt;$sock&gt;</code> is imposing list context to <a href=\"http://perldoc.perl.org/functions/readline.html\" rel=\"nofollow noreferrer\">readline</a> and thus reads and returns all lines until the end-of-file.</p>\n\n<p>As noted in <a href=\"http://perldoc.perl.org/perlop.html#I%2fO-Operators\" rel=\"nofollow noreferrer\">perlop</a> :</p>\n\n<blockquote>\n  <p>If a  is used in a context that is looking for a list, a list comprising all input lines is returned, one line per list element.</p>\n</blockquote>\n\n<p>As noted by Hakon-Haegland in his comment below, a concise way to read only one line is to impose scalar context:</p>\n\n<pre><code>print scalar &lt;$sock&gt;\n</code></pre>\n"}], "owner": {"reputation": 1075, "user_id": 4282604, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ujVHc.png?s=128&g=1", "display_name": "robbie", "link": "https://stackoverflow.com/users/4282604/robbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 738, "favorite_count": 0, "accepted_answer_id": 43739431, "answer_count": 1, "score": 1, "last_activity_date": 1493746924, "creation_date": 1493730566, "last_edit_date": 1493734953, "question_id": 43738770, "link": "https://stackoverflow.com/questions/43738770/reading-one-line-from-a-unix-domain-socket", "title": "Reading one line from a Unix domain socket", "body": "<p>I have a server running <code>socat</code> with this command:</p>\n\n<pre><code>socat ABSTRACT-LISTEN:test123 PIPE\n</code></pre>\n\n<p>I can open a socket to this server, send one line, read one line, and print it with this code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse IO::Socket::UNIX;\n\nmy $sock = IO::Socket::UNIX-&gt;new(\n    Type =&gt; SOCK_STREAM(),\n    Peer =&gt; \"\\0test123\"\n) or die \"Error creating socket: $!\\n\";\n\nprint $sock \"Hello, world!\\n\";\nmy $line = &lt;$sock&gt;;\nclose $sock;\n\nprint $line;\n</code></pre>\n\n<p>When I replace the last 5 lines with the following, however, the program hangs:</p>\n\n<pre><code>print &lt;$sock&gt;;\n</code></pre>\n\n<p>Isn't the <code>&lt;FILEHANDLE&gt;</code> operator supposed to read one line from the handle? Why can I not read one line and print it?</p>\n"}, {"tags": ["perl", "module", "cgi"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1493729424, "post_id": 43738235, "comment_id": 74519549, "body": "<code>.</code> is not where the script is located, that&#39;s <code>$FindBin::Bin</code>. <code>.</code> is from where the script was called."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1493734088, "post_id": 43738235, "comment_id": 74522910, "body": "@choroba, Using <code>$FindBin::RealBin</code> instead of <code>$FindBin::Bin</code> given free support for symlinks to your executable."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 1, "creation_date": 1493734787, "post_id": 43738235, "comment_id": 74523472, "body": "@Quentin, Nonsense! First of all, If you use Plack, you might still be using CGI or Fast CGI, so it&#39;s not an alternative to CGI at all! And secondly, unless you&#39;re saying Plack adds the handler&#39;s file&#39;s path to <code>@INC</code> -- and I doubt you are -- it wouldn&#39;t help at all! For all we know, the OP is using Plack, so your comment is not constructive or useful at all."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 6, "creation_date": 1493734400, "post_id": 43739924, "comment_id": 74523162, "body": "(I&#39;m disappointed they didn&#39;t make paths in <code>@INC</code> relative to <code>$RealBin</code> instead of removing <code>.</code>. It would have solved the problem and fixed buggy code that relied on <code>.</code> and buggy code that add relative paths to <code>@INC</code>.)"}, {"owner": {"reputation": 39, "user_id": 2970082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2701a25cf1d5f8d805f9ff0365597cff?s=128&d=identicon&r=PG&f=1", "display_name": "Peter P", "link": "https://stackoverflow.com/users/2970082/peter-p"}, "edited": false, "score": 0, "creation_date": 1493738437, "post_id": 43739924, "comment_id": 74526177, "body": "Perldoc says &quot;If there are two modules using FindBin from different directories under the same interpreter, this won&#39;t work.&quot; Does that apply to two or more instances of Apache running concurrently? Surely not."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493739553, "post_id": 43739924, "comment_id": 74526949, "body": "&quot;<i>This is a problem under mod_perl and other persistent Perl environments, where you shouldn&#39;t use this module. Which also means that you should avoid using <code>FindBin</code> in modules that you plan to put on CPAN. To make sure that <code>FindBin</code> will work is to call the <code>again</code> function</i>&quot; ... If you have a CGI script, the concern does not apply. If you are running the script under <code>mod_perl</code> then you must care."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 39, "user_id": 2970082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2701a25cf1d5f8d805f9ff0365597cff?s=128&d=identicon&r=PG&f=1", "display_name": "Peter P", "link": "https://stackoverflow.com/users/2970082/peter-p"}, "edited": false, "score": 0, "creation_date": 1493740787, "post_id": 43739924, "comment_id": 74527682, "body": "@Peter P, FindBin populates <code>$RealBin</code> and such from <code>$0</code> when it is first loaded. So if you use the same <code>perl</code> process to execute multiple scripts, you need to set <code>$0</code> and call <code>FindBin::again</code> to reinitialize <code>$RealBin</code>. For example, a Fast CGI worker might execute <code>local $0 = $script_fqfn; FindBin::again(); do($0);</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493742741, "post_id": 43739924, "comment_id": 74528791, "body": "<i>&quot;I&#39;m disappointed they didn&#39;t make paths in <code>@INC</code> relative to <code>$RealBin</code>&quot;</i> Do you mean <i>relative</i> paths in <code>@INC</code>? Surely you don&#39;t want absolute paths disallowed? And <code>.</code> would have to be removed either way."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493743269, "post_id": 43739924, "comment_id": 74529078, "body": "Yes, I meant relative paths. And no, <code>.</code> would not have to be removed. The problem with <code>.</code> is that you could trick a script (that might be running as root) to load a module from a dir you control rather than the script&#39;s dir."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493743661, "post_id": 43739924, "comment_id": 74529275, "body": "I understand why <code>.</code> is a problem, but I don&#39;t get why it would be safe to leave it in <code>@INC</code>. It&#39;s an absolute path, so perl will still search the current working directory, which is something you don&#39;t want."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1493744764, "post_id": 43739924, "comment_id": 74529859, "body": "@Borodin, In unix, a path is absolute iff it starts with <code>&#47;</code>, so <code>.</code> is not an absolute path. Therefore, it refers to the directory by that name in the CWD. And therefore, under the model I envisioned, <code>.</code> in <code>@INC</code> would be the same as <code>$RealBin&#47;.</code>, which is just <code>$RealBin</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1493747920, "post_id": 43739924, "comment_id": 74531518, "body": "@ikegami: Understood. Thanks. That&#39;s bizarre actually; without ever thinking about it I have had the idea that <code>..</code> is relative, and <code>.</code> in <code>&#47;path&#47;to&#47;.</code> is relative, but <code>.</code> on its own is a magic label for the absolute current working directory, like <code>~</code> (in fact <i>exactly</i> like <code>~+&#47;</code>). That&#39;s complete nonsense now that I consider my assumptions. Just shows how a lot can be built on basic misconceptions."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493751298, "post_id": 43739924, "comment_id": 74533434, "body": "@Borodin, <code>.</code> is a little special in Windows, but only insofar as it works even if the directory doesn&#39;t actually contain a <code>.</code> entry, such as root directories."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493751878, "post_id": 43739924, "comment_id": 74533735, "body": "@ikegami: Thank you. I didn&#39;t know <i>insofar</i> was a US word as well. I will start using it again now!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493753779, "post_id": 43739924, "comment_id": 74534691, "body": "@Borodin, Blasphemy! I&#39;m not an American; I&#39;m Canadian! It&#39;s not commonly used, but it&#39;s definitely an acceptable word."}, {"owner": {"reputation": 39, "user_id": 2970082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2701a25cf1d5f8d805f9ff0365597cff?s=128&d=identicon&r=PG&f=1", "display_name": "Peter P", "link": "https://stackoverflow.com/users/2970082/peter-p"}, "edited": false, "score": 0, "creation_date": 1493760231, "post_id": 43739924, "comment_id": 74538034, "body": "@ikegami: OP is Canadian also - shall we take over the world one line of code at a time?"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1493735398, "last_edit_date": 1493735398, "creation_date": 1493733828, "answer_id": 43739924, "question_id": 43738235, "link": "https://stackoverflow.com/questions/43738235/how-to-locate-perl-modules-in-the-same-directory-as-the-script/43739924#43739924", "title": "How to locate Perl modules in the same directory as the script", "body": "<p>No, placing modules in the same directory as the script isn't a security vulnerability. Assuming the current work directory (<code>.</code>) is the script's directory is a bug and a security vulnerability.</p>\n\n<p><code>.</code> was never guaranteed to be the directory in which the script is located. (In fact, time and time again, people have found <code>.</code> to be <code>/</code> in CGI scripts.) Just keep using what you should already be using:</p>\n\n<pre><code> use FindBin qw( $RealBin );\n use lib $RealBin;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493740447, "post_id": 43742017, "comment_id": 74527483, "body": "Not quite. This won&#39;t work if the script is launched via a symlink to the script. The following would be equivalent <code>use Cwd qw( abs_path ); use File::Basename qw( dirname ); use lib dirname(abs_path($0));</code>"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493743671, "post_id": 43742017, "comment_id": 74529280, "body": "@ikegami Thank you for reminding me that. I have <code>Options -FollowSymLinks</code> in my Apache configs, so it slips my mind."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1493743897, "post_id": 43742017, "comment_id": 74529415, "body": "The question isn&#39;t really Apache- or CGI-specific even though that might be what the OP is using."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 1, "last_activity_date": 1493743764, "last_edit_date": 1493743764, "creation_date": 1493739617, "answer_id": 43742017, "question_id": 43738235, "link": "https://stackoverflow.com/questions/43738235/how-to-locate-perl-modules-in-the-same-directory-as-the-script/43742017#43742017", "title": "How to locate Perl modules in the same directory as the script", "body": "<p>An alternative to <a href=\"https://metacpan.org/pod/FindBin\" rel=\"nofollow noreferrer\">FindBin</a> is:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse File::Basename qw( dirname );\nuse File::Spec::Functions qw( rel2abs );\n\nuse lib rel2abs( dirname(__FILE__) );\n\nprint \"$_\\n\" for @INC;\n</code></pre>\n\n<p>As @ikegami points out, if you want to be able to invoke the script via symlinks, you'll need:</p>\n\n<pre><code>use Cwd qw( abs_path );\nuse lib dirname(abs_path($0));\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 2970082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2701a25cf1d5f8d805f9ff0365597cff?s=128&d=identicon&r=PG&f=1", "display_name": "Peter P", "link": "https://stackoverflow.com/users/2970082/peter-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 728, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1493743764, "creation_date": 1493729096, "last_edit_date": 1493735345, "question_id": 43738235, "link": "https://stackoverflow.com/questions/43738235/how-to-locate-perl-modules-in-the-same-directory-as-the-script", "title": "How to locate Perl modules in the same directory as the script", "body": "<p>Now that recent versions of Perl have removed \".\" from @INC, I'm curious about best practices for module file location. Until now, the *.pm files associated with each application on our web site were in the same directory as the scripts. This, I gather, creates a security vulnerability.</p>\n\n<p>We don't have write access to the remaining directories in @INC.</p>\n\n<p>We could just leave the pm files where they are, and add <code>use lib \".\";</code> to all our existing scripts, but wouldn't this just preserve the security vulnerability? </p>\n\n<p>Any suggestions on how our Perl scripts and their associated modules can be best organized in the light of this new development?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1493726989, "post_id": 43737425, "comment_id": 74518018, "body": "Can you give examples of each file? Then it will be easier to help you"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1493727001, "post_id": 43737425, "comment_id": 74518034, "body": "Could you please update the input&#39;s for sample. And your <code>*.csv</code> file extension has <code>.adl</code> and <code>.lin</code>"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1493727096, "post_id": 43737425, "comment_id": 74518109, "body": "Use <a href=\"http://p3rl.org/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a> to read the files. Store ids from file A in a hash, then iterate over file B and check the id existence in the hash."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493727671, "post_id": 43737425, "comment_id": 74518476, "body": "Do you mean that you want all the values which appear both as <code>adresslinkid</code> in <code>File A</code> and as <code>SourceID</code> in <code>File B</code>?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493727707, "post_id": 43737425, "comment_id": 74518503, "body": "Are there really no commas in your CSV data?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493727764, "post_id": 43737425, "comment_id": 74518541, "body": "Please add to your question showing the output that you want freom the given data. It sounds like it&#39;s just <code>1, 2, 3</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 6235589, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/9e62de362533777ba04f9cbc4a45c1e2?s=128&d=identicon&r=PG&f=1", "display_name": "Moehre", "link": "https://stackoverflow.com/users/6235589/moehre"}, "edited": false, "score": 0, "creation_date": 1493739490, "post_id": 43739419, "comment_id": 74526893, "body": "thanks a lot this is what I want :)...sorry for my bad description of the task!!!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1493732795, "last_edit_date": 1493732795, "creation_date": 1493732406, "answer_id": 43739419, "question_id": 43737425, "link": "https://stackoverflow.com/questions/43737425/how-to-compare-2-csv-files-in-perl/43739419#43739419", "title": "how to compare 2 csv-files in perl", "body": "<p>I'm not very impressed with your question, or your attempt at a solution, which goes only as far as opening a file</p>\n\n<p>Nevertheless, here's a working program that does what I think you want</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse List::Util 'first';\n\nmy $file_a = 'fileA.txt';\nmy $file_b = 'fileB.txt';\n\nmy @link_ids   = fetch_file_column($file_a, 'ADDRESSLINKID');\nmy @source_ids = fetch_file_column($file_b, 'SOURCEID');\n\nmy %link_ids = map { $_ =&gt; 1} @link_ids;\n\nmy @result = grep { $link_ids{$_} } @source_ids;\nprintf \"result = (%s)\\n\", join ',', @result;\n\n\nsub fetch_file_column {\n    my ($file, $column) = @_;\n\n    open my $fh, '&lt;', $file or die qq{Unable to open \"$file\" for input: $!};\n\n    my @headers;\n    for ( scalar &lt;$fh&gt; ) {\n        chomp;\n        @headers = split /;/;\n    }\n\n    my $idx = first { $headers[$_] eq $column } 0 .. $#headers;\n    die qq{Header \"$column\" not found in \"$file\"} unless defined $idx;\n\n    map { chomp; ( split /;/ )[$idx];  } &lt;$fh&gt;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>result = (1,2,3)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "is_accepted": false, "score": 1, "last_activity_date": 1493737006, "creation_date": 1493737006, "answer_id": 43741121, "question_id": 43737425, "link": "https://stackoverflow.com/questions/43737425/how-to-compare-2-csv-files-in-perl/43741121#43741121", "title": "how to compare 2 csv-files in perl", "body": "<p>Perl is able to execute <a href=\"http://search.cpan.org/~rehsack/SQL-Statement-1.412/lib/SQL/Statement.pm\" rel=\"nofollow noreferrer\">SQL statements</a> on CSV files via the <a href=\"http://search.cpan.org/~timb/DBI-1.636/DBI.pm\" rel=\"nofollow noreferrer\">DBI</a> using <a href=\"http://search.cpan.org/~hmbrand/DBD-CSV-0.49/lib/DBD/CSV.pm\" rel=\"nofollow noreferrer\">DBD::CSV</a>.</p>\n\n<p>The following example requires, that you input files are named <code>file_a.csv</code> and <code>file_b.csv</code>. The files have to be in the current directory. Change <code>f_dir</code>, if your files are in a different location.</p>\n\n<pre><code>#! /usr/bin/perl\nuse strict;\nuse warnings;\nuse DBI;\n\nmy $dbh = DBI-&gt;connect ('dbi:CSV:', '', '',\n                        { f_dir =&gt; '.',\n                          f_ext =&gt; \".csv/r\",\n                          csv_sep_char =&gt; ';' })\n    || die \"$DBI::errstr()\";\n\n$dbh-&gt;{RaiseError} = 1;\n\nmy $result = $dbh-&gt;selectall_arrayref ('\nselect sourceid\nfrom file_a, file_b\nwhere file_a.addresslinkid = file_b.sourceid\n');\n\nprint 'result = (', join (',', map { @$_ } @$result), \")\\n\";\n</code></pre>\n\n<p>On Ubuntu this requires the following packages <code>libdbd-csv-perl</code>, <code>libsql-statement-perl</code>.</p>\n"}], "owner": {"reputation": 133, "user_id": 6235589, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/9e62de362533777ba04f9cbc4a45c1e2?s=128&d=identicon&r=PG&f=1", "display_name": "Moehre", "link": "https://stackoverflow.com/users/6235589/moehre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 43739419, "answer_count": 2, "score": 0, "last_activity_date": 1493763170, "creation_date": 1493726632, "last_edit_date": 1493763170, "question_id": 43737425, "link": "https://stackoverflow.com/questions/43737425/how-to-compare-2-csv-files-in-perl", "title": "how to compare 2 csv-files in perl", "body": "<p>I have two csv-files (A, B). </p>\n\n<p><strong>File A</strong></p>\n\n<pre><code>ADDRESSLINKID;NAMEINDEX;ADDRESSLINKINDEX;ADMINREGIONID;TOWNREGIONID;SIDE\n1;19;;;1;0\n2;21;;;2;0\n3;23;;;3;0\n</code></pre>\n\n<p><strong>File B</strong></p>\n\n<pre><code>ID;DISPLAYTYPE;URBAN;LINKLENGTH;PARENTID;SOURCEID;TRUCKTOLL\n1;19;;;;1;0\n2;21;;;;2;0\n3;23;;;;3;0\n</code></pre>\n\n<p>Now I will read out the field \"SourceID\" in File B where File A field \"adresslinkid\" is existing (read sourceid where adresslinkid eq sourceid)! </p>\n\n<pre><code>sub check_segments {\n\nmy $fileA = $dirA.\"\\\\lux.adl\";\nmy $fileB = $dirA.\"\\\\lux.lin\";\n\nopen my $fh, '&lt;', $fileA or die \"Could not open '$fileA' $!\\n\";\n...\n</code></pre>\n\n<p>Can I realize this with the grep operator???</p>\n\n<p>The Output should be:\nresult = (1,2,3,4...)</p>\n"}, {"tags": ["perl", "mojolicious"], "comments": [{"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1493719550, "post_id": 43734736, "comment_id": 74513019, "body": "What is the question? What is wrong with your code?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1493719827, "post_id": 43734736, "comment_id": 74513213, "body": "@ceving: The OP wants to find the value of <code>$pa</code> for which <code>$valid_pass</code> is 1 so that they can use it to extract further information."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1493720024, "last_edit_date": 1493720024, "creation_date": 1493719696, "answer_id": 43735208, "question_id": 43734736, "link": "https://stackoverflow.com/questions/43734736/access-an-array-item-in-perl-after-generating-that-array/43735208#43735208", "title": "Access an array item in Perl after generating that array", "body": "<p>Your <code>for</code> loop is doing two things at once: producing a list of <code>My::Model::Group</code> objects in <code>@$groups</code>, and finding the first boss whose password checks out.</p>\n\n<p>I suggest that you split them up into two clear operations, and the <code>List::Util</code> modules <code>first</code> operator is ideal for the second task</p>\n\n<p>Here's how it would look. I've extracted the result of the method call <code>$boss-&gt;bosses</code> into a variable <code>$bosses</code> to avoid repeated calls to the method</p>\n\n<p>Note that you don't need to apply <code>scalar</code> to an array when checking its size. The <code>&gt;</code> and all the other comparators impose scalar context anyway</p>\n\n<p>I've taken much of my code from your question, and I'm a little concerned that you extract values for <code>$pa_id</code> and <code>$pa_partner_id</code> and then just discard them. But I imagine that you know what you really want to do here</p>\n\n<pre><code>use List::Util 'first';\n\nmy $bosses = $boss-&gt;bosses;\n\nif ( ... ) {\n    ...;\n}\nelsif ( @$bosses &gt; 1 ) {\n\n    @$groups = map { My::Model::Group-&gt;new( id =&gt; $_-&gt;group_id ) } @$bosses;\n\n    my $password = $self-&gt;param( 'password' );\n    my $pa       = first { $_-&gt;checkPassword( $password ) } @$bosses;\n\n    if ( $pa ) {    \n        my $pa_id         = $pa-&gt;id;\n        my $pa_partner_id = $pa-&gt;group_id;\n    }\n    else {\n        ...;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 5576428, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f1a36e8580fcbeaf19b1c57616a46dad?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/5576428/albert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 43735208, "answer_count": 1, "score": 0, "last_activity_date": 1493720024, "creation_date": 1493718255, "last_edit_date": 1493719532, "question_id": 43734736, "link": "https://stackoverflow.com/questions/43734736/access-an-array-item-in-perl-after-generating-that-array", "title": "Access an array item in Perl after generating that array", "body": "<p>Hello I want to access an specific array item based in a condition previously checked. I leave the code here:</p>\n\n<pre><code>elsif (scalar(@{$boss-&gt;bosses}) &gt; 1) {\n  foreach my $pa (@{$boss-&gt;bosses}) {\n    my $p = My::Model::Group-&gt;new(id =&gt; $pa-&gt;group_id);\n    push(@$groups, $p);\n    $valid_pass = 1 if ($pa-&gt;checkPassword($self-&gt;param('password')));\n  }  \n  if ($valid_pass) {    \n    my $pa_id = $pa-&gt;id;\n    my $pa_partner_id = $pa-&gt;group_id;\n  }\n  else {\n  }\n}\n</code></pre>\n\n<p>What I want to do is, if that if in the array that comes, I check if the password is correct, so if it's correct, then I want to take the id and the group_id of the array item to use it in a function to be able to log them in.</p>\n"}, {"tags": ["windows", "apache", "perl", "character-encoding", "cgi"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1493718187, "post_id": 43734497, "comment_id": 74512167, "body": "What encoding does your code file use? Did you tell Perl about it?"}, {"owner": {"reputation": 137, "user_id": 3791141, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1065521263/picture?type=large", "display_name": "mehfatitem", "link": "https://stackoverflow.com/users/3791141/mehfatitem"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1493718466, "post_id": 43734497, "comment_id": 74512337, "body": "I didn&#39;t understand what excatly you say. But in perl code   print $q-&gt;header(-content_type =&gt; &#39;text/plain&#39; ,  -charset =&gt; &#39;ISO-8859-9&#39;);  you can see this code block."}, {"owner": {"reputation": 128254, "user_id": 13508, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c9e1d852b4d287027fe76f794e506878?s=128&d=identicon&r=PG", "display_name": "&#193;lvaro Gonz&#225;lez", "link": "https://stackoverflow.com/users/13508/%c3%81lvaro-gonz%c3%a1lez"}, "edited": false, "score": 2, "creation_date": 1493718541, "post_id": 43734497, "comment_id": 74512381, "body": "Saying that you use <code>ISO-8859-9</code> is great but you also need to actually use it. Your editor will possibly have an &quot;encoding&quot; setting somewhere."}, {"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1493720142, "post_id": 43734497, "comment_id": 74513441, "body": "By default Perl source code is Latin-1. This means all string literals are Latin-1."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1493720640, "post_id": 43734497, "comment_id": 74513791, "body": "I assume the character at fault is the <code>\u015f</code> in <code>ba\u015far\u0131yla</code>? What are you getting instead?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1493721291, "post_id": 43734497, "comment_id": 74514216, "body": "What encoding does your Perl program file use?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1493723458, "post_id": 43734497, "comment_id": 74515648, "body": "@mehfatitem: Your comment is very ill-mannered. Please answer my questions."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1493723681, "post_id": 43734497, "comment_id": 74515803, "body": "@Sinan&#220;n&#252;r: Thank you. I have never encountered Apache on Windows and wasn&#39;t aware of that."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1493724085, "post_id": 43734497, "comment_id": 74516032, "body": "@mehfatitem: I know you want to use ISO-8859-9, but how is your source file encoded? It is generally much more common to use UTF-8 as it is not language-specific and doesn&#39;t restrict you to 128 non-English letters, but you may have it set to save in ISO-8859-9. If you&#39;re unsure then please run this code <code>use Data::Dumper; $Data::Dumper::Useqq = 1; $Data::Dumper::Terse = 1; print Dumper $text;</code> and show the result."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1493724282, "post_id": 43734497, "comment_id": 74516142, "body": "@mehfatitem: And please answer my question about what output you are getting instead of the correct one."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1493730333, "post_id": 43734497, "comment_id": 74520196, "body": "It&#39;s not really your Perl program is it? It&#39;s mostly my Perl program :-) If you found my answer useful, please consider <a href=\"https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">accepting it</a>. If you didn&#39;t find it useful, please add a comment explaining why."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1493731031, "post_id": 43734497, "comment_id": 74520682, "body": "Let me rephrase it as a question. If you found <a href=\"http://stackoverflow.com/questions/43713053/a-simple-form-application-with-perl/\">my answer to your previous question useful</a> (and I assume you did, as you&#39;re using my code now) why haven&#39;t you accepted my answer? You don&#39;t, of course, have to accept answers. But if you make a habit of not accepting useful answers then people might be less inclined to help you."}, {"owner": {"reputation": 137, "user_id": 3791141, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1065521263/picture?type=large", "display_name": "mehfatitem", "link": "https://stackoverflow.com/users/3791141/mehfatitem"}, "edited": false, "score": 1, "creation_date": 1493731619, "post_id": 43734497, "comment_id": 74521103, "body": "Sorry , I only forgot to click accept button. Otherwise  , your answer was very helpful."}, {"owner": {"reputation": 137, "user_id": 3791141, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1065521263/picture?type=large", "display_name": "mehfatitem", "link": "https://stackoverflow.com/users/3791141/mehfatitem"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1493732067, "post_id": 43734497, "comment_id": 74521407, "body": "@DaveCross Dou u have any idea about fixing my Turkish character problem ?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1493732246, "post_id": 43734497, "comment_id": 74521548, "body": "You need to <a href=\"http://stackoverflow.com/posts/43734497/edit\">edit your question</a> to add the answers to these two questions. 1/ Exactly what bad output do you see? 2/ What is the encoding of your Perl program file? Without that information, it is impossible to do anything but guess at an answer here."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 137, "user_id": 3791141, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1065521263/picture?type=large", "display_name": "mehfatitem", "link": "https://stackoverflow.com/users/3791141/mehfatitem"}, "edited": false, "score": 2, "creation_date": 1493757308, "post_id": 43736510, "comment_id": 74536602, "body": "@mehfatitem: You have done an excellent job of alienating most people who would answer you. You&#39;ve asked five questions and have a total of -4 votes. You&#39;re behaving like a surly nightclub bouncer, and it&#39;s hard to believe in you as a programmer. Perhaps try writing a new question and not being so unpleasant? If you want help then you really need to answer the questions that I&#39;ve asked: what is the encoding of your Perl program file, and what are you seeing in the browser instead of what should be there?"}, {"owner": {"reputation": 137, "user_id": 3791141, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1065521263/picture?type=large", "display_name": "mehfatitem", "link": "https://stackoverflow.com/users/3791141/mehfatitem"}, "edited": false, "score": 0, "creation_date": 1493761186, "post_id": 43736510, "comment_id": 74538483, "body": "I&#39;m not a programmer firstly fix this fault. I&#39;m a software engineer. I have been researching about perl for a few days.I think You must give more satisfying answer insted of criticising people. You are not a moral police officer. I asked a question about caharcter encoding about Turkish. You went away from the topic. Told that You must delete #!&quot;c:\\xampp\\perl\\bin\\perl.exe&quot; this code. But it is very far way from onur topic. And you told that the problem is about &quot;\u015f&quot; character. And I told you that \u015f is character in Turkish alphabe.You made the topic too exaggerated and show yourself as a victim"}, {"owner": {"reputation": 137, "user_id": 3791141, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1065521263/picture?type=large", "display_name": "mehfatitem", "link": "https://stackoverflow.com/users/3791141/mehfatitem"}, "edited": false, "score": 0, "creation_date": 1493761571, "post_id": 43736510, "comment_id": 74538634, "body": "@victim Borodin and after this time , please stop adding comment if it wouldn&#39;t be about software. Because you steal of my time."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 137, "user_id": 3791141, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1065521263/picture?type=large", "display_name": "mehfatitem", "link": "https://stackoverflow.com/users/3791141/mehfatitem"}, "edited": false, "score": 1, "creation_date": 1493796331, "post_id": 43736510, "comment_id": 74548893, "body": "@mehfatitem: People like Borodin and I are trying to help you. But we can&#39;t help you unless you answer the questions that we ask."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 137, "user_id": 3791141, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1065521263/picture?type=large", "display_name": "mehfatitem", "link": "https://stackoverflow.com/users/3791141/mehfatitem"}, "edited": false, "score": 0, "creation_date": 1493811742, "post_id": 43736510, "comment_id": 74559159, "body": "@mehfatitem: I hope you take note of the best advice in my answer (use UTF-8) and don&#39;t just apply the hacky <code>encode()</code> solution."}, {"owner": {"reputation": 137, "user_id": 3791141, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1065521263/picture?type=large", "display_name": "mehfatitem", "link": "https://stackoverflow.com/users/3791141/mehfatitem"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1493812555, "post_id": 43736510, "comment_id": 74559758, "body": "@DaveCross: When I set header -charsert =&gt; &quot;utf-8&quot; instead of &quot;ISO-8859-9&quot; , it solved my problem.  You are right :-)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 137, "user_id": 3791141, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1065521263/picture?type=large", "display_name": "mehfatitem", "link": "https://stackoverflow.com/users/3791141/mehfatitem"}, "edited": false, "score": 1, "creation_date": 1493813268, "post_id": 43736510, "comment_id": 74560279, "body": "@mehfatitem: I&#39;m pretty sure that&#39;s working accidentally. You should add <code>use utf8</code> to your code and encode the output correctly."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 3, "last_activity_date": 1493724787, "last_edit_date": 1493724787, "creation_date": 1493723735, "answer_id": 43736510, "question_id": 43734497, "link": "https://stackoverflow.com/questions/43734497/turkish-character-not-rendering-properly/43736510#43736510", "title": "Turkish character not rendering properly", "body": "<p>First and foremost: Do not use the HTML generation functionality in <a href=\"https://metacpan.org/pod/CGI\" rel=\"nofollow noreferrer\">CGI.pm</a>. Using those leads to an unmaintainable mess of a presentation layer. Instead, use <a href=\"https://metacpan.org/pod/Template\" rel=\"nofollow noreferrer\">Template Toolkit</a> based templates to separate presentation and functionality.</p>\n\n<p>Second, do not use <a href=\"http://modernperlbooks.com/mt/2009/08/the-problems-with-indirect-object-notation.html\" rel=\"nofollow noreferrer\">indirect object notation</a>. That is, do not write:</p>\n\n<pre><code>my $cgi = new CGI;\n</code></pre>\n\n<p>Instead, write</p>\n\n<pre><code>my $cgi = CGI-&gt;new\n</code></pre>\n\n<p>The use of <code>$q</code> or <code>$query</code> to refer to the CGI object is weird and has it roots in the early days of the WWW. There is no reason to perpetuate it when you are learning things from scratch.</p>\n\n<p>In addition, given that you have just instantiated an object, don't use plain subs such as <code>param</code> and don't pollute the namespace of your script. Access parameter values using:</p>\n\n<pre><code> my $value = $cgi-&gt;param('surname');\n</code></pre>\n\n<p>Finally, if you are going to use \"interesting\" characters in your source code such as <a href=\"https://www.howtosayinturkish.com/contents/alphabet/\" rel=\"nofollow noreferrer\"><code>\u015e</code></a>, save your source code as UTF-8 and specify</p>\n\n<pre><code> use utf8;\n</code></pre>\n\n<p>at the top of your script.</p>\n\n<p>Finally, do also save all your HTML templates in UTF-8 and generate all output from your script encoded in UTF-8 and specify the document encoding as UTF-8. All other paths lead to insanity.</p>\n\n<p>Also, don't use <code>sexual</code> as a parameter name. Use nouns as parameter and variable names. And, most infuriating to me as a Turk, Mr. (Bay) and Ms. (Bayan) are just titles and they are not appropriate choices for an input field asking about the sex of the respondent.</p>\n\n<p>See also <a href=\"https://ux.stackexchange.com/questions/25826/how-can-i-deal-with-diverse-gender-identities-in-user-profiles\">How can I deal with diverse gender identities in user profiles?</a> That may not be on your radar in Turkey at the moment, but you will eventually encounter the issue.</p>\n\n<p>Here is an untested script that might work for you:</p>\n\n<pre><code>#!\"c:\\xampp\\perl\\bin\\perl.exe\"\n\nuse utf8;\nuse strict;\nuse warnings;\nuse warnings  qw(FATAL utf8);\n\n# Provides only object oriented interface\n# without HTML generation cruft\n\nuse CGI::Simple;\n\nrun( CGI::Simple-&gt;new );\n\nsub run {\n    my $cgi = shift;\n    binmode STDOUT, ':encoding(UTF-8)';\n\n    my ($name, $surname, $age, $gender) = map $cgi-&gt;param($_), qw(name surname age gender);\n    print $cgi-&gt;header(-type =&gt; 'text/plain', -charset =&gt; 'utf-8');\n\n    printf(\"%s %s %d %d kayd\u0131, sistemde yap\u0131lacak olan g\u00fcncellemelerden sonra sisteme ba\u015far\u0131yla eklenecektir.\\n\",\n        $name , $surname , $age , $gender);\n\n    return;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1493812840, "last_edit_date": 1493812840, "creation_date": 1493806545, "answer_id": 43757210, "question_id": 43734497, "link": "https://stackoverflow.com/questions/43734497/turkish-character-not-rendering-properly/43757210#43757210", "title": "Turkish character not rendering properly", "body": "<p>I think you are misunderstanding the purpose of the <code>charset</code> attribute on the <code>Content-type</code> header. Your program is emitting this header:</p>\n\n<pre><code>Content-Type: text/plain; charset=ISO-8859-9\n</code></pre>\n\n<p>This says to an HTTP client (a browser, for example) \"I am going to send you some plain text which is encoded as ISO-8859-9\". But it's important to note that the header is purely informational. It tells the world that your text is encoded as ISO-8859-9. It <strong>does not</strong> do the encoding for you. That is up to you.</p>\n\n<p>This is why Borodin and others have been asking you questions which you have not been answering. Most editors will create text that is encoded either as ISO-8859-1 or UTF-8. Unless you have a special Turkish editor or you have changed the configuration of your editor, it seems very unlikely to me that you are producing text in ISO-8859-9.</p>\n\n<p>If you are determined to emit ISO-8859-9 text, then you need to do that encoding yourself. You can use the <code>encode()</code> function from the <a href=\"https://metacpan.org/pod/Encode\" rel=\"nofollow noreferrer\">Encode</a> module to do that.</p>\n\n<pre><code>use Encode;\n\nmy $encoded_text = encode('ISO-8859-9', $text);\nprint $encoded_text;\n</code></pre>\n\n<p>But I wonder why you want to use a relatively obscure encoding like ISO-8859-9. UTF-8 covers all of the characters used in Turkish. Why not use that instead? Your life will become far easier if you embrace the same standards as the web.</p>\n\n<p>As an aside, you have introduced a small strangeness in your code. You use CGI.pm in \"functions\" mode and load it in a way which imports a number of its functions into your namespace.</p>\n\n<pre><code>use CGI qw(:standard);\n</code></pre>\n\n<p>And then you use the <code>param()</code> function a few times in this way. But after that you create a CGI query object in order to call the <code>header()</code> method on it.</p>\n\n<pre><code>my $q = new CGI;\nprint $q-&gt;header(...);\n</code></pre>\n\n<p>You probably don't realise it, but the <code>header()</code> function is included in the <code>:standard</code> set of imports, so you can call it without creating a CGI object.</p>\n\n<pre><code>print header(...);\n</code></pre>\n\n<p>I used it that way in my answer to your previous question. I'm not sure why you changed the code to make it more complicated.</p>\n\n<p>I should also point out that if you do want to create a CGI query object, then you shouldn't use the indirect object notation:</p>\n\n<pre><code>my $q = new CGI;\n</code></pre>\n\n<p>This will cause you problems at some point. Far better to write:</p>\n\n<pre><code>my $q = CGI-&gt;new;\n</code></pre>\n\n<p>(As demonstrated in <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#Programming-style\" rel=\"nofollow noreferrer\">the CGI.pm documentation</a>)</p>\n"}], "owner": {"reputation": 137, "user_id": 3791141, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1065521263/picture?type=large", "display_name": "mehfatitem", "link": "https://stackoverflow.com/users/3791141/mehfatitem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 835, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1493812840, "creation_date": 1493717442, "last_edit_date": 1493732519, "question_id": 43734497, "link": "https://stackoverflow.com/questions/43734497/turkish-character-not-rendering-properly", "title": "Turkish character not rendering properly", "body": "<p>I have a problem in Perl with a Turkish character. I have set the Turkish character set but my Turkish character isn't displaying properly.</p>\n\n<p>This is my Perl script.</p>\n\n<pre><code>#!\"c:\\xampp\\perl\\bin\\perl.exe\"\n\nuse strict;\nuse warnings;\n\nuse CGI qw(:standard);\n\nmy $name    = param('name');\nmy $surname = param('surname');\nmy $age     = param('age');\nmy $gender  = param('gender');\n\nmy $q = new CGI;\n\n# We're outputting plain text, not HTML\nprint $q-&gt;header(-content_type =&gt; 'text/plain' ,  -charset =&gt; 'ISO-8859-9');\n\nmy $text = $name.\" \".$surname.\" \".$age.\" \".$gender.\" kayd\u0131, sistemde yap\u0131lacak olan g\u00fcncellemelerden sonra sisteme ba\u015far\u0131yla eklenecektir.\"; \n\n# printf(\"%s %s %d %d kayd\u0131, sistemde yap\u0131lacak olan g\u00fcncellemelerden sonra sisteme ba\u015far\u0131yla eklenecektir.\", $name , $surname , $age , $gender);\n\nprint $text;\n</code></pre>\n\n<p>How can I fix the problem? </p>\n"}, {"tags": ["json", "perl", "facebook-messenger"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493714621, "post_id": 43733471, "comment_id": 74510173, "body": "Is <code>$perlmanent_token</code> defined? Is it a global variable? It&#39;s not lexical in your sub. You can look at the full request by adding a <code>print $req-&gt;as_string</code> or <code>$req-&gt;dump</code> before you send it. Alternatively, you can load LWP::ConsoleLogger::Everywhere to inspect the whole transaction to see what&#39;s wrong."}, {"owner": {"reputation": 11, "user_id": 7917848, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211609495649554/picture?type=large", "display_name": "Haris Tsantas", "link": "https://stackoverflow.com/users/7917848/haris-tsantas"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1493714979, "post_id": 43733471, "comment_id": 74510365, "body": "yeah it&#39;s defined."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493729432, "post_id": 43733471, "comment_id": 74519556, "body": "I don&#39;t see a <code>messages</code> edge from the <code>user</code> node. Did you mean <code>inbox</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7917848, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211609495649554/picture?type=large", "display_name": "Haris Tsantas", "link": "https://stackoverflow.com/users/7917848/haris-tsantas"}, "is_accepted": false, "score": 0, "last_activity_date": 1493732160, "creation_date": 1493732160, "answer_id": 43739325, "question_id": 43733471, "link": "https://stackoverflow.com/questions/43733471/facebook-messenger-platform-send-url-button-gives-bad-request-error/43739325#43739325", "title": "Facebook Messenger platform send URL button gives &quot;bad request&quot; error", "body": "<p>The problem was that i forgot to put [] in the buttons field.    </p>\n\n<pre><code>    sub post_url_button_to_facebook {\n        my $reply_recipient = shift;\n\n\n\n      my %hash = ('recipient'=&gt;{'id'=&gt;$reply_recipient},'message'=&gt;{'attachment'=&gt;{'type'=&gt;'template','payload'=&gt;{'template_type'=&gt;'button','text'=&gt;\"This my link\",'buttons'=&gt;[{'type'=&gt;'web_url','url'=&gt;'https://www.arx.gr/','title'=&gt;\"Dev's Website\"}] }}});\n\n    my $post_json_data = JSON::encode_json( \\%hash );\n\n    my $ua = LWP::UserAgent-&gt;new;\n\n    my $url = \"https://graph.facebook.com/v2.9/me/messages?access_token=\" . $permanent_token;\n\n    my $req = HTTP::Request-&gt;new( POST =&gt; $url );\n    $req-&gt;header( 'Content-type' =&gt; 'application/json' );\n    $req-&gt;content( $post_json_data );\n\n    my $resp = $ua-&gt;request( $req );\n\n    if ( $resp-&gt;is_success ) {\n\n        my $message = $resp-&gt;decoded_content;\n        send_status_ok();\n\n        warn \"Received reply: $message\\n\";\n    }\n    else {\n        warn \"HTTP POST error code: \",    $resp-&gt;code,    \"\\n\";\n        warn \"HTTP POST error message: \", $resp-&gt;message, \"\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7917848, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211609495649554/picture?type=large", "display_name": "Haris Tsantas", "link": "https://stackoverflow.com/users/7917848/haris-tsantas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1493732160, "creation_date": 1493714101, "last_edit_date": 1493731947, "question_id": 43733471, "link": "https://stackoverflow.com/questions/43733471/facebook-messenger-platform-send-url-button-gives-bad-request-error", "title": "Facebook Messenger platform send URL button gives &quot;bad request&quot; error", "body": "<p>I am taking the recipient's ID and trying to send back a URL button but I get a \"bad request\" error.</p>\n\n<p>I think the problem is the JSON but I can't figure it out.</p>\n\n<pre><code>sub post_url_button_to_facebook {\n    my $reply_recipient = shift;\n\n   my %hash = ('recipient'=&gt;{'id'=&gt;$reply_recipient},'message'=&gt;{'attachment'=&gt;{'type'=&gt;'template','payload'=&gt;{'template_type'=&gt;'button','text'=&gt;\"This my link\",'buttons'=&gt;{'type'=&gt;'web_url','url'=&gt;'https://www.arx.gr/','title'=&gt;\"Dev's Website\"} }}});\n\n    my $post_json_data = JSON::encode_json( \\%hash );\n\n    my $ua = LWP::UserAgent-&gt;new;\n\n    my $url = \"https://graph.facebook.com/v2.9/me/messages?access_token=\" . $permanent_token;\n\n    my $req = HTTP::Request-&gt;new( POST =&gt; $url );\n    $req-&gt;header( 'Content-type' =&gt; 'application/json' );\n    $req-&gt;content( $post_json_data );\n\n    my $resp = $ua-&gt;request( $req );\n\n    if ( $resp-&gt;is_success ) {\n\n        my $message = $resp-&gt;decoded_content;\n        send_status_ok();\n\n        warn \"Received reply: $message\\n\";\n    }\n    else {\n        warn \"HTTP POST error code: \",    $resp-&gt;code,    \"\\n\";\n        warn \"HTTP POST error message: \", $resp-&gt;message, \"\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "cpan", "strawberry-perl"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7316912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f9e4d25a6644832158fd83bb341789d?s=128&d=identicon&r=PG&f=1", "display_name": "shreeram shankar pattanayak", "link": "https://stackoverflow.com/users/7316912/shreeram-shankar-pattanayak"}, "edited": false, "score": 0, "creation_date": 1493713695, "post_id": 43732757, "comment_id": 74509700, "body": "Thanks for the information . But do you have any other module/s which will help me integrate the codes between PHP (front-end codes) and Perl (back-end codes) ? It would be really great help :-)"}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 2, "last_activity_date": 1493711333, "creation_date": 1493711333, "answer_id": 43732757, "question_id": 43732581, "link": "https://stackoverflow.com/questions/43732581/resolving-issues-regarding-installation-of-phpinterpreter-module-on-strawberry/43732757#43732757", "title": "Resolving issues regarding installation of PHP::Interpreter module on strawberry perl", "body": "<p>That module is broken. Find an alternative.</p>\n\n<p>It hasn't been updated since 2008, and is no longer compatible with any current version of PHP.</p>\n"}], "owner": {"reputation": 13, "user_id": 7316912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f9e4d25a6644832158fd83bb341789d?s=128&d=identicon&r=PG&f=1", "display_name": "shreeram shankar pattanayak", "link": "https://stackoverflow.com/users/7316912/shreeram-shankar-pattanayak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 43732757, "answer_count": 1, "score": 0, "last_activity_date": 1493711333, "creation_date": 1493710688, "question_id": 43732581, "link": "https://stackoverflow.com/questions/43732581/resolving-issues-regarding-installation-of-phpinterpreter-module-on-strawberry", "title": "Resolving issues regarding installation of PHP::Interpreter module on strawberry perl", "body": "<p>I have been facing this issue while installing PHP::Interpreter on the cpan client of strawverry perl.</p>\n\n<hr>\n\n<pre><code>cpan&gt; install PHP::Interpreter\nDatabase was generated on Tue, 02 May 2017 06:44:13 GMT\n\nRunning install for module 'PHP::Interpreter'\nChecksum for C:\\STRAWB~1\\cpan\\sources\\authors\\id\\A\\AF\\AFF\\PHP-Interpreter-1.0.2.tar.gz ok\nScanning cache C:\\STRAWB~1\\cpan\\build for sizes\n............................................................................DONE\nConfiguring A/AF/AFF/PHP-Interpreter-1.0.2.tar.gz with Makefile.PL\nusing php_config 'php-config'\n'php-config' is not recognized as an internal or external command,\noperable program or batch file.\nFailed to find the 'php-config' executable. Make sure you have PHP and PHP sources installed, and that 'php-config' is in PATH. at Makefile.PL line 55.\nWarning: No success on command[C:\\Strawberry\\perl\\bin\\perl.exe Makefile.PL]\n  AFF/PHP-Interpreter-1.0.2.tar.gz\n  C:\\Strawberry\\perl\\bin\\perl.exe Makefile.PL -- NOT OK\nStopping: 'install' failed for 'PHP::Interpreter'.\nFailed during this command:\n AFF/PHP-Interpreter-1.0.2.tar.gz             : writemakefile NO 'C:\\Strawberry\\perl\\bin\\perl.exe Makefile.PL' returned status 256\n</code></pre>\n\n<hr>\n\n<p>Tried installing it again as well and got similar errors as shown below</p>\n\n<hr>\n\n<pre><code>cpan&gt; install PHP::Interpreter\nRunning install for module 'PHP::Interpreter'\n  AFF/PHP-Interpreter-1.0.2.tar.gz\n  Has already been unwrapped into directory C:\\STRAWB~1\\cpan\\build\\PHP-Interpreter-1.0.2-1\n  AFF/PHP-Interpreter-1.0.2.tar.gz\n  'C:\\Strawberry\\perl\\bin\\perl.exe Makefile.PL' returned status 256, not re-running\n\ncpan&gt;\n</code></pre>\n\n<hr>\n\n<p>Help me resolving the above issue.</p>\n\n<p>Thanks in advance !!</p>\n\n<p>Regards,\nShreeram</p>\n"}, {"tags": ["perl", "http", "curl"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 1, "creation_date": 1493708658, "post_id": 43731963, "comment_id": 74506992, "body": "Why you do not use a perl module like: <a href=\"http://search.cpan.org/~szbalint/WWW-Curl-4.17/lib/WWW/Curl.pm\" rel=\"nofollow noreferrer\">WWW:Curl</a> instead of a system call"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1493713549, "post_id": 43731963, "comment_id": 74509626, "body": "You don&#39;t need to escape the <code>&amp;</code>. That&#39;s part of the URL."}, {"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1493720392, "post_id": 43731963, "comment_id": 74513626, "body": "Pass the arguments to <code>system</code> with an array."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1493727415, "post_id": 43731963, "comment_id": 74518322, "body": "@ceving: That&#39;s not necessary."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1493727365, "last_edit_date": 1493727365, "creation_date": 1493726994, "answer_id": 43737540, "question_id": 43731963, "link": "https://stackoverflow.com/questions/43731963/perl-url-encoding-using-curl/43737540#43737540", "title": "Perl url encoding using Curl", "body": "<p>Use the <a href=\"https://metacpan.org/pod/URI\" rel=\"nofollow noreferrer\"><code>URI</code></a> module to correctly build a URL, and rather than shelling out to cURL you should use a Perl library like <a href=\"https://metacpan.org/pod/LWP::Simple\" rel=\"nofollow noreferrer\"><code>LWP::Simple</code></a> to access the page</p>\n\n<p>The disadvantage of <code>LWP::Simple</code> is that it may be <em>too</em> simple in that it provides no diagnostics if the transaction fails. If you find you need something more elaborate then you should look at\n<a href=\"https://metacpan.org/pod/HTTP::Tiny\" rel=\"nofollow noreferrer\"><code>HTTP::Tiny</code></a>,\n<a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow noreferrer\"><code>LWP::UserAgent</code></a>, or\n<a href=\"https://metacpan.org/pod/Mojo::UserAgent\" rel=\"nofollow noreferrer\"><code>Mojo::UserAgent</code></a>.\nIf you need help with these then please ask</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse URI;\nuse LWP::Simple 'get';\n\nmy $url = URI-&gt;new('http://machine/callResync');\n$url-&gt;query_form(\n    start =&gt; '2017-02-01 00.00.00.000',\n    end   =&gt; '2017-02-01 23.23.999',\n);\n\nmy $content = get($url) or die \"Failed to access URL\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1493735088, "creation_date": 1493735088, "answer_id": 43740370, "question_id": 43731963, "link": "https://stackoverflow.com/questions/43731963/perl-url-encoding-using-curl/43740370#43740370", "title": "Perl url encoding using Curl", "body": "<p>Problem number 1: You used an invalid URL. Spaces can't appear in URLs.</p>\n\n<pre><code>my $url = \"http://machine/callResync?start=2017-02-01%2000.00.00.000&amp;end=2017-02-01%2023.23.999\";\n</code></pre>\n\n<hr>\n\n<p>Problem number 2: Shell injection error. You didn't correctly form your shell command.</p>\n\n<pre><code>system('curl', $url);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\n\nmy $cmd = shell_quote('curl', $url);\nsystem($cmd);\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 5677672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08a2d9402d7196701fc2dcc56f0e0e6?s=128&d=identicon&r=PG&f=1", "display_name": "teamerMan", "link": "https://stackoverflow.com/users/5677672/teamerman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 497, "favorite_count": 0, "accepted_answer_id": 43737540, "answer_count": 2, "score": -2, "last_activity_date": 1493735088, "creation_date": 1493708499, "question_id": 43731963, "link": "https://stackoverflow.com/questions/43731963/perl-url-encoding-using-curl", "title": "Perl url encoding using Curl", "body": "<p>I am having an issue where I am using cURL inside a perl script to execute a http request. I believe my issue is related to special characters in the URL string but I cannot figure out how to make it work. </p>\n\n<p>I can confirm that the URL is correct as I can run it from my browser. </p>\n\n<p>My perl script is</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n$url = \"http://machine/callResync?start=2017-02-01 00.00.00.000&amp;end=2017-02-01 23.23.999\";\n\nsystem \"curl $url\n</code></pre>\n\n<p>It fails when it reaches the first whitespace. I tired to escape that using %20.</p>\n\n<p>After that I put in %26 to escape the &amp; but then I get another issue. I have tired a number of different combinations but it keeps failing. </p>\n\n<p>Any idea's.  </p>\n"}, {"tags": ["perl", "sftp"], "comments": [{"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1493706257, "post_id": 43730313, "comment_id": 74505847, "body": "What version of Net::SFTP::Foreign are you using? Why do you even use Net::SFTP::Foreign? Why not the native Net::SFTP?"}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "reply_to_user": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1493795086, "post_id": 43730313, "comment_id": 74548165, "body": "@MartinPrikryl: <a href=\"https://metacpan.org/pod/Net::SFTP\" rel=\"nofollow noreferrer\">Net::SFTP</a> is unmaintained (last release was in 2005) and has lots of issues."}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 1, "creation_date": 1493795408, "post_id": 43730313, "comment_id": 74548325, "body": "@Akb: your example works for me, and looking at the module code I can&#39;t see a way that error could happen unless you were using a quite old version of the module or a modified one."}], "owner": {"reputation": 21, "user_id": 7950086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cdbcbefd225f40ff2da2b4e92db73a8?s=128&d=identicon&r=PG&f=1", "display_name": "Akb", "link": "https://stackoverflow.com/users/7950086/akb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 250, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1493700787, "creation_date": 1493700787, "question_id": 43730313, "link": "https://stackoverflow.com/questions/43730313/not-able-to-use-copy-perm-option-in-netsftpforeign-modules-put", "title": "Not able to use &#39;copy_perm&#39; option in Net::SFTP::Foreign module&#39;s put()", "body": "<p>When i run:</p>\n\n<pre><code>my $sftp = Net::SFTP::Foreign-&gt;new(transport =&gt; $conn\n                                     ,timeout =&gt; $opt-&gt;{Timeout});\n\nif ($sftp-&gt;put(\"$srcDirectory/$_\", \"$self-&gt;{remoteDir}/$tgtFile\") { }\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>Couldn't setstat remote file (setstat)': Operation\nunsupported\n</code></pre>\n\n<p>So after doing some research i came to conclusion that i need to:</p>\n\n<pre><code>my $sftp = Net::SFTP::Foreign-&gt;new(transport =&gt; $conn\n                                     ,timeout =&gt; $opt-&gt;{Timeout});\n\n$sftp-&gt;put(\"$srcDirectory/$_\", \"$self-&gt;{remoteDir}/$tgtFile\",\n             copy_perm =&gt; 0, copy_time =&gt; 0);\n</code></pre>\n\n<p>However now i get error: </p>\n\n<pre><code>`invalid option(s) 'copy_perm' at &lt;my file name&gt; line 281.`\n</code></pre>\n\n<p>This line 281 is wherei have the above put() call.</p>\n\n<p>Can someone tell me what am i doing wrong? Is copy_perm deprecated? It doesn't complain about copy_time is thats the only new argument i send.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "edited": false, "score": 2, "creation_date": 1493710611, "post_id": 43729702, "comment_id": 74508075, "body": "The choices are a single line of code using well known syntax vs learning a new api in a new module. IMHO, the strength of perl is to have a syntax so smart that modules are not needed for mundane tasks."}, {"owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "reply_to_user": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "edited": false, "score": 0, "creation_date": 1493740999, "post_id": 43729702, "comment_id": 74527812, "body": "@BOC well it is 4 lines, not one line. ;-) I&#39;m assuming you mean you prefer the <code>for</code> method over <code>reduce</code>? It was actually a difference of opinion with a colleague between <code>for</code> and <code>reduce</code> that caused me to post this question. I thought <code>group_by</code> would be a nice compromise, but since realising it&#39;s not any simpler, I&#39;m back to preferring the simple loop."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1493774179, "post_id": 43729702, "comment_id": 74541828, "body": "@AdamMillerchip  With the above comment, I&#39;d rush to say that I strongly prefer the loop over <code>reduce</code>. (I am not aware of a module with such specific functionality.)  You can also write the loop in one line if that matters (<code>push ...  for @items</code>), + declaration.  Or put it in a sub, which may grow into a small utility module if more comes along. (Even the same interface <code>group_by { } LIST</code> can be set up.)"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1493834778, "post_id": 43753067, "comment_id": 74575582, "body": "Nice. In &quot;<i>The block can return an optional second value</i>&quot; do you mean to say that it can &quot;take&quot; an optional second value (instead of &quot;<i>return</i>&quot;)?"}, {"owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1493837606, "post_id": 43753067, "comment_id": 74577255, "body": "I suppose it depends on your perspective. From the caller&#39;s perspective, maybe &quot;take&quot; is a better word choice. From the execution perspective, the block is a subroutine that we call in list context, using one or two elements of the returned list. How about &quot;If a list is provided to the block, the first element specifies the key to group by, and the second element specifies the value that will be grouped. If no second element is provided, the entire item is used as the value.&quot;"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1493839008, "post_id": 43753067, "comment_id": 74577991, "body": "Sure, a good point (but people generally consider interfaces from the user&#39;s perspective).  Since it can mislead on a casual read more of an explanation may indeed be a good idea, and what you give is precise and completely clear.  A nice thing about this interface (with a code block) is that you can later easily tweak and expand functionality, if a need arises (I presume it won&#39;t be getting shipped).  Not to mention that it is a nice &quot;starter&quot; for a module if you need more of some similar custom processing."}, {"owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1493869931, "post_id": 43753067, "comment_id": 74588123, "body": "Updated the description. Thanks for your feedback."}], "tags": [], "owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "is_accepted": true, "score": 4, "last_activity_date": 1493869912, "last_edit_date": 1493869912, "creation_date": 1493794261, "answer_id": 43753067, "question_id": 43729702, "link": "https://stackoverflow.com/questions/43729702/perl-module-with-group-by-function-to-convert-array-of-hashrefs-to-hash-of-arra/43753067#43753067", "title": "Perl: Module with group_by function to convert array of hashrefs to hash of arrayrefs", "body": "<p>There doesn't seem to be a library function for this, so I wrote one myself.</p>\n\n<pre><code>sub group_by (&amp;@) {\n    my ($get_kv, @items) = @_;\n\n    my %groups;\n    for (@items) {\n        my ($k, $v) = ($get_kv-&gt;(), $_);\n        push @{ $groups{$k} }, $v;\n    }\n    %groups;\n}\n</code></pre>\n\n<p>Inside the block, the first element specifies the key to group by, and the second element optionally specifies the value that will be grouped. If no second element is provided, the entire item is used as the value.</p>\n\n<p>Usage:</p>\n\n<pre><code>my %keys_to_values = group_by { $_-&gt;{key}, $_-&gt;{value} } @items;\n# (\n#     'a-key' =&gt; [qw(a-value-1 a-value-2)],\n#     'b-key' =&gt; [qw(b-value-1 b-value-2)],\n# )\n\nmy %keys_to_items = group_by { $_-&gt;{key} } @items;\n# (\n#    'a-key' =&gt; [\n#        {\n#            key   =&gt; 'a-key',\n#            value =&gt; 'a-value-1',\n#        },\n#        {\n#            key   =&gt; 'a-key',\n#            value =&gt; 'a-value-2',\n#        },\n#    ],\n#    'b-key' =&gt; [\n#        {\n#            key   =&gt; 'b-key',\n#            value =&gt; 'b-value-1',\n#        },\n#        {\n#            key   =&gt; 'b-key',\n#            value =&gt; 'b-value-2',\n#        },\n#    ],\n# )\n</code></pre>\n"}], "owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 1, "accepted_answer_id": 43753067, "answer_count": 1, "score": 1, "last_activity_date": 1493869912, "creation_date": 1493696304, "last_edit_date": 1493809103, "question_id": 43729702, "link": "https://stackoverflow.com/questions/43729702/perl-module-with-group-by-function-to-convert-array-of-hashrefs-to-hash-of-arra", "title": "Perl: Module with group_by function to convert array of hashrefs to hash of arrayrefs", "body": "<p>Given an array of hashrefs:</p>\n\n<pre><code>my @items = (\n    {\n        key   =&gt; 'a-key',\n        value =&gt; 'a-value-1',\n    },\n    {\n        key   =&gt; 'a-key',\n        value =&gt; 'a-value-2',\n    },\n    {\n        key   =&gt; 'b-key',\n        value =&gt; 'b-value-1',\n    },\n    {\n        key   =&gt; 'b-key',\n        value =&gt; 'b-value-2',\n    },\n);\n</code></pre>\n\n<p>I want to produce a hash with the values stored in arrayrefs grouped by keys:</p>\n\n<pre><code>my %grouped = (\n    'a-key' =&gt; ['a-value-1', 'a-value-2'],\n    'b-key' =&gt; ['b-value-1', 'b-value-2'],\n);\n</code></pre>\n\n<p>I know this can be done natively by just looping over the elements:</p>\n\n<pre><code>my %grouped;\nfor my $item (@items) {\n    push @{ $grouped{$item-&gt;{key}} }, $item-&gt;{value};\n}\n</code></pre>\n\n<p>But it seems like a common enough formula for there to be a module that provides a function similar to <a href=\"https://ruby-doc.org/core-2.1.1/Enumerable.html#method-i-group_by\" rel=\"nofollow noreferrer\">Ruby</a> or <a href=\"http://underscorejs.org/#groupBy\" rel=\"nofollow noreferrer\">Underscore JS</a>'s group by functions. Is there a commonly used library in Perl that provides a similar function?</p>\n\n<p>In anticipation of someone mentioning <code>List::Util::reduce</code>, that doesn't seem any less complex than the native way to me, and it's seems awkward to use it to produce a hashref.</p>\n\n<pre><code>my $grouped = reduce {\n    push @{ $a-&gt;{$b-&gt;{key}} }, $b-&gt;{value};\n    $a;\n} {}, @items;\n</code></pre>\n\n<p>I'm imagining a usage like this:</p>\n\n<pre><code>my %grouped = group_by { $_-&gt;{key} } @items;\n</code></pre>\n\n<p>Edit: I've just realised that if we use <code>group_by</code> above, we still need to process the result further, something like this:</p>\n\n<pre><code>for my $arrayref (values %grouped) {\n    $_ = $_-&gt;{value} for @$arrayref;\n}\n</code></pre>\n"}, {"tags": ["perl", "sockets", "ssl", "iis"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493692855, "post_id": 43728760, "comment_id": 74502047, "body": "Don&#39;t use global variables."}, {"owner": {"reputation": 59, "user_id": 3251311, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ba00bdc131ea07fb8f1b3708edae9c4?s=128&d=identicon&r=PG&f=1", "display_name": "A-Kay", "link": "https://stackoverflow.com/users/3251311/a-kay"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493694587, "post_id": 43728760, "comment_id": 74502418, "body": "@Sinan&#220;n&#252;r do you think that will actually have an impact on the error I&#39;m seeing?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493694614, "post_id": 43728760, "comment_id": 74502427, "body": "It is impossible to know."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 3251311, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ba00bdc131ea07fb8f1b3708edae9c4?s=128&d=identicon&r=PG&f=1", "display_name": "A-Kay", "link": "https://stackoverflow.com/users/3251311/a-kay"}, "edited": false, "score": 0, "creation_date": 1493700841, "post_id": 43730189, "comment_id": 74503931, "body": "Thanks for that - let me clarify: by &quot;locked up&quot; I mean the IIS server was getting inundated by requests so I&#39;m assuming it wouldn&#39;t have been responding correctly and then &quot;active again&quot; when the load went down and could respond to requests as normal. I think alarm sounds like what I&#39;m looking for - would it be as simple as setting <code>alarm(60)</code> before the <code>print $remote GET</code> command and <code>alarm(0)</code> after it?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 59, "user_id": 3251311, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ba00bdc131ea07fb8f1b3708edae9c4?s=128&d=identicon&r=PG&f=1", "display_name": "A-Kay", "link": "https://stackoverflow.com/users/3251311/a-kay"}, "edited": false, "score": 0, "creation_date": 1493700937, "post_id": 43730189, "comment_id": 74503959, "body": "@A-Kay: it depends on where it is stuck. I would actually expect it to be stuck when reading from the server and not when writing to it. But you might just wrap all communication starting with the connect and until read is done into alarm."}, {"owner": {"reputation": 59, "user_id": 3251311, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ba00bdc131ea07fb8f1b3708edae9c4?s=128&d=identicon&r=PG&f=1", "display_name": "A-Kay", "link": "https://stackoverflow.com/users/3251311/a-kay"}, "edited": false, "score": 0, "creation_date": 1493703603, "post_id": 43730189, "comment_id": 74504768, "body": "good thinking @Steffen, I&#39;ll run with this and see how I go. Thanks!"}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 2, "last_activity_date": 1493700451, "last_edit_date": 1493700451, "creation_date": 1493699929, "answer_id": 43730189, "question_id": 43728760, "link": "https://stackoverflow.com/questions/43728760/perl-iosocketssl-with-web-server-hang/43730189#43730189", "title": "Perl IO::Socket::SSL with web server hang", "body": "<p>You actually send this to the server inside the SSL connection:</p>\n\n<pre><code>GET /path\\r\\n\n\\r\\n\n</code></pre>\n\n<p>This is no valid HTTP/1.0 or HTTP/1.1 request but a HTTP/0.9 request. Since HTTP/0.9 is obsolete since 20 years I would not expect to IIS still support this old protocol so it might just show unexpected behavior when confronted with such a request. A proper HTTP/1.0 request would look like this:</p>\n\n<pre><code>GET /path HTTP/1.0\\r\\n\nHost: www.example.com\\r\\n\n\\r\\n\n</code></pre>\n\n<p>For more information on how to send proper requests and how to properly deal with the response see the <a href=\"https://tools.ietf.org/search/rfc1945\" rel=\"nofollow noreferrer\">HTTP/1.0</a> and <a href=\"https://tools.ietf.org/search/rfc2616\" rel=\"nofollow noreferrer\">HTTP/1.1</a> standards.</p>\n\n<p>Apart from that:</p>\n\n<pre><code>        SSL_verify_mode =&gt; SSL_VERIFY_NONE,\n        verify_hostname =&gt; 0,\n</code></pre>\n\n<p><code>verify_hostname</code> has no meaning in IO::Socket::SSL. You probably saw this with LWP::UserAgent and it is only relevant there. </p>\n\n<blockquote>\n  <p>Everything works fine under normal operation but I had an issue where the web server (IIS) locked up and Perl got stuck, even after the web server became active again.</p>\n</blockquote>\n\n<p>Unfortunately this is not usable as an error description because it is unclear what you consider as \"locked up\" and \"active again\" but essentially if the server behaves erratically then the client might be affected by this. </p>\n\n<p>Currently your are dealing with the request by reading until end of TCP connection. If the server behaves erratically and will not close this connection then you will wait forever. </p>\n\n<p>Note, that the timeout you set might only be relevant for the initial connect and not for further reads. And it might not even work properly on Windows depending on the version of IO::Socket::SSL you use. You might instead add a <code>alarm(60)</code> or similar to make sure that the client does not wait forever  on a broken server or you might try to work with non-blocking sockets to deal with the issue.</p>\n"}], "owner": {"reputation": 59, "user_id": 3251311, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ba00bdc131ea07fb8f1b3708edae9c4?s=128&d=identicon&r=PG&f=1", "display_name": "A-Kay", "link": "https://stackoverflow.com/users/3251311/a-kay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 43730189, "answer_count": 1, "score": 0, "last_activity_date": 1493700451, "creation_date": 1493688775, "question_id": 43728760, "link": "https://stackoverflow.com/questions/43728760/perl-iosocketssl-with-web-server-hang", "title": "Perl IO::Socket::SSL with web server hang", "body": "<p>I've got a problem when using IO::Socket::SSL.</p>\n\n<p>Everything works fine under normal operation but I had an issue where the web server (IIS) locked up and Perl got stuck, even after the web server became active again.</p>\n\n<p>I'm running the Perl script as an exe under Windows and I can't actually see the program running as it is hidden - here is the code:</p>\n\n<pre><code>sub api_action\n{\n\n$api_action = $_[0];\n\nuse IO::Socket::SSL;\n$EOL = \"\\015\\012\";\n$BLANK = $EOL x 2;\n$remote = IO::Socket::SSL-&gt;new( Proto     =&gt; \"tcp\",\n                     PeerAddr  =&gt; \"api.xxxxx\",\n                     PeerPort  =&gt; \"443\",\n            SSL_verify_mode =&gt; SSL_VERIFY_NONE,\n            verify_hostname =&gt; 0,\n            Timeout =&gt; 120,\n                    );\nunless ($remote) { print \"cannot connect to API\\n\"; return \"ERROR\"\n}\n$remote-&gt;autoflush(1); \nprint $remote \"GET /API/?action=$api_action\" . $BLANK;\nreturn &lt;$remote&gt;;\nclose $remote;\n\n}\n</code></pre>\n\n<p>My thought is that it has made the initial connection, but is still waiting for a return from the GET command. I would have thought setting the Timeout would just cause it to return the error but it doesn't look like it works.</p>\n\n<p>Any ideas on where I'm going wrong or what I've missed?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "reverse"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7907514"}, "edited": false, "score": 0, "creation_date": 1493687077, "post_id": 43728519, "comment_id": 74500916, "body": "Thank you so much for the help! I see what you&#39;re saying about the positive number check and will look around on how to add that."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 1, "last_activity_date": 1493686874, "last_edit_date": 1493686874, "creation_date": 1493686446, "answer_id": 43728519, "question_id": 43728433, "link": "https://stackoverflow.com/questions/43728433/reversed-pyramid-design-in-perl/43728519#43728519", "title": "Reversed Pyramid Design in Perl", "body": "<p>Why are you setting <code>$row</code> from <code>1 .. $size</code> if you want a <em>reverse</em> pyramid? </p>\n\n<p>Why are you setting the end of the range for <code>$column</code> to <code>$size + 1</code> instead of <code>$row</code>? </p>\n\n<p>Why do you have some kind of strange logic for determining when to print a newline?</p>\n\n<pre><code>use strict;\nuse warnings;\n\nprint \"Maximum number of characters in a line : \";\nchomp(my $size = &lt;&gt;);\n\nprint \"Enter Echo Character : \";\nchomp(my $character = &lt;&gt;);\n\nwhile ($size) {\n    for (1 .. $size) {\n        print $character;\n    }\n\n    print \"\\n\";\n    $size--;\n}\n</code></pre>\n\n<p>Note: you probably want to validate that <code>$size</code> is a positive integer, or else you might get unexpected results for certain inputs!</p>\n"}, {"tags": [], "owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "is_accepted": false, "score": 2, "last_activity_date": 1493702894, "creation_date": 1493702894, "answer_id": 43730679, "question_id": 43728433, "link": "https://stackoverflow.com/questions/43728433/reversed-pyramid-design-in-perl/43730679#43730679", "title": "Reversed Pyramid Design in Perl", "body": "<p>The <code>x</code> operator is also useful for this.</p>\n\n<pre><code>use feature qw(say);\n\nprint 'character? ';\nchomp(my $char = &lt;STDIN&gt;);\nprint 'length? ';\nchomp(my $length = &lt;STDIN&gt;);\n\nwhile ($length) {\n    say $char x $length;\n    $length--;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7907514"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 43728519, "answer_count": 2, "score": 0, "last_activity_date": 1493713116, "creation_date": 1493685674, "last_edit_date": 1493713116, "question_id": 43728433, "link": "https://stackoverflow.com/questions/43728433/reversed-pyramid-design-in-perl", "title": "Reversed Pyramid Design in Perl", "body": "<p>I need to input a number of lines and a single character to use for the reverse pyramid.The output must look like the following:</p>\n\n<pre><code>Maximum number of characters in a line : 6\nEnter Echo Character : $\n\n$$$$$$\n$$$$$\n$$$$ \n$$$ \n$$\n$\n</code></pre>\n\n<p>This is what I have so far:</p>\n\n<pre><code>print \"Maximum number of characters in a line : \";\n$size = &lt;&gt;;\nprint \"Enter Echo Character : \";\n$character = &lt;&gt;;\nchomp($size);\n\nLoop: for $row (1 .. $size)\n{\n    for $column (1 .. ($size+1))\n    {\n        if ($column &lt; $row)\n        {\n            print \"\\n\";\n            next Loop;\n        }\n        print $character;\n    }\n}\n</code></pre>\n\n<p>But I am definitely doing something wrong because I cannot get the output I need after a couple hours of trying. I am new at Perl and any help I can get is definitely appreciated.</p>\n\n<pre><code>KMBP:Assignment 13 mypc$ perl pyramidtest.pl \nMaximum number of characters in a line : 6\nEnter Echo Character : $\n$\n$\n$\n$\n$\n$\n$\n\n\n\n\n\nKMBP:Assignment 13 mypc$\n</code></pre>\n"}, {"tags": ["perl", "loops", "terminal"], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 7504055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SEZWU.jpg?s=128&g=1", "display_name": "Purrsia", "link": "https://stackoverflow.com/users/7504055/purrsia"}, "edited": false, "score": 0, "creation_date": 1493696767, "post_id": 43727524, "comment_id": 74502906, "body": "Borodin: First, many thank-you&#39;s for pointing out this error. This script does work for my file1.txt and file2.txt, however; it prints everything to my screen. So, I redirected: <code>$ perl .&#47;script.py &gt; out.txt</code> and it added a ton of stuff at the end of the file (ex w/ last result):        Q28PH0\tK00275;\tPDXH_JANSC\t      &lt;!DOCTYPE html SYSTEM &quot;about:legacy-compat&quot;&gt;      &lt;html xmlns=&quot;<a href=\"http://www.w3.org/1999/xhtml\" rel=\"nofollow noreferrer\">w3.org/1999/xhtml</a>&quot; lang=&quot;en&quot; xml:lang=  Also, how can I redirect each result into its own separate file? I tried: <code>for i in *; do perl script.pl $i $i.txt; done</code> and it gives me the same result."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1493678478, "creation_date": 1493678478, "answer_id": 43727524, "question_id": 43726899, "link": "https://stackoverflow.com/questions/43726899/using-a-perl-script-to-loop-through-files-in-directory/43727524#43727524", "title": "Using a perl script to loop through files in directory", "body": "<p>Your <code>for</code> loop <code>foreach $file (@files) { ... }</code>executes the following block repeatedly, setting <code>$file</code> to each file name in turn. But inside the loop you try to pass <em>all</em> of the files at once, using the parameter <code>'file' =&gt; [@files]</code></p>\n\n<p>LWP treats that list as a file path, a file name, and a number of header names and values, so the data uploaded always comes from the first file in <code>@files</code></p>\n\n<p>The quick solution is to to replace that line with <code>file =&gt; [ $file ]</code> and then it should work, but there are a few other issues with you code so I've written this refactoring</p>\n\n<p>I'm not in a position to test this at present, but it does compile</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse LWP::UserAgent;\n\nmy @files = glob '*.txt'; # Files containg list of UniProt IDs.\n\nmy $base    = 'http://www.uniprot.org';\nmy $tool    = 'uploadlists';\nmy $contact = ''; # Please set your email address here\n                  # to help us debug in case of problems.\n\nmy $agent = LWP::UserAgent-&gt;new(agent =&gt; \"libwww-perl $contact\");\npush @{$agent-&gt;requests_redirectable}, 'POST';\n\nfor my $file ( @files ) {\n\n    my $response = $agent-&gt;post(\n        \"$base/$tool/\",\n        Content_Type =&gt; 'form-data',\n        Content      =&gt; [\n            file     =&gt; [ $file ],\n            format   =&gt; 'tab',\n            from     =&gt; 'ACC+ID',\n            to       =&gt; 'ACC',\n            columns  =&gt; 'id,database(ko)',\n        ],\n    );\n\n    while ( my $wait = $response-&gt;header('Retry-After') ) {\n        print STDERR \"Waiting ($wait)...\\n\";\n        sleep $wait;\n        $response = $agent-&gt;get($response-&gt;base);\n    }\n\n    if ( $response-&gt;is_success ) {\n        print $response-&gt;content;\n    }\n    else {\n        die sprintf \"Failed. Got %s for %s\\n\",\n            $response-&gt;request-&gt;uri,\n            $response-&gt;status_line;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 7504055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SEZWU.jpg?s=128&g=1", "display_name": "Purrsia", "link": "https://stackoverflow.com/users/7504055/purrsia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1425, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493678478, "creation_date": 1493674555, "last_edit_date": 1495541883, "question_id": 43726899, "link": "https://stackoverflow.com/questions/43726899/using-a-perl-script-to-loop-through-files-in-directory", "title": "Using a perl script to loop through files in directory", "body": "<p>I have a directory filled with several thousand .txt files. I need to run the same perl script on each .txt file and when it's done running the script on each .txt file, to name that file a unique name. Please forgive the basic inquiry as I am learning perl with this script for the first time.</p>\n\n<p>I have seen other posts addressing this issue: <a href=\"https://stackoverflow.com/questions/2149368/how-can-i-loop-through-files-in-a-directory-in-perl\">How can I loop through files in a directory in Perl?</a> and running loops through terminal: <a href=\"https://superuser.com/questions/660132/take-all-files-in-dir-and-for-each-file-do-the-same-perl-procedure/660138#660138\">Take all files in dir and for each file do the same perl procedure.</a> </p>\n\n<p>A bit about my data: These are blastx subject sequence ID results </p>\n\n<pre><code>$head file1.txt\nGCN2_SCHPO\nGCN2_YEAST\nGCN20_YEAST\nGCNK_GLUOX\n\n$head file2.txt\nPDXA_RUEST\nPDXA_SULSY\nPDXA_SYNFM\nPDXA_SYNY3\n</code></pre>\n\n<p>My perl script- uses Uniprot's Retrieve/ID mapping service programmatically, instead of putting in thousands of requests, manually (<a href=\"http://www.uniprot.org/uploadlists/\" rel=\"nofollow noreferrer\">Retrieve/ID mapping</a>):  </p>\n\n<pre><code>use warnings;\nuse LWP::UserAgent;\n\n@files = &lt;*.txt&gt;; # File containg list of UniProt IDs.\n\nmy $base = 'http://www.uniprot.org';\nmy $tool = 'uploadlists';\n\nmy $contact = ''; # Please set your email address here to help us debug in     \ncase of problems.\nmy $agent = LWP::UserAgent-&gt;new(agent =&gt; \"libwww-perl $contact\");\npush @{$agent-&gt;requests_redirectable}, 'POST';\n\nforeach $file (@files) {\nmy $response = $agent-&gt;post(\"$base/$tool/\",\n  [ 'file' =&gt; [@files],\n    'format' =&gt; 'tab',\n    'from' =&gt; 'ACC+ID',\n    'to' =&gt; 'ACC',\n    'columns' =&gt; 'id,database(ko)',\n  ],\n  'Content_Type' =&gt; 'form-data');\n\nwhile (my $wait = $response-&gt;header('Retry-After')) {\n  print STDERR \"Waiting ($wait)...\\n\";\n    sleep $wait;\n      $response = $agent-&gt;get($response-&gt;base);\n\n}\n\n$response-&gt;is_success ?\nprint $response-&gt;content :\ndie 'Failed, got ' . $response-&gt;status_line .\n    ' for ' . $response-&gt;request-&gt;uri . \"\\n\";\nprint $file . \"\\n\";\n}\n</code></pre>\n\n<p>This script, instead of looping through each .txt file only grabs the first .txt file in my directory and performs this function over and over again on that one file only. However, at the end, it prints the correct file name. Here is an example output: </p>\n\n<pre><code>Entry   Cross-reference (ko) yourlist:M20170501A isomap:M201705\nQ9HGN1  K16196; GCN2_SCHPO  \nP15442  K16196; GCN2_YEAST  \nP43535  K06158; GCN20_YEAST \nQ5FQ97  K00851; GCNK_GLUOX\nfile1.txt\n\nEntry   Cross-reference (ko) yourlist:M20170501A isomap:M201705\nQ9HGN1  K16196; GCN2_SCHPO  \nP15442  K16196; GCN2_YEAST  \nP43535  K06158; GCN20_YEAST \nQ5FQ97  K00851; GCNK_GLUOX\nfile2.txt \n</code></pre>\n\n<p>I have tried to do this via terminal with the following loop as well: </p>\n\n<p><code>for i in *; do perl script.pl $i $i.txt; done</code></p>\n\n<p>and I get the same results. </p>\n\n<p>I am missing something very simple and am asking for your wisdom on understanding why this loop is being loopy. Secondly, is there a way to code this (in the script or via terminal) to name each result of each .txt file differently?  </p>\n\n<p>Thank-you!</p>\n"}, {"tags": ["perl", "log4perl"], "comments": [{"owner": {"reputation": 119277, "user_id": 119280, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a7efd5c795e9797c30fce4126daaa9c0?s=128&d=identicon&r=PG&f=1", "display_name": "DVK", "link": "https://stackoverflow.com/users/119280/dvk"}, "edited": false, "score": 0, "creation_date": 1493674180, "post_id": 43726796, "comment_id": 74497329, "body": "Additionally, the messages don&#39;t have specific patterns, so using custom filters with a regex wouldn&#39;t work as far as I can see."}], "answers": [{"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 4, "last_activity_date": 1493685174, "creation_date": 1493685174, "answer_id": 43728374, "question_id": 43726796, "link": "https://stackoverflow.com/questions/43726796/how-can-i-log-to-two-different-files-in-log4perl/43728374#43728374", "title": "How can I log to two different files in Log4perl?", "body": "<p><a href=\"https://metacpan.org/pod/Log::Log4perl#Categories\" rel=\"nofollow noreferrer\">Categories</a> in Log4perl are arbitrary and aren't related to the class hierarchy of your application. </p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Log::Log4perl qw(get_logger);\n\nmy $conf = q(\nlog4perl.category.first  = DEBUG, FileAppender1\nlog4perl.category.second = DEBUG, FileAppender2\n\nlog4perl.appender.FileAppender1          = Log::Log4perl::Appender::File\nlog4perl.appender.FileAppender1.filename = first.log\nlog4perl.appender.FileAppender1.layout   = Log::Log4perl::Layout::SimpleLayout\n\nlog4perl.appender.FileAppender2          = Log::Log4perl::Appender::File\nlog4perl.appender.FileAppender2.filename = second.log\nlog4perl.appender.FileAppender2.layout   = Log::Log4perl::Layout::SimpleLayout\n);\n\nLog::Log4perl::init(\\$conf);\n\nmy $logger1 = get_logger('first');\nmy $logger2 = get_logger('second');\n\n$logger1-&gt;debug('foo');\n$logger2-&gt;info('bar');\n$logger1-&gt;error('baz');\n</code></pre>\n\n<p>first.log</p>\n\n<pre><code>DEBUG - foo\nERROR - baz\n</code></pre>\n\n<p>second.log</p>\n\n<pre><code>INFO - bar\n</code></pre>\n"}], "owner": {"reputation": 119277, "user_id": 119280, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a7efd5c795e9797c30fce4126daaa9c0?s=128&d=identicon&r=PG&f=1", "display_name": "DVK", "link": "https://stackoverflow.com/users/119280/dvk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 784, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1493685174, "creation_date": 1493674118, "question_id": 43726796, "link": "https://stackoverflow.com/questions/43726796/how-can-i-log-to-two-different-files-in-log4perl", "title": "How can I log to two different files in Log4perl?", "body": "<p>I have a Perl script that produces two different streams of data.</p>\n\n<p>I need to log them to two separate log files.</p>\n\n<p>I'm aware of 2 approaches that result in different log files but neither one seems helpful in my situation:</p>\n\n<ol>\n<li><p>Using categories (which are Perl module names). </p>\n\n<p>In my case, the streams are both produced in the same code (\"main\" package, but that's irrelevant, what matters is that literally I have lines of code next to each other logging to 2 locations that can't be separated into different Perl modules).</p></li>\n<li><p>Using different loglevels.</p>\n\n<p>However, both should log with the same priority (e.g. both are logging <code>info()</code> calls and <code>error()</code> as appropriate) so I can't use the FAQ recipe for <a href=\"http://log4perl.sourceforge.net/releases/Log-Log4perl/docs/html/Log/Log4perl/FAQ.html#c7fa8\" rel=\"noreferrer\">logging WARN/ERROR to different files</a>.</p></li>\n</ol>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 191, "user_id": 766238, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ErS2l.png?s=128&g=1", "display_name": "aldem", "link": "https://stackoverflow.com/users/766238/aldem"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1493672281, "post_id": 43726299, "comment_id": 74496537, "body": "To be honest, I doubt so - using () around every ternary operator, like &quot;(/one (\\S+)/ ? (one =&gt; $1) : ())&quot; does not change a thing - it still takes the last expression..."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1493683528, "post_id": 43726299, "comment_id": 74500103, "body": "the same underlying cause does not make this a duplicate question"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1493684718, "post_id": 43726299, "comment_id": 74500378, "body": "But the fact that the answer is the same does, according to history. Closing a question doesn&#39;t prevent it from being found in searches; it prevents duplicate answers."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493731103, "post_id": 43726299, "comment_id": 74520732, "body": "@aldem, The other answer mentions that no subs are involved, giving <code>my @b = ($a, ++$a, $a++, $a);</code> as an example."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1493731250, "post_id": 43726299, "comment_id": 74520846, "body": "@H&#229;kon H&#230;gland, Done."}, {"owner": {"reputation": 191, "user_id": 766238, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ErS2l.png?s=128&g=1", "display_name": "aldem", "link": "https://stackoverflow.com/users/766238/aldem"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493744899, "post_id": 43726299, "comment_id": 74529934, "body": "@ikegami I see your reasoning, though the other question may not be of immediate help for someone who is looking for similar issue. While I was searching for a cause, I knew that it was definitely not related to compilation/evaluation order nor post/infix operators - so I simply could not find it. Anyway, as long as the question is searchable, I hope it will be helpful to someone."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493745980, "post_id": 43726299, "comment_id": 74530518, "body": "@aldem, I&#39;ve already added the missing bits to the other answer."}], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 766238, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ErS2l.png?s=128&g=1", "display_name": "aldem", "link": "https://stackoverflow.com/users/766238/aldem"}, "edited": false, "score": 0, "creation_date": 1493673683, "post_id": 43726622, "comment_id": 74497115, "body": "Thank you - that was it! How could I forget that I am dealing with a reference here... :("}, {"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1493683870, "post_id": 43726622, "comment_id": 74500196, "body": "Could you not just do <code>my @tt =  &#47;(one|two|three) (\\S+)&#47;;</code> ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1493730945, "post_id": 43726622, "comment_id": 74520610, "body": "@Mark Reed, Maybe. The output would be different for <code>three 3 two 2 one 1</code>."}, {"owner": {"reputation": 191, "user_id": 766238, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ErS2l.png?s=128&g=1", "display_name": "aldem", "link": "https://stackoverflow.com/users/766238/aldem"}, "reply_to_user": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1493744550, "post_id": 43726622, "comment_id": 74529763, "body": "@MarkReed Not really - one reason is mentioned by ikegami and my reason is that real code is a bit more complicated, like <code>my @tt = (&#47;one (\\S)&#47; ? foo($1) : &quot;&quot;, &#47;two (\\S)&#47; ? bar($1) : &quot;&quot;)</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 191, "user_id": 766238, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ErS2l.png?s=128&g=1", "display_name": "aldem", "link": "https://stackoverflow.com/users/766238/aldem"}, "edited": false, "score": 0, "creation_date": 1493744904, "post_id": 43726622, "comment_id": 74529940, "body": "@aldem, If that&#39;s your code, you shouldn&#39;t have had any problems."}, {"owner": {"reputation": 191, "user_id": 766238, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ErS2l.png?s=128&g=1", "display_name": "aldem", "link": "https://stackoverflow.com/users/766238/aldem"}, "edited": false, "score": 0, "creation_date": 1493747986, "post_id": 43726622, "comment_id": 74531556, "body": "@ikegami Well, it was even <i>more</i> complicated :) In some cases there were function calls, but in some just expressions referring to $1 directly - that&#39;s why it puzzled me a lot - part of values were OK, while others were duplicates of the last one, so I reduced my sample to fragments which actually produced wrong results."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1493732165, "last_edit_date": 1495541886, "creation_date": 1493673231, "answer_id": 43726622, "question_id": 43726299, "link": "https://stackoverflow.com/questions/43726299/strange-behavior-of-regex-matches-in-list/43726622#43726622", "title": "Strange behavior of regex matches in list", "body": "<p>The answer to <a href=\"https://stackoverflow.com/questions/16570415/compilation-order-and-post-prefix-opertors\">compilation order and post prefix opertors</a> also answers your question. What follows is a summary.</p>\n\n<hr>\n\n<p>Generally speaking, avoid situations where you both set and read a variable within an expression<sup>[1]</sup>.</p>\n\n<p>Your code does the following:</p>\n\n<ol>\n<li>You set <code>$1</code>.</li>\n<li>You place a string and <code>$1</code> on the stack. (Not a copy of <code>$1</code>!)</li>\n<li>You set <code>$1</code>.</li>\n<li>You place a string and <code>$1</code> on the stack.</li>\n<li>You set <code>$1</code>.</li>\n<li>You place a string and <code>$1</code> on the stack.</li>\n<li>You copy the contents of the stack (string, <code>$1</code>, string, <code>$1</code>, string, <code>$1</code>) into <code>@tt</code>. <code>$1</code> is <code>3</code> at this point.</li>\n</ol>\n\n<p>You can work around this by using <code>\"$1\"</code> instead of <code>$1</code>, since <code>\"$1\"</code> builds a new string from <code>$1</code>.</p>\n\n<hr>\n\n<ol>\n<li>That said, <code>my $x = /(foo|bar)/ ? $1 : 'default';</code> would not have given you any problems.</li>\n</ol>\n"}], "owner": {"reputation": 191, "user_id": 766238, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ErS2l.png?s=128&g=1", "display_name": "aldem", "link": "https://stackoverflow.com/users/766238/aldem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 43726622, "answer_count": 1, "score": 1, "last_activity_date": 1493834319, "creation_date": 1493671622, "last_edit_date": 1495542859, "question_id": 43726299, "link": "https://stackoverflow.com/questions/43726299/strange-behavior-of-regex-matches-in-list", "title": "Strange behavior of regex matches in list", "body": "<p>I have experienced strange behavior of using Regex captures for assignment of list elements - which puzzles me a lot, and I could not find an explanation anywhere in the documentation and other places. The code that I use is like this:</p>\n\n<pre><code>$_ = \"one 1 two 2 three 3\";\nmy $n = 1;\nmy @tt = (\n    /one (\\S+)/ ? (one =&gt; $1) : (),\n    /two (\\S+)/ ? (two =&gt; $1) : (),\n    /three (\\S+)/ ? (three =&gt; $1) : (),\n);\nprint \"Array: \" . join(\" \", @tt) . \"\\n\";\n</code></pre>\n\n<p>Which prints, surprisingly:</p>\n\n<pre><code>Array: one 3 two 3 three 3\n</code></pre>\n\n<p>while I expect that it will print:</p>\n\n<pre><code>Array: one 1 two 2 three 3\n</code></pre>\n\n<p>So, when I use <code>//</code> and <code>?:</code> within a list assignment, I always get captures from the last(!) matching expression - be it <code>$1</code> or <code>$&amp;</code> or anything else that refers to captures.</p>\n\n<p>When I surround each <code>?:</code> with <code>do {}</code>, everything works as expected, though.</p>\n\n<p>My question is - what I am doing wrong? Is it a bug or some well known (or hidden) feature/behavior that I am not aware of?</p>\n\n<p>Thank you!</p>\n\n<p>PS: If this matters - I use standard perl 5.22.1 on Ubuntu 16.04.2, though the behavior is the same on Perl 5.8.8 and 5.24.1</p>\n\n<p>EDIT: Though the reason for this behavior is the same as in this question -\n <a href=\"https://stackoverflow.com/questions/16570415/compilation-order-and-post-prefix-opertors\">compilation order and post prefix opertors</a> - but the context is quite different and it is not immediately obvious that questions are similar, as the previous question is about passing arguments to a sub, while in my question no subs are involved.</p>\n"}, {"tags": ["perl", "perl-module", "perl-exporter"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493662871, "post_id": 43723978, "comment_id": 74492087, "body": "This sounds like a circular definition to me. It reads as if you want to <b>1)</b> Import into <code>Local</code> the identifiers that are imported by <code>main</code> from <code>Remote</code> and <b>2)</b> Import into <code>main</code> the identifiers that are imported by <code>Local</code> from <code>Remote</code>. Is that correct? If so then it sounds like terrible design, and I think you need to give an example."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493662977, "post_id": 43723978, "comment_id": 74492136, "body": "You probably want to implement your own <code>import</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493663478, "post_id": 43723978, "comment_id": 74492419, "body": "You won&#39;t be able to use Exporter. You&#39;ll need to implement your own <code>import</code>, or maybe one of the other export management modules can help."}, {"owner": {"reputation": 1770, "user_id": 1054397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8218beaae675c36460465d04d068e69?s=128&d=identicon&r=PG", "display_name": "ardnew", "link": "https://stackoverflow.com/users/1054397/ardnew"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493664140, "post_id": 43723978, "comment_id": 74492723, "body": "@Borodin no, I&#39;m only trying to achieve your statement <b>2)</b>. but with the added requirement of making that import conditional"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493664175, "post_id": 43723978, "comment_id": 74492736, "body": "@ardnew: Conditional on what? And what was your item <b>1</b> about? Don&#39;t you need that? A well-written example really would help hugely."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493664369, "post_id": 43723978, "comment_id": 74492819, "body": "@ardnew: It really sounds like your <code>Local</code> should be a <i>class</i> that <i>subclasses</i> <code>Remote</code>. That way you don&#39;t need to worry about any imports at all, and Perl will find  the method wherever it is defined."}, {"owner": {"reputation": 1770, "user_id": 1054397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8218beaae675c36460465d04d068e69?s=128&d=identicon&r=PG", "display_name": "ardnew", "link": "https://stackoverflow.com/users/1054397/ardnew"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493664410, "post_id": 43723978, "comment_id": 74492842, "body": "@Borodin the condition being &quot;either by explicitly naming the export or by using a specific export tag&quot;. e.g. if the user writes <code>use Local qw| subRemote |;</code>, then <code>subRemote</code> (which is defined in <code>Remote</code>) should be imported and referenced as simply as <code>subRemote</code> instead of <code>Remote::subRemote</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493664671, "post_id": 43723978, "comment_id": 74492971, "body": "@ardnew: Okay, firstly you don&#39;t need to import <code>Remote::subRemote</code> into <code>Local</code> at all; the code in <code>Local</code> can import the symbol into <code>main</code> without there being a copy in the <code>Local</code> package. And, as I said, this is a case for object-oriented design, where Perl will work everything out for you. are you up for that?"}, {"owner": {"reputation": 1770, "user_id": 1054397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8218beaae675c36460465d04d068e69?s=128&d=identicon&r=PG", "display_name": "ardnew", "link": "https://stackoverflow.com/users/1054397/ardnew"}, "edited": false, "score": 0, "creation_date": 1493664846, "post_id": 43723978, "comment_id": 74493043, "body": "I suppose using inheritance is the proper design for this, I&#39;m just entirely unfamiliar with OO in perl. I want to play around with a custom <code>sub import</code> first to see if I can achieve what I&#39;m intending, sorry for the confusion"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1493666453, "post_id": 43723978, "comment_id": 74493792, "body": "To be honest, I think the best solution of all for you is to forget about polluting your namespaces! You aren&#39;t planning on having hundreds of subroutines are you?"}], "answers": [{"comments": [{"owner": {"reputation": 1770, "user_id": 1054397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8218beaae675c36460465d04d068e69?s=128&d=identicon&r=PG", "display_name": "ardnew", "link": "https://stackoverflow.com/users/1054397/ardnew"}, "edited": false, "score": 0, "creation_date": 1493666794, "post_id": 43724075, "comment_id": 74493984, "body": "this is absolutely what I was imagining in my head, and probably answers the question best, but I think I have to agree with everyone suggesting it&#39;s a bit of a silly design"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493667056, "post_id": 43724075, "comment_id": 74494119, "body": "Not at all. It&#39;s common for modules to export stuff found in other modules. It&#39;s just that go about it by importing it first. Then it becomes a trivial use of Exporter (as shown at the bottom of my answer)."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1493667324, "last_edit_date": 1493667324, "creation_date": 1493662213, "answer_id": 43724075, "question_id": 43723978, "link": "https://stackoverflow.com/questions/43723978/how-to-conditionally-import-functions-from-another-module-and-export-them-to-the/43724075#43724075", "title": "How to conditionally import functions from another module and export them to the local namespace", "body": "<p>Why would you want to import subs into Local subs that Local is asked to export? Might as well place them directly into the right module instead of Local!</p>\n\n<p>Either way, you won't be able to use (just) Exporter. There might an existing alternative to Exporter you could use. Otherwise, you'll need to write your own <code>import</code>.</p>\n\n<p>Local.pm:</p>\n\n<pre><code>package Local;\n\nuse strict;\nuse warnings;\n\nuse Carp         qw( croak );\nuse Exporter     qw( );\nuse Import::Into qw( );\nuse Remote       qw( );\n\nmy @export_ok_local  = qw( subLocal );\nmy @export_ok_remote = qw( subRemote );\nmy @export_ok_all    = ( @export_ok_local, @export_ok_remote );\n\nmy %export_tags = (\n   ':ALL'     =&gt; \\@export_ok_all,\n   ':DEFAULT' =&gt; [],\n   ':local'   =&gt; \\@export_ok_local,\n   ':remote'  =&gt; \\@export_ok_remote,\n);\n\nour @EXPORT_OK = @export_ok_local;\n\nsub import {\n   my $class = shift;\n   my $target = caller;\n\n   my @imports =\n      map {\n         !/^:/\n            ? $_\n            : !$export_tags{$_}\n               ? croak(\"\\\"$_\\\" isn't a recognized tag\")\n               : @{ $export_tags{$_} }\n      }\n         @_;\n\n   my %imports = map { $_ =&gt; 1 } @imports;\n\n   my @local  = grep { $imports{$_} } @export_ok_local;\n   my @remote = grep { $imports{$_} } @export_ok_remote;\n\n   delete @imports{ @local, @remote };\n   my @unknown = keys(%imports);\n   croak(\"Not exported by \".__PACKAGE__.\": @unknown\\n\") if @unknown;\n\n   Remote-&gt;import::into($target, @remote);\n\n   @_ = ( $class, @local );\n   goto &amp;Exporter::import;\n}\n\nsub subLocal { print(\"subLocal\\n\"); }\n\n1;\n</code></pre>\n\n<p>Remote.pm:</p>\n\n<pre><code>package Remote;\n\nuse strict;\nuse warnings;\n\nuse Exporter qw( import );\n\nour @EXPORT_OK = qw( subRemote );\n\nsub subRemote { print(\"subRemote\\n\"); }\n\n1;\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>$ perl -e'\n    use Local qw( subLocal subRemote );\n    subLocal();\n    subRemote();\n'\nsubLocal\nsubRemote\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>$ perl -e'\n    use Local qw( :ALL );\n    subLocal();\n    subRemote();\n'\nsubLocal\nsubRemote\n</code></pre>\n\n<hr>\n\n<p>It's far simpler to simply import everything you want to export.</p>\n\n<pre><code>package Local;\n\nuse strict;\nuse warnings;\n\nuse Exporter qw( import );    \n\nmy ( @EXPORT_LOCAL, @EXPORT_REMOTE );\nBEGIN {\n  @EXPORT_LOCAL  = qw| subLocal |; \n  @EXPORT_REMOTE = qw| subRemote |;\n\n  our @EXPORT_OK = ( @EXPORT_LOCAL, @EXPORT_REMOTE );\n\n  our %EXPORT_TAGS = (\n    ALL    =&gt; \\@EXPORT_OK,\n    local  =&gt; \\@EXPORT_LOCAL,\n    remote =&gt; \\@EXPORT_REMOTE,\n  );\n}\n\nuse Remote @EXPORT_REMOTE;\n\nsub subLocal { ... }\n\n1;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1770, "user_id": 1054397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8218beaae675c36460465d04d068e69?s=128&d=identicon&r=PG", "display_name": "ardnew", "link": "https://stackoverflow.com/users/1054397/ardnew"}, "edited": false, "score": 0, "creation_date": 1493663620, "post_id": 43724343, "comment_id": 74492489, "body": "and pushing it into the caller&#39;s symbol table is done exactly how I&#39;m currently doing it (i.e. <code>*subRemote  = \\&amp;Remote::subRemote;</code>) ?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1770, "user_id": 1054397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8218beaae675c36460465d04d068e69?s=128&d=identicon&r=PG", "display_name": "ardnew", "link": "https://stackoverflow.com/users/1054397/ardnew"}, "edited": false, "score": 0, "creation_date": 1493663686, "post_id": 43724343, "comment_id": 74492513, "body": "@ardnew  Well, right -- but when you write your own <code>import</code> then you can do that <i>conditionally</i>.  Is that what you want?  Completed that statement in the answer.  Btw, you aren&#39;t exporting into the <i>caller</i>&#39;s namespace.."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1770, "user_id": 1054397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8218beaae675c36460465d04d068e69?s=128&d=identicon&r=PG", "display_name": "ardnew", "link": "https://stackoverflow.com/users/1054397/ardnew"}, "edited": false, "score": 0, "creation_date": 1493663748, "post_id": 43724343, "comment_id": 74492540, "body": "@ardnew, No, that imports into the active namespace. It doesn&#39;t export into the caller&#39;s namespace. Besides, who do you think BEGIN&#39;s caller is?!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493663780, "post_id": 43724343, "comment_id": 74492561, "body": "<i>&quot;the caller of Local can require subRemote in its import list, but if it doesn&#39;t that the symbol then isn&#39;t pushed into the caller&#39;s namespace&quot;</i> That sounds like the ordinary behaviour of <code>use</code> to me."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1770, "user_id": 1054397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8218beaae675c36460465d04d068e69?s=128&d=identicon&r=PG", "display_name": "ardnew", "link": "https://stackoverflow.com/users/1054397/ardnew"}, "edited": false, "score": 1, "creation_date": 1493663953, "post_id": 43724343, "comment_id": 74492643, "body": "@ardnew: I wish you&#39;d explain a little more. Everybody&#39;s guessing what you mean. It&#39;s beginning to sound like all you need is <a href=\"http://search.cpan.org/~toddr/Exporter-5.72/lib/Exporter.pm#Exporting_Without_Using_Exporter%27s_import_Method\" rel=\"nofollow noreferrer\"><code>export_to_level</code></a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493664024, "post_id": 43724343, "comment_id": 74492680, "body": "@Borodin  Ugh, right, thank you.  I mean really to say that they need to implement their own <code>import</code> -- but I am not sure of what is needed in the question. (Ammended that sentence)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493664120, "post_id": 43724343, "comment_id": 74492717, "body": "Are you thinking that the OP wants to import <code>Remote::subRemote</code> by writing <code>use Local &#39;subRemote&#39;</code>? I&#39;m still baffled."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493664234, "post_id": 43724343, "comment_id": 74492764, "body": "@Borodin  That&#39;s my first quess, yes.  I am also thinking that they have in mind some other conditions, for which they need their own <code>import</code>. Perhaps not load from <code>Remote::</code> if not required by <code>main::</code>?  I am hoping for a clarification.."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493664309, "post_id": 43724343, "comment_id": 74492792, "body": "@zdim: Yeah, I suspect they&#39;re thinking that <code>Remote::subRemote</code> has to be imported as <code>Local::subRemote</code> before it can be imported again into <code>main</code>. Okay, then that&#39;s how object-oriented inheritance works. The OP should do it that way instead!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493665277, "post_id": 43724343, "comment_id": 74493242, "body": "@Borodin  Right, that&#39;d be a nice solutuion.  With my current understanding of the requirement, the import-way is simple as well, updated"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493665904, "post_id": 43724343, "comment_id": 74493532, "body": "@zdim: I think it&#39;s less simple to write. You have to check whether something in the import list is in <code>@Remote::EXPORT</code>, <code>@Remote::EXPORT_OK</code>, or <code>%Remote::EXPORT_TAGS</code>, and do the right thing in each case, handling collisions and symbols that aren&#39;t defined anywhere."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493666225, "post_id": 43724343, "comment_id": 74493682, "body": "@Borodin  I do agree with that.  Just don&#39;t know whether they are up for inheritance &amp; Co."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493666307, "post_id": 43724343, "comment_id": 74493721, "body": "@zdim:  I think ikegami&#39;s solution proves my point! And I think the object-oriented route could be very simple as there&#39;s no need for any data in the object."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1770, "user_id": 1054397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8218beaae675c36460465d04d068e69?s=128&d=identicon&r=PG", "display_name": "ardnew", "link": "https://stackoverflow.com/users/1054397/ardnew"}, "edited": false, "score": 1, "creation_date": 1493666572, "post_id": 43724343, "comment_id": 74493859, "body": "@ardnew  I updated the answer to more precisely state what I now think you need."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1770, "user_id": 1054397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8218beaae675c36460465d04d068e69?s=128&d=identicon&r=PG", "display_name": "ardnew", "link": "https://stackoverflow.com/users/1054397/ardnew"}, "edited": false, "score": 1, "creation_date": 1493705302, "post_id": 43724343, "comment_id": 74505400, "body": "@ardnew  You got really nice answers, but I realize that I misread your first comment, of how to write to caller&#39;s symbol table.  There is far, far more to do than just this line, but the basics:  <code>my $to_caller = caller() . &#39;::subRemote&#39;; *{ $to_caller } = \\&amp;Remote::subRemote;</code>.  The RHS takes a reference to the sub, the LHS is the slot in the glob where it&#39;s written. If called from <code>main::</code> the LHS works out as <code>*main::subRemote = \\&amp;Remote::subRemote;</code>, but you need <code>caller</code> to be able to find that dynamically, and thus need the <code>{}</code> etc.  Again, just for completeness.."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1598583645, "last_edit_date": 1598583645, "creation_date": 1493663313, "answer_id": 43724343, "question_id": 43723978, "link": "https://stackoverflow.com/questions/43723978/how-to-conditionally-import-functions-from-another-module-and-export-them-to-the/43724343#43724343", "title": "How to conditionally import functions from another module and export them to the local namespace", "body": "<p>I take the question to be: That the caller of <code>Local</code> can require <code>subRemote</code> in its import list, but if it doesn't then the symbol isn't pushed into the caller's namespace.</p>\n<p>I also assume that <code>Local</code> should not import from <code>Remote</code> at all unless the caller of <code>Local</code> requires some of <code>Remote</code>'s subs in its import list.</p>\n<p>Then write your own <code>sub import</code>.  The list supplied by the caller are arguments passed to <code>import</code>, following the first argument which is <code>__PACKAGE__</code> (in this case <code>Local</code>).</p>\n<p>Then in your <code>import</code> you can check whether <code>subRemote</code> is asked for. If it is, <code>require</code> the package where it is defined and push its sub's full name to the caller's symbol table, otherwise not. You can establish and check any other conditions you may need.</p>\n<p>This way <code>Local</code> loads <code>Remote</code> only if the caller of <code>Local</code> requires a sub from <code>Remote</code>.</p>\n<hr />\n<p>An example for the above description</p>\n<p><strong>Local.pm</strong></p>\n<pre><code>package Local;\n\nuse warnings;\nuse strict;\nuse Exporter qw();\n\nour @EXPORT_OK = qw(subLocal subRemote);\n\nsub import {\n    my $class = shift;\n\n    my $re = qr/^(?:subRemote|other)/;\n    my @local_exports  = grep { !/$re/ } @_;\n    my @remote_exports = grep {  /$re/ } @_;   # check both\n\n    if (@remote_exports) {   \n        no strict 'refs';\n        require Remote;\n        foreach my $export (@remote_exports) \n        {   \n            my $to_caller = caller() . '::' . $export;\n\n            *{ $to_caller } = \\&amp;{ 'Remote::' . $export };\n        }   \n    }   \n\n    @_ = ($class, @local_exports);  # set up @_ for goto\n    goto &amp;Exporter::import;         # switch to Exporter::import\n}\n\nsub subLocal {  print &quot;subLocal() in &quot;, __PACKAGE__, &quot;\\n&quot; }\n\n1;\n</code></pre>\n<p>The references to subs from <code>Remote</code> that are asked for are written to the caller's symbol table. Then our <code>import</code> is swapped by <code>Exporter::import</code> for exporting the rest of the symbols, from <code>Local</code>. For a note on goto <a href=\"https://stackoverflow.com/a/40714498/4653379\">see this</a> for example. A few things are left out, firstly checks of received import lists.</p>\n<p>There are no surprises with <code>main</code> and <code>Remote</code></p>\n<p><strong>main.pl</strong></p>\n<pre><code>use warnings;\nuse strict;\nuse Local qw(subLocal subRemote);\n\nsubLocal();\nsubRemote();\n</code></pre>\n<p><strong>Remote.pm</strong></p>\n<pre><code>package Remote;   \nuse warnings;\nuse strict;\nuse Exporter qw(import);\n\nour @EXPORT_OK = qw(subRemote);\n\nsub subRemote { print &quot;subRemote() in &quot;, __PACKAGE__, &quot;\\n&quot; }\n</code></pre>\n<p>with the output</p>\n<pre>\nsubLocal() in Local\nsubRemote() in Remote\n</pre>\n<p>This accomplishes what is asked but it has to deal with rather specific details.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1493665626, "last_edit_date": 1493665626, "creation_date": 1493665037, "answer_id": 43724771, "question_id": 43723978, "link": "https://stackoverflow.com/questions/43723978/how-to-conditionally-import-functions-from-another-module-and-export-them-to-the/43724771#43724771", "title": "How to conditionally import functions from another module and export them to the local namespace", "body": "<p>To be honest I think that the confusion you will create by messing with <code>import</code> is probably more of a problem than the namespace pollution in the first place, which is only an issue if you choose identifiers that clash with the imported ones</p>\n\n<p>Here's an example using object-oriented design, which doesn't use <code>import</code> at all and there is zero namespace pollution. You don't even have to say in the main program which methods you will use</p>\n\n<h3>Remote.pm</h3>\n\n<pre><code>use 5.010;\n\npackage Remote;\n\nsub new {\n    my $class = shift;\n\n    my $self = bless {}, $class;\n}\n\nsub subRemote {\n    say \"I am subRemote\";\n}\n\n1;\n</code></pre>\n\n<h3>Local.pm</h3>\n\n<pre><code>use 5.010;\n\npackage Local;\n\nuse base 'Remote';\n\nsub new {\n  my $class = shift;\n\n  my $self = $class-&gt;SUPER::new(@_);\n}\n\nsub subLocal {\n    say \"I am subLocal\";\n}\n\n1;\n</code></pre>\n\n<h3>main.pl</h3>\n\n<pre><code>use 5.010;\n\nuse Local;\n\nmy $obj = Local-&gt;new;\n\n$obj-&gt;subLocal;\n$obj-&gt;subRemote;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>I am subLocal\nI am subRemote\n</code></pre>\n"}], "owner": {"reputation": 1770, "user_id": 1054397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8218beaae675c36460465d04d068e69?s=128&d=identicon&r=PG", "display_name": "ardnew", "link": "https://stackoverflow.com/users/1054397/ardnew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 2, "accepted_answer_id": 43724075, "answer_count": 3, "score": 2, "last_activity_date": 1598583645, "creation_date": 1493661784, "question_id": 43723978, "link": "https://stackoverflow.com/questions/43723978/how-to-conditionally-import-functions-from-another-module-and-export-them-to-the", "title": "How to conditionally import functions from another module and export them to the local namespace", "body": "<p>Assume I have a module named <code>Local</code> that exports a subroutine <code>subLocal</code> via the <code>%EXPORT_TAGS</code> interface. </p>\n\n<p>This module is closely related to another module named <code>Remote</code> that defines subroutines the user of <code>Local</code> might want to import.</p>\n\n<p>There are two requirements I would like to have:</p>\n\n<ol>\n<li><p>Module <code>Local</code> should import the subroutines defined in <code>Remote</code> only if the user of module <code>Local</code> is importing a subroutine defined in <code>Remote</code> (either by explicitly naming the export or by using a specific export tag)</p></li>\n<li><p>When a subroutine from <code>Remote</code> is imported into <code>Local</code>, the user of module <code>Local</code> should be able to refer to that subroutine as if it is in his local namespace (the same behavior you would get when referring to a subroutine defined in <code>Local</code>).</p></li>\n</ol>\n\n<p>I've only found a (hacky) solution for req. 2 by adding an entry in the symbol table, but this <strong>always</strong> occurs -- regardless if the user of <code>Local</code> actually needs the subroutines in <code>Remote</code>. According to perldoc, this pointlessly \"pollutes\" the namespace.</p>\n\n<p>So at what point during compilation or runtime should I be trying to import the subroutines from <code>Remote</code>? And how do I actually import them in such a way that they appear in the local namespace?</p>\n\n<p>This is my current approach. Module <code>Local</code>:</p>\n\n<pre><code>package Local;\n\nuse strict;\nuse warnings;\n\nBEGIN\n{\n  require Exporter;\n\n  our @ISA = qw| Exporter |;\n\n  our @EXPORT_LOCAL  = qw| subLocal |; \n  our @EXPORT_REMOTE = qw| subRemote |;\n\n  our @EXPORT_OK   = ( @EXPORT_LOCAL, @EXPORT_REMOTE );\n  our %EXPORT_TAGS = \n    ( all =&gt; \\@EXPORT_OK, local =&gt; \\@EXPORT_LOCAL, remote =&gt; \\@EXPORT_REMOTE );\n\n  *subRemote  = \\&amp;Remote::subRemote; # &lt;-- can I do this conditionally somewhere? \n                                     # &lt;-- and is there a better way to put this function in the user's local namespace?\n}\n\nuse Remote; # &lt;-- can I do this conditionally somewhere?\n\nsub subLocal { return \"(local)\" }\n\n1;\n</code></pre>\n\n<p>And module <code>Remote</code>:</p>\n\n<pre><code>package Remote;\n\nuse strict;\nuse warnings;\n\nBEGIN\n{\n  require Exporter;\n\n  our @ISA = qw| Exporter |;\n\n  our @EXPORT_REMOTE = qw| subRemote |;\n\n  our @EXPORT_OK   = ( @EXPORT_REMOTE );\n  our %EXPORT_TAGS = \n    ( all =&gt; \\@EXPORT_OK, remote =&gt; \\@EXPORT_REMOTE );\n}\n\nsub subRemote { return \"(remote)\" }\n\n1;\n</code></pre>\n"}, {"tags": ["perl", "file", "http", "out-of-memory", "cgi"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493666492, "post_id": 43722670, "comment_id": 74493817, "body": "This question is closely related to <a href=\"https://stackoverflow.com/q/10563275/100754\">Why is my image download CGI script written in Perl not working?</a> in that the code in both seem to have been copied from the same crappy tutorial site. See also my blog post <a href=\"https://www.nu42.com/2012/05/file-download-cgi-script-in-perl.html\" rel=\"nofollow noreferrer\">A file download CGI script in Perl</a> which I wrote in response to that question. The two questions are not exact duplicates because they are failing for different reasons."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493666695, "post_id": 43722670, "comment_id": 74493922, "body": "<b>&quot;why is &quot;binmode&quot; specified at the end?&quot;</b> ... Because someone who did not know what they were doing copied code from a tutorial written by someone else who did not know what they were doing either. In fact, since the actual file handle is <code>DLFILE</code>, <code>binmode</code>ing <code>$DLFILE</code> is not going to do anything anyway, no matter where it&#39;s placed. Its only purpose in life is to indicate that the incompetent person who wrote the script did not <code>use strict</code>."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493666918, "post_id": 43722670, "comment_id": 74494055, "body": "This <i>stupid</i> 14 year old script: <code>https:&#47;&#47;www.sitepoint.com&#47;file-download-script-perl&#47;</code>"}, {"owner": {"reputation": 259, "user_id": 1257259, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/744ca01142ae95c73b605425164fcd72?s=128&d=identicon&r=PG", "display_name": "Denis BUCHER", "link": "https://stackoverflow.com/users/1257259/denis-bucher"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493672274, "post_id": 43722670, "comment_id": 74496529, "body": "Thank you everyone for your comments. By the way, I don&#39;t understand why my question is marked &quot;-1&quot; ? In what way is it &quot;unclear&quot; or &quot;not useful&quot; ?"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1493657853, "post_id": 43722896, "comment_id": 74489542, "body": "1. Binary files don&#39;t have lines. Best to set <code>$&#47;</code> to <code>\\(64*1024)</code> or something. 2. The solution to the misuse of <code>binmode</code> is to use it properly, not eliminate it. Either add <code>binmode($fh);</code>, or use <code>&lt;:raw</code> instead of <code>&lt;</code>."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 3, "last_activity_date": 1493657296, "creation_date": 1493657296, "answer_id": 43722896, "question_id": 43722670, "link": "https://stackoverflow.com/questions/43722670/out-of-memory-when-serving-a-very-big-binary-file-over-http/43722896#43722896", "title": "Out of memory when serving a very big binary file over HTTP", "body": "<p>You're pulling the entire file at once into memory. Best to loop over the file line-by-line, which eliminates this problem.</p>\n\n<p>Note also that I've modified the code to use the proper 3-arg <a href=\"https://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">open</a>, and to use a lexical file handle instead of a global bareword one.</p>\n\n<pre><code>open my $fh, '&lt;', $files_location or die $!;\n\nprint \"Content-Type:application/x-download\\n\";\nprint \"Content-Disposition:attachment;filename=$name\\n\\n\";\n\nwhile (my $line = &lt;$fh&gt;){\n    print $line;\n}\n</code></pre>\n\n<p>The <code>binmode</code> call appears to be useless in the context of what you've shown here, as <code>$DLFILE</code> doesn't appear to be a valid, in-use variable (add <code>use strict;</code> and <code>use warnings;</code> at the top of your script...)</p>\n"}, {"comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 3, "creation_date": 1493664171, "post_id": 43723115, "comment_id": 74492732, "body": "While the answer is true, anyone who looks for such solution here (e.g. beginners)  <i>will not</i> understand what exactly does the <code>local $&#47; = \\( 8 * 1024 );</code> (especially the <code>\\(</code> part). Some short explanation would be nice. (just IMHO)."}, {"owner": {"reputation": 259, "user_id": 1257259, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/744ca01142ae95c73b605425164fcd72?s=128&d=identicon&r=PG", "display_name": "Denis BUCHER", "link": "https://stackoverflow.com/users/1257259/denis-bucher"}, "edited": false, "score": 0, "creation_date": 1493672555, "post_id": 43723115, "comment_id": 74496641, "body": "Dear Borodin, thanks a lot for your answer. I made it a little different but I think it is the same finally ? I did : while (read($fh, my $buf, 64*1024)) { print $buf; }"}, {"owner": {"reputation": 259, "user_id": 1257259, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/744ca01142ae95c73b605425164fcd72?s=128&d=identicon&r=PG", "display_name": "Denis BUCHER", "link": "https://stackoverflow.com/users/1257259/denis-bucher"}, "edited": false, "score": 0, "creation_date": 1493672641, "post_id": 43723115, "comment_id": 74496682, "body": "P. S. Another improvement for anyone reading this : my $filesize = -s $files_location; print &quot;Content-Length: $filesize\\n&quot;;"}, {"owner": {"reputation": 259, "user_id": 1257259, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/744ca01142ae95c73b605425164fcd72?s=128&d=identicon&r=PG", "display_name": "Denis BUCHER", "link": "https://stackoverflow.com/users/1257259/denis-bucher"}, "edited": false, "score": 0, "creation_date": 1493673047, "post_id": 43723115, "comment_id": 74496854, "body": "@Borodin: OK finally I used your method, which is more compact indeed ;-)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 259, "user_id": 1257259, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/744ca01142ae95c73b605425164fcd72?s=128&d=identicon&r=PG", "display_name": "Denis BUCHER", "link": "https://stackoverflow.com/users/1257259/denis-bucher"}, "edited": false, "score": 0, "creation_date": 1493673062, "post_id": 43723115, "comment_id": 74496862, "body": "@DenisBUCHER: You can use <code>read</code> if you wish, but that does exactly the same as my own code (except that it uses 64K instead of 8K) using a lot more characters."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 259, "user_id": 1257259, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/744ca01142ae95c73b605425164fcd72?s=128&d=identicon&r=PG", "display_name": "Denis BUCHER", "link": "https://stackoverflow.com/users/1257259/denis-bucher"}, "edited": false, "score": 0, "creation_date": 1493673234, "post_id": 43723115, "comment_id": 74496926, "body": "@DenisBUCHER: Fine. You can change the 8K to 64K if you wish, by using <code>\\(64 * 1024)</code> but the size of the buffer is arbitrary and will make little difference."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 5, "last_activity_date": 1493658625, "last_edit_date": 1493658625, "creation_date": 1493658208, "answer_id": 43723115, "question_id": 43722670, "link": "https://stackoverflow.com/questions/43722670/out-of-memory-when-serving-a-very-big-binary-file-over-http/43723115#43723115", "title": "Out of memory when serving a very big binary file over HTTP", "body": "<p>I have no idea what <code>binmode $DLFILE</code> is for. <code>$DLFILE</code> is nothing to do with the file handle <code>DLFILE</code>, and it's a bit late to set the binmode of the file now that it has been read to the end. It's probably just a mistake</p>\n\n<p>You can use this instead. It uses modern Perl best practices and reads and sends the file in 8K chunks</p>\n\n<p>The file name seems to be made from <code>$ID</code> so I'm not sure that <code>$name</code> would be correct, but I can't tell</p>\n\n<p>Make sure to keep the braces, as the block makes Perl restore the old value of <code>$/</code> and close the open file handle</p>\n\n<pre><code>my $files_location = \"$c-&gt;{target_dir}/$ID\";\n\n{\n    print \"Content-Type: application/x-download\\n\";\n    print \"Content-Disposition: attachment; filename=$name\\n\\n\";\n\n    open my $fh, '&lt;:raw', $files_location or Error('open', \"file $files_location\");\n    local $/ = \\( 8 * 1024 );\n\n    print while &lt;$fh&gt;;\n}\n</code></pre>\n"}], "owner": {"reputation": 259, "user_id": 1257259, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/744ca01142ae95c73b605425164fcd72?s=128&d=identicon&r=PG", "display_name": "Denis BUCHER", "link": "https://stackoverflow.com/users/1257259/denis-bucher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 43723115, "answer_count": 2, "score": -1, "last_activity_date": 1493666334, "creation_date": 1493656386, "last_edit_date": 1493658576, "question_id": 43722670, "link": "https://stackoverflow.com/questions/43722670/out-of-memory-when-serving-a-very-big-binary-file-over-http", "title": "Out of memory when serving a very big binary file over HTTP", "body": "<p>The code below is the original code of a Perl CGI script we are using. Even for very big files it seems to be working, but not for really huge files.</p>\n\n<p>The current code is :</p>\n\n<pre><code>$files_location = $c-&gt;{target_dir}.'/'.$ID;\nopen(DLFILE, \"&lt;$files_location\") || Error('open', 'file');\n@fileholder = &lt;DLFILE&gt;;\nclose (DLFILE) || Error ('close', 'file');\n\nprint \"Content-Type:application/x-download\\n\";\nprint \"Content-Disposition:attachment;filename=$name\\n\\n\";\nprint @fileholder;\nbinmode $DLFILE;\n</code></pre>\n\n<p>If I understand the code correctly, it is loading the whole file in memory before \"printing\" it. Of course I suppose it would be a lot better to load and display it by chunks ? But after having read many forums and tutorials I am still not sure how to do it best, with standard Perl libraries...</p>\n\n<p>Last question, why is \"binmode\" specified at the end ?</p>\n\n<p>Thanks a lot for any hint or advice,</p>\n"}, {"tags": ["perl", "mechanize"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1493654112, "post_id": 43721865, "comment_id": 74487641, "body": "You&#39;ve haven&#39;t assigned a value to <code>$m</code>."}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 3088548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/838e66b635d28b2760e6bd902ab6ab0c?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/3088548/rick"}, "edited": false, "score": 0, "creation_date": 1493654853, "post_id": 43722177, "comment_id": 74488070, "body": "Yes, that seems to solve the problem.  But using your code, I now get an error saying &quot;Can&#39;t call method &quot;url&quot; on an undefined valued at...line 14 (the print line).  Does $link need to be assigned as well?  I&#39;ve tried doing so, but apparently not correctly."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 107, "user_id": 3088548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/838e66b635d28b2760e6bd902ab6ab0c?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/3088548/rick"}, "edited": false, "score": 1, "creation_date": 1493654964, "post_id": 43722177, "comment_id": 74488125, "body": "@Rick Sounds like no link was found, then."}, {"owner": {"reputation": 107, "user_id": 3088548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/838e66b635d28b2760e6bd902ab6ab0c?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/3088548/rick"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1493655724, "post_id": 43722177, "comment_id": 74488473, "body": "@melpomene You are correct.  I see the Google home page does not currently have the &quot;Advanced Search&quot; link, and when I update the link then stevieb&#39;s code works as expected."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 107, "user_id": 3088548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/838e66b635d28b2760e6bd902ab6ab0c?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/3088548/rick"}, "edited": false, "score": 1, "creation_date": 1493656073, "post_id": 43722177, "comment_id": 74488649, "body": "@Rick You could simply wrap the <code>$link</code> code and the printing of the results within an if/else block... <code>if (defined $link){...}else{print &quot;no link found&quot;}</code>"}, {"owner": {"reputation": 983, "user_id": 3419535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65fc0329501359ea67262fd819afaf03?s=128&d=identicon&r=PG&f=1", "display_name": "FantomX1", "link": "https://stackoverflow.com/users/3419535/fantomx1"}, "edited": false, "score": 0, "creation_date": 1614366607, "post_id": 43722177, "comment_id": 117373403, "body": "I had this error connected when I called a routine from a package, which had no sub keywords listed in front of routines names."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 5, "last_activity_date": 1493654378, "creation_date": 1493654378, "answer_id": 43722177, "question_id": 43721865, "link": "https://stackoverflow.com/questions/43721865/cant-call-method-x-on-an-undefined-value/43722177#43722177", "title": "Can&#39;t call method X on an undefined value", "body": "<p>You've missed the step of assigning an instance of the <code>WWW::Mechanize</code> class to the <code>$m</code> variable:</p>\n\n<pre><code>use WWW::Mechanize;\n\nmy $m = WWW::Mechanize-&gt;new; # &lt;-- HERE\n\nmy $url = 'http://www.google.com';\n\n$m-&gt;get($url); # ...and remove 'my' from this line\n\nmy $link = $m-&gt;find_link(text =&gt;'Advanced Search');\n\n# also, a method call won't interpolate properly, so change\n# the below line as well:\n\nprint \"The Google advanced search URL is: \" . $link-&gt;url() . \"\\n\";\n\n# or:\n\n# my $result = $link-&gt;url();\n# print \"The Google advanced search URL is: $result\\n\";\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 3088548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/838e66b635d28b2760e6bd902ab6ab0c?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/3088548/rick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1128, "favorite_count": 0, "accepted_answer_id": 43722177, "answer_count": 1, "score": 0, "last_activity_date": 1493654378, "creation_date": 1493653272, "question_id": 43721865, "link": "https://stackoverflow.com/questions/43721865/cant-call-method-x-on-an-undefined-value", "title": "Can&#39;t call method X on an undefined value", "body": "<p>Why does the following code produce the error \"Can't call method \"get\" on an undefined value at... line 6\"?  I've read through similar posts and think I understand why this sort of error message tends to show up, but I don't see how it applies here.  I copied this code from a tutorial on the WWW::Mechanize module and so I expected it to work out of the can.  </p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings ;\nuse strict ;\nuse WWW::Mechanize;\nmy $url = 'http://www.google.com';\nmy $m-&gt;get($url);\nmy $link = $m-&gt;find_link(text =&gt;'Advanced Search');\nprint \"The Google advanced search URL is: $link-&gt;url()\\n\";\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1493653068, "post_id": 43721780, "comment_id": 74487139, "body": "<code>use warnings;</code> tells you"}], "answers": [{"comments": [{"owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "edited": false, "score": 0, "creation_date": 1493663815, "post_id": 43721826, "comment_id": 74492587, "body": "If that&#39;s not 100% clear: the statement is saying &#39;evaluate the print() function for \\@ARGV, then evaluate the string expression &quot;\\n&quot;&#39;. The print() prints \\@ARGV, and the expression &quot;\\n&quot; is simply evaluated and discarded."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 8, "last_activity_date": 1493653104, "creation_date": 1493653104, "answer_id": 43721826, "question_id": 43721780, "link": "https://stackoverflow.com/questions/43721780/why-print-argv-n-doesnt-print-the-newline-in-perl/43721826#43721826", "title": "Why print (@ARGV), &quot;\\n&quot; doesn&#39;t print the newline in Perl?", "body": "<pre><code>$ perl -we'print (@ARGV), \"\\n\";'\nprint (...) interpreted as function at -e line 1.\nUseless use of a constant (\n) in void context at -e line 1.\n</code></pre>\n\n<p>There's no difference between</p>\n\n<pre><code>print (@ARGV), \"\\n\";\n</code></pre>\n\n<p>and</p>\n\n<pre><code>print(@ARGV), \"\\n\";\n</code></pre>\n\n<p>So you're doing</p>\n\n<pre><code>print(@ARGV); \"\\n\";\n</code></pre>\n\n<p>Solutions:</p>\n\n<pre><code>print +(@ARGV), \"\\n\";\nprint @ARGV, \"\\n\";\nprint((@ARGV), \"\\n\");\nprint(@ARGV, \"\\n\");\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 5, "last_activity_date": 1493653217, "creation_date": 1493653217, "answer_id": 43721848, "question_id": 43721780, "link": "https://stackoverflow.com/questions/43721780/why-print-argv-n-doesnt-print-the-newline-in-perl/43721848#43721848", "title": "Why print (@ARGV), &quot;\\n&quot; doesn&#39;t print the newline in Perl?", "body": "<p>Parentheses never tuple in perl.  They only determine precedence and synxtax.</p>\n\n<p>print() is a subroutine call, passing what is in the parentheses to print.  Even with a space before it.  When you have a space before the parentheses, this may not be what you intend, so perl will warn you...if you enable warnings.  It will also warn you that the \"\\n\" is useless because it is in void context.</p>\n\n<pre><code>$ perl -we'print (@ARGV), \"\\n\"'\nprint (...) interpreted as function at -e line 1.\nUseless use of a constant (\"\\n\") in void context at -e line 1.\n</code></pre>\n"}], "owner": {"reputation": 89955, "user_id": 130758, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/MbIFT.jpg?s=128&g=1", "display_name": "devoured elysium", "link": "https://stackoverflow.com/users/130758/devoured-elysium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 43721826, "answer_count": 2, "score": 0, "last_activity_date": 1493653217, "creation_date": 1493652932, "question_id": 43721780, "link": "https://stackoverflow.com/questions/43721780/why-print-argv-n-doesnt-print-the-newline-in-perl", "title": "Why print (@ARGV), &quot;\\n&quot; doesn&#39;t print the newline in Perl?", "body": "<p>What's the reason that</p>\n\n<pre><code>print (@ARGV), \"\\n\";\n</code></pre>\n\n<p>doesn't print the ending newline but</p>\n\n<pre><code>print @ARGV, \"\\n\";\n</code></pre>\n\n<p>does? I'd assume the parenthesis would be neutral in this case? Or even if they are tupling the <code>@ARGV</code> why would they make print chop off the newline anyway?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "shell"], "comments": [{"owner": {"reputation": 874, "user_id": 6535641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa91de216e37b552d355915aa73e4c16?s=128&d=identicon&r=PG&f=1", "display_name": "ULick", "link": "https://stackoverflow.com/users/6535641/ulick"}, "edited": false, "score": 1, "creation_date": 1493647107, "post_id": 43719618, "comment_id": 74483982, "body": "You mention tab delimited in the header, but there are no tabs in your files. And you are not doing anything with tabs. Beside the <code>while (&#47;\\t*</code>, which is useless at that point, because it doesn&#39;t matter if a <code>\\t</code> is in the input or not."}, {"owner": {"reputation": 2528, "user_id": 4668368, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/70b77439d7ee9bb7410105b7bc912afb?s=128&d=identicon&r=PG&f=1", "display_name": "justaguy", "link": "https://stackoverflow.com/users/4668368/justaguy"}, "reply_to_user": {"reputation": 874, "user_id": 6535641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa91de216e37b552d355915aa73e4c16?s=128&d=identicon&r=PG&f=1", "display_name": "ULick", "link": "https://stackoverflow.com/users/6535641/ulick"}, "edited": false, "score": 0, "creation_date": 1493647423, "post_id": 43719618, "comment_id": 74484150, "body": "Thank you, I am trying to learn <code>perl</code> which is very tricky so I make a lot of mistakes, but am learning."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1493647484, "post_id": 43719618, "comment_id": 74484186, "body": "Your code is very badly laid out and difficult to read. It&#39;s fine with me if you want to do that to yourself, but if you&#39;re asking for free help from the rest of the world then it would be more appropriate to make an  effort and show something legible. You must also <i>always</i> <code>use strict</code> and <code>use warnings &#39;all&#39;</code> at the top of every program you write. They will help to reveal any trivial errors before you look to others to fix your code."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 874, "user_id": 6535641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa91de216e37b552d355915aa73e4c16?s=128&d=identicon&r=PG&f=1", "display_name": "ULick", "link": "https://stackoverflow.com/users/6535641/ulick"}, "edited": false, "score": 1, "creation_date": 1493647538, "post_id": 43719618, "comment_id": 74484214, "body": "@ULick: Please write up your first comment as an answer."}, {"owner": {"reputation": 2528, "user_id": 4668368, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/70b77439d7ee9bb7410105b7bc912afb?s=128&d=identicon&r=PG&f=1", "display_name": "justaguy", "link": "https://stackoverflow.com/users/4668368/justaguy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493647977, "post_id": 43719618, "comment_id": 74484471, "body": "@Borodin I added the <code>use strict</code> and <code>use warnings</code> to my script.... in terms of indenting the code what would you suggest or advise. Is there a general guideline to follow?  Thank you :)."}, {"owner": {"reputation": 874, "user_id": 6535641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa91de216e37b552d355915aa73e4c16?s=128&d=identicon&r=PG&f=1", "display_name": "ULick", "link": "https://stackoverflow.com/users/6535641/ulick"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493648488, "post_id": 43719618, "comment_id": 74484772, "body": "@Borodin, yep, moved it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1493648701, "post_id": 43719618, "comment_id": 74484906, "body": "Take a look at <a href=\"https://perldoc.perl.org/perlstyle.html\" rel=\"nofollow noreferrer\"><code>perstyle</code></a> and <a href=\"https://metacpan.org/pod/perltidy\" rel=\"nofollow noreferrer\"><code>perltidy</code></a>. And it&#39;s best not to use twenty-line &quot;one-liners&quot;; put your code in a file."}, {"owner": {"reputation": 874, "user_id": 6535641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa91de216e37b552d355915aa73e4c16?s=128&d=identicon&r=PG&f=1", "display_name": "ULick", "link": "https://stackoverflow.com/users/6535641/ulick"}, "edited": false, "score": 1, "creation_date": 1493649088, "post_id": 43719618, "comment_id": 74485084, "body": "Your first regex picks up lines which have <code>del.*ins</code> (I simplify it) in it. I think it likely, that you don&#39;t find one of the four regex in the else part. Depends on your real input. At least for the input examples that part is useless."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1493651384, "post_id": 43719618, "comment_id": 74486271, "body": "I&#39;m intrigued to know what you intended by <code>map { undef } ( $num1, $num2, $num3, $common, $ch1, $ch2 )</code>? What it actually does is generate a list of six <code>undef</code> values and then discards it, although that&#39;s probably optimised out."}], "answers": [{"tags": [], "owner": {"reputation": 874, "user_id": 6535641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa91de216e37b552d355915aa73e4c16?s=128&d=identicon&r=PG&f=1", "display_name": "ULick", "link": "https://stackoverflow.com/users/6535641/ulick"}, "is_accepted": true, "score": 2, "last_activity_date": 1493650950, "last_edit_date": 1493650950, "creation_date": 1493648281, "answer_id": 43720600, "question_id": 43719618, "link": "https://stackoverflow.com/questions/43719618/different-output-from-same-code-parsing-simiiar-tab-delimited-files/43720600#43720600", "title": "Different output from same code parsing simiiar tab-delimited files", "body": "<p>The <code>while (/\\t*NC_(\\d+)\\.</code> will not match 'NC_0000X.11', due to the 'X' and the regex is looking for digits only.</p>\n\n<p>After the change you made, <code>NC_(\\w+)</code> will match 'NC_0000X' and <code>$num1</code> is set to '0000X'.</p>\n\n<p>Your <code>printf \"%d....\" $num1 ...</code> will print a 0 for non numeric input. As <code>$num1</code> is '0000X', it will print as 0. </p>\n\n<p>The input example suggests, that each line consists of fields, which are separated by white-space. Some fields are of interest, otheres not. Each field holds recognizable information.</p>\n\n<p>Your program should follow this structure.</p>\n\n<ul>\n<li>Read the file line by line</li>\n<li>split the line into fields</li>\n<li>skip fields, which are not of interest, e.g. non NC.*</li>\n<li>extract the necessary information from the field </li>\n<li>do whatever necessary, sum it up, collect it</li>\n<li>print the information at the level needed. Per field, line, file or after all files</li>\n</ul>\n\n<p>It is much easier to work on smaller chuncks instead of finding a regex which works for the whole line. It is much easier to read, understand and maintain.</p>\n"}], "owner": {"reputation": 2528, "user_id": 4668368, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/70b77439d7ee9bb7410105b7bc912afb?s=128&d=identicon&r=PG&f=1", "display_name": "justaguy", "link": "https://stackoverflow.com/users/4668368/justaguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 43720600, "answer_count": 1, "score": -2, "last_activity_date": 1493651193, "creation_date": 1493644185, "last_edit_date": 1493651193, "question_id": 43719618, "link": "https://stackoverflow.com/questions/43719618/different-output-from-same-code-parsing-simiiar-tab-delimited-files", "title": "Different output from same code parsing simiiar tab-delimited files", "body": "\n\n<p>The Perl script below is written in a shell.</p>\n\n<p>If I use the tab-delimited file <code>numeric</code> then I get the desired result of each line parsed accordingly. However, if I use the file <code>alpha</code> as input then only the first line is parsed.</p>\n\n<p>The only difference between <code>alpha</code> and <code>numeric</code> is that <code>numeric</code> has <code>NC_000023</code></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>NC_000023.11:g.41747805_41747806delinsTT\nNC_000023.11:g.41750615C&gt;A\n</code></pre>\n\n<p>while <code>alpha</code> has <code>NC_0000X</code></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>NC_0000X.11:g.41747805_41747806delinsTT\nNC_0000X.11:g.41750615C&gt;A\n</code></pre>\n\n<p>What am I missing?</p>\n\n<h3>numeric</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Input Variant   Errors  Chromosomal Variant Coding Variant(s)\nNM_003924.3:c.*18_*19delGCinsAA     NC_000023.11:g.41747805_41747806delinsTT    LRG_513t1:c.*18_*19delinsAA NM\nNM_003924.3:c.013G&gt;T        NC_000023.11:g.41750615C&gt;A  LRG_513t1:c.13G&gt;T   \n</code></pre>\n\n<h3>alpha</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Input Variant   Errors  Chromosomal Variant Coding Variant(s)\nNM_003924.3:c.*18_*19delGCinsAA     NC_0000X.11:g.41747805_41747806delinsTT LRG_513t1:c.*18_*19delinsAA NM_003924.3:c.*18_*19delinsAA\nNM_003924.3:c.013G&gt;T        NC_0000X.11:g.41750615C&gt;A   LRG_513t1:c.13G&gt;T   NM_003924.3:c.13G&gt;T\n</code></pre>\n\n<h3>Perl</h3>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>perl -ne '\n\nnext if $. == 1;\n\nif ( /.*del([A-Z]+)ins([A-Z]+).*NC_0+([^.]+)\\..*g\\.([0-9]+)_([0-9]+)/ ) { # indel\n    print join( \"\\t\", $3, $4, $5, $1, $2 ), \"\\n\";\n}\nelse {\n\n    while ( /\\t*NC_(\\d+)\\.\\S+g\\.(\\d+)(\\S+)/g ) {\n\n        # conditional parse\n\n        ( $num1, $num2, $common ) = ( $1, $2, $3 );\n        $num3 = $num2;\n\n        if ( $common =~ /^([A-Z])&gt;([A-Z])$/ ) {      # SNP\n            ( $ch1, $ch2 ) = ( $1, $2 );\n        }\n        elsif ( $common =~ /^del([A-Z])$/ ) {        # deletion\n            ( $ch1, $ch2 ) = ( $1, \"-\" );\n        }\n        elsif ( $common =~ /^ins([A-Z])$/ ) {        # insertion\n            ( $ch1, $ch2 ) = ( \"-\", $1 );\n        }\n        elsif ( $common =~ /^_(\\d+)del([A-Z]+)$/ ) { # multi deletion\n            ( $num3, $ch1, $ch2 ) = ( $1, $2, \"-\" );\n        }\n        elsif ( $common =~ /^_(\\d+)ins([A-Z]+)$/ ) { # multi insertion\n            ( $num3, $ch1, $ch2 ) = ( \"-\", $1, $2 );\n        }\n\n        printf( \"%d\\t%d\\t%d\\t%s\\t%s\\n\", $num1, $num2, $num3, $ch1, $ch2 ); # output\n\n        map { undef } ( $num1, $num2, $num3, $common, $ch1, $ch2 );\n    }\n}' numeric\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>23  41747805    41747806    GC  AA\n23  41750615    41750615    C   A\n</code></pre>\n\n<p><strong>output using alpha:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>X   41747805    41747806    GC  AA\n</code></pre>\n\n<p>If I use <code>\\w</code> instead of <code>\\d</code> in the <code>while</code> condition, like this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>while ( /\\t*NC_(\\w+)\\.\\S+g\\.(\\d+)(\\S+)/g ) { ... }\n</code></pre>\n\n<p>I get this result</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>X   41747805    41747806    GC  AA\n0   41750615    41750615    C   A\n</code></pre>\n\n<p>Why the zero in <code>$1</code></p>\n"}, {"tags": ["perl", "for-loop", "character"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1493646872, "post_id": 43719236, "comment_id": 74483873, "body": "Please lay out your code properly. It is unreadable and won&#39;t even compile."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1493647878, "post_id": 43719236, "comment_id": 74484400, "body": "Always use <code>use strict; use warnings qw( all );</code>!"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1493647869, "post_id": 43719491, "comment_id": 74484393, "body": "Not me, but its surely because you didn&#39;t really help the OP. Please point out what they did wrong."}], "tags": [], "owner": {"reputation": 6928, "user_id": 1015385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc84a03227c566697c4a16b2e9f8782?s=128&d=identicon&r=PG", "display_name": "JRFerguson", "link": "https://stackoverflow.com/users/1015385/jrferguson"}, "is_accepted": false, "score": 0, "last_activity_date": 1493648901, "last_edit_date": 1493648901, "creation_date": 1493643622, "answer_id": 43719491, "question_id": 43719236, "link": "https://stackoverflow.com/questions/43719236/count-characters-in-perl/43719491#43719491", "title": "Count Characters in Perl", "body": "<p>You compare characters with the numeric operator (<code>==</code>) when you should use the string comparison <code>eq</code>.  If you had used the <code>warnings</code> pragma you would have seen that.</p>\n\n<p>You code should have looked like:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nmy $x = \"012ei ke ek ek \";\nmy $l = length($x);\nmy $a = 0;\nfor ( my $i = 0; $i &lt; $l; $i++ ) {\n    my $s = substr( $x, $i, 1 );\n    if ( $s eq \"e\" ) {\n        $a++;\n    }\n}\nprint \"$a\\n\";\n</code></pre>\n\n<p>Proper indentation and the use of the <code>strict</code> and <code>warnings</code> pragmas will avoid and/or catch unintentional, dumb errors.</p>\n\n<p>A much more Perl-ish (and shorter) way to achieve your answer is:</p>\n\n<pre><code>perl -le '$x=\"012ei ke ek ek\";@count=$x=~m/e/g;print scalar @count'\n4\n</code></pre>\n\n<p>This matches globally and collects all the matches in list context.  The scalar value of the list gives the number of occurrences you seek.</p>\n\n<p>Another way is to use <a href=\"http://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow noreferrer\">tr</a></p>\n\n<pre><code>perl -le '$x=\"012ei ke ek ek\";print scalar $x=~tr/e//'\n4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "is_accepted": false, "score": 6, "last_activity_date": 1493648428, "creation_date": 1493648428, "answer_id": 43720638, "question_id": 43719236, "link": "https://stackoverflow.com/questions/43719236/count-characters-in-perl/43720638#43720638", "title": "Count Characters in Perl", "body": "<p>Your code has  some problems. You forgot to close  the <code>for</code> loop brace,\nand in Perl <code>==</code> is supposed to compare numbers. Use <code>eq</code> for strings.</p>\n\n<p>It is  also recommended that  you use  warnings and enable  strict mode,\nwhich would  have helped  you debugging  this. In  your case,  since <code>e</code>\nwould be  treated as 0,  so the other one  char substrings, <code>1</code>  and <code>2</code>\nwould be the only characters not equal to <code>e</code> when compared with <code>==</code>. A\ncleaned up version of your code could be written as:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $x = \"012ei ke ek ek \";\nmy $l = length $x;\n\nmy $count = 0;\n\nfor(my $i = 0; $i &lt; $l; $i++) {\n    my $s = substr($x, $i, 1);\n    $count++ if ($s eq \"e\");\n}\n\nprint $count;\n</code></pre>\n\n<p>There are multiple  ways to achieve this.  You could use a  match with a\ngroup,  which if  global returns  all the  occurrences in  list context.\nSince you want  the number, take this result in  scalar context. You can\nachieve this for example with:</p>\n\n<pre><code>my $count = () = $string =~ /(e)/g;\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>my $count = @{[ $string =~ /(e)/g ]}\n</code></pre>\n\n<p>Another way is  to split the string into characters  and grep those that\nare <em>e</em>:</p>\n\n<pre><code>my $count = grep $_ eq 'e', split //, $string;\n</code></pre>\n\n<p>And probably the most compact is to  use <code>tr</code> which returns the count of\ncharacters in scalar context, although  this does restrict this usage to\ncounting characters only:</p>\n\n<pre><code>my $count = $string =~ tr/e//;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 0, "last_activity_date": 1493710250, "last_edit_date": 1493710250, "creation_date": 1493709749, "answer_id": 43732320, "question_id": 43719236, "link": "https://stackoverflow.com/questions/43719236/count-characters-in-perl/43732320#43732320", "title": "Count Characters in Perl", "body": "<p><code>@sidyll</code> Already mentioned what is the problem in your script and all  of the possible ways, but TIMTOWTDI.</p>\n\n<pre><code>$x=\"012ei ke ek ek \";  \nmy $count; \n$count++ while($x=~/e/g);  \nprint $count; \n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 7947168, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/1627994043885013/picture?type=large", "display_name": "LittleEntertainer", "link": "https://stackoverflow.com/users/7947168/littleentertainer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 994, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1493710250, "creation_date": 1493642363, "question_id": 43719236, "link": "https://stackoverflow.com/questions/43719236/count-characters-in-perl", "title": "Count Characters in Perl", "body": "<p>I need to count the letter \"e\" in the string \n<code>$x=\"012ei ke ek ek \";</code></p>\n\n<p>So far, I've tried with a for-loop:</p>\n\n<pre><code>$l=length($x);\n\n$a=0;\nfor($i=0;$i&lt;$l;$i++)\n{$s=substr($x,$i,1);\nif($s==\"e\")\n{$a++;}\n\nprint $a;\n</code></pre>\n"}, {"tags": ["forms", "perl", "web-applications"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1493602193, "post_id": 43713053, "comment_id": 74470183, "body": "First, you need to find out what error you got. Web server&#39;s typically send the stderr output of CGI scripts to their error log."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1493602289, "post_id": 43713053, "comment_id": 74470200, "body": "But I can tell you from looking at the program that it&#39;s from not declaring your variables despite telling Perl you want it to force you to do so (as you should) by using <code>use strict;</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1493602328, "post_id": 43713053, "comment_id": 74470208, "body": "If you&#39;re using CGI.pm, why are you parsing the CGI request?!?! use <code>param</code>!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1493602410, "post_id": 43713053, "comment_id": 74470225, "body": "Also note that you suffer from an HTML injection bug. You are inserting text strings into HTML without properly escaping characters in need of escaping."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1493610356, "post_id": 43713053, "comment_id": 74471672, "body": "Use better resources to learn Perl. See <a href=\"https://learn.perl.org/books/\" rel=\"nofollow noreferrer\">learn.perl.org/books</a> and <a href=\"https://learn.perl.org/first_steps/\" rel=\"nofollow noreferrer\">learn.perl.org/first_steps</a> and <a href=\"https://perlmaven.com/perl-tutorial\" rel=\"nofollow noreferrer\">perlmaven.com/perl-tutorial</a>"}], "answers": [{"comments": [{"owner": {"reputation": 338, "user_id": 3575160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce81014816a203974a74727504866947?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Hutchinson", "link": "https://stackoverflow.com/users/3575160/chris-hutchinson"}, "reply_to_user": {"reputation": 137, "user_id": 3791141, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1065521263/picture?type=large", "display_name": "mehfatitem", "link": "https://stackoverflow.com/users/3791141/mehfatitem"}, "edited": false, "score": 4, "creation_date": 1493605930, "post_id": 43713206, "comment_id": 74470870, "body": "That site is providing a really poor example of Perl CGI scripting. You have added &#39;use strict&#39; as recommended so your script dies because you haven&#39;t declared all your variables ($gender, $surname). Please see this answer (<a href=\"https://stackoverflow.com/a/3603720/3575160\">stackoverflow.com/a/3603720/3575160</a>) about why &#39;my&#39; is preferred over &#39;local&#39;"}], "tags": [], "owner": {"reputation": 338, "user_id": 3575160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce81014816a203974a74727504866947?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Hutchinson", "link": "https://stackoverflow.com/users/3575160/chris-hutchinson"}, "is_accepted": false, "score": 2, "last_activity_date": 1493603053, "creation_date": 1493603053, "answer_id": 43713206, "question_id": 43713053, "link": "https://stackoverflow.com/questions/43713053/a-simple-form-application-with-perl/43713206#43713206", "title": "A simple form application with Perl", "body": "<p>You haven't declared $age, $gender, $surname variables so the script is dying.</p>\n\n<p>Try verifying the script manually via 'perl -w myscript.pl' and look in your webserver error log as @ikegami suggested.</p>\n\n<p>The declaration of variables in your script is a bit different from 'modern Perl' usage.</p>\n\n<p>I would usually declare things with 'my', and make the declarations closer to the usage so the scope of the variables is constrained:</p>\n\n<pre><code>my @pairs = split(/&amp;/, $buffer);\nforeach my $pair (@pairs) { \n    my($name, $value) = split(/=/, $pair);\n\nmy $surname = $FORM{surname};\n</code></pre>\n\n<p>Etc</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 6, "last_activity_date": 1493631919, "last_edit_date": 1493631919, "creation_date": 1493624149, "answer_id": 43715796, "question_id": 43713053, "link": "https://stackoverflow.com/questions/43713053/a-simple-form-application-with-perl/43715796#43715796", "title": "A simple form application with Perl", "body": "<p>Your first mistake is to try learning Perl from the TutorialsPoint site. They really have no idea what they are talking about. Try the <a href=\"http://perl-tutorial.org/\" rel=\"noreferrer\">Perl tutorials hub</a> instead for pointers to better quality Perl tutorials.</p>\n\n<p>Although CGI programs are designed to run on a web server, it's often useful to run them from a command line in order to debug them. In particular, when tracking down syntax errors, then you can use <code>perl -c</code> to see all of the problems. I put your code in a file called \"testcgi\" and ran the command <code>perl -c testcgi</code>. I got the following output:</p>\n\n<pre><code>$ perl -c testcgi \nGlobal symbol \"$buffer\" requires explicit package name (did you forget to declare \"my $buffer\"?) at testcgi line 8.\nGlobal symbol \"@pairs\" requires explicit package name (did you forget to declare \"my @pairs\"?) at testcgi line 8.\nGlobal symbol \"$pair\" requires explicit package name (did you forget to declare \"my $pair\"?) at testcgi line 8.\nGlobal symbol \"$name\" requires explicit package name (did you forget to declare \"my $name\"?) at testcgi line 8.\nGlobal symbol \"$value\" requires explicit package name (did you forget to declare \"my $value\"?) at testcgi line 8.\nGlobal symbol \"%FORM\" requires explicit package name (did you forget to declare \"my %FORM\"?) at testcgi line 8.\nGlobal symbol \"$buffer\" requires explicit package name (did you forget to declare \"my $buffer\"?) at testcgi line 13.\nGlobal symbol \"@pairs\" requires explicit package name (did you forget to declare \"my @pairs\"?) at testcgi line 17.\nGlobal symbol \"$buffer\" requires explicit package name (did you forget to declare \"my $buffer\"?) at testcgi line 17.\nGlobal symbol \"$pair\" requires explicit package name (did you forget to declare \"my $pair\"?) at testcgi line 19.\nGlobal symbol \"@pairs\" requires explicit package name (did you forget to declare \"my @pairs\"?) at testcgi line 19.\nGlobal symbol \"$name\" requires explicit package name (did you forget to declare \"my $name\"?) at testcgi line 20.\nGlobal symbol \"$value\" requires explicit package name (did you forget to declare \"my $value\"?) at testcgi line 20.\nGlobal symbol \"$pair\" requires explicit package name (did you forget to declare \"my $pair\"?) at testcgi line 20.\nGlobal symbol \"$value\" requires explicit package name (did you forget to declare \"my $value\"?) at testcgi line 21.\nGlobal symbol \"$value\" requires explicit package name (did you forget to declare \"my $value\"?) at testcgi line 22.\nGlobal symbol \"%FORM\" requires explicit package name (did you forget to declare \"my %FORM\"?) at testcgi line 23.\nGlobal symbol \"$name\" requires explicit package name (did you forget to declare \"my $name\"?) at testcgi line 23.\nGlobal symbol \"$value\" requires explicit package name (did you forget to declare \"my $value\"?) at testcgi line 23.\nGlobal symbol \"$name\" requires explicit package name (did you forget to declare \"my $name\"?) at testcgi line 26.\nGlobal symbol \"%FORM\" requires explicit package name (did you forget to declare \"my %FORM\"?) at testcgi line 26.\nGlobal symbol \"$surname\" requires explicit package name (did you forget to declare \"my $surname\"?) at testcgi line 27.\nGlobal symbol \"%FORM\" requires explicit package name (did you forget to declare \"my %FORM\"?) at testcgi line 27.\nGlobal symbol \"$age\" requires explicit package name (did you forget to declare \"my $age\"?) at testcgi line 28.\nGlobal symbol \"%FORM\" requires explicit package name (did you forget to declare \"my %FORM\"?) at testcgi line 28.\nGlobal symbol \"$gender\" requires explicit package name (did you forget to declare \"my $gender\"?) at testcgi line 29.\nGlobal symbol \"%FORM\" requires explicit package name (did you forget to declare \"my %FORM\"?) at testcgi line 29.\nGlobal symbol \"$name\" requires explicit package name (did you forget to declare \"my $name\"?) at testcgi line 33.\nGlobal symbol \"$surname\" requires explicit package name (did you forget to declare \"my $surname\"?) at testcgi line 33.\nGlobal symbol \"$age\" requires explicit package name (did you forget to declare \"my $age\"?) at testcgi line 33.\nGlobal symbol \"$gender\" requires explicit package name (did you forget to declare \"my $gender\"?) at testcgi line 33.\ntestcgi had compilation errors.\n</code></pre>\n\n<p>You can see that all of your errors are the same. You have forgotten to declare some of your variables. Your code should look like this:</p>\n\n<pre><code>#!\"c:\\xampp\\perl\\bin\\perl.exe\"\n\nuse strict;\nuse warnings;\n\nuse CGI;\n\n# Read in text\n$ENV{'REQUEST_METHOD'} =~ tr/a-z/A-Z/;\n\nmy $buffer;\n\nif ($ENV{'REQUEST_METHOD'} eq \"GET\") {\n   $buffer = $ENV{'QUERY_STRING'};\n}\n\n# Split information into name/value pairs\nmy @pairs = split(/&amp;/, $buffer);\n\nmy %FORM;\nforeach my $pair (@pairs) {\n   my ($name, $value) = split(/=/, $pair);\n   $value =~ tr/+/ /;\n   $value =~ s/%(..)/pack(\"C\", hex($1))/eg;\n   $FORM{$name} = $value;\n}\n\nmy $name = $FORM{name};\nmy $surname = $FORM{surname};\nmy $age = $FORM{age};\nmy $gender = $FORM{sexual};\n\nprint CGI::header();\n\nprint $name.\" \".$surname.\" \".$age.\" \".$gender;\n</code></pre>\n\n<p>Notice that I have used <code>my</code> to declare the variables, not <code>local</code>. <code>local</code> is largely a hangover from Perl 4. Since Perl 5 was released over twenty years ago, <code>my</code> has been the best way to declare most variables in a Perl program. Notice, also, that I declare the variables as close as possible to where they are used.</p>\n\n<p>There are some other things we can change here.</p>\n\n<ul>\n<li>If we import named subroutines from CGI.pm, we can make the calls to them a little cleaner by omitting the package name.</li>\n<li>We can use the <code>param</code> subroutine from CGI.pm to replace your buggy CGI parameter parser.</li>\n<li>We can use the fact that Perl variables are expanded in double-quoted strings to make your <code>print</code> statement easier to read.</li>\n</ul>\n\n<p>Making those changes, your code reduces to this:</p>\n\n<pre><code>#!\"c:\\xampp\\perl\\bin\\perl.exe\"\n\nuse strict;\nuse warnings;\n\nuse CGI qw(param header);\n\nmy $name    = param('name');\nmy $surname = param('surname');\nmy $age     = param('age');\nmy $gender  = param('sexual');\n\n# We're outputing plain text, not HTML\nprint header(-content_type =&gt; 'text/plain');\n\nprint \"$name $surname $age $gender\";\n</code></pre>\n\n<p>Doesn't that look simpler?</p>\n\n<p>And you can test it from the command line:</p>\n\n<pre><code>$ perl testcgi2 'name=foo&amp;surname=bar&amp;age=18&amp;sexual=M'\nContent-Type: text/plain; charset=ISO-8859-1\n\nfoo bar 18 M\n</code></pre>\n\n<p>The biggest lesson here is that if you're learning a new language, you shouldn't trust random tutorial sites on the internet. They are rarely any use. Ask people who know the language where to find good resources.</p>\n"}], "owner": {"reputation": 137, "user_id": 3791141, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1065521263/picture?type=large", "display_name": "mehfatitem", "link": "https://stackoverflow.com/users/3791141/mehfatitem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 801, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1493660774, "creation_date": 1493601423, "question_id": 43713053, "link": "https://stackoverflow.com/questions/43713053/a-simple-form-application-with-perl", "title": "A simple form application with Perl", "body": "<p>I have an error while developing simple sign up form application with Perl.</p>\n\n<p>This is my html.</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;title&gt;Kay\u0131t Formu&lt;/title&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h2&gt;Kay\u0131t Formu&lt;/h2&gt;\n    &lt;form id=\"signup-form\" action=\"/sample_perl_application/signup.cgi\" method=\"GET\"&gt;\n        &lt;div class=\"form-group\"&gt;\n            &lt;label for=\"name\"&gt;Ad&lt;/label&gt;\n            &lt;input class=\"form-control\" id=\"name\" name=\"name\" type=\"text\"/&gt;\n        &lt;/div&gt;\n        &lt;div class=\"form-group\"&gt;\n            &lt;label for=\"surname\"&gt;Soyad&lt;/label&gt;\n            &lt;input class=\"form-control\" id=\"surname\" name=\"surname\" type=\"text\"/&gt;\n        &lt;/div&gt;\n        &lt;div class=\"form-group\"&gt;\n            &lt;label for=\"age\"&gt;Ya\u015f&lt;/label&gt;\n            &lt;input class=\"form-control\" id=\"age\" name=\"age\" type=\"text\"/&gt;\n        &lt;/div&gt;\n        &lt;div class=\"form-group\"&gt;\n            &lt;label for=\"sexual\"&gt;Cinsiyet&lt;/label&gt;\n            &lt;select class=\"form-control\" id=\"sexual\" name=\"sexual\"&gt;\n                &lt;option id=\"male\"&gt;Bay&lt;/option&gt;\n                &lt;option id=\"female\"&gt;Bayan&lt;/option&gt;\n            &lt;/select&gt;\n        &lt;/div&gt;\n        &lt;input class=\"btn btn-default\" id=\"save\" name=\"save\" type=\"submit\" value=\"Kaydet\"/&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"&gt;&lt;/script&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>This is my perl script.</p>\n\n<pre><code>#!\"c:\\xampp\\perl\\bin\\perl.exe\"\n\nuse strict;\nuse warnings;\n\nuse CGI;\n\nlocal ($buffer, @pairs, $pair, $name, $value, %FORM);\n# Read in text\n$ENV{'REQUEST_METHOD'} =~ tr/a-z/A-Z/;\n\nif ($ENV{'REQUEST_METHOD'} eq \"GET\") {\n   $buffer = $ENV{'QUERY_STRING'};\n}\n\n# Split information into name/value pairs\n@pairs = split(/&amp;/, $buffer);\n\nforeach $pair (@pairs) { \n   ($name, $value) = split(/=/, $pair);\n   $value =~ tr/+/ /;\n   $value =~ s/%(..)/pack(\"C\", hex($1))/eg;\n   $FORM{$name} = $value;\n}\n\n$name = $FORM{name};\n$surname = $FORM{surname};\n$age = $FORM{age};\n$gender = $FORM{sexual};\n\nprint CGI::header();\n\nprint $name.\" \".$surname.\" \".$age.\" \".$gender;\n</code></pre>\n\n<p>I have an error like this. \"End of script output before headers: signup.cgi\".\nHow can I fix the problem ?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493644841, "post_id": 43709965, "comment_id": 74482869, "body": "Well, I provided a self-contained example. It is up to you to adapt that to how you obtain the source HTML."}], "answers": [{"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 1, "last_activity_date": 1493582605, "last_edit_date": 1493582605, "creation_date": 1493577804, "answer_id": 43710036, "question_id": 43709965, "link": "https://stackoverflow.com/questions/43709965/retain-html-tags-in-output-from-html-file/43710036#43710036", "title": "Retain HTML tags in output from HTML file", "body": "\n\n<p>Answer updated following updates to the question.</p>\n\n<blockquote>\n  <p>I'm looking for a perl function, which can help extract the (TEXT+ ALL HTML TAGS) that lie between \"<code>&lt;div class=\"moduleBody\"&gt;</code>\" and \"<code>&lt;div class=\"moreLink\"&gt;</code>\" on a webpage (as quoted in example input text above).</p>\n</blockquote>\n\n<p><code>HTML::TokeParser</code> is a stream parser: You ask for tokens or tags (which are specific kinds of tokens. So, using this module, you would ask the parser to find the next <code>div</code>, check if it is the right class, if so, start accumulating the content of all subsequent tokens up to the <code>&lt;div class=\"moreLink\"&gt;</code> opening tag.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse HTML::TokeParser::Simple;\n\nmy $html = &lt;&lt;HTML;\n&lt;div class=\"moduleBody\"&gt;In addition, &lt;b&gt;ABC provides&lt;/b&gt;\ndual finishing and detailing &lt;u&gt;products&lt;/u&gt;, including a system of cleaners,\ndressings, polishes, waxes and other products.&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Safety and Graphics\nBusiness&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;The Safety and Graphics segment serves a range of markets\nfor the safety, security and productivity of people, facilities and systems.\nIts &lt;b&gt;product offerings&lt;/b&gt; include personal protection products, such as\n&lt;u&gt;respiratory, hearing, eye and fall protection&lt;/u&gt; equipment;&lt;div\nclass=\"moreLink\"&gt;\nHTML\n\nmy $p = HTML::TokeParser::Simple-&gt;new(\\$html);\nmy $start = { tag =&gt; 'div', class =&gt; 'moduleBody' };\nmy $end = { tag =&gt; 'div', class =&gt; 'moreLink' };\n\nwhile ( defined(my $chunk = extract_html_between($p, $start, $end)) ) {\n    print \"[[[$chunk]]]\\n\"\n}\n\nsub extract_html_between {\n    my $p = shift;\n    my $start = shift;\n    my $end = shift;\n\n    my $chunk;\n    while (my $tag = $p-&gt;get_tag($start-&gt;{tag})) {\n        my $class = $tag-&gt;get_attr('class');\n        next unless $class and $class eq $start-&gt;{class};\n\n        $chunk = $tag-&gt;as_is; # only if you want the opening div\n        CHUNK:\n        while (my $token = $p-&gt;get_token) {\n            if ( $token-&gt;is_start_tag($end-&gt;{tag}) ) {\n                $class = $token-&gt;get_attr('class');\n                last CHUNK if $class and $class eq $end-&gt;{class};\n            }\n            $chunk .= $token-&gt;as_is;\n        }\n    }\n\n    return $chunk;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[[[&lt;div class=\"moduleBody\"&gt;In addition, &lt;b&gt;ABC provides&lt;/b&gt;\ndual finishing and detailing &lt;u&gt;products&lt;/u&gt;, including a system of cleaners,\ndressings, polishes, waxes and other products.&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Safety and Graphics\nBusiness&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;The Safety and Graphics segment serves a range of markets\nfor the safety, security and productivity of people, facilities and systems.\nIts &lt;b&gt;product offerings&lt;/b&gt; include personal protection products, such as\n&lt;u&gt;respiratory, hearing, eye and fall protection&lt;/u&gt; equipment;]]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493582116, "post_id": 43710670, "comment_id": 74465397, "body": "Given OP&#39;s HTML, that prints an extra <b><code>&lt;div class=&quot;moreLink&quot;&gt; &lt;&#47;div&gt;&lt;&#47;div&gt;</code></b> at the end. That is the benefit of using a stream parser instead of constructing a DOM. You can stop whereever you want no matter how broken the HTML is."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493582451, "post_id": 43710670, "comment_id": 74465495, "body": "@Sinan&#220;n&#252;r: I agree. Before the OP&#39;s update, everything seemed to point to them wanting just a verbatim version of the HTML shown. I&#39;m still bemused by the two substitutions. Anyway, I&#39;m leaving this here for the benefit of others coming here with a less arcane requirement."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1493581864, "creation_date": 1493581864, "answer_id": 43710670, "question_id": 43709965, "link": "https://stackoverflow.com/questions/43709965/retain-html-tags-in-output-from-html-file/43710670#43710670", "title": "Retain HTML tags in output from HTML file", "body": "<p>That's very strange code. You're not using <code>WWW::Mechanize</code> for anything more than fetching the web page, so you may as well use <code>LWP::UserAgent</code> directly. Also, <code>HTML::TokeParser</code> isn't the right tool if you want to extract parr of an HTML resource and print it</p>\n\n<p>You don't even appear to have read the documentation, as <code>$p-&gt;get_trimmed_text(\"moreLink\")</code> will return all text up until the first occurence of a <code>&lt;moreLink&gt;</code> element, which isn't a valid HTML tag. What you have there is the value of the <code>class</code> attribute of the <code>div</code> element you have just found</p>\n\n<p>I would choose <a href=\"https://metacpan.org/pod/Mojo::UserAgent\" rel=\"nofollow noreferrer\"><code>Mojolicious</code></a> for this, as it will fetch the page, build a DOM, and stringify the element you specify, without any additional modules</p>\n\n<p>I've written this, but I'm not in a position to test it at present</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse Mojo::UserAgent;\n\nuse constant URL =&gt; 'http://example.com/';\n\nmy $ua = Mojo::UserAgent-&gt;new;\n\nmy $txn = $ua-&gt;get(URL);\n\nif ( my $err = $txn-&gt;error ) {\n    die \"@{$err}{qw/ code message /};\n}\n\nprint $txn-&gt;res-&gt;dom-&gt;at('div.moduleBody')-&gt;to_string;\n</code></pre>\n"}], "owner": {"reputation": 472, "user_id": 6337701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58414a43e117bb92ebd1da8c091916bd?s=128&d=identicon&r=PG&f=1", "display_name": "Aquaholic", "link": "https://stackoverflow.com/users/6337701/aquaholic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 43710036, "answer_count": 2, "score": 0, "last_activity_date": 1493636070, "creation_date": 1493577413, "last_edit_date": 1493636070, "question_id": 43709965, "link": "https://stackoverflow.com/questions/43709965/retain-html-tags-in-output-from-html-file", "title": "Retain HTML tags in output from HTML file", "body": "<p>I'm trying to extract text and tags from a HTML webpage into a text file.</p>\n\n<p>Here is the input webpage content (when viewed in view:source mode):</p>\n\n<pre><code>&lt;div class=\"moduleBody\"&gt;In addition, &lt;b&gt;ABC provides&lt;/b&gt; dual finishing and detailing &lt;u&gt;products&lt;/u&gt;, including a system of cleaners, dressings, polishes, waxes and other products.&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Safety and Graphics Business&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;The Safety and Graphics segment serves a range of markets for the safety, security and productivity of people, facilities and systems. Its &lt;b&gt;product offerings&lt;/b&gt; include personal protection products, such as &lt;u&gt;respiratory, hearing, eye and fall protection&lt;/u&gt; equipment;&lt;div class=\"moreLink\"&gt;\n</code></pre>\n\n<p>The following code is working fine for extracting the text alone, but it is taking off the <code>&lt;p&gt;</code>, <code>&lt;/p&gt;</code>, <code>&lt;u&gt;</code>, <code>&lt;/u&gt;</code>, <code>&lt;b&gt;</code> and <code>&lt;/b&gt;</code> as well as other HTML tags, which I want to preserve.</p>\n\n<pre><code>use WWW::Mechanize;\n\nuse threads;\n\nmy $mech = WWW::Mechanize-&gt;new;\n\nmy $Lvalue = \"\";\n\n$mech-&gt;get($link);\n$mech-&gt;quiet(1);\n\nmy $p = HTML::TokeParser-&gt;new(\\$mech-&gt;content);\n\nwhile ( my $tag1 = $p-&gt;get_tag('div') ) {\n\n    if ( $tag1-&gt;[1]{class} and $tag1-&gt;[1]{class} eq 'moduleBody' ) {\n\n        $Lvalue = $p-&gt;get_trimmed_text(\"moreLink\");\n        $Lvalue =~ s/$find1/|/g;\n        $Lvalue =~ s/$find2/|/g;\n\n        print $fh \"$ticker^|$Lvalue\\n\";\n    }\n}\n</code></pre>\n\n<p>The output from the above code is:</p>\n\n<pre><code>In addition, ABC provides dual finishing and detailing products, including a system of cleaners, dressings, polishes, waxes and other products. Safety and Graphics Business The Safety and Graphics segment serves a range of markets for the safety, security and productivity of people, facilities and systems. Its product offerings include personal protection products, such as respiratory, hearing, eye and fall protection equipment;\n</code></pre>\n\n<p>Effectively, my code is removing the HTML tags which I want to retain.\nI feel that \"get_trimmed_text\" may need to be tweaked to retain the p,/p,b and /b (and other html) tags.\nCan someone help with any required changes to the code please?</p>\n\n<p><strong>To clearly state the requirements:</strong>\nI'm looking for a perl function, which can help extract the (TEXT+ ALL HTML TAGS) that lie between \"<code>&lt;div class=\"moduleBody\"&gt;</code>\" and \"<code>&lt;div class=\"moreLink\"&gt;</code>\" on a webpage (as quoted in example input text above). I'm open to using other functions apart from get_trimmed_text. </p>\n\n<p>Thanks a lot.</p>\n\n<p><strong>ANSWER To THIS QUERY - for general audience</strong>\nThe response provided by @Sinan\u00dcn\u00fcr works well. Thanks @Sinan\u00dcn\u00fcr! +1 and marking it as an answer. \nFor the benefit of general audience, please note that Sinan \u00dcn\u00fcr's code works well as long as you keep the HTML content in the \"<code>my $html = &lt;&lt;HTML;</code>\" variable. The code needs a bit of tweaking to include the following if you are reading a URL:</p>\n\n<pre><code>use LWP::Simple;\nmy $url = \"http://www.example.com/profile?item=66&amp;class=XYZ\";\nmy $html = get($url);\n</code></pre>\n"}, {"tags": ["perl", "shell"], "comments": [{"owner": {"reputation": 4516, "user_id": 1937198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b97a3ec92aed1c16e35c1bf532465d6b?s=128&d=identicon&r=PG", "display_name": "user1937198", "link": "https://stackoverflow.com/users/1937198/user1937198"}, "edited": false, "score": 0, "creation_date": 1493569678, "post_id": 43708603, "comment_id": 74461267, "body": "Because &gt;! is a shell command, why not do the copy within perl?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1493570241, "post_id": 43708603, "comment_id": 74461458, "body": "What is that supposed to do?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 4516, "user_id": 1937198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b97a3ec92aed1c16e35c1bf532465d6b?s=128&d=identicon&r=PG", "display_name": "user1937198", "link": "https://stackoverflow.com/users/1937198/user1937198"}, "edited": false, "score": 0, "creation_date": 1493570714, "post_id": 43708603, "comment_id": 74461613, "body": "@user1937198: What do you expect as the parameter to <code>system</code> if not a shell command?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493571384, "post_id": 43708603, "comment_id": 74461837, "body": "@Borodin If you call <code>system</code> with multiple arguments or with a single string that doesn&#39;t contain shell meta-characters, it won&#39;t invoke the shell. So a possible answer would be: A program name (with arguments (maybe)). :-)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1493572268, "post_id": 43708603, "comment_id": 74462094, "body": "@melpomene: I&#39;m aware of that, but in the context that <b>user1937198</b> is saying that the OP&#39;s calls don&#39;t work <i>&quot;Because &gt;! is a shell command&quot;</i>, I&#39;m wondering what <i>they think</i> is acceptable as a parameter to <code>system</code> if not a shell command. I would be surprised if they imagine that <i>only</i> multiple arguments or a program path is valid."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493572371, "post_id": 43708603, "comment_id": 74462138, "body": "@Borodin True. That is a weird comment."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1493578645, "post_id": 43708603, "comment_id": 74464208, "body": "@melpomene, So what? Perl is simply emulating the shell as an optimization then. A bourne shell command is still required. (And you&#39;re not quite right either. The shell is bypassed even when spaces or <code>2&gt;&amp;1</code> are used despite being meta characters.)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493578928, "post_id": 43708603, "comment_id": 74464317, "body": "@ikegami Oh, nice. I didn&#39;t know that about <code>2&gt;&amp;1</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1493579113, "post_id": 43708603, "comment_id": 74464368, "body": "@melpomene, <code>perl -E&#39;say $$; system(&quot;ps -o comm,pid,ppid 2&gt;&amp;1&quot;)&#39;</code>"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": false, "score": 2, "last_activity_date": 1493569978, "creation_date": 1493569978, "answer_id": 43708688, "question_id": 43708603, "link": "https://stackoverflow.com/questions/43708603/how-do-i-do-cat-f1-f2-f3-using-system/43708688#43708688", "title": "How do I do &quot;cat f1 f2 &gt;! f3&quot; using &quot;system&quot;?", "body": "<p>The <code>&gt;!</code> redirection operator is not standard. It may not exist in the <code>/bin/sh</code> that perl uses to run your commands. <code>&gt;|</code> is more widespread. And since the purpose of <code>&gt;!</code> or <code>&gt;|</code> is to override the noclobber setting, you shouldn't need to use it at all. You may like to use noclobber in your interactive shell, but in scripts it shouldn't be enabled and <code>&gt;</code> should work the same as <code>&gt;|</code>.</p>\n\n<p>In any case, using <code>system</code> is not the most efficient way to do basic file manipulation tasks from perl.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 7944245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d626bd9f9bc0209454bb433ee35691fd?s=128&d=identicon&r=PG&f=1", "display_name": "silverysword", "link": "https://stackoverflow.com/users/7944245/silverysword"}, "edited": false, "score": 0, "creation_date": 1493696834, "post_id": 43710116, "comment_id": 74502928, "body": "This is exactly what I am looking for:system(&#39;/bin/csh&#39;, &#39;-c&#39;, &#39;cat f1 f2 &gt;! f3&#39;);"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 13, "user_id": 7944245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d626bd9f9bc0209454bb433ee35691fd?s=128&d=identicon&r=PG&f=1", "display_name": "silverysword", "link": "https://stackoverflow.com/users/7944245/silverysword"}, "edited": false, "score": 0, "creation_date": 1493733434, "post_id": 43710116, "comment_id": 74522408, "body": "Yes, but I don&#39;t think that&#39;s what you should be using."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1493578296, "creation_date": 1493578296, "answer_id": 43710116, "question_id": 43708603, "link": "https://stackoverflow.com/questions/43708603/how-do-i-do-cat-f1-f2-f3-using-system/43710116#43710116", "title": "How do I do &quot;cat f1 f2 &gt;! f3&quot; using &quot;system&quot;?", "body": "<p>That appears to be a <code>csh</code> command, so you will need to use <code>csh</code>.</p>\n\n<pre><code>system('/bin/csh', '-c', 'cat f1 f2 &gt;! f3');\n</code></pre>\n\n<p>That said, <code>csh</code> is a pretty bad shell. You should consider switching to the bourne shell (especially for scripting).</p>\n\n<pre><code>system('/bin/sh', '-c', 'cat f1 f2 &gt; f3');\n</code></pre>\n\n<p>The above can be shortened to the following:</p>\n\n<pre><code>system('cat f1 f2 &gt; f3');\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7944245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d626bd9f9bc0209454bb433ee35691fd?s=128&d=identicon&r=PG&f=1", "display_name": "silverysword", "link": "https://stackoverflow.com/users/7944245/silverysword"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 43710116, "answer_count": 2, "score": -3, "last_activity_date": 1493578296, "creation_date": 1493569428, "last_edit_date": 1493570619, "question_id": 43708603, "link": "https://stackoverflow.com/questions/43708603/how-do-i-do-cat-f1-f2-f3-using-system", "title": "How do I do &quot;cat f1 f2 &gt;! f3&quot; using &quot;system&quot;?", "body": "<p>I tried all of the following with no luck:</p>\n\n<pre><code>system \"cat f1 f2 &gt;! f3\";\nsystem 'cat f1 f2 &gt;! f3';\nsystem \"cat f1 f2 \\&gt;\\! f3\";\n`cat f1 f2 &gt;! f3`;\n</code></pre>\n\n<p>How do I do this?</p>\n"}, {"tags": ["perl", "xs"], "comments": [{"owner": {"reputation": 5721, "user_id": 3823831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e10a2607a7827988b6ac570fe168e02a?s=128&d=identicon&r=PG", "display_name": "TheGreatContini", "link": "https://stackoverflow.com/users/3823831/thegreatcontini"}, "edited": false, "score": 0, "creation_date": 1493592484, "post_id": 43705716, "comment_id": 74468245, "body": "&quot;I need to pass NULL, NULL instead of EC_POINT *q, const BIGNUM *m&quot; --  This doesn&#39;t make sense.  What are thinking that the NULL <code>q</code> corresponds to in EC terminology?  The point at infinity?  Same question for <code>m</code>?  Does NULL correspond to 0?  I ask because there may be a better way of trying to do whatever you are trying to do."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1493578940, "post_id": 43710090, "comment_id": 74464319, "body": "Addeding <code>use constant NULL =&gt; \\0;</code> would make things nicer :)"}, {"owner": {"reputation": 925, "user_id": 3090865, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b2fac1574e64da63ad35bafba6a7a35e?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg G", "link": "https://stackoverflow.com/users/3090865/oleg-g"}, "edited": false, "score": 0, "creation_date": 1493610275, "post_id": 43710090, "comment_id": 74471649, "body": "Thank you, that works! If the message was &quot;argument is not a reference&quot; I could guess :)"}], "tags": [], "owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "is_accepted": true, "score": 3, "last_activity_date": 1493578155, "creation_date": 1493578155, "answer_id": 43710090, "question_id": 43705716, "link": "https://stackoverflow.com/questions/43705716/how-to-pass-c-null-to-xs-based-function/43710090#43710090", "title": "How to pass C NULL to XS based function?", "body": "<p>According to the typemap, passing a reference to zero <code>\\0</code> should work:</p>\n\n<pre><code>Crypt::OpenSSL::EC::EC_POINT::mul($group, $r, $n, \\0, \\0, $ctx);\n</code></pre>\n"}], "owner": {"reputation": 925, "user_id": 3090865, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b2fac1574e64da63ad35bafba6a7a35e?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg G", "link": "https://stackoverflow.com/users/3090865/oleg-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 43710090, "answer_count": 1, "score": 2, "last_activity_date": 1493578155, "creation_date": 1493550562, "last_edit_date": 1495542361, "question_id": 43705716, "link": "https://stackoverflow.com/questions/43705716/how-to-pass-c-null-to-xs-based-function", "title": "How to pass C NULL to XS based function?", "body": "<p>I am trying to use Crypt::OpenSSL::EC::EC_POINT::mul() function from Crypt::OpenSSL::EC module. It has such C prototype:</p>\n\n<pre><code>int EC_POINT_mul(const EC_GROUP *group, EC_POINT *r, const BIGNUM *n, const EC_POINT *q, const BIGNUM *m, BN_CTX *ctx)\n</code></pre>\n\n<p>And I need to pass NULL, NULL instead of <code>EC_POINT *q</code>, <code>const BIGNUM *m</code> as it made here: <a href=\"https://stackoverflow.com/a/12482384/3090865\">https://stackoverflow.com/a/12482384/3090865</a></p>\n\n<p>But this module has such typemap:</p>\n\n<pre><code>INPUT\nBIGNUM\n    if( ! SvROK( $arg ) ) { croak( \\\"argument is not an object\\\" ); }\n    $var = (${type}) SvIV( SvRV( $arg ) );\n\nEC_METHOD\n    if( ! SvROK( $arg ) ) { croak( \\\"argument is not an object\\\" ); }\n    $var = (${type}) SvIV( SvRV( $arg ) );\n\nEC_GROUP\n    if( ! SvROK( $arg ) ) { croak( \\\"argument is not an object\\\" ); }\n    $var = (${type}) SvIV( SvRV( $arg ) );\n\nEC_POINT\n    if( ! SvROK( $arg ) ) { croak( \\\"argument is not an object\\\" ); }\n    $var = (${type}) SvIV( SvRV( $arg ) );\n\nEC_KEY\n    if( ! SvROK( $arg ) ) { croak( \\\"argument is not an object\\\" ); }\n    $var = (${type}) SvIV( SvRV( $arg ) );\n</code></pre>\n\n<p>So, if i'll pass undef or 0, i'll get \"argument is not an object\" error.\nIs it possible to make what I want without changing this module? Maybe I can create NULL-based object somehow?</p>\n"}, {"tags": ["mysql", "sql", "database", "perl"], "comments": [{"owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "edited": false, "score": 0, "creation_date": 1493542929, "post_id": 43704627, "comment_id": 74453964, "body": "<code>&quot;NULL&quot;</code> - is a string value. Try to use zero length string <code>&quot;&quot;</code>. Or set the list of columns except for the first: <code>insert into annotations(column2, column3, ...) values ( seven ? ); execute(@tab[0..4],&quot;1&quot;,&quot;DB&quot;)</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "edited": false, "score": 0, "creation_date": 1493554813, "post_id": 43704627, "comment_id": 74456848, "body": "@Mike: I doubt if <code>&quot;&quot;</code> will work, as it&#39;s still a string. The official ways to invoke autoincrementation are to pass <code>0</code>, or <code>undef</code> if the column is <code>NOT NULL</code>, or nothing at all by leaving the column out of the list."}, {"owner": {"reputation": 10205, "user_id": 2385479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74bf7b5d8cd16c1fb7f987b9c25f13d9?s=128&d=identicon&r=PG", "display_name": "Isaac Bennetch", "link": "https://stackoverflow.com/users/2385479/isaac-bennetch"}, "edited": false, "score": 0, "creation_date": 1493648215, "post_id": 43704627, "comment_id": 74484612, "body": "I removed the phpMyAdmin tag for you since this doesn&#39;t seem related to that application."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 7860780, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10209902719497429/picture?type=large", "display_name": "JB670", "link": "https://stackoverflow.com/users/7860780/jb670"}, "edited": false, "score": 0, "creation_date": 1493558147, "post_id": 43706250, "comment_id": 74457724, "body": "Thank you for your help, but I don&#39;t see extactly where I should put  undef. Could you tell me more ?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 7, "user_id": 7860780, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10209902719497429/picture?type=large", "display_name": "JB670", "link": "https://stackoverflow.com/users/7860780/jb670"}, "edited": false, "score": 0, "creation_date": 1493558565, "post_id": 43706250, "comment_id": 74457836, "body": "@J-bFiancette: In place of the <code>&quot;NULL&quot;</code> which I explained was wrong. Or you could use <code>0</code>."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1493554593, "creation_date": 1493554593, "answer_id": 43706250, "question_id": 43704627, "link": "https://stackoverflow.com/questions/43704627/inserting-into-a-mysql-table-with-an-auto-increment-column/43706250#43706250", "title": "Inserting into a MySQL table with an auto-increment column", "body": "<p>You are trying to insert the <em>string</em> <code>\"NULL\"</code> into an <em>integer</em> column</p>\n\n<p>If you want to override the autoincrement behaviour then use a number such as 100 here</p>\n\n<p>If you want MySQL to generate the numbers, then use zero <code>0</code> or, if the column is <code>NOT NULL</code> then you can use <code>undef</code></p>\n"}, {"tags": [], "owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "is_accepted": false, "score": 1, "last_activity_date": 1493660996, "creation_date": 1493660996, "answer_id": 43723793, "question_id": 43704627, "link": "https://stackoverflow.com/questions/43704627/inserting-into-a-mysql-table-with-an-auto-increment-column/43723793#43723793", "title": "Inserting into a MySQL table with an auto-increment column", "body": "<p>Use <code>undef</code> in perl for inserting default values in MySQL table. So, here you need to modify your line as:<br>\n<code>$ins-&gt;execute(undef, $tab[0], $tab[1], $tab[2], $tab[3], $tab[4], \"1\", \"DB\")\n      or die \"Erreur insertion : \" . $ins-&gt;errstr();</code></p>\n\n<p>In this case, it will auto-increment the column.</p>\n"}], "owner": {"reputation": 7, "user_id": 7860780, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10209902719497429/picture?type=large", "display_name": "JB670", "link": "https://stackoverflow.com/users/7860780/jb670"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1117, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493660996, "creation_date": 1493542494, "last_edit_date": 1493648147, "question_id": 43704627, "link": "https://stackoverflow.com/questions/43704627/inserting-into-a-mysql-table-with-an-auto-increment-column", "title": "Inserting into a MySQL table with an auto-increment column", "body": "<p>I'm trying to insert data into my database with a Perl script, but there's something wrong with my code.</p>\n\n<p>I previously created a table <code>annotations</code> with eight columns, and the first one is an auto incremented primary key. I also need the two last columns to be filled with <code>1</code> and <code>DB</code> on each row.</p>\n\n<p>The errors I get when I launch my program in the prompt are :</p>\n\n<blockquote>\n  <p>DBD::mysql::st execute failed: Incorrect integer value: 'NULL' for column 'id_anntion' at row 1 at C:\\Users\\Jean Baptiste\\cours\\Base de donn\u00daes\\Dossier\\programmes\\remplissage_table_projet.pl line 25,  line 1.<br>\n  Erreur insertion : Incorrect integer value: 'NULL' for column 'id_anntion' at row 1 at C:\\Users\\Jean Baptiste\\cours\\Base de donn\u00daes\\Dossier\\programmes\\remplissage_table_projet.pl line 25,  line 1.  </p>\n</blockquote>\n\n<p>And this is the code :</p>\n\n<pre><code>use DBI;\nuse strict;\nuse utf8;\n\nuse warnings;\n\nmy ($ligne, @tab);\n\n# Connexion \u00e0 la base de donn\u00e9es\nmy $dbh = DBI-&gt;connect( \"DBI:mysql:database=projet;host=localhost\", \"root\", \"\" )\n  or die \"Erreur de connexion : \" . DBI-&gt;errstr();\n\n\n# Gestion de l'encodage UTF-8\n$dbh-&gt;{'mysql_enable_utf8'} = 1;\n$dbh-&gt;do('set names utf8');\n\n# Pr\u00e9paration d'une requ\u00eate pour l'insertion de valeurs dans la BDD\nmy $ins = $dbh-&gt;prepare(\"INSERT INTO annotations VALUES (?, ?, ?, ?, ?, ?, ?, ?)\")\n  or die \"Probleme preparation : \" . $dbh-&gt;errstr();\n\nopen( FILEIN, '&lt;:encoding(utf8)', 'alsace_DB.csv' );\nwhile ( $ligne = &lt;FILEIN&gt; ) {\n    chomp($ligne);\n    @tab = split( /;/, $ligne );\n    $ins-&gt;execute(\"NULL\", $tab[0], $tab[1], $tab[2], $tab[3], $tab[4], \"1\", \"DB\")\n      or die \"Erreur insertion : \" . $ins-&gt;errstr();\n}\nclose(FILEIN);\n\n# D\u00e9connexion de la base de donn\u00e9es\n$dbh-&gt;disconnect();\n</code></pre>\n\n<p>I know there's something to do with the <code>\"NULL\"</code> part but I can't tell what. And I think it's not the only problem.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493519219, "post_id": 43702125, "comment_id": 74449470, "body": "You&#39;ll need to insert the line break + indent where you want it yourself."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1493519545, "creation_date": 1493519545, "answer_id": 43702355, "question_id": 43702125, "link": "https://stackoverflow.com/questions/43702125/in-perl-i-am-trying-to-print-the-env-variables-and-their-values-in-2-different/43702355#43702355", "title": "In perl, I am trying to print the ENV variables and their values in 2 different columns but its not working", "body": "<pre><code>use Text::Wrap qw( wrap );\n\n# local $Text::Wrap::columns = ...;  # Default = 76\n\nmy $indent = \" \" x ($longest + 1);\n\nfor my $key ( sort keys %ENV ) {\n   printf(\"%-${longest}s %s\\n\", $key, wrap(\"\", $indent, $ENV{$key}));\n}\n</code></pre>\n\n<p>Alternatively, one could probably use <a href=\"http://search.cpan.org/perldoc?Perl6::Form\" rel=\"nofollow noreferrer\">Perl6::Form</a> (a Perl5 module that provides Perl6-style forms).</p>\n"}], "owner": {"reputation": 22, "user_id": 7475620, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QtllEDldJpc/AAAAAAAAAAI/AAAAAAAAAw4/BCa52lX_yYY/photo.jpg?sz=128", "display_name": "AshR", "link": "https://stackoverflow.com/users/7475620/ashr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 43702355, "answer_count": 1, "score": 0, "last_activity_date": 1493519545, "creation_date": 1493516740, "question_id": 43702125, "link": "https://stackoverflow.com/questions/43702125/in-perl-i-am-trying-to-print-the-env-variables-and-their-values-in-2-different", "title": "In perl, I am trying to print the ENV variables and their values in 2 different columns but its not working", "body": "<pre><code>my $longest=0;\n\nforeach my $key ( keys %ENV ) {\nmy $key_length = length( $key );\n$longest = $key_length if $key_length &gt; $longest;\n}\nforeach my $key ( sort keys %ENV ) {\nprintf \"%-${longest}s %s\\n\", $key, $ENV{$key};\n</code></pre>\n\n<p>This does print the ENV variable name and value in two separate columns ; \nBut the ENV values that are long, wrap around :(</p>\n\n<p>Any pointers on how I can ensure that the second column doesn't wrap around to first columns space ?</p>\n\n<p>Output I am getting</p>\n\n<pre><code>xyz  123\nabc  456,\n789\n</code></pre>\n\n<p>Desired output   </p>\n\n<pre><code>xyz  123\nabc  456,\n     789\n</code></pre>\n"}, {"tags": ["perl", "ubuntu-16.04", "cpan"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1493509250, "post_id": 43701498, "comment_id": 74447929, "body": "I&#39;d start by checking that TMPDIR points to somewhere you have permission to write and on which there&#39;s free space"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1493510149, "post_id": 43701498, "comment_id": 74448095, "body": "<code>Cannot allocate memory</code> sounds like you&#39;re running out of RAM. You could try <code>cpanm</code> instead."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1493510741, "post_id": 43701498, "comment_id": 74448195, "body": "(cpanm can be found at <a href=\"https://github.com/miyagawa/cpanminus#installation\" rel=\"nofollow noreferrer\">github.com/miyagawa/cpanminus#installation</a>)"}, {"owner": {"reputation": 805, "user_id": 396014, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9c44d60482dd671799ac303bddb0a6b3?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/396014/steve"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1493584184, "post_id": 43701498, "comment_id": 74466047, "body": "@melpomene that&#39;s a good bet.  I discovered the box only has 1gb.  I&#39;m going to get some more, but might give this a try anyway.  Do you know of any downside to using it vs CPAN?"}, {"owner": {"reputation": 805, "user_id": 396014, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9c44d60482dd671799ac303bddb0a6b3?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/396014/steve"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493584400, "post_id": 43701498, "comment_id": 74466093, "body": "@ikegami when I ran cpan it gave options for the auto config of local::lib, sudo, and manual.  I took local::lib because it was the default.  Maybe I should have used sudo?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1493586926, "post_id": 43701498, "comment_id": 74466735, "body": "No downside for normal use. AFAIK it doesn&#39;t have any integration with cpantesters like <a href=\"https://metacpan.org/pod/CPAN::Reporter\" rel=\"nofollow noreferrer\">metacpan.org/pod/CPAN::Reporter</a> provides for cpan, only a separate script, but that doesn&#39;t affect most people."}], "owner": {"reputation": 805, "user_id": 396014, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9c44d60482dd671799ac303bddb0a6b3?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/396014/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 811, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493509137, "creation_date": 1493509137, "question_id": 43701498, "link": "https://stackoverflow.com/questions/43701498/cpan-on-ubuntu-cant-locate-local-lib-pm", "title": "CPAN on Ubuntu Can&#39;t locate local/lib.pm", "body": "<p>I just set up an Ubuntu 16.04 box and am trying to get some Perl modules installed.  I launched CPAN, and it went through the automatic config procedure.  At the end it dumped a few questionable messages:</p>\n\n<pre><code>Couldn't untar local-lib-2.000019.tar: 'Cannot allocate memory'\n'YAML' not installed, will not store persistent state\n  HAARG/local-lib-2.000019.tar.gz\n  Had problems unarchiving. Please build manually\nCan't locate local/lib.pm in @INC (you may need to install the local::lib module) (@INC contains: /home/steve/perl5/lib/perl5 /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.22.1 /usr/local/share/perl/5.22.1 /usr/lib/x86_64-linux-gnu/perl5/5.22 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.22 /usr/share/perl/5.22 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base /home/steve/waternow) at /usr/share/perl/5.22/CPAN/FirstTime.pm line 1347.\n</code></pre>\n\n<p>When I restarted it, it came up with the CPAN shell command line like nothing is wrong.  Did it get configured correctly, or is there something else I need to do?  I'm not a Lunix noob but not an expert either.</p>\n\n<p>Also are there any better options for installing Perl modules on Ubuntu besides CPAN (for example like Activestate Perl Package Manager on Windows)?  I've never been too fond of CPAN because of experiences like this.</p>\n"}, {"tags": ["arrays", "perl", "nested-loops"], "comments": [{"owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "edited": false, "score": 3, "creation_date": 1493504701, "post_id": 43700925, "comment_id": 74447075, "body": "Put the return values in a hash."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1493506638, "post_id": 43700925, "comment_id": 74447453, "body": "What number of objects and acceptable values do you expect?"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1493509294, "post_id": 43701448, "comment_id": 74447941, "body": "(<code>exists</code> is not actually needed since every value in the hash is true)"}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1493512873, "post_id": 43701448, "comment_id": 74448542, "body": "@ikegami true, I removed it for simplicity. Still, using <code>exists</code> would be <i>slightly</i> faster, right?"}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 1, "creation_date": 1493558509, "post_id": 43701448, "comment_id": 74457818, "body": "If it can&#39;t buy you time to brew a coffee, the speed optimization isn&#39;t worth it."}], "tags": [], "owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "is_accepted": true, "score": 7, "last_activity_date": 1493512827, "last_edit_date": 1493512827, "creation_date": 1493508642, "answer_id": 43701448, "question_id": 43700925, "link": "https://stackoverflow.com/questions/43700925/check-whether-an-array-contains-a-value-from-another-array/43701448#43701448", "title": "Check whether an array contains a value from another array", "body": "<p>You could transform the accepted return values into a hash</p>\n\n<pre><code>my %values = map { $_ =&gt; 1 } @acceptedValues;\n</code></pre>\n\n<p>And  <code>grep</code> with  the  condition that  the key  exists  instead of  your\noriginal grep:</p>\n\n<pre><code>my @allowed = grep $values{ $_-&gt;method }, @objects;\n</code></pre>\n\n<p>Anyway, <code>grep</code> is pretty  fast in itself, and this is just  an idea of a\ncommon approach  to checking if  an element is in  an array. Try  not to\noptimize what's not  needed, since it would only be  worth in really big\narrays. Then you  could for example sort the accepted  results array and\nuse a binary  search, or cache results if they  repeat. But again, don't\nworry with this kind of optimisation unless you're dealing with hundreds\nof thousands of items \u2014 or more.</p>\n"}, {"tags": [], "owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "is_accepted": false, "score": 1, "last_activity_date": 1493662084, "creation_date": 1493662084, "answer_id": 43724047, "question_id": 43700925, "link": "https://stackoverflow.com/questions/43700925/check-whether-an-array-contains-a-value-from-another-array/43724047#43724047", "title": "Check whether an array contains a value from another array", "body": "<p>Elements supposed to be present in given arrays seems unique. So, I will make a hash containing the count of elements from both arrays. If there is any element with count greater than 1, it means its present in both the arrays.<br></p>\n\n<pre><code>my %values;\nmy @allowed;\nmap {$values{$_}++} (@acceptableValues, @objects);\nfor (keys %values) {\n    push @allowed, $_ if $values{$_} &gt; 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 5145211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hCe6S.jpg?s=128&g=1", "display_name": "Lilith", "link": "https://stackoverflow.com/users/5145211/lilith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1230, "favorite_count": 2, "accepted_answer_id": 43701448, "answer_count": 2, "score": 6, "last_activity_date": 1493662084, "creation_date": 1493503703, "question_id": 43700925, "link": "https://stackoverflow.com/questions/43700925/check-whether-an-array-contains-a-value-from-another-array", "title": "Check whether an array contains a value from another array", "body": "<p>I have an array of objects, and an array of acceptable return values for a particular method. How do I reduce the array of objects to only those whose method in question returns a value in my array of acceptable values?</p>\n\n<p>Right now, I have this:</p>\n\n<pre><code>my @allowed = grep {\n    my $object = $_;\n    my $returned = $object-&gt;method;\n    grep {\n        my $value = $_;\n        $value eq $returned;\n    } @acceptableValues;\n} @objects;\n</code></pre>\n\n<p>The problem is that this is a compound loop, which I'd like to avoid. This program is meant to scale to arbitrary sizes, and I want to minimize the number of iterations that are run.</p>\n\n<p>What's the best way to do this?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493496148, "post_id": 43699977, "comment_id": 74444909, "body": "<i>&quot;except certain word&quot;</i> What is that certain word? Is it always going to be <code>all</code> or <code>ALL</code>? How do we distinguish the part you want from the part you don&#39;t?"}, {"owner": {"reputation": 252, "user_id": 4692887, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/nHGer.png?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/4692887/alexander"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493496244, "post_id": 43699977, "comment_id": 74444931, "body": "yes, it is always going to be all or ALL"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1493496271, "post_id": 43699977, "comment_id": 74444941, "body": "Why not just write <code>$input = &quot;ALL&quot;</code> then?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493496281, "post_id": 43699977, "comment_id": 74444947, "body": "So what&#39;s wrong with <code>$input = &#39;ALL&#39;</code>?"}, {"owner": {"reputation": 252, "user_id": 4692887, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/nHGer.png?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/4692887/alexander"}, "edited": false, "score": 0, "creation_date": 1493496360, "post_id": 43699977, "comment_id": 74444978, "body": "because in my case, the user may want to input ALL or all"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1493496423, "post_id": 43699977, "comment_id": 74445008, "body": "What if the user inputs <code>fall allman</code>?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493496434, "post_id": 43699977, "comment_id": 74445011, "body": "And you need to know the difference? That&#39;s a very poor design! See my answer."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1493496462, "post_id": 43699977, "comment_id": 74445024, "body": "@melpomene: Or even <code>FALL allman</code> :)"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1493496399, "creation_date": 1493496399, "answer_id": 43700020, "question_id": 43699977, "link": "https://stackoverflow.com/questions/43699977/remove-all-characters-except-all-or-all/43700020#43700020", "title": "Remove all characters except &quot;all&quot; or &quot;ALL&quot;", "body": "<p>You want</p>\n\n<pre><code>($input) = $input =~ /(all)/i;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1493580240, "creation_date": 1493580240, "answer_id": 43710414, "question_id": 43699977, "link": "https://stackoverflow.com/questions/43699977/remove-all-characters-except-all-or-all/43710414#43710414", "title": "Remove all characters except &quot;all&quot; or &quot;ALL&quot;", "body": "<p>If there can only be one occurrence of <code>all</code> or <code>ALL</code>:</p>\n\n<pre><code>$input = $input =~ /(all|ALL)/ ? $1 : \"\";\n</code></pre>\n\n<p>If there can be multiple occurrences of <code>all</code> or <code>ALL</code>:</p>\n\n<pre><code>$input =~ s/\\G(?:all|ALL)*\\K.//sg;\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>$input = join('', $input =~ /all|ALL/g );\n</code></pre>\n\n<p>It might be more useful to have an array of matches:</p>\n\n<pre><code>my @matches = $input =~ /all|ALL/g;\n</code></pre>\n"}], "owner": {"reputation": 252, "user_id": 4692887, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/nHGer.png?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/4692887/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1493580240, "creation_date": 1493496085, "last_edit_date": 1493565266, "question_id": 43699977, "link": "https://stackoverflow.com/questions/43699977/remove-all-characters-except-all-or-all", "title": "Remove all characters except &quot;all&quot; or &quot;ALL&quot;", "body": "<p>I have string like this </p>\n\n<pre><code>$input = \"ALL112343\" or $input = \"all11234\" or $input = \"ALL 1234\"\n</code></pre>\n\n<p>my expect output would be</p>\n\n<pre><code>$input = \"ALL\" or $input = \"all\"\n</code></pre>\n\n<p>so, how can I remove all the character in that string except the word \"all\" or \"ALL\"? </p>\n\n<p>Thank you all for your help,</p>\n"}, {"tags": ["perl", "directory-structure"], "comments": [{"owner": {"reputation": 4883, "user_id": 62138, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65881e840f44a05c4f3b0aea257da42e?s=128&d=identicon&r=PG", "display_name": "salparadise", "link": "https://stackoverflow.com/users/62138/salparadise"}, "edited": false, "score": 0, "creation_date": 1493486128, "post_id": 43698111, "comment_id": 74441691, "body": "<a href=\"https://metacpan.org/source/RJBS/PathTools-3.62/lib/File/Spec/Win32.pm#L130-162\" rel=\"nofollow noreferrer\">code</a> looks the same to me, except that early return for catdir."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 4883, "user_id": 62138, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65881e840f44a05c4f3b0aea257da42e?s=128&d=identicon&r=PG", "display_name": "salparadise", "link": "https://stackoverflow.com/users/62138/salparadise"}, "edited": false, "score": 0, "creation_date": 1493491117, "post_id": 43698111, "comment_id": 74443358, "body": "@salparadise You&#39;re looking at <code>File::Spec::Win32</code>, and the OP hasn&#39;t said what platform they&#39;re using."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493491251, "post_id": 43698111, "comment_id": 74443406, "body": "How can you not know whether you&#39;re dealing with a file or a directory?"}, {"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493491636, "post_id": 43698111, "comment_id": 74443538, "body": "@Borodin When doing a readdir, for instance. to check <code>-d</code> I need the full path (i.e. concatenate the read item with the read dir), so I don&#39;t know in advance what they are. (This is just an example, not my actual case.)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1493491660, "post_id": 43698111, "comment_id": 74443549, "body": "This probably makes a difference on VMS and other &quot;exotic&quot; systems. If you&#39;re only dealing with Unix-ish systems and Windows, you can just use <code>&#39;abc&#47;def&#47;ghi&#39;</code> and be done with it."}, {"owner": {"reputation": 4883, "user_id": 62138, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65881e840f44a05c4f3b0aea257da42e?s=128&d=identicon&r=PG", "display_name": "salparadise", "link": "https://stackoverflow.com/users/62138/salparadise"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493491747, "post_id": 43698111, "comment_id": 74443583, "body": "@borodin sure, he did have a comment on his example of using Windows, hence the link, it wasn&#39;t meant as an answer, just a pointer to actual source code."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493495578, "post_id": 43698111, "comment_id": 74444740, "body": "@BramVanroy: The answer to that would be to <code>chdir</code> to the directory you are reading and test the bare node name, letting the system work out the full path. What is your acual case?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 4883, "user_id": 62138, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65881e840f44a05c4f3b0aea257da42e?s=128&d=identicon&r=PG", "display_name": "salparadise", "link": "https://stackoverflow.com/users/62138/salparadise"}, "edited": false, "score": 0, "creation_date": 1493495680, "post_id": 43698111, "comment_id": 74444775, "body": "@salparadise: Oh I didn&#39;t see that. It doesn&#39;t exactly stand out! But I think that relying on the quirks of a particular platform rather spoils the point of <code>File::Spec</code>."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1493505779, "post_id": 43698111, "comment_id": 74447294, "body": "@melpomene Internally, yes. But if anything outside your program is going to see it, it must be in canonical form to avoid problems."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493580465, "post_id": 43698111, "comment_id": 74464818, "body": "It matters with native VMS paths. I think they look like <code>[DIR]FILE;VERSION</code>"}], "answers": [{"comments": [{"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "edited": false, "score": 0, "creation_date": 1493491791, "post_id": 43698760, "comment_id": 74443600, "body": "So as Melpomene comments on the OP, I&#39;d probably be safe when only concerning UNIX-based systems and Windows? Thanks for the link to Path::Tiny, I&#39;ll have a look at it. Any reason (except for the topic at hand) that it&#39;s better than the functionality in File::Spec?"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "edited": false, "score": 0, "creation_date": 1493575511, "post_id": 43698760, "comment_id": 74463126, "body": "@BramVanroy - imho, it is safe - but see the EDIT."}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": true, "score": 4, "last_activity_date": 1493575473, "last_edit_date": 1493575473, "creation_date": 1493488157, "answer_id": 43698760, "question_id": 43698111, "link": "https://stackoverflow.com/questions/43698111/danger-when-using-catfile-for-a-path-ending-in-a-directory/43698760#43698760", "title": "Danger when using catfile for a path ending in a directory?", "body": "<p>The difference of the <code>catdir</code> and <code>catfile</code> is usually very small (<strong>depends on the used OS</strong>). On the UNIX, the <code>catfile</code> does <code>catdir</code> anyway for the <em>directory</em> elements (e.g. minus the last (file) part) and then appends the <em>file</em> part. The <code>catdir</code> does some path-cleaning logic. On the windows platform the differences even less.</p>\n\n<p>You can check the <a href=\"https://metacpan.org/source/RJBS/PathTools-3.62/lib/File/Spec\" rel=\"nofollow noreferrer\">source of the module(s) for the different OS-es</a> yourself. </p>\n\n<p>The main thing is: these routines doesn't do any filesystem access, just doing some logical path cleaning.</p>\n\n<hr>\n\n<p><strong>Alternative:</strong></p>\n\n<p>If you don't care about the other OS-es as UNIX-like (e.g. Linux, FreeBSD, Mac OS X etc..) <strong>and</strong> Windows, me personally recommending to use the <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> module. From it's doc:</p>\n\n<blockquote>\n  <p>This module provides a small, fast utility for working with file\n  paths. It is friendlier to use than File::Spec and provides easy\n  access to functions from several other core file handling modules. It\n  aims to be smaller and faster than many alternatives on CPAN, while\n  helping people do many common things in consistent and less\n  error-prone ways.</p>\n  \n  <p>Path::Tiny does not try to work for anything except Unix-like and\n  Win32 platforms.</p>\n</blockquote>\n\n<p>IMHO - it is one of the best modules on CPAN - real treasure. For example, for the path creation you should use the <code>child</code> method - again from the docs:</p>\n\n<blockquote>\n<pre><code>$file = path(\"/tmp\")-&gt;child(\"foo.txt\"); # \"/tmp/foo.txt\"\n$file = path(\"/tmp\")-&gt;child(@parts);\n</code></pre>\n  \n  <p>Returns a new Path::Tiny object relative to the original. Works like\n  <code>catfile</code> or <code>catdir</code> from File::Spec, but without caring about file\n  or directories.</p>\n</blockquote>\n\n<p>Except the above the <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> module provides easy access to file contents, (also with unicode handling) and every commonly needed \"path\" operations. Drawback: unfortunately, it isn't CORE module, e.g. you need install it from the CPAN.</p>\n\n<h3>EDIT</h3>\n\n<p>Is safe to use <code>catfile</code> for the directories? By me: <em>yes</em> (but maybe some experts will know something else or more). On unix,</p>\n\n<ul>\n<li>the <code>catdir</code> calls the <code>canonpath</code> (which does some logical path-cleaning).</li>\n<li>the <code>catfile</code> calls the <code>canonpath</code> twice, once for the <em>file</em> part and once for the <em>directories</em> (if they are provided),  and concatenate the two results. The concatenation could result some strange looking paths, but they're generally harmless.</li>\n</ul>\n\n<p>On Windows, the differences even less, both will call the path-cleaning routine.</p>\n\n<p>Demo - the following script will generate many combinations of different parts and will use the <code>catdir</code> and <code>catfile</code> (and even two variants of the <code>Path::Tiny</code>)</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse File::Spec::Functions;\nuse Path::Tiny;\n\nmy @parts = qw(x / /x /x/ /x// // //x //x/ //x// /./ /./x /x/./ );\nmy $cwidth=16;\nprint pr(qw(first second catdir catfile path-child path-list)), \"\\n\";\nprint '-' x ($cwidth*6),\"\\n\";\nfor my $first (map { s/x/first/r } @parts) {\n    for my $second ( map { s/x/second/r } @parts) {\n        print pr(\n            $first,\n            $second,\n            catdir($first,$second),\n            catfile($first,$second),\n            path($first)-&gt;child($second),\n            path($first,$second),\n        ), \"\\n\";\n    }\n}\nsub pr {\n    my $str;\n    $str .= sprintf \"%-${cwidth}s\",$_ for @_;\n    return $str;\n}\n</code></pre>\n\n<p>It prints an long result. As you can see bellow the all paths are safe for use for directories and files, just some paths from the <code>catfile</code> isn't \"nice\".</p>\n\n<p>The both \"Path::Tiny\" results are clear and consistent. Contrary, the <code>catfile</code> and <code>catdir</code> will allow to use undefined parts, (not shown in the demo) - and even in such errornous arguments <em>will produce some results</em>, the Path::Tiny <em>will die</em> if you pass undef or null-string to its <code>child</code> method.</p>\n\n<pre><code>first           second          catdir          catfile         path-child      path-list       \n------------------------------------------------------------------------------------------------\nfirst           second          first/second    first/second    first/second    first/second    \nfirst           /               first           first//         first           first           \nfirst           /second         first/second    first//second   first/second    first/second    \nfirst           /second/        first/second    first//second   first/second    first/second    \nfirst           /second//       first/second    first//second   first/second    first/second    \nfirst           //              first           first//         first           first           \nfirst           //second        first/second    first//second   first/second    first/second    \nfirst           //second/       first/second    first//second   first/second    first/second    \nfirst           //second//      first/second    first//second   first/second    first/second    \nfirst           /./             first           first//         first           first           \nfirst           /./second       first/second    first//second   first/second    first/second    \nfirst           /second/./      first/second    first//second   first/second    first/second    \n/               second          /second         /second         /second         /second         \n/               /               /               //              /               /               \n/               /second         /second         //second        /second         /second         \n/               /second/        /second         //second        /second         /second         \n/               /second//       /second         //second        /second         /second         \n/               //              /               //              /               /               \n/               //second        /second         //second        /second         /second         \n/               //second/       /second         //second        /second         /second         \n/               //second//      /second         //second        /second         /second         \n/               /./             /               //              /               /               \n/               /./second       /second         //second        /second         /second         \n/               /second/./      /second         //second        /second         /second         \n/first          second          /first/second   /first/second   /first/second   /first/second   \n/first          /               /first          /first//        /first          /first          \n/first          /second         /first/second   /first//second  /first/second   /first/second   \n/first          /second/        /first/second   /first//second  /first/second   /first/second   \n/first          /second//       /first/second   /first//second  /first/second   /first/second   \n/first          //              /first          /first//        /first          /first          \n/first          //second        /first/second   /first//second  /first/second   /first/second   \n/first          //second/       /first/second   /first//second  /first/second   /first/second   \n/first          //second//      /first/second   /first//second  /first/second   /first/second   \n/first          /./             /first          /first//        /first          /first          \n/first          /./second       /first/second   /first//second  /first/second   /first/second   \n/first          /second/./      /first/second   /first//second  /first/second   /first/second   \n/first/         second          /first/second   /first/second   /first/second   /first/second   \n/first/         /               /first          /first//        /first          /first          \n/first/         /second         /first/second   /first//second  /first/second   /first/second   \n/first/         /second/        /first/second   /first//second  /first/second   /first/second   \n/first/         /second//       /first/second   /first//second  /first/second   /first/second   \n/first/         //              /first          /first//        /first          /first          \n/first/         //second        /first/second   /first//second  /first/second   /first/second   \n/first/         //second/       /first/second   /first//second  /first/second   /first/second   \n/first/         //second//      /first/second   /first//second  /first/second   /first/second   \n/first/         /./             /first          /first//        /first          /first          \n/first/         /./second       /first/second   /first//second  /first/second   /first/second   \n/first/         /second/./      /first/second   /first//second  /first/second   /first/second   \n/first//        second          /first/second   /first/second   /first/second   /first/second   \n/first//        /               /first          /first//        /first          /first          \n/first//        /second         /first/second   /first//second  /first/second   /first/second   \n/first//        /second/        /first/second   /first//second  /first/second   /first/second   \n/first//        /second//       /first/second   /first//second  /first/second   /first/second   \n/first//        //              /first          /first//        /first          /first          \n/first//        //second        /first/second   /first//second  /first/second   /first/second   \n/first//        //second/       /first/second   /first//second  /first/second   /first/second   \n/first//        //second//      /first/second   /first//second  /first/second   /first/second   \n/first//        /./             /first          /first//        /first          /first          \n/first//        /./second       /first/second   /first//second  /first/second   /first/second   \n/first//        /second/./      /first/second   /first//second  /first/second   /first/second   \n//              second          /second         /second         /second         /second         \n//              /               /               //              /               /               \n//              /second         /second         //second        /second         /second         \n//              /second/        /second         //second        /second         /second         \n//              /second//       /second         //second        /second         /second         \n//              //              /               //              /               /               \n//              //second        /second         //second        /second         /second         \n//              //second/       /second         //second        /second         /second         \n//              //second//      /second         //second        /second         /second         \n//              /./             /               //              /               /               \n//              /./second       /second         //second        /second         /second         \n//              /second/./      /second         //second        /second         /second         \n//first         second          /first/second   /first/second   /first/second   /first/second   \n//first         /               /first          /first//        /first          /first          \n//first         /second         /first/second   /first//second  /first/second   /first/second   \n//first         /second/        /first/second   /first//second  /first/second   /first/second   \n//first         /second//       /first/second   /first//second  /first/second   /first/second   \n//first         //              /first          /first//        /first          /first          \n//first         //second        /first/second   /first//second  /first/second   /first/second   \n//first         //second/       /first/second   /first//second  /first/second   /first/second   \n//first         //second//      /first/second   /first//second  /first/second   /first/second   \n//first         /./             /first          /first//        /first          /first          \n//first         /./second       /first/second   /first//second  /first/second   /first/second   \n//first         /second/./      /first/second   /first//second  /first/second   /first/second   \n//first/        second          /first/second   /first/second   /first/second   /first/second   \n//first/        /               /first          /first//        /first          /first          \n//first/        /second         /first/second   /first//second  /first/second   /first/second   \n//first/        /second/        /first/second   /first//second  /first/second   /first/second   \n//first/        /second//       /first/second   /first//second  /first/second   /first/second   \n//first/        //              /first          /first//        /first          /first          \n//first/        //second        /first/second   /first//second  /first/second   /first/second   \n//first/        //second/       /first/second   /first//second  /first/second   /first/second   \n//first/        //second//      /first/second   /first//second  /first/second   /first/second   \n//first/        /./             /first          /first//        /first          /first          \n//first/        /./second       /first/second   /first//second  /first/second   /first/second   \n//first/        /second/./      /first/second   /first//second  /first/second   /first/second   \n//first//       second          /first/second   /first/second   /first/second   /first/second   \n//first//       /               /first          /first//        /first          /first          \n//first//       /second         /first/second   /first//second  /first/second   /first/second   \n//first//       /second/        /first/second   /first//second  /first/second   /first/second   \n//first//       /second//       /first/second   /first//second  /first/second   /first/second   \n//first//       //              /first          /first//        /first          /first          \n//first//       //second        /first/second   /first//second  /first/second   /first/second   \n//first//       //second/       /first/second   /first//second  /first/second   /first/second   \n//first//       //second//      /first/second   /first//second  /first/second   /first/second   \n//first//       /./             /first          /first//        /first          /first          \n//first//       /./second       /first/second   /first//second  /first/second   /first/second   \n//first//       /second/./      /first/second   /first//second  /first/second   /first/second   \n/./             second          /second         /second         /second         /second         \n/./             /               /               //              /               /               \n/./             /second         /second         //second        /second         /second         \n/./             /second/        /second         //second        /second         /second         \n/./             /second//       /second         //second        /second         /second         \n/./             //              /               //              /               /               \n/./             //second        /second         //second        /second         /second         \n/./             //second/       /second         //second        /second         /second         \n/./             //second//      /second         //second        /second         /second         \n/./             /./             /               //              /               /               \n/./             /./second       /second         //second        /second         /second         \n/./             /second/./      /second         //second        /second         /second         \n/./first        second          /first/second   /first/second   /first/second   /first/second   \n/./first        /               /first          /first//        /first          /first          \n/./first        /second         /first/second   /first//second  /first/second   /first/second   \n/./first        /second/        /first/second   /first//second  /first/second   /first/second   \n/./first        /second//       /first/second   /first//second  /first/second   /first/second   \n/./first        //              /first          /first//        /first          /first          \n/./first        //second        /first/second   /first//second  /first/second   /first/second   \n/./first        //second/       /first/second   /first//second  /first/second   /first/second   \n/./first        //second//      /first/second   /first//second  /first/second   /first/second   \n/./first        /./             /first          /first//        /first          /first          \n/./first        /./second       /first/second   /first//second  /first/second   /first/second   \n/./first        /second/./      /first/second   /first//second  /first/second   /first/second   \n/first/./       second          /first/second   /first/second   /first/second   /first/second   \n/first/./       /               /first          /first//        /first          /first          \n/first/./       /second         /first/second   /first//second  /first/second   /first/second   \n/first/./       /second/        /first/second   /first//second  /first/second   /first/second   \n/first/./       /second//       /first/second   /first//second  /first/second   /first/second   \n/first/./       //              /first          /first//        /first          /first          \n/first/./       //second        /first/second   /first//second  /first/second   /first/second   \n/first/./       //second/       /first/second   /first//second  /first/second   /first/second   \n/first/./       //second//      /first/second   /first//second  /first/second   /first/second   \n/first/./       /./             /first          /first//        /first          /first          \n/first/./       /./second       /first/second   /first//second  /first/second   /first/second   \n/first/./       /second/./      /first/second   /first//second  /first/second   /first/second   \n</code></pre>\n"}], "owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 43698760, "answer_count": 1, "score": 3, "last_activity_date": 1493575473, "creation_date": 1493484145, "last_edit_date": 1493491167, "question_id": 43698111, "link": "https://stackoverflow.com/questions/43698111/danger-when-using-catfile-for-a-path-ending-in-a-directory", "title": "Danger when using catfile for a path ending in a directory?", "body": "<p>The <a href=\"http://perldoc.perl.org/File/Spec.html\" rel=\"nofollow noreferrer\"><code>File::Spec</code></a> module provides a way to create cross-OS valid paths. It works as one would expect:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse File::Spec;\n\nmy $file = 'ghi.xml';\nmy $path = File::Spec-&gt;catfile(('abc', 'def'), $file);\nprint $path;\n# Windows: abc/def/ghi.xml\n</code></pre>\n\n<p>A method <code>catdir</code> is also available, which would result in a directory - not a path to a file. </p>\n\n<p>My issue is that I do not know in advance if <code>$file</code> is a file name or a directory name. As far as I have tested, the results are still correct when using a dirname instead, e.g.:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse File::Spec;\n\nmy $file = 'ghi';\nmy $path = File::Spec-&gt;catfile(('abc', 'def'), $file);\nprint $path;\n# Windows: abc/def/ghi\n</code></pre>\n\n<p>But I wonder whether this can cause issues anyway. I am assuming <em>yes</em> because I don't understand why the creators of the module would build two interfaces for the same functionality. However, I cannot find any further explanation in the documentation.</p>\n\n<p>Is it safe to use <code>catfile</code> to create paths to files as well as to directories? If not, what are the caveats?</p>\n"}, {"tags": ["windows", "perl"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1493474955, "post_id": 43695827, "comment_id": 74437965, "body": "For one, you&#39;re missing the scalar sigil (<code>$</code>) at the beginning of this statement: <code>smtp_server =&gt; &quot;smtp.gmail.com&quot;;</code>. Change it to <code>my $smtp_server = &quot;smtp.gmail.com&quot;;</code>. There may be other issues, but that&#39;s a glaring one."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1493475068, "post_id": 43695827, "comment_id": 74437993, "body": "@stevieb: You have a glaring error in your  &quot;fix&quot;; perhaps even two!"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1493475124, "post_id": 43695827, "comment_id": 74438014, "body": "@Borodin not enough coffee yet ;)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493475676, "post_id": 43695827, "comment_id": 74438205, "body": "You have made the all-too-common mistake of writing way too much code before you tried running it. You&#39;ve even written a big fancy comment block which does nothing to help you to write the code. It&#39;s not like building a petrol engine, where you have to pretty much finish the job before you can try it. Programs can be compiled and run well before they are complete, and you should write only a few lines between tests. That way you can be certain where any error lies, and can fix it swiftly. You can also avoid writing large amounts of code based on a false premise, and having to delete it all."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1493474996, "creation_date": 1493474996, "answer_id": 43696647, "question_id": 43695827, "link": "https://stackoverflow.com/questions/43695827/program-to-send-mail-wont-compile/43696647#43696647", "title": "Program to send mail won&#39;t compile", "body": "<p>Well I think it's pretty clear from the messages. You haven't declared (or defined) either <code>$smtp_server</code> or <code>@body</code></p>\n\n<p>This line doesn't do anything useful</p>\n\n<pre><code>smtp_server =&gt; \"smtp.gmail.com\"\n</code></pre>\n\n<p>The <code>=&gt;</code> operator is just a comma that happens to put quotes around its first parameter, so it's the same as</p>\n\n<pre><code>\"smtp_server\", \"smtp.gmail.com\"\n</code></pre>\n\n<p>which just evaluates two strings and discards them</p>\n\n<p>Since you have already successfully defined four other variables on the lines before, I don't understand why you chose to do something different here</p>\n\n<p>As for <code>@body</code>, you never declare it or put anything into it. As the error message says,</p>\n\n<blockquote>\n  <p>did you forget to declare \"my @body\"?</p>\n</blockquote>\n"}], "owner": {"reputation": 41, "user_id": 7237918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e19ac52274d7e412488c67ee382e608?s=128&d=identicon&r=PG&f=1", "display_name": "homey", "link": "https://stackoverflow.com/users/7237918/homey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 43696647, "answer_count": 1, "score": -1, "last_activity_date": 1493475742, "creation_date": 1493469577, "last_edit_date": 1493475742, "question_id": 43695827, "link": "https://stackoverflow.com/questions/43695827/program-to-send-mail-wont-compile", "title": "Program to send mail won&#39;t compile", "body": "<pre><code>use strict;\nuse warnings;\n\nuse Net::SMTP;\n\n# to install Net::SMTP moudle package, run cpan command in command line\n# in the shell type install Net::SMTP\n\nsub send_mail\n####################################################################################################\n#\n# SUBROUTINE : send_mail\n#\n# PURPOSE    : Send an email.\n#\n# INPUT(S)   : smtp_server - Simple Mail Transfer Protocol server\n#              to          - Recipient address\n#              from        - Sender address\n#              subject     - Subject\n#              body        - Reference to an array containing the message body\n#\n# OUTPUT(S)  : 0 - success\n#              1 - failure\n#\n####################################################################################################\n{\n\n\n     my $from    = 'home.yosef@gmail.com';\n     my $to      = 'home.yosef@gmail.com';\n     my $data    = \"A simple test message from Perl script\\n\";\n     my $subject = \"Hello World from Perl script\";\n\n     smtp_server =&gt; \"smtp.gmail.com\";\n\n\n\n    # Connect to the SMTP server\n    my $smtp = Net::SMTP-&gt;new($smtp_server);\n\n    # If connection is successful, send mail\n    if ($smtp) {\n\n        # Establish to/from\n        $smtp-&gt;mail($from);\n        $smtp-&gt;to($to);\n\n        # Start data transfer\n        $smtp-&gt;data();\n\n        # Send the header\n        $smtp-&gt;datasend(\"To: $to\\n\");\n        $smtp-&gt;datasend(\"From: $from\\n\");\n        $smtp-&gt;datasend(\"Subject: $subject\\n\");\n        $smtp-&gt;datasend(\"\\n\");\n\n        # Send the body\n        $smtp-&gt;datasend(@body);\n\n        # End data transfer\n        $smtp-&gt;dataend();\n\n        # Close the SMTP connection\n        $smtp-&gt;quit();\n\n    # If connection fails return with error\n    }\n    else {\n\n        # Print warning\n        warn \"WARNING: Failed to connect to $smtp_server: $!\";\n\n        return 1;\n    }\n\n    return 0;\n}\n\n# Define the message body\nmy @message_body = \"Hello World! from Perl script\\n\";\npush @message_body, \"Add another line!\\n\";\n\n# Send the email!\nsend_mail(\n    smtp_server =&gt; &lt;smtp_server_name&gt;,\n    to          =&gt; &lt;to_address&gt;,\n    from        =&gt; &lt;from_address&gt;,\n    subject     =&gt; 'This is a mail from Perl script',\n    body        =&gt; \\@message_body,\n);\n</code></pre>\n\n<p>I have Windows installed with Strawberry Perl. When I run this script from the command line I get errors and I donn't know what is wrong.</p>\n\n<p>These are the errors:</p>\n\n<blockquote>\n  <p>Global symbol \"$smtp_server\" requires explicit package name (did you forget to declare \"my $smtp_server\"?) at windows_send_mail_with_SMTP.pl line 40.<br>\n  Global symbol \"@body\" requires explicit package name (did you forget to declare \"my @body\"?) at windows_send_mail_with_SMTP.pl line 59.<br>\n  Global symbol \"$smtp_server\" requires explicit package name (did you forget to declare \"my $smtp_server\"?) at windows_send_mail_with_SMTP.pl line 71.<br>\n  Execution of windows_send_mail_with_SMTP.pl aborted due to compilation errors.  </p>\n</blockquote>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1493426633, "last_edit_date": 1493426633, "creation_date": 1493425568, "answer_id": 43690582, "question_id": 43690544, "link": "https://stackoverflow.com/questions/43690544/pass-multiple-arrays-in-perl-string-parameter/43690582#43690582", "title": "Pass multiple arrays in Perl, string parameter", "body": "<p>You can't pass arrays to subs, only scalars. When you do</p>\n\n<pre><code>my $sql = $object-&gt;createInsertSql(\n    'person', @column, @value );\n</code></pre>\n\n<p>you are passing the following to the method:</p>\n\n<pre><code>$object, 'person', $column[0], $column[1], ..., $value[0], $value[1], ...\n</code></pre>\n\n<p>Inside the method, you have</p>\n\n<pre><code>my ( $table, @column, @value ) = @_;\n</code></pre>\n\n<p>First of all, you forgot to account for the invocant. There should be a leading <code>$self</code> parameter.</p>\n\n<p>Secondly, there's no way to know how many of the scalars to add to <code>@column</code> and how many to add to <code>@value</code>, so all but the first are added to <code>@column</code>.</p>\n\n<p>This means you were effectively doing the following:</p>\n\n<pre><code>my $table  = $object;\nmy @column = ( 'person', $column[0], $column[1], ..., $value[0], $value[1], ... );\nmy @value  = ();\n</code></pre>\n\n<p>If you want to pass an array, pass a reference to it instead.</p>\n\n<pre><code>my $sql = $object-&gt;createInsertSql( 'person', \\@column, \\@value );\n</code></pre>\n\n<p>The sub becomes</p>\n\n<pre><code>sub createInsertSql {\n    my ( $self, $table, $column, $value ) = @_;\n    my $sql = 'INSERT INTO '.$table;           # XXX Injection bug\n    $sql .= createInsertColumn(@$column);\n    $sql .= createInsertValue(@$value);\n    return $sql;\n}\n</code></pre>\n\n<hr>\n\n<p>By the way, your code is full of injection errors. You aren't properly converting text into SQL identifiers and SQL string literals.</p>\n\n<p>Fixed:</p>\n\n<pre><code>package SqlCreator;\n\nuse warnings;\nuse strict;\n\nsub new {\n    my ( $class, %args ) = @_;\n    return bless \\%args, $class;\n}\n\nsub createInsertSql{\n    my ( $self, $table, $cols, $vals ) = @_;\n\n    my $dbh = $self-&gt;{dbh};\n\n    return sprintf(\n        'INSERT INTO %s ( %s ) VALUES ( %s )'\n        $dbh-&gt;quote_identifier($table),\n        ( join ', ', map { $dbh-&gt;quote_identifier($_) } @$cols ),\n        ( join ', ', map { $dbh-&gt;quote($_)            } @$vals ),\n    );\n}\n\n1;\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse DBI        qw( );\nuse SqlCreator qw( );\n\nmy $dbh = DBI-&gt;connect(...);\n\nmy $sql_creator = SqlCreator-&gt;new( dbh =&gt; $dbh );\n\nmy @cols = ( 'name', 'gender', 'age' );\nmy @vals = ( 'Mehmed Fatih Temiz', 'male', 28 );\n\nmy $sql = $sql_creator-&gt;createInsertSql( 'person' , \\@cols , \\@vals );\nprint \"$sql\\n\";\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 3791141, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1065521263/picture?type=large", "display_name": "mehfatitem", "link": "https://stackoverflow.com/users/3791141/mehfatitem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 43690582, "answer_count": 1, "score": 0, "last_activity_date": 1493433014, "creation_date": 1493425181, "last_edit_date": 1493433014, "question_id": 43690544, "link": "https://stackoverflow.com/questions/43690544/pass-multiple-arrays-in-perl-string-parameter", "title": "Pass multiple arrays in Perl, string parameter", "body": "<p>I'm beginner in Perl programming, and I want to learn about OOP in Perl. I develop a simple application about sql creator, but I have a problem. I think the problem is passing multiple parameters.</p>\n\n<pre><code>package SqlCreator;\n\nuse warnings;\nuse strict;\n\nsub new {\n    my ($class, %args) = @_;\n    return bless \\%args, $class;\n}\n\nsub editArray {\n    my (@array) = @_;\n    my $text = '';\n    my $arraySize = scalar @array;\n    for(my $i = 1; $i&lt;$arraySize; $i++) {\n        $text .= \"'\" . $array[$i] . \"'\". \",\";\n    }\n    my $length = length $text;\n    $text = substr($text, 0, $length-1);\n    return $text;\n}\n\nsub createInsertColumn {\n    my (@column ) = @_;\n    my $sql = '';\n    $sql .= ' (';\n    $sql .= editArray(@column);\n    $sql .= ')';\n    return $sql;\n}\n\nsub createInsertValue{\n    my (@value) = @_;\n    my $sql = '';\n    $sql .= ' VALUES (';\n    $sql .= editArray(@value);\n    $sql .= ')';\n    return $sql;\n}\n\nsub createInsertSql{\n    my ($table, @column, @value) = @_;\n    my $sql = 'INSERT INTO ' . $table;\n    $sql .= createInsertColumn(@column);\n    $sql .= createInsertValue(@value);\n    return $sql;\n}\n1;\n\nuse warnings;\nuse strict;\n\nuse SqlCreator;\n\nmy $object = SqlCreator-&gt;new;\n\nmy @column = ('name', 'gender', 'age');\nmy @value = ('Mehmed Fatih Temiz', 'male', 28);\n\nmy $sql = $object-&gt;createInsertSql('person', @column, @value);\n\nprint $sql;\n</code></pre>\n\n<p>This is my sample code. If you solve the problem, please help me.</p>\n"}, {"tags": ["perl", "awk", "sed"], "comments": [{"owner": {"reputation": 1091, "user_id": 4474629, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e3d1d6e41980939611b75370816b8843?s=128&d=identicon&r=PG&f=1", "display_name": "Little Code", "link": "https://stackoverflow.com/users/4474629/little-code"}, "reply_to_user": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1493761477, "post_id": 43686903, "comment_id": 74538600, "body": "@MaartenBodewes Wow !  Thanks for seeking me out !  Sorry I deleted it, I was being hounded out with naysayers and downvoters, I tried to explain my reasoning, but that only seemed to make things worse.    But anyway, I appreaciate your generosity, so I&#39;ll go find where I undelete it and undelete it in your honour.  Thanks again.  ;-)"}], "answers": [{"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 2, "last_activity_date": 1493405164, "creation_date": 1493405164, "answer_id": 43686995, "question_id": 43686903, "link": "https://stackoverflow.com/questions/43686903/matching-line-subfield-deliminated-with-square-brackets/43686995#43686995", "title": "Matching line subfield deliminated with square brackets", "body": "<p>You don't show your expected output so it's a guess but based on what it looks like the script you posted is attempting to do - is this what you want?</p>\n\n<pre><code>$ sed 's/.*\\[client *\\([^]]*\\).*/\\1/g' file\n1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1493413118, "post_id": 43688696, "comment_id": 74423794, "body": "There&#39;s no need for the look-ahead and look-behind. <code>&#47;\\[([^\\]]+)\\]&#47;g</code> will do fine."}], "tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": true, "score": 3, "last_activity_date": 1493413350, "last_edit_date": 1493413350, "creation_date": 1493412645, "answer_id": 43688696, "question_id": 43686903, "link": "https://stackoverflow.com/questions/43686903/matching-line-subfield-deliminated-with-square-brackets/43688696#43688696", "title": "Matching line subfield deliminated with square brackets", "body": "<p>In Perl, you can capture each bracket contents like so:</p>\n\n<pre><code>$ perl -lne 'print $1 while /(?&lt;=\\[)([^\\]]+)(?=\\])/g' file\ntag \"x\"\nseverity \"y\"\nid \"z\"\nclient 1\n</code></pre>\n\n<p>So then if you only want the <code>client</code> match you can do:</p>\n\n<pre><code>$ perl -lne 'for (/(?&lt;=\\[)([^\\]]+)(?=\\])/g) { print if /^client\\b/ }' file\nclient 1\n</code></pre>\n\n<hr>\n\n<p>As pointed out in comments, <code>/\\[([^\\]]+)\\]/g</code> is maybe a little more efficient.</p>\n\n<pre><code>$ perl -lne 'for (/\\[([^\\]]+)\\]/g) { print if /^client\\b/}' file\nclient 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 262, "user_id": 6484224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d6930fd8ed003c9a32bca1120585b50?s=128&d=identicon&r=PG&f=1", "display_name": "bstipe", "link": "https://stackoverflow.com/users/6484224/bstipe"}, "is_accepted": false, "score": 1, "last_activity_date": 1493433083, "creation_date": 1493433083, "answer_id": 43691235, "question_id": 43686903, "link": "https://stackoverflow.com/questions/43686903/matching-line-subfield-deliminated-with-square-brackets/43691235#43691235", "title": "Matching line subfield deliminated with square brackets", "body": "<p>I would use <code>tr -d</code>.</p>\n\n<pre><code>echo '[tag \"x\"][severity \"y\"][id \"z\"][client 1]' | tr -d '[]'\ntag \"x\"severity \"y\"id \"z\"client 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1371, "user_id": 5056806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfa01ad122fc89b571651ffbbc34ce37?s=128&d=identicon&r=PG&f=1", "display_name": "Claes Wikner", "link": "https://stackoverflow.com/users/5056806/claes-wikner"}, "is_accepted": false, "score": 1, "last_activity_date": 1493433300, "creation_date": 1493433300, "answer_id": 43691253, "question_id": 43686903, "link": "https://stackoverflow.com/questions/43686903/matching-line-subfield-deliminated-with-square-brackets/43691253#43691253", "title": "Matching line subfield deliminated with square brackets", "body": "<pre><code>echo '[tag \"x\"][severity \"y\"][id \"z\"][client 1]' | awk -F'[][]+' '{print $5}'\n\nclient 1\n</code></pre>\n"}], "owner": {"reputation": 1091, "user_id": 4474629, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e3d1d6e41980939611b75370816b8843?s=128&d=identicon&r=PG&f=1", "display_name": "Little Code", "link": "https://stackoverflow.com/users/4474629/little-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 43688696, "answer_count": 4, "score": 0, "last_activity_date": 1493433300, "creation_date": 1493404792, "question_id": 43686903, "link": "https://stackoverflow.com/questions/43686903/matching-line-subfield-deliminated-with-square-brackets", "title": "Matching line subfield deliminated with square brackets", "body": "<p>I have a file that contains lines that contains fields delimited with square brackets, for example :</p>\n\n<pre><code>[tag \"x\"][severity \"y\"][id \"z\"][client 1]\n</code></pre>\n\n<p>I need to extract the data from the <em>client</em> field.  But I am struggling with the best way to do this.  Obviously its too advanced for the likes of <em>cut</em>.</p>\n\n<p>I have been struggling to use <em>sed</em> (and I'm not even sure sed is the \"best\" or \"most appropriate\" tool), but sed regex like this doesn't seem to work :</p>\n\n<pre><code>sed 's/^.*\\[client\\(.*\\)/\\1/g'\n</code></pre>\n\n<p>I'm guessing the \"most appropriate\" tool is probably Perl with some sort of Perl module ?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 0, "creation_date": 1493400118, "post_id": 43685448, "comment_id": 74417544, "body": "Added an example."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1493401957, "post_id": 43685448, "comment_id": 74418403, "body": "Maybe you should add that <code>fc</code> is a builtin since 5.16 (it&#39;s not that often used and therefor I&#39;m pretty sure some people don&#39;t know about it, in which case it&#39;s not obvious why both programs behave differently)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1493402765, "post_id": 43685448, "comment_id": 74418801, "body": "@Dada, It&#39;s not <code>fc</code>&#39;s addition that&#39;s the problem, it&#39;s the enabling of the <code>fc</code> feature that&#39;s the problem."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1493404268, "post_id": 43685448, "comment_id": 74419541, "body": "That&#39;s what I meant: I only know since a few months of <code>fc</code> and I&#39;m pretty sure some people without a lot of experience with Perl don&#39;t know about it. I think your example doesn&#39;t make much sense for someone that doesn&#39;t know that <code>fc</code> feature exists."}, {"owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 0, "creation_date": 1493404830, "post_id": 43685448, "comment_id": 74419848, "body": "It is strange, in 1st version of the answer i got a feeling that I understand.  Now again, not fully. :(  While the <code>fc</code> example nice (as <code>fc</code> is introduced in 5.16), But, I can&#39;t imagine, what could be broken (in some future perl version) in the simle addition, as in the linked answer: <code>perl -we&#39;my $x = 0; my $y = $x + 1; CORE::say &quot;x=$x&quot;&#39;</code> . Looks like i need much more learning..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 1, "creation_date": 1493406042, "post_id": 43685448, "comment_id": 74420416, "body": "@kobame, You&#39;re looking at it backwards. You shouldn&#39;t spend time analysing your program to guess if it&#39;s likely to be broken by a future feature. That&#39;s a futile waste of time, because the answer is invariably yes. (e.g. <code>&#47;\\s&#47;</code> is affected by a feature.) Instead, you should simply avoid <code>-E</code> unless you have a reason to use it. (Specifically, if you&#39;ll never use the program again.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1493406534, "post_id": 43685448, "comment_id": 74420656, "body": "@Dada, Re &quot;<i>I think your example doesn&#39;t make much sense for someone that doesn&#39;t know that fc feature exists.</i>&quot;, But that&#39;s the point. You never know what features will exist. How the program breaks is not important, only that it can."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 10, "last_activity_date": 1493403818, "last_edit_date": 1493403818, "creation_date": 1493399041, "answer_id": 43685448, "question_id": 43685330, "link": "https://stackoverflow.com/questions/43685330/perl-coresay-vs-e/43685448#43685448", "title": "Perl CORE::say vs -E", "body": "<p><a href=\"http://search.cpan.org/perldoc?feature\" rel=\"noreferrer\">feature.pm</a> was introduced to allow backwards-incompatible features to be added to Perl. <code>-E</code> enables all backward-incompatible features, which means a program that uses <code>-E</code> may break if you upgrade <code>perl</code>.</p>\n\n<pre><code>perl               -E'... say \"foo\";       ...'   # Forward-incompatible (5.10+)\nperl -Mfeature=say -e'... say \"foo\";       ...'   # ok (5.10+)\nperl -Mv5.10       -e'... say \"foo\";       ...'   # ok (5.10+)\nperl -M5.010       -e'... say \"foo\";       ...'   # ok (5.10+)\nperl               -e'... CORE::say \"foo\"; ...'   # ok (5.16+)\n</code></pre>\n\n<hr>\n\n<p>For example, say you wrote the following program in 2010:</p>\n\n<pre><code>perl -E'sub fc { my $acc=1; $acc*=$_ for 2..$_[0]; $acc } say fc(5);'\n</code></pre>\n\n<p>With the latest Perl in 2010 (5.12), the program outputs the following:</p>\n\n<pre><code>120\n</code></pre>\n\n<p>With the latest Perl in 2016 (5.24), the program outputs the following:</p>\n\n<pre><code>5\n</code></pre>\n\n<p>The difference is due to the addition of a feature to 5.16 that changes the meaning of that program when enabled. If one had avoided the use of <code>-E</code>, the program's behaviour would not have changed. Specifically, the following outputs <code>120</code> in 5.24:</p>\n\n<pre><code>perl -e'sub fc { my $acc=1; $acc*=$_ for 2..$_[0]; $acc } CORE::say fc(5);'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 4, "last_activity_date": 1493400280, "creation_date": 1493400280, "answer_id": 43685713, "question_id": 43685330, "link": "https://stackoverflow.com/questions/43685330/perl-coresay-vs-e/43685713#43685713", "title": "Perl CORE::say vs -E", "body": "<p>You can see the difference like this:</p>\n\n<pre>C:\\> perl -MO=Deparse -E \"say\"\nuse feature 'current_sub', 'evalbytes', 'fc', 'postderef_qq', 'say', 'state', 'switch', 'unicode_strings', 'unicode_eval';\nsay $_;</pre>\n\n<p>This is with <code>perl</code> 5.24.1 Now, without <code>-E</code>:</p>\n\n<pre>C:\\> perl -MO=Deparse -e \"CORE::say\"\nCORE::say $_;\n-e syntax OK</pre>\n\n<p>The feature set included with <code>-E</code> will change in later versions (e.g. subroutine signatures) the wholesale inclusion of which may break existing programs. On the other hand, the latter will work with version 5.16 and later as @ikegami <a href=\"/a/43685448/100754\">listed</a> without other features clashing with programs written before their introduction.</p>\n"}], "owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 2, "accepted_answer_id": 43685448, "answer_count": 2, "score": 10, "last_activity_date": 1493403818, "creation_date": 1493398550, "last_edit_date": 1495541899, "question_id": 43685330, "link": "https://stackoverflow.com/questions/43685330/perl-coresay-vs-e", "title": "Perl CORE::say vs -E", "body": "<p>In <a href=\"https://stackoverflow.com/a/43683060/632407\">this answer</a> is used the perl one-liner as:</p>\n\n<pre><code>perl -we '... CORE::say \"x=$x\"'\n</code></pre>\n\n<p>What is the advantage using the <code>-e</code> and <code>CORE::say</code> instead of the shorter: <code>-E</code> and plain <code>say</code>, e.g.:</p>\n\n<pre><code>perl -wE '... say \"x=$x\"'\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "edited": false, "score": 0, "creation_date": 1493392197, "post_id": 43683245, "comment_id": 74412922, "body": "wouldnt it be simpler to just REMOVE the stuff you did capture? ( <code>s&#47;..&#47;&#47;</code> )"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7900783, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uoXFk8NYdII/AAAAAAAAAAI/AAAAAAAAAMk/SgL9OfOQrD4/photo.jpg?sz=128", "display_name": "Ramesh Aravind M", "link": "https://stackoverflow.com/users/7900783/ramesh-aravind-m"}, "edited": false, "score": 0, "creation_date": 1493393017, "post_id": 43683501, "comment_id": 74413439, "body": "Thats awesome, am also trying the same instead of picking inverse.  Thank You :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493394880, "post_id": 43683501, "comment_id": 74414621, "body": "<code>[[:xdigit:]]</code> is better written as <code>\\p{hex}</code> in modern versions of Perl."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493395202, "post_id": 43683501, "comment_id": 74414817, "body": "@Borodin Why is <code>\\p{hex}</code> better?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493398346, "post_id": 43683501, "comment_id": 74416678, "body": "@melpomene: Because it&#39;s more modern, concise, flexible, and expressive. POSIX doesn&#39;t take any account of Unicode, and that is a big shortcoming for the modern world where software has to work well in multiple different languages. ASCII is based on English, and Britain and North America have historically been slow to concede that encodings for all languages should be the norm.  Oh, and people <i>still</i> often don&#39;t understand that POSIX <code>[:category:]</code> can share a character class with other characters and POSIX categories."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493399674, "post_id": 43683501, "comment_id": 74417333, "body": "@Borodin Modern doesn&#39;t mean better, and I don&#39;t see how it&#39;s more flexible or expressive. That leaves concise, which basically means it&#39;s shorter. I&#39;m unconvinced. (Multiple language support doesn&#39;t really matter for a category like &quot;hex digit&quot;.)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493400329, "post_id": 43683501, "comment_id": 74417642, "body": "@melpomene: I suspect that you were never going to be convinced in the first place. Did you not read my comment after the first sentence? You don&#39;t see how it&#39;s more expressive? Take a look at <a href=\"https://perldoc.perl.org/perluniprops.html\" rel=\"nofollow noreferrer\">perluniprops</a> to see how much more you can do with Unicode properties than POSIX categories, and if you weren&#39;t working with English data then you may well need several of those properties. Do you really want to mix two standards in your code? <i>&quot;Modern doesn&#39;t mean better&quot;</i> That&#39;s fine, just stick to FORTRAN and you&#39;ll be happy."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493401199, "post_id": 43683501, "comment_id": 74418049, "body": "@Borodin I did, but I didn&#39;t understand your last sentence. I wasn&#39;t talking about <code>\\p</code> vs. <code>[:</code> <code>:]</code> in general, just <code>[[:xdigit:]]</code> vs. <code>\\p{hex}</code>. And we&#39;re not working with English data, we&#39;re working with memory addresses in hex format; if anything we want <code>\\p{ahex}</code>. I&#39;m fine with mixing dozens of standards in my code."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 0, "last_activity_date": 1493394849, "last_edit_date": 1493394849, "creation_date": 1493392251, "answer_id": 43683501, "question_id": 43683245, "link": "https://stackoverflow.com/questions/43683245/perl-regex-picking-inverse-to-match/43683501#43683501", "title": "Perl Regex, picking inverse to match", "body": "<p>I don't see why you need to invert anything. Take the following code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $str = 'ath_rxbuf_alloc: nbf-&gt;data=83eac058 (nbf-&gt;head=83eac038) is not aligned to 32 bytes (len=3900)';\n$str =~ s/=[[:xdigit:]]+|\\d+//g;\n\nprint \"Result: $str\\n\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>Result: ath_rxbuf_alloc: nbf-&gt;data (nbf-&gt;head) is not aligned to  bytes (len)\n</code></pre>\n\n<p>You can simply replace all matches by nothing.</p>\n"}], "owner": {"reputation": 23, "user_id": 7900783, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uoXFk8NYdII/AAAAAAAAAAI/AAAAAAAAAMk/SgL9OfOQrD4/photo.jpg?sz=128", "display_name": "Ramesh Aravind M", "link": "https://stackoverflow.com/users/7900783/ramesh-aravind-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 43683501, "answer_count": 1, "score": -1, "last_activity_date": 1493394849, "creation_date": 1493391528, "last_edit_date": 1493392049, "question_id": 43683245, "link": "https://stackoverflow.com/questions/43683245/perl-regex-picking-inverse-to-match", "title": "Perl Regex, picking inverse to match", "body": "<p>My input to regex:</p>\n\n<p><code>ath_rxbuf_alloc: nbf-&gt;data=83eac058 (nbf-&gt;head=83eac038) is not aligned to 32 bytes (len=3900)</code></p>\n\n<p>On the above input, I need to remove address and numbers and would need a output like,</p>\n\n<p><code>ath_rxbuf_alloc: nbf-&gt;data (nbf-&gt;head) is not aligned to bytes (len)</code></p>\n\n<p>Expression I've used: <code>/\\=\\w+\\d|\\d+/ig</code></p>\n\n<p>As we know, my expression picks words and digits from <code>=</code> character; now I just need to inverse pick the whole and need to combine the whole as single element.</p>\n\n<p>Will really be grateful If someone could help resolve this.</p>\n"}, {"tags": ["string", "perl", "zero"], "comments": [{"owner": {"reputation": 532, "user_id": 716119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/64d3d8eb46cc0ed153c42b25a76c131f?s=128&d=identicon&r=PG", "display_name": "SparkeyG", "link": "https://stackoverflow.com/users/716119/sparkeyg"}, "edited": false, "score": 1, "creation_date": 1493390058, "post_id": 43682671, "comment_id": 74411483, "body": "Can you show the code you&#39;ve tried so far?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1493390762, "post_id": 43682671, "comment_id": 74411972, "body": "<code>my $x = 0; print qq(&quot;$x&quot;);</code> prints <code>&quot;0&quot;</code>. Show how you create the config."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1493395005, "last_edit_date": 1493395005, "creation_date": 1493391005, "answer_id": 43683060, "question_id": 43682671, "link": "https://stackoverflow.com/questions/43682671/convert-0-into-string/43683060#43683060", "title": "convert 0 into string", "body": "<p>If you think you have zero, but the program thinks you have an empty string, you are probably dealing with a dualvar. A dualvar is a scalar that contains both a string and a number. Perl usually returns a dualvar when it needs to return false.</p>\n\n<p>For example,</p>\n\n<pre><code>$ perl -we'my $x = 0; my $y = $x + 1; CORE::say \"x=$x\"'\nx=0\n\n$ perl -we'my $x = \"\"; my $y = $x + 1; CORE::say \"x=$x\"'\nArgument \"\" isn't numeric in addition (+) at -e line 1.\nx=\n\n$ perl -we'my $x = !1; my $y = $x + 1; CORE::say \"x=$x\"'\nx=\n</code></pre>\n\n<p>As you can see, the value returned by <code>!1</code> acts as zero when used as a number, and acts as an empty string when used as a string.</p>\n\n<p>To convert this dualvar into a number (leaving other numbers unchanged), you can use the following:</p>\n\n<pre><code>$x ||= 0;\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7937152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4943b982eeb1287c9b4a9f27c01594c?s=128&d=identicon&r=PG&f=1", "display_name": "hurikan", "link": "https://stackoverflow.com/users/7937152/hurikan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1171, "favorite_count": 0, "accepted_answer_id": 43683060, "answer_count": 1, "score": -5, "last_activity_date": 1493395005, "creation_date": 1493389867, "question_id": 43682671, "link": "https://stackoverflow.com/questions/43682671/convert-0-into-string", "title": "convert 0 into string", "body": "<p>i'm working on a script in perl.</p>\n\n<p>This script read a DB and generate config file for other devices.</p>\n\n<p>I have a problem with \"0\".</p>\n\n<p>From my database, i get a 0 (int) and i want this 0 become a \"0\" in the config file. When i get any other value (1,2,3, etc), the script generate (\"1\",\"2\",\"3\", etc). But the 0 become an empty string \"\".</p>\n\n<p>I know, for perl:<br>\n - undef<br>\n - 0<br>\n - \"\"<br>\n - \"0\"<br>\nare false.</p>\n\n<p>How can i convert a 0 to \"0\" ? I try qw,qq,sprintf, $x = $x || 0, and many many more solutions.</p>\n\n<p>I juste want to make a explicit conversion instead of an implicite conversion.</p>\n\n<p>Thank you for your help.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "edited": false, "score": 0, "creation_date": 1493388971, "post_id": 43682145, "comment_id": 74410787, "body": "all your lines seem to have a very similar structure. why not capture with this regex <code>&#47;\\s*(\\S+)\\s+=\\s+(\\S+)&#47;</code>. the only thing it misses is &quot;class device&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7936915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c10523e6ac84f78cb74e7deca310b1f4?s=128&d=identicon&r=PG&f=1", "display_name": "Moeru", "link": "https://stackoverflow.com/users/7936915/moeru"}, "edited": false, "score": 0, "creation_date": 1493667435, "post_id": 43682768, "comment_id": 74494289, "body": "my original intention was to name the hash after the regex found in the first line you mentioned. And your&#39;re right, my hash got clobbered after each loop. Thanks so much for your input, now I&#39;m able to accomplish my script."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1493390665, "last_edit_date": 1493390665, "creation_date": 1493390125, "answer_id": 43682768, "question_id": 43682145, "link": "https://stackoverflow.com/questions/43682145/parse-systool-output-into-hash-in-perl/43682768#43682768", "title": "parse systool output into hash in perl", "body": "<p>The reason your code isn't working, is this line:</p>\n\n<pre><code>%FChost  = $1 if /Class Device =:\\s+\"(\\w+)\"$/;\n</code></pre>\n\n<p>What are you intending it to do? I mean, for starters - it's never going to match given your input (there's no <code>:</code> in there) but even correcting for that you're assigning a single scalar to a hash, and that's giving you:</p>\n\n<pre><code>$VAR1 = {\n          'host11' =&gt; undef\n        };\n</code></pre>\n\n<p>It does <em>sort</em> of work otherwise, but each iteration through the loop will clobber every other record, and you don't seem to do anything with it otherwise.</p>\n\n<p>Also - please <code>use strict; use warnings;</code> - it helps massively. </p>\n\n<p>The thing that's useful to know here is - set <code>$/</code> to <code>' '</code> and it will work in paragraph mode. </p>\n\n<p>So:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nlocal $/ = ''; \n\nwhile ( &lt;&gt; ) {\n   my %record = m/(\\w+)\\s*=\\s*\\\"(\\S+)\\\"/g;\n   print Dumper \\%record;\n}\n</code></pre>\n\n<p>And this gives you a record looking like:</p>\n\n<pre><code>$VAR1 = {\n          'node_name' =&gt; '0x20000090faf02a08',\n          'port_state' =&gt; 'Online',\n          'port_id' =&gt; '0xcf0500',\n          'max_npiv_vports' =&gt; '255',\n          'dev_loss_tmo' =&gt; '30',\n          'Device' =&gt; 'host11',\n          'port_name' =&gt; '0x10000090faf02a08',\n          'npiv_vports_inuse' =&gt; '0',\n          'fabric_name' =&gt; '0x1000c4f57c548ba0'\n        };\n</code></pre>\n\n<p>Which you can then <code>push</code> into an array of records if you so desire, or print using hash-slices:</p>\n\n<pre><code>my @fields = qw(port_id port_name port_state);\nprint join \",\", @record{@fields},\"\\n\";\n</code></pre>\n\n<p>Note - you should probably also use lexical file handles and 3 arg open:</p>\n\n<pre><code>open ( my $systool, '-|', '/usr/bin/systool -c fc_host -v' ); \n</code></pre>\n\n<p>So something like this:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nopen ( my $systool, '-|', '/usr/bin/systool -c fc_host -v' ); \nlocal $/ = '';\n\nmy @records; \n\nwhile ( &lt;$systool&gt; ) {\n    next unless m/Device/;\n    push @records, {m/(\\w+)\\s*=\\s*\\\"(\\S+)\\\"/g};\n}\n\n#print for debug\nprint Dumper \\@records;\n\nmy @headers = qw ( Device port_id port_name port_state );\nforeach my $record ( @records ) {\n   print join \",\", @{$record}{@headers},\"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7936915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c10523e6ac84f78cb74e7deca310b1f4?s=128&d=identicon&r=PG&f=1", "display_name": "Moeru", "link": "https://stackoverflow.com/users/7936915/moeru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493390665, "creation_date": 1493388246, "question_id": 43682145, "link": "https://stackoverflow.com/questions/43682145/parse-systool-output-into-hash-in-perl", "title": "parse systool output into hash in perl", "body": "<p>I am tying to parse the Output of systool into perl hashes to print each found device with ist attributes and values in csv format.</p>\n\n<pre><code># systool  -c fc_host -v\nClass = \"fc_host\"\n\n  Class Device = \"host11\"\n    dev_loss_tmo        = \"30\"\n    fabric_name         = \"0x1000c4f57c548ba0\"\n    issue_lip           = &lt;store method only&gt;\n    max_npiv_vports     = \"255\"\n    maxframe_size       = \"2048 bytes\"\n    node_name           = \"0x20000090faf02a08\"\n    npiv_vports_inuse   = \"0\"\n    port_id             = \"0xcf0500\"\n    port_name           = \"0x10000090faf02a08\"\n    port_state          = \"Online\"    supported_classes   = \"Class 3\"\n\n  Class Device = \"host12\"\n    dev_loss_tmo        = \"30\"\n    fabric_name         = \"0x1000c4f57c54a0d0\"\n    ....\n</code></pre>\n\n<p>I just don't know how to start to get thist structured data into a hash, or even into a list of hashes (one hash for each found HBA).\nI was trying something like:</p>\n\n<pre><code>open (SysTool, \"/usr/bin/systool -c fc_host -v |\") or die \"problem running systool\";\nwhile (&lt;SysTool&gt;) {\n  %FChost  = $1 if /Class Device =:\\s+\"(\\w+)\"$/;\n  ($attribute, $value) = split /=/, $_;\n   $FChost{$attribute} = $value;\n}\n</code></pre>\n\n<p>But it just doesn't work. :( Any idea please?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 4, "last_activity_date": 1493388123, "last_edit_date": 1493388123, "creation_date": 1493387881, "answer_id": 43682011, "question_id": 43681925, "link": "https://stackoverflow.com/questions/43681925/does-archname-directory-get-scanned-automatically/43682011#43682011", "title": "Does archname directory get scanned automatically?", "body": "<p><code>archname</code> is included in <code>@INC</code> by default if it exists:</p>\n\n<pre><code>perl -MConfig -E 'say $_ for ($Config{archname}, @INC)'\nx86_64-linux\n/home/user/perl5/perlbrew/perls/perl-5.24.1/lib/site_perl/5.24.1/x86_64-linux\n/home/user/perl5/perlbrew/perls/perl-5.24.1/lib/site_perl/5.24.1\n/home/user/perl5/perlbrew/perls/perl-5.24.1/lib/5.24.1/x86_64-linux\n/home/user/perl5/perlbrew/perls/perl-5.24.1/lib/5.24.1\n</code></pre>\n\n<p><strong>UPD</strong>\nIt will be added if it exists:</p>\n\n<p><code>perl -Isomedir -e 'local $\"=\"\\n\"; print \"@INC\"'</code></p>\n\n<pre><code>somedir\n/home/kes/perl5/perlbrew/perls/perl-5.24.0/lib/site_perl/5.24.0/x86_64-linux\n/home/kes/perl5/perlbrew/perls/perl-5.24.0/lib/site_perl/5.24.0\n/home/kes/perl5/perlbrew/perls/perl-5.24.0/lib/5.24.0/x86_64-linux\n/home/kes/perl5/perlbrew/perls/perl-5.24.0/lib/5.24.0\n</code></pre>\n\n<p><code>mkdir -p somedir/x86_64-linux</code>\n<code>perl -Isomedir -e 'local $\"=\"\\n\"; print \"@INC\"'</code></p>\n\n<pre><code>somedir/x86_64-linux\nsomedir\n/home/kes/perl5/perlbrew/perls/perl-5.24.0/lib/site_perl/5.24.0/x86_64-linux\n/home/kes/perl5/perlbrew/perls/perl-5.24.0/lib/site_perl/5.24.0\n/home/kes/perl5/perlbrew/perls/perl-5.24.0/lib/5.24.0/x86_64-linux\n/home/kes/perl5/perlbrew/perls/perl-5.24.0/lib/5.24.0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1493392977, "post_id": 43683534, "comment_id": 74413409, "body": "It&#39;s important to try each method because it&#39;s up to each of them to add the arch dir themselves (because <code>@INC</code> is not magical in that respect). <code>-I</code> and <code>PERL5LIB</code> probably use the same mechanism. lib.pm uses its own. mylib.pm uses lib.pm."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1493392788, "last_edit_date": 1493392788, "creation_date": 1493392356, "answer_id": 43683534, "question_id": 43681925, "link": "https://stackoverflow.com/questions/43681925/does-archname-directory-get-scanned-automatically/43683534#43683534", "title": "Does archname directory get scanned automatically?", "body": "<p>Yes, <strong>if it exists</strong>, the arch sub directory will be added to <code>@INC</code> when you add the parent non-arch directory.</p>\n\n<p>Baseline:</p>\n\n<pre><code>$ perl -E'say for @INC' | wc -l\n5\n</code></pre>\n\n<p>Add via <code>-I</code>:</p>\n\n<pre><code>$ perl -Ilib -E'say for @INC' | head -n -5\nlib/5.24.0/x86_64-linux-thread-multi\nlib/5.24.0\nlib\n</code></pre>\n\n<p>Add via <code>PERL5LIB</code>:</p>\n\n<pre><code>$ PERL5LIB=lib perl -E'say for @INC' | head -n -5\nlib/5.24.0/x86_64-linux-thread-multi\nlib/5.24.0\nlib\n</code></pre>\n\n<p>Add via lib.pm:</p>\n\n<pre><code>$ perl -E'use lib qw( lib ); say for @INC' | head -n -5\nlib/5.24.0/x86_64-linux-thread-multi\nlib/5.24.0\nlib\n</code></pre>\n\n<p>Add via mylib.pm:</p>\n\n<pre><code>$ perl -E'use mylib; say for @INC' | head -n -5\n/.../lib/5.24.0/x86_64-linux-thread-multi\n/.../lib/5.24.0\n/.../lib\n</code></pre>\n\n<p>It <strong>doesn't</strong> add them if you add directly to <code>@INC</code>:</p>\n\n<pre><code>$ perl -E'unshift @INC, \"lib\"; say for @INC' | head -n -5\nlib\n</code></pre>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 43682011, "answer_count": 2, "score": 1, "last_activity_date": 1493392788, "creation_date": 1493387586, "last_edit_date": 1493389009, "question_id": 43681925, "link": "https://stackoverflow.com/questions/43681925/does-archname-directory-get-scanned-automatically", "title": "Does archname directory get scanned automatically?", "body": "<p>When I want to provide directory to include modules I write:</p>\n\n<pre><code>perl -Ilib -Isome/dir script.pl\n</code></pre>\n\n<p>Should I include <code>archname</code> directory too or is that scanned automatically?   </p>\n\n<p>from <code>Makefile</code>:</p>\n\n<pre><code>{APP_ROOT}/local/lib/perl5/${shell perl -MConfig -e 'print $$Config{archname}'}\n</code></pre>\n\n<p><strong>UPD</strong></p>\n\n<p><code>perl -V</code> output:</p>\n\n<pre><code>/home/kes/perl5/perlbrew/perls/perl-5.24.0/lib/site_perl/5.24.0/x86_64-linux\n/home/kes/perl5/perlbrew/perls/perl-5.24.0/lib/site_perl/5.24.0\n/home/kes/perl5/perlbrew/perls/perl-5.24.0/lib/5.24.0/x86_64-linux\n/home/kes/perl5/perlbrew/perls/perl-5.24.0/lib/5.24.0\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1493385244, "post_id": 43681066, "comment_id": 74408340, "body": "<code>while ( $line = $z-&gt;getline())</code>"}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 1, "creation_date": 1493385271, "post_id": 43681066, "comment_id": 74408353, "body": "Errr have you actually tried this?"}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1493385400, "post_id": 43681066, "comment_id": 74408447, "body": "@Jens that only prints the binary code."}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "reply_to_user": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1493385430, "post_id": 43681066, "comment_id": 74408471, "body": "@AhmedMasud I&#39;ve tried numerous &quot;solutions&quot; which don&#39;t print the lines.  Perhaps you could be more specific?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493386490, "post_id": 43681066, "comment_id": 74409162, "body": "@con: I think you need to show the code that you have tried and isn&#39;t working for you, as well as describing in detail the problems that arose. There is no point in getting so enraged (I have moderated your language to get you some answers) and we can&#39;t really tell you much more than the documentation says without at least <i>some</i> information."}], "answers": [{"comments": [{"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 0, "creation_date": 1493385847, "post_id": 43681208, "comment_id": 74408731, "body": "I&#39;m confused about <code>$input</code>, is this a hash or a string? <code>Global symbol &quot;%input&quot; requires explicit package name at get_labels.pl line 7.</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1493386295, "post_id": 43681208, "comment_id": 74409057, "body": "Your code wouldn&#39;t compile as it was. I&#39;ve fixed that and a couple of other issues."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 0, "creation_date": 1493386331, "post_id": 43681208, "comment_id": 74409078, "body": "@con: <code>$input</code> is defined in the program. It&#39;s just a simple string."}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493386461, "post_id": 43681208, "comment_id": 74409147, "body": "@borodin I just typed it out was going to fix it and got distracted by something else, thanks for the fix!"}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493386569, "post_id": 43681208, "comment_id": 74409217, "body": "@Borodin thank you very much, I&#39;ve accepted your answer."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493386573, "post_id": 43681208, "comment_id": 74409219, "body": "@AhmedMasud: Don&#39;t post it first and then test and fix it afterwards!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 0, "creation_date": 1493386692, "post_id": 43681208, "comment_id": 74409310, "body": "@con: Neither <code>AutoClose</code> nor <code>Transparent</code> are necessary for this to work. You can safely use just <code>my $zh = IO::Uncompress::Bunzip2-&gt;new( $input )</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1493387151, "post_id": 43681208, "comment_id": 74409637, "body": "@AhmedMasud: You don&#39;t appear to know whatb you&#39;re talking about. As <b>choroba</b> commented above, it is <i>indirect object syntax</i> that is bad practice, which is <code>new IO::Uncompress::Bunzip2</code>. <code>AutoClose</code> and <code>Transparent</code> are unnecessary; you are showing someone <i>how to do</i> something, not writing a finished program. Together with the <code>bunzip2</code> import they really cloud your code. And I changed your variable names because they were dreadful."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 0, "creation_date": 1493387316, "post_id": 43681208, "comment_id": 74409748, "body": "@con: It&#39;s not my answer unfortunately."}], "tags": [], "owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "is_accepted": true, "score": 2, "last_activity_date": 1493387044, "last_edit_date": 1493387044, "creation_date": 1493385479, "answer_id": 43681208, "question_id": 43681066, "link": "https://stackoverflow.com/questions/43681066/reading-a-bz2-file-line-by-line/43681208#43681208", "title": "Reading a BZ2 file line by line", "body": "<p>Try this:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\n\nuse IO::Uncompress::Bunzip2 '$Bunzip2Error';\n\nmy $file = \"somefile.txt.bz2\";\n\nmy $zh = IO::Uncompress::Bunzip2-&gt;new( $file, {\n    AutoClose   =&gt; 1,\n    Transparent =&gt; 1,\n} ) or die \"IO::Uncompress::Bunzip2 failed: $Bunzip2Error\\n\";\n\nwhile ( &lt;$zh&gt; ) {\n    print;\n}\n</code></pre>\n"}], "owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 752, "favorite_count": 2, "accepted_answer_id": 43681208, "answer_count": 1, "score": 1, "last_activity_date": 1493387044, "creation_date": 1493385077, "last_edit_date": 1493386869, "question_id": 43681066, "link": "https://stackoverflow.com/questions/43681066/reading-a-bz2-file-line-by-line", "title": "Reading a BZ2 file line by line", "body": "<p>I'd like to read a file line by line like so:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nopen my $fh, '&lt;', \"file.txt\" or die \"Can't read file.txt: $!\";\n\nwhile (&lt;$fh&gt;) {\n\n}\nclose $fh;\n</code></pre>\n\n<p>but I cannot find how to do this for compressed files, like bz2 and gz.</p>\n\n<p>I can't understand from the <a href=\"http://perldoc.perl.org/IO/Uncompress/Bunzip2.html#read\" rel=\"nofollow noreferrer\">documentation for <code>IO::Uncompress::Bunzip2</code></a>\nhow I can implement this in a real program.</p>\n\n<p>How can I read a compressed file line by line as I do above for normal files?</p>\n"}, {"tags": ["perl", "rpm", "cpan", "rhel"], "answers": [{"tags": [], "owner": {"reputation": 8797, "user_id": 1955371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51f65677a32bd9404865b8c65e79afc7?s=128&d=identicon&r=PG", "display_name": "mr.spuratic", "link": "https://stackoverflow.com/users/1955371/mr-spuratic"}, "is_accepted": true, "score": 0, "last_activity_date": 1523982697, "last_edit_date": 1523982697, "creation_date": 1523549714, "answer_id": 49801404, "question_id": 43680358, "link": "https://stackoverflow.com/questions/43680358/cpanspec-option-filter-requires-fails-to-remove-module-compat/49801404#49801404", "title": "cpanspec option --filter-requires fails to remove :MODULE_COMPAT", "body": "<p>This feature is under-documented, and doesn't (IMHO) do all of what its name implies.</p>\n\n<p>What it does is:</p>\n\n<ul>\n<li>along with the <code>.spec</code> file it creates a filter script file (some <code>sed</code> in a <code>.sh</code> script), this is referenced in the <code>.spec</code> file and is required during <code>rpmbuild</code>. The dependencies written to the <code>.spec</code> file are not affected by filtering.</li>\n<li>that <code>sed</code> filter script is rewritten by <code>sed</code> during <code>rpmbuild</code> to invoke the correct <code>perl.req</code>.</li>\n<li>the filter script is applied <em>only</em> to the output of <code>perl.req</code> (which is normally <em>only</em> invoked by <code>find-requires</code>)</li>\n</ul>\n\n<p>(As far as I can tell, <code>perl.req</code> predates explicitly listed dependencies in <code>Makefile.PL</code> and/or the <code>META</code> files. What it does is look for likely <code>use</code> and <code>require</code> directives in perl code with some logic and regex's, the implementation of which is exactly as attractive as you'd expect). </p>\n\n<p>To be honest I'm not <em>entirely</em> sure in what circumstances <code>perl.req</code> and <code>find-requires</code> are or are not invoked (cursory testing by setting <code>AutoReq</code> didn't have an effect for me), but <code>cpanspec</code> reads and processes <code>META.yml</code> directly if found in any case. The only other dependency-related functionality is (rudimentary) processing of <code>Makefile.PL</code> to extract modules references in <code>PREREQ_PM</code> and add those as <code>BuildRequires</code></p>\n\n<p>Normally you can patch up your <code>.spec</code> file to <a href=\"https://fedoraproject.org/wiki/EPEL:Packaging_Autoprovides_and_Requires_Filtering\" rel=\"nofollow noreferrer\">add something like</a></p>\n\n<pre><code>%filter_from_requires /XSLoader/d\n%filter_setup\n</code></pre>\n\n<p>However, <code>:MODULE_COMPAT_xxx</code> is a <em>special-case dependency</em> in <code>cpanspec</code>, you can turn it off with the <code>-o</code> option to create \"compatible\" RPMs that work on older systems. This has other effects too, so it might be less problematic to build in discrete steps so that you can tweak the build:</p>\n\n<pre><code>cpanspec [...]   yourmodule\nsed -i'.bak' '/^Requires.*:MODULE_COMPAT.*/d' yourmodule.spec\nrpmbuild -ba yourmodule.spec\n</code></pre>\n\n<p>(especially since <code>cpanspec</code> warns that <code>-b</code> is not guaranteed to work always).</p>\n\n<p>Of course the final package may not work as expected, <code>cpanspec</code> is being cautious, but there might be a real API requirement for this constraint (in your case the \"noarch\" build may limit the scope for problems, I think). The <em>rule of thumb</em> is that API/ABI's try to be backward compatible, not forward compatible (a related problem occurs if you try to build binaries to work with a glibc <em>older</em> than the one you compile against). </p>\n\n<p>You may have better luck building on a CentOS 5 system (or investigate <a href=\"https://github.com/perfsonar/project/wiki/CentOS-Mock-Overview\" rel=\"nofollow noreferrer\">Mock</a> for a more complete solution).</p>\n"}], "owner": {"reputation": 2025, "user_id": 422567, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/06bb842dfa9b53b5ac3a8d7e001f469c?s=128&d=identicon&r=PG", "display_name": "MUY Belgium", "link": "https://stackoverflow.com/users/422567/muy-belgium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 49801404, "answer_count": 1, "score": 0, "last_activity_date": 1523982697, "creation_date": 1493382741, "question_id": 43680358, "link": "https://stackoverflow.com/questions/43680358/cpanspec-option-filter-requires-fails-to-remove-module-compat", "title": "cpanspec option --filter-requires fails to remove :MODULE_COMPAT", "body": "<p>I would like to make a rpm which can install on RHEL5,6 and 7.</p>\n\n<pre><code>[p4474668@rhel7dev source]$ cpanspec webmin-ajax-0.00.tar.gz  -d '' --force --filter-requires 'perl(:MODULE_COMPAT_5.16.3)' -b\n(... lots of infos here ...)\n[p4474668@rhel7dev source]$ rpm -qpR noarch/perl-webmin-ajax-0.00-1.noarch.rpm\nperl(:MODULE_COMPAT_5.16.3)\nperl(DST::System)\nperl(WebminCore)\nperl(lib)\nperl(strict)\nperl(warnings)\nrpmlib(CompressedFileNames) &lt;= 3.0.4-1\nrpmlib(FileDigests) &lt;= 4.6.0-1useless\nrpmlib(PayloadFilesHavePrefix) &lt;= 4.0-1\nrpmlib(PayloadIsXz) &lt;= 5.2-1\n</code></pre>\n\n<p>Since the dependancy is not removed, it cannot be installed on a RHEL5.</p>\n\n<p>How to remove the <code>perl(:MODULE_COMPAT_5.16.3)</code> not required  dependency?</p>\n"}, {"tags": ["string", "perl", "if-statement", "special-characters", "filepath"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1493373606, "post_id": 43677321, "comment_id": 74400615, "body": "I don&#39;t understand your question. Perl will interpolate the variable, so <code>&quot;$PRODPATH&#47;specific&#47;path&#47;to&#47;file&quot;</code> becomes <code>&quot;&#47;path&#47;to&#47;prod&#47;specific&#47;path&#47;to&#47;file&quot;</code>, and that&#39;s what will be compared to <code>$file_path</code>. The number of slashes <code>&#47;</code> need to be the same. Maybe <code>$file_path</code> has a trailing slash, i.e. end in <code>file&#47;</code>?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1493373741, "post_id": 43677321, "comment_id": 74400701, "body": "This feels like it might be an XY problem. What are you trying to accomplish here?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1493375696, "post_id": 43677321, "comment_id": 74402005, "body": "&quot;<i><code>$PRODPATH</code> is an environmental variable</i>&quot; - no, it&#39;s not. It&#39;s a Perl variable. Are you using strict and warnings?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493381857, "post_id": 43677321, "comment_id": 74406072, "body": "Please don&#39;t make changes to your question that change the problem altogether. Your last edit seemed to be showing that you have tried using <code>$ENV{PRODPATH}</code> as I suggested, but you haven&#39;t said anything about doing so and you haven&#39;t done the additional diagnostics that I asked for. It&#39;s fine to <i>add</i> stuff to an answer, but your should never invalidate other people&#39;s comments or answers by altering your question. If you have follow-on questions as a result of the advice you have received then you should open a new question."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1493373652, "creation_date": 1493373652, "answer_id": 43677430, "question_id": 43677321, "link": "https://stackoverflow.com/questions/43677321/perl-can-not-compare-two-strings-if-one-of-them-is-with-special-chars/43677430#43677430", "title": "Perl: Can not compare two strings if one of them is with special chars", "body": "<p>In double quotes, variables are interpolated (expanded). </p>\n\n<p>So this works:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy $file_path = '/path/to/prod/specific/path/to/file';\nmy $PRODPATH = '/path/to/prod';\nif ( $file_path eq \"$PRODPATH/specific/path/to/file\" )\n{\n  print \"File is same as earlier \\n\\n\";\n}\nelse\n{\n  print \"File is not same as earlier \\n\\n\";\n}\n</code></pre>\n\n<p>If <code>$file_path</code> is not <em>literally</em> the same text string, then it won't though. In particular - if the path includes extra (or trailing) slashes, or it's a relative path, or it's a symbolic link - that comparison won't work.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493393613, "post_id": 43677918, "comment_id": 74413802, "body": "Adding <code>local $Data::Dumper::Useqq = 1;</code> helps in these situations."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1493501485, "last_edit_date": 1493501485, "creation_date": 1493375031, "answer_id": 43677918, "question_id": 43677321, "link": "https://stackoverflow.com/questions/43677321/perl-can-not-compare-two-strings-if-one-of-them-is-with-special-chars/43677918#43677918", "title": "Perl: Can not compare two strings if one of them is with special chars", "body": "<blockquote>\n  <p>the flow is not going to any of the conditions because of the special character $ in the string</p>\n</blockquote>\n\n<p>That is a wrong diagnosis, and I don't understand how you got that idea. Perl variables like <code>$PRODPATH</code> are expanded within a double-quoted string, but if you set the <em>Perl</em> variable <code>$PRODPATH</code> to the same value as the environment variable has then your code should work</p>\n\n<p>You can access the environment variables through Perl's <code>%ENV</code> hash, so you should remove the definition of <code>$PRODPATH</code> and write</p>\n\n<pre><code>if ( $file_path eq \"$ENV{PRODPATH}/specific/path/to/file\" ) { ... }\n</code></pre>\n\n<p>Also, you <em>must always</em> <code>use strict</code> and <code>use warnings 'all'</code> at the top of every Perl program you write.</p>\n\n<p>If you still have problems, then please add this to your code and show the result</p>\n\n<pre><code>use Data::Dumper;\nprint Dumper [ $file_path, $ENV{PRODPATH} ];\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7821843, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/331693c1d0ad094a8dcdc124543d88f0?s=128&d=identicon&r=PG&f=1", "display_name": "Nuke", "link": "https://stackoverflow.com/users/7821843/nuke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "accepted_answer_id": 43677918, "answer_count": 2, "score": -1, "last_activity_date": 1493501485, "creation_date": 1493373335, "last_edit_date": 1493381708, "question_id": 43677321, "link": "https://stackoverflow.com/questions/43677321/perl-can-not-compare-two-strings-if-one-of-them-is-with-special-chars", "title": "Perl: Can not compare two strings if one of them is with special chars", "body": "<p>I am new to Perl.</p>\n\n<p>I am trying to check whether an existing variable <code>$file_path</code> is equal to a specific path or not in an <code>if</code> condition.</p>\n\n<pre><code>my $PRODPATH = '/path/to/prod';\n\nif ( $file_path eq \"$PRODPATH/specific/path/to/file\" ) {\n    print \"File is same as earlier \\n\\n\";\n}\nelse {\n    print \"File is not same as earlier \\n\\n\";\n}\n</code></pre>\n\n<p>But the flow is not going to any of the conditions because of the special character <code>$</code> in the string which I am comparing with <code>$file_path</code>.</p>\n\n<p>Are the slashes <code>/</code> in the path also creating any issues?</p>\n"}, {"tags": ["perl", "loops"], "comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1493367992, "post_id": 43675479, "comment_id": 74397089, "body": "You question is not clear. Could you please elaborate what are you trying to do exactly?"}, {"owner": {"reputation": 133, "user_id": 6235589, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/9e62de362533777ba04f9cbc4a45c1e2?s=128&d=identicon&r=PG&f=1", "display_name": "Moehre", "link": "https://stackoverflow.com/users/6235589/moehre"}, "reply_to_user": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1493368701, "post_id": 43675479, "comment_id": 74397445, "body": "within the sub modul &quot;find_newer_files&quot; I compare files with the extension&quot;lin&quot; in directory A and &quot;LINT&quot; in directory B against each other. Now I will compare not only &quot;lin&quot;(A) and &quot;LINT&quot; (B). I will add more extensions"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1493369357, "post_id": 43675479, "comment_id": 74397821, "body": "still not clear. <code>I will add more extentions</code> what do you mean? do you want to compare other extentions as well?"}, {"owner": {"reputation": 133, "user_id": 6235589, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/9e62de362533777ba04f9cbc4a45c1e2?s=128&d=identicon&r=PG&f=1", "display_name": "Moehre", "link": "https://stackoverflow.com/users/6235589/moehre"}, "edited": false, "score": 0, "creation_date": 1493369647, "post_id": 43675479, "comment_id": 74398002, "body": "yes I will compare other extensions as well. At the moment I compare the Files *.lin and *.LINT each other. In addition to that I will compare *.adl and *.ADLT ..."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1493369717, "post_id": 43675479, "comment_id": 74398038, "body": "ok, so what is the problem you experience?"}, {"owner": {"reputation": 133, "user_id": 6235589, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/9e62de362533777ba04f9cbc4a45c1e2?s=128&d=identicon&r=PG&f=1", "display_name": "Moehre", "link": "https://stackoverflow.com/users/6235589/moehre"}, "edited": false, "score": 0, "creation_date": 1493370112, "post_id": 43675479, "comment_id": 74398280, "body": "I thought maybe there is a possibility to add these extensions inside my call <code>find_newer_files(         &#39;D:&#47;projects&#47;Check_Tool&#47;AGF&#47;lux&#47;2016_12&#39; =&gt; &quot;lin&quot;,&quot;...&quot;,  # directory_A =&gt; extension_A         &#39;D:&#47;projects&#47;Check_Tool&#47;TAGF&#47;lux&#39; =&gt; &quot;LINT&quot;,&quot;...&quot;, # directory B     );</code> But I think I have to use a loop where I have to call for each extension the sub modul <b>sub find_newer_files</b> right?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493371217, "post_id": 43675479, "comment_id": 74399017, "body": "Please show the rest of the subroutine that you have written. It will probably help us to understand what you want to do."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493371376, "post_id": 43676462, "comment_id": 74399121, "body": "<b><i>&quot;+- typos&quot;</i></b> Please don&#39;t post untested code. At the very least you should make sure that it compiles."}, {"owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493372285, "post_id": 43676462, "comment_id": 74399731, "body": "Removed the typos."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1493372787, "post_id": 43676462, "comment_id": 74400066, "body": "No, you haven&#39;t. That code has never seen a compiler. This is a dreadful answer which guesses what the OP might mean without explaining that guess, and without describing how the &quot;solution&quot; works and what it assumes. It also doesn&#39;t stand a chance of working as it is."}, {"owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493373179, "post_id": 43676462, "comment_id": 74400339, "body": "@Borodin: Well i did check it here - but made a mistake (actually 2) when editing my answer, sorry."}], "tags": [], "owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "is_accepted": false, "score": -1, "last_activity_date": 1493373401, "last_edit_date": 1493373401, "creation_date": 1493370861, "answer_id": 43676462, "question_id": 43675479, "link": "https://stackoverflow.com/questions/43675479/how-to-use-a-loop-in-perl/43676462#43676462", "title": "How to use a loop in perl", "body": "<p>I guess you mean something like:</p>\n\n<pre><code>...    \nsub find_newer_files {\n        my ( $dirA, $extA, $dirB, $extB ) = @_;\n        my @found;\n        if (ref $extA) {\n            foreach my $i(0 .. $#{$extA}) {\n                push @found, \n                    find_newer_files($dirA, $extA-&gt;[$i], $dirB, $extB-&gt;[$i]);\n            }\n            return @found;\n        }\n    .....\n    find_newer_files(\n        'D:/projects/Check_Tool/AGF/lux/2016_12' =&gt; \"lin\",  # directory_A =&gt; extension_A\n        'D:/projects/Check_Tool/TAGF/lux' =&gt; \"LINT\", # directory B\n    );\n    find_newer_files(\n        'D:/projects/Check_Tool/AGF/lux/2016_12' =&gt; [\"lin1\",\"lin2\",\"lin3\"],  # directory_A =&gt; extension_A\n        'D:/projects/Check_Tool/TAGF/lux' =&gt; [\"LINT1\",\"LINT2\",\"LINT3\"], # directory B\n    );\n...\n</code></pre>\n\n<p>By Adding this block </p>\n\n<pre><code>        my @found;\n        if (ref $extA) {\n            foreach my $i(0 .. $#{$extA}) {\n                push @found, \n                    find_newer_files($dirA, $extA-&gt;[$i], $dirB, $extB-&gt;[$i]);\n            }\n            return @found;\n        }\n</code></pre>\n\n<p>to the top of your function you could examine additional extensions (assuming you return nothing or a list of files).</p>\n\n<p>so instead of writing:</p>\n\n<pre><code>find_newer_files(\n    'D:/projects/Check_Tool/AGF/lux/2016_12' =&gt; \"lin1\",  # directory_A =&gt; extension_A\n    'D:/projects/Check_Tool/TAGF/lux' =&gt; \"LINT1\", # directory B\n);\nfind_newer_files(\n    'D:/projects/Check_Tool/AGF/lux/2016_12' =&gt; \"lin2\",  # directory_A =&gt; extension_A\n    'D:/projects/Check_Tool/TAGF/lux' =&gt; \"LINT2\", # directory B\n);\nfind_newer_files(\n    'D:/projects/Check_Tool/AGF/lux/2016_12' =&gt; \"lin3\",  # directory_A =&gt; extension_A\n    'D:/projects/Check_Tool/TAGF/lux' =&gt; \"LINT3\", # directory B\n);\n</code></pre>\n\n<p>you could use</p>\n\n<pre><code>find_newer_files(\n    'D:/projects/Check_Tool/AGF/lux/2016_12' =&gt; [\"lin1\",\"lin2\",\"lin3\"],  # directory_A =&gt; extension_A\n    'D:/projects/Check_Tool/TAGF/lux' =&gt; [\"LINT1\",\"LINT2\",\"LINT3\"], # directory B\n);\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 6235589, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/9e62de362533777ba04f9cbc4a45c1e2?s=128&d=identicon&r=PG&f=1", "display_name": "Moehre", "link": "https://stackoverflow.com/users/6235589/moehre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1493375579, "creation_date": 1493367834, "last_edit_date": 1592644375, "question_id": 43675479, "link": "https://stackoverflow.com/questions/43675479/how-to-use-a-loop-in-perl", "title": "How to use a loop in perl", "body": "<p>I have a sub modul in perl to compare files regarding their time.\nNow I will not only compare &quot;lin&quot; in directory A and &quot;LINT&quot; in directory B. How can I add more files in A and B?</p>\n<pre><code>...    \nsub find_newer_files {\n        my ( $dirA, $extA, $dirB, $extB ) = @_;\n    .....\n    find_newer_files(\n        'D:/projects/Check_Tool/AGF/lux/2016_12' =&gt; &quot;lin&quot;,  # directory_A =&gt; extension_A\n        'D:/projects/Check_Tool/TAGF/lux' =&gt; &quot;LINT&quot;, # directory B\n    );\n...\n</code></pre>\n<hr />\n<h3>Update</h3>\n<p>Yeah this is something I need. So I can add further extensions in an array like you did <code>[ &quot;lin1&quot;, &quot;lin2&quot; ... ]</code>.</p>\n<p>The rest of my subroutine is:</p>\n<pre><code>sub find_newer_files {\n    my ( $dirA, $extA, $dirB, $extB ) = @_;\n\n    # read files and their mtime from dirA into a hash (fname =&gt; mtime)\n    chdir $dirA or die &quot;chdir($dirA) failed: $!&quot;;\n    my %files_in_A = map { $_ =&gt; ( stat $_ )[9] } glob( &quot;*.$extA&quot; );\n\n    # read files and their mtime from dirB into a hash (fname =&gt; mtime)\n    chdir $dirB or die &quot;chdir($dirB) failed: $!&quot;;\n    my %files_in_B = map { $_ =&gt; ( stat $_ )[9] } glob( &quot;*.$extB&quot; );\n\n    # for each found file in dirA\n    for my $fileA ( keys %files_in_A ) {\n\n        # replace extension for wanted file in dirB\n        ( my $fileB = $fileA ) =~ s{\\.\\Q$extA\\E$}{.$extB};\n\n        warn &quot;$fileA -&gt; $fileB\\n&quot; if $ENV{DEBUG};\n\n        # if we found a fileB in dirB\n        if ( exists $files_in_B{$fileB} ) {\n\n            # compare the timestamp; tell us when fileB is older than fileA\n            if ( $files_in_A{$fileA} &gt; $files_in_B{$fileB} ) {\n                say &quot;$fileB is older than $fileA&quot;;    #say\n            }\n        }\n    }\n    \n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1493354672, "post_id": 43672061, "comment_id": 74390485, "body": "<code>print join &quot;\\n&quot;, 1..10</code>;"}], "answers": [{"comments": [{"owner": {"reputation": 22, "user_id": 7475620, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QtllEDldJpc/AAAAAAAAAAI/AAAAAAAAAw4/BCa52lX_yYY/photo.jpg?sz=128", "display_name": "AshR", "link": "https://stackoverflow.com/users/7475620/ashr"}, "edited": false, "score": 0, "creation_date": 1493355609, "post_id": 43672167, "comment_id": 74390764, "body": "AWESOME !! exactly what I wanted to know !! Thanks :)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1493355289, "last_edit_date": 1493355289, "creation_date": 1493354978, "answer_id": 43672167, "question_id": 43672061, "link": "https://stackoverflow.com/questions/43672061/perl-printing-range-of-numbers-with-a-newline-at-the-end/43672167#43672167", "title": "perl printing range of numbers with a newline at the end", "body": "<p>To pass the 10 numbers and a newline to <code>print</code> (which will print each in turn), you can use the following:</p>\n\n<pre><code>print 1..10, \"\\n\";\n</code></pre>\n\n<hr>\n\n<p>If instead you want to build a string that consists of the numbers followed by a newline, you can use either of the following:</p>\n\n<pre><code>print join(\"\", 1..10, \"\\n\");\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>print join(\"\", 1..10) . \"\\n\";\n</code></pre>\n\n<hr>\n\n<p>Test:</p>\n\n<pre><code>$ perl -e'\n   print 1..10, \"\\n\";\n   print join(\"\", 1..10, \"\\n\");\n   print join(\"\", 1..10) . \"\\n\";\n   print \"done.\\n\";\n'\n12345678910\n12345678910\n12345678910\ndone.\n</code></pre>\n"}], "owner": {"reputation": 22, "user_id": 7475620, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QtllEDldJpc/AAAAAAAAAAI/AAAAAAAAAw4/BCa52lX_yYY/photo.jpg?sz=128", "display_name": "AshR", "link": "https://stackoverflow.com/users/7475620/ashr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 43672167, "answer_count": 1, "score": 0, "last_activity_date": 1493359079, "creation_date": 1493354325, "last_edit_date": 1493359079, "question_id": 43672061, "link": "https://stackoverflow.com/questions/43672061/perl-printing-range-of-numbers-with-a-newline-at-the-end", "title": "perl printing range of numbers with a newline at the end", "body": "<p>I was trying to print 1 to 10 using perl.</p>\n\n<pre><code>print 1..10 #This works perfectly fine.\n</code></pre>\n\n<p>I am wondering if there is a way to add a new line after printing the last element.</p>\n\n<pre><code>print \"1..10\" . \"\\n\" ; # it just  prints 1..10 (as expected) instead of 12345678910\n\nprint \"{1..10} . \"\\n\" ; # This doesn't work either :(\n</code></pre>\n\n<p>I know I could just store it in a list and then print the list :</p>\n\n<pre><code>my @test = 1..10 ;\n\nprint @test ;\n</code></pre>\n\n<p>I am just wondering if there is a trick with print to do it in 1 line. \nThanks in advance !</p>\n"}, {"tags": ["perl", "sockets", "udp"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1493355178, "post_id": 43671278, "comment_id": 74390631, "body": "This is unrelated to Perl but UDP is simple an unreliable protocol. Possible duplicate of <a href=\"http://stackoverflow.com/questions/15060180/what-are-the-chances-of-losing-a-udp-packet\">What are the chances of losing a UDP packet?</a>"}, {"owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "edited": false, "score": 0, "creation_date": 1493374911, "post_id": 43671278, "comment_id": 74401470, "body": "Indeed UDP is an unreliable protocol. But it could be an issue of Perl application if it&#39;s to slow"}], "answers": [{"tags": [], "owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "is_accepted": false, "score": -1, "last_activity_date": 1493360791, "creation_date": 1493360791, "answer_id": 43673388, "question_id": 43671278, "link": "https://stackoverflow.com/questions/43671278/concerned-about-perl-iosocket-losing-udp-packets/43673388#43673388", "title": "concerned about perl IO::Socket losing UDP packets", "body": "<p>Try to increase <a href=\"http://man7.org/linux/man-pages/man7/socket.7.html\" rel=\"nofollow noreferrer\">SO_RCVBUF</a></p>\n\n<p><code>IO::Socket::INET-&gt;setsockopt(SOL_SOCKET, SO_RCVBUF, ...)</code></p>\n\n<p><a href=\"https://linux.die.net/man/1/sar\" rel=\"nofollow noreferrer\">sar</a> is very helpful for purpose of Network Statistic investigation.</p>\n\n<blockquote>\n  <p>idgmerr/s The number of received UDP datagrams per second that could\n  not be delivered for reasons other than the lack of an application at\n  the destination port [udpInErrors].</p>\n</blockquote>\n\n<pre><code>$ sar -n UDP 5\n\n08:18:12 AM    idgm/s    odgm/s  noport/s idgmerr/s\n08:18:15 AM    121.33    121.33      7.67      0.00\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 171244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dac99ba85a0e83df974b719aeaa2f523?s=128&d=identicon&r=PG", "display_name": "Jason Haar", "link": "https://stackoverflow.com/users/171244/jason-haar"}, "is_accepted": false, "score": 0, "last_activity_date": 1493970391, "creation_date": 1493970391, "answer_id": 43799303, "question_id": 43671278, "link": "https://stackoverflow.com/questions/43671278/concerned-about-perl-iosocket-losing-udp-packets/43799303#43799303", "title": "concerned about perl IO::Socket losing UDP packets", "body": "<p>Thank you the SO_RCVBUF did the trick. </p>\n\n<p>What is happening is that I am pushing in (say) 1000 syslog records/packets per sec, but the DNS queries I do pause the processing by 1sec/record. So this means after processing ONE record, there are now 999 records to process. After two seconds there's 1998. This isn't looking good...</p>\n\n<p>Those packets can be queued by the OS according to SO_RCVBUF, which is by default (on Redhat) 212992 bytes. So assuming an average of 400 bytes per syslog record, that's a maximum of ~530 records queued up before the kernel starts dropping new packets. So I can increase the SO_RCVBUF 10 even 100-fold but it won't get around the fundamental issue of that big pause. However, in reality I'm talking about peak rates: there are moments when the records/sec drop right down, and a lot of syslog records don't require DNS lookups (ie I skip them). Also by caching the heck out of those DNS lookups, I can minimize the amount of time they are done, so 1000/sec could be 101/sec involving DNS, which in turn could be 99% cachable, leading to only 2-5/sec that need DNS lookups - and at that level a healthy cache will get you through the peak load issues</p>\n\n<p>I am not a programmer, so doing this properly with input queues, asynchronous DNS lookups, etc are beyond me. But I do know iptables... So I'm intending to run several of these on different ports, and use iptables to round-robin-deliver incoming packets onto them, giving them async functionality without me needing to write a single line of code. That should solve this for the load levels I need to worry about :-)</p>\n\n<p>Thanks!</p>\n"}], "owner": {"reputation": 1, "user_id": 171244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dac99ba85a0e83df974b719aeaa2f523?s=128&d=identicon&r=PG", "display_name": "Jason Haar", "link": "https://stackoverflow.com/users/171244/jason-haar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 273, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493970391, "creation_date": 1493348711, "last_edit_date": 1493393742, "question_id": 43671278, "link": "https://stackoverflow.com/questions/43671278/concerned-about-perl-iosocket-losing-udp-packets", "title": "concerned about perl IO::Socket losing UDP packets", "body": "<p>I have a small UDP perl service that receives syslog data, fiddles with it, and sends it on it's way (over UDP) back to a syslog server that is running also on localhost. It works really well, but I was concerned that it might have been losing syslog events so tested it</p>\n\n<p>Basically I pushed 100 \"this is a test $NUM++\" messages in, and sometimes 100 would come out - but once 99 came out (as measured by tcpdump running on the host running the perl script). This is on our production system where it's handling 500-1500 syslog msg/sec. As usual it works perfectly when it's only got test traffic, but under load I'm not sure. </p>\n\n<p>tcpdump shows the 100 events coming in over eth0, but tcpdump showed the 99 coming out over lo. So maybe one never made it into the '$rcvSock', or maybe one got lost going out over lo via '$sndSock'</p>\n\n<p>Basically the perl code is like below. However, the \"#fiddling\" bit does involve some pauses for DNS lookups, so there is some \"read->block->write\" going on. I don't think \"Listen\" is supported under UDP, so I can't be sure if the perl script is blocking-and-dropping the next receive while it's doing the \"fiddling\"?</p>\n\n<p>Can anyone shed any light on where the loss could be occurring and how to get past it?</p>\n\n<pre><code>$rcvSock = IO::Socket::INET-&gt;new(\n     LocalAddr =&gt; $hn,\n     LocalPort =&gt; $rcvPort,\n     Timeout =&gt; $timeout,\n     Proto    =&gt; 'udp'\n);\n\n$sndSock = IO::Socket::INET-&gt;new(\n     PeerAddr =&gt; $syslogSrv,\n     PeerPort =&gt;$syslogPort,\n     Timeout  =&gt; $timeout,\n     Proto    =&gt; 'udp',\n     Blocking =&gt; 0\n);\n\nwhile (1) {\n    $now=time;\n    $rcvSock-&gt;recv($input,2560);\n    $remote_addr=$rcvSock-&gt;peerhost();\n    #fiddling occurs\n    $sndSock-&gt;send(\"$input\");\n}\n</code></pre>\n"}, {"tags": ["perl", "dns", "lwp", "lwp-useragent"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1493333009, "post_id": 43667531, "comment_id": 74384970, "body": "I would have thought that <code>LWP::UserAgent::DNS::Hosts</code> was exactly the right tool. What went wrong?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1493357079, "post_id": 43667531, "comment_id": 74391251, "body": "It is unclear from your question what exactly with the handshake is failing. From what you&#39;ve tried so far my guess is that it is not even related to the certificate validation and thus fiddling with it does not help. Please run your code with <code>perl -MIO::Socket::SSL=debug4 ...</code> to enable SSL debugging and also provide the versions of IO::Socket::SSL, Net::SSLeay and openssl you are using."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1493357556, "post_id": 43667531, "comment_id": 74391404, "body": "Please also provide information about the server setup you are using and what was changed on your client and server side setup which might be relevant to the failure. For example it might be that your problem is caused by changes on the server side or by upgrading to new openssl or IO::Socket::SSL versions and now you don&#39;t have any shared ciphers since the servers wants RC4 and newer IO::Socket::SSL have disabled this insecure cipher."}, {"owner": {"reputation": 9397, "user_id": 173925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PMx1r.jpg?s=128&g=1", "display_name": "Dereleased", "link": "https://stackoverflow.com/users/173925/dereleased"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1493393435, "post_id": 43667531, "comment_id": 74413709, "body": "@SteffenUllrich I have added the information you&#39;ve requested."}, {"owner": {"reputation": 9397, "user_id": 173925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PMx1r.jpg?s=128&g=1", "display_name": "Dereleased", "link": "https://stackoverflow.com/users/173925/dereleased"}, "edited": false, "score": 0, "creation_date": 1493393784, "post_id": 43667531, "comment_id": 74413923, "body": "I just found this link, perhaps this issue is rather old (and the solution to it also old, one would hope)? <a href=\"http://www.nntp.perl.org/group/perl.libwww/1999/11/msg217.html\" rel=\"nofollow noreferrer\">nntp.perl.org/group/perl.libwww/1999/11/msg217.html</a>"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1493394193, "post_id": 43667531, "comment_id": 74414180, "body": "@Dereleased: The server is sending back an alert which means that it does not like the client. And this is even done before the certificate is send and before any HTTP is send, i.e. fiddling with certificate validation or HTTP headers will not help. My guess the problem is either that the server requires SNI extension or that the server requires some ciphers the client does not provide or that a very old server requires SSL 3.0 which is disabled in newer OpenSSL versions by default (i.e. in 1.0.2)."}, {"owner": {"reputation": 9397, "user_id": 173925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PMx1r.jpg?s=128&g=1", "display_name": "Dereleased", "link": "https://stackoverflow.com/users/173925/dereleased"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1493394290, "post_id": 43667531, "comment_id": 74414257, "body": "@SteffenUllrich Did I mention the request succeeds if I override the ip using my <code>&#47;etc&#47;hosts</code> file?  How can I get this to behave the same way, but use the IP I prefer without having to write it into <code>&#47;etc&#47;hosts</code> (which makes it impossible to parallelize requests for multiple IPs but the same domain name)?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1493394381, "post_id": 43667531, "comment_id": 74414307, "body": "@Dereleased: In this case this sounds like a problem with SNI. Try to explicitly give <code>SSL_hostname</code> with the hostname of the server as argument in <code>ssl_opts</code>. The line about <code>not using SNI because hostname is unknown</code> should vanish then from debug output if done right."}, {"owner": {"reputation": 9397, "user_id": 173925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PMx1r.jpg?s=128&g=1", "display_name": "Dereleased", "link": "https://stackoverflow.com/users/173925/dereleased"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1493394527, "post_id": 43667531, "comment_id": 74414409, "body": "@SteffenUllrich Please post that as an answer so I can accept and upvote.  Edit: it worked flawlessly if that was not clear."}], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 2, "last_activity_date": 1493395648, "creation_date": 1493395648, "answer_id": 43684553, "question_id": 43667531, "link": "https://stackoverflow.com/questions/43667531/override-dns-for-specific-domains-like-a-hosts-file-but-without-using-hosts-fil/43684553#43684553", "title": "Override DNS For Specific Domains Like A Hosts File, But Without Using Hosts file", "body": "<p>Given that it works with an explicit <code>/etc/hosts</code> file but not with just replacing <code>PeerAddr</code> or using <code>LWP::UserAgent::DNS::Hosts</code> this looks like a problem with the SNI extension. This TLS extension is used to provide the TLS server with the requested hostname (similar to the HTTP <code>Host</code> header) so that it can choose the appropriate certificate. If this SNI extension is missing some servers return a default certificate while others throw an error, like in this case.</p>\n\n<p>The fix is to provide the hostname using <code>SSL_hostname</code> in <code>ssl_opts</code>. Such  fix could probably also help with <code>LWP::UserAgent::DNS::Hosts</code>, i.e in <a href=\"https://metacpan.org/source/MASAKI/LWP-UserAgent-DNS-Hosts-0.11/lib/LWP/Protocol/https/hosts.pm\" rel=\"nofollow noreferrer\">LWP/Protocol/https/hosts.pm</a>:</p>\n\n<pre><code>12    if (my $peer_addr = LWP::UserAgent::DNS::Hosts-&gt;_registered_peer_addr($host)) {\n13        push @opts, (\n14            PeerAddr          =&gt; $peer_addr,\n15            Host              =&gt; $host,\n16            SSL_verifycn_name =&gt; $host,\nNEW           SSL_hostname      =&gt; $host,   # for SNI\n17        );\n18    }\n</code></pre>\n"}], "owner": {"reputation": 9397, "user_id": 173925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PMx1r.jpg?s=128&g=1", "display_name": "Dereleased", "link": "https://stackoverflow.com/users/173925/dereleased"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 0, "accepted_answer_id": 43684553, "answer_count": 1, "score": 3, "last_activity_date": 1493395648, "creation_date": 1493325602, "last_edit_date": 1493393420, "question_id": 43667531, "link": "https://stackoverflow.com/questions/43667531/override-dns-for-specific-domains-like-a-hosts-file-but-without-using-hosts-fil", "title": "Override DNS For Specific Domains Like A Hosts File, But Without Using Hosts file", "body": "<p>I need to issue a series of parallelized web requests from the same server to a specific domain, but control what IP address these requests actually go to.  Originally, I came up with a scheme where I would request the IP I wanted specifically, and then manually set the <code>Host: www.example.com</code> header on the request, and use a series of handlers to make sure that redirects issued followed the same pattern.</p>\n\n<p>This seemed to work for some time, but lately I've been having trouble with redirects to HTTPS.  The handshake will fail, and the request in turn.  <s>I have tried disabling SSL verification in a variety of ways, including:</p>\n\n<pre><code>local $ENV{ PERL_LWP_SSL_VERIFY_HOSTNAME } = 0;\nlocal $ENV{ HTTPS_DEBUG }                  = 1;\n\n$ua-&gt;ssl_opts(\n    SSL_ca_file =&gt; Mozilla::CA::SSL_ca_file(),\n    verify_hostname =&gt; 0,\n    SSL_verify_mode =&gt; 0x00,\n);\n\nIO::Socket::SSL::set_ctx_defaults(\n    SSL_verifycn_scheme =&gt; 'www',\n    SSL_verify_mode =&gt; 0,\n);        \n</code></pre>\n\n<p></s>\nI have also tried using <a href=\"http://search.cpan.org/~masaki/LWP-UserAgent-DNS-Hosts-0.05/README.pod\" rel=\"nofollow noreferrer\">LWP::UserAgent::DNS::Hosts</a> to solve the problem, but it persists.</p>\n\n<p><strong>&lt;edit>I should note that the reason why turning off peer validation for SSL is not solving the problem is likely because for some reason requesting this way is actually causing the handshake to fail, not failing on a validation point.&lt;/edit></strong></p>\n\n<p>One thing that works is making an entry in <code>/etc/hosts</code> to point the domain at the appropriate IP, however this is not practical, because I may need to run tens, or hundreds, of tests, in parallel, on the same domain.</p>\n\n<p>Is there a way to emulate the functionality of adding an entry to <code>/etc/hosts</code> that does not involve requesting the IP specifically and overriding the <code>Host: ...</code> HTTP header?</p>\n\n<h3>EDIT: SSL Debug Info</h3>\n\n<pre><code>DEBUG: .../IO/Socket/SSL.pm:1914: new ctx 140288835318480\nDEBUG: .../IO/Socket/SSL.pm:402: socket not yet connected\nDEBUG: .../IO/Socket/SSL.pm:404: socket connected\nDEBUG: .../IO/Socket/SSL.pm:422: ssl handshake not started\nDEBUG: .../IO/Socket/SSL.pm:455: not using SNI because hostname is unknown\nDEBUG: .../IO/Socket/SSL.pm:478: set socket to non-blocking to enforce timeout=180\nDEBUG: .../IO/Socket/SSL.pm:491: Net::SSLeay::connect -&gt; -1\nDEBUG: .../IO/Socket/SSL.pm:501: ssl handshake in progress\nDEBUG: .../IO/Socket/SSL.pm:511: waiting for fd to become ready: SSL wants a read first\nDEBUG: .../IO/Socket/SSL.pm:531: socket ready, retrying connect\nDEBUG: .../IO/Socket/SSL.pm:491: Net::SSLeay::connect -&gt; -1\nDEBUG: .../IO/Socket/SSL.pm:1388: SSL connect attempt failed with unknown error\n\nDEBUG: .../IO/Socket/SSL.pm:497: fatal SSL error: SSL connect attempt failed with unknown error error:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure\nDEBUG: .../IO/Socket/SSL.pm:1948: free ctx 140288835318480 open=140288835318480\nDEBUG: .../IO/Socket/SSL.pm:1953: free ctx 140288835318480 callback\nDEBUG: .../IO/Socket/SSL.pm:1956: OK free ctx 140288835318480\n</code></pre>\n\n<p>And in the response I get:</p>\n\n<blockquote>\n  <p>Can't connect to redacted.org:443</p>\n  \n  <p><code>SSL connect attempt failed with unknown error error:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure at /System/Library/Perl/Extras/5.18/LWP/Protocol/http.pm line 51.</code></p>\n</blockquote>\n\n<p>It fails equally well on our server (using an older legacy version of Perl, which I will not disclose here as it seems irrelevant).</p>\n\n<p>The server initially responds to a non-HTTPS request with a 301 redirect to the HTTPS site.  Then the failure occurs.  I will post reproducing code with the specific details of my request removed, but any site which redirects non-HTTPS traffic to HTTPS should suffice.</p>\n\n<pre><code>use IO::Socket::SSL qw/ debug4 /;\nuse LWP::UserAgent;\nuse LWP::UserAgent::DNS::Hosts;\nuse HTTP::Request;\nuse Mozilla::CA;\nuse Data::Dumper;\n\nLWP::UserAgent::DNS::Hosts-&gt;register_hosts(\n    'recacted.org' =&gt; '127.0.0.1', # no I am not redirecting to loopback in reality, this is anonymized\n    'www.redacted.org' =&gt; '127.0.0.1',\n);\n\nLWP::UserAgent::DNS::Hosts-&gt;enable_override;\n\nmy $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;ssl_opts( SSL_ca_file =&gt; Mozilla::CA::SSL_ca_file() );\n\nmy $request = HTTP::Request-&gt;new(GET =&gt; 'http://redacted.org/');\n\nmy $response = $ua-&gt;request($request);\n\nprint $response-&gt;content; #Dumper ( $response-&gt;is_success ? $response-&gt;headers : $response );\n</code></pre>\n\n<p>Again, that is not the production code, just enough code to reproduce the issue.  It doesn't seem to have anything to do with SSL verification, but moreover an inability to negotiate the request, presumably because <code>LWP::UserAgent::DNS::Hosts</code> is doing exactly what I was doing: changing the request target to the desired IP, and then writing the <code>Host: ...</code> header manually.  Why this causes the SSL handshake to fail, I do not know.</p>\n\n<p>On my local machine debugging</p>\n\n<pre><code>openssl version -a: 1.0.2j 26 Sep 2016\nIO::Socket::SSL-&gt;VERSION == 1.966\nNet::SSLeay-&gt;VERSION == 1.72\n</code></pre>\n\n<p>On a server of ours</p>\n\n<pre><code>openssl version -a: 1.0.1t 3 May 2016\nIO::Socket::SSL-&gt;VERSION == 1.76\nNet::SSLeay-&gt;VERSION == 1.48\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493325518, "post_id": 43667189, "comment_id": 74381914, "body": "I clarified the question. Please review to make sure I didn&#39;t change what you were asking."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1493325526, "last_edit_date": 1493325526, "creation_date": 1493324792, "answer_id": 43667320, "question_id": 43667189, "link": "https://stackoverflow.com/questions/43667189/rewrite-hash-of-hash-into-parallel-arrays/43667320#43667320", "title": "Rewrite hash of hash into parallel arrays", "body": "<p>This can be achieved using</p>\n\n<pre><code>my @ids       = keys(%cars);\nmy @owners    = map { $_-&gt;{ owner    } } @cars{@ids};\nmy @colors    = map { $_-&gt;{ color    } } @cars{@ids};\nmy @maxspeeds = map { $_-&gt;{ maxspeed } } @cars{@ids};\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my (@ids, @owners, @colors, @maxspeeds);\nwhile (my ($id, $car) = each(%$cars)) {\n   push @ids,       $id;\n   push @owners,    $car-&gt;{owner};\n   push @colors,    $car-&gt;{colors};\n   push @maxspeeds, $car-&gt;{maxspeeds};\n}\n</code></pre>\n\n<p>This is a weird request because one normally <em>avoids</em> parallel arrays because using them leads to more complicated code.</p>\n"}], "owner": {"reputation": 11, "user_id": 7933502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db75e0831fe5826c5f725587223fffd8?s=128&d=identicon&r=PG&f=1", "display_name": "mirka mirkab2b", "link": "https://stackoverflow.com/users/7933502/mirka-mirkab2b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1493325526, "creation_date": 1493324282, "last_edit_date": 1493325483, "question_id": 43667189, "link": "https://stackoverflow.com/questions/43667189/rewrite-hash-of-hash-into-parallel-arrays", "title": "Rewrite hash of hash into parallel arrays", "body": "<p>I need rewrite the values from a hash of hashes into parallel arrays.</p>\n\n<p>Specifically, I want to transform</p>\n\n<pre><code>my %cars;\n$cars{123} = { owner =&gt; \"Mark\",   color =&gt; \"black\", maxspeed  = \"260\" };\n$cars{124} = { owner =&gt; \"Jason\",  color =&gt; \"red\",   maxspeed =&gt; \"230\" };\n$cars{125} = { owner =&gt; \"Sumaya\", color =&gt; \"pink\",  maxspeed =&gt; \"200\" };\n</code></pre>\n\n<p>into</p>\n\n<pre><code>my @owners    = ( \"Mark\",  \"Jason\", \"Sumaya\" );\nmy @colors    = ( \"black\", \"red\",   \"pink\"   );\nmy @maxspeeds = ( \"260\",   \"230\",   \"200\"    );\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1493326120, "post_id": 43667126, "comment_id": 74382188, "body": "Ok... what&#39;s the problem? (Hint: variables don&#39;t get interpolated inside single-quoted strings.)"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7627657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a9f9ffe817c5d12e6e0323dbd55b666?s=128&d=identicon&r=PG&f=1", "display_name": "sqljavadev", "link": "https://stackoverflow.com/users/7627657/sqljavadev"}, "edited": false, "score": 0, "creation_date": 1493601950, "post_id": 43680365, "comment_id": 74470146, "body": "Hi @Dave Cross, I have added the code which retrieves the txt files in a folder and output them on a html page. I want to show each txt file as a link on the html page"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 23, "user_id": 7627657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a9f9ffe817c5d12e6e0323dbd55b666?s=128&d=identicon&r=PG&f=1", "display_name": "sqljavadev", "link": "https://stackoverflow.com/users/7627657/sqljavadev"}, "edited": false, "score": 0, "creation_date": 1493622694, "post_id": 43680365, "comment_id": 74474655, "body": "@sqljavadev: If you follow the advice in my answer then you&#39;ll get a lot closer to a solution."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1493382779, "creation_date": 1493382779, "answer_id": 43680365, "question_id": 43667126, "link": "https://stackoverflow.com/questions/43667126/how-to-read-all-text-files-in-a-directory-and-output-as-links-to-a-html-page/43680365#43680365", "title": "how to read all text files in a directory and output as links to a html page", "body": "<p>You haven't actually asked a problem, so I can't be sure which of the issues in the code you're confused by.</p>\n\n<p>I can see one obvious problem, one possible problem and a few improvements you could make.</p>\n\n<p><strong>The Obvious Problem</strong></p>\n\n<pre><code>map  { '&lt;a href=\"$_\"&gt;$_&lt;/a&gt;&lt;br&gt;' }\n</code></pre>\n\n<p>Variables are only interpolated in double-quoted strings. This is a single-quoted string, so you're not going to get the value of <code>$_</code>, you'll just get the literal string <code>$_</code> (a dollar sign followed by an underscore).</p>\n\n<p><strong>The Possible Problem</strong></p>\n\n<p>It looks like this program is run once to generate a static HTML page, but you don't say how this page is then used. Is it served by a web server or do you just open it locally using a <code>file://</code> URL in your browser?</p>\n\n<p>This will make a difference to what the <code>href</code> attribute in the <code>&lt;a&gt;</code> element needs to look like. Do you need a URL or a file path? This needs to be thought out.</p>\n\n<p><strong>Some Improvements</strong></p>\n\n<ul>\n<li><p>You put newlines between your lines of output, but newlines are usually ignored by HTTP clients (like browsers). You could replace the <code>\\n</code> with a <code>&lt;br&gt;</code> element, but it might be nicer to have a bullet list (using <code>&lt;ul&gt;</code> and <code>&lt;li&gt;</code>.</p></li>\n<li><p>I recommend using scalar variables for directory handles instead of barewords - i.e. <code>opendir my $dir_h, $dir</code> instead of <code>opendir MYDIR, $dir</code>.</p></li>\n<li><p>I don't know how much more complicated this program might get, but you will almost certainly benefit from taking the HTML out of the code and using a templating engine instead.</p></li>\n</ul>\n"}], "owner": {"reputation": 23, "user_id": 7627657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a9f9ffe817c5d12e6e0323dbd55b666?s=128&d=identicon&r=PG&f=1", "display_name": "sqljavadev", "link": "https://stackoverflow.com/users/7627657/sqljavadev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493601825, "creation_date": 1493323966, "last_edit_date": 1493601825, "question_id": 43667126, "link": "https://stackoverflow.com/questions/43667126/how-to-read-all-text-files-in-a-directory-and-output-as-links-to-a-html-page", "title": "how to read all text files in a directory and output as links to a html page", "body": "<p>I'm trying to read all the txt files in a directory and output them as links on a single html page. When I open the html page, txt files should display as links. When I click on the link, the content in the txt file should open on the html page. Here is my code in perl.   </p>\n\n<pre><code>my $dir = '/';               ## rem trailing slash\nmy $body;                    ## our file list\nmy $saveFile = '/dev/null';  ## file to save links\n\nopendir( MYDIR, $dir ) or die 'opendir';\n$body =\n   join( \"\\n\",                           ## make it legible\n      map  { '&lt;a href=\"$_\"&gt;$_&lt;/a&gt;&lt;br&gt;' } ## format each file\n      sort { $a cmp $b }                 ## sort them\n      grep { ! /^\\./ }                   ## no .name files\n      grep { -T \"$dir$_ }                ## only text files\n      readdir MYDIR\n   );\nclosedir MYDIR;\n\n## build your link page\n## using $body\nopen( FILE, $saveFile ) or die 'open';\nprint FILE &lt;&lt;EOF;\n&lt;HTML&gt;\n&lt;HEAD&gt;\n&lt;TITLE&gt;My Files&lt;/TITLE&gt;\n&lt;BODY&gt;\n$body\n&lt;/BODY&gt;\n&lt;/HTML&gt;\nEOF\nclose FILE;\n</code></pre>\n\n<p>Code to retrieve text file and I'm executing this code from the terminal as \"perl showtxtfiles.pl > somefile.html\" which retrieves all the txt files in the folder and displaying them on a html page. But, all I need is to show each txt file as a link when I open the somefile.html page.</p>\n\n<pre><code>#!/usr/bin/perl\n    use strict;\n    use warnings;\n\n    my $dir = '/home/ubuntu/uisacad5.uis.edu/~rloui2/540/project2';\n\n\n    opendir(DIR, $dir) or die $!;\n\n    while (my $file = readdir(DIR)) {\n\n        # We only want files\n        next unless (-f \"$dir/$file\");\n\n        # Use a regular expression to find files ending in .txt\n        next unless ($file =~ m/\\.txt$/);\n\n        print \"$file\\n\";\n    }\n\n    closedir(DIR);\n    exit 0;\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493311950, "post_id": 43663541, "comment_id": 74374378, "body": "Your <code>^</code> ist the beginning of the string. You don&#39;t want that."}], "answers": [{"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 2, "last_activity_date": 1493312359, "creation_date": 1493312359, "answer_id": 43663846, "question_id": 43663541, "link": "https://stackoverflow.com/questions/43663541/using-regex-to-get-the-required-text/43663846#43663846", "title": "Using regex to get the required text", "body": "<p>Use <a href=\"https://perldoc.perl.org/perlretut.html#Using-regular-expressions-in-Perl\" rel=\"nofollow noreferrer\"><code>/g</code> in list context</a> to extract as many matches as possible:</p>\n\n<pre><code>$ perl -MData::Dumper -e 'print Dumper(\"[SAME][DIFFERING_VALUES] Name= Ram Mark= 12\" =~ /\\[([^]]+)\\]/g)'\n$VAR1 = 'SAME';\n$VAR2 = 'DIFFERING_VALUES';\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 7435384, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/05ae63a098fbc4efcf0616b913047f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Vinu Shankar", "link": "https://stackoverflow.com/users/7435384/vinu-shankar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1493312359, "creation_date": 1493311395, "question_id": 43663541, "link": "https://stackoverflow.com/questions/43663541/using-regex-to-get-the-required-text", "title": "Using regex to get the required text", "body": "<p>I have tezt like this\n<code>[SAME][DIFFERING_VALUES] Name= Ram Mark= 12</code></p>\n\n<p>I need to get the value <code>DIFFERING_VALUES</code> using regex.</p>\n\n<p>I tried <code>^\\[[A-Z]*</code> but is picking only SAME. How to get DIFFERING_VALUES ?</p>\n"}, {"tags": ["arrays", "json", "perl", "hash"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493307410, "post_id": 43662055, "comment_id": 74371260, "body": "Please <a href=\"https://stackoverflow.com/posts/43662055/edit\">edit</a> the question and include the Perl data structure that you got from Data::Dumper. It does not matter to your question that it came from JSON. You seem to know how to deserialize that, so that part is not relevant."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493307541, "post_id": 43662055, "comment_id": 74371341, "body": "&quot;list of HASH&quot; -&gt; &quot;array of hash&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1493307614, "creation_date": 1493307614, "answer_id": 43662244, "question_id": 43662055, "link": "https://stackoverflow.com/questions/43662055/json-array-as-list-of-hash-in-perl/43662244#43662244", "title": "JSON Array as List of Hash in Perl", "body": "<pre><code>my $data = decode_json($json_utf8);\n\nfor my $row (@$data) {\n    for my $key (keys(%$row)) {\n       say \"$key: $row-&gt;{$key}\";\n    }\n\n    say \"\";\n}\n</code></pre>\n\n<p>References:</p>\n\n<ul>\n<li><a href=\"http://www.perlmonks.org/?node_id=977408\" rel=\"nofollow noreferrer\">Mini-Tutorial: Dereferencing Syntax</a></li>\n<li><a href=\"http://www.perlmonks.org/?node_id=69927\" rel=\"nofollow noreferrer\">References quick reference</a></li>\n<li><a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a></li>\n<li><a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a></li>\n<li><a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldsc</a></li>\n<li><a href=\"http://perldoc.perl.org/perllol.html\" rel=\"nofollow noreferrer\">perllol</a></li>\n</ul>\n"}], "owner": {"reputation": 29, "user_id": 7323840, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/215680245546269/picture?type=large", "display_name": "Rakesh Mishra", "link": "https://stackoverflow.com/users/7323840/rakesh-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 653, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493307614, "creation_date": 1493307094, "last_edit_date": 1493307352, "question_id": 43662055, "link": "https://stackoverflow.com/questions/43662055/json-array-as-list-of-hash-in-perl", "title": "JSON Array as List of Hash in Perl", "body": "<p>I'm very new to Perl, I have a non symmetric JSON array like below:</p>\n\n<pre><code>[\n{\"KEY1\":\"14507226013384557\",\"KEY2\":\"1234\",\"KEY3\":\"7899\"},\n{\"KEY1\":\"14507226013384557\",\"KEY2\":\"1234\",\"KEY3\":\"7899\",\"KEY4\":\"TEST\",\"KEY5\":\"TEST1\"},\n{\"KEY1\":\"14507226013384557\",\"KEY2\":\"1234\",\"KEY3\":\"7899\",\"KEY5\":\"TEST New\"},\n]\n</code></pre>\n\n<p>I want to parse and store JSON array in a list of HASH, and then iterate that list of hash and check value of each KEYs and the process it. Any Idea how can I do ? I have used JSON decode and printed using dumper but I am facing issue while iterating through it.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 18344, "user_id": 119326, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b29825e83c1da695da0e22b4198a0105?s=128&d=identicon&r=PG", "display_name": "Cfreak", "link": "https://stackoverflow.com/users/119326/cfreak"}, "edited": false, "score": 2, "creation_date": 1493303975, "post_id": 43660811, "comment_id": 74368852, "body": "what are you passing to the program? (<code>$ARGV[0]</code>)"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493304183, "post_id": 43660811, "comment_id": 74368986, "body": "Note that the condition <code>$split[1] eq &quot;pl&quot; || &quot;docx&quot;</code> will always be true <b>no matter what is in <code>$split[1]</code></b>. You probably meant to write <code>($split[1] eq &#39;pl&#39;) || ($split[1] eq &#39;docx&#39;)</code>."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493305012, "post_id": 43660811, "comment_id": 74369595, "body": "Don&#39;t delete your code. WIthout that, there is no reference to what you are talking about."}, {"owner": {"reputation": 11, "user_id": 7788847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22f2b2f8697eb8bf48a7eec4b176b999?s=128&d=identicon&r=PG&f=1", "display_name": "sear128", "link": "https://stackoverflow.com/users/7788847/sear128"}, "edited": false, "score": 0, "creation_date": 1493305068, "post_id": 43660811, "comment_id": 74369633, "body": "I am going to edit it and repost it! thank you for your help!"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 5, "last_activity_date": 1493306888, "last_edit_date": 1493306888, "creation_date": 1493303978, "answer_id": 43660923, "question_id": 43660811, "link": "https://stackoverflow.com/questions/43660811/perl-cant-call-method-next-on-an-undefined-value-at/43660923#43660923", "title": "Perl-Can&#39;t call method &quot;next&quot; on an undefined value at", "body": "<p>That error means this is failing:</p>\n\n<pre><code>while (my $file = $dir-&gt;next) \n</code></pre>\n\n<p>And it's caused because you're calling <code>next</code> on an undefined value - in the case <code>$dir</code>. </p>\n\n<p><code>dir</code> always returns an object, except when it is passed a single argument, and that argument is undefined. In that situation, and in that situation only, it returns <code>undef</code><sup>[1]</sup>. This indicates that <code>$ARGV[0]</code> is undefined, which indicates that no parameters were passed to the script while one is required.</p>\n\n<hr>\n\n<ol>\n<li>Without this special case, <code>dir(undef)</code> would be interpreted as <code>dir('')</code>, which returns the root directory, and that would be a dangerous way of handling an incorrect input!</li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 7788847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22f2b2f8697eb8bf48a7eec4b176b999?s=128&d=identicon&r=PG&f=1", "display_name": "sear128", "link": "https://stackoverflow.com/users/7788847/sear128"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1493314529, "creation_date": 1493303680, "last_edit_date": 1493314529, "question_id": 43660811, "link": "https://stackoverflow.com/questions/43660811/perl-cant-call-method-next-on-an-undefined-value-at", "title": "Perl-Can&#39;t call method &quot;next&quot; on an undefined value at", "body": "<p>Does anyone know how to resolve this problem? I keep getting this solution when I run it: <code>Can't call method \"next\" on an undefined value at /Users/myname/Documents/TextWranglerRunTemp-renamer11.pl line 12</code>.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Path::Class;\n\nmy $dir = dir( $ARGV[0] );\n\n# Iterate over the content of the directory\nwhile ( my $file = $dir-&gt;next ) {\n\n    if ( $file-&gt;is_dir() ) {\n        print \"Is a directory\\n\";\n    }\n    else {\n\n        my @split = split /.([^.]+)$/, $file;\n\n        if ( $split[1] eq \"pl\" || \"docx\" ) {\n            rename( $file, $split[0] . \".perl\" ) || die( \"Error in renaming\" );\n        }\n\n        print \"Before \" . $file . \"\\n\";\n\n        #rename($file, $file.\".abc\") || die ( \"Error in renaming\" );\n\n        # Print out the file name and path\n        print \"After \" . $file . \"\\n\";\n\n        #print $file-&gt;stringify . \"\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 4, "creation_date": 1493301196, "post_id": 43659858, "comment_id": 74366846, "body": "I think it is no good practice to store you method names in constants"}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 1, "creation_date": 1493301363, "post_id": 43659858, "comment_id": 74366951, "body": "What exactly are you actually attempting to accomplish here?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1493306981, "post_id": 43659858, "comment_id": 74370966, "body": "PS, <code>&amp;ACTION</code> turns your constant into a run-time sub call. You want <code>+ACTION</code>!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1493307067, "post_id": 43659858, "comment_id": 74371012, "body": "@Sinan &#220;n&#252;r, Compile-time detection of typos, I think. You can only omit the parameter list for previously declared subs. Of course, by adding <code>&amp;</code>, the OP is defying that purpose."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493307282, "post_id": 43659858, "comment_id": 74371166, "body": "@ikegami Yeah, that makes sense. But I think <code>$x-&gt;+ACTION</code> is still a syntax error."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1493307325, "post_id": 43659858, "comment_id": 74371189, "body": "@Sinan &#220;n&#252;r, Correct. It&#39;s not a solution to the problem the OP asked about."}, {"owner": {"reputation": 339, "user_id": 1632560, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c88eeef0ac0a74a3dd227ad15df556c8?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/1632560/snow"}, "edited": false, "score": 0, "creation_date": 1493555135, "post_id": 43659858, "comment_id": 74456933, "body": "Thanks guys, the reason I wanted to use constants is that I need to use the same names in other places. This is only a sample of my entire code. So instead of writing the explicit names I wanted to use Constants which will be less pain if I&#39;ll decide to make changes in the names."}], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 1632560, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c88eeef0ac0a74a3dd227ad15df556c8?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/1632560/snow"}, "edited": false, "score": 1, "creation_date": 1493555219, "post_id": 43660291, "comment_id": 74456962, "body": "Thanks man, I really appreciate your professional answer. It helps a lot."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 6, "last_activity_date": 1493308901, "last_edit_date": 1493308901, "creation_date": 1493302263, "answer_id": 43660291, "question_id": 43659858, "link": "https://stackoverflow.com/questions/43659858/in-perl-can-i-use-constants-to-facilitate-compile-time-detection-of-typos-in-me/43660291#43660291", "title": "In Perl, can I use constants to facilitate compile time detection of typos in method invocations?", "body": "<p>Your code includes some errors such as trying to instantiate <code>MyObj</code> when all you declared was <code>MyClass</code> and using <code>var</code> instead of <code>my</code>. With those fixed, you'll note that <code>-&gt;&amp;</code> is a syntax error. See <a href=\"https://perldoc.perl.org/perlobj.html#Method-Invocation\" rel=\"nofollow noreferrer\">Method Invocation</a> and <a href=\"https://perldoc.perl.org/perlobj.html#Method-Call-Variations\" rel=\"nofollow noreferrer\">Method Call Variations</a>.</p>\n\n<p>You can use</p>\n\n<ul>\n<li>Method Names as Strings</li>\n<li>Subroutine References as Methods</li>\n<li>Deferencing Method Call</li>\n</ul>\n\n<p>That said, here is your code with the corrections to enable it to compile and run:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Class::Struct;\n\nuse constant {\n    ACTION =&gt; \"Action\",\n    TYPE =&gt; \"Type\"\n};\n\nstruct MyClass =&gt; {\n    ACTION() =&gt; '$',\n    TYPE() =&gt; '$'\n};\n\nmy $obj = MyClass-&gt;new(\n    ACTION() =&gt; 'add',\n    TYPE() =&gt; '1'\n);\n\nprint $obj-&gt;${ \\ACTION };\n</code></pre>\n\n<p>Note that using <code>ACTION()</code> rather than <code>&amp;ACTION</code> in the declarations will turn the keys to compile time constants rather than runtime subroutine invocations (prefixing <code>ACTION</code> with <code>&amp;</code> tells <code>perl</code> to ignore the empty prototype, effectively undoing the benefit of <code>use constant</code>).</p>\n\n<p>It uses the <a href=\"https://perldoc.perl.org/perlobj.html#Method-Call-Variations\" rel=\"nofollow noreferrer\">Dereferencing Method Call</a>:</p>\n\n<blockquote>\n  <h3>Deferencing Method Call</h3>\n  \n  <p>Perl also lets you use a dereferenced scalar reference in a method call. That's a mouthful, so let's look at some code:</p>\n\n<pre><code>  $file-&gt;${ \\'save' };\n  $file-&gt;${ returns_scalar_ref() };\n  $file-&gt;${ \\( returns_scalar() ) };\n  $file-&gt;${ returns_ref_to_sub_ref() };\n</code></pre>\n</blockquote>\n\n<p>The code above compiles to <code>$obj-&gt;${ \\'Action' }</code>.</p>\n\n<p>As usual, @ikegami spotted something I missed: <code>$x-&gt;doesnotexist</code> is a run-time error. By using constants as method names, it would be possible to detect typos at compile time. For example, if I had made a mistake such as <code>$obj-&gt;${ \\ACITON };</code>, the compilation would have failed.</p>\n\n<p>In that case, <a href=\"https://metacpan.org/pod/Const::Fast\" rel=\"nofollow noreferrer\">Const::Fast</a> might provide an aesthetically more pleasing solution (even though it would come at a speed penalty relative to using constant subroutines):</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Class::Struct;\nuse Const::Fast;\n\nconst my $ACTION =&gt; 'Action';\nconst my $TYPE =&gt; 'Type';\n\nstruct MyClass =&gt; {\n    $ACTION =&gt; '$',\n    $TYPE =&gt; '$'\n};\n\nmy $obj = MyClass-&gt;new(\n    $ACTION =&gt; 'add',\n    $TYPE =&gt; '1'\n);\n\nprint $obj-&gt;$ACION;\n</code></pre>\n\n<p>Output:</p>\n\n<pre>C:\\...\\Temp> perl -c tt.pl\nGlobal symbol \"$ACION\" requires explicit package name (did you forget to declare \"my $ACION\"?) at tt.pl line 21.\ntt.pl had compilation errors.</pre>\n\n<p>That is, such a typo would also be detected at compile time. There is a performance penalty for this over using constant subroutines, but it is less ugly.</p>\n"}], "owner": {"reputation": 339, "user_id": 1632560, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c88eeef0ac0a74a3dd227ad15df556c8?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/1632560/snow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 43660291, "answer_count": 1, "score": 2, "last_activity_date": 1493309833, "creation_date": 1493301081, "last_edit_date": 1493309833, "question_id": 43659858, "link": "https://stackoverflow.com/questions/43659858/in-perl-can-i-use-constants-to-facilitate-compile-time-detection-of-typos-in-me", "title": "In Perl, can I use constants to facilitate compile time detection of typos in method invocations?", "body": "<p>I have the following program in Perl:<br></p>\n\n<pre><code>use Class::Struct;\n\nuse constant {\n    ACTION =&gt; \"Action\",\n    TYPE =&gt; \"Type\"\n};\n\nstruct MyClass =&gt; {           \n    &amp;ACTION =&gt; '$',\n    &amp;TYPE =&gt; '$'\n};\n\nmy $obj = new MyObj{\n    &amp;ACTION =&gt; 'add',\n    &amp;TYPE =&gt; '1'\n}\n\n# compilation error:\nvar $action = $obj-&gt;&amp;ACTION;\n</code></pre>\n\n<p>I get a compilation error when trying to access the object field using a constant. Is it possible? What am I doing wrong?</p>\n"}, {"tags": ["xml", "perl", "libxml2", "xml-libxml"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1493300418, "post_id": 43658847, "comment_id": 74366217, "body": "We need to see the code you have written and a description of the problem you are having."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1493301371, "creation_date": 1493301371, "answer_id": 43659961, "question_id": 43658847, "link": "https://stackoverflow.com/questions/43658847/how-to-find-child-elements-of-a-specified-parent-using-xmllibxml/43659961#43659961", "title": "How to find child elements of a specified parent using XML::LibXML?", "body": "<pre><code>for my $node ($doc-&gt;findnodes('/table/*')) {\n    say $node-&gt;nodeName();\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use XML::LibXML qw( XML_ELEMENT_NODE );\n\nmy $root = $doc-&gt;documentElement();\nfor my $node ( grep { $_-&gt;nodeType() == XML_ELEMENT_NODE } $root-&gt;childNodes() ) {\n    say $node-&gt;nodeName();\n}\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 3344013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/131deed33d242151849bec9de1b661e3?s=128&d=identicon&r=PG&f=1", "display_name": "vatsal", "link": "https://stackoverflow.com/users/3344013/vatsal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 43659961, "answer_count": 1, "score": 0, "last_activity_date": 1493301371, "creation_date": 1493298569, "last_edit_date": 1493300238, "question_id": 43658847, "link": "https://stackoverflow.com/questions/43658847/how-to-find-child-elements-of-a-specified-parent-using-xmllibxml", "title": "How to find child elements of a specified parent using XML::LibXML?", "body": "<p>Suppose I have a XML file</p>\n\n<pre><code>&lt;table&gt;\n    &lt;person&gt;\n        &lt;ID&gt;1&lt;/ID&gt;\n        &lt;Name&gt;Adam&lt;/Name&gt;\n    &lt;/person&gt;\n    &lt;student&gt;\n        &lt;Subject&gt;Math&lt;/Subject&gt;\n        &lt;Marks&gt;90&lt;/Marks&gt;\n    &lt;/student&gt;\n    &lt;employee&gt;\n        &lt;ID&gt;7&lt;/ID&gt;\n        &lt;Name&gt;Bill&lt;/Name&gt;\n    &lt;/employee&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>I want to get the child elements of the <code>table</code> element. i.e. the output should be <code>person</code>, <code>student</code> and <code>employee</code>. How do I do this with the <code>XML::LibXML</code> module in Perl?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 425, "user_id": 5682871, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1fc8f64bc201bcdd81c16d90f66a4dc1?s=128&d=identicon&r=PG&f=1", "display_name": "Whin3", "link": "https://stackoverflow.com/users/5682871/whin3"}, "edited": false, "score": 0, "creation_date": 1493298281, "post_id": 43658544, "comment_id": 74364596, "body": "It seems to work, but is there a way to ignore case-sensitive ?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 425, "user_id": 5682871, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1fc8f64bc201bcdd81c16d90f66a4dc1?s=128&d=identicon&r=PG&f=1", "display_name": "Whin3", "link": "https://stackoverflow.com/users/5682871/whin3"}, "edited": false, "score": 0, "creation_date": 1493298327, "post_id": 43658544, "comment_id": 74364629, "body": "Yes, use <code>i</code> switch, <code>.. =~ &#47;$_&#47;i</code>."}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 5, "last_activity_date": 1493297841, "creation_date": 1493297841, "answer_id": 43658544, "question_id": 43658293, "link": "https://stackoverflow.com/questions/43658293/perl-check-a-line-contains-at-list-one-word-of-an-array/43658544#43658544", "title": "perl check a line contains at list one word of an array", "body": "<p>Your <code>grep</code> is checking for true value, and <code>$string</code> is almost always 'truthy'.\nWhat you need is regex which tests if <code>$string</code> matches againts <code>$_</code>,</p>\n\n<pre><code>if ( grep($string =~ /$_/, @exampleWords ) ) \n{\n    #do something\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1493297850, "creation_date": 1493297850, "answer_id": 43658553, "question_id": 43658293, "link": "https://stackoverflow.com/questions/43658293/perl-check-a-line-contains-at-list-one-word-of-an-array/43658553#43658553", "title": "perl check a line contains at list one word of an array", "body": "<p>Perl's <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\"><code>grep</code></a> does not work like the <a href=\"https://www.gnu.org/software/grep/manual/grep.html\" rel=\"nofollow noreferrer\">command line utility <code>grep</code></a>. You're simply checking if <code>$string</code> is true, which is always the case. If you want to check if any of the words in <code>@exampleWords</code> is contained in <code>$string</code>, you need to tell Perl that.</p>\n\n<pre><code>if ( grep { $string =~ m/$_/} @exampleWords ) {\n    ...\n}\n</code></pre>\n\n<p>This uses a pattern match.</p>\n\n<p>Alternatively, you could also use <a href=\"http://perldoc.perl.org/functions/index.html\" rel=\"nofollow noreferrer\"><code>index</code></a>, which returns the position of the first occurrence of the substring, in this case <code>$_</code>, or <code>-1</code>.</p>\n\n<pre><code>if ( grep { index( $string, $_ ) != -1 } @exampleWords ) { \n    ... \n}\n</code></pre>\n\n<p>The pattern match is easier to read though, and in terms of performance it really doesn't make a difference.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 6, "last_activity_date": 1493298508, "last_edit_date": 1493298508, "creation_date": 1493298102, "answer_id": 43658659, "question_id": 43658293, "link": "https://stackoverflow.com/questions/43658293/perl-check-a-line-contains-at-list-one-word-of-an-array/43658659#43658659", "title": "perl check a line contains at list one word of an array", "body": "<p><code>grep</code> iterates a list. It can be fairly inefficient as a result. </p>\n\n<p>I would suggest that what you want to do is compile a regex. </p>\n\n<pre><code>my $regex = join \"|\", @examplewords; \n$regex    = qr/\\b($regex)\\b/; \n\nif ( $string =~ m/$regex/ ) { \n    print \"There was a match on $1\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 425, "user_id": 5682871, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1fc8f64bc201bcdd81c16d90f66a4dc1?s=128&d=identicon&r=PG&f=1", "display_name": "Whin3", "link": "https://stackoverflow.com/users/5682871/whin3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2611, "favorite_count": 0, "accepted_answer_id": 43658544, "answer_count": 3, "score": 2, "last_activity_date": 1493298508, "creation_date": 1493297285, "question_id": 43658293, "link": "https://stackoverflow.com/questions/43658293/perl-check-a-line-contains-at-list-one-word-of-an-array", "title": "perl check a line contains at list one word of an array", "body": "<p>I have a file containing a few words, let's take for example this file :</p>\n\n<pre><code>balloon\nspace\nmonkey\nfruit\n</code></pre>\n\n<p>I want to check if a string contains at least one of these words. I stored all the words in an array, like this (the file is specified in parameters) :</p>\n\n<pre><code>open my $exampleFile, '&lt;', $ARGV[0];\nchomp(my @exampleWords= &lt;$exampleFile&gt;);\nclose $exampleFile;\n</code></pre>\n\n<p>Then I use <code>grep</code> to check if one of these words is in the string:</p>\n\n<pre><code>if ( grep( $string, @exampleWords ) ) \n{\n    #do something\n}   \n</code></pre>\n\n<p>If I take for example the string <code>this_is_a_balloon_example</code>, the word <code>balloon</code> has been found so I should enter the loop. At the moment, the loop seems to be entered for any string given.</p>\n"}, {"tags": ["apache", "perl", "cgi"], "comments": [{"owner": {"reputation": 456, "user_id": 3054046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajViR.png?s=128&g=1", "display_name": "cbmckay", "link": "https://stackoverflow.com/users/3054046/cbmckay"}, "edited": false, "score": 0, "creation_date": 1493291480, "post_id": 43655924, "comment_id": 74359300, "body": "First thing i see: <code>&quot;path&#47;to&#47;dir&quot;</code> should be an absolute path: <code>&quot;&#47;path&#47;to&#47;dir&quot;</code> shouldn&#39;t it? Also, is your <code>.pl</code> script executable with the proper <code>#!</code> line?"}, {"owner": {"reputation": 73, "user_id": 5904141, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fae0ba1ef7512f5dc6d27a97b6f59849?s=128&d=identicon&r=PG&f=1", "display_name": "Kees", "link": "https://stackoverflow.com/users/5904141/kees"}, "reply_to_user": {"reputation": 456, "user_id": 3054046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajViR.png?s=128&g=1", "display_name": "cbmckay", "link": "https://stackoverflow.com/users/3054046/cbmckay"}, "edited": false, "score": 0, "creation_date": 1493292035, "post_id": 43655924, "comment_id": 74359739, "body": "Your a star! Making that an absolute path worked! Just to clarify, is there a way of specifying a path that is relative to the DocumentRoot?"}, {"owner": {"reputation": 456, "user_id": 3054046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajViR.png?s=128&g=1", "display_name": "cbmckay", "link": "https://stackoverflow.com/users/3054046/cbmckay"}, "edited": false, "score": 0, "creation_date": 1493292926, "post_id": 43655924, "comment_id": 74360399, "body": "I think <code>Location:</code> is what you want. You might also use <code>.htaccess</code> files. They apply to the directory they are located in.  And / or you can use the <code>Files</code> directive to use the file extension to execute."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 456, "user_id": 3054046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajViR.png?s=128&g=1", "display_name": "cbmckay", "link": "https://stackoverflow.com/users/3054046/cbmckay"}, "edited": false, "score": 2, "creation_date": 1493293696, "post_id": 43655924, "comment_id": 74360951, "body": "@cbmckay: I think you should write that up as an answer."}], "answers": [{"tags": [], "owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "is_accepted": false, "score": 0, "last_activity_date": 1493301077, "creation_date": 1493301077, "answer_id": 43659855, "question_id": 43655924, "link": "https://stackoverflow.com/questions/43655924/cant-get-apache-to-execute-perl-cgi-script/43659855#43659855", "title": "Can&#39;t get apache to execute perl CGI script", "body": "<p>Just add ScriptAlias directive, if you don't have non-dynamic content inside the directive:</p>\n\n<pre><code>ScriptAlias /program_dir/ \"/full/path/to/dir/\"\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 5904141, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fae0ba1ef7512f5dc6d27a97b6f59849?s=128&d=identicon&r=PG&f=1", "display_name": "Kees", "link": "https://stackoverflow.com/users/5904141/kees"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1045, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493400969, "creation_date": 1493290980, "last_edit_date": 1495540936, "question_id": 43655924, "link": "https://stackoverflow.com/questions/43655924/cant-get-apache-to-execute-perl-cgi-script", "title": "Can&#39;t get apache to execute perl CGI script", "body": "<p>Edit: This question has been wrongly marked as a duplicate of <a href=\"https://stackoverflow.com/questions/2165022/how-can-i-troubleshoot-my-perl-cgi-script\">How can I troubleshoot my Perl CGI script?</a>, that question deals with how to debug a perl program and the answers explain how to do that. In this case I did not even get as far as that, and the problem turned out to be a apache configuration issue, where I had used a relative path in the Directory directive, none of these these things are mentioned in the answers to that question.</p>\n\n<p>Original Question:\nI have set up an ubuntu test server (16.04.2 LTS) and are trying to get apache on it to execute a perl cgi script. It runs fine from the command line, but in the browser it always display the source code. I have gone through many pages of advice both on this site and others, but I cannot get it to work, so any help would be greatly appreciated.</p>\n\n<p>My site's conf file looks like this (I want to be able to execute scripts on a per directory basis):</p>\n\n<pre><code>&lt;VirtualHost *:443&gt;\n    DocumentRoot \"/var/www/test\"\n    ServerName mydomain.org\n    &lt;Directory \"/var/www/test\"&gt;\n            allow from all\n            Options None\n            Require all granted\n    &lt;/Directory&gt;\n\n    SSLEngine on\n    SSLCertificateFile /etc/webmin/letsencrypt-cert.pem\n    SSLCertificateKeyFile /etc/webmin/letsencrypt-key.pem\n    SSLCACertificateFile /etc/webmin/letsencrypt-ca.pem\n\n    &lt;Directory \"path/to/dir\"&gt;\n            Options ExecCGI Indexes\n            AddHandler cgi-script .pl\n    &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>My mods-enabled directory looks like this:</p>\n\n<pre><code>access_compat.load  autoindex.conf  mime.conf         setenvif.load\nalias.conf          autoindex.load  mime.load         socache_shmcb.load\nalias.load          cgi.load        mpm_prefork.conf  ssl.conf\nauth_basic.load     deflate.conf    mpm_prefork.load  ssl.load\nauthn_core.load     deflate.load    negotiation.conf  status.conf\nauthn_file.load     dir.conf        negotiation.load  status.load\nauthz_core.load     dir.load        php7.0.conf\nauthz_host.load     env.load        php7.0.load\nauthz_user.load     filter.load     setenvif.conf\n</code></pre>\n\n<p>There are no errors in the error.log and the access logs tells me:</p>\n\n<pre><code>mydomain.org:443 xx.xxx.xxx.xx - - [27/Apr/2017:10:37:02 +0100] \"GET /path/to/dir/test.pl HTTP/1.1\" 304 3921 \"-\" \"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.133 Safari/537.36\"\n</code></pre>\n\n<p>The script (test.pl) is simply this, and works from the command line:</p>\n\n<pre><code>#!/usr/bin/perl\n\nprint \"Content-type: text/html\\n\\n\";\n\nprint \"Hello, world!\\n\";\n</code></pre>\n\n<p>Can anyone tell me what I am doing wrong here?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1493291583, "post_id": 43654830, "comment_id": 74359372, "body": "So, <code>$content</code> is 1.3G of &#39;raw&#39; data? It&#39;s probably quite a bit bigger in memory."}, {"owner": {"reputation": 12819, "user_id": 1429053, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ikeNz.png?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/1429053/ian"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1493292189, "post_id": 43654830, "comment_id": 74359840, "body": "Yes, that&#39;s a good point. I&#39;m not sure exactly how much the string is in memory yet. I know the process uses 6.8Gig, but there are some other datastructures in there, so would probably be a Gig or so less at least. Server has 16Gig mem and has some free."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1493292437, "post_id": 43654830, "comment_id": 74360011, "body": "I&#39;m not sure why your substitute is failing, but I&#39;d be quite wary generally of &#39;slurping&#39; such a large quantity straight into memory, just for efficiency reasons."}, {"owner": {"reputation": 12819, "user_id": 1429053, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ikeNz.png?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/1429053/ian"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1493292768, "post_id": 43654830, "comment_id": 74360280, "body": "Yes, I agree, we do have a solution in another system where we don&#39;t load the whole lot into memory to avoid memory issues, but as this is only one file and doesn&#39;t cause any problems other than that error, I was wondering whether there is some workarounds without changing too much."}, {"owner": {"reputation": 456, "user_id": 3054046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajViR.png?s=128&g=1", "display_name": "cbmckay", "link": "https://stackoverflow.com/users/3054046/cbmckay"}, "edited": false, "score": 2, "creation_date": 1493293987, "post_id": 43654830, "comment_id": 74361197, "body": "Here is an explanation and hints: <a href=\"http://www.nntp.perl.org/group/perl.perl5.porters/2014/10/msg221751.html\" rel=\"nofollow noreferrer\">www.nntp.perl.org</a>. (see bottom of message) Basicly, number is hardcoded and split your string."}, {"owner": {"reputation": 12819, "user_id": 1429053, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ikeNz.png?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/1429053/ian"}, "reply_to_user": {"reputation": 456, "user_id": 3054046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajViR.png?s=128&g=1", "display_name": "cbmckay", "link": "https://stackoverflow.com/users/3054046/cbmckay"}, "edited": false, "score": 0, "creation_date": 1493295356, "post_id": 43654830, "comment_id": 74362265, "body": "Thanks a lot for that @cbmckay"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1527099120, "last_edit_date": 1527099120, "creation_date": 1493309002, "answer_id": 43662713, "question_id": 43654830, "link": "https://stackoverflow.com/questions/43654830/substitution-loop-from-regex/43662713#43662713", "title": "Substitution Loop from regex", "body": "<p>This error is obtained when the number of iterations of the substitutions is larger than the number of characters in the string. This should never happen. I suspect the use of a signed 32-bit comparison when an unsigned comparison should be used. This may have been fixed in newer versions of Perl?</p>\n\n<p>For that particular pattern, you could break the string into smaller ones, or you could use a faster C function to do the work:</p>\n\n<pre><code>use Inline C =&gt; &lt;&lt;'__EOS__';\n\n   /* Limitation: Assumes all characters of the string are in 00..FF */    \n   void clean(SV* sv) {\n      dXSARGS;\n\n      /* Need to use a \"force\" call when changing the buffer. */\n      STRLEN src_len;\n      char* src = SvPVbyte_force(sv, src_len);\n\n      STRLEN dst_len;\n      char* dst = src;\n      char* orig_dst = dst;\n\n      while (src_len--) {\n         switch ((unsigned char)*src) {\n            case 0x80:\n            case 0x93:\n            case 0xA0:\n            case 0xE2:\n               ++src;\n               break;\n\n            default:\n               *(dst++) = *(src++);\n         }\n      }\n\n      dst_len = dst - orig_dst;\n      if (dst_len &lt; SvLEN(sv))\n         *dst = '\\0';\n\n      SvCUR_set(sv, dst_len);\n      SvSETMAGIC(sv);\n      XSRETURN_EMPTY;\n  }\n\n__EOS__\n\nclean($content);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "is_accepted": true, "score": 0, "last_activity_date": 1493700807, "creation_date": 1493700807, "answer_id": 43730319, "question_id": 43654830, "link": "https://stackoverflow.com/questions/43654830/substitution-loop-from-regex/43730319#43730319", "title": "Substitution Loop from regex", "body": "<p>Are you using it at once in the file? Can you give a try using this approach:</p>\n\n<ol>\n<li>Read the file line by line using <code>while</code> loop</li>\n<li>Use regex at one line at a time</li>\n<li>Write the formatted text to a new file</li>\n</ol>\n\n<p>Please note that I'm using this approach for text file of size around 5GB. My system has just 4GB RAM, and it works great.</p>\n"}], "owner": {"reputation": 12819, "user_id": 1429053, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ikeNz.png?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/1429053/ian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1195, "favorite_count": 0, "accepted_answer_id": 43730319, "answer_count": 2, "score": 0, "last_activity_date": 1527099120, "creation_date": 1493288011, "last_edit_date": 1493309721, "question_id": 43654830, "link": "https://stackoverflow.com/questions/43654830/substitution-loop-from-regex", "title": "Substitution Loop from regex", "body": "<p>I am stripping out some characters like bulletpoints we don't want from text files, and this regex has been working for many years.</p>\n\n<pre><code>$content =~ s/[\\xA0\\x80\\x93\\xE2]//g\n</code></pre>\n\n<p>However, we have a very large string from a file now (1.3Gig) that it's breaking on with the following error...</p>\n\n<pre><code>Substitution loop \n</code></pre>\n\n<p>The regex looks ok, and from reading on the error and other people who have had the same problem, it looks like there may be some hardcoded internal substitution limit ?</p>\n\n<p>I am using Perl version 5.14.2 </p>\n\n<p>If it's just down to a hardcoded limit, is there any way around that, or a still efficient way to achieve the same that wouldn't hit this limit?</p>\n"}, {"tags": ["json", "perl", "blessed"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1493287496, "post_id": 43654409, "comment_id": 74356525, "body": "What do you mean by &quot;its not working&quot;?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1493287750, "post_id": 43654409, "comment_id": 74356709, "body": "Also, what output do you expect?"}, {"owner": {"reputation": 21, "user_id": 7930472, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Kaljm8CywVo/AAAAAAAAAAI/AAAAAAAACRM/U9ZSr37MsyY/photo.jpg?sz=128", "display_name": "singamala sairam mohanreddy", "link": "https://stackoverflow.com/users/7930472/singamala-sairam-mohanreddy"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1493287786, "post_id": 43654409, "comment_id": 74356733, "body": "i am getting the error:   encountered object &#39;NetSNMP::OID=HASH(0x136b278)&#39;, but neither allow_blessed nor convert_blessed settings are enabled at u.pl line 256."}, {"owner": {"reputation": 21, "user_id": 7930472, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Kaljm8CywVo/AAAAAAAAAAI/AAAAAAAACRM/U9ZSr37MsyY/photo.jpg?sz=128", "display_name": "singamala sairam mohanreddy", "link": "https://stackoverflow.com/users/7930472/singamala-sairam-mohanreddy"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1493287835, "post_id": 43654409, "comment_id": 74356774, "body": "i expected a serialized JSON object so that i can send it over to server."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1493288042, "post_id": 43654409, "comment_id": 74356943, "body": "How should JSON serialize a Perl object of class <code>netsnmp_oidPtr</code> or <code>NetSNMP::OID</code>?"}, {"owner": {"reputation": 21, "user_id": 7930472, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Kaljm8CywVo/AAAAAAAAAAI/AAAAAAAACRM/U9ZSr37MsyY/photo.jpg?sz=128", "display_name": "singamala sairam mohanreddy", "link": "https://stackoverflow.com/users/7930472/singamala-sairam-mohanreddy"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1493288258, "post_id": 43654409, "comment_id": 74357108, "body": "well i am not sure to be frank. but my requirement is to somehow serialize this so that i can send it over to rabbitmq server as i can&#39;t send it directly as an array. any options i may have to meet my req?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1493295967, "post_id": 43654409, "comment_id": 74362788, "body": "You can&#39;t directly serialise blessed objects in JSON as it has no standard way of storing the class of a data structure. You could add another element to a hash-based object that stored the class name, but that doesn&#39;t allow for the less common classes that are based on other data types. If you don&#39;t have a requirement to use JSON then you could use something less portable like <code>FreezeThaw</code> or <code>Storable</code>. You should read <a href=\"http://www.perlmonks.org/?node_id=8070\" rel=\"nofollow noreferrer\"><i>Object Serialization Basics</i></a> on PerlMonks."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493296199, "post_id": 43654409, "comment_id": 74362971, "body": "That&#39;s an inside-out Object, isn&#39;t it? Those are weird anyway."}, {"owner": {"reputation": 14059, "user_id": 16777, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e5c5dd043eb3a8c0b3639fd41844d30e?s=128&d=identicon&r=PG", "display_name": "Kev", "link": "https://stackoverflow.com/users/16777/kev"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493301763, "post_id": 43654409, "comment_id": 74367259, "body": "@Borodin that should be an answer.  :)"}], "answers": [{"tags": [], "owner": {"reputation": 5594, "user_id": 1179379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bf2d2e692a814340e2b10a9f61507f2?s=128&d=identicon&r=PG", "display_name": "cancerbero", "link": "https://stackoverflow.com/users/1179379/cancerbero"}, "is_accepted": false, "score": 0, "last_activity_date": 1554995173, "creation_date": 1554995173, "answer_id": 55635737, "question_id": 43654409, "link": "https://stackoverflow.com/questions/43654409/blessed-objects-conversion-to-json/55635737#55635737", "title": "Blessed objects conversion to JSON", "body": "<p>It depends, you want to preserve the visuals ? or the data and hierarchy ? same positions could not be rendered in other terminal sizes. I would preserve just the data and hierarchy. Probably I would diregard focus and events. I would start umarating the properties like the following and then creaginf a factory These are the ones I found for Box</p>\n\n<pre><code>container.options\ncontainer.position, \ncontainer.getLines()\ncontainer.getText()\ncontainer.getContent\ncontainer.children\ncontainer.parent\ncontainer.style\ncontainer.type\ncontainer.visible\ncontainer.height\ncontainer.hidden\ncontainer.index\n</code></pre>\n\n<p>subclasses have rows, data, lines, and more... I dont think there is a mechanic way of doing it...</p>\n\n<p>if you want to recreate the hierarchy, you also need to iterate on children and parent, probaly the entire tree.</p>\n\n<p>Thinking about it perhaps just with this.options is enough and children and parent.. good luck will try the same... </p>\n"}], "owner": {"reputation": 21, "user_id": 7930472, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Kaljm8CywVo/AAAAAAAAAAI/AAAAAAAACRM/U9ZSr37MsyY/photo.jpg?sz=128", "display_name": "singamala sairam mohanreddy", "link": "https://stackoverflow.com/users/7930472/singamala-sairam-mohanreddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 730, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1554995173, "creation_date": 1493286817, "last_edit_date": 1493539774, "question_id": 43654409, "link": "https://stackoverflow.com/questions/43654409/blessed-objects-conversion-to-json", "title": "Blessed objects conversion to JSON", "body": "<p>How do I convert a blessed object into JSON in Perl? Following is the array I have:</p>\n\n<pre><code>@x = ({\n          'notificationtype' =&gt; 'TRAP',\n          'receivedfrom' =&gt; 'UDP: [10.127.34.212]:48909-&gt;[10.127.34.182]:162',\n          'version' =&gt; 1,\n        },\n        [\n          [\n            bless( {\n                     'oidptr' =&gt; bless( do{\\(my $o = '140059234062224)}, ''netsnmp_oidPtr' )\n                   }, 'NetSNMP::OID' ),\n            '600',\n            67\n          ],\n          [\n            bless( {\n                     'oidptr' =&gt; bless( do{\\(my $o = '140059236784112)}, ''netsnmp_oidPtr' )\n                   }, 'NetSNMP::OID' ),\n            'OID: .iso.org.dod.internet.private.enterprises.14296.1.100.0.0.1',\n            6\n          ]\n]);\n</code></pre>\n\n<p>I am able to convert <code>$VAR1</code> alone using <code>encode_json \\@x</code>, but when I the use the blessed object, it's not working.  I am getting the error: </p>\n\n<blockquote>\n  <p>encountered object 'NetSNMP::OID=HASH(0x136b278)', but neither allow_blessed nor convert_blessed settings are enabled at u.pl line 256.</p>\n</blockquote>\n\n<p>I expected a serialized JSON object so that I can send it over to server.</p>\n\n<p>How can I do it?</p>\n"}, {"tags": ["perl", "encoding", "html-entities"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493290039, "post_id": 43654004, "comment_id": 74358284, "body": "As far as I remember, not all of the entities have names. <a href=\"https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Character_entity_references_in_HTML\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a> has a list."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493299669, "post_id": 43654004, "comment_id": 74365635, "body": "Why do you want <code>&amp;apos;</code> instead of <code>&amp;#39;</code>?"}, {"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493304489, "post_id": 43654004, "comment_id": 74369232, "body": "@Borodin We are using some special characters as identifiers in filenames and it&#39;d be nice to categorise them with a semantically transparent name. In other words, <code>apos</code> is much clearer than <code>&amp;#39;</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493304794, "post_id": 43654004, "comment_id": 74369437, "body": "You could put it back into  <code>%HTML::Entities::char2entity</code> and hope that the browsers that use your page are well-behaved."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1493305258, "last_edit_date": 1495542857, "creation_date": 1493299614, "answer_id": 43659267, "question_id": 43654004, "link": "https://stackoverflow.com/questions/43654004/htmlentities-and-encoding-an-apostrophe/43659267#43659267", "title": "HTML::Entities and encoding an apostrophe", "body": "<p>The character entity <code>&amp;apos;</code> was introduced only in HTML5 and is invalid in HTML4 and earlier. Some browsers will not represent it correctly</p>\n\n<p>The\n<a href=\"https://en.m.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Entities_representing_special_characters_in_XHTML\" rel=\"nofollow noreferrer\">Wikipedia page</a>\nthat <strong>simbabque</strong> links to\n<a href=\"https://stackoverflow.com/questions/43654004/htmlentities-and-encoding-an-apostrophe#comment74358284_43654004\">in his comment</a>\nsays this</p>\n\n<blockquote>\n  <p>The use of <code>&amp;apos;</code> or custom entity references may not be supported and may produce unpredictable results.</p>\n</blockquote>\n\n<p><code>HTML::Entities</code> takes the safe route of encoding it as <code>&amp;#39;</code> which is valid in any iteration of the standard</p>\n\n<p>The module uses a hard-coded hash <code>%entity2char</code>, and uses it to build the inverse mapping for encoding in <code>%char2entity</code>. The entry for the apostrophe is then explicitly deleted to force a numeric entity to be used</p>\n\n<pre><code>delete $char2entity{\"'\"};  # only one-way decoding\n</code></pre>\n\n<p>(The comment is in the original code)</p>\n\n<p>If you are willing to commit to using HTML5 throughout then\nI suggest that you use <a href=\"https://metacpan.org/pod/HTML::HTML5::Entities\" rel=\"nofollow noreferrer\"><code>HTML::HTML5::Entities</code></a> which is a\n<em>\"drop-in replacement for <code>HTML::Entities</code>\"</em>\nbut provides for all the standard HTML5 entities, including <code>&amp;apos;</code></p>\n"}], "owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 0, "accepted_answer_id": 43659267, "answer_count": 1, "score": 0, "last_activity_date": 1493305258, "creation_date": 1493285700, "last_edit_date": 1493304938, "question_id": 43654004, "link": "https://stackoverflow.com/questions/43654004/htmlentities-and-encoding-an-apostrophe", "title": "HTML::Entities and encoding an apostrophe", "body": "<p>I want to do something as simple as encode an apostrophe with its entity name <em>not its (hexa)decimal number</em>. However, it seems that HTML::Entities can't do this.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse HTML::Entities qw(encode_entities);\n\nmy $char = \"'\";\n\nprint encode_entities($char);\n# &amp;#39;\n</code></pre>\n\n<p>However, in the exported hash going from entity to character, the apostrophe is present as <code>apos</code>.</p>\n\n<pre><code>print $HTML::Entities::entity2char{'apos'}\n# '\n</code></pre>\n\n<p>Why is it that for some characters the HTML entity name is not available? Or should it be forced, one way or another?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1493279680, "post_id": 43651606, "comment_id": 74351034, "body": "Added the code, Could you please help me to achieve the desired result."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1493280106, "post_id": 43651606, "comment_id": 74351336, "body": "What&#39;s the problem you&#39;re having though? What do you not understand about the result you&#39;re getting?"}, {"owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1493280438, "post_id": 43651606, "comment_id": 74351567, "body": "Hi i want to produce the o/p in this fomat : [[&#39;Symbol&#39;,&#39;A&#39;,&#39;B&#39;,&#39;C&#39;,&#39;D&#39;,&#39;E&#39;,&#39;F&#39; ], [&#39;66&#39;,&#39;.8500&#39;,&#39;.8500&#39;,&#39;1.1600&#39;,&#39;1.1600&#39;]]; (from file to variable) through perl. I wrote a code but it;s not working, Can you please help on this."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1493281103, "post_id": 43651606, "comment_id": 74352001, "body": "&quot;it&#39;s not working&quot; is not explaining what problem you&#39;re having."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "edited": false, "score": 0, "creation_date": 1493279800, "post_id": 43651804, "comment_id": 74351114, "body": "Does this code produce this o/p: [[&#39;Symbol&#39;,&#39;A&#39;,&#39;B&#39;,&#39;C&#39;,&#39;D&#39;,&#39;E&#39;,&#39;F&#39; ], [&#39;66&#39;,&#39;.8500&#39;,&#39;.8500&#39;,&#39;1.1600&#39;,&#39;1.1600&#39;]];"}, {"owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "reply_to_user": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "edited": false, "score": 0, "creation_date": 1493280129, "post_id": 43651804, "comment_id": 74351359, "body": "No. The formating of output can be done with Data::Dumper:my $d = Data::Dumper-&gt;new([$somedata]); $d-&gt;Terse(1)-&gt;Indent(0); print $d-&gt;Dump, &quot;\\n&quot;; This gives exactly the expected format."}, {"owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "edited": false, "score": 0, "creation_date": 1493280239, "post_id": 43651804, "comment_id": 74351433, "body": "It means that we need to install this Data::Dumper package right? Can&#39;t this be done through regular perl scripting?"}, {"owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "reply_to_user": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "edited": false, "score": 0, "creation_date": 1493280575, "post_id": 43651804, "comment_id": 74351668, "body": "Data::Dumper is a core package of Perl that is always present in perl distributions (many packages depend of it). You can do the same with regular perl. It is often given as exercise for learning perl. It requires to learn how to write recursive routine and how to use the ref function (<a href=\"https://perldoc.perl.org/functions/ref.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/ref.html</a>)."}, {"owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "reply_to_user": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "edited": false, "score": 0, "creation_date": 1493280841, "post_id": 43651804, "comment_id": 74351823, "body": "Someone has already asked to rewrite Dumper as homework: <a href=\"http://stackoverflow.com/questions/1038271/recursively-printing-data-structures-in-perl\" title=\"recursively printing data structures in perl\">stackoverflow.com/questions/1038271/&hellip;</a>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1493281129, "post_id": 43651804, "comment_id": 74352025, "body": "But it&#39;s also installed by default, as part of the base perl install"}, {"owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "edited": false, "score": 0, "creation_date": 1493288342, "post_id": 43651804, "comment_id": 74357169, "body": "Hi BOC, Can i pass this &quot;$d-&gt;Dump&quot; to Pdf::table method for creating the table in PDF?"}, {"owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "edited": false, "score": 0, "creation_date": 1493291780, "post_id": 43651804, "comment_id": 74359535, "body": "$d-&gt;Dump is used to convert from perl data structure to a string. Pdf::table expects a perl data structure. You should pass directly $somedata to Pdf::Table."}, {"owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "edited": false, "score": 0, "creation_date": 1493297059, "post_id": 43651804, "comment_id": 74363657, "body": "Means you are saying the no need to go for &quot;$d = Data::Dumper-&gt;new([$somedata]);&quot;  am i right."}], "tags": [], "owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "is_accepted": false, "score": 1, "last_activity_date": 1493299672, "last_edit_date": 1493299672, "creation_date": 1493279661, "answer_id": 43651804, "question_id": 43651606, "link": "https://stackoverflow.com/questions/43651606/how-to-create-a-value-from-file-to-desired-format-and-assign-to-variable-using-p/43651804#43651804", "title": "How to create a value from file to desired format and assign to variable using perl?", "body": "<pre><code>use strict;\nuse Data::Dumper;\n\nmy $somedata;\nwhile (my $csv = &lt;DATA&gt;) {\n    chomp $csv;\n    push @$somedata, [ split (',' , $csv)];\n}\nprint Dumper($somedata);\n__DATA__\nSymbol,A,B,C,D,E,F\n66,.8500,.8500,1.1600,1.1600\n</code></pre>\n\n<p>Here is a full example to use PDF::Table</p>\n\n<pre><code>use PDF::API2;\nuse PDF::Table;\n\nmy $somedata;\nwhile (my $csv = &lt;DATA&gt;) {\n    chomp $csv;\n    push @$somedata, [ split (',' , $csv)];\n}\n\nmy $pdftable = new PDF::Table;\n my $pdf = new PDF::API2(-file =&gt; \"table_of_lorem.pdf\");\n my $page = $pdf-&gt;page;\n\n$pdftable-&gt;table($pdf, $page, $somedata, x =&gt; 50, w =&gt; 495, start_y =&gt; 500, start_h =&gt; 300,\n    padding =&gt; 5, background_color_odd =&gt; 'gray', background_color_even =&gt; 'lightblue');\n\n$pdf-&gt;saveas();\n\n__DATA__\nSymbol,A,B,C,D,E,F\n66,.8500,.8500,1.1600,1.1600\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1493299672, "creation_date": 1493279135, "last_edit_date": 1493280152, "question_id": 43651606, "link": "https://stackoverflow.com/questions/43651606/how-to-create-a-value-from-file-to-desired-format-and-assign-to-variable-using-p", "title": "How to create a value from file to desired format and assign to variable using perl?", "body": "<p>Can someone please let me know how to achieve the below through Perl.</p>\n\n<p>I have a CVS file with values like below.</p>\n\n<p>i/p:</p>\n\n<p>Symbol,A,B,C,D,E,F</p>\n\n<p>66,.8500,.8500,1.1600,1.1600</p>\n\n<p>O/P:</p>\n\n<p>[['Symbol','A','B','C','D','E','F' ],\n['66','.8500','.8500','1.1600','1.1600']];</p>\n\n<p>and assign the same to a variable.</p>\n\n<p>How can i able to achieve this through Perl script. </p>\n\n<pre><code>$sts = open( CSV, \"&lt; File.csv\" );\n\nwhile (&lt;CSV&gt;) {\n\n   $csv = $_;\n\n   chomp($csv);\n\n   @csv_rcd = split( ',', $csv );\n   foreach $cell (@csv_rcd) {\n      push @rowdata, $cell;\n   }\n\n   push @$somedata, @rowdata;\n\n}\n</code></pre>\n\n<p>But the above code didn't produce the desired o/p.</p>\n"}]