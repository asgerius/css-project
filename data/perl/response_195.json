[{"tags": ["perl", "web-services", "soap", "soaplite"], "answers": [{"tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": 1, "last_activity_date": 1538591425, "last_edit_date": 1538591425, "creation_date": 1538581497, "answer_id": 52630958, "question_id": 52628998, "link": "https://stackoverflow.com/questions/52628998/perl-append-an-element-to-an-existing-soapdata-element/52630958#52630958", "title": "Perl, append an element to an existing SOAP::Data element", "body": "<p>The answer in <a href=\"https://stackoverflow.com/questions/28077539/append-an-element-to-an-already-existing-soapdata-complex-type?rq=1\">Append an element to an already existing SOAP::Data complex type</a> used an experimental style of dereferencing (now fixed). You need to use the following syntax:</p>\n\n<pre><code>push @{ $data1-&gt;value }, $data2\n</code></pre>\n\n<p>To append to the <code>Items</code> list after the fact, you can use the following approach that manually walks down the data structure you constructed above and appends to the list in question:</p>\n\n<pre><code>push @{ ${ ${ $data1-&gt;value }-&gt;value-&gt;value }-&gt;{_value} }, $data2;\n</code></pre>\n\n<p>But I think you're much better off by constructing your SOAP data only once you have all the payload data together. In the case of a loop, instead structure your program as follows:</p>\n\n<pre><code>my @payload;\nfor my $item (@items) {\n    push @payload, SOAP::Data-&gt;name( $item-&gt;{name} )-&gt;value( $item-&gt;{count}) if $item-&gt;{wanted};\n};\n\nmy $soap = SOAP::Data-&gt;value( \\@payload );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1538591338, "post_id": 52632602, "comment_id": 92200244, "body": "As far as I understand SOAP::Data , you can&#39;t later on decide that you want to convert a scalar item to a list item. If your real intention is to append to the <code>Items</code> list, then you need to walk down the constucted data structure and patch that value in (see my updated reply above)"}], "tags": [], "owner": {"reputation": 1, "user_id": 8364103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d16fda1c83af9c3203963a9b10609e0?s=128&d=identicon&r=PG&f=1", "display_name": "MatthiasK", "link": "https://stackoverflow.com/users/8364103/matthiask"}, "is_accepted": false, "score": 0, "last_activity_date": 1538617934, "last_edit_date": 1538617934, "creation_date": 1538587724, "answer_id": 52632602, "question_id": 52628998, "link": "https://stackoverflow.com/questions/52628998/perl-append-an-element-to-an-existing-soapdata-element/52632602#52632602", "title": "Perl, append an element to an existing SOAP::Data element", "body": "<p>On the above sample I tried </p>\n\n<pre><code>push @{ $data1-&gt;value }, $data2;\n</code></pre>\n\n<p>But that results into</p>\n\n<blockquote>\n  <p>Not an ARRAY reference at ..</p>\n</blockquote>\n\n<hr>\n\n<p>As suggested from above i will construct my data like:</p>\n\n<pre><code>my @payload;\npush @payload, SOAP::Data-&gt;name('Store')-&gt;attr( { 'xmlns' =&gt; 'Some.Structs'} \n )-&gt;value(\n \\SOAP::Data-&gt;value(\n SOAP::Data-&gt;name('Items')-&gt;value(\n  \\SOAP::Data-&gt;value(\n  SOAP::Data-&gt;name('Available')-&gt;value('false'),\n  SOAP::Data-&gt;name('Apple')-&gt;value('1'),\n  SOAP::Data-&gt;name('Orange')-&gt;value('2'),\n )),\n));\n\n#Now add the next element\npush @payload, SOAP::Data-&gt;name('Store')-&gt;attr( { 'xmlns' =&gt; 'Some.Structs'} \n)-&gt;value(\n\\SOAP::Data-&gt;value(\n SOAP::Data-&gt;name('Items')-&gt;value(\n  \\SOAP::Data-&gt;value(\n  SOAP::Data-&gt;name('Available')-&gt;value('false'),\n  SOAP::Data-&gt;name('Orange')-&gt;value('1'),\n  SOAP::Data-&gt;name('Pianaple')-&gt;value('2'),\n )),\n));\n$som = $soap-&gt;call('GetItems', \\@payload);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10451692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4c034244b168cd570c341496e645596?s=128&d=identicon&r=PG&f=1", "display_name": "Matt K", "link": "https://stackoverflow.com/users/10451692/matt-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1538617934, "creation_date": 1538575917, "question_id": 52628998, "link": "https://stackoverflow.com/questions/52628998/perl-append-an-element-to-an-existing-soapdata-element", "title": "Perl, append an element to an existing SOAP::Data element", "body": "<p>I'm struggling with Perl (v5.24.1) SOAP::Lite. i'm trying to add an element to\nan existing Data element. <br><br>\nAssume i have the following construct:</p>\n\n<pre><code>use SOAP::Lite + qw/ trace /;  \nmy $soap = SOAP::Lite-&gt;new( proxy =&gt; 'http://soap.server.com');\n$soap-&gt;on_action( sub { \"http://tempuri.org/some\" });\n$soap-&gt;autotype(0)-&gt;readable(1);\n$soap-&gt;default_ns('http://tempuri.org/');\n$som = $soap-&gt;call('GetItems', SOAP::Data-&gt;name('Store')-&gt;attr( { 'xmlns'    =&gt; 'Some.Structs'} )-&gt;value(\n\\SOAP::Data-&gt;value(\n SOAP::Data-&gt;name('Items')-&gt;value(\n  \\SOAP::Data-&gt;value(\n   SOAP::Data-&gt;name('Available')-&gt;value('false'),\n   SOAP::Data-&gt;name('Apple')-&gt;value('1'),\n   SOAP::Data-&gt;name('Orange')-&gt;value('2'),\n  )),\n )),   \n);\n</code></pre>\n\n<p>But now i'd like to add 'N' Elements of <strong>Items</strong>, i want to this in a loop based on conditions so thats just an example, i tried the following:</p>\n\n<pre><code> use SOAP::Lite + qw/ trace /;  \n my $soap = SOAP::Lite-&gt;new( proxy =&gt; 'http://soap.server.com');\n $soap-&gt;on_action( sub { \"http://tempuri.org/some\" });\n $soap-&gt;autotype(0)-&gt;readable(1);\n $soap-&gt;default_ns('http://tempuri.org/');\n\n my $data1= (SOAP::Data-&gt;name('Store')-&gt;attr( { 'xmlns' =&gt; 'Some.Structs'} )-&gt;value(\n   \\SOAP::Data-&gt;value(\n    SOAP::Data-&gt;name('Items')-&gt;value(\n     \\SOAP::Data-&gt;value(\n     SOAP::Data-&gt;name('Available')-&gt;value('false'),\n     SOAP::Data-&gt;name('Apple')-&gt;value('1'),\n     SOAP::Data-&gt;name('Orange')-&gt;value('2'),\n    )),\n  )),   \n );\n my $data2= (SOAP::Data-&gt;name('Store')-&gt;attr( { 'xmlns' =&gt; 'Some.Structs'} )-&gt;value(\n   \\SOAP::Data-&gt;value(\n    SOAP::Data-&gt;name('Items')-&gt;value(\n     \\SOAP::Data-&gt;value(\n     SOAP::Data-&gt;name('Available')-&gt;value('true'),\n     SOAP::Data-&gt;name('Bananas')-&gt;value('4'),\n     SOAP::Data-&gt;name('Pineapple')-&gt;value('2'),\n    )),\n  )),   \n );\n</code></pre>\n\n<p>Now trying to add the element</p>\n\n<pre><code>push $data1-&gt;value, data2;\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>push ($data1,$data1);\n</code></pre>\n\n<p>The return is:\n<strong>Experimental push on scalar is now forbidden ....</strong></p>\n\n<p>Finally, when the elements are joined i'd like to send them but i'm not sure if this would work:</p>\n\n<pre><code>$som = $soap-&gt;call('GetItems', $data1);\n</code></pre>\n\n<p>Any help would be much appreciated ....</p>\n"}, {"tags": ["perl", "parsing"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1538562432, "post_id": 52624586, "comment_id": 92183203, "body": "What Perl code do you already have and how does it fail for you? Have you looked at [the split function]( <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/split.html</a> )? How does it not do what yu want?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538564761, "post_id": 52624586, "comment_id": 92184529, "body": "Are those three line feeds really in your data? Also, could you please give a little more data (a sequence of 2 or 3 records instead of just 1)"}, {"owner": {"reputation": 2071, "user_id": 7478530, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cGr5i.png?s=128&g=1", "display_name": "Dragonthoughts", "link": "https://stackoverflow.com/users/7478530/dragonthoughts"}, "edited": false, "score": 3, "creation_date": 1538565654, "post_id": 52624586, "comment_id": 92184999, "body": "Welcome to SO. Please provide a Minimal, Complete, and Verifiable example. <b>Show us the code for your latest attempt</b> and where you got stuck. and explain why the result is not what you expected.  Edit your question to include the code, please don&#39;t add it in a comment, as it will probably be unreadable. <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 43, "user_id": 6656462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2VUJH.jpg?s=128&g=1", "display_name": "exneval", "link": "https://stackoverflow.com/users/6656462/exneval"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538572949, "post_id": 52624586, "comment_id": 92189520, "body": "@ikegami I added the data records you ask for"}, {"owner": {"reputation": 43, "user_id": 6656462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2VUJH.jpg?s=128&g=1", "display_name": "exneval", "link": "https://stackoverflow.com/users/6656462/exneval"}, "edited": false, "score": 0, "creation_date": 1538574338, "post_id": 52624586, "comment_id": 92190462, "body": "Update the question field"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6656462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2VUJH.jpg?s=128&g=1", "display_name": "exneval", "link": "https://stackoverflow.com/users/6656462/exneval"}, "edited": false, "score": 0, "creation_date": 1538576776, "post_id": 52629014, "comment_id": 92191988, "body": "thank you for explaining so detail, definitely will try it"}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": 0, "last_activity_date": 1538575958, "creation_date": 1538575958, "answer_id": 52629014, "question_id": 52624586, "link": "https://stackoverflow.com/questions/52624586/how-can-i-parse-multiline-records-in-perl/52629014#52629014", "title": "How can I parse multiline records in Perl?", "body": "<p>Reading multiple lines is easy, see <a href=\"http://perldoc.perl.org/functions/readline.html\" rel=\"nofollow noreferrer\">readline</a>:</p>\n\n<pre><code>open my $fh, '&lt;', $filename\n    or die \"Couldn't read '$filename': $!\";\nmy @input = &lt;$fh&gt;;\n</code></pre>\n\n<p>Now you want to go through all lines and look at what to do with them:</p>\n\n<pre><code>my $linenumber;\nmy %info; # We want to collect information\nwhile ($linenumber &lt; $#input) {\n</code></pre>\n\n<p>Each line that starts with <code>nnn#</code> starts a new item:        </p>\n\n<pre><code>    if( $input[ $linenumber ] =~ /^(\\d+)#/ ) {\n        my @data = split /#/, $input[ $linenumber ];\n        $info{ number } = $data[0];\n        $info{ Title } = $data[1];\n        $linenumber++;\n    };\n</code></pre>\n\n<p>Now, read stuff into the description until we encounter an empty line:</p>\n\n<pre><code>    while ($input[$linenumber] !~ /^#$/) {\n        $info{ Description } .= $input[$linenumber];\n        $linenumber++;\n    };\n\n    $linenumber++; # skip the last \"#\" line\n</code></pre>\n\n<p>Now, output the stuff in <code>%info</code>, formatting left as an exercise. I've used <code>qq{}</code> for demonstration purposes. You will want to change that to <code>qq()</code>:</p>\n\n<pre><code>    print qq{Number: \"$info{ number }\"\\n};\n    print qq{Title: \"$info{ Title }\"\\n};\n    print qq(Description: {\"$info{ Description }\"}\\n);\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 5, "last_activity_date": 1538669606, "last_edit_date": 1538669606, "creation_date": 1538580210, "answer_id": 52630516, "question_id": 52624586, "link": "https://stackoverflow.com/questions/52624586/how-can-i-parse-multiline-records-in-perl/52630516#52630516", "title": "How can I parse multiline records in Perl?", "body": "<p>The Perl special variable <code>$/</code> sets the \"input record separator\"\u2014the string that Perl uses to decide where a line ends. You can set that to something else. </p>\n\n<pre><code>use v5.26;\nuse utf8;\nuse strict;\nuse warnings;\n\n$/ = \"\\n\\n\";  # set the input record separator\n\nwhile( &lt;DATA&gt; ) {\n    chomp;\n    say \"$. ------\\n\", $_;\n    }\n\n__END__\n101#Introduction to the Professor#SG_FEEL#QUE_NOIMAGE#\nhead up to the Great Hall and speak to the professor to check in for class.#\n#\n\n102#Looking for Instructors#SG_FEEL#QUE_NOIMAGE#\nLook for the Battle Instructor.#\nTalk to Battle Instructor#\n\n103#Battle Instructor#SG_FEEL#QUE_NOIMAGE#\nYou have spoken to the Battle Instructor#\n#\n</code></pre>\n\n<p>The output shows that you read whole records with each call to <code>&lt;DATA&gt;</code>:</p>\n\n<pre><code>1 ------\n101#Introduction to the Professor#SG_FEEL#QUE_NOIMAGE#\nhead up to the Great Hall and speak to the professor to check in for class.#\n#\n2 ------\n102#Looking for Instructors#SG_FEEL#QUE_NOIMAGE#\nLook for the Battle Instructor.#\nTalk to Battle Instructor#\n3 ------\n103#Battle Instructor#SG_FEEL#QUE_NOIMAGE#\nYou have spoken to the Battle Instructor#\n#\n</code></pre>\n\n<p>From there you can parse that record however you need.</p>\n"}], "owner": {"reputation": 43, "user_id": 6656462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2VUJH.jpg?s=128&g=1", "display_name": "exneval", "link": "https://stackoverflow.com/users/6656462/exneval"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 52630516, "answer_count": 2, "score": 0, "last_activity_date": 1538669606, "creation_date": 1538561117, "last_edit_date": 1538580197, "question_id": 52624586, "link": "https://stackoverflow.com/questions/52624586/how-can-i-parse-multiline-records-in-perl", "title": "How can I parse multiline records in Perl?", "body": "<p>I'm trying to parse the string that use delimiter '#'\nthis string has 3 lines</p>\n\n<pre><code>101#Introduction to the Professor#SG_FEEL#QUE_NOIMAGE#\nhead up to the Great Hall and speak to the professor to check in for class.#\n#\n\n102#Looking for Instructors#SG_FEEL#QUE_NOIMAGE#\nLook for the Battle Instructor.#\nTalk to Battle Instructor#\n\n103#Battle Instructor#SG_FEEL#QUE_NOIMAGE#\nYou have spoken to the Battle Instructor#\n#\n</code></pre>\n\n<p>how to get each value before delimiter '#' so I can make a new format that look like this</p>\n\n<pre><code>[101] = {\n    Title = \"Introduction to the Professor\",\n    Description = {\n        \"head up to the Great Hall and speak to the professor to check in for class.\"\n    },\n    Summary = \"\"\n},  \n[102] = {\n    Title = \"Looking for Instructors\",\n    Description = {\n        \"Look for the Battle Instructor.\"\n    },\n    Summary = \"Talk to Battle Instructor\"\n},\n[103] = {\n    Title = \"Battle Instructor\",\n    Description = {\n        \"You have spoken to the Battle Instructor\"\n    },\n    Summary = \"\"\n},\n</code></pre>\n\n<p>Also there will be multiple data from 101 - n</p>\n\n<p>I'm trying to use split with the code below:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $data = '101#Introduction to the Professor#SG_FEEL#QUE_NOIMAGE#';\n\nmy @values = split('#', $data);\n\nforeach my $val (@values) {\n    print \"$val\\n\";\n}\n\nexit 0;\n</code></pre>\n\n<p>and the output:</p>\n\n<pre><code>101\nIntroduction to the Professor\nSG_FEEL\nQUE_NOIMAGE\n</code></pre>\n\n<p>How to read multiple line data? And also how to exclude some data, for example to match the new format, I don't need SG_FEEL and QUE_NOIMAGE data</p>\n"}, {"tags": ["node.js", "mongodb", "perl"], "answers": [{"tags": [], "owner": {"reputation": 2855, "user_id": 11800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d37a63484d9878cf6c07dcc08adda9e2?s=128&d=identicon&r=PG", "display_name": "xdg", "link": "https://stackoverflow.com/users/11800/xdg"}, "is_accepted": false, "score": 4, "last_activity_date": 1538572028, "creation_date": 1538572028, "answer_id": 52627740, "question_id": 52623942, "link": "https://stackoverflow.com/questions/52623942/how-to-get-connections-in-mongo-through-driver/52627740#52627740", "title": "How to get connections in Mongo through driver", "body": "<p>That collection name isn't a real collection; it's a pseudo-command and was removed in the 3.6 server per <a href=\"https://jira.mongodb.org/browse/SERVER-30181\" rel=\"nofollow noreferrer\">SERVER-30181</a>.  You can use the <a href=\"https://docs.mongodb.com/manual/reference/command/currentOp/index.html\" rel=\"nofollow noreferrer\">currentOp</a> command instead.</p>\n\n<p>Note that currentOp is eventually going away in favor of the <a href=\"https://docs.mongodb.com/manual/reference/operator/aggregation/currentOp/index.html\" rel=\"nofollow noreferrer\">$currentOp</a> aggregation stage.  This works in the shell using <code>db.aggregate</code> but drivers don't currently support database-level (vs collection-level) aggregation pipelines.  (That feature is currently on the roadmap for the 4.2-era drivers.)</p>\n"}, {"tags": [], "owner": {"reputation": 1724, "user_id": 636790, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e9a0d07422c625c68ecfec71b48313f7?s=128&d=identicon&r=PG", "display_name": "ojosilva", "link": "https://stackoverflow.com/users/636790/ojosilva"}, "is_accepted": true, "score": 1, "last_activity_date": 1538580208, "creation_date": 1538580208, "answer_id": 52630514, "question_id": 52623942, "link": "https://stackoverflow.com/questions/52623942/how-to-get-connections-in-mongo-through-driver/52630514#52630514", "title": "How to get connections in Mongo through driver", "body": "<p>I've found a way to do this with <code>db.runCommand()</code>.</p>\n\n<pre><code>$client-&gt;get_database('admin')-&gt;run_command([ 'currentOp' =&gt; 1, '$all' =&gt; 1 ])-&gt;{inprog};\n</code></pre>\n\n<p>Basically, the <code>currentOp</code> command will receive the command option <code>$all: 1</code> and that will resolve the call just the same as the previous collection.</p>\n\n<p>It also works in Node:</p>\n\n<pre><code>const db = await mongo.connect('mongodb://localhost:27017/admin');\ndb.command({ \"currentOp\": true, $all: 1 });\n</code></pre>\n"}], "owner": {"reputation": 1724, "user_id": 636790, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e9a0d07422c625c68ecfec71b48313f7?s=128&d=identicon&r=PG", "display_name": "ojosilva", "link": "https://stackoverflow.com/users/636790/ojosilva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 52630514, "answer_count": 2, "score": 1, "last_activity_date": 1538580208, "creation_date": 1538559061, "question_id": 52623942, "link": "https://stackoverflow.com/questions/52623942/how-to-get-connections-in-mongo-through-driver", "title": "How to get connections in Mongo through driver", "body": "<p>The system I work on uses the connection table (<code>inprog</code> array) in Mongo to monitor and control system availability and concurrency. This is achieved with the wonderful <code>$cmd.sys.inprog</code> collection.</p>\n\n<p>One can get a nice list of connected clients from the <code>mongo</code> client:</p>\n\n<pre><code>db.getCollection('$cmd.sys.inprog').findOne({ $all: 1 }).inprog\n</code></pre>\n\n<p>Using the Perl driver, the only way I was able to run that command was with:</p>\n\n<pre><code>$db-&gt;eval( q{ db.getCollection('$cmd.sys.inprog').findOne({ $all: 1 }) } )-&gt;{ inprog };\n</code></pre>\n\n<p>But now <code>eval</code> has been deprecated and is generating a load of deprecation warnings in our Mongo log. </p>\n\n<p>The following alternative method does not work from the Perl driver:</p>\n\n<pre><code>$db-&gt;get_collection('$cmd.sys.inprod')-&gt;find_one({ '$all': 1 })-&gt;{inprog};\n# fails with \"Invalid collection name\"\n</code></pre>\n\n<p>Neither from the Node Mongo driver, so it's not just the Perl driver:</p>\n\n<pre><code>db.collection('$cmd.sys.inprog').findOne({$all:1});\n# fails with invalid connection name just the same\n</code></pre>\n\n<p>Also, I couldn't find a <code>$db-&gt;run_command(...)</code> that would do this.</p>\n\n<p>Are there any alternatives to <code>eval</code> to get the <code>inprog</code> list that will work from the Mongo drivers?</p>\n"}, {"tags": ["perl", "parallel-processing", "fork"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538521157, "post_id": 52617477, "comment_id": 92169206, "body": "At first glance your usage looks correct to me. Make sure you are using strict and warnings, and it would be better to declare your variables in the scope you need them rather than at the top of the file. e.g. <code>foreach my $RunId ...</code> and <code>my $SampId = ...</code> I assume you are populating <code>%hash</code> somehow before starting the loop?"}, {"owner": {"reputation": 31, "user_id": 8230588, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a20df5a29fbb7d6bef4d5ebf9e8d1f04?s=128&d=identicon&r=PG&f=1", "display_name": "Alfredo Mari", "link": "https://stackoverflow.com/users/8230588/alfredo-mari"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538521457, "post_id": 52617477, "comment_id": 92169287, "body": "Yes, they are populating the hash before, i didn&#39;t add it here because was not really relevant. As i wrote, the foreach loop runs smoothly, it&#39;s just that  forkmanager quits the parent while children are still running, do you guys have an idea why?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538521635, "post_id": 52617477, "comment_id": 92169324, "body": "Wild guess: one of your child processes might be causing a SIGPIPE. Try setting <code>$SIG{PIPE} = &#39;IGNORE&#39;;</code> in the parent before your loop."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538522531, "post_id": 52617477, "comment_id": 92169529, "body": "(1) Why are you using a queuing system -- is that necessary?  That can throw a wrench into just about anything, and certainly into this.  (2) Did you confirm that the child code runs correctly sequentially (or even just for one case)?  You can do that by commenting out a few lines."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538523235, "post_id": 52617477, "comment_id": 92169677, "body": "@Grinnz A child cannot do much to whack a parent; if <i>it</i> gets a sigpipe it&#39;s just gone.  Do you mean that the SIGPIPE is delivered to the parent, caused by communication between them? I don&#39;t see any comms between the child and the parent."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538523477, "post_id": 52617477, "comment_id": 92169733, "body": "@zdim there&#39;s a reason I said &quot;wild&quot; guess :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538525709, "post_id": 52617477, "comment_id": 92170177, "body": "The <code>P::FM</code> code is fine: start a job (and skip to next), provide child code, then finish; then wait.  The question is about <code>bsub</code> and <code>$dirm4</code> program. So run the exact code that&#39;s in the child without forking first; just comment out a few lines (relating to <code>P::FM</code>). Or even just for one value, without a loop."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538535495, "post_id": 52617477, "comment_id": 92172205, "body": "What&#39;s the parent&#39;s exit code? Are you using any kind of signal handlers. Please provide actual code that exhibits the problem. (See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>) (I&#39;ll settle for code that exhibits the problem <i>for you</i>)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538535515, "post_id": 52617477, "comment_id": 92172210, "body": "@Grinnz, A child dying from SIGPIPE won&#39;t affect the parent"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1538535592, "post_id": 52617477, "comment_id": 92172231, "body": "Removing <code>$pm-&gt;finish;</code> is completely wrong. <code>$pm-&gt;finish;</code> is the same as <code>exit;</code>. If you remove it, the child will start executing the parent&#39;s code and stating creating children of its own."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538535635, "post_id": 52617477, "comment_id": 92172238, "body": "Re &quot;<i>then wait until ALL of them are complete</i>&quot;, That&#39;s what <code>$pm-&gt;wait_all_children();</code> does. It literally waits until all the children exit."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 8230588, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a20df5a29fbb7d6bef4d5ebf9e8d1f04?s=128&d=identicon&r=PG&f=1", "display_name": "Alfredo Mari", "link": "https://stackoverflow.com/users/8230588/alfredo-mari"}, "edited": false, "score": 0, "creation_date": 1539015000, "post_id": 52618008, "comment_id": 92338840, "body": "thanks everyone, i learnt a lot thanks to your hints, actually it was not a problem of forkmanager, as ikegami was stating, it was ok like that, i followed @zdim hint and run the loop without forkmanager and it turn to be a variable problem (the full path to access them i didn&#39;t provide, that was the issue). thanks everyone for the precious hints anyway"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1538525238, "creation_date": 1538525238, "answer_id": 52618008, "question_id": 52617477, "link": "https://stackoverflow.com/questions/52617477/forkmanager-perl-quits-the-parent-job-before-the-children-jobs-are-ready/52618008#52618008", "title": "ForkManager (Perl) quits the parent job before the children jobs are ready", "body": "<p>I'm out of ideas for debugging Parallel::ForkManager, but here's an example using <a href=\"https://metacpan.org/pod/IO::Async\" rel=\"nofollow noreferrer\">IO::Async</a> which is a little more flexible while similarly providing a nice wrapper around raw fork and waitpid.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse IO::Async::Loop;\nuse Future;\n\nmy $loop = IO::Async::Loop-&gt;new;\nmy @futures;\nmy %hash;\n... # populate %hash\nforeach my $RunId (keys %hash) {\n  my $dirm4;\n  ... # build $dirm4\n  my $future = $loop-&gt;new_future;\n  my $process = $loop-&gt;open_process(\n    command =&gt; ['bash', '-c', $dirm4],\n    on_finish =&gt; sub { $future-&gt;done(@_) },\n    on_exception =&gt; sub { $future-&gt;fail(@_) },\n  );\n  push @futures, $future;\n}\n\n# run event loop until all the futures are done, or throw an exception if one fails to start the command\nmy @exit_codes = Future-&gt;needs_all(@futures)-&gt;get;\n</code></pre>\n\n<p>You can also use <a href=\"https://metacpan.org/pod/Future::Utils\" rel=\"nofollow noreferrer\">Future::Utils</a> to implement a queue if you don't want to start them all at once, I just recently wrote an example in <a href=\"https://stackoverflow.com/a/52613156/5848200\">this answer</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 4, "last_activity_date": 1538610316, "last_edit_date": 1538610316, "creation_date": 1538575518, "answer_id": 52628866, "question_id": 52617477, "link": "https://stackoverflow.com/questions/52617477/forkmanager-perl-quits-the-parent-job-before-the-children-jobs-are-ready/52628866#52628866", "title": "ForkManager (Perl) quits the parent job before the children jobs are ready", "body": "<p><code>bsub</code> is already part of a framework for parallel computing. The <code>bsub</code> command itself runs quickly; it just submits a job to a job scheduler and exits. It it not supposed to wait for the job it is scheduling to finish, so all of your child processes should finish quickly and the main program will exit quickly, too.</p>\n\n<p>If you want to control the parallel processing yourself, you should execute each command without <code>bsub</code>. If you are using <code>bsub</code>, then you shouldn't need to do your own forking or use a background process manager like <code>Parallel::ForkManager</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 8230588, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a20df5a29fbb7d6bef4d5ebf9e8d1f04?s=128&d=identicon&r=PG&f=1", "display_name": "Alfredo Mari", "link": "https://stackoverflow.com/users/8230588/alfredo-mari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1538610316, "creation_date": 1538520649, "question_id": 52617477, "link": "https://stackoverflow.com/questions/52617477/forkmanager-perl-quits-the-parent-job-before-the-children-jobs-are-ready", "title": "ForkManager (Perl) quits the parent job before the children jobs are ready", "body": "<p>I have the following perl code:</p>\n\n<pre><code>use Parallel::ForkManager;\n  my $maxpro = 15;\n  my $pm = Parallel::ForkManager-&gt;new($maxpro);\nmy $SampId;\nmy $SampDir;\nmy $RunId;\nmy $Runfile;\nmy %hash;\n foreach $RunId(keys(%hash)) {\n $pm-&gt;start and next;\n $SampId = $hash{$RunId};\n $Runfile = $rundir . $RunId . \"fastq\";\n\n if ($SampId =~ m/16S/) {\n     $SampDir = $SiXSSdir . $SampId . \"_Split/\"; \n }\n elsif ($SampId =~ m/ITS/) {\n     $SampDir = $ITSdir . $SampId . \"_Split/\";\n }\n #make a directory for each file\n my $dirouteach = $outdir . $SampId . \"Single_directory.out\";\n my $dirm4 = \"bsub -o $dirouteach mkdir $SampDir\";\n\n system('bash', '-c', \"$dirm4\") == 0 or die \"Can't create each single subdirectories for either 16S or ITS, or both, see line 114\" . \"\\n\";\n$pm -&gt;finish;\n}\n\n$pm -&gt; wait_all_children();\n</code></pre>\n\n<p>However, when i run it like this, all the children projects are running, but the main script exits prematurely, even before the children are complete, it also does not give any error message. I also tried to run it deleting <code>$pm -&gt;finish;</code>, but in that case, the scripts is stuck and waits forever until the children are done.\nI am sure i am doing something wrong with fork manager (which i never used before). My goal would be just to use it to parallelize my jobs but then wait until ALL of them are complete, and then go forward in my script.\nAny help would be much appreciated, thank you!</p>\n"}, {"tags": ["string", "perl", "hash"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1538509612, "post_id": 52615308, "comment_id": 92165011, "body": "The posted code is incorrect Perl, which can&#39;t run (even if it were complete) and won&#39;t produce what code comments show.  Can you post your actual code?  That helps a lot in helping you out."}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1538509820, "post_id": 52615308, "comment_id": 92165114, "body": "Also I&#39;m unclear whether you&#39;re wanting to do a pattern match against the names of the files in <code>@files</code>, or do you want to open the files, read lines of data from them and match against those lines? It would be helpful if you could provide examples of the filenames if that&#39;s what you&#39;re matching, or examples of file contents."}, {"owner": {"reputation": 59, "user_id": 10377474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066fbba87b33a9807ecbfd2a393f8afa?s=128&d=identicon&r=PG&f=1", "display_name": "JohnEgg", "link": "https://stackoverflow.com/users/10377474/johnegg"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538509869, "post_id": 52615308, "comment_id": 92165133, "body": "@zdim Code was edited/updated... any help would be greatly appreciated"}, {"owner": {"reputation": 59, "user_id": 10377474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066fbba87b33a9807ecbfd2a393f8afa?s=128&d=identicon&r=PG&f=1", "display_name": "JohnEgg", "link": "https://stackoverflow.com/users/10377474/johnegg"}, "reply_to_user": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1538509975, "post_id": 52615308, "comment_id": 92165175, "body": "@GrantMcLean I just want to be able to put the four string values from the string ($name) into a seperate hash key values. I updated the code for the filename. It is globbed so it has multiple values..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538510252, "post_id": 52615308, "comment_id": 92165292, "body": "To break the string <code>&#39;G43B76P90T45&#39;</code>  into &quot;letter-numbers&quot; patterns (the goal I assume from the question): <code>my @parts = &#39;G43B76P90T45&#39; =~ &#47;([a-zA-Z][0-9]+)&#47;g;</code> But the code shown in the question is &quot;Illegal&quot; with many basic syntax errors and I can&#39;t tell whether the above will actually work in your real code.  Just once more: please show us your actual code :)"}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1538510372, "post_id": 52615308, "comment_id": 92165344, "body": "When you say you want 4 values from the name, is it the exact 4 values you listed? Or is it &#39;G&#39; followed by a 2 digit number, &#39;B&#39; followed by a 2 digit number etc? Some more examples of filenames you&#39;re matching and expected output would help."}, {"owner": {"reputation": 59, "user_id": 10377474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066fbba87b33a9807ecbfd2a393f8afa?s=128&d=identicon&r=PG&f=1", "display_name": "JohnEgg", "link": "https://stackoverflow.com/users/10377474/johnegg"}, "reply_to_user": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1538510854, "post_id": 52615308, "comment_id": 92165555, "body": "@GrantMcLean it is the exact 4 values I listed. I updated my expected output"}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1538511439, "post_id": 52615308, "comment_id": 92165801, "body": "I&#39;m still failing to understand something.  If every file had those exact 4 values followed by <code>_testing_42</code> then every file would have the exact same name. Are you trying to match filenames that contain <i>some</i> of those values and then use the hash to determine which values are present?"}, {"owner": {"reputation": 59, "user_id": 10377474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066fbba87b33a9807ecbfd2a393f8afa?s=128&d=identicon&r=PG&f=1", "display_name": "JohnEgg", "link": "https://stackoverflow.com/users/10377474/johnegg"}, "reply_to_user": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1538511860, "post_id": 52615308, "comment_id": 92166021, "body": "@GrantMcLean The problem is those 4 values are arbitrary, one week they may be those names (G43, B76, P90, T45), one week they may be COMPLETELY different names. Therefore, I do not want to assume or hardcode their names at all in the code, I just want to grab the names that are being globbed, place them in a string, and then make that string into a hash table that points to the 4 strings, so I may access those strings individually by key ( 1 =&gt; G43, 2=&gt; B76 etc... )."}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1538512828, "post_id": 52615308, "comment_id": 92166452, "body": "It seems like I&#39;m inching closer to understanding. When you say they could be completely different the next week, would the four parts you&#39;re interested in always be exactly 3 characters long? Or is there some other way you can look at a filename and recognise the values of the four parts?"}, {"owner": {"reputation": 59, "user_id": 10377474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066fbba87b33a9807ecbfd2a393f8afa?s=128&d=identicon&r=PG&f=1", "display_name": "JohnEgg", "link": "https://stackoverflow.com/users/10377474/johnegg"}, "reply_to_user": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1538514178, "post_id": 52615308, "comment_id": 92166952, "body": "@GrantMcLean Yes. The four parts would always be 3 characters long. However, there could be 6 values, or 2 values, or 1 value in a different week. But the format of the value will remain the same, yes."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538517379, "post_id": 52615672, "comment_id": 92168094, "body": "This assumes that patterns to extract are always three characters long; I&#39;d state that assumption. (Also, to nitpick: it does &quot;<i>print the hash</i>&quot;, it prints one element of it.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538540389, "post_id": 52615672, "comment_id": 92173194, "body": "Simplifies to: <code>my %hash; @hash{qw( first second third fourth )} = unpack(&#39;(A3)*&#39;, $name);</code>"}], "tags": [], "owner": {"reputation": 23, "user_id": 10442778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6450ac28433e938b0c53b5c1b1857570?s=128&d=identicon&r=PG&f=1", "display_name": "Gever", "link": "https://stackoverflow.com/users/10442778/gever"}, "is_accepted": false, "score": 1, "last_activity_date": 1538510905, "creation_date": 1538510905, "answer_id": 52615672, "question_id": 52615308, "link": "https://stackoverflow.com/questions/52615308/how-to-convert-string-to-hash-table-in-perl/52615672#52615672", "title": "How to convert string to hash table in perl", "body": "<p>First you need to split the name in 4 parts:</p>\n\n<pre><code>my ($first, $second, $third, $fourth) = unpack(\"(A3)*\", $name);\n</code></pre>\n\n<p>Fill the hash</p>\n\n<pre><code>$hash{\"first\"} = $first;\n$hash{\"second\"} = $second;\n$hash{\"third\"} = $third;\n$hash{\"fourth\"} = $fourth;\n</code></pre>\n\n<p>and print the hash</p>\n\n<pre><code>print $hash{\"fourth\"};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538518058, "post_id": 52616782, "comment_id": 92168286, "body": "I used <code>(...)</code> as a simple way to match any 3 characters.  But yes, you could also write it as <code>(.{3})</code> or <code>([a-zA-Z0-9]{3})</code> or even <code>(\\w{3})</code> which is letters, number and the <code>_</code> underscore (i.e.: characters that are valid in a Perl variable/identifier name)."}], "tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": false, "score": 1, "last_activity_date": 1538518468, "last_edit_date": 1538518468, "creation_date": 1538516317, "answer_id": 52616782, "question_id": 52615308, "link": "https://stackoverflow.com/questions/52615308/how-to-convert-string-to-hash-table-in-perl/52616782#52616782", "title": "How to convert string to hash table in perl", "body": "<p>If I understand correctly what you're trying to do, then @Gever's answer should do the trick.  Here's an alternative implementation using regexes rather than unpack:</p>\n\n<pre><code>use 5.010;\nuse strict;\nuse warnings;\n\nmy @file = glob(\"/path/window/*_testing_42.csv\");\n\nforeach my $file (@file) {\n    my($name) = $file =~ /(\\w+)_testing_42/;\n    my @code = $name =~ /(...)/g;\n    say 'Parts found: ', scalar(@code);   # Parts found: 4\n    say $code[0];   # G43\n    say $code[1];   # B76\n    say $code[2];   # P90\n    say $code[3];   # T45\n}\n</code></pre>\n\n<p>I used an array rather than a hash, because that makes more sense to me, but if you really want a hash, you could do it like this:</p>\n\n<pre><code>foreach my $file (@file) {\n    my($name) = $file =~ /(\\w+)_testing_42/;\n    my %hash;\n    @hash{'first', 'second', 'third', 'fourth'} = $name =~ /(...)/g;\n    say $hash{first};   # G43\n    say $hash{second};  # B76\n    say $hash{third};   # P90\n    say $hash{fourth};  # T45\n}\n</code></pre>\n\n<p>In this line:</p>\n\n<pre><code>my($name) = $file =~ /(\\w+)_testing_42/;\n</code></pre>\n\n<p>The parentheses around <code>$name</code> are important because they force the match to be evaluated in list context, which returns the parts of the regex that were captured in the <code>(\\w+)</code>.  Without the parentheses, the value 1 would be assigned to <code>$name</code> because there was 1 match.</p>\n\n<p>The syntax for assigning a list of values to a series of keys in a hash (called a 'hash slice') is somewhat confusing.  Perl knows we're assigning values into <code>%hash</code> because of the <code>{</code> after the variable name, but we put a <code>@</code> before the variable name to indicate we're assigning multiple values to a hash slice.  Using a <code>$</code> before the variable name would indicate we're assigning to a single value in the hash.</p>\n\n<p>The other thing I changed from your code is that I declared <code>%hash</code> inside the loop.  Which means that you can only refer to it inside the loop.  If you declare it outside the loop, one set of values will persist after each matching filename has been processed, but the hash might contain values from different filenames depending on how many fields were present on the last iterations.</p>\n"}], "owner": {"reputation": 59, "user_id": 10377474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066fbba87b33a9807ecbfd2a393f8afa?s=128&d=identicon&r=PG&f=1", "display_name": "JohnEgg", "link": "https://stackoverflow.com/users/10377474/johnegg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1538518468, "creation_date": 1538509319, "last_edit_date": 1538511002, "question_id": 52615308, "link": "https://stackoverflow.com/questions/52615308/how-to-convert-string-to-hash-table-in-perl", "title": "How to convert string to hash table in perl", "body": "<p>I have a string from a for loop:</p>\n\n<pre><code>@file = \"/path/window/*_testing_42.csv\";\n\n\nforeach $file(@file) {\n\n\n$name = $file=~ /(\\w*)_testing_42/; #comes from file path\n$name = 1$;\nprint $name; #prints G43B76P90T45\n\n}\n</code></pre>\n\n<p>There are 4 values I am I need from this string (G43, B76, P90, T45). I want to place these into a hash so that I can refer to each value specifically. However the hash table code I am trying to implement is not working for my intended purpose:</p>\n\n<pre><code> my %hash;\n\n\n\nforeach $file(@file) {\n\n\n    $name = $file=~ /(\\w*)_testing_42/; #comes from file path\n    $name = 1$;\n    print $name; #prints G43B76P90T45\n\n\n\n    my($first $second $third $fourth) = $name;\n    $hash{\"first\"} = $first;\n    $hash{\"second\"} = $second;\n    $hash{\"third\"} = $third;\n    $hash{\"fourth\"} = $fourth;\n</code></pre>\n\n<p>EXPECTED OUTPUT:</p>\n\n<pre><code>    print $fourth; #should print T45\n\n\n    print $first; #should print G43\n    print $third #should print  P90\n}\n</code></pre>\n"}, {"tags": ["string", "perl"], "answers": [{"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": false, "score": 3, "last_activity_date": 1538506485, "last_edit_date": 1538506485, "creation_date": 1538506173, "answer_id": 52614599, "question_id": 52614500, "link": "https://stackoverflow.com/questions/52614500/how-to-combine-variables-in-string-in-perl/52614599#52614599", "title": "How to combine variables in string in Perl", "body": "<p>One way is to use curly braces around the variable name like this:</p>\n\n<pre><code>$file = \"/pathtoFile/window/$name/cavin_l/${name}_formula_24rw$date.csv\";\n</code></pre>\n\n<p>This syntax is described in <a href=\"http://perldoc.perl.org/perldata.html#Scalar-value-constructors\" rel=\"nofollow noreferrer\">perldoc perldata</a></p>\n\n<blockquote>\n  <p>As in some shells, you can enclose the variable name in braces to\n  disambiguate it from following alphanumerics (and underscores).</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "is_accepted": false, "score": 0, "last_activity_date": 1538506556, "creation_date": 1538506556, "answer_id": 52614703, "question_id": 52614500, "link": "https://stackoverflow.com/questions/52614500/how-to-combine-variables-in-string-in-perl/52614703#52614703", "title": "How to combine variables in string in Perl", "body": "<p>like most things in Perl there is many ways to do the same task.</p>\n\n<p>You can use <code>{}</code> to define the boundaries of your variable name </p>\n\n<p><code>my $file1=\"/pathtoFile/window/$name/cavin_l/${name}_formula_24rw$date.csv\";</code></p>\n\n<p>Alternatively you could use concatenation to join the string.</p>\n\n<p><code>my $file2=\"/pathtoFile/window/$name/cavin_l/\" . $name .\"_formula_24rw\" . $date . \".csv\";</code></p>\n\n<p>Both these methods produce the same result.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $name=\"LPA\";\nmy $date=\"39\";\n\nmy $file1=\"/pathtoFile/window/$name/cavin_l/${name}_formula_24rw$date.csv\";\nmy $file2=\"/pathtoFile/window/$name/cavin_l/\" . $name .\"_formula_24rw\" . $date . \".csv\";\n\nprint \"$file1\\n$file2\\n\";\n</code></pre>\n\n<p>output</p>\n\n<pre><code>/pathtoFile/window/LPA/cavin_l/LPA_formula_24rw39.csv\n/pathtoFile/window/LPA/cavin_l/LPA_formula_24rw39.csv\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1539794826, "last_edit_date": 1539794826, "creation_date": 1538506735, "answer_id": 52614743, "question_id": 52614500, "link": "https://stackoverflow.com/questions/52614500/how-to-combine-variables-in-string-in-perl/52614743#52614743", "title": "How to combine variables in string in Perl", "body": "<p>The <a href=\"https://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators\" rel=\"nofollow noreferrer\">double quotes</a> <code>\"...\"</code> <em>interpolate</em> variables in the string. Then the problem is that in your attempt the variable names are not cleanly delineated and the interpreter ends up looking for</p>\n\n<pre><code>$name::_formula_24rw\n</code></pre>\n\n<p>That is, the variable <code>_formula_24rw</code> in package <code>$name</code>; this is because a <code>'</code> after a variable name (so <code>'</code> after <code>$name</code> in your <code>$file</code>) is still <a href=\"https://perldoc.perl.org/functions/package.html\" rel=\"nofollow noreferrer\">interpreted as scope</a> <code>::</code>, for historical reasons. As there is no such variable you end up with the first <code>'</code> and then the value for <code>$date</code>.</p>\n\n<p>The most important take-away: <code>use warnings;</code> <strong>would have caught this</strong>. Try to run</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $name = \"LPA\";\nmy $date= 39; \n\nmy $file = \"/pathtoFile/window/$name/cavin_l/'$name'_formula_24rw$date.csv\";\n</code></pre>\n\n<p>and it prints</p>\n\n<blockquote>\n  <p>Use of uninitialized value $name::_formula_24rw in concatenation (.) or string at ...</p>\n</blockquote>\n\n<p>Please <em>always</em> have <code>use warnings;</code> and <code>use strict;</code> at the beginning of a program.</p>\n\n<hr>\n\n<p>So either use <code>${...}</code> where <code>{}</code> delimit the variable name</p>\n\n<pre><code>my $file = \"/pathtoFile/window/$name/cavin_l/${name}_formula_24rw$date.csv\";\n</code></pre>\n\n<p>or piece it together from separate strings</p>\n\n<pre><code>my $file = '/pathtoFile/window/' \n    . $name . '/cavin_l/' . $name . '_formula_24rw' . \"$date.csv\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "is_accepted": false, "score": 4, "last_activity_date": 1538507455, "last_edit_date": 1538507455, "creation_date": 1538507145, "answer_id": 52614849, "question_id": 52614500, "link": "https://stackoverflow.com/questions/52614500/how-to-combine-variables-in-string-in-perl/52614849#52614849", "title": "How to combine variables in string in Perl", "body": "<p>You fell victim to the archaic <code>'</code> (quote) package separator.</p>\n\n<p><code>$name'_formula_24</code> is interpreted as <code>$name::_formula24</code>, and since that variable is undefined, the empty string is interpolated.</p>\n\n<p>You should change that to</p>\n\n<pre><code>$file = \"/pathtoFile/window/$name/cavin_l/${name}_formula_24rw$date.csv\"\n</code></pre>\n\n<p>Quoting from the man perldata:</p>\n\n<blockquote>\n  <p>There are two package separators in Perl: A double colon (\"::\") and\n  a    single quote (\"'\").  Normal identifiers can start or end with a\n  double    colon, and can contain several parts delimited by double\n  colons.    Single quotes have similar rules, but with the exception\n  that they are    not legal at the end of an identifier: That is,\n  \"$'foo\" and \"$foo'bar\"    are legal, but \"$foo'bar'\" is not.</p>\n</blockquote>\n"}], "owner": {"reputation": 41, "user_id": 10360144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9f045cc610cd3bc6112fcc532637a87?s=128&d=identicon&r=PG&f=1", "display_name": "FranceMadrid9", "link": "https://stackoverflow.com/users/10360144/francemadrid9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 889, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1601675814, "creation_date": 1538505764, "last_edit_date": 1601675814, "question_id": 52614500, "link": "https://stackoverflow.com/questions/52614500/how-to-combine-variables-in-string-in-perl", "title": "How to combine variables in string in Perl", "body": "<pre><code>$name = &quot;LPA&quot;;\n$date= 39;\n\n$file = &quot;/pathtoFile/window/$name/cavin_l/'$name'_formula_24rw$date.csv&quot;;\n</code></pre>\n<p>I want this to set <code>$file</code> equal to:</p>\n<pre><code>/pathtoFile/window/LPA/cavin_l/LPA_formula_24rw39.csv\n</code></pre>\n<p>But it is setting <code>$file</code> to:</p>\n<pre><code>/pathtoFile/window/LPA/cavin_l/'39.csv\n</code></pre>\n<p>Could someone help me figure out the correct syntax for what I am trying to accomplish? I cannot seem to get it.</p>\n"}, {"tags": ["perl", "design-patterns", "cpan", "moose", "dancer"], "answers": [{"comments": [{"owner": {"reputation": 1437, "user_id": 2518556, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/7mTHZ.jpg?s=128&g=1", "display_name": "yahermann", "link": "https://stackoverflow.com/users/2518556/yahermann"}, "edited": false, "score": 0, "creation_date": 1538507958, "post_id": 52613984, "comment_id": 92164308, "body": "Thanks for the answer &amp; CPAN suggestions!  I&#39;m having a chicken &amp; egg moment.  How does an object subscribe itself (or more specifically, a callback method of itself) if it hasn&#39;t yet been instantiated?  Using Moose here.  Code sample would be super useful!"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 1437, "user_id": 2518556, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/7mTHZ.jpg?s=128&g=1", "display_name": "yahermann", "link": "https://stackoverflow.com/users/2518556/yahermann"}, "edited": false, "score": 0, "creation_date": 1538510916, "post_id": 52613984, "comment_id": 92165572, "body": "I&#39;m not really following the use case - it sounds like a specific setup that maybe you could expand on in your question?"}, {"owner": {"reputation": 1437, "user_id": 2518556, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/7mTHZ.jpg?s=128&g=1", "display_name": "yahermann", "link": "https://stackoverflow.com/users/2518556/yahermann"}, "edited": false, "score": 0, "creation_date": 1538511638, "post_id": 52613984, "comment_id": 92165909, "body": "I edited question a bit, but think it&#39;s probably a good idea to keep it open to other generalized approaches. As to the specifics for using the modules you suggested:  We&#39;re using Moose.  So if we have Moose class say <code>Class1</code> with <code>some_method()</code> that we would like to dispatch events to, where would be a good place to add code where, upon firing of the event, creates an instance of Class1 and then runs <code>some_method()</code>?  Also where do I initialize -- ie create event?  (presumably some initialization code that runs once to point events to some_method())"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 1437, "user_id": 2518556, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/7mTHZ.jpg?s=128&g=1", "display_name": "yahermann", "link": "https://stackoverflow.com/users/2518556/yahermann"}, "edited": false, "score": 0, "creation_date": 1538512035, "post_id": 52613984, "comment_id": 92166104, "body": "Any code you want to run upon the event firing should just go in the callback. They&#39;re closures, you can close over variables in outer scopes as needed (this is a common way to do &quot;initialize once&quot;, alternatively there&#39;s <a href=\"https://perldoc.pl/functions/state\" rel=\"nofollow noreferrer\">state</a>), or just run whatever code you need. It&#39;s hard to say what the optimal structure would be without a complete understanding of the code."}, {"owner": {"reputation": 2107, "user_id": 7451787, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lNcOE.jpg?s=128&g=1", "display_name": "bcperth", "link": "https://stackoverflow.com/users/7451787/bcperth"}, "edited": false, "score": 3, "creation_date": 1538523197, "post_id": 52613984, "comment_id": 92169663, "body": "You have looked at the classic Observer Pattern as in GoF? This or some variation would seem to fit what you describe. &quot;Observers&quot; register with a &quot;Subject&quot;. Subject &quot;notifies&quot; Observers on state change/event etc by invoking Observer methods."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 2, "last_activity_date": 1538503605, "creation_date": 1538503605, "answer_id": 52613984, "question_id": 52613848, "link": "https://stackoverflow.com/questions/52613848/patterns-sought-for-avoiding-action-at-a-distance/52613984#52613984", "title": "Pattern(s) sought for avoiding &quot;action at a distance&quot;", "body": "<p>The common pattern that sounds like what you're talking about is event dispatch. You can find many different takes on this pattern on CPAN, such as: <a href=\"https://metacpan.org/pod/Event::Distributor\" rel=\"nofollow noreferrer\">Event::Distributor</a>, <a href=\"https://metacpan.org/pod/Beam::Emitter\" rel=\"nofollow noreferrer\">Beam::Emitter</a>, <a href=\"https://metacpan.org/pod/Mixin::Event::Dispatch\" rel=\"nofollow noreferrer\">Mixin::Event::Dispatch</a>, <a href=\"https://metacpan.org/pod/Mojo::EventEmitter\" rel=\"nofollow noreferrer\">Mojo::EventEmitter</a> (which I've extracted to a <a href=\"https://metacpan.org/pod/Role::EventEmitter\" rel=\"nofollow noreferrer\">role</a>). You have some object which is either an event dispatcher or has an event dispatching role applied to it, and everything can subscribe to events, and when something emits an event all of the subscribers get their callback called.</p>\n"}], "owner": {"reputation": 1437, "user_id": 2518556, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/7mTHZ.jpg?s=128&g=1", "display_name": "yahermann", "link": "https://stackoverflow.com/users/2518556/yahermann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 2, "accepted_answer_id": 52613984, "answer_count": 1, "score": 2, "last_activity_date": 1538681545, "creation_date": 1538503075, "last_edit_date": 1538681545, "question_id": 52613848, "link": "https://stackoverflow.com/questions/52613848/patterns-sought-for-avoiding-action-at-a-distance", "title": "Pattern(s) sought for avoiding &quot;action at a distance&quot;", "body": "<p>I'm working on a complex and very large web application. Some of the classes within said application require execution of various methods in far-away objects, and I am quickly realizing and stumbling into bugs related to the \"action at a distance\" antipattern.</p>\n\n<p>Example 1: Some of the classes require execution of daily \"cleanup\" methods, such as <code>reaper()</code>, <code>cleanup()</code>, <code>send_daily_status_messages()</code>, etc.</p>\n\n<p>Example 2: Some classes mutate the app's state, and require a far-away object to perform a <code>refresh()</code> of its own state.</p>\n\n<p>Example 3: Going back to Example 1, some objects spread throughout the app provide various bits of content to <code>send_daily_status_messages()</code>.</p>\n\n<p>To address this, our team has created an Events class that centralizes all of these calls. However we're finding the Events class itself to be a bit too \"distant\", in the sense that sometimes we make changes in the distributed objects, forget to make changes to the calls within the Events class, and then see bugs.</p>\n\n<p>I'm wondering if there are any better patterns out there?  </p>\n\n<p>One thought: For objects to \"register\" themselves to some sort of dynamic Events class upon initialization. That would keep the invocation code near each object. Objects could maybe even also create different Events?</p>\n\n<p>Lastly, this is for a Perl-based web application that using Moose. So any Perl-specific Moose-friendly recommendations, including CPAN recommendations, would be most appreciated!</p>\n"}, {"tags": ["multithreading", "perl", "concurrency", "directory", "fork"], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1538502638, "last_edit_date": 1538502638, "creation_date": 1538500133, "answer_id": 52613156, "question_id": 52612742, "link": "https://stackoverflow.com/questions/52612742/perl-run-the-same-script-for-different-directories-at-the-same-time/52613156#52613156", "title": "Perl run the same script for different directories at the same time", "body": "<p>As you're just starting external processes and waiting for them, a non-threading option:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Path::Tiny;\nuse IO::Async::Loop;\nuse Future::Utils 'fmap_concat';\n\nmy $loop = IO::Async::Loop-&gt;new;\n\nmy $maindirectory = '/foo/bar';\nmy @subdirs = grep { -d } path($maindirectory)-&gt;children; # excludes . and ..\n\n# runs this code to maintain up to 'concurrent' pending futures at once\nmy $main_future = fmap_concat {\n  my $dir = shift;\n  my $future = $loop-&gt;new_future;\n  my $process = $loop-&gt;open_process(\n    command =&gt; ['/bin/bash', 'my_script.sh', $dir],\n    on_finish =&gt; sub { $future-&gt;done(@_) },\n    on_exception =&gt; sub { $future-&gt;fail(@_) },\n  );\n  return $future;\n} foreach =&gt; \\@subdirs, concurrent =&gt; 2;\n\n# run event loop until all futures are done or one fails, throw exception on failure\nmy @exit_codes = $main_future-&gt;get;\n</code></pre>\n\n<p>See the docs for <a href=\"https://metacpan.org/pod/IO::Async::Loop\" rel=\"nofollow noreferrer\">IO::Async::Loop</a> and <a href=\"https://metacpan.org/pod/Future::Utils\" rel=\"nofollow noreferrer\">Future::Utils</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 0, "last_activity_date": 1538588323, "last_edit_date": 1538588323, "creation_date": 1538502236, "answer_id": 52613648, "question_id": 52612742, "link": "https://stackoverflow.com/questions/52612742/perl-run-the-same-script-for-different-directories-at-the-same-time/52613648#52613648", "title": "Perl run the same script for different directories at the same time", "body": "<p>One way is to <a href=\"http://perldoc.perl.org/functions/fork.html\" rel=\"nofollow noreferrer\">fork</a> and in each child process a group of directories.</p>\n\n<p>A basic example</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse List::MoreUtils qw(natatime);\nuse POSIX qw(:sys_wait_h);  # for WNOHANG\nuse Time::HiRes qw(sleep);  # for fractional seconds\n\nmy @all_dirs = qw(d1 d2 d3 d4);\nmy $path = 'maindir';\nmy @procs;\n\n# Get iterator over groups (of 2)\nmy $it = natatime 2, @all_dirs;\n\nwhile (my @dirs = $it-&gt;()) { \n\n    my $pid = fork // do {      #/\n        warn \"Can't fork for @dirs: $!\";\n        next;\n    };\n\n    if ($pid == 0) { \n        foreach my $dir (@dirs) {\n            my @cmd = ('/bin/bash/', 'my_script.sh', \"$path/$dir\");\n            say \"in $$, \\@cmd: (@cmd)\"; \n            # system(@cmd) == 0 or do { inspect $? }\n        };  \n        exit;\n    };  \n    push @procs, $pid;\n}\n\n# Poll with non-blocking wait for processes (reap them)\nmy $gone;\nwhile (($gone = waitpid -1, WNOHANG) &gt; -1) {\n    my $status = $?; \n    say \"Process $gone exited with $status\" if $gone &gt; 0;\n    sleep 0.1;\n}\n</code></pre>\n\n<p>See <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">system</a> and/or <a href=\"http://perldoc.perl.org/functions/exec.html\" rel=\"nofollow noreferrer\">exec</a> for details, in particular on error checking, as well as <a href=\"https://perldoc.perl.org/perlvar.html#$?\" rel=\"nofollow noreferrer\">$? variable</a>. It can be unpacked to retrieve more details about the error; or, at least print a warning and skip to the next item (which happens above anyway).</p>\n\n<p>The code above prints out the command and pid's with their exit status, but replace <code>@cmd</code> with a test command of no consequence and un-comment the <code>system</code> line to try this out.</p>\n\n<p>Watch for how many jobs there are. A basic rule of thumb is to not have more than 2 per core at which point the performance starts suffering, but this depends on many details. Experiment to find the sweet spot for your case. I like to have a job per core and then <em>at least</em> one core free.  In order to throttle this see modules linked at the end.</p>\n\n<p>To break all jobs (directories) into groups I used <code>natatime</code> from <a href=\"https://metacpan.org/pod/List::MoreUtils#natatime-EXPR,-LIST\" rel=\"nofollow noreferrer\">List::MoreUtils</a> (n-at-a-time). If there are more specific criteria about how to group directories adjust that.</p>\n\n<p>See <a href=\"https://metacpan.org/pod/Forks::Super\" rel=\"nofollow noreferrer\">Forks::Super</a> and <a href=\"https://metacpan.org/pod/Parallel::ForkManager\" rel=\"nofollow noreferrer\">Parallel::ForkManager</a> for higher-level ways to work with forked processes.</p>\n"}], "owner": {"reputation": 83, "user_id": 5646911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1053ff606f022044eadf048aa6a0c5ae?s=128&d=identicon&r=PG&f=1", "display_name": "diborbi", "link": "https://stackoverflow.com/users/5646911/diborbi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1569429703, "creation_date": 1538498342, "last_edit_date": 1569429703, "question_id": 52612742, "link": "https://stackoverflow.com/questions/52612742/perl-run-the-same-script-for-different-directories-at-the-same-time", "title": "Perl run the same script for different directories at the same time", "body": "<p>I have a directory that contains other directories (the number of directories is arbitrary), like this:</p>\n\n<p>Main_directory_samples/</p>\n\n<ul>\n<li>subdirectory_sample_1/</li>\n<li>subdirectory_sample_2/</li>\n<li>subdirectory_sample_3/</li>\n<li>subdirectory_sample_4/</li>\n</ul>\n\n<p>I have a script that receives as input one directory each time and it takes 1h to run (for each directory). To run the script I have the following code:      </p>\n\n<pre><code>opendir DIR, $maindirectory or die \"Can't open directory!!\";\nwhile(my $dir = readdir DIR){\n    if($dir ne '.' &amp;&amp; $dir ne '..'){ \n        system(\"/bin/bash\", \"my_script.sh\", $maindirectory.'/'.$dir);    \n    }   \n}\nclosedir DIR;\n</code></pre>\n\n<p>However, I want to run the script for different directories at the same time. For instance, the <code>subdirectory_sample_1/</code> and <code>subdirectory_sample_2/</code> would run in the same thread; <code>subdirectory_sample_3/</code> and <code>subdirectory_sample_4/</code> in another. But I just can't find a way to do this. </p>\n"}, {"tags": ["regex", "perl", "text"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1538594402, "post_id": 52615196, "comment_id": 92201765, "body": "Added a solution to the answer."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 1, "last_activity_date": 1538594395, "last_edit_date": 1538594395, "creation_date": 1538508752, "answer_id": 52615196, "question_id": 52612121, "link": "https://stackoverflow.com/questions/52612121/how-to-keep-the-last-consecutive-line-that-matches-with-perl/52615196#52615196", "title": "How to keep the last consecutive line that matches with Perl", "body": "<p>If you add the warnings pragma to your perl script, you get the following information:</p>\n\n<pre><code>Complex regular subexpression recursion limit (32766) exceeded at -e line 1, &lt;&gt; chunk 1.\n</code></pre>\n\n<p>According to <a href=\"https://perldoc.perl.org/perldiag.html\" rel=\"nofollow noreferrer\">perldiag</a>:</p>\n\n<blockquote>\n  <p><strong>Complex regular subexpression recursion limit (%d) exceeded (W regexp)</strong>  </p>\n  \n  <p>The regular expression engine uses recursion in complex situations\n  where back-tracking is required. Recursion depth is limited to 32766,\n  or perhaps less in architectures where the stack cannot grow\n  arbitrarily. (\"Simple\" and \"medium\" situations are handled without\n  recursion and are not subject to a limit.) Try shortening the string\n  under examination; looping in Perl code (e.g. with while ) rather than\n  in the regular expression engine; or rewriting the regular expression\n  so that it is simpler or backtracks less. (See perlfaq2 for\n  information on Mastering Regular Expressions.)</p>\n</blockquote>\n\n<p>Here's a solution you can use:</p>\n\n<pre><code>perl -ne'\n   if (/^\\d+\\n) { $buf = $_; next; }\n   print(substr($buf, 0, -1, \"\"), $_);\n   END { print($buf) }\n'\n</code></pre>\n"}], "owner": {"reputation": 1816, "user_id": 1406686, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/kJecO.jpg?s=128&g=1", "display_name": "Dejan Jovanovi\u0107", "link": "https://stackoverflow.com/users/1406686/dejan-jovanovi%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 1, "accepted_answer_id": 52615196, "answer_count": 1, "score": 3, "last_activity_date": 1538594395, "creation_date": 1538495907, "last_edit_date": 1538496707, "question_id": 52612121, "link": "https://stackoverflow.com/questions/52612121/how-to-keep-the-last-consecutive-line-that-matches-with-perl", "title": "How to keep the last consecutive line that matches with Perl", "body": "<p>I'm trying to match consecutive similar lines in a text file, and only keep the last one. Each line contains a numeric count, so I am matching the text and the digits to get the count.</p>\n\n<p>For example, if I have a lot of consecutive lines with character 'a', I've managed to do it as follows.</p>\n\n<pre><code>$ (for i in `seq 1 1 100000`; do echo a; done;) | \n    perl -0777 -pe 's/(a\\n)*(a\\n)/\\2/igs'\na\n</code></pre>\n\n<p>But if I use it with an additional match for digits, perl seems to do it in batches of 2^15.</p>\n\n<pre><code>$ (for i in `seq 1 1 100000`; do echo $i; done;) | \n    perl -0777 -pe 's/(\\d*\\n)*(\\d*\\n)/\\2/igs'\n32768\n65536\n98304\n100000\n</code></pre>\n\n<p>Am I doing something wrong, is this a bug in perl, or is it documented somewhere? What's the best way to do it?</p>\n\n<p>I am using perl 5.22.1.</p>\n"}, {"tags": ["windows", "bash", "perl", "command-line", "cmd"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1538494560, "creation_date": 1538494560, "answer_id": 52611725, "question_id": 52611604, "link": "https://stackoverflow.com/questions/52611604/executing-perl-script-from-windows-command-line-with-2-entry/52611725#52611725", "title": "Executing Perl script from windows-command line with 2 entry", "body": "<p>Program (or script) parameters are stored in the @ARGV array. <a href=\"http://p3rl.org/shift\" rel=\"nofollow noreferrer\">shift</a> and <a href=\"http://p3rl.org/pop\" rel=\"nofollow noreferrer\">pop</a> without any parameter will work on @ARGV when used outside of a sub, in a sub they operate on @_.</p>\n\n<p>See <a href=\"http://p3rl.org/Archive::Zip\" rel=\"nofollow noreferrer\">Archive::Zip</a> for zip file handling.</p>\n"}], "owner": {"reputation": 21, "user_id": 8177354, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154430575681916/picture?type=large", "display_name": "Ramzi Houhou", "link": "https://stackoverflow.com/users/8177354/ramzi-houhou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 497, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1538494560, "creation_date": 1538494146, "question_id": 52611604, "link": "https://stackoverflow.com/questions/52611604/executing-perl-script-from-windows-command-line-with-2-entry", "title": "Executing Perl script from windows-command line with 2 entry", "body": "<p>this is my Perl script</p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::Twig;\nuse Data::Dumper;\n\nsub xml2array{\nmy $path = shift; \nmy $twig = XML::Twig-&gt;new-&gt;parsefile($path); \nreturn map { $_ -&gt; att('VirtualPath') } $twig -&gt; get_xpath('//Signals');\n} \n\nsub compareMappingToArray {\nmy $mapping = shift;\nmy $signalsRef = shift; \nmy $i = 1;\n\nprint \"In file : $mapping\\n\";\n\nopen(my $fh, $mapping);\nwhile (my $r = &lt;$fh&gt;) {\n    chomp $r; \n\n\n    if ($r =~ /\\'(ModelSpecific.*)\\'/) {\n        my $s = $1;\n\n\n        my @matches = grep { /^$s$/ } @{$signalsRef};\n\n        print \"line $i : not found - $s\\n\" if scalar @matches ==0;\n        print \"line $i : multiple $s\\n\" if scalar @matches &gt; 1;\n    }\n\n    $i = $i + 1 # keep line index\n }\n}\n\nmy $mapping = \"C:/Users/HOR1DY/Desktop/Global/TA_Mapping/CAN/CAN_ESP_002_mapping.pm\";      \nmy @virtualpath = xml2array(\"SignalModel.xml\");\ncompareMappingToArray($mapping,  \\@virtualpath);\n</code></pre>\n\n<p>The script works well, the aim of it is to compare the file \"SignalModel.xml\" and \"CAN_ESP_002_mapping.pm\" and putting the lines that didn't matches in a .TXT file. Here is how the .TXT file looks like:</p>\n\n<pre><code>In file : C:/Users/HOR1DY/Desktop/Global/TA_Mapping/CAN/CAN_ESP_002_mapping.pm\nline 331 : not found - ModelSpecific.EID.NET.CAN_Engine.VCU.Transmit.VCU_202.R2B_VCU_202__byte_3\nline 348 : not found - ModelSpecific.EID.NET.CAN_Engine.CMM_WX.Transmit.CMM_HYB_208.R2B_CMM_HYB_208__byte_2\nline 368 : not found - ModelSpecific.EID.NET.CAN_Engine.VCU.Transmit.VCU_222.R2B_VCU_222__byte_0\n</code></pre>\n\n<p>But for this script, I put the two files that need to be compare inside of the code and instead of doing that, I would like to run the script in windows cmd line and having something like:</p>\n\n<pre><code>C:\\Users&gt;perl CANMappingChecker.pl -'file 1' 'file 2'\n</code></pre>\n\n<p>All the files are in .zip file so if I can execute the script that he goes inside and take the 2 files that I need for comparison, it should be perfect.\nI really don't know how to do and what to put inside my script to make that in the cmd windows. Thanks for your help !</p>\n"}, {"tags": ["perl", "parsing", "path"], "comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 1, "creation_date": 1538482873, "post_id": 52608068, "comment_id": 92150444, "body": "you can use the URI module to parse a URL into it&#39;s component parts. Check it&#39;s documentation"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1538484972, "post_id": 52608068, "comment_id": 92151620, "body": "The <i>path</i> part of the given URI is <code>&#47;hello&#47;ok&#47;fl.jpg</code>."}], "answers": [{"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 5, "last_activity_date": 1538490953, "last_edit_date": 1538490953, "creation_date": 1538490553, "answer_id": 52610505, "question_id": 52608068, "link": "https://stackoverflow.com/questions/52608068/perl-get-the-site-path/52610505#52610505", "title": "Perl get the site path", "body": "<p>Here's <a href=\"https://mojolicious.org\" rel=\"noreferrer\">Mojolicious</a>. The <code>path</code> method returns a <a href=\"https://mojolicious.org/perldoc/Mojo/Path\" rel=\"noreferrer\">Mojo::Path</a> object that you can manipulate:</p>\n\n<pre><code>use Mojo::URL;\nmy $url = \"http://example.org/hello/ok/fl.jpg\";\nsay Mojo::URL-&gt;new( $url )-&gt;path-&gt;to_dir;\n</code></pre>\n\n<p>And here's <a href=\"https://metacpan.org/pod/URI\" rel=\"noreferrer\">URI</a>, which is the same at the start but returns the path as a string. You can get the segments then take off the last one. Replacing it with the empty string then <code>join</code>ing with the <code>/</code> gives you the trailing slash:</p>\n\n<pre><code>use URI;\nmy $url = \"http://example.org/hello/ok/fl.jpg\";\nmy @segments = URI-&gt;new( $url )-&gt;path_segments;\n$segments[-1] = '';\nsay join '/', @segments;\n</code></pre>\n"}], "owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538490953, "creation_date": 1538482252, "question_id": 52608068, "link": "https://stackoverflow.com/questions/52608068/perl-get-the-site-path", "title": "Perl get the site path", "body": "<p>I want to knew how to parse the path from a site\nex :</p>\n\n<pre><code>http://example.org/hello/ok/fl.jpg\n</code></pre>\n\n<p>is there a way to parse this part (path)</p>\n\n<pre><code>/hello/ok/\n</code></pre>\n"}, {"tags": ["perl", "https", "http-status-codes"], "comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 2, "creation_date": 1538481747, "post_id": 52607809, "comment_id": 92149847, "body": "How much control do you have over www.otherpage.com, can you set it up to allow https requests?"}, {"owner": {"reputation": 73, "user_id": 1231247, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1c38ef4f068a61349edcfc0df5451473?s=128&d=identicon&r=PG", "display_name": "user1231247", "link": "https://stackoverflow.com/users/1231247/user1231247"}, "reply_to_user": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1538481878, "post_id": 52607809, "comment_id": 92149914, "body": "I have full control over the www.otherpage.com. The otherpage has no HTTPS/SSL certificate."}], "answers": [{"tags": [], "owner": {"reputation": 74, "user_id": 4109113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88acb982d7434e525fb84036d8dd74fa?s=128&d=identicon&r=PG&f=1", "display_name": "bislinks", "link": "https://stackoverflow.com/users/4109113/bislinks"}, "is_accepted": false, "score": 2, "last_activity_date": 1538482281, "creation_date": 1538482281, "answer_id": 52608077, "question_id": 52607809, "link": "https://stackoverflow.com/questions/52607809/run-perl-script-from-another-webpage/52608077#52608077", "title": "run perl script from another webpage", "body": "<p>You can use Lets Encrypt to get valid SSL certificates for both domains.</p>\n\n<p>You should look into CORS, <a href=\"https://en.wikipedia.org/wiki/Cross-origin_resource_sharing\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Cross-origin_resource_sharing</a></p>\n"}], "owner": {"reputation": 73, "user_id": 1231247, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1c38ef4f068a61349edcfc0df5451473?s=128&d=identicon&r=PG", "display_name": "user1231247", "link": "https://stackoverflow.com/users/1231247/user1231247"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1538482281, "creation_date": 1538481263, "last_edit_date": 1538481973, "question_id": 52607809, "link": "https://stackoverflow.com/questions/52607809/run-perl-script-from-another-webpage", "title": "run perl script from another webpage", "body": "<p>I need to run a perl script from another www page without causing warning for non-secure content.\nI have SSL https secured www page: <a href=\"https://www.whatever.com\" rel=\"nofollow noreferrer\">https://www.whatever.com</a> in which index.htm has a line:</p>\n\n<pre><code>&lt;img src=\"http://www.otherpage.com/myperl.pl?param1=hello\"&gt;\n</code></pre>\n\n<p>The myperl.pl is a simple log counter - it is not loading anything. On the www.otherpage.com it just creates a log file. The www.otherpage.com has no SSl certifcate but www.whatever.com has.</p>\n\n<p>How do I run the script so that the \"padlock\" icon stays green?</p>\n"}, {"tags": ["xml", "perl"], "answers": [{"comments": [{"owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "edited": false, "score": 1, "creation_date": 1538475822, "post_id": 52606417, "comment_id": 92146854, "body": "Almost! Now I get <code>&lt;?merge  subdocs = 0 :sheet1-01.xml?&#47;&gt;</code> so the ending <code>&#47;</code> is the problem now which makes sense as elements have an ending <code>&#47;</code>."}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 1, "last_activity_date": 1538478052, "last_edit_date": 1538478052, "creation_date": 1538475601, "answer_id": 52606417, "question_id": 52606312, "link": "https://stackoverflow.com/questions/52606312/xml-twig-insert-processing-instruction-before-matched-tag-in-xml-file/52606417#52606417", "title": "XML Twig insert processing instruction before matched tag in XML file", "body": "<p>Remove the <code>&lt;</code> and <code>&gt;</code> from  <code>&lt;?merge  subdocs = 0 :sheet1-01.xml?&gt;</code> it appears that XML::Twig adds them for you.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Modify your <code>insert_new_elt</code> call to this</p>\n\n<pre><code>$nodes[0]-&gt;insert_new_elt('before', '#PI' =&gt;'merge  subdocs = 0 :sheet1-01.xml')\n</code></pre>\n\n<p>I think this should work as you want</p>\n"}, {"tags": [], "owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "is_accepted": false, "score": 0, "last_activity_date": 1538479899, "creation_date": 1538479899, "answer_id": 52607519, "question_id": 52606312, "link": "https://stackoverflow.com/questions/52606312/xml-twig-insert-processing-instruction-before-matched-tag-in-xml-file/52607519#52607519", "title": "XML Twig insert processing instruction before matched tag in XML file", "body": "<p>Found it!! To do what I want I used the following code:</p>\n\n<pre><code>$nodes[0]-&gt;insert_new_elt( before =&gt; '#PI', 'merge  subdocs = 0 :sheet1-01.xml');\n</code></pre>\n\n<p>which inserts</p>\n\n<pre><code>&lt;?merge  subdocs = 0 :sheet1-01.xml?&gt;\n</code></pre>\n\n<p>as a processing instruction in the correct location</p>\n"}], "owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 52606417, "answer_count": 2, "score": 0, "last_activity_date": 1538479899, "creation_date": 1538475290, "question_id": 52606312, "link": "https://stackoverflow.com/questions/52606312/xml-twig-insert-processing-instruction-before-matched-tag-in-xml-file", "title": "XML Twig insert processing instruction before matched tag in XML file", "body": "<p>I have an xml document that contains a number of tags. I would like to replace one of these tags with a processing instruction of the form:</p> \n\n<pre><code>&lt;?merge  subdocs = 0 :sheet1-01.xml?&gt;.\n</code></pre>\n\n<p>However if  use the code:</p>\n\n<pre><code>$nodes[0]-&gt;insert_new_elt('before',=&gt;'&lt;?merge  subdocs = 0 :sheet1-01.xml?&gt;')\n</code></pre>\n\n<p>where the tag I want to replace is contained within the variable $nodes[0] the result in the xml file is:</p>\n\n<pre><code> &lt;&lt;?merge  subdocs = 0 :sheet1-01.xml?&gt;/&gt;\n</code></pre>\n\n<p>Which is clearly not what I want! I have searched the help pages of XML Twig and have found references to processing tags but cannot work out how to insert them in my xml document! Is it possible with XML Twig and if so how?</p>\n\n<p>P.S. Forgot to mention that I am currently loading the entire XML file into memory and not using twig handlers.</p>\n\n<p>Any help much appreciated.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 3, "last_activity_date": 1538465957, "last_edit_date": 1538465957, "creation_date": 1538464903, "answer_id": 52603674, "question_id": 52603511, "link": "https://stackoverflow.com/questions/52603511/loop-is-not-ending-in-perl/52603674#52603674", "title": "Loop is not ending in perl", "body": "<pre><code>$incr=0.25;\n...\n$dihed=14.25;\nwhile ($dihed &lt;= 18.0) {\n    if ($dihed != 16.0) {\n        $dihed += $incr;\n    }\n    ...\n}\n</code></pre>\n\n<p>This loop starts with <code>$dihed</code> being <code>14.25</code> and you increment it in each step by <code>$incr</code> being 0.25. This way <code>$dihed</code> will eventually reach <code>16.0</code>.  This case is explicitly handled in your code so that it does not increase <code>$dihed</code>, which means <code>$dihed</code> will always stay <code>16.0</code> from then on and your code will loop forever.</p>\n\n<p>Given the description of what your output should be (i.e. that it should ignore the <code>16.0</code>) it is more likely that your code should instead always increment but skip the output for <code>16.0</code>:</p>\n\n<pre><code>$incr=0.25;\n...\n$dihed=14.25;\nwhile ($dihed &lt;= 18.0) {\n    $dihed += $incr;\n    if ($dihed == 16.0) {\n        next; # skip output for 16.0\n    }\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8171849, "user_type": "registered", "profile_image": "https://graph.facebook.com/2269780149914388/picture?type=large", "display_name": "sacky0003", "link": "https://stackoverflow.com/users/8171849/sacky0003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 52603674, "answer_count": 1, "score": 0, "last_activity_date": 1538465957, "creation_date": 1538464227, "last_edit_date": 1538464883, "question_id": 52603511, "link": "https://stackoverflow.com/questions/52603511/loop-is-not-ending-in-perl", "title": "Loop is not ending in perl", "body": "<p>I want this kind of output:</p>\n\n<pre>\njob cpu-param-14.25.sh \njob gpu-param-14.25.sh\n..\n..\njob cpu-param-15.75.sh \njob gpu-param-15.75.sh\n\njob cpu-param-16.25.sh \njob gpu-param-16.25.sh\n..\njob cpu-param-18.sh \njob gpu-param-18.sh\n</pre>\n\n<p>This is my code:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\n$incr=0.25;\n\nmy $filename = 'job-submit-14.25-18.sh';\n\nopen (my $BATCHFILE, '&gt;', \"$filename\");\n\n$dihed=14.25;\nwhile ($dihed &lt;= 18.0) {\n    if ($dihed != 16.0) {\n        $dihed += $incr;\n    }\n\n    print $BATCHFILE\n    \"\n    job cpu-param-$dihed.sh \n    job gpu-param-$dihed.sh\n    \"\n}\n\nclose ($BATCHFILE);\n</code></pre>\n\n<p>Please help me out.</p>\n"}, {"tags": ["perl", "mojolicious"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1538472092, "post_id": 52605005, "comment_id": 92145091, "body": "Welcome to Stack Overflow! :)"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1538498218, "post_id": 52605005, "comment_id": 92159897, "body": "You can do this in the getopt function from Mojo::Util (it&#39;s just a wrapper): <code>getopt \\@args, [&#39;pass_through&#39;], ...;</code>"}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 1, "last_activity_date": 1538470252, "creation_date": 1538470252, "answer_id": 52605005, "question_id": 52603186, "link": "https://stackoverflow.com/questions/52603186/how-can-i-subclass-a-minion-command-with-getopt/52605005#52605005", "title": "How can I subclass a Minion command with getopt?", "body": "<p>The calls to <code>getopt</code> are not composable. You can try to handle (and then pass on) all options that your superclass handles as well, or call <a href=\"https://metacpan.org/pod/Getopt::Long\" rel=\"nofollow noreferrer\">Getopt::Long</a> yourself with the <code>pass_through</code> option. This will ignore all unknown options:</p>\n\n<pre><code>package Minion::Command::minion::secure_worker;\n\nuse Mojo::Base 'Minion::Command::minion::worker';\nuse Getopt::Long 'GetOptionsFromArray';\nuse Getopt::Long ':config', 'pass_through';\n\nsub run {\n    my ( $self, @args ) = @_;\n\n    my $worker = $self-&gt;app-&gt;minion-&gt;worker;\n    my $status = $worker-&gt;status;\n\n    GetOptionsFromArray \\@args,\n    'U|username=s' =&gt; \\my $username,\n    'P|password=s' =&gt; \\my $password;\n\n    $self-&gt;app-&gt;credentials-&gt;{username} = $username;\n    $self-&gt;app-&gt;credentials-&gt;{password} = $password;\n\n    return $self-&gt;SUPER::run;\n}\n\n1\n</code></pre>\n"}], "owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 52605005, "answer_count": 1, "score": 4, "last_activity_date": 1538546875, "creation_date": 1538462592, "last_edit_date": 1538546875, "question_id": 52603186, "link": "https://stackoverflow.com/questions/52603186/how-can-i-subclass-a-minion-command-with-getopt", "title": "How can I subclass a Minion command with getopt?", "body": "<p>One of the tasks in a <a href=\"https://mojolicious.org/perldoc/Minion\" rel=\"nofollow noreferrer\">Minion</a> job queue I am using needs user and password.</p>\n\n<p>I found a good description on how to pass parameters to a Mojo app <a href=\"https://stackoverflow.com/questions/42390960/how-can-i-take-credentials-from-the-command-line-in-a-mojolicious-app\">here</a> so I went about it like this:</p>\n\n<pre><code>package Minion::Command::minion::secure_worker;\n\nuse Mojo::Base 'Minion::Command::minion::worker';\nuse Mojo::Util 'getopt';\n\nsub run {\n    my ( $self, @args ) = @_;\n\n    my $worker = $self-&gt;app-&gt;minion-&gt;worker;\n    my $status = $worker-&gt;status;\n\n    getopt \\@args,\n    'U|username=s' =&gt; \\my $username,\n    'P|password=s' =&gt; \\my $password;\n\n    $self-&gt;app-&gt;credentials-&gt;{username} = $username;\n    $self-&gt;app-&gt;credentials-&gt;{password} = $password;\n\n    return $self-&gt;SUPER::run;\n}\n\n1\n</code></pre>\n\n<p>However when I try to pass options that were in the original worker command - such as <code>-j</code> I get:</p>\n\n<pre><code>Unknown option: j\n</code></pre>\n\n<p>Why is that? It looks like subclassing a command doesn't work, or that getopt slurps everything?</p>\n"}, {"tags": ["multithreading", "perl", "settimeout"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1538433641, "post_id": 52599740, "comment_id": 92134127, "body": "Re &quot;<i>not great anyway in Perl</i>&quot;, Nah, that warning simply means you need to be aware that the threads are heavy to create."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538433882, "post_id": 52599740, "comment_id": 92134197, "body": "That sounds not great to me. Also, it&#39;s more than that: it doesn&#39;t share variables by default, and many CPAN modules are not thread safe because threads are not widely used for these reasons."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1538434114, "post_id": 52599740, "comment_id": 92134270, "body": "That&#39;s all misinformation as well. 1) The fact that Perl variables aren&#39;t shared by default is irrelevant. If anything, it makes threads safer use than event loops like yours. As a programmer, you should be striving to reduce <a href=\"https://en.wikipedia.org/wiki/Coupling_(computer_programming)\" rel=\"nofollow noreferrer\">coupling</a> 2) Threads are very widely used. 3) The reason XS modules often don&#39;t support threads are for the opposite reason that you gave: The author didn&#39;t put in the effort to make it thread-safe, something that needs to be done because C vars <i>are</i> shared by default."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1538434332, "post_id": 52599740, "comment_id": 92134328, "body": "I don&#39;t wish to have a political argument with you. The fact that threads in Perl can be used correctly doesn&#39;t preclude them from being the biggest noob trap."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1538434391, "post_id": 52599740, "comment_id": 92134344, "body": "I don&#39;t see how that&#39;s possible. The whole reason the warning exists is because people on some IRC channel got tired of answering threads question. That never made sense because the alternatives (such as the IO loops you recommends) are so much more complex and error-prone."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538434781, "post_id": 52599740, "comment_id": 92134434, "body": "Event loops are not an alternative, they are the correct way to wait on many I/O operations and timeouts at once. Threads are the correct way to perform multiple operations at once without forking. They are, however, incredibly obtuse to debug for reasons both related and unrelated to Perl&#39;s particular implementation. I invite you to join IRC and help all of the newbies try to use threads for trivial I/O tasks since we are so unwilling."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1538434814, "post_id": 52599740, "comment_id": 92134440, "body": "The OP didn&#39;t say anything about doing many IO ops at once. /// What makes you think I don&#39;t help people with their thread questions??"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538447231, "post_id": 52599740, "comment_id": 92136806, "body": "@Grinnz OK, I see that you don&#39;t like threads in Perl (or otherwise so it seems). What I don&#39;t get is: do you actually recommend event-based programming to the &quot;newbies&quot;?  Btw, ikegami has been a fantastic resource on threads (as on many, many other topics). You can piece together an &quot;all-you-want-to-know&quot; coverage from their answers and comments (here and elsewhere)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538448725, "post_id": 52599740, "comment_id": 92137091, "body": "@Grinnz The above is mostly about this comment thread. I think that the post is fair (apart from the comment on threads), in this case. But good     luck to the uninitiated with understanding subtleties of future/promise workings, not to mention the event-based concepts and practice."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538452550, "post_id": 52599740, "comment_id": 92137811, "body": "@zdim I haven&#39;t disputed any of that. And yes, I do recommend event-based programming to newbies when it&#39;s an appropriate solution, sure there&#39;s a learning curve but it&#39;s not like threading is a simple concept with no gotchas either; there&#39;s no getting around that asynchronous programming is unintuitive to start with. I only recently started posting here, but I&#39;m happy to help anyone gain a better understanding, but I won&#39;t recommend Perl threads and don&#39;t have the experience to help anyone with them."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 2, "last_activity_date": 1538433726, "last_edit_date": 1538433726, "creation_date": 1538432943, "answer_id": 52599740, "question_id": 52599496, "link": "https://stackoverflow.com/questions/52599496/achieve-js-settimeout-functionality-in-perl/52599740#52599740", "title": "achieve js setTimeout functionality in perl", "body": "<p>There's no need for threads, and they're <a href=\"https://perldoc.pl/threads#WARNING\" rel=\"nofollow noreferrer\">not great anyway in Perl</a>. You can use an event loop just like JavaScript does, there's just not any in the Perl core. Two popular and well supported event loop ecosystems are <a href=\"https://metacpan.org/pod/IO::Async\" rel=\"nofollow noreferrer\">IO::Async</a> and <a href=\"https://metacpan.org/pod/Mojo::IOLoop\" rel=\"nofollow noreferrer\">Mojo::IOLoop</a> (the event loop behind the Mojolicious web framework). The main difference is that unlike in JavaScript, the event loop isn't running until something starts it.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse IO::Async::Loop;\nprint \"Event 1 occurred\\n\";\nmy $future = IO::Async::Loop-&gt;new-&gt;delay_future(after =&gt; 3)-&gt;on_done(sub { print \"3 seconds elapsed\\n\" });\nprint \"Event 2 occurred\\n\";\n$future-&gt;await; # run event loop until Future has been resolved\n\nuse strict;\nuse warnings;\nuse Mojo::IOLoop;\nprint \"Event 1 occurred\\n\";\nMojo::IOLoop-&gt;timer(3 =&gt; sub { print \"3 seconds elapsed\\n\" });\nprint \"Event 2 occurred\\n\";\nMojo::IOLoop-&gt;start; # run event loop until no more events to wait for\n</code></pre>\n\n<p>Check out the <a href=\"https://metacpan.org/pod/Mojolicious::Guides::Cookbook#CONCEPTS\" rel=\"nofollow noreferrer\">Mojolicious cookbook</a> for a very high level overview of event loops and non-blocking code.</p>\n"}, {"tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 0, "last_activity_date": 1538463478, "last_edit_date": 1538463478, "creation_date": 1538433041, "answer_id": 52599752, "question_id": 52599496, "link": "https://stackoverflow.com/questions/52599496/achieve-js-settimeout-functionality-in-perl/52599752#52599752", "title": "achieve js setTimeout functionality in perl", "body": "<p>See the <a href=\"http://perldoc.perl.org/functions/alarm.html\" rel=\"nofollow noreferrer\">alarm</a> function. Otherwise, consider looking at <a href=\"https://metacpan.org/pod/threads\" rel=\"nofollow noreferrer\">threads.pm</a> or , if you want to get feature parity with Javascript, one of the event loops, like <a href=\"https://metacpan.org/pod/AnyEvent\" rel=\"nofollow noreferrer\">AnyEvent</a> or <a href=\"https://metacpan.org/pod/Mojo::IOLoop\" rel=\"nofollow noreferrer\">Mojo::IOLoop</a> or <a href=\"https://metacpan.org/pod/IO::Async\" rel=\"nofollow noreferrer\">IO::Async</a>.</p>\n\n<p>With threads , your example would be:</p>\n\n<pre><code>use strict;\nuse threads;\nprint(\"Event 1 occured\\n\");\nasync {\n    sleep 3;\n    print \"3 seconds elapsed\\n\";\n};\nprint(\"Event 2 occured\\n\");\n$_-&gt;join for threads-&gt;list; # to wait until all threads have finished\n</code></pre>\n"}], "owner": {"reputation": 679, "user_id": 184437, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/4c2d960fbf51e8e9d145f0c223f93863?s=128&d=identicon&r=PG", "display_name": "smokinguns", "link": "https://stackoverflow.com/users/184437/smokinguns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 1, "accepted_answer_id": 52599752, "answer_count": 2, "score": 1, "last_activity_date": 1538463478, "creation_date": 1538431431, "question_id": 52599496, "link": "https://stackoverflow.com/questions/52599496/achieve-js-settimeout-functionality-in-perl", "title": "achieve js setTimeout functionality in perl", "body": "<p>How do I achieve Javascript setTimeout functionality in Perl? This is the piece of javascript code I'm trying to write in Perl. Is this possible using threads?  </p>\n\n<pre><code>alert(\"Event 1 occured\");\nsetTimeout(function(){ alert(\"3 seconds elapsed\"); }, 3000);\nalert(\"Event 2 occured\");\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code> Event 1 occured\n Event 2 occured\n 3 seconds elapsed\n</code></pre>\n\n<p>I have perl 5.18.2 and I'm on Mac OSX</p>\n"}, {"tags": ["regex", "perl", "numbers"], "comments": [{"owner": {"reputation": 733, "user_id": 5354727, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Ufo0p.png?s=128&g=1", "display_name": "TiredOfProgramming", "link": "https://stackoverflow.com/users/5354727/tiredofprogramming"}, "edited": false, "score": 0, "creation_date": 1538431310, "post_id": 52599437, "comment_id": 92133524, "body": "why downvoting?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1538434357, "post_id": 52599437, "comment_id": 92134340, "body": "So... you have one JSON object with a bunch of duplicate keys?"}, {"owner": {"reputation": 733, "user_id": 5354727, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Ufo0p.png?s=128&g=1", "display_name": "TiredOfProgramming", "link": "https://stackoverflow.com/users/5354727/tiredofprogramming"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1538435070, "post_id": 52599437, "comment_id": 92134491, "body": "@MattJacob exactly sir"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 4, "creation_date": 1538435159, "post_id": 52599437, "comment_id": 92134505, "body": "That&#39;s not valid JSON. Keys must be unique in an object."}, {"owner": {"reputation": 733, "user_id": 5354727, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Ufo0p.png?s=128&g=1", "display_name": "TiredOfProgramming", "link": "https://stackoverflow.com/users/5354727/tiredofprogramming"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1538435348, "post_id": 52599437, "comment_id": 92134549, "body": "@MattJacob updated my original question"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1538436009, "post_id": 52599437, "comment_id": 92134693, "body": "Are you sure it&#39;s not like <code>&quot;notes&quot;: [{&quot;note&quot;: &quot;&quot;}, {&quot;note&quot;: &quot;&quot;}, ...]</code>? That would actually make sense."}, {"owner": {"reputation": 733, "user_id": 5354727, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Ufo0p.png?s=128&g=1", "display_name": "TiredOfProgramming", "link": "https://stackoverflow.com/users/5354727/tiredofprogramming"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1538436800, "post_id": 52599437, "comment_id": 92134865, "body": "yes exactly this is how it looks"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1538439850, "post_id": 52599437, "comment_id": 92135420, "body": "You&#39;re saying the format is what you put in the question and also what I put in my comment above, but they&#39;re different."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538435806, "post_id": 52599778, "comment_id": 92134653, "body": "Since the JSON has duplicate keys, this will either lose the value or die before it even gets decoded. There&#39;s no correct way to parse a JSON object like this."}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": 0, "last_activity_date": 1538433275, "creation_date": 1538433275, "answer_id": 52599778, "question_id": 52599437, "link": "https://stackoverflow.com/questions/52599437/regex-match-only-line-where-numbers-are-located/52599778#52599778", "title": "Regex: match only line where numbers are located", "body": "<p>If you have JSON, why don't you parse the JSON and then grep through the result?</p>\n\n<pre><code>use JSON 'decode_json';\nmy $data = decode_json( $json_text );\nmy @rows = map { /\\b(\\d+)\\b/ ? $1 : () } # keep only the number\n           map { $_-&gt;{note} } @$data;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 733, "user_id": 5354727, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Ufo0p.png?s=128&g=1", "display_name": "TiredOfProgramming", "link": "https://stackoverflow.com/users/5354727/tiredofprogramming"}, "edited": false, "score": 0, "creation_date": 1538444096, "post_id": 52600301, "comment_id": 92136196, "body": "Thanks @Nick a lot. You saved my nerves :-)"}, {"owner": {"reputation": 117184, "user_id": 9473764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aGMXl.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/9473764/nick"}, "reply_to_user": {"reputation": 733, "user_id": 5354727, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Ufo0p.png?s=128&g=1", "display_name": "TiredOfProgramming", "link": "https://stackoverflow.com/users/5354727/tiredofprogramming"}, "edited": false, "score": 0, "creation_date": 1538444309, "post_id": 52600301, "comment_id": 92136235, "body": "No worries. glad I could help"}], "tags": [], "owner": {"reputation": 117184, "user_id": 9473764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aGMXl.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/9473764/nick"}, "is_accepted": true, "score": 1, "last_activity_date": 1538438045, "last_edit_date": 1538438045, "creation_date": 1538437654, "answer_id": 52600301, "question_id": 52599437, "link": "https://stackoverflow.com/questions/52599437/regex-match-only-line-where-numbers-are-located/52600301#52600301", "title": "Regex: match only line where numbers are located", "body": "<p>You could try this regex:</p>\n\n<pre><code>\"note\"\\s*:\\s*\".*?([0-9]++).*\"\n</code></pre>\n\n<p>It will give you the number in group 1 of the match.</p>\n\n<p>If you don't want to match numbers that are part of a word (e.g. \"bug11\") then surround the capture group with word boundary assertions (<code>\\b</code>):</p>\n\n<pre><code>\"note\"\\s*:\\s*\".*?\\b([0-9]++)\\b.*\"\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/9Zf0my/3\" rel=\"nofollow noreferrer\">Regex101 demo</a></p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 0, "last_activity_date": 1538441616, "last_edit_date": 1538441616, "creation_date": 1538441307, "answer_id": 52600693, "question_id": 52599437, "link": "https://stackoverflow.com/questions/52599437/regex-match-only-line-where-numbers-are-located/52600693#52600693", "title": "Regex: match only line where numbers are located", "body": "<p>This might work  <code>(?m-s)^[^\"\\r\\n]*?\"note\"\\h*:\\h*\"[^\"\\r\\n]*?\\d+[^\"\\r\\n]*\".*</code>  </p>\n\n<p><a href=\"https://regex101.com/r/ujDBa9/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/ujDBa9/1</a></p>\n\n<p>Explained  </p>\n\n<pre><code> (?m-s)                        # Multi-line, no dot-all\n ^                             # BOL\n [^\"\\r\\n]*?                    # Not a double quote yet\n \"note\" \\h* : \\h*              # Finally, a note\n \" [^\"\\r\\n]*? \\d+ [^\"\\r\\n]* \"  # Is a number embedded within the quotes ?\n .*                            # Ok, get the rest of the line\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1538470445, "last_edit_date": 1538470445, "creation_date": 1538466286, "answer_id": 52603977, "question_id": 52599437, "link": "https://stackoverflow.com/questions/52599437/regex-match-only-line-where-numbers-are-located/52603977#52603977", "title": "Regex: match only line where numbers are located", "body": "<p>If all that you care about is that the line includes a number, then that is all you need to look for.</p>\n\n<pre><code>/[0-9]/ # matches if the string includes a digit\n</code></pre>\n\n<p>Or, as you want to capture the number:</p>\n\n<pre><code>/([0-9]+)/ # matches (and captures) one or more digits\n</code></pre>\n\n<p>This is a common error that I see when beginners build regular expressions. They want to build a regex that matches the whole string - when, actually, they only need to match the bit of the string that they want to match.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>It might help to explain why some of your other attempts failed.</p>\n\n<pre><code>\"note\"([\\s\\:\\\"a-zA-Z])*([0-9]*) - 6 matches (I only need one) \n</code></pre>\n\n<p>The <code>*</code> means \"match zero or more of the previous item\", effectively making the item optional. This matches all lines as they all contain zero or more digits.</p>\n\n<pre><code>\"note\"([\\s\\:\\\"a-zA-Z])*(^[0-9]*) - no matches\n</code></pre>\n\n<p>The <code>^</code> means \"the next item needs to be at the start of the string\". You don't have digits at the start of your string.</p>\n\n<pre><code>\"note\"([\\s\\:\\\"a-zA-Z])*([0-9]*+?) - pattern error\n</code></pre>\n\n<p>Yeah. You're just adding random punctuation here, aren't you? <code>*+?</code> means nothing to the regex parser.</p>\n\n<pre><code>\"note\"([\\s\\:\\\"a-zA-Z])*(^[0-9]*+#?) - no match \n</code></pre>\n\n<p>This fails for the same reason as the previous attempt where you use <code>^</code> - the digits aren't at the start of the string. Also, the <code>#</code> has no special meaning in a regex, so <code>#?</code> means \"zero or one # characters\".</p>\n"}], "owner": {"reputation": 733, "user_id": 5354727, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Ufo0p.png?s=128&g=1", "display_name": "TiredOfProgramming", "link": "https://stackoverflow.com/users/5354727/tiredofprogramming"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 52600301, "answer_count": 4, "score": -1, "last_activity_date": 1538470445, "creation_date": 1538431106, "last_edit_date": 1538435301, "question_id": 52599437, "link": "https://stackoverflow.com/questions/52599437/regex-match-only-line-where-numbers-are-located", "title": "Regex: match only line where numbers are located", "body": "<p>Really tired of this regex. So many combinations.... I believe I need another brain :-)</p>\n\n<p>Here is my problem and if someone help, I'd be highly appreciated. </p>\n\n<p>I have those 6 lines of JSON response</p>\n\n<pre><code>...some JSON code here\n\n    \"note\" : \"\",\n    \"note\" : \"Here is my note\",\n    \"note\" : \"My note $%$\",\n    \"note\" : \"Created bug 14569 in the system\",\n    \"note\" : \"Another beautiful note\",\n    \"note\" : \"@#$%#@%dgdeg\"\n\n...continuation of the JSON code\n</code></pre>\n\n<p>With the help of Regex, how do I match number <strong>14569</strong> only?</p>\n\n<p>I have tried this regex, but it matches all 6 lines</p>\n\n<pre><code>\"note\"([\\s\\:\\\"a-zA-Z])*([0-9]*) - 6 matches (I only need one) \n\"note\"([\\s\\:\\\"a-zA-Z])*(^[0-9]*) - no matches\n\"note\"([\\s\\:\\\"a-zA-Z])*([0-9]*+?) - pattern error\n\"note\"([\\s\\:\\\"a-zA-Z])*(^[0-9]*+#?) - no match \n</code></pre>\n\n<p>Thanks for you help!</p>\n\n<p>Updated for Matt. Below is my full JSON object</p>\n\n<pre><code>\"response\": {\n        \"notes\": [{\n    \"note\" : \"\",\n    \"note\" : \"Here is my note\",\n    \"note\" : \"My note $%$\",\n    \"note\" : \"Created bug 14569 in the system\",\n    \"note\" : \"Another beautiful note\",\n    \"note\" : \"@#$%#@%dgdeg\"\n        }]\n    } \n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1538428126, "post_id": 52598899, "comment_id": 92132513, "body": "<code>map</code> is something your Perl reference book should be able to explain. Barring that, <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\"><code>map</code></a> is a documented function."}, {"owner": {"reputation": 503, "user_id": 1485889, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b28775c093e89408d6ed09287b6071b5?s=128&d=identicon&r=PG", "display_name": "isevcik", "link": "https://stackoverflow.com/users/1485889/isevcik"}, "edited": false, "score": 1, "creation_date": 1538429043, "post_id": 52598899, "comment_id": 92132819, "body": "<code>map</code> in Perl does almost the same as in other languages - applies a function/expression on each element of collection."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1538459709, "post_id": 52598899, "comment_id": 92139460, "body": "<i>all results that begin with &quot;router&quot;</i> is not <i>a specific hostname</i>. You need to look at how <code>%exclude_hosts</code> is used."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1539065115, "last_edit_date": 1539065115, "creation_date": 1538428359, "answer_id": 52598952, "question_id": 52598899, "link": "https://stackoverflow.com/questions/52598899/how-to-exclude-hostnames-in-perl/52598952#52598952", "title": "How to exclude hostnames in Perl", "body": "<p>That line builds a look-up table, where for each host there is a trivial (<code>1</code>) entry.</p>\n\n<p>The <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\">map</a> builtin takes a list and generates the output list by running the code in the block for each element, available in the <a href=\"https://perldoc.perl.org/perlvar.html#$_\" rel=\"nofollow noreferrer\">special variable</a> <code>$_</code>. The return of the last evaluated statement in the block for each element, what may be one or multiple scalars (or none), is flattened into the list that is eventually returned.</p>\n\n<p>Here you get a pair for each element, the element itself <code>$_</code> and <code>1</code> (the <a href=\"https://perldoc.perl.org/perlop.html#Comma-Operator\" rel=\"nofollow noreferrer\"><code>=&gt;</code> operator</a> is a <code>,</code> that quotes its left-hand side operand). An even-sized list can be assigned to a hash (dictionary), whereby successive elements become key-value pairs. So each host (in <code>$_</code>) becomes a key, with a value <code>1</code>.</p>\n\n<p>Then, to exclude an element either filter the list given to the <code>map</code>\nusing <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\">grep</a></p>\n\n<pre><code>my %exclude_hosts = \n    map { $_ =&gt; 1 } \n    grep { not /^router/ } \n    split(',', $exclude_hosts || '');\n</code></pre>\n\n<p>or do this in <code>map</code> itself</p>\n\n<pre><code>my %exclude_hosts = \n    map { (not /^router/) ? $_ =&gt; 1 : () } \n    split(',', $exclude_hosts || '');\n</code></pre>\n\n<p>where the empty list <code>()</code> gets flattened in the <code>map</code>'s returned list, thus vanishing.</p>\n\n<p>Please see the linked documentation for more detail.</p>\n"}], "owner": {"reputation": 19, "user_id": 7323221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c6dc90e0eb9b23df17ab6864976bb95?s=128&d=identicon&r=PG&f=1", "display_name": "Mara55789", "link": "https://stackoverflow.com/users/7323221/mara55789"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539065115, "creation_date": 1538427957, "last_edit_date": 1538459612, "question_id": 52598899, "link": "https://stackoverflow.com/questions/52598899/how-to-exclude-hostnames-in-perl", "title": "How to exclude hostnames in Perl", "body": "<p>I'm very unfamiliar with perl syntax and am trying to amend an existing script to exclude a specific hostname from the results. </p>\n\n<p>The hostnames are:</p>\n\n<pre><code>router-&lt;something&gt;\nswitch-&lt;something&gt;\n</code></pre>\n\n<p>I'd like to exclude all results that begin with \"router\" from the results.</p>\n\n<p>This line in the existing script states:</p>\n\n<pre><code>    # These are hosts that we don't want to alert about.\n    my %exclude_hosts = map { $_ =&gt; 1 } split(',', $exclude_hosts || '');\n</code></pre>\n\n<p>So two questions:</p>\n\n<ol>\n<li><p>Im trying to understand what \"map\" does in perl and what <code>map { $_ =&gt; 1 }</code>specifically does </p></li>\n<li><p>How would I insert logic into that statement to exclude all hosts that begin with \"router\"?</p></li>\n</ol>\n"}, {"tags": ["arrays", "perl", "sorting", "ldap", "reverse"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1538424361, "post_id": 52597978, "comment_id": 92130923, "body": "Why <code>join</code> followed by <code>split</code>? Why not <code>@x2 = reverse @x1</code> and <code>@x4 = reverse @x3</code>?"}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1538425707, "post_id": 52597978, "comment_id": 92131490, "body": "If I may attempt to simplify your question: Is your goal, given <code>s=Dam,a=AMS,c=NL</code>, to extract all other array elements that contain <code>s=Dam</code>?"}, {"owner": {"reputation": 23, "user_id": 10442778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6450ac28433e938b0c53b5c1b1857570?s=128&d=identicon&r=PG&f=1", "display_name": "Gever", "link": "https://stackoverflow.com/users/10442778/gever"}, "edited": false, "score": 0, "creation_date": 1538508571, "post_id": 52597978, "comment_id": 92164583, "body": "&quot;@x4 = reverse @x3&quot; reverses the array, not the strings in the array"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10442778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6450ac28433e938b0c53b5c1b1857570?s=128&d=identicon&r=PG&f=1", "display_name": "Gever", "link": "https://stackoverflow.com/users/10442778/gever"}, "edited": false, "score": 0, "creation_date": 1538509064, "post_id": 52598144, "comment_id": 92164782, "body": "Great! This was what I was looking for: reverse the items in each string in the array. And I learned something on Schwartzian transform coding."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 23, "user_id": 10442778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6450ac28433e938b0c53b5c1b1857570?s=128&d=identicon&r=PG&f=1", "display_name": "Gever", "link": "https://stackoverflow.com/users/10442778/gever"}, "edited": false, "score": 0, "creation_date": 1538510079, "post_id": 52598144, "comment_id": 92165224, "body": "Because I used the default <code>sort</code> function (which is more efficient than providing your own), this specific type of ST is called a GRT."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1538424720, "last_edit_date": 1538424720, "creation_date": 1538424359, "answer_id": 52598144, "question_id": 52597978, "link": "https://stackoverflow.com/questions/52597978/how-to-reverse-sort-an-array-sort-starts-on-the-end-of-the-line/52598144#52598144", "title": "How to reverse sort an array, sort starts on the end of the line", "body": "<pre><code>sub reverse_terms { join ',', reverse split /,/, $_[0] }\n\nmy @sorted =\n   map reverse_terms($_),\n   reverse sort\n   map reverse_terms($_),\n   @unsorted;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use Sort::Key qw( rkeysort );\n\nmy @sorted = rkeysort { join ',', reverse split /,/ } @unsorted;\n</code></pre>\n\n<hr>\n\n<p>The above solutions transform</p>\n\n<pre><code>s=Dam,a=AMS,c=NL\nnr=1,s=Dam,a=AMS,c=NL\n</code></pre>\n\n<p>into</p>\n\n<pre><code>c=NL,a=AMS,s=Dam\nc=NL,a=AMS,s=Dam,nr=1\n</code></pre>\n\n<p>Then, they sort the transformed strings in descending order. This causes the children to appear before the parents.</p>\n\n<pre><code>c=NL,a=AMS,s=Dam,nr=1\nc=NL,a=AMS,s=Dam\n</code></pre>\n\n<p>Finally, it's just a question of transforming the string back (or returning the original string, in the case of <code>rkeysort</code>).</p>\n"}], "owner": {"reputation": 23, "user_id": 10442778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6450ac28433e938b0c53b5c1b1857570?s=128&d=identicon&r=PG&f=1", "display_name": "Gever", "link": "https://stackoverflow.com/users/10442778/gever"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 52598144, "answer_count": 1, "score": 1, "last_activity_date": 1538424720, "creation_date": 1538423569, "question_id": 52597978, "link": "https://stackoverflow.com/questions/52597978/how-to-reverse-sort-an-array-sort-starts-on-the-end-of-the-line", "title": "How to reverse sort an array, sort starts on the end of the line", "body": "<p>I have a bunch of addresses in an LDAP database and want to remove a street. For this I have to remove the houses first. LDAP database output is not sorted</p>\n\n<pre><code>my @x1=(\"c=NL\",\n        \"nr=1,s=Dam,a=AMS,c=NL\",\n        \"s=Dam,a=AMS,c=NL\",\n        \"a=AMS,c=NL\",\n        \"nr=3,s=Plein,a=AMS,c=NL\",\n        \"s=Plein,a=AMS,c=NL\",\n        \"nr=2,s=Dam,a=AMS,c=NL\"   );\n</code></pre>\n\n<p>Before we can remove 's=Dam' we have to remove 'nr=1,s=Dam,a=AMS,c=NL' and \"nr=2,s=Dam,a=AMS,c=NL\" first, before we can remove \"s=Dam,a=AMS,c=NL\"</p>\n\n<p>The direction I choose was sorting the lines from the end to the front, so first \"c=NL\", then \"a=AMS\" and so on. And then running through the array if it contained \"s=Dam,a=AMS,c=NL\".</p>\n\n<p>As a result should look,like:</p>\n\n<blockquote>\n<pre><code>    'nr=2,s=Dam,a=AMS,c=NL'\n    'nr=1,s=Dam,a=AMS,c=NL'\n    's=Dam,a=AMS,c=NL'\n</code></pre>\n</blockquote>\n\n<p>I added Data::Dumper in the code to show what happens</p>\n\n<pre><code>    my @x1=(\"c=NL\",\n            \"nr=1,s=Dam,a=AMS,c=NL\",\n            \"s=Dam,a=AMS,c=NL\",\n            \"a=AMS,c=NL\",\n            \"nr=3,s=Plein,a=AMS,c=NL\",\n            \"s=Plein,a=AMS,c=NL\",\n            \"nr=2,s=Dam,a=AMS,c=NL\"   );\n    print Data::Dumper-&gt;Dump([\\@x1],['*x1']);\n\n    my @x2=split( \"\\n\", reverse join (\"\\n\", @x1));\n    print Data::Dumper-&gt;Dump([\\@x2],['*x2']);\n\n    my @x3=sort @x2;\n    print Data::Dumper-&gt;Dump([\\@x3],['*x3']);\n\n    my @x4=split( \"\\n\", reverse join (\"\\n\", @x3));\n    print Data::Dumper-&gt;Dump([\\@x4],['*x4']);\n\n    foreach (@x4) {\n      # if matches from the rear: \"s=Dam,a=AMS,c=NL\", do stuff\n    }\n</code></pre>\n\n<p>this is the result</p>\n\n<pre><code>@x1 = (\n        'c=NL',\n        'nr=1,s=Dam,a=AMS,c=NL',\n        's=Dam,a=AMS,c=NL',\n        'a=AMS,c=NL',\n        'nr=3,s=Plein,a=AMS,c=NL',\n        's=Plein,a=AMS,c=NL',\n        'nr=2,s=Dam,a=AMS,c=NL'\n     ); @x2 = (\n        'LN=c,SMA=a,maD=s,2=rn',\n        'LN=c,SMA=a,nielP=s',\n        'LN=c,SMA=a,nielP=s,3=rn',\n        'LN=c,SMA=a',\n        'LN=c,SMA=a,maD=s',\n        'LN=c,SMA=a,maD=s,1=rn',\n        'LN=c'\n      ); @x3 = (\n        'LN=c',\n        'LN=c,SMA=a',\n        'LN=c,SMA=a,maD=s',\n        'LN=c,SMA=a,maD=s,1=rn',\n        'LN=c,SMA=a,maD=s,2=rn',\n        'LN=c,SMA=a,nielP=s',\n        'LN=c,SMA=a,nielP=s,3=rn'\n      ); @x4 = (\n        'nr=3,s=Plein,a=AMS,c=NL',\n        's=Plein,a=AMS,c=NL',\n        'nr=2,s=Dam,a=AMS,c=NL',\n        'nr=1,s=Dam,a=AMS,c=NL',\n        's=Dam,a=AMS,c=NL',\n        'a=AMS,c=NL',\n        'c=NL'\n      );\n</code></pre>\n\n<p>Can this code be improved, so the code can be more readable. </p>\n"}, {"tags": ["perl", "hash", "key"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 4, "creation_date": 1538411808, "post_id": 52595297, "comment_id": 92125395, "body": "You&#39;ve got a bunch of issues with this code (which would be highlighted if you <code>use strict; use warnings;</code>) which might explain the problem you are having. I don&#39;t know if they are the cause of your real problem or if your attempt to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is just showing a different set of problems."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1538412561, "post_id": 52595297, "comment_id": 92125738, "body": "Did you mean <code>$key_1 =&gt; &quot;file1&quot;</code> or rather <code>key_1 =&gt; &quot;file1&quot;</code> ?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1538412622, "post_id": 52595297, "comment_id": 92125771, "body": "If you are trying to use a variable to store a variable name, that is <a href=\"https://perl.plover.com/varvarname.html\" rel=\"nofollow noreferrer\">a</a> <a href=\"https://perl.plover.com/varvarname2.html\" rel=\"nofollow noreferrer\">bad</a> <a href=\"https://perl.plover.com/varvarname3.html\" rel=\"nofollow noreferrer\">idea</a>."}, {"owner": {"reputation": 43, "user_id": 2635999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/503131857eb4261021b4f4cb342adb1f?s=128&d=identicon&r=PG", "display_name": "tarkan", "link": "https://stackoverflow.com/users/2635999/tarkan"}, "edited": false, "score": 0, "creation_date": 1538413769, "post_id": 52595297, "comment_id": 92126254, "body": "The issue was making my keys as variables when I changed them to string names it works, thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1538414431, "post_id": 52595796, "comment_id": 92126498, "body": "You can use a variable for a key in a hash, <code>my %h = ($key_name =&gt; 1)</code> but that variable must be defined beforehand (<code>my $key_name = &#39;id&#39;;</code>) and then it will be evaluated and your &quot;actual&quot; key is that (the string <code>&#39;id&#39;</code> in this example). Then you can work with it using a variable as well, <code>$h{$var}</code>, as long as that <code>$var</code> evaluates to the string <code>&#39;id&#39;</code>, for <code>$h{id}</code> (may drop quotes for a hash key when it&#39;s a clean literal).  If you don&#39;t know whether a key exists for a string that a variable evaluates to then you can check, <code>if (exists $h{$var}) ... </code>."}], "tags": [], "owner": {"reputation": 43, "user_id": 2635999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/503131857eb4261021b4f4cb342adb1f?s=128&d=identicon&r=PG", "display_name": "tarkan", "link": "https://stackoverflow.com/users/2635999/tarkan"}, "is_accepted": false, "score": 0, "last_activity_date": 1538413866, "creation_date": 1538413866, "answer_id": 52595796, "question_id": 52595297, "link": "https://stackoverflow.com/questions/52595297/referencing-hash-keys-with-a-variable-in-perl/52595796#52595796", "title": "Referencing hash keys with a variable in perl", "body": "<p>The issue was making my keys as variables when I changed them to string names it works. In other words I changed from $key1 => \"file1\" to key1 => \"file1\"</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538443983, "post_id": 52595870, "comment_id": 92136175, "body": "And <code>for(my $i = 1; $i &lt;= 3; $i++)</code> can be simplified to <code>for my $i (1..3)</code>"}], "tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": 1, "last_activity_date": 1538414167, "creation_date": 1538414167, "answer_id": 52595870, "question_id": 52595297, "link": "https://stackoverflow.com/questions/52595297/referencing-hash-keys-with-a-variable-in-perl/52595870#52595870", "title": "Referencing hash keys with a variable in perl", "body": "<p>If I understand correctly what you are trying to do, you want something like this: </p>\n\n<pre><code>my %hash_exmp = (\n    'key_1' =&gt; \"file1\",\n    'key_2' =&gt; \"file2\",\n    'key_3' =&gt; \"file3\",\n);\nfor(my $i = 1; $i &lt;= 3; $i++){\n    print $hash_exmp{'key_'.$i} . \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 2635999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/503131857eb4261021b4f4cb342adb1f?s=128&d=identicon&r=PG", "display_name": "tarkan", "link": "https://stackoverflow.com/users/2635999/tarkan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1538414167, "creation_date": 1538411596, "question_id": 52595297, "link": "https://stackoverflow.com/questions/52595297/referencing-hash-keys-with-a-variable-in-perl", "title": "Referencing hash keys with a variable in perl", "body": "<p>I am trying to create a Perl script that allows me access a hash key/value by using a variable.</p>\n\n<p>The code below is a very high level example of script does. Is there any way to reference the key of the hash with a variable? It looks like the $hash_exmp{$temp_var} is not being accepted.</p>\n\n<pre><code>my %hash_exmp = (\n    $key_1 =&gt; \"file1\",\n    $key_2 =&gt; \"file2\",\n    $key_3 =&gt; \"file3\",\n);\n\nfor($i = 1; $i &lt;= 3; $i++){\n    for($j = 1; $j &lt;= 3; $j++){     \n        print $j;            \n        $temp_var = \"key_${i}\";\n        print $hash_exmp{$temp_var};\n    };\n};\n</code></pre>\n"}, {"tags": ["perl", "unix"], "comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 4, "creation_date": 1538411793, "post_id": 52594813, "comment_id": 92125387, "body": "can you share sample input file and the required output to add clarity to your question."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1538411931, "post_id": 52594813, "comment_id": 92125444, "body": "Can you be sure that the two columns have the same height?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1538421490, "post_id": 52594813, "comment_id": 92129643, "body": "I&#39;ve fixed your indentation again. Please do it yourself in the future."}, {"owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1538442619, "post_id": 52594813, "comment_id": 92135927, "body": "Hi @stack0114106. my output code1 and code2 have 26 line of data. my required output is to combine the output code2 beside the output code1. it means that the last output has 2 columns (o/p code1 and o/p code2) with 26 rows. it is clear? tq"}, {"owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1538442671, "post_id": 52594813, "comment_id": 92135934, "body": "Hi @H&#229;konH&#230;gland. Yes both column has same height. Tq"}, {"owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1538442697, "post_id": 52594813, "comment_id": 92135938, "body": "Hi @DaveCross. Tq and sorry"}, {"owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1538443959, "post_id": 52594813, "comment_id": 92136170, "body": "Hi @stack0114106. I had shared my output code 1 at the question. output code two also have the number of data. tq"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1538458168, "post_id": 52594813, "comment_id": 92139054, "body": "I&#39;m not sure why you&#39;re showing us your output. Showing us your input would be far more useful!"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1538458680, "post_id": 52594813, "comment_id": 92139174, "body": "What does &quot;Tq&quot; mean?"}], "answers": [{"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 1, "last_activity_date": 1538413128, "creation_date": 1538413128, "answer_id": 52595628, "question_id": 52594813, "link": "https://stackoverflow.com/questions/52594813/how-to-combine-the-code-to-make-the-output-is-on-the-same-line/52595628#52595628", "title": "how to combine the code to make the output is on the same line?", "body": "<p><code>paste</code> is useful for this: assuming your shell is bash, then using <a href=\"https://www.gnu.org/software/bash/manual/bashref.html#Process-Substitution\" rel=\"nofollow noreferrer\">process substitutions</a></p>\n\n<pre><code>paste &lt;(perl script1.pl) &lt;(perl script2.pl)\n</code></pre>\n\n<p>That emits columns separated by a tab character. For prettier output, you can pipe the output of paste to <code>column</code></p>\n\n<pre><code>paste &lt;(perl script1.pl) &lt;(perl script2.pl) | column -t -s $'\\t'\n</code></pre>\n\n<p>And with this, you con't need to try and \"merge\" your perl programs.</p>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "edited": false, "score": 0, "creation_date": 1538442857, "post_id": 52596430, "comment_id": 92135962, "body": "Hi @Corion. Tq for answering  my question. But why the output only print the last line of data? Actually, I have 26 line of data for each output of code 1 and code2."}, {"owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "edited": false, "score": 0, "creation_date": 1538443099, "post_id": 52596430, "comment_id": 92136014, "body": "this is my output for code 1 which contains 26 row of data.---------------------------------<b>async_default</b> <b>clock_gating_default</b> Ddia_link_clk Ddib_link_clk Ddic_link_clk Ddid_link_clk FEEDTHROUGH INPUTS Lclk OUTPUTS VISA_HIP_visa_tcss_2000 ckpll_npk_npkclk clstr_fscan_scanclk_pulsegen clstr_fscan_scanclk_pulsegen_notdiv clstr_fscan_scanclk_wavegen idvfreqA idvfreqB psf5_primclk sb_nondet4tclk sb_nondetl2tclk sb_nondett2lclk sbclk_nondet sbclk_sa_det stfclk_scan tap4tclk tapclk"}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": 1, "last_activity_date": 1538421560, "last_edit_date": 1538421560, "creation_date": 1538416705, "answer_id": 52596430, "question_id": 52594813, "link": "https://stackoverflow.com/questions/52594813/how-to-combine-the-code-to-make-the-output-is-on-the-same-line/52596430#52596430", "title": "how to combine the code to make the output is on the same line?", "body": "<p>To combine the two scripts and to output two items of data on the same line, you need to hold on until the end of the file (or until you have both data items) and then output them at once. So you need to combine both loops into one:</p>\n\n<pre><code>#!/usr/bin/perl\n\n\nuse strict ;\nuse warnings ;\nuse IO::Uncompress::Gunzip qw(gunzip $GunzipError);\n\nmy $input = \"par_disp_fabric.all_max_lowvcc_qor.rpt.gz\";\nmy $output = \"par_disp_fabric.all_max_lowvcc_qor.txt\";\n\n\ngunzip $input =&gt; $output\n    or die \"gunzip failed: $GunzipError\\n\";\n\nopen (FILE, '&lt;',\"$output\") or die \"Cannot open $output\\n\";\n\nmy( $levels, $timing );\nwhile (&lt;FILE&gt;) {\n    my $line = $_;\n    chomp ($line);\n\n    if ($line=~ m/^\\s+Levels of Logic:\\s+(\\S+)/) {\n        $levels = $1;\n    }\n    if ($line=~ m/^\\s+Timing Path Group \\'(\\S+)\\'/) {\n        $timing = $1;\n    }\n}\nprint \"$levels, $timing\\n\";\n\nclose (FILE);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1538465849, "last_edit_date": 1538465849, "creation_date": 1538458640, "answer_id": 52602554, "question_id": 52594813, "link": "https://stackoverflow.com/questions/52594813/how-to-combine-the-code-to-make-the-output-is-on-the-same-line/52602554#52602554", "title": "how to combine the code to make the output is on the same line?", "body": "<p>You still haven't given us one vital piece of information - what does the input data looks like. Most importantly, are the two pieces of information you're looking for on the same line?</p>\n\n<p>[<strong>Update:</strong> Looking more closely at your regexes, I see it's possible for both pieces of information to be on the same line - as they are both supposed to be the first item on the line. It would be helpful if you were clearer about that in your question.]</p>\n\n<p>I think this will do the right thing, no matter what the answer to your question is. I've also added the improvements I suggested in my answer to <a href=\"https://stackoverflow.com/questions/52593229/how-to-solve-use-of-uninitialized-value-2-in-concatenation-or-string-at\">your previous question</a>:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict ;\nuse warnings ;\nuse IO::Uncompress::Gunzip qw(gunzip $GunzipError);\n\nmy $zipped   = \"par_disp_fabric.all_max_lowvcc_qor.rpt.gz\";\nmy $unzipped = \"par_disp_fabric.all_max_lowvcc_qor.txt\";\n\ngunzip $zipped =&gt; $unzipped\n    or die \"gunzip failed: $GunzipError\\n\";\n\nopen (my $fh, '&lt;', $unzipped) or die \"Cannot open '$unzipped': $!\\n\";\n\nmy ($levels, $timing);\n\nwhile (&lt;$fh&gt;) {\n    chomp;\n\n    if (m/^\\s+Levels of Logic:\\s+(\\S+)/) {\n        $levels = $1;\n    }\n    if (m/^\\s+Timing Path Group \\'(\\S+)\\'/) {\n        $timing = $1;\n    }\n\n    # If we have both values, then print them out and\n    # set the variables to 'undef' for the next iteration\n    if ($levels and $timing) {\n        print \"$levels, $timing\\n\";\n        undef $levels;\n        undef $timing;\n    }\n}\n\nclose ($fh);\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1538671747, "creation_date": 1538409518, "last_edit_date": 1538671747, "question_id": 52594813, "link": "https://stackoverflow.com/questions/52594813/how-to-combine-the-code-to-make-the-output-is-on-the-same-line", "title": "how to combine the code to make the output is on the same line?", "body": "<p>Can you help me to combine both of these progeam to display the output in a  row with two columns? The first column is for <code>$1</code> and the second column is <code>$2</code>.</p>\n\n<p>Kindly help me to solve this. Thank you :)</p>\n\n<p>This is my code 1. </p>\n\n<pre><code>#!/usr/local/bin/perl\n#!/usr/bin/perl\n\nuse strict ;\nuse warnings ;\nuse IO::Uncompress::Gunzip qw(gunzip $GunzipError);\n\nmy $input = \"par_disp_fabric.all_max_lowvcc_qor.rpt.gz\";\nmy $output = \"par_disp_fabric.all_max_lowvcc_qor.txt\";\n\n\ngunzip $input =&gt; $output\n  or die \"gunzip failed: $GunzipError\\n\";\n\nopen (FILE, '&lt;',\"$output\") or die \"Cannot open $output\\n\";\n\nwhile (&lt;FILE&gt;) {\n  my $line = $_;\n  chomp ($line);\n\n  if ($line=~ m/^\\s+Timing Path Group \\'(\\S+)\\'/) {\n    $line = $1;\n    print (\"$1\\n\");\n  }\n}\n\nclose (FILE);\n</code></pre>\n\n<p>This is my code 2.</p>\n\n<pre><code>my $input = \"par_disp_fabric.all_max_lowvcc_qor.rpt.gz\";\nmy $output = \"par_disp_fabric.all_max_lowvcc_qor.txt\";\n\ngunzip $input =&gt; $output\n  or die \"gunzip failed: $GunzipError\\n\";\n\nopen (FILE, '&lt;',\"$output\") or die \"Cannot open $output\\n\";\n\nwhile (&lt;FILE&gt;) {\n  my $line = $_;\n  chomp ($line);\n\n  if ($line=~ m/^\\s+Levels of Logic:\\s+(\\S+)/) {\n     $line = $1;\n     print (\"$1\\n\");\n  }\n}\n\nclose (FILE);\n</code></pre>\n\n<p>this is my output for code 1 which contain 26 line of data:</p>\n\n<pre><code>**async_default**\n**clock_gating_default**\nDdia_link_clk\nDdib_link_clk\nDdic_link_clk\nDdid_link_clk\nFEEDTHROUGH\nINPUTS\nLclk\nOUTPUTS\nVISA_HIP_visa_tcss_2000\nckpll_npk_npkclk\nclstr_fscan_scanclk_pulsegen\nclstr_fscan_scanclk_pulsegen_notdiv\nclstr_fscan_scanclk_wavegen\nidvfreqA\nidvfreqB\npsf5_primclk\nsb_nondet4tclk\nsb_nondetl2tclk\nsb_nondett2lclk\nsbclk_nondet\nsbclk_sa_det\nstfclk_scan\ntap4tclk\ntapclk\n</code></pre>\n\n<p>The output code 1 also has same number of line. </p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1538408204, "post_id": 52593989, "comment_id": 92123715, "body": "We could really use some examples of your XML or code to give a decent answer."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 4, "last_activity_date": 1538408434, "creation_date": 1538408434, "answer_id": 52594522, "question_id": 52593989, "link": "https://stackoverflow.com/questions/52593989/xml-twig-update-single-entry/52594522#52594522", "title": "XML Twig: update single entry", "body": "<p>Time will purely be a function of serialising your XML.</p>\n\n<p>IMO <code>twig_handlers</code> are primarily useful for incremental parsing of large XML, and potentially for doing in-place editing. If your XML isn't large, then just loading into memory is the way forward and less confusing.</p>\n\n<p>As for finding and replacing - <code>xpath</code> is the tool for the job.</p>\n\n<p>E.g. if you want to find:</p>\n\n<pre><code>&lt;element name=\"fish\"&gt;\n  &lt;value&gt;42&lt;/value&gt;\n&lt;/element&gt;\n</code></pre>\n\n<p>Then you could locate this within your XML via:</p>\n\n<pre><code>foreach my $elt ( $xml -&gt; get_xpath('//element[@name=\"fish\"]') ) { \n  $elt -&gt; print; \n}\n</code></pre>\n\n<p>You'd then modify this how you like rather than just print it, and then simply print the whole XML doc to a new file. </p>\n\n<p>If your memory available is > 10x  the document size, loading into memory is the way to go. </p>\n"}], "owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1538408434, "creation_date": 1538406434, "question_id": 52593989, "link": "https://stackoverflow.com/questions/52593989/xml-twig-update-single-entry", "title": "XML Twig: update single entry", "body": "<p>I have an XML file with a large number of identical tags having different attributes. I need to find ONLY ONE of the tags that contains a specified attribute and update the associated value then save the information so that the new file containing the information is identical to the original with just the amended tag value updated. I am using XML Twig and wondered the quickest way to do this. I've seen the finish and finish_print methods but cannot get them to work. I think these methods are associated with twig_handlers, which is the method I currently use. However loading the whole document might be quicker when dealing with this type of problem. The files can be loaded into memory if required as they are not too large. My only real concern at the moment is the time taken to perform the operation.</p>\n\n<p>Any help much appreciated.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1538404228, "post_id": 52593229, "comment_id": 92121428, "body": "I have fixed the indentation of your code. You&#39;re welcome, but please do it yourself in future. Good indentation is one of the best tools for making your code easy to understand. If you&#39;re going to ask a large number of strangers to read and understand your code, then it&#39;s only polite to make it as easy as possible for them."}, {"owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1538404423, "post_id": 52593229, "comment_id": 92121544, "body": "thank you. @DaveCross. sorry, this is my first of perl script."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1538405188, "post_id": 52593229, "comment_id": 92122047, "body": "The importance of good indentation is not unique to Perl. Pretty much any programming language you use will be easier to read if you indent it sensibly."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1538413558, "post_id": 52593620, "comment_id": 92126167, "body": "Rather than suggesting to use $_, which is susceptible to hidden issues due to being a superglobal used by everything, I would just change it to <code>while (my $line = &lt;$fh&gt;)</code> so $_ is not used at all."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1538405093, "creation_date": 1538405093, "answer_id": 52593620, "question_id": 52593229, "link": "https://stackoverflow.com/questions/52593229/how-to-solve-use-of-uninitialized-value-2-in-concatenation-or-string-at/52593620#52593620", "title": "how to solve &quot;Use of uninitialized value $2 in concatenation (.) or string at&quot;", "body": "<p>The meat of your program is here:</p>\n\n<pre><code>if ($line =~ m/^\\s+Timing Path Group \\'(\\S+)\\'/) {\n  $line = $1;\n\n  if ($line =~ m/^\\s+Levels of Logic:\\s+(\\S+)/) {\n    $line = $2;\n  }\n}\n</code></pre>\n\n<p>The regex capturing variables (<code>$1</code>, <code>$2</code>, etc) are set when you match a string against a regex that contains sets of capturing parentheses. The first capturing parentheses set the value of <code>$1</code>, the second capturing parentheses set the value of <code>$2</code>, and so on. In order for <code>$2</code> to be given a value, you need to match against a regex that contains two sets of capturing parentheses.</p>\n\n<p>Both of your regexes only contain a single set of capturing parentheses. Therefore only <code>$1</code> will be set on each of your matches. <code>$2</code> will never be given a value - leading to the warning that you are seeing.</p>\n\n<p>You need to rethink the logic in your code. I'm not sure why you think <code>$2</code> will have a value here. Your code is a little confusing, so I'm unable to offer a more specific solution.</p>\n\n<p>I can, however, give you some more general advice:</p>\n\n<ul>\n<li><p>Use lexical filehandles and the three-arg version of <code>open()</code>.</p>\n\n<pre><code>open my $fh, '&lt;', \"$output\"\n</code></pre></li>\n<li><p>There is no need for the quotes around <code>$output</code>.</p>\n\n<pre><code>open my $fh, '&lt;', $output\n</code></pre></li>\n<li><p>I know why you're doing it, but <code>$output</code> is a potentially confusing name for a file that you read from. Consider changing it.</p></li>\n<li><p>Always include <code>$!</code> in an <code>open()</code> error message.</p>\n\n<pre><code>open my $fh, '&lt;', $output or die \"Cannot open '$output': $!\\n\";\n</code></pre></li>\n<li><p>Your <code>$line</code> variable seems unnecessary. Why not just keep the row data in <code>$_</code>, which will simplify your code:</p>\n\n<pre><code>while (&lt;$fh&gt;) {\n  chomp; # works on $_ by default\n  if (/some regex/) { # works on $_ by default\n    # etc...\n  }\n}\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573116776, "creation_date": 1538403762, "last_edit_date": 1573116776, "question_id": 52593229, "link": "https://stackoverflow.com/questions/52593229/how-to-solve-use-of-uninitialized-value-2-in-concatenation-or-string-at", "title": "how to solve &quot;Use of uninitialized value $2 in concatenation (.) or string at&quot;", "body": "<p>Below is my code. I want to print the data $1 and $2 in one row and split it with <code>,</code>. Why can't I print the data?</p>\n\n<pre><code>#!/usr/intel/bin/perl\n\nuse strict;\nuse warnings;\n\nuse IO::Uncompress::Gunzip qw(gunzip $GunzipError);\n\nmy $input = \"par_disp_fabric.all_max_lowvcc_qor.rpt.gz\";\nmy $output = \"par_disp_fabric.all_max_lowvcc_qor.txt\";\n\ngunzip $input =&gt; $output\nor die \"gunzip failed: $GunzipError\\n\";\n\nopen (FILE, '&lt;',\"$output\") or die \"Cannot open $output\\n\";\n\nwhile (&lt;FILE&gt;) {\n  my $line = $_;\n  chomp ($line);\n\n  if ($line =~ m/^\\s+Timing Path Group \\'(\\S+)\\'/) {\n    $line = $1;\n\n    if ($line =~ m/^\\s+Levels of Logic:\\s+(\\S+)/) {\n      $line = $2;\n    }\n  }\n  print \"$1,$2\\n\";\n}\n\nclose (FILE);\n</code></pre>\n"}, {"tags": ["perl", "websocket", "mojolicious", "mojolicious-lite"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538587109, "post_id": 52591771, "comment_id": 92198129, "body": "What was your &quot;another attempt&quot; at using Subprocess? Did you try the method I mentioned since the subprocess cannot communicate with the websocket?"}, {"owner": {"reputation": 10389, "user_id": 317266, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b4f5deafa991b6d0f2b87ef20e9159fd?s=128&d=identicon&r=PG", "display_name": "Seki", "link": "https://stackoverflow.com/users/317266/seki"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538590433, "post_id": 52591771, "comment_id": 92199846, "body": "@Grinnz: I just updated my question to show my different attempts with <code>Subprocess</code> and <code>delay()</code>. But your <code>Promise</code> solution is close to the expected result. At least it provides a kind asynchronous feedback. See my additional question in your answer comments."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538603401, "post_id": 52591771, "comment_id": 92205509, "body": "Delays aren&#39;t really suggested anymore as they&#39;ve been mostly replaced with Promise based tools in Mojo, and historically have been a more difficult concept for people to grasp. The reason it still blocks websocket communication is that delays are similar to promises in that they only organize when code is run, the code will still block while it runs, that&#39;s what the subprocesses are for."}], "answers": [{"comments": [{"owner": {"reputation": 10389, "user_id": 317266, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b4f5deafa991b6d0f2b87ef20e9159fd?s=128&d=identicon&r=PG", "display_name": "Seki", "link": "https://stackoverflow.com/users/317266/seki"}, "edited": false, "score": 0, "creation_date": 1538574770, "post_id": 52610023, "comment_id": 92190754, "body": "Interesting, but in my case it would replace a blocking processing by a blocking loop on statuses returned by the queue."}, {"owner": {"reputation": 87, "user_id": 6479118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63708dea9abc1e12f5c0c38412aad735?s=128&d=identicon&r=PG&f=1", "display_name": "Theo Ohnsorge", "link": "https://stackoverflow.com/users/6479118/theo-ohnsorge"}, "reply_to_user": {"reputation": 10389, "user_id": 317266, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b4f5deafa991b6d0f2b87ef20e9159fd?s=128&d=identicon&r=PG", "display_name": "Seki", "link": "https://stackoverflow.com/users/317266/seki"}, "edited": false, "score": 0, "creation_date": 1538635515, "post_id": 52610023, "comment_id": 92213571, "body": "I accept it: blocking in this scenario is bad. Another approach to avoid the blocking here is to create a second thread that &quot;observes&quot; (dequeing) the first thread and do the progress updates. Both threads must be detached rather than joined to avoid blocking of the main process. The big caveat of using threads here is also that all ever loaded packages at this point in time will be cloned into a new interpreter. If you have limited resources (memory) this will may cause your system."}], "tags": [], "owner": {"reputation": 87, "user_id": 6479118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63708dea9abc1e12f5c0c38412aad735?s=128&d=identicon&r=PG&f=1", "display_name": "Theo Ohnsorge", "link": "https://stackoverflow.com/users/6479118/theo-ohnsorge"}, "is_accepted": false, "score": 3, "last_activity_date": 1538498081, "last_edit_date": 1538498081, "creation_date": 1538488962, "answer_id": 52610023, "question_id": 52591771, "link": "https://stackoverflow.com/questions/52591771/websocket-asynchronous-feedback-during-a-long-process/52610023#52610023", "title": "websocket asynchronous feedback during a long process", "body": "<p>You can use a thread instead of a subprocess to do the work. After creation of the thread you need a loop that updates the progress via websocket. </p>\n\n<p>If you handle with critical workloads that really have to be finished under all circumstances (websocket is gone, network is down etc.) you should delegate it to another daemon that persists and communicates its state via a file or a socket.</p>\n\n<p>If it is a non critical workload and you can easily restart it this may be a template for you.</p>\n\n<pre><code># Insert this at module header\n# use threads;\n# use Thread::Queue;\n\nmy $queue  = Thread::Queue-&gt;new();\nmy $worker = threads-&gt;create(sub {\n  # dummy workload. do your work here\n  my $count = 60;\n  for (1..$count) {\n    sleep 1;\n    $queue-&gt;enqueue($_/$count);\n  }\n\n  # undef to signal end of work\n  $queue-&gt;enqueue(undef);\n\n  return;\n});\n\n# blocking dequeuing ends when retrieving an undef'd value\nwhile(defined(my $item = $queue-&gt;dequeue)) {\n  # update progress via websocket\n  printf(\"%f %\\n\", $item);\n}\n\n# join thread\n$worker-&gt;join;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10389, "user_id": 317266, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b4f5deafa991b6d0f2b87ef20e9159fd?s=128&d=identicon&r=PG", "display_name": "Seki", "link": "https://stackoverflow.com/users/317266/seki"}, "edited": false, "score": 0, "creation_date": 1538590272, "post_id": 52619173, "comment_id": 92199773, "body": "Great this is very close to what I want to get! A last thing is the sequencing of promises. I though at first that all the results were sent at the same time, but actually all the promises seem to start at once, as using a <code>sleep(2 * $cell)</code> can produce the expected delayed feedbacks. The actual processing consist in creating tasks in a Jira server, do you think of a solution to process in sequence instead of in parallel to avoid performing a DOS by sending all requests at once? I feel that using <code>sleep($cell)</code> is a bit ugly. :)"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 10389, "user_id": 317266, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b4f5deafa991b6d0f2b87ef20e9159fd?s=128&d=identicon&r=PG", "display_name": "Seki", "link": "https://stackoverflow.com/users/317266/seki"}, "edited": false, "score": 0, "creation_date": 1538599482, "post_id": 52619173, "comment_id": 92204044, "body": "Do you mean that you want to wait for each subprocess to complete before starting the next one?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 10389, "user_id": 317266, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b4f5deafa991b6d0f2b87ef20e9159fd?s=128&d=identicon&r=PG", "display_name": "Seki", "link": "https://stackoverflow.com/users/317266/seki"}, "edited": false, "score": 0, "creation_date": 1538599751, "post_id": 52619173, "comment_id": 92204154, "body": "To wait for each promise to resolve before the next one, you want to attach a -&gt;then callback that creates the next promise to wait for, and the final -&gt;then/-&gt;catch is just attached to the last promise in this chain. I&#39;ve updated the example code with this logic."}, {"owner": {"reputation": 10389, "user_id": 317266, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b4f5deafa991b6d0f2b87ef20e9159fd?s=128&d=identicon&r=PG", "display_name": "Seki", "link": "https://stackoverflow.com/users/317266/seki"}, "edited": false, "score": 0, "creation_date": 1538604003, "post_id": 52619173, "comment_id": 92205691, "body": "Perfect! This is what I was searching for. You achieved to make me understand the <code>Mojo::Promise</code> I had found during my research but did not understood. I was looking for a decent solution for 2 weeks... Many thanks! The <code>Mojo::IOLoop::ReadWriteFork</code> looks interesting too, I may have some usage for different use cases and will evaluate later."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 3, "last_activity_date": 1539736157, "last_edit_date": 1539736157, "creation_date": 1538536167, "answer_id": 52619173, "question_id": 52591771, "link": "https://stackoverflow.com/questions/52591771/websocket-asynchronous-feedback-during-a-long-process/52619173#52619173", "title": "websocket asynchronous feedback during a long process", "body": "<p><a href=\"https://metacpan.org/pod/Mojolicious::Guides::Cookbook#Blocking-and-non-blocking-operations\" rel=\"nofollow noreferrer\">It is not possible to magically make Perl code non-blocking.</a> That's why your blocking operation is holding up the websocket responses and event loop.</p>\n\n<p>A single subprocess will not work for this, because only the original worker process that handled the request can respond to the websocket, and subprocesses can only return once. You can, however, use a subprocess to prepare each response you want to send. Your use of subprocesses is not quite correct however.</p>\n\n<p>The first subroutine passed to the subprocess executes in a fork and thus doesn't block the main process. The second subroutine executes in the parent once the subprocess completes, and receives the return value of the first subroutine. This is where you need to send your responses.</p>\n\n<p>Any code outside of that will be executed before the subprocess is even started, because this is asynchronous code, you need to sequence the logic via callbacks. You can use <a href=\"https://metacpan.org/pod/Mojo::Promise\" rel=\"nofollow noreferrer\">promises</a> to make complicated sequencing simpler.</p>\n\n<pre><code>use Mojo::Promise;\n\n$ws-&gt;on(json =&gt; sub {\n    my ($ws, $msg) = @_;\n    app-&gt;log-&gt;debug('Received from websocket:', Dumper(\\$msg));\n    unless($msg){\n        app-&gt;log-&gt;debug('Received empty message? WTF?!');\n        return;\n    }\n    my $prompt = $msg-&gt;{cmd};\n    return unless $prompt;\n    app-&gt;log-&gt;debug(sprintf 'Received: `%s`', $prompt // 'empty??');\n\n    my $promise = Mojo::Promise-&gt;new-&gt;resolve; # starting point\n    # attach follow-up code for each cell, returning a new promise representing the whole chain so far\n    for my $cell (1..3) {\n        $promise = $promise-&gt;then(sub {\n            my $promise = Mojo::Promise-&gt;new;\n            Mojo::IOLoop-&gt;subprocess(sub {\n                app-&gt;log-&gt;debug(\"sending cell $cell\");\n                sleep(2);\n                my $payload = {\n                        type =&gt; 'ticket',\n                        cell =&gt; $cell,\n                        result =&gt; $cell % 2 ? 'OK' : 'NOK'\n                };\n                return $payload;\n            }, sub {\n                my ($sp, $err, $payload) = @_;\n                return $promise-&gt;reject($err) if $err; # indicates subprocess died\n                $ws-&gt;send( { json =&gt; $payload }, sub { $promise-&gt;resolve } );\n            });\n\n            # here, the subprocess has not been started yet\n            # it will be started when this handler returns to the event loop\n            # then the second callback will run once the subprocess exits\n            return $promise;\n        };\n    }\n\n    # chain from last promise\n    $promise-&gt;then(sub {\n        app-&gt;log-&gt;debug('sending end of process -&gt;websocket');\n        $ws-&gt;send({json =&gt; { type =&gt; 'end' } });\n    })-&gt;catch(sub {\n        my $err = shift;\n        # you can send or log something here to indicate an error occurred in one of the subprocesses\n    });\n});\n</code></pre>\n\n<p>Some other options I can go into more detail if they would be appropriate: <a href=\"https://metacpan.org/pod/Mojo::IOLoop::ReadWriteFork\" rel=\"nofollow noreferrer\">Mojo::IOLoop::ReadWriteFork</a> which would let you start just one subprocess and continuously receive STDOUT from it (you would need to serialize your payload yourself to send it on STDOUT, like with Mojo::JSON); or a regular subprocess that sends status information back to the parent over an external pub/sub broker that both processes can connect to, like <a href=\"https://metacpan.org/pod/Mojo::Pg#pubsub\" rel=\"nofollow noreferrer\">Postgres</a>, <a href=\"https://metacpan.org/pod/Mojo::Redis::PubSub\" rel=\"nofollow noreferrer\">Redis</a>, or <a href=\"https://metacpan.org/pod/mercury\" rel=\"nofollow noreferrer\">Mercury</a> (also would require serialization).</p>\n"}, {"comments": [{"owner": {"reputation": 10389, "user_id": 317266, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b4f5deafa991b6d0f2b87ef20e9159fd?s=128&d=identicon&r=PG", "display_name": "Seki", "link": "https://stackoverflow.com/users/317266/seki"}, "edited": false, "score": 0, "creation_date": 1570717234, "post_id": 55647577, "comment_id": 103008749, "body": "I only recently noticed your answer. This feature was only added in november 2018, after my question. This is  now very convenient. Thanks!"}], "tags": [], "owner": {"reputation": 31, "user_id": 7750871, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mB4B9pJ_K3E/AAAAAAAAAAI/AAAAAAAAC_Y/10sJK3Cq1og/photo.jpg?sz=128", "display_name": "Hollie", "link": "https://stackoverflow.com/users/7750871/hollie"}, "is_accepted": false, "score": 3, "last_activity_date": 1555058114, "creation_date": 1555058114, "answer_id": 55647577, "question_id": 52591771, "link": "https://stackoverflow.com/questions/52591771/websocket-asynchronous-feedback-during-a-long-process/55647577#55647577", "title": "websocket asynchronous feedback during a long process", "body": "<p>I have made a small change to your updated example to make it working as expected. You can use the <code>progress</code> feature of <code>Subprocess</code> module to ensure that the correct data is sent over the websocket asynchronously from the long subprocess. </p>\n\n<p>The code now works as expected for me, the table state is updated on the client side every time the subprocess goes through an iteration. </p>\n\n<p>The relevant part of the source code then looks like this:</p>\n\n<pre><code>$ws-&gt;on(\n    json =&gt; sub {\n        my ( $ws, $msg ) = @_;\n        app-&gt;log-&gt;debug( 'Received from websocket:', Dumper( \\$msg ) );\n        unless ($msg) {\n            app-&gt;log-&gt;debug('Received empty message? WTF?!');\n            return;\n        }\n        my $prompt = $msg-&gt;{cmd};\n        return unless $prompt;\n        app-&gt;log-&gt;debug( sprintf 'Received: `%s`', $prompt // '&lt;empty??&gt;' );\n\n        # my $loop = Mojo::IOLoop-&gt;singleton;\n        my $subprocess = Mojo::IOLoop::Subprocess-&gt;new;\n        app-&gt;log-&gt;debug(\"we are pid $$\");\n        $subprocess-&gt;run(\n            sub {\n                my $sp = shift;\n                for my $cell ( 1 .. 3 ) {\n                    app-&gt;log-&gt;debug(\n                        \"starting process for cell $cell in pid $$\");\n                    sleep(2);\n                    app-&gt;log-&gt;debug(\"sending cell $cell to ws\");\n                    my $payload = {\n                        type   =&gt; 'ticket',\n                        cell   =&gt; $cell,\n                        result =&gt; $cell % 2 ? 'OK' : 'NOK'\n                    };\n                    $sp-&gt;progress($payload);\n                }\n            },\n            sub {\n                my ( $sp, $err, @results ) = @_;\n\n                #$ws-&gt;send( { json =&gt; $payload } );\n                $ws-&gt;reply-&gt;exception($err) and return if $err;\n                app-&gt;log-&gt;debug('sending end of process -&gt;websocket');\n                $ws-&gt;send( { json =&gt; { type =&gt; 'end' } } );\n            }\n        );\n\n        # Start event loop if necessary\n        $subprocess-&gt;on(\n            progress =&gt; sub {\n                my ( $subprocess, $payload ) = @_;\n                $ws-&gt;send( { json =&gt; $payload } );\n            }\n        );\n        $subprocess-&gt;ioloop-&gt;start unless $subprocess-&gt;ioloop-&gt;is_running;\n    }\n);\n</code></pre>\n"}], "owner": {"reputation": 10389, "user_id": 317266, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b4f5deafa991b6d0f2b87ef20e9159fd?s=128&d=identicon&r=PG", "display_name": "Seki", "link": "https://stackoverflow.com/users/317266/seki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "accepted_answer_id": 52619173, "answer_count": 3, "score": 2, "last_activity_date": 1555058114, "creation_date": 1538398914, "last_edit_date": 1538603428, "question_id": 52591771, "link": "https://stackoverflow.com/questions/52591771/websocket-asynchronous-feedback-during-a-long-process", "title": "websocket asynchronous feedback during a long process", "body": "<p>I am trying to implement a feedback in a web page that let the user start a long process from an Excel sheet (sight, yes...). For each line of the data, the processing time is about 1 second, and the common data length is between 40 and 100 items, so the overall processing time can be greater than a minute.</p>\n\n<p>I am displaying a preview of the data in the page, starting the process through a websocket and would like to show a progression from the same websocket.</p>\n\n<p>The processing in itself is made by an external package and the page complexity is minimal, so I have wrapped it in a <code>Lite</code> single file.</p>\n\n<p>My problem is that the long processing started in the websocket route is blocking the feedback until it has finished and all the progession events are sent at the same time at the end. For what I understand, it is related to the event loop of Mojolicious and I should start the processing separately to avoid freezing the processing of websocket.</p>\n\n<p>Note that I have tried a separate channel of feedback with an <code>EventSource</code> to push some progession to the client during the processing, but it shows the same completion at once at the end.</p>\n\n<p>Here is my code simplified, I am using a <code>sleep()</code> to simulate the long process. I am starting with </p>\n\n<pre><code>perl mojo_notify_ws.pl daemon\n</code></pre>\n\n<p>Could you suggest how to modify the websocket route to allow a real time feedback?</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use Mojolicious::Lite;\nuse Mojo::JSON qw(encode_json decode_json j);\n\nuse Data::Dumper;\n\n$|++;\n\nany '/' =&gt; sub {\n    my $c = shift;\n    $c-&gt;render('index');\n};\n\nmy $peer;\nwebsocket '/go' =&gt; sub {\n    use Carp::Always;\n    my $ws = shift;\n\n    $peer = $ws-&gt;tx;\n    app-&gt;log-&gt;debug(sprintf 'Client connected: %s', Dumper $peer-&gt;remote_address);\n\n    # do not subscribe to 'text' else 'json' won't work\n    #$ws-&gt;on(text =&gt; sub {\n    #    my ($ws, $msg) = @_;\n    #    app-&gt;log-&gt;debug(\"Received text from websocket: `$msg`\");\n    #        });\n\n    # $peer-&gt;send('{\"type\": \"test\"}');\n    # say 'default inactivity timeout='. (p $ws-&gt;inactivity_timeout());\n    $ws-&gt;inactivity_timeout(120);\n\n    $ws-&gt;on(json =&gt; sub {\n        my ($ws, $msg) = @_;\n        app-&gt;log-&gt;debug('Received from websocket:', Dumper(\\$msg));\n        unless($msg){\n            app-&gt;log-&gt;debug('Received empty message? WTF?!');\n            return;\n        }\n        my $prompt = $msg-&gt;{cmd};\n        return unless $prompt;\n        app-&gt;log-&gt;debug(sprintf 'Received: `%s`', $prompt // 'empty??');\n\n        # simulate\n        my $loop = Mojo::IOLoop-&gt;singleton;\n\n#        $loop-&gt;subprocess( sub {\n#            my $sp = shift;\n\n        for my $cell (1..3) {\n            # $loop-&gt;delay( sub {\n                app-&gt;log-&gt;debug(\"sending cell $cell\");\n                my $payload = {\n                        type =&gt; 'ticket',\n                        cell =&gt; $cell,\n                        result =&gt; $cell % 2 ? 'OK' : 'NOK'\n                };\n                $ws-&gt;send( { json =&gt; $payload } );\n                sleep(2);\n                # $loop-&gt;timer(2, sub {say 'we have waited 2 secs!';})-&gt;wait;\n            # });\n        };\n\n#        }, sub {} );#subprocess\n\n        app-&gt;log-&gt;debug('sending end of process -&gt;websocket');\n        $ws-&gt;send({json =&gt; { type =&gt; 'end' } });\n    });\n\n    $ws-&gt;on(finish =&gt; sub {\n        my ($ws, $code, $reason) = @_;\n        $reason = '' unless defined $reason;\n        app-&gt;log-&gt;debug(\"Client disconnected: $code ($reason)\");\n    });\n\n    app-&gt;log-&gt;debug('Reached end of ws route definition');\n};\n\napp-&gt;start;\n\n__DATA__\n\n@@ index.html.ep\n&lt;html&gt;\n    &lt;head&gt;\n    &lt;script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js\"&gt;&lt;/script&gt;\n    &lt;script&gt;\nvar timerID = 0; \nfunction keepAlive(ws) { \n    var timeout = 20000;  \n    if (ws.readyState == ws.OPEN) {  \n        ws.send('ping');  \n    }  \n    timerId = setTimeout(function(){keepAlive(ws);}, timeout);  \n}  \nfunction cancelKeepAlive() {  \n    if (timerId) {  \n        clearTimeout(timerId);  \n    }  \n}\n\nfunction flagCell(cell, result){\n    var id='#CELL_' + cell;\n    var cell = $(id);\n    if(cell) {\n        if (result=='OK') {\n            cell.css('color', 'green');\n            cell.text('\u2bf2');\n        } else {\n            cell.css('color','red');\n            cell.text('\u2718');\n        }\n    }\n}\n\nfunction process(){\n    //debugger;\n    console.log('Opening WebSocket');\n    var ws = new WebSocket('&lt;%= url_for('go')-&gt;to_abs %&gt;');\n\n    ws.onopen = function (){\n        console.log('Websocket Open');\n        //keepAlive(ws);\n        ws.send(JSON.stringify({cmd: \"let's go Perl\"}));\n    };\n    //incoming\n    ws.onmessage = function(evt){\n        var data = JSON.parse(evt.data);\n        console.log('WS received '+JSON.stringify(data));\n        if (data.type == 'ticket') {\n            console.log('Server has send a status');\n            console.log('Cell:'+data.cell + ' res:' + data.result);\n\n            flagCell(data.cell, data.result);\n        } else if (data.type == 'end') {\n            console.log('Server has finished.');\n            //cancelKeepAlive();\n            ws.close();\n        } else {\n            console.log('Unknown message:' + evt.data);\n        }\n    };\n    ws.onerror = function (evt) {\n        console.log('ws error:', evt.data);\n    }\n    ws.onclose = function (evt) {\n        if(evt.wasClean) {\n            console.log('Connection closed cleanly');\n        } else {\n            console.log('Connection reseted');\n        }\n        console.log('Code:'+ evt.code + ' Reason:' + evt.reason);\n    }\n}\n\n    &lt;/script&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;button type=button id='upload' onclick=\"process();\"&gt;Go&lt;/button&gt;&lt;br&gt;\n        &lt;div style='font-family:sans;'&gt;\n            &lt;table border=\"1px\"&gt;\n              &lt;tr&gt;&lt;td id=\"CELL_1\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;Foo&lt;/td&gt;&lt;/tr&gt;\n              &lt;tr&gt;&lt;td id=\"CELL_2\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;Bar&lt;/td&gt;&lt;/tr&gt;\n              &lt;tr&gt;&lt;td id=\"CELL_3\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;Baz&lt;/td&gt;&lt;/tr&gt;\n            &lt;/table&gt;\n        &lt;/div&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Grinnz has provided a suitable solution, but for the record, here is my attempt with <code>Mojo::IOLoop::Subprocess</code> callback but then I have no feedback at all. I am running on Linux and <code>Subprocess</code> seems to fork, <s>and the the parent process seems to terminates the websocket immediately</s> <strong>edit:</strong> no: I eventually found that the <code>$ws-&gt;send()</code> is at the wrong place as it should be placed in the second <code>sub{}</code> that is run in the parent side, and not in the first that is run in the child process. This code should be refactored to have one <code>subprocess</code> per loop iteration and a final step for the notification of end.</p>\n\n<p>Here is the modified <code>on(json)</code></p>\n\n<pre><code>$ws-&gt;on(json =&gt; sub {\n    my ($ws, $msg) = @_;\n    app-&gt;log-&gt;debug('Received from websocket:', Dumper(\\$msg));\n    unless($msg){\n        app-&gt;log-&gt;debug('Received empty message? WTF?!');\n        return;\n    }\n    my $prompt = $msg-&gt;{cmd};\n    return unless $prompt;\n    app-&gt;log-&gt;debug(sprintf 'Received: `%s`', $prompt // '&lt;empty??&gt;');\n\n    # my $loop = Mojo::IOLoop-&gt;singleton;\n    my $subprocess = Mojo::IOLoop::Subprocess-&gt;new;\n    app-&gt;log-&gt;debug(\"we are pid $$\");\n    $subprocess-&gt;run( \n        sub {\n            my $sp = shift;\n            for my $cell (1..3) {\n                app-&gt;log-&gt;debug(\"starting process for cell $cell in pid $$\");     \n                sleep(2);\n                app-&gt;log-&gt;debug(\"sending cell $cell to ws\");\n                my $payload = {\n                    type =&gt; 'ticket',\n                    cell =&gt; $cell,\n                    result =&gt; $cell % 2 ? 'OK' : 'NOK'\n                };\n                $ws-&gt;send( { json =&gt; $payload } ); # FIXME: actually this line is in the wrong place\n                                                   # and should be in the second sub{}\n            };\n        },\n        sub {\n            my ($sp, $err, @results) = @_; \n            $ws-&gt;reply-&gt;exception($err) and return if $err;\n            app-&gt;log-&gt;debug('sending end of process -&gt;websocket');\n            $ws-&gt;send({json =&gt; { type =&gt; 'end' } });\n        });  \n    # Start event loop if necessary\n    $subprocess-&gt;ioloop-&gt;start unless $subprocess-&gt;ioloop-&gt;is_running;       \n});\n</code></pre>\n\n<p>And the corresponding log:</p>\n\n<pre><code>[Wed Oct  3 19:51:58 2018] [debug] Received: `let's go Perl`\n[Wed Oct  3 19:51:58 2018] [debug] we are pid 8898\n[Wed Oct  3 19:51:58 2018] [debug] Client disconnected: 1006 ()\n[Wed Oct  3 19:51:58 2018] [debug] starting process for cell 1 in pid 8915\n[Wed Oct  3 19:52:00 2018] [debug] sending cell 1 to ws\n[Wed Oct  3 19:52:00 2018] [debug] starting process for cell 2 in pid 8915\n[Wed Oct  3 19:52:02 2018] [debug] sending cell 2 to ws\n[Wed Oct  3 19:52:02 2018] [debug] starting process for cell 3 in pid 8915\n[Wed Oct  3 19:52:04 2018] [debug] sending cell 3 to ws\n[Wed Oct  3 19:52:04 2018] [debug] sending end of process -&gt;websocket\n[Wed Oct  3 19:52:04 2018] [debug] Client disconnected: 1005 ()\n</code></pre>\n\n<p>I also experimented with <code>Mojo::IOLoop-&gt;delay</code> to generate a complicated sequence of steps in a way similar to the <code>Promise</code> solution, but this one is sending also all the notifications at once at the end:</p>\n\n<pre><code>$ws-&gt;on(json =&gt; sub {\n    my ($ws, $msg) = @_;\n    app-&gt;log-&gt;debug('Received from websocket:', Dumper(\\$msg));\n    unless($msg){\n        app-&gt;log-&gt;debug('Received empty message? WTF?!');\n        return;\n    }\n    my $prompt = $msg-&gt;{cmd};\n    return unless $prompt;\n    app-&gt;log-&gt;debug(sprintf 'Received: `%s`', $prompt // '&lt;empty??&gt;');\n\n    app-&gt;log-&gt;debug(\"we are pid $$\");\n\n    my @steps;\n    for my $cell (1..3) {\n        push @steps, \n            sub {\n                app-&gt;log-&gt;debug(\"subprocess for cell pid $cell\");\n                # my $sp = shift;\n                my $delay = shift;\n                sleep(2);\n                app-&gt;log-&gt;debug(\"end of sleep for cell $cell\");\n                $delay-&gt;pass($cell % 2 ? 'OK' : 'NOK');\n            },\n            sub {\n                my $delay = shift;\n                my $result = shift;\n\n                app-&gt;log-&gt;debug(\"sending cell $cell from pid $$ - result was $result\");\n                my $payload = {\n                    type =&gt; 'ticket',\n                    cell =&gt; $cell,\n                    result =&gt; $result\n            };\n            $ws-&gt;send( { json =&gt; $payload } );\n            $delay-&gt;pass;    \n        };\n    }\n\n    # add final step to notify end of processing\n    push @steps, sub {\n        my $delay = shift;\n        app-&gt;log-&gt;debug('sending end of process -&gt;websocket');\n        $ws-&gt;send({json =&gt; { type =&gt; 'end' } });\n        $delay-&gt;pass;\n    };\n\n    my $delay = Mojo::IOLoop::Delay-&gt;new;\n    app-&gt;log-&gt;debug(\"Starting delay...\");\n    $delay-&gt;steps( @steps );\n    app-&gt;log-&gt;debug(\"After the delay\");\n\n});\n</code></pre>\n"}, {"tags": ["python", "perl", "ui-automation", "mks", "mks-integrity"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1538402255, "post_id": 52591084, "comment_id": 92120186, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/33168596/which-script-is-better-for-automation-of-ptc-integrity-application\">Which script is better for automation of PTC Integrity application</a>"}, {"owner": {"reputation": 65, "user_id": 10428953, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f3gzUMeuE5w/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVEj2vNHMQNxlV4hfZb6Ip9ceUzyA/mo/photo.jpg?sz=128", "display_name": "Abhishek Singh", "link": "https://stackoverflow.com/users/10428953/abhishek-singh"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1538635967, "post_id": 52591084, "comment_id": 92213800, "body": "I&#39;ve read that question Mr @Corion .."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 10428953, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f3gzUMeuE5w/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVEj2vNHMQNxlV4hfZb6Ip9ceUzyA/mo/photo.jpg?sz=128", "display_name": "Abhishek Singh", "link": "https://stackoverflow.com/users/10428953/abhishek-singh"}, "edited": false, "score": 0, "creation_date": 1538540248, "post_id": 52592754, "comment_id": 92173160, "body": "VBA SendKeys was very effective solution for my task. Let me know if there is any update in the above list that you&#39;ve provided. The list rocks!"}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": 0, "last_activity_date": 1538402164, "creation_date": 1538402164, "answer_id": 52592754, "question_id": 52591084, "link": "https://stackoverflow.com/questions/52591084/effective-scripting-option-to-automate-mks-integrity/52592754#52592754", "title": "Effective scripting option to Automate MKS Integrity", "body": "<p>Any of the mentioned languages can send keystrokes to other Windows applications, so automating that program using any of them should work:</p>\n\n<ul>\n<li><a href=\"https://www.autoitscript.com/autoit3/docs/appendix/SendKeys.htm\" rel=\"nofollow noreferrer\">AutoIt Send()</a></li>\n<li><a href=\"https://metacpan.org/pod/Win32::GuiTest\" rel=\"nofollow noreferrer\">Perl Win32::GuiTest SendKeys() </a></li>\n<li><a href=\"https://win32com.goermezer.de/microsoft/windows/controlling-applications-via-sendkeys.html\" rel=\"nofollow noreferrer\">Python win32com.SendKeys() </a></li>\n<li><a href=\"https://docs.microsoft.com/en-us/office/vba/language/reference/user-interface-help/sendkeys-statement\" rel=\"nofollow noreferrer\">VBA SendKeys </a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 9530634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0881c85aba4355763550b7d6a6cee4f?s=128&d=identicon&r=PG", "display_name": "sindhu", "link": "https://stackoverflow.com/users/9530634/sindhu"}, "is_accepted": false, "score": 1, "last_activity_date": 1553250429, "creation_date": 1553250429, "answer_id": 55297579, "question_id": 52591084, "link": "https://stackoverflow.com/questions/52591084/effective-scripting-option-to-automate-mks-integrity/55297579#55297579", "title": "Effective scripting option to Automate MKS Integrity", "body": "<p>I would suggest you to try Python to automate different processes in PTC integrity tool.You can use CLI commands for all your operations.Run those CLI commands from Python using subprocess method. Get your output in your preferable format.</p>\n\n<p>You can do multiple PTC options like create,edit,delete of documents and items.You can also do some difficult options with this.</p>\n"}], "owner": {"reputation": 65, "user_id": 10428953, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f3gzUMeuE5w/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVEj2vNHMQNxlV4hfZb6Ip9ceUzyA/mo/photo.jpg?sz=128", "display_name": "Abhishek Singh", "link": "https://stackoverflow.com/users/10428953/abhishek-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 697, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1553250429, "creation_date": 1538396726, "last_edit_date": 1538540330, "question_id": 52591084, "link": "https://stackoverflow.com/questions/52591084/effective-scripting-option-to-automate-mks-integrity", "title": "Effective scripting option to Automate MKS Integrity", "body": "<p>I want to create one script that will open the Windows application to perform some task.</p>\n\n<p>Application is PTC integrity,</p>\n\n<p>I want to write a script that would open the items ( via unique Item ID ) and make changes in one of it's attribute's value and save it.</p>\n\n<p>Tasks that my script should do:</p>\n\n<pre><code>1. Open the application.\n2. Open the document using ID.\n3. Open the Item via provided ID.\n4. Assign a new value to the attribute provided by the script.\n</code></pre>\n\n<p>I would like to know which scripting language should I use to get the above task done. Can it be done via VBA or Perl or Python etc.\nSince I'm new I'm open for good suggestions.</p>\n\n<p>NOTE : I've worked on AutoIT before. So, Let me know if it can be of any use for PTC Integrity Automation.</p>\n"}, {"tags": ["perl", "smtp", "email-attachments"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1538383175, "post_id": 52587153, "comment_id": 92109736, "body": "Why don&#39;t you use a higher-level module that does the heavy lifting for you? <a href=\"http://p3rl.org/MIME::Lite\" rel=\"nofollow noreferrer\">MIME::Lite</a>, <a href=\"http://p3rl.org/Email::Sender\" rel=\"nofollow noreferrer\">Email::Sender</a>..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538383188, "post_id": 52587153, "comment_id": 92109745, "body": "A couple of notes, in hope that they may help. (1) I find <code>$smpt-&gt;datasend();</code> in my code (written too long ago to remember), after sections like body.  (2) After sending <code>@messages</code> you print two <code>\\n</code> while after <code>@log_messages</code> there is one."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1538384690, "post_id": 52587153, "comment_id": 92110462, "body": "@choroba &quot;<i>MIME::Lite is not recommended by its current maintainer</i>&quot; (docs). Alternatives are given of course, but I looked once for a solid emailer, which could do just enough for me, and ended up using <code>Net::SMTP</code>."}, {"owner": {"reputation": 38299, "user_id": 3027266, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3249486ec6096e443cb8e93489fe0a09?s=128&d=identicon&r=PG&f=1", "display_name": "Wernfried Domscheit", "link": "https://stackoverflow.com/users/3027266/wernfried-domscheit"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538385027, "post_id": 52587153, "comment_id": 92110640, "body": "@zdim, yes but two <code>\\n</code> are only to beautify the common footer line"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1538385136, "post_id": 52587153, "comment_id": 92110686, "body": "@zdim There are plans to revive MIME::Lite a bit, see <a href=\"https://github.com/rjbs/MIME-Lite/pull/12\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1538385308, "post_id": 52587153, "comment_id": 92110775, "body": "Maybe try MIME::Entity?"}, {"owner": {"reputation": 38299, "user_id": 3027266, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3249486ec6096e443cb8e93489fe0a09?s=128&d=identicon&r=PG&f=1", "display_name": "Wernfried Domscheit", "link": "https://stackoverflow.com/users/3027266/wernfried-domscheit"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538385442, "post_id": 52587153, "comment_id": 92110826, "body": "As stated by @zdim, &quot;MIME::Lite&quot; is not recommended and apparently &quot;Email::Sender&quot; does not support attachments at all (did only a quick view at the docs)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1538388506, "post_id": 52587153, "comment_id": 92112393, "body": "@WernfriedDomscheit: <a href=\"https://metacpan.org/pod/Email::Sender\" rel=\"nofollow noreferrer\">Email::Sender</a> definitely supports attachment (the example in the synopsis uses Email::MIME to create the actual email). But you might look at <a href=\"https://metacpan.org/pod/Email::Stuffer\" rel=\"nofollow noreferrer\">Email::Stuffer</a>. In my opinion, it&#39;s currently the easiest way to create and send email with Perl."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1538458710, "post_id": 52587153, "comment_id": 92139185, "body": "@choroba  Thank you for that information. It&#39;d be nice to find something higher level, yet complete (and not too heavy)."}], "answers": [{"tags": [], "owner": {"reputation": 38299, "user_id": 3027266, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3249486ec6096e443cb8e93489fe0a09?s=128&d=identicon&r=PG&f=1", "display_name": "Wernfried Domscheit", "link": "https://stackoverflow.com/users/3027266/wernfried-domscheit"}, "is_accepted": false, "score": 0, "last_activity_date": 1538463620, "creation_date": 1538463620, "answer_id": 52603392, "question_id": 52587153, "link": "https://stackoverflow.com/questions/52587153/problem-with-sending-text-attachment-in-perl/52603392#52603392", "title": "Problem with sending text attachment in Perl", "body": "<p>I think the problem is solved.</p>\n\n<ul>\n<li>It works on production server at Linux</li>\n<li>It works on development Windows PC when I am working in the office</li>\n<li>It does not work on Windows when I am working at home and connected via VPN - nasty security department...</li>\n</ul>\n\n<p>Well, it is not really solved but for me it is working fine. I did not test (yet) whether it fails over VPN also for one of the higher-level packages.</p>\n"}], "owner": {"reputation": 38299, "user_id": 3027266, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3249486ec6096e443cb8e93489fe0a09?s=128&d=identicon&r=PG&f=1", "display_name": "Wernfried Domscheit", "link": "https://stackoverflow.com/users/3027266/wernfried-domscheit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 340, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1538463620, "creation_date": 1538382252, "last_edit_date": 1538394480, "question_id": 52587153, "link": "https://stackoverflow.com/questions/52587153/problem-with-sending-text-attachment-in-perl", "title": "Problem with sending text attachment in Perl", "body": "<p>I have a procedure to send mails as this:</p>\n\n<pre><code>sub SendMail {\n    my $subject = shift;\n    my @message = @_;\n    my $sender;\n\n    my $MIME_BOUNDARY = '====Multipart.Boundary.689464861147414354====';\n    my $now = strftime(\"%Y-%m-%d %H:%M:%S\", localtime);\n    my @addresses = split(\",\", $ENV{ADMIN_MAIL});\n    my $sender = $ENV{USER} || $ENV{USERNAME};\n    $sender .= \"\\@\" . hostname();\n    my $smtp = Net::SMTP-&gt;new($ENV{MAILHOST} || 'mailhost', Debug =&gt; 1);\n    unless ( $smtp ) {\n        die \"Error while sending notification mail. Not connected to SMTP server.\";\n    }\n    $smtp-&gt;mail( $addresses[0] );\n    $smtp-&gt;recipient( @addresses );\n    $smtp-&gt;data;\n    $smtp-&gt;datasend(\"From: $sender\\n\");\n    $smtp-&gt;datasend(\"To: \" . join(\",\", @addresses) . \"\\n\");\n    $smtp-&gt;datasend(\"Subject: $subject\\n\");\n    $smtp-&gt;datasend(\"Date: \" . strftime(\"%a, %d %b %Y %H:%M:%S %z\", localtime) . \"\\n\");     \n\n    if ( @log_messages ) {\n        $smtp-&gt;datasend(\"Mime-Version: 1.0\\n\");\n        $smtp-&gt;datasend(\"Content-Type: multipart/mixed; boundary=\\\"$MIME_BOUNDARY\\\"\\n\");\n        $smtp-&gt;datasend(\"This is a multipart message in MIME format.\\n\");\n        $smtp-&gt;datasend(\"--$MIME_BOUNDARY\\n\");\n    }\n\n    $smtp-&gt;datasend(\"Content-type: text/plain; charset=UTF-8\\n\");\n    $smtp-&gt;datasend(\"Content-Disposition: quoted-printable\\n\");\n    $smtp-&gt;datasend(\"\\n\");\n    foreach ( @message ) { $smtp-&gt;datasend(\"$_\\n\") }\n    $smtp-&gt;datasend(\"\\n\\n\");\n    $smtp-&gt;datasend(\"Message from \" . hostname() . \" (PID=$$) sent by 'LogDumper.pl' at $now\");\n    $smtp-&gt;datasend(\"\\n\");\n\n    if ( @log_messages ) {\n        $smtp-&gt;datasend(\"\\n\");\n        $smtp-&gt;datasend(\"--$MIME_BOUNDARY\\n\");\n        $smtp-&gt;datasend(\"Content-Type: text/plain; name=\\\"logs.txt\\\"\\n\");\n        $smtp-&gt;datasend(\"Content-Disposition: attachment; filename=\\\"logs.txt\\\"\\n\");\n        $smtp-&gt;datasend(\"\\n\");\n        foreach ( @log_messages ) { $smtp-&gt;datasend(\"$_\\n\") }\n        $smtp-&gt;datasend(\"\\n\");\n        $smtp-&gt;datasend(\"--$MIME_BOUNDARY--\\n\");\n    }\n\n    $smtp-&gt;dataend;\n    $smtp-&gt;quit;\n\n}\n</code></pre>\n\n<p>The procedure works fine with plain text mails, i.e. empty <code>@log_messages</code>. However, if I try to attach a text file</p>\n\n<pre><code>my @log_messages;\npush @log_messages, \"Line 1\";\npush @log_messages, \"Line 2\";\nSendMail(\"The Subject\", \"The Message\");\n</code></pre>\n\n<p>then the mail is not sent.</p>\n\n<p>Debug output is this:</p>\n\n<pre><code>Net::SMTP=GLOB(0x7a78a40)&lt;&lt;&lt; 354 Start mail input; end with &lt;CRLF&gt;.&lt;CRLF&gt;\nNet::SMTP=GLOB(0x7a78a40)&gt;&gt;&gt; From: Domscheit@xxxxx\nNet::SMTP=GLOB(0x7a78a40)&gt;&gt;&gt; To: wernfried.domscheit@xxxxx.xxx\nNet::SMTP=GLOB(0x7a78a40)&gt;&gt;&gt; Subject: The Suject\nNet::SMTP=GLOB(0x7a78a40)&gt;&gt;&gt; Date: Mo, 01 Okt 2018 10:15:57 W. Europe Daylight Time\nNet::SMTP=GLOB(0x7a78a40)&gt;&gt;&gt; Mime-Version: 1.0\nNet::SMTP=GLOB(0x7a78a40)&gt;&gt;&gt; Content-Type: multipart/mixed; boundary=\"====Multipart.Boundary.689464861147414354====\"\nNet::SMTP=GLOB(0x7a78a40)&gt;&gt;&gt; This is a multipart message in MIME format.\nNet::SMTP=GLOB(0x7a78a40)&gt;&gt;&gt; --====Multipart.Boundary.689464861147414354====\nNet::SMTP=GLOB(0x7a78a40)&gt;&gt;&gt; Content-type: text/plain; charset=UTF-8\nNet::SMTP=GLOB(0x7a78a40)&gt;&gt;&gt; Content-Disposition: quoted-printable\nNet::SMTP=GLOB(0x7a78a40)&gt;&gt;&gt; The Message\nNet::SMTP=GLOB(0x7a78a40)&gt;&gt;&gt; Message from xxxxx (PID=8072) sent by 'LogDumper.pl' at 2018-10-01 10:15:54\nNet::SMTP=GLOB(0x7a78a40)&gt;&gt;&gt; --====Multipart.Boundary.689464861147414354====\nNet::SMTP=GLOB(0x7a78a40)&gt;&gt;&gt; Content-Type: text/plain; name=\"logs.txt\"\nNet::SMTP=GLOB(0x7a78a40)&gt;&gt;&gt; Content-Disposition: attachment; filename=\"logs.txt\"\nNet::SMTP=GLOB(0x7a78a40)&gt;&gt;&gt; Line 1\nNet::SMTP=GLOB(0x7a78a40)&gt;&gt;&gt; Line 2\nNet::SMTP=GLOB(0x7a78a40)&gt;&gt;&gt; --====Multipart.Boundary.689464861147414354====--\nNet::SMTP=GLOB(0x7a78a40)&gt;&gt;&gt; .\nNet::SMTP: Unexpected EOF on command channel at C:\\Developing\\Source\\LogDumper.pl line 1271.\n</code></pre>\n\n<p>Apparently there is a missing or needless <code>\\n</code>. I tried to put it almost everywhere but I don't get it working.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Actually it is working when I execute the script on Linux but not on my Windows development PC.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1538381866, "post_id": 52585971, "comment_id": 92109101, "body": "Maybe you can tell us where exactly you are having problems? This is not a code writing service and we expect people to do their homework themselves."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1538463114, "post_id": 52585971, "comment_id": 92140686, "body": "I can&#39;t print out like the expected outcome."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1538463233, "post_id": 52585971, "comment_id": 92140725, "body": "You will need to show us the outcome you get and the outcome you want, and the code you use if you want advice what to change."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1538465042, "post_id": 52585971, "comment_id": 92141490, "body": "The output you show cannot come from the code you show. You never output/increment the letter in front. Maybe your problem is that you always print all stuff, but want to print empty space in some of the cases?"}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1538530067, "post_id": 52585971, "comment_id": 92171044, "body": "yes. Look at my expected outcome and the outcome that I get. I already update the missing $alphabet++."}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": 1, "last_activity_date": 1538376926, "creation_date": 1538376926, "answer_id": 52585971, "question_id": 52585640, "link": "https://stackoverflow.com/questions/52585640/how-to-print-iterate-letter-in-perl/52585971#52585971", "title": "How to print iterate letter in perl", "body": "<p>Instead of having <code>$alphabet</code>, initialize it like you do with <code>$i</code>, but with <code>a</code>. Perls <code>++</code> operator knows how to work on letters:</p>\n\n<pre><code>my $alphabet = 'a';\n\n...\n    $alphabet++;\n</code></pre>\n\n<p>Instead of having <code>$i</code> as factually global variable, declare it one loop level above where you want it to be reset:</p>\n\n<pre><code>...\nforeach my $home (@homes) {\n    my $i = 1;\n    foreach my $location (@location) {\n    ...\n        $i++\n    ....\n    };\n}\n</code></pre>\n\n<h3>See also</h3>\n\n<p><a href=\"http://perldoc.perl.org/perlop.html#Auto-increment-and-Auto-decrement\" rel=\"nofollow noreferrer\">perlop on Auto-increment</a></p>\n"}], "owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538529980, "creation_date": 1538375468, "last_edit_date": 1538529980, "question_id": 52585640, "link": "https://stackoverflow.com/questions/52585640/how-to-print-iterate-letter-in-perl", "title": "How to print iterate letter in perl", "body": "<p>I need some hindsight on how to print to get the expected outcome.How can I make automatically iterate for the letter for just the data I have, like <code>i++</code>, and how can I reset the value of <code>i</code> for each <code>HOME</code>?</p>\n\n<p>Expected Outcome:</p>\n\n<pre><code>RESIDENCE LIST\na) HOME 1   1. Albert Einstein\n            2. Adriana\n            3. Anna\n   LOCATION USA\nb) HOME 2   1. Blaine Pascal\n            2. Caroline Herschel\n            3. Cecilia Payne-Gaposchkin\n   LOCATION GERMANY\nc) HOME 3   1. Dorothy Hodgkin\n            2. Edmond Halley\n            3. Edwin Powell Hubble\n   LOCATION INDIA \n\nuse strict;\nuse warnings;\n\nmy i=1;\nmy @alphabets=(\"a\"..\"z\");\nmy @homes=qw(\nHOME1\nHOME2\nHOME3\n);\nmy @residences=qw(\nHOME1 Albert Einstein\nHOME1 Adriana\nHOME1 Anna\nHOME2 Blaine Pascal\nHOME2 Caroline Herschel\nHOME2 Cecilia Payne-Gaposchkin\nHOME3 Dorothy Hodgkin\nHOME3 Edmond Halley\nHOME3 Edwin Powell Hubble\n);\nmy @location=qw(\nUSA\nGERMANY\nINDIA\n);\n\nprint  \"RESIDENCE LIST \\n\\n\";\n\nforeach my $alphabet(@alphabets)\n{\n    print \"$alphabet)\";\n\n    foreach my  $home(@homes) \n    {\n        foreach my $location(@location)\n        {\n            foreach my $residence (@residences)\n            {\n            if ($home=~ /^residence(.*)/)\n            {\n            print \"\\thome\\t\";\n            print $i++,\")$1\\n\";     \n            }\n            }\n        print \"\\t $location\\n\"; \n    }\n\n}\n</code></pre>\n\n<p>New Script </p>\n\n<pre><code>foreach my  $home(@homes) \n{\n   my $i=1;\n   foreach my $location(@location)\n   {\n   foreach my $residence (@residences)\n   {\n       if ($home=~ /^residence(.*)/)\n       {\n       print $alphabet++.\"\\n\";\n       print \"\\thome\\t\";\n       print $i++,\")$1\\n\";      \n       }\n       else\n       {\n       next:\n       }\n    }\n\n    print \"\\t $location\\n\";\n    } \n}\n</code></pre>\n\n<p>Outcome that I get</p>\n\n<pre><code>    a) HOME 1   1. Albert Einstein\n    b) HOME 1   2. Adriana\n    c) HOME 1   3. Anna\n    d) LOCATION USA\n    e) HOME 2   1. Blaine Pascal\n    f) HOME 2   2. Caroline Herschel\n    g) HOME 2   3. Cecilia Payne-Gaposchkin\n    h) LOCATION GERMANY\n    i) HOME 3   1. Dorothy Hodgkin\n    j) HOME 3   2. Edmond Halley\n    k) HOME 3   3. Edwin Powell Hubble\n    l) LOCATION INDIA \n</code></pre>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1538376307, "post_id": 52585448, "comment_id": 92106426, "body": "<code>cmp_deeply</code> needs references to lists if you expect that to work..."}, {"owner": {"reputation": 57, "user_id": 7024449, "user_type": "registered", "profile_image": "https://graph.facebook.com/644227172406074/picture?type=large", "display_name": "Manil Puri Manil", "link": "https://stackoverflow.com/users/7024449/manil-puri-manil"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538376791, "post_id": 52585448, "comment_id": 92106654, "body": "@zdim i tried formating but its not working.. so can you help me without that?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538377602, "post_id": 52585448, "comment_id": 92107022, "body": "I added and formatted the code. It appears that you only need to pass array references to the <a href=\"https://metacpan.org/pod/Test::Deep#cmp_deeply\" rel=\"nofollow noreferrer\">Test::Deeply::cmp_deeply</a> (and a name for the test).  Then you don&#39;t have to dereference what the decoder returns either, just use arrayrefs."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538380650, "post_id": 52585448, "comment_id": 92108478, "body": "(it&#39;s <code>Test::Deep</code>, not &quot;Deeply&quot; as in the typo above. the link is valid)"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1538378999, "creation_date": 1538378999, "answer_id": 52586394, "question_id": 52585448, "link": "https://stackoverflow.com/questions/52585448/comparing-json-files-of-array-of-nested-hash-in-perl/52586394#52586394", "title": "Comparing json files of array of nested hash in perl", "body": "<pre><code>my @array1 = @{decode_json $file1};\nmy @array2 = @{decode_json $file2};\nprint cmp_deeply( @array1, @array2 );\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>my @array1 = @{decode_json $file1};\nmy @array2 = @{decode_json $file2};\nprint cmp_deeply( \\@array1, \\@array2 );\n</code></pre>\n\n<p>It would be even better to avoid the useless copying.</p>\n\n<pre><code>my $array1 = decode_json $file1;\nmy $array2 = decode_json $file2;\nprint cmp_deeply( $array1, $array2 );\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 7024449, "user_type": "registered", "profile_image": "https://graph.facebook.com/644227172406074/picture?type=large", "display_name": "Manil Puri Manil", "link": "https://stackoverflow.com/users/7024449/manil-puri-manil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "accepted_answer_id": 52586394, "answer_count": 1, "score": 0, "last_activity_date": 1538380187, "creation_date": 1538374372, "last_edit_date": 1538380187, "question_id": 52585448, "link": "https://stackoverflow.com/questions/52585448/comparing-json-files-of-array-of-nested-hash-in-perl", "title": "Comparing json files of array of nested hash in perl", "body": "<p>I have 2 JSON files file1.json and file2.json. I want to compare the contents in it in Perl Language</p>\n\n<hr>\n\n<p><em>file1.json</em></p>\n\n<pre><code>   [{\n     \"id\": 12036289,\n     \"name\": \"DEFAULT ADMIN\",\n     \"email\": \"admin@saurabh.com\",\n     \"groups\": [{\n        \"id\": 12036287,\n        \"name\": \"Service Admin\"\n     }],\n     \"department\": {\n         \"id\": 12036288,\n         \"name\": \"Service Admin\"\n     },\n     \"adminUser\": true\n  }, {\n     \"id\": 12046238,\n     \"name\": \"saurabh\",\n     \"email\": \n     \"vbdfuyqwvbvvbduiqwvbduyvbqwuidvbq@saurabh.com\",\n     \"groups\": [{\n         \"id\": 12046237,\n         \"name\": \"uiwgbfuisaufusgafuuuuuuuuuuuuugsdaaaaaaiqd\"\n     }],\n     \"department\": {\n        \"id\": 12046236,\n        \"name\": \"uiwvbdusguuuuuuuuuuuuuuugsdaaaaaaiuad2\"\n     },\n     \"adminUser\": false\n  }]\n</code></pre>\n\n<p><em>file2.json</em></p>\n\n<pre><code> [{\n    \"id\": 12046238,\n    \"name\": \"saurabh\",\n    \"email\": \n    \"vbdfuyqwvbvvbduiqwvbduyvbqwuidvbq@saurabh.com\",\n    \"groups\": [{\n       \"id\": 12046237,\n       \"name\": \"uiwgbfuisaufusgafuuuuuuuuuuuuugsdaaaaaaiqd\"\n    }],\n    \"department\": {\n       \"id\": 12046236,\n       \"name\": \"uiwvbdusguuuuuuuuuuuuuuugsdaaaaaaiuad2\"\n    },\n    \"adminUser\": false\n }, {\n   \"id\": 12036289,\n   \"name\": \"DEFAULT ADMIN\",\n   \"email\": \"admin@saurabh.com\",\n   \"groups\": [{\n       \"id\": 12036287,\n       \"name\": \"Service Admin\"\n    }],\n    \"adminUser\": true,\n    \"department\": {\n       \"id\": 12036288,\n       \"name\": \"Service Admin\"\n     }\n }]\n</code></pre>\n\n<p>Here the contents are not in order but same. What i tried was to decode the json file and compare the arrays using <code>cmp_deeply()</code> function. But i was not able to do that. Do anyone have some approach to this problem?</p>\n\n<hr>\n\n<p><strong>EDIT</strong> &nbsp; code supplied in a comment</p>\n\n<pre><code>use strict; \nuse warnings;\nuse JSON;\nuse Test::Deep;\n\nmy $file1;\n#slurp mode \n{ \n    open(FILE,'&lt;','file1.json');\n    local $/ = undef;\n    $file1 = &lt;FILE&gt;;\n}\n\nmy $file2;\n#slurp mode\n{ \n    open(FILE,'&lt;','file2.json');\n    local $/ = undef;\n    $file2 = &lt;FILE&gt;;\n}\n\nmy @array1 = @{decode_json $file1};\nmy @array2 = @{decode_json $file2};\nprint @array1;\n\nprint cmp_deeply( @array1, @array2 );\n</code></pre>\n"}, {"tags": ["regex", "perl", "sed"], "comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1538720301, "post_id": 52583763, "comment_id": 92249016, "body": "Sorry, i don&#39;t get the above example correctly executed.  Can you double check which shell are you using.  With bash I only get <i>one</i> such quote."}, {"owner": {"reputation": 7256, "user_id": 418966, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81cf776adb922e444a0a771a8a4724e5?s=128&d=identicon&r=PG", "display_name": "Cyker", "link": "https://stackoverflow.com/users/418966/cyker"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1538726897, "post_id": 52583763, "comment_id": 92252271, "body": "@LuisColorado Hello I tested it again but it&#39;s two quotes in the first case. Shell is GNU Bash 4.4."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1538727271, "post_id": 52583763, "comment_id": 92252482, "body": "you have been answered with the right thing by @shawn below (a gnu sed improvement???), I was using a non GNU sed(1), as my Mac has a <code>sed(1)</code> derived from BSD code.  So it didn&#39;t show your issue. Before making such an improvement, GNU guys should check the compatibility issues related to that, and document them with neon lights, directing you to the problem."}, {"owner": {"reputation": 7256, "user_id": 418966, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81cf776adb922e444a0a771a8a4724e5?s=128&d=identicon&r=PG", "display_name": "Cyker", "link": "https://stackoverflow.com/users/418966/cyker"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1538728149, "post_id": 52583763, "comment_id": 92252964, "body": "@LuisColorado Well yes I&#39;m on Linux so it&#39;s GNU sed. The result is explained as a GNU extension. I think I should add sed version in the question. Thank you for confirming the problem doesn&#39;t manifest itself on mac systems."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1538728662, "post_id": 52583763, "comment_id": 92253214, "body": "Mac OS derives from BSD systems, not from GNU, so many tools don&#39;t show same behaviour as GNU&#39;s."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1538363602, "post_id": 52584090, "comment_id": 92103134, "body": "Right on, but I&#39;d also add a comment that it all starts from escaping <code>&#39;</code> needlessly"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538367470, "post_id": 52584090, "comment_id": 92103855, "body": "Re &quot;<i>Since <code>\\&#39;</code> isn&#39;t a special sequence in perl regular expressions</i>&quot;, More specifically, <code>\\ </code> followed by a non-word character (such as <code>&#39;</code>) is guaranteed to match just that character in Perl."}, {"owner": {"reputation": 7256, "user_id": 418966, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81cf776adb922e444a0a771a8a4724e5?s=128&d=identicon&r=PG", "display_name": "Cyker", "link": "https://stackoverflow.com/users/418966/cyker"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538383308, "post_id": 52584090, "comment_id": 92109802, "body": "@zdim Actually I was trying to replace <code>&#39;</code> with <code>\\&#39;</code>, but I found I need quite a few escapes: <code>echo &quot;&#39;&quot; | perl -pe  &quot;s&#47;&#39;&#47;\\\\\\&#39;&#47;&quot;</code>. This means the replacement word expects <code>\\\\&#39;</code> but not <code>\\&#39;</code>. Any docs on this?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7256, "user_id": 418966, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81cf776adb922e444a0a771a8a4724e5?s=128&d=identicon&r=PG", "display_name": "Cyker", "link": "https://stackoverflow.com/users/418966/cyker"}, "edited": false, "score": 0, "creation_date": 1538383588, "post_id": 52584090, "comment_id": 92109914, "body": "@Cyker For one, you don&#39;t need to escape <code>&#39;</code> in a regex, so <code>perl -pe &quot;s&#47;&#39;&#47;&#39;&#47;&quot;;</code> (same in sed). Then, if you do, in Perl there is no problem like the one in <code>sed</code> (where <code>\\&#39;</code> has that special meaning in GNU&#39;s version), so  <code>perl -pe&quot;s&#47;\\&#39;&#47;\\&#39;&#47;&quot;</code> does the same.  Finally, you can keep <code>&#39;</code> for delimiters and use <code>\\x27</code> for single quote -- <code>echo &quot;&#39;&quot; | perl -pe&#39;s&#47;\\x27&#47;quote&#47;&#39;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7256, "user_id": 418966, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81cf776adb922e444a0a771a8a4724e5?s=128&d=identicon&r=PG", "display_name": "Cyker", "link": "https://stackoverflow.com/users/418966/cyker"}, "edited": false, "score": 0, "creation_date": 1538384009, "post_id": 52584090, "comment_id": 92110128, "body": "@Cyker Oh, sorry, I see now what you mean ... the problem is the backslash there"}, {"owner": {"reputation": 7256, "user_id": 418966, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81cf776adb922e444a0a771a8a4724e5?s=128&d=identicon&r=PG", "display_name": "Cyker", "link": "https://stackoverflow.com/users/418966/cyker"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538384080, "post_id": 52584090, "comment_id": 92110162, "body": "@zdim Well, you got it. So I need a doc confirming <code>\\&#39;</code> is the same as <code>&#39;</code> in a regex (if so), whether it&#39;s sed or perl."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7256, "user_id": 418966, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81cf776adb922e444a0a771a8a4724e5?s=128&d=identicon&r=PG", "display_name": "Cyker", "link": "https://stackoverflow.com/users/418966/cyker"}, "edited": false, "score": 0, "creation_date": 1538384210, "post_id": 52584090, "comment_id": 92110232, "body": "@Cyker If you meant that you have a <code>&#39;</code> and want <code>\\&#39;</code> instead, this isn&#39;t too bad: <code>&quot;s&#47;&#39;&#47;\\\\&#39;&#47;&quot;</code>. Or, if there&#39;s actually more to do:  <code>&#39;s&#47;\\x27&#47;q(\\\\).q(&#39;)&#47;e&#39;</code>. With <code>&#47;e</code> it evaluates the replacement part as code what may make it easier sometimes to set things straight."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7256, "user_id": 418966, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81cf776adb922e444a0a771a8a4724e5?s=128&d=identicon&r=PG", "display_name": "Cyker", "link": "https://stackoverflow.com/users/418966/cyker"}, "edited": false, "score": 0, "creation_date": 1538384500, "post_id": 52584090, "comment_id": 92110374, "body": "@Cyker  Re: &quot;<i>whether it&#39;s sed or perl</i>&quot; -- it&#39;s not the same in sed: in GNU&#39;s version <code>\\&#39;</code> is the line-end anchor while <code>&#39;</code> is just the literal. In Perl though the <code>\\&#39;</code> is the same as <code>&#39;</code> (escapes have no effect on non-word characters)."}, {"owner": {"reputation": 7256, "user_id": 418966, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81cf776adb922e444a0a771a8a4724e5?s=128&d=identicon&r=PG", "display_name": "Cyker", "link": "https://stackoverflow.com/users/418966/cyker"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538384835, "post_id": 52584090, "comment_id": 92110539, "body": "@zdim Basically <code>\\&#39;</code> means different things in the search word and replacement word, in sed. Just had some fun with this: <code>echo &quot;foo&#39;foo&quot; | sed &quot;s&#47;foo&#39;foo&#47;bar\\&#39;bar&#47;&quot;</code> and <code>echo &quot;foo&#39;foo&quot; | sed &quot;s&#47;foo\\&#39;foo&#47;bar\\&#39;bar&#47;&quot;</code>. Things are more consistent in perl."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7256, "user_id": 418966, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81cf776adb922e444a0a771a8a4724e5?s=128&d=identicon&r=PG", "display_name": "Cyker", "link": "https://stackoverflow.com/users/418966/cyker"}, "edited": false, "score": 0, "creation_date": 1538384986, "post_id": 52584090, "comment_id": 92110614, "body": "@Cyker Well, yes -- the difference between Perl and sed for this is in the matching part, where in sed <code>\\&#39;</code> has the special meaning (in GNU), while in Perl it doesn&#39;t.  In the replacement part the <code>&#39;</code> and <code>\\&#39;</code> are the same in both languages."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 8, "last_activity_date": 1538364019, "last_edit_date": 1538364019, "creation_date": 1538363093, "answer_id": 52584090, "question_id": 52583763, "link": "https://stackoverflow.com/questions/52583763/substitute-single-quotes-in-sed-and-perl/52584090#52584090", "title": "substitute single quotes in sed and perl", "body": "<p>You're using GNU sed, right? <code>\\'</code> is an extension that acts as an anchor for end-of-string in GNU's implementation of basic regular expressions. So you're seeing two quotes in the output because the <code>s</code> matches the end of the line and adds a quote, after the one that was already in the line.</p>\n\n<p>To make it a bit more obvious:</p>\n\n<pre><code>echo foo | sed -e \"s/\\'/@/\"\n</code></pre>\n\n<p>produces</p>\n\n<pre><code>foo@\n</code></pre>\n\n<p>Documented <a href=\"https://www.regular-expressions.info/gnu.html\" rel=\"noreferrer\">here</a>, and in the <a href=\"https://www.gnu.org/software/sed/manual/html_node/regexp-extensions.html#regexp-extensions\" rel=\"noreferrer\">GNU sed manual</a></p>\n\n<p>Edit: The equivalent in perl is <code>\\Z</code> (or maybe <code>\\z</code> depending on how you want to handle a trailing newline). Since <code>\\'</code> isn't a special sequence in perl regular expressions, it just matches a literal quote. As mentioned in the other answer and comments, escaping a single quote inside a double quoted string isn't necessary, and as you've found, can potentially result in unintended behavior.</p>\n"}], "owner": {"reputation": 7256, "user_id": 418966, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81cf776adb922e444a0a771a8a4724e5?s=128&d=identicon&r=PG", "display_name": "Cyker", "link": "https://stackoverflow.com/users/418966/cyker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 643, "favorite_count": 0, "accepted_answer_id": 52584090, "answer_count": 1, "score": 3, "last_activity_date": 1538728216, "creation_date": 1538359536, "last_edit_date": 1538728216, "question_id": 52583763, "link": "https://stackoverflow.com/questions/52583763/substitute-single-quotes-in-sed-and-perl", "title": "substitute single quotes in sed and perl", "body": "<p>Could someone please explain what was happening with these two commands? Why do <code>sed</code> and <code>perl</code> give different results running the same regular expression pattern:</p>\n\n<pre><code># echo \"'\" | sed -e \"s/\\'/\\'/\"\n''\n# echo \"'\" | perl -pe \"s/\\'/\\'/\"\n'\n# sed --version\nsed (GNU sed) 4.5\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 8026, "user_id": 1320303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9020a80cda52e7a425d4824ad572b241?s=128&d=identicon&r=PG", "display_name": "mttrb", "link": "https://stackoverflow.com/users/1320303/mttrb"}, "is_accepted": true, "score": 7, "last_activity_date": 1538360267, "creation_date": 1538360267, "answer_id": 52583842, "question_id": 52583758, "link": "https://stackoverflow.com/questions/52583758/what-does-string-dot-dot-string-give-in-perl/52583842#52583842", "title": "what does string dot dot string give in perl?", "body": "<p>Perl is incrementing the string between the two ranges that you've specified.</p>\n\n<p>Starting with <code>Jan</code> the next entry is <code>Jao</code> (as <code>o</code> follows <code>n</code>).  When we get to <code>Jaz</code> the next entry is <code>Jba</code>.</p>\n\n<p>In your particular example the final entry is <code>Zzz</code> rather than <code>Dec</code> because <code>Dec</code> comes before <code>Jan</code> alphabetically and is, therefore, never reached.</p>\n\n<p>See <a href=\"https://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"noreferrer\">Perl Range Operators</a> for more information.</p>\n"}], "owner": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 52583842, "answer_count": 1, "score": 2, "last_activity_date": 1538360267, "creation_date": 1538359502, "question_id": 52583758, "link": "https://stackoverflow.com/questions/52583758/what-does-string-dot-dot-string-give-in-perl", "title": "what does string dot dot string give in perl?", "body": "<p>I am learning perl and I was trying something silly like </p>\n\n<pre><code>@months=('Jan'..'Dec');\nprint \"The dates are: @months\\n\";\n</code></pre>\n\n<p>and I got lots of three letter words as output. Can someone please explain what is perl doing here?</p>\n"}, {"tags": ["file", "perl", "search", "grep"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1538327245, "post_id": 52580076, "comment_id": 92095519, "body": "With small files like that you can use <a href=\"https://metacpan.org/pod/File::Slurper\" rel=\"nofollow noreferrer\">File::Slurper</a> to read them into a single string and look for your 800 words in that all in one go; search 800 times each file instead of 800 times each line in each file."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1538352553, "post_id": 52580076, "comment_id": 92101360, "body": "How big are the files? And, are the 800 strings plain old strings, or are they regular expressions?  Finally, within the files, must the strings be found verbatim, or could there be differences in whitespace such as newlines?"}, {"owner": {"reputation": 27, "user_id": 2854259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a36c4f4fed0dc56e9b372a88b53b570a?s=128&d=identicon&r=PG&f=1", "display_name": "user2854259", "link": "https://stackoverflow.com/users/2854259/user2854259"}, "edited": false, "score": 0, "creation_date": 1538361155, "post_id": 52580076, "comment_id": 92102763, "body": "The two files are roughly 500kb each and the all strings that are to be searched are plain strings of length 12. When we search these strings in those files, they should make an exact match and there wont be any whitespaces between them."}, {"owner": {"reputation": 27, "user_id": 2854259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a36c4f4fed0dc56e9b372a88b53b570a?s=128&d=identicon&r=PG&f=1", "display_name": "user2854259", "link": "https://stackoverflow.com/users/2854259/user2854259"}, "edited": false, "score": 0, "creation_date": 1538363877, "post_id": 52580076, "comment_id": 92103181, "body": "Sorry guys, I forgot to mention that while searching for the strings, i also need to note down the line number in which the strings were found. So in case if I use the File::Slurper method as mentioned above, will i be able to get the line number ?"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 3, "last_activity_date": 1538329396, "last_edit_date": 1538329396, "creation_date": 1538327779, "answer_id": 52580275, "question_id": 52580076, "link": "https://stackoverflow.com/questions/52580076/search-a-string-in-multiple-files-using-perl/52580275#52580275", "title": "Search a string in multiple files using Perl", "body": "<p>Here is an example using <a href=\"https://metacpan.org/pod/Regexp::Assemble\" rel=\"nofollow noreferrer\"><code>Regexp::Assemble</code></a>. Assuming the strings to be matched does not span multiple lines, it creates a common regex for all the strings that can be checked for each line. Hence, it only needs to read the files once.</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\nuse Regexp::Assemble;\n\nmy @strings = qw(abc efg);  # &lt;- Add more strings here\n\nmy $ra = Regexp::Assemble-&gt;new;\n$ra-&gt;add( $_ ) for @strings;  # &lt;- Creates a regexp that matches all the strings..\nmy $re = $ra-&gt;re;\nmy @files = qw(file1.txt file2.txt);  # &lt;- Add more files if needed..\nmy @matches;\nfor my $file (@files) {\n    push @matches, get_matches( $file, $re );\n}\n# Now post process the matches as you like..\n\nsub get_matches {\n    my ( $fn, $re ) = @_;\n\n    my %matches;\n    open ( my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\n    while (my $line = &lt;$fh&gt;) {\n        while ( $line =~ /($re)/g ) {\n            $matches{$1}++;\n        }\n    }\n    close $fh;\n    return \\%matches;\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 2854259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a36c4f4fed0dc56e9b372a88b53b570a?s=128&d=identicon&r=PG&f=1", "display_name": "user2854259", "link": "https://stackoverflow.com/users/2854259/user2854259"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1538329396, "creation_date": 1538326409, "question_id": 52580076, "link": "https://stackoverflow.com/questions/52580076/search-a-string-in-multiple-files-using-perl", "title": "Search a string in multiple files using Perl", "body": "<p>Newbie to Perl!! need some help :)\nI have 2 files of size nearly 500kb each.</p>\n\n<p>And i need to search a set of strings (approx 800 strings) in these files to check if the string in present in file 1, file 2 or in both or neither of them. </p>\n\n<p>The only option that i am aware of is to open file1, read line by line and check is the string is present in it and do the same with file2. \nDoing the entire process for nearly 800 strings (search strings) dont seem to be good nor effective.</p>\n\n<p>Is there any other alternative which is more efficient or a single line code for it using PERL ?</p>\n"}, {"tags": ["bash", "perl", "escaping"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1538323533, "post_id": 52579307, "comment_id": 92094368, "body": "Do you want to add before the line with <code>require_tree</code>, or do you want to change the line with <code>require_tree</code>?"}, {"owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1538323646, "post_id": 52579307, "comment_id": 92094412, "body": "as long as we end up with the output looking exactly as mentioned in the question, i don&#39;t care"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1538323840, "post_id": 52579307, "comment_id": 92094477, "body": "Then you could simply do: <code>perl -piE &#39;&#47;\\*= require_tree&#47; and say &quot; *= require iziToast&quot;&#39; test.css</code> to add the line <code>&quot; *= require iziToast&quot;</code> before the line with <code>require_tree</code>"}], "answers": [{"comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1538328898, "post_id": 52579790, "comment_id": 92095946, "body": "OP said that a solution based on line numbers won&#39;t work. Picture the line he wants to insert before being the 200th line, not the 3rd"}], "tags": [], "owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 0, "last_activity_date": 1538324428, "creation_date": 1538324428, "answer_id": 52579790, "question_id": 52579307, "link": "https://stackoverflow.com/questions/52579307/perl-pi-e-cannot-substitute-lines-with-asterisk-maybe-im-not-escaping-prope/52579790#52579790", "title": "Perl -pi -e cannot substitute lines with asterisk - maybe I&#39;m not escaping properly", "body": "<p>I wouldn't even use Perl for this; you can simply use <code>sed</code>.</p>\n\n<pre><code>$ sed '3i\\\n&gt; \\ *= require iziToast\n&gt; ' tmp.txt\n * It is generally better to create a new file per style scope.\n *\n *= require iziToast\n *= require_tree .\n *= require_self\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "edited": false, "score": 0, "creation_date": 1538336422, "post_id": 52581338, "comment_id": 92098105, "body": "why did you resort to using an if conditional. why can&#39;t s/// do it"}, {"owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "edited": false, "score": 0, "creation_date": 1538336478, "post_id": 52581338, "comment_id": 92098120, "body": "by the way the capitalization changes were just trash/experiments. The real task is adding &quot;*= require iziToast&quot; just before the &quot;*= require_tree .&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "edited": false, "score": 0, "creation_date": 1538337779, "post_id": 52581338, "comment_id": 92098479, "body": "I &quot;resorted&quot; to using <code>print</code> because I wanted to print something, not replace something :) But yeah, you could use s///. Updated my answer"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1538337462, "last_edit_date": 1538337462, "creation_date": 1538335332, "answer_id": 52581338, "question_id": 52579307, "link": "https://stackoverflow.com/questions/52579307/perl-pi-e-cannot-substitute-lines-with-asterisk-maybe-im-not-escaping-prope/52581338#52581338", "title": "Perl -pi -e cannot substitute lines with asterisk - maybe I&#39;m not escaping properly", "body": "<p><code>*</code> and <code>.</code> are special in regex patterns. You must use <code>\\*</code> and <code>\\.</code> to match <code>*</code> and <code>.</code>.</p>\n\n<pre><code>perl -i -pe'print \" *= require iziToast\\n\" if /^ \\*= require_tree \\.$/' file\n</code></pre>\n\n<p>or</p>\n\n<pre><code>perl -i -pe's/^(?= \\*= require_tree \\.$)/ *= require iziToast\\n/' file\n</code></pre>\n"}], "owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 52581338, "answer_count": 2, "score": 0, "last_activity_date": 1538337462, "creation_date": 1538321214, "last_edit_date": 1538325776, "question_id": 52579307, "link": "https://stackoverflow.com/questions/52579307/perl-pi-e-cannot-substitute-lines-with-asterisk-maybe-im-not-escaping-prope", "title": "Perl -pi -e cannot substitute lines with asterisk - maybe I&#39;m not escaping properly", "body": "<p>I've been using the perl pie mentioned in <a href=\"https://stackoverflow.com/questions/28131528/what-does-exactly-perl-pi-e-do\">SO</a> without success. What am I doing wrong:</p>\n\n<pre><code> * It is generally better to create a new file per style scope.\n *\n *= require_tree .\n *= require_self\n</code></pre>\n\n<p>I want the file to end up looking like this after doing perl pie</p>\n\n<pre><code> * It is generally better to create a new file per style scope.\n *\n *= require iziToast\n *= require_tree .\n *= require_self\n</code></pre>\n\n<p>I wasted one hour with silly attempts like this:</p>\n\n<pre><code>  828  perl -pi -e 's/  *= require_tree ./  *= Require_tree ./' app/assets/stylesheets/application.css.scss\n  832  perl -pi -e 's/require_tree \\./Require_tree \\./' app/assets/stylesheets/application.css.scss\n  837  perl -pi -e 's/  \\*\\= require_tree \\./  \\*\\= Require_tree \\./' app/assets/stylesheets/application.css.scss\n  839  perl -pi -e 's/= require_tree \\./= Require_tree \\./'       864  perl -pi -e 's/\\*/\\Q*/' app/assets/stylesheets/application.css.scss\n  868  perl -pi -e 's/\\*/\\Q*/' app/assets/stylesheets/application.css.scss\n  874  perl -pi -e 's/\\*/*/' app/assets/stylesheets/application.css.scss\n  876  perl -pi -e 's/\\*/\\*/' app/assets/stylesheets/application.css.scss\n  878  perl -pi -e 's/\\*/s/' app/assets/stylesheets/application.css.scss\n  898  git checkout app/; perl -pi -e 's/\\(\\*\\)/$1/' app/assets/stylesheets/application.css.scss; git diff\n  900  git checkout app/; perl -pi -e 's/(*)/$1/' app/assets/stylesheets/application.css.scss; git diff\n  901  git checkout app/; perl -pi -e 's/(\\*)/$1/' app/assets/stylesheets/application.css.scss; git diff\n  903  git checkout app/; perl -pi -e 's/(\\\\*)/$1/' app/assets/stylesheets/application.css.scss; git diff\n  905  git checkout app/; perl -pi -e 's/\\(\\*\\)/$1/' app/assets/stylesheets/application.css.scss; git diff\n  907  git checkout app/; perl -pi -e 's/^(.*)/foo/' app/assets/stylesheets/application.css.scss; git diff\n  908  git checkout app/; perl -pi -e 's/^  (.*)/foo/' app/assets/stylesheets/application.css.scss; git diff\n  924  git checkout app/; perl -pi -e 's/^(.*)/\\1/' app/assets/stylesheets/application.css.scss; git diff\n  925  git checkout app/; perl -pi -e 's/^(.*)/\\\\1/' app/assets/stylesheets/application.css.scss; git diff\n</code></pre>\n\n<p>System: Mac 10.13.5, bash 3.2, perl 5.18</p>\n\n<p>Notes: A line number based approach is not ideal for me because line numbers are not very future-proof<br>\nSince question title mentions perl, looking for a perl answer.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1538313805, "post_id": 52578216, "comment_id": 92091649, "body": "Why are you trying to do it from a perl script? Isn&#39;t it just <code>perldoc perldoc &gt; D:\\perldoc.txt</code> in cmd?"}, {"owner": {"reputation": 5, "user_id": 10305571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pHQ6Eh3WrkU/AAAAAAAAAAI/AAAAAAAAAGo/7I1BtePPSAE/photo.jpg?sz=128", "display_name": "shanuj garg", "link": "https://stackoverflow.com/users/10305571/shanuj-garg"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1538323652, "post_id": 52578216, "comment_id": 92094413, "body": "Yes it is! but how to do it using a script , or say you are doing some processing in perl getting a output, then how to get that into a txt file using perl?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1538329029, "post_id": 52578216, "comment_id": 92095989, "body": "In Perl I could run <code>system &#39;perldoc perldoc &gt; D:\\\\perldoc.txt&#39;;</code>. If I wanted to put the result of some calculations into a file, I&#39;d do it like your code: open the file, print to it, then close it."}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1538329414, "creation_date": 1538329414, "answer_id": 52580506, "question_id": 52578216, "link": "https://stackoverflow.com/questions/52578216/copying-inbuilt-perl-documentation-into-txt-file/52580506#52580506", "title": "Copying inbuilt perl documentation into txt file", "body": "<p>See <a href=\"https://perldoc.pl/perlop#qx/STRING/\" rel=\"nofollow noreferrer\">https://perldoc.pl/perlop#qx/STRING/</a> for how to run a command and capture its output in Perl. But another option in this case is to use modules directly.</p>\n\n<p>First <a href=\"https://metacpan.org/pod/Pod::Simple::Search\" rel=\"nofollow noreferrer\">Pod::Simple::Search</a> to find the perldoc:</p>\n\n<pre><code>use Pod::Simple::Search;\nmy $path = Pod::Simple::Search-&gt;find('perldoc'); # or the name of the module/documentation you want to read\n</code></pre>\n\n<p>Then <a href=\"https://metacpan.org/pod/Pod::Simple::Text\" rel=\"nofollow noreferrer\">Pod::Simple::Text</a> to convert it to text:</p>\n\n<pre><code>use Pod::Simple::Text;\nmy $parser = Pod::Simple::Text-&gt;new;\n$parser-&gt;output_string(\\my $text);\n$parser-&gt;parse_file($path);\n</code></pre>\n\n<p>Finally, <a href=\"https://metacpan.org/pod/File::Slurper\" rel=\"nofollow noreferrer\">File::Slurper</a> or <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> to write out the text after whatever modifications.</p>\n\n<pre><code>use File::Slurper 'write_text';\nmy $outfile = 'perldoc.txt';\nwrite_text($outfile, $text);\n</code></pre>\n\n<p>-or-</p>\n\n<pre><code>use Path::Tiny;\nmy $outfile = 'perldoc.txt';\npath($outfile)-&gt;spew_utf8($text);\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 10305571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pHQ6Eh3WrkU/AAAAAAAAAAI/AAAAAAAAAGo/7I1BtePPSAE/photo.jpg?sz=128", "display_name": "shanuj garg", "link": "https://stackoverflow.com/users/10305571/shanuj-garg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1538329414, "creation_date": 1538313344, "question_id": 52578216, "link": "https://stackoverflow.com/questions/52578216/copying-inbuilt-perl-documentation-into-txt-file", "title": "Copying inbuilt perl documentation into txt file", "body": "<p>I want to copy the perl documentation which is inbuilt in perl 5.28 into a txt file. I am trying it as :</p>\n\n<pre><code>  my $file =  \"D:/perldoc.txt\";\n  open(my $fh , '&gt;',$file) or die \"file not found\" ;\n  print  $fh \"perl doc\\n\";\n\n  #perldoc perldoc;                   NOT HELPING\n  #$fh = perldoc perldoc;             NOT HELPING\n\n  close $fh; \n  print \"done\\n\";                                                           \n</code></pre>\n\n<p>The method I am trying isn't correct, Please correct me.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1538261069, "post_id": 52570890, "comment_id": 92082619, "body": "You have to be more clear. Are you looking 1 character in the set, occurring multiple times, while at the same time the others should <i>not</i> exist multiple times ?"}, {"owner": {"reputation": 9, "user_id": 10434361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abcd3142d09d46a4e68ab459af1639e8?s=128&d=identicon&r=PG&f=1", "display_name": "test_student", "link": "https://stackoverflow.com/users/10434361/test-student"}, "edited": false, "score": 0, "creation_date": 1538326696, "post_id": 52570890, "comment_id": 92095351, "body": "I am looking that only one of the character should occur out of these 5 characters and that one character can repeat. &quot;ghijkaa&quot; should be matched where as &quot;ghijkaab&quot; should not be matched"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1538437995, "post_id": 52570890, "comment_id": 92135109, "body": "Then the general solution you seek is <code>^[^a-e]*([a-e])(?:\\1|[^a-e])*\\z</code> which is ikegami&#39;s second regex"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538266258, "post_id": 52571528, "comment_id": 92083306, "body": "How does this tell us that <code>availing</code> matches and <code>avocado</code> doesn&#39;t?"}, {"owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538274451, "post_id": 52571528, "comment_id": 92084337, "body": "I was a little unsure about exactly what the question was getting at. And i could see the questioner getting down votes. So i thought i put the questioner on the right track and they can comment if they&#39;re still lost....."}], "tags": [], "owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "is_accepted": false, "score": 0, "last_activity_date": 1538247306, "creation_date": 1538247306, "answer_id": 52571528, "question_id": 52570890, "link": "https://stackoverflow.com/questions/52570890/exactly-once-from-a-set-of-characters-perl-using-regex/52571528#52571528", "title": "exactly once from a set of characters perl using regex", "body": "<p>you can use regex to return a list of matches. then you can store the result in an array.</p>\n\n<pre><code>my @arr = \"abcdeaa\" =~ /a/g; print scalar @arr .\"\\n\";\n</code></pre>\n\n<p>prints 3</p>\n\n<pre><code> my @arr = \"bcde\" =~ /a/g; print scalar @arr .\"\\n\";\n</code></pre>\n\n<p>prints 0</p>\n\n<p>if you use scalar @arr. it will return the length of the array. </p>\n"}, {"comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1538269236, "post_id": 52573492, "comment_id": 92083730, "body": "What are <code>*+</code> and <code>++</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1538269834, "post_id": 52573492, "comment_id": 92083816, "body": "They are like <code>*</code> and <code>+</code>, but they won&#39;t match less than the max. E.g., <code>&#47;^a++a&#47;</code> can&#39;t possibly match. In my answer,  they are purely being used as an optimisation to speed up backtracking, so they can safely be replaced with <code>*</code> and <code>+</code>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1538327978, "last_edit_date": 1538327978, "creation_date": 1538265384, "answer_id": 52573492, "question_id": 52570890, "link": "https://stackoverflow.com/questions/52570890/exactly-once-from-a-set-of-characters-perl-using-regex/52573492#52573492", "title": "exactly once from a set of characters perl using regex", "body": "<p>You could use the following regex match:</p>\n\n<pre><code>/\n   ^\n   [^a-e]*+\n   (?: a [^bcde]*+\n   |   b [^acde]*+\n   |   c [^abde]*+\n   |   d [^abce]*+\n   |   e [^abcd]*+\n   )\n   \\z\n/x\n</code></pre>\n\n<p>The following is a simpler pattern that might be less efficient:</p>\n\n<pre><code>/ ^ [^a-e]*+ ([a-e]) (?: \\1|[^a-e] )*+ \\z /x\n</code></pre>\n\n<p>A non-regex solution might be simpler.</p>\n\n<pre><code># Count the number of instances of each letter.\nmy %chars;\n++$chars{$_} for split //;\n\n# Count how many of [a-e] are found.\nmy $count = 0;\n++$count for grep $chars{$_}, qw( a b c d e );\n\n$count == 1\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 10434361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abcd3142d09d46a4e68ab459af1639e8?s=128&d=identicon&r=PG&f=1", "display_name": "test_student", "link": "https://stackoverflow.com/users/10434361/test-student"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1538327978, "creation_date": 1538242560, "question_id": 52570890, "link": "https://stackoverflow.com/questions/52570890/exactly-once-from-a-set-of-characters-perl-using-regex", "title": "exactly once from a set of characters perl using regex", "body": "<p>how to check exactly one character from a group of characters in perl using regexp.Suppose from (abcde) i want to check if out of all these 5 characters only one has occured which can occur multiple times.I have tried quantifiers but it does not work for a set of characters.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 1049, "user_id": 843660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c7239f187e20979466ddd502e21733f?s=128&d=identicon&r=PG", "display_name": "dskrvk", "link": "https://stackoverflow.com/users/843660/dskrvk"}, "edited": false, "score": 3, "creation_date": 1538243617, "post_id": 52570875, "comment_id": 92078682, "body": "You&#39;re missing a final <code>$</code> to make this a full-string match. Without it, you&#39;re allowing any symbols after the optional group <code>[\\-\\_\\.a-zA-Z0-9]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 2, "last_activity_date": 1538255378, "creation_date": 1538255378, "answer_id": 52572568, "question_id": 52570875, "link": "https://stackoverflow.com/questions/52570875/how-to-match-a-file-which-starts-with-alphanumeric-characters-and-has-only-three/52572568#52572568", "title": "How to match a file which starts with alphanumeric characters and has only three of these special characters . _ -?", "body": "<p>The problem is that your regex is anchored at the beginning (<code>^</code>), but not at the end. Any <code>$file</code> that <em>starts with</em> a valid filename is accepted. Since <code>5#</code> starts with <code>5</code>, it goes through.</p>\n\n<p>Fix:</p>\n\n<pre><code>if ($file !~ /^[a-zA-Z0-9][\\-_.a-zA-Z0-9]*\\z/) {\n    print \"error: invalid filename\\n\";\n}\n</code></pre>\n\n<p><code>\\z</code> matches only at the end of the string, anchoring the pattern at the end.</p>\n\n<p><code>_</code> is not a regex metacharacter and does not need to be escaped. <code>.</code> is not a metacharacter in a <code>[</code> <code>]</code> group.</p>\n"}], "owner": {"reputation": 11, "user_id": 9448812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbfb44d4c463d762a2fa1d9c03841564?s=128&d=identicon&r=PG&f=1", "display_name": "Adith Kumar", "link": "https://stackoverflow.com/users/9448812/adith-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538255385, "creation_date": 1538242423, "last_edit_date": 1538255385, "question_id": 52570875, "link": "https://stackoverflow.com/questions/52570875/how-to-match-a-file-which-starts-with-alphanumeric-characters-and-has-only-three", "title": "How to match a file which starts with alphanumeric characters and has only three of these special characters . _ -?", "body": "<p>I am a beginner in perl and wanted to match files that start with A-Z and 0-9. They also contain only <code>. _ -</code> special characters.<br>\nThis is what I have so far:</p>\n\n<pre><code>if (($file !~ /^[a-zA-Z0-9][\\-\\_\\.a-zA-Z0-9]*/)) {\n    print (\"error: invalid filename\");\n}\n</code></pre>\n\n<p>I tested the program and it can find file name errors like -5, $5, #5,\nbut it cannot catch file names with errors like 5#, 5%, 5@ etc\u2026</p>\n\n<p>I couldn't find out the real issue at all. What am I doing wrong?</p>\n"}, {"tags": ["perl", "cgi", "password-encryption", "argon2-ffi"], "comments": [{"owner": {"reputation": 10803, "user_id": 2548147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfKie.jpg?s=128&g=1", "display_name": "Raymond Nijland", "link": "https://stackoverflow.com/users/2548147/raymond-nijland"}, "edited": false, "score": 1, "creation_date": 1538220245, "post_id": 52567810, "comment_id": 92072747, "body": "<code>$my $password = cgi-&gt;param (&quot;password&quot;);</code>  typing errors? compare it with the other line with username.. i voted closed this question because it looks like a simple typographical error"}, {"owner": {"reputation": 3, "user_id": 9215414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be9a27d38395c567be23cafb8f22802e?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/9215414/angel"}, "reply_to_user": {"reputation": 10803, "user_id": 2548147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfKie.jpg?s=128&g=1", "display_name": "Raymond Nijland", "link": "https://stackoverflow.com/users/2548147/raymond-nijland"}, "edited": false, "score": 0, "creation_date": 1538220850, "post_id": 52567810, "comment_id": 92072881, "body": "The is no error in the original code i just retyped the last 5 lines to format them . The error for typo would be different than the given"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1538221441, "post_id": 52567810, "comment_id": 92073044, "body": "Have you checked that you actually get a result in <code>@row</code> ? The error that gets raised suggests that either <code>$encoded</code> or <code>$pass</code> are undefined."}, {"owner": {"reputation": 3, "user_id": 9215414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be9a27d38395c567be23cafb8f22802e?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/9215414/angel"}, "edited": false, "score": 0, "creation_date": 1538221680, "post_id": 52567810, "comment_id": 92073103, "body": "Yes i`m getting  the hashed password"}], "answers": [{"tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": 2, "last_activity_date": 1538223418, "creation_date": 1538223418, "answer_id": 52568291, "question_id": 52567810, "link": "https://stackoverflow.com/questions/52567810/argon2-encryption-in-perl/52568291#52568291", "title": "Argon2 encryption in perl", "body": "<p>Removing all the CGI, all the database connectivity and replacing the input with dummy values shows the same error message, so my guess is that you are not getting a result from the database:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Crypt::Argon2 qw/argon2id_pass argon2id_verify/;\nsub check_pass{\n    my ($user , $pass) = @_;\n    return argon2id_verify(undef, $pass);\n}  \ncheck_pass(\"mytest\", \"some-test-password-2018\")\n\n__END__\nUse of uninitialized value in subroutine entry at tmp.pl line 7.\nCould not verify argon2id tag: Decoding failed at tmp.pl line 7.\n</code></pre>\n\n<p>So the best step would be for you to isolate the problem by verifying that you actually get a result from the database.</p>\n"}], "owner": {"reputation": 3, "user_id": 9215414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be9a27d38395c567be23cafb8f22802e?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/9215414/angel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1598195798, "creation_date": 1538219651, "last_edit_date": 1598195798, "question_id": 52567810, "link": "https://stackoverflow.com/questions/52567810/argon2-encryption-in-perl", "title": "Argon2 encryption in perl", "body": "<p>I'm making simple perl script for sign up/login with Argon2 for encryption. (The credentials are taken  from HTML Forms). The creation of users works fine , username  and hashed password are stored in the database. The problem comes with the extraction/authentication. I'm not sure I'm using the verification properly.</p>\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Crypt::Argon2 qw/argon2id_pass argon2id_verify/;\nuse CGI::Simple;\nuse DBI;\nsub get_data{\n    my ( $user) = @_;\n    my $statement = &quot;SELECT USER_HASH FROM LOGIN_DATA WHERE USER_NAME = ?&quot;;\n    my $driver = &quot;mysql&quot;;\n    my $database = &quot;USERS&quot;;\n    my $dsn = &quot;DBI:$driver:database=$database&quot;;\n    my $dataUsr = &quot;user&quot;;\n    my $dataPass = &quot;user123&quot;;\n    my $dbcon = DBI-&gt;connect($dsn,$dataUsr,$dataPass) or die  $!;\n    my $preState = $dbcon-&gt;prepare($statement);\n    $preState-&gt;execute($user);\n    my @row ;\n    my $hash_pass;\n    while(@row=$preState-&gt;fetchrow_array()){\n        $hash_pass = $row[0];\n    }\n    return $hash_pass;\n}\nsub check_pass{\n    my ($user , $pass) = @_;\n    my $encoded = get_data($user);\n    return argon2id_verify($encoded , $pass);\n}  \nmy $cgi = CGI::Simple-&gt;new;\nmy $username = $cgi-&gt;param(&quot;username&quot;);\nmy $password = $cgi-&gt;param (&quot;password&quot;);\ncheck_pass($username , $password)\n</code></pre>\n<p>This are the erors when i try to run in in the terminal <code>Use of uninitialized value in subroutine entry at checkUser.cgi line 30. Could not verify argon2id tag: Decoding failed at checkUser.cgi line 30.</code></p>\n"}, {"tags": ["xml", "perl", "stack-trace", "mojolicious"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1538240740, "post_id": 52566361, "comment_id": 92077926, "body": "This looks like an unfortunate interaction with the error reporting in XML::LibXML which I&#39;ve had lots of trouble with in the past. Parsing errors are reported from the XS code probably as a XML::LibXML::Error object, so they don&#39;t get wrapped by a Mojo::Exception (which is what provides the stacktrace) and they don&#39;t report the filename (the number at the beginning is the line number)."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1538382977, "post_id": 52566361, "comment_id": 92109644, "body": "It&#39;s the line number in the XML data that is being parsed, not in the code that does the parsing though."}], "answers": [{"tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1597934581, "creation_date": 1597934581, "answer_id": 63507546, "question_id": 52566361, "link": "https://stackoverflow.com/questions/52566361/how-can-i-get-error-stacktrace-in-mojolicious/63507546#63507546", "title": "How can I get error stacktrace in Mojolicious?", "body": "<p>You can get stack trace manually by calling:</p>\n<pre><code>$e-&gt;frames([$frame1, $frame2]);\n</code></pre>\n<p>See <a href=\"https://docs.mojolicious.org/Mojo/Exception#frames\" rel=\"nofollow noreferrer\">documentaion</a></p>\n<p>where <code>$e</code> is <code>Mojo::Exception</code> object</p>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1597934581, "creation_date": 1538207686, "question_id": 52566361, "link": "https://stackoverflow.com/questions/52566361/how-can-i-get-error-stacktrace-in-mojolicious", "title": "How can I get error stacktrace in Mojolicious?", "body": "<p>I have some xml parsing procedure in my controller (performed by <code>XML::LibXML::Simple</code>)</p>\n\n<p>During page render I got and error </p>\n\n<p><a href=\"https://i.stack.imgur.com/qd9Zg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qd9Zg.png\" alt=\"enter image description here\"></a></p>\n\n<p>and there is no \"tap for more\" link with stacktrace, which mojolicious produces usually when face with <code>die</code> in external module (below is example)</p>\n\n<p><a href=\"https://i.stack.imgur.com/6RMTW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6RMTW.png\" alt=\"enter image description here\"></a></p>\n\n<p>Why it's not getting stacktrace and how can I get stacktrace manually?</p>\n\n<p>I tried to insert </p>\n\n<pre><code>use Carp;\n$SIG{__DIE__} = sub {\n   app-&gt;log-&gt;error(\"Stacktrace: \". Carp::longmess($_[0]) );\n};\n</code></pre>\n\n<p>in my app, but no output was produced </p>\n"}, {"tags": ["perl", "import", "namespaces"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1538167463, "post_id": 52562323, "comment_id": 92063366, "body": "What do you mean by &quot;did not work as expected&quot;? How did you implement it, what did you expect?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1538171754, "post_id": 52562323, "comment_id": 92064655, "body": "Haven&#39;t tested it, but you might be able to do something with <a href=\"https://perldoc.perl.org/functions/our.html\" rel=\"nofollow noreferrer\">our</a> to get the behavior you want."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538172934, "post_id": 52562323, "comment_id": 92064962, "body": "You say that <code>@EXPORT</code> is empty, but is the module using Exporter?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538173077, "post_id": 52562323, "comment_id": 92064999, "body": "In case it&#39;s a useful alternative, you can use <a href=\"https://metacpan.org/pod/Package::Alias\" rel=\"nofollow noreferrer\">Package::Alias</a> to alias your module <code>A</code> to a shorter name, if the problem is just that its real name is too long to use repeatedly."}], "answers": [{"comments": [{"owner": {"reputation": 322, "user_id": 8419020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dkUE9.png?s=128&g=1", "display_name": "Simerax", "link": "https://stackoverflow.com/users/8419020/simerax"}, "edited": false, "score": 0, "creation_date": 1538302753, "post_id": 52563447, "comment_id": 92089146, "body": "Thanks for that answer. Helped a lot!"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1538174405, "creation_date": 1538174405, "answer_id": 52563447, "question_id": 52562323, "link": "https://stackoverflow.com/questions/52562323/perl-import-package-in-different-namespace/52563447#52563447", "title": "Perl Import Package in different Namespace", "body": "<p>You can forcibly \"import\" a function into main using glob assignment to alias the subroutine (and you want to do it in BEGIN so it happens at compile time, before calls to that subroutine are parsed later in the file):</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Other::Module;\n\nBEGIN { *open = \\&amp;Other::Module::open }\n</code></pre>\n\n<p>However, another problem you might have here is that open is a builtin function, which may cause some <a href=\"https://perldoc.pl/perlsub#Overriding-Built-in-Functions\" rel=\"nofollow noreferrer\">problems</a>. You can add <code>use subs 'open';</code> to indicate that you want to override the built-in function in this case, since you aren't using an actual import function to do so.</p>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538240006, "post_id": 52564666, "comment_id": 92077710, "body": "There&#39;s another &quot;glitch&quot; as you put it here: the stash will contain global variables and other stashes in that namespace as keys as well. For example if the package <code>OffLimits::Foobar</code> exists somewhere. My method of doing this would be something like <code>use Package::Stash; my @subs = grep { !&#47;$re_exclude&#47; } Package::Stash-&gt;new(&#39;OffLimits&#39;)-&gt;list_all_symbols(&#39;CODE&#39;);</code>."}, {"owner": {"reputation": 322, "user_id": 8419020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dkUE9.png?s=128&g=1", "display_name": "Simerax", "link": "https://stackoverflow.com/users/8419020/simerax"}, "edited": false, "score": 0, "creation_date": 1538302722, "post_id": 52564666, "comment_id": 92089133, "body": "Thanks for the reply, i managed to get it to work by mixing your approach with mine. I will add a short answer as well to show how/what I did"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 322, "user_id": 8419020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dkUE9.png?s=128&g=1", "display_name": "Simerax", "link": "https://stackoverflow.com/users/8419020/simerax"}, "edited": false, "score": 1, "creation_date": 1538375201, "post_id": 52564666, "comment_id": 92105977, "body": "@Simerax  Added a way to put this in a wrapper module, so that one can then use it with a normal import list, <code>use Wrapper qw(...);</code>, and import just the desired subs.  Then I also added a way to pass the name of the module to wrap, as well."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1550616151, "last_edit_date": 1550616151, "creation_date": 1538189412, "answer_id": 52564666, "question_id": 52562323, "link": "https://stackoverflow.com/questions/52562323/perl-import-package-in-different-namespace/52564666#52564666", "title": "Perl Import Package in different Namespace", "body": "<p>This is one of those \"impossible\" situations, where the clear solution -- to rework that module -- is off limits.</p>\n\n<p>But, you <em>can</em> alias that package's subs names, from its symbol table, to the same names in <code>main</code>. Worse than being rude, this comes with a glitch: it catches all names that that package itself imported in any way. However, since this package is a fixed quantity it stands to reason that you can establish that list (and even hard-code it).  It is just this one time, right?</p>\n\n<p><strong>main</strong></p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse OffLimits;\n\nGET_SUBS: {\n    # The list of names to be excluded\n    my $re_exclude = qr/^(?:BEGIN|import)$/;  # ...\n    my @subs = grep { !/$re_exclude/ } sort keys %OffLimits::;\n    no strict 'refs';\n    for my $sub_name (@subs) {\n        *{ $sub_name } = \\&amp;{ 'OffLimits::' . $sub_name };\n    }   \n};\n\nmy $name = name('name() called from ' . __PACKAGE__);\nmy $id   = id('id() called from ' . __PACKAGE__);\n\nsay \"name() returned: $name\";\nsay \"id()   returned: $id\";\n</code></pre>\n\n<p>with <code>OffLimits.pm</code></p>\n\n<pre><code>package OffLimits;    \nuse warnings;\nuse strict;\n\nsub name { return \"In \" .  __PACKAGE__ . \": @_\" }\nsub id   { return \"In \" .  __PACKAGE__ . \": @_\" }\n\n1;\n</code></pre>\n\n<p>It prints</p>\n\n<pre>\nname() returned: In OffLimits: name() called from  main\nid()   returned: In OffLimits: id() called from  main\n</pre>\n\n<p>You may need that code in a <code>BEGIN</code> block, depending on other details.</p>\n\n<p>Another option is of course to hard-code the subs to be \"exported\" (in <code>@subs</code>). Given that the module is in practice immutable this option is reasonable and more reliable. </p>\n\n<hr>\n\n<p>This can also be wrapped in a module, so that you have the normal, selective, importing.</p>\n\n<p><strong>WrapOffLimits.pm</strong></p>\n\n<pre><code>package WrapOffLimits;\nuse warnings;\nuse strict;\n\nuse OffLimits;\n\nuse Exporter qw(import);\n\nour @sub_names;\nour @EXPORT_OK   = @sub_names;\nour %EXPORT_TAGS = (all =&gt; \\@sub_names);\n\nBEGIN { \n    # Or supply a hard-coded list of all module's subs in @sub_names\n    my $re_exclude = qr/^(?:BEGIN|import)$/;  # ...\n    @sub_names = grep { !/$re_exclude/ } sort keys %OffLimits::;\n\n    no strict 'refs';\n    for my $sub_name (@sub_names) {\n        *{ $sub_name } = \\&amp;{ 'OffLimits::' . $sub_name };\n    }   \n};\n1;\n</code></pre>\n\n<p>and now in the caller you can import either only some subs</p>\n\n<pre><code>use WrapOffLimits qw(name);\n</code></pre>\n\n<p>or all</p>\n\n<pre><code>use WrapOffLimits qw(:all);\n</code></pre>\n\n<p>with otherwise the same main as above for a test.</p>\n\n<p>The module name is hard-coded, which should be OK as this is meant only for that module.</p>\n\n<hr>\n\n<p>The following is added mostly for completeness.</p>\n\n<p>One can pass the module name to the wrapper by writing one's own <code>import</code> sub, which is what gets used then. The import list can be passed as well, at the expense of an awkward interface of the <code>use</code> statement.</p>\n\n<p>It goes along the lines of</p>\n\n<pre><code>package WrapModule;\nuse warnings;\nuse strict;\n\nuse OffLimits;\n\nuse Exporter qw();  # will need our own import \n\nour ($mod_name, @sub_names);\n\nour @EXPORT_OK   = @sub_names;\nour %EXPORT_TAGS = (all =&gt; \\@sub_names);\n\nsub import {\n    my $mod_name = splice @_, 1, 1;  # remove mod name from @_ for goto\n\n    my $re_exclude = qr/^(?:BEGIN|import)$/;  # etc\n\n    no strict 'refs';\n    @sub_names = grep { !/$re_exclude/ } sort keys %{ $mod_name . '::'};    \n    for my $sub_name (@sub_names) {    \n        *{ $sub_name } = \\&amp;{ $mod_name . '::' . $sub_name };\n    }   \n\n    push @EXPORT_OK, @sub_names;\n\n    goto &amp;Exporter::import;\n}\n1;\n</code></pre>\n\n<p>what can be used as</p>\n\n<pre><code>use WrapModule qw(OffLimits name id);  # or (OffLimits :all)\n</code></pre>\n\n<p>or, with the list broken-up so to remind the user of the unusual interface</p>\n\n<pre><code>use WrapModule 'OffLimits', qw(name id);\n</code></pre>\n\n<p>When used with the main above this prints the same output.</p>\n\n<p>The <code>use</code> statement ends up using the <a href=\"https://perldoc.perl.org/functions/import.html\" rel=\"nofollow noreferrer\">import</a> sub defined in the module, which exports symbols by writing to the caller's symbol table. (If no <code>import</code> sub is written then the <code>Exporter</code>'s <code>import</code> method is nicely used, which is how this is normally done.)</p>\n\n<p>This way we are able to unpack the arguments and have the module name supplied at <code>use</code> invocation. With the import list supplied as well now we have to <code>push</code> manually to <code>@EXPORT_OK</code> since this can't be in the <code>BEGIN</code> phase. In the end the sub is replaced by <code>Exporter::import</code> via the (good form of) <a href=\"http://perldoc.perl.org/functions/goto.html\" rel=\"nofollow noreferrer\">goto</a>, to complete the job.</p>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538328502, "post_id": 52577112, "comment_id": 92095837, "body": "String eval is not needed here, you can simply <code>no strict &#39;refs&#39;;</code> in that scope and then construct the names, while it&#39;s still pretty crazy, it would be much less so. <code>*{&quot;${parent_package}::$_&quot;} = \\${&quot;A::$_&quot;};</code>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538328796, "post_id": 52577112, "comment_id": 92095917, "body": "One problem with this is that each stash entry can contain multiple variable types, and even more than the 4 you are handling here. This is why I usually rely on <a href=\"https://metacpan.org/pod/Package::Stash\" rel=\"nofollow noreferrer\">Package::Stash</a> for finding particular stash entry types."}], "tags": [], "owner": {"reputation": 322, "user_id": 8419020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dkUE9.png?s=128&g=1", "display_name": "Simerax", "link": "https://stackoverflow.com/users/8419020/simerax"}, "is_accepted": false, "score": 1, "last_activity_date": 1538303859, "creation_date": 1538303859, "answer_id": 52577112, "question_id": 52562323, "link": "https://stackoverflow.com/questions/52562323/perl-import-package-in-different-namespace/52577112#52577112", "title": "Perl Import Package in different Namespace", "body": "<p>Here is what I now came up with. Yes this is hacky and yes I also feel like I opened pandoras box with this. However at least a small dummy program ran perfectly fine.</p>\n\n<p>I renamed the module in my code again. In my original post I used the example <code>A::open</code> actually this module does not contain any method/variable reserved by the perl core. This is why I blindly import everything here.</p>\n\n<pre><code>BEGIN {\n    # using the caller to determine the parent. Usually this is main but maybe we want it somewhere else in some cases\n    my ($parent_package) = caller;\n\n    package A;\n\n    foreach (keys(%A::)) {\n        if (defined $$_) {\n            eval '*'.$parent_package.'::'.$_.' = \\$A::'.$_;\n        }\n        elsif (%$_) {\n            eval '*'.$parent_package.'::'.$_.' = \\%A::'.$_;\n        }\n        elsif (@$_) {\n            eval '*'.$parent_package.'::'.$_.' = \\@A::'.$_;\n        }\n        else {\n            eval '*'.$parent_package.'::'.$_.' = \\&amp;A::'.$_;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 322, "user_id": 8419020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dkUE9.png?s=128&g=1", "display_name": "Simerax", "link": "https://stackoverflow.com/users/8419020/simerax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 1, "accepted_answer_id": 52564666, "answer_count": 3, "score": 2, "last_activity_date": 1550616151, "creation_date": 1538166902, "question_id": 52562323, "link": "https://stackoverflow.com/questions/52562323/perl-import-package-in-different-namespace", "title": "Perl Import Package in different Namespace", "body": "<p>is it possible to import (<code>use</code>) a perl module within a different namespace?</p>\n\n<p>Let's say I have a Module <code>A</code> (XS Module with no methods Exported <code>@EXPORT</code> is empty) and I have no way of changing the module.</p>\n\n<p>This Module has a Method <code>A::open</code> </p>\n\n<p>currently I can use that Module in my main program (package main) by calling <code>A::open</code> I would like to have that module inside my <code>package main</code> so that I can directly call <code>open</code></p>\n\n<p>I tried to manually push every key of <code>%A::</code> into <code>%main::</code> however that did not work as expected.</p>\n\n<p>The only way that I know to achieve what I want is by using <code>package A;</code> inside my main program, effectively changing the package of my program from <code>main</code> to <code>A</code>.\nIm not satisfied with this. I would really like to keep my program inside package main.</p>\n\n<p>Is there any way to achieve this and still keep my program in package main?</p>\n\n<p><em>Offtopic: Yes I know usually you would not want to import everything into your namespace but this module is used by us extensively and we don't want to type A:: (well the actual module name is way longer which isn't making the situation better)in front of hundreds or thousands of calls</em> </p>\n"}, {"tags": ["perl", "lwp-useragent"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538160247, "post_id": 52560664, "comment_id": 92060693, "body": "Does <code>$xml</code> contain XML or a chunked message as you promised?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1538160782, "post_id": 52560664, "comment_id": 92060919, "body": "From looking at the source, LWP::Protocol (used by LWP::UserAgent) will automatically chunk the response for you if 1) You didn&#39;t provide a Content-Length header, and 2) you provided a subroutine reference instead of a string as the message."}, {"owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538162223, "post_id": 52560664, "comment_id": 92061446, "body": "$xml has the complete xml"}, {"owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538167709, "post_id": 52560664, "comment_id": 92063457, "body": "@ikegami so i didn&#39;t understand , what needs to be changed here ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538168223, "post_id": 52560664, "comment_id": 92063637, "body": "Not sure, thus the lack of an answer. Start by removing that Transfer Encoding header, then figure out how to pass a callback to LWP::Protocol, and what the callback should look like. Might be as simple as <code>Content =&gt; sub { length($xml) ? substr($xml, 0, length($xml), &#39;&#39;) : undef }</code> Working on my on stuff right now."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1538168298, "post_id": 52560664, "comment_id": 92063668, "body": "If that callback works, it returns the entire XML document as the first chunk. That&#39;s cause it makes no sense to use a chunked transfer when you already have the complete response body handy."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538176643, "post_id": 52560664, "comment_id": 92065749, "body": "Possible alternative is to use Mojo::UserAgent: <a href=\"https://metacpan.org/pod/Mojolicious::Guides::Cookbook#Streaming-request\" rel=\"nofollow noreferrer\">metacpan.org/pod/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538179192, "post_id": 52563076, "comment_id": 92066161, "body": "Re &quot;<i>Not all servers understand a request with a chunked payload</i>&quot;, The OP said they didn&#39;t send a chunked body even though they sent the header claiming they did. That should definitely result in the obtained 411 error. There&#39;s no reason to believe the server doesn&#39;t support chunked in addition to this problem."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538179197, "post_id": 52563076, "comment_id": 92066162, "body": "Re &quot;<i>probably since they cannot guarantee that the server will support such request</i>&quot;, It&#39;s more likely that the reason they don&#39;t is that there&#39;s no reason for them to do so. Chunked is only needed when the size of the request isn&#39;t known beforehand, which basically never happens with a browser. When the client knows the size of the message beforehand, it&#39;s more efficient to use <code>Content-Length</code>."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 0, "last_activity_date": 1538172126, "last_edit_date": 1538172126, "creation_date": 1538171587, "answer_id": 52563076, "question_id": 52560664, "link": "https://stackoverflow.com/questions/52560664/send-http-streaming-request-in-perl/52563076#52563076", "title": "Send HTTP streaming request in perl", "body": "<blockquote>\n  <p>But i am getting http status code 411 Length Required. </p>\n</blockquote>\n\n<p>Not all servers understand a request with a chunked payload even though this is standardized in HTTP/1.1 (but not in HTTP/1.0). For example nginx only supports chunking within a request since version 1.3.9 (2012), see <a href=\"https://serverfault.com/questions/164220/is-there-a-way-to-avoid-nginx-411-content-length-required-errors\">Is there a way to avoid nginx 411 Content-Length required errors?</a>. If the server does not understand a request with chunked encoding there is nothing you can do from the client side, i.e. you simply cannot use chunked transfer encoding then. If you have control over the server make sure that the server actually supports it.</p>\n\n<p>I've also never experienced browsers send such requests, probably since they cannot guarantee that the server will support such request. I've only seen mobile apps used where the server and app is managed by the same party and thus support for chunked requests can be guaranteed.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1538182278, "last_edit_date": 1538182278, "creation_date": 1538180894, "answer_id": 52564045, "question_id": 52560664, "link": "https://stackoverflow.com/questions/52560664/send-http-streaming-request-in-perl/52564045#52564045", "title": "Send HTTP streaming request in perl", "body": "<p>LWP::UserAgent's API isn't designed to send a stream, but it is able to do so with minimal hacking.</p>\n\n<pre><code>use strict;\nuse warnings qw( all );\n\nuse HTTP::Request::Common qw( POST );\nuse LWP::UserAgent        qw( );\n\nmy $ua = LWP::UserAgent-&gt;new();\n\n# Don't provide any content.\nmy $request = POST('http://stackoverflow.org/junk',\n   Content_Type =&gt; 'application/xml',\n);\n\n# POST() insists on adding a Content-Length header.\n# We need to remove it to get a chunked request.\n$request-&gt;headers-&gt;remove_header('Content-Length');\n\n# Here's where we provide the stream generator.\nmy $buffer = 'abc\\n';\n$request-&gt;content(sub {\n   return undef if !length($buffer);                # Return undef when done.\n   return substr($buffer, 0, length($buffer), '');  # Return a chunk of data otherwise.\n});\n\nmy $response = $ua-&gt;request($request);\nprint($response-&gt;status_line);\n</code></pre>\n\n<p>Using a proxy (Fiddler), we can see this does indeed send a chunked request:</p>\n\n<p><img src=\"https://i.stack.imgur.com/fb2Zc.png\" alt=\"Screenshot of proxy showing a chunked request was used\"></p>\n\n<hr>\n\n<p>There's no point in using a chunked request if you already have the entire document handy like in the example you gave. Instead, let's say wanted to upload the output of some external tool as it produced its output. To do that, you could use the following:</p>\n\n<pre><code>open(my $pipe, '-|:raw', 'some_tool');\n$request-&gt;content(sub {\n   my $rv = sysread($pipe, my $buf, 64*1024);\n   die $! if !defined($rv);\n   return undef if !$rv;\n   return $buf;\n});\n</code></pre>\n"}], "owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 670, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1538182278, "creation_date": 1538158038, "question_id": 52560664, "link": "https://stackoverflow.com/questions/52560664/send-http-streaming-request-in-perl", "title": "Send HTTP streaming request in perl", "body": "<p>I want to send xml request using HTTP streaming protocol . where transfer-encoding is \"chunked\". Currently i am using LWP::UserAgent to send the xml transaction.</p>\n\n<pre><code>my $userAgent = LWP::UserAgent-&gt;new;\nmy $starttime = time();\nmy $response = $userAgent-&gt;request(POST $url,\nContent_Type =&gt; 'application/xml',\nTransfer_Encoding =&gt; 'Chunked',\nContent =&gt; $xml);\n\n\nprint \"Response\".Dumper($response);\n</code></pre>\n\n<p>But i am getting http status code <code>411 Length Required</code>. Which means \"client error response code indicates that the server refuses to accept the request without a defined \"</p>\n\n<p>How we can handle this while sending a request in chunked ? </p>\n"}, {"tags": ["python", "linux", "perl", "awk"], "comments": [{"owner": {"reputation": 2223, "user_id": 1628812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b7db836df7c751052558ba3e9f31880?s=128&d=identicon&r=PG", "display_name": "demircioglu", "link": "https://stackoverflow.com/users/1628812/demircioglu"}, "edited": false, "score": 0, "creation_date": 1538156686, "post_id": 52560361, "comment_id": 92059271, "body": "What code you have created so far? What&#39;s the issue you are having?"}, {"owner": {"reputation": 23, "user_id": 10326411, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Y5upmDi6tcM/AAAAAAAAAAI/AAAAAAAAADA/sI16IyZVg5s/photo.jpg?sz=128", "display_name": "zero", "link": "https://stackoverflow.com/users/10326411/zero"}, "reply_to_user": {"reputation": 2223, "user_id": 1628812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b7db836df7c751052558ba3e9f31880?s=128&d=identicon&r=PG", "display_name": "demircioglu", "link": "https://stackoverflow.com/users/1628812/demircioglu"}, "edited": false, "score": 0, "creation_date": 1538156767, "post_id": 52560361, "comment_id": 92059314, "body": "Hi mdem7, thank you for your answer. My code use awk to read a txt file, and create the folders. awk&#39;NR&gt;1{system(&quot;mkdir -p &quot;$1&quot;/&quot;2)}&#39; my_file.txt. But I find some problems to create o move a specific file named like B subfolder to that folder."}, {"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 3, "creation_date": 1538157129, "post_id": 52560361, "comment_id": 92059467, "body": "Hi zero, welcome to StackOverflow. When you post, you should share a minimal example of the code you have written, as well as the input and output you expect to get from the code, as well as the output you actually get. See the guidelines for posting <a href=\"https://stackoverflow.com/help/mcve\">here</a>."}, {"owner": {"reputation": 23, "user_id": 10326411, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Y5upmDi6tcM/AAAAAAAAAAI/AAAAAAAAADA/sI16IyZVg5s/photo.jpg?sz=128", "display_name": "zero", "link": "https://stackoverflow.com/users/10326411/zero"}, "edited": false, "score": 0, "creation_date": 1538157716, "post_id": 52560361, "comment_id": 92059706, "body": "Thank you very much for your comment d_kennetz"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1538164880, "post_id": 52560361, "comment_id": 92062503, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/q/52537707\">stackoverflow.com/q/52537707</a>"}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1538215188, "post_id": 52560361, "comment_id": 92071622, "body": "Please take a look at: <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}, {"owner": {"reputation": 9620, "user_id": 1783163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BfUwH.jpg?s=128&g=1", "display_name": "peterh", "link": "https://stackoverflow.com/users/1783163/peterh"}, "edited": false, "score": 0, "creation_date": 1538323450, "post_id": 52560361, "comment_id": 92094347, "body": "I&#39;m voting to close this question as off-topic because it will be closed on the StackOverflow, but it would be likely ontopic on the <a href=\"https://unix.stackexchange.com\">unix.stackexchange.com</a> ."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10326411, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Y5upmDi6tcM/AAAAAAAAAAI/AAAAAAAAADA/sI16IyZVg5s/photo.jpg?sz=128", "display_name": "zero", "link": "https://stackoverflow.com/users/10326411/zero"}, "edited": false, "score": 0, "creation_date": 1538404064, "post_id": 52563017, "comment_id": 92121320, "body": "Thank you very much for your hel Karafca"}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": true, "score": 0, "last_activity_date": 1538171233, "creation_date": 1538171233, "answer_id": 52563017, "question_id": 52560361, "link": "https://stackoverflow.com/questions/52560361/create-files-in-subdirectories-with-the-same-name/52563017#52563017", "title": "Create files in subdirectories with the same name", "body": "<p>perhaps better to do in <code>bash</code> directly since there is nothing requires <code>awk</code> </p>\n\n<pre><code>$ while read -r a b; \n  do mkdir -p \"$a/$b\"; touch \"$a/$b/$b.txt\"; \n  done &lt; &lt;(sed 1d file)\n\n\n$ tree\n.\n\u251c\u2500\u2500 a\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 b\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 b.txt\n\u251c\u2500\u2500 c\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 d\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 d.txt\n\u2514\u2500\u2500 file\n\n4 directories, 3 files\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10326411, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Y5upmDi6tcM/AAAAAAAAAAI/AAAAAAAAADA/sI16IyZVg5s/photo.jpg?sz=128", "display_name": "zero", "link": "https://stackoverflow.com/users/10326411/zero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "closed_date": 1538323450, "accepted_answer_id": 52563017, "answer_count": 1, "score": -1, "last_activity_date": 1538171233, "creation_date": 1538156576, "last_edit_date": 1538157683, "question_id": 52560361, "link": "https://stackoverflow.com/questions/52560361/create-files-in-subdirectories-with-the-same-name", "closed_reason": "Needs details or clarity", "title": "Create files in subdirectories with the same name", "body": "<p>Reading a list with A and B data in 2 columns, iterating row by row, I was createding a series of direcoties with the following logic.\nread first row, data A and B, create folder A and subfolder B ( mkdir -p A/B ) and so on.\nWell, now, I need to create a corresponding file B.txt ( i.e ) inside the proper subfolder B.</p>\n\n<p>By example, y made some proofs with a single file with the next content.</p>\n\n<pre><code>col1  col2\n  a     b\n  c     d\n</code></pre>\n\n<p>I created the foler sructure with the next line:</p>\n\n<pre><code>    awk 'NR&gt;1{system(\"mkdir -p \"$1\"/\"$2)} my_file.txt \n</code></pre>\n\n<p>The result was:</p>\n\n<pre><code>$ tree\na\n |_b\nc\n |_d\n</code></pre>\n\n<p>Now I would like to invoke that directory path, to move or create for example a file named b.txt to the directory with the same name, and so be able to do it with the whole tree, but I could not do it yet</p>\n\n<p>My spected result.</p>\n\n<pre><code>$ tree\na\n |_b\n   |_b.txt\nc\n |_d\n   |_d.txt\n</code></pre>\n\n<p>Any idia? </p>\n\n<p>Thanks</p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1538141826, "post_id": 52555219, "comment_id": 92051704, "body": "Note there is a <a href=\"https://metacpan.org/pod/XML::Twig#XML::Twig\" rel=\"nofollow noreferrer\"><code>sprint</code></a> method that returns the document as text (i.e. a string). Then you could reparse the text (using <code>parse</code>) instead of saving to file?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1538142309, "post_id": 52555219, "comment_id": 92052000, "body": "Do you have to use handlers?"}], "owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1538140267, "creation_date": 1538137258, "last_edit_date": 1538140267, "question_id": 52555219, "link": "https://stackoverflow.com/questions/52555219/xmltwig-perform-multiple-twig-handlers-on-file", "title": "XML:Twig perform multiple twig handlers on file", "body": "<p>I have the following problem: I need to modify an xml file using 4 or 5 twig handlers. Currently, each time I parse one of the twig handlers over the file I then need to save the file before being able to parse the next handler over the now modified data. This requires that I keep having to save the file for each handler. Is there a way to open the file once, run all the handlers one after the other and then save the file at the end?</p>\n\n<p>The reason I need this is that I am hoping it will speed up my program that currently uses the above procedure thousands of times and therefore opens and closes a lot of files. I was thinking that if I have n handlers for a specific file and m files then I need to perform the file saving n*m times. I would like to be able to divide this number by n.</p>\n\n<p>I have looked at the parsefile_inplace option in xml twig but cannot get it to work!</p>\n\n<p>Additional: I should have mentioned that the running of certain twig handlers in the chain depends on the results from previous handlers and therefore not all handlers can be run together in a single statement.</p>\n\n<p>Many thanks.</p>\n"}, {"tags": ["multithreading", "perl", "http-daemon"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1538125859, "post_id": 52551898, "comment_id": 92042777, "body": "You should add some <code>print</code> statements so you see where the webserver hangs. HTTP::Daemon suggests a while loop for a connection: <code>while (my $r = $c-&gt;get_request) {</code>"}, {"owner": {"reputation": 79, "user_id": 3719501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14471684a272cd3233f115a20ee81ed4?s=128&d=identicon&r=PG&f=1", "display_name": "Soumya dutta", "link": "https://stackoverflow.com/users/3719501/soumya-dutta"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1538126597, "post_id": 52551898, "comment_id": 92043163, "body": "It doesn&#39;t hang, but sleeps for 100 second &amp; then start taking requests again."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1538136663, "post_id": 52551898, "comment_id": 92048608, "body": "I can&#39;t replicate your problem. When replace your submodule with <code>sleep 100</code>, and actually call <code>$c-&gt;send_response()</code>, I can connect at least three parallel HTTP requests, that each get handled after 100 seconds. I&#39;ll post the working code as a reply below."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538156982, "post_id": 52551898, "comment_id": 92059411, "body": "What&#39;s the output of <code>perl -v | grep &#39;This is&#39; ; perl -V:useithreads</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 3719501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14471684a272cd3233f115a20ee81ed4?s=128&d=identicon&r=PG&f=1", "display_name": "Soumya dutta", "link": "https://stackoverflow.com/users/3719501/soumya-dutta"}, "edited": false, "score": 0, "creation_date": 1538141860, "post_id": 52555043, "comment_id": 92051725, "body": "When you create another thread inside process_req function, then multiple request doesn&#39;t work simultaneously."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 79, "user_id": 3719501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14471684a272cd3233f115a20ee81ed4?s=128&d=identicon&r=PG&f=1", "display_name": "Soumya dutta", "link": "https://stackoverflow.com/users/3719501/soumya-dutta"}, "edited": false, "score": 0, "creation_date": 1538146269, "post_id": 52555043, "comment_id": 92054257, "body": "Can you maybe edit either my example or your example to actually reproduce the problem, while still being in a single file? At least on Windows, I can&#39;t reproduce your problem with the code given."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 79, "user_id": 3719501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14471684a272cd3233f115a20ee81ed4?s=128&d=identicon&r=PG&f=1", "display_name": "Soumya dutta", "link": "https://stackoverflow.com/users/3719501/soumya-dutta"}, "edited": false, "score": 1, "creation_date": 1538156364, "post_id": 52555043, "comment_id": 92059134, "body": "<a href=\"https://pastebin.com/vyNcn9be\" rel=\"nofollow noreferrer\">Works fine</a> in Linux too. @Soumya dutta, Are you sure you have a threaded build of Perl?"}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": 0, "last_activity_date": 1538156425, "last_edit_date": 1538156425, "creation_date": 1538136694, "answer_id": 52555043, "question_id": 52551898, "link": "https://stackoverflow.com/questions/52551898/perl-simple-webserver-not-handling-multiple-requests-simultaneously/52555043#52555043", "title": "Perl simple webserver not handling multiple requests simultaneously", "body": "<p>Here is code based on your example that works for me on Windows. Maybe you can show us how/where it fails for you:</p>\n\n<pre><code>#!perl\nuse strict;\nuse warnings;\nuse HTTP::Daemon;\nuse threads;\n\nmy $webServer;\n#my $package_map = {\"test\"  =&gt; \"test\"};\nmy $d = HTTP::Daemon-&gt;new(LocalAddr =&gt; $ARGV[0],\n                          LocalPort =&gt; $ARGV[1] // 80,\n                          Listen =&gt; 20) || die;\n\nprint \"Web Server started!\\n\";\nprint \"Server Address: \", $d-&gt;sockhost(), \"\\n\";\nprint \"Server Port: \", $d-&gt;sockport(), \"\\n\";\n\n\nwhile (my $c = $d-&gt;accept) {\n    warn \"New connection\";\n    threads-&gt;create(\\&amp;process_req, $c)-&gt;detach();\n}\n\nsub process_req {\n    my $c = shift;\n    while( my $r = $c-&gt;get_request ) {\n        if ($r) {\n            if ($r-&gt;method eq \"GET\") {\n                my $path = $r-&gt;url-&gt;path();\n                if (1) {\n                    sleep 100;\n                    $c-&gt;send_response( HTTP::Response-&gt;new(200, \"OK\", undef, \"done\\n\") );\n                }\n            }\n        }\n    };\n    $c-&gt;close;\n}\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 3719501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14471684a272cd3233f115a20ee81ed4?s=128&d=identicon&r=PG&f=1", "display_name": "Soumya dutta", "link": "https://stackoverflow.com/users/3719501/soumya-dutta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1538156425, "creation_date": 1538125531, "question_id": 52551898, "link": "https://stackoverflow.com/questions/52551898/perl-simple-webserver-not-handling-multiple-requests-simultaneously", "title": "Perl simple webserver not handling multiple requests simultaneously", "body": "<p>I wrote a simple webserver which should continuously handle simultaneous requests. But, even after detaching the threads it doesn't handle simultaneous requests. Can someone help? </p>\n\n<p>Webserver.pl</p>\n\n<pre><code>use HTTP::Daemon;\nuse threads;\n\nmy $webServer;\nmy $package_map = {\"test\"  =&gt; \"test\"};\nmy $d = HTTP::Daemon-&gt;new(LocalAddr =&gt; $ARGV[0],\n                          LocalPort =&gt; 80,\n                          Listen =&gt; 20) || die;\n\nprint \"Web Server started!\\n\";\nprint \"Server Address: \", $d-&gt;sockhost(), \"\\n\";\nprint \"Server Port: \", $d-&gt;sockport(), \"\\n\";\n\n\nwhile (my $c = $d-&gt;accept) {\n    threads-&gt;create(\\&amp;process_req, $c)-&gt;detach();\n}\n\nsub process_req {\n    my $c = shift;\n    my $r = $c-&gt;get_request;\n    if ($r) {\n        if ($r-&gt;method eq \"GET\") {\n            my $path = $r-&gt;url-&gt;path();\n            my $service = $package_map-&gt;{$path};\n            if ($service) {\n                $response = $service-&gt;process_request($request);\n            }\n        }\n    }\n    $c-&gt;close;\n    undef($c);\n}\n</code></pre>\n\n<p>test.pm</p>\n\n<pre><code>sub process_request\n{\n    threads-&gt;create(\\&amp;testing)-&gt;detach();\n    my $response = HTTP::Response -&gt; new (200);\n    $response -&gt; header('Access-Control-Allow-Origin', '*');\n    $response -&gt; content(\"Success\");\n    return $response; \n}\n\nsub testing\n{\n    my $command = 'echo \"sleep 100\" | ssh -o StrictHostKeyChecking=no -o ConnectTimeout=10 &lt;dev_box&gt;';\n    if (system($command) != 0) {\n        print \"FAILED\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "awk", "sed", "text-processing"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1538081487, "post_id": 52544904, "comment_id": 92029782, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/52543683/sed-awk-perl-find-a-regex-copy-5-columns-of-this-line-and-paste-to-it-at-the-b\">sed/awk/perl: find a regex, copy 5 columns of this line and paste to it at the beginning of the next lines</a>"}, {"owner": {"reputation": 25, "user_id": 10426012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474b922d18185196b50f76156ce55c3?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/10426012/slaw"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1538083508, "post_id": 52544904, "comment_id": 92030578, "body": "This one is slightly different, I was asked to post another question."}, {"owner": {"reputation": 25, "user_id": 10426012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474b922d18185196b50f76156ce55c3?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/10426012/slaw"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538144136, "post_id": 52544904, "comment_id": 92053070, "body": "@zdim, my bad, I&#39;ve just fixed it..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538158430, "post_id": 52544904, "comment_id": 92059965, "body": "@Slaw Good, thank you for being responsive. I updated my answer to it. I suggest to be extra careful when posting  a question.  It helps <i>a lot</i> in getting good answers, and is just nicer on everybody :)"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 10426012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474b922d18185196b50f76156ce55c3?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/10426012/slaw"}, "edited": false, "score": 0, "creation_date": 1538150728, "post_id": 52549804, "comment_id": 92056659, "body": "it didn&#39;t change the output, I&#39;m using sed (GNU sed) 4.2.2."}, {"owner": {"reputation": 25, "user_id": 10426012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474b922d18185196b50f76156ce55c3?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/10426012/slaw"}, "edited": false, "score": 0, "creation_date": 1538154651, "post_id": 52549804, "comment_id": 92058438, "body": "It works! Thank you! Could you explain how it works, please?"}], "tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 0, "last_activity_date": 1538153029, "last_edit_date": 1538153029, "creation_date": 1538117171, "answer_id": 52549804, "question_id": 52544904, "link": "https://stackoverflow.com/questions/52544904/find-regex-move-the-next-line-at-the-end-of-this-line-and-copy-the-first-5-colu/52549804#52549804", "title": "Find regex, move the next line at the end of this line and copy the first 5 columns to the next lines that start with a letter", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed -r ':a;N;s/^(.*)\\n\\1(.)/\\1\\2/;ta;P;D' file\n</code></pre>\n\n<p>Open a window of at least two lines. If the head of the previous line is exactly the same as the current line and the current line is longer, remove the previous line and repeat. Otherwise, print then delete the first line and repeat. </p>\n\n<p>N.B. this is run following the awk script.</p>\n\n<p>To achieve the same solution using the original data, use:</p>\n\n<pre><code>sed -r ':a;N;/^[0-9].*\\n[0-9]/{P;D};:b;s/^(.*)\\n(.*)/\\1 \\2\\n\\1/;P;s/.*\\n//;$d;N;/\\n[0-9]/D;bb' file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1538552253, "last_edit_date": 1538552253, "creation_date": 1538119059, "answer_id": 52550279, "question_id": 52544904, "link": "https://stackoverflow.com/questions/52544904/find-regex-move-the-next-line-at-the-end-of-this-line-and-copy-the-first-5-colu/52550279#52550279", "title": "Find regex, move the next line at the end of this line and copy the first 5 columns to the next lines that start with a letter", "body": "<p>The Perl script below assumes the following requirements.</p>\n\n<p>The input contains alternating blocks of lines starting with either a number or non-number, where each block of number-lines is followed by a block of text-lines. <strong>Updated</strong>: For the output the first five columns from the <em>last number-line</em> from its block need be prepended to each of the text-lines from the immediately following text-block.  Other text-lines are printed as they are.</p>\n\n<p>The code collects number and text lines in their buffers. They are processed and emptied once we get to the first line of the next number-lines block, which is when both buffers are non-empty.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $file = shift @ARGV || 'default_filename.txt';\ndie \"Usage: $0 file\\n\" if not $file;\n\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nmy (@text, @nums);\n\nwhile (my $line = &lt;$fh&gt;) {\n    chomp $line;\n    if ($line =~ /^[^0-9]/) { \n        push @text, $line;\n        if (eof) {\n            process_buffers(\\@nums, \\@text);\n            last\n        }\n        next;\n    }\n    elsif (@nums and @text) {\n        process_buffers(\\@nums, \\@text);\n    }\n\n    push @nums, $line;\n}\n\nsub process_buffers {\n    my ($rnums, $rtext) = @_;\n\n    # Remove last number line from array and take its first five columns\n    my @last_num_line_cols = (split ' ', pop @$rnums)[0..4];\n    # Print other number lines; all consecutive spaces replaced by tabs\n    say for map { s/\\s+/\\t/gr } @$rnums;\n\n    # Print text lines prepended by five columns of last number line\n    foreach my $text_line (@$rtext) {\n        say join \"\\t\", @last_num_line_cols, $text_line;\n    }   \n\n    @$rtext = ();\n    @$rnums = ();\n}\n</code></pre>\n\n<p>The condition involving <a href=\"https://perldoc.perl.org/functions/eof.html\" rel=\"nofollow noreferrer\">eof</a> above is needed to process the last batch of number and text blocks, since no other test can work on the last line. Its placement assumes that the last line must be a text-line, what follows from my assumption of requirements.</p>\n\n<p>This prints</p>\n\n<pre>\n37      7       --------------  No      aaa\n40      0       --------------  No      bbb     xxx   zzy\n40      0       --------------  No      bbb     aa    bb   cc\n42      2       --------------  No      ccc     xxx   zyz\n42      2       --------------  No      ccc     a     b    c               d\n43      3       --------------  No      ddd     xy    zz\n43      3       --------------  No      ddd     a     a\n43      3       --------------  No      ddd     a     a\n43      3       --------------  No      ddd     c\n52      5       --------------  No      eee     yyyx  zzz\n</pre>\n\n<p>(aligned on tabs, as expected in input and wanted in output)</p>\n\n<hr>\n\n<p><strong>Update</strong> &nbsp; Limit output width to 8 columns, as described in the question update</p>\n\n<p>Use this modified version of the processing function</p>\n\n<pre><code>sub process_buffers_fmt {\n    my ($rnums, $rtext) = @_;\n\n    my @last_num_line_cols = (split ' ', pop @$rnums)[0..4];\n    say for map { s/\\s+/\\t/gr } @$rnums;\n\n    # Format output lines to 8 columns at most\n    foreach my $text_line (@$rtext) {\n        my @text_cols = split ' ', $text_line;\n        while (my @prn_text_cols = splice @text_cols, 0, 3) {\n            say join \"\\t\", @last_num_line_cols, @prn_text_cols;\n        }    \n    }\n    @$rtext = ();\n    @$rnums = ();\n}\n</code></pre>\n\n<p>This uses <a href=\"http://perldoc.perl.org/functions/splice.html\" rel=\"nofollow noreferrer\">splice</a> to remove the first three columns of text output at a time and print them with the (five) columns of the last number line.  This is done in a <code>while</code> loop so it stops once <code>@text_cols</code> is all processed (printed). </p>\n\n<p>To test I add to the text block after the <code>43 3 ...</code> number line in the input file the following</p>\n\n<pre>\na b c d e f g h i j k\n</pre>\n\n<p>and the output of the main program acquires these extra lines</p>\n\n<pre>\n43      3       --------------  No      ddd     a       b       c\n43      3       --------------  No      ddd     d       e       f\n43      3       --------------  No      ddd     g       h       i\n43      3       --------------  No      ddd     j       k\n</pre>\n\n<hr>\n\n<p>The input file that I use to test all requirements and updates is</p>\n\n<pre>\n37    7    --------------  No  aaa MORE COLUMNS\n40    0    --------------  No  bbb\nxxx   zzy\naa    bb   cc\n42    2    --------------  No  ccc \nxxx   zyz\na     b    c               d\n43    3    --------------  No  ddd  AND YET MORE\nxy    zz\na     a \na     a \nc\na b c d e f g h i j k\n52    5    --------------  No  eee\nyyyx  zzz\n</pre>\n\n<p>and the output of the program (with <code>process_buffers_fmt</code> function) is</p>\n\n<pre>\n37      7       --------------  No      aaa     MORE    COLUMNS\n40      0       --------------  No      bbb     xxx     zzy\n40      0       --------------  No      bbb     aa      bb      cc\n42      2       --------------  No      ccc     xxx     zyz\n42      2       --------------  No      ccc     a       b       c\n42      2       --------------  No      ccc     d\n43      3       --------------  No      ddd     xy      zz\n43      3       --------------  No      ddd     a       a\n43      3       --------------  No      ddd     a       a\n43      3       --------------  No      ddd     c\n43      3       --------------  No      ddd     a       b       c\n43      3       --------------  No      ddd     d       e       f\n43      3       --------------  No      ddd     g       h       i\n43      3       --------------  No      ddd     j       k\n52      5       --------------  No      eee     yyyx    zzz\n</pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 10426012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474b922d18185196b50f76156ce55c3?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/10426012/slaw"}, "edited": false, "score": 0, "creation_date": 1538147918, "post_id": 52550497, "comment_id": 92055187, "body": "the problem is that it should append the first line starting with a letter to the line above starting with a number."}], "tags": [], "owner": {"reputation": 1, "user_id": 8720531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fea61aa36cbdd6361ac53cfc0d3b625?s=128&d=identicon&r=PG&f=1", "display_name": "Atif", "link": "https://stackoverflow.com/users/8720531/atif"}, "is_accepted": false, "score": 0, "last_activity_date": 1538119968, "creation_date": 1538119968, "answer_id": 52550497, "question_id": 52544904, "link": "https://stackoverflow.com/questions/52544904/find-regex-move-the-next-line-at-the-end-of-this-line-and-copy-the-first-5-colu/52550497#52550497", "title": "Find regex, move the next line at the end of this line and copy the first 5 columns to the next lines that start with a letter", "body": "<p>You can use this command as mentioned below, hope it will help </p>\n\n<pre><code>awk '{if($1+0==$1) p=$1 FS $2 FS $3 FS $4 FS $5; else $0=p FS $0}1' test.txt | sort -k2 | column -t | awk '{ if ($6 &gt;= \" \") { print } }'\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 10426012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474b922d18185196b50f76156ce55c3?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/10426012/slaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 52550279, "answer_count": 3, "score": 1, "last_activity_date": 1538552253, "creation_date": 1538081251, "last_edit_date": 1538158965, "question_id": 52544904, "link": "https://stackoverflow.com/questions/52544904/find-regex-move-the-next-line-at-the-end-of-this-line-and-copy-the-first-5-colu", "title": "Find regex, move the next line at the end of this line and copy the first 5 columns to the next lines that start with a letter", "body": "<p>I have such text:</p>\n\n<pre><code>37    7    --------------  No  aaa\n40    0    --------------  No  bbb\nxxx   zzy\naa    bb   cc\n42    2    --------------  No  ccc\nxxx   zyz\na     b    c               d\n43    3    --------------  No  ddd\nxy    zz\na     a\na     a\nc\n52    5    --------------  No  eee\nyyyx  zzz\n</code></pre>\n\n<p>When I process it with awk I get:</p>\n\n<pre><code>awk '{if($1+0==$1) p=$1 FS $2 FS $3 FS $4 FS $5; else $0=p FS $0}1' /tmp/test3 | column -t\n37  7  --------------  No  aaa\n37  7  --------------  No  aaa  xxx   zzz\n40  0  --------------  No  bbb\n40  0  --------------  No  bbb  xxx   zzy\n40  0  --------------  No  bbb  aa    bb   cc\n42  2  --------------  No  ccc\n42  2  --------------  No  ccc  xxx   zyz\n42  2  --------------  No  ccc  a     b    c   d\n43  3  --------------  No  ddd\n43  3  --------------  No  ddd  xy    zz\n43  3  --------------  No  ddd  a     a\n43  3  --------------  No  ddd  a     a\n43  3  --------------  No  ddd  c\n52  5  --------------  No  eee\n52  5  --------------  No  eee  yyyx  zzz\n</code></pre>\n\n<p>and I need to get following output:</p>\n\n<pre><code>37    7    --------------  No  aaa\n40    0    --------------  No  bbb xxx   zzy\n40    0    --------------  No  bbb aa    bb   cc\n42    2    --------------  No  ccc xxx   zyz\n42    2    --------------  No  ccc a     b    c  d\n43    3    --------------  No  ddd xy    zz\n43    3    --------------  No  ddd a     a\n43    3    --------------  No  ddd a     a\n43    3    --------------  No  ddd c\n52    5    --------------  No  eee yyyx  zzz\n</code></pre>\n\n<p>Thanks in advance for your help! I've also tried \n<code>\nawk '/-/{base=$0; next} {print base, $0}' /tmp/test4 | column -t</code> as suggested but it deletes the first line starting with a number if there's consecutive line starting with a number.</p>\n\n<h2>UPDATE</h2>\n\n<p>This sed spell solved my problem: \nsed -r ':a;N;/^[0-9].<em>\\n[0-9]/{P;D};:b;s/^(.</em>)\\n(.<em>)/\\1 \\2\\n\\1/;P;s/.</em>\\n//;$d;N;/\\n[0-9]/D;bb' /tmp/test2</p>\n\n<p>One more question: if I have more than 8 columns in the output line is there a way to modify the sed command so it moves 9th, 10th and 11th column to a new line and copy the first 5 columns before it?</p>\n\n<p>Let's say I have these 3 lines:</p>\n\n<pre>\n42    2    --------------  No  ccc xxx   zyz\n42    2    --------------  No  ccc a     b    c    d    e    f\n43    3    --------------  No  ddd xy    zz\n</pre>\n\n<p>and I'd like to get:</p>\n\n<pre>\n42    2    --------------  No  ccc xxx   zyz\n42    2    --------------  No  ccc a     b    c\n42    2    --------------  No  ccc d     e    f\n43    3    --------------  No  ddd xy    zz\n</pre>\n"}, {"tags": ["php", "codeigniter", "perl", "codeigniter-3"], "comments": [{"owner": {"reputation": 41, "user_id": 9127277, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-ahFfdRIAUc4/AAAAAAAAAAI/AAAAAAAAAAs/FFEBkiVf_x0/photo.jpg?sz=128", "display_name": "Darwin Delgado", "link": "https://stackoverflow.com/users/9127277/darwin-delgado"}, "edited": false, "score": 0, "creation_date": 1538083108, "post_id": 52544193, "comment_id": 92030425, "body": "CentOS Linux release 7.3.1611 (Core) NAME=&quot;CentOS Linux&quot; VERSION=&quot;7 (Core)&quot; ID=&quot;centos&quot; ID_LIKE=&quot;rhel fedora&quot; VERSION_ID=&quot;7&quot; PRETTY_NAME=&quot;CentOS Linux 7 (Core)&quot; ANSI_COLOR=&quot;0;31&quot; CPE_NAME=&quot;cpe:/o:centos:centos:7&quot; HOME_URL=&quot;<a href=\"https://www.centos.org/\" rel=\"nofollow noreferrer\">centos.org</a>&quot; BUG_REPORT_URL=&quot;<a href=\"https://bugs.centos.org/\" rel=\"nofollow noreferrer\">bugs.centos.org</a>&quot;  CENTOS_MANTISBT_PROJECT=&quot;CentOS-7&quot; CENTOS_MANTISBT_PROJECT_VERSION=&quot;7&quot; REDHAT_SUPPORT_PRODUCT=&quot;centos&quot; REDHAT_SUPPORT_PRODUCT_VERSION=&quot;7&quot;  CentOS Linux release 7.3.1611 (Core) CentOS Linux release 7.3.1611 (Core)"}, {"owner": {"reputation": 41, "user_id": 9127277, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-ahFfdRIAUc4/AAAAAAAAAAI/AAAAAAAAAAs/FFEBkiVf_x0/photo.jpg?sz=128", "display_name": "Darwin Delgado", "link": "https://stackoverflow.com/users/9127277/darwin-delgado"}, "edited": false, "score": 0, "creation_date": 1538083129, "post_id": 52544193, "comment_id": 92030430, "body": "thar is the linux server"}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 1, "creation_date": 1538083745, "post_id": 52544193, "comment_id": 92030687, "body": "Have you checked the return value? If not, you should so that you can narrow down the problem. The perl script could be failing to execute or it does execute but throws a fatal error."}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 1, "creation_date": 1538083871, "post_id": 52544193, "comment_id": 92030730, "body": "Have you tried using the full path instead of the relative path?"}, {"owner": {"reputation": 41, "user_id": 9127277, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-ahFfdRIAUc4/AAAAAAAAAAI/AAAAAAAAAAs/FFEBkiVf_x0/photo.jpg?sz=128", "display_name": "Darwin Delgado", "link": "https://stackoverflow.com/users/9127277/darwin-delgado"}, "reply_to_user": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 0, "creation_date": 1538133928, "post_id": 52544193, "comment_id": 92047216, "body": "Ron, i Use the full path, and the perl script, it works well, I even show on the screen, the command to execute it, I copy it and execute it on the server console, and it runs without problems, or errors"}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 0, "creation_date": 1538149186, "post_id": 52544193, "comment_id": 92055869, "body": "If it runs in the console but not in the web app, then it&#39;s almost always due to a difference in environment.  Based on your comments so far, it&#39;s unclear if the script is failing to be executed or if it&#39;s executing but failing in some way.  Checking the return code of the various methods of execution could answer that question.  What are the permission settings for the script?  Does the web server user have rights to run it?  Is php&#39;s  safe mode enabled?"}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 0, "creation_date": 1538149529, "post_id": 52544193, "comment_id": 92056072, "body": "I&#39;m not sure if you&#39;re aware of this but a return value is not the same as a return code.  What kind of error checking/handling are you doing in the script?"}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 0, "creation_date": 1538149896, "post_id": 52544193, "comment_id": 92056246, "body": "Where does the script create the csv file?  Does the web server account have rights to write to that location? Have you tried to su to the web server account then run the script?"}, {"owner": {"reputation": 2847, "user_id": 5049185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46f0d2dc8ee06f428e43d0d115a57c4f?s=128&d=identicon&r=PG&f=1", "display_name": "syck", "link": "https://stackoverflow.com/users/5049185/syck"}, "edited": false, "score": 0, "creation_date": 1539262546, "post_id": 52544193, "comment_id": 92444196, "body": "Did you assure the directory where the csv is written is writable for the web server user? Many times /tmp is used to ensure that, but local directories are better controllable. -- Maybe <a href=\"http://php.net/manual/en/function.popen.php\" rel=\"nofollow noreferrer\">popen()</a> is a friend. Instead of waiting for Perl script termination and then reading your file, you can pipe your data directly to the PHP script without creation of an intermediate file. Any output can also be written by the PHP script then."}], "answers": [{"tags": [], "owner": {"reputation": 477, "user_id": 4364157, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Z5fts.png?s=128&g=1", "display_name": "Bruno", "link": "https://stackoverflow.com/users/4364157/bruno"}, "is_accepted": false, "score": 0, "last_activity_date": 1542356906, "creation_date": 1542356906, "answer_id": 53334021, "question_id": 52544193, "link": "https://stackoverflow.com/questions/52544193/execute-perl-script-from-php-with-codeigniter/53334021#53334021", "title": "Execute perl script from PHP with Codeigniter", "body": "<p>You probably have your PHP code running in <a href=\"http://php.net/manual/en/features.safe-mode.php\" rel=\"nofollow noreferrer\">Safe Mode</a>, which in your case will not allow you to use the functions you mentioned, check this out <a href=\"http://php.net/manual/en/features.safe-mode.functions.php\" rel=\"nofollow noreferrer\">Safe Mode Functions</a></p>\n\n<p>I found out that there are some similar questions to yours in these links:\n<a href=\"https://stackoverflow.com/questions/3438626/calling-perl-script-from-php-and-passing-in-variables-while-also-using-variabli\">Question 1</a>\n<a href=\"https://stackoverflow.com/questions/11114277/execute-perl-in-php\">Question 2</a></p>\n\n<p>I hope it helps.</p>\n"}], "owner": {"reputation": 41, "user_id": 9127277, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-ahFfdRIAUc4/AAAAAAAAAAI/AAAAAAAAAAs/FFEBkiVf_x0/photo.jpg?sz=128", "display_name": "Darwin Delgado", "link": "https://stackoverflow.com/users/9127277/darwin-delgado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1542356906, "creation_date": 1538077816, "question_id": 52544193, "link": "https://stackoverflow.com/questions/52544193/execute-perl-script-from-php-with-codeigniter", "title": "Execute perl script from PHP with Codeigniter", "body": "<p>i have one problem with php and perl, i need execute perl script, from  my website php with codeigniter, but the execution of the script is not evident. I explain better.</p>\n\n<p>The perl Script generate one csv file, when i execute in console, it works perfectly, but when I run it from PHP, it does not generate the file, and it does not give any errors during the execution, so I think, it's just not running.</p>\n\n<p>the script needs 3 input parameters, which are previously concatenated in the execution of the same. But even when I try to force the execution of the script, placing the values inside the execution command, nothing happens.</p>\n\n<p>I have tried to execute it in the following ways:</p>\n\n<pre><code>$perl_script = './zc_csv_dist_crd_3.pl' . ' ' . $ctac_corre . ' ' . $codigo. ' ' . $num_dist;\nexec($perl_script);\n</code></pre>\n\n<p>or </p>\n\n<pre><code>system($perl_script);\n</code></pre>\n\n<p>or directly</p>\n\n<pre><code>shell_exec(\"./zc_csv_dist_crd_3.pl 7736 311745421 42906\");\n#or\nexec(\"./zc_csv_dist_crd_3.pl 7736 311745421 42906\");\n#or\nsystem(\"./zc_csv_dist_crd_3.pl 7736 311745421 42906\");\n</code></pre>\n\n<p>I want to clarify that I do not need a return value, even the perl script, has no return value, since the file is generated empty or with data, and both cases are valid. I've read that it can be a problem of permission, but I'm new to perl, php and linux. I leave the linux server features, with the hope that someone can guide me.</p>\n\n<p>Very grateful with your help in advance.</p>\n\n<p>PD: I have read patiently, the forums in stackoverflow, the PHP manuals and even then I can not make it work, I know I'm jumping something, but I can not see it by now.</p>\n"}, {"tags": ["perl", "data-dumper"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1538079396, "post_id": 52543970, "comment_id": 92028841, "body": "They&#39;re explained <a href=\"https://perldoc.pl/Data::Dumper#DESCRIPTION\" rel=\"nofollow noreferrer\">right at the beginning of the documentation</a>."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538080056, "post_id": 52543970, "comment_id": 92029114, "body": "Note that you can change the name of the variable used by setting <code>$Data::Dumper::Varname</code> (defaults to VAR), and remove those variables and semicolons entirely by setting <code>$Data::Dumper::Terse</code> to 1, if you don&#39;t care about being able to string-eval the result (most people don&#39;t)."}, {"owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538092453, "post_id": 52543970, "comment_id": 92032741, "body": "@Grinnz  this is the type of information I was looking for when talking about the data dumper. Many people want to score this question down,  but they really don&#39;t understand exactly the data dumper module."}, {"owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538093635, "post_id": 52543970, "comment_id": 92032963, "body": "@Grinnz another point I asked this question to get more a practitioner point-of-view when using this module.  Thanks for your input."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1538076995, "creation_date": 1538076995, "answer_id": 52543997, "question_id": 52543970, "link": "https://stackoverflow.com/questions/52543970/perl-data-dumper-specifiers-explanation/52543997#52543997", "title": "Perl Data Dumper Specifiers Explanation", "body": "<p>The specifiers are described in the second paragraph of the DESCRIPTION:</p>\n\n<blockquote>\n  <p>The return value can be \"eval\"ed to get back an identical copy of the\n      original reference structure. </p>\n</blockquote>\n\n<p>So, you can take the string returned by Dumper and run</p>\n\n<pre><code>my $x = eval $dumped_string;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1538079701, "post_id": 52544572, "comment_id": 92028989, "body": "OP&#39;s output says <code>$VAR1</code> everywhere, indicating that it&#39;s from multiple <code>Dumper</code> calls."}], "tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": true, "score": -1, "last_activity_date": 1538079652, "creation_date": 1538079652, "answer_id": 52544572, "question_id": 52543970, "link": "https://stackoverflow.com/questions/52543970/perl-data-dumper-specifiers-explanation/52544572#52544572", "title": "Perl Data Dumper Specifiers Explanation", "body": "<p>Looks like you have an array:</p>\n\n<pre><code>my @arr = ('Snow','Rain','Sunny');\nprint Dumper(@arr);\n</code></pre>\n\n<p>When you pass the array, Dumper thinks you passed 3 separate variables. That is why you get:</p>\n\n<pre><code>$VAR1 = 'Snow';\n$VAR2 = 'Rain';\n$VAR3 = 'Sunny';\n</code></pre>\n\n<p>In order to see the array as data structure, you need to pass the reference to the array:</p>\n\n<pre><code>print Dumper(\\@arr);\n</code></pre>\n\n<p>This will produce:</p>\n\n<pre><code>$VAR1 = [\n          'Snow',\n          'Rain',\n          'Sunny'\n        ];\n</code></pre>\n\n<p>The output says that you passed the reference to array with 3 elements.</p>\n"}], "owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 52544572, "answer_count": 2, "score": -1, "last_activity_date": 1538079652, "creation_date": 1538076861, "last_edit_date": 1538079290, "question_id": 52543970, "link": "https://stackoverflow.com/questions/52543970/perl-data-dumper-specifiers-explanation", "title": "Perl Data Dumper Specifiers Explanation", "body": "<p>Observing the output of Data::Dumper, the specifiers (<code>$VAR1</code>, <code>\"\"</code>, <code>;</code>) are not explained in the CPAN documentation.  </p>\n\n<ol>\n<li>What is the purpose for the <code>$VAR1</code>?</li>\n<li>What is the purpose for the semicolon?</li>\n<li>What is the purpose for the quotations?</li>\n</ol>\n\n<p>Here is my output:</p>\n\n<pre><code>$VAR1 = \"Snow\";\n$VAR1 = \"Rain\";\n$VAR1 = \"Sunny\";\n$VAR1 = \"\";\n</code></pre>\n"}, {"tags": ["bash", "perl", "awk", "sed", "text-processing"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 2, "creation_date": 1538075707, "post_id": 52543683, "comment_id": 92027210, "body": "what have you tried so far? Ask us for specific problem, Not your whole code."}, {"owner": {"reputation": 25, "user_id": 10426012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474b922d18185196b50f76156ce55c3?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/10426012/slaw"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1538076488, "post_id": 52543683, "comment_id": 92027558, "body": "the lines starting with a number where split in two, I was able to fix it by using sed &#39;:a $!N;s/\\n[a-z]/ /;ta P;D&#39; /tmp/test1 | sed &#39;/^$/d&#39; and now I&#39;m bashing my head against the wall - don&#39;t know what to do next that&#39;s why I decided to ask for your help."}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1538077219, "post_id": 52543683, "comment_id": 92027867, "body": "When you get a line starting with a number, save the values that you want to  copy into variables. Then use those variables when you&#39;re processing lines that don&#39;t start with a number."}], "answers": [{"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": true, "score": 0, "last_activity_date": 1538077188, "creation_date": 1538077188, "answer_id": 52544030, "question_id": 52543683, "link": "https://stackoverflow.com/questions/52543683/sed-awk-perl-find-a-regex-copy-5-columns-of-this-line-and-paste-to-it-at-the-b/52544030#52544030", "title": "sed/awk/perl: find a regex, copy 5 columns of this line and paste to it at the beginning of the next lines", "body": "<p><code>awk</code> to the rescue!</p>\n\n<pre><code>$ awk '{if($1+0==$1) p=$1 FS $2 FS $3 FS $4 FS $5; else $0=p FS $0}1' file | column -t\n\n057    -  -  No  adod3  stptazlqn  10  753\n057    -  -  No  adod3  tlm        10  027\n057    -  -  No  adod3  stp        10  021\n12     -  -  No  azad1\n12     -  -  No  azad1  bbcz       30  12\n03085  -  -  No  azad1  azad1222\n03085  -  -  No  azad1  xxaz       1   12\n03085  -  -  No  azad1  azzst      1   12\n03085  -  -  No  azad1  hss        2   12\n</code></pre>\n\n<p>here <code>FS</code> is the field separator by default is the white space.  Number test is done with zero addition; pipe to <code>column</code> for pretty formatting. The <code>1</code> at the end is the shorthand for printing the line (<code>$0</code> variable)</p>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 0, "last_activity_date": 1538116158, "creation_date": 1538116158, "answer_id": 52549575, "question_id": 52543683, "link": "https://stackoverflow.com/questions/52543683/sed-awk-perl-find-a-regex-copy-5-columns-of-this-line-and-paste-to-it-at-the-b/52549575#52549575", "title": "sed/awk/perl: find a regex, copy 5 columns of this line and paste to it at the beginning of the next lines", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed -r '/^[0-9]/!G;s/(.*\\S)\\s*\\n((\\S+\\s*){5}).*/\\2 \\1/;h' file\n</code></pre>\n\n<p>Use pattern matching to extract the fields from line beginning with an integer which will have been appended to a line that did not.</p>\n\n<p>To align the columns correctly use:</p>\n\n<pre><code>sed -r '/^[0-9]/!G;s/(.*\\S)\\s*\\n((\\S+\\s*){5}).*/\\2 \\1/;h' file | column -t\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 10426012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474b922d18185196b50f76156ce55c3?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/10426012/slaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 52544030, "answer_count": 2, "score": 1, "last_activity_date": 1538116158, "creation_date": 1538075552, "question_id": 52543683, "link": "https://stackoverflow.com/questions/52543683/sed-awk-perl-find-a-regex-copy-5-columns-of-this-line-and-paste-to-it-at-the-b", "title": "sed/awk/perl: find a regex, copy 5 columns of this line and paste to it at the beginning of the next lines", "body": "<h2>I have following lines:</h2>\n\n<pre><code>057         -   -   No    adod3 stptazlqn    10    753\ntlm    10    027        \nstp    10    021                \n12         -   -   No    azad1\nbbcz     30    12        \n03085         -   -   No    azad1 azad1222\nxxaz    1    12        \nazzst    1    12        \nhss     2    12 \n</code></pre>\n\n<h2>what I need to do is:</h2>\n\n<ol>\n<li>Find lines starting with a number [0-9].</li>\n<li>Copy the first 5 columns separated by a space ' '.</li>\n<li>Paste it in the next lines not starting with a number.</li>\n</ol>\n\n<blockquote>\n<pre><code>057         -   -   No    adod3 stptazlqn    10    753\n057         -   -   No    adod3     tlm    10    027        \n057         -   -   No    adod3     stp    10    021                \n12         -   -   No    azad1\n12         -   -   No    azad1    bbcz     30    12        \n03085         -   -   No    azad1 azad1222\n03085         -   -   No    azad1    xxaz    1    12        \n03085         -   -   No    azad1    azzst    1    12        \n03085         -   -   No    azad1    hss     2    12\n</code></pre>\n</blockquote>\n\n<p>Thanks for any help in advance.</p>\n\n<p>Cheers,\nSlaw</p>\n"}, {"tags": ["perl", "io", "truncate", "truncation"], "answers": [{"comments": [{"owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "edited": false, "score": 0, "creation_date": 1538067634, "post_id": 52541811, "comment_id": 92023615, "body": "It Worked.  Thanks a lot.  Will also check out the data dumper."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1538068201, "post_id": 52541811, "comment_id": 92023870, "body": "You can also use s/\\R\\z// on Perl 5.10+ to correctly remove a CRLF sequence or CR or LF alone. As a note chomp() only removes \\n because on Windows the :crlf layer is applied to handles by default, which converts CRLF to \\n when reading. You could apply this layer yourself if you are expecting such line endings on a non-Windows system."}, {"owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538069106, "post_id": 52541811, "comment_id": 92024265, "body": "Most of us are extremely relax when understanding line feeds, carriage returns, and other whitespace material.  Thanks @Grinnz for the additional information."}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 3, "last_activity_date": 1538067297, "creation_date": 1538067297, "answer_id": 52541811, "question_id": 52541660, "link": "https://stackoverflow.com/questions/52541660/perl-truncation-is-off-by-2-when-outputting-the-line-number-for-a-string-been-tr/52541811#52541811", "title": "Perl truncation is Off-by-2 when outputting the line number for a string been truncated", "body": "<p>Most likely, your text file contains a carriage return and a linefeed character at the end of each line. The <code>chomp</code> call only removes the linefeed character, leaving you with 5 characters in your lines.</p>\n\n<p>A good approach is to <code>print</code> your input with some delimiters around it to inspect it:</p>\n\n<pre><code>print \"&lt;&lt;$_&gt;&gt;\\n\";\n</code></pre>\n\n<p>Alternatively, you can use <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow noreferrer\">Data::Dumper</a> to inspect your data:</p>\n\n<pre><code>use Data::Dumper;\n$Data::Dumper::Useqq = 1;\nprint Dumper $_;\n</code></pre>\n\n<p>Personally, I really like to remove all whitespace from the end of input lines,\nas keeping it is rarely wanted anyway:</p>\n\n<pre><code>while( &lt;$fhIn&gt; ) {\n    s/\\s+$//;\n    push @lines, $. if s/.{5}\\K.*//s;\n};\n</code></pre>\n"}], "owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 52541811, "answer_count": 1, "score": 1, "last_activity_date": 1538088979, "creation_date": 1538066692, "last_edit_date": 1538088979, "question_id": 52541660, "link": "https://stackoverflow.com/questions/52541660/perl-truncation-is-off-by-2-when-outputting-the-line-number-for-a-string-been-tr", "title": "Perl truncation is Off-by-2 when outputting the line number for a string been truncated", "body": "<p>I am outputting the line numbers from a text file for whenever truncation occurs.  Successfully I am getting output for most truncated lines. </p>\n\n<p>However, the truncated line output is off-by-2.  Here is what is happening in my code:</p>\n\n<p><code>Rain</code> , a string, is on line 1 of the input text file (see below).  Applied RegExp <code>s/.{4}\\K.*//s</code> to truncate to 4 and <code>Rain</code> outputs truncated even though it was not truncated (<code>Rain</code> is 4 characters no need to shorten it).  In addition, it happens for 5, <code>s/.{5}\\K.*//s</code>.  </p>\n\n<p>Correctly, the code outputs the truncated line when truncating by 3 or less.</p>\n\n<p>How can I show NO truncation occur when using <code>s/.{4}\\K.*//s</code> and <code>s/.{5}\\K.*//s</code>?  In other words, when I run my code to truncate on 4 or 5, Rain displays no truncation output for the line number.</p>\n\n<p>My text file - weather.txt:</p>\n\n<pre><code>Rain\nSnow\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $input = 'weather.txt';\n\nopen my $fhIn, '&lt;', $input or die qq(Unable to open \"$input\" for input: $!);\n\nmy @lines;\n\nwhile( &lt;$fhIn&gt;) {\n    chomp(@lines);\n    push @lines, $. if s/.{5}\\K.*//s;\n}\n\nmy $max = @lines;\nmy $none = '-';\n\nmy $fmt = \"%-20s\\n\";\n\nprint sprintf($fmt, \"Column 1\");\n\nforeach my $i (0..$max-1) {\n    print sprintf($fmt, ($lines[$i] or $none), ($lines[$i] or $none));\n}\n</code></pre>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1538060790, "post_id": 52539921, "comment_id": 92019779, "body": "Your code looks quite old-fashioned. Please add <code>use strict</code> and <code>use warnings</code> and make it compile with these pragmata. We don&#39;t like to deal with error-prone code here because it makes helping people really hard. Thanks."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1538060814, "post_id": 52539921, "comment_id": 92019794, "body": "What order would the columns be in? What&#39;s the format of the JSON structure?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1538062300, "post_id": 52539921, "comment_id": 92020782, "body": "Arrays, not scalars. <code>{ local $&quot; = &quot;|&quot;; say &quot;@row&quot;; }</code> for simple stuff, an actual CSV module for anything that might have embedded pipes or other non-trivial content."}], "answers": [{"comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1538071526, "post_id": 52541859, "comment_id": 92025363, "body": "If we assume that the OP code is correct, then <code>@lines=@{$data-&gt;{accounts}};</code> suggests that the structure would be <code>{ accounts: [...] }</code>, that is, the list is not a hash but an array."}, {"owner": {"reputation": 154, "user_id": 1610511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dad3f964c9fb2be8bb7f2f2d2cef4dd?s=128&d=identicon&r=PG", "display_name": "Edward Kirton", "link": "https://stackoverflow.com/users/1610511/edward-kirton"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1538087297, "post_id": 52541859, "comment_id": 92031653, "body": "@Corion : yes, fixed example json as indicated"}, {"owner": {"reputation": 154, "user_id": 1610511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dad3f964c9fb2be8bb7f2f2d2cef4dd?s=128&d=identicon&r=PG", "display_name": "Edward Kirton", "link": "https://stackoverflow.com/users/1610511/edward-kirton"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538087334, "post_id": 52541859, "comment_id": 92031663, "body": "@ikegami : yes, forgot that, added to answer"}, {"owner": {"reputation": 15, "user_id": 5113879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa1ddd948721a67e77f83d4f16494edc?s=128&d=identicon&r=PG", "display_name": "Shon Cleneeto", "link": "https://stackoverflow.com/users/5113879/shon-cleneeto"}, "edited": false, "score": 0, "creation_date": 1538105747, "post_id": 52541859, "comment_id": 92035113, "body": "@EdwardKirton My JSON file has 2.3 million records in it."}, {"owner": {"reputation": 15, "user_id": 5113879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa1ddd948721a67e77f83d4f16494edc?s=128&d=identicon&r=PG", "display_name": "Shon Cleneeto", "link": "https://stackoverflow.com/users/5113879/shon-cleneeto"}, "edited": false, "score": 0, "creation_date": 1538106467, "post_id": 52541859, "comment_id": 92035282, "body": "@EdwardKirton My JSON file has 2.3 million records in it. I was wondering that, can we parse the JSON file only if structure of the JSON file is known?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538112970, "post_id": 52541859, "comment_id": 92036959, "body": "You said you fixed it, but you still hardcode the field names, so this doesn&#39;t answer the question"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 15, "user_id": 5113879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa1ddd948721a67e77f83d4f16494edc?s=128&d=identicon&r=PG", "display_name": "Shon Cleneeto", "link": "https://stackoverflow.com/users/5113879/shon-cleneeto"}, "edited": false, "score": 0, "creation_date": 1538113020, "post_id": 52541859, "comment_id": 92036969, "body": "Re &quot;<i>can we parse the JSON file only if structure of the JSON file is known?</i>&quot;, @Shon Cleneeto, You need to know the structure if you want to change the structure (as you want to do), but you don&#39;t need to know the specific fields names, as my answer shows."}], "tags": [], "owner": {"reputation": 154, "user_id": 1610511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dad3f964c9fb2be8bb7f2f2d2cef4dd?s=128&d=identicon&r=PG", "display_name": "Edward Kirton", "link": "https://stackoverflow.com/users/1610511/edward-kirton"}, "is_accepted": false, "score": 0, "last_activity_date": 1538087099, "last_edit_date": 1538087099, "creation_date": 1538067448, "answer_id": 52541859, "question_id": 52539921, "link": "https://stackoverflow.com/questions/52539921/how-to-convert-a-json-file-to-delimited-file-using-perl/52541859#52541859", "title": "How to convert a JSON file to Delimited File using perl.", "body": "<p>You didn't provide an example input file, so I'm guessing it is something like this:</p>\n\n<pre><code>{ \"accounts\": [ { \"_id\": \"1\", \"accountNumber\": \"99999\", \"accountType\": \"acctTypeA\", \"cardType\": \"cardTypeA\", \"cardSubType\": \"cardSubTypeA\", \"protectionMethod\": \"protectionMethodA\", \"protectionSource\": \"protectionSourceA\", \"expirationDate\": \"2020-09\", \"nameOnAccount\": \"First Last\", \"cardStatus\": \"OK\", \"cardHolderType\": \"CHTypeA\", \"createdBy\": \"userX\", \"addressId\": \"444\", \"productType\": \"prodTypeA\", \"isDefaultAccount\": \"1\", \"optional\": \"OptA\" } ] }\n</code></pre>\n\n<p>You're pretty close, but usually the entire file is a JSON record, so you don't loop line-by-line, you create a data structure (hashref) that represents the entire file (i.e. you only need to do $json->decode once per file).</p>\n\n<p>Additionally, I'd suggest some checks to validate input, such as missing fields; you can see I have it die with an error message if any field is missing.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse lib qw(..);\nuse JSON qw( );\n\n@ARGV == 2 or die(\"Infile, Outfile required\\n\");\nopen json_fh, \"&lt;$ARGV[0]\" or die \"Couldn't open file $ARGV[0]!\\n\";\nopen csv_fh, \"&gt;$ARGV[1]\" or die \"Couldn't open file $ARGV[1]!\\n\";\n\nmy $json_text =&lt;json_fh&gt;;\nclose json_fh;\n\nmy $json = JSON-&gt;new-&gt;allow_nonref;\nmy $data = $json-&gt;decode($json_text);\nmy $accounts = $data-&gt;{accounts};\n\nmy @required = qw(_id accountNumber accountType cardType cardSubType protectionMethod protectionSource expirationDate nameOnAccount cardStatus cardHolderType createdBy addressId productType isDefaultAccount); \nmy @opt = (); # learn these\nmy %col; # key =&gt; column index\nmy $lastIndex;\nfor (my $i=0; $i&lt;=$#required; ++$i) { $lastIndex = $col{$required[$i]} = $i }\nprint \"There are \", $lastIndex+1, \" required cols\\n\";\n\nforeach my $rec ( @$accounts )\n{\n    my @row;    \n    foreach my $key ( keys %$rec )\n    {\n        if ( ! exists($col{$key}) ) {\n            # new (optional) key\n            push @opt, $key;\n            $col{$key} = ++$lastIndex;\n            print \"New col: $key (col \", $lastIndex+1, \")\\n\";\n        }\n        $row[$col{$key}] = $rec-&gt;{$key};\n    }\n\n    # check for all required\n    for (my $i=0; $i&lt;=$#required; ++$i) {\n        defined($row[$i]) or die(\"Missing: $required[$i]\\n\");\n    }\n\n    #Write to the file in delimited file format\n    print csv_fh join(\"|\", @row), \"\\n\";\n}\nclose csv_fh;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1538073053, "last_edit_date": 1538073053, "creation_date": 1538072225, "answer_id": 52542949, "question_id": 52539921, "link": "https://stackoverflow.com/questions/52539921/how-to-convert-a-json-file-to-delimited-file-using-perl/52542949#52542949", "title": "How to convert a JSON file to Delimited File using perl.", "body": "<p>Assuming that every account has the same fields &mdash;it makes no sense otherwise&mdash; you can use the following:</p>\n\n<pre><code>my $json_parser = JSON-&gt;new;\n\nmy @headers;\nfor my $json_doc (@json_docs) {\n   my $data = $json_parser-&gt;decode($json_doc);\n\n   my $id = $data-&gt;{_id};\n   for my $account (@{ $data-&gt;{accounts} }) {\n      if (!@headers) {\n         @headers = sort keys %$account;\n         say join \"|\", 'id', @headers;\n      }\n\n      say join \"|\", $id, @$account{@headers};\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5113879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa1ddd948721a67e77f83d4f16494edc?s=128&d=identicon&r=PG", "display_name": "Shon Cleneeto", "link": "https://stackoverflow.com/users/5113879/shon-cleneeto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 0, "accepted_answer_id": 52542949, "answer_count": 2, "score": 1, "last_activity_date": 1538087099, "creation_date": 1538060409, "question_id": 52539921, "link": "https://stackoverflow.com/questions/52539921/how-to-convert-a-json-file-to-delimited-file-using-perl", "title": "How to convert a JSON file to Delimited File using perl.", "body": "<pre><code>#/usr/lib/perl\n\nuse lib qw(..);\nuse JSON qw( );\n\nopen json_fh, \"&lt;$ARGV[0]\" or die \"Couldn't open file $ARGV[0]!\\n\";\nopen csv_fh, \"&gt;$ARGV[1]\" or die \"Couldn't open file $ARGV[1]!\\n\";\n\n@json_text =&lt;json_fh&gt;;\nclose json_fh;\nforeach $json_text( @json_text )\n{\n    chomp $json_text;\n    $json = JSON-&gt;new;\n    $data = $json-&gt;decode($json_text);\n\n    $id=$data-&gt;{_id};\n    @lines=@{$data-&gt;{accounts}};\n    foreach $line ( @lines )\n    {\n        $accountNumber = $line-&gt;{accountNumber};\n        $accountType = $line-&gt;{accountType};\n        $cardType = $line-&gt;{cardType};\n        $cardSubType = $line-&gt;{cardSubType};\n        $protectionMethod = $line-&gt;{protectionMethod};\n        $protectionSource = $line-&gt;{protectionSource};\n        $expirationDate = $line-&gt;{expirationDate};\n        $nameOnAccount = $line-&gt;{nameOnAccount};\n        $cardStatus = $line-&gt;{cardStatus};\n        $cardHolderType = $line-&gt;{cardHolderType};\n        $createdBy = $line-&gt;{createdBy};\n        $addressId = $line-&gt;{addressId};\n        $productType = $line-&gt;{productType};\n        $isDefaultAccount = $line-&gt;{isDefaultAccount};\n\n        #Write to the file in delimited file format\n        print csv_fh \"$id|$accountNumber|$accountType|$cardType|$cardSubType|$protectionMethod|$protectionSource|$expirationDate|$nameOnAccount|$cardStatus|$cardHolderType|$createdBy|$addressId|$productType|$isDefaultAccount\\n\";\n    }\n}\nclose csv_fh;\n</code></pre>\n\n<p>This is a perl script that, I created to convert the JSON file to a delimited file, If the element names are known.</p>\n\n<p>Could anyone please help me to modify the code so that this conversion can be done, when the element names are unknown.</p>\n"}, {"tags": ["perl", "mojolicious"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1538059973, "post_id": 52539474, "comment_id": 92019226, "body": "Try this: <code>&lt;td&gt; &lt;%= exists $query_result[27]-&gt;{data} ? @{$query_result[27]-&gt;{data}} :  &#39;no data&#39; %&gt; &lt;&#47;td&gt;</code>"}, {"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1538061686, "post_id": 52539474, "comment_id": 92020395, "body": "This seems not to work:     Global symbol &quot;@query_result&quot; requires explicit package name (did you forget to declare &quot;my @query_result&quot;?) at template    Did you mean this? &lt;td&gt;&lt;%= $query_result-&gt;[27] ? @$query_result[27]-&gt;{data} : &#39;no data&#39; &lt;/td&gt;"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538080917, "post_id": 52539474, "comment_id": 92029532, "body": "Just as a note, <code>@$query_result[27]-&gt;{data}</code> is a little bit of nonsense; it&#39;s saying to dereference $query_result and take a list slice, of a list with just the element 27. What you meant was <code>$$query_result[27]-&gt;{data}</code> which would be more commonly written as <code>$query_result-&gt;[27]{data}</code> (arrows between brackets are optional). Remember that the type of brackets determine the data structure you&#39;re dereferencing as, the sigil determines whether you&#39;re retrieving a single element or a list."}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1538061586, "post_id": 52540111, "comment_id": 92020319, "body": "Thank you for the quick answer, this is what im looking for.          &lt;td&gt;&lt;%= $query_result-&gt;[27] ? @$query_result[27]-&gt;{data} : &#39;no data&#39; &lt;/td&gt;      is there a shorter way to write this?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1538081039, "post_id": 52540111, "comment_id": 92029592, "body": "Yes, but not necessarily a prettier way: <code>($query_result-&gt;[27] &#47;&#47; {data =&gt; &#39;no data&#39;})-&gt;{data}</code>"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1538061649, "last_edit_date": 1538061649, "creation_date": 1538060960, "answer_id": 52540111, "question_id": 52539474, "link": "https://stackoverflow.com/questions/52539474/perl-mojolicious-print-undef-key-in-template/52540111#52540111", "title": "Perl - Mojolicious - Print undef key in template", "body": "<p>It looks like you are trying to show all the indexes from <code>0</code> to <code>27</code>, or less. You probably want to use a loop for that.</p>\n\n<pre><code>% foreach my $i ( 0 .. scalar @$query_result ) {\n&lt;td&gt; &lt;%= @$query_result[$i]-&gt;{data} %&gt; &lt;/td&gt;    \n% }\n</code></pre>\n\n<p>Now you don't have to care about the number of columns any more. Do the same for the headings and you're golden.</p>\n\n<hr>\n\n<p>Alternatively, you need to check if there is something in <code>$query_result-&gt;[27]</code> before you can do an <code>exists</code> check, because an <code>undef</code> (i.e. <em>no value</em>) cannot be used like a hash reference.</p>\n\n<pre><code>&lt;td&gt;&lt;%= $query_result-&gt;[27] ? @$query_result[27]-&gt;{data} : 'no data' &lt;/td&gt;   \n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 52540111, "answer_count": 1, "score": 1, "last_activity_date": 1538061649, "creation_date": 1538058914, "last_edit_date": 1538059713, "question_id": 52539474, "link": "https://stackoverflow.com/questions/52539474/perl-mojolicious-print-undef-key-in-template", "title": "Perl - Mojolicious - Print undef key in template", "body": "<p>To give some context my controller selects an array ref from a query. Then the results get printed in the template like this.</p>\n\n<p>home.html.ep   </p>\n\n<pre><code> &lt;td&gt; &lt;%= @$query_result[0]-&gt;{data} %&gt; &lt;/td&gt;    \n &lt;td&gt; &lt;%= @$query_result[1]-&gt;{data} %&gt; &lt;/td&gt;  \n ....  \n &lt;td&gt; &lt;%= @$query_result[27]-&gt;{data} %&gt; &lt;/td&gt;    \n</code></pre>\n\n<p>Due to some results not existing, Mojolicious throws an error ( can't use undef hash value ... )<br>\nWhat I am trying to do:<br>\nWhen Mojolicious gets to the undef hash key/value to print 'No Data'.<br>\nI have tried like this :   </p>\n\n<pre><code>  &lt;td&gt; &lt;%= @$query_result[27]-&gt;{data} || 'no data' %&gt; &lt;/td&gt;   \n  or    \n  &lt;td&gt; % (exists(@$query_result[27]-&gt;{data})) ? &lt;%= @$query_result[27]-&gt;{data} %&gt; : 'no data' &lt;/td&gt;   \n  or \n  &lt;td&gt;\n  % if (exists($query_result[27]-&gt;{data})) {\n  &lt;%= $query_result[27]-&gt;{data} %&gt;\n  % } else { \n  'No data'\n  % }\n</code></pre>\n\n<p>I can't just remove &lt;%= $query_result[27]->{data} %> because its returned from a query that runs on different parameters and only some parameters dont return the 27th array.  </p>\n\n<p>Is there a way to achieve what im trying? Thank you!</p>\n"}, {"tags": ["perl", "prometheus"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1538065365, "post_id": 52538198, "comment_id": 92022480, "body": "Is Mojolicious relevant to your problem? Your reduced code outputs the expected string for me: <code>use Net::Prometheus; my $c = Net::Prometheus-&gt;new(); $c-&gt;new_gauge(help=&gt;&#39;&#39;,name=&gt;&#39;Test3&#39;,labels=&gt;[&#39;color&#39;]);-&gt;se&zwnj;&#8203;t(&#39;red&#39;,123);print $c-&gt;render</code> outputs <code>Test3{color=&quot;red&quot;} 123</code>."}, {"owner": {"reputation": 9501, "user_id": 55366, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/89489696e09f6d1307ce5726c35a2c3e?s=128&d=identicon&r=PG", "display_name": "Orjanp", "link": "https://stackoverflow.com/users/55366/orjanp"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1538119724, "post_id": 52538198, "comment_id": 92039665, "body": "You are perfectly right. I was using Mojolicious in the original code, so for some reason I did it in the example as well. Have changed it to a better example without it. The set method works fine, but the set_function does not, by the looks of it."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1538591721, "post_id": 52538198, "comment_id": 92200415, "body": "This was reported as a <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=127284\" rel=\"nofollow noreferrer\">bug report</a> now"}, {"owner": {"reputation": 9501, "user_id": 55366, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/89489696e09f6d1307ce5726c35a2c3e?s=128&d=identicon&r=PG", "display_name": "Orjanp", "link": "https://stackoverflow.com/users/55366/orjanp"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1539609984, "post_id": 52538198, "comment_id": 92552973, "body": "Yes, I sent one in. It&#39;s been fixed in version 0.06. <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=127284\" rel=\"nofollow noreferrer\">rt.cpan.org/Public/Bug/Display.html?id=127284</a>"}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1538135328, "post_id": 52551894, "comment_id": 92047865, "body": "Yeah, it should either be documented or (if it&#39;s a bug) fixed in the code. The <a href=\"https://metacpan.org/source/PEVANS/Net-Prometheus-0.05/lib/Net/Prometheus/Gauge.pm#L182-194\" rel=\"nofollow noreferrer\">relevant code</a> only pays attention to <code>values</code> (which are created by <code>set</code>). It dynamically calls functions (if they exist), but you need to have a <code>value</code> first."}, {"owner": {"reputation": 9501, "user_id": 55366, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/89489696e09f6d1307ce5726c35a2c3e?s=128&d=identicon&r=PG", "display_name": "Orjanp", "link": "https://stackoverflow.com/users/55366/orjanp"}, "edited": false, "score": 1, "creation_date": 1539610032, "post_id": 52551894, "comment_id": 92553005, "body": "Yes, I sent in a bug report. It&#39;s been fixed in version 0.06. rt.cpan.org/Public/Bug/Display.html?id=127284"}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 3, "last_activity_date": 1538749855, "last_edit_date": 1538749855, "creation_date": 1538125527, "answer_id": 52551894, "question_id": 52538198, "link": "https://stackoverflow.com/questions/52538198/perl-prometheus-gauge-add-label-with-set-function-does-not-give-the-expected-res/52551894#52551894", "title": "Perl prometheus gauge add label with set_function does not give the expected result", "body": "<p>I'm not sure if this is the intended approach with <a href=\"https://metacpan.org/pod/Net::Prometheus\" rel=\"nofollow noreferrer\">Net::Prometheus</a>, but creating a gauge, setting a value and then setting a function works for me:</p>\n\n<pre><code>my $c = Net::Prometheus-&gt;new;\nmy $g = $c-&gt;new_gauge(name=&gt;'Test',help=&gt;'help',labels=&gt;['color']);\n$g-&gt;set('red',1);\n$g-&gt;set_function('red',sub { warn 'Getter called'; 123 });\nprint $c-&gt;render\n</code></pre>\n\n<p>This outputs</p>\n\n<pre><code>Getter called at ...\n# HELP Test help\n# TYPE Test gauge\nTest{color=\"red\"} 123\n</code></pre>\n\n<p>I think the documentation could be a bit clearer about this.</p>\n\n<p>This has been addressed in the <a href=\"https://metacpan.org/release/PEVANS/Net-Prometheus-0.06\" rel=\"nofollow noreferrer\">0.06 release</a>.</p>\n"}], "owner": {"reputation": 9501, "user_id": 55366, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/89489696e09f6d1307ce5726c35a2c3e?s=128&d=identicon&r=PG", "display_name": "Orjanp", "link": "https://stackoverflow.com/users/55366/orjanp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 52551894, "answer_count": 1, "score": 1, "last_activity_date": 1538749855, "creation_date": 1538054948, "last_edit_date": 1592644375, "question_id": 52538198, "link": "https://stackoverflow.com/questions/52538198/perl-prometheus-gauge-add-label-with-set-function-does-not-give-the-expected-res", "title": "Perl prometheus gauge add label with set_function does not give the expected result", "body": "<p>I'm trying to add a label to a prometheus gauge. Using the set method works just fine, but it seems like I can't get the set_function method right.</p>\n<p>The result is that I just don't see the gauge metric where I used the set_function method.</p>\n<p>The result(cleaned up) is as follows:</p>\n<pre><code># HELP Test Test help \n# TYPE Test gauge\n</code></pre>\n<p>Whats expected is a third line saying &quot;Test{color=&quot;red&quot;} 123&quot;</p>\n<p><a href=\"https://pastebin.com/H3wStgW7\" rel=\"nofollow noreferrer\">Pastebin</a> to the code.</p>\n<pre><code>#!/usr/bin/env perl\n\nuse Net::Prometheus;\n\nmy $client = Net::Prometheus-&gt;new;\n\n$client-&gt;new_gauge(name =&gt; &quot;Test&quot;, help =&gt; &quot;Test help&quot;, labels =&gt; [qw/color/])-&gt;set_function('red', sub { return 123 });\n\nprint $client-&gt;render;\n</code></pre>\n<p>Not sure if I'm doing something wrong, or if it's a bug?</p>\n<p>Prometheus <a href=\"https://metacpan.org/pod/Net::Prometheus::Gauge#set_function\" rel=\"nofollow noreferrer\">new_gauge-&gt;new_function()</a></p>\n<blockquote>\n<p>METHODS</p>\n<p><strong>set</strong></p>\n<p>$gauge-&gt;set( [ @label_values ], $value )<br />\n$child-&gt;set($value )</p>\n<p><em>Sets the current value for the gauge.</em></p>\n<p><em>If the gauge has any labels defined, the values for them must be given\nfirst.</em></p>\n<p><strong>set_function</strong></p>\n<p>$gauge-&gt;set_function( [ @label_values ], $func )<br />\n$child-&gt;set_function( $func )</p>\n<p><em>Sets a value-returning callback function\nfor the gauge. If the gauge is labeled, each label combination\nrequires its own function.</em></p>\n<p><em>When invoked, the function will be passed no arguments and is expected\nto return a single value</em></p>\n</blockquote>\n"}, {"tags": ["windows", "perl", "tk", "perltk"], "comments": [{"owner": {"reputation": 725, "user_id": 1147654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bs8pG.jpg?s=128&g=1", "display_name": "saudic", "link": "https://stackoverflow.com/users/1147654/saudic"}, "edited": false, "score": 1, "creation_date": 1538059384, "post_id": 52536994, "comment_id": 92018823, "body": "What is interesting is that on unix, (ubuntu 18.04) you can comment out the <code>$mainWindow-&gt;bind(&#39;&lt;MouseWheel&gt;&#39; =&gt; [sub{ if($lbCanScroll) { $lb-&gt;yview(&#39;scroll&#39;, -($_[1] &#47; 120) * 3, &#39;units&#39;); } }, Ev(&#39;D&#39;)]);</code> part while keeping the scrolling behaviour, so it must be another binding doing it."}, {"owner": {"reputation": 5634, "user_id": 4601149, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/x0fdS.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/4601149/dan"}, "reply_to_user": {"reputation": 725, "user_id": 1147654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bs8pG.jpg?s=128&g=1", "display_name": "saudic", "link": "https://stackoverflow.com/users/1147654/saudic"}, "edited": false, "score": 0, "creation_date": 1538117322, "post_id": 52536994, "comment_id": 92038494, "body": "@saudic Thanks for the reply. That is strange as the above code is literally the whole program. It is possible I am using a very old version of Perl TK that might not have supported this behaviour (not my choice or I would update it) or it might just behave differently on windows to Linux. Either way thanks for the info"}], "answers": [{"tags": [], "owner": {"reputation": 5634, "user_id": 4601149, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/x0fdS.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/4601149/dan"}, "is_accepted": true, "score": 1, "last_activity_date": 1538056140, "creation_date": 1538056140, "answer_id": 52538611, "question_id": 52536994, "link": "https://stackoverflow.com/questions/52536994/scroll-only-when-mouse-over/52538611#52538611", "title": "Scroll only when mouse over", "body": "<p>As a temporary solution, I can put it in a wrapper object that stores only that one component. This allows me to bind to the <code>Enter</code> and <code>Leave</code> events on that object. It looks a bit like</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Tk;\n\nmy $mainWindow = new MainWindow;\n\nmy $lbHolder = $mainWindow-&gt;Pane()-&gt;pack;\n\nmy $lb = $lbHolder-&gt;Scrolled(\"Listbox\", -scrollbars =&gt; \"osoe\")-&gt;pack;\n\n$lb-&gt;insert('end', qw/red blue yellow green orange/);\n$lb-&gt;insert('end', qw/red blue yellow green orange/);\n$lb-&gt;insert('end', qw/red blue yellow green orange/);\n$lb-&gt;insert('end', qw/red blue yellow green orange/);\n$lb-&gt;insert('end', qw/red blue yellow green orange/);\n\nmy $lbCanScroll = 0;\n$mainWindow-&gt;bind('&lt;MouseWheel&gt;' =&gt; [sub{ if($lbCanScroll) { $lb-&gt;yview('scroll', -($_[1] / 120) * 3, 'units'); } }, Ev('D')]);\n$lbHolder-&gt;bind('&lt;Leave&gt;' =&gt; sub{$lbCanScroll = 0});\n$lbHolder-&gt;bind('&lt;Enter&gt;' =&gt; sub{$lbCanScroll = 1});\n\nMainLoop;\n</code></pre>\n"}], "owner": {"reputation": 5634, "user_id": 4601149, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/x0fdS.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/4601149/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 52538611, "answer_count": 1, "score": 3, "last_activity_date": 1538056188, "creation_date": 1538051147, "last_edit_date": 1538056188, "question_id": 52536994, "link": "https://stackoverflow.com/questions/52536994/scroll-only-when-mouse-over", "title": "Scroll only when mouse over", "body": "<p>I am trying to provide scrolling behaviour on a GUI developed using Perl TK.</p>\n\n<p>What I would like to achieve is, when the mouse is over a widget such as a <code>Scrolled</code> containing a <code>ListBox</code>, the user should be able to scroll up and down using the mouse wheel. The mouse counts as being over the widget if it is over the widget itself <strong>or</strong> the scrollbars at the sides of the widget. In over words, if the mouse is anywhere over the <code>Scrolled</code> and not just the <code>ListBox</code>.</p>\n\n<p>I have included an example below that works when the mouse is over the <code>ListBox</code> but it does not work if it is just outside the <code>ListBox</code> but it is still on the <code>Scrolled</code>.</p>\n\n<p>It is worth noting, for the mouse wheel support, this is Windows specific on my example.</p>\n\n<p>Example script</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Tk;\n\nmy $mainWindow = new MainWindow;\n\nmy $lb = $mainWindow-&gt;Scrolled(\"Listbox\", -scrollbars =&gt; \"osoe\")-&gt;pack;\n\n$lb-&gt;insert('end', qw/red blue yellow green orange/);\n$lb-&gt;insert('end', qw/red blue yellow green orange/);\n$lb-&gt;insert('end', qw/red blue yellow green orange/);\n$lb-&gt;insert('end', qw/red blue yellow green orange/);\n$lb-&gt;insert('end', qw/red blue yellow green orange/);\n\nmy $lbCanScroll = 0;\n$mainWindow-&gt;bind('&lt;MouseWheel&gt;' =&gt; [sub{ if($lbCanScroll) { $lb-&gt;yview('scroll', -($_[1] / 120) * 3, 'units'); } }, Ev('D')]);\n$lb-&gt;bind('&lt;Leave&gt;' =&gt; sub{$lbCanScroll = 0});\n$lb-&gt;bind('&lt;Enter&gt;' =&gt; sub{$lbCanScroll = 1});\n\nMainLoop;\n</code></pre>\n\n<hr>\n\n<p>Whilst I have posted what I will call a temporary solution, it would be nice to know if there was a more reusable way to achieve this.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538081548, "post_id": 52536072, "comment_id": 92029806, "body": "Please be careful overriding UNIVERSAL methods like VERSION. (<a href=\"https://perldoc.pl/UNIVERSAL\" rel=\"nofollow noreferrer\">docs</a>) In this case, you have broken version checks on this module, because they are run like: <code>Sample-&gt;VERSION($required_version)</code> and it is expected to return the version, or throw an exception if a version is passed and it&#39;s greater than the module&#39;s version. And since the version can be many things other than numbers, as you discovered, this is not a simple thing to reimplement. Further reading: <a href=\"http://blogs.perl.org/users/grinnz/2018/04/a-guide-to-versions-in-perl.html\" rel=\"nofollow noreferrer\">blogs.perl.org/users/grinnz/2018/04/&hellip;</a>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538081902, "post_id": 52536072, "comment_id": 92029953, "body": "If you just want to &quot;intercept&quot; versions that are passed to this method but not affect its normal functionality, try &#39;before&#39; or &#39;after&#39; from <a href=\"https://metacpan.org/pod/Class::Method::Modifiers\" rel=\"nofollow noreferrer\">Class::Method::Modifiers</a>."}, {"owner": {"reputation": 3, "user_id": 9840799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d7021dab4adb4ddd909fda40e03d238?s=128&d=identicon&r=PG&f=1", "display_name": "Mendenhall", "link": "https://stackoverflow.com/users/9840799/mendenhall"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538162995, "post_id": 52536072, "comment_id": 92061745, "body": "The example provided was stripped down to show the just the behavior in question. Your blog post was very helpful, thanks for that. I&#39;ll have a look at Class::Method::Modifiers, but our requirements (for an in-house system, not intended for public consumption) are such that normal VERSION behavior is not adequate."}], "answers": [{"tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 2, "last_activity_date": 1538048914, "creation_date": 1538048914, "answer_id": 52536320, "question_id": 52536072, "link": "https://stackoverflow.com/questions/52536072/argument-passed-to-perl-version-subroutine-during-module-version-check/52536320#52536320", "title": "Argument passed to Perl VERSION subroutine during module version check", "body": "<p>A v string is a string. Each number is assumed to be a Unicode code point and is converted to that character so what you are actually printing out is chr(1) . chr(0). You can prove this with the following script</p>\n\n<pre><code>my $vstring = v80.101.114.108\nprint $vstring, \"\\n\";\n</code></pre>\n\n<p>This will print <code>Perl</code></p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1538334981, "last_edit_date": 1538334981, "creation_date": 1538074319, "answer_id": 52543417, "question_id": 52536072, "link": "https://stackoverflow.com/questions/52536072/argument-passed-to-perl-version-subroutine-during-module-version-check/52543417#52543417", "title": "Argument passed to Perl VERSION subroutine during module version check", "body": "<p>Each dot-separated number is converted into a character with the ordinal value of the number.<sup>[1]</sup> In other words,</p>\n\n<pre><code>v1.0   \u2261   \"\\x01\\x00\"   \u2261   chr(1).chr(0)   \u2261   pack('W*', 1, 0)\n</code></pre>\n\n<p>You can convert a v-string into something human readable using the <code>%vd</code> format specifier of <code>sprintf</code>.<sup>[2]</sup></p>\n\n<pre><code>$ perl -e'CORE::say sprintf(\"%vd\", v1.0)'\n1.0\n</code></pre>\n\n<p>But it's better to use the <a href=\"http://search.cpan.org/perldoc?version\" rel=\"nofollow noreferrer\">version</a> module.</p>\n\n<pre><code>$ perl -Mversion -e'CORE::say version-&gt;parse(v1.0)'\nv1.0\n</code></pre>\n\n<p>It's better because the version module can handle version strings in general (not just v-strings).</p>\n\n<pre><code>$ perl -Mversion -e'\n   my $v1 = version-&gt;parse(1.0);\n   my $v2 = version-&gt;parse(\"1.0\");\n   my $v3 = version-&gt;parse(v1.0);\n   my $v4 = version-&gt;parse(\"v1.0\");\n   CORE::say \"equal\"\n      if $v1 == $v2\n      &amp;&amp; $v1 == $v3\n      &amp;&amp; $v1 == $v4\n'\nequal\n</code></pre>\n\n<p>One can use any numerical or string comparison operator<sup>[3]</sup> to compare version objects.</p>\n\n<hr>\n\n<ol>\n<li><p>It's more than that, though. A scalar containing a v-string has magic (of type <code>V</code>) applied, so it's possible to dectect that it's a v-string.</p>\n\n<pre><code>$ perl -MDevel::Peek -e'Dump(\"\\x01\\x00\"); Dump(v1.0);'\nSV = PV(0xbc9d70) at 0xbe7998\n  REFCNT = 1\n  FLAGS = (POK,IsCOW,READONLY,PROTECT,pPOK)\n  PV = 0xbf1ed0 \"\\1\\0\"\\0\n  CUR = 2\n  LEN = 10\n  COW_REFCNT = 0\nSV = PVMG(0xc20480) at 0xbe7938\n  REFCNT = 1\n  FLAGS = (RMG,POK,IsCOW,READONLY,PROTECT,pPOK)\n  IV = 0\n  NV = 0\n  PV = 0xbf0190 \"\\1\\0\"\\0\n  CUR = 2\n  LEN = 10\n  COW_REFCNT = 0\n  MAGIC = 0xbf3a80\n    MG_VIRTUAL = 0\n    MG_TYPE = PERL_MAGIC_vstring(V)\n    MG_LEN = 4\n    MG_PTR = 0xbf1700 \"v1.0\"\n</code></pre>\n\n<p>This magic is even applied to any scalar to which the v-string is copied!</p>\n\n<pre><code>$ perl -MDevel::Peek -e'my $v1 = v1.0; my $v2 = $v1; Dump($v2)'\nSV = PVMG(0x9dc500) at 0x9a3a00\n  REFCNT = 1\n  FLAGS = (RMG,POK,IsCOW,pPOK)\n  IV = 0\n  NV = 0\n  PV = 0x9ac1b0 \"\\1\\0\"\\0\n  CUR = 2\n  LEN = 10\n  COW_REFCNT = 2\n  MAGIC = 0x9b8090\n    MG_VIRTUAL = 0\n    MG_TYPE = PERL_MAGIC_vstring(V)\n    MG_LEN = 4\n    MG_PTR = 0x9adef0 \"v1.0\"\n</code></pre>\n\n<p>I believe the version module takes advantage of this information.</p></li>\n<li><p>This format specifier works on any string, so it's convenient for checking for hidden or special characters when debugging.</p>\n\n<pre><code>$ perl -e'CORE::say sprintf \"%v02X\", \"abc\\r\\n\"'\n61.62.63.0D.0A\n</code></pre></li>\n<li><p><code>==</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>&lt;=&gt;</code>, <code>eq</code>, <code>lt</code>, <code>gt</code>, <code>le</code>, <code>ge</code> and <code>cmp</code>.</p></li>\n</ol>\n"}], "owner": {"reputation": 3, "user_id": 9840799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d7021dab4adb4ddd909fda40e03d238?s=128&d=identicon&r=PG&f=1", "display_name": "Mendenhall", "link": "https://stackoverflow.com/users/9840799/mendenhall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 52543417, "answer_count": 2, "score": 0, "last_activity_date": 1538334981, "creation_date": 1538048149, "question_id": 52536072, "link": "https://stackoverflow.com/questions/52536072/argument-passed-to-perl-version-subroutine-during-module-version-check", "title": "Argument passed to Perl VERSION subroutine during module version check", "body": "<p>I define a Perl module, like so:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\npackage Sample;\nuse Data::Dumper; \nour $VERSION = v1.10;\n\nsub VERSION\n{\n    my ($class, $version) = @_;\n    print (\"version is $version\\n\");\n    print Dumper ($version);\n}\n</code></pre>\n\n<p>The nature of the value passed in <code>$version</code> changes depending on how the module is imported:</p>\n\n<pre><code>$ perl -e 'use Sample 1.0'\nversion is 1\n$VAR1 = '1';\n</code></pre>\n\n<p>However, if the required module version is specified as a v-string:</p>\n\n<pre><code>$ perl -e 'use Sample v1.0'\nversion is \n$VAR1 = v1.0;\n</code></pre>\n\n<p>What data type is being passed in <code>$version</code> in the second case? It's apparently not a simple scalar, and it's not a reference.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1538044879, "post_id": 52534590, "comment_id": 92009352, "body": "Your pattern should match. It&#39;s not anchored to the front. Are you sure there is not additional white space behind the <code>&gt;</code>? Also, you don&#39;t need the <code>[]</code> in the pattern for <code>\\s</code>. A character group for just one type of character makes no sense. It&#39;s superfluous."}, {"owner": {"reputation": 49, "user_id": 9396900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dd387abbfe6618dc71844c1b1d20649?s=128&d=identicon&r=PG&f=1", "display_name": "ray", "link": "https://stackoverflow.com/users/9396900/ray"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1538046227, "post_id": 52534590, "comment_id": 92010249, "body": "Actually there is a white space behind &gt; in the prompt but not in the pattern, and i have removed [] in the pattern for \\s"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1538046988, "post_id": 52534590, "comment_id": 92010714, "body": "Please <a href=\"https://stackoverflow.com/posts/52534590/edit\">edit</a> and update the question then. You might want to debug print your prompt thingy with `print qq{&#39;$prompt&#39;} to get the exact number of spaces"}, {"owner": {"reputation": 49, "user_id": 9396900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dd387abbfe6618dc71844c1b1d20649?s=128&d=identicon&r=PG&f=1", "display_name": "ray", "link": "https://stackoverflow.com/users/9396900/ray"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1538047937, "post_id": 52534590, "comment_id": 92011325, "body": "I have pasted the code here"}], "owner": {"reputation": 49, "user_id": 9396900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dd387abbfe6618dc71844c1b1d20649?s=128&d=identicon&r=PG&f=1", "display_name": "ray", "link": "https://stackoverflow.com/users/9396900/ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1538048509, "creation_date": 1538043091, "last_edit_date": 1538048509, "question_id": 52534590, "link": "https://stackoverflow.com/questions/52534590/my-perl-regex-expression-is-not-allowing-the-switch-prompt-to-execute-commands", "title": "My perl regex expression is not allowing the switch prompt to execute commands", "body": "<p><a href=\"https://i.stack.imgur.com/AjqZr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AjqZr.png\" alt=\"enter image description here\"></a>I am the using a regex to match the prompt in a switch - </p>\n\n<pre><code>qr '[#&gt;][\\s]?$',\n</code></pre>\n\n<p>but while login to the switch the prompt looks like this - </p>\n\n<p>sw-sn2410 [standalone: master] ></p>\n\n<pre><code>package Session;\nuse strict;\nuse warnings;\nuse Expect;\nuse IO::Pty;\nuse Data::Dumper;\nuse Time::HiRes qw(usleep);\nsub new\n{\n    my $class = shift;\n    my $self = {    \n        _hostnum =&gt; shift,\n        _hostname =&gt; shift, \n        _username =&gt; shift,\n        _password =&gt; shift,\n        _mode =&gt; shift,\n        _timeout =&gt; 300,\n        _spawn_ok =&gt; 0,\n        _output =&gt; \"\",      \n        _rc =&gt; 255,\n        _exp =&gt; undef,      \n    };\n\n    $self-&gt;{_exp} = _create_process($self);\n    bless $self, $class;\n    return $self;\n}\n\n##############################################################################\n# Function Name : _create_process\n#\n#\n# Notes : \n#   This function spawn to process based on connection mode &amp; login to machine\n##############################################################################\nsub _create_process \n{\n    my ($selfObj) = @_;\n    my $cmdStr;\n    my $exp = Expect-&gt;new;  \n    my $timeout = $selfObj-&gt;{_timeout}; \n\n    $selfObj-&gt;{_spawn_ok} = 0;\n    $selfObj-&gt;{_mode} = lc($selfObj-&gt;{_mode});\n\n    if ($selfObj-&gt;{_mode} eq \"telnet\" ) \n    {\n        $cmdStr  = \"$selfObj-&gt;{_mode} $selfObj-&gt;{_hostname}\";\n    }\n    elsif ($selfObj-&gt;{_mode} eq \"ssh\") \n    {       \n        `rm -rf /.ssh`;\n        $cmdStr = \"$selfObj-&gt;{_mode} -o StrictHostKeyChecking=no $selfObj-&gt;{_username}\\@$selfObj-&gt;{_hostname}\";\n    }\n    elsif ($selfObj-&gt;{_mode} eq \"rsh\") \n    {       \n        $cmdStr = \"$selfObj-&gt;{_mode} $selfObj-&gt;{_hostname} -l $selfObj-&gt;{_username}\";\n    }\n    else\n    {\n        printf(\"FileName : Session.pm , Can't initiate the connection !! Support not available for $selfObj-&gt;{_mode}\");\n        return -1;\n    }       \n    $exp-&gt;raw_pty(1);   \n    $exp = Expect-&gt;spawn($cmdStr) or die \"$selfObj-&gt;{_mode} to $selfObj-&gt;{_hostname} failure!! , Please check the connection &amp; retry again: $!\\n\";\n    if (!defined($exp))\n    {\n        print \"$selfObj-&gt;{_mode} to $selfObj-&gt;{_hostname} failure!! , Please check the connection &amp; retry again\\n\";     \n        return -1;  \n    }\n\n    `sleep 2 `;\n    $exp-&gt;log_user(0);\n    $exp-&gt;log_file(\"$ENV{TSWORK}/session.log\");\n    #$SIG{WINCH} = \\&amp;_winch($exp); \n    if ((defined ($ENV{Debug}) &amp;&amp; $ENV{Debug} &gt; 1 ))\n    {\n        print (\"\\nFunction : _create_process\\n\\n\");\n        $exp-&gt;debug(3);\n        $exp-&gt;exp_internal(0);\n        $exp-&gt;log_user(1);  \n    } \n    $selfObj-&gt;{_exp} = $exp;\n    print (\"Creating connection to $selfObj-&gt;{_hostname}...\\n\");\n    my $rc = do_login($selfObj,$selfObj-&gt;{_hostname},$selfObj-&gt;{_username},$selfObj-&gt;{_password});\n    ($rc != 0) ? return $rc : 0;\n    $selfObj-&gt;{_spawn_ok} = 1;  \n    #prompt setup \n    set_cmd_prompt($selfObj);   \n    #$exp-&gt;slave-&gt;clone_winsize_from(\\*STDIN);          \n    my $winsize = pack('SSSS', 100, 5000, 0, 0);  # rows, cols, #pixelsX,\n    ioctl($exp-&gt;slave(), &amp;IO::Tty::Constant::TIOCSWINSZ, $winsize);\n    return $exp;\n}\n\n##############################################################################\n# Function Name : _winch\n#\n#\n# Notes : \n#   This handler used to handle screen size change\n##############################################################################\nsub _winch \n{\n    my ($exp) = @_;\n    $exp-&gt;slave-&gt;clone_winsize_from(\\*STDIN);\n    kill WINCH =&gt; $exp-&gt;pid if $exp-&gt;pid;\n    $SIG{WINCH} = \\&amp;_winch;\n}\n\n##############################################################################\n# Function Name : do_login\n#   IN =&gt; lpar - Name of the lpar/machine \n#   IN =&gt; username - username of the machine\n#   IN =&gt; password - password of the machine\n#\n# Return Value :\n#       Success : 0, any other value for failure \n#\n# Notes :  \n#   This fucntion used to login into machine &amp; set the prompt \n##############################################################################\nsub do_login\n{\n    my ($selfObj,$lpar,$username,$password) = @_;   \n    my $exp = $selfObj-&gt;{_exp}; \n    my $timeout = $selfObj-&gt;{_timeout}; \n    my $rc = -1;\n    $exp-&gt;send(\"\\r\");   \n    $exp-&gt;expect($timeout,\n               [\n                    qr'[lL]ogin:[\\s]?[a]?[s]?[\\s]?$',\n                    sub \n                    {\n                        my $fh = shift;\n                        $fh-&gt;send($username.\"\\r\");\n                        `sleep 3 `;\n                        exp_continue;\n                    }\n               ],\n               [\n                    qr'[uU]sername:[\\s]?$',\n                    sub \n                    {\n                        my $fh = shift;\n                        $fh-&gt;send($username.\"\\rn\");\n                        `sleep 3 `;\n                        exp_continue;\n                    }\n               ],\n               [\n                    qr'[pP]assword:[\\s]?$',\n                    sub \n                    {\n                        my $fh = shift;\n                        $fh-&gt;send($password.\"\\r\");\n                        `sleep 3 `;\n                        $exp-&gt;send(\"\\r\");\n                        $exp-&gt;send(\"\\r\");\n                        $rc = 0;\n                        exp_continue;\n                    }\n               ],\n               [\n                    eof =&gt;\n                    sub \n                    {\n                        print(\"FileName : Session.pm , ERROR: premature EOF in command execution.\\n\");\n                    }\n               ],\n               [\n                    timeout =&gt;\n                    sub \n                    {\n                        print(\"FileName : Session.pm , Timeout : Command couldn't complete.\\n\");\n                    }\n               ],\n               '-re', qr'[#$&gt;:]\\s?$', # wait for shell prompt, then exit expect\n              );\n\n    $exp-&gt;send(\"\\r\");\n    usleep(1000);\n    $exp-&gt;expect(3,\n           [\n                qr '[#&gt;][\\s]?$',\n                sub {\n                         exp_continue;\n                    }\n            ]\n            );\n    return $rc;\n}\n\n\n##############################################################################\n# Function Name : execute_rm_cli_cmd\n#   IN =&gt; cmdStr - Command to execute\n#   IN =&gt; reqLog -  1 - Log is needed , 0 - Log is Not needed\n#   IN =&gt; reqRC - 1 - return code is needed , 0 - return code is Not needed\n#\n# Return Value :\n#       cmd_output - command output \n#   \n# Notes : \n#   This fucntion execute the command &amp; set command ouput &amp; retcode into the\n#   Object.\n##############################################################################\nsub execute_rm_cli_cmd\n{\n    my ($selfObj,$cmdStr,$reqLog)= @_;\n    my $output;\n    my $str = \"$selfObj-&gt;{_hostname}\\@$selfObj-&gt;{_username} # \";\n    set_exp_setting($selfObj);\n    if ($selfObj-&gt;{_spawn_ok} == 0) \n    {\n        print(\"FileName : Session.pm , Connection already closed , So can't run the command. \\nplease open the connection &amp; run \\n\");\n        return \"\";\n    }\n\n    print(\"Command    : $cmdStr\\n\");\n    $selfObj-&gt;{_exp}-&gt;clear_accum();\n    $selfObj-&gt;{_exp}-&gt;send(\"\\r\");\n    $selfObj-&gt;{_exp}-&gt;expect($selfObj-&gt;{_timeout},\n               [\n                    qr '[#&gt;]\\s?$',\n                    sub \n                    {\n                        my $fh = shift;                 \n                        $fh-&gt;send($cmdStr .\"\\r\");    \n                        if ( defined($reqLog) &amp;&amp; $reqLog == 1 ) \n                        {                               \n                            $fh-&gt;expect($selfObj-&gt;{_timeout}, '-re', $str);           \n                            $output = $fh-&gt;exp_before();\n                            $output =~ s/\\Q$cmdStr\\E//;\n                            $output =~ s/^\\s+//;\n                            $output =~ s/\\s+$//;\n                            $selfObj-&gt;{_output} = $output;          \n                            chomp($selfObj-&gt;{_output});                         \n                            if (defined($selfObj-&gt;{_output})) \n                            {\n                                print(\"Cmd_output :\\n$selfObj-&gt;{_output}\\n\");               \n                            }       \n                            $fh-&gt;send_slow(1,\"\\r\");                     \n                            $fh-&gt;expect($selfObj-&gt;{_timeout}, '-re', $str );    \n                            $fh-&gt;clear_accum();                             \n                            $fh-&gt;send(\"echo \\$?\\r\");                  \n                            $fh-&gt;expect($selfObj-&gt;{_timeout}, '-re', $str );      \n                            $output = $fh-&gt;exp_before();\n                            $output =~ s/\\Qecho \\E\\$\\?//;\n                            $output =~ s/^\\s+//;\n                            $output =~ s/\\s+$//;    \n                            $selfObj-&gt;{_rc} = $output;\n                            chomp($selfObj-&gt;{_rc}); \n                            if (!defined($selfObj-&gt;{_output})) \n                            {           \n                                $selfObj-&gt;{_rc} = 255;\n                            }\n                            print(\"ret_code   : $selfObj-&gt;{_rc}\\n\");\n                        }\n                        print (\"\\n\");                       \n                    }\n                ],\n               [\n                    eof =&gt;\n                    sub \n                    {\n                        print(\"FileName : Session.pm , ERROR: premature EOF in command execution.\\n\");\n                        $selfObj-&gt;close_con();\n                    }\n               ],\n               [\n                    timeout =&gt;\n                    sub \n                    {\n                        print(\"FileName : Session.pm , Timeout : Command couldn't complete.\\n\");\n                        $selfObj-&gt;close_con();\n                    }\n               ],\n              );\n\n    if (defined($selfObj-&gt;{_output})) \n    {           \n        return $selfObj-&gt;{_output};             \n    }\n}\n\n##############################################################################\n# Function Name : get_status\n#\n#\n# Notes : \n#   Retur the status of connection\n##############################################################################\nsub get_status \n{\n    my ($selfObj) = @_;\n    my $exp = $selfObj-&gt;{_exp}; \n    my $stat = $exp-&gt;exp_exitstatus();\n    $stat = (defined($stat))? $stat : 0;\n    return $stat;\n}\n\n##############################################################################\n# Function Name : close_con\n#\n#\n# Notes : \n#   Close the connection.\n##############################################################################\nsub close_con \n{\n    my ($selfObj)= @_;\n    my $exp = $selfObj-&gt;{_exp}; \n    $selfObj-&gt;{_exp}-&gt;send(\"exit\\r\\r\");\n    $selfObj-&gt;{_spawn_ok} = 0;  \n    $selfObj-&gt;{_exp}-&gt;DESTROY();\n}\n\n##############################################################################\n# Function Name : set_timeout\n#\n#\n# Notes : \n#   Set the command timeout \n##############################################################################\nsub set_timeout\n{\n    my ($selfObj,$secs)= @_;\n    $selfObj-&gt;{_timeout} = $secs;\n}\n\n##############################################################################\n# Function Name : execute_switch_cmd\n#   IN =&gt; cmdStr - Command to execute\n#   IN =&gt; reqLog -  1 - Log is needed , 0 - Log is Not needed\n#\n# Return Value :\n#       cmd_output - command output \n#   \n# Notes : \n#   This fucntion execute the command &amp; set output into cmd_ouput \n##############################################################################\nsub execute_switch_cmd\n{\n    my ($selfObj,$cmdStr)= @_;\n    my $output;\n    set_exp_setting($selfObj);\n    if ($selfObj-&gt;{_spawn_ok} == 0) \n    {\n        print(\"FileName : Session.pm , Connection already closed , So can't run the command. \\nplease open the connection &amp; run \\n\");\n        return \"\";\n    }\n    print(\"Command    : $cmdStr\\n\");\n    if (!defined($ENV{SWITCH_TEST}))\n    {\n    $ENV{SWITCH_TEST} = \"yes\";\n    $selfObj-&gt;{_exp}-&gt;clear_accum();\n    $selfObj-&gt;{_exp}-&gt;send(\"\\r\");\n    usleep(1000);\n    $selfObj-&gt;{_exp}-&gt;expect(3,\n           [\n                qr '[#&gt;]\\s?$',\n                sub {\n                         exp_continue;\n                    }\n            ]\n            );\n    }\n    $selfObj-&gt;{_exp}-&gt;send(\"\\r\");\n    usleep(1000);\n    $selfObj-&gt;{_exp}-&gt;expect($selfObj-&gt;{_timeout},\n               [\n                    qr '[#&gt;]\\s?$',\n                    sub {\n                            my $fh = shift;                 \n                            $fh-&gt;send($cmdStr . \"\\r\");                                      \n                            $fh-&gt;expect($selfObj-&gt;{_timeout}, '-re', '[#&gt;]\\s?$' );            \n                            $output = $fh-&gt;exp_before();\n                            $output =~ s/\\Q$cmdStr\\E//;\n                            $output =~ s/^\\s+//;\n                            $output =~ s/\\s+$//;\n                            $selfObj-&gt;{_output} = $output;  \n                            open(FILEHANDLE, \"&gt;$ENV{TSWORK}/temp\");\n                            print(FILEHANDLE $output);\n                            close(FILEHANDLE);\n                            $selfObj-&gt;{_output} = `sed '\\$d' $ENV{TSWORK}/temp`;            \n                            $selfObj-&gt;{_output} =~ s/^\\s+//;\n                            $selfObj-&gt;{_output} =~ s/\\s+$//;                    \n                            chomp($selfObj-&gt;{_output});                         \n                            if (defined($selfObj-&gt;{_output})) \n                            {\n                                print(\"Cmd_output :\\n$selfObj-&gt;{_output}\\n\");               \n                            }                               \n                            print (\"\\n\");\n                    }\n                ],\n               [\n                    eof =&gt;\n                    sub \n                    {\n                        print(\"FileName : Session.pm , ERROR: premature EOF in command execution.\\n\");\n                        $selfObj-&gt;close_con();\n                    }\n               ],\n               [\n                    timeout =&gt;\n                    sub \n                    {\n                        print(\"FileName : Session.pm , Timeout : Command couldn't complete.\\n\");\n                        $selfObj-&gt;close_con();\n                    }\n               ],\n              );\n\n    if (defined($selfObj-&gt;{_output})) \n    {           \n        return $selfObj-&gt;{_output};             \n    }\n}\n\n##############################################################################\n# Function Name : set_cmd_prompt\n#\n# Return Value :\n#   \n# Notes : \n#   This fucntion set the command prompt for the new session\n##############################################################################\nsub set_cmd_prompt\n{\n    my ($selfObj)= @_;\n    if ($selfObj-&gt;{_hostnum} !~ /host/i)\n    {\n        return 0;\n    }   \n    my $output;\n    my $str = '[#&gt;]\\s?$';\n    my $cmdStr = \"export PS1=\\\"$selfObj-&gt;{_hostname}\\@$selfObj-&gt;{_username} # \\\"\";\n    $selfObj-&gt;{_exp}-&gt;clear_accum();\n    $selfObj-&gt;{_exp}-&gt;send(\"\\r\");\n    $selfObj-&gt;{_exp}-&gt;expect($selfObj-&gt;{_timeout},\n               [\n                    qr '[#$&gt;:][\\s]?$',\n                    sub \n                    {\n                        my $fh = shift;                 \n                        $fh-&gt;send($cmdStr. \"\\r\"); \n                        $fh-&gt;expect($selfObj-&gt;{_timeout}, '-re', '[#&gt;][\\s]?$' );                            \n                    }\n                ],\n               [\n                    eof =&gt;\n                    sub \n                    {\n                        print(\"FileName : Session.pm , ERROR: premature EOF in command execution.\\n\");\n                        $selfObj-&gt;close_con();\n                    }\n               ],\n               [\n                    timeout =&gt;\n                    sub \n                    {\n                        print(\"FileName : Session.pm , Timeout : Command couldn't complete.\\n\");\n                        $selfObj-&gt;close_con();\n                    }\n               ],      \n              );\n\n    $selfObj-&gt;{_exp}-&gt;send(\"\\r\");\n    usleep(1000);\n    $selfObj-&gt;{_exp}-&gt;expect(3,\n           [\n                qr '[#&gt;][\\s]?$',\n                sub {\n                         exp_continue;\n                    }\n            ]\n            );\n}\n\nsub set_exp_setting\n{\n    my ($selfObj) = @_;\n    $selfObj-&gt;{_output} = \"\";\n    $selfObj-&gt;{_rc} =  255; \n    if ((defined ($ENV{Debug}) &amp;&amp; $ENV{Debug} &gt; 1 ))\n    {\n        $selfObj-&gt;{_exp}-&gt;debug(3);\n        $selfObj-&gt;{_exp}-&gt;exp_internal(0);\n        $selfObj-&gt;{_exp}-&gt;log_user(1);  \n        print Dumper $selfObj;\n    }\n    else \n    {\n        $selfObj-&gt;{_exp}-&gt;debug(0);\n        $selfObj-&gt;{_exp}-&gt;exp_internal(0);\n        $selfObj-&gt;{_exp}-&gt;log_user(0);  \n    }\n    $selfObj-&gt;{_exp}-&gt;notransfer(0) ;\n    $selfObj-&gt;{_exp}-&gt;clear_accum();\n}\n\n##############################################################################\n# Function Name : execute_rm_icli_cmd\n#   IN =&gt; cmdStr - Command to execute\n#\n# Return Value :\n#       cmd_output - command output \n#   \n# Notes : \n#   This fucntion execute the command &amp; set cmd_ouput \n##############################################################################\nsub execute_rm_icli_cmd\n{\n    my ($selfObj,$cmdStr)= @_;\n    my $output;\n    my $str = '[#&gt;] ?$';\n    set_exp_setting($selfObj);\n    if ($selfObj-&gt;{_spawn_ok} == 0) \n    {\n        print(\"FileName : Session.pm , Connection already closed , So can't run the command. \\nplease open the connection &amp; run \\n\");\n        return \"\";\n    }\n\n    print(\"Command    : $cmdStr\\n\");\n    $selfObj-&gt;{_exp}-&gt;clear_accum();\n    $selfObj-&gt;{_exp}-&gt;send(\"\\r\");\n    $selfObj-&gt;{_exp}-&gt;expect($selfObj-&gt;{_timeout},\n               [\n                    qr '[#&gt;]\\s?$',\n                    sub \n                    {\n                        my $fh = shift;                 \n                        $fh-&gt;send($cmdStr. \"\\r\");                           \n                        $fh-&gt;expect($selfObj-&gt;{_timeout}, '-re', $str );              \n                        $output = $fh-&gt;exp_before();\n                        $output =~ s/\\Q$cmdStr\\E//;\n                        $output =~ s/^\\s+//;\n                        $output =~ s/\\s+$//;\n                        $selfObj-&gt;{_output} = $output;          \n                        chomp($selfObj-&gt;{_output});                         \n                        if (defined($selfObj-&gt;{_output})) \n                        {\n                            print(\"Cmd_output :\\n$selfObj-&gt;{_output}\\n\");               \n                        }       \n                        print (\"\\n\");                       \n                    }\n                ],\n               [\n                    eof =&gt;\n                    sub \n                    {\n                        print(\"FileName : Session.pm , ERROR: premature EOF in command execution.\\n\");\n                        $selfObj-&gt;close_con();\n                    }\n               ],\n               [\n                    timeout =&gt;\n                    sub \n                    {\n                        print(\"FileName : Session.pm , Timeout : Command couldn't complete.\\n\");\n                        $selfObj-&gt;close_con();\n                    }\n               ],\n              );\n\n    if (defined($selfObj-&gt;{_output})) \n    {           \n        return $selfObj-&gt;{_output};             \n    }\n}\n\nsub execute_rm_cli_cmd_noscreen_output\n{\n    my ($selfObj,$cmdStr,$reqLog)= @_;\n    my $output;\n    my $str = \"$selfObj-&gt;{_hostname}\\@$selfObj-&gt;{_username} # \";\n    set_exp_setting($selfObj);\n    if ($selfObj-&gt;{_spawn_ok} == 0) \n    {\n        print(\"FileName : Session.pm , Connection already closed , So can't run the command. \\nplease open the connection &amp; run \\n\");\n        return \"\";\n    }\n    $selfObj-&gt;{_exp}-&gt;clear_accum();\n    $selfObj-&gt;{_exp}-&gt;send(\"\\r\");\n    $selfObj-&gt;{_exp}-&gt;expect($selfObj-&gt;{_timeout},\n               [\n                    qr '[#&gt;][\\s]?$',\n                    sub \n                    {\n                        my $fh = shift;                 \n                        $fh-&gt;send($cmdStr .\"\\r\");                           \n                        if ( defined($reqLog) &amp;&amp; $reqLog == 1 ) \n                        {                               \n                            $fh-&gt;expect($selfObj-&gt;{_timeout}, '-re', $str);           \n                            $output = $fh-&gt;exp_before();\n                            $output =~ s/\\Q$cmdStr\\E//;\n                            $output =~ s/^\\s+//;\n                            $output =~ s/\\s+$//;\n                            $selfObj-&gt;{_output} = $output;          \n                            chomp($selfObj-&gt;{_output});                         \n                            $fh-&gt;send_slow(1,\"\\r\");                     \n                            $fh-&gt;expect($selfObj-&gt;{_timeout}, '-re', $str); \n                            $fh-&gt;clear_accum();                         \n                            $fh-&gt;send(\"echo \\$?\\r\");                  \n                            $fh-&gt;expect($selfObj-&gt;{_timeout}, '-re', $str);   \n                            $output = $fh-&gt;exp_before();\n                            $output =~ s/\\Qecho \\E\\$\\?//;\n                            $output =~ s/^\\s+//;\n                            $output =~ s/\\s+$//;    \n                            $selfObj-&gt;{_rc} = $output;\n                            chomp($selfObj-&gt;{_rc}); \n                            if (!defined($selfObj-&gt;{_output})) \n                            {           \n                                $selfObj-&gt;{_rc} = 255;\n                            }\n                        }\n                    }\n                ],\n               [\n                    eof =&gt;\n                    sub \n                    {\n                        print(\"FileName : Session.pm , ERROR: premature EOF in command execution.\\n\");\n                        $selfObj-&gt;close_con();\n                    }\n               ],\n               [\n                    timeout =&gt;\n                    sub \n                    {\n                        print(\"FileName : Session.pm , Timeout : Command couldn't complete.\\n\");\n                        $selfObj-&gt;close_con();\n                    }\n               ],\n              );\n\n    if (defined($selfObj-&gt;{_output})) \n    {           \n        return $selfObj-&gt;{_output};             \n    }\n}\n\n##############################################################################\n# Function Name : set_oem_prompt\n#\n# Return Value :\n#   \n# Notes : \n#   This fucntion set the oem_setup_env command prompt for VIOS testing\n##############################################################################\nsub set_oem_prompt\n{\n    my ($selfObj)= @_;\n    my $output;\n    my $str = '[#&gt;][\\s]?$';\n    my $cmdStr = \"export PS1=\\\"$selfObj-&gt;{_hostname}\\@$selfObj-&gt;{_username} # \\\"\";\n    $selfObj-&gt;{_exp}-&gt;clear_accum();\n    $selfObj-&gt;{_exp}-&gt;send(\"\\r\");\n    $selfObj-&gt;{_exp}-&gt;expect($selfObj-&gt;{_timeout},\n                [\n                    qr '[#$&gt;][\\s]?$',\n                    sub\n                    {\n                        my $fh = shift;\n                        $fh-&gt;send(\"oem_setup_env\\r\");\n                        $fh-&gt;expect($selfObj-&gt;{_timeout}, '-re', '[#&gt;][\\s]?$' );\n\n                        $fh-&gt;send($cmdStr. \"\\r\");\n                        $fh-&gt;expect($selfObj-&gt;{_timeout}, '-re', '[#&gt;][\\s]?$' );\n\n                    }\n                ],\n                [\n                    eof =&gt;\n                    sub\n                    {\n                        print(\"FileName : Session.pm , ERROR: premature EOF in command execution.\\n\");\n                        $selfObj-&gt;close_con();\n                    }\n                ],\n                [\n                    timeout =&gt;\n                    sub\n                    {\n                        print(\"FileName : Session.pm , Timeout : Command couldn't complete.\\n\");\n                        $selfObj-&gt;close_con();\n                    }\n                ],\n            );\n    $selfObj-&gt;{_exp}-&gt;clear_accum();            \n}\n\n1;\n</code></pre>\n\n<p>Due to which although i am able to login to the switch, my script is not getting the commands executed. I want to know how can i write a regex so that so that \"[]\" and \":\" are avoided from the switch prompt? </p>\n"}, {"tags": ["git", "perl"], "comments": [{"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 1, "creation_date": 1538049443, "post_id": 52534301, "comment_id": 92012243, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/13572710/how-can-i-run-a-process-from-perl-and-capture-both-output-and-return-code\">How can I run a process from Perl and capture both output and return code?</a>"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1538049448, "post_id": 52534301, "comment_id": 92012245, "body": "<a href=\"https://stackoverflow.com/search?q=%5Bperl%5D+capture+code+and+output\">stackoverflow.com/search?q=%5Bperl%5D+capture+code+and+outpu&zwnj;&#8203;t</a>"}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 0, "last_activity_date": 1538082223, "creation_date": 1538082223, "answer_id": 52545107, "question_id": 52534301, "link": "https://stackoverflow.com/questions/52534301/need-to-run-git-command-from-perl-and-have-to-capture-the-result-of-the-command/52545107#52545107", "title": "Need to run git command from perl and have to capture the result of the command at the end", "body": "<p>In addition to the generic ways of executing external commands, <a href=\"https://metacpan.org/pod/Git::Wrapper\" rel=\"nofollow noreferrer\">Git::Wrapper</a> may be useful for this specific case. It abstracts running git commands into a standard Perl object interface. You can pass a specific git binary and git directory for it to use as the <code>git_binary</code> and <code>dir</code> constructor parameters, as mentioned in the synopsis, and it throws exceptions if there is an error, which you can catch and handle with <a href=\"http://mvp.kablamo.org/cpan/exceptions/\" rel=\"nofollow noreferrer\">various methods</a>.</p>\n"}], "owner": {"reputation": 25, "user_id": 10024557, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1uHUBRuk5dc/AAAAAAAAAAI/AAAAAAAAC34/AXfwmx2cj7c/photo.jpg?sz=128", "display_name": "Siddaramu KS", "link": "https://stackoverflow.com/users/10024557/siddaramu-ks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1538082223, "creation_date": 1538042214, "last_edit_date": 1538046593, "question_id": 52534301, "link": "https://stackoverflow.com/questions/52534301/need-to-run-git-command-from-perl-and-have-to-capture-the-result-of-the-command", "title": "Need to run git command from perl and have to capture the result of the command at the end", "body": "<p>I need to run git commands from perl script. For this i need to use complete path of the git. the syntax looks like this </p>\n\n<pre><code>system \"start\", \"cmd.exe\", \"/k\", \"cd $Repo_path &amp;&amp; $arg1 &amp;&amp; exit\"; \n</code></pre>\n\n<p>Where <code>$arg1 = git/exe/path</code> git command.</p>\n\n<p>Some time the execution of command may get failed due to some reasons. I need to capture the status of the result of the command executed. Atleast if I am able to capture Success or failure, that would also be great. Any help to this is appreciated. Thanks in advance.</p>\n"}, {"tags": ["linux", "perl", "recursion", "replace", "regexp-replace"], "comments": [{"owner": {"reputation": 341, "user_id": 4951980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d7e3d14a650ca28c6163781baa4fad1?s=128&d=identicon&r=PG", "display_name": "Frank F&#246;rster", "link": "https://stackoverflow.com/users/4951980/frank-f%c3%b6rster"}, "edited": false, "score": 0, "creation_date": 1538041471, "post_id": 52533735, "comment_id": 92007226, "body": "Can you describe the expected behavior in more detail? Maybe providing an example?"}], "answers": [{"comments": [{"owner": {"reputation": 933, "user_id": 4523359, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ddf1f0d3bf8eaac55ea61cb75bff743d?s=128&d=identicon&r=PG&f=1", "display_name": "klor", "link": "https://stackoverflow.com/users/4523359/klor"}, "edited": false, "score": 0, "creation_date": 1538044937, "post_id": 52534053, "comment_id": 92009389, "body": "It seems <code>sudo find &#47;srv&#47;my&#47;directory -type f -iname &#39;*.htm*&#39; -or -iname &#39;*.old1&#39; -or -iname &#39;*.php&#39; | sudo xargs -iX sudo perl -0777 -p -i -e &#39;s|\\&lt;\\?php.*123456.*123456.*\\?\\&gt;\\r?\\n\\&lt;\\?php|&lt;?php|g&#39; &#39;X&#39;</code> solved the problem, replaces correctly. Thanks for your help! Selecting as solution."}, {"owner": {"reputation": 933, "user_id": 4523359, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ddf1f0d3bf8eaac55ea61cb75bff743d?s=128&d=identicon&r=PG&f=1", "display_name": "klor", "link": "https://stackoverflow.com/users/4523359/klor"}, "edited": false, "score": 0, "creation_date": 1538054241, "post_id": 52534053, "comment_id": 92015152, "body": "I tried to extend the functionality to handle other cases, but this regexp is not matching: <code>sudo find &#47;srv&#47;my&#47;directory -type f -iname &#39;*.htm*&#39; -or -iname &#39;*.old1&#39; -or -iname &#39;*.php&#39; | sudo xargs -iX sudo perl -0777 -p -i -e &#39;s|\\&lt;\\?php.*123456.*123456.*\\?\\&gt;(\\r?\\n|\\#\\!.*)\\&lt;\\?php|&lt;?php|&zwnj;&#8203;gs&#39; &#39;X&#39;</code>. The regexp is working, tested in online regexp tester, but under Debian/bash I get error like &quot;Unmatched ( in regex; ... xargs: sudo: exited with status 255; aborting&quot;  Do you have idea, what is wrong with the regexp?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 933, "user_id": 4523359, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ddf1f0d3bf8eaac55ea61cb75bff743d?s=128&d=identicon&r=PG&f=1", "display_name": "klor", "link": "https://stackoverflow.com/users/4523359/klor"}, "edited": false, "score": 1, "creation_date": 1538054439, "post_id": 52534053, "comment_id": 92015306, "body": "The <code>|</code> after <code>\\n</code> is interpreted as the substitution delimiter. Use a different character (note that I used the standard slash)."}, {"owner": {"reputation": 933, "user_id": 4523359, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ddf1f0d3bf8eaac55ea61cb75bff743d?s=128&d=identicon&r=PG&f=1", "display_name": "klor", "link": "https://stackoverflow.com/users/4523359/klor"}, "edited": false, "score": 0, "creation_date": 1538054836, "post_id": 52534053, "comment_id": 92015608, "body": "WORKS: <code>sudo find &#47;srv&#47;my&#47;directory -type f -iname &#39;*.htm*&#39; -or -iname &#39;*.old1&#39; -or -iname &#39;*.php&#39; | sudo xargs -iX sudo perl -0777 -p -i -e &#39;s@\\&lt;\\?php.*123456.*123456.*\\?\\&gt;(\\r?\\n|\\#\\!.*)\\&lt;\\?php@&lt;?php@&zwnj;&#8203;gs&#39; &#39;X&#39;</code>"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1538041499, "creation_date": 1538041499, "answer_id": 52534053, "question_id": 52533735, "link": "https://stackoverflow.com/questions/52533735/perl-regular-expression-to-replace-string-recursively-in-multiple-file-groups-l/52534053#52534053", "title": "Perl regular expression to replace string recursively in multiple file groups, like &quot;*.php&quot; &quot;*.html&quot;", "body": "<ol>\n<li><p>When specifying several conditions to <code>find</code>, they are by default connected by an implicit <code>-and</code>. No file can match <code>-iname '*.old1' -and -iname '*.php'</code>. You must specify <code>-or</code> explicitly.</p></li>\n<li><p>Unless told otherwise, <code>perl -p</code> reads the file line by line, so it can't match <code>\\n&lt;</code>. Use <code>-0777</code> to read the whole file instead of processing it line by line.</p></li>\n</ol>\n\n<p>&nbsp;</p>\n\n<pre><code>sudo find /srv/my/directory -type f \\\n    -iname '*.htm*' -or -iname '*.old1' -or -iname '*.php' \\\n    | sudo xargs -iX sudo perl -0777 -p -i \\\n        -e 's/&lt;\\?php.*123456.*123456.*\\?&gt;\\r?\\n&lt;\\?php/&lt;?php/g' 'X'\n</code></pre>\n\n<p>BTW, you don't need to backslash <code>&lt;</code> and <code>&gt;</code> in Perl regexes.</p>\n"}], "owner": {"reputation": 933, "user_id": 4523359, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ddf1f0d3bf8eaac55ea61cb75bff743d?s=128&d=identicon&r=PG&f=1", "display_name": "klor", "link": "https://stackoverflow.com/users/4523359/klor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 1, "accepted_answer_id": 52534053, "answer_count": 1, "score": 0, "last_activity_date": 1538055066, "creation_date": 1538040474, "last_edit_date": 1538055066, "question_id": 52533735, "link": "https://stackoverflow.com/questions/52533735/perl-regular-expression-to-replace-string-recursively-in-multiple-file-groups-l", "title": "Perl regular expression to replace string recursively in multiple file groups, like &quot;*.php&quot; &quot;*.html&quot;", "body": "<p>The following command is not working, does nothing:</p>\n\n<pre><code>sudo find /srv/my/directory -type f -iname '*.htm*' -iname '*.old1' -iname '*.php' | sudo xargs -iX sudo perl -p -i -e 's|\\&lt;\\?php.*123456.*123456.*\\?\\&gt;\\r?\\n\\&lt;\\?php|&lt;?php|g' 'X'\n</code></pre>\n\n<p>It does not replace anything in the files.</p>\n\n<p>What is wrong?</p>\n\n<p><strong>SOLUTION:</strong></p>\n\n<pre><code>sudo find /srv/my/directory -type f -iname '*.htm*' -or -iname '*.old1' -or -iname '*.php' | sudo xargs -iX sudo perl -0777 -p -i -e 's|\\&lt;\\?php.*123456.*123456.*\\?\\&gt;\\r?\\n\\&lt;\\?php|&lt;?php|g' 'X'\n</code></pre>\n\n<p><strong>SOLUTION 2 (extends capability for multiple situations in regexp):</strong></p>\n\n<pre><code>sudo find /srv/my/directory -type f -iname '*.htm*' -or -iname '*.old1' -or -iname '*.php' | sudo xargs -iX sudo perl -0777 -p -i -e 's@\\&lt;\\?php.*123456.*123456.*\\?\\&gt;(\\r?\\n|\\#\\!.*)\\&lt;\\?php@&lt;?php@gs' 'X'\n</code></pre>\n"}, {"tags": ["perl", "data-structures"], "comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 1, "creation_date": 1538045327, "post_id": 52532602, "comment_id": 92009645, "body": "Despite this having been answered pleas note that Stack Overflow should not be the place where you come to get someone to write your code for you."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1538048666, "post_id": 52532602, "comment_id": 92011761, "body": "@JGNI: Why you decide that this is my homework? I know how to accomplish this ( I even dig deep perl internals while writing <a href=\"https://github.com/KES777/Devel-DebugHooks\" rel=\"nofollow noreferrer\">debugger</a> ) I just wanna to see different ways how to do this. In any case this question seems to me interesting also will be helpful for novices"}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 1, "creation_date": 1538049108, "post_id": 52532602, "comment_id": 92012034, "body": "Err... I didn&#39;t mention homework, I don&#39;t know or care how old you are. However it is general policy on Stack Overflow that you provide some code in the question that attempts to do what you are asking."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1538049715, "post_id": 52532602, "comment_id": 92012417, "body": "@JGNI: Updated."}], "answers": [{"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1538037810, "post_id": 52532690, "comment_id": 92005043, "body": "Sorry. The order of keys is defined by <code>pos</code> (I have updated the question and spell this explicitly)"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1538038510, "post_id": 52532690, "comment_id": 92005400, "body": "@EugenKonkov: Updated."}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 1, "creation_date": 1538049221, "post_id": 52532690, "comment_id": 92012108, "body": "Er he has a hash <code>%hash =  ()</code> is creating and assigning to a hash."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 2, "creation_date": 1538051060, "post_id": 52532690, "comment_id": 92013228, "body": "@JGNI: He didn&#39;t when I wrote the reply."}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1538053072, "post_id": 52532690, "comment_id": 92014442, "body": "OK, in that case I apologise for the down vote, sorry."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1538053103, "post_id": 52532690, "comment_id": 92014465, "body": "@JGNI: You should be able to take it back :-)"}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1538053179, "post_id": 52532690, "comment_id": 92014503, "body": "I can&#39;t I guess not enough rep to take it back"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 1, "creation_date": 1538068060, "post_id": 52532690, "comment_id": 92023804, "body": "@JGNI I must say, I find that a strange reason to vote down.  Everything in the answer stands even if that (hash vs hashref) were off."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 1, "creation_date": 1538070721, "post_id": 52532690, "comment_id": 92025022, "body": "@JGNI: For the algorithm it has not matter the type of data: hash or hashref. Before downvote you can ask people to clarify that part you do not understand or not sure."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 5, "last_activity_date": 1538038493, "last_edit_date": 1538038493, "creation_date": 1538037090, "answer_id": 52532690, "question_id": 52532602, "link": "https://stackoverflow.com/questions/52532602/how-to-extract-hash-keys-in-given-order/52532690#52532690", "title": "How to extract hash keys in given order?", "body": "<p>What you have is not a hash, it's a hash reference (with missing commas). To get the keys, use <a href=\"http://p3rl.org/keys\" rel=\"noreferrer\">keys</a> and dereference:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $hash_ref = {\n    name     =&gt; {pos =&gt; 1},\n    name_xxx =&gt; {pos =&gt; 2},\n    name_yyy =&gt; {pos =&gt; 3},\n};\n\nmy @keys = sort { $hash_ref-&gt;{$a}{pos} &lt;=&gt; $hash_ref-&gt;{$b}{pos} }\n           keys %$hash_ref;\nprint \"@keys\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 341, "user_id": 4951980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d7e3d14a650ca28c6163781baa4fad1?s=128&d=identicon&r=PG", "display_name": "Frank F&#246;rster", "link": "https://stackoverflow.com/users/4951980/frank-f%c3%b6rster"}, "is_accepted": false, "score": 3, "last_activity_date": 1538038410, "creation_date": 1538038410, "answer_id": 52533067, "question_id": 52532602, "link": "https://stackoverflow.com/questions/52532602/how-to-extract-hash-keys-in-given-order/52533067#52533067", "title": "How to extract hash keys in given order?", "body": "<p>Just use <code>keys</code> and <code>sort</code></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\n\nmy %hash =  (\n  name =&gt; {\n     pos =&gt; 1\n  },\n  name_xxx =&gt; {\n     pos =&gt; 2\n  },\n  name_yyy =&gt; {\n     pos =&gt; 3\n  },\n);\n\nmy @sorted_array = sort { $hash{$a}{pos} &lt;=&gt; $hash{$b}{pos} } (keys %hash);\n\nprint \"@sorted_array\", \"\\n\";\n</code></pre>\n\n<p>It will sort numerically by the pos value.</p>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1538082916, "creation_date": 1538082916, "answer_id": 52545245, "question_id": 52532602, "link": "https://stackoverflow.com/questions/52532602/how-to-extract-hash-keys-in-given-order/52545245#52545245", "title": "How to extract hash keys in given order?", "body": "<p>The shortest way is to use <a href=\"https://metacpan.org/pod/List::UtilsBy\" rel=\"nofollow noreferrer\">List::UtilsBy</a>, which internally does a Schwartzian transform for most of its functions. However, it will probably be slower in this case because hash access is fast and it adds extra overhead over a standard sort(). The case where it could be faster is if you sort by, for example, the result of a slow subroutine call.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse List::UtilsBy 'nsort_by';\nmy %hash = (\n  name =&gt; {\n     pos =&gt; 1\n  },\n  name_xxx =&gt; {\n     pos =&gt; 2\n  },\n  name_yyy =&gt; {\n     pos =&gt; 3\n  },\n);\nmy @sorted_keys = nsort_by { $hash{$_}{pos} } keys %hash;\n</code></pre>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 52532690, "answer_count": 3, "score": 0, "last_activity_date": 1538082916, "creation_date": 1538036766, "last_edit_date": 1538049679, "question_id": 52532602, "link": "https://stackoverflow.com/questions/52532602/how-to-extract-hash-keys-in-given-order", "title": "How to extract hash keys in given order?", "body": "<p>I have next hash:</p>\n\n<pre><code>%hash =  (\n  name =&gt; {\n     pos =&gt; 1\n  },\n  name_xxx =&gt; {\n     pos =&gt; 2\n  },\n  name_yyy =&gt; {\n     pos =&gt; 3\n  },\n)\n</code></pre>\n\n<p>And want to construct next array (keys must be ordered by <code>pos</code>):</p>\n\n<pre><code>qw/ name name_xxx name_yyy /\n</code></pre>\n\n<p>I suppose I should do <a href=\"https://www.perlmonks.org/?node_id=9108\" rel=\"nofollow noreferrer\">Schwartzian Transform</a></p>\n\n<p><strong>What is the shortest and/or fastest way to extract hash keys in given order?</strong></p>\n"}, {"tags": ["windows", "powershell", "perl", "cmd"], "comments": [{"owner": {"reputation": 1093, "user_id": 2476111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a41971f65e7a7e2d429e68f6285fa8?s=128&d=identicon&r=PG", "display_name": "Cobster", "link": "https://stackoverflow.com/users/2476111/cobster"}, "edited": false, "score": 0, "creation_date": 1538024793, "post_id": 52529748, "comment_id": 91998725, "body": "Write-Host has the -BackgroundColor and -ForegroundColor arguments which could be used for highlighting."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 10057091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c0795af897ea9a6f99cd6f20ad033b4?s=128&d=identicon&r=PG&f=1", "display_name": "robasia", "link": "https://stackoverflow.com/users/10057091/robasia"}, "edited": false, "score": 0, "creation_date": 1538040798, "post_id": 52531128, "comment_id": 92006796, "body": "Thank you! <code>Win32::Console::ANSI</code> is exactly what I was looking for."}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 5, "last_activity_date": 1538031231, "creation_date": 1538031231, "answer_id": 52531128, "question_id": 52529748, "link": "https://stackoverflow.com/questions/52529748/highlighting-or-underlining-output-to-stdout-on-windows/52531128#52531128", "title": "Highlighting or underlining output to stdout on Windows", "body": "<p>If you're using Perl to output stuff, at least <a href=\"https://metacpan.org/pod/Win32::Console\" rel=\"noreferrer\">Win32::Console</a> can do underline on Windows (10 onwards) as well:</p>\n\n<pre><code>my $win32_console Win32::Console-&gt;new();\n\n        # Rendering is flakey under Windows 10\nmy $attr =  0x8000 # COMMON_LVB_UNDERSCORE, Windows 10 onwards\n          | 0x4000 # COMMON_LVB_REVERSE_VIDEO, Windows 10 onwards\n          ;\n$console-&gt;Attr($attr);\n$console-&gt;Write(\"Hello World\");\n</code></pre>\n\n<p>But if you're just looking for a Really Quick porting fix, <a href=\"https://metacpan.org/pod/Win32::Console::ANSI\" rel=\"noreferrer\">Win32::Console::ANSI</a> will \"magically\" convert all ANSI sequences in your output to the appropriate console calls.</p>\n"}], "owner": {"reputation": 83, "user_id": 10057091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c0795af897ea9a6f99cd6f20ad033b4?s=128&d=identicon&r=PG&f=1", "display_name": "robasia", "link": "https://stackoverflow.com/users/10057091/robasia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "accepted_answer_id": 52531128, "answer_count": 1, "score": 3, "last_activity_date": 1538031231, "creation_date": 1538024626, "question_id": 52529748, "link": "https://stackoverflow.com/questions/52529748/highlighting-or-underlining-output-to-stdout-on-windows", "title": "Highlighting or underlining output to stdout on Windows", "body": "<h2>Background</h2>\n\n<p>I need to port a Perl script from Linux to Windows. The script outputs to stdout and highlights and underlines specific words as needed. In Linux, this can be accomplished by surrounding the word(s) with system calls to <code>tput</code>:</p>\n\n<p><code>tput smso</code> and <code>tput rmso</code> for highlighting</p>\n\n<p><code>tput smul</code> and <code>tput rmul</code> for underlining</p>\n\n<h2>Question</h2>\n\n<p>Are there any system calls on Windows that can easily accomplish this functionality? If not, does anyone know a workaround that would accomplish similar results?</p>\n"}]