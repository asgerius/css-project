[{"tags": ["perl"], "comments": [{"owner": {"reputation": 51, "user_id": 6471617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da6a34a1620b1791c49d435209c4181e?s=128&d=identicon&r=PG&f=1", "display_name": "Ghafit", "link": "https://stackoverflow.com/users/6471617/ghafit"}, "edited": false, "score": 0, "creation_date": 1466024324, "post_id": 37845446, "comment_id": 63151583, "body": "PD: I can not use system calls"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1466024592, "post_id": 37845446, "comment_id": 63151723, "body": "<code>symlink(&quot;home&#47;apuntes&quot;, &quot;home&#47;scripts&quot;)</code> is different from the shell command <code>ln -s &#47;home&#47;apuntes &#47;home&#47;scripts</code> because your symlink call doesn&#39;t have a leading forward slash. Is that your problem?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1466024616, "post_id": 37845446, "comment_id": 63151734, "body": "Also check <code>$!</code> for errors if you&#39;re not already doing that."}, {"owner": {"reputation": 51, "user_id": 6471617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da6a34a1620b1791c49d435209c4181e?s=128&d=identicon&r=PG&f=1", "display_name": "Ghafit", "link": "https://stackoverflow.com/users/6471617/ghafit"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1466025144, "post_id": 37845446, "comment_id": 63151980, "body": "I&#39;m cheking and It throws: The file already exits."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1466026780, "post_id": 37845446, "comment_id": 63152732, "body": "$! is only meaningful after an error; if symlink is returning 1 it isn&#39;t"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466041273, "post_id": 37845446, "comment_id": 63156580, "body": "Hi Ghafit, when I first read your question, I didn&#39;t realize you wanted to create a link <i>inside</i> <code>&#47;home&#47;scripts</code>, which is what your answer does. I edited your question to make this more clear, please edit again or rollback my edit if I misinterpreted you."}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1466024195, "post_id": 37845579, "comment_id": 63151492, "body": "The question is about Perl, not Python. Even if you drop the Python-specific import, though, there&#39;s no reason to use <code>system</code> when there&#39;s a built-in command that does the same thing."}, {"owner": {"reputation": 51, "user_id": 6471617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da6a34a1620b1791c49d435209c4181e?s=128&d=identicon&r=PG&f=1", "display_name": "Ghafit", "link": "https://stackoverflow.com/users/6471617/ghafit"}, "edited": false, "score": 0, "creation_date": 1466024307, "post_id": 37845579, "comment_id": 63151566, "body": "I can not use system calls :s"}], "tags": [], "owner": {"reputation": 9, "user_id": 6419764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c98d828e08cfedf3fadb4ebace82212?s=128&d=identicon&r=PG&f=1", "display_name": "d1sr3", "link": "https://stackoverflow.com/users/6419764/d1sr3"}, "is_accepted": false, "score": -1, "last_activity_date": 1466024231, "last_edit_date": 1466024231, "creation_date": 1466024024, "answer_id": 37845579, "question_id": 37845446, "link": "https://stackoverflow.com/questions/37845446/how-can-i-make-a-symbolic-link-inside-a-directory-like-ln-s-target-directory/37845579#37845579", "title": "How can I make a symbolic link inside a directory like `ln -s TARGET DIRECTORY` does?", "body": "<p>What about </p>\n\n<blockquote>\n  <p>system(\"\u00a0ln -s /home/apuntes /home/scripts\");</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 6471617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da6a34a1620b1791c49d435209c4181e?s=128&d=identicon&r=PG&f=1", "display_name": "Ghafit", "link": "https://stackoverflow.com/users/6471617/ghafit"}, "edited": false, "score": 0, "creation_date": 1466025040, "post_id": 37845736, "comment_id": 63151931, "body": "Yes, I&#39;m running it as root and I have also tryed symlink(&#39;/home/apuntes&#39;, &#39;/home/scripts&#39;)  It returns 1, and does not create the softlink"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 51, "user_id": 6471617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da6a34a1620b1791c49d435209c4181e?s=128&d=identicon&r=PG&f=1", "display_name": "Ghafit", "link": "https://stackoverflow.com/users/6471617/ghafit"}, "edited": false, "score": 0, "creation_date": 1466026619, "post_id": 37845736, "comment_id": 63152658, "body": "What OS is this? Maybe try running it under strace and see if that tells you anything?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 51, "user_id": 6471617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da6a34a1620b1791c49d435209c4181e?s=128&d=identicon&r=PG&f=1", "display_name": "Ghafit", "link": "https://stackoverflow.com/users/6471617/ghafit"}, "edited": false, "score": 0, "creation_date": 1466027182, "post_id": 37845736, "comment_id": 63152883, "body": "updated answer.  and are you certain you have the parameters in the correct order (existing file first, new symlink name second)?"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 2, "last_activity_date": 1466027150, "last_edit_date": 1466027150, "creation_date": 1466024639, "answer_id": 37845736, "question_id": 37845446, "link": "https://stackoverflow.com/questions/37845446/how-can-i-make-a-symbolic-link-inside-a-directory-like-ln-s-target-directory/37845736#37845736", "title": "How can I make a symbolic link inside a directory like `ln -s TARGET DIRECTORY` does?", "body": "<p>Did you try <code>symlink('/home/apuntes', '/home/scripts')</code>?   (Your question mentions it without the / before home.)  It should work, returning 1 on success and 0 (and setting $!) on failure.</p>\n\n<p>But normally only root would have write access to <code>/home</code>; are you running it as root?</p>\n\n<p>This works fine for me:</p>\n\n<pre><code>sudo perl -wE'say symlink(\"/home/ysth\",\"/home/xysth\") || \"Error: $!\"'\n</code></pre>\n\n<p>printing 1 the first time and \"Error: File exists\" the second time.</p>\n\n<p>Running <code>sudo strace perl -wE'say symlink(\"/home/ysth\",\"/home/xysth\") || \"Error: $!\"'</code> gives (after a lot of other stuff):</p>\n\n<pre><code>symlink(\"/home/ysth\", \"/home/xysth\")    = 0\nwrite(1, \"1\\n\", 21\n)                      = 2\n</code></pre>\n\n<p>and running a second time gives:</p>\n\n<pre><code>symlink(\"/home/ysth\", \"/home/xysth\")    = -1 EEXIST (File exists)\nwrite(1, \"Error: File exists\\n\", 19Error: File exists\n)    = 19\n</code></pre>\n\n<p>What happens when you try?</p>\n"}, {"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466032022, "post_id": 37845957, "comment_id": 63154450, "body": "@ThisSuitIsBlackNot this is a discrepancy between ln and perl&#39;s symlink; ln has a <code>ln TARGET DIRECTORY</code> form as well as the <code>ln TARGET LINK_NAME</code> form, but symlink only has the latter.  so this is a good answer, but the question was lacking the details of what was actually wanted (and where the OP said symlink was returning 1 they were presumably mistaken)"}], "tags": [], "owner": {"reputation": 51, "user_id": 6471617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da6a34a1620b1791c49d435209c4181e?s=128&d=identicon&r=PG&f=1", "display_name": "Ghafit", "link": "https://stackoverflow.com/users/6471617/ghafit"}, "is_accepted": false, "score": 4, "last_activity_date": 1466041069, "last_edit_date": 1466041069, "creation_date": 1466025552, "answer_id": 37845957, "question_id": 37845446, "link": "https://stackoverflow.com/questions/37845446/how-can-i-make-a-symbolic-link-inside-a-directory-like-ln-s-target-directory/37845957#37845957", "title": "How can I make a symbolic link inside a directory like `ln -s TARGET DIRECTORY` does?", "body": "<p>Perl's <code>symlink</code> doesn't support passing a directory instead of a link name the way you can with <code>ln</code>. You have to pass the link name:</p>\n\n<pre><code>symlink('/home/apuntes', '/home/scripts/softlinkname');\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5800857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5231356d981ba19e98b13abdac48b38?s=128&d=identicon&r=PG", "display_name": "Harshit", "link": "https://stackoverflow.com/users/5800857/harshit"}, "is_accepted": false, "score": 0, "last_activity_date": 1494566587, "creation_date": 1494566587, "answer_id": 43929863, "question_id": 37845446, "link": "https://stackoverflow.com/questions/37845446/how-can-i-make-a-symbolic-link-inside-a-directory-like-ln-s-target-directory/43929863#43929863", "title": "How can I make a symbolic link inside a directory like `ln -s TARGET DIRECTORY` does?", "body": "<p>I was facing similar problem recently, but then it turned out that I had a leading whitespace in the argument I was passing in the method to my method which was calling the symlink with the same arguments. Check out for these small details. I'm sure it would work!</p>\n"}], "owner": {"reputation": 51, "user_id": 6471617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da6a34a1620b1791c49d435209c4181e?s=128&d=identicon&r=PG&f=1", "display_name": "Ghafit", "link": "https://stackoverflow.com/users/6471617/ghafit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3784, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1494566587, "creation_date": 1466023560, "last_edit_date": 1466040528, "question_id": 37845446, "link": "https://stackoverflow.com/questions/37845446/how-can-i-make-a-symbolic-link-inside-a-directory-like-ln-s-target-directory", "title": "How can I make a symbolic link inside a directory like `ln -s TARGET DIRECTORY` does?", "body": "<p>I'm trying to make a soft link inside a directory with a Perl script.</p>\n\n<p>I can use <code>ln</code> to create a link to <code>/home/apuntes</code> inside the directory <code>/home/scripts</code> like this:</p>\n\n<pre><code>ln -s /home/apuntes /home/scripts\n</code></pre>\n\n<p>But I don't know how to do this with Perl. I tried</p>\n\n<pre><code>symlink(\"home/apuntes\", \"home/scripts\");\n</code></pre>\n\n<p>but it didn't create the link and there are no errors. Can anyone help me?</p>\n"}, {"tags": ["json", "perl", "data-structures", "hash", "perl-data-structures"], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466024597, "post_id": 37845615, "comment_id": 63151730, "body": "@Douglas A little unsure whether you had a more specific need, please let me know if so."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1466028674, "post_id": 37845615, "comment_id": 63153421, "body": "you&#39;ve done a great job with many methods. you should throw in my hash example into the mix, as that&#39;s specifically what the OP was looking for :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1466029489, "post_id": 37845615, "comment_id": 63153702, "body": "@stevieb Thank you for kind words. I&#39;d rather throw in a note to direct them to your answer, which is I now think is exactly what they asked for.  On the other hand, it may be superfluous -- there are the answers, and hopefully they have things covered now."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1466029868, "post_id": 37845615, "comment_id": 63153810, "body": "my understanding of this site is to provide the best answer possible, and imho, SO is useful for that when I need to search, so don&#39;t be shy about taking from my answer, especially when I told you to :P that said, I&#39;m sure it&#39;s frowned upon to &#39;steal&#39; from others answers without at least stating you&#39;ve done so, but that&#39;s clearly not the case here"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1466030092, "post_id": 37845615, "comment_id": 63153895, "body": "you covered many angles, so if you want to add more to your answer from what I posted, I&#39;m down with that. The community will decide which answer is more effective anyhow. For discussions, I belong to perlmonks. For directed information only, I&#39;m here"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1466030251, "post_id": 37845615, "comment_id": 63153939, "body": "either way, I think we&#39;ve cornered the market on ensuring the OP is covered lol"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1474567082, "post_id": 37845615, "comment_id": 66595054, "body": "@stevieb The OP showed up and did what they wanted, so now I did add your solution to my answer for completeness, as you prompted.  You are right with everything you say of course, but I do like to see scoring as accurate as possible so I was waiting."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1474617775, "last_edit_date": 1495541303, "creation_date": 1466024153, "answer_id": 37845615, "question_id": 37845433, "link": "https://stackoverflow.com/questions/37845433/accessing-json-decoded-into-a-hash-and-an-array-of-hash-references/37845615#37845615", "title": "Accessing JSON decoded into a HASH and an array of hash references", "body": "<p>Your dump shows a hashref containing a scalar, two hashrefs, and an arrayref. The arrayref has hashrefs for elements. If you want to retrieve specific elements from it, you need to know the index.</p>\n\n<pre><code>$top_level-&gt;{results}-&gt;[0]-&gt;{domain};  # is 'testing11.com'\n$top_level-&gt;{results}-&gt;[0]-&gt;{status};  # is 'open'\n</code></pre>\n\n<p>To iterate through it dereference the array</p>\n\n<pre><code>foreach my $result (@{ $top_level-&gt;{results} }) {\n    print \"$result-&gt;{id}\\n\";\n}\n</code></pre>\n\n<p>Or you can just get values from all <code>results</code> elements for a particular key, say for <code>id</code></p>\n\n<pre><code>my @ids = map { $_-&gt;{id} } @{ $top_level-&gt;{results} };\nsay \"@ids\";\n</code></pre>\n\n<p>Prints</p>\n\n<pre>\n1342 7062 432\n</pre>\n\n<hr>\n\n<p>Note that with nested structures, which contain references, you can also use syntax</p>\n\n<pre><code>$top_level-&gt;{results}[0]{domain};  # is 'testing11.com'  \n</code></pre>\n\n<p>The <code>-&gt;</code> is optional between subscripts, see rule 3. in <a href=\"http://perldoc.perl.org/perlref.html#Using-References\" rel=\"nofollow noreferrer\">Using References in perlref</a>.</p>\n\n<p>When the hash keys are strings they should be quoted</p>\n\n<pre><code>$top_level-&gt;{'results'}[0]{'domain'};\n</code></pre>\n\n<p>However, a syntax shortcut allows us to omit quotes on barewords. But if there is anything other than a bareword inside <code>{}</code> it will be interpreted as an expression <em>and evaluated</em>. So if in any doubt use quotes.  You want consistent notation throughout.</p>\n\n<p>Resources: Tutorial <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a>, reference <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a> and data structures cookbook, <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldsc</a>.</p>\n\n<hr>\n\n<p>A direct solution is given in <a href=\"https://stackoverflow.com/users/1334695/stevieb\">stevieb</a>'s answer, creating a reverse lookup.  Copied here for reference</p>\n\n<pre><code>my $results = $VAR1-&gt;{results};\n\nmy %by_ip = map {$_-&gt;{id} =&gt; $_} @$results;\n\nprint \"$by_ip{1342}-&gt;{domain}\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466026422, "post_id": 37845910, "comment_id": 63152564, "body": "Ah, right, this may well have been what the OP is about. It crossed my mind that it may need a new data structure but then I decided the other way."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466028604, "post_id": 37845910, "comment_id": 63153389, "body": "yeah. I&#39;ve done this a few ways in the past, this one seemed to work best for this type of struct"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466029636, "post_id": 37845910, "comment_id": 63153746, "body": "Yes, that&#39;s a nice way to turn it around.  What I meant is that I decided to go for more of an overall explanation over a reverse look up.  Good reading of the question :).  Perhaps ... call it <code>%by_id</code> or some such?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466029684, "post_id": 37845910, "comment_id": 63153758, "body": "Btw, the timing of these comments has been a little funny for me in the past hour or so ... I see them quite a bit later than what the  timestamp shows. Dunno why"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466029809, "post_id": 37845910, "comment_id": 63153795, "body": "yeah. I&#39;ve had some ``glitches&#39;&#39; with comments :) it&#39;s all my fault. <code>%by_id</code> is probably a much better name."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 2, "last_activity_date": 1466025383, "creation_date": 1466025383, "answer_id": 37845910, "question_id": 37845433, "link": "https://stackoverflow.com/questions/37845433/accessing-json-decoded-into-a-hash-and-an-array-of-hash-references/37845910#37845910", "title": "Accessing JSON decoded into a HASH and an array of hash references", "body": "<p>You need to transform the inner <code>$results</code> array into a new hash:</p>\n\n<pre><code>my $results = $VAR1-&gt;{results};\n\nmy %modded = map {$_-&gt;{id} =&gt; $_} @$results;\n\nprint \"$modded{1342}-&gt;{domain}\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>testing11.com\n</code></pre>\n\n<p>What that does is for each hash reference inside <code>@$results</code>, takes the value of the <code>id</code> key, sets it as a new key inside of a new hash (<code>%modded</code>), and then assigns the whole hash ref we're working with to the value of that numbered key.</p>\n"}, {"tags": [], "owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "is_accepted": false, "score": 1, "last_activity_date": 1466099067, "last_edit_date": 1466099067, "creation_date": 1466087858, "answer_id": 37862318, "question_id": 37845433, "link": "https://stackoverflow.com/questions/37845433/accessing-json-decoded-into-a-hash-and-an-array-of-hash-references/37862318#37862318", "title": "Accessing JSON decoded into a HASH and an array of hash references", "body": "<p>For completeness, TIMTOWTDI-ness and <code>-Ofun</code> if you use the latest perl (<code>use v5.24;</code>), with postfix dereferencing (enabled by default), and experimental support for reference aliasing (<code>use feature 'refalias';</code>) then you can dereference <code>$VAR1</code> and assign it to an alias (<code>%data</code>) which you can then access as a regular hash:</p>\n\n<pre><code>use v5.24 ;\nuse feature 'refaliasing';\n\nmy $VAR1 = [AS ABOVE] ;\nforeach \\my %data ( $VAR1-&gt;{results}-&gt;@* ) { say $data{domain} };\n</code></pre>\n\n<p>I like this usage (though at this point it is far from an accepted \"idiom\")  because you invoke the dereferencing syntax \"once\" - either the postfix or traditional form - and then get a data structure where it is not necessary to use <code>-&gt;</code> inside the block . </p>\n\n<p>Of course you can do this by copying into a temporary hash. but aliasing can be seen as \"more efficient and readable\" (<em>cf.</em> <a href=\"https://metacpan.org/pod/Data::Alias\" rel=\"nofollow\"><code>Data::Alias</code></a>).</p>\n\n<hr>\n\n<p><strong>Further References</strong>:</p>\n\n<ul>\n<li>The <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow\">Perl Data Structures Cookbook</a> documentation that comes with perl (<code>perldoc perldsc</code> in your shell)</li>\n<li>An accessible <a href=\"https://perltricks.com/article/80/2014/3/27/Perl-references--create--dereference-and-debug-with-confidence/\" rel=\"nofollow\">PerlTricks article</a> on references.</li>\n<li>brian d foy's <a href=\"http://perltricks.com/article/165/2015/4/10/A-preview-of-Perl-5-22/\" rel=\"nofollow\">introduction to <code>use feature 'refalias'</code>  </a> and the <a href=\"http://perldoc.perl.org/5.22.0//perldelta.html#Aliasing-via-reference\" rel=\"nofollow\"><code>perldelta</code></a> entry for the feature for version 5.22</li>\n</ul>\n"}], "owner": {"reputation": 359, "user_id": 1442227, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d8c8c7681d326e299dbce90c281a04f5?s=128&d=identicon&r=PG", "display_name": "Douglas", "link": "https://stackoverflow.com/users/1442227/douglas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1587, "favorite_count": 1, "accepted_answer_id": 37845615, "answer_count": 3, "score": 2, "last_activity_date": 1474617775, "creation_date": 1466023525, "last_edit_date": 1466087971, "question_id": 37845433, "link": "https://stackoverflow.com/questions/37845433/accessing-json-decoded-into-a-hash-and-an-array-of-hash-references", "title": "Accessing JSON decoded into a HASH and an array of hash references", "body": "<p>Given the following dumper output is there a way to iterate through each hash to list only the items under each <code>results-&gt;id</code> record? I want to be able to say things like:</p>\n\n<p><code>print $results{1342}{'domain'};</code></p>\n\n<p>and have the statement return <code>testing11.com</code> as a result.</p>\n\n<p>Would I have to first read through all of <code>results</code> array and then use <code>$results[$counter]{id}</code> to access the data in there ?  I'm not sure how to proceed.</p>\n\n<pre><code>$VAR1 = { \n          'end_time' =&gt; 1466017739,\n          'options' =&gt; {\n                         'hour_offset' =&gt; '00',\n                         'timezone' =&gt; 'America/New_York'\n                       },\n          'field_headers' =&gt; {\n                              'priority' =&gt; 'Priority',\n                              'status' =&gt; 'Status',\n                              'assignee_external_id' =&gt; 'Assignee external id',\n                              'initially_assigned_at' =&gt; 'Initially assigned at'\n                             },\n          'results' =&gt; [\n                         {\n                           'priority' =&gt; 'High',\n                           'status' =&gt; 'Open',\n                           'domain' =&gt; 'testing11.com',\n                           'generated_timestamp' =&gt; 1546547669,\n                           'id' =&gt; 1342\n                          },\n                         {\n                           'priority' =&gt; 'Low',\n                           'status' =&gt; 'Open',\n                           'domain' =&gt; 'testing22.com',\n                           'generated_timestamp' =&gt; 1464567669,\n                           'id' =&gt; 7062\n                          },\n                         {\n                           'priority' =&gt; 'Low',\n                           'status' =&gt; 'Closed',\n                           'domain' =&gt; 'testing33.com',\n                           'generated_timestamp' =&gt; 1464267669,\n                           'id' =&gt; 432\n                          }]\n      }\n</code></pre>\n"}, {"tags": ["javascript", "perl", "selenium"], "answers": [{"tags": [], "owner": {"reputation": 190, "user_id": 2469173, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C3JHo.jpg?s=128&g=1", "display_name": "Arties", "link": "https://stackoverflow.com/users/2469173/arties"}, "is_accepted": false, "score": 1, "last_activity_date": 1467198091, "creation_date": 1467198091, "answer_id": 38097684, "question_id": 37843981, "link": "https://stackoverflow.com/questions/37843981/how-do-i-send-keystrokes-to-firefox-using-testwwwselenium/38097684#38097684", "title": "How do I send keystrokes to Firefox using Test::WWW::Selenium?", "body": "<p>version 1:</p>\n\n<pre><code>my $element = $sel-&gt;find_element(\"//input[\\@name='q']\");\n$element-&gt;send_keys(\"KEYS\");\n$element-&gt;submit();\n</code></pre>\n\n<p>version 2 using WDKeys:</p>\n\n<pre><code>use Selenium::Remote::WDKeys;\n\nmy $element = $sel-&gt;find_element(\"//input[\\@name='q']\");\n$element-&gt;send_keys(\"KEYS\");\n$sel-&gt;send_keys_to_active_element(KEYS-&gt;{'enter'});\n</code></pre>\n\n<p>for more information look at <a href=\"https://metacpan.org/pod/Selenium::Remote::Driver\" rel=\"nofollow\">CPAN Selenium::Remote::Driver</a></p>\n"}], "owner": {"reputation": 61, "user_id": 6451873, "user_type": "registered", "profile_image": "https://graph.facebook.com/141701202914879/picture?type=large", "display_name": "Paulo Cesar", "link": "https://stackoverflow.com/users/6451873/paulo-cesar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1467198091, "creation_date": 1466018168, "question_id": 37843981, "link": "https://stackoverflow.com/questions/37843981/how-do-i-send-keystrokes-to-firefox-using-testwwwselenium", "title": "How do I send keystrokes to Firefox using Test::WWW::Selenium?", "body": "<p>I have tried:</p>\n\n<pre><code>$sel-&gt;type_keys_ok(\"//fieldset[2]/input\", \"KEYS\");\n</code></pre>\n\n<p>No results. Nothing changed.</p>\n\n<p>Also tried:</p>\n\n<pre><code>$sel-&gt;send_keys_ok(\"//fieldset[2]/input\", \"KEYS\");\n</code></pre>\n\n<p>Not implemented.</p>\n\n<p>Tried also:</p>\n\n<pre><code>my $res = $sel-&gt;get_eval('\n   function simulateKeyEvent(character) {\n   var evt = document.createEvent(\"KeyboardEvent\");\n   (evt.initKeyEvent || evt.initKeyboardEvent)(\"keypress\", true, true, window,\n                0, 0, 0, 0,\n                0, character.charCodeAt(0)) \n   var canceled = !body.dispatchEvent(evt);\n   if(canceled) {\n   // A handler called preventDefault\n   alert(\"canceled\");\n    } else {\n   // None of the handlers called preventDefault\n     alert(\"not canceled\");\n   }\n   };\n   simulateKeyEvent(\"K\");' );\n</code></pre>\n\n<p>Then I got this ERROR: 'initKeyEvent' called on an object that does not implement interface KeyboardEvent. Thanks.</p>\n"}, {"tags": ["perl", "ipv6", "lwp"], "comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1466018438, "post_id": 37843921, "comment_id": 63148489, "body": "It should work, provided that <code>lwt</code> resolves correctly. How is it provided? DNS? hosts file? Do you have <code>IO::Socket::IP</code>, <code>IO::Socket::INET6</code>, or both installed?"}, {"owner": {"reputation": 19222, "user_id": 789186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d232cc5abe46092d3972d4f85833e42?s=128&d=identicon&r=PG", "display_name": "user4035", "link": "https://stackoverflow.com/users/789186/user4035"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1466019098, "post_id": 37843921, "comment_id": 63148834, "body": "@hobbs It&#39;s 1 machine: I use loopback interface. lwt is in /etc/hosts file and is written like this: <code>127.0.0.1\t\tlwt</code>"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 1, "creation_date": 1466019193, "post_id": 37843921, "comment_id": 63148881, "body": "right, so the only address you provided for <code>lwt</code> is an IPv4 address, of course it&#39;s going to use IPv4. Make the entry for <code>::1</code> instead."}, {"owner": {"reputation": 19222, "user_id": 789186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d232cc5abe46092d3972d4f85833e42?s=128&d=identicon&r=PG", "display_name": "user4035", "link": "https://stackoverflow.com/users/789186/user4035"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1466019344, "post_id": 37843921, "comment_id": 63148994, "body": "@hobbs Already tried it. It works. Thanks - you can post an answer."}], "answers": [{"tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 1, "last_activity_date": 1466107961, "last_edit_date": 1466107961, "creation_date": 1466045828, "answer_id": 37849153, "question_id": 37843921, "link": "https://stackoverflow.com/questions/37843921/httprequest-use-ipv6-interface/37849153#37849153", "title": "HTTP::Request use IPv6 interface", "body": "<p>In order to make an IPv6 connection, LWP has to find an IPv6 <em>address</em> for your hostname. Since the address you're providing via /etc/hosts, 127.0.0.1, is an IPv4 address, this doesn't happen. You need a hosts entry like <code>::1 lwt</code> so that the hostname resolves to the IPv6 loopback address instead.</p>\n"}], "owner": {"reputation": 19222, "user_id": 789186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d232cc5abe46092d3972d4f85833e42?s=128&d=identicon&r=PG", "display_name": "user4035", "link": "https://stackoverflow.com/users/789186/user4035"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 517, "favorite_count": 0, "accepted_answer_id": 37849153, "answer_count": 1, "score": 0, "last_activity_date": 1466107961, "creation_date": 1466017965, "last_edit_date": 1466019154, "question_id": 37843921, "link": "https://stackoverflow.com/questions/37843921/httprequest-use-ipv6-interface", "title": "HTTP::Request use IPv6 interface", "body": "<p>I have a Linux machine with IPv6 support, local loopback interface: <code>::1</code>.</p>\n\n<p>I created a perl script that sends an HTTP request to the local virtual host:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Net::INET6Glue::INET_is_INET6;\nuse LWP;\n\nmy $user_agent = LWP::UserAgent-&gt;new;\nmy $url = 'http://lwt/docs/info.php';\nmy $request = HTTP::Request-&gt;new(GET =&gt; $url);\nmy $response = $user_agent-&gt;request($request);\nif ($response-&gt;is_success) {\n    print $response-&gt;decoded_content;\n}\nelse {\n    die($response-&gt;status_line);\n}\n</code></pre>\n\n<p>info.php file:</p>\n\n<pre><code>&lt;?php\nprint $_SERVER['REMOTE_ADDR'];\n</code></pre>\n\n<p><code>lwt</code> alias is written in /etc/hosts file like this:</p>\n\n<pre><code>127.0.0.1       lwt\n</code></pre>\n\n<p>Currently the output is: \"127.0.0.1\". So, the request is sent via IPv4.</p>\n\n<p>Is it possible to tell Perl to use IPv6 interface instead?</p>\n"}, {"tags": ["perl", "awk"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466013584, "post_id": 37842561, "comment_id": 63145727, "body": "@user6037276 Please note that I have had to reproduce your question here so that I could post my answer. I hope it helps"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 10, "creation_date": 1466015328, "post_id": 37842561, "comment_id": 63146657, "body": "Instead of re-posting the same question, you can go to the <a href=\"http://chat.stackoverflow.com/rooms/41570/so-close-vote-reviewers\">Close Vote Reviewers chatroom</a> and request reopen votes. When I&#39;ve done that in the past, the question has been reopened within 5 minutes. I appreciate what you&#39;ve done here, though."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466015932, "post_id": 37842561, "comment_id": 63147048, "body": "@ThisSuitIsBlackNot: I considered that, but another five minutes&#39; work on top of ten minutes translation and forty minutes writing a solution didn&#39;t go down too well tonight. Take a look at <a href=\"http://meta.stackoverflow.com/questions/326227/answering-suspended-questions\"><i>Answering suspended questions</i></a>."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 2, "creation_date": 1466021283, "post_id": 37842561, "comment_id": 63150029, "body": "wrt <code>If I ever notice that that question has been reopened then I will delete this copy and reproduce my answer there</code>: What are you going to do if the answer you [should] end up accepting isn&#39;t yours?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1466025368, "post_id": 37842561, "comment_id": 63152079, "body": "@EdMorton: I don&#39;t see a problem. What are you imagining?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 3, "creation_date": 1466028112, "post_id": 37842561, "comment_id": 63153240, "body": "@Borodin Someone posts a bright, shining solution to this question, the old question gets reopened so you copy your solution into the old question and delete this question and said bright, shining solution to the original question is gone from posterity. I didn&#39;t downvote this btw."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1466031459, "post_id": 37842561, "comment_id": 63154272, "body": "@EdMorton: I don&#39;t follow. Is this a complaint about me chasing points? I have updated the original question to improve the English, but I still can&#39;t post a solution there. That doesn&#39;t seem to be how SO wants to work. There is also a command-line solution as well as my own. Win all round?"}, {"owner": {"reputation": 19939, "user_id": 325727, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e098b1ade159310d7a4d6405eebd930a?s=128&d=identicon&r=PG&f=1", "display_name": "JK.", "link": "https://stackoverflow.com/users/325727/jk"}, "edited": false, "score": 2, "creation_date": 1466035326, "post_id": 37842561, "comment_id": 63155285, "body": "I&#39;m voting to close this question as off-topic because it is a duplicate of <a href=\"http://stackoverflow.com/questions/37835435/the-original-how-can-i-match-values-in-one-file-to-ranges-from-another\" title=\"the original how can i match values in one file to ranges from another\">stackoverflow.com/questions/37835435/&hellip;</a>"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1466053467, "post_id": 37842561, "comment_id": 63159572, "body": "@Borodin it&#39;s not a complaint about anything, I was simply asking what you&#39;re going to do with answers this question receives (other than your own) if/when the old question is reopened and you delete this question after duplicating your own answer under the old question - are you going to contact the other posters of answers to move their answers from here to the old question and wait for that to happen before you close this question or are you going to copy their answers into yours in the old question with some accreditation comment or do nothing or something else?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 2, "creation_date": 1466055132, "post_id": 37842561, "comment_id": 63160142, "body": "@EdMorton: Pretty much any of the above, depending how things pan out. I suspect the original one <i>won&#39;t</i> be reopened, and it may end up with this one being closed too. But I will do all I can to assign all credit that is due. Having raised this on meta, I now understand that pretty much the <i>only</i> difference with closed messages is that they may not receive answers. That&#39;s supposed to be a sanction against the author to encourage them to write better questions, but it hits answerers like me pretty hard when we come back after an hour&#39;s work and find the gate closed!"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1466055510, "post_id": 37842561, "comment_id": 63160293, "body": "Fair enough, doesnt seem like there&#39;s any perfect way to handle it."}, {"owner": {"reputation": 210, "user_id": 7849183, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206771531045209/picture?type=large", "display_name": "Achala Yasas Piyarathna", "link": "https://stackoverflow.com/users/7849183/achala-yasas-piyarathna"}, "edited": false, "score": 0, "creation_date": 1504524568, "post_id": 37842561, "comment_id": 79032155, "body": "Please learn how to ask questions on SO"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 210, "user_id": 7849183, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206771531045209/picture?type=large", "display_name": "Achala Yasas Piyarathna", "link": "https://stackoverflow.com/users/7849183/achala-yasas-piyarathna"}, "edited": false, "score": 0, "creation_date": 1504525645, "post_id": 37842561, "comment_id": 79032801, "body": "@AchalaYasasPiyarathna: What are you suggesting is wrong with the question?"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466038654, "post_id": 37842727, "comment_id": 63155979, "body": "I imagine the downvotes are political, which contravenes SO guidelines. Is there anything really wrong with my solution?"}, {"owner": {"reputation": 25180, "user_id": 1849664, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9278dc00e1a8755dc2de02b6a908a15a?s=128&d=identicon&r=PG", "display_name": "Undo", "link": "https://stackoverflow.com/users/1849664/undo"}, "edited": false, "score": 2, "creation_date": 1466040053, "post_id": 37842727, "comment_id": 63156312, "body": "People are free to vote however they like, as long as it isn&#39;t targeted at a <i>user</i>. You may ask a question <a href=\"//meta.stackoverflow.com\">on meta</a> if you&#39;d like."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 25180, "user_id": 1849664, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9278dc00e1a8755dc2de02b6a908a15a?s=128&d=identicon&r=PG", "display_name": "Undo", "link": "https://stackoverflow.com/users/1849664/undo"}, "edited": false, "score": 2, "creation_date": 1466040602, "post_id": 37842727, "comment_id": 63156440, "body": "@Undo: Thanks for your comment. I have posted questions on meta, and probably became infamous for them. The problem is that meta is populated by a tier of users who are entrenched with their idea of SO being right as it is. The proportion of people who post regular questions and answers who also write on meta must be tiny, yet SO professes to be a democracy. Hey ho. I&#39;m sad but I must sleep. Best."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1467554648, "last_edit_date": 1467554648, "creation_date": 1466014068, "answer_id": 37842727, "question_id": 37842561, "link": "https://stackoverflow.com/questions/37842561/how-can-i-match-values-in-one-file-to-ranges-from-another/37842727#37842727", "title": "How can I match values in one file to ranges from another?", "body": "<p>This Perl code seems to solve your problem</p>\n\n<p>It is a common idiom: to load the entire dictionary in <code>input1.txt</code> into an in-memory data structure -- here <code>%data</code>, which is indexed by the scaffold ID -- and then process the object data to gather information from the dictionary</p>\n\n<p>Assuming your <code>input1</code> isn't enormous this should work fine. It's impossible to key data structures on a range, so every candidate range must be checked to see if the index falls above the start and below the end</p>\n\n<p>If there is a match then the ID is printed together with the result of the arithmetic to calculate the one-based relative index</p>\n\n<p>Note that your required result for the entry <code>Scaffold_2      31533</code> should be 3 and not 2</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse autodie;\n\nuse Data::Dump;\n\nmy %data;\n{\n    open my $fh, '&lt;', 'input1.txt';\n\n    while ( &lt;$fh&gt; ) {\n        next unless /\\S/;\n        my ($scaff, $code, $start, $end) = split;\n        push @{ $data{$scaff} }, { start =&gt; $start, end =&gt; $end, code =&gt; $code };\n    }\n}\n\nopen my $fh, '&lt;', 'input2.txt';\n\nwhile ( &lt;$fh&gt; ) {\n\n    my ($scaff, $index) = split;\n    my $items = $data{$scaff} or die qq{No such scaffold \"$scaff\"};\n\n    for my $item( @$items ) {\n\n        next unless $index &gt;= $item-&gt;{start} and $index &lt;= $item-&gt;{end};\n\n        printf \"%s\\t%d\\n\",\n                $item-&gt;{code},\n                $index - $item-&gt;{start} + 1;\n\n        last\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>B100002 32\nB100043 15\nB123465 3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 6, "last_activity_date": 1466016146, "creation_date": 1466016146, "answer_id": 37843367, "question_id": 37842561, "link": "https://stackoverflow.com/questions/37842561/how-can-i-match-values-in-one-file-to-ranges-from-another/37843367#37843367", "title": "How can I match values in one file to ranges from another?", "body": "<p>if the data file sizes are not huge, there is a simpler way</p>\n\n<pre><code>$ join input1 input2 | awk '$5&lt;$4 &amp;&amp; $3&lt;$5 {print $2, $5-$3+1}'\n\nB100002 32\nB100043 15\nB123465 3\n</code></pre>\n"}], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 406, "favorite_count": 1, "answer_count": 2, "score": -24, "last_activity_date": 1467554648, "creation_date": 1466013537, "last_edit_date": 1466035602, "question_id": 37842561, "link": "https://stackoverflow.com/questions/37842561/how-can-i-match-values-in-one-file-to-ranges-from-another", "title": "How can I match values in one file to ranges from another?", "body": "<p>There are two input files, as the following lines show.</p>\n\n<p>Columns 3 and 4 in <code>input1</code> hold a range (such as <code>1</code> to <code>78</code> in the first row)</p>\n\n<p>Column 2 in <code>input2</code> holds a single position value (such <code>32</code> in the first row) which corresponds to one of the ranges in column in <code>input1</code>, and the corresponding value in column 2: in this case <code>B100002</code>.</p>\n\n<p>I want to generate a file that contain the position, relative to the start of the range, for the every value in column 2 of file <code>input1</code></p>\n\n<p>For example, 358-344 + 1 = 15 is the relative position value for <code>B100043</code></p>\n\n<h3>input1:</h3>\n\n<pre><code>Scaffold_1      B100002        1       78\nScaffold_1      B100041        179     243\nScaffold_1      B100043        344     418\nScaffold_1      B100045        519     583\nScaffold_1      B100058        684     751\nScaffold_1      B100059        852     915\nScaffold_1      B100066        1016    1079\nScaffold_1      B100080        1180    1246\nScaffold_1      B100111        1347    1413\nScaffold_1      B100118        1514    1585\nScaffold_2      B123465        31531   31595\n</code></pre>\n\n<h3>input2:</h3>\n\n<pre><code>Scaffold_1      32\nScaffold_1      358\nScaffold_2      31533\n</code></pre>\n\n<h3>Required output:</h3>\n\n<pre><code>B100002      32\nB100043      15\nB123465      2\n</code></pre>\n\n<h3>This is my solution</h3>\n\n<ol>\n<li><p>Change the format from <code>input1</code> to <code>input_1</code> and <code>input2</code> to <code>input_2</code> (tab separation)</p></li>\n<li><p>Use software <a href=\"http://bedtools.readthedocs.io/en/latest/content/tools/intersect.html\" rel=\"nofollow\">bedtools</a> and awk to generate the output file that I want.</p></li>\n</ol>\n\n<h3>input_1:</h3>\n\n<pre><code>Scaffold_1      .       B100002        1       78      .      .       .       .\nScaffold_1      .       B100041        179     243     .      .       .       .\nScaffold_1      .       B100043        344     418     .      .       .       .\nScaffold_1      .       B100045        519     583     .      .       .       .\nScaffold_1      .       B100058        684     751     .      .       .       .\nScaffold_1      .       B100059        852     915     .      .       .       .\nScaffold_1      .       B100066        1016    1079    .      .       .       .\nScaffold_1      .       B100080        1180    1246    .      .       .       .\nScaffold_1      .       B100111        1347    1413    .      .       .       .\nScaffold_1      .       B100118        1514    1585    .      .       .       .\nScaffold_1      .       B101068        9218    9290    .      .       .       .\nScaffold_2      .       B123465        31531   31595   .      .       .       .\n\ninput_2:\nScaffold_1      .       .      31         33       .       .       .       .\nScaffold_1      .       .      357        359      .       .       .       .\nScaffold_2      .       .      31532      31534    .       .       .       .\n\n\nbedtools intersect -wb -a test2 -b test1 | awk '{print $12,($5-$13)}'\nB100002 32\nB100043 15\nB123465 3\n</code></pre>\n\n<p>How can I use <code>awk</code> or <code>perl</code> to achieve my purpose? (I have to change file format when I use bedtools.)</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1466017113, "last_edit_date": 1466017113, "creation_date": 1466012840, "answer_id": 37842341, "question_id": 37842107, "link": "https://stackoverflow.com/questions/37842107/assign-section-of-variable-to-another-variable-in-perl-using-regexp/37842341#37842341", "title": "Assign section of variable to another variable in Perl using regexp", "body": "<p>Short solution to remove the last <code>.</code> and everything after it:</p>\n\n<pre><code>( my $IPCore = $ip ) =~ s/\\.[^.]*\\z//;\nmy $IPCore = $ip =~ s/\\.[^.]*\\z//r;                        # 5.14+\n</code></pre>\n\n<p>Optimized solution to remove the third <code>.</code> and everything after it:</p>\n\n<pre><code>( my $IPCore = $ip ) =~ s/^[^.]*+(?:\\.[^.]*+){2}\\K.*//s;   # 5.10+\nmy $IPCore = $ip =~ s/^[^.]*+(?:\\.[^.]*+){2}\\K.*//sr;      # 5.14+\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9288, "user_id": 671943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4HS79.jpg?s=128&g=1", "display_name": "Rooster", "link": "https://stackoverflow.com/users/671943/rooster"}, "is_accepted": false, "score": 0, "last_activity_date": 1466013659, "creation_date": 1466013659, "answer_id": 37842592, "question_id": 37842107, "link": "https://stackoverflow.com/questions/37842107/assign-section-of-variable-to-another-variable-in-perl-using-regexp/37842592#37842592", "title": "Assign section of variable to another variable in Perl using regexp", "body": "<p>Assuming you trust the IPs will come in a reasonable format, a really simple approach is just to cut off the last segment from the last <code>.</code>(dot) like so:</p>\n\n<pre><code> my $ip = '10.9.8.x';\n (my $ipCore = $ip) =~ s/(.*?)\\.[^.]+$/$1/;\n print $ipCore;\n//yields '10.9.8'\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 0, "last_activity_date": 1466029838, "last_edit_date": 1466029838, "creation_date": 1466029440, "answer_id": 37846808, "question_id": 37842107, "link": "https://stackoverflow.com/questions/37842107/assign-section-of-variable-to-another-variable-in-perl-using-regexp/37846808#37846808", "title": "Assign section of variable to another variable in Perl using regexp", "body": "<p>3 birds, 1 stone  </p>\n\n<pre><code>my ($ip, $IPCore) = (\"10.9.8.X\");\nprint $IPCore if $ip =~ /([0-9]{1,3}(?:\\.[0-9]{1,3}){2})\\.[xX]{1,3}$(?{$IPCore=$^N})/;\n</code></pre>\n\n<p>Out  <code>10.9.8</code></p>\n"}], "owner": {"reputation": 747, "user_id": 2474912, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/i6p16.gif?s=128&g=1", "display_name": "JohnnyLoo", "link": "https://stackoverflow.com/users/2474912/johnnyloo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 37842341, "answer_count": 3, "score": 1, "last_activity_date": 1466029838, "creation_date": 1466012122, "question_id": 37842107, "link": "https://stackoverflow.com/questions/37842107/assign-section-of-variable-to-another-variable-in-perl-using-regexp", "title": "Assign section of variable to another variable in Perl using regexp", "body": "<p>If I had</p>\n\n<pre><code>my $ip = \"10.9.8.X\";\n</code></pre>\n\n<p>and I want $IPCore to have \"10.9.8\". Is there an easy way to do this in a single line?</p>\n\n<p>I usually do this</p>\n\n<pre><code>my $ip = \"10.9.8.X\";\nmy $IPCore = $ip;\n$IPCore =~ s/([0-9]{3}\\.[0-9]{3}\\.[0-9]{3})\\.[xX]{1,3}$/$1/\n\n##$IPCore is now 10.9.8\n</code></pre>\n\n<p>Is there an easier way to do this?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["linux", "vba", "perl", "shell", "visual-studio-2012"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1466009225, "post_id": 37841250, "comment_id": 63143368, "body": "Is the random integer between 0 and 255? Are you sure your <code>Shell</code> command returns the <i>output</i> and not the exit code of the program?"}, {"owner": {"reputation": 2279, "user_id": 13563, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VoEyi.jpg?s=128&g=1", "display_name": "jimtut", "link": "https://stackoverflow.com/users/13563/jimtut"}, "edited": false, "score": 0, "creation_date": 1466010822, "post_id": 37841250, "comment_id": 63144262, "body": "At first I thought this was a Linux, but it&#39;s really a Windows VBA question, right?  Seems like only the target computer is Linux, but that&#39;s really irrelevant to how to make the Shell call from VBA.  Besides the issue of how to capture the output (not the PID or response value) from your shell call, I don&#39;t think you&#39;re using <code>plink</code> correctly.  Maybe you dropped it, but I think you need to specify <code>user@host</code> and probably a password too."}, {"owner": {"reputation": 1, "user_id": 6470719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08e0cc63a4f508849810b6a3090c91e8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed.T", "link": "https://stackoverflow.com/users/6470719/ed-t"}, "edited": false, "score": 0, "creation_date": 1466044217, "post_id": 37841250, "comment_id": 63157250, "body": "Oops... I used the dos putty command as:  Perl_Cmd = &quot;perl &quot; &amp; &quot;/usr/script/a.pl&quot; Shell_Cmd = &quot;plink root@&quot; &amp; &quot;123.123.123.123&quot; &amp; &quot; -pw root &quot; &amp; Perl_Cmd  RetVal = Shell(Shell_Cmd)   The return value can be more than 255...or rather 4 to 5 digits number.  However, when I execute the a.pl in the linux base, the return would be OK or NOT OK. I know that the a.pl (perl script) is working fine but not he returning value to the VBA."}], "answers": [{"tags": [], "owner": {"reputation": 2324, "user_id": 5094258, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/n4upu.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/5094258/tim"}, "is_accepted": false, "score": 0, "last_activity_date": 1466132706, "creation_date": 1466132706, "answer_id": 37872454, "question_id": 37841250, "link": "https://stackoverflow.com/questions/37841250/return-value-from-vba-call-shellwhatever-cmd/37872454#37872454", "title": "Return Value from VBA Call Shell(whatever_cmd)", "body": "<p><a href=\"https://msdn.microsoft.com/en-us/library/xe736fyk(v=vs.90).aspx\" rel=\"nofollow\">Shell's return value</a> is the program's process ID. To get the actual output of the program (as you would see from a prompt), <a href=\"https://technet.microsoft.com/en-us/library/ee156605.aspx\" rel=\"nofollow\">create a wscript object</a> and call the <code>.exec</code> method. Try something like this:</p>\n\n<pre><code>Set objShell = WScript.CreateObject(\"WScript.Shell\")\nSet objExecObject = objShell.Exec(\"plink perl test.pl\")\n\nDo While objExecObject.Status = WshRunning\n    DoEvents\n    'Could add a counter here to exit if it takes too long\nLoop\n\n objExecObject.StdOut.ReadAll \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6470719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08e0cc63a4f508849810b6a3090c91e8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed.T", "link": "https://stackoverflow.com/users/6470719/ed-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1619, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466132706, "creation_date": 1466009126, "last_edit_date": 1466009175, "question_id": 37841250, "link": "https://stackoverflow.com/questions/37841250/return-value-from-vba-call-shellwhatever-cmd", "title": "Return Value from VBA Call Shell(whatever_cmd)", "body": "<p>I'm trying to execute a plink command to invoke perl script on a Linux platform which returning a value or a response in string.</p>\n\n<p>I tried:</p>\n\n<pre><code>retval = Shell(\"plink perl test.pl\")\n</code></pre>\n\n<p>where test.pl return value with either OK or NOT OK</p>\n\n<p>But I couldn't capture those string in the retval variable.\nWhen I track the retval, it appear to be random integer.</p>\n\n<p>Is there a way to capture the right return value or string?</p>\n"}, {"tags": ["perl", "timeout", "output", "alarm", "nagios"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1466008387, "post_id": 37840472, "comment_id": 63142904, "body": "<code>Temporizador</code> is output by your shell when one of its children is killed by the ARLM signal. <code>$?</code> is not the child&#39;s exit code here; it&#39;s the number of the signal that killed the child (14) ORed with 128."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 6381990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c699ea3c27f33c6c1b88a48a3cd2f7b4?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Blanco", "link": "https://stackoverflow.com/users/6381990/adrian-blanco"}, "edited": false, "score": 0, "creation_date": 1466007600, "post_id": 37840567, "comment_id": 63142445, "body": "It is working. I have a question. Why sleep? I&#39;ve checked if I put sleep 10 the alarm value can&#39;t be greater than 10. Why?"}, {"owner": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "reply_to_user": {"reputation": 75, "user_id": 6381990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c699ea3c27f33c6c1b88a48a3cd2f7b4?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Blanco", "link": "https://stackoverflow.com/users/6381990/adrian-blanco"}, "edited": false, "score": 0, "creation_date": 1466007845, "post_id": 37840567, "comment_id": 63142592, "body": "This is just for the example. The <code>sleep</code> needs to be greater than the <code>alarm</code>. Otherwise the program ends and no <code>ALRM</code> signal would be received."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 75, "user_id": 6381990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c699ea3c27f33c6c1b88a48a3cd2f7b4?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Blanco", "link": "https://stackoverflow.com/users/6381990/adrian-blanco"}, "edited": false, "score": 4, "creation_date": 1466008662, "post_id": 37840567, "comment_id": 63143060, "body": "@Adrian Blanco, <code>sleep</code> represents the rest of your program. Don&#39;t actually use <code>sleep</code>."}, {"owner": {"reputation": 75, "user_id": 6381990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c699ea3c27f33c6c1b88a48a3cd2f7b4?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Blanco", "link": "https://stackoverflow.com/users/6381990/adrian-blanco"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466012737, "post_id": 37840567, "comment_id": 63145263, "body": "@ikegami already noticed that, but if I don&#39;t write that line the timeout doesn&#39;t work and if I write it the rest of my program doesn&#39;t. &#191;?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 75, "user_id": 6381990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c699ea3c27f33c6c1b88a48a3cd2f7b4?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Blanco", "link": "https://stackoverflow.com/users/6381990/adrian-blanco"}, "edited": false, "score": 0, "creation_date": 1466012911, "post_id": 37840567, "comment_id": 63145357, "body": "@Adrian Blanco, of course it doesn&#39;t work with it. You tell the program to do nothing until it gets killed by the alarm. /// What do you mean by &quot;the timeout doesn&#39;t work&quot;? Also, what OS?"}, {"owner": {"reputation": 75, "user_id": 6381990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c699ea3c27f33c6c1b88a48a3cd2f7b4?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Blanco", "link": "https://stackoverflow.com/users/6381990/adrian-blanco"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466013120, "post_id": 37840567, "comment_id": 63145458, "body": "@ikegami yes. I have a connection test DSN which should time out after the alarm value. It does if I put sleep but if don&#39;t it takes longer than the alarm length."}, {"owner": {"reputation": 75, "user_id": 6381990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c699ea3c27f33c6c1b88a48a3cd2f7b4?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Blanco", "link": "https://stackoverflow.com/users/6381990/adrian-blanco"}, "edited": false, "score": 0, "creation_date": 1466013780, "post_id": 37840567, "comment_id": 63145836, "body": "Linux  2.6.32-504.1.3.el6.x86_64 CentOS 6.6. I mean that the alarm doesn&#39;t kill the program after the $timeout."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 75, "user_id": 6381990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c699ea3c27f33c6c1b88a48a3cd2f7b4?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Blanco", "link": "https://stackoverflow.com/users/6381990/adrian-blanco"}, "edited": false, "score": 2, "creation_date": 1466013781, "post_id": 37840567, "comment_id": 63145837, "body": "@Adrian Blanco, Is the function you want to interrupt written in C? That&#39;s not going to happen. You can&#39;t safely interrupt calls to C functions (e.g. regex matches, XS functions). The handler should still be called, but it will be called after the routine has exited. However, you make it sound like the the handler isn&#39;t called at all. If so, either the program isn&#39;t running long enough to trigger the alarm, or something is clearing the alarm (e.g. by using <code>alarm</code> itself) or alarm handler (unlikely)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466013900, "post_id": 37840567, "comment_id": 63145909, "body": "Just making sure it wasn&#39;t Windows, since we&#39;re talking about unix signals."}, {"owner": {"reputation": 75, "user_id": 6381990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c699ea3c27f33c6c1b88a48a3cd2f7b4?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Blanco", "link": "https://stackoverflow.com/users/6381990/adrian-blanco"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466014266, "post_id": 37840567, "comment_id": 63146077, "body": "@ikegami the function I want to interrupt is <code>$dbh = DBI-&gt;connect(&quot;dbi:ODBC:dsn=$dsn&quot;,$user,$pass)</code> written in Perl. As mentioned in my first post, everything works fine if I only use <code>alarm $timeout</code>without <code>SIG{ALRM}</code>. I&#39;d like to change the return code."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 75, "user_id": 6381990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c699ea3c27f33c6c1b88a48a3cd2f7b4?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Blanco", "link": "https://stackoverflow.com/users/6381990/adrian-blanco"}, "edited": false, "score": 2, "creation_date": 1466014363, "post_id": 37840567, "comment_id": 63146128, "body": "@Adrian Blanco, Yup, that&#39;s the problem. The guts of that is a C function. I&#39;ll post a solution shortly."}, {"owner": {"reputation": 75, "user_id": 6381990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c699ea3c27f33c6c1b88a48a3cd2f7b4?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Blanco", "link": "https://stackoverflow.com/users/6381990/adrian-blanco"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466015142, "post_id": 37840567, "comment_id": 63146542, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/114772/discussion-between-adrian-blanco-and-ikegami\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "is_accepted": false, "score": 3, "last_activity_date": 1466009047, "last_edit_date": 1466009047, "creation_date": 1466006827, "answer_id": 37840567, "question_id": 37840472, "link": "https://stackoverflow.com/questions/37840472/perl-timeout-output-message/37840567#37840567", "title": "Perl TIMEOUT output message", "body": "<p>You should handle the <code>ALRM</code> signal. For example:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Time::HiRes qw[ time alarm ];\n\n$SIG{ALRM} = sub {print \"Custom message\\n\"; exit 3};\n\nalarm 2;\nsleep 10; # this line represents the rest of your program, don't include it\n</code></pre>\n\n<p>This will output:</p>\n\n<pre><code>18:08:20-eballes@urth:~/$ ./test.pl \nCustom message\n18:08:23-eballes@urth:~/$ echo $?\n3\n</code></pre>\n\n<p>For an extended explanation about handling signals check <a href=\"http://perltricks.com/article/37/2013/8/18/Catch-and-Handle-Signals-in-Perl/\" rel=\"nofollow\">this nice tutorial on perltricks</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1466016998, "last_edit_date": 1466016998, "creation_date": 1466015822, "answer_id": 37843273, "question_id": 37840472, "link": "https://stackoverflow.com/questions/37840472/perl-timeout-output-message/37843273#37843273", "title": "Perl TIMEOUT output message", "body": "<p>The function that's taking the time is written in C, which precludes you from using a custom signal handler safely.</p>\n\n<p>You don't appear worried about terminating your program forcefully, so I suggest you use <code>alarm</code> without a signal handler to terminate your program forcefully if it takes too long to run, and using a wrapper to provide the correct response to Nagios.</p>\n\n<p>Change</p>\n\n<pre><code>/path/to/program some args\n</code></pre>\n\n<p>to</p>\n\n<pre><code>/path/to/timeout_wrapper 30 /path/to/program some args\n</code></pre>\n\n<p>The following is <code>timeout_wrapper</code>:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse POSIX       qw( WNOHANG );\nuse Time::HiRes qw( sleep time );\n\nsub wait_for_child_to_complete {\n   my ($pid, $timeout) = @_;\n   my $wait_until = time + $timeout;\n   while (time &lt; $wait_until) {\n      waitpid($pid, WNOHANG)\n         and return $?;\n\n      sleep(0.5);\n   }\n\n   return undef;\n}\n\n{\n   my $timeout = shift(@ARGV);\n\n   defined( my $pid = fork() )\n      or exit(3);\n\n   if (!$pid) {\n      alarm($timeout);   # Optional. The parent will handle this anyway.\n      exec(@ARGV)\n         or exit(3);\n   }\n\n   my $timed_out = 0;\n   my $rv = wait_for_child_to_complete($pid, $timeout);\n   if (!defined($rv)) {\n      $timed_out = 1;\n      if (kill(ALRM =&gt; $pid)) {\n         $rv = wait_for_child_to_complete($pid, 5);\n         if (!defined($rv)) {\n            kill(KILL =&gt; $pid)\n         }\n      }\n   }\n\n   exit(2) if $timed_out;\n   exit(3) if $rv &amp; 0x7F;  # Killed by some signal.\n   exit($rv &gt;&gt; 8);         # Expect the exit code to comply with the spec.\n}\n</code></pre>\n\n<p>Uses the <a href=\"https://nagios-plugins.org/doc/guidelines.html\" rel=\"nofollow\">Nagios Plugin Return Codes</a>. Timeouts should actually return <code>2</code>.</p>\n"}], "owner": {"reputation": 75, "user_id": 6381990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c699ea3c27f33c6c1b88a48a3cd2f7b4?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Blanco", "link": "https://stackoverflow.com/users/6381990/adrian-blanco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 1, "accepted_answer_id": 37843273, "answer_count": 2, "score": 2, "last_activity_date": 1466016998, "creation_date": 1466006507, "question_id": 37840472, "link": "https://stackoverflow.com/questions/37840472/perl-timeout-output-message", "title": "Perl TIMEOUT output message", "body": "<p>I'm programming a perl script to monitorize a DB with Nagios.\nI'm using alarm function from Time::HiRes library for the timeout.</p>\n\n<pre><code>use Time::HiRes qw[ time alarm ];\nalarm $timeout;\n</code></pre>\n\n<p>Everything works fine. The thing is I want to change the output message cause it returns \"Temporizador\" and if I do an</p>\n\n<pre><code>echo $?\n</code></pre>\n\n<p>Returns 142. I want to change the message in order to make an \"exit 3\" so it can be recognized by Nagios.</p>\n\n<p>Already tried 'eval' but doesn't work.</p>\n"}, {"tags": ["perl", "move"], "comments": [{"owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 0, "creation_date": 1466004715, "post_id": 37839053, "comment_id": 63140373, "body": "Any reasons you&#39;re doing this in Perl rather than in a shell script?"}, {"owner": {"reputation": 419, "user_id": 5603928, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d6fbe24ff96ff3362c8f2c67a642c076?s=128&d=identicon&r=PG&f=1", "display_name": "Frostie_the_snowman", "link": "https://stackoverflow.com/users/5603928/frostie-the-snowman"}, "reply_to_user": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 2, "creation_date": 1466005851, "post_id": 37839053, "comment_id": 63141225, "body": "no real reason, this is just working server side and I had a small bit of perl exp"}], "answers": [{"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": true, "score": 8, "last_activity_date": 1466005737, "last_edit_date": 1466005737, "creation_date": 1466003154, "answer_id": 37839212, "question_id": 37839053, "link": "https://stackoverflow.com/questions/37839053/perl-copy-file-from-one-location-to-another/37839212#37839212", "title": "Perl: Copy file from one location to another", "body": "<p>You need to filter out the special <code>..</code> and <code>.</code> entries from <code>@files</code>.</p>\n\n<pre><code>#!/usr/bin/perl\nuse diagnostics;\nuse strict;\nuse warnings;\n\nuse File::Copy;\n\nmy $poll_cycle = 10;\nmy $dest_dir = \"/home/srvc_ibdcoe_pcdev/Niall_Test/perl_files\";\n\nwhile (1) {\n    sleep $poll_cycle;\n\n    my $dirname = '/home/srvc_ibdcoe_pcdev/Niall_Test/new_dir';\n\n    opendir my $dh, $dirname\n        or die \"Can't open directory '$dirname' for reading: $!\";\n\n    my @files = grep !/^[.][.]?$/, readdir $dh;\n    closedir $dh;\n\n    if (@files) {\n        print \"Dir is not empty\\n\";\n\n        foreach my $target (@files) {\n            # Move file\n            move(\"$dirname/$target\", \"$dest_dir/$target\");\n\n    }\n}\n\n}\n</code></pre>\n\n<p>The message you see is correct.  Both paths resolve to the same directory because of the <code>..</code>; both resolve to <code>/home/srvc_ibdcoe_pcdev/Niall_Test</code></p>\n\n<p><code>..</code> refers to the directory's parent directory.</p>\n"}], "owner": {"reputation": 419, "user_id": 5603928, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d6fbe24ff96ff3362c8f2c67a642c076?s=128&d=identicon&r=PG&f=1", "display_name": "Frostie_the_snowman", "link": "https://stackoverflow.com/users/5603928/frostie-the-snowman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1489, "favorite_count": 0, "accepted_answer_id": 37839212, "answer_count": 1, "score": 5, "last_activity_date": 1466005737, "creation_date": 1466002821, "last_edit_date": 1466003415, "question_id": 37839053, "link": "https://stackoverflow.com/questions/37839053/perl-copy-file-from-one-location-to-another", "title": "Perl: Copy file from one location to another", "body": "<p>This is just a small script I am running to continuous loop to check a directory and move every file that is there. This code works and i am running it in the background processes. But for some reason I am getting the following error: <code>'/home/srvc_ibdcoe_pcdev/Niall_Test/new_dir/..' and '/home/srvc_ibdcoe_pcdev/Niall_Test/perl_files/..' are identical (not copied) at move2.pl line 27</code></p>\n\n<p>any idea why it is telling me it is identical even though the paths are different?</p>\n\n<p>Many thanks</p>\n\n<p><strong>script below</strong></p>\n\n<pre><code>#!/usr/bin/perl\nuse diagnostics;\nuse strict;\nuse warnings;\n\nuse File::Copy;\n\nmy $poll_cycle = 10;\nmy $dest_dir = \"/home/srvc_ibdcoe_pcdev/Niall_Test/perl_files\";\n\nwhile (1) {\n    sleep $poll_cycle;\n\n    my $dirname = '/home/srvc_ibdcoe_pcdev/Niall_Test/new_dir';\n\n    opendir my $dh, $dirname\n        or die \"Can't open directory '$dirname' for reading: $!\";\n\n    my @files = readdir $dh;\n    closedir $dh;\n\n    if ( grep( !/^[.][.]?$/, @files ) &gt; 0 ) {\n        print \"Dir is not empty\\n\";\n\n        foreach my $target (@files) {\n            # Move file\n            move(\"$dirname/$target\", \"$dest_dir/$target\");\n\n    }\n}\n\n}\n</code></pre>\n"}, {"tags": ["perl", "agi"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1465995554, "post_id": 37835075, "comment_id": 63133460, "body": "It&#39;s not because of context. From <a href=\"https://metacpan.org/source/JAMESGOL/asterisk-perl-1.03/lib/Asterisk/AGI.pm#L557\" rel=\"nofollow noreferrer\">the source</a> it looks like it should work the way you are using it."}, {"owner": {"reputation": 85, "user_id": 3606807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30b0655bc3df35dcccd94923f4370f53?s=128&d=identicon&r=PG&f=1", "display_name": "vipanth", "link": "https://stackoverflow.com/users/3606807/vipanth"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1465995778, "post_id": 37835075, "comment_id": 63133634, "body": "@simbabque Yes, but it doesn&#39;t."}], "owner": {"reputation": 85, "user_id": 3606807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30b0655bc3df35dcccd94923f4370f53?s=128&d=identicon&r=PG&f=1", "display_name": "vipanth", "link": "https://stackoverflow.com/users/3606807/vipanth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 407, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1465992594, "creation_date": 1465992594, "last_edit_date": 1495541758, "question_id": 37835075, "link": "https://stackoverflow.com/questions/37835075/unable-to-catch-return-value-of-asteriskagi-get-variable", "title": "Unable to catch return value of Asterisk::AGI get_variable", "body": "<p>I have a <em>1.agi</em> file that sets asterisk variable by using following code</p>\n\n<pre><code>$AGI-&gt;set_variable(\"MY_CALLID\",$value);\n</code></pre>\n\n<p>I am using following lines of code in <em>2.agi</em> to retrieve that value (Value here is 20)</p>\n\n<pre><code>my $MY_CALLID = $AGI-&gt;get_variable('MY_CALLID');\n$LOG-&gt;debug($AGI-&gt;get_variable('MY_CALLID'));\n</code></pre>\n\n<p>In console I can see that the value is returned by asterisk. But the variable could not catch it. See log below (I am using Log::Log4perl)</p>\n\n<pre><code>&lt;SIP/tufli-0000000d&gt;AGI Rx &lt;&lt; GET VARIABLE MY_CALLID\n&lt;SIP/tufli-0000000d&gt;AGI Tx &gt;&gt; 200 result=1 (20)\n&lt;SIP/tufli-0000000d&gt;AGI Rx &lt;&lt; GET VARIABLE MY_CALLID\n&lt;SIP/tufli-0000000d&gt;AGI Tx &gt;&gt; 200 result=1 (20)\nWarning: Log message argument #1 undefined at /var/lib/asterisk/agi-bin/xxx/2.agi line 35\nUse of uninitialized value in join or string at /usr/local/share/perl5/Log/Log4perl/Appender.pm line 177, &lt;STDIN&gt; line 23.\nWarning: Log message argument #1 undefined at /var/lib/asterisk/agi-bin/xxx/2.agi line 35\nUse of uninitialized value in join or string at /usr/local/share/perl5/Log/Log4perl/Appender.pm line 177, &lt;STDIN&gt; line 23.\n&lt;SIP/tufli-0000000d&gt;AGI Rx &lt;&lt; 2016-06-15 15:59:40.983 | DEBUG | at /var/li | main                :35    | \n</code></pre>\n\n<p>What did I miss?!</p>\n\n<p>Just as some additional info, I'm using </p>\n\n<pre><code>$| = 1;\n</code></pre>\n\n<p>at beginning of my scripts (just a doubt if it has to do anything with this).</p>\n\n<p>I saw a similar question <a href=\"https://stackoverflow.com/questions/29509316/asterisk-get-variable-in-perl-agi\">here @ SO</a> but it is regarding user input not asterisk variable. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 13601, "user_id": 1564659, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f7524296b1d11599c7a1bd2c045a73ac?s=128&d=identicon&r=PG", "display_name": "Aminah Nuraini", "link": "https://stackoverflow.com/users/1564659/aminah-nuraini"}, "edited": false, "score": 0, "creation_date": 1465990438, "post_id": 37834158, "comment_id": 63129628, "body": "Where is the code?"}, {"owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "reply_to_user": {"reputation": 13601, "user_id": 1564659, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f7524296b1d11599c7a1bd2c045a73ac?s=128&d=identicon&r=PG", "display_name": "Aminah Nuraini", "link": "https://stackoverflow.com/users/1564659/aminah-nuraini"}, "edited": false, "score": 0, "creation_date": 1465992104, "post_id": 37834158, "comment_id": 63130927, "body": "use Spreadsheet::XLSX; use File::Basename; use set_env_cfg; use Date::Simple (&#39;:all&#39;); use Math::Round;"}, {"owner": {"reputation": 3364, "user_id": 693294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5935d56f077497b60c12cf86b9d2e1?s=128&d=identicon&r=PG", "display_name": "Gilbert", "link": "https://stackoverflow.com/users/693294/gilbert"}, "edited": false, "score": 0, "creation_date": 1465992188, "post_id": 37834158, "comment_id": 63130991, "body": "A hex editor or hex dump of the .csv file, with ascii, is likely to be your friend.... look at the actual byte values.  A clash between encoding formats (UTF-8 vs straight ASCII vs other encoding formats) would be high on my suspect list."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1465992782, "post_id": 37834158, "comment_id": 63131423, "body": "You must show your Perl code if you want to get a sensible answer to this"}, {"owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "edited": false, "score": 0, "creation_date": 1465993721, "post_id": 37834158, "comment_id": 63132071, "body": "Added the code, Please help on this."}, {"owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "edited": false, "score": 0, "creation_date": 1465995186, "post_id": 37834158, "comment_id": 63133158, "body": "Hi Borodin, I Have added the code, can you please review and let me what needs to be added to retain the same value in CSV as in Excel."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1465995699, "post_id": 37834158, "comment_id": 63133581, "body": "Have you considered formatting your code in a readable manner? You&#39;re asking us to help you. It&#39;s usually a good idea to make it as easy as possible for people to help you."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1465996382, "post_id": 37834158, "comment_id": 63134069, "body": "@DaveCross: It&#39;s essential that character data is represented as accurately as possible, especially in questions like this. While blockquotes may look cute, they also replace multiple whitespace with a single space character, and autowrap the result. That&#39;s usually inapproriate for data of any sort"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465996889, "post_id": 37834158, "comment_id": 63134462, "body": "It&#39;s vital to <i>always</i> <code>use strict</code> and <code>use warnings &#39;all&#39;</code> at the top of <i>every</i> Perl program you write, and declare every variable with <code>my</code> as late as possible. You should also keep your code tidy so that both yourself and others can follow it easily. I&#39;ve reformatted your code for you in this case, and I hope you will agree that there&#39;s a substantial improvement to clarity"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1465999058, "post_id": 37834158, "comment_id": 63136126, "body": "@Borodin: Good point. Apologies :-/"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "edited": false, "score": 0, "creation_date": 1466000824, "post_id": 37836060, "comment_id": 63137468, "body": "When i put the below command i am getting the below O/P  $sts = open OUT, &#39;&gt;:encoding(Windows-1252)&#39;, &quot;$od/$WkS-&gt;{Name}.txt&quot;;  o/P:  Unverifiable Drivers License Documentation &#194;\\x{0096} NB Only   For $sts = open OUT, &#39;&gt;:encoding(UTF-8)&#39;, &quot;$od/$WkS-&gt;{Name}.txt&quot;; i am getting the below  O/P: Unverifiable Drivers License Documentation &#195;\u201a&#194;\u2013 NB Only   My Expected O/P :Unverifiable License Documentation  NB Only   (Same as the Excel file value)  Can you please help on this."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "edited": false, "score": 0, "creation_date": 1466000998, "post_id": 37836060, "comment_id": 63137612, "body": "What do you have for the line <code>$sts = open (INP, ...</code>?"}, {"owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "edited": false, "score": 0, "creation_date": 1466001177, "post_id": 37836060, "comment_id": 63137761, "body": "The command suggested by you:$sts = open (INP, &#39;&lt;:encoding(Windows-1252)&#39;, ${if} );"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "edited": false, "score": 0, "creation_date": 1466001589, "post_id": 37836060, "comment_id": 63138085, "body": "@HariHaran: I can&#39;t see immediately, and I have to be out soon. Can you post the .xlsx file online so we can see the real thing?"}, {"owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "edited": false, "score": 0, "creation_date": 1466003424, "post_id": 37836060, "comment_id": 63139431, "body": "Placed the Excel file in link:<a href=\"https://drive.google.com/open?id=0B2rtUdr0h6XJS0lFYmhGWGJteVE\" rel=\"nofollow noreferrer\">drive.google.com/open?id=0B2rtUdr0h6XJS0lFYmhGWGJteVE</a> , In the Excel file i have highlighted the value which i am changing, but it is giving me the output with &#194; value."}, {"owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "edited": false, "score": 0, "creation_date": 1466076449, "post_id": 37836060, "comment_id": 63173107, "body": "Do i need to add the in my coding  {     my $columns = $WkS-&gt;{Cells};      for my $row ( @$columns ) {          next unless $row;          for my $cell ( @$row) {              next unless $cell and $cell-&gt;type eq &#39;Text&#39;;              for ( $cell-&gt;{<i>Value} ) {                  $</i> = decode(&#39;UTF-8&#39;, $_, FB_CROAK);                 $_ = decode(&#39;Windows-1252&#39;, $_, FB_CROAK);             }         }     } }"}, {"owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "edited": false, "score": 0, "creation_date": 1466077632, "post_id": 37836060, "comment_id": 63173925, "body": "Hi Borodin, I have added the &quot;use Encode qw/ decode :fallbacks /;&quot; even that i am getting the &#194; in that value, Can you please help on this."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "edited": false, "score": 0, "creation_date": 1466155215, "post_id": 37836060, "comment_id": 63210637, "body": "@HariHaran: You need to add the <code>use</code> statement at the top with all the other <code>use</code> statements, and insert the block I have written right before the <code>foreach $iR</code> loop"}, {"owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "edited": false, "score": 0, "creation_date": 1466167790, "post_id": 37836060, "comment_id": 63218900, "body": "Thanks a lot for your help. It worked fine now, Thank You very much."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 5, "last_activity_date": 1466006753, "last_edit_date": 1466006753, "creation_date": 1465995201, "answer_id": 37836060, "question_id": 37834158, "link": "https://stackoverflow.com/questions/37834158/perl-script-is-producing-the-symbol-%c3%82-while-converting-an-excel-file-to-csv/37836060#37836060", "title": "Perl script is producing the symbol &#194; while converting an Excel file to CSV", "body": "\n\n<p>My guess is that your Excel file contains data encoded using the Windows-1252 code page that has been reencoded into UTF-8 without first being decoded</p>\n\n<p>This string from your Excel file</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Unverifiable License Documentation \u2013 NB Only\n</code></pre>\n\n<p>contains an EN DASH, which is represented as <code>\"\\x96\"</code> in Windows-1252. If this is again encoded into UTF-8 the result is the two bytes <code>\"\\xC2\\x96\"</code>. Interpreting this using Windows-1252 results in the two characters LATIN CAPITAL LETTER A WITH CIRCUMFLEX followed by EN DASH, which is what you're seeing</p>\n\n<p>As far as I can tell, the only change necessary is to open your file with Windows-1252 decoding, like this</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>open my $fh, '&lt;:encoding(Windows-1252)', $excel_file or die $!\n</code></pre>\n\n<p><br/></p>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>Your revised question shows your Perl code, but has removed the essential information from the Excel data that you show. This string</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Unverifiable License Documentation  NB Only\n</code></pre>\n\n<p>now has just two spaces between <code>Documentation</code> and <code>NB</code> and omits the <code>\"0x96\"</code> n-dash</p>\n\n<p><strong><em>Note</em></strong> <em>\u2014 I've since restored the original data and tidied your code.</em></p>\n\n<p>Your various attempts at opening the input file are here</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$sts=open (INP, \"&lt; ${if}\"       );\n#$sts=open (INP, '&lt;:encoding(UTF-8)', ${if}       );\n#$sts=open (INP, '&lt;:encoding(ISO-8859-1)', ${if}       );\n</code></pre>\n\n<p>and you came very close with <code>ISO-8859-1</code>, but Microsft, in their wisdom, have reused the gaps in ISO-8859-1 encoding between 0x7F and 0x9F to represent printable characters in Windows-1252. The n-dash character at 0x96 is inside this range, so decoding your input as ISO-8859-1 won't render it correctly</p>\n\n<p>As far as I can see, you just need to write</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$sts = open (INP, '&lt;:encoding(Windows-1252)', ${if} );\n</code></pre>\n\n<p>and your input data will be read correctly</p>\n\n<p>You should also specify the encoding of your output file to avoid <code>Wide character in print</code> warnings and malformed data. I can't tell whether you want to duplicate the encoding of your Excel file, use UTF-8, or something else entirely, but you should change this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$sts = open( OUT, \"&gt;$od/$WkS-&gt;{Name}.txt\" );\n</code></pre>\n\n<p>to either</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$sts = open OUT, '&gt;:encoding(Windows-1252)', \"$od/$WkS-&gt;{Name}.txt\";\n</code></pre>\n\n<p>or\n    $sts = open OUT, '>:encoding(UTF-8)', \"$od/$WkS->{Name}.txt\";</p>\n\n<p>as appropriate</p>\n\n<p>Note also that it is best practice to use the three-parameter form of <code>open</code> all the time, and it is best to use lexical file names instead of the global ones that you have. But this isn't a code review, so I've disregarded those points</p>\n\n<p>I hope this underlines to you that it is <em>vital</em> to establish the encoding of your input data and decode it correctly. Guessing really isn't an option</p>\n\n<p><br/></p>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>My apologies. I overlooked that the initial <code>open</code> is ignore by the <code>Spreadsheet::XLSX</code> module, which is passed a filename, rather than a file handle</p>\n\n<p>This module is awkward in that it completely hides all character decoding, and relies on [<code>Text::Iconv</code>][Text::Iconv] to do the little conversion that it supports: something that is much better supported by Perl's own [<code>Encode</code>][Encode] module</p>\n\n<p>The change I suggested to your <code>open</code> call is wrong, because it seems that a .xlsx file is a zipped file. However you never read from <code>INP</code> so it will make no difference. You should also <code>close INP</code> immediately after you have opened it as it is a wasted resource</p>\n\n<p>Short of using a different module, the best thing I can suggest is that you hack the data returned by <code>Spreadsheet::XLSX-&gt;new</code></p>\n\n<p>This block will correct the erroneous re-encoding. I have added it right before your <code>foreach $iR</code> ( ... )` loop</p>\n\n<p>You will need to add</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>use Encode qw/ decode :fallbacks /;\n</code></pre>\n\n<p>to the top of your code</p>\n\n<p>Please let me know how you get on. Now I <em>really</em> must go!</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>{\n    my $columns = $WkS-&gt;{Cells};\n\n    for my $row ( @$columns ) {\n\n        next unless $row;\n\n        for my $cell ( @$row) {\n\n            next unless $cell and $cell-&gt;type eq 'Text';\n\n            for ( $cell-&gt;{_Value} ) {\n\n                $_ = decode('UTF-8', $_, FB_CROAK);\n                $_ = decode('Windows-1252', $_, FB_CROAK);\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 889, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466006753, "creation_date": 1465990092, "last_edit_date": 1592644375, "question_id": 37834158, "link": "https://stackoverflow.com/questions/37834158/perl-script-is-producing-the-symbol-%c3%82-while-converting-an-excel-file-to-csv", "title": "Perl script is producing the symbol &#194; while converting an Excel file to CSV", "body": "\n<p>We have a batch process in our system which will convert an Excel .xlsx file to CSV format using Perl. When it converts the CSV file it produces some symbols like \u00c2, so I am not getting the expected result. Can some please help me how to use the same value as in the Excel file while converting to CSV?</p>\n<h3>Value in Excel file:</h3>\n<pre class=\"lang-none prettyprint-override\"><code>Unverifiable License Documentation  NB Only\n</code></pre>\n<h3>Value converted in CSV through Perl:</h3>\n<pre class=\"lang-none prettyprint-override\"><code>Unverifiable License Documentation \u00c2\u2013 NB Only\n</code></pre>\n<p>I want to retain the same value that is in Excel while converting to CSV</p>\n<p><strong>Note:</strong> I used Encoding(UTF-8) while opening the file but even then it didn't work.</p>\n<h3>My Perl code</h3>\n<pre class=\"lang-none prettyprint-override\"><code>use Spreadsheet::XLSX;\nuse File::Basename;\nuse set_env_cfg;\nuse Date::Simple (':all');\nuse Math::Round;\n\n$sts = open( INP, &quot;&lt; ${if}&quot; );\n#$sts = open (INP, '&lt;:encoding(UTF-8)', ${if}       );\n#$sts = open (INP, '&lt;:encoding(ISO-8859-1)', ${if}       );\n\nif ( $sts == 0 ) {\n\n    print LOG tmstmp() . &quot;: Error opening input file\\n&quot;;\n    close LOG;\n    print LOG &quot;$ldlm\\n&quot;;\n    `cp $lf $od`;\n    die;\n}\n\nprint LOG &quot;$ldlm\\n&quot;;\nprint LOG tmstmp() . &quot;: Conversion started for $if\\n&quot;;\n\n$oBook = Spreadsheet::XLSX-&gt;new($if);\n\nforeach $WkS ( @{ $oBook-&gt;{Worksheet} } ) {\n\n    print LOG tmstmp() . &quot;: Converting worksheet                            -----  &quot; . $WkS-&gt;{Name}, &quot;\\n&quot;;\n\n    $cfgrec = '';    # initialize the configure record\n\n    $sts = open( OUT, &quot;&gt;$od/$WkS-&gt;{Name}.txt&quot; );\n\n    if ( $sts == 0 ) {\n\n        print LOG tmstmp() . &quot;: Error opening output file\\n&quot;;\n        close LOG;\n        close INP;\n        print LOG &quot;$ldlm\\n&quot;;\n\n        `cp $lf $od`;\n        die;\n    }\n\n    $WkS-&gt;{MaxRow} ||= $WkS-&gt;{MinRow};\n\n    foreach $iR ( $WkS-&gt;{MinRow} .. $WkS-&gt;{MaxRow} ) {\n\n        $WkS-&gt;{MaxCol} ||= $WkS-&gt;{MinCol};\n\n        print OUT $cfgkey if ( ( $cfgko == 0 ) &amp;&amp; ( $iR &gt;= $hdrcnt ) );\n\n        foreach $iC ( $WkS-&gt;{MinCol} .. $WkS-&gt;{MaxCol} ) {\n\n            $cell = $WkS-&gt;{Cells}[$iR][$iC];\n\n            if ($cell) {\n\n                if ( ( $cell-&gt;{Type} ) eq &quot;Date&quot; ) {\n\n                    if ( int( $cell-&gt;{Val} ) == ( $cell-&gt;{Val} ) ) {\n                        $tmpval = date(&quot;1900-01-01&quot;) + ( $cell-&gt;{Val} ) - 2;\n                    }\n                    else {\n\n                        $css = round( ( ( $cell-&gt;{Val} ) - int( $cell-&gt;{Val} ) ) * 86400 );\n                        $cmi = int( $css / 60 );\n                        $chr = int( $css / 3600 );\n\n                        $css = $css - $cmi * 60;\n                        $cmi = $cmi - $chr * 60;\n\n                        $tmpval = date(&quot;1900-01-01&quot;) + int( $cell-&gt;{Val} ) - 2;\n                        $tmpval .= &quot; $chr:$cmi:$css&quot;;\n                    }\n                }\n                else {\n                    $tmpval = Spreadsheet::XLSX::Utility2007::unescape_HTML( $cell-&gt;{Val} );\n                }\n\n                print OUT $tmpval;    ###Added double quotes in txt file to handle the comma delimiter value\n            }\n\n            if ( ( $iR == ${hdr_seq} - 1 ) ) {\n\n                if ( ( $cell-&gt;{Type} ) eq &quot;Date&quot; ) {\n\n                    if ( int( $cell-&gt;{Val} ) == ( $cell-&gt;{Val} ) ) {\n\n                        $tmpval = date(&quot;1900-01-01&quot;) + ( $cell-&gt;{Val} ) - 2;\n                    }\n                    else {\n\n                        $css = round( ( ( $cell-&gt;{Val} ) - int( $cell-&gt;{Val} ) ) * 86400 );\n                        $cmi = int( $css / 60 );\n                        $chr = int( $css / 3600 );\n\n                        $css = $css - $cmi * 60;\n                        $cmi = $cmi - $chr * 60;\n\n                        $tmpval = date(&quot;1900-01-01&quot;) + int( $cell-&gt;{Val} ) - 2;\n                        $tmpval .= &quot; $chr:$cmi:$css&quot;;\n                    }\n                }\n                else {\n                    $tmpval = Spreadsheet::XLSX::Utility2007::unescape_HTML( $cell-&gt;{Val} );\n                }\n\n                $cfgrec .= $tmpval;\n            }\n\n            if ( ( $iC == 0 ) &amp;&amp; ( $iR == ${hdr_seq} ) ) {\n\n                $cfgrec = uc($cfgrec);\n                $cfgko  = cnt_ocr( $cfgrec, $keyhdr );\n                $cfgkey = &quot;*|&quot; x ( $klm - $cfgko );\n            }\n\n            print OUT &quot;|&quot; if ( $iC &lt; $WkS-&gt;{MaxCol} );\n\n            print OUT $cfgkey if ( ( $cfgko == $iC + 1 ) &amp;&amp; ( $iR &gt;= $hdrcnt ) );\n        }\n\n        print OUT &quot;\\n&quot;;\n\n    }\n\n    print LOG tmstmp() . &quot;: Worsheet conversion completed successfully      -----  &quot; . $WkS-&gt;{Name}, &quot;\\n&quot;;\n\n    close OUT;\n\n    push @csv_file_lst, &quot;$WkS-&gt;{Name}.txt&quot;;\n\n}\n\nprint LOG tmstmp() . &quot;: Conversion completed successfully for $if\\n&quot;;\n</code></pre>\n"}, {"tags": ["perl", "configuration-files"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1465982524, "post_id": 37830801, "comment_id": 63124144, "body": "I wouldn&#39;t wonder about the divorced status, but rather about why this data structure is so strange."}], "answers": [{"comments": [{"owner": {"reputation": 268, "user_id": 6172033, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3c38e92e816ce57380dbd9adda77fcf0?s=128&d=identicon&r=PG&f=1", "display_name": "Chaoui05", "link": "https://stackoverflow.com/users/6172033/chaoui05"}, "edited": false, "score": 0, "creation_date": 1465982883, "post_id": 37831220, "comment_id": 63124400, "body": "Thanks @simbabque . Your approach is pretty good. I will take the time to see and understand that. Have you got any idea for second part of my post, concerning &quot;license&quot;. Thanks in advance !"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 268, "user_id": 6172033, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3c38e92e816ce57380dbd9adda77fcf0?s=128&d=identicon&r=PG&f=1", "display_name": "Chaoui05", "link": "https://stackoverflow.com/users/6172033/chaoui05"}, "edited": false, "score": 0, "creation_date": 1465982989, "post_id": 37831220, "comment_id": 63124468, "body": "@Chaoui05 I didn&#39;t understand that part at first. But I think I got it now. You need to use an array to store the names. I&#39;ll update."}, {"owner": {"reputation": 268, "user_id": 6172033, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3c38e92e816ce57380dbd9adda77fcf0?s=128&d=identicon&r=PG&f=1", "display_name": "Chaoui05", "link": "https://stackoverflow.com/users/6172033/chaoui05"}, "edited": false, "score": 0, "creation_date": 1465983211, "post_id": 37831220, "comment_id": 63124627, "body": "Thanks ! So i&#39;am waiting your solution with curiosity"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 268, "user_id": 6172033, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3c38e92e816ce57380dbd9adda77fcf0?s=128&d=identicon&r=PG&f=1", "display_name": "Chaoui05", "link": "https://stackoverflow.com/users/6172033/chaoui05"}, "edited": false, "score": 0, "creation_date": 1465983905, "post_id": 37831220, "comment_id": 63125127, "body": "Btw, you don&#39;t need to ping me with <code>@simbabque</code> on my own posts. You get notified about every comment on your own post anyway. <a href=\"http://meta.stackexchange.com/a/43020/202151\">See this meta.se post</a>. :)"}, {"owner": {"reputation": 268, "user_id": 6172033, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3c38e92e816ce57380dbd9adda77fcf0?s=128&d=identicon&r=PG&f=1", "display_name": "Chaoui05", "link": "https://stackoverflow.com/users/6172033/chaoui05"}, "edited": false, "score": 0, "creation_date": 1465983935, "post_id": 37831220, "comment_id": 63125144, "body": "Many thanks for your reply again ! it&#39;s very well explained. Yes , i thought it but it was to be sure ^^ . Anyway , thanks , that&#39;s a thing i appreciate in Perl community , the community :)"}, {"owner": {"reputation": 268, "user_id": 6172033, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3c38e92e816ce57380dbd9adda77fcf0?s=128&d=identicon&r=PG&f=1", "display_name": "Chaoui05", "link": "https://stackoverflow.com/users/6172033/chaoui05"}, "edited": false, "score": 0, "creation_date": 1465984781, "post_id": 37831220, "comment_id": 63125736, "body": "Oups. Just a last precision. If i want , in &quot;license&quot; case,  to recover each license in a variable, how can i do with your two approachs ? Promise , it&#39;s the last thing !"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 268, "user_id": 6172033, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3c38e92e816ce57380dbd9adda77fcf0?s=128&d=identicon&r=PG&f=1", "display_name": "Chaoui05", "link": "https://stackoverflow.com/users/6172033/chaoui05"}, "edited": false, "score": 0, "creation_date": 1465992510, "post_id": 37831220, "comment_id": 63131233, "body": "@Chaoui05 I don&#39;t understand the question. If you mean you want to put each one into a separate variable, then the answer is <b>don&#39;t do it</b>. Read the document I linked above."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1465984048, "last_edit_date": 1465984048, "creation_date": 1465982380, "answer_id": 37831220, "question_id": 37830801, "link": "https://stackoverflow.com/questions/37830801/how-to-get-some-values-with-a-loop-from-hashes-of-hashes-in-perl/37831220#37831220", "title": "How to get some values with a loop from Hashes of hashes in Perl", "body": "<p>You're already doing a good job converting those array refs into hashes. But the <code>values</code> is making your life hard. You need the key and the value at the same time. You can use <a href=\"http://perldoc.perl.org/functions/each.html\" rel=\"nofollow\"><code>each</code></a> to do that.</p>\n\n<pre><code>my %programs = @{ $config-&gt;{programs} };\nwhile (my ($template_society, $value) = each %programs ) {\n    my %param = @{ $value-&gt;{parameters} };\n    print \"$template_society\\n\";\n    for my $name ( sort keys %param ) {\n        print \"\\t\", $name, ': ', $param{$name}, \"\\n\";\n    }\n}\n</code></pre>\n\n<p>This will produce the following output:</p>\n\n<pre><code>VIKTOR DESCRIPTION PRODUCT\n    Activities_folder: \\VIKTOR\\independent worker\n    Activities_format: Enterprise Format (V35)\n    Birth_date: 1995-04-30\n    Count_id: 06 (Viktor)\n    Description_File_from: \\VIKTOR\\FILE\\description.xlm\n    Divorce_date: 2015-03-30\n    Marriage_date: 2014-05-26\nOLIVER NEW OBJECT\n    Activities_folder: \\OLIVER\\independent worker\n    Activities_format: Enterprise Format (V35)\n    Birth_date: 1990-04-30\n    Count_id: 06 (oliver)\n    Description_File_from: \\OLIVER\\FILE\\description.xlm\n    Divorce_date: 2014-01-30\n    Marriage_date: 2011-03-26\n</code></pre>\n\n<p>The <code>each</code> built-in returns both the key and the value of a hash per iteration, and <code>undef</code> once it's done. That's why you need to put it in a <code>while</code> loop.</p>\n\n<p>If you don't like the <code>each</code> approach, you can also use <code>keys</code> instead of <code>values</code> to get the keys (<code>$template_society</code>) and use that to look up the appropriate value.</p>\n\n<pre><code>my %programs = @{ $config-&gt;{programs} };\nforeach my $template_society (keys %programs ) {\n    my %param = @{ $programs{$template_society}-&gt;{parameters} };\n    print \"$template_society\\n\";\n    for my $name ( sort keys %param ) {\n        print \"\\t\", $name, ': ', $param{$name}, \"\\n\";\n    }\n}\n</code></pre>\n\n<p>This will give you the same output.</p>\n\n<hr>\n\n<p>To get all your licence paths you need to store them in an array and use a loop to process your array ref into that array. The easiest and most concise way to do that is using <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow\"><code>map</code></a>.</p>\n\n<pre><code>my @licences = map { catfile($::svn, $_ ) } @{ $config-&gt;{license} };\n</code></pre>\n\n<p>It's like a <code>foreach</code> loop, just shorter. The BLOCK is basically a function that gets the current iteration item in <code>$_</code>. It's essentially the same as the following, just more perlish.</p>\n\n<pre><code>my @licences;\nforeach my $licence (@{ $config-&gt;{license} } ) {\n    push @licences, catfile($::svn, $licence );\n}\n</code></pre>\n\n<p><strong>Do not</strong> attempt to create variables like <code>$foo1</code>, <code>$foo2</code> and so on dynamically. That will not work. <a href=\"https://web.archive.org/web/20150210001429/http://perl.plover.com/varvarname.html\" rel=\"nofollow\">See this</a><sup>1</sup> for an explanation why.</p>\n\n<hr>\n\n<p>Finally a word on <code>$::svn</code>: if you are in a package, you should put your code into a function and accept <code>$svn</code> as an argument. Working with globals or package variables from different packages is tricky and messy and you will at some point shoot yourself in the foot with it.</p>\n\n<p><sup>1: The normal document is currently broken, so I used archive.org to get it</sup></p>\n"}], "owner": {"reputation": 268, "user_id": 6172033, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3c38e92e816ce57380dbd9adda77fcf0?s=128&d=identicon&r=PG&f=1", "display_name": "Chaoui05", "link": "https://stackoverflow.com/users/6172033/chaoui05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1465984048, "creation_date": 1465981365, "last_edit_date": 1465981804, "question_id": 37830801, "link": "https://stackoverflow.com/questions/37830801/how-to-get-some-values-with-a-loop-from-hashes-of-hashes-in-perl", "title": "How to get some values with a loop from Hashes of hashes in Perl", "body": "<p>I have a config.file to do some tests and i would like to get some values from this one also.</p>\n\n<p>Here my config.file:</p>\n\n<pre><code>my $folder = 'E:\\FOLDER\\Test\\WEB';\n{\n       license =&gt; [ 'kit-licence.zip',\n                    'kit-work.zip'\n                   ],\n       programs =&gt; [\n             #template society =&gt;\\%program_work\n             'VIKTOR DESCRIPTION PRODUCT' =&gt; { \n                    name =&gt; 'VIKTOR ', \n                    parameters =&gt; [\n                           Count_id                           =&gt; '06 (Viktor)',\n                           Birth_date                    =&gt; '1995-04-30',\n                           Marriage_date              =&gt; '2014-05-26',\n                           Divorce_date               =&gt; '2015-03-30',\n                           Activities_folder               =&gt; $folder.'\\VIKTOR\\independent worker',\n                           Activities_format               =&gt; 'Enterprise Format (V35)',\n                           Description_File_from       =&gt; $folder.'\\VIKTOR\\FILE\\description.xlm',\n\n                    ] \n             },\n\n             'OLIVER NEW OBJECT' =&gt; {   \n                    name =&gt; 'OLIVER ', \n                    parameters =&gt; [\n                           Count_id                           =&gt; '06 (oliver)',\n                           Birth_date                    =&gt; '1990-04-30',\n                           Marriage_date              =&gt; '2011-03-26',\n                           Divorce_date               =&gt; '2014-01-30',\n                           Activities_folder               =&gt; $folder.'\\OLIVER\\independent worker',\n                           Activities_format               =&gt; 'Enterprise Format (V35)',\n                           Description_File_from       =&gt; $folder.'\\OLIVER\\FILE\\description.xlm',\n\n                    ] \n             }, \n       ]\n};\n</code></pre>\n\n<p>My file test is following:</p>\n\n<pre><code>#test.pl\nuse Modern::Perl;\nmy $config = do 'work.conf';\nuse Data::Dumper;\nsay Dumper( $config );\n</code></pre>\n\n<p>To get parameters in Programs for Viktor for example, I can do this:</p>\n\n<pre><code> %programs = @{ $config-&gt;{programs} };\n    for my $prog (values %programs) {\n      my %param = @{ $prog-&gt;{parameters} };\n      for my $name (sort keys %param){\n       print $name, ': ', $param{$name},\"\\n\";\n      }\n    }\n</code></pre>\n\n<p>But in my case, I want to be able to get parameters for every user. Here it's just for Viktor. I would like to get them for Oliver or for another user. For that, and to differentiate all users,  I have to use the \"template society\" which is the name to differentiate every user. For example, for Viktor, it's: \"VIKTOR DESCRIPTION PRODUCT\". For Oliver: \"OLIVER NEW OBJECT\".</p>\n\n<p>How can I do that?</p>\n\n<p>Same thing for \"License\":</p>\n\n<pre><code> license =&gt; [ 'kit-licence.zip',\n               'kit-work.zip'\n                   ],\n       programs =&gt; [..\n</code></pre>\n\n<p>I would like to get the license by name of each one. For example, 'kit-license.zip'.</p>\n\n<p>And not by \"hard coding\" like that:</p>\n\n<pre><code>use File::Spec::Functions qw/catfile/;\nmy $filename = catfile($::svn, ${$config-&gt;{license}}[0]);\nmy $filename1 = catfile($::svn, ${$config-&gt;{license}}[1]);\n</code></pre>\n\n<p>Perhaps in a loop, but I didn't find.</p>\n\n<p>PS: Don't ask me why they are all divorced. I really don't know.</p>\n"}, {"tags": ["windows", "perl", "virtual-memory"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1465967427, "post_id": 37826394, "comment_id": 63115949, "body": "Keep in mind that a 32-bit program is limited to using 2 or 3 GB, no matter how much memory you have. You&#39;ll probably need a 64-bit build of Perl (<code>x64</code> in the output of <code>perl -V:archname</code>) to get to the point where you use virtual memory. It will happen automatically as memory is needed."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1465967805, "post_id": 37826394, "comment_id": 63116124, "body": "@ikegami This is definitely 64-bit <code>perl</code>.  It is currently sitting at <i>7.17GB</i> used RAM out of <i>8GB</i>.  I would have thought it should swap to virtual memory before this point."}, {"owner": {"reputation": 1444, "user_id": 6062567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e87060f0ce67ed68a097ac5186027c5?s=128&d=identicon&r=PG&f=1", "display_name": "oldtechaa", "link": "https://stackoverflow.com/users/6062567/oldtechaa"}, "edited": false, "score": 2, "creation_date": 1465991173, "post_id": 37826394, "comment_id": 63130249, "body": "Obviously, physical memory is better for everything than virtual memory. Doesn&#39;t slow down disk IO or the processes using it; it&#39;s a win-win. Why would the operating system use virtual memory when it can use physical and move it as needed?"}], "answers": [{"comments": [{"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 0, "creation_date": 1465967180, "post_id": 37826487, "comment_id": 63115855, "body": "I have let the program run and it gets very close to the physical memory limit of my machine.  I would like it to swap to the page-file much earlier so it doesn&#39;t disrupt the performance of the rest of the system.  By the way, the memory leak is likely to be in an imported module.  It would take too long for me to find it."}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "reply_to_user": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 0, "creation_date": 1465967312, "post_id": 37826487, "comment_id": 63115905, "body": "Windows will swap when it needs to.  As soon as total committed memory becomes larger than physical RAM performance will drop, especially if there&#39;s a lot going on in other processes.  This is unavoidable."}, {"owner": {"reputation": 1444, "user_id": 6062567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e87060f0ce67ed68a097ac5186027c5?s=128&d=identicon&r=PG&f=1", "display_name": "oldtechaa", "link": "https://stackoverflow.com/users/6062567/oldtechaa"}, "reply_to_user": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 0, "creation_date": 1465991317, "post_id": 37826487, "comment_id": 63130353, "body": "@CJ7, it doesn&#39;t slow anything down just to be near the limit of your RAM. And if it needs more, then it will put unused blocks of your Perl RAM into VM and since leaked blocks are unused, you should see little slowdown."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 1444, "user_id": 6062567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e87060f0ce67ed68a097ac5186027c5?s=128&d=identicon&r=PG&f=1", "display_name": "oldtechaa", "link": "https://stackoverflow.com/users/6062567/oldtechaa"}, "edited": false, "score": 0, "creation_date": 1466031267, "post_id": 37826487, "comment_id": 63154214, "body": "@oldtechaa Yes it does slow down near the RAM limit. I have noticed a degradation of performance when there is less than 1GB free."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1466035315, "post_id": 37826487, "comment_id": 63155283, "body": "That is likely because it is starting to use virtual memory.  Even if it were possible, making it use virtual memory sooner would probably just make performance degrade sooner."}], "tags": [], "owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "is_accepted": false, "score": 6, "last_activity_date": 1465967050, "last_edit_date": 1465967050, "creation_date": 1465966742, "answer_id": 37826487, "question_id": 37826394, "link": "https://stackoverflow.com/questions/37826394/how-to-make-program-use-virtual-memory/37826487#37826487", "title": "How to make program use virtual memory?", "body": "<p>The OS will provide virtual memory automatically if needed and if it's configured to have swap space.  You cannot control that from a Perl program.</p>\n\n<p>If your Perl program has a memory leak eventually it will start being swapped to the page file.  When its memory consumption causes total memory to exceed the sum of your physical RAM plus page file, things will slow to a crawl and processes may become unresponsive and/or crash.</p>\n\n<p>In any case, the size of the page file cannot be change dynamically, a reboot is required.  The only long-term fix is to find and fix the leak.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14520931, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/8954f35171860cfb864724b5259cef88?s=128&d=identicon&r=PG", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/14520931/anonymous"}, "is_accepted": false, "score": -1, "last_activity_date": 1603726548, "last_edit_date": 1603726548, "creation_date": 1603703730, "answer_id": 64534284, "question_id": 37826394, "link": "https://stackoverflow.com/questions/37826394/how-to-make-program-use-virtual-memory/64534284#64534284", "title": "How to make program use virtual memory?", "body": "<ol>\n<li>Create a shortcut of program that u want to run in virtual ram.</li>\n<li>Right click on shortcut and click properties.</li>\n<li>In properties, locate for target.</li>\n<li>Copy and this at the end of target( --profile-directory=&quot;Profile 1&quot;--disk-cache-dir=C:\\ ).</li>\n<li>Restart your pc.</li>\n</ol>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1079, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1603726548, "creation_date": 1465966250, "last_edit_date": 1467758560, "question_id": 37826394, "link": "https://stackoverflow.com/questions/37826394/how-to-make-program-use-virtual-memory", "title": "How to make program use virtual memory?", "body": "<p>How can I make a program use <strong>virtual memory</strong> in <code>Windows</code>?</p>\n\n<p>I have a long <code>perl</code> script which is using <em>6GB+</em> of memory and increasing. My machine only has <em>8GB</em> or RAM. It is probably caused by a memory leak in a module, but there is nothing I can do about that now.</p>\n\n<p>Is it possible to make it use virtual memory, or is this something controlled by <code>Windows</code> only?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 3271, "user_id": 387177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce58186c9663c82e5fef7fcca045fa57?s=128&d=identicon&r=PG", "display_name": "Steffen Roller", "link": "https://stackoverflow.com/users/387177/steffen-roller"}, "edited": false, "score": 0, "creation_date": 1465962384, "post_id": 37825656, "comment_id": 63114346, "body": "you use the <code>[ ]</code> because that&#39;s the way to put a space into an extended regex?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3271, "user_id": 387177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce58186c9663c82e5fef7fcca045fa57?s=128&d=identicon&r=PG", "display_name": "Steffen Roller", "link": "https://stackoverflow.com/users/387177/steffen-roller"}, "edited": false, "score": 2, "creation_date": 1465963071, "post_id": 37825656, "comment_id": 63114524, "body": "You could use <code>\\ </code>, but I find <code>[ ]</code> more readable. Two other options: <code>\\x20</code>, <code>\\N{SPACE}</code>"}, {"owner": {"reputation": 3271, "user_id": 387177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce58186c9663c82e5fef7fcca045fa57?s=128&d=identicon&r=PG", "display_name": "Steffen Roller", "link": "https://stackoverflow.com/users/387177/steffen-roller"}, "edited": false, "score": 0, "creation_date": 1465963309, "post_id": 37825656, "comment_id": 63114607, "body": "I see. I&#39;m trying to understand this expression <code>^====(?&lt;content&gt;(?:(?!^====).)*)</code>. I understand it catches everything behind <code>^====</code> which doesn&#39;t contain <code>^====</code>. The <code>?:</code> avoids catching the expression in the parens. I don&#39;t get the <code>).)*</code> construct."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3271, "user_id": 387177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce58186c9663c82e5fef7fcca045fa57?s=128&d=identicon&r=PG", "display_name": "Steffen Roller", "link": "https://stackoverflow.com/users/387177/steffen-roller"}, "edited": false, "score": 0, "creation_date": 1465964100, "post_id": 37825656, "comment_id": 63114850, "body": "<code>).)*</code> it not a valid regex pattern. I already explained what <code>(?:(?!PAT).)*)</code> does. It&#39;s simply <code>(?! ^==== ).</code> inside of <code>(?: ... )*</code>. Do you understand each  of those? A bunch of (<code>(?: ... )*</code>) characters that aren&#39;t the start of <code>^====</code> (<code>(?! ^==== ).</code>)."}, {"owner": {"reputation": 3271, "user_id": 387177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce58186c9663c82e5fef7fcca045fa57?s=128&d=identicon&r=PG", "display_name": "Steffen Roller", "link": "https://stackoverflow.com/users/387177/steffen-roller"}, "edited": false, "score": 0, "creation_date": 1466097379, "post_id": 37825656, "comment_id": 63188007, "body": "yeah, I got this later that night. thanks for explaining it again though."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1466004113, "last_edit_date": 1466004113, "creation_date": 1465961701, "answer_id": 37825656, "question_id": 37825561, "link": "https://stackoverflow.com/questions/37825561/how-to-iterate-over-a-multiline-string-with-perls-regex/37825656#37825656", "title": "How to iterate over a multiline string with perl&#39;s regex", "body": "<p>Use of the greediness modifier <code>?</code> is a giant red flag. You can usually get away with using it once in a pattern, but more than that is usually a bug. If you want to match text that doesn't contain a string, use the following instead:</p>\n\n<pre><code>(?:(?!STRING).)*\n</code></pre>\n\n<p>So that gets you the following:</p>\n\n<pre><code>/\n   ^==== [ ] (?&lt;filename&gt; [^\\n]+ ) [ ] ====\\n\n   (?&lt;content&gt; (?:(?! ^==== ).)* )\n/xsmg\n</code></pre>\n\n<hr>\n\n<p>Code:</p>\n\n<pre><code>my $desc = do { local $/; &lt;DATA&gt; };\n\nwhile (\n   $desc =~ /\n      ^==== [ ] (?&lt;filename&gt; [^\\n]+ ) [ ] ====\\n\n      (?&lt;content&gt; (?:(?! ^==== ).)* )\n   /xsmg\n) {\n   print \"filename=&lt;&lt;$+{filename}&gt;&gt;\\n\";\n   print \"content=&lt;&lt;$+{content}&gt;&gt;\\n\";\n}\n\n__DATA__\nHeader\n\n==== /home/src/file1.c#1 ====\ncontent file1\nline 1 of file1\nline 2 of file1\nline 3 of file1\n\nanother line of file1\n\n==== /home/src/file2.c#1 ====\ncontent file2\nline 1 of file2\nline 2 of file2\nline 3 of file2\n\nanother line of file2\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>filename=&lt;&lt;/home/src/file1.c#1&gt;&gt;\ncontent=&lt;&lt;content file1\nline 1 of file1\nline 2 of file1\nline 3 of file1\n\nanother line of file1\n\n&gt;&gt;\nfilename=&lt;&lt;/home/src/file2.c#1&gt;&gt;\ncontent=&lt;&lt;content file2\nline 1 of file2\nline 2 of file2\nline 3 of file2\n\nanother line of file2\n&gt;&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3271, "user_id": 387177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce58186c9663c82e5fef7fcca045fa57?s=128&d=identicon&r=PG", "display_name": "Steffen Roller", "link": "https://stackoverflow.com/users/387177/steffen-roller"}, "edited": false, "score": 0, "creation_date": 1466009677, "post_id": 37838176, "comment_id": 63143630, "body": "I found a way on which I felt comfortable to solve my problem. To me this solution here looks more complicated. My example was only the core of my script. I subsequently analyze each content and need it in a string variable to hand it to a sub. I also need the list of files + additional information in that line which was omitted from my original question to keep it simple. Remember perl&#39;s motto: TIMTOWTDI."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3271, "user_id": 387177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce58186c9663c82e5fef7fcca045fa57?s=128&d=identicon&r=PG", "display_name": "Steffen Roller", "link": "https://stackoverflow.com/users/387177/steffen-roller"}, "edited": false, "score": 0, "creation_date": 1466010894, "post_id": 37838176, "comment_id": 63144305, "body": "@SteffenRoller: Your original approach was clearly <i>too complicated</i> because you needed help with it! It is common to try to make regular expressions do too much: there is often a more appropriate tool in the language. If you have a better solution then you should show it here as another answer. Please remember that your question&#39;s primary purpose is to help others with a similar issue. You should also think about opening a scalar variable for input, with <code>open my $fh, &#39;&lt;&#39;, \\$var</code>. And the first <code>T</code> in <i>TMTOWTDI</i> is <i>&quot;There&#39;s&quot;</i>, so there&#39;s no <code>I</code> :)"}, {"owner": {"reputation": 3271, "user_id": 387177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce58186c9663c82e5fef7fcca045fa57?s=128&d=identicon&r=PG", "display_name": "Steffen Roller", "link": "https://stackoverflow.com/users/387177/steffen-roller"}, "edited": false, "score": 0, "creation_date": 1466011521, "post_id": 37838176, "comment_id": 63144648, "body": "You are entitled to your opinion. My very last comment to this subject: <a href=\"http://c2.com/cgi/wiki?ThereIsMoreThanOneWayToDoIt\" rel=\"nofollow noreferrer\">c2.com/cgi/wiki?ThereIsMoreThanOneWayToDoIt</a>, <a href=\"https://en.wikipedia.org/wiki/There%27s_more_than_one_way_to_do_it\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/There%27s_more_than_one_way_to_do_it</a>, <a href=\"http://perl.wikia.com/wiki/TIMTOWTDI\" rel=\"nofollow noreferrer\">perl.wikia.com/wiki/TIMTOWTDI</a>. It&#39;s on the Internet so it must be true :-)."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1467554672, "last_edit_date": 1467554672, "creation_date": 1466000553, "answer_id": 37838176, "question_id": 37825561, "link": "https://stackoverflow.com/questions/37825561/how-to-iterate-over-a-multiline-string-with-perls-regex/37838176#37838176", "title": "How to iterate over a multiline string with perl&#39;s regex", "body": "<p>You've made this more awkward by slurping the whole file in the first place. This is relatively simple if you read the file line-by-line</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy $file;\n\nwhile ( &lt;&gt; ) {\n    if ( /^====\\s+(.*\\S)#\\S*\\s+====/ ) {\n        $file = $1;\n        print \"filename=$file\\n\";\n        print 'content=';\n    }\n    elsif ( $file ) {\n        print;\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>filename=/home/src/file1.c\ncontent=content file1\nline 1 of file1\nline 2 of file1\nline 3 of file1\n\nanother line of file1\n\nfilename=/home/src/file2.c\ncontent=content file2\nline 1 of file2\nline 2 of file2\nline 3 of file2\n\nanother line of file2\n</code></pre>\n\n<p>Alternatively, if you need to store the whole content per file, perhaps as a hash, it would look like this</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy $file;\nmy %data;\n\nwhile ( &lt;&gt; ) {\n    if ( /^====\\s+(.*\\S)#\\S*\\s+====/ ) {\n        $file = $1;\n    }\n    elsif ( $file ) {\n        $data{$file} .= $_;\n    }\n}\n\nfor my $file ( sort keys %data ) {\n    print \"filename=$file\\n\";\n    print \"content=$data{$file}\";\n}\n</code></pre>\n\n<p>The output is identical to that of the first version above</p>\n"}], "owner": {"reputation": 3271, "user_id": 387177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce58186c9663c82e5fef7fcca045fa57?s=128&d=identicon&r=PG", "display_name": "Steffen Roller", "link": "https://stackoverflow.com/users/387177/steffen-roller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 726, "favorite_count": 0, "accepted_answer_id": 37825656, "answer_count": 2, "score": 2, "last_activity_date": 1467554672, "creation_date": 1465961086, "question_id": 37825561, "link": "https://stackoverflow.com/questions/37825561/how-to-iterate-over-a-multiline-string-with-perls-regex", "title": "How to iterate over a multiline string with perl&#39;s regex", "body": "<p>I need to extract several sections from a multiline string with Perl. I'm applying the same regex in a while loop.\nMy problem is to get the last section which ends with the file. My workaround is to append the marker. This way the regex will always find and end.\nIs there a better way to do it?</p>\n\n<p>Example file:</p>\n\n<pre><code>Header\n\n==== /home/src/file1.c#1 ====\ncontent file1\nline 1 of file1\nline 2 of file1\nline 3 of file1\n\nanother line of file1\n\n==== /home/src/file2.c#1 ====\ncontent file2\nline 1 of file2\nline 2 of file2\nline 3 of file2\n\nanother line of file2\n</code></pre>\n\n<p>Perl script:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nmy $desc = do { local $/ = undef; &lt;&gt; };\n\n$desc .= \"\\n====\"; # set the end marker\n\nwhile($desc =~ /^==== (?&lt;filename&gt;.*?)#.*?====$(?&lt;content&gt;.*?)(?=^====)/mgsp) {\n  print \"filename=\", $+{filename}, \"\\n\";\n  print \"content=\", $+{content}, \"\\n\";\n}\n</code></pre>\n\n<p>This way the script finds both segments. How can I avoid adding the marker?</p>\n"}, {"tags": ["perl", "shell", "if-statement"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1465963864, "post_id": 37825502, "comment_id": 63114778, "body": "try <code>if ( $. &gt;= $ENV{t} )</code>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1465964004, "post_id": 37825502, "comment_id": 63114820, "body": "<code>if ( $a .. $b )</code> is always FALSE for any integer values."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1465964073, "post_id": 37825502, "comment_id": 63114841, "body": "<a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlvar.html</a> search for <code>$.</code> or <code>INPUT_LINE_NUMBER</code>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1465964320, "post_id": 37825502, "comment_id": 63114921, "body": "The construct <code>TT=123 perl -lane &#39;...... $ENV{TT} ....&#39; foo.txt</code> will also work for you."}], "answers": [{"comments": [{"owner": {"reputation": 495, "user_id": 4357605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rLHyo.jpg?s=128&g=1", "display_name": "James LT", "link": "https://stackoverflow.com/users/4357605/james-lt"}, "edited": false, "score": 0, "creation_date": 1465965256, "post_id": 37826087, "comment_id": 63115185, "body": "Thanks. but is there a way to control which line to start with?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 495, "user_id": 4357605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rLHyo.jpg?s=128&g=1", "display_name": "James LT", "link": "https://stackoverflow.com/users/4357605/james-lt"}, "edited": false, "score": 0, "creation_date": 1465965353, "post_id": 37826087, "comment_id": 63115214, "body": "@James  I got pulled away from this, but wanted at least to answer the question. I&#39;ll add to it in a few mintues."}, {"owner": {"reputation": 495, "user_id": 4357605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rLHyo.jpg?s=128&g=1", "display_name": "James LT", "link": "https://stackoverflow.com/users/4357605/james-lt"}, "edited": false, "score": 0, "creation_date": 1465966017, "post_id": 37826087, "comment_id": 63115419, "body": "I just solved it using $.  It would be great if you know better ways and post them!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 495, "user_id": 4357605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rLHyo.jpg?s=128&g=1", "display_name": "James LT", "link": "https://stackoverflow.com/users/4357605/james-lt"}, "edited": false, "score": 0, "creation_date": 1465966223, "post_id": 37826087, "comment_id": 63115496, "body": "@James  Glad to see you worked it out!  I&#39;ve also added that to my answer.  What do you consider &quot;better&quot; ways?  More concise or shorter or ....?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1465966290, "post_id": 37826087, "comment_id": 63115520, "body": "Using the range operator, it would look like <code>if $.==$ENV{t} .. 4</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1465966488, "post_id": 37826087, "comment_id": 63115593, "body": "@ikegami Thank you -- I&#39;ve had that in my test here. I didn&#39;t think it was any &quot;better&quot; ... but it is.  Thank you."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1465966792, "post_id": 37826087, "comment_id": 63115728, "body": "I don&#39;t see the point of using the range operator either, in this case."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1465967121, "post_id": 37826087, "comment_id": 63115839, "body": "@ikegami  That&#39;s what I was thinking -- but it is more compact and perhaps a tiny bit more efficient (?).  On the other hand it mixes things and a normal test is probably clearer now."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 495, "user_id": 4357605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rLHyo.jpg?s=128&g=1", "display_name": "James LT", "link": "https://stackoverflow.com/users/4357605/james-lt"}, "edited": false, "score": 0, "creation_date": 1465973189, "post_id": 37826087, "comment_id": 63118420, "body": "@James  Having in mind your previous question, is there a reason that this needs to be a bash script? You wanted a one-liner, now it&#39;s become a script -- why not Perl? I don&#39;t think you can have a really better solution with a one-liner."}, {"owner": {"reputation": 495, "user_id": 4357605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rLHyo.jpg?s=128&g=1", "display_name": "James LT", "link": "https://stackoverflow.com/users/4357605/james-lt"}, "edited": false, "score": 0, "creation_date": 1466024642, "post_id": 37826087, "comment_id": 63151742, "body": "@zdim I agree a one liner of Perl is the best. Actually I have some other stuff going on in the same shell script. So I just added the perl command."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1466098693, "last_edit_date": 1495540099, "creation_date": 1465964489, "answer_id": 37826087, "question_id": 37825502, "link": "https://stackoverflow.com/questions/37825502/get-variable-from-shell-script-in-a-perl-if-statement/37826087#37826087", "title": "Get variable from shell script in a perl IF statement", "body": "<p>It's the <a href=\"http://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow noreferrer\"><code>range operator</code></a> that's doing it. The particular rule you are using for <code>(3..4)</code> is</p>\n\n<blockquote>\n  <p>If either operand of scalar \"..\" is a constant expression, that operand is considered true if it is equal (== ) to the current input line number (the $. variable).</p>\n</blockquote>\n\n<p>Otherwise, </p>\n\n<blockquote>\n  <p>It is false as long as its left operand is false. Once the left operand is true, the range operator stays true until the right operand is true, AFTER which the range operator becomes false again. It doesn't become false till the next time the range operator is evaluated. </p>\n</blockquote>\n\n<p>When you have a <em>variable</em> for one end point it is being evaluated and is found to be true. So the left end is always true and the operator never gets to be false, and all lines are printed.</p>\n\n<p>As for how to do it, forego the elegance and test explicitly,</p>\n\n<pre><code>if $. &gt;= $ENV{t} and $. &lt;= 4\n</code></pre>\n\n<p>You can still use the range operator, for a more compact expression</p>\n\n<pre><code>if $.==$ENV{t} .. 4\n</code></pre>\n\n<p>However, at this point this may be not as clear as a normal test while a tiny gain in performance (if any) may not even be measurable.  Thanks to <a href=\"https://stackoverflow.com/users/589924/ikegami\"><code>ikegami</code></a> for bringing this up and for further comments.</p>\n"}, {"tags": [], "owner": {"reputation": 495, "user_id": 4357605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rLHyo.jpg?s=128&g=1", "display_name": "James LT", "link": "https://stackoverflow.com/users/4357605/james-lt"}, "is_accepted": false, "score": 0, "last_activity_date": 1475187643, "last_edit_date": 1475187643, "creation_date": 1465965888, "answer_id": 37826325, "question_id": 37825502, "link": "https://stackoverflow.com/questions/37825502/get-variable-from-shell-script-in-a-perl-if-statement/37826325#37826325", "title": "Get variable from shell script in a perl IF statement", "body": "<pre><code>#!/bin/bash\n\nt=3  \nexport t  \nperl -e 'print $ENV{t}' \nperl -lane '$F[3] += sin($F[2]/10 * 4 * atan2 1, 1) if(($.&gt;=$ENV{t})&amp;&amp;($.&lt;= 4)); \nprint \"@F\" 'test.txt &gt; test_new.txt\n</code></pre>\n\n<p>The above code works! It is great to know the current line number is <code>$.</code></p>\n\n<p>The result is:</p>\n\n<pre><code>A 0.016333 0.003203 0.472723\nA 0.016333 0.035228 0.472723\nB 0.016333 0.067253 0.493849581177725\nB 0.016333 0.099278 0.503907047205915\nC 0.016333 0.131303 0.472723\nC 0.016333 0.163328 0.472723\n</code></pre>\n"}], "owner": {"reputation": 495, "user_id": 4357605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rLHyo.jpg?s=128&g=1", "display_name": "James LT", "link": "https://stackoverflow.com/users/4357605/james-lt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 37826087, "answer_count": 2, "score": 1, "last_activity_date": 1475187643, "creation_date": 1465960587, "last_edit_date": 1495540853, "question_id": 37825502, "link": "https://stackoverflow.com/questions/37825502/get-variable-from-shell-script-in-a-perl-if-statement", "title": "Get variable from shell script in a perl IF statement", "body": "<p>This is a follow-up question from <a href=\"https://stackoverflow.com/questions/37514800/modify-text-column-based-on-the-column-before-it\">Modify text column based on the column before it</a></p>\n\n<p>I wanna change the starting index of the line processing, say start from the third line. I notice that in order for perl to use the variable in shell, I must export the variable and use <code>$ENV{}</code> in perl, see:</p>\n\n<pre><code>#!/bin/bash\n\nt=3 \nexport t \nperl -e 'print $ENV{t}'\nperl -lane '$F[3] += sin($F[2]/10 * 4 * atan2 1, 1) if($ENV{t} .. 4);\nprint \"@F\" \n'test.txt &gt; test_new.txt\n</code></pre>\n\n<p>Here test.txt is merely the same with the previous question:</p>\n\n<pre><code>A 0.016333 0.003203 0.472723\nA 0.016333 0.035228 0.472723\nB 0.016333 0.067253 0.472723 \nB 0.016333 0.099278 0.472723 \nC 0.016333 0.131303 0.472723 \nC 0.016333 0.163328 0.472723\n</code></pre>\n\n<p>However, the <code>$ENV{t}</code> does not work at all: the line processing still starts from the first line. Maybe in IF statement the usage is different??\nWhat should I do to control which line to start?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1465951029, "post_id": 37821924, "comment_id": 63111853, "body": "Note: <code>[e|p|x]</code> is the same thing as <code>[epx|]</code>; it matches any of those four characters. You meant to use <code>[epx]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1465938545, "post_id": 37821982, "comment_id": 63108008, "body": "he&#39;s not trying to match at the end of the string. that&#39;ll never match"}], "tags": [], "owner": {"reputation": 33, "user_id": 6174739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79879952f3ab9eb37ddfee116e6e5c6e?s=128&d=identicon&r=PG&f=1", "display_name": "cberning", "link": "https://stackoverflow.com/users/6174739/cberning"}, "is_accepted": false, "score": 1, "last_activity_date": 1465939083, "last_edit_date": 1465939083, "creation_date": 1465937979, "answer_id": 37821982, "question_id": 37821924, "link": "https://stackoverflow.com/questions/37821924/perl-regex-character-classes/37821982#37821982", "title": "perl regex character classes", "body": "<p>Since you are not matching at the end of the string I think you would need two regexes.</p>\n\n<pre><code>$regex = \"doctor_who:e[epx]\"; # match\n$not_regex \"doctor_who:e[epx][a-z]\"; #-do not match\n</code></pre>\n\n<p>Then just do</p>\n\n<pre><code>if( $string =~ $regex and $string !~ $not_regex ){}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1465938579, "post_id": 37822030, "comment_id": 63108021, "body": "OP is not trying to match at the end of the string. If you were to do it this way, you&#39;d have to substr the string at a specific length (or otherwise extract only the portion you want), then match with $"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1465939035, "post_id": 37822030, "comment_id": 63108215, "body": "that wont work either. A word boundary is whitespace, and there&#39;s no whitespace after what he&#39;s trying to hit :)"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1465940685, "post_id": 37822030, "comment_id": 63108946, "body": "see my previous comment"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1465941310, "post_id": 37822030, "comment_id": 63109190, "body": "@stevieb I&#39;ve been working on it. From the top it would seem the rejection is [only] <code>eeh</code> if the first two chars match. But, should <code>eec</code> also fail [yet <code>ee1</code> matches]? At this point, to me, the intent/criterion isn&#39;t clear even with the examples given"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1465947899, "post_id": 37822030, "comment_id": 63111106, "body": "<code>$regex .= &#39;[^h]&#39;;</code> won&#39;t allow <code>:eph</code> or <code>:exh</code> to match, along with <code>:eeh</code>"}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 1, "last_activity_date": 1465946149, "last_edit_date": 1465946149, "creation_date": 1465938134, "answer_id": 37822030, "question_id": 37821924, "link": "https://stackoverflow.com/questions/37821924/perl-regex-character-classes/37822030#37822030", "title": "perl regex character classes", "body": "<p>You can do this two ways and you combined the two.</p>\n\n<p>Use a character class:</p>\n\n<pre><code>$regex = 'doctor_who:e[epx]';\n</code></pre>\n\n<p>Use an alternation:</p>\n\n<pre><code>$regex = 'doctor_who:e(e|p|x)';\n</code></pre>\n\n<p>These provide the positive match, but they need something else to reject the <code>eeh</code> match.</p>\n\n<p>But, is <code>eeh</code> the <em>only</em> match to reject? That's the only one you mentioned, but, would you prefer something more general, such as any <em>a-z</em> character? (e.g.) What about <code>eec</code>? Should it match or be rejected?</p>\n\n<p>From the examples, <code>ee1</code> matches. Is that because <code>1</code> is <em>not</em> <code>h</code> or because it's a digit?</p>\n\n<p>It isn't totally clear [to me, at least] what the best, most succinct regex should be, because there are some loopholes in the examples. So, here are some regexes based on assumptions I've made as to what you'd really like.</p>\n\n<p>So, if <code>eeh</code> is the only rejection, add:</p>\n\n<pre><code>$regex .= '[^h]';\n</code></pre>\n\n<p>If you'd like a broader rejection:</p>\n\n<pre><code>$regex .= '[^a-z]';\n</code></pre>\n\n<p>Or, perhaps, you'd only like to match on numeric:</p>\n\n<pre><code>$regex .= '[0-9]';\n</code></pre>\n\n<p><em>Side note:</em> This answer has been edited to reflect the comments below</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1465950923, "post_id": 37822257, "comment_id": 63111824, "body": "Lookarounds are rather expensive, so I&#39;d write it as <code>&#47;doctor_who:e(?:[px]|e(?!h))&#47;</code> or even <code>&#47;doctor_who:e(?:[px]|e(?:[^h]|\\z))&#47;</code>. In practice, it might be possible to use <code>[^h]</code> instead of <code>(?:[^h]|\\z)</code>."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 2, "last_activity_date": 1465952526, "last_edit_date": 1465952526, "creation_date": 1465938988, "answer_id": 37822257, "question_id": 37821924, "link": "https://stackoverflow.com/questions/37821924/perl-regex-character-classes/37822257#37822257", "title": "perl regex character classes", "body": "<p>It's trivial with a negative lookahead zero-width assertion. This assumes the only thing you don't want to match specifically is <code>doctor_who:eeh*</code>:</p>\n\n<pre><code>/doctor_who:e(?!eh)[epx]/ \n</code></pre>\n\n<p>In the above example, as long as we match <code>doctor_who:e</code>, we will trigger the lookahead on every match. We can gain efficiency by only using it if absolutely necessary, as noted in the comments by @ikegami:</p>\n\n<pre><code>/doctor_who:e(?:[px]|e(?!h))/ \n</code></pre>\n\n<p>What that'll do is put off the lookahead unless the second char after the <code>:</code> is not <code>p</code> or <code>x</code>, and then only if that char is <code>e</code>.</p>\n\n<p>The second example shown in the comments doesn't use lookarounds at all:</p>\n\n<pre><code>/doctor_who:e(?:[px]|e[^h])/\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 2585000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3453a6e68128a360b1d6cf7168655bd?s=128&d=identicon&r=PG", "display_name": "user2585000", "link": "https://stackoverflow.com/users/2585000/user2585000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 37822257, "answer_count": 3, "score": 0, "last_activity_date": 1465952526, "creation_date": 1465937759, "question_id": 37821924, "link": "https://stackoverflow.com/questions/37821924/perl-regex-character-classes", "title": "perl regex character classes", "body": "<p>i'm having trouble regex grouping in perl.</p>\n\n<p>of course this is a much larger problem but it's the same concept i'm dealing with. thank you all in advance for your comments and ideas.</p>\n\n<p>the regex below should only care about this portion of the string to make a decision. </p>\n\n<blockquote>\n  <p>doctor_who:ee</p>\n  \n  <p>doctor_who:ep</p>\n  \n  <p>doctor_who:ex</p>\n</blockquote>\n\n<p>but not </p>\n\n<blockquote>\n  <p>doctor_who:eeh</p>\n</blockquote>\n\n<p>code:</p>\n\n<pre><code>$str = \"doctor_who:ee123ABC451234.123\"; #match\n$str = \"doctor_who:ep123YXZ451234.123\"; #match\n$str = \"doctor_who:ex123451234.123\"; #match\n$str = \"doctor_who:eeh1234LMNOP51234.123\";  ##should not match\n$str = \"doctor_who:abc12341234.123\";  ##should not match\n\n$regex = \"doctor_who:e[e|p|x]\"; #---&gt;problem, what to add/remove?\n\nif ($str =~ m/$regex/){\n   print \"match!\";\n}\nelse {\n   print \"not matched\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 7980, "user_id": 1213907, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ksAFh.png?s=128&g=1", "display_name": "KeepCalmAndCarryOn", "link": "https://stackoverflow.com/users/1213907/keepcalmandcarryon"}, "edited": false, "score": 2, "creation_date": 1465937253, "post_id": 37821571, "comment_id": 63107391, "body": "As always with perl add <code>use strict; use warnings;</code> to the top. <code>$#FILES</code> is one way to have the count of files but as arrays start at 0 you need to add 1 to it"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1465939546, "post_id": 37821571, "comment_id": 63108431, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/7406807/find-size-of-an-array-in-perl\">Find size of an array in Perl</a>"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1465939773, "post_id": 37821571, "comment_id": 63108546, "body": "Did you write this code yourself, or did you copy it from somewhere else? The reason I ask is because there are many things wrong with it, and if you copied it from a tutorials site or something, I would recommend avoiding that site in the future."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1465988855, "post_id": 37821571, "comment_id": 63128486, "body": "@FILES = grep { /gfs./ } readdir(DIR); print join &quot;\\n&quot;, scalar(@FILES);"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 7980, "user_id": 1213907, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ksAFh.png?s=128&g=1", "display_name": "KeepCalmAndCarryOn", "link": "https://stackoverflow.com/users/1213907/keepcalmandcarryon"}, "edited": false, "score": 1, "creation_date": 1465995460, "post_id": 37821571, "comment_id": 63133370, "body": "@KeepCalmAndCarryOn: Using <code>$#array</code> for anything other than getting the last index in <code>@array</code> is complicating things unnecessarily. Why not just use <code>@array</code> in scalar context?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1465995517, "post_id": 37821571, "comment_id": 63133422, "body": "@ssr1012: Your use of <code>join()</code> seems unnecessary. Why not just <code>print scalar(@FILES), &quot;\\n&quot;;</code>?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1465996413, "post_id": 37821571, "comment_id": 63134088, "body": "@Dave Cross: yes. your correct."}], "answers": [{"tags": [], "owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "is_accepted": false, "score": 1, "last_activity_date": 1465941269, "creation_date": 1465941269, "answer_id": 37822747, "question_id": 37821571, "link": "https://stackoverflow.com/questions/37821571/count-number-of-files-in-a-folder-with-perl/37822747#37822747", "title": "count number of files in a folder with perl", "body": "<p>Try this code for starters (this is on Windows and will include <code>.</code> , <code>..</code> and folders.  Those can be filtered out if you want only files):</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nmy $dirname = \"C:/Perl_Code\";\nmy $filecnt = 0;\n\nopendir (DIR, $dirname) || die \"Error while opening dir $dirname: $!\\n\";\nwhile(my $filename = readdir(DIR)){\n     print(\"$filename\\n\");\n     $filecnt++;\n}\nclosedir(DIR);\nprint \"Files in $dirname : $filecnt\\n\";\nexit;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 12, "last_activity_date": 1553104285, "last_edit_date": 1553104285, "creation_date": 1465945543, "answer_id": 37823538, "question_id": 37821571, "link": "https://stackoverflow.com/questions/37821571/count-number-of-files-in-a-folder-with-perl/37823538#37823538", "title": "count number of files in a folder with perl", "body": "<p>If you want to just count them, once you have a directory open for reading you can manipulate <a href=\"http://perldoc.perl.org/perldata.html#Context\" rel=\"noreferrer\">context</a> on <a href=\"http://perldoc.perl.org/functions/readdir.html\" rel=\"noreferrer\">readdir</a> so that it returns the list of all entries, and then assign that to a scalar.  This gives you the length of the list, ie. the number of elements</p>\n\n<pre><code>opendir my $dh, $dir;\nmy $num_entries = () = readdir($dh);\n</code></pre>\n\n<p>The construct <code>= () =</code> goes under the name of <em>goatse operator</em>, see <a href=\"http://search.cpan.org/dist/perlsecret/lib/perlsecret.pod#Goatse\" rel=\"noreferrer\">it in perlsecret</a>.  There are clearer ways, of course, as below.</p>\n\n<p>If you want to count certain kinds of files, pass the file list through <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"noreferrer\">grep</a> first, like you do. Since <code>grep</code> imposes the <em>list context</em> on its input <code>readdir</code> returns the list of all files, and after filtering <code>grep</code> itself returns a list.  When you assign that to a scalar you get the length of the list (number of elements), ie. your count.  For example, for all regular files and <code>/gfs./</code> files</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $dir = '/home/Enric/gfs-0.5.2016061400';\nopendir my $dh, $dir  or die \"Can't open $dir: $!\";\n\nmy $num_files =  grep { -f \"$dir/$_\" } readdir($dh);\nrewinddir($dh);  # so that it can read the dir again\nmy $num_gfs   =  grep { /gfs./ } readdir($dh);\n</code></pre>\n\n<p>(This is only an example, with <code>rewinddir</code> so that it works as it stands. To really get two kinds of files from a directory better read all files into an array and then process that)</p>\n\n<p><em>Note that <code>readdir</code> returns the bare filename, without any path.</em> So for most of what is normally done with files we need to prepend it with the path (unless you first <code>chdir</code> to that directory). This is what is done in the <code>grep</code> block above so that the <code>-f</code> <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"noreferrer\">file test (-X)</a>  has the correct filename.</p>\n\n<p>If you need to use the file list itself, get that into an array and then assign it to a scalar </p>\n\n<pre><code># Get the file list, then its length\nmy @files_gfs = map { \"$dir/$_\" } grep { /gfs./ } readdir($dh);\nmy $num_gfs = @files_gfs;\n</code></pre>\n\n<p>Here <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"noreferrer\">map</a> builds the full path for each file. If you don't need the path drop <code>map { }</code>. Note that there is normally no need for the formal use of <a href=\"http://perldoc.perl.org/functions/scalar.html\" rel=\"noreferrer\">scalar</a> on the array to get the count, like</p>\n\n<pre><code>my $num_gfs = scalar @files_gfs;    # no need for \"scalar\" here!\n</code></pre>\n\n<p>Instead, simply assign an array to a scalar instead, it's an idiom (to say the least).</p>\n\n<p>If you are processing files as you read, count as you go</p>\n\n<pre><code>my $cnt_gfs = 0;\nwhile (my $filename = readdir($dh)) {\n    $cnt_gfs++ if $filename =~ /gfs./;\n    # Process $dir/$filename as needed\n}\n</code></pre>\n\n<p>Here <code>readdir</code> is in the <em>scalar context</em> (since its output is assigned to a scalar), and it iterates through the directory entries, returning one at a time.</p>\n\n<hr>\n\n<p>Note. In all code above I use the example from the question, <code>/gfs./</code> -- but if that is in fact meant to signify a literal period then it should be replaced by <code>/gfs\\./</code> </p>\n"}, {"comments": [{"owner": {"reputation": 997, "user_id": 2354319, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f1ea1af443d922b09df749e51b4b0436?s=128&d=identicon&r=PG", "display_name": "Enric Agud Pique", "link": "https://stackoverflow.com/users/2354319/enric-agud-pique"}, "edited": false, "score": 0, "creation_date": 1466005128, "post_id": 37832140, "comment_id": 63140686, "body": "Thank you for the comments @Dave Cross"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 6, "last_activity_date": 1465984783, "creation_date": 1465984783, "answer_id": 37832140, "question_id": 37821571, "link": "https://stackoverflow.com/questions/37821571/count-number-of-files-in-a-folder-with-perl/37832140#37832140", "title": "count number of files in a folder with perl", "body": "<p>You have the list of files in <code>@FILES</code>. So your question becomes \"how do I get the length of an array?\" And that's simple, you simply evaluate the array in scalar context.</p>\n\n<pre><code>my $number_of_files = @FILES;\nprint $number_of_files;\n</code></pre>\n\n<p>Or you can eliminate the unnecessary scalar variable by using the <code>scalar()</code> function.</p>\n\n<pre><code>print scalar @FILES;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "is_accepted": false, "score": 1, "last_activity_date": 1466025814, "creation_date": 1466025814, "answer_id": 37846020, "question_id": 37821571, "link": "https://stackoverflow.com/questions/37821571/count-number-of-files-in-a-folder-with-perl/37846020#37846020", "title": "count number of files in a folder with perl", "body": "<p>I know this isn't in Perl, but if you ever need a quick way, just type this into bash command line: </p>\n\n<pre><code> ls -1 | wc -l \n</code></pre>\n\n<p><code>ls -1</code> gives you a list of the files in the directory, and <code>wc -l</code> gives you the line count. Combined, they'll give you the number of files in your directory. </p>\n\n<p>Alternatively, you can call bash from Perl (although you probably shouldn't), using </p>\n\n<pre><code>system(\"ls -1 | wc -l\"); \n</code></pre>\n"}], "owner": {"reputation": 997, "user_id": 2354319, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f1ea1af443d922b09df749e51b4b0436?s=128&d=identicon&r=PG", "display_name": "Enric Agud Pique", "link": "https://stackoverflow.com/users/2354319/enric-agud-pique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7393, "favorite_count": 2, "accepted_answer_id": 37823538, "answer_count": 4, "score": 5, "last_activity_date": 1553104285, "creation_date": 1465936331, "question_id": 37821571, "link": "https://stackoverflow.com/questions/37821571/count-number-of-files-in-a-folder-with-perl", "title": "count number of files in a folder with perl", "body": "<p>I would like to count the number of files inside a folder with perl. With the following code I can list them, but i don't know how to count them in perl. Any help?</p>\n\n<pre><code>$dir = \"/home/Enric/gfs-0.5.2016061400\";\nopendir(DIR, \"$dir\");\n@FILES = grep { /gfs./ } readdir(DIR);\nforeach $file (@FILES) {\nprint $file, \"\\n\";\n}\nclosedir(DIR);\n</code></pre>\n"}, {"tags": ["perl", "boxplot", "gd-graph"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1465937207, "post_id": 37820461, "comment_id": 63107363, "body": "Are you using <a href=\"https://metacpan.org/pod/GD::Graph::boxplot\" rel=\"nofollow noreferrer\">GD::Graph::boxplot</a>? If so, I think <code>show_values</code> is broken because GD::Graph::boxplot uses a different format for data than other graph types."}, {"owner": {"reputation": 11, "user_id": 6466240, "user_type": "registered", "profile_image": "https://graph.facebook.com/1051348271616618/picture?type=large", "display_name": "Swati Soni", "link": "https://stackoverflow.com/users/6466240/swati-soni"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466106958, "post_id": 37820461, "comment_id": 63193359, "body": "Thanks for the reply. Yes I am using GD::Graph::boxplot. If show_values is   broken then is there any other way. I am just stuck at this stage where I can&#39;t represent the data points?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466114646, "post_id": 37820461, "comment_id": 63196960, "body": "You can try <a href=\"https://rt.cpan.org/Public/Bug/Report.html?Queue=GDGraph-boxplot\" rel=\"nofollow noreferrer\">submitting a bug report</a> to the maintainer of GD::Graph::boxplot, but since the last release was in 2001, it doesn&#39;t appear to be actively maintained. I would recommend switching to a different graphing package like <a href=\"https://metacpan.org/pod/Chart::Clicker\" rel=\"nofollow noreferrer\">Chart::Clicker</a>."}], "owner": {"reputation": 11, "user_id": 6466240, "user_type": "registered", "profile_image": "https://graph.facebook.com/1051348271616618/picture?type=large", "display_name": "Swati Soni", "link": "https://stackoverflow.com/users/6466240/swati-soni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1465934979, "creation_date": 1465932142, "last_edit_date": 1465934979, "question_id": 37820461, "link": "https://stackoverflow.com/questions/37820461/how-can-i-label-the-values-in-a-boxplot-with-gdgraph", "title": "How can I label the values in a boxplot with GD::Graph?", "body": "<p>How can I label the values in a boxplot with <a href=\"https://metacpan.org/pod/GD::Graph\" rel=\"nofollow\">GD::Graph</a>?</p>\n\n<p><a href=\"https://metacpan.org/pod/GD::Graph#show_values\" rel=\"nofollow\"><code>show_values</code></a> doesn't help me.</p>\n"}, {"tags": ["excel", "perl", "save", "windows-server-2003", "ole"], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 665014, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b863c4b2f8f981e8f049baa6cc359f7d?s=128&d=identicon&r=PG", "display_name": "Rebeccah", "link": "https://stackoverflow.com/users/665014/rebeccah"}, "edited": false, "score": 0, "creation_date": 1465939713, "post_id": 37820326, "comment_id": 63108527, "body": "One thing I&#39;m still not following, though -- which copy is ending up in the Documents folder of the default user?  $reportfile should be a full pathname to an .xls file on the E: drive at the time of the copy and at the time of opening the file in Excel."}, {"owner": {"reputation": 197, "user_id": 665014, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b863c4b2f8f981e8f049baa6cc359f7d?s=128&d=identicon&r=PG", "display_name": "Rebeccah", "link": "https://stackoverflow.com/users/665014/rebeccah"}, "edited": false, "score": 0, "creation_date": 1465940199, "post_id": 37820326, "comment_id": 63108755, "body": "Regarding the use of eval, I think this was some trick that was found on the Internet to prevent the script from exiting if Excel was already open - and instead, causing the existing Excel instance to be used.  I think this has turned out to be a bad idea for other reasons.  Our next version of this script will not be using OLE and Excel at all.  But for now, I just want to understand why this has been behaving the way it has."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 197, "user_id": 665014, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b863c4b2f8f981e8f049baa6cc359f7d?s=128&d=identicon&r=PG", "display_name": "Rebeccah", "link": "https://stackoverflow.com/users/665014/rebeccah"}, "edited": false, "score": 0, "creation_date": 1465989792, "post_id": 37820326, "comment_id": 63129140, "body": "@Rebeccah: What is <code>$OUT</code> in your code? You don&#39;t show its definition."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 197, "user_id": 665014, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b863c4b2f8f981e8f049baa6cc359f7d?s=128&d=identicon&r=PG", "display_name": "Rebeccah", "link": "https://stackoverflow.com/users/665014/rebeccah"}, "edited": false, "score": 1, "creation_date": 1466025495, "post_id": 37820326, "comment_id": 63152146, "body": "@Rebeccah: Please just add any relevant information to your original question, without deleting what is already there. We will probably pick up the change,but you can leave a comment to alert us that you have made a change"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 197, "user_id": 665014, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b863c4b2f8f981e8f049baa6cc359f7d?s=128&d=identicon&r=PG", "display_name": "Rebeccah", "link": "https://stackoverflow.com/users/665014/rebeccah"}, "edited": false, "score": 1, "creation_date": 1466025547, "post_id": 37820326, "comment_id": 63152165, "body": "@Rebeccah: Please also delete any comments that are no longer relevant"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 197, "user_id": 665014, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b863c4b2f8f981e8f049baa6cc359f7d?s=128&d=identicon&r=PG", "display_name": "Rebeccah", "link": "https://stackoverflow.com/users/665014/rebeccah"}, "edited": false, "score": 1, "creation_date": 1466025635, "post_id": 37820326, "comment_id": 63152211, "body": "@Rebeccah: The edit link is beneath your question, just below the tags. <a href=\"http://stackoverflow.com/posts/37819913/edit\">Here&#39;s a copy</a>"}, {"owner": {"reputation": 197, "user_id": 665014, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b863c4b2f8f981e8f049baa6cc359f7d?s=128&d=identicon&r=PG", "display_name": "Rebeccah", "link": "https://stackoverflow.com/users/665014/rebeccah"}, "edited": false, "score": 0, "creation_date": 1466026103, "post_id": 37820326, "comment_id": 63152424, "body": "OK, I&#39;ve added the code that sets $OUT to the original question.  Not sure why the help says I can format code in comments, unless it&#39;s an advanced feature that I&#39;m not eligible to use."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1465931606, "creation_date": 1465931606, "answer_id": 37820326, "question_id": 37819913, "link": "https://stackoverflow.com/questions/37819913/why-is-perl-saving-two-copies-of-excel-spreadsheet/37820326#37820326", "title": "Why is perl saving two copies of Excel spreadsheet?", "body": "<p>That's very strange Perl code. <code>eval</code> without checking <code>$@</code> afterwards is just wrong -- you need to know if a step of your code has failed for the following steps to make sense</p>\n\n<p>It looks like the problem is in your call to <code>copy($infiles, $reportfile)</code>. That will save one copy of the file, while <code>$Book-&gt;Save</code> and <code>$Book-&gt;Close</code> will save another</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1465979110, "post_id": 37820498, "comment_id": 63121864, "body": "@Rebeccah  I updated the answer substantially, after realizing that your posted code opens an existing file, not create a new one. Please let me know how it goes."}, {"owner": {"reputation": 197, "user_id": 665014, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b863c4b2f8f981e8f049baa6cc359f7d?s=128&d=identicon&r=PG", "display_name": "Rebeccah", "link": "https://stackoverflow.com/users/665014/rebeccah"}, "edited": false, "score": 0, "creation_date": 1466009250, "post_id": 37820498, "comment_id": 63143391, "body": "Thank you, @zdim.  The template file has all of the formatting in it.  I&#39;m going to be doing a test deployment today, so I&#39;ll have the opportunity to try some of these things.  The new version will be using Spreadsheet::WriteExcel or possibly SpreadSheet::ParseExcel::SaveParser (I&#39;ve got two versions to try out), but this current behavior has been bugging me, so I do hope I get to the bottom of it."}, {"owner": {"reputation": 197, "user_id": 665014, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b863c4b2f8f981e8f049baa6cc359f7d?s=128&d=identicon&r=PG", "display_name": "Rebeccah", "link": "https://stackoverflow.com/users/665014/rebeccah"}, "edited": false, "score": 0, "creation_date": 1466009826, "post_id": 37820498, "comment_id": 63143711, "body": "I&#39;ve updated my question to correct the mistaken impression that Excel is creating a new file, when in fact, it is opening an existing one."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 197, "user_id": 665014, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b863c4b2f8f981e8f049baa6cc359f7d?s=128&d=identicon&r=PG", "display_name": "Rebeccah", "link": "https://stackoverflow.com/users/665014/rebeccah"}, "edited": false, "score": 0, "creation_date": 1466011951, "post_id": 37820498, "comment_id": 63144866, "body": "@Rebeccah Right, of course. So you need that. I changed my post accordingly.  It&#39;s still worth trying with a new file, just to see whether you get the same behavior.  Other than that, I&#39;d guess that it is some Excel setting. I think that all bullets are worth trying, but if you merely write Excel files use other modules, in particular the first recommended one. OLE is needed for other pursposes, you don&#39;t need it to just write a file or a few (unless there are very fancy elements)."}, {"owner": {"reputation": 197, "user_id": 665014, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b863c4b2f8f981e8f049baa6cc359f7d?s=128&d=identicon&r=PG", "display_name": "Rebeccah", "link": "https://stackoverflow.com/users/665014/rebeccah"}, "edited": false, "score": 0, "creation_date": 1466024693, "post_id": 37820498, "comment_id": 63151768, "body": "right.  I think the script was originally written this way because at the time, the author was not aware of those other modules - I&#39;m not sure if they even existed for Perl 5.8.  ....Why is this interface erasing @ zdim from my comment to you?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 197, "user_id": 665014, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b863c4b2f8f981e8f049baa6cc359f7d?s=128&d=identicon&r=PG", "display_name": "Rebeccah", "link": "https://stackoverflow.com/users/665014/rebeccah"}, "edited": false, "score": 0, "creation_date": 1466024833, "post_id": 37820498, "comment_id": 63151827, "body": "@Rebeccah  Alright, then you are probably better off using the other modules. OLE is great since it offers a uniform API for a range of tasks but for simple Excel reading/writing other modules are simpler to use.  I&#39;ll leave this answer as it is then, I hope that it was/is still useful."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 197, "user_id": 665014, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b863c4b2f8f981e8f049baa6cc359f7d?s=128&d=identicon&r=PG", "display_name": "Rebeccah", "link": "https://stackoverflow.com/users/665014/rebeccah"}, "edited": false, "score": 0, "creation_date": 1466026029, "post_id": 37820498, "comment_id": 63152389, "body": "@Rebeccah  When you post a comment beneath a question or an answer, the &#39;owner&#39; of the question/answer gets notified. So there is no need for at-owner-name, and the interface removes it if you actually type it in.  You can tag other people (up to one other than the owner, I think) by starting with at-username and they will get notified of the comment.   I would suggest that we now tidy up this thread, please remove what is not relevant any more and then I will do so, too."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1466011739, "last_edit_date": 1495540370, "creation_date": 1465932337, "answer_id": 37820498, "question_id": 37819913, "link": "https://stackoverflow.com/questions/37819913/why-is-perl-saving-two-copies-of-excel-spreadsheet/37820498#37820498", "title": "Why is perl saving two copies of Excel spreadsheet?", "body": "<p><strong>Update</strong> &nbsp; Misread a part of the question -- an existing file is opened, not a new one created.</p>\n\n<hr>\n\n<p>I don't see what causes this behavior, but here are a few things to try.</p>\n\n<ul>\n<li><p>The template and the file it is copied to have names  </p>\n\n<pre><code>$infiles = $OUT.\"/\".$infiles;\n$reportfile = \"$OUT\".\"\\\\\".$uniquefile;\n</code></pre>\n\n<p>Use the same separator.</p></li>\n<li><p>Try to suppress some possible setting dictating that another copy be made. Perhaphs</p>\n\n<pre><code>$Excel-&gt;Application-&gt;{CreateBackup} = 0;\n</code></pre>\n\n<p>However, this may not be the correct property -- search the VB or Excel documentation for properties that may result in Excel saving an extra copy. (It needn't be \"backup\".)</p></li>\n<li><p>Try to create a new file and use <code>SaveAs</code>, as a test to see whether you get two files again. The template copying may be setting it off to <code>Save</code> an extra copy (even though I don't see how). I'd say it's either that, or some general setting that need be turned off.</p></li>\n</ul>\n\n<hr>\n\n<p><em>The rest is the original post, about using <code>SaveAs</code></em></p>\n\n<p>You would use <code>SaveAs</code> to write a new file.  See <a href=\"https://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.workbook.saveas.aspx\" rel=\"nofollow noreferrer\"><code>saveas in MSDN library</code></a></p>\n\n<blockquote>\n  <p>Saves changes to the workbook in a different file.</p>\n</blockquote>\n\n<p>Using the <a href=\"https://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.workbook.save.aspx\" rel=\"nofollow noreferrer\"><code>save method</code></a> may result in saving two files fro some reason, as noted in the answer by <a href=\"https://stackoverflow.com/users/622310/borodin\"><code>Borodin</code></a>.  This page also advises to use <code>SaveAs</code> for a new file</p>\n\n<blockquote>\n  <p>The first time you save a workbook, use the SaveAs method to specify a name for the file.</p>\n</blockquote>\n\n<p>Once you change to using <code>SaveAs</code> there should be a confirmation dialog to deal with. If you want to suppress that you can set a property, with one (or either?) of</p>\n\n<pre><code>$Excel-&gt;Application-&gt;{DisplayAlerts} = 0;\n# or\n$Excel-&gt;{DisplayAlerts} = 0;\n</code></pre>\n\n<p>For a number of options, including backups for example, see the Chapter on <a href=\"http://docstore.mik.ua/orelly/perl4/perlnut/ch23_02.htm\" rel=\"nofollow noreferrer\"><code>OLE automation in PERL in a Nutshell</code></a>. </p>\n\n<hr>\n\n<p>A note on some other resources. There is a cookbook of sorts in <a href=\"http://www.perlmonks.org/?node_id=153486\" rel=\"nofollow noreferrer\"><code>this post on perlmonks</code></a>. A listing of various operations is given in <a href=\"https://stackoverflow.com/questions/27613878/list-of-perl-commands-to-manipulate-windows-excel-with-win32ole-module\"><code>this SO post</code></a>.</p>\n\n<p>Finally, I don't know how deep the reasons for using OLE are but if it is only about writing some Excel files there are other modules. For example the very well regarded <a href=\"http://search.cpan.org/dist/Spreadsheet-WriteExcel/lib/Spreadsheet/WriteExcel.pm\" rel=\"nofollow noreferrer\"><code>Spreadsheet::WriteExcel</code></a> and <a href=\"http://search.cpan.org/~jmcnamara/Excel-Writer-XLSX/lib/Excel/Writer/XLSX.pm\" rel=\"nofollow noreferrer\"><code>Excel-Writer-XLSX</code></a>.</p>\n"}], "owner": {"reputation": 197, "user_id": 665014, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b863c4b2f8f981e8f049baa6cc359f7d?s=128&d=identicon&r=PG", "display_name": "Rebeccah", "link": "https://stackoverflow.com/users/665014/rebeccah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1466025710, "creation_date": 1465930198, "last_edit_date": 1495540370, "question_id": 37819913, "link": "https://stackoverflow.com/questions/37819913/why-is-perl-saving-two-copies-of-excel-spreadsheet", "title": "Why is perl saving two copies of Excel spreadsheet?", "body": "<p>This is similar to <a href=\"https://stackoverflow.com/questions/28584563/a-copy-of-excel-addin-is-created-in-my-documents-after-saving\">A copy of Excel Addin is created in My Documents after saving</a>, except that I'm working with Perl instead of VBA, and xls files instead of xlsm, and the negative impact of the behavior is different.  </p>\n\n<p>I've inherited a Perl script (Perl 5.8.8) that is running on Windows 2003 Server as SYSTEM.  After copying an Excel 2003 template file to a unique, fully defined path location, it opens the unique file in Excel using OLE, edits the file, saves the file, and closes the file.  What results is the edited file being saved both in the correct, fully-defined path location, and also in the Default User profile's Documents folder.</p>\n\n<p>This causes thousands of these files to accumulate on the C: drive, as every new admin to be hired gets a copy in his Documents folder.</p>\n\n<p>Adding the code that sets the value of $OUT:</p>\n\n<pre><code>if (!$db-&gt;Sql(\"EXEC GetDetails 'name'\"))\n{\n    while ($db-&gt;FetchRow()&gt;0)\n    {\n        @DataIn = $db-&gt;Data();\n        $name = $DataIn[0];\n        $IN = $DataIn[1];\n        $OUT = $DataIn[2];\n        opendir(DIR,\"$OUT\") || die \"$OUT directory does not exist $!\\n\";\n\n        #... loop of proprietary code\n            #...\n            @Completed = $db1-&gt;Data();\n            #...\n\n            &amp;formatExcelReport  #The code that I previously posted\n\n            #...\n            # more proprietary code\n        # end of loop\n\n    } #end of while\n}#end of if\n</code></pre>\n\n<p>The code I originally posted:</p>\n\n<pre><code># Initialize Excel object\neval {Win32::OLE-&gt;new('Excel.Application', 'Quit')};\neval {$Excel = Win32::OLE-&gt;GetActiveObject('Excel.Application')};\nunless (defined $Excel)\n{\n    $Excel = Win32::OLE-&gt;GetActiveObject('Excel.Application')\n             || Win32::OLE-&gt;new('Excel.Application', 'Quit');\n}\n$infiles = \"Report_Template.xls\";\n$infiles = $OUT.\"/\".$infiles;\n$db6-&gt;Sql(\"EXEC FormatResults '\".$Completed[0].\"','\".$Completed[1].\"'\");\n$row = 2;\n$fileName = $Completed[0].\"_\".$Completed[1];\n$uniquefile = $fileName.$printdate.\".xls\";\n\n# $OUT is a fully defined path on the E: drive\n$reportfile = \"$OUT\".\"\\\\\".$uniquefile;\ncopy($infiles,$reportfile);\n$Book = $Excel-&gt;Workbooks-&gt;Open(\"$reportfile\");\n$sheetnum = 1;\nmy $Sheet = $Book-&gt;Worksheets($sheetnum);\n\n# Set Headers\n$Header = $Sheet-&gt;PageSetup-&gt;{'CenterHeader'};\n$Header = $Header.\" Results Test Code: \".$Completed[0].\" Worksheet: \".$Completed[1].\" Date: \".$headerdate;\n$Sheet-&gt;PageSetup-&gt;{'CenterHeader'}= $Header;\n\n# More file editing\n# ...\n\n$Book-&gt;Save();\n$Book-&gt;Close(0);\nWin32::OLE-&gt;new('Excel.Application', 'Quit');\n</code></pre>\n\n<p>Is the root of this problem the Save() command?  Should I be using SaveAs() instead?</p>\n\n<p>Any other feedback about how Excel is being used welcome, as well.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl", "elasticsearch"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1465927938, "post_id": 37817146, "comment_id": 63102720, "body": "Is it possible to create a <a href=\"http://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a> ?"}, {"owner": {"reputation": 873, "user_id": 508427, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3zmlJ.jpg?s=128&g=1", "display_name": "Recct", "link": "https://stackoverflow.com/users/508427/recct"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1465937647, "post_id": 37817146, "comment_id": 63107589, "body": "A wordy hypothetical example added."}], "answers": [{"tags": [], "owner": {"reputation": 873, "user_id": 508427, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3zmlJ.jpg?s=128&g=1", "display_name": "Recct", "link": "https://stackoverflow.com/users/508427/recct"}, "is_accepted": true, "score": 4, "last_activity_date": 1465995819, "last_edit_date": 1465995819, "creation_date": 1465988221, "answer_id": 37833479, "question_id": 37817146, "link": "https://stackoverflow.com/questions/37817146/elastic-search-use-filter-and-should-bool-query/37833479#37833479", "title": "Elastic Search: use filter and should bool query", "body": "<p>Following common sense I found that the following does what I want for the <code>bool</code> segment:</p>\n\n<pre><code>bool =&gt; { \n            must =&gt; [\n                {match =&gt; { pcode =&gt; $postcode }},\n            ],\n            should =&gt; [\n                {match =&gt; { address =&gt; $keyword }},\n                {match =&gt; { name =&gt; $keyword }},\n            ],\n                minimum_should_match =&gt; 1,\n        }\n</code></pre>\n\n<p>Having <code>minimum_should_match</code> as 1 (which is a counter rather than true/false), feels like it's inserting an <code>OR</code> in those <code>should</code>s </p>\n"}, {"tags": [], "owner": {"reputation": 874, "user_id": 6102494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7be314ad7c9e14621a8bb3d0ff87fc?s=128&d=identicon&r=PG&f=1", "display_name": "israelst", "link": "https://stackoverflow.com/users/6102494/israelst"}, "is_accepted": false, "score": 2, "last_activity_date": 1465989546, "creation_date": 1465989546, "answer_id": 37833956, "question_id": 37817146, "link": "https://stackoverflow.com/questions/37817146/elastic-search-use-filter-and-should-bool-query/37833956#37833956", "title": "Elastic Search: use filter and should bool query", "body": "<p>Elastic doc says:</p>\n\n<blockquote>\n  <p>\"<strong>By default, none of the should clauses are required to match</strong>, with one exception: if there are no <em>must</em> clauses, then at least one should clause must match. Just as we can control the precision of the match query, we can control how many should clauses need to match by using the <code>minimum_should_match</code> parameter, either as an absolute number or as a percentage\"</p>\n</blockquote>\n\n<p>So the way to do it is through <code>minimum_should_match</code>. Just as you did. What you did means that either <em>address</em> or <em>name</em> must be matched.</p>\n"}], "owner": {"reputation": 873, "user_id": 508427, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3zmlJ.jpg?s=128&g=1", "display_name": "Recct", "link": "https://stackoverflow.com/users/508427/recct"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1326, "favorite_count": 3, "accepted_answer_id": 37833479, "answer_count": 2, "score": 9, "last_activity_date": 1465995819, "creation_date": 1465920568, "last_edit_date": 1465942578, "question_id": 37817146, "link": "https://stackoverflow.com/questions/37817146/elastic-search-use-filter-and-should-bool-query", "title": "Elastic Search: use filter and should bool query", "body": "<p>I want to use elastic search to search through a large address database, and to make it like some other applications I start with the postcode first which is great to narrow down on the rest of the search query. </p>\n\n<p>So with <a href=\"https://metacpan.org/pod/Search::Elasticsearch::Scroll\" rel=\"noreferrer\">Search::Elasticsearch</a></p>\n\n<p>I do</p>\n\n<pre><code>my $scroll = $e-&gt;scroll_helper(index =&gt; 'pdb', search_type =&gt; 'scan', size =&gt; 100,\n    body =&gt; {\n        query =&gt; {\n            bool =&gt; { \n                filter =&gt; [\n                    {match =&gt; { pcode =&gt; $postcode }},\n                ],\n                should =&gt; [\n                    {match =&gt; { address =&gt; $keyword }},\n                    {match =&gt; { name =&gt; $keyword }},\n                ],\n            }\n        }\n    }\n);\n</code></pre>\n\n<p>However that just spits out everything for <code>$postcode</code> and regardless of what <code>$keyword</code> is the result set is not further reduced.</p>\n\n<p>I need to have <code>$postcode</code> as a mandatory condition but also separately and in addition the other two fields to also be taken into account as a full text search. \nHow should I do this (Im looking at the docs and might be interpreting json->perl hashrefs wrong so any suggestions welcome)</p>\n\n<p>For a hypothetical example:\nUser enters <code>NW1 4AQ</code>,  The above query will immediately return, say, Albany Street and Portland Street, if the user queries <code>Portland</code> <em>and</em> that postcode, instead of getting both those results, I expect only Portland Street to be the result. Right now with the above It just keeps returning both entries.</p>\n"}, {"tags": ["perl", "eval", "lwp"], "comments": [{"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 2, "creation_date": 1465920827, "post_id": 37817109, "comment_id": 63098645, "body": "&quot;some system updates&quot; - Care to elucidate?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1465921440, "post_id": 37817109, "comment_id": 63099013, "body": "If you&#39;re using <a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow noreferrer\">LWP::UserAgent</a> then it&#39;s probably best to set <code>$ua-&gt;timeout(5)</code> rather than using  <a href=\"http://perldoc.perl.org/functions/alarm.html\" rel=\"nofollow noreferrer\"><code>alarm</code></a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465921773, "post_id": 37817109, "comment_id": 63099198, "body": "<i>&quot;This has worked for years, but after doing some system updates, all of a sudden it quit working&quot;</i> I think @Amias will be interested in this"}, {"owner": {"reputation": 573, "user_id": 656780, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/9a44da833e35ca617e406fe3989dfa37?s=128&d=identicon&r=PG", "display_name": "Timothy R. Butler", "link": "https://stackoverflow.com/users/656780/timothy-r-butler"}, "reply_to_user": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 0, "creation_date": 1465922040, "post_id": 37817109, "comment_id": 63099346, "body": "@tjd I did a relatively significant number of updates using yum and also cPanel/WHM (it is a web hosting environment). Unfortunately, I don&#39;t have a list of everything that was updated."}, {"owner": {"reputation": 573, "user_id": 656780, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/9a44da833e35ca617e406fe3989dfa37?s=128&d=identicon&r=PG", "display_name": "Timothy R. Butler", "link": "https://stackoverflow.com/users/656780/timothy-r-butler"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465922146, "post_id": 37817109, "comment_id": 63099408, "body": "@Borodin, I can&#39;t remember my reasoning for using alarm when I first wrote this. Perhaps I should explore that again."}], "answers": [{"comments": [{"owner": {"reputation": 573, "user_id": 656780, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/9a44da833e35ca617e406fe3989dfa37?s=128&d=identicon&r=PG", "display_name": "Timothy R. Butler", "link": "https://stackoverflow.com/users/656780/timothy-r-butler"}, "edited": false, "score": 0, "creation_date": 1465922089, "post_id": 37817494, "comment_id": 63099373, "body": "That worked -- the program sprang back to life! Thank you, @zdim! Any idea why it never would have caused a problem until now?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 573, "user_id": 656780, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/9a44da833e35ca617e406fe3989dfa37?s=128&d=identicon&r=PG", "display_name": "Timothy R. Butler", "link": "https://stackoverflow.com/users/656780/timothy-r-butler"}, "edited": false, "score": 0, "creation_date": 1465922149, "post_id": 37817494, "comment_id": 63099412, "body": "@TimothyR.Butler  I&#39;m scratching my head about that right now ... Just what did you have there until now? Or -- did the code inside <code>eval</code> change? One shouldn&#39;t use multiple alarms at the same time, nor any other calls implemented via them (like sleep)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 573, "user_id": 656780, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/9a44da833e35ca617e406fe3989dfa37?s=128&d=identicon&r=PG", "display_name": "Timothy R. Butler", "link": "https://stackoverflow.com/users/656780/timothy-r-butler"}, "edited": false, "score": 0, "creation_date": 1465922960, "post_id": 37817494, "comment_id": 63099893, "body": "@TimothyR.Butler  The best I can think of is that packages used inside <code>eval</code> changed their behavior due to updates. They may have had their own timers which canceled your alarm, and now they don&#39;t."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 7, "last_activity_date": 1497424894, "last_edit_date": 1497424894, "creation_date": 1465921726, "answer_id": 37817494, "question_id": 37817109, "link": "https://stackoverflow.com/questions/37817109/alarm-escaping-perl-eval-block/37817494#37817494", "title": "alarm Escaping Perl &#39;eval&#39; block", "body": "<p>The default for SIGALRM is to terminate the program, so you need to handle it.  A common way is to issue a <code>die</code> when SIGALRM is caught, turning it into an exception, which is <code>eval</code>-ed.</p>\n\n<pre><code>eval {\n    local $SIG{ALRM} = sub { die \"Timed out\" };\n    alarm(5);\n    my $res = $ua-&gt;request($req);\n    $status = $res-&gt;is_success;\n    $rawContent = $res-&gt;content;    \n    $httpCode = $res-&gt;code;\n    alarm(0);       \n};\nif ($@ and $@ !~ /Timed out/) { die }  # re-raise if it is other error\n</code></pre>\n\n<p>From <a href=\"http://perldoc.perl.org/perlipc.html#Signals\" rel=\"nofollow noreferrer\">Signals in <code>perlipc</code></a></p>\n\n<blockquote>\n  <p>Signal handling is also used for timeouts in Unix,   While safely protected within an <code>eval{}</code> block, you set a signal handler to trap alarm signals and then schedule to have one delivered to you in some number of seconds.  Then try your blocking operation, clearing the alarm when it\u2019s done but not before you\u2019ve exited your <code>eval{}</code> block.  If it goes off, you\u2019ll use die() to jump out of the block, much as you might using longjmp() or throw() in other languages.</p>\n</blockquote>\n\n<hr>\n\n<p>As for how it ever worked, the one thing I can think of is that packages used inside <code>eval</code> had their own timers, based on <code>alarm</code>, thus canceling your <code>alarm</code>. From <a href=\"http://perldoc.perl.org/functions/alarm.html\" rel=\"nofollow noreferrer\"><code>alarm</code></a></p>\n\n<blockquote>\n  <p>Only one timer may be counting at once.  Each call disables the previous timer, and an argument of 0 may be supplied to cancel the previous timer without starting a new one.</p>\n</blockquote>\n\n<p>They may have thrown exceptions when timing out and you had the expected behavior. This package behavior changed in the update and now your alarm works and needs handling.  This is a guess, of course.</p>\n"}], "owner": {"reputation": 573, "user_id": 656780, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/9a44da833e35ca617e406fe3989dfa37?s=128&d=identicon&r=PG", "display_name": "Timothy R. Butler", "link": "https://stackoverflow.com/users/656780/timothy-r-butler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 2, "accepted_answer_id": 37817494, "answer_count": 1, "score": 1, "last_activity_date": 1559499899, "creation_date": 1465920469, "last_edit_date": 1559499899, "question_id": 37817109, "link": "https://stackoverflow.com/questions/37817109/alarm-escaping-perl-eval-block", "title": "alarm Escaping Perl &#39;eval&#39; block", "body": "<p>I have a Perl script that automatically downloads content from various sources. It does the downloading in an <code>eval</code> block with an <code>alarm</code> so that the attempt will time out if it takes too long:</p>\n\n<pre><code>eval {\n    alarm(5);\n    my $res = $ua-&gt;request($req);\n    $status = $res-&gt;is_success;\n    $rawContent = $res-&gt;content;    \n    $httpCode = $res-&gt;code;\n    alarm(0);       \n};\n</code></pre>\n\n<p>This has worked for years, but after doing some system updates, all of a sudden it quit working. Instead, the first source it hits that times out, I get the following error and the program terminates:</p>\n\n<pre><code> Alarm clock\n</code></pre>\n\n<p>What am I doing incorrectly that is preventing <code>eval</code> from catching the alarm all of a sudden? </p>\n"}, {"tags": ["perl", "twitter"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1465918066, "post_id": 37815134, "comment_id": 63096758, "body": "The documentation seems confused. Only <code>text</code> is listed as required, but it also says &quot;Requires both the user and text parameters&quot;."}, {"owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 1, "creation_date": 1465921861, "post_id": 37815134, "comment_id": 63099250, "body": "Looking at the tests, maybe you need to pass it a hashref? <code>new_direct_message({ user =&gt; $uuser, text =&gt; $message_ack})</code>"}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 4937322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WfaMU.jpg?s=128&g=1", "display_name": "lordslair", "link": "https://stackoverflow.com/users/4937322/lordslair"}, "is_accepted": false, "score": 1, "last_activity_date": 1601208825, "last_edit_date": 1601208825, "creation_date": 1465979097, "answer_id": 37829935, "question_id": 37815134, "link": "https://stackoverflow.com/questions/37815134/how-to-use-new-direct-message-with-nettwitterlite/37829935#37829935", "title": "How to use new_direct_message with Net::Twitter::Lite", "body": "<p>I just figured it out with toolic comment.\nSo, there's the answer if someone ever have the same mistake :</p>\n<p>Don't use</p>\n<pre><code>$twitter-&gt;new_direct_message($user, $message_ack);\n</code></pre>\n<p>but</p>\n<pre><code>$twitter-&gt;new_direct_message({ user =&gt; $user, text =&gt; $message_ack });\n</code></pre>\n<p>It looks like you have to pass a hashref, but I couldn't clearly see that hint in the doc.</p>\n"}], "owner": {"reputation": 51, "user_id": 4937322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WfaMU.jpg?s=128&g=1", "display_name": "lordslair", "link": "https://stackoverflow.com/users/4937322/lordslair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1601208825, "creation_date": 1465915171, "last_edit_date": 1465915471, "question_id": 37815134, "link": "https://stackoverflow.com/questions/37815134/how-to-use-new-direct-message-with-nettwitterlite", "title": "How to use new_direct_message with Net::Twitter::Lite", "body": "<p>I'm trying to use in a script some DM functionalities and request.\nMy goal is on an event, sending a DM to a chosen follower.</p>\n\n<p>For now, my working code is like this:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Net::Twitter::Lite::WithAPIv1_1;\n\nmy $twitter = Net::Twitter::Lite::WithAPIv1_1-&gt;new(\n    access_token_secret =&gt; 'XXX',\n    consumer_secret     =&gt; 'XXX',\n    access_token        =&gt; 'XXX',\n    consumer_key        =&gt; 'XXX',\n    user_agent          =&gt; 'Myself',\n    ssl =&gt; 1,\n);\n\nmy $user        = 'myself';\nmy $message_ack = \"Hasta la vista, baby\";\nprint \"[sending: '$message_ack' to '$user'\\n\";\n\nmy $ack         = $twitter-&gt;new_direct_message($user, $message_ack);\n</code></pre>\n\n<p>I have the following return:</p>\n\n<pre><code># perl test.pl\n[sending: 'Hasta la vista, baby' to 'myself'\nnew_direct_message expected 1 args at test.pl line 21.\n</code></pre>\n\n<p>I don't get is as the CPAN doc states that the 2 parameters given are required:</p>\n\n<blockquote>\n  <p>new_direct_message(user, text)</p>\n  \n  <p>Parameters: user, text, screen_name, user_id, include_entities</p>\n  \n  <p>Required: user, text</p>\n  \n  <p>Sends a new direct message to the specified user from the\n  authenticating user. Requires both the user and text parameters. \n  Returns the sent message when successful. In order to support numeric\n  screen names, the screen_name or user_id parameters may be used\n  instead of user.</p>\n  \n  <p>Returns: DirectMessage</p>\n</blockquote>\n\n<p>Any hints on this one?</p>\n\n<p>I've tried to google a bit on this, and I've found nothing really helpful. On some examples, they use the exact same thing as me (here for example: <a href=\"http://www.sevagas.com/Real-time-system-alerts-using-Twitter-OAuth-implementation\" rel=\"nofollow\">http://www.sevagas.com/Real-time-system-alerts-using-Twitter-OAuth-implementation</a> on line 85)</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 5296508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a3662aad9147ac884c90e9987d93a06?s=128&d=identicon&r=PG&f=1", "display_name": "Kajal_T", "link": "https://stackoverflow.com/users/5296508/kajal-t"}, "edited": false, "score": 1, "creation_date": 1465897665, "post_id": 37808412, "comment_id": 63081205, "body": "Thank you so much.. It works :) Can you also let me know how do I write an array to any file.  Will Print FILEPOINTER(@ArrayName) will work?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 65, "user_id": 5296508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a3662aad9147ac884c90e9987d93a06?s=128&d=identicon&r=PG&f=1", "display_name": "Kajal_T", "link": "https://stackoverflow.com/users/5296508/kajal-t"}, "edited": false, "score": 2, "creation_date": 1465897837, "post_id": 37808412, "comment_id": 63081327, "body": "To ask a new question, ask a new question. &quot;Thank you&quot; - upvote/accept the answer."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465903533, "post_id": 37808412, "comment_id": 63085400, "body": "Or, using <code>tr&#47;&#47;&#47;</code>, you can write <code>$element =~ tr&#47;+=&#47; &#47;</code>"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 7, "last_activity_date": 1465913792, "last_edit_date": 1465913792, "creation_date": 1465897307, "answer_id": 37808412, "question_id": 37808235, "link": "https://stackoverflow.com/questions/37808235/quantifier-follows-nothing-in-regex-replacing-and/37808412#37808412", "title": "&quot;Quantifier follows nothing in regex&quot; replacing + and =", "body": "<p><code>+</code> has a special meaning in regexes: it's a quantifier meaning \"1 or more\". To use <code>+</code> literally, backslash it.</p>\n\n<pre><code>$element =~ s/\\+/ /g;\n</code></pre>\n\n<p>But, if you want to replace both <code>+</code> and <code>=</code>, you can add them to a character class, where <code>+</code> loses its special meaning:</p>\n\n<pre><code>$element =~ s/[+=]/ /g;\n</code></pre>\n\n<p>Note that <code>tr</code> is faster.</p>\n\n<pre><code>$element =~ tr/+=/ /;\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 5296508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a3662aad9147ac884c90e9987d93a06?s=128&d=identicon&r=PG&f=1", "display_name": "Kajal_T", "link": "https://stackoverflow.com/users/5296508/kajal-t"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1094, "favorite_count": 0, "closed_date": 1536526759, "accepted_answer_id": 37808412, "answer_count": 1, "score": -2, "last_activity_date": 1465913792, "creation_date": 1465896918, "last_edit_date": 1465903277, "question_id": 37808235, "link": "https://stackoverflow.com/questions/37808235/quantifier-follows-nothing-in-regex-replacing-and", "closed_reason": "Duplicate", "title": "&quot;Quantifier follows nothing in regex&quot; replacing + and =", "body": "<p>I have written this line to replace <code>+</code> and <code>=</code> with space. But it returns an error stating</p>\n\n<blockquote>\n  <p>Quantifier follows nothing in regex</p>\n</blockquote>\n\n<pre><code>$element= ~ s/+/ /g;\n$element= ~ s/=/ /g;\n</code></pre>\n\n<p>Is this correct? How do I combine both conditions in one?</p>\n"}, {"tags": ["perl", "registry"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1465893348, "post_id": 37806824, "comment_id": 63078247, "body": "<i>Win 2012</i> is <i>Windows Server 2012</i>? You should <a href=\"https://stackoverflow.com/posts/37806824/edit\">edit</a> your question and say so."}, {"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 1, "creation_date": 1465912861, "post_id": 37806824, "comment_id": 63092496, "body": "&quot;do not work&quot;: Care to include an error message or describe how it&#39;s behavior differs from your expectations?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1465914393, "post_id": 37806824, "comment_id": 63093702, "body": "Start by checking what error you get!!!"}, {"owner": {"reputation": 1, "user_id": 6460267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b1e277495275c200ff532f0fa35fb9?s=128&d=identicon&r=PG&f=1", "display_name": "GSteng", "link": "https://stackoverflow.com/users/6460267/gsteng"}, "edited": false, "score": 0, "creation_date": 1465916044, "post_id": 37806824, "comment_id": 63095049, "body": "We do not get any error. &quot;Do not work&quot; mean,.... do not print anytingh, I have added one example above"}, {"owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "edited": false, "score": 0, "creation_date": 1465926836, "post_id": 37806824, "comment_id": 63102115, "body": "What Perl distro are you using?  Strawberry, ActiveState, DWIM......"}, {"owner": {"reputation": 1, "user_id": 6460267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b1e277495275c200ff532f0fa35fb9?s=128&d=identicon&r=PG&f=1", "display_name": "GSteng", "link": "https://stackoverflow.com/users/6460267/gsteng"}, "edited": false, "score": 0, "creation_date": 1465976519, "post_id": 37806824, "comment_id": 63120307, "body": "we use ActivePerl, v5.8.7 built for MSWin32-x86-multi-thread &amp;  v5.8.9 built for MSWin32-x64-multi-thread"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6460267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b1e277495275c200ff532f0fa35fb9?s=128&d=identicon&r=PG&f=1", "display_name": "GSteng", "link": "https://stackoverflow.com/users/6460267/gsteng"}, "is_accepted": false, "score": 0, "last_activity_date": 1466167112, "creation_date": 1466167112, "answer_id": 37881806, "question_id": 37806824, "link": "https://stackoverflow.com/questions/37806824/win32tieregistry-ws-64-bit-on-windows-7-8-10/37881806#37881806", "title": "Win32::TieRegistry ws 64 bit on Windows 7 8 10", "body": "<p>Using more recent version of ActiveState perl the problem do not happen.</p>\n\n<p>ciao\nGIovanni</p>\n"}], "owner": {"reputation": 1, "user_id": 6460267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b1e277495275c200ff532f0fa35fb9?s=128&d=identicon&r=PG&f=1", "display_name": "GSteng", "link": "https://stackoverflow.com/users/6460267/gsteng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 490, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466167112, "creation_date": 1465893081, "last_edit_date": 1465915956, "question_id": 37806824, "link": "https://stackoverflow.com/questions/37806824/win32tieregistry-ws-64-bit-on-windows-7-8-10", "title": "Win32::TieRegistry ws 64 bit on Windows 7 8 10", "body": "<p>We have one perl script that write one file based on the Windows registry contents. \nThe script need to be executed for the 32 and 64 registry hive.</p>\n\n<p>Using this command \"C:\\stdperl\\bin\\perl.exe scriptname.pl\" we process the 32 bit registry hive,\nusing this command \"C:\\stdperl64\\bin\\perl.exe scriptname.pl\" we process the 64 bit registry hive.</p>\n\n<p>We have : \n- This is perl, v5.8.7 built for MSWin32-x86-multi-thread\n- This is perl, v5.8.9 built for MSWin32-x64-multi-thread</p>\n\n<p>The restricted test case is : </p>\n\n<pre><code>use strict;\nuse warnings;\nuse Win32::TieRegistry( ArrayValues=&gt;0, Delimiter=&gt;\"/\" );\nuse Config;\n\nmy ($chiave, $regKey, $key)=\"\";\n\n$chiave='HKEY_LOCAL_MACHINE/SOFTWARE/ODBC/ODBCINST.INI';\n\n$regKey = $Registry-&gt;Open($chiave, {Access=&gt; 0x20019}); \nforeach $key (keys %$regKey){\n    print\"$key: \" . $regKey-&gt;{\"$key\"} . \"\\n\";\n};\n</code></pre>\n\n<p>The above code do not work when executed with perl 64 bit on Windows 7/8/10.\nInstead work fine when executed with perl 32 bit on all Windows version and work fine on 64 system with Windows server 2012, Windows 2003 Windows 2008.</p>\n\n<p>Why?!</p>\n\n<p>The script is very complex and old, undocumented and is the kind of script that nobody want to \"touch\" or \"rewrite\" so any ligth will appreciated a lot.</p>\n\n<p>We do not get any error.</p>\n\n<p>Simply when we run the script using 32 bit perl we get the following:</p>\n\n<pre><code>C:\\&gt;x:\\stdperl\\bin\\perl 160609_t05.pl\nAster ODBC Driver/: Win32::TieRegistry=HASH(0x53b61a4)\nMicrosoft Access Driver (*.mdb)/: Win32::TieRegistry=HASH(0x53b61ec)\n...\nomissis\n....\nOracle in OraClient12c_32/: Win32::TieRegistry=HASH(0x53b627c)\nSQLite3 ODBC Driver/: Win32::TieRegistry=HASH(0x53b621c)\n</code></pre>\n\n<p>When I run the script using the 64 bit perl I do not get any entry.</p>\n\n<pre><code>C:\\&gt;x:\\stdperl64\\bin\\perl 160609_t05.pl\n\nC:\\&gt;\n</code></pre>\n\n<p>Under HKEY_LOCAL_MACHINE/SOFTWARE/ODBC/ODBCINST.INI registry there are ODBC drivers specification and there are entry on 32 and 64 hive registry.</p>\n"}, {"tags": ["perl", "file-io", "tk"], "answers": [{"tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 2, "last_activity_date": 1465857097, "creation_date": 1465857097, "answer_id": 37800170, "question_id": 37798949, "link": "https://stackoverflow.com/questions/37798949/print-to-file-using-perl-tk/37800170#37800170", "title": "Print to file using Perl Tk", "body": "<pre><code>my $chk8 = $check_frame-&gt;Checkbutton(\n    -text =&gt; '23-Letters',\n    -variable =&gt; \\$check8,\n    -onvalue =&gt; 'ADDED',\n    -offvalue =&gt; 'NOT CHECKED')-&gt;pack(),\n    -command =&gt; print OUTFILE \"$job8\\n\";\n</code></pre>\n\n<p>The <code>-command</code> part of this call needs to be within the parentheses on <code>Checkbutton(\u2026)</code>. (As written, it's a completely separate statement.)</p>\n\n<p>Additionally, you will need to surround the command in a <code>sub { \u2026 }</code> to pass it as a coderef, rather than executing it immediately and passing the result.</p>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1465899520, "last_edit_date": 1495541760, "creation_date": 1465858021, "answer_id": 37800336, "question_id": 37798949, "link": "https://stackoverflow.com/questions/37798949/print-to-file-using-perl-tk/37800336#37800336", "title": "Print to file using Perl Tk", "body": "<p>The main problem seems to be the misplacement of the closing parenthesis and not wrapping the <code>print</code> statement in a <code>sub {}</code> as explained by <a href=\"https://stackoverflow.com/a/37800170/2173773\">@duskwuff</a>. In addition, you could make your code more managable by <a href=\"https://en.wikipedia.org/wiki/Don%27t_repeat_yourself\" rel=\"nofollow noreferrer\">not repeating yourself</a> and using arrays for the checkbuttons and their names. For example: </p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Tk;\n\nmy $mw = MainWindow-&gt;new;\n$mw-&gt;geometry(\"300x500\");\n$mw-&gt;title(\"Unforecasted Jobs\");\n\nmy $check_frame = $mw-&gt;Frame()-&gt;pack(-side =&gt; \"top\");\n$check_frame-&gt;Label( -text =&gt; \"Jobs That Do Not Forecast\" )\n   -&gt;pack(-side =&gt;  \"top\");\n\nmy @cb_info = (\n    ['18L', '18-Letters'],\n    ['07O', '07-Orders'],\n    ['36L', '36-Letters'],\n    ['38L', '38-Letters'],\n    ['11O', '11-Orders'],\n    ['99L', '99-Letters'],\n    ['21L', '21-Letters'],\n    ['23L', '23-Letters'],\n    ['OOO', 'Return to LNI'],\n    ['EOSSS235', 'EOSSS235'],\n    ['M4020235 20', 'M4020235'],\n    ['PRTAR235', 'PRTAR235'],\n    ['WR115235', ['WR115235','WR415235']],\n    ['X01RA235', 'X01RA235'],\n    ['X1514235 15', 'X1514235'],\n    ['X4020235', 'X4020235']\n);\n\nmy @check_buttons;\nmy @msg_info;\nfor my $item (@cb_info) {\n    my ( $job, $info )  = @$item;\n    my $print_string = $info;\n    push @check_buttons, 'NOT CHECKED';\n    my $cb = \\$check_buttons[-1];\n    my $text = $info;\n    if ( ref $info eq \"ARRAY\" ) {\n        $print_string = $info-&gt;[0] . \"\\n\" . $info-&gt;[1];\n        push @msg_info, [$info-&gt;[0], $cb];\n        push @msg_info, [$info-&gt;[1], $cb];\n        $text = $info-&gt;[0];\n    }\n    else {\n        push @msg_info, [$info, $cb];\n    }\n    my $chk = $check_frame-&gt;Checkbutton(\n        -text =&gt; $text,\n        -variable =&gt; $cb,\n        -onvalue =&gt; 'ADDED',\n        -offvalue =&gt; 'NOT CHECKED',\n        -command =&gt; sub { print STDOUT \"$print_string\\n\"},\n    )-&gt;pack;\n}\n\nmy $button_frame = $mw-&gt;Frame()-&gt;pack(-side =&gt; \"bottom\");\nmy $ok_button = $button_frame-&gt;Button(\n   -text =&gt; 'OK',\n   -command =&gt; \\&amp;check_sub\n)-&gt;pack(-side =&gt; \"left\");\nmy $exit_button = $button_frame-&gt;Button(\n    -text =&gt; 'Exit',\n    -command =&gt; sub{$mw-&gt;destroy}\n)-&gt;pack(-side =&gt; \"right\");\n\nsub check_sub {\n    my $check_msg;\n    my $newline = '';\n    for my $item (@msg_info) {\n        $check_msg .= $newline . $item-&gt;[0] . \": \" . ${ $item-&gt;[1] };\n        $newline = \"\\n\";\n    }\n    $mw-&gt;messageBox(\n        -message =&gt; \"Check Button Summary:\\n$check_msg\", \n        -type =&gt; \"ok\"\n    );\n}\n\nMainLoop;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6461598, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CcXpXrtuNWQ/AAAAAAAAAAI/AAAAAAAAABo/Nfe86C8IZtg/photo.jpg?sz=128", "display_name": "Jason Johnson", "link": "https://stackoverflow.com/users/6461598/jason-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1465899644, "creation_date": 1465851302, "last_edit_date": 1465899644, "question_id": 37798949, "link": "https://stackoverflow.com/questions/37798949/print-to-file-using-perl-tk", "title": "Print to file using Perl Tk", "body": "<p>I've solved most of the issues with my code, but now everything in my list box gets printed to a file regardless of whether it is checked or not.  Not sure why.  Any help is appreciated.  I had this working before, but not sure what I did to change it.  I'd like for when an item is checked and you click OK, then Exit, that only the items that are checked get copied over to the file.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Tk;\nopen(INFILE,\"d1528235.txt\") or die \"could not open file for reading!\\n\";\nopen(OUTFILE, '&gt;forecast.txt') or die \"Cannot open forecast.txt: $!\";\n\n\nwhile(&lt;INFILE&gt;){\n  if (m/^\\s*$/) { next; }\n  chomp $_;\n  my @fields = split(/\\  /,$_);\n  my @output;\n  foreach my $field(@fields){\n    if($field =~ /^\\*?[ABMQRWY][A-Z0-9]{4}235 / ){\n      push @output,$field;\n\n  }\n\n\n     }\n\n  if (@output) {\n    my $line = join('',@output);\n    print \"$line\\n\";\n    print OUTFILE \"$line\\n\";\n  }\n}\n\nmy $mw = MainWindow-&gt;new;\n$mw-&gt;geometry(\"300x500\");\n$mw-&gt;title(\"Unforecasted Jobs\");\n\nmy $check1 = 'NOT CHECKED';\nmy $check2 = 'NOT CHECKED';\nmy $check3 = 'NOT CHECKED';\nmy $check4 = 'NOT CHECKED';\nmy $check5 = 'NOT CHECKED';\nmy $check6 = 'NOT CHECKED';\nmy $check7 = 'NOT CHECKED';\nmy $check8 = 'NOT CHECKED';\nmy $check9 = 'NOT CHECKED';\nmy $check10 = 'NOT CHECKED';\nmy $check11 = 'NOT CHECKED';\nmy $check12 = 'NOT CHECKED';\nmy $check13 = 'NOT CHECKED';\nmy $check14 = 'NOT CHECKED';\nmy $check15 = 'NOT CHECKED';\nmy $check16 = 'NOT CHECKED';\n\nmy $check_frame = $mw-&gt;Frame()-&gt;pack(-side =&gt; \"top\");\n$check_frame-&gt;Label(-text=&gt;\"Jobs That Do Not Forecast\")-&gt;pack(-side =&gt;  \"top\")-&gt;pack();\nmy $job = \"18L\";\nmy $chk1 = $check_frame-&gt;Checkbutton(-text =&gt; '18-Letters',\n                                 -variable =&gt; \\$check1,\n                                 -onvalue =&gt; 'ADDED',\n                                 -offvalue =&gt; 'NOT CHECKED')-&gt;pack(),\n                                 -command =&gt; print OUTFILE \"$job\\n\";\n\nmy $job2 = \"07O\";\nmy $chk2 = $check_frame-&gt;Checkbutton(-text =&gt; '07-Orders',\n                                 -variable =&gt; \\$check2,\n                                 -onvalue =&gt; 'ADDED',\n                                 -offvalue =&gt; 'NOT CHECKED')-&gt;pack(),\n                                 -command =&gt; print OUTFILE \"$job2\\n\";\n\nmy $job3 = \"36L\";\nmy $chk3 = $check_frame-&gt;Checkbutton(-text =&gt; '36-Letters',\n                                 -variable =&gt; \\$check3,\n                                 -onvalue =&gt; 'ADDED',\n                                 -offvalue =&gt; 'NOT CHECKED')-&gt;pack();\n                                 -command =&gt; print OUTFILE \"$job3\\n\";\n\nmy $job4 = \"38L\";\nmy $chk4 = $check_frame-&gt;Checkbutton(-text =&gt; '38-Letters',\n                                 -variable =&gt; \\$check4,\n                                 -onvalue =&gt; 'ADDED',\n                                 -offvalue =&gt; 'NOT CHECKED')-&gt;pack(),\n                                 -command =&gt; print OUTFILE \"$job4\\n\";\n\nmy $job5 = \"11O\";\nmy $chk5 = $check_frame-&gt;Checkbutton(-text =&gt; '11-Orders',\n                                 -variable =&gt; \\$check5,\n                                 -onvalue =&gt; 'ADDED',\n                                 -offvalue =&gt; 'NOT CHECKED')-&gt;pack(),\n                                 -command =&gt; print OUTFILE \"$job5\\n\";\n\nmy $job6 = \"99L\";\nmy $chk6 = $check_frame-&gt;Checkbutton(-text =&gt; '99-Letters',\n                                 -variable =&gt; \\$check6,\n                                 -onvalue =&gt; 'ADDED',\n                                 -offvalue =&gt; 'NOT CHECKED')-&gt;pack();\n                                 -command =&gt; print OUTFILE \"$job6\\n\";\n\nmy $job7 = \"21L\";\nmy $chk7 = $check_frame-&gt;Checkbutton(-text =&gt; '21-Letters',\n                                 -variable =&gt; \\$check7,\n                                 -onvalue =&gt; 'ADDED',\n                                 -offvalue =&gt; 'NOT CHECKED')-&gt;pack(),\n                                 -command =&gt; print OUTFILE \"$job7\\n\";\n\nmy $job8 = \"23L\";\nmy $chk8 = $check_frame-&gt;Checkbutton(-text =&gt; '23-Letters',\n                                 -variable =&gt; \\$check8,\n                                 -onvalue =&gt; 'ADDED',\n                                 -offvalue =&gt; 'NOT CHECKED')-&gt;pack(),\n                                 -command =&gt; print OUTFILE \"$job8\\n\";\n\nmy $job9 = \"OOO\";\nmy $chk9 = $check_frame-&gt;Checkbutton(-text =&gt; 'Return to LNI',\n                                 -variable =&gt; \\$check9,\n                                 -onvalue =&gt; 'ADDED',\n                                 -offvalue =&gt; 'NOT CHECKED')-&gt;pack();\n                                 -command =&gt; print OUTFILE \"$job9\\n\";\n\nmy $job10 = \"EOSSS235\";\nmy $chk10 = $check_frame-&gt;Checkbutton(-text =&gt; 'EOSSS235',\n                                 -variable =&gt; \\$check10,\n                                 -onvalue =&gt; 'ADDED',\n                                 -offvalue =&gt; 'NOT CHECKED')-&gt;pack(),\n                                 -command =&gt; print OUTFILE \"$job10\\n\";\n\nmy $job11 = \"M4020235 20\";\nmy $chk11 = $check_frame-&gt;Checkbutton(-text =&gt; 'M4020235',\n                                 -variable =&gt; \\$check11,\n                                 -onvalue =&gt; 'ADDED',\n                                 -offvalue =&gt; 'NOT CHECKED')-&gt;pack(),\n                                 -command =&gt; print OUTFILE \"$job11\\n\";\n\nmy $job12 = \"PRTAR235\";\nmy $chk12 = $check_frame-&gt;Checkbutton(-text =&gt; 'PRTAR235',\n                                 -variable =&gt; \\$check12,\n                                 -onvalue =&gt; 'ADDED',\n                                 -offvalue =&gt; 'NOT CHECKED')-&gt;pack();\n                                 -command =&gt; print OUTFILE \"$job12\\n\";\n\nmy $job13 = \"WR115235\";\nmy $job13b = \"WR415235\";\nmy $chk13 = $check_frame-&gt;Checkbutton(-text =&gt; 'WR115235',\n                                 -variable =&gt; \\$check13,\n                                 -onvalue =&gt; 'ADDED',\n                                 -offvalue =&gt; 'NOT CHECKED')-&gt;pack(),\n                                 -command =&gt; print OUTFILE \"$job13\\n$job13b\\n\";\n\nmy $job14 = \"X01RA235\";\nmy $chk14 = $check_frame-&gt;Checkbutton(-text =&gt; 'X01RA235',\n                                 -variable =&gt; \\$check14,\n                                 -onvalue =&gt; 'ADDED',\n                                 -offvalue =&gt; 'NOT CHECKED')-&gt;pack(),\n                                 -command =&gt; print OUTFILE \"$job14\\n\";\n\nmy $job15 = \"X1514235 15\";\nmy $chk15 = $check_frame-&gt;Checkbutton(-text =&gt; 'X1514235',\n                                 -variable =&gt; \\$check15,\n                                 -onvalue =&gt; 'ADDED',\n                                 -offvalue =&gt; 'NOT CHECKED')-&gt;pack();\n                                 -command =&gt; print OUTFILE \"$job15\\n\";\n\nmy $job16 = \"X4020235\";\nmy $chk16 = $check_frame-&gt;Checkbutton(-text =&gt; 'X4020235',\n                                 -variable =&gt; \\$check16,\n                                 -onvalue =&gt; 'ADDED',\n                                 -offvalue =&gt; 'NOT CHECKED')-&gt;pack();\n                                 -command =&gt; print OUTFILE \"$job16\\n\";\n\n\nmy $button_frame = $mw-&gt;Frame()-&gt;pack(-side =&gt; \"bottom\");\nmy $ok_button = $button_frame-&gt;Button(-text =&gt; 'OK',\n                                   -command =&gt; \\&amp;check_sub)-&gt;pack(-side =&gt; \"left\");\nmy $exit_button = $button_frame-&gt;Button(-text =&gt; 'Exit',\n                                    -command =&gt; sub{$mw-&gt;destroy})-&gt;pack(-side =&gt; \"right\");\n\nsub check_sub {\n  my $check_msg = \"18-Letters: $check1\\n07-Orders: $check2\\n36-Letters: $check3\\n38-Letters: $check4\\n11-Orders: $check5\\n99-Letters: $check6\\n21-Letters: $check7\\n23-Letters: $check8\\nReturn L&amp;I: $check9\\nEOSSS235: $check10\\nM4020235: $check11\\nPRTAR235: $check12\\nWR115235: $check13\\nWR415235: $check13\\nX01RA235: $check14\\nX1514235: $check15\\nX4020235: $check16\";\n  $mw-&gt;messageBox(-message =&gt; \"Check Button Summary:\\n$check_msg\", -type =&gt; \"ok\");\n}\n\nMainLoop;\n\nmy $var =`crossref.pl`;\n</code></pre>\n"}, {"tags": ["perl", "parameter-passing", "eval"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1465843763, "post_id": 37797053, "comment_id": 63060200, "body": "is it a code reference? does <code>$self-&gt;$sub-&gt;();</code> work?"}, {"owner": {"reputation": 53, "user_id": 2461335, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc3adb904ac4d1f2059022583c089c25?s=128&d=identicon&r=PG", "display_name": "user2461335", "link": "https://stackoverflow.com/users/2461335/user2461335"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1465844474, "post_id": 37797053, "comment_id": 63060563, "body": "Nope, I tried $self-&gt;$sub-&gt;(); and I get the following error:  can&#39;t locate object method &quot;add(a,b)&quot; via package"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1465844498, "post_id": 37797053, "comment_id": 63060579, "body": "You can pass <code>$self</code> around nicely, but the rest of the code is not clear. Does your <code>$subroutine</code> really contains the <i>name</i> of the sub (&quot;<i>add</i>&quot;), and the name itself changes dynamically? Do you <i>really</i> have to do that kind of a thing?  Or is that function a code reference, as stevieb asks?  Is <code>add</code> a method from a class whose object is <code>$self</code>? Is this manipulation inside class methods or outside of class?  It looks like you should post a minimal but <i>complete</i> example."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1465844528, "post_id": 37797053, "comment_id": 63060597, "body": "How is <code>add(a,b)</code> valid Perl code? What are <code>a</code> and <code>b</code>?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465850422, "post_id": 37797053, "comment_id": 63063530, "body": "I&#39;m sorry, but <i>&quot;something like this&quot;</i> won&#39;t do unless we can copy and run it. Do you really have a <code>main</code> method? That&#39;s an identifier usually reserved (because of C practices) for the entry point to the program."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465852772, "post_id": 37797053, "comment_id": 63064530, "body": "@user2461335: You&#39;re joking, right? You&#39;re a troll I hope. This question is bizarre. I&#39;ve written an answer beloe, but it&#39;s based on nonsense"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1465867973, "post_id": 37797053, "comment_id": 63068749, "body": "<code>$subroutine = add(a,b)</code> is not valid. Could you fix this please? The value of <code>$subroutine</code> is a crucial piece to understanding your question, yet what you wrote doesn&#39;t make sense."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1465876427, "post_id": 37797053, "comment_id": 63070500, "body": "Instead of passing the name of the subroutine as &quot;add&quot;, why don&#39;t you use subroutine references instead and just pass that in to your main($arg, \\&amp;add).  Then you can just $subroutine-&gt;()."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1465876517, "post_id": 37797053, "comment_id": 63070522, "body": "<a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlref.html</a>"}, {"owner": {"reputation": 53, "user_id": 2461335, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc3adb904ac4d1f2059022583c089c25?s=128&d=identicon&r=PG", "display_name": "user2461335", "link": "https://stackoverflow.com/users/2461335/user2461335"}, "edited": false, "score": 0, "creation_date": 1465912187, "post_id": 37797053, "comment_id": 63091982, "body": "I have updated the query, hope this is more clear on what I am looking for."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1465934663, "post_id": 37797053, "comment_id": 63106057, "body": "@user2461335 Yes, it is.  I don&#39;t know why you want that, but you need to pass it a <i>method call</i>, then <code>$self</code> will go to it. So <code>my $my_job = &#39;$a-&gt;job(&quot;hello_world&quot;)&#39;; eval $my_job</code>.  I can&#39;t post as an answer since the question is on hold."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1467555031, "last_edit_date": 1467555031, "creation_date": 1465852588, "answer_id": 37799277, "question_id": 37797053, "link": "https://stackoverflow.com/questions/37797053/passing-self-to-a-function-evaluated-by-eval-in-perl/37799277#37799277", "title": "Passing self to a function evaluated by eval in Perl", "body": "<p>I may be giving you too much rope here, and this is the longest program I have ever seen that adds 1 to 2, but anyway ..</p>\n\n<p>You can do whatever you like in an <code>eval</code> as long as it compiles and makes sense. What you have written doesn't make sense, and I'm struggling to imagine what kind of class you're writing, and why it has a <code>main</code> method</p>\n\n<p>Here's something that I've imagined. Let's suppose your module is called <code>Problem</code>, and the source looks like this</p>\n\n<p>You're using it as an object-oriented module, so I've had to write a minimal <code>new</code> method. I've changed your <code>main</code> and <code>add</code> methods as little as possible so that they at least compile and run</p>\n\n<h3>Problem.pm</h3>\n\n<pre><code>package Problem;\n\nuse strict;\nuse warnings;\n\nsub new {\n    bless {};\n}\n\nsub main {\n     my $self = shift;\n     my ($arg, $subroutine) = @_;\n\n     my @arg = $arg =~ /[^,\\s]+/g;\n\n     my $ret_val = eval q{$self-&gt;$subroutine(@arg)};\n}\n\n# where $subroutine = add(a,b) is a function defined as follows:\n\nsub add {\n    my $self = shift;\n\n    my $a = shift;\n    my $b = shift;\n    my $c = $a + $b;\n\n    return $c;\n\n    # do some other stuff using $self\n\n    my @test = (\n        $self-&gt;{'id'},\n        $self-&gt;{'name'},\n    );\n\n    # do stuff...\n}\n\n1;\n</code></pre>\n\n<p>I find your <code>add</code> method extremely odd. I would expect a method with that name to add values together, but after fetching <code>$a</code> and <code>$b</code> from the parameter array and adding them into <code>$c</code> your code goes off and accesses the <code>id</code> and <code>name</code> values of the object, and then throws them away. Why does an <code>add</code> method need to know the ID and name of its object?</p>\n\n<p>Here's a program that uses the revised module</p>\n\n<h3>problem.pl</h3>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse Problem;\n\nmy $pb = Problem-&gt;new;\n\nsay $pb-&gt;main('1, 2', 'add');\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>3\n</code></pre>\n\n<p>I honestly can't think of anything more to say. You have left so many questions unanswered</p>\n"}], "owner": {"reputation": 53, "user_id": 2461335, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc3adb904ac4d1f2059022583c089c25?s=128&d=identicon&r=PG", "display_name": "user2461335", "link": "https://stackoverflow.com/users/2461335/user2461335"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 1, "closed_date": 1465886443, "answer_count": 1, "score": -1, "last_activity_date": 1467555031, "creation_date": 1465843640, "last_edit_date": 1466014777, "question_id": 37797053, "link": "https://stackoverflow.com/questions/37797053/passing-self-to-a-function-evaluated-by-eval-in-perl", "closed_reason": "Needs details or clarity", "title": "Passing self to a function evaluated by eval in Perl", "body": "<p>I need to pass <code>$self</code> to a function evaluated by <code>eval</code> in Perl.\nHere is the program:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $a = a-&gt;new();\nmy $my_job = \"job('hello_world')\";\neval $my_job;\n\npackage a;\nsub new\n{\n    my $class = shift;\n    my $self = {'first' =&gt; 'foo', 'last' =&gt; 'bar'};\n    bless($self, $class);\n}\n\nsub job\n{\n    my ($self, $entity) = @_;\n    print($self-&gt;{'first'} . \"\\n\");\n    print(\"$entity\\n\");\n}\n</code></pre>\n\n<p>I am expecting the output to be:\n</p>\n\n<pre><code>foo\nhello world\n</code></pre>\n\n<p>But since <code>job()</code> is expecting <code>$self</code>, it does not work. I need to pass <code>$a</code> into <code>eval</code> which evaluates <code>$my_job</code>.</p>\n"}, {"tags": ["mongodb", "perl", "hadoop", "language-agnostic", "hadoop-streaming"], "comments": [{"owner": {"reputation": 2475, "user_id": 6327365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vlpxf.png?s=128&g=1", "display_name": "grochmal", "link": "https://stackoverflow.com/users/6327365/grochmal"}, "edited": false, "score": 0, "creation_date": 1465904704, "post_id": 37794896, "comment_id": 63086248, "body": "You should add the update ans an answer to the question.  If someone find your question in a search they will have an easier time that way."}, {"owner": {"reputation": 81, "user_id": 6433481, "user_type": "registered", "profile_image": "https://graph.facebook.com/1437198819639163/picture?type=large", "display_name": "Tudor Marghidanu", "link": "https://stackoverflow.com/users/6433481/tudor-marghidanu"}, "reply_to_user": {"reputation": 2475, "user_id": 6327365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vlpxf.png?s=128&g=1", "display_name": "grochmal", "link": "https://stackoverflow.com/users/6327365/grochmal"}, "edited": false, "score": 0, "creation_date": 1465906665, "post_id": 37794896, "comment_id": 63087668, "body": "Thanks. It&#39;s done!"}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 6433481, "user_type": "registered", "profile_image": "https://graph.facebook.com/1437198819639163/picture?type=large", "display_name": "Tudor Marghidanu", "link": "https://stackoverflow.com/users/6433481/tudor-marghidanu"}, "is_accepted": true, "score": 1, "last_activity_date": 1465906645, "creation_date": 1465906645, "answer_id": 37811799, "question_id": 37794896, "link": "https://stackoverflow.com/questions/37794896/hadoop-streaming-with-mongo-hadoop-connector-fails/37811799#37811799", "title": "Hadoop streaming with mongo-hadoop connector fails", "body": "<p>I wonder why didn't I try this in the first place:</p>\n\n<pre><code>OUTPUT_PATH=`mktemp -d`\n\nyarn jar /usr/hdp/2.4.0.0-169/hadoop-mapreduce/hadoop-streaming.jar \\\n    -D mapred.job.name=\"${BUILD_TAG}\" \\\n    -D mapred.job.queue.name=\"sr\" \\\n    -input \"${INPUT_PATH}\" \\\n    -output \"${OUTPUT_PATH}\" \\\n    -mapper \"/usr/bin/mongoimport -h ${MONGODB_HOST} -d ${MONGODB_DATABASE} -c ${MONGODB_COLLECTION}\"\n</code></pre>\n\n<p>Guess what? It works like a charm!</p>\n"}], "owner": {"reputation": 81, "user_id": 6433481, "user_type": "registered", "profile_image": "https://graph.facebook.com/1437198819639163/picture?type=large", "display_name": "Tudor Marghidanu", "link": "https://stackoverflow.com/users/6433481/tudor-marghidanu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 37811799, "answer_count": 1, "score": 3, "last_activity_date": 1465906645, "creation_date": 1465835566, "last_edit_date": 1465906626, "question_id": 37794896, "link": "https://stackoverflow.com/questions/37794896/hadoop-streaming-with-mongo-hadoop-connector-fails", "title": "Hadoop streaming with mongo-hadoop connector fails", "body": "<p>I created this job that reads a bunch of JSON files from HDFS and tries to load them into MongoDB. It's just the map script because I don't require any additional processing on the reduce step. I'm trying to use the mongo-hadoop connector. </p>\n\n<p>The script is written in Perl and provisioned to all the nodes in the cluster with all the additional dependencies provisioned. The script emits in binary mode a BSON serialized version of the original JSON file. </p>\n\n<p>For some reasons the job fails with the following error:</p>\n\n<pre><code>Error: java.lang.ClassCastException: org.apache.hadoop.io.Text cannot be cast to com.mongodb.hadoop.io.BSONWritable\n    at com.mongodb.hadoop.streaming.io.MongoInputWriter.writeValue(MongoInputWriter.java:10)\n    at org.apache.hadoop.streaming.PipeMapper.map(PipeMapper.java:106)\n    at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:54)\n    at org.apache.hadoop.streaming.PipeMapRunner.run(PipeMapRunner.java:34)\n    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:453)\n    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:343)\n    at org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:168)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at javax.security.auth.Subject.doAs(Subject.java:422)\n    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1657)\n    at org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:162)\n</code></pre>\n\n<p>Not only this but I created a version of the same script in python using the <strong>pymono-hadoop</strong> package. the job fails with the same error. </p>\n\n<p>After digging a little bit more in the logs for the failed tasks I discovered that the actual error is:</p>\n\n<pre><code>2016-06-13 16:13:11,778 INFO [Thread-12] com.mongodb.hadoop.io.BSONWritable: No Length Header available.java.io.EOFException\n</code></pre>\n\n<p>The problem is that it fails silently, I've added some logging in the mapper but from what it looks the mapper doesn't even get called. This is how I'm calling the job:</p>\n\n<pre><code>yarn jar /usr/hdp/2.4.0.0-169/hadoop-mapreduce/hadoop-streaming.jar \\\n    -libjars /opt/mongo-hadoop/mongo-hadoop-core-1.5.2.jar,/opt/mongo-hadoop/mongo-hadoop-streaming-1.5.2.jar,/opt/mongo-hadoop/mongodb-driver-3.2.2.jar \\\n    -D mongo.output.uri=\"${MONGODB}\" \\\n    -outputformat com.mongodb.hadoop.mapred.MongoOutputFormat \\\n    -jobconf stream.io.identifier.resolver.class=com.mongodb.hadoop.streaming.io.MongoIdentifierResolver \\\n    -io mongodb \\\n    -input \"${INPUT_PATH}\" \\\n    -output \"${OUTPUT_PATH}\" \\\n    -mapper \"/opt/mongo/mongo_mapper.py\"\n</code></pre>\n\n<p>What am I doing wrong? It seems there's no other way to get data from HDFS into MongoDB...</p>\n"}, {"tags": ["perl", "csv", "perl-data-structures"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 5, "creation_date": 1465834597, "post_id": 37794521, "comment_id": 63055260, "body": "Could any of the other fields besides &quot;Items&quot; contain commas? For example, are names like &quot;Martin Luther King, Jr.&quot; possible?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1465842109, "post_id": 37794521, "comment_id": 63059275, "body": "That&#39;s okay. But please remember to <i>only ever copy and paste code and data into your question</i> that we can use to reproduce the problem that you&#39;re having, and <i>never type it in</i>. Programming has to be extremely precise, and a missing space, or a tab instead of a space can make all of the difference. We are used to most of the common errors, but there&#39;s no way to tell that your data is wrong if it looks correct."}, {"owner": {"reputation": 15, "user_id": 5186613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e37494bb60e8c16b60ef5c58dc311b2?s=128&d=identicon&r=PG&f=1", "display_name": "Kiluvya.a", "link": "https://stackoverflow.com/users/5186613/kiluvya-a"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1465842148, "post_id": 37794521, "comment_id": 63059312, "body": "@PerlDog,  As I learn, I tend to underestimate the complexity of the problem, sorry for my amateur mistakes."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5186613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e37494bb60e8c16b60ef5c58dc311b2?s=128&d=identicon&r=PG&f=1", "display_name": "Kiluvya.a", "link": "https://stackoverflow.com/users/5186613/kiluvya-a"}, "edited": false, "score": 0, "creation_date": 1465835555, "post_id": 37794750, "comment_id": 63055808, "body": "As matter of fact, you are right with column Items containing \u201citem,item,item\u201d And I think I understand your solution, so I should get the columns that are well formated then make the rest an array( which will be elements in \u201citems\u201d."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 15, "user_id": 5186613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e37494bb60e8c16b60ef5c58dc311b2?s=128&d=identicon&r=PG&f=1", "display_name": "Kiluvya.a", "link": "https://stackoverflow.com/users/5186613/kiluvya-a"}, "edited": false, "score": 2, "creation_date": 1465835760, "post_id": 37794750, "comment_id": 63055908, "body": "@Kiluvya.a You mean there are double quotes? If so, please edit your question to show a sample of the actual data you&#39;re using."}, {"owner": {"reputation": 15, "user_id": 5186613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e37494bb60e8c16b60ef5c58dc311b2?s=128&d=identicon&r=PG&f=1", "display_name": "Kiluvya.a", "link": "https://stackoverflow.com/users/5186613/kiluvya-a"}, "edited": false, "score": 0, "creation_date": 1465836003, "post_id": 37794750, "comment_id": 63056009, "body": "Name,Age,Items,Available John,29,&quot;laptop,mouse&quot;,Yes Jane,28,&quot;desktop,keyboard,mouse&quot;,yes Doe,56,&quot;tablet,keyboard,trackpad,touch pen&quot;,Yes"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 15, "user_id": 5186613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e37494bb60e8c16b60ef5c58dc311b2?s=128&d=identicon&r=PG&f=1", "display_name": "Kiluvya.a", "link": "https://stackoverflow.com/users/5186613/kiluvya-a"}, "edited": false, "score": 3, "creation_date": 1465836497, "post_id": 37794750, "comment_id": 63056242, "body": "@Kiluvya.a That totally changes things. It looks like you do have a well-formed CSV after all, so you should just use a proper CSV parser like <a href=\"https://metacpan.org/pod/Text::CSV_XS\" rel=\"nofollow noreferrer\">Text::CSV_XS</a>. Keep in mind that if we can&#39;t see a representative sample of your real data, we may not be able to offer the most appropriate solutions. Michael&#39;s answer is an excellent solution to the problem you originally described, but apparently that&#39;s not the actual problem you have."}, {"owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "reply_to_user": {"reputation": 15, "user_id": 5186613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e37494bb60e8c16b60ef5c58dc311b2?s=128&d=identicon&r=PG&f=1", "display_name": "Kiluvya.a", "link": "https://stackoverflow.com/users/5186613/kiluvya-a"}, "edited": false, "score": 1, "creation_date": 1465837051, "post_id": 37794750, "comment_id": 63056543, "body": "@Kiluvya.a As ThisSuitIsBlackNot said, that changes things. I&#39;ve updated my answer to address data both with and without quoted fields."}, {"owner": {"reputation": 15, "user_id": 5186613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e37494bb60e8c16b60ef5c58dc311b2?s=128&d=identicon&r=PG&f=1", "display_name": "Kiluvya.a", "link": "https://stackoverflow.com/users/5186613/kiluvya-a"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1465842005, "post_id": 37794750, "comment_id": 63059208, "body": "@ThisSuitIsBlackNot and Michael Carman, Thank you. I am still working on the solution myself. And thanks for teaching me how to ask questions properly"}], "tags": [], "owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "is_accepted": false, "score": 5, "last_activity_date": 1465836926, "last_edit_date": 1465836926, "creation_date": 1465835091, "answer_id": 37794750, "question_id": 37794521, "link": "https://stackoverflow.com/questions/37794521/read-a-csv-file-with-uneven-commas-but-fixed-number-of-columns/37794750#37794750", "title": "Read a CSV file with uneven commas but fixed number of columns", "body": "<p>Well-formed CSV quotes fields that contain a comma as part of the value. If your CSV is well-formed use the <code>Text::CSV</code> module:</p>\n\n<pre><code>use Text::CSV;\n\nmy $csv = Text::CSV-&gt;new();\nwhile (my $row = $csv-&gt;getline(\\*DATA)) {\n    my $name      = $row-&gt;[0];\n    my $age       = $row-&gt;[1];\n    my @items     = split /,/, $row-&gt;[2];\n    my $available = $row-&gt;[3];\n    print \"$name/$age/@items/$available\\n\";\n}\n\n__DATA__\nName,Age,Items,Available\nJohn,29,\"laptop,mouse\",Yes\nJane,28,\"desktop,keyboard,mouse\",yes\nDoe,56,\"tablet,keyboard,trackpad\",touchpen,Yes\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Name/Age/Items/Available\nJohn/29/laptop mouse/Yes\nJane/28/desktop keyboard mouse/yes\nDoe/56/tablet keyboard trackpad touchpen/Yes\n</code></pre>\n\n<p>If your CSV is not well-formed you'll need to implement a custom parse based on knowledge of your data. Assuming that the Items column is the only multi-valued field you can split on a comma and then remove the fields with a known position. Whatever is left is the items.</p>\n\n<pre><code>while (my $line = &lt;DATA&gt;) {\n    chomp $line;\n    my @record    = split /,/, $line;\n    my $name      = shift @record;\n    my $age       = shift @record;\n    my $available = pop   @record;\n    my @items     = @record;\n\n    print \"$name/$age/@items/$available\\n\";\n}\n\n__DATA__\nName,Age,Items,Available\nJohn,29,laptop,mouse,Yes\nJane,28,desktop,keyboard,mouse,yes\nDoe,56,tablet,keyboard,trackpad,touchpen,Yes\n</code></pre>\n\n<p>Alternately, you could use array slicing to get the same result:</p>\n\n<pre><code> my ($name, $age, $available, @items) = @record[0, 1, -1, 2 .. @record - 2];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1467555102, "last_edit_date": 1467555102, "creation_date": 1465839385, "answer_id": 37795921, "question_id": 37794521, "link": "https://stackoverflow.com/questions/37794521/read-a-csv-file-with-uneven-commas-but-fixed-number-of-columns/37795921#37795921", "title": "Read a CSV file with uneven commas but fixed number of columns", "body": "\n\n<h3>Update</h3>\n\n<p>I now realise that the OP's file may well contain properly-formatted CSV data, which makes this answer superfluous</p>\n\n<p>However the question has not been changed to show the real data, so I am leaving this answer here in case the question's subject line and content entices people with a problem that this <em>will</em> solve\n<br/></p>\n\n<hr>\n\n<p>I recommend that you use an intermediate program to format your CSV file properly. Once you have a standard-format file, the resulting output can then be processed using Perl with <code>Text::CSV</code>, Excel, or anything similar</p>\n\n<p>This program uses <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow\"><code>Text::CSV</code></a> to read your input data and write the <code>Items</code> column enclosed in quotes if necessary</p>\n\n<p>It works by using <code>Text::CSV-&gt;parse</code> to split each line into fields, and then reserving the first two and final fields for new fields 1, 2 and 4. Whatever is left is joined with a comma <code>,</code> and used for field 3. The four resulting values are passed back to <code>Text::CSV-&gt;combine</code> and printed</p>\n\n<p>It conforms to the standard of reading from STDIN and writing to STDOUT, so if you run it on the command line you should use</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl reformat_csv.pl text.csv &gt; new_text.csv\n</code></pre>\n\n\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse Text::CSV;\n\nmy $csv = Text::CSV-&gt;new;\n\nwhile ( &lt;&gt; ) {\n\n    $csv-&gt;parse($_);\n    my @row = $csv-&gt;fields;\n\n    my $f1 = shift @row;\n    my $f2 = shift @row;\n    my $f4 = pop @row;\n\n    my $f3 = join ',', @row;\n\n    $csv-&gt;combine($f1, $f2, $f3, $f4);\n    print $csv-&gt;string, \"\\n\";\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Name,Age,Items,Available\nJohn,29,\"laptop,mouse\",Yes\nJane,28,\"desktop,keyboard,mouse\",yes\nDoe,56,\"tablet,keyboard,trackpad,touchpen\",Yes\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1467555088, "last_edit_date": 1467555088, "creation_date": 1465840312, "answer_id": 37796167, "question_id": 37794521, "link": "https://stackoverflow.com/questions/37794521/read-a-csv-file-with-uneven-commas-but-fixed-number-of-columns/37796167#37796167", "title": "Read a CSV file with uneven commas but fixed number of columns", "body": "\n\n<p>Since your data is, in reality, a properly-formatted CSV file, you can use the standard tools to read and store it</p>\n\n<h3>Here's the data I'm now assuming that you have</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Name,Age,Items,Available\nJohn,29,\"laptop,mouse\",Yes\nJane,28,\"desktop,keyboard,mouse\",yes\nDoe,56,\"tablet,keyboard,trackpad,touch pen\",Yes\n</code></pre>\n\n<h3>Solution</h3>\n\n<p>Like my original answer, this code uses <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow\"><code>Text::CSV</code></a> to parse each line of input. But instead of having to reformat it, each row may be pushed directly onto array <code>@data</code></p>\n\n<p>Also as before, it conforms to the standard of reading from STDIN. But this time I have used <a href=\"https://metacpan.org/pod/Data::Dump\" rel=\"nofollow\"><code>Data::Dump</code></a> to reveal the in-memory data structure that has been built. If you run it on the command line you should use</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl unpack_csv.pl text.csv\n</code></pre>\n\n\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse Text::CSV;\n\nmy $csv = Text::CSV-&gt;new;\n\nmy @data;\n\nwhile ( &lt;&gt; ) {\n    $csv-&gt;parse($_);\n    my @row = $csv-&gt;fields;\n    push @data, \\@row;\n}\n\nuse Data::Dump;\ndd \\@data;\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5186613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e37494bb60e8c16b60ef5c58dc311b2?s=128&d=identicon&r=PG&f=1", "display_name": "Kiluvya.a", "link": "https://stackoverflow.com/users/5186613/kiluvya-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 665, "favorite_count": 1, "answer_count": 3, "score": -2, "last_activity_date": 1467555102, "creation_date": 1465834312, "last_edit_date": 1465842183, "question_id": 37794521, "link": "https://stackoverflow.com/questions/37794521/read-a-csv-file-with-uneven-commas-but-fixed-number-of-columns", "title": "Read a CSV file with uneven commas but fixed number of columns", "body": "<p></p>\n\n<p>I want to able to read this CSV file into an array of arrays or hashes for manipulation. How can I go about it?</p>\n\n<p>For example my file contains the following (the first line is the header):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Name,Age,Items,Available\nJohn,29,laptop,mouse,Yes\nJane,28,desktop,keyboard,mouse,yes\nDoe,56,tablet,keyboard,trackpad,touchpen,Yes\n</code></pre>\n\n<p>First column is name, second is Age, third is Items, But items can contain more than one thing separated by commas, and last column is Person availability.</p>\n\n<p>How can I accurately read this?</p>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1465829892, "post_id": 37793028, "comment_id": 63052101, "body": "You do realise that <code>&#47;&#47;</code> doesn&#39;t work for comments in <code>perl</code> right?"}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 3587025, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb16be8b88ea27250fed2644f9e370?s=128&d=identicon&r=PG&f=1", "display_name": "user3587025", "link": "https://stackoverflow.com/users/3587025/user3587025"}, "edited": false, "score": 0, "creation_date": 1466033776, "post_id": 37793575, "comment_id": 63154908, "body": "I wanted to remove two elements from the array. I tried the below. But it didn&#39;t work.  my @array = grep {$_ !~  ((m/@{$self-&gt;{&#39;service_ip_of_machine1&#39;}}/)       &amp;&amp; (m/@{$self-&gt;{&#39;service_ip_of_machine2}}/)) } @{$self-&gt;{&#39;machine_ip&#39;}};"}], "tags": [], "owner": {"reputation": 5423, "user_id": 937922, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/VsV8g.png?s=128&g=1", "display_name": "Takkun", "link": "https://stackoverflow.com/users/937922/takkun"}, "is_accepted": true, "score": 3, "last_activity_date": 1465834545, "last_edit_date": 1465834545, "creation_date": 1465831402, "answer_id": 37793575, "question_id": 37793028, "link": "https://stackoverflow.com/questions/37793028/pass-array-value-as-input/37793575#37793575", "title": "Pass array value as input", "body": "<p>Use <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow\">grep</a> to remove the unwanted IP address from the array.</p>\n\n<pre><code>$self-&gt;{machine_ip} = $self-&gt;{queryObj}-&gt;get_machine_ip($self-&gt;{vip_owner});\n\nmy @ips_minus_value = grep {$_ ne 'IP_ADDRESS_TO_REMOVE'} @{$self-&gt;{machine_ip}};\n$self-&gt;{exec_obj}-&gt;execute(\"./dns.pl -t \" . join(',', @ips_minus_value) . \" -f .5 -S C\");\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 3587025, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb16be8b88ea27250fed2644f9e370?s=128&d=identicon&r=PG&f=1", "display_name": "user3587025", "link": "https://stackoverflow.com/users/3587025/user3587025"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 1, "accepted_answer_id": 37793575, "answer_count": 1, "score": 1, "last_activity_date": 1465836844, "creation_date": 1465829839, "last_edit_date": 1465836844, "question_id": 37793028, "link": "https://stackoverflow.com/questions/37793028/pass-array-value-as-input", "title": "Pass array value as input", "body": "<p>I have written a function that returns a list of IP addresses.</p>\n\n<p>I call the function from my test script <code>dns.pl</code> and use a <code>for</code> loop to pass one address at a time as input to a command.</p>\n\n<p>I want to pass all but one IP address as input (all at once) to a command in the script.</p>\n\n<p>I want to check if the address matches = x.x.x.x. If so then skip that address and pass the other addresses as input to the below command in the script.</p>\n\n<pre><code># The IP address that are retuned by the function should be passed here as input all at once. Except one ip address\n\n./dns.pl -t ipaddress1,ip address2,.... ipadress,n  -f .5 -S C\n\n# function call to get the list of  ip addresses\n\n$self-&gt;{'machine_ip'} = $self-&gt;{'queryObj'}-&gt;get_machine_ip( $self-&gt;{'vip_owner'} );\n\n# Currently, I'm passing one ip address at a time using foreach\n# But, I want to  pass all but one ip address all at once  to the below command as input.\n\nforeach my $ip ( @{ $self-&gt;{'machine_ip'} } ) {\n    $self-&gt;{'exec_obj'}-&gt;execute(./dns.pl -t ipaddress1,ip address2,.... ipadress,n  -f .5 -S C);\n}\n\nsub get_machine_ip {\n\n    my ( $self, $vip_owner ) = @_;\n    my @ip        = ();\n    my $sql_query = $self-&gt;{queryObj}-&gt;execute(\"select machineIP from sripd_peer_Status where frontend=$vip_owner\");\n    my $records   = $self-&gt;{queryObj}-&gt;result();\n\n    foreach my $row ( @$records ) {\n        push @ip, $row-&gt;{machineIP};\n    }\n\n    return \\@ip;\n}\n</code></pre>\n"}, {"tags": ["perl", "ansi", "strawberry-perl"], "comments": [{"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 2, "creation_date": 1465829426, "post_id": 37792582, "comment_id": 63051744, "body": "Is that a <code>^</code> and <code>O</code> or a <code>ctrl-O</code> character?"}], "answers": [{"comments": [{"owner": {"reputation": 596, "user_id": 4603195, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0tvwN.png?s=128&g=1", "display_name": "Leslie", "link": "https://stackoverflow.com/users/4603195/leslie"}, "edited": false, "score": 1, "creation_date": 1465831749, "post_id": 37793559, "comment_id": 63053448, "body": "I changed it as you suggested, and it worked like a charm.  Thanks!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465836254, "post_id": 37793559, "comment_id": 63056133, "body": "I think the talk about <code>&quot;\\cO&quot;</code> being ASCII <code>SI</code> and the link to Wikipedia is irrelevant noise. On the other hand, the link to perldelta 5.24 is central and should be at the top"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 0, "creation_date": 1465841682, "post_id": 37793559, "comment_id": 63059023, "body": "I for one am <i>not</i> surprised that the original intent was for it to be an actual control character. That was the sort of thing that was cool about perl in the beginning - its lack of unnecessary limitations. Control characters in a variable name? Why not! (Having to care about EBCDIC has never been and will never be cool)"}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 7, "last_activity_date": 1465831937, "last_edit_date": 1592644375, "creation_date": 1465831370, "answer_id": 37793559, "question_id": 37792582, "link": "https://stackoverflow.com/questions/37792582/strawberry-perl-not-recognising-special-variable-for-osname/37793559#37793559", "title": "Strawberry Perl not recognising special variable for OSNAME", "body": "<p>Your code contains the <a href=\"https://en.wikipedia.org/wiki/Shift_Out_and_Shift_In_characters\" rel=\"noreferrer\">Shift In</a> control character (0x0F), also known as &quot;Control-O&quot;, instead of the characters <code>^</code> and <code>O</code>. This works in older versions of Perl but was <a href=\"http://perldoc.perl.org/perl5200delta.html#Literal-control-characters-in-variable-names\" rel=\"noreferrer\">deprecated in version 5.20.0</a>:</p>\n<blockquote>\n<p><strong>Literal control characters in variable names</strong></p>\n<p>This deprecation affects things like $\\cT, where \\cT is a literal control (such as a <code>NAK</code> or <code>NEGATIVE ACKNOWLEDGE</code> character) in the source code. Surprisingly, it appears that originally this was intended as the canonical way of accessing variables like $^T, with the caret form only being added as an alternative.</p>\n<p>The literal control form is being deprecated for two main reasons. It has what are likely unfixable bugs, such as $\\cI not working as an alias for $^I, and their usage not being portable to non-ASCII platforms: While $^T will work everywhere, \\cT is whitespace in EBCDIC. [perl #119123]</p>\n</blockquote>\n<p><a href=\"http://perldoc.perl.org/perl5240delta.html#ASCII-characters-in-variable-names-must-now-be-all-visible\" rel=\"noreferrer\">As of 5.24.0</a>, using a variable name containing non-graphical ASCII control characters results in a syntax error.</p>\n"}], "owner": {"reputation": 596, "user_id": 4603195, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0tvwN.png?s=128&g=1", "display_name": "Leslie", "link": "https://stackoverflow.com/users/4603195/leslie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 37793559, "answer_count": 1, "score": 4, "last_activity_date": 1465831937, "creation_date": 1465828666, "question_id": 37792582, "link": "https://stackoverflow.com/questions/37792582/strawberry-perl-not-recognising-special-variable-for-osname", "title": "Strawberry Perl not recognising special variable for OSNAME", "body": "<p>I recently upgraded Strawberry Perl from version 5.14.1.1-32bit to 5.24.0-64bit on my PC running Windows 7.  I have a perl script I run under both Windows and Linux, and when I was using the old version the command</p>\n\n<pre><code>use if $^O eq 'MSWin32' , 'Win32::Console::ANSI';\n</code></pre>\n\n<p>worked, but now that I've upgraded I get the error message</p>\n\n<pre><code>Unrecognized character \\x0F; marked by &lt;-- HERE after use if $&lt;-- HERE near column9 at p:\\bin\\abc.pl line 31.\n</code></pre>\n\n<p>Does anyone know what changed, and how I can get the new version of Strawberry Perl to accept the command?  Thanks in advance to all who respond.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 7980, "user_id": 1213907, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ksAFh.png?s=128&g=1", "display_name": "KeepCalmAndCarryOn", "link": "https://stackoverflow.com/users/1213907/keepcalmandcarryon"}, "edited": false, "score": 1, "creation_date": 1465815417, "post_id": 37787898, "comment_id": 63041902, "body": "use <code>my ($self, @array) = @_</code> in is_warning instead as shift only shifts one item off of @_ in a sub"}, {"owner": {"reputation": 531, "user_id": 1719460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i6BjX.jpg?s=128&g=1", "display_name": "Pyritie", "link": "https://stackoverflow.com/users/1719460/pyritie"}, "reply_to_user": {"reputation": 7980, "user_id": 1213907, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ksAFh.png?s=128&g=1", "display_name": "KeepCalmAndCarryOn", "link": "https://stackoverflow.com/users/1213907/keepcalmandcarryon"}, "edited": false, "score": 0, "creation_date": 1465815507, "post_id": 37787898, "comment_id": 63041964, "body": "@KeepCalmAndCarryOn is that the only way to pass an array by reference? Sorry, I come from c# and I&#39;m new to perl."}, {"owner": {"reputation": 531, "user_id": 1719460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i6BjX.jpg?s=128&g=1", "display_name": "Pyritie", "link": "https://stackoverflow.com/users/1719460/pyritie"}, "reply_to_user": {"reputation": 534, "user_id": 6356910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f5d88fc45e4185aa228d3ef08f0442?s=128&d=identicon&r=PG&f=1", "display_name": "Otterbein", "link": "https://stackoverflow.com/users/6356910/otterbein"}, "edited": false, "score": 0, "creation_date": 1465815558, "post_id": 37787898, "comment_id": 63041994, "body": "@Otterbein Yes, I got the same result with and without parentheses."}, {"owner": {"reputation": 7980, "user_id": 1213907, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ksAFh.png?s=128&g=1", "display_name": "KeepCalmAndCarryOn", "link": "https://stackoverflow.com/users/1213907/keepcalmandcarryon"}, "edited": false, "score": 1, "creation_date": 1465815809, "post_id": 37787898, "comment_id": 63042138, "body": "passing by reference is explained here <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlref.html</a>"}, {"owner": {"reputation": 534, "user_id": 6356910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f5d88fc45e4185aa228d3ef08f0442?s=128&d=identicon&r=PG&f=1", "display_name": "Otterbein", "link": "https://stackoverflow.com/users/6356910/otterbein"}, "reply_to_user": {"reputation": 7980, "user_id": 1213907, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ksAFh.png?s=128&g=1", "display_name": "KeepCalmAndCarryOn", "link": "https://stackoverflow.com/users/1213907/keepcalmandcarryon"}, "edited": false, "score": 0, "creation_date": 1465816093, "post_id": 37787898, "comment_id": 63042314, "body": "Like @KeepCalmAndCarryOn said: passing arrays or hashes as an reference is the best way to work with them in subroutines. You can reference every array or hash with <code>\\@array</code> or <code>\\%hash</code>. And dereference it with <code>@{$array}[0]</code> or <code>%{$hash}{key}</code>."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 2, "creation_date": 1465818458, "post_id": 37787898, "comment_id": 63043907, "body": "ALWAYS <code>use strict; use warnings;</code> It says: <code>Scalar value @myArray[0] better written as $myArray[0] at  ...</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 534, "user_id": 6356910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f5d88fc45e4185aa228d3ef08f0442?s=128&d=identicon&r=PG&f=1", "display_name": "Otterbein", "link": "https://stackoverflow.com/users/6356910/otterbein"}, "edited": false, "score": 0, "creation_date": 1465824832, "post_id": 37787898, "comment_id": 63048460, "body": "@Otterbein: Youre comments are misleading. Nothing you have said is correct except for how to take the reference of arrays and hashes"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1465825357, "post_id": 37787898, "comment_id": 63048858, "body": "To reinforce <a href=\"http://stackoverflow.com/questions/37787898/perl-line-doesnt-work-when-moved-to-separate-function#comment63043907_37787898\">@Toto&#39;s comment</a>, unless you have <code>no warnings &#39;syntax&#39;</code> in place, or you&#39;re using a very old version of Perl, you should have seen warning messages like <code>Scalar value @myArray[0] better written as $myArray[0]</code>. An array element, being a scalar, should begin with a dollar <code>$</code>. What you have written is a one-element <i>array slice</i>"}, {"owner": {"reputation": 531, "user_id": 1719460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i6BjX.jpg?s=128&g=1", "display_name": "Pyritie", "link": "https://stackoverflow.com/users/1719460/pyritie"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465825755, "post_id": 37787898, "comment_id": 63049143, "body": "@Borodin I have changed that now as well. The environment I&#39;m developing in doesn&#39;t show warnings unless there is also an error."}], "answers": [{"comments": [{"owner": {"reputation": 531, "user_id": 1719460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i6BjX.jpg?s=128&g=1", "display_name": "Pyritie", "link": "https://stackoverflow.com/users/1719460/pyritie"}, "edited": false, "score": 1, "creation_date": 1465816315, "post_id": 37788205, "comment_id": 63042435, "body": "I didn&#39;t know that about how arrays were passed. This fixed my problem, thank you!"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 5, "last_activity_date": 1465825137, "last_edit_date": 1465825137, "creation_date": 1465816061, "answer_id": 37788205, "question_id": 37787898, "link": "https://stackoverflow.com/questions/37787898/perl-line-doesnt-work-when-moved-to-separate-function/37788205#37788205", "title": "Perl line doesn&#39;t work when moved to separate function", "body": "<p>You've missed something crucial about Perl - a subroutine is only <em>ever</em> passed a list of scalar values in <code>@_</code>. So to pass an array, you need to use one of the techniques in subroutines <code>stuff</code> and <code>other</code> below.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nsub stuff {\n   my ( $arg, @other_args ) = @_;\n   print Dumper \\@other_args;\n   print \"$_\\n\" for @other_args;\n}\n\nsub other {\n   my ( $arg, $array_ref ) = @_;\n   print Dumper $array_ref;\n   print \"$_\\n\" for @$array_ref;\n}\n\nmy $param = \"fish\";\nmy @array = ( \"wiggle\", \"wobble\", \"boo\" );\n\nstuff( $param, @array );\nother( $param, \\@array );\n</code></pre>\n\n<p>In <code>stuff</code> the subroutine is handed a list of values to do with what it will. In the <code>other</code>, it's given two values - <code>$param</code> and a <em>reference</em> to <code>@array</code>. </p>\n\n<p>The reason you're only getting <code>1</code> in your case, is that <code>shift</code> is only pulling a single value off <code>@_</code>. So any extra arguments are getting left behind. You'll be able to see this with;</p>\n\n<pre><code>print Dumper \\@_;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 2, "creation_date": 1465817363, "post_id": 37788369, "comment_id": 63043096, "body": "That&#39;ll break things even worse. That&#39;ll put the object as the first element of <code>@array</code>. Not to mention that you&#39;ve just lost your ability to use <code>$self</code> inside the method."}], "tags": [], "owner": {"reputation": 1, "user_id": 6459454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dce63bb1aa06ead3582f883eb7479395?s=128&d=identicon&r=PG", "display_name": "Sharmila Rengan", "link": "https://stackoverflow.com/users/6459454/sharmila-rengan"}, "is_accepted": false, "score": -6, "last_activity_date": 1465822353, "last_edit_date": 1465822353, "creation_date": 1465816523, "answer_id": 37788369, "question_id": 37787898, "link": "https://stackoverflow.com/questions/37787898/perl-line-doesnt-work-when-moved-to-separate-function/37788369#37788369", "title": "Perl line doesn&#39;t work when moved to separate function", "body": "<p>Please remove the my $self = shift; line from is_warning function and test it again.</p>\n\n<p>Please try below script:</p>\n\n<p>#!/usr/bin/perl</p>\n\n<p>use Data::Dumper;</p>\n\n<p>sub is_warning {</p>\n\n<pre><code>my @array = @_;\nprint Dumper \\@_;\nreturn scalar @array == 2 &amp;&amp; @array[0] == 0 &amp;&amp; @array[1] == 1;\n</code></pre>\n\n<p>}</p>\n\n<p>sub some_other_method {</p>\n\n<pre><code>my @myArray = (0,1);\nif (is_warning(@myArray)) {\n print \"\\nif inside some : @myArray\\n\";\n}\n</code></pre>\n\n<p>}</p>\n\n<p>some_other_method();</p>\n"}], "owner": {"reputation": 531, "user_id": 1719460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i6BjX.jpg?s=128&g=1", "display_name": "Pyritie", "link": "https://stackoverflow.com/users/1719460/pyritie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 37788205, "answer_count": 2, "score": 1, "last_activity_date": 1465825417, "creation_date": 1465815179, "question_id": 37787898, "link": "https://stackoverflow.com/questions/37787898/perl-line-doesnt-work-when-moved-to-separate-function", "title": "Perl line doesn&#39;t work when moved to separate function", "body": "<p>I have an array that may or may not look like <code>[0, 1]</code> and I want to test for that.</p>\n\n<p>This code (inside a method) works:</p>\n\n<pre><code>sub some_other_method {\n    my $self = shift;\n    ...\n    if (scalar @myArray == 2 &amp;&amp; @myArray[0] == 0 &amp;&amp; @myArray[1] == 1) {\n        # this will successfully catch arrays that look like [0, 1]\n    }\n}\n</code></pre>\n\n<p>If I move the contents of the <code>if</code> into a separate method and then call it, it doesn't work.</p>\n\n<pre><code>sub is_warning {\n    my $self = shift;\n    my @array = shift;\n    return scalar @array == 2 &amp;&amp; @array[0] == 0 &amp;&amp; @array[1] == 1;\n}\n\n...\n\nsub some_other_method {\n    my $self = shift;\n    ...\n    if ($self-&gt;is_warning(@myArray)) {\n        # this will not catch arrays that look like [0, 1]\n    }\n}\n</code></pre>\n\n<p>If I add a <code>print @array;</code> to <code>is_warning</code>, it just prints a single number.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["perl", "curl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1465812070, "post_id": 37786698, "comment_id": 63039896, "body": "The documentation of <a href=\"https://metacpan.org/pod/WWW::Curl\" rel=\"nofollow noreferrer\">WWW::Curl::Easy</a> says it&#39;s not easy. It&#39;s <i>It is not intended to be a standalone module and because of this, the main libcurl documentation should be consulted for API details at <a href=\"http://curl.haxx.se\" rel=\"nofollow noreferrer\">curl.haxx.se</a></i>. Have you read that? I believe you are going to make your life easier by using <a href=\"http://p3rl.org/LWP::Simple\" rel=\"nofollow noreferrer\">LWP::Simple</a> instead."}, {"owner": {"reputation": 29, "user_id": 6459075, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1nvizb1zzOM/AAAAAAAAAAI/AAAAAAAAAT0/SV8B-aU4yAs/photo.jpg?sz=128", "display_name": "Kartik Parihar", "link": "https://stackoverflow.com/users/6459075/kartik-parihar"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1465815066, "post_id": 37786698, "comment_id": 63041682, "body": "@simbabque : Yes, i already done the same using LWP but as per requirements i need to implement this using WWW::Curl::Easy module. Here&#39;s the output json :              {&quot;headers&quot;:{&quot;ipAddress&quot;:[&quot;192.2.2.2&quot;],&quot;type&quot;:[&quot;PUBLIC_IP_ADD&zwnj;&#8203;RESS&quot;]},&quot;body&quot;:{&quot;cou&zwnj;&#8203;ntry&quot;:{&quot;isoCode&quot;:&quot;US&zwnj;&#8203;&quot;,&quot;name&quot;:&quot;United States&quot;,&quot;geoNameId&quot;:6252001},&quot;continent&quot;:{&quot;name&quot;:&quot;North America&quot;,&quot;code&quot;:&quot;NA&quot;,&quot;geoNameId&quot;:6255149},&quot;city&quot;:{},&quot;traits&quot;&zwnj;&#8203;:{&quot;ipAddress&quot;:&quot;192.2&zwnj;&#8203;.2.2&quot;},&quot;location&quot;:{&quot;&zwnj;&#8203;latitude&quot;:37.751,&quot;lo&zwnj;&#8203;ngitude&quot;:-97.822},&quot;p&zwnj;&#8203;ostal&quot;:{}},&quot;statusCo&zwnj;&#8203;de&quot;:&quot;OK&quot;}"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1465816631, "post_id": 37786698, "comment_id": 63042614, "body": "How is the JSON relevant? You know how to decode JSON and how to access the keys within, that&#39;s apparent from the question."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 29, "user_id": 6459075, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1nvizb1zzOM/AAAAAAAAAAI/AAAAAAAAAT0/SV8B-aU4yAs/photo.jpg?sz=128", "display_name": "Kartik Parihar", "link": "https://stackoverflow.com/users/6459075/kartik-parihar"}, "edited": false, "score": 0, "creation_date": 1465817860, "post_id": 37788485, "comment_id": 63043453, "body": "@KartikParihar that seems to be an internal URL. I cannot find a  DNS record for it. What do you have in <code>$response_body</code>? Is there anything in it at all?"}, {"owner": {"reputation": 29, "user_id": 6459075, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1nvizb1zzOM/AAAAAAAAAAI/AAAAAAAAAT0/SV8B-aU4yAs/photo.jpg?sz=128", "display_name": "Kartik Parihar", "link": "https://stackoverflow.com/users/6459075/kartik-parihar"}, "edited": false, "score": 1, "creation_date": 1465818186, "post_id": 37788485, "comment_id": 63043708, "body": "$response_body is still empty. But when i run $curl-&gt;perform it print output to console as json string as attached above."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 29, "user_id": 6459075, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1nvizb1zzOM/AAAAAAAAAAI/AAAAAAAAAT0/SV8B-aU4yAs/photo.jpg?sz=128", "display_name": "Kartik Parihar", "link": "https://stackoverflow.com/users/6459075/kartik-parihar"}, "edited": false, "score": 0, "creation_date": 1465819076, "post_id": 37788485, "comment_id": 63044333, "body": "@Kartik Oh. That was not clear to me. You should edit your question and add that information. In that comment it was very hard to read. There are ways to capture STDOUT, but that is not really solving the problem but rather a workaround. Did you put the <code>` in front of the variable for </code>WRITEDATA`?"}, {"owner": {"reputation": 29, "user_id": 6459075, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1nvizb1zzOM/AAAAAAAAAAI/AAAAAAAAAT0/SV8B-aU4yAs/photo.jpg?sz=128", "display_name": "Kartik Parihar", "link": "https://stackoverflow.com/users/6459075/kartik-parihar"}, "edited": false, "score": 0, "creation_date": 1465821401, "post_id": 37788485, "comment_id": 63045973, "body": "JSON Output:     {&quot;headers&quot;: {&quot;ipAddress&quot;: [&quot;192.2.2.2&quot;], &quot;type&quot;:[&quot;PUBLIC_IP_ADDRESS&quot;]},&quot;body&quot;:{&quot;cou\u200c\u200bntry&quot;:{&quot;isoCode&quot;&zwnj;&#8203;:&quot;US&quot;,&quot;name&quot;:&quot;United States&quot;,&quot;geoNameId&quot;:6252001},&quot;continent&quot;:{&quot;name&quot;:&quot;North America&quot;,&quot;code&quot;:&quot;NA&quot;,&quot;geoNameId&quot;:6255149},&quot;city&quot;:{},&quot;traits&quot;&zwnj;&#8203;:{&quot;ipAddress&quot;:&quot;192.2&zwnj;&#8203;\u200c\u200b.2.2&quot;},&quot;location&quot;:&zwnj;&#8203;{&quot;latitude&quot;:37.751,&quot;&zwnj;&#8203;longitude&quot;:-97.822},&zwnj;&#8203;&quot;postal&quot;:{}},&quot;status&zwnj;&#8203;Cod\u200c\u200be&quot;:&quot;OK&quot;}"}, {"owner": {"reputation": 29, "user_id": 6459075, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1nvizb1zzOM/AAAAAAAAAAI/AAAAAAAAAT0/SV8B-aU4yAs/photo.jpg?sz=128", "display_name": "Kartik Parihar", "link": "https://stackoverflow.com/users/6459075/kartik-parihar"}, "edited": false, "score": 0, "creation_date": 1465821471, "post_id": 37788485, "comment_id": 63046011, "body": "@simbabue-&gt; No i haven&#39;t use ` in front of variable for WRITEDATA."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 29, "user_id": 6459075, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1nvizb1zzOM/AAAAAAAAAAI/AAAAAAAAAT0/SV8B-aU4yAs/photo.jpg?sz=128", "display_name": "Kartik Parihar", "link": "https://stackoverflow.com/users/6459075/kartik-parihar"}, "edited": false, "score": 0, "creation_date": 1465821770, "post_id": 37788485, "comment_id": 63046213, "body": "@kartik Oh. I bonked up the markup. Sorry about that. I meant a backslash <code>\\</code>."}, {"owner": {"reputation": 29, "user_id": 6459075, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1nvizb1zzOM/AAAAAAAAAAI/AAAAAAAAAT0/SV8B-aU4yAs/photo.jpg?sz=128", "display_name": "Kartik Parihar", "link": "https://stackoverflow.com/users/6459075/kartik-parihar"}, "edited": false, "score": 0, "creation_date": 1465821916, "post_id": 37788485, "comment_id": 63046314, "body": "Yes i used backslash."}, {"owner": {"reputation": 29, "user_id": 6459075, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1nvizb1zzOM/AAAAAAAAAAI/AAAAAAAAAT0/SV8B-aU4yAs/photo.jpg?sz=128", "display_name": "Kartik Parihar", "link": "https://stackoverflow.com/users/6459075/kartik-parihar"}, "edited": false, "score": 0, "creation_date": 1465822105, "post_id": 37788485, "comment_id": 63046467, "body": "Could you provide few workaround to capture STDOUT in variable."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1465816882, "creation_date": 1465816882, "answer_id": 37788485, "question_id": 37786698, "link": "https://stackoverflow.com/questions/37786698/wwwcurleasy-output-not-capture/37788485#37788485", "title": "WWW::Curl::Easy output not capture", "body": "<p>This is explained in the first example code block within the <a href=\"https://metacpan.org/pod/WWW::Curl#WWW::Curl::Easy\" rel=\"nofollow\">WWW::Curl</a> documentation. I've reproduced it here together with the code from the question.</p>\n\n<pre><code>my $curl = WWW::Curl::Easy-&gt;new;\n$curl-&gt;setopt(CURLOPT_URL,$url);\n\n# A filehandle, reference to a scalar or reference to a typeglob can be used here.\nmy $response_body;\n$curl-&gt;setopt(CURLOPT_WRITEDATA,\\$response_body);\n\n# Starts the actual request\nmy $retcode = $curl-&gt;perform;\n\nmy %hash = decode_json($response_body);\n$country = $hash-&gt;{body}-&gt;{country};\n</code></pre>\n\n<p>You need to set a reference of some kind as the <code>CURLOPT_WRITEDATA</code> option. We used a scalar reference, the variable <code>$response_body</code> will contain the response body after <code>$curl-&gt;perform</code> is done. You can then decode the JSON.</p>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 6459075, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1nvizb1zzOM/AAAAAAAAAAI/AAAAAAAAAT0/SV8B-aU4yAs/photo.jpg?sz=128", "display_name": "Kartik Parihar", "link": "https://stackoverflow.com/users/6459075/kartik-parihar"}, "edited": false, "score": 0, "creation_date": 1529508658, "post_id": 37827686, "comment_id": 88901472, "body": "Thanks for answering"}], "tags": [], "owner": {"reputation": 29, "user_id": 6459075, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1nvizb1zzOM/AAAAAAAAAAI/AAAAAAAAAT0/SV8B-aU4yAs/photo.jpg?sz=128", "display_name": "Kartik Parihar", "link": "https://stackoverflow.com/users/6459075/kartik-parihar"}, "is_accepted": true, "score": -1, "last_activity_date": 1465972269, "creation_date": 1465972269, "answer_id": 37827686, "question_id": 37786698, "link": "https://stackoverflow.com/questions/37786698/wwwcurleasy-output-not-capture/37827686#37827686", "title": "WWW::Curl::Easy output not capture", "body": "<pre><code>This seems that WWW::Curl::Easy require file handle.\nLook at bold lines\n\n\n #!/usr/bin/perl\n\n use WWW::Curl::Easy;\n use Data::Dumper ;\n\n my $resp_body =\"\";\n\n my $curl=WWW::Curl::Easy-&gt;new;\n\n $curl-&gt;setopt(CURLOPT_URL,$url);\n\n# Define file handle and send it to string \n open (my $fh, \"&gt;\", \\$resp_body);\n\n$curl-&gt;setopt(CURLOPT_WRITEDATA,\\$fh);\n\nmy $ret_code =$curl-&gt;perform;\n\nif ($ret_code ==0){\n print \"Response : $resp_body\";\n }else{\n print \"Error\".$curl-&gt;errbuf ;\n}\nclose($fh);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1792, "user_id": 3105222, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/eSikW.png?s=128&g=1", "display_name": "FlorianB", "link": "https://stackoverflow.com/users/3105222/florianb"}, "is_accepted": false, "score": 0, "last_activity_date": 1468598186, "creation_date": 1468598186, "answer_id": 38400451, "question_id": 37786698, "link": "https://stackoverflow.com/questions/37786698/wwwcurleasy-output-not-capture/38400451#38400451", "title": "WWW::Curl::Easy output not capture", "body": "<p>After struggling many times with this issue of WWW::Curl::Easy refusing to print to a variable, and constantly writing to STDOUT, I finally found the problem!</p>\n\n<p>You want to get your WWW::Curl::Easy from <strong>WWW-Curl-4.17</strong> and <strong>NOT from WWW::Curl::Easy found in WWW-Curl-3.02</strong>.</p>\n\n<p>So simply overwrite your previous WWW::Curl::Easy installation by the entire WWW-Curl 4.17 package:</p>\n\n<p><a href=\"http://search.cpan.org/~szbalint/WWW-Curl-4.17/lib/WWW/Curl.pm\" rel=\"nofollow\">http://search.cpan.org/~szbalint/WWW-Curl-4.17/lib/WWW/Curl.pm</a></p>\n\n<p>Then it will obey to CURLOPT_WRITEDATA.\nIn fact, the other Curl does not even know CURLOPT_WRITEDATA as you will realize by adding <strong>use strict</strong>;</p>\n"}], "owner": {"reputation": 29, "user_id": 6459075, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1nvizb1zzOM/AAAAAAAAAAI/AAAAAAAAAT0/SV8B-aU4yAs/photo.jpg?sz=128", "display_name": "Kartik Parihar", "link": "https://stackoverflow.com/users/6459075/kartik-parihar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1631, "favorite_count": 0, "accepted_answer_id": 37827686, "answer_count": 3, "score": 1, "last_activity_date": 1468598186, "creation_date": 1465811704, "last_edit_date": 1465886279, "question_id": 37786698, "link": "https://stackoverflow.com/questions/37786698/wwwcurleasy-output-not-capture", "title": "WWW::Curl::Easy output not capture", "body": "<pre><code>use JSON;\nuse WWW::Curl::Easy;\n\nmy $curl = WWW::Curl::Easy-&gt;new;\n$curl-&gt;setopt(CURLOPT_NOBODY,1);\n$curl-&gt;setopt(CURLOPT_TIMEOUT,3);\n$curl-&gt;setopt(CURLOPT_VERBOSE,0);\n$curl-&gt;setopt(CURLOPT_URL,$url);\n\n\nmy $response = (what to use here);\n\nmy %hash = decode_json($response);\n$country = $hash-&gt;{body}-&gt;{country};\nreturn $country;\n\n\n#the output from url is in json format.\n#but unable to capture that output in a response variable as object.\n</code></pre>\n\n<p>I am trying to capture reponse from <code>$url</code> which is in json format in variable then use JSON's <code>decode_json</code> method to convert that into hash structure to get country code. But I am not able to get the response in variable.</p>\n\n<pre><code>JSON Output:\n{\n    \"headers\": {\n        \"ipAddress\": [\"198.162.1.1\"],\n        \"type\": [\"PUBLIC_IP_ADDRESS\"]\n    },\n    \"body\": {\n        \"country\": {\n            \"isoCode\": \"CA\",\n            \"name\": \"Canada\",\n            \"geoNameId\": 6251999\n        },\n        \"continent\": {\n            \"name\": \"North America\",\n            \"code\": \"NA\",\n            \"geoNameId\": 6255149\n        },\n        \"city\": {\n            \"name\": \"Cranbrook\",\n            \"geoNameId\": 5931800\n        },\n        \"traits\": {\n            \"ipAddress\": \"198.162.1.1\"\n        },\n        \"location\": {\n            \"latitude\": 49.4999,\n            \"longitude\": -115.7688,\n            \"timeZone\": \"America/Edmonton\"\n        },\n        \"postal\": {\n            \"code\": \"V1C\"\n        },\n        \"subdivisions\": [{\n            \"name\": \"British Columbia\",\n            \"geoNameId\": 5909050,\n            \"isoCode\": \"BC\"\n        }]\n    },\n    \"statusCode\": \"OK\"\n}\n200\n</code></pre>\n"}, {"tags": ["perl", "directory-structure"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6340684"}, "edited": false, "score": 2, "creation_date": 1465811898, "post_id": 37786495, "comment_id": 63039770, "body": "It looks like a very old Perl-script, using what is nowadays considered bad habits combined with Baby perl. (add &#39;use strict;&#39; and &#39;use warnings;&#39; at the beginning, for starters. Also the open command is not how we do it nowadays. (See perldoc -f open) The loop to read the file is Baby perl. One should really use a while loop."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1465813524, "post_id": 37786495, "comment_id": 63040774, "body": "Your code to print the contents of <code>@flow</code> is needlessly verbose. It can be replaced with the single statement: <code>print &quot;$_\\n&quot; for @flow;</code> or (in Perl 5.10+) <code>say $_ for @flow;</code>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1465816802, "post_id": 37786495, "comment_id": 63042724, "body": "@DaveCross Or just <code>say for @flow</code>"}, {"owner": {"reputation": 3775, "user_id": 1711271, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/593c2d4f4372384ae06efe0d991fa184?s=128&d=identicon&r=PG", "display_name": "DeltaIV", "link": "https://stackoverflow.com/users/1711271/deltaiv"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1465816997, "post_id": 37786495, "comment_id": 63042856, "body": "@DaveCross, cool, thanks! <code>perl -v</code>  gives me back <code>This is perl, v5.8.8 built for x86_64-linux-thread-multi</code>, thus I&#39;ll go with <code>print &quot;$_\\n&quot; for @flow;</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1465817144, "post_id": 37786495, "comment_id": 63042955, "body": "@H&#229;konH&#230;gland: Thanks. No idea how I missed that!"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1465817188, "post_id": 37786495, "comment_id": 63042982, "body": "@DeltaIV: Perhaps you could use a version of Perl that is less than ten years old."}, {"owner": {"reputation": 3775, "user_id": 1711271, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/593c2d4f4372384ae06efe0d991fa184?s=128&d=identicon&r=PG", "display_name": "DeltaIV", "link": "https://stackoverflow.com/users/1711271/deltaiv"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1465821693, "post_id": 37786495, "comment_id": 63046160, "body": "@DaveCross perhaps IT  won&#39;t bother to update RHEL just for the sake of  <code>say $_ for @flow;</code>. And let&#39;s not talk about installing it in my home. I already tried that road with <code>gnuplot</code> (we&#39;re stuck with 4.2), and man, that so didn&#39;t work."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1465822870, "post_id": 37786495, "comment_id": 63047013, "body": "Updating system perl is rarely a good idea. Updating /usr/local/bin/perl can be really handy though."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1465822944, "post_id": 37786495, "comment_id": 63047066, "body": "Well, there are plenty of other good reasons for using a newer version of Perl :-) And updating from (I guess) RHEL 5.x is a really good idea too."}, {"owner": {"reputation": 3775, "user_id": 1711271, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/593c2d4f4372384ae06efe0d991fa184?s=128&d=identicon&r=PG", "display_name": "DeltaIV", "link": "https://stackoverflow.com/users/1711271/deltaiv"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1465823739, "post_id": 37786495, "comment_id": 63047657, "body": "@Sobrique, on the system I work, <code>&#47;usr&#47;local&#47;bin&#47;perl</code> is just a symbolic link to <code>&#47;usr&#47;bin&#47;perl</code>, thus correct me if I&#39;m wrong but I think updating <code>&#47;usr&#47;local&#47;bin&#47;perl</code>  would require updating system perl. Anyway, even if that&#39;s false, I assure you that when I tried to install <code>gnuplot</code> in my home, all Hell broke loose. Apparently even the locations of system libraries are nonstandard on this system, thus I&#39;m only able to compile the simplest of things from source."}, {"owner": {"reputation": 3775, "user_id": 1711271, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/593c2d4f4372384ae06efe0d991fa184?s=128&d=identicon&r=PG", "display_name": "DeltaIV", "link": "https://stackoverflow.com/users/1711271/deltaiv"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1465824057, "post_id": 37786495, "comment_id": 63047866, "body": "@DaveCross, I agree on both counts, but I&#39;m not in a position to request  updating from RHEL. Even if I requested only a perl update, I&#39;d rather not relive the experience I had with <code>gnuplot</code>...."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1465812336, "post_id": 37786730, "comment_id": 63040075, "body": "I think the OP needs directories."}, {"owner": {"reputation": 3775, "user_id": 1711271, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/593c2d4f4372384ae06efe0d991fa184?s=128&d=identicon&r=PG", "display_name": "DeltaIV", "link": "https://stackoverflow.com/users/1711271/deltaiv"}, "edited": false, "score": 0, "creation_date": 1465812491, "post_id": 37786730, "comment_id": 63040169, "body": "Hi, thanks for the pointer, but it looks like this lists also the files in the current dir, not just the directories. I modified my question to include my test script, because including it in the comments seems complicated."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1465812735, "post_id": 37786730, "comment_id": 63040298, "body": "<code>grep</code> is the tool for that job then. Example updated."}, {"owner": {"reputation": 1073, "user_id": 1039320, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/28ba137ea03056ffb3a2e6db49ac29cd?s=128&d=identicon&r=PG", "display_name": "jreisinger", "link": "https://stackoverflow.com/users/1039320/jreisinger"}, "edited": false, "score": 0, "creation_date": 1465814034, "post_id": 37786730, "comment_id": 63041061, "body": "In case you want directories in your current working directory, including hidden (dot) files: <code>my @list_of_dirs = grep { -d } glob(&quot;* .*&quot;)</code>."}, {"owner": {"reputation": 3775, "user_id": 1711271, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/593c2d4f4372384ae06efe0d991fa184?s=128&d=identicon&r=PG", "display_name": "DeltaIV", "link": "https://stackoverflow.com/users/1711271/deltaiv"}, "edited": false, "score": 0, "creation_date": 1465822704, "post_id": 37786730, "comment_id": 63046871, "body": "@Sobrique, just a last question. Is there any difference between <code>my @list_of_dirs = grep { -d } glob &quot;&#47;path&#47;to&#47;dirs&#47;*&quot;;</code> and <code>my @list_of_dirs = grep { -d } glob (&quot;&#47;path&#47;to&#47;dirs&#47;*&quot;);</code> ?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1465822824, "post_id": 37786730, "comment_id": 63046975, "body": "No. They&#39;ll work the same. The only time brackets are mandatory is when there&#39;s e.g. multiple arguments and the order of precedence is unclear."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 9, "last_activity_date": 1465812700, "last_edit_date": 1465812700, "creation_date": 1465811815, "answer_id": 37786730, "question_id": 37786495, "link": "https://stackoverflow.com/questions/37786495/store-the-list-of-directories-in-an-array/37786730#37786730", "title": "Store the list of directories in an array", "body": "<p>It's simpler than you think:</p>\n\n<pre><code>my @list_of_files = glob (\"/path/to/files/*\"); \n</code></pre>\n\n<p>If you want to filter by a criteria - like 'is it a directory' you can:</p>\n\n<pre><code>my @list_of_dirs = grep { -d } glob \"/path/to/dirs/*\"; \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1465813572, "post_id": 37787057, "comment_id": 63040799, "body": "Using <code>glob()</code> is easier :-)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1465814124, "post_id": 37787057, "comment_id": 63041108, "body": "@DaveCross Well, yes, I agree, of course. But I thought that there&#39;d every reason to show the other standard method as well."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1465812757, "creation_date": 1465812757, "answer_id": 37787057, "question_id": 37786495, "link": "https://stackoverflow.com/questions/37786495/store-the-list-of-directories-in-an-array/37787057#37787057", "title": "Store the list of directories in an array", "body": "<p>Open directory inside which the sub-directories are with <a href=\"http://perldoc.perl.org/functions/opendir.html\" rel=\"nofollow\"><code>opendir</code></a>, read its content with <a href=\"http://perldoc.perl.org/functions/readdir.html\" rel=\"nofollow\"><code>readdir</code></a>.  Filter out everything that is not a directory using file test <code>-d</code>, see <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"nofollow\"><code>-X</code></a></p>\n\n<pre><code>my $rootdir = 'top-level-directory';\nopendir my $dh, \"$rootdir\" or die \"Can't open directory $rootdir: $!\";\nmy @dirlist = grep { -d } map { \"$rootdir/$_\" } readdir ($dh);\n</code></pre>\n\n<p>Since <code>readdir</code> returns bare names we need to prepend the path.</p>\n"}, {"tags": [], "owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "is_accepted": false, "score": 0, "last_activity_date": 1465821702, "creation_date": 1465821702, "answer_id": 37790136, "question_id": 37786495, "link": "https://stackoverflow.com/questions/37786495/store-the-list-of-directories-in-an-array/37790136#37790136", "title": "Store the list of directories in an array", "body": "<p>You can also get dir like this:</p>\n\n<pre><code>my @dir = `find . -type d`;\n\nperl -e ' use strict; use warnings; use Data::Dumper; my @dir = `find . -type d`; print Dumper(\\@dir);'\n\n$VAR1 = [\n          '.\n',\n          './.fonts\n',\n          './.mozilla\n',\n          './bin\n',\n          './.ssh\n',\n          './scripts\n'\n        ];\n</code></pre>\n"}], "owner": {"reputation": 3775, "user_id": 1711271, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/593c2d4f4372384ae06efe0d991fa184?s=128&d=identicon&r=PG", "display_name": "DeltaIV", "link": "https://stackoverflow.com/users/1711271/deltaiv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3541, "favorite_count": 0, "accepted_answer_id": 37786730, "answer_count": 3, "score": 2, "last_activity_date": 1465821702, "creation_date": 1465811095, "last_edit_date": 1465812563, "question_id": 37786495, "link": "https://stackoverflow.com/questions/37786495/store-the-list-of-directories-in-an-array", "title": "Store the list of directories in an array", "body": "<p>I received a Perl script which currently reads a list of directories from a text file and stores them in a string vector. I would like to modify it so that it reads the names of all the directories in the current folder, and stores them in the vector. This way, the user doesn't have to modify the input file each time the list of directories in the current folder changes.</p>\n\n<p>I have no knowledge of Perl, apart from the fact that it looks like array indices in Perl start from 0 (as in Python). I have a basic knowledge of bash and Python, but I'd rather not rewrite the script from scratch in Python. It's a long, complex script, and I'm not sure I'd be able to rewrite it in Python. Can you help me? Here is the part of the script which is currently reading the text file:</p>\n\n<pre><code>#!/usr/bin/perl\nuse Cwd;\n.\n.\n.\nopen FILES, \"&lt;files.txt\" or die; # open input file\n&lt;FILES&gt; or die;              # skip a comment\nmy $nof = &lt;FILES&gt; or die;    # number of directories\n&lt;FILES&gt; or die;              # skip a comment\nmy @massflow;                # read directories\nfor (my $i = 0; $i &lt; $nof; $i++){\n    chomp($massflow[$i] = &lt;FILES&gt;);\n}\n. \n.\n. \nclose(FILES);\n</code></pre>\n\n<p>PS I think the script is rather self-explanatory, but just to be sure, this piece opens a text file called \"files.txt\", skips a line, reads the number of directories, skips another line and reads, one name for each line, the names of all the directories in the current folder, as written in \"files.txt\".</p>\n\n<p>EDIT I wrote this script following @Sobrique suggestion, but it lists also files, not only dirs:</p>\n\n<pre><code>#!/usr/bin/perl\nuse Cwd;\n\nmy @flow = glob (\"*\");\n\nmy $arrSize = @flow;\nprint $arrSize;\nfor (my $i = 0; $i &lt; $arrSize; $i++){\n    print $flow[$i], \"\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 731, "user_id": 5309594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd7ed90f02f74f12b018acb3ff69dac8?s=128&d=identicon&r=PG&f=1", "display_name": "malyy", "link": "https://stackoverflow.com/users/5309594/malyy"}, "edited": false, "score": 0, "creation_date": 1465805945, "post_id": 37784623, "comment_id": 63036280, "body": "try to call &quot;system(qq{start /b &quot;&quot; &quot;lcm_cli.bat -lcmproperty C:\\\\pl\\\\LCMBiar_Import.property&quot;});&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1465806254, "post_id": 37784799, "comment_id": 63036420, "body": "Thanks for the typo cleanup @MathiasRJensen"}, {"owner": {"reputation": 261, "user_id": 4796386, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-dJHCYgi2IN0/AAAAAAAAAAI/AAAAAAAAAPU/cNxrWaxsfFo/photo.jpg?sz=128", "display_name": "shubham gupta", "link": "https://stackoverflow.com/users/4796386/shubham-gupta"}, "edited": false, "score": 0, "creation_date": 1465806506, "post_id": 37784799, "comment_id": 63036556, "body": "hey, I tried this but it doesn&#39;t seems to work. If i run the command directly at command prompt it waits for 5 secs and then asks for password! it proceeds further if i press enter. I need to mimic this scenario"}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "reply_to_user": {"reputation": 261, "user_id": 4796386, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-dJHCYgi2IN0/AAAAAAAAAAI/AAAAAAAAAPU/cNxrWaxsfFo/photo.jpg?sz=128", "display_name": "shubham gupta", "link": "https://stackoverflow.com/users/4796386/shubham-gupta"}, "edited": false, "score": 1, "creation_date": 1465806899, "post_id": 37784799, "comment_id": 63036759, "body": "It is quite likely the program is reading from the console directly. On Linux it might be possible to write to the console, but on Windows you may be out of luck.  This is Windows-API-specific now. It might help to tell us which Perl distribution you are using (Cygwin, ActiveState, something else?)"}], "tags": [], "owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "is_accepted": true, "score": 1, "last_activity_date": 1465806196, "last_edit_date": 1465806196, "creation_date": 1465805871, "answer_id": 37784799, "question_id": 37784623, "link": "https://stackoverflow.com/questions/37784623/cmd-operations-through-perl/37784799#37784799", "title": "CMD operations through Perl", "body": "<p>If you want to send data from your Perl script to a command launched in a subprocess you need to pipe a filehandle in to the program when launching it. Then you wait the required time and send the data using <code>print</code> (or <code>printf</code>).</p>\n\n<p>There is one huge caveat. If the external program opens the console terminal directly for input and does not read from stdin (i.e. to prompt for a password) you may not be able to send the data to the program.</p>\n\n<p>For the standard case where the program reads from stdin:</p>\n\n<pre><code>$dir = \"C:\\\\bip_autochain\\\\scripts\";\nchdir($dir) or die(\"Can't change to dir \\n\");\n\nopen(CMD, \"|lcm_cli.bat -lcmproperty C:\\\\pl\\\\LCMBiar_Import.property\");\n#          ^\n#          vertical bar, aka \"pipe\" symbol\n\nsleep(5);\nprint CMD \"\\n\";\n...\nclose(CMD); -- when you are done sending data\n</code></pre>\n\n<p>The pipe symbol at the beginning of the command is a special form of <code>open</code> that sets up the <code>CMD</code> filehandle piped to the command's <code>stdin</code>.  This is descibed <a href=\"http://www.perlhowto.com/executing_external_commands\" rel=\"nofollow\">in the documentation</a></p>\n"}], "owner": {"reputation": 261, "user_id": 4796386, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-dJHCYgi2IN0/AAAAAAAAAAI/AAAAAAAAAPU/cNxrWaxsfFo/photo.jpg?sz=128", "display_name": "shubham gupta", "link": "https://stackoverflow.com/users/4796386/shubham-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 37784799, "answer_count": 1, "score": 0, "last_activity_date": 1465806196, "creation_date": 1465805266, "last_edit_date": 1465805480, "question_id": 37784623, "link": "https://stackoverflow.com/questions/37784623/cmd-operations-through-perl", "title": "CMD operations through Perl", "body": "<p>Trying to run some commands through perl. One of the command requires to press enter in the middle to complete! \nI was first trying with java but failed to do so i thought it's possible in perl but not getting through!</p>\n\n<pre><code>$dir = \"C:\\\\bip_autochain\\\\scripts\";\nchdir($dir) or die(\"Can't change to dir \\n\");\n\nsystem(\"lcm_cli.bat -lcmproperty C:\\\\pl\\\\LCMBiar_Import.property\");\n\nsleep(5);\nsystem(\"\\n\");\n</code></pre>\n\n<p>The system command highlighted requires to press enter after some time say 5 sec.\nMy code doesn't serve this purpose.</p>\n"}, {"tags": ["perl", "stdin"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 2, "creation_date": 1465786190, "post_id": 37780682, "comment_id": 63029691, "body": "<a href=\"http://search.cpan.org/~rgiersig/Expect-1.15/Expect.pod\" rel=\"nofollow noreferrer\">search.cpan.org/~rgiersig/Expect-1.15/Expect.pod</a>"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 3251311, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ba00bdc131ea07fb8f1b3708edae9c4?s=128&d=identicon&r=PG&f=1", "display_name": "A-Kay", "link": "https://stackoverflow.com/users/3251311/a-kay"}, "edited": false, "score": 0, "creation_date": 1465791230, "post_id": 37781571, "comment_id": 63030707, "body": "My current code looks like this: my @slines = <code>&quot;$command</code>; Would it then become: my @slines = echo &quot;\\n\\n&quot; | <code>&quot;$command</code>; ?"}], "tags": [], "owner": {"reputation": 2465, "user_id": 302249, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/38c467a8b11ef0dde2bc97919502a047?s=128&d=identicon&r=PG", "display_name": "Dan Walmsley", "link": "https://stackoverflow.com/users/302249/dan-walmsley"}, "is_accepted": false, "score": 2, "last_activity_date": 1465789956, "creation_date": 1465789956, "answer_id": 37781571, "question_id": 37780682, "link": "https://stackoverflow.com/questions/37780682/perl-script-interacting-with-another-programs-stdin/37781571#37781571", "title": "Perl script interacting with another program&#39;s STDIN", "body": "<p>You could just pipe them in:</p>\n\n<pre><code>echo \"\\n\\n\" | yourcommand\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 3251311, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ba00bdc131ea07fb8f1b3708edae9c4?s=128&d=identicon&r=PG&f=1", "display_name": "A-Kay", "link": "https://stackoverflow.com/users/3251311/a-kay"}, "edited": false, "score": 0, "creation_date": 1465814613, "post_id": 37782388, "comment_id": 63041416, "body": "I found that using <code>close STDIN</code> didn&#39;t allow me to capture the full output of the program that&#39;s running. I&#39;m assuming there&#39;s a typo in your code - it should be <code>open2($chld_out, $chld_in, &#39;some cmd and args&#39;);</code> ? However I&#39;m still having the same problem - I read that it would be because I&#39;m running on Windows?"}, {"owner": {"reputation": 59, "user_id": 3251311, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ba00bdc131ea07fb8f1b3708edae9c4?s=128&d=identicon&r=PG&f=1", "display_name": "A-Kay", "link": "https://stackoverflow.com/users/3251311/a-kay"}, "edited": false, "score": 0, "creation_date": 1465881926, "post_id": 37782388, "comment_id": 63072030, "body": "I managed to get this working by adding two lines after the open2 line: <code>sleep(10); print $chld_in;</code>- i&#39;m assuming that it was sending to the child before it was ready to accept the \\n\\n and I found elsewhere that print $chld_in helps on Windows systems. Thanks @Sebastian for pointing me in the right direction"}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": true, "score": 3, "last_activity_date": 1465795806, "creation_date": 1465795806, "answer_id": 37782388, "question_id": 37780682, "link": "https://stackoverflow.com/questions/37780682/perl-script-interacting-with-another-programs-stdin/37782388#37782388", "title": "Perl script interacting with another program&#39;s STDIN", "body": "<p>The started command receives the same STDIN and STDERR from your script, just STDOUT is piped to your script.</p>\n\n<p>You could just close your STDIN before running the command and there will be no input source. Reading from STDIN will cause an error and the called command will exit:</p>\n\n<pre><code>close STDIN;\nmy @slines = `$command`;\n</code></pre>\n\n<p>This will also void any chance of console input to your script.</p>\n\n<p>Another approach would use <a href=\"http://search.cpan.org/perldoc?IPC::Open2\" rel=\"nofollow\"><code>IPC::Open2</code></a> which allows your script to control STDIN and STDOUT of the command at the same time:</p>\n\n<pre><code>use IPC::Open2;\nopen2($chld_in, $chld_in, 'some cmd and args');\nprint $chld_in \"\\n\\n\";\nclose $chld_in;\n@slines = &lt;$chld_out&gt;;\nclose $chld_out;\n</code></pre>\n\n<p>This script provides the two <code>\\n</code> input needed by the command and reads the command output.</p>\n"}], "owner": {"reputation": 59, "user_id": 3251311, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ba00bdc131ea07fb8f1b3708edae9c4?s=128&d=identicon&r=PG&f=1", "display_name": "A-Kay", "link": "https://stackoverflow.com/users/3251311/a-kay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 591, "favorite_count": 0, "accepted_answer_id": 37782388, "answer_count": 2, "score": 1, "last_activity_date": 1465795806, "creation_date": 1465780725, "question_id": 37780682, "link": "https://stackoverflow.com/questions/37780682/perl-script-interacting-with-another-programs-stdin", "title": "Perl script interacting with another program&#39;s STDIN", "body": "<p>I have a Perl script that calls another program with backticks, and checks the output for certain strings. This is running fine.</p>\n\n<p>The problem I have is when the other program fails on what it is doing and waits for user input. It requires the user to press enter twice before quitting the program.</p>\n\n<p>How do I tell my Perl script to press enter twice on this program?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467395764, "post_id": 37779082, "comment_id": 63732278, "body": "Please see <a href=\"http://stackoverflow.com/help/someone-answers\"><code>What should I do when someone answers my question?</code></a>  Marking answers (as you see it fit) is important for how this site operates, for users who search later."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465820045, "post_id": 37779248, "comment_id": 63045030, "body": "<code>split &#47;\\s+&#47;</code> should almost always be <code>split &#39; &#39;</code>"}], "tags": [], "owner": {"reputation": 1863, "user_id": 807131, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d81bbaf822883b608a42ac5fdb95350?s=128&d=identicon&r=PG", "display_name": "ddoxey", "link": "https://stackoverflow.com/users/807131/ddoxey"}, "is_accepted": false, "score": 1, "last_activity_date": 1465766881, "creation_date": 1465766881, "answer_id": 37779248, "question_id": 37779082, "link": "https://stackoverflow.com/questions/37779082/issue-with-nested-loop/37779248#37779248", "title": "Issue with nested loop", "body": "<p>You can try this on for size.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nopen(\"handle\", 'numbers.txt') or die('unable to open numbers file\\n');\n\nfor my $line (&lt;handle&gt;) {\n    chomp $line;\n    for my $number (split /\\s+/, $line) {\n        for (my $a = $number; $a &lt; $number+5; $a++) {\n            print \"$a \";\n        }       \n        print \"\\n\";\n    }\n}\nclose(\"handle\");\n</code></pre>\n\n<p>You can dispense with <strong>$/=' '</strong> and instead let the outer loop iterate on lines of the file.<br>\nFor each line you want to iterate for each number which is separated by white space, thus the <strong>split /\\s+/, $line</strong> which gives you a list of numbers for the inner loop.\nFor your output $a starts at the number read from the file.</p>\n"}, {"tags": [], "owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "is_accepted": false, "score": 1, "last_activity_date": 1465767368, "last_edit_date": 1465767368, "creation_date": 1465767036, "answer_id": 37779264, "question_id": 37779082, "link": "https://stackoverflow.com/questions/37779082/issue-with-nested-loop/37779264#37779264", "title": "Issue with nested loop", "body": "<p>This will do what you're after:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nwhile(&lt;DATA&gt;) {\n    chomp;\n    print \"$_\\n\";\n    my @split = split;\n    my $count = 0;\n    for (1..4){\n        $count++;\n        foreach (@split){ \n            my $num = $_ + $count;\n            print \"$num \";\n        }\n        print \"\\n\";\n    }\n\n}\n\n__DATA__\n1 2 3 4 5\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1465858260, "post_id": 37781462, "comment_id": 63066397, "body": "@jonasv Updated: added another method (more like OP), fixed a blooper in regex, changed prints around to streamline."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1466051572, "last_edit_date": 1466051572, "creation_date": 1465788920, "answer_id": 37781462, "question_id": 37779082, "link": "https://stackoverflow.com/questions/37779082/issue-with-nested-loop/37781462#37781462", "title": "Issue with nested loop", "body": "<p><strong>Update</strong> &nbsp; Added another method, this one in line with the posted approach.</p>\n\n<hr>\n\n<p>Increment each number in the string, changing the string in place. Repeat that. Below are two ways to do that. Yet another method reads individual numbers and prints following integer sequences.</p>\n\n<p>(1)  With regular expressions.  It also fits in one-liner</p>\n\n<pre><code>echo \"1 2 3 4 5\" | perl -e '$v = &lt;&gt;; for (1..5) { print $v; $v =~ s/(\\d+)/$1+1/eg; }'\n</code></pre>\n\n<p>This prints the desired output.  But better put it in a script</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $file = 'numbers.txt';\nopen my $fh, '&lt;', $file or die \"can't open $file: $!\";\n\nwhile (my $line = &lt;$fh&gt;) {  \n    # Add chomp($line) if needed for some other processing.\n    for (1..5) {\n        print $line;\n        $line =~ s/(\\d+)/$1+1/eg;\n    }   \n}\n</code></pre>\n\n<p>The <code>/e</code> modifier is crucial for this. It makes the replacement side of the regex be evaluated as code instead of as a double-quoted string. So you can actually execute code there and here we add to the captured number, <code>$1+1</code>, for each matched number as <code>/g</code> moves down the string. This changes the string so the next iteration of the <code>for (1..5)</code> increments those, etc. I match multiple digits, <code>\\d+</code>, which isn't necessary in your example but makes far more sense in general.</p>\n\n<p>(2) Via <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow\"><code>split</code></a> + <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow\"><code>map</code></a> + <a href=\"http://perldoc.perl.org/functions/join.html\" rel=\"nofollow\"><code>join</code></a>, also repeatedly changing the line in place</p>\n\n<pre><code>while (my $line = &lt;$fh&gt;) {\n    for (1..5) {\n        print $line;\n        $line = join ' ', map { $_+1 } split '\\s+', $line;            \n    }\n}\n</code></pre>\n\n<p>The <code>split</code> gets the list of numbers from <code>$line</code> and feeds it to <code>map</code>, which increments each, feeding its output list to <code>join</code>. The joined string is assigned back to <code>$line</code>, and this is repeated.  I split by <code>\\s+</code> to allow multiple white space but this makes it very 'relaxed' in what input format it accepts, see <a href=\"http://perldoc.perl.org/perlrecharclass.html#Whitespace\" rel=\"nofollow\"><code>perlrecharclass</code></a>. If you know it's one space please change that to <code>' '</code>.  </p>\n\n<p>(3) Take a number at a time and print the integer sequence starting from it. </p>\n\n<pre><code>open my $fh, '&lt;', $file or die \"can't open $file: $!\";\nlocal $/ = ' ';\nwhile (my $num = &lt;$fh&gt;) {\n    print \"$_ \" for $num..$num+4; \n    print \"\\n\";\n}\n</code></pre>\n\n<p>The magical <code>4</code> can be coded by pre-processing the whole line to find the sequence length, say by </p>\n\n<pre><code>my $len = () = $line =~ /(\\d+)/g;\n</code></pre>\n\n<p>or by <code>split</code>-ing into an array and taking its <code>scalar</code>, then using <code>$len-1</code>.</p>\n\n<hr>\n\n<p>Additional comments.</p>\n\n<ul>\n<li><p>I recommend the three-argument open, <code>open my $fh, '&lt;', $file</code></p></li>\n<li><p>When you check a call print the error, <code>die \"Your message: $!\"</code>, to see  the reason for failure. If <em>you</em> decide to quit, <code>if ($bad) { die \"Got $bad\" }</code>, then you may not need <code>$!</code>. But when an external call fails you <em>don't know</em> the reason so you need the suitable error variable, most often <code>$!</code>.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 766, "user_id": 4445448, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/3fbf664dc5d850436aac1fd98700c0ae?s=128&d=identicon&r=PG&f=1", "display_name": "SSN", "link": "https://stackoverflow.com/users/4445448/ssn"}, "is_accepted": false, "score": 1, "last_activity_date": 1465794818, "creation_date": 1465794818, "answer_id": 37782230, "question_id": 37779082, "link": "https://stackoverflow.com/questions/37779082/issue-with-nested-loop/37782230#37782230", "title": "Issue with nested loop", "body": "<p>Here no need to use nested loop it's always program make slower.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @num = split(\" \",(&lt;DATA&gt;)[0]);  \n\nforeach my $inc (0..$#num)\n{\n    print map{$inc+$_,\" \"}@num;  # Add one by one in array element\n    print \"\\n\";\n}\n\n\n__DATA__\n1 2 3 4 5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1465820006, "creation_date": 1465820006, "answer_id": 37789586, "question_id": 37779082, "link": "https://stackoverflow.com/questions/37779082/issue-with-nested-loop/37789586#37789586", "title": "Issue with nested loop", "body": "<p>Your program has a number of problems. Here is what's stopping it working</p>\n\n<ul>\n<li><p>You are setting the record separator to a single space. Your input file contains <code>\"1 2 3 4 5\\n\"</code>, so the <code>while</code> loop will iterate five times setting <code>$line</code> to <code>\"1 \"</code>, <code>\"2 \"</code>, <code>\"3 \"</code>, <code>\"4 \"</code>, <code>\"5\\n\"</code></p></li>\n<li><p>Your <code>for</code> loop is set up to iterate five times. It does <code>chomp $line</code> which removes the space after the number, then increments <code>$line</code> and prints it. Then you jump out of the <code>for</code> loop, having executed it only once, with <code>next OUT</code>. This results in each value in the file being incremented by one and printed, so you get <code>2 3 4 5 6</code></p></li>\n<li><p>Removing the unnecessary <code>next OUT</code>, produces something closer</p>\n\n<pre><code>2 3 4 5 6 3 4 5 6 7 4 5 6 7 8 5 6 7 8 9 6 7 8 9 10\n</code></pre>\n\n<p>There are now five numbers being printed for each number in the input file</p></li>\n<li><p>Adding <code>print \"\\n\"</code> after the <code>for</code> loop help separate the lines</p>\n\n<pre><code>2 3 4 5 6 \n3 4 5 6 7 \n4 5 6 7 8 \n5 6 7 8 9 \n6 7 8 9 10\n</code></pre></li>\n<li><p>Now we need to print the number <em>before</em> it is incremented instead of <em>afterwards</em>. If we swap <code>$line += 1</code> and <code>print \"$line \"</code> we get this</p>\n\n<pre><code>1 2 3 4 5 \n2 3 4 5 6 \n3 4 5 6 7 \n4 5 6 7 8 \n5\n 6 7 8 9 \n</code></pre>\n\n<p>What is happening here is that the <code>5</code> is still followed be a newline, which now appears in the output. The <code>chomp</code> won't remove this because it removes the value of <code>$/</code> from the end of a string. You've set that to a space, so it will remove only spaces. The fix is to replace <code>chomp</code> with a substitution <code>s/\\s+//g</code> which removes *all whitespace from the string. You also need to do that only once so I've put it outside the <code>for</code> loop at the top</p></li>\n</ul>\n\n<p>Now we get this</p>\n\n<pre><code>    1 2 3 4 5 \n    2 3 4 5 6 \n    3 4 5 6 7 \n    4 5 6 7 8 \n    5 6 7 8 9 \n</code></pre>\n\n<p>And this is your code as it ended up</p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen( \"handle\", 'numbers.txt' ) or die('unable to open numbers file\\n');\n\n$/ = ' ';\n\nfor my $line (&lt;handle&gt;) {\n\n    $line =~ s/\\s+//g;\n\n    for ( my $a = 0; $a &lt; 5; $a++ ) {\n        print \"$line \";\n        $line += 1;\n    }\n\n    print \"\\n\";\n}\n\nclose(\"handle\");\n</code></pre>\n\n<p>There are a few other best practices that could improve your program</p>\n\n<ul>\n<li><p>Use <code>use warnings 'all'</code></p></li>\n<li><p>Use lexical file handles, and the three-parameter form of <code>open</code></p></li>\n<li><p>Use <code>local</code> if you are changing Perl's built-in variables</p></li>\n<li><p>Put <code>$!</code> into your <code>die</code> string so that you know <em>why</em> the <code>open</code> failed</p></li>\n<li><p>Avoid the C-style <code>for</code> loop, and iterate over a list instead</p></li>\n</ul>\n\n<p>Making these fixes as well looks like this. The output is identical to the above</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nopen my $fh, '&lt;', 'numbers.txt'\n        or die qq{Unable to open \"numbers.txt\" for input: $!};\n\nlocal $/ = ' ';\n\nfor my $line ( &lt;$fh&gt; ) {\n\n    $line =~ s/\\s+//g;\n\n    for my $a ( 0 .. 4 ) {\n        print \"$line \";\n        ++$line;\n    }\n\n    print \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 6437396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fce2c19d0f362d4940738a71661229b0?s=128&d=identicon&r=PG&f=1", "display_name": "jonasv", "link": "https://stackoverflow.com/users/6437396/jonasv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1466051572, "creation_date": 1465765621, "last_edit_date": 1465766492, "question_id": 37779082, "link": "https://stackoverflow.com/questions/37779082/issue-with-nested-loop", "title": "Issue with nested loop", "body": "<p>I got file called numbers.txt which is basically line with 5 numbers:\nthey look like this:</p>\n\n<pre><code>1 2 3 4 5\n</code></pre>\n\n<p>What I'm trying to achieve is I want to read those numbers from the line (which already works), then in each iteration I want to add +1 to every number which was read from that file and print them on screen with print, so the final result should look like:</p>\n\n<pre><code>1 2 3 4 5\n2 3 4 5 6\n3 4 5 6 7\n4 5 6 7 8\n5 6 7 8 9\n</code></pre>\n\n<p>.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nopen(\"handle\", 'numbers.txt') or die('unable to open numbers file\\n');\n$/ = ' ';\n\nOUT: for my $line (&lt;handle&gt;) {\n        for (my $a = 0; $a &lt; 5; $a++) {\n            chomp $line;\n            $line += 1;\n            print \"$line \";\n                next OUT;\n        }\n}\nclose(\"handle\");\n</code></pre>\n\n<p>Haven't done looping in perl for a while now and would be great if someone could provide working example.</p>\n\n<p>Also, it would be great if you could provide more than one working example, just to be future proof ;)\nThanks</p>\n"}, {"tags": ["perl", "shell"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1465806500, "post_id": 37778939, "comment_id": 63036554, "body": "Possible duplicates 1.. <a href=\"http://stackoverflow.com/questions/2967762/how-to-export-a-shell-variable-within-a-perl-script\">How to export a shell variable within a Perl script</a>, 2.. <a href=\"http://stackoverflow.com/questions/19192682/setting-an-environment-variable-through-a-perl-script\">Setting an environment variable through a Perl script</a>, 3.. <a href=\"http://stackoverflow.com/questions/1747796/how-do-i-set-an-environment-variable-in-perl\">How do I set an environment variable in Perl?</a>"}, {"owner": {"reputation": 271, "user_id": 5970275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee371699f2df67b483dcd429c5658a45?s=128&d=identicon&r=PG&f=1", "display_name": "Ashutosh Rawal", "link": "https://stackoverflow.com/users/5970275/ashutosh-rawal"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1466591261, "post_id": 37778939, "comment_id": 63376833, "body": "Actually my question was little bit different. I want to know how to set environment &quot;setenv&quot; with help of perl script. I have tried $ENV{&quot;VARIABLE_NAME&quot;} = &quot;home\\/path_1\\/path_2\\/path_3&quot;;  Then I fire command echo $VARIABLE_NAME then it is not giving me path that I set from perl script.  Thanks in advance in for your support."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1466614967, "post_id": 37778939, "comment_id": 63394691, "body": "It&#39;s still unclear what you want to do. I&#39;d suggest adding a self-contained reproducer -- that is to say, including <i>in your question</i> code that both performs the assignment and uses that assignment, and providing both that code&#39;s actual output and its expected output."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1466615223, "post_id": 37778939, "comment_id": 63394829, "body": "Also, since it requires five reopen votes, you might want a new question that&#39;s clearly specified rather than trying to resuscitate this one."}, {"owner": {"reputation": 271, "user_id": 5970275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee371699f2df67b483dcd429c5658a45?s=128&d=identicon&r=PG&f=1", "display_name": "Ashutosh Rawal", "link": "https://stackoverflow.com/users/5970275/ashutosh-rawal"}, "edited": false, "score": 0, "creation_date": 1466615561, "post_id": 37778939, "comment_id": 63395023, "body": "Code in perl script:   $ENV{&quot;VARIABLE_NAME&quot;} = &quot;home\\ /path_1\\ /path_2\\ /path_3&quot;; system(&quot;echo $VARIABLE_NAME&quot;); After running this perl script Expected Output: home\\ /path_1\\ /path_2\\ /path_3 Actual Output: It will not print any thing"}], "answers": [{"comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1465798435, "post_id": 37778967, "comment_id": 63032846, "body": "Of course it doesn&#39;t. It&#39;s a completely different process. You need to make x an environment variable and set it in the parent process (i.e. inside the Perl process which is invoking <code>system</code>)."}, {"owner": {"reputation": 271, "user_id": 5970275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee371699f2df67b483dcd429c5658a45?s=128&d=identicon&r=PG&f=1", "display_name": "Ashutosh Rawal", "link": "https://stackoverflow.com/users/5970275/ashutosh-rawal"}, "edited": false, "score": 0, "creation_date": 1466614679, "post_id": 37778967, "comment_id": 63394506, "body": "Actually my question was little bit different. I want to know how to set environment &quot;setenv&quot; with help of perl script. I have tried $ENV{&quot;VARIABLE_NAME&quot;} = &quot;home\\/path_1\\/path_2\\/path_3&quot;; Then I fire command echo $VARIABLE_NAME then it is not giving me path that I set from perl script. Thanks in advance in for your support"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 271, "user_id": 5970275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee371699f2df67b483dcd429c5658a45?s=128&d=identicon&r=PG&f=1", "display_name": "Ashutosh Rawal", "link": "https://stackoverflow.com/users/5970275/ashutosh-rawal"}, "edited": false, "score": 0, "creation_date": 1466626301, "post_id": 37778967, "comment_id": 63400899, "body": "@AshutoshRawal: Works for me. <code>perl -we &#39;$ENV{VAR} = q(a&#47;b&#47;c); system q(echo $VAR)&#39;</code>. Note that variables are interpolated in double quotes, and Perl doesn&#39;t know you meant a shell variable."}, {"owner": {"reputation": 271, "user_id": 5970275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee371699f2df67b483dcd429c5658a45?s=128&d=identicon&r=PG&f=1", "display_name": "Ashutosh Rawal", "link": "https://stackoverflow.com/users/5970275/ashutosh-rawal"}, "edited": false, "score": 0, "creation_date": 1466674075, "post_id": 37778967, "comment_id": 63419258, "body": "@Choroba thanks for reply I have tried as you mentioned. But after running perl script then on same terminal if I fire command echo $VARIABLE_NAME then it print nothing.In perl script echo $VAR is working but on terminal it is not working."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 271, "user_id": 5970275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee371699f2df67b483dcd429c5658a45?s=128&d=identicon&r=PG&f=1", "display_name": "Ashutosh Rawal", "link": "https://stackoverflow.com/users/5970275/ashutosh-rawal"}, "edited": false, "score": 0, "creation_date": 1466677278, "post_id": 37778967, "comment_id": 63421563, "body": "@AshutoshRawal: That&#39;s normal. Setting a variable in a child process can&#39;t change the variable&#39;s value in a parent process."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1465764614, "creation_date": 1465764614, "answer_id": 37778967, "question_id": 37778939, "link": "https://stackoverflow.com/questions/37778939/set-shell-variable-with-help-perl-script/37778967#37778967", "title": "Set shell variable with help perl script", "body": "<p>It was working. The problem is that the next <code>system</code> command runs a new shell which doesn't know about variables set in the first shell.</p>\n\n<pre><code>system 'x=value; echo $x'; # Outputs \"value\".\nsystem 'echo $x';          # Empty line - the shell with $x doesn't exist anymore.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1430, "user_id": 6084928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKTrp.jpg?s=128&g=1", "display_name": "Lex Scarisbrick", "link": "https://stackoverflow.com/users/6084928/lex-scarisbrick"}, "edited": false, "score": 0, "creation_date": 1465766074, "post_id": 37778996, "comment_id": 63025985, "body": "If you wanted the environment variable(s) to persist in a new shell and not return from the Perl script, you could also do something like: <code>system($ENV{&#39;SHELL&#39;}); kill &#39;KILL&#39;, getppid();</code>"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 1430, "user_id": 6084928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKTrp.jpg?s=128&g=1", "display_name": "Lex Scarisbrick", "link": "https://stackoverflow.com/users/6084928/lex-scarisbrick"}, "edited": false, "score": 0, "creation_date": 1465766721, "post_id": 37778996, "comment_id": 63026130, "body": "@LexScarisbrick, ...huh? <code>system($ENV{&#39;anything&#39;})</code> is a horrible idea -- substituting data into a string then passed to <code>sh -c</code> is a recipe for shell injection vulnerabilities unless that variable&#39;s value has been carefully vetted. And I&#39;m not at all clear what the code in your comment above is more generally trying to accomplish. If you want to fork off a subprocess, set an environment variable in it, and then exec a shell to replace that perl subprocess, better to make it explicit."}, {"owner": {"reputation": 1430, "user_id": 6084928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKTrp.jpg?s=128&g=1", "display_name": "Lex Scarisbrick", "link": "https://stackoverflow.com/users/6084928/lex-scarisbrick"}, "edited": false, "score": 0, "creation_date": 1465767321, "post_id": 37778996, "comment_id": 63026271, "body": "Fair point.  I was making the (probably wrong) assumption that the intent of the question was, &quot;What is the Perl equivalent of doing <code>source file</code> in a shell?&quot;  Setting environment variables inside Perl, calling <code>system()</code> to invoke a new shell and then killing the process that called Perl effectively does this.  But.  Like you mentioned, invoking a new shell shouldn&#39;t be based on an environment variable due to the security risks."}, {"owner": {"reputation": 271, "user_id": 5970275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee371699f2df67b483dcd429c5658a45?s=128&d=identicon&r=PG&f=1", "display_name": "Ashutosh Rawal", "link": "https://stackoverflow.com/users/5970275/ashutosh-rawal"}, "edited": false, "score": 0, "creation_date": 1466614664, "post_id": 37778996, "comment_id": 63394491, "body": "Actually my question was little bit different. I want to know how to set environment &quot;setenv&quot; with help of perl script. I have tried $ENV{&quot;VARIABLE_NAME&quot;} = &quot;home\\/path_1\\/path_2\\/path_3&quot;; Then I fire command echo $VARIABLE_NAME then it is not giving me path that I set from perl script. Thanks in advance in for your support"}], "tags": [], "owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "is_accepted": false, "score": 3, "last_activity_date": 1465764790, "creation_date": 1465764790, "answer_id": 37778996, "question_id": 37778939, "link": "https://stackoverflow.com/questions/37778939/set-shell-variable-with-help-perl-script/37778996#37778996", "title": "Set shell variable with help perl script", "body": "<p>You have no need to run a new shell to set an environment variable; indeed, doing so is counterproductive, since the value doesn't outlive the shell in which it's assigned (except through any surviving children of that shell which may have inherited the value).</p>\n\n<p>You can simply set an environment variable directly in your perl:</p>\n\n<pre><code>$ENV{\"variable_name\"} = \"variable_value\"\n</code></pre>\n\n<p>Any subsequent shell you start from your perl script will see this.</p>\n"}], "owner": {"reputation": 271, "user_id": 5970275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee371699f2df67b483dcd429c5658a45?s=128&d=identicon&r=PG&f=1", "display_name": "Ashutosh Rawal", "link": "https://stackoverflow.com/users/5970275/ashutosh-rawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 874, "favorite_count": 0, "closed_date": 1465820771, "answer_count": 2, "score": -1, "last_activity_date": 1466521442, "creation_date": 1465764428, "last_edit_date": 1466521442, "question_id": 37778939, "link": "https://stackoverflow.com/questions/37778939/set-shell-variable-with-help-perl-script", "closed_reason": "Duplicate", "title": "Set shell variable with help perl script", "body": "<p>I was trying to set shell variable name with help of perl script.</p>\n\n<p>But it was not running fine.</p>\n\n<pre><code>system(\"variable_name=\\\"variable_value\\\"\");\n`variable_name=\\\"variable_value\\\"`;\n</code></pre>\n\n<p>Any one tell me why it was not working.</p>\n\n<p>Actually my question was little bit different. \nI want to know how to set environment \"setenv\" with help of perl script.\nI have tried \n<code>$ENV{\"VARIABLE_NAME\"} = \"home\\/path_1\\/path_2\\/path_3\";</code></p>\n\n<p>Then I fire command echo $VARIABLE_NAME then it is not giving me path that I set from perl script.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 9, "last_activity_date": 1465756976, "last_edit_date": 1465756976, "creation_date": 1465756598, "answer_id": 37777777, "question_id": 37777709, "link": "https://stackoverflow.com/questions/37777709/perl-why-is-necessary-to-specify-the-use-of-state-feature/37777777#37777777", "title": "Perl - why is necessary to specify the use of &#39;state&#39; feature?", "body": "<p>This is expected. Features that introduce new keywords have to be explicitly enabled, in order to avoid breaking existing programs that may have defined a sub called e.g. <code>state</code>.</p>\n\n<p>You can enable features with a <code>use feature</code> declaration or with e.g. <code>use v5.12.0</code> (which requires a minimum perl version of 5.12.0 and enables all features available in that version).</p>\n\n<p>See also <a href=\"https://metacpan.org/pod/feature#DESCRIPTION\" rel=\"noreferrer\"><code>perldoc feature</code></a> and <a href=\"https://metacpan.org/pod/perlfunc#use-VERSION\" rel=\"noreferrer\"><code>perldoc -f use</code></a>.</p>\n"}], "owner": {"reputation": 45, "user_id": 3763926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/48mKY.png?s=128&g=1", "display_name": "nfanta", "link": "https://stackoverflow.com/users/3763926/nfanta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 37777777, "answer_count": 1, "score": 3, "last_activity_date": 1465883914, "creation_date": 1465756167, "last_edit_date": 1465883914, "question_id": 37777709, "link": "https://stackoverflow.com/questions/37777709/perl-why-is-necessary-to-specify-the-use-of-state-feature", "title": "Perl - why is necessary to specify the use of &#39;state&#39; feature?", "body": "<p>While learning Perl I came across this issue while trying to make a function that remembers previous values.</p>\n\n<p>The code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nsub running_sum {\n    state $sum;\n    state (@numbers);\n\n    foreach my $number (@_) {\n        push @numbers, $number;\n        $sum += $number;\n    }\n\n    $sum;\n}\n\nprint running_sum(1..2);\nprint running_sum(3..5);\n</code></pre>\n\n<p>When I try to run it, I receive this errors:</p>\n\n<pre><code>Global symbol \"$sum\" requires explicit package name (did you forget to declare \"my $sum\"?) at ../tmp.pl line 12.\nGlobal symbol \"@numbers\" requires explicit package name (did you forget to declare \"my @numbers\"?) at ../tmp.pl line 13.\nGlobal symbol \"@numbers\" requires explicit package name (did you forget to declare \"my @numbers\"?) at ../tmp.pl line 16.\nGlobal symbol \"$sum\" requires explicit package name (did you forget to declare \"my $sum\"?) at ../tmp.pl line 17.\nGlobal symbol \"$sum\" requires explicit package name (did you forget to declare \"my $sum\"?) at ../tmp.pl line 20.\n</code></pre>\n\n<p>The function works well and doesn't throw any errors if I add <code>use feature 'state';</code>; but from what I've read as from 5.10 this should be always enabled (I'm using Perl v5.22.1).</p>\n\n<p>Could I have something odd on my interpreter or code, or is this an expected behavior?</p>\n"}, {"tags": ["python", "perl", "tags", "mp3", "id3"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6456758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f3048d818c978c91773bcb90c43444e?s=128&d=identicon&r=PG&f=1", "display_name": "PCFX", "link": "https://stackoverflow.com/users/6456758/pcfx"}, "edited": false, "score": 0, "creation_date": 1465753849, "post_id": 37777264, "comment_id": 63022128, "body": "Thank your for your answer. Regarding to this page it&#39;s not as easy as i thought to create a valid mp3 file by simply writing a valid mp3 header to a file. Expect from the not working error handling, i can write some tags to these silent mp3 files, which e.g. VLC recognizes."}, {"owner": {"reputation": 14484, "user_id": 2291710, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0232aab5638a75f2286dccc43ecf4df3?s=128&d=identicon&r=PG&f=1", "display_name": "Delgan", "link": "https://stackoverflow.com/users/2291710/delgan"}, "edited": false, "score": 2, "creation_date": 1545472190, "post_id": 37777264, "comment_id": 94635220, "body": "As the link to blank mp3 is dead, I would suggest using this Github repository instead: <a href=\"https://github.com/anars/blank-audio\" rel=\"nofollow noreferrer\">anars/blank-audio</a>."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1465753384, "creation_date": 1465753384, "answer_id": 37777264, "question_id": 37777108, "link": "https://stackoverflow.com/questions/37777108/create-valid-mp3-file-with-python/37777264#37777264", "title": "Create valid .mp3 file with python", "body": "<p>You are incorrect about Perl's <a href=\"https://metacpan.org/pod/MP3::Tag\" rel=\"nofollow\">MP3::Tag</a> module. Its constructor expects an existing valid MP3 file, whose tags you may read and modify. It will not create an MP3 file from scratch</p>\n\n<p><a href=\"http://www.xamuel.com/blank-mp3s/\" rel=\"nofollow\">This site</a> has silent MP3 files with lengths of 1/10 second upwards, and I suggest that you simply download one of those</p>\n"}], "owner": {"reputation": 1, "user_id": 6456758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f3048d818c978c91773bcb90c43444e?s=128&d=identicon&r=PG&f=1", "display_name": "PCFX", "link": "https://stackoverflow.com/users/6456758/pcfx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1578, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465754047, "creation_date": 1465752558, "last_edit_date": 1465754047, "question_id": 37777108, "link": "https://stackoverflow.com/questions/37777108/create-valid-mp3-file-with-python", "title": "Create valid .mp3 file with python", "body": "<p>I saw this piece of perl code, which creates an MP3 object and writes some tags to it. I don't write code in perl but i assume it creates a valid mp3 file with tags.</p>\n\n<pre><code>$mp3 = MP3::Tag-&gt;new('1.mp3');\n$mp3-&gt;title_set('Some_title');\n$mp3-&gt;artist_set('Some_artist');\n$mp3-&gt;update_tags();  \n$mp3-&gt;close();\n</code></pre>\n\n<p>I want to write something similar in python.\nI've tried mutagen and eyeD3 so far, but i was only able to overwrite tags of an existing mp3 file, with this piece of code, i found somewhere:</p>\n\n<pre><code>from mutagen.easyid3 import EasyID3\n\n# works with valid mp3 files, which already have tags\ndef manipulate_id3_tags(path, title, artist, genre):\n    try:\n        meta = EasyID3(path) # HERE I GET ERROR\n        # i assume, if no meta tags where found, it will create some\n        # but it never hits the exception even it is ID3NoHeaderError\n    except ID3NoHeaderError:                          \n        meta = mutagen.File(path, easy=True)    # this also can't be a proper function call\n        meta.add_tags()\n    meta['title'] = title\n    meta['artist'] = artist\n    meta['genre'] = genre\n    meta.save()\n    print(meta)\n</code></pre>\n\n<p>I don't think these modules can create mp3 files from scratch.</p>\n\n<p>I read the <a href=\"https://de.wikipedia.org/wiki/MP3#Spezifikation\" rel=\"nofollow\">wikipedia article</a> about MP3. My idea was to create a .mp3 file in python and write the header to it. Then i filled the rest with junk code.</p>\n\n<p>This is my sample header according to wikipedia article:\n11111111 11111011 11010110 00000100</p>\n\n<pre><code>byte_header = b\"\\xff\\xfb\\xd6\\x04\"\nmp3 = open(path + \"\\\\my_file.mp3\", \"wb\")\nmp3.write(byte_header)\nmp3.write(b\"\\x01\" * 800)\nmp3.close\n</code></pre>\n\n<p>I get an error at the above commented line\n<em>'C:\\Users\\Admin\\Music\\my_file.mp3' doesn't start with an ID3 tag</em></p>\n\n<p>Even if the error handling would work, i don't think this method will work.\nCan anybody help me out here. Just want to create a simple mp3 dummy file, which i can write valid and readable tags to it.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1465752357, "post_id": 37775489, "comment_id": 63021675, "body": "Your code prints <code>There is the name of my ObjectAngel</code> as you requested. What more do you want?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6450361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11c0628f55586899c9db5c134a322251?s=128&d=identicon&r=PG&f=1", "display_name": "A. Fab", "link": "https://stackoverflow.com/users/6450361/a-fab"}, "edited": false, "score": 0, "creation_date": 1465747914, "post_id": 37775580, "comment_id": 63020210, "body": "It would be too simple. I want the subroutine C to know that I have updated the value of the name in file C without telling him explicitly. May be I should change the reference. I don&#39;t know..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 6450361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11c0628f55586899c9db5c134a322251?s=128&d=identicon&r=PG&f=1", "display_name": "A. Fab", "link": "https://stackoverflow.com/users/6450361/a-fab"}, "edited": false, "score": 0, "creation_date": 1465752507, "post_id": 37775580, "comment_id": 63021730, "body": "@A.Fab: Your subroutine <code>myfunctionC</code> just prints the current name field of the object. It doesn&#39;t need to &quot;know&quot; that it has been updated. Please be clearer about what you want"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 1, "user_id": 6450361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11c0628f55586899c9db5c134a322251?s=128&d=identicon&r=PG&f=1", "display_name": "A. Fab", "link": "https://stackoverflow.com/users/6450361/a-fab"}, "edited": false, "score": 0, "creation_date": 1465753169, "post_id": 37775580, "comment_id": 63021952, "body": "@A.Fab: Without calling myfunctionB, you haven&#39;t updated the value, you&#39;ve only provided a way to do so."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1465742957, "creation_date": 1465742957, "answer_id": 37775580, "question_id": 37775489, "link": "https://stackoverflow.com/questions/37775489/how-can-i-get-the-current-value-of-an-object-in-another-file/37775580#37775580", "title": "How can I get the current value of an object in another file?", "body": "<p>Before retrieving the object name, call <code>B::myfunctionB()</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6450361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11c0628f55586899c9db5c134a322251?s=128&d=identicon&r=PG&f=1", "display_name": "A. Fab", "link": "https://stackoverflow.com/users/6450361/a-fab"}, "edited": false, "score": 0, "creation_date": 1465748974, "post_id": 37776314, "comment_id": 63020558, "body": "I&#39;m use to other languages and I am a beginner in perl. I forgot to say that we call the functionB before the functionC. And I want C to know that I have updated the name value."}, {"owner": {"reputation": 1, "user_id": 6450361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11c0628f55586899c9db5c134a322251?s=128&d=identicon&r=PG&f=1", "display_name": "A. Fab", "link": "https://stackoverflow.com/users/6450361/a-fab"}, "edited": false, "score": 0, "creation_date": 1465749672, "post_id": 37776314, "comment_id": 63020786, "body": "I have updated my topic, maybe it would be easier to understand."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 1, "user_id": 6450361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11c0628f55586899c9db5c134a322251?s=128&d=identicon&r=PG&f=1", "display_name": "A. Fab", "link": "https://stackoverflow.com/users/6450361/a-fab"}, "edited": false, "score": 0, "creation_date": 1465749722, "post_id": 37776314, "comment_id": 63020800, "body": "@A.Fab Great.. I just tested your updated code and it outputs <code>Angel</code> not <code>Bob</code>. So I cannot see the problem. (Note: I had to add <code>use lib &#39;.&#39;</code> to load module <code>B</code> and not the core module also named <code>B</code>)"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1465747394, "creation_date": 1465747394, "answer_id": 37776314, "question_id": 37775489, "link": "https://stackoverflow.com/questions/37775489/how-can-i-get-the-current-value-of-an-object-in-another-file/37776314#37776314", "title": "How can I get the current value of an object in another file?", "body": "<p>The main problem here seems to be that there is a CPAN module named <a href=\"https://metacpan.org/pod/B\" rel=\"nofollow\">B</a>. So to override loading that module in place of your own, you could put the current directory at the beginning of <a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"nofollow\"><code>@INC</code></a> by using the <a href=\"http://perldoc.perl.org/lib.html\" rel=\"nofollow\"><code>lib</code></a> pragma:</p>\n\n<p><strong>A.pm</strong></p>\n\n<pre><code>package A;\nuse strict;\nuse warnings;\n\nsub new {\n  my $proto = shift;\n  my $class = ref($proto) || $proto;\n  my $self  = {};\n  $self-&gt;{NAME} = \"Bob\";\n  bless ($self, $class);\n  return $self;\n}\n\n1;\n</code></pre>\n\n<p><strong>B.pm</strong></p>\n\n<pre><code>package B;\nuse strict;\nuse warnings;\nuse A;\nour $MyObjectA = A-&gt;new();\n\nsub myfunctionB {\n $MyObjectA-&gt;{NAME} = \"Angel\";\n}\n\n1;\n</code></pre>\n\n<p><strong>C.pm</strong></p>\n\n<pre><code>package C;\nuse strict;\nuse warnings;\nuse lib '.';\nuse B;\n\nsub myfunctionC {\n    B::myfunctionB();\n    print(\"The name of my Object: \"\n          . $B::MyObjectA-&gt;{NAME}\n          . \"\\n\"\n      );\n}\n\n1;\n</code></pre>\n\n<p><strong>p.pl</strong></p>\n\n<pre><code>use strict;\nuse warnings;\nuse C;\n\nC::myfunctionC();\n</code></pre>\n\n<p>Output of running <code>p.pl</code>:</p>\n\n<pre><code>The name of my Object: Angel\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6450361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11c0628f55586899c9db5c134a322251?s=128&d=identicon&r=PG&f=1", "display_name": "A. Fab", "link": "https://stackoverflow.com/users/6450361/a-fab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1465749413, "creation_date": 1465742387, "last_edit_date": 1465749413, "question_id": 37775489, "link": "https://stackoverflow.com/questions/37775489/how-can-i-get-the-current-value-of-an-object-in-another-file", "title": "How can I get the current value of an object in another file?", "body": "<p>To summarize my problem, I'm not going to copy/paste the code but write a simple code.\nI have 3 files, A.pm, B.pm C.pm.</p>\n\n<p><strong>In A.pm A I have a class with a constructor:</strong></p>\n\n<pre><code>package A;\nuse strict;\nuse warnings;\n\nsub new {\n  my $proto = shift;\n  my $class = ref($proto) || $proto;\n  my $self  = {};\n  $self-&gt;{NAME} = \"Bob\";\n  bless ($self, $class);\n  return $self;\n}\n</code></pre>\n\n<p><strong>In my file B.pm, I have:</strong></p>\n\n<pre><code>package B;\nuse strict;\nuse warnings;\nuse A;\nour $MyObjectA = new A();\nsub myfunctionB {\n $MyObjectA-&gt;{NAME} = \"Angel\";\n}\n</code></pre>\n\n<p><strong>In file C.pm :</strong></p>\n\n<pre><code>package C;\nuse strict;\nuse warnings;\nuse B;\n\nsub myfunctionC {\n   print(\"There is the name of my Object\".$B::MyObjectA-&gt;{NAME}.\"\\n\");\n}\n</code></pre>\n\n<p><strong>In the main p.pl</strong></p>\n\n<pre><code>use strict;\nuse warnings;\nuse B;\nuse C;\n\nB::myfunctionB();\nC::myfunctionC();\n</code></pre>\n\n<p>The results: the subroutine C print Bob, but I would like it to display Angel. How can I do?</p>\n"}, {"tags": ["mysql", "perl", "dbi"], "comments": [{"owner": {"reputation": 8811, "user_id": 6248528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076d6f693bbd13804362e8208009dbcb?s=128&d=identicon&r=PG", "display_name": "Solarflare", "link": "https://stackoverflow.com/users/6248528/solarflare"}, "edited": false, "score": 1, "creation_date": 1465737126, "post_id": 37774569, "comment_id": 63016747, "body": "No. A <code>delete</code> that finds no rows is not an error. You can check in your client code for <code>modified rows = 0</code>. Truncating data though is either a warning or an error, depending on your server config. That might be a better place to start. You should enable strict mode for that, then this will raise an error."}, {"owner": {"reputation": 1385, "user_id": 2758435, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/AC7L0.gif?s=128&g=1", "display_name": "insaner", "link": "https://stackoverflow.com/users/2758435/insaner"}, "reply_to_user": {"reputation": 8811, "user_id": 6248528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076d6f693bbd13804362e8208009dbcb?s=128&d=identicon&r=PG", "display_name": "Solarflare", "link": "https://stackoverflow.com/users/6248528/solarflare"}, "edited": false, "score": 0, "creation_date": 1465737384, "post_id": 37774569, "comment_id": 63016827, "body": "Yes, like I said, I guess it is by design that it is not an error, but I would like to be able to somehow throw an error for tuples that are not found when running a DELETE, since I am using an <code>execute_array</code> and checking to see which (if any) of the tuples failed to result in a DELETE."}], "answers": [{"tags": [], "owner": {"reputation": 1385, "user_id": 2758435, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/AC7L0.gif?s=128&g=1", "display_name": "insaner", "link": "https://stackoverflow.com/users/2758435/insaner"}, "is_accepted": true, "score": 2, "last_activity_date": 1465738451, "creation_date": 1465738451, "answer_id": 37774869, "question_id": 37774569, "link": "https://stackoverflow.com/questions/37774569/force-mysql-to-throw-error-if-no-rows-deleted-trying-to-delete-non-existent-row/37774869#37774869", "title": "Force mysql to throw error if no rows deleted (trying to delete non-existent row)", "body": "<p>I found a workaround for my specific use-case, and am posting as an answer in case it is useful for someone else out there.</p>\n\n<p>In the return for <code>execute_array</code> </p>\n\n<pre><code>$sth-&gt;execute_array( { ArrayTupleStatus =&gt; \\@return_vector } )\n</code></pre>\n\n<p>It actually returns a \"rows modified\" value <em>per row</em> (when successful; when it fails the result is an array ref), so though it is not really an error, I can just check whether each given tuple execution modified non-zero rows (you need to use == not <code>eq</code> though, since the return is '0E0').</p>\n\n<pre><code>if (ref $return_vector[$i])\n    { print \"DELETE failed, reason: $return_vector[$i][1]\"; }\nelsif ($return_vector[$i] == 0)\n    { print \"DELETE failed, no rows matched tuples\"; }\nelse\n    { print \"DELETE successful\"; }\n</code></pre>\n"}], "owner": {"reputation": 1385, "user_id": 2758435, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/AC7L0.gif?s=128&g=1", "display_name": "insaner", "link": "https://stackoverflow.com/users/2758435/insaner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 855, "favorite_count": 1, "accepted_answer_id": 37774869, "answer_count": 1, "score": 1, "last_activity_date": 1465783034, "creation_date": 1465736669, "last_edit_date": 1465737239, "question_id": 37774569, "link": "https://stackoverflow.com/questions/37774569/force-mysql-to-throw-error-if-no-rows-deleted-trying-to-delete-non-existent-row", "title": "Force mysql to throw error if no rows deleted (trying to delete non-existent row)", "body": "<p>I am using Perl DBI (<code>execute_array</code>), but I think that this is more of a <code>mysql</code> issue. </p>\n\n<p>I am trying to <code>DELETE</code> a few rows, and ran into the issue that the command completes successfully with no errors, but my rows are not being deleted (modified rows returns 0E0, i.e., \"zero but true\", i.e., \"0 rows deleted\"). When I tried via <code>PHPMyAdmin</code>, the rows deleted with no issue. After some debugging and long blank stares at my screen, I realized that one of the columns I was using in my DELETE statement had been truncated when added, which explained why the row could not be found by my script, but PHPMyAdmin had no problems with it. However, this did not explain why I was not getting any errors.</p>\n\n<p>So, I guess this is by design, but am wondering if there is a way to get <code>mysql</code> to raise an error when you try to delete something that is not there. I know I can check to see if the number of affected rows is the same as the number of tuples supplied, but this does not tell me which rows were successfully removed, and which tuples referred to non-existent rows (since I am using <code>execute_array</code> for this very purpose). Any ideas?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8685, "user_id": 2743458, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r8R0W.jpg?s=128&g=1", "display_name": "bloodyKnuckles", "link": "https://stackoverflow.com/users/2743458/bloodyknuckles"}, "edited": false, "score": 0, "creation_date": 1465738940, "post_id": 37774462, "comment_id": 63017313, "body": "You need to reset <code>$y</code> to zero, like: <code>} else { $y = 0; last; }</code>."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1465739071, "post_id": 37774462, "comment_id": 63017356, "body": "Also, no need to chomp if you extract by capture groups or split on <code>&#39; &#39;</code>, not <code>&#47; &#47;</code>."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1465743050, "post_id": 37774462, "comment_id": 63018621, "body": "I just wanted to start helping you but got stuck when I realized that <b>you don&#39;t actually tell what your desired output is.</b> Please <a href=\"https://stackoverflow.com/posts/37774462/edit\">edit</a> your question and tell us. Also, what is <code>POS</code>? Usually the term is used for <i>position</i> but in your case it seems to be grammatical type of a word as fetched from F2."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465747621, "post_id": 37774462, "comment_id": 63020092, "body": "Does <code>adv_pl</code> mean &quot;adverb plural&quot;? <i>Paris</i> is a proper noun, and adverbs can&#39;t be plural!"}], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1465743340, "post_id": 37775525, "comment_id": 63018699, "body": "This gives <code>Use of my $_ is experimental at so27.pl line 15. syntax error at so27.pl line 8, near &quot;$POS_hash{&quot; so27.pl had compilation errors.</code>. Your FH2 is never opened and in <code>my $POS_hash{$arr[0]} = $arr[1];</code> the <code>my</code> is wrong."}, {"owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1465749725, "post_id": 37775525, "comment_id": 63020802, "body": "I made a mistake and corrected it. Please check it. now"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1465750068, "post_id": 37775525, "comment_id": 63020896, "body": "<code>Name &quot;main::filename1&quot; used only once</code>, <code>Name &quot;main::filename&quot; used only once</code>, <code>Name &quot;main::FH1&quot; used only once</code>, <code>Name &quot;main::FH2&quot; used only once</code>, <code>Use of uninitialized value $filename in open</code>. Please test your code before publishing it. This doesn&#39;t help the OP at all."}, {"owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "edited": false, "score": 0, "creation_date": 1465754395, "post_id": 37775525, "comment_id": 63022293, "body": "Thanks Borodin for helping me to recognize errors in the code"}, {"owner": {"reputation": 27, "user_id": 5618951, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f64af1c8dfefafdb01b1b63aba0bd9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5618951/daniel"}, "edited": false, "score": 0, "creation_date": 1465762979, "post_id": 37775525, "comment_id": 63025105, "body": "Great, thanks, it works, in your opinion, it&#39;s better to use hash than arrays or list ? or in wich situation we use hash or arrays?"}, {"owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "edited": false, "score": 0, "creation_date": 1465825315, "post_id": 37775525, "comment_id": 63048823, "body": "When you have some key value kind of problem then use of hash is much good."}], "tags": [], "owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "is_accepted": false, "score": -1, "last_activity_date": 1465754294, "last_edit_date": 1465754294, "creation_date": 1465742618, "answer_id": 37775525, "question_id": 37774462, "link": "https://stackoverflow.com/questions/37774462/next-line-array-if-a-condition-is-achieved/37775525#37775525", "title": "Next line array if a condition is achieved", "body": "<p>You can solve the above problem in different way like : </p>\n\n<p>First read the POS file and put it in hash </p>\n\n<p>Code :</p>\n\n<pre><code>my $filename = \"F2\";\nopen FH2, $filename or die \"Error\";\nmy %POS_hash;\nwhile(&lt;FH2&gt;)\n{\n    chomp($_);\n    my @arr = split(/ /, $_); # you can change the split function\n    $POS_hash{$arr[0]} = $arr[1];\n}\n</code></pre>\n\n<p>Now read your file and replace it with the POS</p>\n\n<pre><code>my $filename1 = \"F1\";\nopen FH1, $filename1 or die \"Error\";\nwhile(&lt;FH1&gt;)\n{\n   chomp($_);\n   my @arr = split(/ /, $_); # you can change the split function\n  foreach my $val (@arr)\n  {\n     if(exists $POS_hash{$val})\n     {\n        print \"$POS_hash{$val}\\t\";\n     }\n  }\n  print \"\\n\";\n\n}\n</code></pre>\n\n<p>I believe this is a better way for your problem. Hope this will solve your problem. </p>\n"}, {"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 1, "last_activity_date": 1465749301, "creation_date": 1465749301, "answer_id": 37776642, "question_id": 37774462, "link": "https://stackoverflow.com/questions/37774462/next-line-array-if-a-condition-is-achieved/37776642#37776642", "title": "Next line array if a condition is achieved", "body": "<p>There are some issues in your script.</p>\n\n<ul>\n<li>You <strong><em>must always</em></strong> <code>use strict; use warnings;</code> to show the most common syntax and/or typing errors, unused variables, etc.</li>\n<li>You should always use the three-parameter <code>open</code> and no global FILEHANDLEs (see <a href=\"http://perldoc.perl.org/perlopentut.html\" rel=\"nofollow\">opentut</a>).</li>\n<li>You should use some sensible names for your filehandles, not FH, FH1, etc. but <code>$fh_sentences</code> and <code>$fh_grammar</code> (or other meaningful names).</li>\n</ul>\n\n<p>So far for the general part. Now let's get more specific:</p>\n\n<ul>\n<li>Your outer loop (<code>F</code>) reads the sentences one by one. The next loop (<code>F2</code>) reads the grammatical types but it does so only once for the first sentence. When the F2 file is read, subsequent calls to <code>&lt;F2&gt;</code> will always return <code>undef</code> because the file was already read. You have to reset the filepointer to the beginning of the file after each sentence or -- even better -- read the file F2 in advance and store its contents in a hash.</li>\n<li>Iterating over an array of words in a sentence is easier with <code>foreach my $word (@words)</code>. No need to do the housekeeping of index variables (like <code>$y</code>) yourself.</li>\n<li><code>chomp</code>ing and <code>split</code>ting the sentences should be moved outside the F2 loop because <code>$ligne</code> doesn't change in the loop and only burns CPU cycles.</li>\n</ul>\n\n<p>Putting this together I end up with this:</p>\n\n<pre><code>use strict;\nuse warnings;\n\n# Read the grammar file, F2, into a hash:\nmy %grammar;\nopen( my $fh_grammar, '&lt;', 'F2' ) or die \"Pb pour ouvrir F2: $!\\n\";\nwhile( my $ligne = &lt;$fh_grammar&gt; ) {\n    my ($prem, $deux) = ( $ligne =~ m/^\\W*(\\w+)\\W+(\\w+)/ );\n    $grammar{$prem} = $deux;\n}\nclose($fh_grammar);\n\n# The hash is now:\n#   %grammar = (\n#       'he'    =&gt; 'pro',\n#       'lives  =&gt; 'verb',\n#       'in'    =&gt; 'prep',\n#       'paris' =&gt; 'adv_pl'\n#       'jokes' =&gt; 'verb'\n#   );\n\n# Read the sentences from F1 and check the grammar:\nopen( my $fh_sentences, '&lt;', 'F1' ) or die \"Pb pour ouvrir F1: $!\\n\";\nwhile( my $ligne = &lt;$fh_sentences&gt; ) {\n    my @words = split(/\\s+/, $ligne );\n    foreach my $word (@words) {\n        print \"z:    $word\\n\";\n        if ( exists $grammar{$word} ) {\n            print \"true; $grammar{$word}\\n\";\n        }\n    }\n    print \"\\n\";\n}\nclose($fh_sentences);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>z:    he\ntrue; pro\nz:    lives\ntrue; verb\nz:    in\ntrue; prep\nz:    paris\ntrue; adv_pl\n\nz:    he\ntrue; pro\nz:    jokes\ntrue; verb\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5618951, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f64af1c8dfefafdb01b1b63aba0bd9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5618951/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1465754294, "creation_date": 1465735911, "last_edit_date": 1465738030, "question_id": 37774462, "link": "https://stackoverflow.com/questions/37774462/next-line-array-if-a-condition-is-achieved", "title": "Next line array if a condition is achieved", "body": "<p>I have a text in a file F1 each sentence in line, and another file contain the part of speech(POS) of each word in the text for example:</p>\n\n<p>F1 contains:</p>\n\n<pre><code>he lives in paris\\n\nhe jokes\n</code></pre>\n\n<p>F2 contains:</p>\n\n<pre><code>he pro\\n\nlives verb\\n\nin prep\\n\nparis adv_pl\\n\nhe pro\\n\njokes verb\\n\n</code></pre>\n\n<p>I would like to parse each sentence of F1 and extract the POS of each word. I arrived to extract the POS of the first sentence, but the program can't parse the second line. This is the code:</p>\n\n<pre><code>open( FILE,    $filename )       || die \"Probl\u00e8me d'ouverture du ficher en entr\u00e9e\";\nopen( FILEOUT, \"&gt;$filenameout\" ) || die \"Probl\u00e8me d'ouverture\";\n\nopen( F,  \"/home/ahmed/Bureau/test/corpus.txt\" ) || die \" Pb pour ouvrir\";\nopen( F2, \"/home/ahmed/Bureau/test/corp.txt\" )   || die \" Pb pour ouvrir\";\nmy $z;\nmy $y = 0;\nmy $l;\nmy $li;\nmy $pos;\n\nwhile ( $ligne = &lt;F&gt; ) {\n\n    while ( $li = &lt;F2&gt; ) {    # F2 POS\n        chomp($li);\n        # prem contain the first word of F2 in each line, \n        # deux contain the POS of this word\n        ( $prem, $deux ) = ( $li =~ m/^\\W*(\\w+)\\W+(\\w+)/ );\n        print \"premier: $prem\\n\";\n\n        chomp($ligne);\n        @val = split( / /, $ligne );   # corpus de texte\n        $l = @val;\n\n        while ( $y &lt; $l ) {  # $l length of sentence\n            $z = $val[$y];\n            print \"z : $z\\n\";\n\n            if ( $z eq $prem ) {\n                print \"true\\n\";\n                $pos .= \"POSw\" . $y . \"=\" . $deux . \" \";\n                ++$y;\n            } else {\n                last;\n            }\n        }\n    }\n    print FILEOUT \"$pos\\n\";\n    $pos = \"\";\n}\n</code></pre>\n\n<p>The result I had in the terminal:</p>\n\n<pre><code>premier: he\nz : he\ntrue\n\npremier : lives\nz : lives\ntrue\n\npremier : in\nz : in\ntrue\n\npremier : paris\nz : paris\ntrue\npremier : he\npremier : jokes\n</code></pre>\n\n<p>The first sentence has 4 words, when it pass 4, we must go to the next line in the text, I can't arrive to solve it.</p>\n"}, {"tags": ["perl", "reference", "tk"], "comments": [{"owner": {"reputation": 174, "user_id": 5889745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6e1d09e53789c17ad12bef08a52e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorgen", "link": "https://stackoverflow.com/users/5889745/jorgen"}, "reply_to_user": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1465736260, "post_id": 37773890, "comment_id": 63016499, "body": "reinierpost, I am still confused :("}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 1, "creation_date": 1465738584, "post_id": 37773890, "comment_id": 63017197, "body": "@reinierpost That&#39;s completely unrelated."}], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1465737992, "post_id": 37774735, "comment_id": 63017006, "body": "Great. Just like the OP I also googled and fiddled around with <code>\\ </code>, <code>&amp;</code>, <code>{</code>, and <code>}</code> and any combination of them with no result. Using a closure is the trick. I verified with <code>IO::File</code> and <code>$fh-&gt;print</code> instead of <code>Tk</code> because I haven&#39;t installed the latter."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1465738104, "post_id": 37774735, "comment_id": 63017043, "body": "@PerlDog Yes, I was (and am still) a little bit confused about this behavior :)"}, {"owner": {"reputation": 174, "user_id": 5889745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6e1d09e53789c17ad12bef08a52e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorgen", "link": "https://stackoverflow.com/users/5889745/jorgen"}, "edited": false, "score": 0, "creation_date": 1465738838, "post_id": 37774735, "comment_id": 63017273, "body": "Excellent! I had fiddled around with the sub { but my imagination didn&#39;t get round to add (@_)! Thanks!"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1465738277, "last_edit_date": 1465738277, "creation_date": 1465737624, "answer_id": 37774735, "question_id": 37773890, "link": "https://stackoverflow.com/questions/37773890/how-do-i-execute-a-tk-canvas-function-stored-as-a-reference-in-a-hash-table/37774735#37774735", "title": "How do I execute a Tk-Canvas function stored as a reference in a hash table?", "body": "<p>The following seems to work:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Tk;\n\nmy $mw = MainWindow-&gt;new;\nmy $w = $mw-&gt;Canvas(-width =&gt; 1200, -height =&gt; 800);\n$w-&gt;pack;\n\nmy %xfun = (\n    b =&gt; sub { $w-&gt;createOval(@_); },\n);\n\n$xfun{b}-&gt;(200, 200, 250, 250, -fill=&gt;'red');\n\nMainLoop;\n</code></pre>\n\n<p><strong>Note:</strong> </p>\n\n<p>I assumed that your original call:</p>\n\n<pre><code>$xfun{'b'}(200, 200, 250, 250, -fill=&gt;'red');\n</code></pre>\n\n<p>did not work because it missed the object <code>$w</code> as first arg, but when I \ntried passing <code>$w</code> explicitly as the first argument:</p>\n\n<pre><code>$xfun{'b'}($w, 200, 200, 250, 250, -fill=&gt;'red');\n</code></pre>\n\n<p>it still did not work.. I got error:</p>\n\n<pre><code>wrong # args: should be \".canvas create oval coords ?arg arg ...?\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1465738752, "post_id": 37774868, "comment_id": 63017248, "body": "Yes, this good.. I also finally found that the hash definition actually called <code>createOval</code> and not returned a code ref. But I was not able to get the coderef correctly even when using <code>\\&amp;{&quot;Tk::Canvas::createOval&quot;}</code>"}, {"owner": {"reputation": 174, "user_id": 5889745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6e1d09e53789c17ad12bef08a52e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorgen", "link": "https://stackoverflow.com/users/5889745/jorgen"}, "edited": false, "score": 0, "creation_date": 1465738994, "post_id": 37774868, "comment_id": 63017328, "body": "Great too! Thanks!"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1465739060, "post_id": 37774868, "comment_id": 63017349, "body": "@H&#229;konH&#230;gland That can be written as <code>\\&amp;Tk::Canvas::createOval</code>, which should work assuming <code>Tk::Canvas</code> is the correct package (the <code>$w-&gt;can(&#39;createOval&#39;)</code> method takes inheritance into account) and you pass $w as the first argument."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 3, "last_activity_date": 1465739773, "last_edit_date": 1465739773, "creation_date": 1465738442, "answer_id": 37774868, "question_id": 37773890, "link": "https://stackoverflow.com/questions/37773890/how-do-i-execute-a-tk-canvas-function-stored-as-a-reference-in-a-hash-table/37774868#37774868", "title": "How do I execute a Tk-Canvas function stored as a reference in a hash table?", "body": "<blockquote>\n  <p>If I treat $w->... as a reference, the error message is \"wrong number of args: ...\"</p>\n</blockquote>\n\n<p>I don't know what you mean by \"treat as a reference\".</p>\n\n<p>Your code doesn't work as written because <code>$w-&gt;createOval</code> is a method call without arguments, same as <code>$w-&gt;createOval()</code>.</p>\n\n<p>With <code>\\&amp;$w-&gt;createOval</code> it parses as <code>\\((&amp;$w)-&gt;createOval)</code>, which is (mostly) the same as <code>\\($w-&gt;(@_)-&gt;createOval)</code>:</p>\n\n<ul>\n<li>treat <code>$w</code> as a code reference and call it with the current parameter list, <code>@_</code> (this is where your error occurs because <code>$w</code> is actually an object)</li>\n<li>take the return value and call the <code>createOval</code> method on it</li>\n<li>take a reference to the return value of <code>createOval</code></li>\n</ul>\n\n<p>You can get a reference to the <code>createOval</code> sub using <a href=\"https://metacpan.org/pod/UNIVERSAL\" rel=\"nofollow\"><code>$w-&gt;can('createOval')</code></a>, but that doesn't help you because that's just the function (without the object). To call it, you'd have to explicitly pass in <code>$w</code> as the first argument (this happens implicitly in method calls):</p>\n\n<pre><code>my %xfun = (\n    'b' =&gt; $w-&gt;can('createOval'),\n);\n\n$xfun{'b'}($w, 200, 200, 250, 250, -fill=&gt;'red');\n</code></pre>\n\n<hr>\n\n<p>The most direct solution is <code>b =&gt; sub { $w-&gt;createOval(@_) }</code>, i.e. wrap the method call in a proxy sub that forwards its arguments.</p>\n"}], "owner": {"reputation": 174, "user_id": 5889745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6e1d09e53789c17ad12bef08a52e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorgen", "link": "https://stackoverflow.com/users/5889745/jorgen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 37774735, "answer_count": 2, "score": 1, "last_activity_date": 1465739773, "creation_date": 1465732223, "last_edit_date": 1465732651, "question_id": 37773890, "link": "https://stackoverflow.com/questions/37773890/how-do-i-execute-a-tk-canvas-function-stored-as-a-reference-in-a-hash-table", "title": "How do I execute a Tk-Canvas function stored as a reference in a hash table?", "body": "<p>I am trying to execute a Tk-function stored as a reference to a function in a hash table. In the very simplified example below, the code should draw a big red dot (i.e. do what line 14 does). I can't make a valid reference to createOval(), neither with $w-> in the hash table, nor with it moved down to line 13. I have googled for this high and low, but to no avail. What am I missing?</p>\n\n<p>If I treat $w->... as a reference, the error message is \"wrong number of args: ...\" and if I stuff \\&amp; in front of $w in line 10: \"Not a CODE reference at a11.pl line 9.\"</p>\n\n<p>This is dead easy to do in Python: just stuff w.create_oval into the dictionary and it works.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Tk;\n\nmy $mw = MainWindow-&gt;new;\nmy $w = $mw-&gt;Canvas(-width =&gt; 1200, -height =&gt; 800);\n$w-&gt;pack;\n\nmy %xfun = (\n    'b' =&gt; $w-&gt;createOval\n);\n\n$xfun{'b'}(200, 200, 250, 250, -fill=&gt;'red');\n#$w-&gt;createOval(200, 200, 250, 250, -fill=&gt;'red');\n\nMainLoop;\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "edited": false, "score": 1, "creation_date": 1465717611, "post_id": 37771796, "comment_id": 63011942, "body": "Oh I see. <code>printf &quot;%s\\n&quot;, (scalar `echo &quot;hi&quot;; echo 45; ls`);</code> would actually have the intended behavior."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 2, "last_activity_date": 1465716770, "creation_date": 1465716770, "answer_id": 37771796, "question_id": 37771176, "link": "https://stackoverflow.com/questions/37771176/perl-only-executes-part-of-shell-command-and-emits-warning-redundant-argument-i/37771796#37771796", "title": "Perl only executes part of shell command and emits warning &#39;redundant argument in printf&#39; in command substitution", "body": "<p>You are using backticks in list context, so the expression</p>\n\n<pre><code>`echo \"hi${bar}ls`\n</code></pre>\n\n<p>will run the command</p>\n\n<pre><code> `echo \"hi\"; echo 45; ls`\n</code></pre>\n\n<p>and return each line of output in a separate element, for example</p>\n\n<pre><code>( \"hi\",\n  \"45\",\n  \"foo\",\n  ...     # other files in current directory\n )\n</code></pre>\n\n<p>But the template in <code>printf</code> (<code>\"%s\\n\"</code>) only has one placeholder, so <code>printf</code> gets confused and issues the warning, just as if you said</p>\n\n<pre><code>perl -we 'printf \"%d\\n\", 1, 2, 3, 4'\n</code></pre>\n"}], "owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 590, "favorite_count": 1, "accepted_answer_id": 37771796, "answer_count": 1, "score": 4, "last_activity_date": 1465716770, "creation_date": 1465711102, "last_edit_date": 1465713729, "question_id": 37771176, "link": "https://stackoverflow.com/questions/37771176/perl-only-executes-part-of-shell-command-and-emits-warning-redundant-argument-i", "title": "Perl only executes part of shell command and emits warning &#39;redundant argument in printf&#39; in command substitution", "body": "<p>The following has been tested with perl 5.24 on OS X 10.11.5.</p>\n\n<p>I wrote a short program (<code>perl-embed.pl</code>) to determine whether perl escapes shell metacharacters when interpolating strings into backticks (it doesn't).</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $bar = '\" ; echo 45 ; \"';\n\nprintf \"%s\\n\", `echo \"hi${bar}ls\"`;\n</code></pre>\n\n<p>I was very surprised to see that this generated a warning and only executed part of the command.</p>\n\n<pre><code>$ perl perl-embed.pl\nRedundant argument in printf at perl-embed.pl line 6.\nhi\n</code></pre>\n\n<p>For comparison the following program (<code>perl-embed2.pl</code>) with <code>print</code> instead of <code>printf</code> runs without warnings.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $bar = '\" ; echo 45 ; \"';\n\nprint `echo \"hi${bar}ls\"`;\n</code></pre>\n\n<p>I then ran it.</p>\n\n<pre><code>$ perl perl-embed2.pl\nhi\n45\n&lt;contents of current working directory&gt;\n</code></pre>\n\n<p><code>perl-embed.pl</code>'s behavior is totally unexpected. <code>printf</code> interpolates the contents of strings just fine in other contexts, even if the string contains weird characters.</p>\n\n<pre><code>$ perl -Mstrict -Mwarnings -e 'printf \"%s\\n\", q[5]'\n5\n\n$ perl -Mstrict -Mwarnings -e 'printf \"%s\\n\", q[\"]'\n\"\n</code></pre>\n\n<p>The system perl (version 5.18) does not emit this warning, but seems not to execute <code>ls</code> or echo <code>45</code> like we would expect</p>\n\n<pre><code>$ /usr/bin/perl perl-embed.pl\nhi\n\n$ /usr/bin/perl perl-embed2.pl\nhi\n45\n&lt;contents of current directory&gt;\n</code></pre>\n\n<p>Why is perl behaving this way? Note that in every case perl is exiting normally.</p>\n"}, {"tags": ["json", "perl", "reverse-proxy", "mod-proxy", "mod-perl"], "comments": [{"owner": {"reputation": 1444, "user_id": 6062567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e87060f0ce67ed68a097ac5186027c5?s=128&d=identicon&r=PG&f=1", "display_name": "oldtechaa", "link": "https://stackoverflow.com/users/6062567/oldtechaa"}, "edited": false, "score": 0, "creation_date": 1465731334, "post_id": 37771013, "comment_id": 63015170, "body": "I&#39;m afraid I don&#39;t have the experience to help, but it is recommended to use <code>use warnings</code> and <code>use strict</code> in production (or not) code."}], "owner": {"reputation": 1339, "user_id": 3856437, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/a3d9d269ee26732dae0f27e2264ea466?s=128&d=identicon&r=PG&f=1", "display_name": "user3856437", "link": "https://stackoverflow.com/users/3856437/user3856437"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1465709186, "creation_date": 1465709186, "question_id": 37771013, "link": "https://stackoverflow.com/questions/37771013/how-to-debug-mod-perl-with-reverse-proxy-of-mod-proxy", "title": "How to debug mod_perl with reverse proxy of mod_proxy?", "body": "<p>I'm new to this with a very low background so bear with me. I want to debug my issue of prematurely terminating loading the page from the reverse proxied site as it request something like filename.json file. I noticed in the request header it has Content-Type:application/x-www-form-urlencoded, and the response headers are</p>\n\n<pre><code>$WSEP:\nCache-Control:no-cache\nConnection:Keep-Alive\nContent-Encoding:gzip\nContent-Language:en-US\nContent-Length:55\nContent-Type:text/html;charset=UTF-8\nDate:Sun, 12 Jun 2016 04:54:18 GMT\nExpires:Thu, 01 Jan 1970 00:00:00 GMT\nKeep-Alive:timeout=5, max=97\nServer:Apache\nVary:Accept-Encoding\nX-Cnection:Close\n</code></pre>\n\n<p>but I'm wondering why it's text/html content-type when it's json, so I tried manipulating the response with application/json and even trying to instead of downloading the page from the remote server, I made it download locally from my server /var/www/html by creating dummy json file. I was thinking because this is json file it should be application/json not text/html as Content-Type. But the issue still exists. It just stops when it reached requesting that json file.</p>\n\n<p>Now my question is, how can I make sure that requesting to that json is the culprit? Or more appropriately, how can I debug the mod_perl. I tried adding</p>\n\n<pre><code>use warning;\n</code></pre>\n\n<p>in the code</p>\n\n<pre><code>PerlWarn On\n</code></pre>\n\n<p>in the apache config but still I don't see any warning/errors that will guide me to debug.</p>\n\n<p>Can you give me advice on how to do find the fault?</p>\n\n<p>By the way, the site of that json file being requested returns 404 but I assume that the proxy server should ignore it and continue downloading other files.</p>\n"}, {"tags": ["java", "perl"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 6, "creation_date": 1465698202, "post_id": 37770125, "comment_id": 63008844, "body": "Have you tried a full /path/to/perl ?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1465700167, "post_id": 37770125, "comment_id": 63009079, "body": "<a href=\"http://stackoverflow.com/questions/4272956/run-a-sub-process-provide-input-and-output-to-it-correctly-in-java\" title=\"run a sub process provide input and output to it correctly in java\">stackoverflow.com/questions/4272956/&hellip;</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1465784431, "post_id": 37770125, "comment_id": 63029397, "body": "What error is sent to STDERR?"}], "answers": [{"tags": [], "owner": {"reputation": 125, "user_id": 6817932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tJYfd.jpg?s=128&g=1", "display_name": "Paulo Berezini", "link": "https://stackoverflow.com/users/6817932/paulo-berezini"}, "is_accepted": false, "score": 0, "last_activity_date": 1506342066, "creation_date": 1506342066, "answer_id": 46405137, "question_id": 37770125, "link": "https://stackoverflow.com/questions/37770125/calling-perl-from-java/46405137#46405137", "title": "Calling perl from java", "body": "<p>You need to set full path to your dir <code>perl\\bin</code></p>\n\n<p>Example command to do this in CMD:</p>\n\n<pre><code>SET PATH=%PATH%;c:\\perl\\bin\n</code></pre>\n\n<p>and after that you can use:</p>\n\n<pre><code>Process p = Runtime.getRuntime().exec(\"perl C:/Users/Mahish/Documents/PLUa/src/test.pl\");\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6454844, "user_type": "registered", "profile_image": "https://graph.facebook.com/1160706083974430/picture?type=large", "display_name": "Mahish Kewalramani", "link": "https://stackoverflow.com/users/6454844/mahish-kewalramani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 268, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1506342066, "creation_date": 1465697621, "question_id": 37770125, "link": "https://stackoverflow.com/questions/37770125/calling-perl-from-java", "title": "Calling perl from java", "body": "<p>How do I call a perl script from java? Currently I have this code but a create process error =2 keeps coming up.</p>\n\n<pre><code>Process p = Runtime.getRuntime().exec(\"perl C:/Users/Mahish/Documents/PLUa/src//test.pl\");\n</code></pre>\n"}, {"tags": ["perl", "events", "timer", "waitpid", "anyevent"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1465695602, "post_id": 37769891, "comment_id": 63008516, "body": "I don&#39;t know whether this is relevant, but the <code>AnyEvent</code> documentation says this <i>&quot;This means you cannot create a child watcher as the very first thing in an AnyEvent program, you have to create at least one watcher before you fork the child&quot;</i>"}, {"owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465700476, "post_id": 37769891, "comment_id": 63009125, "body": "Nope, the behavior remains the same even if the timer watcher is created before the fork. I&#39;ll update my example to do that; thanks for the info!"}], "answers": [{"comments": [{"owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "edited": false, "score": 0, "creation_date": 1465820742, "post_id": 37776359, "comment_id": 63045526, "body": "That answer seems correct, but also to show that this event loop is really, really broken. What if the blocking operation in the timer callback could take a variable amount of time? Then there&#39;s a chance that other event emitters could never fire because things pre-empt them; there&#39;s no underlying queue. Sigh. Marking as accepted, with sadness :p"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "edited": false, "score": 0, "creation_date": 1465823834, "post_id": 37776359, "comment_id": 63047718, "body": "@ZacB: The child exit event is not lost, it only does not run because you are busy doing other stuff. If you stop doing other stuff the event gets delivered. Its not a problem of the event loop but that you are asking for the impossible, i.e. executing every 500ms a task which takes one second in a single-threaded application. It&#39;s like trying to buy goods for $100 when you only have $50."}, {"owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "edited": false, "score": 0, "creation_date": 1465824369, "post_id": 37776359, "comment_id": 63048099, "body": "It seems more reasonable to have interval timers work on a &quot;at most once every X seconds&quot; model, and queue events internally. That is, the event loop run() function should check timers, and push callbacks into a queue (signals etc., when they fire, should also push callbacks onto a queue). After that initial &quot;ready event detection&quot; step is run, callbacks should be popped and run from the queue in FIFO order."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "edited": false, "score": 0, "creation_date": 1465826648, "post_id": 37776359, "comment_id": 63049840, "body": "@ZacB: Changing the loop would make it behave differently but there is still no way to buy all the goods for $100 if you only have $50. All what you&#39;ve changed is the selection of goods you can buy.  And what might be a more reasonable selection for you is still a behavior change and this might affect others in a negative way. Again: the problem is not the event loop but that you are asking for the impossible."}, {"owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "edited": false, "score": 0, "creation_date": 1466020048, "post_id": 37776359, "comment_id": 63149373, "body": "I don&#39;t think it&#39;s as simple as you say; a queued model is just a different set of guarantees for event delivery. An interval doesn&#39;t have to mean &quot;run this roughly every $duration even at the expense of other pending events_&quot;; it can also mean &quot;run this every $duration unless there are pending events&quot;. It&#39;s possible to simulate this by deferring AnyEvent intervals until the next event run; I&#39;ll put that in a separate answer (yours is still the correct one)."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "edited": false, "score": 0, "creation_date": 1466021230, "post_id": 37776359, "comment_id": 63149993, "body": "@ZacB: your code explicitly says that it should execute every 0.5 seconds a tasks which runs 1 second, that&#39;s how interval is defined. Additionally you wait for a child exit. Whatever the event loop does - it will not be possible to reach all the given goals in a single threaded application and thus the implementation needs to be unfair against some tasks. You are complaining that the implementation deals with this impossible task unfair in the wrong way because you prefer it to be unfair in another way. In my opinion it is a bad idea to ask for impossible things at all."}, {"owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "edited": false, "score": 0, "creation_date": 1466022558, "post_id": 37776359, "comment_id": 63150693, "body": "It&#39;s perfectly possible to make event loops that deal with this scenario. In fact, I&#39;d go so far as to say that most event loops deal with it properly. No interval fires exactly on time; all computations have an overhead. If that overhead is unpredictable, the event loop shouldn&#39;t starve random emitters."}, {"owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "edited": false, "score": 0, "creation_date": 1466022595, "post_id": 37776359, "comment_id": 63150712, "body": "Most JavaScript engines (some of the most reliability-critical event loops in existence) use queues behind the call(back) stacks they present to users to deal with this exact situation (user callbacks that can block the loop for an arbitrary amount of time). See: <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop</a>  <a href=\"http://stackoverflow.com/questions/21607692/understanding-the-event-loop\" title=\"understanding the event loop\">stackoverflow.com/questions/21607692/&hellip;</a>"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "edited": false, "score": 0, "creation_date": 1466023252, "post_id": 37776359, "comment_id": 63151013, "body": "@ZacB: again, the child exit event is <b>not lost</b>. Once you&#39;ve stopped the timers the event will be delivered. And an event queue will just be differently unfair and in the worst case just grow longer and longer or just skip the wrong kind of events. Their simply is no fairness if you are overcommitting resources, just different kinds of unfairness. If you don&#39;t want an interval timer but instead reestablish the timer after the last timer finished then you should exactly do this and not use an interval timer."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 2, "last_activity_date": 1465747577, "creation_date": 1465747577, "answer_id": 37776359, "question_id": 37769891, "link": "https://stackoverflow.com/questions/37769891/why-wont-anyeventchild-callbacks-ever-run-if-interval-timer-events-are-always/37776359#37776359", "title": "Why won&#39;t AnyEvent::child callbacks ever run if interval timer events are always ready?", "body": "<p>The interval is the time between the start of each timer callback, i.e. not the time between the end of a callback and the start of the next callback. You setup a timer with interval 0.5 and the action for the timer is to sleep one second.  This means that once the timer is triggered it will be triggered immediately again and again because the interval is always over after the timer returned.</p>\n\n<p>Thus depending on the implementation of the event loop it might happen that no other events will be processed because it is busy running the same timer over and over. I don't know which underlying event loop you are using (check <code>$AnyEvent::MODEL</code>) but if you look at the source code of <a href=\"https://metacpan.org/source/MLEHMANN/AnyEvent-7.12/lib/AnyEvent/Loop.pm\" rel=\"nofollow\">AnyEvent::Loop</a> (the loop for the pure Perl implementation, i.e. model is <code>AnyEvent::Impl::Perl</code>) you will find the following code:</p>\n\n<pre><code>   if (@timer &amp;&amp; $timer[0][0] &lt;= $MNOW) {\n      do {\n         my $timer = shift @timer;\n         $timer-&gt;[1] &amp;&amp; $timer-&gt;[1]($timer);\n      } while @timer &amp;&amp; $timer[0][0] &lt;= $MNOW;\n</code></pre>\n\n<p>As you can see it will be busy executing timers as long as there are timers which need to run. And with your setup of the interval (0.5) and the behavior of the timer (sleep one second) there will always be a timer which needs to be executed.</p>\n\n<p>If you instead change your timer so that there is actual room for the processing of other events by setting the interval to be larger than the blocking time (like 2 seconds instead of 0.5) everything works fine:</p>\n\n<pre><code>...\ninterval =&gt; 2,\ncb =&gt; sub {\n    sleep 1; # Simulated blocking operation. Sleep less than the interval!!\n    say \"timer\";\n\n\n...\ntimer\nchild\ntimer\ntimer\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1466023899, "post_id": 37845061, "comment_id": 63151323, "body": "I think this should be  a call to <code>deferred_interval</code> instead if the undefined <code>chain_interval</code>.  But in any case this is no longer an interval timer (i.e. fixed difference between timers), but a timer which gets established after the original callback was finished. And this way you don&#39;t work around &quot;a very flawed behavior&quot; but you simply don&#39;t expect impossible things from the event loop any longer."}, {"owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1466025036, "post_id": 37845061, "comment_id": 63151930, "body": "Fixed, thanks!  Again (though we have probably beaten this one to death in the question comments), I think that predictable &quot;unfairness&quot; (really just fair callback scheduling for fully utilized event loops) is vastly preferable compared to starvation of other event emitters based on emitter <i>type</i>. When running arbitrary user code, I think that a robust event loop implementation must do predictable things even in the face of unexpected blockage; queueing is one way around that. Explicit emitter precedence (really just priority queueing) is another. Potentially-indefinite starvation is not."}, {"owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1466028071, "post_id": 37845061, "comment_id": 63153226, "body": "For an example of what I mean, try running something like this via Node (which has a queueing event loop): <a href=\"http://pastebin.com/AR09NqXw\" rel=\"nofollow noreferrer\">pastebin.com/AR09NqXw</a>  The loop is still fully utilized (the blocking time for callbacks is greater than the width of any timers installed), but interval queues don&#39;t &quot;fill up&quot; and leak memory, and signals/immediate events/etc are still dequeued and run in FIFO order."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1466054270, "post_id": 37845061, "comment_id": 63159858, "body": "Since your want continue with this discussion... Again, you are expecting a specific kind of unfairness probably because you are used to exactly this kind of unfairness. But in my opinion the main problem is still that you are  asking for the impossible, i.e. the program should not require the event loop to be <b>permanently</b> unfair. You current solution fixes this by not asking for the impossible anymore which is the right approach.  Again, the child exit event is not lost. It is only not delivered as long as you are are keeping the loop busy with other tasks."}, {"owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1466086488, "post_id": 37845061, "comment_id": 63180735, "body": "I understand that it&#39;s not lost; that&#39;s why I&#39;m referring to &quot;starvation&quot;, not &quot;loss&quot;. All event loops are, by your definition, permanently unfair: if two timers are (in the same tick) scheduled to run 1 second in the future, one of the two callbacks will have to wait for the other to complete, so it won&#39;t fire on time; that&#39;s &quot;unfair&quot;. Predictable unfairness is much more useful than unpredictable unfairness; AnyEvent handles the two-timers case correctly (fires one then the other), but some other emitter types (signals) are not handled the same way. That&#39;s inconsistent and dangerous."}, {"owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1466086852, "post_id": 37845061, "comment_id": 63181045, "body": "One of the benefits of event loops versus exact scheduling (threads) is that they can <i>multiplex</i> lots of callbacks, even when fully utilized/never blocking waiting for events. A multiplexer is going to have some amount of inherent unfairness, and it should minimize that (e.g. by using an internal clock so that deferred timers don&#39;t wait for <code>user time + timer time</code>, which is why my workaround is a poor solution), but some degree of predictability or fairness is key. Many event loops are designed to run at full utilization: events are ready every time user callbacks return control to the loop."}], "tags": [], "owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1473188999, "last_edit_date": 1473188999, "creation_date": 1466022128, "answer_id": 37845061, "question_id": 37769891, "link": "https://stackoverflow.com/questions/37769891/why-wont-anyeventchild-callbacks-ever-run-if-interval-timer-events-are-always/37845061#37845061", "title": "Why won&#39;t AnyEvent::child callbacks ever run if interval timer events are always ready?", "body": "<p><strong>Update</strong> this issue can be resolved using the fixes present in <a href=\"https://github.com/zbentley/AnyEvent-Impl-Perl-Improved/tree/io-starvation\" rel=\"nofollow\">https://github.com/zbentley/AnyEvent-Impl-Perl-Improved/tree/io-starvation</a></p>\n\n<p>@steffen-ulrich's answer is correct, but points out a very flawed behavior in AnyEvent: since there is no underlying event queue, certain kinds of events that always report \"ready\" can indefinitely pre-empt others.</p>\n\n<p>Here is a workaround:</p>\n\n<p>For interval timers that are always \"ready\" due to a blocking operation that happens outside of the event loop, it is possible to prevent starvation by chaining interval invocations onto the next run of the event loop, like this:</p>\n\n<pre><code>use AnyEvent;\n\nsub deferred_interval {\n    my %args = @_;\n    # Some silly wrangling to emulate AnyEvent's normal\n    # \"watchers are uninstalled when they are destroyed\" behavior:\n    ${$args{reference}} = 1;\n    $args{oldref} //= delete($args{reference});\n    return unless ${$args{oldref}};\n\n    AnyEvent::postpone {\n        ${$args{oldref}} = AnyEvent-&gt;timer(\n            after =&gt; delete($args{after}) // $args{interval},\n            cb =&gt; sub {\n                $args{cb}-&gt;(@_);\n                deferred_interval(%args);\n            }\n        );\n    };\n\n    return ${$args{oldref}};\n}\n\n# Start a timer that, at most once every 0.5 seconds, sleeps\n# for 1 second, and then prints \"timer\":\nmy $w1; $w1 = deferred_interval(\n    after =&gt; 0.1,\n    reference =&gt; \\$w2,  \n    interval =&gt; 0.5,\n    cb =&gt; sub {\n        sleep 1; # Simulated blocking operation.\n        say \"timer\";\n    },\n);\n\n# Fork off a pid that waits for 1 second and then exits:\nmy $pid = fork();\nif ( $pid == 0 ) {\n    sleep 1;\n    exit;\n}\n\n# Print \"child\" when the child process exits:\nmy $w1 = AnyEvent-&gt;child(\n    pid =&gt; $pid,\n    cb =&gt; sub {\n        say \"child\";\n    },\n);\n\nAnyEvent-&gt;condvar-&gt;recv;\n</code></pre>\n\n<p>Using that code, the child process watcher will fire more or less on time, and the interval will keep firing. The tradeoff is that each interval timer will only <strong>start</strong> after each blocking callback finishes. Given an interval time of <code>I</code> and a blocking-callback runtime of <code>B</code>, this approach will fire an interval event roughly every <code>I + B</code> seconds, and the previous approach from the question will take <code>min(I,B)</code> seconds (at the expense of potential starvation).</p>\n\n<p>I think that a lot of the headaches here could be avoided if AnyEvent had a backing queue (many common event loops take this approach to prevent situations exactly like this one), or if the implementation of <code>AnyEvent::postpone</code> installed a \"NextTick\"-like event emitter to be fired only after all other emitters had been checked for events.</p>\n"}], "owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 527, "favorite_count": 1, "accepted_answer_id": 37776359, "answer_count": 2, "score": 2, "last_activity_date": 1473188999, "creation_date": 1465694383, "last_edit_date": 1473188972, "question_id": 37769891, "link": "https://stackoverflow.com/questions/37769891/why-wont-anyeventchild-callbacks-ever-run-if-interval-timer-events-are-always", "title": "Why won&#39;t AnyEvent::child callbacks ever run if interval timer events are always ready?", "body": "<p><strong>Update</strong> this issue can be resolved using the fixes present in <a href=\"https://github.com/zbentley/AnyEvent-Impl-Perl-Improved/tree/io-starvation\" rel=\"nofollow\">https://github.com/zbentley/AnyEvent-Impl-Perl-Improved/tree/io-starvation</a></p>\n\n<p><strong>Context:</strong></p>\n\n<p>I am integrating AnyEvent with some otherwise-synchronous code. The synchronous code needs to install some watchers (on timers, child processes, and files), wait for at least one watcher to complete, do some synchronous/blocking/legacy stuff, and repeat. </p>\n\n<p>I am using the pure-perl <code>AnyEvent::Loop</code>-based event loop, which is good enough for my purposes at this point; most of what I need it for is signal/process/timer tracking.</p>\n\n<p><strong>The problem:</strong></p>\n\n<p>If I have a callback that can block the event loop for a moment, child-process-exit events/callbacks never fire. The simplest example I could make watches a child process and runs an interval timer. The interval timer does something blocking before it finishes:</p>\n\n<pre><code>use AnyEvent;\n\n# Start a timer that, every 0.5 seconds, sleeps for 1 second, then prints \"timer\":\nmy $w2 = AnyEvent-&gt;timer(\n    after =&gt; 0,\n    interval =&gt; 0.5,\n    cb =&gt; sub {\n        sleep 1; # Simulated blocking operation. If this is removed, everything works.\n        say \"timer\";\n    },\n);\n\n# Fork off a pid that waits for 1 second and then exits:\nmy $pid = fork();\nif ( $pid == 0 ) {\n    sleep 1;\n    exit;\n}\n\n# Print \"child\" when the child process exits:\nmy $w1 = AnyEvent-&gt;child(\n    pid =&gt; $pid,\n    cb =&gt; sub {\n        say \"child\";\n    },\n);\n\nAnyEvent-&gt;condvar-&gt;recv;\n</code></pre>\n\n<p>This code leaves the child process zombied, and prints \"timer\" over and over, for \"ever\" (I ran it for several minutes). If the <code>sleep 1</code> call is removed from the callback for the timer, the code works correctly and the child process watcher fires as expected.</p>\n\n<p>I'd expect the child watcher to run eventually (at some point after the child exited, and any interval events in the event queue ran, blocked, and finished), but it does not. </p>\n\n<p>The <code>sleep 1</code> could be any blocking operation. It can be replaced with a busy-wait or any other thing that takes long enough. It doesn't even need to take a second; it appears to only need to be a) running during the child-exit event/SIGCHLD delivery, and b) result in the interval always being due to run according to the wallclock.</p>\n\n<p><strong>Questions:</strong></p>\n\n<p>Why isn't AnyEvent ever running my child-process watcher callback?</p>\n\n<p>How can I multiplex child-process-exit events with interval events that may block for so long that the next interval becomes due?</p>\n\n<p><strong>What I've tried:</strong></p>\n\n<p>My theory is that timer events which become \"ready\" due to time spent outside of the event loop can indefinitely pre-empt other types of ready events (like child process watchers) somewhere inside AnyEvent. I've tried a few things:</p>\n\n<ul>\n<li>Using <code>AnyEvent::Strict</code> doesn't surface any errors or change behavior in any way.</li>\n<li>Partial solution: Removing the interval event at any point <strong>does</strong> make the child process watcher fire (as if there's some internal event polling/queue population done inside AnyEvent that only happens if there are no timer events already \"ready\" according to the wallclock). Drawbacks: in the general case that doesn't work, since I'd have to know when my child process had exited to know when to postpone my intervals, which is tautological.</li>\n<li>Partial solution: Unlike child-process watchers, other interval timers seem to be able to multiplex with each other just fine, so I can install a manual call to <code>waitpid</code> in another interval timer to check for and reap children. Drawbacks: child-waiting can be artificially delayed (my use case involves lots of frequent process creation/destruction), any <code>AnyEvent::child</code> watchers that <strong>are</strong> installed and fire successfully will auto-reap the child and not tell my interval/waitpid timer, requiring orchestration, and it just generally feels like I'm misusing AnyEvent.</li>\n</ul>\n"}, {"tags": ["perl", "automated-tests", "cpan", "perlbrew"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1465727434, "post_id": 37769679, "comment_id": 63014141, "body": "Do you know which version of each prerequisite module was used by the testers?"}, {"owner": {"reputation": 5181, "user_id": 793172, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2ec2c4d63fb493164e87d386646c2285?s=128&d=identicon&r=PG", "display_name": "Axel Beckert", "link": "https://stackoverflow.com/users/793172/axel-beckert"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1465733533, "post_id": 37769679, "comment_id": 63015754, "body": "@melpomene: Possibly visible in the reports. At least I remember having found (and fixed) issues when Moo &lt; 2 was used that way."}], "answers": [{"comments": [{"owner": {"reputation": 5181, "user_id": 793172, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2ec2c4d63fb493164e87d386646c2285?s=128&d=identicon&r=PG", "display_name": "Axel Beckert", "link": "https://stackoverflow.com/users/793172/axel-beckert"}, "edited": false, "score": 0, "creation_date": 1465734038, "post_id": 37770033, "comment_id": 63015890, "body": "Thanks for the answer. I&#39;m quite sure that the issues you ran into are different ones, but ones I should take into account anyways. If there are missing dependencies, it could be an issue of <code>Dist::Zilla::Plugin::AutoPrereqs</code>. Will have a closer look at your findings later, thanks!"}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 3, "last_activity_date": 1465707139, "last_edit_date": 1465707139, "creation_date": 1465696439, "answer_id": 37770033, "question_id": 37769679, "link": "https://stackoverflow.com/questions/37769679/smoke-tests-fail-for-most-cpantesters-but-work-fine-on-travis-ci-and-locally-un/37770033#37770033", "title": "Smoke tests fail for most CPANTesters, but work fine on Travis CI and locally under perlbrew-built Perl", "body": "<p>You are probably getting a different mix of libraries with perlbrew than with a vanilla cpan install.  From your error messages, it looks like a few dependencies are missing.</p>\n\n<p>I tried installing through cpan on perl (5.20.1), the tests seem to fail due to a warning getting inserted into the cgi output by Path::Tiny</p>\n\n<pre><code>cpan CGI::Github::Webhook\n\n... skipping dependencies ...\n\nCGI::Test is up to date (1.111).\n  ABE/CGI-Github-Webhook-0.04.tar.gz\n  Has already been unwrapped into directory /home/felix/.cpan/build/CGI-Github-Webhook-0.04-10wq5g\n  ABE/CGI-Github-Webhook-0.04.tar.gz\n  Has already been prepared\nRunning make for A/AB/ABE/CGI-Github-Webhook-0.04.tar.gz\ncp static-badges/errored.png blib/lib/auto/share/module/CGI-Github-Webhook/errored.png\ncp static-badges/failed.svg blib/lib/auto/share/module/CGI-Github-Webhook/failed.svg\ncp static-badges/failed.png blib/lib/auto/share/module/CGI-Github-Webhook/failed.png\ncp static-badges/success.svg blib/lib/auto/share/module/CGI-Github-Webhook/success.svg\ncp static-badges/errored.svg blib/lib/auto/share/module/CGI-Github-Webhook/errored.svg\ncp static-badges/success.png blib/lib/auto/share/module/CGI-Github-Webhook/success.png\ncp lib/CGI/Github/Webhook.pm blib/lib/CGI/Github/Webhook.pm\nManifying 1 pod document\n  ABE/CGI-Github-Webhook-0.04.tar.gz\n  /usr/bin/make -- OK\nRunning make test\nSkip blib/lib/auto/share/module/CGI-Github-Webhook/success.png (unchanged)\nSkip blib/lib/auto/share/module/CGI-Github-Webhook/errored.svg (unchanged)\nSkip blib/lib/auto/share/module/CGI-Github-Webhook/failed.svg (unchanged)\nSkip blib/lib/auto/share/module/CGI-Github-Webhook/errored.png (unchanged)\nSkip blib/lib/auto/share/module/CGI-Github-Webhook/failed.png (unchanged)\nSkip blib/lib/auto/share/module/CGI-Github-Webhook/success.svg (unchanged)\nPERL_DL_NONLAZY=1 \"/usr/bin/perl\" \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'blib/lib', 'blib/arch')\" t/*.t\nt/auth-fail.t ............ 1/3 \n#   Failed test 'CGI output as expected'\n#   at t/auth-fail.t line 28.\n#          got: 'Unrecognized option(s) passed to make_path(): err at /usr/local/share/perl/5.20.1/Path/Tiny.pm line 1117.\n# Content-Type: text/plain; charset=utf-8\n# \n# Authentication failed\n# '\n#     expected: 'Content-Type: text/plain; charset=utf-8\n# \n# Authentication failed\n# '\n# Looks like you failed 1 test of 3.\nt/auth-fail.t ............ Dubious, test returned 1 (wstat 256, 0x100)\nFailed 1/3 subtests \nt/author-critic.t ........ skipped: these tests are for testing by the author\nt/author-pod-coverage.t .. skipped: these tests are for testing by the author\nt/author-pod-syntax.t .... skipped: these tests are for testing by the author\nt/basic-functionality.t .. 1/12 \n#   Failed test 'CGI output as expected'\n#   at t/basic-functionality.t line 33.\n#          got: 'Unrecognized option(s) passed to make_path(): err at /usr/local/share/perl/5.20.1/Path/Tiny.pm line 1117.\n# Content-Type: text/plain; charset=utf-8\n# \n# Successfully triggered\n# '\n#     expected: 'Content-Type: text/plain; charset=utf-8\n# \n# Successfully triggered\n# '\n\n#   Failed test 'CGI output as expected'\n#   at t/basic-functionality.t line 65.\n#          got: 'Unrecognized option(s) passed to make_path(): err at /usr/local/share/perl/5.20.1/Path/Tiny.pm line 1117.\n# Content-Type: text/plain; charset=utf-8\n# \n# Trigger failed\n# '\n#     expected: 'Content-Type: text/plain; charset=utf-8\n# \n# Trigger failed\n# '\n# Looks like you failed 2 tests of 12.\nt/basic-functionality.t .. Dubious, test returned 2 (wstat 512, 0x200) Failed 2/12 subtests\n\nt/cgi-test-auth-fail.t ... ok   \nt/cgi-test.t ............. ok   \nt/methods-non-json.t ..... Unrecognized option(s) passed to make_path(): err at /usr/local/share/perl/5.20.1/Path/Tiny.pm line 1117.\nt/methods-non-json.t ..... ok    \nt/methods.t .............. Unrecognized option(s) passed to make_path(): err at /usr/local/share/perl/5.20.1/Path/Tiny.pm line 1117.\nt/methods.t .............. ok    \nt/release-kwalitee.t ..... skipped: these tests are for release candidate testing\n\nTest Summary Report\n-------------------\nt/auth-fail.t          (Wstat: 256 Tests: 3 Failed: 1)\n   Failed test:  2\n   Non-zero exit status: 1\nt/basic-functionality.t (Wstat: 512 Tests: 12 Failed: 2)\n   Failed tests:  2, 8\n   Non-zero exit status: 2\nFiles=10, Tests=52,  3 wallclock secs ( 0.10 usr  0.02 sys +  2.41 cusr  0.25 csys =  2.78 CPU)\nResult: FAIL\nFailed 2/10 test programs. 3/52 subtests failed.\nMakefile:878: recipe for target 'test_dynamic' failed\nmake: *** [test_dynamic] Error 255\n  ABE/CGI-Github-Webhook-0.04.tar.gz\n  /usr/bin/make test -- NOT OK\n//hint// to see the cpan-testers results for installing this module, try:\n   reports ABE/CGI-Github-Webhook-0.04.tar.gz\n</code></pre>\n\n<p>Here is a stacktrace for that warning:</p>\n\n<pre><code>cpan look CGI::Github::Webhook\n\n/.cpan/build/CGI-Github-Webhook-0.04-wA0tww/t $ perl -d -I../lib cgi/basic.pl 'echo foo'\n\nLoading DB routines from perl5db.pl version 1.44\nEditor support available.\n\nEnter h or 'h h' for help, or 'man perldebug' for more help.\n\nUnrecognized option(s) passed to make_path(): err at /usr/local/share/perl/5.20.1/Path/Tiny.pm line 1117.\n at /usr/local/share/perl/5.20.1/File/Path.pm line 115.\n    File::Path::mkpath(\"/tmp/XtmjrOLDl8/auto/share/module\") called at /usr/local/share/perl/5.20.1/Path/Tiny.pm line 1117\n    Path::Tiny::mkpath(Path::Tiny=ARRAY(0xa6e67cc)) called at /usr/local/share/perl/5.20.1/Test/File/ShareDir/TempDirObject.pm line 75\n    Test::File::ShareDir::TempDirObject::_module_tempdir(Test::File::ShareDir::TempDirObject=HASH(0xa5b316c)) called at /usr/local/share/perl/5.20.1/Test/File/ShareDir/TempDirObject.pm line 112\n    Test::File::ShareDir::TempDirObject::_module_share_target_dir(Test::File::ShareDir::TempDirObject=HASH(0xa5b316c), \"CGI::Github::Webhook\") called at /usr/local/share/perl/5.20.1/Test/File/ShareDir/TempDirObject.pm line 132\n    Test::File::ShareDir::TempDirObject::_install_module(Test::File::ShareDir::TempDirObject=HASH(0xa5b316c), \"CGI::Github::Webhook\") called at /usr/local/share/perl/5.20.1/Test/File/ShareDir.pm line 60\n    Test::File::ShareDir::import(\"Test::File::ShareDir\", \"-share\", HASH(0xa416f90)) called at cgi/basic.pl line 9\n    main::BEGIN() called at cgi/basic.pl line 13\n    eval {...} called at cgi/basic.pl line 13\nmain::(cgi/basic.pl:16):    my $cgi = CGI-&gt;new();\n</code></pre>\n"}], "owner": {"reputation": 5181, "user_id": 793172, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2ec2c4d63fb493164e87d386646c2285?s=128&d=identicon&r=PG", "display_name": "Axel Beckert", "link": "https://stackoverflow.com/users/793172/axel-beckert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1465707139, "creation_date": 1465691380, "question_id": 37769679, "link": "https://stackoverflow.com/questions/37769679/smoke-tests-fail-for-most-cpantesters-but-work-fine-on-travis-ci-and-locally-un", "title": "Smoke tests fail for most CPANTesters, but work fine on Travis CI and locally under perlbrew-built Perl", "body": "<p>This is very similar to <a href=\"https://stackoverflow.com/questions/37505516/auto-list-util-util-so-undefined-symbol-pl-stack-sp-at-xsloader-pm-only/37512321\">my recent question</a> except that this time, the smoke tests of <a href=\"https://github.com/xtaran/CGI-Github-Webhook\" rel=\"nofollow\">CGI::Github::Webhook</a> are <a href=\"https://travis-ci.org/xtaran/CGI-Github-Webhook\" rel=\"nofollow\">fine on Travis CI</a> as well as locally (both, with the OS installed Perl 5.22 and with a Perl 5.24 built and installed via Perlbrew, see below), but <a href=\"http://matrix.cpantesters.org/?dist=CGI-Github-Webhook+0.04\" rel=\"nofollow\">fail in all but one CPAN Testers report</a>.</p>\n\n<p>The most common error there looks like this:</p>\n\n<pre><code>PERL_DL_NONLAZY=1 \"/bbbike/perl-5.24.0/bin/perl5.24.0\" \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'blib/lib', 'blib/arch')\" t/*.t\nt/auth-fail.t ............ ok\nt/author-critic.t ........ skipped: these tests are for testing by the author\nt/author-pod-coverage.t .. skipped: these tests are for testing by the author\nt/author-pod-syntax.t .... skipped: these tests are for testing by the author\nt/basic-functionality.t .. ok\nAttempt to reload List/Util.pm aborted.\nCompilation failed in require at /bbbike/perl-5.24.0/lib/site_perl/5.24.0/Sub/Exporter/Progressive.pm line 9.\nBEGIN failed--compilation aborted at /bbbike/perl-5.24.0/lib/site_perl/5.24.0/Sub/Exporter/Progressive.pm line 9.\nCompilation failed in require at /bbbike/perl-5.24.0/lib/site_perl/5.24.0/Devel/GlobalDestruction.pm line 11.\nBEGIN failed--compilation aborted at /bbbike/perl-5.24.0/lib/site_perl/5.24.0/Devel/GlobalDestruction.pm line 11.\nCompilation failed in require at /bbbike/perl-5.24.0/lib/site_perl/5.24.0/Moo/_Utils.pm line 26.\nBEGIN failed--compilation aborted at /bbbike/perl-5.24.0/lib/site_perl/5.24.0/Moo/_Utils.pm line 26.\nCompilation failed in require at /bbbike/perl-5.24.0/lib/site_perl/5.24.0/Moo.pm line 12.\nBEGIN failed--compilation aborted at /bbbike/perl-5.24.0/lib/site_perl/5.24.0/Moo.pm line 12.\nCompilation failed in require at /tmpfs/.cpan-build-cpansand/2016060903/CGI-Github-Webhook-0.04-pS8kOL/blib/lib/CGI/Github/Webhook.pm line 11.\nBEGIN failed--compilation aborted at /tmpfs/.cpan-build-cpansand/2016060903/CGI-Github-Webhook-0.04-pS8kOL/blib/lib/CGI/Github/Webhook.pm line 11.\nCompilation failed in require at ./cgitest.pl line 10.\nBEGIN failed--compilation aborted at ./cgitest.pl line 10.\nscript /cgi-bin/cgitest.pl generated no valid headers at /opt/perl-5.24.0/lib/site_perl/5.24.0/CGI/Test.pm line 468.\nUse of uninitialized value $in_fname in unlink at /opt/perl-5.24.0/lib/site_perl/5.24.0/CGI/Test.pm line 469.\nUse of uninitialized value $in_fname in concatenation (.) or string at /opt/perl-5.24.0/lib/site_perl/5.24.0/CGI/Test.pm line 469.\ncan't unlink : No such file or directory at /opt/perl-5.24.0/lib/site_perl/5.24.0/CGI/Test.pm line 469.\n</code></pre>\n\n<p>Locally with my perlbrew-built Perl 5.24 it looks like this:</p>\n\n<pre><code>[\u2026]-Github-Webhook-0.04 \u2192 perlbrew use 5.24.0\n[\u2026]-Github-Webhook-0.04 \u2192 which perl\n/home/abe/perl5/perlbrew/perls/perl-5.24.0/bin/perl\n[\u2026]-Github-Webhook-0.04 \u2192 perl -v\n\nThis is perl 5, version 24, subversion 0 (v5.24.0) built for x86_64-linux-thread-multi\n(with 1 registered patch, see perl -V for more detail)\n\nCopyright 1987-2016, Larry Wall\n\nPerl may be copied [\u2026]\n[\u2026]-Github-Webhook-0.04 \u2192 perl Makefile.PL\nGenerating a Unix-style Makefile\nWriting Makefile for CGI::Github::Webhook\nWriting MYMETA.yml and MYMETA.json\n[\u2026]-Github-Webhook-0.04 \u2192 prove -l\nt/auth-fail.t ............ ok   \nt/author-critic.t ........ skipped: these tests are for testing by the author\nt/author-pod-coverage.t .. skipped: these tests are for testing by the author\nt/author-pod-syntax.t .... skipped: these tests are for testing by the author\nt/basic-functionality.t .. ok     \nt/cgi-test-auth-fail.t ... ok   \nt/cgi-test.t ............. ok   \nt/methods-non-json.t ..... ok    \nt/methods.t .............. ok    \nt/release-kwalitee.t ..... skipped: these tests are for release candidate testing\n All tests successful.\n Files=10, Tests=52,  1 wallclock secs ( 0.04 usr  0.00 sys +  0.66 cusr  0.07 csys =  0.77 CPU)\n Result: PASS\n</code></pre>\n\n<p>Even if I call it the very same way as done in the CPAN Testers report, it does not fail for me:</p>\n\n<pre><code>[\u2026]-Github-Webhook-0.04 \u2192 PERL_DL_NONLAZY=1 /home/abe/perl5/perlbrew/perls/perl-5.24.0/bin/perl \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'blib/lib', 'blib/arch')\" t/*.t\nt/auth-fail.t ............ ok   \nt/author-critic.t ........ skipped: these tests are for testing by the author\nt/author-pod-coverage.t .. skipped: these tests are for testing by the author\nt/author-pod-syntax.t .... skipped: these tests are for testing by the author\nt/basic-functionality.t .. ok     \nt/cgi-test-auth-fail.t ... ok   \nt/cgi-test.t ............. ok   \nt/methods-non-json.t ..... ok    \nt/methods.t .............. ok    \nt/release-kwalitee.t ..... skipped: these tests are for release candidate testing\nAll tests successful.\nFiles=10, Tests=52,  1 wallclock secs ( 0.02 usr  0.02 sys +  0.68 cusr  0.05 csys =  0.77 CPU)\nResult: PASS\n</code></pre>\n\n<p>But I fail to see why I can't reproduce those errors despite nearly every CPAN Testers report fails for the 0.04 version.</p>\n"}, {"tags": ["perl", "unix", "sed"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1465649514, "post_id": 37763877, "comment_id": 62996504, "body": "do the files always have the same software on the exact same line, with just the version different?"}, {"owner": {"reputation": 84, "user_id": 4123975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/--_X4qOBFc7s/AAAAAAAAAAI/AAAAAAAABP8/TRJUNKES_U8/photo.jpg?sz=128", "display_name": "quorious", "link": "https://stackoverflow.com/users/4123975/quorious"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1465649785, "post_id": 37763877, "comment_id": 62996578, "body": "No they can be in any order and software&#39;s list can also be different. I mean whats there in file 1 may or may not be in file 2. But i need only those which are in both files with different version."}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 1, "creation_date": 1465656996, "post_id": 37763877, "comment_id": 62998886, "body": "The goal is that you add some code of your own to show at least the research effort you made to solve this yourself."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465668754, "post_id": 37763877, "comment_id": 63002563, "body": "Are the hyphens <code>-</code> in your post part of the files, or did you mean to create an unordered list? Please show the <i>real</i> contents of the files"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465668974, "post_id": 37763877, "comment_id": 63002630, "body": "@Borodin I <i>think</i> it&#39;s just the output of <code>rpm -qa</code>. See <a href=\"http://www.cyberciti.biz/faq/howto-list-installed-rpm-package/\" rel=\"nofollow noreferrer\">here</a> for an example."}], "answers": [{"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1465651792, "post_id": 37764277, "comment_id": 62997195, "body": "I&#39;m pretty sure there are going to be other edge cases, but the sample input was pretty brief."}, {"owner": {"reputation": 84, "user_id": 4123975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/--_X4qOBFc7s/AAAAAAAAAAI/AAAAAAAABP8/TRJUNKES_U8/photo.jpg?sz=128", "display_name": "quorious", "link": "https://stackoverflow.com/users/4123975/quorious"}, "edited": false, "score": 0, "creation_date": 1465652974, "post_id": 37764277, "comment_id": 62997544, "body": "Thanks its lot of help. I&#39;ll try to tweak the logic a bit more in my way."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1465668293, "post_id": 37764277, "comment_id": 63002402, "body": "@stevieb: Please don&#39;t solicit upvotes or acceptances. It&#39;s best to post a comment with a link to <a href=\"http://stackoverflow.com/help/someone-answers\"><i>What should I do when someone answers my question?</i></a>, but that should be on the <i>question</i>, and not on any specific answer. Even then I think it&#39;s best to give the OP a couple of days\u2014especially at weekends\u2014in case another answer arrives that they prefer. Many people are quite understandably reluctant to remove a previously-accepted answer, so it is best to give them time to assure themselves that they have chosen correctly in the first place."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 1, "last_activity_date": 1465651543, "creation_date": 1465651543, "answer_id": 37764277, "question_id": 37763877, "link": "https://stackoverflow.com/questions/37763877/find-lines-with-common-words-in-two-files/37764277#37764277", "title": "Find lines with common words in two files", "body": "<p>Here's something I put together quickly that should at least give you a starting point. I cheat on entries like <code>utempter-32bit-9-200407011229</code> that are ambiguous to parse.</p>\n\n<p>Note that if you have extremely large files, you may want to take a different approach, as the first file is slurped into memory in its entirety.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nopen my $fh1, '&lt;', 'f1.txt' or die $!;\nopen my $fh2, '&lt;', 'f2.txt' or die $!;\n\nmy %f1; \n\nwhile (&lt;$fh1&gt;){\n    chomp;\n    next if ! check($_); \n    my ($app, $ver) = separate($_);\n    next if ! $app;\n    $f1{$app} = $ver;\n}\n\nwhile (&lt;$fh2&gt;){\n    chomp;\n    next if ! check($_); \n    my ($app, $ver) = separate($_);\n    next if ! $app;\n\n    if (exists $f1{$app}){\n        if ($ver ne $f1{$app}){\n            print \"$app version differs\\n\";\n        }\n    } \n} \n\nsub separate { \n    my $line = shift; \n    if (my ($app, $ver) = $line =~ /(.*?)-(\\d+\\..*)/){\n        return ($app, $ver);\n    }\n}\nsub check {\n    my $line = shift;\n    if ($line !~ /\\./){\n        print \"* can't parse $line, check manually\\n\";\n        return 0;\n    }\n    return 1;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>* can't parse utempter-32bit-9-200407011229, check manually\napache2-devel version differs\napache2-doc version differs\napache2-example-pages version differs\napache2-mod_perl version differs\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1465672322, "post_id": 37767427, "comment_id": 63003610, "body": "@quorious: Please take note of this post. Your question is already void of any evidence of effort on your part to solve this yourself. If your data does indeed come from <code>rpm</code> then you are also withholding useful information that could help us to solve your problem. People give their time for free to help people like you, and it seems only fair that you should try your best to help us to find you a solution"}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 3, "last_activity_date": 1465682709, "last_edit_date": 1465682709, "creation_date": 1465671166, "answer_id": 37767427, "question_id": 37763877, "link": "https://stackoverflow.com/questions/37763877/find-lines-with-common-words-in-two-files/37767427#37767427", "title": "Find lines with common words in two files", "body": "<p>I think Borodin has put me in the right direction with his comment on your Q: The files you show seem to be the output of <code>rpm -qa</code>.</p>\n\n<p>Sample:</p>\n\n<pre><code>$ rpm -qa | head -5\naaa_skel-2006.5.19-0.3\nglibc-i18ndata-2.4-31.30\nrelease-notes-sles-10-43.51\nsles-stor_evms_en-10.1-0.10\nyast2-schema-2.13.5-0.13\n</code></pre>\n\n<p>There are some switches to <code>rpm</code> which affect that output, namely the <code>--queryformat</code> option. See here <a href=\"http://www.rpm.org/max-rpm/s1-rpm-query-parts.html\" rel=\"nofollow\">http://www.rpm.org/max-rpm/s1-rpm-query-parts.html</a> for details (scroll down to the \"Tags\" section).</p>\n\n<p>With that switch it's possible to define the output format and separate package name, version, and release number with custom strings:</p>\n\n<pre><code>$ rpm -qa --queryformat '%{NAME}\\t%{VERSION}\\t%{RELEASE}\\n' | head -5\naaa_skel    2006.5.19   0.3\nglibc-i18ndata  2.4 31.30\nrelease-notes-sles  10  43.51\nsles-stor_evms_en   10.1    0.10\nyast2-schema    2.13.5  0.13\n</code></pre>\n\n<p>I used a tab <code>\\t</code> here but any other unique character/string works as well.</p>\n\n<p>If it's possible for you to re-write your file lists that way it is <em>far</em> simpler to distinguish between names and numbers because a simple <code>split(/\\t/)</code> will do.</p>\n\n<p>I know this isn't the full answer to your question but I will amend it if you can tell whether <code>rpm -qa --queryformat</code> is an option for you.\nIf I'm totally wrong, please tell and I'll remove my post.</p>\n"}, {"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1465672483, "post_id": 37767550, "comment_id": 63003653, "body": "Great. The real issue here is <i>How to separate names from version numbers?</i>. You found a very reasonable way in your <code>split_name_vn</code> function."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1465672816, "post_id": 37767550, "comment_id": 63003760, "body": "@PerlDog: Indeed. However the &quot;proper&quot; way is to get the source of the data to separate them for us, as you described in your own answer. Maybe I&#39;m feeling especially ratty tonight!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1467555199, "last_edit_date": 1467555199, "creation_date": 1465671930, "answer_id": 37767550, "question_id": 37763877, "link": "https://stackoverflow.com/questions/37763877/find-lines-with-common-words-in-two-files/37767550#37767550", "title": "Find lines with common words in two files", "body": "\n\n<p>This program seems to do what you need</p>\n\n<p>Separating the software name from its version number is arbitrary, so as a best guess I've used all fields that contain only decimal digits and dots <code>.</code> as the version number, and everything preceding that as the name</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse Sort::Naturally 'ncmp';\n\nmy @files = qw/ file1.txt file2.txt /;\n\nmy @info = map { read_file_info($_) } @files;\n\nmy @software = do {\n    my %sw;\n    ++$sw{$_} for map { keys %$_ } @info;\n    sort keys %sw;\n};\n\nfor my $sw ( @software ) {\n\n    print \"$sw:\\n\";\n\n    my @versions = map { $_-&gt;{$sw} // '' } @info;\n\n    if ( $versions[0] eq $versions[1] ) {\n        printf \"    Version %s in both files\\n\", $versions[0];\n    }\n    else {\n        for my $i ( sort { ncmp($versions[$a], $versions[$b]) } 0 .. $#files ) {\n            printf \"    %s in %s\\n\",\n                $versions[$i] ? \"Version $versions[$i]\" : \"Doesn't appear\",\n                $files[$i];\n        }\n    }\n\n    print \"\\n\";\n}\n\n\nsub read_file_info {\n    my ($file) = @_;\n\n    use autodie;\n\n    open my $fh, '&lt;', $file;\n\n    my %info;\n\n    while ( my $line = &lt;$fh&gt; ) {\n        next unless /\\S/;\n\n        my ( $software, $version ) = split_name_vn($line);\n        $info{$software} = $version;\n    }\n\n    \\%info;\n}\n\n\nsub split_name_vn {\n    my ($s) = @_;\n    return ( $1, $2 ) if $s =~ /^(.+?)-([\\d.-]+)$/;\n    return;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>apache2-devel:\n    Version 2.0.59-5.2 in file1.txt\n    Version 2.2.12-1.38.2 in file2.txt\n\napache2-doc:\n    Version 2.0.59-5.2 in file1.txt\n    Version 2.2.12-1.40.1 in file2.txt\n\napache2-example-pages:\n    Version 2.0.59-5.2 in file1.txt\n    Version 2.2.12-1.40.1 in file2.txt\n\napache2-mod_perl:\n    Version 2.0.3.99-1.1 in file1.txt\n    Version 2.0.4-40.19 in file2.txt\n\napache2-prefork:\n    Version 2.0.59-5.2 in both files\n\napache2-worker:\n    Version 2.0.59-5.2 in both files\n\nutempter-32bit:\n    Version 0.5.5-106.20.1 in file2.txt\n    Version 9-200407011229 in file1.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 0, "last_activity_date": 1465686054, "creation_date": 1465686054, "answer_id": 37769229, "question_id": 37763877, "link": "https://stackoverflow.com/questions/37763877/find-lines-with-common-words-in-two-files/37769229#37769229", "title": "Find lines with common words in two files", "body": "<pre><code>$ cat tst.awk\nmatch($0,/[-0-9.]+$/) {\n    pkg = substr($0,1,RSTART-1)\n    ver = substr($0,RSTART+1)\n}\nNR==FNR { p2v[pkg]=ver; next }\nver != p2v[pkg]\n\n$ awk -f tst.awk file1 file2\napache2-devel-2.2.12-1.38.2\napache2-doc-2.2.12-1.40.1\napache2-example-pages-2.2.12-1.40.1\napache2-mod_perl-2.0.4-40.19\nutempter-32bit-0.5.5-106.20.1\n</code></pre>\n"}], "owner": {"reputation": 84, "user_id": 4123975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/--_X4qOBFc7s/AAAAAAAAAAI/AAAAAAAABP8/TRJUNKES_U8/photo.jpg?sz=128", "display_name": "quorious", "link": "https://stackoverflow.com/users/4123975/quorious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "closed_date": 1466073203, "accepted_answer_id": 37767427, "answer_count": 4, "score": -4, "last_activity_date": 1467555199, "creation_date": 1465649077, "last_edit_date": 1592644375, "question_id": 37763877, "link": "https://stackoverflow.com/questions/37763877/find-lines-with-common-words-in-two-files", "closed_reason": "Not suitable for this site", "title": "Find lines with common words in two files", "body": "<h3>File 1</h3>\n<ul>\n<li>apache2-devel-2.0.59-5.2</li>\n<li>apache2-doc-2.0.59-5.2</li>\n<li>apache2-example-pages-2.0.59-5.2</li>\n<li>apache2-mod_perl-2.0.3.99-1.1</li>\n<li>utempter-32bit-9-200407011229</li>\n<li>apache2-worker-2.0.59-5.2</li>\n<li>apache2-prefork-2.0.59-5.2</li>\n</ul>\n<h3>File 2</h3>\n<ul>\n<li>apache2-devel-2.2.12-1.38.2</li>\n<li>apache2-doc-2.2.12-1.40.1</li>\n<li>apache2-example-pages-2.2.12-1.40.1</li>\n<li>apache2-mod_perl-2.0.4-40.19</li>\n<li>utempter-32bit-0.5.5-106.20.1</li>\n<li>apache2-worker-2.0.59-5.2</li>\n<li>apache2-prefork-2.0.59-5.2</li>\n</ul>\n<p>I want list of software which has different versions. For instance all but the last two here have different versions. The order may be different.</p>\n<p>I'm not sure how to proceed.</p>\n"}, {"tags": ["perl", "bioinformatics", "fasta", "consensus", "emboss"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1465612229, "post_id": 37759042, "comment_id": 62988032, "body": "Your <code>print</code> statements -- is that how a command looks? In other words, what exactly is the command you run by hand for just one pop?"}, {"owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "edited": false, "score": 0, "creation_date": 1465612743, "post_id": 37759042, "comment_id": 62988096, "body": "can you please tell which EMBOSS tool you want to use ?"}, {"owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "edited": false, "score": 0, "creation_date": 1465613429, "post_id": 37759042, "comment_id": 62988188, "body": "Hi Arijit- I am using EMBOSS CONS, as in the title of the question. Hi zdim, The exact commands that I run by hand successfully are: 1) cons 2) name the aligned file input 3) name the consensus file output, as in the example given in the question (in bold). The names can change, the prompt &quot;cons&quot; can&#39;t. The files I want to put into the workflow vary by numbers, indicated in my print statement by *."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1465613917, "post_id": 37759042, "comment_id": 62988256, "body": "Oh, I see -- this is an interactive tool. You start it and then enter things at its prompt. Sorry I missed that, thank you. That&#39;s a bit different. Does that tool have a &#39;batch&#39; mode of some kind?"}], "answers": [{"tags": [], "owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "is_accepted": true, "score": 1, "last_activity_date": 1465614701, "creation_date": 1465614701, "answer_id": 37759552, "question_id": 37759042, "link": "https://stackoverflow.com/questions/37759042/emboss-cons-for-getting-consensus-sequence-for-many-files-not-just-one/37759552#37759552", "title": "Emboss Cons for getting consensus sequence for many files, not just one", "body": "<p>EMBOSS cons has two mandatory qualifier:</p>\n\n<ol>\n<li><p><strong>- sequence</strong>( to provide the input sequence)</p></li>\n<li><p><strong>- outseq</strong> (for output).</p></li>\n</ol>\n\n<p>so you need to provide the above to field .</p>\n\n<p>Now change your code little bit to run multiple program:</p>\n\n<pre><code>my $count=1;\nforeach my $file (@ArrayofFiles){\n            $output_path= \"/Users/roblogan/Documents/Clustered_Barcodes_Aligned/\";\n            my $output_file = $output_path. \"out$count\";# please change here to get your desired output filename \n            my $command = \"cons -sequence '$file' -outseq '$output_file' \"; \n            system($command);\n            $count ++;\n} \n</code></pre>\n\n<p>Hope the above code will work for you.</p>\n"}], "owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 2, "accepted_answer_id": 37759552, "answer_count": 1, "score": 0, "last_activity_date": 1465614701, "creation_date": 1465607770, "question_id": 37759042, "link": "https://stackoverflow.com/questions/37759042/emboss-cons-for-getting-consensus-sequence-for-many-files-not-just-one", "title": "Emboss Cons for getting consensus sequence for many files, not just one", "body": "<p>I installed and configured emboss and can run the simple command line arguments for getting the consensus of one previously aligned multifasta file: </p>\n\n<p>% <strong>cons</strong> </p>\n\n<p>Create a consensus sequence from a multiple alignment</p>\n\n<p>Input (aligned) sequence set: <strong>dna.msf</strong></p>\n\n<p>output sequence [dna.fasta]: <strong>aligned.cons</strong> </p>\n\n<p>This is perfect for dealing with one file at a time, but I have hundreds to process. \nI have started to write a perl script with a foreach loop to try and process this for every file, but I guess I need to be outside of the script to run these commands. Any clue on how I can run a command line friendly program for getting a single consensus sequence in fasta format from a previously aligned multifasta file, for many files in succession? I don't have to use emboss- I could use another program. \nHere is my code so far: </p>\n\n<pre><code>   #!/usr/bin/perl \n   use warnings; \n   use strict; \n\n   my $dir = (\"/Users/roblogan/Documents/Clustered_Barcodes_Aligned\");\n\n    my @ArrayofFiles = glob \"$dir/*\"; #put all files in the directory into an array\n\n    #print join(\"\\n\", @ArrayofFiles), \"\\n\";  #diagnostic print\n\n    foreach my $file (@ArrayofFiles){\n            print 'cons', \"\\n\";\n            print \"/Users/roblogan/Documents/Clustered_Barcodes_Aligned/Clustered_Barcode_Number_*.*.Sequences.txt.out\", \"\\n\";\n            print \"*.*.Consensus.txt\", \"\\n\"; \n    } \n</code></pre>\n"}, {"tags": ["html", "perl"], "answers": [{"tags": [], "owner": {"reputation": 3604, "user_id": 436450, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0afd75178763cf41af43a103b95277ae?s=128&d=identicon&r=PG", "display_name": "jira", "link": "https://stackoverflow.com/users/436450/jira"}, "is_accepted": false, "score": 2, "last_activity_date": 1465630375, "creation_date": 1465630375, "answer_id": 37761181, "question_id": 37758803, "link": "https://stackoverflow.com/questions/37758803/perl-cgi-picking-radio-values-for-specificity/37761181#37761181", "title": "Perl CGI - Picking Radio Values for Specificity", "body": "<p>Please, refer to <a href=\"http://perldoc.perl.org/CGI.html#CREATING-A-RADIO-BUTTON-GROUP\" rel=\"nofollow\">CGI documentation</a> for details on how to process radio group.\nTo give you an example:</p>\n\n<pre><code>my $cgi = CGI-&gt;new;\nmy $value = $cgi-&gt;param('q1');\n\nif ($value eq 'a') { #correct answer\n\n}\nelse { # incorrect answer\n}\n</code></pre>\n\n<p>Also, <code>eq</code> is a string comparison operator, don't use it to test for <code>undef</code>. Perl has a <code>defined</code> function for this.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1467555222, "last_edit_date": 1467555222, "creation_date": 1465635891, "answer_id": 37761930, "question_id": 37758803, "link": "https://stackoverflow.com/questions/37758803/perl-cgi-picking-radio-values-for-specificity/37761930#37761930", "title": "Perl CGI - Picking Radio Values for Specificity", "body": "\n\n<p>You <strong><em>must always</em></strong> <code>use strict</code> and <code>use warnings 'all'</code> at the top of <em>every</em> Perl program. With those in place you would have seen the message <code>Use of uninitialized value in string eq</code></p>\n\n<p>You can't compare a value to <code>undef</code> using the string comparator <code>eq</code>. In your case, <code>param(\"q1\")</code> will be <code>a</code>, <code>b</code>, <code>c</code> or <code>d</code>, or perhaps <code>undef</code> if none of the radio buttons are selected. (You would generally make one of the radio buttons selected by default to avoid this, using <code>checked=\"checked\"</code>.)</p>\n\n<p>Here's a basic CGI program that works fine.</p>\n\n\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse CGI::Minimal;\nuse File::Spec::Functions 'abs2rel';\n\nmy $self = abs2rel($0, $ENV{DOCUMENT_ROOT});\n\nmy $cgi = CGI::Minimal-&gt;new;\n\nmy $q1 = $cgi-&gt;param('q1') // 'none';\n\nmy $message = \n        ($q1 eq 'a') ?    \"&lt;h3&gt;You entered the right answer&lt;/h3&gt;\" :\n        ($q1 ne 'none') ? \"&lt;h3&gt;You didn't enter the right answer&lt;/h3&gt;\" :\n        '';\n\nprint &lt;&lt;END;\nContent-Type: text/html\n\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;Test Form&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n\n        &lt;form action=\"$self\"&gt;\n\n            &lt;p class=\"question\"&gt;&lt;br/&gt;\n            1. The answer is Number 1\n            &lt;/p&gt;\n\n            &lt;ul class=\"answers\"&gt;\n\n                &lt;input type=\"radio\" name=\"q1\" value=\"none\" id=\"q1a\" checked=\"checked\" /&gt;\n                &lt;label for=\"q1a\"&gt;&lt;i&gt;Please choose an answer&lt;/i&gt;&lt;/label&gt;\n                &lt;br/&gt;\n\n                &lt;input type=\"radio\" name=\"q1\" value=\"a\" id=\"q1a\" /&gt;\n                &lt;label for=\"q1a\"&gt;1912&lt;/label&gt;\n                &lt;br/&gt;\n\n                &lt;input type=\"radio\" name=\"q1\" value=\"b\" id=\"q1b\" /&gt;\n                &lt;label for=\"q1b\"&gt;1922&lt;/label&gt;\n                &lt;br/&gt;\n\n                &lt;input type=\"radio\" name=\"q1\" value=\"c\" id=\"q1c\" /&gt;\n                &lt;label for=\"q1c\"&gt;1925&lt;/label&gt;\n                &lt;br/&gt;\n\n                &lt;input type=\"radio\" name=\"q1\" value=\"d\" id=\"q1d\" /&gt;\n                &lt;label for=\"q1d\"&gt;Summer of '69&lt;/label&gt;\n                &lt;br/&gt;\n            &lt;/ul&gt;\n\n            &lt;input type=\"submit\"&gt;\n\n        &lt;/form&gt;\n\n        $message\n\n    &lt;/body&gt;\n&lt;/html&gt;\n\nEND\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1465650941, "post_id": 37763796, "comment_id": 62996953, "body": "The Stack Overflow syntax highlighter is not very smart with Perl. But you&#39;re right, there should be empty lines after the HEREDOC delimiter."}], "tags": [], "owner": {"reputation": 319, "user_id": 5524404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sRuy8.jpg?s=128&g=1", "display_name": "farzane", "link": "https://stackoverflow.com/users/5524404/farzane"}, "is_accepted": false, "score": 1, "last_activity_date": 1465648551, "creation_date": 1465648551, "answer_id": 37763796, "question_id": 37758803, "link": "https://stackoverflow.com/questions/37758803/perl-cgi-picking-radio-values-for-specificity/37763796#37763796", "title": "Perl CGI - Picking Radio Values for Specificity", "body": "<p>you should try this</p>\n\n<pre><code>$radio_value = $cgi-&gt;param('q1')\n</code></pre>\n\n<p>also after closing html tag with BIG it seems that it is not ending because its steel red!you write that lines with print!</p>\n"}], "owner": {"reputation": 11, "user_id": 6452220, "user_type": "registered", "profile_image": "https://graph.facebook.com/952079914905341/picture?type=large", "display_name": "Nebrethar", "link": "https://stackoverflow.com/users/6452220/nebrethar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1467555222, "creation_date": 1465604834, "last_edit_date": 1465635191, "question_id": 37758803, "link": "https://stackoverflow.com/questions/37758803/perl-cgi-picking-radio-values-for-specificity", "title": "Perl CGI - Picking Radio Values for Specificity", "body": "<p>I've got a little Perl CGI quiz that I am working on, but I'm completely stuck on it. My HTML code is as follows:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;p class=\"question\"&gt;&lt;br&gt;1. The answer is Number 1 &lt;/p&gt;\r\n&lt;ul class=\"answers\"&gt;\r\n    &lt;input type=\"radio\" name=\"q1\" value=\"a\" id=\"q1a\"&gt;&lt;label for=\"q1a\"&gt;1912&lt;/label&gt;&lt;br/&gt;\r\n    &lt;input type=\"radio\" name=\"q1\" value=\"b\" id=\"q1b\"&gt;&lt;label for=\"q1b\"&gt;1922&lt;/label&gt;&lt;br/&gt;\r\n    &lt;input type=\"radio\" name=\"q1\" value=\"c\" id=\"q1c\"&gt;&lt;label for=\"q1c\"&gt;1925&lt;/label&gt;&lt;br/&gt;\r\n    &lt;input type=\"radio\" name=\"q1\" value=\"d\" id=\"q1d\"&gt;&lt;label            for=\"q1d\"&gt;Summer of '69&lt;/label&gt;&lt;br/&gt;\r\n&lt;/ul&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>The CGI program is picking the name from the radio button for its parameter value. My Perl code is as follows:</p>\n\n<pre><code>if ( param(\"q1\") eq undef ) {\n    $an1 = 0;\n    $winner = 0;\nprint &lt;&lt;\"BIG\";\n        &lt;h1&gt;You didn't enter the right answer&lt;/h1&gt;\nBIG\n}\nelse {\nprint &lt;&lt;\"BIG\";\n        &lt;h1&gt;You entered the right answer&lt;/h1&gt;\nBIG\n}\n</code></pre>\n\n<p>At this point, it will say I entered the right answer if I check any of the radio boxes.</p>\n\n<p>Is there some way I can specify which value it plucks from radio, like <code>a</code> or <code>b</code> or <code>c</code> or <code>d</code> for the parameter, or am I doing it wrong altogether?</p>\n"}, {"tags": ["perl", "kill-process", "sigkill"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1465607424, "post_id": 37757264, "comment_id": 62987357, "body": "If it&#39;s windowed app (as opposed to a console app), you can send a quit message to its message queue"}], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1465596336, "post_id": 37757471, "comment_id": 62984858, "body": "taskkill&#39;s <code>&#47;F</code> flag means &quot;and don&#39;t be gentle&quot;"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1465596709, "post_id": 37757471, "comment_id": 62984971, "body": "@mob Ah, thank you!  Corrected.  I should&#39;ve known -- F may well stand for &#39;force&#39;."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1465599446, "post_id": 37757471, "comment_id": 62985759, "body": "Windows doesn&#39;t have signals. On Windows, <a href=\"http://perldoc.perl.org/perlport.html#kill\" rel=\"nofollow noreferrer\"><code>kill $n, $pid</code> forces the process <code>$pid</code> to exit with status <code>$n</code></a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1465600042, "post_id": 37757471, "comment_id": 62985927, "body": "@melpomene  <i>Forces</i> it? Does it not send it the termination signal (Window&#39;s equivalent), or perhaps asks the OS to do so, allowing the process to clean up? If <code>$n</code> makes it exit with that status, then sending terminate should allow it to actually exit in that way? (Can&#39;t find any discussion of that in docs right now.)  I haven&#39;t touched winapi in a long while, but I think that there are various ways to terminate a process.  I&#39;d expect <code>kill</code> to honor that?  Thank you for commenting.  <b>I see that it&#39;s a link only now, reading</b>"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1469872298, "last_edit_date": 1495540291, "creation_date": 1465594493, "answer_id": 37757471, "question_id": 37757264, "link": "https://stackoverflow.com/questions/37757264/how-can-i-gently-kill-a-process-in-activestate-perl/37757471#37757471", "title": "How can I gently kill a process in ActiveState Perl?", "body": "<p><strong>Short</strong> &nbsp; Usual methods other than Window's <code>taskkill</code> are forceful. Thanks to <a href=\"https://stackoverflow.com/users/168657/mob\">mob</a> and <a href=\"https://stackoverflow.com/users/1848654/melpomene\">melpomene</a>.</p>\n\n<hr>\n\n<p>The <a href=\"http://search.cpan.org/~jdb/Win32-Process-0.16/Process.pm\" rel=\"nofollow noreferrer\"><code>Win32::Process</code></a> documentation doesn't say what the methods <code>Kill</code> or <code>KillProcess</code> do, but they seem pretty blunt about it. Windows does provide a gradation in how to terminate a process, see for example this post on <a href=\"https://stackoverflow.com/questions/2055753/how-to-gracefully-terminate-a-process\">graceful termination via winapi</a>, even as it does not have UNIX's signals. However, this is apparently not utilized by the module nor by <code>kill</code> (see end).</p>\n\n<p>The Windows's own <code>taskkill</code> should nicely ask the process to terminate. Query it for flags, by running <code>taskkill /?</code> in a console on your system. Here is documentation for <a href=\"https://technet.microsoft.com/en-us/library/bb491009.aspx\" rel=\"nofollow noreferrer\"><code>taskkill on MS technet</code></a>. For example, this terminates the process by its <code>$pid</code>, along with its children</p>\n\n<pre><code>my $pid = $ProcessObj-&gt;GetProcessID();\nsystem(\"taskkill /t /pid $pid\");\n</code></pre>\n\n<p>If the method <code>GetProcessID()</code> doesn't return the real ID, see the link below for other ways.</p>\n\n<p>I can't test on Windows right now. There's a bit more related detail in <a href=\"https://stackoverflow.com/questions/36470043/perl-closing-pipe-without-error/36470817#36470817\"><code>this post</code></a>, second part.</p>\n\n<hr>\n\n<p>Perl's <code>kill</code> is apparently forceful on Windows. From <a href=\"http://perldoc.perl.org/perlport.html#kill\" rel=\"nofollow noreferrer\"><code>perlport</code></a></p>\n\n<blockquote>\n  <p>... <code>kill($sig, $pid)</code> terminates the process identified by <code>$pid</code>, and makes it exit immediately with exit status <code>$sig</code>.</p>\n</blockquote>\n\n<p>Thanks to <a href=\"https://stackoverflow.com/users/1848654/melpomene\">melpomene</a> for comment and documentation link.</p>\n\n<p>The <code>exitcode</code>, I believe, only tells to process what to report to the system as its exit.</p>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 6460395, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pROtvo3xM2g/AAAAAAAAAAI/AAAAAAAAAY4/LNr17b7uUlI/photo.jpg?sz=128", "display_name": "Cth103", "link": "https://stackoverflow.com/users/6460395/cth103"}, "is_accepted": false, "score": 0, "last_activity_date": 1465848111, "creation_date": 1465848111, "answer_id": 37798197, "question_id": 37757264, "link": "https://stackoverflow.com/questions/37757264/how-can-i-gently-kill-a-process-in-activestate-perl/37798197#37798197", "title": "How can I gently kill a process in ActiveState Perl?", "body": "<p>As far as i know in Perl you could just do</p>\n\n<pre><code>kill -15 (pid)\n</code></pre>\n\n<p>Who gently kills a process in perl </p>\n"}], "owner": {"reputation": 61, "user_id": 6451873, "user_type": "registered", "profile_image": "https://graph.facebook.com/141701202914879/picture?type=large", "display_name": "Paulo Cesar", "link": "https://stackoverflow.com/users/6451873/paulo-cesar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1469872298, "creation_date": 1465593254, "question_id": 37757264, "link": "https://stackoverflow.com/questions/37757264/how-can-i-gently-kill-a-process-in-activestate-perl", "title": "How can I gently kill a process in ActiveState Perl?", "body": "<p>Do I need to use an specific exitcode ?</p>\n\n<pre><code>Win32::Process::Create(\n    $ProcessObj,\n    \"C:\\\\Program Files (x86)\\\\Mozilla Firefox\\\\firefox.exe\",\n    \"firefox -no-remote -P $prof_name\",\n    0,\n    NORMAL_PRIORITY_CLASS,\n\".\")|| die ErrorReport();\n$ProcessObj-&gt;kill(0);\n</code></pre>\n\n<p>That way it kills, but not gently, it is generating problems with the Firefox profile.</p>\n"}, {"tags": ["bash", "perl", "shell", "stata"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1465590084, "post_id": 37756213, "comment_id": 62982541, "body": "I once read when you offer <i>two</i> shrimps to a sea horse for food, they will die of starvation because they cannot decide which one to pick. Seems you&#39;re in similar trouble right now ;-)"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1465590235, "post_id": 37756213, "comment_id": 62982605, "body": "@PerlDog... there&#39;s some quality answers for a nice array of different methods :)"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1465590433, "post_id": 37756213, "comment_id": 62982683, "body": "@stevieb Right you are. I like one best because I learned sth. new (but I won&#39;t tell which one, not to influence the sea horse). But we&#39;re lacking a <i>stata</i> solution (whatever that is)."}], "answers": [{"tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 2, "last_activity_date": 1465588668, "creation_date": 1465588668, "answer_id": 37756248, "question_id": 37756213, "link": "https://stackoverflow.com/questions/37756213/counting-the-number-of-lines-that-have-the-same-entry-in-the-first-column-in-bas/37756248#37756248", "title": "Counting the number of lines that have the same entry in the first column in bash", "body": "<p>You can use awk:</p>\n\n<pre><code>awk 'BEGIN{FS=OFS=\", \"} counts[$1]++{} END{for (i in counts) print i, counts[i]}' file\n\n123456, 3\n123457, 1\n123458, 1\n</code></pre>\n\n<ul>\n<li><code>FS=OFS=\", \"</code> Sets input &amp; output field separator as <code>\", \"</code></li>\n<li><code>counts[$1]++{}</code> increments a counter stored by first column in array <code>counts</code> by <code>1</code> for every instance. <code>{}</code> is same do-nothing</li>\n<li>In the <code>END</code> block we iterate through <code>counts</code> array and print each unique <code>id</code> and the <code>count</code></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "edited": false, "score": 0, "creation_date": 1465593610, "post_id": 37756269, "comment_id": 62983974, "body": "Ended up choosing this one haha! Thanks so much. the other STATA answer was great as well. Can&#39;t believe I didn&#39;t know about that command..."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 5, "last_activity_date": 1465589714, "last_edit_date": 1465589714, "creation_date": 1465588743, "answer_id": 37756269, "question_id": 37756213, "link": "https://stackoverflow.com/questions/37756213/counting-the-number-of-lines-that-have-the-same-entry-in-the-first-column-in-bas/37756269#37756269", "title": "Counting the number of lines that have the same entry in the first column in bash", "body": "<pre><code>cut -d',' -f1 in.txt | sort | uniq -c | awk '{print $2 \", \" $1}'\n</code></pre>\n\n<p>gives:</p>\n\n<pre><code>123456, 3\n123457, 1\n123458, 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1465712503, "last_edit_date": 1465712503, "creation_date": 1465588971, "answer_id": 37756325, "question_id": 37756213, "link": "https://stackoverflow.com/questions/37756213/counting-the-number-of-lines-that-have-the-same-entry-in-the-first-column-in-bas/37756325#37756325", "title": "Counting the number of lines that have the same entry in the first column in bash", "body": "<p>Split off the number in the first field and use it as a hash key, increasing its count each time</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $file = 'data_cnt.txt';\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nmy %cnt;\nwhile (&lt;$fh&gt;) {\n    $cnt{(/^(\\d+)/)[0]}++;\n}\n\nprint \"$_, $cnt{$_}\\n\" for keys %cnt;\n</code></pre>\n\n<p>The regex captures consecutive digits at a beginning of a line. As that is returned as a list we index into it to get the number, <code>(/.../)[0]</code>, which is used as a hash key.  When a number is seen for the first time it is added to the hash as a key and its value is set to 1 due to <code>++</code>. When a number that already exists as a key is seen its value is incremented by <code>++</code>. This is a typical frequency counter.</p>\n\n<p>With your numbers in file <code>data_cnt.txt</code> this outputs </p>\n\n<pre>\n123457, 1\n123456, 3\n123458, 1\n</pre>\n\n<p>The output can be sorted by hash values, if you need that</p>\n\n<pre><code>say \"$_, $cnt{$_}\" for sort { $cnt{$b} &lt;=&gt; $cnt{$a} } (keys %cnt);\n</code></pre>\n\n<p>Prints</p>\n\n<pre>\n123456, 3\n123457, 1\n123458, 1\n</pre>\n\n<hr>\n\n<p>This can fit into a one-liner, if preferred for some reason</p>\n\n<pre><code>perl -nE '\n    $cnt{(/^(\\d+)/)[0]}++; \n    }{ say \"$_, $cnt{$_}\" for sort { $cnt{$b} &lt;=&gt; $cnt{$a} } keys %cnt\n' data_cnt.txt\n</code></pre>\n\n<p>It should be entered as one line at a terminal. The <code>}{</code> is short for the <code>END { }</code> block. The code is the same from the short script above. The <code>-E</code> is the same as <code>-e</code> while it enables feature <code>say</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 96909, "user_id": 3030305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/En2fP.png?s=128&g=1", "display_name": "John1024", "link": "https://stackoverflow.com/users/3030305/john1024"}, "is_accepted": false, "score": 3, "last_activity_date": 1465589118, "creation_date": 1465589118, "answer_id": 37756362, "question_id": 37756213, "link": "https://stackoverflow.com/questions/37756213/counting-the-number-of-lines-that-have-the-same-entry-in-the-first-column-in-bas/37756362#37756362", "title": "Counting the number of lines that have the same entry in the first column in bash", "body": "<p>This counts the number of lines with the same first six characters:</p>\n\n<pre><code>$ sort file | uniq -c -w6\n      3 123456, 1623326\n      1 123457, 2435466\n      1 123458, 2564252\n</code></pre>\n\n<h3>Documentation</h3>\n\n<p>From <code>man uniq</code>:</p>\n\n<blockquote>\n  <p><b>-w, --check-chars=N</b><br>\n  compare no more than N characters in lines</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 1, "last_activity_date": 1465589572, "creation_date": 1465589572, "answer_id": 37756466, "question_id": 37756213, "link": "https://stackoverflow.com/questions/37756213/counting-the-number-of-lines-that-have-the-same-entry-in-the-first-column-in-bas/37756466#37756466", "title": "Counting the number of lines that have the same entry in the first column in bash", "body": "<p>Perl one-liner:</p>\n\n<pre><code>perl -naE '$h{$F[0]}++}{for(sort keys %h){say \"$_ $h{$_}\"}' file.txt\n\n123456, 3\n123457, 1\n123458, 1\n</code></pre>\n\n<p><code>-n</code> loops over each line in the file</p>\n\n<p><code>-a</code> splits each line on whitespace, and populates <code>@F</code> array with each entry</p>\n\n<p><code>}{</code> denotes an <code>END</code> block, which allows us to iterate over the hash after all lines in the file have been processed</p>\n"}, {"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 4, "creation_date": 1465591521, "post_id": 37756774, "comment_id": 62983119, "body": "I can&#39;t stop laughing. Is that really true? Wow! Looks like someone wanted to post a MySQL question but hit the submit button prematurely. Cool."}], "tags": [], "owner": {"reputation": 30202, "user_id": 1820446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a0d02e8debe07eabba742833727dfa0?s=128&d=identicon&r=PG", "display_name": "Nick Cox", "link": "https://stackoverflow.com/users/1820446/nick-cox"}, "is_accepted": false, "score": 6, "last_activity_date": 1465590812, "creation_date": 1465590812, "answer_id": 37756774, "question_id": 37756213, "link": "https://stackoverflow.com/questions/37756213/counting-the-number-of-lines-that-have-the-same-entry-in-the-first-column-in-bas/37756774#37756774", "title": "Counting the number of lines that have the same entry in the first column in bash", "body": "<p>In Stata this is just </p>\n\n<pre><code>contract ID \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 2, "last_activity_date": 1465638339, "creation_date": 1465638339, "answer_id": 37762253, "question_id": 37756213, "link": "https://stackoverflow.com/questions/37756213/counting-the-number-of-lines-that-have-the-same-entry-in-the-first-column-in-bas/37762253#37762253", "title": "Counting the number of lines that have the same entry in the first column in bash", "body": "<p><code>cut</code>, <code>sort</code>, <code>uniq</code>, <code>sed</code> version</p>\n\n<p></p>\n\n<pre><code>cut -d',' -f1 | sort | uniq -c | sed 's/^ *\\([^ ]*\\) \\(.*\\)/\\2, \\1/'\n</code></pre>\n\n<p>or simple Perl version with sorted by the first column</p>\n\n<pre><code>perl -F',' -anE'$s{$F[0]}++}{say\"$_, $s{$_}\"for sort keys%s'\n</code></pre>\n\n<p>or sorted by count descending and then by the first column</p>\n\n<pre><code>perl -F',' -anE'$s{$F[0]}++}{say\"$_, $s{$_}\"for sort{$s{$b}&lt;=&gt;$s{$a}or$a cmp$b}keys%s'\n</code></pre>\n\n<p>or in order in which key comes first</p>\n\n<pre><code>perl -F',' -anE'push@a,$F[0]if!$s{$F[0]}++}{say\"$_, $s{$_}\"for@a'\n</code></pre>\n\n<p>or just in pseudorandom order</p>\n\n<pre><code>perl -F',' -anE'$s{$F[0]}++}{say\"$_, $s{$_}\"for keys%s'\n</code></pre>\n\n<p>and so on.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1465639109, "creation_date": 1465639109, "answer_id": 37762375, "question_id": 37756213, "link": "https://stackoverflow.com/questions/37756213/counting-the-number-of-lines-that-have-the-same-entry-in-the-first-column-in-bas/37762375#37762375", "title": "Counting the number of lines that have the same entry in the first column in bash", "body": "<p>In Perl</p>\n\n<pre><code>$ perl -MData::Dump -ne \"++@n{/(\\d+)/}; END {dd \\%n}\" data.txt\n{ 123456 =&gt; 3, 123457 =&gt; 1, 123458 =&gt; 1 }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6955, "user_id": 6136214, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0385d5a1c27a6707139e7dc7ad29b6d6?s=128&d=identicon&r=PG&f=1", "display_name": "agc", "link": "https://stackoverflow.com/users/6136214/agc"}, "is_accepted": false, "score": 0, "last_activity_date": 1465683899, "creation_date": 1465683899, "answer_id": 37769000, "question_id": 37756213, "link": "https://stackoverflow.com/questions/37756213/counting-the-number-of-lines-that-have-the-same-entry-in-the-first-column-in-bas/37769000#37769000", "title": "Counting the number of lines that have the same entry in the first column in bash", "body": "<p>With <a href=\"https://savannah.gnu.org/projects/datamash/\" rel=\"nofollow\">datamash</a>:</p>\n\n<pre><code>datamash -W -s -g1 count 1 &lt; data\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>123456, 3\n123457, 1\n123458, 1\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 37756269, "answer_count": 9, "score": 0, "last_activity_date": 1465712503, "creation_date": 1465588535, "last_edit_date": 1465659354, "question_id": 37756213, "link": "https://stackoverflow.com/questions/37756213/counting-the-number-of-lines-that-have-the-same-entry-in-the-first-column-in-bas", "title": "Counting the number of lines that have the same entry in the first column in bash", "body": "<p>I have a data file that looks like the following: </p>\n\n<pre><code>123456, 1623326\n123456, 2346525\n123457, 2435466\n123458, 2564252\n123456, 2435145\n</code></pre>\n\n<p>The first column is the \"ID\" -- a string variable. The second column does not matter to me. I want to end up with</p>\n\n<pre><code>123456, 3\n123457, 1\n123458, 1\n</code></pre>\n\n<p>where the second column now counts how many entries there are in the original file that correspond with the unique \"ID\" in the first column. </p>\n\n<p>Any solution in bash or perl would be fantastic. Even Stata would be good, but I figure this is harder to do in Stata. Please let me know if anything is unclear. </p>\n"}, {"tags": ["perl", "encoding", "utf-8"], "comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 1, "creation_date": 1465586983, "post_id": 37755818, "comment_id": 62981131, "body": "However you&#39;re fetching the contents of the webpage, it&#39;s misinterpreting the encoding &#173;\u2014 but you didn&#39;t include that part of the code in your question."}, {"owner": {"reputation": 187, "user_id": 5145211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hCe6S.jpg?s=128&g=1", "display_name": "Lilith", "link": "https://stackoverflow.com/users/5145211/lilith"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1465587076, "post_id": 37755818, "comment_id": 62981173, "body": "I&#39;m using LWP::Simple&#39;s get(<i>URL</i>) method. What would you recommend instead?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1465587179, "post_id": 37755818, "comment_id": 62981231, "body": "Are you sure the <i>inverted comma</i> is 146? I just copy-and-pasted it from your OP into my editor, saved it, did <code>hexdump -C</code> and got <code>e2 80 99</code>."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1465587305, "post_id": 37755818, "comment_id": 62981290, "body": "@PerlDog right you are, I didn&#39;t even notice that."}, {"owner": {"reputation": 187, "user_id": 5145211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hCe6S.jpg?s=128&g=1", "display_name": "Lilith", "link": "https://stackoverflow.com/users/5145211/lilith"}, "edited": false, "score": 0, "creation_date": 1465587362, "post_id": 37755818, "comment_id": 62981323, "body": "I pasted it into a perl script that just printed ord &quot;\u2019&quot; and it gave me 146."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1465587480, "post_id": 37755818, "comment_id": 62981389, "body": "This character: <code>\u2019</code> is RIGHT SINGLE QUOTATION MARK, Unicode 0x2019. I&#39;ve seen the term &quot;inverted comma&quot; used to refer to some kind of quotation mark, but it doesn&#39;t seem to be common usage (maybe it&#39;s UK-specific?). There is no &quot;INVERTED COMMA&quot; character defined by Unicode. And chr(146) is a control character in Unicode (&quot;PRIVATE USE TWO&quot;) -- though it is RIGHT SINGLE QUOTATION MARK in <a href=\"https://en.wikipedia.org/wiki/Windows-1252\" rel=\"nofollow noreferrer\">Windows-1252</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1465587982, "post_id": 37755818, "comment_id": 62981601, "body": "If <code>$content =~ s&#47;&#226;\u20ac\u2122&#47;&#39;&#47;g</code> works, then <code>$content</code> is encoded using UTF-8, so you need to do <code>$content = decode(&#39;UTF-8&#39;, $content);</code> first."}, {"owner": {"reputation": 187, "user_id": 5145211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hCe6S.jpg?s=128&g=1", "display_name": "Lilith", "link": "https://stackoverflow.com/users/5145211/lilith"}, "edited": false, "score": 0, "creation_date": 1465588055, "post_id": 37755818, "comment_id": 62981635, "body": "Tried that, it tells me &quot;cannot decode string with wide characters&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 5145211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hCe6S.jpg?s=128&g=1", "display_name": "Lilith", "link": "https://stackoverflow.com/users/5145211/lilith"}, "edited": false, "score": 0, "creation_date": 1465587596, "post_id": 37755951, "comment_id": 62981439, "body": "So I should look for the proper <i>unicode</i> codepoint online and do the replacements that way? Can I use the Encode module on my input instead? If so, how?"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 187, "user_id": 5145211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hCe6S.jpg?s=128&g=1", "display_name": "Lilith", "link": "https://stackoverflow.com/users/5145211/lilith"}, "edited": false, "score": 0, "creation_date": 1465587649, "post_id": 37755951, "comment_id": 62981462, "body": "@Lilith you don&#39;t need the Encode module, your input has already been decoded correctly (using the Encode module) by LWP. LWP::Simple uses the <code>decoded_content</code> method of HTTP::Response."}, {"owner": {"reputation": 187, "user_id": 5145211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hCe6S.jpg?s=128&g=1", "display_name": "Lilith", "link": "https://stackoverflow.com/users/5145211/lilith"}, "edited": false, "score": 0, "creation_date": 1465587861, "post_id": 37755951, "comment_id": 62981554, "body": "So how do I make my script print it correctly? I marked the output file as utf8, using IO::All, then printed the output directly. It showed up as &quot;&#226;\u20ac\u2122&quot; instead. I <i>could</i> just add replacements for the three characters (open/close double quotes and right single quote), but I&#39;d rather solve the problem than the symptom."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 187, "user_id": 5145211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hCe6S.jpg?s=128&g=1", "display_name": "Lilith", "link": "https://stackoverflow.com/users/5145211/lilith"}, "edited": false, "score": 0, "creation_date": 1465588021, "post_id": 37755951, "comment_id": 62981621, "body": "@Lilith showed up as that in what? Are you opening the output file in something that isn&#39;t unicode-aware? Or are you doing something else that&#39;s fooling encoding detection? It&#39;s really hard to tell, other than that the problem isn&#39;t where you think it is."}, {"owner": {"reputation": 187, "user_id": 5145211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hCe6S.jpg?s=128&g=1", "display_name": "Lilith", "link": "https://stackoverflow.com/users/5145211/lilith"}, "edited": false, "score": 0, "creation_date": 1465588157, "post_id": 37755951, "comment_id": 62981689, "body": "I&#39;m using gVim on Windows, think that&#39;s it?"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 187, "user_id": 5145211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hCe6S.jpg?s=128&g=1", "display_name": "Lilith", "link": "https://stackoverflow.com/users/5145211/lilith"}, "edited": false, "score": 0, "creation_date": 1465588236, "post_id": 37755951, "comment_id": 62981720, "body": "@Lilith vim should work just fine, but it might have different default assumptions on windows. Try running <code>:e ++enc=utf8</code> and see how things look. (Edit: yeah, it looks like vim on windows has silly legacy defaults. See <a href=\"http://vim.wikia.com/wiki/Working_with_Unicode\" rel=\"nofollow noreferrer\">vim.wikia.com/wiki/Working_with_Unicode</a>)"}, {"owner": {"reputation": 187, "user_id": 5145211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hCe6S.jpg?s=128&g=1", "display_name": "Lilith", "link": "https://stackoverflow.com/users/5145211/lilith"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1465588367, "post_id": 37755951, "comment_id": 62981773, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/114388/discussion-between-lilith-and-hobbs\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": false, "score": 5, "last_activity_date": 1465587433, "creation_date": 1465587433, "answer_id": 37755951, "question_id": 37755818, "link": "https://stackoverflow.com/questions/37755818/encode-module-and-inverted-commas/37755951#37755951", "title": "Encode module and inverted commas", "body": "<p>The character you're trying to replace is only 0x92 / 146 in the Windows-1252 encoding. Perl uses Unicode, where that character is <code>U+2019 RIGHT SINGLE QUOTATION MARK</code>, aka <code>\"\\x{2019}\"</code>, <code>chr(0x2019)</code>, or <code>chr(8217)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1465589146, "last_edit_date": 1465589146, "creation_date": 1465588175, "answer_id": 37756104, "question_id": 37755818, "link": "https://stackoverflow.com/questions/37755818/encode-module-and-inverted-commas/37756104#37756104", "title": "Encode module and inverted commas", "body": "<p>Start by finding out what <code>$content</code> contains. You can use the following:</p>\n\n<pre><code>use Data::Dumper;\nlocal $Data::Dumper::Useqq = 1;\nwarn(Dumper($content));\n</code></pre>\n\n<hr>\n\n<p>If you get the following, <code>$content</code> is decoded</p>\n\n<pre><code>$VAR1 = \"...\\x{2019}...\";\n</code></pre>\n\n<p>Any of the following will work.</p>\n\n<pre><code>use utf8;  # Source code is encoded using UTF-8.\n$content =~ s/\u2019/'/g;\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>$content =~ s/\\x{2019}/'/g;\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>$content =~ s/\\N{U+2019}/'/g;\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>$content =~ s/\\N{RIGHT SINGLE QUOTATION MARK}/'/g;\n</code></pre>\n\n<hr>\n\n<p>If you get the following, <code>$content</code> is encoded using UTF-8.</p>\n\n<pre><code>$VAR1 = \"...\\342\\200\\231...\";\n</code></pre>\n\n<p>Start by decoding the value of <code>$content</code> using either of the following:</p>\n\n<pre><code>utf8::decode($content) or die;\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>use Encode qw( decode_utf8 );\n$content = decode_utf8($content);\n</code></pre>\n\n<p>Then use any of the solutions for decoded content (above).</p>\n\n<hr>\n\n<p>If you get the following, <code>$content</code> is encoded using cp1252.</p>\n\n<pre><code>$VAR1 = \"...\\222...\";\n</code></pre>\n\n<p>Start by decoding the value of <code>$content</code>.</p>\n\n<pre><code>use Encode qw( decode );\n$content = decode(\"cp1252\", $content);\n</code></pre>\n\n<p>Then use any of the solutions for decoded content (above).</p>\n\n<hr>\n\n<p>By the way, <code>\u00e2\u20ac\u2122</code> is what the UTF-8 encoding of <code>\u2019</code> (<code>E2 80 99</code>) would look like if decoded as cp1252.</p>\n"}, {"tags": [], "owner": {"reputation": 187, "user_id": 5145211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hCe6S.jpg?s=128&g=1", "display_name": "Lilith", "link": "https://stackoverflow.com/users/5145211/lilith"}, "is_accepted": true, "score": 1, "last_activity_date": 1465589022, "last_edit_date": 1610973356, "creation_date": 1465589022, "answer_id": 37756341, "question_id": 37755818, "link": "https://stackoverflow.com/questions/37755818/encode-module-and-inverted-commas/37756341#37756341", "title": "Encode module and inverted commas", "body": "<p>The problem was not in my script, it was in my editor. The script works properly, and the question is based on false pretenses. I was using gVim on Windows, which did not play nicely with Unicode. My script was properly decoding the content, but when I opened the output file in gVim, it mangled the text and displayed it incorrectly. My attempts to use regular expressions to change the characters failed because I was using the wrong codepoint - it wasn't 0x92, it was 0x2019. This was another failing of gVim. Thanks to <a href=\"https://chat.stackoverflow.com/users/152948\">hobbs</a> and <a href=\"https://chat.stackoverflow.com/users/589924\">ikegami</a> for helping me figure this out.</p>\n"}], "owner": {"reputation": 187, "user_id": 5145211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hCe6S.jpg?s=128&g=1", "display_name": "Lilith", "link": "https://stackoverflow.com/users/5145211/lilith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "accepted_answer_id": 37756341, "answer_count": 3, "score": 3, "last_activity_date": 1465589146, "creation_date": 1465586828, "last_edit_date": 1495542757, "question_id": 37755818, "link": "https://stackoverflow.com/questions/37755818/encode-module-and-inverted-commas", "title": "Encode module and inverted commas", "body": "<p>I am scraping a web page, and extracting a specific section from it. That section includes inverted commas (<code>\u2019</code>, character 146). I'm trying to print my extracted data to a text file, but it's giving me <code>\u00e2\u20ac\u2122</code> instead of the inverted comma. I have tried the following:</p>\n\n<ul>\n<li><code>$content =~ s/\u2019/'/g;</code></li>\n<li><code>my $invComma = chr 146;\n$content =~ s/$invComma/'/g;</code></li>\n<li><code>$content =~ s/\\x{0092}/'/g;</code></li>\n</ul>\n\n<p>None of it has worked. I can't <code>decode('UTF-8', $content)</code> because it has wide characters. When I try to <code>encode('UTF-8', $content)</code> the <code>\u00e2\u20ac\u2122</code> changes to <code>\u00c3\u00a2\u00c2\u20ac\u00c2\u2122</code> instead. I have already tried <code>use utf8</code> as well, to no effect.</p>\n\n<p>I know that my text file viewer can display inverted commas, because I printed one to a test file and opened it. The problem is therefore in my script.</p>\n\n<p>What am I doing wrong, and how do I fix it?</p>\n\n<p><em>UPDATE</em>: I am able to do <code>$content =~ s/\u00e2\u20ac\u2122/'/g</code> to replace it with a simple apostrophe, but I still don't know why nothing else works. I'd also like a fix that actually solves the problem, instead of just solving one of the symptoms.</p>\n\n<p><em>UPDATE 2</em>: I have been informed by <a href=\"https://stackoverflow.com/users/152948/hobbs\">hobbs</a> that the character is actually <code>U+2019 RIGHT SINGLE QUOTATION MARK</code> and changed my regex to use <code>chr 0x2019</code> which now works.</p>\n"}, {"tags": ["perl", "www-mechanize", "lwp-useragent", "event-stream"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1465637156, "post_id": 37755771, "comment_id": 62992852, "body": "Your target website seems to be private. Can you find a public website that you can use to reproduce the problem so we can try? I agree that you&#39;re on the right path with handler, but I cannot debug without a working endpoint."}, {"owner": {"reputation": 1444, "user_id": 6062567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e87060f0ce67ed68a097ac5186027c5?s=128&d=identicon&r=PG&f=1", "display_name": "oldtechaa", "link": "https://stackoverflow.com/users/6062567/oldtechaa"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1465693315, "post_id": 37755771, "comment_id": 63008184, "body": "@simbabque, that is a completely fake domain."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1444, "user_id": 6062567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e87060f0ce67ed68a097ac5186027c5?s=128&d=identicon&r=PG&f=1", "display_name": "oldtechaa", "link": "https://stackoverflow.com/users/6062567/oldtechaa"}, "edited": false, "score": 0, "creation_date": 1465755825, "post_id": 37755771, "comment_id": 63022786, "body": "@oldtechaa domain.com is not fake, it does exist. But the OP used it (falsely) to mask their their real domain. People usually do that when their stuff is in a private network or they do not want to disclose it because it&#39;s $work. That&#39;s why I asked for an example with the same behavior that&#39;s accessible publicly. The correct way to give an example domain that&#39;s obviously false (not fake) is <i><a href=\"http://example.org\" rel=\"nofollow noreferrer\">example.org</a></i>."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1465847864, "post_id": 37780396, "comment_id": 63062247, "body": "A perfect example of why to post one&#39;s own answer -- this is useful for me to see!"}, {"owner": {"reputation": 3208, "user_id": 2162673, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/9XSFy.jpg?s=128&g=1", "display_name": "Francisco Zarabozo", "link": "https://stackoverflow.com/users/2162673/francisco-zarabozo"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1465848385, "post_id": 37780396, "comment_id": 63062526, "body": "@zdim Exactly! :-)"}], "tags": [], "owner": {"reputation": 3208, "user_id": 2162673, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/9XSFy.jpg?s=128&g=1", "display_name": "Francisco Zarabozo", "link": "https://stackoverflow.com/users/2162673/francisco-zarabozo"}, "is_accepted": true, "score": 4, "last_activity_date": 1465848236, "last_edit_date": 1465848236, "creation_date": 1465777439, "answer_id": 37780396, "question_id": 37755771, "link": "https://stackoverflow.com/questions/37755771/fetch-text-event-stream-web-response-using-wwwmechanize-or-lwpuseragent/37780396#37780396", "title": "Fetch text/event-stream web response using WWW::Mechanize or LWP::UserAgent", "body": "<p>Found a way to do this. Using a <a href=\"http://search.cpan.org/~ether/libwww-perl-6.15/lib/LWP/UserAgent.pm#Handlers\" rel=\"nofollow\">handler from LWP</a>, from which <a href=\"http://search.cpan.org/~ether/WWW-Mechanize-1.75/lib/WWW/Mechanize.pm\" rel=\"nofollow\">WWW::Mechanize</a> inherits:</p>\n\n<pre><code>$mech-&gt;add_handler (\n    'response_data',\n    sub {\n        my ($response, $ua, $h, $data) = @_;\n        # Your chunk of response is now in $data, do what you need\n        # If you plan on reading an infinite stream, it's a good idea to clean the response so it doesn't grow infinitely too!\n        $response-&gt;content(undef);\n        # Important to return a true value if you want to keep reading the response!\n        return 1;\n    },\n);\n</code></pre>\n"}], "owner": {"reputation": 3208, "user_id": 2162673, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/9XSFy.jpg?s=128&g=1", "display_name": "Francisco Zarabozo", "link": "https://stackoverflow.com/users/2162673/francisco-zarabozo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 1, "accepted_answer_id": 37780396, "answer_count": 1, "score": 2, "last_activity_date": 1465848543, "creation_date": 1465586584, "last_edit_date": 1465848543, "question_id": 37755771, "link": "https://stackoverflow.com/questions/37755771/fetch-text-event-stream-web-response-using-wwwmechanize-or-lwpuseragent", "title": "Fetch text/event-stream web response using WWW::Mechanize or LWP::UserAgent", "body": "<p>I'm using <a href=\"https://metacpan.org/pod/WWW::Mechanize\" rel=\"nofollow\"><code>WWW::Mechanize</code></a> to fetch a web page that includes a Google Maps widget that receives constant data from a single response of type text/event-stream.</p>\n\n<p>That kind of response is like a never ending response from the server that constantly returns updated data for the widget to work.</p>\n\n<p>I'm trying to find out how to read that exact response from Perl. Using something like:</p>\n\n<pre><code>my $mech = WWW::Mechanize-&gt;new;\n\n# Do some normal GET and POST requests to authenticate and set cookies for the session\n\n# Now try to get that text/event-stream response\n\n$mech-&gt;get('https://some.domain.com/event_stream_page');\n</code></pre>\n\n<p>But that doesn't work because the response never ends.</p>\n\n<p>How can I make that request and start reading the response and do something with that data every time the server updates the stream?</p>\n"}, {"tags": ["regex", "bash", "perl"], "comments": [{"owner": {"reputation": 5903, "user_id": 3908170, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vou9q.jpg?s=128&g=1", "display_name": "DarkCygnus", "link": "https://stackoverflow.com/users/3908170/darkcygnus"}, "edited": false, "score": 0, "creation_date": 1465578249, "post_id": 37753503, "comment_id": 62976792, "body": "Check <a href=\"http://stackoverflow.com/questions/9716443/how-to-escape-dollar-sign-in-a-string-using-perl-regex\">this</a> answer, maybe it helps."}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1465579391, "post_id": 37753503, "comment_id": 62977375, "body": "Replace backslash by two backslashes."}, {"owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "edited": false, "score": 0, "creation_date": 1465580432, "post_id": 37753503, "comment_id": 62977872, "body": "The Perl looks fine -- cab we see your entire Bash script, please?"}], "answers": [{"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1465577893, "post_id": 37753547, "comment_id": 62976602, "body": "perhaps allow it to catch a cents value as well if it&#39;s present?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 2, "creation_date": 1465578444, "post_id": 37753547, "comment_id": 62976888, "body": "Also, that throws a warning: <code>Possible unintended interpolation of $\\ in regex at -e line 1.</code>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1465578495, "post_id": 37753547, "comment_id": 62976911, "body": "<code>echo -e &#39;foo\\n$80\\nbar&#39; | perl -ne &#39;print &#47;\\$.*&#47;g&#39;</code> (OP&#39;s version) prints <code>$80</code>, the same as yours. Why do you say &quot;that doesn&#39;t do what you think it does&quot;?"}, {"owner": {"reputation": 29, "user_id": 6172274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e04a51c17167bae212b255123c87b17c?s=128&d=identicon&r=PG&f=1", "display_name": "hemlock", "link": "https://stackoverflow.com/users/6172274/hemlock"}, "edited": false, "score": 0, "creation_date": 1465579964, "post_id": 37753547, "comment_id": 62977661, "body": "Your option worked, I found an alternative to my solution.  Use ITEMVALUE=$(command) to set variable."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1465598655, "post_id": 37753547, "comment_id": 62985568, "body": "This solution has one backquote and one regular quote?"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1465578468, "last_edit_date": 1465578468, "creation_date": 1465577821, "answer_id": 37753547, "question_id": 37753503, "link": "https://stackoverflow.com/questions/37753503/why-does-my-perl-one-liner-containing-an-escaped-not-work-inside-bash-backtick/37753547#37753547", "title": "Why does my Perl one-liner containing an escaped $ not work inside Bash backticks?", "body": "<p>It's simpler than that - that doesn't do what you think it does. </p>\n\n<p>You probably want: </p>\n\n<pre><code>perl -ne 'print $1 if m/(\\$\\d+)/'\n</code></pre>\n\n<p>Which matches the regex, catches the value, and prints the value. (note - will match multiple times potentially). </p>\n"}, {"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1465584590, "post_id": 37754293, "comment_id": 62980032, "body": "Side note: using <code>&#47;g</code> is strange since <code>\\$.*</code> can only match once per line, so I would prefer <code>print $1 if &#47;(\\$.*)&#47;</code>"}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 5, "last_activity_date": 1465584512, "last_edit_date": 1592644375, "creation_date": 1465580634, "answer_id": 37754293, "question_id": 37753503, "link": "https://stackoverflow.com/questions/37753503/why-does-my-perl-one-liner-containing-an-escaped-not-work-inside-bash-backtick/37754293#37754293", "title": "Why does my Perl one-liner containing an escaped $ not work inside Bash backticks?", "body": "<p>From the <a href=\"http://linux.die.net/man/1/bash\" rel=\"nofollow noreferrer\">Bash manual</a>:</p>\n<blockquote>\n<p><strong>Command Substitution</strong></p>\n<p>Command substitution allows the output of a command to replace the command name. There are two forms:</p>\n<pre><code>$(command)\n</code></pre>\n<p>or</p>\n<pre><code>`command` \n</code></pre>\n<p>...</p>\n<p>When the old-style backquote form of substitution is used, backslash retains its literal meaning <em>except when followed by</em> <code>$</code>, <code>`</code>, or <code>\\</code> ... When using the <code>$(command)</code> form, all characters between the parentheses make up the command; none are treated specially.</p>\n</blockquote>\n<p>(emphasis added)</p>\n<p>Bash is treating the <code>\\</code> in <code>\\$</code> as an escape sequence, so</p>\n<pre><code>ITEMVALUE=`perl -ne 'print /\\$.*/g' file.txt`\n</code></pre>\n<p>actually runs</p>\n<pre><code>perl -ne 'print /$.*/g' file.txt\n</code></pre>\n<p><a href=\"http://perldoc.perl.org/perlvar.html#%24.\" rel=\"nofollow noreferrer\"><code>$.</code></a> is a Perl built-in variable representing the current line number, so the regex becomes <code>/1*/</code> for the first line, <code>/2*/</code> for the second line, and so on. You'll get output for any line containing its own line number.</p>\n<p>You can see this using Perl's <a href=\"http://perldoc.perl.org/re.html#%27debug%27-mode\" rel=\"nofollow noreferrer\"><code>re</code> pragma</a>:</p>\n<pre><code>$ ITEMVALUE=`perl -Mre=debug -ne 'print /\\$.*/g' file.txt`\nCompiling REx &quot;1*&quot;\n...\nCompiling REx &quot;2*&quot;\n...\n</code></pre>\n<hr />\n<p>To fix, use the <code>$(command)</code> form of command substitution, which is generally preferred anyway:</p>\n<pre><code>ITEMVALUE=$(perl -ne 'print /\\$.*/g' file.txt)\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 6172274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e04a51c17167bae212b255123c87b17c?s=128&d=identicon&r=PG&f=1", "display_name": "hemlock", "link": "https://stackoverflow.com/users/6172274/hemlock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 37754293, "answer_count": 2, "score": 2, "last_activity_date": 1465584512, "creation_date": 1465577664, "last_edit_date": 1465583534, "question_id": 37753503, "link": "https://stackoverflow.com/questions/37753503/why-does-my-perl-one-liner-containing-an-escaped-not-work-inside-bash-backtick", "title": "Why does my Perl one-liner containing an escaped $ not work inside Bash backticks?", "body": "<p>I'm trying search for a <code>$</code> in a text document using a Perl one-liner in a Bash script.  I suspect it is treating the <code>$</code> as a variable.</p>\n\n<p>This is my code:</p>\n\n<pre><code>ITEMVALUE=`perl -ne 'print /\\$.*/g' file.txt`\n</code></pre>\n\n<p>The text looks something like this:</p>\n\n<pre><code>a bunch of random text\n$80\na bunch of random text\n</code></pre>\n\n<p>I want to extract the <code>$80</code> only.  Why isn't this working, and how do I retrieve the desired text?</p>\n"}, {"tags": ["perl", "comm"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1465573779, "post_id": 37752255, "comment_id": 62974209, "body": "<code>chomp</code> the filenames after reading them."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1465579499, "last_edit_date": 1465579499, "creation_date": 1465573779, "answer_id": 37752359, "question_id": 37752255, "link": "https://stackoverflow.com/questions/37752255/newline-character-in-comm-perl-script/37752359#37752359", "title": "newline character in comm perl script", "body": "<p>Two problems:</p>\n\n<ul>\n<li><p><code>$USER</code>'s value ends with a newline. You can <a href=\"http://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow\"><code>chomp</code></a> it away. Fix:</p>\n\n<pre><code>chomp($USER);\n</code></pre></li>\n<li><p>You are passing one very long and incorrect path instead of two. Fix:</p>\n\n<pre><code>`comm -3 '/tmp/${PATH1U}_${SITE1}_s_${USER}' '/tmp/${PATH2U}_${SITE2}_s_${USER}' | wc -l`\n</code></pre>\n\n<p>But that's a hackish way of creating shell literals. Cleaner:</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\n\nmy $comm_cmd = shell_quote('comm', '-3',\n   \"/tmp/${PATH1U}_${SITE1}_s_${USER}\",\n   \"/tmp/${PATH2U}_${SITE2}_s_${USER}\");\n\n`$comm_cmd | wc -l`\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 141, "user_id": 4254279, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/62d4ffc5cdcb8f5660d55f17973d1fce?s=128&d=identicon&r=PG&f=1", "display_name": "Glad", "link": "https://stackoverflow.com/users/4254279/glad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465579499, "creation_date": 1465573457, "last_edit_date": 1465573627, "question_id": 37752255, "link": "https://stackoverflow.com/questions/37752255/newline-character-in-comm-perl-script", "title": "newline character in comm perl script", "body": "<p>There is a newline character getting inserted between the 2 filenames. \nHow do I avoid this?</p>\n\n<pre><code>$diff = `comm -3 \"/tmp/${PATH1U}_${SITE1}_s_${USER} /tmp/${PATH2U}_${SITE2}_s_${USER}\"|wc -l`;\n</code></pre>\n\n<p>This is the error message while executing:</p>\n\n<blockquote>\n  <p>comm: missing operand after `/tmp/file1\\n /tmp/file2\\n'</p>\n</blockquote>\n"}, {"tags": ["perl", "utf-8"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1465569766, "post_id": 37750947, "comment_id": 62971641, "body": "Please show your code. We need to be able to reproduce this before we can help you properly"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465571012, "post_id": 37750947, "comment_id": 62972530, "body": "Are you using <code>use locale</code>?"}, {"owner": {"reputation": 33, "user_id": 6240626, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lV9tFXWG394/AAAAAAAAAAI/AAAAAAAAAcs/YibcaoddADE/photo.jpg?sz=128", "display_name": "Dom Glennon", "link": "https://stackoverflow.com/users/6240626/dom-glennon"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465571324, "post_id": 37750947, "comment_id": 62972718, "body": "<code>local $&#47; = undef; \tbinmode TXT, &quot;:utf8&quot;; \tmy $txtdat = &lt;TXT&gt;; \tmy @paras = split(&quot;\\n&quot;, $txtdat); \tforeach my $para (@paras) { \t\tmy $sentences = get_sentences($para); \t}</code>"}, {"owner": {"reputation": 33, "user_id": 6240626, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lV9tFXWG394/AAAAAAAAAAI/AAAAAAAAAcs/YibcaoddADE/photo.jpg?sz=128", "display_name": "Dom Glennon", "link": "https://stackoverflow.com/users/6240626/dom-glennon"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465571469, "post_id": 37750947, "comment_id": 62972834, "body": "Is this helpful? That&#39;s a code snippet calling get_sentences from the module. The input itself is actually confidential, but they&#39;re Unicode files, as you might imagine."}, {"owner": {"reputation": 33, "user_id": 6240626, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lV9tFXWG394/AAAAAAAAAAI/AAAAAAAAAcs/YibcaoddADE/photo.jpg?sz=128", "display_name": "Dom Glennon", "link": "https://stackoverflow.com/users/6240626/dom-glennon"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465571676, "post_id": 37750947, "comment_id": 62972973, "body": "No, I&#39;m not using <code>use locale</code>."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1465573173, "post_id": 37750947, "comment_id": 62973869, "body": "Your <code>local $&#47; = undef; </code>, <code>my $txtdat = &lt;TXT&gt;;</code> and <code>my @paras = split(&quot;\\n&quot;, $txtdat);</code> can be replaced with the single line <code>my @paras = &lt;TXT&gt;;</code>. That won&#39;t solve your problem, but it does make your code simpler."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1465574897, "post_id": 37750947, "comment_id": 62974907, "body": "I&#39;m guessing that the inputs need to be encoded according to your locale. (If so, the outputs will surely need decoding.)"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6240626, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lV9tFXWG394/AAAAAAAAAAI/AAAAAAAAAcs/YibcaoddADE/photo.jpg?sz=128", "display_name": "Dom Glennon", "link": "https://stackoverflow.com/users/6240626/dom-glennon"}, "edited": false, "score": 0, "creation_date": 1465580624, "post_id": 37752758, "comment_id": 62977957, "body": "Looks fantastic, thank you - I&#39;ll investigate further on Monday."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1465630140, "last_edit_date": 1592644375, "creation_date": 1465575034, "answer_id": 37752758, "question_id": 37750947, "link": "https://stackoverflow.com/questions/37750947/wide-character-in-substition-messages-from-linguaensentence/37752758#37752758", "title": "&quot;Wide character in substition&quot; messages from Lingua::EN::Sentence", "body": "\n<p>I think this must be a bug in <a href=\"https://metacpan.org/pod/Lingua::EN::Sentence\" rel=\"nofollow noreferrer\"><code>Lingua::EN::Sentence</code></a></p>\n<p>Part of its initialisation sets the locale like this</p>\n<pre class=\"lang-perl prettyprint-override\"><code>setlocale(LC_CTYPE, &quot;fr_CA.ISO8859-1&quot;);\n</code></pre>\n<p>which is ISO-8859-1-encoded Canadian French. Nothing wrong with that, but it's a strange default</p>\n<p>The module also exports a <code>set_locale</code> function, which calls <a href=\"https://metacpan.org/pod/POSIX#FUNCTIONS\" rel=\"nofollow noreferrer\"><code>POSIX::setlocale</code></a> to set the locale to what you say, so in theory you could write</p>\n<pre class=\"lang-perl prettyprint-override\"><code>use Lingua::EN::Sentence qw/ get_sentences set_locale /;\n\nset_locale('en_US.UTF-8');\n</code></pre>\n<p>and everything should work</p>\n<p>But it doesn't, and I don't have time today to work out why it doesn't</p>\n<p>I've been able to reproduce your problem with this</p>\n<h3>Perl code</h3>\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse Data::Dump 'pp';\n\nuse Lingua::EN::Sentence qw/ get_sentences set_locale /;\n\nset_locale('en_US.UTF-8');\n\nmy @paragraphs = do {\n    open my $fh, '&lt;:encoding(utf-8)', 'unicode.txt';\n    &lt;$fh&gt;;\n};\n\nprintf &quot;Paragraphs: %s\\n\\n&quot;, pp \\@paragraphs;\n\nmy $n;\nfor my $para ( @paragraphs ) {\n    printf &quot;Sentences in paragraph %d: %s\\n\\n&quot;,\n            ++$n,\n            pp get_sentences($para);\n}\n</code></pre>\n<p>and this</p>\n<h3>input file</h3>\n<pre class=\"lang-none prettyprint-override\"><code>Here's a \u2018quoted\u2019 string. (The quotes are &quot;wide&quot; characters.) Another sentence in the same line. And another.\n\nHere's another paragraph. With a second sentence.\n</code></pre>\n<p>(Why did I have to do that? You're in a much better position to recreate the problem with non-sensitive data.)</p>\n<h3>output</h3>\n<pre class=\"lang-none prettyprint-override\"><code>Wide character (U+2018) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 432.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 432.\nWide character (U+2018) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 433.\nWide character (U+2018) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 433.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 433.\nWide character (U+2018) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 371.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 371.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373.\nWide character (U+2018) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 376.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 376.\nWide character (U+2018) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 380.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 380.\nWide character (U+2018) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 390.\nWide character (U+2018) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 390.\nWide character (U+2018) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 390.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 390.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 390.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 390.\nWide character (U+2018) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 391.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 391.\nWide character (U+2018) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 391.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 391.\nWide character (U+2018) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 395.\nWide character (U+2018) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 395.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 395.\nWide character (U+2018) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 422.\nWide character (U+2018) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 422.\nWide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 422.\n</code></pre>\n<p>And, as I say, that <em>should</em> work if I just call <code>set_locale('en_US.UTF-8')</code>. But it doesn't</p>\n<p>Even <code>no warnings 'locale'</code> doesn't affect these warnings, and the only way I have found to get this going is to patch the <code>Lingua/EN/Sentence.pm</code> file to comment out <code>use locale</code> from line 194 (I am looking at version 0.29 of the module, which is the latest at the time of writing.)</p>\n<p>With that change, I get this</p>\n<h3>output</h3>\n<pre class=\"lang-none prettyprint-override\"><code>Paragraphs: [\n  &quot;Here's a \\x{2018}quoted\\x{2019} string. (The quotes are \\&quot;wide\\&quot; characters.) Another sentence in the same line. And another.\\n&quot;,\n  &quot;\\n&quot;,\n  &quot;Here's another paragraph. With a second sentence.\\n&quot;,\n  &quot;\\n&quot;,\n  &quot;\\n&quot;,\n  &quot;\\n&quot;,\n]\n\nSentences in paragraph 1: [\n  &quot;Here's a \\x{2018}quoted\\x{2019} string.&quot;,\n  &quot;(The quotes are \\&quot;wide\\&quot; characters.)&quot;,\n  &quot;Another sentence in the same line.&quot;,\n  &quot;And another.&quot;,\n]\n\nSentences in paragraph 2: undef\n\nSentences in paragraph 3: [&quot;Here's another paragraph.&quot;, &quot;With a second sentence.&quot;]\n\nSentences in paragraph 4: undef\n\nSentences in paragraph 5: undef\n\nSentences in paragraph 6: undef\n</code></pre>\n<p>Note that the <code>undef</code> values are correct, and correspond to blank lines in the input</p>\n<p>I will raise this with Kim Ryan, the maintainer of this module, and see what she(he?) has to say. In the mean time I hope this helps</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 6240626, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lV9tFXWG394/AAAAAAAAAAI/AAAAAAAAAcs/YibcaoddADE/photo.jpg?sz=128", "display_name": "Dom Glennon", "link": "https://stackoverflow.com/users/6240626/dom-glennon"}, "edited": false, "score": 0, "creation_date": 1466070348, "post_id": 37825739, "comment_id": 63169224, "body": "Hi Kim, thank you for taking the time to look at this and reply. I&#39;ll investigate which characters are causing the warnings and how they can best be converted."}, {"owner": {"reputation": 33, "user_id": 6240626, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lV9tFXWG394/AAAAAAAAAAI/AAAAAAAAAcs/YibcaoddADE/photo.jpg?sz=128", "display_name": "Dom Glennon", "link": "https://stackoverflow.com/users/6240626/dom-glennon"}, "edited": false, "score": 0, "creation_date": 1466087593, "post_id": 37825739, "comment_id": 63181600, "body": "Hi Kim, just looking further into this - do you mean that the module doesn&#39;t support UTF-8, or that there&#39;s a problem with the encoding in these files? I set the input to UTF-8 using binmode."}, {"owner": {"reputation": 445, "user_id": 4098466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7adf4028d6e536b23711192e22d7e2?s=128&d=identicon&r=PG&f=1", "display_name": "Kim Ryan", "link": "https://stackoverflow.com/users/4098466/kim-ryan"}, "reply_to_user": {"reputation": 33, "user_id": 6240626, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lV9tFXWG394/AAAAAAAAAAI/AAAAAAAAAcs/YibcaoddADE/photo.jpg?sz=128", "display_name": "Dom Glennon", "link": "https://stackoverflow.com/users/6240626/dom-glennon"}, "edited": false, "score": 0, "creation_date": 1466219337, "post_id": 37825739, "comment_id": 63239973, "body": "Hi Dom, the problem is that basic  perl function such as regexp search and replace and print are desgined to work with single byte characters. If they detect mutli-byte characters, they issues a warning.   As I mentioned, the sentences are still split correctly. Using binmode and utf prgams won&#39;t stop these warnings. Yourtext data is correctly encoded. But if you don&#39;t want ot see the warnings, you need  to first replace all the multibyte sequences with their ASCII equivalents."}], "tags": [], "owner": {"reputation": 445, "user_id": 4098466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7adf4028d6e536b23711192e22d7e2?s=128&d=identicon&r=PG&f=1", "display_name": "Kim Ryan", "link": "https://stackoverflow.com/users/4098466/kim-ryan"}, "is_accepted": false, "score": 1, "last_activity_date": 1465980372, "last_edit_date": 1465980372, "creation_date": 1465962374, "answer_id": 37825739, "question_id": 37750947, "link": "https://stackoverflow.com/questions/37750947/wide-character-in-substition-messages-from-linguaensentence/37825739#37825739", "title": "&quot;Wide character in substition&quot; messages from Lingua::EN::Sentence", "body": "<p>I am the author of this module. As far as I can see, the problem has nothing to do with the locale setting. The error messages also appears when using set_locale('en_US.UTF-8');</p>\n\n<p>The issue is that you have a few utf8 characters (left quote etc) mixed in with ASCII ones. When the module does a substitution function on your text, it needs to issue a warning that it is dealing with multi byte data. It doesn't effect the result, it still splits the sentences correctly.</p>\n\n<p>If you could convert your input data to be only ASCII then the error would  not be there. This can be done by saying the following (plus any other chars you want to map, besides the curly quotes).</p>\n\n<p>$txtdat  =~ s/[\u2018\u2019]/'/g;</p>\n\n<p>before calling get_sentences</p>\n\n<p>A work around is to comment out the 'use warnings;' line in Sentence.pm . I feel that it is reasonable to issue theese warnings though, as others may want to be infomred of mixed encodings in their data streams.</p>\n"}], "owner": {"reputation": 33, "user_id": 6240626, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lV9tFXWG394/AAAAAAAAAAI/AAAAAAAAAcs/YibcaoddADE/photo.jpg?sz=128", "display_name": "Dom Glennon", "link": "https://stackoverflow.com/users/6240626/dom-glennon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1465980372, "creation_date": 1465569435, "last_edit_date": 1465658615, "question_id": 37750947, "link": "https://stackoverflow.com/questions/37750947/wide-character-in-substition-messages-from-linguaensentence", "title": "&quot;Wide character in substition&quot; messages from Lingua::EN::Sentence", "body": "<p>I've used <a href=\"https://metacpan.org/pod/Lingua::EN::Sentence\" rel=\"nofollow\"><code>Lingua::EN::Sentence</code></a> for some time with no problem. Now suddenly it's started giving me \"wide character in substitution\" messages such as:</p>\n\n<blockquote>\n  <p>Wide character (U+2019) in substitution (s///) at C:/Strawberry/perl/site/lib/Lingua/EN/Sentence.pm line 373,  chunk 55.</p>\n</blockquote>\n\n<p>Any idea why these have started appearing, and how I can get rid of them? The input file is set to <code>:utf8</code> and the output looks OK. I would just like it to stop spitting out warning messages.</p>\n\n<p>Here is some of the code in the program:</p>\n\n<pre><code>local $/ = undef; \nbinmode TXT, \":utf8\"; \nmy $txtdat = &lt;TXT&gt;;\nmy @paras = split(\"\\n\", $txtdat); \nforeach my $para (@paras) { \n    my $sentences = get_sentences($para);\n}\n</code></pre>\n"}, {"tags": ["regex", "perl", "split", "whitespace", "comma"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 3, "creation_date": 1465563910, "post_id": 37748868, "comment_id": 62967626, "body": "Just a sidenote: you don&#39;t no need to explicitely state the <code>\\t</code> because <code>\\s</code> already includes both spaces and tabs (and every other <i>whitespace character</i> although I don&#39;t know others)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1465570100, "post_id": 37748868, "comment_id": 62971888, "body": "@PerlDog: The Unicode names of the ASCII characters matched by <code>\\s</code> are <code>CHARACTER TABULATION</code>, <code>LINE FEED</code>, <code>LINE TABULATION</code>, <code>FORM FEED</code>, <code>CARRIAGE RETURN</code>, and <code>SPACE</code>. That is <code>[\\t\\n\\x0B\\f\\r ]</code>. There are a dozen or more characters outside ASCII that also match"}], "answers": [{"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1465564222, "post_id": 37748994, "comment_id": 62967814, "body": "map { s/^\\s*|\\s*$//gr } &quot;r&quot; means could you please in detail?"}, {"owner": {"reputation": 1640, "user_id": 4273851, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/24f0896e35ca5cf36f0b6b4ec2aeec34?s=128&d=identicon&r=PG&f=1", "display_name": "A.D", "link": "https://stackoverflow.com/users/4273851/a-d"}, "edited": false, "score": 0, "creation_date": 1465564381, "post_id": 37748994, "comment_id": 62967917, "body": "<code>my @columns = map { s&#47;^\\s*|\\s*$&#47;&#47;gr } split(&#47;,&#47;, $str);</code> worked perfectly. Thank you!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1465564599, "post_id": 37748994, "comment_id": 62968069, "body": "Note <code>r</code> regex modifier is only available in versions of perl &gt;  5.14"}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 6, "last_activity_date": 1465564958, "last_edit_date": 1465564958, "creation_date": 1465563755, "answer_id": 37748994, "question_id": 37748868, "link": "https://stackoverflow.com/questions/37748868/perl-split-string-on-comma-ignore-whitespace/37748994#37748994", "title": "Perl - Split string on comma. Ignore whitespace", "body": "<p>A pretty common solution to this is to transform the values returned from split. In this case you want to remove any leading or trailing space, normally called a <em>trim</em> operation. Using this approach you don't have to worry about spaces at all in the split operation:</p>\n\n<pre><code>use strict; \nuse warnings; \n\nmy $str=\"     a, b,    c&gt;d:e,  f,    g \";\nmy @columns = map { s/^\\s*|\\s*$//gr } split(/,/, $str);\nprint join(',', @columns), \"\\n\";\n</code></pre>\n\n<p>Another solution as @toolic mentions above is to remove all spaces beforehand:</p>\n\n<pre><code>use strict; \nuse warnings; \n\nmy $str=\"     a, b,    c&gt;d:e,  f,    g \";\n$str =~ s/\\s+//g; # remove all occurrences of 1 or more spaces\nmy @columns = split(/,/, $str);\nprint join(',', @columns), \"\\n\";\n</code></pre>\n\n<p>both of the above solutions return this output:</p>\n\n<blockquote>\n  <p>a,b,c>d:e,f,g</p>\n</blockquote>\n\n<p>More information about the <a href=\"http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow\"><code>/r</code></a> modifier: </p>\n\n<p><code>/r</code> is a modifier that can be applied to substitutions that is non-destructive. Meaning that the original string is not modified, instead a copy is created, modified, and returned. This has advantages because normally in scalar context the <code>s///</code> operator will return the number of substitutions that occurred instead of the modified string. This is only available in Perl versions >= 5.14. An equivalent statement for Perl versions below this would be:</p>\n\n<pre><code>my $original = \"some_string\";\n(my $copy = $original) =~ s/$search_pattern/$replace_pattern/;\n</code></pre>\n\n<p>and to use in a map:</p>\n\n<pre><code>map { \n   (my $temp = $_) =~ s/$search_pattern/$replace_pattern/; $temp \n} split /$delimiter/, $original;\n</code></pre>\n\n<p>ex:</p>\n\n<pre><code>my $string = 'abc'; \nmy $num_substitutions = $string =~ s/a/d/; # 1 \n\nmy $string = 'abc';\nmy $new_string = $string =~ s/a/d/r; # dbc\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1640, "user_id": 4273851, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/24f0896e35ca5cf36f0b6b4ec2aeec34?s=128&d=identicon&r=PG&f=1", "display_name": "A.D", "link": "https://stackoverflow.com/users/4273851/a-d"}, "edited": false, "score": 0, "creation_date": 1465567227, "post_id": 37749797, "comment_id": 62969933, "body": "None of these work for me, the first one returns <code>[&quot;    &quot;,  &quot;,    &quot;, &quot;,    &quot;, &quot;,    &quot;]</code> etc."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1640, "user_id": 4273851, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/24f0896e35ca5cf36f0b6b4ec2aeec34?s=128&d=identicon&r=PG&f=1", "display_name": "A.D", "link": "https://stackoverflow.com/users/4273851/a-d"}, "edited": false, "score": 0, "creation_date": 1465567477, "post_id": 37749797, "comment_id": 62970086, "body": "Have you copied the code directly from my answer? It&#39;s fairly basic Perl that hasn&#39;t changed since v5.8"}, {"owner": {"reputation": 1640, "user_id": 4273851, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/24f0896e35ca5cf36f0b6b4ec2aeec34?s=128&d=identicon&r=PG&f=1", "display_name": "A.D", "link": "https://stackoverflow.com/users/4273851/a-d"}, "edited": false, "score": 0, "creation_date": 1465567764, "post_id": 37749797, "comment_id": 62970273, "body": "Ugh! I forgot to add the <code>^</code> before <code>\\s</code>. This is much cleaner code than the answer I accepted first. I will use this instead, thank you very much!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 7, "last_activity_date": 1465568442, "last_edit_date": 1465568442, "creation_date": 1465566056, "answer_id": 37749797, "question_id": 37748868, "link": "https://stackoverflow.com/questions/37748868/perl-split-string-on-comma-ignore-whitespace/37749797#37749797", "title": "Perl - Split string on comma. Ignore whitespace", "body": "\n\n<p>I suggest that you use a global regex match to find all subsequences of characters that are neither commas nor whitespace</p>\n\n<p>It will produce the same output as your <code>split(/[\\s\\t,]+/</code>. (Note that the <code>\\t</code> is superfluous because <code>\\s</code> also matches tabs.) But will create a list without any empty elements</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nmy $str = \"     a, b,    c&gt;d:e,  f,    g \";\n\nmy @columns = $str =~ /[^\\s,]+/g;\n\nuse Data::Dump;\ndd \\@columns;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>[\"a\", \"b\", \"c&gt;d:e\", \"f\", \"g\"]\n</code></pre>\n\n<p><strong><em>Note that</em></strong>, just like your split, this method will ignore any empty fields: something like <code>a,,,b</code> will return <code>[ 'a', 'b' ]</code> instead of <code>[ 'a', '', '', 'b' ]</code>. Also, columns that contain whitespace will be split, so <code>a,two words,b</code> will produce <code>[ 'a', 'two', 'words', 'b' ]</code> instead of <code>[ 'a', 'two words', 'b' ]</code>. Only you can tell whether these situations are likely to arise</p>\n\n<p>If there is any chance that this method will produce the wrong results, then it is better to simply split on commas and write a subroutine to trim the resulting fields</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict; \nuse warnings 'all';\n\nsub trim(;$);\n\nmy $str=\"     a  ,, ,two words ,,, b\";\nmy @columns = map trim, split /,/, $str;\n\nuse Data::Dump;\ndd \\@columns;\n\n\nsub trim(;$) {\n    (my $trimmed = $_[0] // $_) =~ s/\\A\\s+|\\s+\\z//g;\n    $trimmed;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>[\"a\", \"\", \"\", \"two words\", \"\", \"\", \"b\"]\n</code></pre>\n"}], "owner": {"reputation": 1640, "user_id": 4273851, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/24f0896e35ca5cf36f0b6b4ec2aeec34?s=128&d=identicon&r=PG&f=1", "display_name": "A.D", "link": "https://stackoverflow.com/users/4273851/a-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3251, "favorite_count": 1, "accepted_answer_id": 37749797, "answer_count": 2, "score": 3, "last_activity_date": 1465568442, "creation_date": 1465563358, "last_edit_date": 1465568077, "question_id": 37748868, "link": "https://stackoverflow.com/questions/37748868/perl-split-string-on-comma-ignore-whitespace", "title": "Perl - Split string on comma. Ignore whitespace", "body": "<p>I have this string:</p>\n\n<pre><code>$str=\"     a, b,    c&gt;d:e,  f,    g \";\n</code></pre>\n\n<p>In this string there might be <strong>spaces</strong> and/or <strong>tabs</strong></p>\n\n<p>I split the string in perl:</p>\n\n<pre><code>my (@COLUMNS) = split(/[\\s\\t,]+/, $str));\n</code></pre>\n\n<p>But this creates a leading space in position [0].</p>\n\n<pre><code>@COLUMNS=[\n\n    a\n    b\n    c&gt;d:e\n    f\n    g\n]\n</code></pre>\n\n<p>I want this:</p>\n\n<pre><code>@COLUMNS=[\n    a\n    b\n    c&gt;d:e\n    f\n    g\n]\n</code></pre>\n"}, {"tags": ["xml", "perl", "xslt"], "answers": [{"tags": [], "owner": {"reputation": 137664, "user_id": 252228, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3ea75023c3c487f36257090d420b7c50?s=128&d=identicon&r=PG", "display_name": "Martin Honnen", "link": "https://stackoverflow.com/users/252228/martin-honnen"}, "is_accepted": true, "score": 2, "last_activity_date": 1465563214, "creation_date": 1465563214, "answer_id": 37748815, "question_id": 37748643, "link": "https://stackoverflow.com/questions/37748643/xslcopy-of-could-not-compile-select-expression/37748815#37748815", "title": "xsl:copy-of : could not compile select expression", "body": "<p>Using <code>$Match/(@key|translation/text())</code> is allowed in XPath 2.0 as used in XSLT 2.0 but Perl is likely to use an XSLT 1.0 processor like libxslt. So you would need to spell it out as <code>$Match/@key | $Match/translation/text()</code>.</p>\n"}], "owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 998, "favorite_count": 0, "accepted_answer_id": 37748815, "answer_count": 1, "score": 0, "last_activity_date": 1465563214, "creation_date": 1465562679, "last_edit_date": 1495535652, "question_id": 37748643, "link": "https://stackoverflow.com/questions/37748643/xslcopy-of-could-not-compile-select-expression", "title": "xsl:copy-of : could not compile select expression", "body": "<p>I am trying to transform an xml file using xsl stylesheet.</p>\n\n<p><strong>xml file</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;msg&gt;\n    &lt;ent key=\"key1\"&gt;\n        &lt;text&gt;Error: Could not find &lt;/text&gt;\n        &lt;translation&gt;Another Error similar to previous one.&lt;/translation&gt;\n    &lt;/ent&gt;\n&lt;/msg&gt;\n</code></pre>\n\n<p><strong>xsl file</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" version=\"1.0\"&gt;\n&lt;xsl:output method=\"text\"/&gt;\n&lt;xsl:template match=\"msg\"&gt;\n        &lt;xsl:for-each select=\"ent\"&gt;\n            &lt;xsl:variable name=\"current_key\" select=\"@key\"/&gt;\n            &lt;xsl:variable name=\"Match\" select=\"$translations/msg/ent[@key = $current_key]\"/&gt;\n            &lt;xsl:choose&gt;\n                &lt;xsl:when test=\"$Match and normalize-space($Match/text) = normalize-space(.) and (not(@translate) or @translate = true())\"&gt;\n                    &lt;xsl:copy&gt;\n                        &lt;xsl:copy-of select=\"$Match/(@key|translation/text())|@context\"/&gt;\n                    &lt;/xsl:copy&gt;\n                &lt;/xsl:when&gt;\n            &lt;/xsl:choose&gt;\n        &lt;/xsl:for-each&gt;\n    &lt;/xsl:template&gt;\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n\n<p><code>@translate</code> is one of the attributes but I have not included it in the example xml file.</p>\n\n<p>I am using Perl to do my transformation. \nI use the script as mentioned in this <a href=\"https://stackoverflow.com/a/37727023/1410711\">answer</a>, when I get the following error,</p>\n\n<pre><code>Invalid expression\ncompilation error: file test.xsl line 11 element copy-of\nxsl:copy-of : could not compile select expression '$Match/(@key|translation/text())|@context'\n at Transform.pl line 10\n</code></pre>\n\n<p>Why is the <code>select</code> expression causing problem?</p>\n"}, {"tags": ["perl", "dictionary", "hash"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1465568047, "post_id": 37748555, "comment_id": 62970474, "body": "Even with the oldest version of Perl I have handy, 5.14, that actually produces <code>syntax error at a.pl line 1, near &quot;$api_decoded_result{&quot;</code>, because <code>%$api_decoded_result{&#39;query&#39;}</code> makes no sense."}, {"owner": {"reputation": 130, "user_id": 1450477, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1c300a8a3799bb23895adf30d5168c0c?s=128&d=identicon&r=PG", "display_name": "UndergroundVault", "link": "https://stackoverflow.com/users/1450477/undergroundvault"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1465568190, "post_id": 37748555, "comment_id": 62970574, "body": "I think it&#39;s experimental on 5.20.2 but removed in the more recent versions, hence the syntax error"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1465568287, "post_id": 37748555, "comment_id": 62970634, "body": "No, the error you get from <code>keys($ref)</code> in 5.24+ is <code>Experimental keys on scalar is now forbidden</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1465562913, "post_id": 37748649, "comment_id": 62966982, "body": "you forgot a <code>-&gt;</code> between <code>$api_decoded_result</code> and <code>{&#39;query&#39;}</code> I think"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1465563199, "post_id": 37748649, "comment_id": 62967174, "body": "Possibly. Without knowing what the source data structure the OP is using, I chose to copy it."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1465563774, "post_id": 37748649, "comment_id": 62967540, "body": "Actually he was treating it like a hashref and not a hash : <code>%$api_decoded_result</code> seems to aim at accessing the reference, and he uses <code>$api_decoded_result-&gt;{&#39;query&#39;}</code> inside the loop... Since he accepted your answer I guess it&#39;s ok, but it&#39;s quite weird though."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 5, "last_activity_date": 1465562918, "last_edit_date": 1465562918, "creation_date": 1465562695, "answer_id": 37748649, "question_id": 37748555, "link": "https://stackoverflow.com/questions/37748555/perl-keys-on-reference-is-experimental-warning/37748649#37748649", "title": "Perl &quot;keys on reference is experimental&quot; warning", "body": "<p>Yup. This is because of precedence of operator dereferencing. <code>%$api_decoded_result</code> binds tighter than the <code>{'query'}</code>. </p>\n\n<pre><code>keys %{$api_decoded_result{'query'}-&gt;{'pages'}}\n</code></pre>\n\n<p>Will do what you want. </p>\n"}], "owner": {"reputation": 130, "user_id": 1450477, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1c300a8a3799bb23895adf30d5168c0c?s=128&d=identicon&r=PG", "display_name": "UndergroundVault", "link": "https://stackoverflow.com/users/1450477/undergroundvault"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1844, "favorite_count": 0, "accepted_answer_id": 37748649, "answer_count": 1, "score": 2, "last_activity_date": 1465562918, "creation_date": 1465562436, "question_id": 37748555, "link": "https://stackoverflow.com/questions/37748555/perl-keys-on-reference-is-experimental-warning", "title": "Perl &quot;keys on reference is experimental&quot; warning", "body": "<p>My perl program is throwing some warnings, and I am yet to have any luck searching the Internet for a solution. Is there any way I can rewrite the following code snippet so that no warnings are thrown?</p>\n\n<p>\"keys on reference is experimental at...\":</p>\n\n<pre><code>foreach my $key ( keys %$api_decoded_result{'query'}-&gt;{'pages'} ) {\n    @words = split / /, $api_decoded_result-&gt;{'query'}-&gt;{'pages'}{$key}-&gt;{'extract'};\n}\n</code></pre>\n"}, {"tags": ["perl", "foreach", "hashref"], "answers": [{"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": true, "score": 2, "last_activity_date": 1465562568, "creation_date": 1465562568, "answer_id": 37748612, "question_id": 37748531, "link": "https://stackoverflow.com/questions/37748531/perl-how-to-loop-access-hashref/37748612#37748612", "title": "perl - How to loop access hashref?", "body": "<p>You need to dereference the array (<a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow\">perldoc perldsc</a>):</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $var = {\n            'data' =&gt; [\n                        {\n                          'id' =&gt; '312351465029_10154168935475030',\n                          'name' =&gt; 'Timeline Photos 1'\n                        },\n                        {\n                          'name' =&gt; 'Bangchak\\'s cover photo',\n                          'id' =&gt; '312351465029_10154168087455030',\n                        },\n                        {\n                          'id' =&gt; '312351465029_10154168081875030',\n                          'name' =&gt; 'Timeline Photos 2',\n                        }\n                      ],\n            'paging' =&gt; {\n                          'previous' =&gt; 'https://graph.facebook.com/v2.6/312351465029/2',\n                          'next' =&gt; 'https://graph.facebook.com/v2.6/312351465029/3'\n                        }\n          };\n\nforeach my $m (@{ $var-&gt;{data} }) {\n    if ( $m-&gt;{name} =~ /Timeline/i )\n    {\n        print \"id = $m-&gt;{id}\\n\";\n    }\n}\n\n__END__\n\nid = 312351465029_10154168935475030\nid = 312351465029_10154168081875030\n</code></pre>\n"}], "owner": {"reputation": 649, "user_id": 2784466, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/100001914302787/picture?type=large", "display_name": "Boontawee Home", "link": "https://stackoverflow.com/users/2784466/boontawee-home"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 1, "accepted_answer_id": 37748612, "answer_count": 1, "score": 1, "last_activity_date": 1465562568, "creation_date": 1465562354, "question_id": 37748531, "link": "https://stackoverflow.com/questions/37748531/perl-how-to-loop-access-hashref", "title": "perl - How to loop access hashref?", "body": "<p>I have some data in hashref format. I fetch data from graph.facebook.com\nHow to loop access?</p>\n\n<pre><code>$var = \\{\n            'data' =&gt; [\n                        {\n                          'id' =&gt; '312351465029_10154168935475030',\n                          'name' =&gt; 'Timeline Photos 1'\n                        },\n                        {\n                          'name' =&gt; 'Bangchak\\'s cover photo',\n                          'id' =&gt; '312351465029_10154168087455030',\n                        },\n                        {\n                          'id' =&gt; '312351465029_10154168081875030',\n                          'name' =&gt; 'Timeline Photos 2',\n                        }\n                      ],\n            'paging' =&gt; {\n                          'previous' =&gt; 'https://graph.facebook.com/v2.6/312351465029/2',\n                          'next' =&gt; 'https://graph.facebook.com/v2.6/312351465029/3'\n                        }\n          };\n</code></pre>\n\n<p>These code Didn't work.</p>\n\n<pre><code>foreach $m ($var-&gt;{data})\n{\n    if ( $m-&gt;{name} =~ /Timeline/i )\n    {\n        print \"id = $m-&gt;{id}\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": ["postgresql", "perl", "jdbc"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1465560375, "post_id": 37747553, "comment_id": 62965182, "body": "Is that the correct code? Looks like that error was generated by running a completely different query."}, {"owner": {"reputation": 35, "user_id": 3380032, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/H6olR.jpg?s=128&g=1", "display_name": "Wanexa", "link": "https://stackoverflow.com/users/3380032/wanexa"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1465561127, "post_id": 37747553, "comment_id": 62965673, "body": "I didn&#39;t put all the variables init and others things, because you dont &#39;s see &quot;Got here without dying2&quot; ?"}], "answers": [{"tags": [], "owner": {"reputation": 35, "user_id": 3380032, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/H6olR.jpg?s=128&g=1", "display_name": "Wanexa", "link": "https://stackoverflow.com/users/3380032/wanexa"}, "is_accepted": false, "score": 1, "last_activity_date": 1474548287, "creation_date": 1474548287, "answer_id": 39639429, "question_id": 37747553, "link": "https://stackoverflow.com/questions/37747553/dbdjdbc-with-postgres/39639429#39639429", "title": "DBD::JDBC with POstgres", "body": "<p>problem solved with this version JDBC42 Postgresql Driver, Version 9.4.1211</p>\n"}], "owner": {"reputation": 35, "user_id": 3380032, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/H6olR.jpg?s=128&g=1", "display_name": "Wanexa", "link": "https://stackoverflow.com/users/3380032/wanexa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474548287, "creation_date": 1465559406, "last_edit_date": 1465560246, "question_id": 37747553, "link": "https://stackoverflow.com/questions/37747553/dbdjdbc-with-postgres", "title": "DBD::JDBC with POstgres", "body": "<p>Here is my problem, my code is simple connect to the database execute a query and retrieve some row</p>\n\n<p>I can connect to the database but the problem is when I want to execute a query \nhere is the code</p>\n\n<pre><code>my $url = \"jdbc:sqlserver://x.x.x.x\\\\db\";\n\nmy $dbh = DBI-&gt;connect(\"dbi:JDBC:hostname=localhost;port=$opt_P;url=$url\",\n    test, xxx, {RaiseError =&gt; 4, PrintError =&gt; 4});\n\n$query = \"SELECT setting FROM pg_catalog.pg_settings\n          WHERE name = 'server_version'\";\n$sth = $dbh-&gt;prepare ($query) or die \"prepare failed\\n\";\nprint \"Got here without dying2\\n\";\n$sth-&gt;execute( ) or die \"unable to execute query $query   error $DBI::errstr\";`\n</code></pre>\n\n<p>and I got this error </p>\n\n<blockquote>\n  <p>DBD::JDBC::st execute warning: ERROR: syntax error at or near \"RETURNING\" Position: 74 at ./test</p>\n</blockquote>\n\n<p>Strange thing it's working with dbi:odbc and jdbc is working with java and postgresql but not perl :(</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 2, "creation_date": 1465545659, "post_id": 37742812, "comment_id": 62956147, "body": "probably need the /s multi-line also"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 2, "creation_date": 1465546483, "post_id": 37742812, "comment_id": 62956633, "body": "@xxfelixxx: /s changes how <code>.</code> behaves. There&#39;s no <code>.</code> in the regex."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1465546514, "post_id": 37742812, "comment_id": 62956657, "body": "<code>&#47;m</code> changes how <code>^</code> and <code>$</code> behave. It&#39;s not needed here."}, {"owner": {"reputation": 21, "user_id": 6256278, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cf52c6ec5d836afd40aecbe711d0be8?s=128&d=identicon&r=PG&f=1", "display_name": "perun_", "link": "https://stackoverflow.com/users/6256278/perun"}, "edited": false, "score": 0, "creation_date": 1465546673, "post_id": 37742812, "comment_id": 62956749, "body": "I&#39;m trying to delete that block with: perl -pi -e &quot;s/^host customerPERA \\{[^}]*\\}//&quot; /etc/dhcp/dhcpd.conf without success"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1465548278, "post_id": 37742812, "comment_id": 62957768, "body": "perl -e &#39;open my $fh, &quot;/etc/dhcp/dhcpd.conf&quot; or die &quot;Unable to open : $!&quot;; my $txt = do { local $/; &lt;$fh&gt; }; $txt =~ s/host\\s+customerPERA\\s+\\{([^}]+)\\}//m; print $txt;&#39;"}, {"owner": {"reputation": 159, "user_id": 4574761, "user_type": "registered", "profile_image": "https://graph.facebook.com/653023058158087/picture?type=large", "display_name": "Sergey  Nazarenko", "link": "https://stackoverflow.com/users/4574761/sergey-nazarenko"}, "edited": false, "score": 0, "creation_date": 1466161414, "post_id": 37742812, "comment_id": 63214791, "body": "&quot;perl -p0i -e&quot; not &quot;perl -pi -e&quot;"}], "tags": [], "owner": {"reputation": 159, "user_id": 4574761, "user_type": "registered", "profile_image": "https://graph.facebook.com/653023058158087/picture?type=large", "display_name": "Sergey  Nazarenko", "link": "https://stackoverflow.com/users/4574761/sergey-nazarenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1465556028, "last_edit_date": 1465556028, "creation_date": 1465545065, "answer_id": 37742812, "question_id": 37742707, "link": "https://stackoverflow.com/questions/37742707/perl-regexp-curly-brackets/37742812#37742812", "title": "perl regexp curly brackets", "body": "<p>The solution for your problem:</p>\n\n<pre><code>perl -p0i -e 's/host\\s+customerPERA\\s+\\{[^}]+\\}/host customerPERA {}/g' /etc/dhcp/dhcpd.conf\n</code></pre>\n\n<p>It will replace \"host customerPERA {}\" on \"host customerPERA {}\" (with empty curly brackets)</p>\n"}, {"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1465556347, "post_id": 37743974, "comment_id": 62962699, "body": "What about if any curly braces found inside your inputs? Might be it will not match?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1465565376, "post_id": 37743974, "comment_id": 62968634, "body": "@ssr1012: it&#39;s been a long time since I&#39;ve configured a dhcpd server, but if I recall correctly, there aren&#39;t any instances where braces are used inside of a host definition. I could be wrong though"}], "tags": [], "owner": {"reputation": 21, "user_id": 6256278, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cf52c6ec5d836afd40aecbe711d0be8?s=128&d=identicon&r=PG&f=1", "display_name": "perun_", "link": "https://stackoverflow.com/users/6256278/perun"}, "is_accepted": true, "score": 0, "last_activity_date": 1465548844, "creation_date": 1465548844, "answer_id": 37743974, "question_id": 37742707, "link": "https://stackoverflow.com/questions/37742707/perl-regexp-curly-brackets/37743974#37743974", "title": "perl regexp curly brackets", "body": "<p>I did it:</p>\n\n<pre><code>perl  -pe 'BEGIN{undef $/;} s/^host customerPERA[^}]*}//smg' /etc/dhcp/dhcpd.conf \n</code></pre>\n\n<p>Thanks all</p>\n"}, {"tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 0, "last_activity_date": 1465552751, "creation_date": 1465552751, "answer_id": 37745342, "question_id": 37742707, "link": "https://stackoverflow.com/questions/37742707/perl-regexp-curly-brackets/37745342#37745342", "title": "perl regexp curly brackets", "body": "<p>I can do it this way:</p>\n\n<p>Input:</p>\n\n<pre><code>host customerPERA{\n       host-identifier option agent.circuit-id \"x:y\";\n       fixed-address yyy.yyy.yyy.yyy;\n       option routers xxx.xxx.xxx.xxx;\n       option subnet-mask 255.255.255.0;\n }\n</code></pre>\n\n<p>If this is the case to find exactly matches:</p>\n\n<p>Regex Pattern:</p>\n\n<pre><code> $myRegex = qw/((?:[^{}]*(?:{(?:[^{}]*(?:{(?:[^{}]*(?:{[^{}]*})*[^{}]*)*})*[^{}]*)*})*[^{}]*)*)/;\n\n if($pattern=~m/host CustomerPERA\\{$myRegex\\}/gs)\n {\n      #do it you statement here\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 6447967, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4kt-uhK8pQk/AAAAAAAAAAI/AAAAAAAAADM/d7KEkgnoFOw/photo.jpg?sz=128", "display_name": "Shaka Flex", "link": "https://stackoverflow.com/users/6447967/shaka-flex"}, "is_accepted": false, "score": 0, "last_activity_date": 1465648368, "creation_date": 1465648368, "answer_id": 37763774, "question_id": 37742707, "link": "https://stackoverflow.com/questions/37742707/perl-regexp-curly-brackets/37763774#37763774", "title": "perl regexp curly brackets", "body": "<p>You would want to use the <a href=\"http://perldoc.perl.org/perlrecharclass.html#The-dot\" rel=\"nofollow\" title=\"single line modifier\">single line modifier</a> locally with <code>(?s)</code>. \nThis can give you a one line code to remove or edit what you want.</p>\n\n<pre><code>$string =~ s/host customerPERA \\{(?s).+?\\}//;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6256278, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cf52c6ec5d836afd40aecbe711d0be8?s=128&d=identicon&r=PG&f=1", "display_name": "perun_", "link": "https://stackoverflow.com/users/6256278/perun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 542, "favorite_count": 0, "accepted_answer_id": 37743974, "answer_count": 4, "score": 0, "last_activity_date": 1465648368, "creation_date": 1465544728, "last_edit_date": 1465545375, "question_id": 37742707, "link": "https://stackoverflow.com/questions/37742707/perl-regexp-curly-brackets", "title": "perl regexp curly brackets", "body": "<p>How can I match multilines between { and }. Exactly I need to match block below</p>\n\n<pre><code>host customerPERA {\n      host-identifier option agent.circuit-id \"x:y\";\n      fixed-address yyy.yyy.yyy.yyy;\n      option routers xxx.xxx.xxx.xxx;\n      option subnet-mask 255.255.255.0;\n}\n</code></pre>\n\n<p>I have to delete that block from very huge dhcpd.conf file. \nThanks in advance!</p>\n\n<p>P.S. I forgot, I need regexp for perl..</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1465518769, "post_id": 37736765, "comment_id": 62947210, "body": "Alternatively, if you don&#39;t want to export <code>replace</code> to the environment, <code>echo foo123 | replace=&quot;$replace&quot; perl -p -e &#39;s&#47;(\\d+)&#47;$ENV{replace}456&#47;&#39;</code>."}], "tags": [], "owner": {"reputation": 6928, "user_id": 1015385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc84a03227c566697c4a16b2e9f8782?s=128&d=identicon&r=PG", "display_name": "JRFerguson", "link": "https://stackoverflow.com/users/1015385/jrferguson"}, "is_accepted": true, "score": 4, "last_activity_date": 1465509056, "creation_date": 1465509056, "answer_id": 37736765, "question_id": 37736646, "link": "https://stackoverflow.com/questions/37736646/using-a-bash-variable-in-regex-replace/37736765#37736765", "title": "Using a bash variable in regex replace", "body": "<pre><code>replace=\"bar\"  \necho foo123 | perl -p -e 's/(\\d+)/$ENV{replace}456/'\n</code></pre>\n\n<p>This grabs the shell variable from the environment in which Perl runs.  In some circumstances you might need to export first:</p>\n\n<pre><code>export replace=\"bar\"\n</code></pre>\n"}], "owner": {"reputation": 3193, "user_id": 605748, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/HwCQp.png?s=128&g=1", "display_name": "Allan Thomas", "link": "https://stackoverflow.com/users/605748/allan-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 37736765, "answer_count": 1, "score": 0, "last_activity_date": 1465509056, "creation_date": 1465508471, "question_id": 37736646, "link": "https://stackoverflow.com/questions/37736646/using-a-bash-variable-in-regex-replace", "title": "Using a bash variable in regex replace", "body": "<pre><code>replace=\"bar\"\necho foo123 | perl -p -e 's/(\\d+)/${replace}456/'\n</code></pre>\n\n<p>Is there a way to use a pre-defined variable in your replacement string? Maybe even a better alternative to <code>perl</code>?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1465504095, "post_id": 37735443, "comment_id": 62942402, "body": "Thanks for a complete question. I am not sure I fully understand the description -- In your example, do you expect to only see <code>server02</code>? Or to <i>not</i> see that one?"}, {"owner": {"reputation": 21, "user_id": 3612635, "user_type": "registered", "profile_image": "https://graph.facebook.com/602198578/picture?type=large", "display_name": "Jeff Sims", "link": "https://stackoverflow.com/users/3612635/jeff-sims"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1465504642, "post_id": 37735443, "comment_id": 62942667, "body": "@zdim Thanks for the quick response. I expect it to let servers through that match server01, vm13, vm02. Skipping the ones that don&#39;t match those. That is the first use of a regex on the $server variable. Then if the a match is made on server01, it should print the name of that server. That is the second use of a regex on the $server variable. It only works if I create a copy of the $server variable: $server_copy."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1465521256, "post_id": 37735443, "comment_id": 62947783, "body": "The code you have shown will not compile. Please always <code>use strict</code> and <code>use warnings &#39;all&#39;</code> in your <b><i>real code</i></b>, and don&#39;t just add them when you post your question"}], "answers": [{"tags": [], "owner": {"reputation": 6643, "user_id": 1464130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8b0e7020d1a9b92584574bb8059ad38?s=128&d=identicon&r=PG", "display_name": "amaksr", "link": "https://stackoverflow.com/users/1464130/amaksr"}, "is_accepted": false, "score": 1, "last_activity_date": 1465504602, "creation_date": 1465504602, "answer_id": 37735692, "question_id": 37735443, "link": "https://stackoverflow.com/questions/37735443/perl-regex-not-working-on-variable-after-it-has-already-matched-a-previous-regex/37735692#37735692", "title": "Perl regex not working on variable after it has already matched a previous regex", "body": "<p>Change this line</p>\n\n<pre><code>if ($server_copy =~ m/server01/ig)\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>if ($server_copy =~ m/server01/i)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 3612635, "user_type": "registered", "profile_image": "https://graph.facebook.com/602198578/picture?type=large", "display_name": "Jeff Sims", "link": "https://stackoverflow.com/users/3612635/jeff-sims"}, "edited": false, "score": 0, "creation_date": 1465505108, "post_id": 37735715, "comment_id": 62942905, "body": "Thanks for your quick response!"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1465504684, "creation_date": 1465504684, "answer_id": 37735715, "question_id": 37735443, "link": "https://stackoverflow.com/questions/37735443/perl-regex-not-working-on-variable-after-it-has-already-matched-a-previous-regex/37735715#37735715", "title": "Perl regex not working on variable after it has already matched a previous regex", "body": "<p>That's because of the <code>/g</code> flag. It remembers the position where it matched last time, and tries to match from that position onwards the next time. You can verify it with the string <code>server01_server01</code> - it will be printed because it matches the regex twice.</p>\n\n<p>Remove the <code>/g</code> flag if you don't need it.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 3612635, "user_type": "registered", "profile_image": "https://graph.facebook.com/602198578/picture?type=large", "display_name": "Jeff Sims", "link": "https://stackoverflow.com/users/3612635/jeff-sims"}, "edited": false, "score": 0, "creation_date": 1465504955, "post_id": 37735731, "comment_id": 62942826, "body": "excellent response. I updated my script and you were 100% correct. Thanks for the help!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 21, "user_id": 3612635, "user_type": "registered", "profile_image": "https://graph.facebook.com/602198578/picture?type=large", "display_name": "Jeff Sims", "link": "https://stackoverflow.com/users/3612635/jeff-sims"}, "edited": false, "score": 0, "creation_date": 1465505131, "post_id": 37735731, "comment_id": 62942923, "body": "@JeffSims You are most welcome :).  Thank you for the question put together well."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1465505153, "post_id": 37735731, "comment_id": 62942933, "body": "The first regex has a <code>)</code> without a <code>(</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 21, "user_id": 3612635, "user_type": "registered", "profile_image": "https://graph.facebook.com/602198578/picture?type=large", "display_name": "Jeff Sims", "link": "https://stackoverflow.com/users/3612635/jeff-sims"}, "edited": false, "score": 0, "creation_date": 1465506629, "post_id": 37735731, "comment_id": 62943706, "body": "@JeffSims I added a bit, unrelated to the direct question, hoping that you may find it useful."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1465518608, "post_id": 37735731, "comment_id": 62947180, "body": "<a href=\"http://perldoc.perl.org/List/Util.html#any\" rel=\"nofollow noreferrer\">List::Util</a> even implements <code>any</code> directly."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1465518723, "post_id": 37735731, "comment_id": 62947205, "body": "@melpomene  Apparently I fell victim to the v5.10 docs I was reduced to at work.  (Looked for it in <code>List::Util</code> first!)  Thank you very much, correcting."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465521877, "post_id": 37735731, "comment_id": 62947908, "body": "An excellent answer. Note that <code>List::Util</code> also has <code>none</code>, so <code>if ( none { &#47;$server&#47; } @keep_servers ) { ... }</code> works nicely. But I realise that there are people who are allergic to <code>unless</code>, and <code>none</code> may cause the same problem!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465523566, "post_id": 37735731, "comment_id": 62948192, "body": "@Borodin  Thank you very much for your kind words. Options seem to multiply fast when a more general topic is discussed, like array manipulations. I guess I subconsciously translated &#39;if not match-any-of&#39; from the original regex, what is interesting."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465523680, "post_id": 37735731, "comment_id": 62948213, "body": "@Borodin I have to also say -- I am puzzled by what in this answer deserves a -1, which it got after my last edit. I am also very puzzled by how the question itself deserves a -1. It is an excellent very first question in my opinion. (While a clearly wrong answer doesn&#39;t earn that.)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 4, "last_activity_date": 1574633633, "last_edit_date": 1574633633, "creation_date": 1465504746, "answer_id": 37735731, "question_id": 37735443, "link": "https://stackoverflow.com/questions/37735443/perl-regex-not-working-on-variable-after-it-has-already-matched-a-previous-regex/37735731#37735731", "title": "Perl regex not working on variable after it has already matched a previous regex", "body": "<p>In short, it's the global modifier <code>/g</code> in the regex used in scalar context that causes this behavior. </p>\n\n<p>From <a href=\"http://perldoc.perl.org/perlretut.html#Using-regular-expressions-in-Perl\" rel=\"nofollow noreferrer\">perlretut</a>, under <em>Global matching</em></p>\n\n<blockquote>\n  <p>In scalar context, successive invocations against a string will have //g jump from match to match, keeping track of position in the string as it goes along</p>\n</blockquote>\n\n<p>As it remembers its last position it only tries to match <em>from there</em> down the string the next time, as explained in answer by <a href=\"https://stackoverflow.com/users/1030675/choroba\">choroba</a>.  A very useful tool in this regard is <a href=\"http://perldoc.perl.org/re.html#%27debug%27-mode\" rel=\"nofollow noreferrer\">use re qw(debug)</a>, with which you'll see in detail what a regex is doing.</p>\n\n<p>I've changed the code a little bit as well.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw(say);\nuse diagnostics;\n\nmy @servers = ('server01', 'server02', 'vm13', 'vm02');\n\nforeach my $server (@servers) {\n\n    next if not $server =~ m/server01|vm13|vm02/i;\n\n    say $server;  # Prints string with either server01, vm13, or vm02\n\n    if ($server =~ m/server01/i) {\n        say \"Looking for: $server\";\n    }   \n\n    say \"$server, again...\"; # The variable still works here\n}   \n</code></pre>\n\n<hr>\n\n<p>If the list of servers to keep is long you can make use of <code>none</code> from the core <a href=\"http://perldoc.perl.org/List/Util.html\" rel=\"nofollow noreferrer\">List::Util</a> module<sup>&dagger;</sup>.</p>\n\n<pre><code>use List::Util qw(none);\n\nif (none { /$server/ } @keep_servers) {\n    say \"Skipping $server\";\n    next;\n}\n</code></pre>\n\n<p>There are other ways to manipulate arrays (originally I used <code>not any</code>, thanks to <a href=\"https://stackoverflow.com/users/622310/borodin\">Borodin</a> for a note).</p>\n\n<p>If you <em>only</em> need to skip them then of course you can simply loop over <code>@keep_servers</code> instead. Such a list can be constructed as, for example</p>\n\n<pre><code>my @keep_servers = grep { not /server02/ } @servers;\n</code></pre>\n\n<p>This may be suitable if you know which to drop and they form a much shorter list than those to keep.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup>&nbsp; This module is in core <a href=\"http://leonerds-code.blogspot.com/2014/06/listutil-additions-in-perl-520.html\" rel=\"nofollow noreferrer\">as of Perl 5.20</a>.</p>\n\n<p>With a version prior to Perl 5.20 the functions <code>all</code>, <code>any</code>, <code>none</code> and <code>notall</code> can be found in <a href=\"http://search.cpan.org/~rehsack/List-MoreUtils-0.415/lib/List/MoreUtils.pm\" rel=\"nofollow noreferrer\">List::MoreUtils</a> module, while simple implementations were shown in <code>List::Util</code> docs.</p>\n"}], "owner": {"reputation": 21, "user_id": 3612635, "user_type": "registered", "profile_image": "https://graph.facebook.com/602198578/picture?type=large", "display_name": "Jeff Sims", "link": "https://stackoverflow.com/users/3612635/jeff-sims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 37735731, "answer_count": 3, "score": 1, "last_activity_date": 1574633633, "creation_date": 1465503692, "question_id": 37735443, "link": "https://stackoverflow.com/questions/37735443/perl-regex-not-working-on-variable-after-it-has-already-matched-a-previous-regex", "title": "Perl regex not working on variable after it has already matched a previous regex", "body": "<p>Please help me figure out why the following does not work like I expect it to. I should be able to skip all of the array items that don't match and then match on any of the ones that get through. Instead, I have to make a copy of the for loop variable $server and match on it after it has been matched by one regex and let through.The variable $server still contains the same string and I would expect to be able to match it to a second regex:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse diagnostics;\n\n@servers = ('server01', 'server02', 'vm13', 'vm02');\n\nfor my $server ( @servers) {\n\nif ($server !~ m/server01|vm13|vm02/ig ) {\n\n    next;\n\n} else {\n    say $server;  # It will print string that contains \n                  # server01, vm13, or vm02\n\n    if ($server =~ m/server01/ig) {\n\n        say $server # It will not print string that \n                    # contains server01 here\n    }\n\n    say $server, \" again...\"; # The variable still works here\n}\n</code></pre>\n\n<p>This way does work:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse diagnostics;\n\n@servers = ('server01', 'server02', 'vm13', 'vm02');\n\nfor my $server (@servers) {\n\nmy $server_copy = $server;\n\nif ($server !~ m/server01|vm13|vm02/ig ) {\n\n    next;\n\n} else {\n\n    say $server;  # It will print the name of the server \n                    # that contains server01, vm13, or vm02\n\n    if ($server_copy =~ m/server01/ig) {\n        say $server # It now prints the name of that server\n    }\n\n    say $server, \" again...\"; # The variable still works here\n}\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1465496766, "post_id": 37733186, "comment_id": 62938321, "body": "What @toolic said. But your code is horrible to read, and you haven&#39;t even posted a section that will compile. You should look at laying out your code properly above anything else"}], "answers": [{"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": -1, "last_activity_date": 1465500107, "creation_date": 1465500107, "answer_id": 37734522, "question_id": 37733186, "link": "https://stackoverflow.com/questions/37733186/looking-to-search-for-string-in-text-file/37734522#37734522", "title": "Looking to search for string in text file", "body": "<p>As far as I understand your Q you want to print only once whether a given string, e.g. 'Trevor', is contained in your input file. This is similar to the shell command <code>grep Trevor list.txt</code> (or <code>grep -q</code>). </p>\n\n<p>@toolic and @borodin already told about <code>chomp()</code>. It strips off the trailing <code>\\n</code> character from your input (<code>$search</code>) and is needed because else you are really searching for <code>Trevor\\n</code> which would only match at the end of a file's line.</p>\n\n<p>If you only want to print <em>once</em> then simply add a (boolean) variable, iterate over the file (without printing) and finally print according to the flag. Once the string is found you can stop iterating. This is was the <code>last;</code> in the while loop does: it leaves the loop. Further iterations wouldn't change the result, so we can skip them.</p>\n\n<p>There are -- as always in Perl -- many other possibilities to accomplish your task but I tried to stick as close as possible to your attempt.</p>\n\n<p>Putting it together:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nsub search\n{\n    print(\"\\n Search for subscriber\\n\\n\");\n    my $search = &lt;STDIN&gt;;\n    chomp($search);\n\n    my $found = 0;\n    open( my $fh, '&lt;', 'list.txt' ) or die \"cannot open list.txt: $!\\n\";\n    while ( my $line = &lt;$fh&gt; ) {\n        if ( $line =~ /$search/ ) {\n            $found = 1;\n            last;\n        }\n    }\n    close($fh);\n\n    if ($found) {\n        print \"found $search\\n\";\n    } else {\n        print \"Not found\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1465515150, "creation_date": 1465515150, "answer_id": 37737790, "question_id": 37733186, "link": "https://stackoverflow.com/questions/37733186/looking-to-search-for-string-in-text-file/37737790#37737790", "title": "Looking to search for string in text file", "body": "<p>A subroutine is unnecessary and inappropriate for this. However you don't say enough about your circumstances for me to suggest anything better</p>\n\n<p>This works</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse constant LIST_FILE =&gt; 'list.txt';\n\nsearch();\n\nsub search {\n\n    print \"\\nSearch for subscriber: \";\n    chomp( my $search = &lt;&gt; );\n\n    open my $fh, '&lt;', LIST_FILE or die qq{Unable to open \"@{[LIST_FILE]}\" for input: $!};\n\n    while ( &lt;$fh&gt; ) {\n        next unless /\\Q$search/;\n\n        print qq{Found \"$search\"\\n};\n        return 1;\n    }\n\n    print qq{Didn't find \"$search\"\\n};\n\n    return;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5765302, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9daa4e4b09c03e7beb35649ca4cf2f26?s=128&d=identicon&r=PG&f=1", "display_name": "trevdro", "link": "https://stackoverflow.com/users/5765302/trevdro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 1, "closed_date": 1465519700, "accepted_answer_id": 37737790, "answer_count": 2, "score": -3, "last_activity_date": 1465515150, "creation_date": 1465495469, "last_edit_date": 1592644375, "question_id": 37733186, "link": "https://stackoverflow.com/questions/37733186/looking-to-search-for-string-in-text-file", "closed_reason": "Needs details or clarity", "title": "Looking to search for string in text file", "body": "\n<p>I'm learning some code and I want to run a subs routine that searches a file. If the name is present I want it to print the name. If the name is not present I want it to print not found. However the problem I am having is that it is printing found when the text is found but not found as so</p>\n<pre class=\"lang-none prettyprint-override\"><code>Not found\nfound Trevor \nNot found\nNot found\nNot found\nfound Trevor\n</code></pre>\n<p>What I want is the names printed when found but I do not want the not found presented. Likewise when the string is not present I want just one not found printed. I realise the problem is my while loop and if else statements. But I cannot find an arrangement that works the I want it to. Here is my current code;</p>\n<pre class=\"lang-perl prettyprint-override\"><code>sub search(){\nopen(FILE, &quot;list.txt&quot;);\nprint(&quot;\\n Search for subscriber\\n\\n&quot;);\nmy $search = &lt;STDIN&gt;;\nwhile ($line = &lt;FILE&gt;){\nif ( $line =~ /$search/) { print &quot;found $search\\n&quot; }\n\nelse {\n    print(&quot;Not found \\n&quot;);\n</code></pre>\n<br/>\n<h3>Edit</h3>\n<p>The Perl code looks like this. Yes, it is unbalanced by three closing braces</p>\n<pre class=\"lang-perl prettyprint-override\"><code>sub search() {\n\n    open( FILE, &quot;list.txt&quot; );\n\n    print(&quot;\\n Search for subscriber\\n\\n&quot;);\n    my $search = &lt;STDIN&gt;;\n\n    while ( $line = &lt;FILE&gt; ) {\n\n        if ( $line =~ /$search/ ) {\n            print &quot;found $search\\n&quot;;\n        }\n        else {\n            print(&quot;Not found \\n&quot;);\n</code></pre>\n"}, {"tags": ["perl", "abbyy"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1465486657, "post_id": 37730394, "comment_id": 62932076, "body": "What are you trying to do? Win32::* modules are for Windows, so it doesn&#39;t make sense to install them on *nix."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1465487167, "post_id": 37730394, "comment_id": 62932455, "body": "<a href=\"http://matrix.cpantesters.org/?dist=Win32-OLE+0.1712\" rel=\"nofollow noreferrer\">No</a>"}, {"owner": {"reputation": 17, "user_id": 6289013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OiQ54.jpg?s=128&g=1", "display_name": "selva kumar", "link": "https://stackoverflow.com/users/6289013/selva-kumar"}, "edited": false, "score": 0, "creation_date": 1465535488, "post_id": 37730394, "comment_id": 62951121, "body": "i need to convert image to pdf with OCR so requires that Win32::OLE::Variant module to control many Win32 applications..@Thissuit"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1465538267, "post_id": 37730394, "comment_id": 62952137, "body": "How did you install those applications on Ubuntu?"}, {"owner": {"reputation": 17, "user_id": 6289013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OiQ54.jpg?s=128&g=1", "display_name": "selva kumar", "link": "https://stackoverflow.com/users/6289013/selva-kumar"}, "edited": false, "score": 0, "creation_date": 1465540543, "post_id": 37730394, "comment_id": 62953146, "body": "i installed that&#39;s not an issue now.."}, {"owner": {"reputation": 17, "user_id": 6289013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OiQ54.jpg?s=128&g=1", "display_name": "selva kumar", "link": "https://stackoverflow.com/users/6289013/selva-kumar"}, "edited": false, "score": 0, "creation_date": 1465552783, "post_id": 37730394, "comment_id": 62960453, "body": "i already installed that package... that&#39;s not an issue now...i want to install  Win32::OLE ...suggest some ideas if  u have  @suitblack"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 6289013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OiQ54.jpg?s=128&g=1", "display_name": "selva kumar", "link": "https://stackoverflow.com/users/6289013/selva-kumar"}, "edited": false, "score": 0, "creation_date": 1465535748, "post_id": 37730465, "comment_id": 62951213, "body": "Any other module is there instead of OLE for Linux ?  @oleg"}], "tags": [], "owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1465486666, "creation_date": 1465486666, "answer_id": 37730465, "question_id": 37730394, "link": "https://stackoverflow.com/questions/37730394/is-there-any-way-to-install-win32olevariant-in-ubuntu/37730465#37730465", "title": "Is there any way to install Win32::OLE::Variant in ubuntu?", "body": "<p>This module <strong>obviously</strong> won't install on Ubuntu because it deals with Win32-exclusive API.</p>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 6289013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OiQ54.jpg?s=128&g=1", "display_name": "selva kumar", "link": "https://stackoverflow.com/users/6289013/selva-kumar"}, "edited": false, "score": 0, "creation_date": 1465535720, "post_id": 37731281, "comment_id": 62951203, "body": "@ikegamo...Any other module is there instead of OLE for Linux ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 17, "user_id": 6289013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OiQ54.jpg?s=128&g=1", "display_name": "selva kumar", "link": "https://stackoverflow.com/users/6289013/selva-kumar"}, "edited": false, "score": 0, "creation_date": 1465568443, "post_id": 37731281, "comment_id": 62970741, "body": "Win32 applications don&#39;t run on Linux, so such tools can&#39;t exist."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1465491231, "last_edit_date": 1465491231, "creation_date": 1465488839, "answer_id": 37731281, "question_id": 37730394, "link": "https://stackoverflow.com/questions/37730394/is-there-any-way-to-install-win32olevariant-in-ubuntu/37731281#37731281", "title": "Is there any way to install Win32::OLE::Variant in ubuntu?", "body": "<p>No. <a href=\"https://en.wikipedia.org/wiki/Object_Linking_and_Embedding\" rel=\"nofollow\">OLE</a> is a Microsoft technology that's only supported by Windows.</p>\n"}], "owner": {"reputation": 17, "user_id": 6289013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OiQ54.jpg?s=128&g=1", "display_name": "selva kumar", "link": "https://stackoverflow.com/users/6289013/selva-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 512, "favorite_count": 0, "accepted_answer_id": 37731281, "answer_count": 2, "score": -1, "last_activity_date": 1465491231, "creation_date": 1465486503, "question_id": 37730394, "link": "https://stackoverflow.com/questions/37730394/is-there-any-way-to-install-win32olevariant-in-ubuntu", "title": "Is there any way to install Win32::OLE::Variant in ubuntu?", "body": "<p>i tried to installing Win32::OLE::Variant in ubuntu  but it gave a bad operating system message and terminated ..</p>\n\n<p>kindly help me to install this module in ubuntu</p>\n\n<p>Thanks in advance</p>\n\n<p>Selva Kumar</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1465485459, "post_id": 37729968, "comment_id": 62931202, "body": "Can you specify what you mean by <i>emails</i>? Are you talking about email addresses? I don&#39;t see any messages there."}, {"owner": {"reputation": 174, "user_id": 6409919, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10208881690855599/picture?type=large", "display_name": "Andras Palfi", "link": "https://stackoverflow.com/users/6409919/andras-palfi"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1465485976, "post_id": 37729968, "comment_id": 62931578, "body": "There is a parameter called &#39;contact_method_type_id&#39; refers to integer which refers to type of contact method is stored for that particular case. The contact_method_type_id&#39;s I care about are those with value 1 which is email. the first contact has 3 different contact_methods. The first is &#39;4&#39; which is an office phone, the second is a &#39;2&#39; which is a home phone. and finally the third is a &#39;1&#39; which is their email. Within this &#39;email&#39; subarray there is a &#39;contact_method_value&#39; which is the string representation of their email address. I need a way to extract just these values into a new array."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1465486227, "post_id": 37729968, "comment_id": 62931748, "body": "That seems pretty trivial if that structure is always the same."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1465487773, "post_id": 37729968, "comment_id": 62932914, "body": "This looks suspiciously like the result of <code>XML::Simple</code> mangling some XML. Is it? If so, then I would suggest an entirely different approach (and would suggest you supply some sample XML)"}, {"owner": {"reputation": 174, "user_id": 6409919, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10208881690855599/picture?type=large", "display_name": "Andras Palfi", "link": "https://stackoverflow.com/users/6409919/andras-palfi"}, "edited": false, "score": 0, "creation_date": 1465488078, "post_id": 37729968, "comment_id": 62933126, "body": "No this is the JSON output of a method I run from the API of one of our databases, no XML is being used"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1465490446, "post_id": 37729968, "comment_id": 62934569, "body": "@Sobrique: I wish <code>XML::Simple</code> were so sophisticated!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465490498, "post_id": 37729968, "comment_id": 62934599, "body": "@AndrasPalfi: Does the database API not provide anything more specific?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1465490662, "post_id": 37729968, "comment_id": 62934675, "body": "Ironically - you <i>can</i> XML::Simple this into XML::Twig, and then xpath it. But it&#39;s dirty. Has a look at JSON::Path, but I&#39;m not sure if there&#39;s any better options."}], "answers": [{"comments": [{"owner": {"reputation": 174, "user_id": 6409919, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10208881690855599/picture?type=large", "display_name": "Andras Palfi", "link": "https://stackoverflow.com/users/6409919/andras-palfi"}, "edited": false, "score": 0, "creation_date": 1465488022, "post_id": 37730482, "comment_id": 62933093, "body": "Thank you very much! This was exactly the type of thing I was looking for, I was just confused about the syntax because I am new to Perl"}, {"owner": {"reputation": 174, "user_id": 6409919, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10208881690855599/picture?type=large", "display_name": "Andras Palfi", "link": "https://stackoverflow.com/users/6409919/andras-palfi"}, "edited": false, "score": 0, "creation_date": 1465491782, "post_id": 37730482, "comment_id": 62935332, "body": "Actually one more thing, the resulting output of this is a list of email addresses. This is what I want, however, I still want the email addresses contained within subarray for each case. For example, it looks like this now: [a@example.com, b@example.com, .....] But I want: [ {a@example.com}, {b@example.com, ...} ...{...}]"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 174, "user_id": 6409919, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10208881690855599/picture?type=large", "display_name": "Andras Palfi", "link": "https://stackoverflow.com/users/6409919/andras-palfi"}, "edited": false, "score": 1, "creation_date": 1465503485, "post_id": 37730482, "comment_id": 62942107, "body": "@Andras what you showed is not valid Perl. <code>{}</code> are hash references. That&#39;s key/value pairs. You would need <code>[ [ &#39;a@foo&#39; ], [ &#39;b@foo&#39; ] ]</code> if you want arrays. That&#39;s easy. I&#39;ll update."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 174, "user_id": 6409919, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10208881690855599/picture?type=large", "display_name": "Andras Palfi", "link": "https://stackoverflow.com/users/6409919/andras-palfi"}, "edited": false, "score": 0, "creation_date": 1465503550, "post_id": 37730482, "comment_id": 62942143, "body": "Check the diff of the answer to see the difference. Click the <a href=\"http://stackoverflow.com/posts/37730482/revisions\">edited foo hours ago</a> link under the answer to do that."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1465504497, "post_id": 37730482, "comment_id": 62942590, "body": "You made it worse :-( <b>a)</b> What should <code>push [ @email_addresses ], $x;</code> do? You probably meant <code>push @email_addresses, [$x];</code>  <b>b)</b> The result then is  <code>[ [&#39;example@example.com&#39;], [&#39;example@example.com&#39;] ]</code> (not &#39;EMAIL&#39;/EMAIL&#39;)."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1465506290, "post_id": 37730482, "comment_id": 62943524, "body": "@perldog oops, of course the <code>[]</code> are in the wrong place. Thanks for spotting it. You could btw just edit that yourself as it&#39;s obviously just a typo. The example output is based on the original example input in the question, so <code>[ [&#39;EMAIL&#39;], [&#39;EMAIL&#39;] ]</code> is totally fine. To answer your question: my typo will not do anything; it will throw an error, unless your Perl is <a href=\"http://perldoc.perl.org/functions/push.html\" rel=\"nofollow noreferrer\">between 5.14 and 5.22</a>, where it will warn that it&#39;s experimental to use <code>push</code> on references."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1465507079, "post_id": 37730482, "comment_id": 62943890, "body": "Actually I ran your code with Perl 5.18 and got no warning but just an empty @email_addresses. Next time I&#39;ll edit the post but I admit I&#39;m a bit cautious when changing someone else&#39;s <i>code</i>. I&#39;m doing Perl for about 20 yrs but there&#39;s still so much to learn and <code>push [@array]</code> could have been the latest and fancy new thing."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1465509247, "post_id": 37730482, "comment_id": 62944699, "body": "@perldog did you have strict and warnings when you tried? I admit it makes no sense because pushing to an anonymous array makes as much sense as pushing to a list. That was obviously wrong. When you edit someone&#39;s code, only fix obvious mistakes and leave a good edit summary. If it fixes and improves the post it&#39;s fine. :) Have you been to a German Perl Workshop btw?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1465555434, "post_id": 37730482, "comment_id": 62962114, "body": "Yes, I used warnings and strict. Look: <a href=\"http://hastebin.com/ezaburebed.coffee\" rel=\"nofollow noreferrer\">hastebin.com/ezaburebed.coffee</a>  Output was only an empty array <code>[]</code>. Nevermind. And no, I haven&#39;t been at a Perl event yet."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1465555904, "post_id": 37730482, "comment_id": 62962385, "body": "@perldog huh, I don&#39;t see why that happens. You should come to [YAPC::EU in Cluj](act.yapc.eu/ye2016/) so we can have a beer. Next year&#39;s German Perl Workshop will be in Hamburg around March/April."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1465506302, "last_edit_date": 1465506302, "creation_date": 1465486708, "answer_id": 37730482, "question_id": 37729968, "link": "https://stackoverflow.com/questions/37729968/accessing-a-nested-data-structure/37730482#37730482", "title": "Accessing a nested data structure", "body": "<p>If the data structures are all of the same kind, this is very trivial. You just need to iterate all the outer hashrefs (I called those <em>resultsets</em>). Inside those, you need to look at all <em>results</em>, and in each result you need to look at all the <em>contact methods</em>. If one of them has a <code>contact_method_type_id</code> of 1, you take the <code>contact_method_value</code>. And that's it.</p>\n\n<pre><code>my @email_addresses;\nforeach my $resultset ( @{$data} ) {\n    foreach my $result ( @{ $resultset-&gt;{results} } ) {\n        foreach my $contact ( @{ $result-&gt;{contact_methods} } ) {\n            push @email_addresses , [ $contact-&gt;{contact_method_value} ]\n                if $contact-&gt;{contact_method_type_id} == 1;\n        }\n    }\n}\n</code></pre>\n\n<p>This code assumes your structure is called <code>$data</code>. <code>@email_addresses</code> looks like this when output.</p>\n\n<pre><code>[\n    [ 'EMAIL' ],\n    [ 'EMAIL' ]\n];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 174, "user_id": 6409919, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10208881690855599/picture?type=large", "display_name": "Andras Palfi", "link": "https://stackoverflow.com/users/6409919/andras-palfi"}, "edited": false, "score": 2, "creation_date": 1465488985, "post_id": 37731098, "comment_id": 62933680, "body": "Thank you for your response. Even though its still not XML, you posted stuff I didn&#39;t know about which I always appreciate"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 174, "user_id": 6409919, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10208881690855599/picture?type=large", "display_name": "Andras Palfi", "link": "https://stackoverflow.com/users/6409919/andras-palfi"}, "edited": false, "score": 0, "creation_date": 1465489056, "post_id": 37731098, "comment_id": 62933717, "body": "Reason I thought it might be XML, is because - it did convert into XML without too much effort. I&#39;m looking for neater ways to traverse the JSON structure (<code>xpath</code> style)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 174, "user_id": 6409919, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10208881690855599/picture?type=large", "display_name": "Andras Palfi", "link": "https://stackoverflow.com/users/6409919/andras-palfi"}, "edited": false, "score": 0, "creation_date": 1465490259, "post_id": 37731098, "comment_id": 62934458, "body": "Might be possible to use <code>JSON::Path</code>, but I&#39;ve not been able to figure it out, so YMMV."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1465488977, "last_edit_date": 1465488977, "creation_date": 1465488311, "answer_id": 37731098, "question_id": 37729968, "link": "https://stackoverflow.com/questions/37729968/accessing-a-nested-data-structure/37731098#37731098", "title": "Accessing a nested data structure", "body": "<p>This looks suspiciously like something that <code>XML::Simple</code> would have generated. </p>\n\n<p>Assuming this is the case, then I would suggest that you've fallen for the classic mistake of assuming <code>XML::Simple</code> actually helps. </p>\n\n<p>Under that assumption, if you instead use <code>XML::Twig</code>:</p>\n\n<p>Taking your <code>$VAR1</code>. Although - ideally you'll just parse the original source with <code>parse</code> or <code>parsefile</code>:</p>\n\n<pre><code>use XML::Twig;\nuse XML::Simple; \nmy $twig = XML::Twig-&gt;parse( XMLout($VAR1) );\n\nprint $_-&gt;att('contact_method_value'), \"\\n\" for $twig-&gt;findnodes('//contact_methods[@contact_method_type_name=\"Email\"]');\n</code></pre>\n\n<p>Which given your sample (as <code>$VAR1</code>):</p>\n\n<pre><code>example@example.com\nexample@example.com\n</code></pre>\n\n<p>Edit: Because you've commented that it's <code>JSON</code> then I wouldn't necessarily do this (Although - it does actually work, despite that). </p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1465506578, "post_id": 37731517, "comment_id": 62943675, "body": "OP said it&#39;s behind an API. That implies they have to use the API and do not have direct access. DB might also mean NoSQL here as those often come with a JSON/REST API."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1465513651, "post_id": 37731517, "comment_id": 62946106, "body": "@simbabque: That was described in a very late comment which has still to make it to the problem specification. The OP presented us with <code>Data::Dumper</code> output, and then wrote that the API returns a JSON string. I think there&#39;s every reason to imagine that there may be a better API call to provide the data that&#39;s required. Either way, we clearly have insufficient information."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1465554727, "post_id": 37731517, "comment_id": 62961664, "body": "Indeed. I agree with the reasoning in your answer, but I am not sure if it&#39;s going to help here."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1465490603, "last_edit_date": 1465490603, "creation_date": 1465489645, "answer_id": 37731517, "question_id": 37729968, "link": "https://stackoverflow.com/questions/37729968/accessing-a-nested-data-structure/37731517#37731517", "title": "Accessing a nested data structure", "body": "<p>If you have this on a database then you should use an SQL query to retrieve it, rather than fetching everything into memory and processing what you have</p>\n\n<p>The output from <code>Data::Dumper</code> shows the contents of your data, but it doesn't explain what you're dealing with in your code. Specifically, you don't have a <code>$VAR1</code> in your code, but I have no idea what you <strong><em>do</em></strong> have</p>\n\n<p>In the end, I think <a href=\"https://simonkidd.wordpress.com/2010/08/12/if-i-were-you-i-wouldnt-start-from-here/\" rel=\"nofollow\"><em>I wouldn't start from here</em></a>. But since it's the only starting point I have to work with, it's a simple matter of recursing through the data structure</p>\n\n<p>I've assumed that you want</p>\n\n<pre><code>$VAR1-&gt;[*]{results}[*]{contact_methods}[*]{contact_method_value}\n</code></pre>\n\n<p>where</p>\n\n<pre><code>$VAR1-&gt;[*]{results}[*]{contact_methods}[*]{contact_method_type_name} eq 'Email'\n</code></pre>\n\n<p><strong><em>Update</em></strong></p>\n\n<p>Since your comments I've altered my code to select the same values where</p>\n\n<pre><code>$VAR1-&gt;[*]{results}[*]{contact_methods}[*]{contact_method_type_id} == 1\n</code></pre>\n\n<p>Since you said nothing about your code at all, I've had to assume a variable <code>$data</code> which contains a reference to the array that you show in your question</p>\n\n<pre><code>for my $item ( @$data ) {\n    my $results = $item-&gt;{results};\n\n    for my $result ( @$results ) {\n        my $methods = $result-&gt;{contact_methods} or die;\n\n        for my $method ( @$methods ) {\n\n            #my $type_name = $method-&gt;{contact_method_type_name};\n            #next unless $type_name eq 'Email';\n\n            my $type_id = $method-&gt;{contact_method_type_id};\n            next unless $type_id == 1; ## Email\n\n            my $value = $method-&gt;{contact_method_value};\n            print \"$value\\n\";\n        }\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>example@example.com\nexample@example.com\n</code></pre>\n"}], "owner": {"reputation": 174, "user_id": 6409919, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10208881690855599/picture?type=large", "display_name": "Andras Palfi", "link": "https://stackoverflow.com/users/6409919/andras-palfi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1465506302, "creation_date": 1465485382, "last_edit_date": 1465490120, "question_id": 37729968, "link": "https://stackoverflow.com/questions/37729968/accessing-a-nested-data-structure", "title": "Accessing a nested data structure", "body": "\n\n<p>I have an array of hashes nested to multiple levels. I need to extract a value from all deeply-nested hashes that have a given value for a different key in the same hash</p>\n\n<p>This is a collection of entities from our database, and the data represents contacts within each entity and all of their contact values.</p>\n\n<p>There is a hash key <code>contact_method_type_id</code> which refers to an integer defining the type of contact method. The <code>contact_method_type_id</code> that I care about is 1, which is email.</p>\n\n<p>The first contact has three different contact_methods. The first is 4 which is an office phone, the second is a 2 which is a home phone, and the third is a 1 which is email.</p>\n\n<p>Within the same hash is there is a 'contact_method_value', which is the string representation of their email address.</p>\n\n<p>I need a way to extract just these values into a new array</p>\n\n<p>Here are the contents of the first element of the array</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$VAR1 = [\n    {   'total'   =&gt; '2',\n        'results' =&gt; [\n            {   'contact_type_name' =&gt; 'Primary Technical Contact',\n                'street'            =&gt; undef,\n                'state_id'          =&gt; undef,\n                'state_name'        =&gt; undef,\n                'last_name'         =&gt; 'Barb',\n                'entities'          =&gt; [\n                    {   'entity_name' =&gt; 'XXXXX',\n                        'entity_id'   =&gt; 'XXXXX'\n                    }\n                ],\n                'state_abbr_name' =&gt; undef,\n                'city'            =&gt; undef,\n                'country_id'      =&gt; undef,\n                'latitude'        =&gt; undef,\n                'contact_id'      =&gt; 'XXXXXX',\n                'contact_type_id' =&gt; '1',\n                'roles'           =&gt; [],\n                'contact_methods' =&gt; [\n                    {   'entity_name'              =&gt; undef,\n                        'contact_method_value'     =&gt; 'XXXXXXX',\n                        'contact_method_type_id'   =&gt; '4',\n                        'contact_method_id'        =&gt; '24041',\n                        'entity_id'                =&gt; undef,\n                        'contact_method_type_name' =&gt; 'Cell Phone'\n                    },\n                    {   'entity_name'              =&gt; undef,\n                        'contact_method_value'     =&gt; 'XXXXXX',\n                        'contact_method_type_id'   =&gt; '2',\n                        'contact_method_id'        =&gt; '24051',\n                        'entity_id'                =&gt; undef,\n                        'contact_method_type_name' =&gt; 'Office Phone'\n                    },\n                    {   'entity_name'              =&gt; undef,\n                        'contact_method_value'     =&gt; 'example@example.com',\n                        'contact_method_type_id'   =&gt; '1',\n                        'contact_method_id'        =&gt; '24061',\n                        'entity_id'                =&gt; undef,\n                        'contact_method_type_name' =&gt; 'Email'\n                    }\n                ],\n                'country_name'      =&gt; undef,\n                'longitude'         =&gt; undef,\n                'country_abbr_name' =&gt; undef,\n                'full_name'         =&gt; 'NAME',\n                'networks'          =&gt; [\n                    {   'network_name' =&gt; 'NET',\n                        'network_id'   =&gt; 'X'\n                    }\n                ],\n                'timezone_id'   =&gt; undef,\n                'zip'           =&gt; undef,\n                'timezone_name' =&gt; undef,\n                'title'         =&gt; 'MAC/Network Specialist',\n                'first_name'    =&gt; 'Terri'\n            },\n            {   'contact_type_name' =&gt; 'Primary Technical Contact',\n                'street'            =&gt; 'STREET',\n                'state_id'          =&gt; undef,\n                'state_name'        =&gt; undef,\n                'last_name'         =&gt; 'NAME',\n                'entities'          =&gt; [\n                    {   'entity_name' =&gt; 'NAME',\n                        'entity_id'   =&gt; '2679'\n                    }\n                ],\n                'state_abbr_name' =&gt; undef,\n                'city'            =&gt; 'CITY',\n                'country_id'      =&gt; undef,\n                'latitude'        =&gt; undef,\n                'contact_id'      =&gt; '7896',\n                'contact_type_id' =&gt; '1',\n                'roles'           =&gt; [],\n                'contact_methods' =&gt; [\n                    {   'entity_name'              =&gt; undef,\n                        'contact_method_value'     =&gt; 'example@example.com',\n                        'contact_method_type_id'   =&gt; '1',\n                        'contact_method_id'        =&gt; '16796',\n                        'entity_id'                =&gt; undef,\n                        'contact_method_type_name' =&gt; 'Email'\n                    },\n                    {   'entity_name'              =&gt; undef,\n                        'contact_method_value'     =&gt; 'number',\n                        'contact_method_type_id'   =&gt; '2',\n                        'contact_method_id'        =&gt; '16797',\n                        'entity_id'                =&gt; undef,\n                        'contact_method_type_name' =&gt; 'Office Phone'\n                    }\n                ],\n                'country_name'      =&gt; undef,\n                'longitude'         =&gt; undef,\n                'country_abbr_name' =&gt; undef,\n                'full_name'         =&gt; 'NAME',\n                'networks'          =&gt; [\n                    {   'network_name' =&gt; 'net',\n                        'network_id'   =&gt; '17'\n                    }\n                ],\n                'timezone_id'   =&gt; undef,\n                'zip'           =&gt; 'zip',\n                'timezone_name' =&gt; undef,\n                'title'         =&gt; 'Infrastructure Manager',\n                'first_name'    =&gt; 'name'\n            }\n        ],\n        'offset' =&gt; '0'\n    },\n\n    ...\n</code></pre>\n"}, {"tags": ["regex", "perl", "ack"], "answers": [{"comments": [{"owner": {"reputation": 3928, "user_id": 1843511, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ptA6M.jpg?s=128&g=1", "display_name": "Erik van de Ven", "link": "https://stackoverflow.com/users/1843511/erik-van-de-ven"}, "edited": false, "score": 0, "creation_date": 1465481989, "post_id": 37728345, "comment_id": 62928502, "body": "Very nice! Thanks! Works like a charm!! :) And indeed, according to their website ack does use Perl regex patterns: <a href=\"http://beyondgrep.com/why-ack/\" rel=\"nofollow noreferrer\">beyondgrep.com/why-ack</a>."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1465481369, "creation_date": 1465481369, "answer_id": 37728345, "question_id": 37727823, "link": "https://stackoverflow.com/questions/37727823/get-all-a-tags-which-do-not-contain-a-rel-nofollow/37728345#37728345", "title": "Get all &lt;a&gt; tags which do not contain a rel=&quot;nofollow&quot;", "body": "<p>I believe ack uses Perl regex patterns, in which case you should use a negative look-ahead, like this</p>\n\n<pre><code>$ sublime $(ack -l '&lt;a\\b(?=[^&gt;]+\\bhref=\"http)(?![^&gt;]+\\brel=\"nofollow\")')\n</code></pre>\n\n<p>But note that ack will check only one line at a time whereas an HTML <code>&lt;a&gt;</code> element may run over several lines</p>\n"}], "owner": {"reputation": 3928, "user_id": 1843511, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ptA6M.jpg?s=128&g=1", "display_name": "Erik van de Ven", "link": "https://stackoverflow.com/users/1843511/erik-van-de-ven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 37728345, "answer_count": 1, "score": 0, "last_activity_date": 1465481369, "creation_date": 1465480056, "question_id": 37727823, "link": "https://stackoverflow.com/questions/37727823/get-all-a-tags-which-do-not-contain-a-rel-nofollow", "title": "Get all &lt;a&gt; tags which do not contain a rel=&quot;nofollow&quot;", "body": "<p>I've written a small command to find all files which contain external url's, using <code>ack</code> and open them in sublime, so I can do a find and replace on all tags and add a <code>rel=\"nofollow\"</code>:</p>\n\n<pre><code>sublime $(ack -l '&lt;a[^&gt;]+href=\"http')\n</code></pre>\n\n<p>But now I would like to make sure those <code>&lt;a&gt;</code> tags do not already contain a <code>rel=\"nofollow\"</code>. Anyone who can help me out?</p>\n\n<p>I just need to get all <code>&lt;a&gt;</code> tags which contain a <code>href=\"http</code> (so I'm pretty sure it's an external url), but probably it's better if I could check it contained a <code>href=\"&lt;do not contain website.nl&gt;\"</code>, so a href without <code>website.nl</code>. And it may not contain a <code>rel=\"nofollow\"</code>.</p>\n\n<p>Would be a great bonus if it could check on <code>rel=\"nofollow\"</code> and <code>rel='nofollow'</code> (so single and double quotes, same for <code>href</code>) But I could run the same command a couple of times, with and without double quotes, so it wouldn't be that much of an issue.</p>\n"}, {"tags": ["xml", "perl", "utf-8", "libxml2"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465481845, "post_id": 37727386, "comment_id": 62928388, "body": "I think we need to see an example of input XML and Perl code that produces this problem. A better description of the &quot;crippling&quot; would also help. What platform are you working on, and how are you examining the output of your program?"}, {"owner": {"reputation": 115, "user_id": 1196666, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bef201ddb928b0762cb776cc38ad8f53?s=128&d=identicon&r=PG", "display_name": "Streuner", "link": "https://stackoverflow.com/users/1196666/streuner"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465533173, "post_id": 37727386, "comment_id": 62950375, "body": "I attached a snippet, but right now this snippet is working. That&#39;s pretty confusing to me and I&#39;ll investigate this further. Maybe someone can already see, what may be wrong with my code ;)"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465481936, "post_id": 37727734, "comment_id": 62928454, "body": "The result of <code>toString</code> should be fine if printed directly to a device expecting UTF-8. It&#39;s just not much use as a character string within Perl"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1465479846, "creation_date": 1465479846, "answer_id": 37727734, "question_id": 37727386, "link": "https://stackoverflow.com/questions/37727386/how-to-print-utf-8-correctly-using-xmllibxml/37727734#37727734", "title": "How to print UTF-8 correctly using XML::LibXML", "body": "<p>It works for me.</p>\n\n<pre><code>$ perl -Mutf8 -MXML::LibXML -we '\n    my $xml =q{&lt;?xml version=\"1.1\" encoding=\"utf-8\"?&gt;&lt;r&gt;\u011b\u0161\u010d\u0159\u017e&lt;/r&gt;};\n    my $doc = XML::LibXML-&gt;load_xml(string =&gt; $xml);\n    binmode STDOUT, \"encoding(UTF-8)\";\n    print $doc-&gt;findvalue(\"r\"), \"\\n\";\n'\n\u011b\u0161\u010d\u0159\u017e\n</code></pre>\n\n<p>With <code>toString</code>, you need to use <a href=\"http://p3rl.org/Encode\" rel=\"nofollow\">Encode</a>'s <code>decode</code>:</p>\n\n<pre><code>print decode(\"utf-8\", $doc-&gt;toString), \"\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1465502827, "last_edit_date": 1465502827, "creation_date": 1465500747, "answer_id": 37734705, "question_id": 37727386, "link": "https://stackoverflow.com/questions/37727386/how-to-print-utf-8-correctly-using-xmllibxml/37734705#37734705", "title": "How to print UTF-8 correctly using XML::LibXML", "body": "<p><code>$doc-&gt;toString</code> returns a string that's already encoded. The encoding used is the one set by <code>$doc-&gt;setEncoding</code> and returned by <code>$doc-&gt;actualEncoding</code>. By default, this is UTF-8 for new documents, or the original encoding for existing documents.</p>\n\n<p>So, all you have to do is print the output of <code>$doc-&gt;toString</code> to STDOUT without first adding encoding layers to STDOUT.</p>\n\n<pre><code>$ perl -e'\n   use strict;\n   use warnings;\n   use XML::LibXML qw( );\n   my $doc = XML::LibXML::Document-&gt;new(1.0, \"UTF-8\");\n   my $root = $doc-&gt;createElement(\"root\");\n   $root-&gt;appendText(\"\\x{2660}\");\n   $doc-&gt;setDocumentElement($root);\n   print $doc-&gt;toString();\n' | od -c\n0000000   &lt;   ?   x   m   l       v   e   r   s   i   o   n   =   \"   1\n0000020   \"       e   n   c   o   d   i   n   g   =   \"   U   T   F   -\n0000040   8   \"   ?   &gt;  \\n   &lt;   r   o   o   t   &gt; 342 231 240   &lt;   /\n0000060   r   o   o   t   &gt;  \\n\n0000066\n</code></pre>\n\n<p>It's hard to tell what problem you are experiencing because you didn't provide a demonstration of your problem. </p>\n\n<p>The most likely problem is that you are passing encoded text to XML::LibXML when you should be passing decoded text.</p>\n\n<p>Another less likely possibility is that you've run afoul of the <a href=\"https://rt.cpan.org/Ticket/Display.html?id=115190\" rel=\"nofollow\">bug</a> from which <code>appendText</code> and other methods of adding text to a document suffer. You can work around that bug by \"upgrading\" your text.</p>\n\n<pre><code>   sub _u($) { my $s = shift; utf8::upgrade($s); $s }\n\n   $root-&gt;appendText(\"\\x{C9}ric\");       # Buggy\n   $root-&gt;appendText(_u(\"\\x{C9}ric\"));   # Ok\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 1196666, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bef201ddb928b0762cb776cc38ad8f53?s=128&d=identicon&r=PG", "display_name": "Streuner", "link": "https://stackoverflow.com/users/1196666/streuner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1492, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1465536119, "creation_date": 1465478936, "last_edit_date": 1465536119, "question_id": 37727386, "link": "https://stackoverflow.com/questions/37727386/how-to-print-utf-8-correctly-using-xmllibxml", "title": "How to print UTF-8 correctly using XML::LibXML", "body": "<p>I wrote a script which converts a hash into an XML and returns the result of the <code>toString</code> function from <a href=\"http://search.cpan.org/dist/XML-LibXML/lib/XML/LibXML/Document.pod\" rel=\"nofollow\"><code>XML::LibXML::Document</code></a>. It seems impossible for me to print the result (the string) without crippling the UTF-8 characters in the XML document.</p>\n\n<p>I tried using <code>binmode</code> for STDOUT and using/avoiding <code>setEncoding</code> for the XML document. Neither worked as I expected.</p>\n\n<p>The only \"solution\" for this was to disable the XML declaration with <code>$XML::LibXML::skipXMLDeclaration = 1;</code> or to <code>decode</code> the string before returning it to the script which wants to print it.</p>\n\n<p>I just don't get the part with this declaration line. I could even return the string (with this declaration line) to my second script, write it to a file without any crippled characters and got crippled characters if I print directly to STDOUT. As mentioned above I even tried using <code>binmode</code>.</p>\n\n<p>So, what's wrong with <code>toString</code> or printing an XML to STDOUT in general? Am I missing something? If needed I can provide some code of course.</p>\n\n<p>In this specific case I just switched from <code>XML::Simple</code> to <code>XML::LibXML</code> and it worked fine with <code>XML::Simple</code>. I know <code>XML::Simple</code> is not that great; I'm just curious why it's working fine and <code>XML::LibXML</code> kept me busy the whole day.</p>\n\n<hr>\n\n<p>This is a sample of the code I'm using. To be honest, this snippet works like a charm and I'm still struggling to find the difference to my real script, which I obviously can't post here. But to show you what I'm doing this might be ok:</p>\n\n<p>create_xml.pm</p>\n\n<pre><code>#!/usr/bin/perl\n\npackage create_xml;\n\nuse XML::LibXML;\nuse utf8;\n\nsub convertHash\n{\n    my ($hash) = @_;\n\n    my $xmlDoc = XML::LibXML::Document-&gt;new();\n    $xmlDoc-&gt;setEncoding('UTF-8');\n\n    my $xmlRoot = $xmlDoc-&gt;createElement('TestXML');\n\n    foreach my $key (keys %$hash)\n    {\n        my $wert = $hash-&gt;{$key};\n        my $element = $xmlDoc-&gt;createElement($key);\n        $element-&gt;appendTextNode($wert);\n        $xmlRoot-&gt;appendChild($element);\n    }\n\n    my $wsStatusElement = $xmlDoc-&gt;createElement('FixedElement');\n    $wsStatusElement-&gt;appendTextNode(123);\n    $xmlRoot-&gt;appendChild($wsStatusElement);\n\n    $xmlDoc-&gt;setDocumentElement($xmlRoot);\n\n    open(XML, '&gt;', 'test1.xml');\n        print XML $xmlDoc-&gt;toString(1);\n    close(XML);\n\n    return $xmlDoc-&gt;toString(1);\n}\n\n1;\n</code></pre>\n\n<p>print_xml.pl</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse lib '.';\nuse create_xml;\nuse utf8;\n\nmy %testhash;\n$testhash-&gt;{'A'} = 15;\n$testhash-&gt;{'B'} = 'abc';\n$testhash-&gt;{'C'} = '\u00e4\u00f6\u00fc\u00e4';\n$testhash-&gt;{'D'} = '\u20ac';\n\nmy $xml = create_xml::convertHash($testhash);\n\nopen(XML, '&gt;', 'test2.xml');\n    print XML $xml;\nclose(XML);\n\nprint $xml;\n</code></pre>\n\n<p>With this scripts both written xml-files are fine, but the output of the last print is broken. My \u20ac looks like this <code>&lt;D&gt;\u00e2\ufffd\u00ac&lt;/D&gt;</code>. As mentioned before, this snippet is <strong>working</strong>. I'll edit my question later on, after I found the difference. </p>\n\n<hr>\n\n<p>I finally managed to find the problem. I used a perlmodule which says <code>use open ':std', ':encoding(UTF-8)';</code>. So why is this corrupting my characters for printing, but not for writing to files? I'm still very confused and feel like I'm missing something. Is this the part, where the already utf8 encoded characters get encoded twice? And is there an option to reset this?</p>\n"}, {"tags": ["xml", "perl", "installation", "redhat", "xerces"], "comments": [{"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 0, "creation_date": 1465482753, "post_id": 37726954, "comment_id": 62929081, "body": "Xerces is not binary-compatible even between dot-dot releases. I recommend switch to the libxml2 - <code>XML::LibXML</code>: it is tad slower, but requires much less involvement. I have used Xerces in C++ and Perl, and the problems due to version incompatibilities were often and nasty. Unless ultimate performance isn&#39;t a goal, switch to <code>libxml2</code>."}, {"owner": {"reputation": 25, "user_id": 4262643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391fb8de6080130bfb4b505ab2c288f8?s=128&d=identicon&r=PG&f=1", "display_name": "neodix", "link": "https://stackoverflow.com/users/4262643/neodix"}, "reply_to_user": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 0, "creation_date": 1465893419, "post_id": 37726954, "comment_id": 63078298, "body": "It took me a while to try LibXML, looks ok and I would go with this... Unfortunately current project is too big and to replace Xerces with libXML is no go. Thank you fellow."}], "owner": {"reputation": 25, "user_id": 4262643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391fb8de6080130bfb4b505ab2c288f8?s=128&d=identicon&r=PG&f=1", "display_name": "neodix", "link": "https://stackoverflow.com/users/4262643/neodix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 301, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1465477829, "creation_date": 1465477829, "last_edit_date": 1495535346, "question_id": 37726954, "link": "https://stackoverflow.com/questions/37726954/install-use-perl-xml-xerces-2-7-0-with-xercec-c-3-1-3-on-redhat-7-2", "title": "Install/use perl-XML-Xerces-2.7.0 with Xercec-C 3.1.3 on RedHat 7.2", "body": "<p>Referring to the similar <a href=\"https://stackoverflow.com/questions/1589560/where-can-i-get-a-xerces-c-compatible-with-xmlxerces-2-7-0\">question</a>, I see what Mark Aufflick answered, but I still think the situation is not clear here. Is there a way to install/use perl-XML-Xerces-2.7.0 with Xercec-C 3.1.3 on RedHat 7.2?</p>\n\n<p>I quickly found first rpm: perl-XML-Xerces-2.7.0_0-4.el5.x86_64.rpm</p>\n\n<pre><code>$ rpm -i perl-XML-Xerces-2.7.0_0-4.el5.x86_64.rpm\n warning: perl-XML-Xerces-2.7.0_0-4.el5.x86_64.rpm: Header V3 DSA/SHA1 Signature\n\n error: Failed dependencies:\n libxerces-c.so.27()(64bit) is needed by perl-XML-Xerces-2.7.0_0-4.el5.x86_64\n\n perl(:MODULE_COMPAT_5.8.8) is needed by perl-XML-Xerces-2.7.0_0-4.el5.x86_64\n</code></pre>\n\n<p>Obviously I got an error, this is clear. <strong>I have many questions now:</strong></p>\n\n<ol>\n<li><p>What is the point to release newer version of xerces-c if perl-XML-Xerces 2.7.0 still works only with older version?</p></li>\n<li><p>The latest perl-XML-xerces is always available in source format, that automatically makes me to build it using the same version of xerces-c. I don't want/don't have/not allowed to build anything and need only Xerces.pm and Xerces.so files compatible with xerces-c-3.1.1, where/how can I get ones?</p></li>\n<li><p>Error below makes me thinking that I need Perl 5.8.8. Come on, RedHat 7.2 (3.10.0-327.el7.x86_64) comes by default with Perl 5.16.3! And again I want to use perl-XML-Xerces with the latest Perl, but I'm asked to use the older Perl version...</p>\n\n<p>perl(:MODULE_COMPAT_5.8.8) is needed by perl-XML-Xerces-2.7.0_0-4.el5.x86_64</p></li>\n</ol>\n\n<p><strong>So in short, how to use perl-XML-Xerces-2.7.0 on RedHat7.2 with Perl 5.16 and xerces-c 3.1.3?</strong></p>\n\n<p>or</p>\n\n<p><strong>Where do I get compatible binaries of perl-XML-Xerces?</strong></p>\n"}, {"tags": ["xml", "perl", "xslt"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 2, "creation_date": 1465474544, "post_id": 37725678, "comment_id": 62922605, "body": "How do you run your program? It Looks like you try to run the xsl file with perl."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465475475, "post_id": 37725678, "comment_id": 62923322, "body": "You have shown your XSLT file twice. Please show your XML"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1465477460, "post_id": 37725678, "comment_id": 62924885, "body": "The Perl code that you show fails to compile with the message <code>Global symbol &quot;$results&quot; requires explicit package name</code>. In fact the line <code>getopts(&#39;p:f:&#39;\\%opts)</code> is also illegal, but I had removed it to facilitate testing. Please show the real code that&#39;s giving you this error"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1465478374, "post_id": 37725678, "comment_id": 62925636, "body": "I bet that <i>is</i> his code. He&#39;s just never got as far as executing it, as (somehow) he&#39;s executing the XSLT, not the Perl."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1465478490, "post_id": 37725678, "comment_id": 62925719, "body": "@DaveCross: Haha that one went over my head!"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1465475049, "creation_date": 1465475049, "answer_id": 37725941, "question_id": 37725678, "link": "https://stackoverflow.com/questions/37725678/perl-error-while-performing-xslt-transformation/37725941#37725941", "title": "Perl Error while performing xslt transformation", "body": "<blockquote>\n  <p>Execution of trans.xslt aborted due to compilation errors.</p>\n</blockquote>\n\n<p>This looks like you're trying to execute your XSLT file, not your Perl program.</p>\n\n<p>You should be running something like this:</p>\n\n<pre><code>$ ./your_xslt_processor.pl -f your_xml.xml -p trans.xslt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1465478313, "last_edit_date": 1465478313, "creation_date": 1465478005, "answer_id": 37727023, "question_id": 37725678, "link": "https://stackoverflow.com/questions/37725678/perl-error-while-performing-xslt-transformation/37727023#37727023", "title": "Perl Error while performing xslt transformation", "body": "\n\n<p>Somehow you are executing your XSLT file as Perl code, but there is nothing in your question to explain how. In fact, as I commented, the Perl code that you show <em>cannot</em> have caused the error you say it did because it won't compile</p>\n\n<p>I can see a problem with the call to <code>$stylesheet-&gt;transform_file($source)</code>, which should be either <code>$stylesheet-&gt;transform($source)</code> or <code>$stylesheet-&gt;transform_file($xmlfile)</code>, but the rest of the bugs are obvious</p>\n\n<p>Note also that the stylesheet attached to the XML document with the <code>xml-stylesheet</code> processing instruction is <code>test.xsl</code>, whereas your Perl code applies <code>test.xslt</code>. You should choose one or the other</p>\n\n<p>Your call to <code>$stylesheet-&gt;output_as_bytes($results)</code> is better as <code>$stylesheet-&gt;output_as_chars($results)</code>. It doesn't make any difference with pure ASCII data, but the former will produce encoded octets, which is rarely useful. Usually you just want a character string</p>\n\n<p>It's best to avoid writing fancy parameter input and exception-handling code before you have the basic program working. I suggest you start from my code here instead, and use the <a href=\"https://metacpan.org/pod/Try::Tiny\" rel=\"nofollow\"><code>Try::Tiny</code></a> module instead of a simple <code>eval</code> if you must handle the errors. At present, all your handlers seem to do is supplement the exception message with a lot of stars and then die anyway, so I think you can do without them</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\n\nuse XML::LibXSLT;\n\nmy ($xmlfile, $xsltfile) = qw/ example.xml trans.xsl /;\n\nmy $xslt = XML::LibXSLT-&gt;new;\nmy $stylesheet = $xslt-&gt;parse_stylesheet_file($xsltfile);\nmy $results    = $stylesheet-&gt;transform_file($xmlfile);\n\nprint $stylesheet-&gt;output_as_chars($results);\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Article - My Article\nAuthors: \n- Mr. Foo\n- Mr. Bar\n</code></pre>\n"}], "owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2051, "favorite_count": 0, "accepted_answer_id": 37727023, "answer_count": 2, "score": 0, "last_activity_date": 1465478313, "creation_date": 1465474339, "last_edit_date": 1465475568, "question_id": 37725678, "link": "https://stackoverflow.com/questions/37725678/perl-error-while-performing-xslt-transformation", "title": "Perl Error while performing xslt transformation", "body": "<p>I am trying to perform a simple xml transformation using XSLT 1.0.\nHere are my xml and xslt files.</p>\n\n<p><strong>XML File</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;?xml-stylesheet type=\"xsl\" href=\"trans.xsl\"?&gt;\n&lt;Article&gt;\n  &lt;Title&gt;My Article&lt;/Title&gt;\n  &lt;Authors&gt;\n    &lt;Author&gt;Mr. Foo&lt;/Author&gt;\n    &lt;Author&gt;Mr. Bar&lt;/Author&gt;\n  &lt;/Authors&gt;\n  &lt;Body&gt;This is my article text.&lt;/Body&gt;\n&lt;/Article&gt;\n</code></pre>\n\n<p><strong>XSLT File</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"&gt;    \n  &lt;xsl:output method=\"text\"/&gt;    \n  &lt;xsl:template match=\"/\"&gt;\n    Article - &lt;xsl:value-of select=\"/Article/Title\"/&gt;\n    Authors: &lt;xsl:apply-templates select=\"/Article/Authors/Author\"/&gt;\n  &lt;/xsl:template&gt;    \n  &lt;xsl:template match=\"Author\"&gt;\n    - &lt;xsl:value-of select=\".\" /&gt;\n  &lt;/xsl:template&gt;    \n&lt;/xsl:stylesheet&gt;\n</code></pre>\n\n<p>And here is my perl script that I am using.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Getopt::Std;\nuse File::Path;\nuse File::Spec;\nuse File::Basename;\nuse Env;\nuse XML::LibXSLT;\nuse XML::LibXML;\n\nmy %opts = ();\ngetopts('p:f:'\\%opts);\n\nmy $xsltfile = $opts{'p'};\ndie \"XSLT file not specified\" if !defined($xsltfile);\n\nmy $xmlfile = $opts{'f'};\ndie \"XML file not specified\" if !defined($xmlfile);\n\n# XSLT Transformation code starts here\n\n#my $xml_parser = XML::LibXML-&gt;new();\n#my $source = $xml_parser-&gt;parse_file($msgcatfile);\n\nmy $source = XML::LibXML-&gt;load_xml(location =&gt; $xmlfile);\n\n#my $xslt_parser = XML::LibXML-&gt;new();\n#my $xslt_source = $xslt_parser-&gt;parse_file($xsltfile);\n\nmy $xslt_source = XML::LibXML-&gt;load_xml(location =&gt; $xsltfile);    \nmy $xslt = XML::LibXSLT-&gt;new();\n\nmy $stylesheet;\n\neval { $stylesheet = $xslt-&gt;parse_stylesheet($xslt_source); };\n\nif ($@)\n{\n    print \"$@\";\n    die \"\\n!******************Error in parsing the stylesheet file : $xsltfile ************************!\\n\";\n}\n\neval { my $results = $stylesheet-&gt;transform_file($source); };\n\nif ($@)\n{\n    print \"$@\";\n    die \"\\n!******************Error in transforming the input xml file : $source ************************!\\n\";\n}\nprint $stylesheet-&gt;output_as_bytes($results);\n0;\n</code></pre>\n\n<p>I am not sure what is going wrong but when run this perl script, I am getting following errors which I am not able decipher.</p>\n\n<pre><code>Bareword found where operator expected at trans.xslt line 2, near \"\"1.0\" xmlns\"\n        (Missing operator before xmlns?)\nBareword found where operator expected at trans.xslt line 11, near \"&lt;/xsl\"\n  (Might be a runaway multi-line // string starting on line 10)\n        (Missing operator before l?)\nsyntax error at trans.xslt line 2, near \"xsl:\"\nExecution of trans.xslt aborted due to compilation errors.\n</code></pre>\n\n<p>I could not find any similar posts (relevant to XML/XSLT) when I searched for keywords in the error message. \nAm I missing something obvious?</p>\n\n<p><strong>:UPDATE:</strong></p>\n\n<p>I ran my program as </p>\n\n<p><code>perl transform.pl -p trans.xslt -f example.xml</code></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1465474017, "post_id": 37723430, "comment_id": 62922200, "body": "This is described in detail in Chapter 16, &quot;Compiling&quot;, of <a href=\"http://shop.oreilly.com/product/9780596004927.do\" rel=\"nofollow noreferrer\">Programming Perl</a>"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1465469610, "last_edit_date": 1465469610, "creation_date": 1465469302, "answer_id": 37723816, "question_id": 37723430, "link": "https://stackoverflow.com/questions/37723430/begin-check-init-end-blocks-in-perl/37723816#37723816", "title": "BEGIN,CHECK,INIT&amp; END blocks in Perl", "body": "<p>This is very easy to test for yourself</p>\n\n<p><code>use Module</code> (and <code>require EXPR</code> and <code>do EXPR</code> and <code>eval EXPR</code>) compile the Perl code and then immediately run it</p>\n\n<p>That is where the <code>1;</code> at the end of most modules is picked up. If executing the module's code after compiling it doesn't return a <em>true</em> value then <code>require</code> will fail</p>\n\n<p>Admittedly there usually isn't much use for an <code>INIT</code> or an <code>END</code> block, because the run-time phase is so intimately tied to the compilation, and because modules are generally about defining subroutines, but the option is there if you want it</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465470747, "post_id": 37724112, "comment_id": 62919900, "body": "This doesn&#39;t address the OP&#39;s question, which is about <code>INIT</code> and <code>END</code> blocks within a Perl module"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465470898, "post_id": 37724112, "comment_id": 62920006, "body": "@Borodin Oh ... the last paragraph tripped me up, thank you.  I&#39;ll add that."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 10, "last_activity_date": 1564377215, "last_edit_date": 1564377215, "creation_date": 1465470099, "answer_id": 37724112, "question_id": 37723430, "link": "https://stackoverflow.com/questions/37723430/begin-check-init-end-blocks-in-perl/37724112#37724112", "title": "BEGIN,CHECK,INIT&amp; END blocks in Perl", "body": "<p><strong>Short</strong> &nbsp; The special code blocks in packages loaded via <code>use</code> are processed and run (or scheduled to run) as encoutered, in the same way and order as in <code>main::</code>, since <code>use</code> itself is a <code>BEGIN</code> block.</p>\n\n<hr>\n\n<p>Excellent documentation on this can be found <a href=\"http://perldoc.perl.org/perlmod.html#BEGIN%2c-UNITCHECK%2c-CHECK%2c-INIT-and-END\" rel=\"nofollow noreferrer\">in perlmod</a>. From this section</p>\n\n<blockquote>\n  <p>A BEGIN code block is executed as soon as possible, that is, the moment it is completely defined, even before the rest of the containing file (or string) is parsed.</p>\n</blockquote>\n\n<p>Since the <code>use</code> statements <em>are</em> <code>BEGIN</code> blocks they run as soon as encountered.  From <a href=\"http://perldoc.perl.org/functions/use.html\" rel=\"nofollow noreferrer\">use</a></p>\n\n<blockquote>\n  <p>It is exactly equivalent to       </p>\n\n<pre><code>BEGIN { require Module; Module-&gt;import( LIST ); }\n</code></pre>\n</blockquote>\n\n<p>So the <code>BEGIN</code> blocks in a package run in-line with others, as they are encountered. The <code>END</code> blocks in a package are then also compiled in the same order, as well as the other special blocks.  As for the order of (eventual) execution</p>\n\n<blockquote>\n  <p>An <code>END</code> code block is executed as late as possible ...</p>\n</blockquote>\n\n<p>and </p>\n\n<blockquote>\n  <p>You may have multiple END blocks within a file--they will execute in reverse order of definition; that is: last in, first out (LIFO)</p>\n</blockquote>\n\n<p>The order of compilation and execution of <code>INIT</code> and <code>CHECK</code> blocks follows suit.</p>\n\n<hr>\n\n<p>Here is some code to demonstrate these special code blocks used in a package.</p>\n\n<p>File <strong>PackageBlocks.pm</strong></p>\n\n<pre><code>package PackageBlocks;\nuse warnings;\n\nBEGIN { print \"BEGIN block in the package\\n\" }\nINIT  { print \"INIT  block in the package\\n\" }\nEND   { print \"END   block in the package\\n\" }\n1;\n</code></pre>\n\n<p>The main script</p>\n\n<pre><code>use warnings;\n\nBEGIN { print \"BEGIN in main script.\\n\" }\n\nprint \"Running in the main.\\n\";\n\nINIT { print \"INIT in main script.\\n\" }\n\nuse PackageBlocks;\n\nEND   { print \"END in main script.\\n\" }\nBEGIN { print \"BEGIN in main script, after package is loaded.\\n\" }\n\nprint \"After use PackageBlocks.\\n\";\n</code></pre>\n\n<p>Output</p>\n\n<pre>\nBEGIN in main script.\nBEGIN block in the package\nBEGIN in main script, after package is loaded.\nINIT in main script.\nINIT block in the package\nRunning in the main.\nAfter use PackageBlocks.\nEND in main script.\nEND block in the package\n</pre>\n\n<p>The <code>BEGIN</code> block in the package runs in order of appearance, in comparison with the ones in <code>main::</code>, and before <code>INIT</code>. The <code>END</code> block runs at end, \nand the one in the package runs after the one in <code>main::</code>, since the <code>use</code> comes before it in this example.  </p>\n"}], "owner": {"reputation": 3669, "user_id": 1867151, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f031f9c0fa73a79510c52afe063d5370?s=128&d=identicon&r=PG", "display_name": "user1867151", "link": "https://stackoverflow.com/users/1867151/user1867151"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1802, "favorite_count": 0, "accepted_answer_id": 37724112, "answer_count": 2, "score": 2, "last_activity_date": 1564377215, "creation_date": 1465468236, "last_edit_date": 1465654813, "question_id": 37723430, "link": "https://stackoverflow.com/questions/37723430/begin-check-init-end-blocks-in-perl", "title": "BEGIN,CHECK,INIT&amp; END blocks in Perl", "body": "<p>As I understand these special functions inside Perl code, BEGIN and CHECK blocks run during the compilation phase while INIT and END blocks run during actual execution phase.</p>\n\n<p>I can understand using these blocks inside actual Perl code (Perl libraries) but what about using them inside modules? Is that possible?</p>\n\n<p>Since when we use <code>use &lt;Module-name&gt;</code> the module is compiled, so in effect BEGIN and CHECK blocks run. But how will the INIT and END blocks run since module code I don't think is run in the true sense. We only use certain functions from inside the modules.</p>\n"}, {"tags": ["oracle", "perl"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6444505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9a04d3ba383068bb427ad75c4221b3?s=128&d=identicon&r=PG&f=1", "display_name": "ilde", "link": "https://stackoverflow.com/users/6444505/ilde"}, "edited": false, "score": 0, "creation_date": 1465465408, "post_id": 37722153, "comment_id": 62916407, "body": "Well, the fields of the tabel could change inthe future, that&#39;s the reason I prefer to use &#39;select *&#39;. I will test the proposed answer. Thanks"}, {"owner": {"reputation": 21441, "user_id": 4479309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c4d654c7c3c81918b62d9a30212daa2?s=128&d=identicon&r=PG", "display_name": "Boneist", "link": "https://stackoverflow.com/users/4479309/boneist"}, "reply_to_user": {"reputation": 3, "user_id": 6444505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9a04d3ba383068bb427ad75c4221b3?s=128&d=identicon&r=PG&f=1", "display_name": "ilde", "link": "https://stackoverflow.com/users/6444505/ilde"}, "edited": false, "score": 3, "creation_date": 1465465708, "post_id": 37722153, "comment_id": 62916635, "body": "In general, <code>select *</code> in production code is bad. You haven&#39;t said what purpose your scripts have, so it may or may not make sense to use <code>select *</code>. Laziness in writing the scripts is, IMHO, not a good reason (not that I&#39;m saying this is what is happening here; there isn&#39;t enough info to determine that!). And if the structure of the tables do change in the future, then your scripts should also change accordingly; after all, if they&#39;re part of the application process (e.g. reporting), then they should be treated in a similar way to the rest of the application code."}, {"owner": {"reputation": 3, "user_id": 6444505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9a04d3ba383068bb427ad75c4221b3?s=128&d=identicon&r=PG&f=1", "display_name": "ilde", "link": "https://stackoverflow.com/users/6444505/ilde"}, "edited": false, "score": 0, "creation_date": 1465469588, "post_id": 37722153, "comment_id": 62919117, "body": "Well, it&#39;s a tool to copy some rows from a database tables to another, it&#39;s not a continuos process, it is run eventually.  Thanks"}, {"owner": {"reputation": 21441, "user_id": 4479309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c4d654c7c3c81918b62d9a30212daa2?s=128&d=identicon&r=PG", "display_name": "Boneist", "link": "https://stackoverflow.com/users/4479309/boneist"}, "reply_to_user": {"reputation": 3, "user_id": 6444505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9a04d3ba383068bb427ad75c4221b3?s=128&d=identicon&r=PG&f=1", "display_name": "ilde", "link": "https://stackoverflow.com/users/6444505/ilde"}, "edited": false, "score": 1, "creation_date": 1465469935, "post_id": 37722153, "comment_id": 62919334, "body": "Okay, that&#39;s more understandable then *{:-) Is there any reason why you&#39;re not using the Oracle export/import or datapump tools to do the copying instead?"}, {"owner": {"reputation": 3, "user_id": 6444505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9a04d3ba383068bb427ad75c4221b3?s=128&d=identicon&r=PG&f=1", "display_name": "ilde", "link": "https://stackoverflow.com/users/6444505/ilde"}, "edited": false, "score": 0, "creation_date": 1465551874, "post_id": 37722153, "comment_id": 62959883, "body": "Well, we are developing a process to cutomize the export to make it easier for the users. It&#39;s used by final Users."}], "tags": [], "owner": {"reputation": 21441, "user_id": 4479309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c4d654c7c3c81918b62d9a30212daa2?s=128&d=identicon&r=PG", "display_name": "Boneist", "link": "https://stackoverflow.com/users/4479309/boneist"}, "is_accepted": true, "score": 3, "last_activity_date": 1465464983, "creation_date": 1465464983, "answer_id": 37722153, "question_id": 37721947, "link": "https://stackoverflow.com/questions/37721947/format-date-select-perl/37722153#37722153", "title": "format date select * perl", "body": "<p>You could do:</p>\n\n<pre><code>alter session set nls_date_format = '&lt;your date format&gt;';\n</code></pre>\n\n<p>e.g.:</p>\n\n<pre><code>alter session set nls_date_format = 'dd/mm/yyyy hh24:mi:ss';\n\nselect sysdate from dual;\n\nSYSDATE              \n---------------------\n09/06/2016 09:33:38  \n</code></pre>\n\n<p>Bear in mind that if you exclude the time portion (e.g. it's irrelevant for some columns as it's always set to midnight), then your output for those columns which do have a time portion will be misleading - e.g.:</p>\n\n<pre><code>alter session set nls_date_format = 'dd/mm/yyyy';\n\nselect sysdate from dual;\n\nSYSDATE   \n----------\n09/06/2016\n</code></pre>\n\n<p>I'm a bit confused as to why you wouldn't know what columns you were dealing with, though. It's not that difficult to look in the database and obtain that information.</p>\n"}], "owner": {"reputation": 3, "user_id": 6444505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9a04d3ba383068bb427ad75c4221b3?s=128&d=identicon&r=PG&f=1", "display_name": "ilde", "link": "https://stackoverflow.com/users/6444505/ilde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 37722153, "answer_count": 1, "score": -2, "last_activity_date": 1465464983, "creation_date": 1465464441, "last_edit_date": 1465464827, "question_id": 37721947, "link": "https://stackoverflow.com/questions/37721947/format-date-select-perl", "title": "format date select * perl", "body": "<p>I'd like to format all the dates from a <code>select * from table</code>, but I dont't know the columns of the table.\nI'd like to format all the columns with datatype DATE to a specific format when I return the results.</p>\n\n<p>I'm working on Oracle and perl scripts.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["perl", "sorting"], "answers": [{"comments": [{"owner": {"reputation": 68, "user_id": 6306648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e72ce2effeec27f4e80fd24cd607522?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Artukh", "link": "https://stackoverflow.com/users/6306648/alex-artukh"}, "edited": false, "score": 0, "creation_date": 1465462019, "post_id": 37720954, "comment_id": 62914204, "body": "You are absolutely right. As well as I. It was an error with wrong order of LIST and BLOCK in <code>sort</code>. Mea culpa."}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": true, "score": 0, "last_activity_date": 1465462038, "last_edit_date": 1465462038, "creation_date": 1465461764, "answer_id": 37720954, "question_id": 37720801, "link": "https://stackoverflow.com/questions/37720801/custom-sorting-for-an-array-of-strings/37720954#37720954", "title": "Custom sorting for an array of strings", "body": "<p>Try this.</p>\n\n<p>Store the grouping elements in a temporary variable and perform sort from that variable.</p>\n\n<pre><code>use warnings;\nuse strict;\nmy @ar = &lt;DATA&gt;;\nmy $m;\nmy $n;\nforeach (sort{ ($m)=$a=~/(\\d+)/; ($n)=$b=~/(\\d+)/; $m &lt;=&gt;$n } @ar)\n{\n    print \"$_\";\n\n}\n\n\n__DATA__\nabc 122 aaaaaaa\ncba 165 aaaaaaaa\naaa 123 aaaaaaaaa\nbvc 443 aaaaaaaaaa\nrdc 993 aaaaaaaaaaa\nqwe 103 aaaaaaaaaaaa\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "is_accepted": false, "score": 1, "last_activity_date": 1465462125, "creation_date": 1465462125, "answer_id": 37721079, "question_id": 37720801, "link": "https://stackoverflow.com/questions/37720801/custom-sorting-for-an-array-of-strings/37721079#37721079", "title": "Custom sorting for an array of strings", "body": "<p>Try this :</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $filename = \"\"; # enter your filename \nopen FH, $filename or die \"Error\\n\";\n\nmy @array   = &lt;FH&gt;;\nmy @values  = map /(\\d+)/, @array;\nmy @indices = sort { $values[$a] &lt;=&gt; $values[$b] } 0 .. $#values;\n\nprint \"$array[$_]\\n\" for @indices;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1465463884, "creation_date": 1465463884, "answer_id": 37721718, "question_id": 37720801, "link": "https://stackoverflow.com/questions/37720801/custom-sorting-for-an-array-of-strings/37721718#37721718", "title": "Custom sorting for an array of strings", "body": "<p>The only problem in your original code is that you have the arguments to <code>sort</code> in the wrong order. <code>sort</code> expects an (optional) sort block followed by the list of items to sort. You have the list of items (<code>@lines</code>) followed by the sort block. Reversing those will fix your problem.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy @lines = &lt;DATA&gt;;\n\nfor my $line (sort {(($a =~ /(\\d+)/)[0]) &lt;=&gt; (($b =~ /(\\d+)/)[0])} @lines) {\n    print $line;\n}\n\n__DATA__\nabc 122 aaaaaaa\ncba 165 aaaaaaaa\naaa 123 aaaaaaaaa\nbvc 443 aaaaaaaaaa\nrdc 993 aaaaaaaaaaa\nqwe 103 aaaaaaaaaaaa\n</code></pre>\n\n<p>As is so often true, adding <code>use strict</code> would have shown that there was something wrong here.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1465471560, "creation_date": 1465471560, "answer_id": 37724649, "question_id": 37720801, "link": "https://stackoverflow.com/questions/37720801/custom-sorting-for-an-array-of-strings/37724649#37724649", "title": "Custom sorting for an array of strings", "body": "<p>The <code>nsort_by</code> function from <a href=\"https://metacpan.org/pod/List::UtilsBy\" rel=\"nofollow\"><code>List::UtilsBy</code></a> wraps this in a much more readable form. It is also fast, because it is written in C</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse List::UtilsBy 'nsort_by';\n\nmy @data = &lt;DATA&gt;;\n\nprint for nsort_by { (split)[1] } @data;\n\n\n__DATA__\nabc 122 aaaaaaa\ncba 165 aaaaaaaa\naaa 123 aaaaaaaaa\nbvc 443 aaaaaaaaaa\nrdc 993 aaaaaaaaaaa\nqwe 103 aaaaaaaaaaaa\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>qwe 103 aaaaaaaaaaaa\nabc 122 aaaaaaa\naaa 123 aaaaaaaaa\ncba 165 aaaaaaaa\nbvc 443 aaaaaaaaaa\nrdc 993 aaaaaaaaaaa\n</code></pre>\n"}], "owner": {"reputation": 68, "user_id": 6306648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e72ce2effeec27f4e80fd24cd607522?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Artukh", "link": "https://stackoverflow.com/users/6306648/alex-artukh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 37720954, "answer_count": 4, "score": -1, "last_activity_date": 1465471560, "creation_date": 1465461351, "question_id": 37720801, "link": "https://stackoverflow.com/questions/37720801/custom-sorting-for-an-array-of-strings", "title": "Custom sorting for an array of strings", "body": "<p>I have a text file with several lines</p>\n\n<pre><code>abc 122 aaaaaaa\ncba 165 aaaaaaaa\naaa 123 aaaaaaaaa\nbvc 443 aaaaaaaaaa\nrdc 993 aaaaaaaaaaa\nqwe 103 aaaaaaaaaaaa\n</code></pre>\n\n<p>Each line contains a decimal number.\nCan I sort this lines using decimal number as a marker for a sorting?</p>\n\n<p>I want to do something like this but this code is not working.</p>\n\n<pre><code>for my $line (sort @lines {(($a =~ /(\\d+)/)[0]) &lt;=&gt; (($b =~ /(\\d+)/)[0])}) {\n    print $line;\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 25, "user_id": 5451107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59126e371792eec98cb7fdd5269c7ef5?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur", "link": "https://stackoverflow.com/users/5451107/ankur"}, "edited": false, "score": 0, "creation_date": 1465470781, "post_id": 37720767, "comment_id": 62919925, "body": "Also i have modules which are using constant in the object method way and when we compile it doesn&#39;t throw any warning as supposed. Is there any other way using objects only by which we can get the warning in case the constant is not defined in module."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465472266, "post_id": 37720767, "comment_id": 62920900, "body": "Please add some layout to your code in the form of indentation and blank lines. It is much more difficult to read your code and spot errors without it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465472290, "post_id": 37720767, "comment_id": 62920922, "body": "This generates <code>Can&#39;t locate object method &quot;HFS_COUNT_TO_CHANGE_AN&quot; via package &quot;hfs_const&quot;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465472371, "post_id": 37720767, "comment_id": 62920983, "body": "Note that your module files and corresponding package names should begin with a capital letter. You should have <code>package HfsConst</code> in file <code>HfsConst.pm</code>"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5451107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59126e371792eec98cb7fdd5269c7ef5?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur", "link": "https://stackoverflow.com/users/5451107/ankur"}, "edited": false, "score": 0, "creation_date": 1465470553, "post_id": 37721504, "comment_id": 62919773, "body": "Thanks, hence during compilation perl only checks the syntax and lexical scope of variables. It doesn&#39;t check method prototype and it wouldn&#39;t check constant variable as it treats it as method."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1465472475, "post_id": 37721504, "comment_id": 62921069, "body": "Note that perl <i>cannot</i> check this at compile time, because <code>$const</code> has no value until run time and there is nothing to check beforehand"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1465463305, "creation_date": 1465463305, "answer_id": 37721504, "question_id": 37720767, "link": "https://stackoverflow.com/questions/37720767/using-undefined-constant-in-perl-file-not-throwing-any-warning/37721504#37721504", "title": "Using undefined constant in perl file not throwing any warning", "body": "<p>You're treating <code>HFS_COUNT_TO_CHANGE_AN</code> as a method (<code>$const-&gt;HFS_COUNT_TO_CHANGE_AN</code>) so Perl won't check that it exists at compile time. You'll get a run-time error though.</p>\n"}], "owner": {"reputation": 25, "user_id": 5451107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59126e371792eec98cb7fdd5269c7ef5?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur", "link": "https://stackoverflow.com/users/5451107/ankur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 37721504, "answer_count": 1, "score": 1, "last_activity_date": 1465472163, "creation_date": 1465461247, "last_edit_date": 1465472163, "question_id": 37720767, "link": "https://stackoverflow.com/questions/37720767/using-undefined-constant-in-perl-file-not-throwing-any-warning", "title": "Using undefined constant in perl file not throwing any warning", "body": "<p>I have a module where I have few variables declared <code>hfs_const.pm</code>. I\nam using this module in another Perl program.</p>\n\n<p>I am also using few of the module's variables in another Perl file.</p>\n\n<p><strong>Test case:</strong> I remove one variable from the module which I am using in the Perl file through an object. Then I compile the Perl file.</p>\n\n<p>I am using <code>use strict</code> and <code>use warnings</code>, but when I compile the Perl program it shows that everything is OK.</p>\n\n<p>I believe it should have thrown an error for undeclared module variable.</p>\n\n<p>Following is the module and Perl file</p>\n\n<h3>hfs_const.pm</h3>\n\n<pre><code>#!/usr/bin/perl\n\npackage hfs_const;    # const definition file for hfs.\nuse Exporter 'import';\n\nuse strict;\nuse warnings;\n\n#--------------------------------------------------------------------------------------\n\nuse constant ENABLE_HFS     =&gt; 1;\nuse constant PROC_MOUNT_DIR =&gt; \"/proc/fs/hydrafs/hfsd/mount\";\n\n#use constant PROC_MOUNT_DIR      =&gt;\"/export/proc\";\nuse constant PROC_HFSD_INFO_FILE =&gt; \"/proc/fs/hydrafs/hfsd/info\";\nuse constant DEBUG               =&gt; 0;\nuse constant IGNORE_SERVICE      =&gt; 0;\n\n#use constant MAX_HFS_PER_AN             =&gt;250;\n#use constant RETRY_COUNT                =&gt;3;\nuse constant GET_ALL_HFS_TIMEOUT =&gt; 12;\n\n#use constant HFS_COUNT_TO_CHANGE_AN =&gt;250;\n\nuse constant CREATING_TIME =&gt; 600;\n\n#our $bar=4;\n\nsub new {\n    my $class = shift;\n\n    my $this  = {};\n    bless $this, $class;\n\n    return $this;\n}\n\nsub getname {\n\n    my $this = shift;\n\n    print \"Ankur\";\n}\n\n1;\n</code></pre>\n\n<h3>hfs.pl</h3>\n\n<pre><code>#!/usr/bin/perl\n\n#\nuse strict;\nuse warnings;\n\nuse hfs_const;\n\nmy $const = new hfs_const();\nmy $isRO  = 3;\n\nif ( $isRO != 4 ) {\n    print $hfs_const::bar;\n    print hfs_const::RETRY_COUNT;\n    print $const-&gt;HFS_COUNT_TO_CHANGE_AN;\n    print hfs_const::MAX_HFS_PER_AN;\n}\nelse {\n    print hfs_const::GET_ALL_HFS_TIMEOUT;\n}\n\n$const-&gt;getname();\n</code></pre>\n\n<p>I get the following warning on compilation</p>\n\n<pre><code>int@mint-VirtualBox ~ $ perl -c hfs.pl\nName \"hfs_const::RETRY_COUNT\" used only once: possible typo at hfs.pl line 12.\nName \"hfs_const::MAX_HFS_PER_AN\" used only once: possible typo at hfs.pl line 14.\nName \"hfs_const::bar\" used only once: possible typo at hfs.pl line 11.\nhfs.pl syntax OK\n</code></pre>\n\n<p>But I do not receive any warning for constant HFS_COUNT_TO_CHANGE_AN which is used through object.</p>\n\n<p>Can anybody explain why is it happening?</p>\n"}, {"tags": ["perl", "ftp"], "comments": [{"owner": {"reputation": 2873, "user_id": 1719755, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/EGRbw.jpg?s=128&g=1", "display_name": "lordkain", "link": "https://stackoverflow.com/users/1719755/lordkain"}, "edited": false, "score": 1, "creation_date": 1465459036, "post_id": 37719970, "comment_id": 62912428, "body": "well keyword &quot;die&quot; terminates the program. replace &quot;die&quot; with something you want the program to do... like $ftp-&gt;login($config-&gt;[$i]-&gt;{&#39;USERNAME&#39;},$config-&gt;[$i]-&gt;{&#39;PSW&zwnj;&#8203;D&#39;}) or print &quot;Cannot login &quot;, $ftp-&gt;message;"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1465459510, "post_id": 37719970, "comment_id": 62912731, "body": "See <a href=\"http://p3rl.org/Try::Tiny\" rel=\"nofollow noreferrer\">Try::Tiny</a> for advanced exception handling."}, {"owner": {"reputation": 143, "user_id": 2955220, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28ba746517092206fd2d04b55b3345d?s=128&d=identicon&r=PG&f=1", "display_name": "Siju Mohan MM", "link": "https://stackoverflow.com/users/2955220/siju-mohan-mm"}, "edited": false, "score": 0, "creation_date": 1465460050, "post_id": 37719970, "comment_id": 62913071, "body": "Thanks! that worked"}, {"owner": {"reputation": 143, "user_id": 2955220, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28ba746517092206fd2d04b55b3345d?s=128&d=identicon&r=PG&f=1", "display_name": "Siju Mohan MM", "link": "https://stackoverflow.com/users/2955220/siju-mohan-mm"}, "edited": false, "score": 0, "creation_date": 1465460172, "post_id": 37719970, "comment_id": 62913133, "body": "Also which is the best way to identify whether the login was successful? I got $ftp-&gt;code = 230, and $ftp-&gt;status =2 upon successful login. Can we validate in that way? Is $ftp-&gt;status means success?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1465460283, "post_id": 37719970, "comment_id": 62913189, "body": "If the login does not return a false value it was successful. That&#39;s what the <code>or</code> does. If it returns <code>undef</code> or <code>0</code> (I don&#39;t know which one it is), it will call the RHS of the <code>or</code>."}, {"owner": {"reputation": 143, "user_id": 2955220, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28ba746517092206fd2d04b55b3345d?s=128&d=identicon&r=PG&f=1", "display_name": "Siju Mohan MM", "link": "https://stackoverflow.com/users/2955220/siju-mohan-mm"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1465460729, "post_id": 37719970, "comment_id": 62913434, "body": "@simbabque Thanks for your response. So is that possible to have multiple statements in or? Because I have to print an error message and exit from the loop if the login is unsuccessful. I have tried to write compound statement, but it seems to be not working."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465473548, "post_id": 37719970, "comment_id": 62921873, "body": "Please state what module you are using. Also, there isn&#39;t much that your program can usefully do unless the FTP session is logged in. I think a fatal exception is appropriate here"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465473672, "post_id": 37719970, "comment_id": 62921942, "body": "<code>$ftp-&gt;login(@{ $config-&gt;[$i] }{qw&#47; USERNAME PSWD &#47;}) or warn &quot;Cannot login&quot;;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1465465218, "creation_date": 1465465218, "answer_id": 37722259, "question_id": 37719970, "link": "https://stackoverflow.com/questions/37719970/handling-exception-in-perl/37722259#37722259", "title": "Handling Exception in Perl", "body": "<p>You have several different ways to do stuff only if the login worked.</p>\n\n<ul>\n<li><p>Let the whole program <code>die</code></p>\n\n<p>You already know that one. The whole program stops if the login fails. It works because <code>login</code> returns a true value on success, and a false value on failure. So if <code>undef</code> gets returend, the RHS of the <code>or</code> is called, which is <code>die</code>.</p>\n\n<pre><code>$ftp-&gt;login($user, $pw) or die \"Cannot login \", $ftp-&gt;message;\n</code></pre></li>\n<li><p>Use a <code>do</code> block</p>\n\n<p>If you want to stick with the <code>or</code>, you can use a <code>do { ... }</code> block to group several statements. This is weird.</p>\n\n<pre><code>$ftp-&gt;login($user, $pw) or do { \n    stuff();\n    more_stuff();\n};\n</code></pre></li>\n<li><p>Check the return value of <code>login</code></p>\n\n<p>If you put your <code>login</code> in an <code>if</code>, you can call as much code as you want.</p>\n\n<pre><code>if ( $ftp-&gt;login($user, $pw) ) {\n     stuff();\n     more_stuff();\n}\n</code></pre></li>\n<li><p>Put all of it in a sub and let the <code>login</code> return</p>\n\n<p>Group all the FTP things into one sub and call that. Then return from the sub if one of the steps fail. To get the error message you could return the <code>ftp</code> object and check the ultimate success outside.</p>\n\n<pre><code>sub ftp_stuff {\n    my ($foo) = @_;\n    $ftp-&gt;login($user, $pw) or return $ftp;\n    $ftp-&gt;stuff($foo) or return $ftp;\n\n    return $ftp;\n}\n\n# and somewhere else\nmy $ftp = ftp_stuff($bar);\ndie \"Something went wrong: \", $ftp-&gt;message if $ftp-&gt;message;\n</code></pre></li>\n<li><p>Use <code>die</code> or Exceptions and <a href=\"https://metacpan.org/pod/Try::Tiny\" rel=\"nofollow\">Try::Tiny</a></p>\n\n<p>The nices approach is to use Try::Tiny.</p>\n\n<pre><code>use Try::Tiny;\n\ntry {\n    $ftp-&gt;login($user, $pw) or die \"Cannot login \", $ftp-&gt;message;\n    stuff() or die \"stuff \", $ftp-&gt;message;\n    # ...\n} catch {\n    # exception/error is in $_\n    warn \"Could not log in\" if /Cannot login/;\n    # ...\n};\n\n# continue with your program\n</code></pre>\n\n<p>An alternative to Try::Tiny is <a href=\"http://perldoc.perl.org/functions/eval.html\" rel=\"nofollow\">an <code>eval</code> block</a>.</p>\n\n<pre><code>eval {\n    $ftp-&gt;login($user, $pw) or die \"Cannot login \", $ftp-&gt;message;\n    stuff() or die \"stuff \", $ftp-&gt;message;\n    # ...\n};\nif ($@) {\n    # exception/error is in $@\n    warn \"Could not log in\" if $@ =~ /Cannot login/;\n    # ...\n};\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 143, "user_id": 2955220, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28ba746517092206fd2d04b55b3345d?s=128&d=identicon&r=PG&f=1", "display_name": "Siju Mohan MM", "link": "https://stackoverflow.com/users/2955220/siju-mohan-mm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "accepted_answer_id": 37722259, "answer_count": 1, "score": 0, "last_activity_date": 1465465218, "creation_date": 1465458855, "last_edit_date": 1465460332, "question_id": 37719970, "link": "https://stackoverflow.com/questions/37719970/handling-exception-in-perl", "title": "Handling Exception in Perl", "body": "<p>I am new to perl, and I have created a perl script for ftp file transfer. </p>\n\n<p>But if the <code>$ftp-&gt;login</code> is unsuccessful, program gets terminated with the following error message:</p>\n\n<pre><code>Uncaught exception from user code:\n        Cannot login Login incorrect.\n at ftp.sender.com line 89\n</code></pre>\n\n<p>Code fragment from the program:  </p>\n\n<pre><code>$ftp-&gt;login($config-&gt;[$i]-&gt;{'USERNAME'},$config-&gt;[$i]-&gt;{'PSWD'}) or die \"Cannot login \", $ftp-&gt;message;\n</code></pre>\n\n<p>Is there any way to handle this exception / unsuccessful login, so that program will not terminate?  </p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 3669, "user_id": 1867151, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f031f9c0fa73a79510c52afe063d5370?s=128&d=identicon&r=PG", "display_name": "user1867151", "link": "https://stackoverflow.com/users/1867151/user1867151"}, "edited": false, "score": 1, "creation_date": 1465458530, "post_id": 37719417, "comment_id": 62912122, "body": "@SubhayanBhattacharya  I like it that you wish to thank people but see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465480577, "post_id": 37719417, "comment_id": 62927445, "body": "<i>&quot;When you are doing $_[0] = &quot;Third&quot;; in the hash function , then you are not changing the hash content. It is for array only.&quot;</i> Yes, but the OP has discovered that. Their question is <b><i>&quot;Why is this thing different in the two cases?&quot;</i></b>"}], "tags": [], "owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "is_accepted": false, "score": 2, "last_activity_date": 1465457651, "last_edit_date": 1592644375, "creation_date": 1465457156, "answer_id": 37719417, "question_id": 37719086, "link": "https://stackoverflow.com/questions/37719086/perl-argument-modification-without-references/37719417#37719417", "title": "Perl argument modification without references", "body": "<p>Array declaration and Hash declaration is not same thing. When you are doing\n<strong>$_[0] = &quot;Third&quot;;</strong> in the hash function , then you are not changing the hash content. It is for array only.</p>\n<p>To remove the <strong>First</strong> key . you need to delete it using delete operator and then add your <strong>third</strong> key. So, Its not possible without reference.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1465458521, "post_id": 37719470, "comment_id": 62912118, "body": "However, the value you can change, just not the keys."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1465480477, "post_id": 37719470, "comment_id": 62927364, "body": "<i>&quot; it knows it can&#39;t send a hash, so converts it to a &#39;list of scalers&#39; representation of the hash data - which is critical not a reference to the original data.&quot;</i> This isn&#39;t strictly true. A hash in list context is converted to a list of keys and values. The <i>keys</i> have to be copied from internal C-strings to Perl scalars, but the values are already Perl scalars and are just passed as they are. See my own solution"}], "tags": [], "owner": {"reputation": 405, "user_id": 6336615, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-54JWXHU1LhI/AAAAAAAAAAI/AAAAAAAABKc/N9fUA8Ue7e4/photo.jpg?sz=128", "display_name": "Wayne Booth", "link": "https://stackoverflow.com/users/6336615/wayne-booth"}, "is_accepted": true, "score": 2, "last_activity_date": 1465457293, "creation_date": 1465457293, "answer_id": 37719470, "question_id": 37719086, "link": "https://stackoverflow.com/questions/37719086/perl-argument-modification-without-references/37719470#37719470", "title": "Perl argument modification without references", "body": "<p>Perl will pass by reference all the time.</p>\n\n<p>So, in the array example, each element is passed as a reference (since the input to a sub is just a 'list of scalers' ie an array). Therefore when you update an element in the sub, your actually changing the value that references the value in the original array.</p>\n\n<p>In the example of the hash, when Perl sees a hash passed into a sub, it knows it can't send a hash, so converts it to a 'list of scalers' representation of the hash data - which is critical not a reference to the original data. This representation is passed by reference to the sub, which you update. As such you don't update the original data, as you did with a simple array.</p>\n"}, {"comments": [{"owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "edited": false, "score": 0, "creation_date": 1465523875, "post_id": 37727715, "comment_id": 62948253, "body": "Thanks @Borodin for providing useful knowledge."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1467554803, "last_edit_date": 1467554803, "creation_date": 1465479794, "answer_id": 37727715, "question_id": 37719086, "link": "https://stackoverflow.com/questions/37719086/perl-argument-modification-without-references/37727715#37727715", "title": "Perl argument modification without references", "body": "\n\n<p>You have been slightly misled</p>\n\n<p>Perl hash keys aren't ordinary Perl scalar values -- they are stored as a simple C string for speed, but hash values <em>are</em> Perl scalars</p>\n\n<p>In a call like <code>test(%h)</code> Perl creates a temporary Perl scalar out of each hash key string and passes those, together with the <em>real</em> hash value scalars</p>\n\n<p>That means that any attempt to modify the key strings will change only the temporary scalars, and won't be reflected in the hash. But your code <strong>does</strong> change the values</p>\n\n<p>Here's a version that dumps the whole hash before and after the subroutine call. You can see that the string <code>Third</code> has been lost, but <code>100</code> has been assigned to a (random) hash value</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse Data::Dump 'pp';\n\nsub test {\n  $_[0] = \"Third\";\n  $_[1] = 100;\n}\n\nmy %h = (\"First\" =&gt; 1, \"Second\" =&gt; 2);\n\nprintf \"Before: %s\\n\", pp \\%h;\ntest(%h);\nprintf \"After:  %s\\n\", pp \\%h;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Before: { First =&gt; 1, Second =&gt; 2 }\nAfter:  { First =&gt; 1, Second =&gt; 100 }\n</code></pre>\n"}], "owner": {"reputation": 3669, "user_id": 1867151, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f031f9c0fa73a79510c52afe063d5370?s=128&d=identicon&r=PG", "display_name": "user1867151", "link": "https://stackoverflow.com/users/1867151/user1867151"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 2, "accepted_answer_id": 37719470, "answer_count": 3, "score": 3, "last_activity_date": 1467554803, "creation_date": 1465456193, "last_edit_date": 1465479093, "question_id": 37719086, "link": "https://stackoverflow.com/questions/37719086/perl-argument-modification-without-references", "title": "Perl argument modification without references", "body": "\n\n<p>I was just toying with the concept of modifying arguments inside a Perl subroutine without using references. I tried this in case of arrays :</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub test {\n  print \"Trying to change ... \\n\";\n  $_[0] = \"Third\";\n  $_[1] = 100;\n}\n\n@a = (\"First\", 1, \"Second\", 2);\n\nprint \"Before change : @a \\n\";\ntest(@a);\nprint \"After change : @a \\n\";\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Before change : First 1 Second 2\nTrying to change ...\nAfter change : Third 100 Second 2\n</code></pre>\n\n<p>In other words the elements of an array is changed by changing the values of <code>@_</code>.</p>\n\n<p>But doing the same in case of hashes does not give the intended behavior:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub test {\n  print \"Trying to change ... \\n\";\n  $_[0] = \"Third\";\n  $_[1] = 100;\n}\n\n%h = (\"First\" =&gt; 1, \"Second\" =&gt; 2);\n\ntest(%h);\n\nforeach ( keys %h ) {\n  print \"$_\\n\";\n}\n</code></pre>\n\n<h3>Output :</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Trying to change ...\nSecond\nFirst\n</code></pre>\n\n<p>Why is this thing different in the two cases?</p>\n"}, {"tags": ["windows", "perl", "fork"], "comments": [{"owner": {"reputation": 3604, "user_id": 436450, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0afd75178763cf41af43a103b95277ae?s=128&d=identicon&r=PG", "display_name": "jira", "link": "https://stackoverflow.com/users/436450/jira"}, "edited": false, "score": 1, "creation_date": 1465465436, "post_id": 37716630, "comment_id": 62916426, "body": "It means that the process ended and some other process reaped it calling waitpid before Parallel::ForkManager. Given that it happens only sometimes and on Windows could indicate a bug somewhere, I think."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 3604, "user_id": 436450, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0afd75178763cf41af43a103b95277ae?s=128&d=identicon&r=PG", "display_name": "jira", "link": "https://stackoverflow.com/users/436450/jira"}, "edited": false, "score": 0, "creation_date": 1465531364, "post_id": 37716630, "comment_id": 62949847, "body": "@jira There are no other processes that could have reaped it.  What does &#39;reaped&#39; mean anyway?"}, {"owner": {"reputation": 3604, "user_id": 436450, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0afd75178763cf41af43a103b95277ae?s=128&d=identicon&r=PG", "display_name": "jira", "link": "https://stackoverflow.com/users/436450/jira"}, "edited": false, "score": 0, "creation_date": 1465538962, "post_id": 37716630, "comment_id": 62952421, "body": "I think best would be to report it as a possible bug in Parallel::ForkManager."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 7147188, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/5b2b52c09c38b96b318c1f05fd1bfea1?s=128&d=identicon&r=PG", "display_name": "lakshmiVG", "link": "https://stackoverflow.com/users/7147188/lakshmivg"}, "is_accepted": false, "score": 2, "last_activity_date": 1478884380, "creation_date": 1478884380, "answer_id": 40552987, "question_id": 37716630, "link": "https://stackoverflow.com/questions/37716630/warning-using-parallelforkmanager-but-only-in-windows/40552987#40552987", "title": "warning using Parallel::ForkManager but only in Windows", "body": "<p>I had the similar issue and placing a sleep 1 before \"$pm->start and next LINKS;\"\nfixed the issue. I guess its due to continues forking, where Perl lost track of the fork processes. I may be wrong! </p>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 645, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1478884380, "creation_date": 1465445276, "question_id": 37716630, "link": "https://stackoverflow.com/questions/37716630/warning-using-parallelforkmanager-but-only-in-windows", "title": "warning using Parallel::ForkManager but only in Windows", "body": "<p>I sometimes get this warning when using <a href=\"http://search.cpan.org/~yanick/Parallel-ForkManager-1.18/lib/Parallel/ForkManager.pm\" rel=\"nofollow\">Parallel::ForkManager</a> but only in Windows, not on a Unix based system. What does it mean and should I worry about it?</p>\n\n<blockquote>\n  <p>child process '-17108' disappeared. A call to <code>waitpid</code> outside of\n  Parallel::ForkManager might have reaped it.</p>\n</blockquote>\n\n<p>Here is the sample code from the <a href=\"http://search.cpan.org/~yanick/Parallel-ForkManager-1.18/lib/Parallel/ForkManager.pm\" rel=\"nofollow\">docs</a> that my code is based on:</p>\n\n<pre><code>use LWP::Simple;\nuse Parallel::ForkManager;\n\nmy @links=(\n    [\"http://www.foo.bar/rulez.data\",\"rulez_data.txt\"],\n    [\"http://new.host/more_data.doc\",\"more_data.doc\"],\n);\n\n# Max 30 processes for parallel download\nmy $pm = Parallel::ForkManager-&gt;new(30);\n\nLINKS:\nforeach my $linkarray (@links) {\n    $pm-&gt;start and next LINKS; # do the fork\n\n    my ($link, $fn) = @$linkarray;\n    warn \"Cannot get $fn from $link\"\n      if getstore($link, $fn) != RC_OK;\n\n    $pm-&gt;finish; # do the exit in the child process\n}\n\n$pm-&gt;wait_all_children;\n</code></pre>\n"}, {"tags": ["regex", "perl", "replace"], "comments": [{"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1465441428, "post_id": 37715990, "comment_id": 62905513, "body": "If you&#39;re looking for newlines <code>\\n</code> something like this should work <code>$a =~ s&#47;\\n.*$&#47;&#47;g;</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1465441819, "post_id": 37715990, "comment_id": 62905592, "body": "Note that <code>\\n</code> is newline; <code>\\r</code> is for carriage return."}, {"owner": {"reputation": 68253, "user_id": 20938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CuXSm.jpg?s=128&g=1", "display_name": "Alan Moore", "link": "https://stackoverflow.com/users/20938/alan-moore"}, "edited": false, "score": 1, "creation_date": 1465508275, "post_id": 37715990, "comment_id": 62944389, "body": "Actually, it&#39;s called a linefeed.  &quot;Newline&quot; is a generic term for anything that&#39;s used to separate lines, including linefeed (<code>\\n</code>), carriage return(<code>\\r</code>), a carriage return-linefeed pair (<code>\\r\\n</code>), and a few other, more exotic characters."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1465442259, "post_id": 37716070, "comment_id": 62905677, "body": "The key point being the <code>&#47;s</code> modifier which <a href=\"http://perldoc.perl.org/perlreref.html\" rel=\"nofollow noreferrer\">perlreref</a> says: <i><code>s</code>  match as a Single line - <code>.</code> matches <code>\\n</code></i>."}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1465443678, "post_id": 37716070, "comment_id": 62905973, "body": "Probably, &quot;\\n&quot; should be instead of &quot;\\.&quot;."}], "tags": [], "owner": {"reputation": 6643, "user_id": 1464130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8b0e7020d1a9b92584574bb8059ad38?s=128&d=identicon&r=PG", "display_name": "amaksr", "link": "https://stackoverflow.com/users/1464130/amaksr"}, "is_accepted": false, "score": 2, "last_activity_date": 1465440983, "creation_date": 1465440983, "answer_id": 37716070, "question_id": 37715990, "link": "https://stackoverflow.com/questions/37715990/perl-how-to-search-replace-elegantly-beyond-carriage-return/37716070#37716070", "title": "PERL: how to search/replace elegantly beyond carriage return?", "body": "<p>This should work:</p>\n\n<pre><code>$b =~ s/track\\..*/track\\./sg;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1316, "user_id": 2829188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar0v2.jpg?s=128&g=1", "display_name": "Russell Jonakin", "link": "https://stackoverflow.com/users/2829188/russell-jonakin"}, "is_accepted": false, "score": 1, "last_activity_date": 1465441642, "creation_date": 1465441642, "answer_id": 37716141, "question_id": 37715990, "link": "https://stackoverflow.com/questions/37715990/perl-how-to-search-replace-elegantly-beyond-carriage-return/37716141#37716141", "title": "PERL: how to search/replace elegantly beyond carriage return?", "body": "<p>You can use rindex(), which gets the last index of a position in a string, and combine that with substr(). like this:</p>\n\n<pre><code>$b = substr($a, 0, rindex($a, \"\\\\n\"));\n</code></pre>\n\n<p>If you want to keep the new line character at the end of your string, then do this:</p>\n\n<pre><code>$b = substr($a, 0, rindex($a, \"\\\\n\") + 1);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1466097203, "last_edit_date": 1495541302, "creation_date": 1465444902, "answer_id": 37716573, "question_id": 37715990, "link": "https://stackoverflow.com/questions/37715990/perl-how-to-search-replace-elegantly-beyond-carriage-return/37716573#37716573", "title": "PERL: how to search/replace elegantly beyond carriage return?", "body": "<p>You have a good approach in your code, needing just a little more -- there's no need to iterate.</p>\n\n<p>This removes the last line from a multi-line string. </p>\n\n<pre><code>my @lines = split '\\n', $line;\npop @lines;\nmy $text = join '\\n', @lines;\n</code></pre>\n\n<p>The <a href=\"http://perldoc.perl.org/functions/pop.html\" rel=\"nofollow noreferrer\"><code>pop</code></a> removes the last element from the array.  Or, if you wish to keep <code>@lines</code> whole</p>\n\n<pre><code>my @lines = split '\\n', $line;\nmy $text = join '\\n', @lines[0..$#lines-1];\n</code></pre>\n\n<p>Note that if the \"last\" line of text itself ends with a newline (so, if it is followed by an empty line), <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\"><code>split</code></a> nicely won't return an extra element, since it discards all trailing empty fields in the list that it then returns. So the code above remains the same.</p>\n\n<hr>\n\n<p>Please note comments by <a href=\"https://stackoverflow.com/users/15168/jonathan-leffler\">Jonathan Leffler</a> and <a href=\"https://stackoverflow.com/users/20938/alan-moore\">Alan Moore</a>. From the latter</p>\n\n<blockquote>\n  <p>\"Newline\" is a generic term for anything that's used to separate lines, including linefeed (<code>\\n</code>), carriage return(<code>\\r</code>), a carriage return-linefeed pair (<code>\\r\\n</code>), and a few other, more exotic characters.</p>\n</blockquote>\n\n<p>If you were to look for the \"<em>carriage return</em>\", per title, or for other forms of \"newline,\" you'd need to adjust the <code>\\n</code> in <code>split</code> and <code>join</code> above. See, for example, their <a href=\"https://en.wikipedia.org/wiki/Newline#Representations\" rel=\"nofollow noreferrer\"><code>Representations on Wikipedia</code></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 1488, "user_id": 6395052, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-XKoXECLm9OM/AAAAAAAAAAI/AAAAAAAAADw/PIOmJsiX89U/photo.jpg?sz=128", "display_name": "aschultz", "link": "https://stackoverflow.com/users/6395052/aschultz"}, "edited": false, "score": 0, "creation_date": 1466844481, "post_id": 37716761, "comment_id": 63493810, "body": "$a and $b are a bad habit of mine. Seeing this in answers on stackoverflow is good motivation to change those variables. And, yes, I&#39;m not morally attached to doing things in one regex, but I often get stuck in methods that work but could be more efficient.  I&#39;ve worked a while with perl but didn&#39;t know about the s option at the end of a search and replace. So that&#39;s greta to know in addition."}], "tags": [], "owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "is_accepted": false, "score": 1, "last_activity_date": 1465446056, "creation_date": 1465446056, "answer_id": 37716761, "question_id": 37715990, "link": "https://stackoverflow.com/questions/37715990/perl-how-to-search-replace-elegantly-beyond-carriage-return/37716761#37716761", "title": "PERL: how to search/replace elegantly beyond carriage return?", "body": "<pre><code>my $string = $a;\n$string =~ s/I want to delete[^\\n]*\\n//gs;\n</code></pre>\n\n<p>There is nothing wrong with splitting the array and iterating over it.  If you wanted to do it in one regex, you can also accomplish it by looking for the target string.</p>\n\n<p>An additional note is to also avoid using <code>$a</code> and <code>$b</code> as they're often used as internal variables.</p>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 1452613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b8a906b82bd470f230375fc9db83458?s=128&d=identicon&r=PG", "display_name": "atanation", "link": "https://stackoverflow.com/users/1452613/atanation"}, "is_accepted": false, "score": 1, "last_activity_date": 1465463672, "creation_date": 1465463672, "answer_id": 37721637, "question_id": 37715990, "link": "https://stackoverflow.com/questions/37715990/perl-how-to-search-replace-elegantly-beyond-carriage-return/37721637#37721637", "title": "PERL: how to search/replace elegantly beyond carriage return?", "body": "<p>If I understood your question correctly, it seems what you need is <code>pop</code>:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $a = \"This is a string that I concatenate beforehand with carriage returns, so it's hard to separate out.\\nThis is the last line I want to track.\\nI want to delete this line.\";\n\nmy @lines     = split(/\\n/, $a);\nmy $last_line = pop @lines;\n\nprint join('\\n', @lines) . \"\\n\"; # first two lines\nprint $last_line . \"\\n\"; # in case you still want to use it ;)\n</code></pre>\n\n<p>Hope this helped</p>\n"}], "owner": {"reputation": 1488, "user_id": 6395052, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-XKoXECLm9OM/AAAAAAAAAAI/AAAAAAAAADw/PIOmJsiX89U/photo.jpg?sz=128", "display_name": "aschultz", "link": "https://stackoverflow.com/users/6395052/aschultz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 817, "favorite_count": 0, "accepted_answer_id": 37716573, "answer_count": 5, "score": 2, "last_activity_date": 1466097203, "creation_date": 1465440217, "last_edit_date": 1465440619, "question_id": 37715990, "link": "https://stackoverflow.com/questions/37715990/perl-how-to-search-replace-elegantly-beyond-carriage-return", "title": "PERL: how to search/replace elegantly beyond carriage return?", "body": "<p>I had trouble googling this, as most people seem to want to know how to remove a carriage return.</p>\n\n<p>The code I have works, but it seems awkward, and I'm missing something. It may be that my original script is designed poorly (I'm checking if one element occurs last, and if so, I need to change it,) but still...it seems I'm missing a quick way to make things smoother.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $a = \"This is a string that I concatenate beforehand with carriage returns, so it's hard to separate out.\\nThis is the last line I want to track.\\nI want to delete this line.\";\nmy $b = $a;\n\n$b =~ s/(track\\.).*/$1/g;\n\nprint \"THIRD LINE STILL THERE\\n$b\\n\\n\";\n\nmy @c = split(/\\n/, $a);\nfor (0..$#c) { \n   if ($c[$_] =~ /last line/) { \n      $b = join(\"\\n\", @c[0..$_]); \n      last; \n   } \n}\n\nprint \"THIRD LINE GONE. IT WORKS, BUT I THINK THERE MUST BE A BETTER WAY.\\n$b\\n\";\n</code></pre>\n"}, {"tags": ["perl", "date", "time"], "answers": [{"comments": [{"owner": {"reputation": 356, "user_id": 5226961, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ddefe9a6be125d44d0b116debb2aef39?s=128&d=identicon&r=PG&f=1", "display_name": "Ejonas GGgg", "link": "https://stackoverflow.com/users/5226961/ejonas-gggg"}, "edited": false, "score": 0, "creation_date": 1465439120, "post_id": 37715717, "comment_id": 62905078, "body": "Thanks! Since you are experienced with perl, now I have another problem; for example, I use DateTime-&gt;new(year =&gt; 1013, month =&gt; 2, day =&gt; 22), when I print the day name, it gives me another day name than what shows up using <code>cal 1013</code> in linux. Is there something should be put in my ` DateTime-&gt;new()`?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 356, "user_id": 5226961, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ddefe9a6be125d44d0b116debb2aef39?s=128&d=identicon&r=PG&f=1", "display_name": "Ejonas GGgg", "link": "https://stackoverflow.com/users/5226961/ejonas-gggg"}, "edited": false, "score": 0, "creation_date": 1465439766, "post_id": 37715717, "comment_id": 62905217, "body": "I see the same discrepency. I don&#39;t know which is correct."}, {"owner": {"reputation": 356, "user_id": 5226961, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ddefe9a6be125d44d0b116debb2aef39?s=128&d=identicon&r=PG&f=1", "display_name": "Ejonas GGgg", "link": "https://stackoverflow.com/users/5226961/ejonas-gggg"}, "edited": false, "score": 0, "creation_date": 1465439988, "post_id": 37715717, "comment_id": 62905261, "body": "It is okay, Thank you for the answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1465440994, "last_edit_date": 1465440994, "creation_date": 1465437841, "answer_id": 37715717, "question_id": 37715583, "link": "https://stackoverflow.com/questions/37715583/error-when-dealing-with-old-and-historical-dates-in-perl-timepiece/37715717#37715717", "title": "Error when dealing with old and historical dates in Perl Time::Piece", "body": "<p>You'll have to use something other than Time::Piece if you want to deal with timestamps before 1970.</p>\n\n<hr>\n\n<p>If you want to use the Gregorian calendar, you can use <a href=\"http://search.cpan.org/perldoc?DateTime\" rel=\"nofollow\">DateTime</a>.</p>\n\n<p>If you want to use the Julian calendar, you can use <a href=\"http://search.cpan.org/perldoc?DateTime::Calendar::Julian\" rel=\"nofollow\">DateTime::Calendar::Julian</a>.</p>\n\n<p>The Gregorian calendar was introduced in September, 1582, and it was used universally by 1918. In between, calendar usage varied by country.</p>\n\n<pre><code>$ perl -MDateTime::Calendar::Julian -E'\n   say\n      DateTime::Calendar::Julian-&gt;new(year =&gt; 1013, month =&gt; 2, day =&gt; 22)\n         -&gt;strftime(\"%a\");\n'\nSun\n</code></pre>\n\n<hr>\n\n<p>Alternatively, <a href=\"http://search.cpan.org/perldoc?Date::Convert\" rel=\"nofollow\">Date::Convert</a> looks promising if you're just care about dates (not timestamps).</p>\n"}], "owner": {"reputation": 356, "user_id": 5226961, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ddefe9a6be125d44d0b116debb2aef39?s=128&d=identicon&r=PG&f=1", "display_name": "Ejonas GGgg", "link": "https://stackoverflow.com/users/5226961/ejonas-gggg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 37715717, "answer_count": 1, "score": 1, "last_activity_date": 1465440994, "creation_date": 1465436427, "question_id": 37715583, "link": "https://stackoverflow.com/questions/37715583/error-when-dealing-with-old-and-historical-dates-in-perl-timepiece", "title": "Error when dealing with old and historical dates in Perl Time::Piece", "body": "<p>It seems <code>Time:Piece</code> gives me this error:\n<code>Error parsing time at /usr/lib/perl5/site_perl/Time/Piece.pm line 481.</code>\nafter the line where I use <code>strptime</code> with some old dates.</p>\n\n<p>My code contains this:</p>\n\n<pre><code>my $ddate = \"$month / $day / $year\";\nmy $tmp = Time::Piece-&gt;strptime( $ddate, \"%m / %d / %Y\");\n</code></pre>\n\n<p>and $$date takes dates from a database using DBI that contains historical and old dates (dates back to the 10th and 9th centuries AD). How can I deal with this if there is any solution?</p>\n"}]