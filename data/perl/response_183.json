[{"tags": ["arrays", "perl"], "answers": [{"comments": [{"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 1, "creation_date": 1531395127, "post_id": 51289554, "comment_id": 89585594, "body": "Also, the indexes can be in any order. <code>my @indexes = ( 5, 0, 3 );</code> And you can use negative indexes to read from the end of the array. <code>my @indexes = ( -1, -2, -3 );</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 2, "creation_date": 1531401371, "post_id": 51289554, "comment_id": 89589965, "body": "Well the order is relevant @shawnhcorey. They don&#39;t have to be sorted for this to work, but you have to put them in the order you want your output to be."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1531410834, "post_id": 51289554, "comment_id": 89596466, "body": "Oops, my bad. You are correct; they should be in the order you want. I was trying to say they don&#39;t have to be in strict ascending order."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 1, "creation_date": 1531410922, "post_id": 51289554, "comment_id": 89596505, "body": "@shawnhcorey of course, yes. That&#39;s true for any list. Would be strange if lists had to be sorted. Also would make sorting a very cheap operation. :)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 9, "last_activity_date": 1531323854, "creation_date": 1531323854, "answer_id": 51289554, "question_id": 51289426, "link": "https://stackoverflow.com/questions/51289426/perl-using-an-array-list-in-order-to-select-specific-columns/51289554#51289554", "title": "Perl: Using an array list in order to select specific columns", "body": "<p>You can't put a loop construct into a data structure in Perl. That would be a syntax error.</p>\n\n<p>But you can use an <a href=\"https://perldoc.perl.org/perldata.html#Slices\" rel=\"noreferrer\"><em>array slice</em></a>.</p>\n\n<pre><code>my $record = join('|', @tab[0, 3, 5, 7]);\n</code></pre>\n\n<p>Notice how the <em>sigil</em> changed from <code>$</code> to <code>@</code>, because we now return a list. Of course you can put those four numbers into another array defined outside of the loop and use that.</p>\n\n<pre><code>my @indexes = ( 0, 3, 5 );\nmy @slice =  @array[ @indexes ];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": 2, "last_activity_date": 1531323870, "creation_date": 1531323870, "answer_id": 51289562, "question_id": 51289426, "link": "https://stackoverflow.com/questions/51289426/perl-using-an-array-list-in-order-to-select-specific-columns/51289562#51289562", "title": "Perl: Using an array list in order to select specific columns", "body": "<p>You can do it this way:</p>\n\n<pre><code>my $record = join('|', @tab[@list]);\n</code></pre>\n"}], "owner": {"reputation": 166, "user_id": 3399702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n2ObF.jpg?s=128&g=1", "display_name": "Seth", "link": "https://stackoverflow.com/users/3399702/seth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 51289554, "answer_count": 2, "score": 3, "last_activity_date": 1531345856, "creation_date": 1531323453, "last_edit_date": 1531345856, "question_id": 51289426, "link": "https://stackoverflow.com/questions/51289426/perl-using-an-array-list-in-order-to-select-specific-columns", "title": "Perl: Using an array list in order to select specific columns", "body": "<p>I have a python script which is reading data and output only specific columns into a file.</p>\n\n<p>I would like to do the same in Perl.\nI've done this in Perl (script below) but I can't used an array like I do in Python with the selector.</p>\n\n<p><strong>Here the script with the DATA embedded</strong></p>\n\n<pre><code>#!/usr/bin/python\n\nfrom StringIO import StringIO\n\npath = \"/tmp/log.csv\"\n\n__DATA__ = '''\n20180704150930|rtsp|645645643|30193|211|KLM|KLM00SD624817.ts|172.30.16.34|127299264|VERB|01780000|21103|277|server01|OK\n20180704150931|api|456456546|30130|234|VC3|VC300179201139.ts|172.30.16.138|192271838|VERB|05540000|23404|414|server01|OK\n20180704150931|api|465456786|30154|443|BAD|BAD004416550.ts|172.30.16.50|280212202|VERB|04740000|44301|18|server01|OK\n20180704150931|api|5437863735|30157|383|VSS|VSS0011062009.ts|172.30.16.66|312727922|VERB|05700000|38303|381|server01|OK\n20180704150931|api|3453432|30215|223|VAE|VAE00TF548197.ts|172.30.16.74|114127126|VERB|05060000|22305|35|server01|OK\n20180704150931|api|312121|30044|487|BOV|BOVVAE00549424.ts|172.30.16.58|69139448|VERB|05300000|48708|131|server01|OK\n20180704150931|rtsp|453432123|30127|203|GZD|GZD0900032066.ts|172.30.16.58|83164150|VERB|05460000|20303|793|server01|OK\n20180704150932|api|12345348|30154|465|TYH|TYH0011224259.ts|172.30.16.50|279556843|VERB|04900000|46503|241|server01|OK\n20180704150932|api|4343212312|30154|326|VAE|VAE00TF548637.ts|172.30.16.3|28966797|VERB|04740000|32601|969|server01|OK\n20180704150932|api|312175665|64530|305|TTT|TTT000000011852.ts|172.30.16.98|47868183|VERB|04740000|30501|275|server01|OK\n'''\n\nselector = [0, 3, 5, 7]\n\n__DATA__ = StringIO(__DATA__)\nwith    open(path + \".py.txt\", \"w\") as output:\n        for line in __DATA__:\n                line = line.rstrip( \"\\r\\t\\n\" )\n                if not line.strip(): continue  # skip the empty line\n                columns = line.split(\"|\")\n                newColumns = [ columns[i] for i in selector ]\n                output.write(\"|\".join(newColumns) + \"\\n\")\n                print (\"|\".join(newColumns))\n</code></pre>\n\n<p><strong>Question</strong></p>\n\n<p>So, with the Perl script I have an array like Python\nOn my script I'm doing that without using the array in a loop\nI do directly $tab[0] etc...\nI don't know how do the same with an array list\nI would like to use the @list instead</p>\n\n<p><strong>Here the same code in Perl</strong></p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse autodie;\n\nmy $path = \"/tmp/log.csv\";\nmy @list = (0, 3, 5, 7);\n\nopen(OUT, \"&gt;\", $path . \".pl.txt\");\nwhile (&lt;DATA&gt;) {\n        chomp;\n        my @tab = split(/\\|/, $_);\n        my $record = join('|', $tab[0], $tab[3], $tab[5], $tab[7]);\n        print $record, \"\\n\";\n        print OUT $record, \"\\n\";\n}\n\nclose(OUT);\n\n\n__DATA__\n20180704150930|rtsp|645645643|30193|211|KLM|KLM00SD624817.ts|172.30.16.34|127299264|VERB|01780000|21103|277|server01|OK\n20180704150931|api|456456546|30130|234|VC3|VC300179201139.ts|172.30.16.138|192271838|VERB|05540000|23404|414|server01|OK\n20180704150931|api|465456786|30154|443|BAD|BAD004416550.ts|172.30.16.50|280212202|VERB|04740000|44301|18|server01|OK\n20180704150931|api|5437863735|30157|383|VSS|VSS0011062009.ts|172.30.16.66|312727922|VERB|05700000|38303|381|server01|OK\n20180704150931|api|3453432|30215|223|VAE|VAE00TF548197.ts|172.30.16.74|114127126|VERB|05060000|22305|35|server01|OK\n20180704150931|api|312121|30044|487|BOV|BOVVAE00549424.ts|172.30.16.58|69139448|VERB|05300000|48708|131|server01|OK\n20180704150931|rtsp|453432123|30127|203|GZD|GZD0900032066.ts|172.30.16.58|83164150|VERB|05460000|20303|793|server01|OK\n20180704150932|api|12345348|30154|465|TYH|TYH0011224259.ts|172.30.16.50|279556843|VERB|04900000|46503|241|server01|OK\n20180704150932|api|4343212312|30154|326|VAE|VAE00TF548637.ts|172.30.16.3|28966797|VERB|04740000|32601|969|server01|OK\n20180704150932|api|312175665|64530|305|TTT|TTT000000011852.ts|172.30.16.98|47868183|VERB|04740000|30501|275|server01|OK\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1531971"}, "edited": false, "score": 0, "creation_date": 1531318070, "post_id": 51286781, "comment_id": 89552822, "body": "Of interest: <a href=\"https://perlmaven.com/how-to-grep-a-file-using-perl\" rel=\"nofollow noreferrer\">perlmaven.com/how-to-grep-a-file-using-perl</a> I suspect there are similar SO Qs as well."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1531362544, "post_id": 51287035, "comment_id": 89570386, "body": "Re &quot;<i><code>my $flag = 0;  $flag = 1 if $line =~ m&#47;  $val $instance&#47;;</code></i>&quot;, or just <code>my $flag = $line =~ &#47;  $val $instance&#47;;</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531401544, "post_id": 51287035, "comment_id": 89590081, "body": "@ikegami Thanks for adding that. I had decided not to put it in the answer because OP had the <code>if</code> construct and i wanted to stick with it. It felt somehow that they&#39;ll be more comfortable with it than with just taking the return value of the match."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 5, "last_activity_date": 1531316471, "creation_date": 1531316471, "answer_id": 51287035, "question_id": 51286781, "link": "https://stackoverflow.com/questions/51286781/how-to-grep-a-pattern-for-each-and-every-element-of-an-array/51287035#51287035", "title": "How to grep a pattern for each and every element of an array", "body": "<p>It cannot toggle with the code you have written. Your code checks if there is any occurrence of the pattern in the array. <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"noreferrer\"><code>grep</code></a> will look at each line (element in the array) in turn, and return a list of the ones that match the pattern. Then your flag is set and you are done.</p>\n\n<pre><code>my @list = ( 1 .. 20 );\nmy @match = grep /3/, @list;\nprint \"@match\";\n\n# 3 13\n</code></pre>\n\n<p>If you want to do each line individually, you need to loop over the array yourself in an outer loop, and then do a match. No need for <code>grep</code> then. </p>\n\n<pre><code>foreach my $line (@soc_data) {\n    my $flag = 0;\n    $flag = 1 if $line =~ m/  $val $instance/; # you might want to use \\s\n\n    # do things with $flag\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1531324017, "creation_date": 1531324017, "answer_id": 51289611, "question_id": 51286781, "link": "https://stackoverflow.com/questions/51286781/how-to-grep-a-pattern-for-each-and-every-element-of-an-array/51289611#51289611", "title": "How to grep a pattern for each and every element of an array", "body": "<p><code>grep</code> is often used to apply regular expressions to a list of strings, but the <code>grep</code> in Perl is more general than that, and you must explicitly use a regular expression if that's what you want to use <code>grep</code> for. Compare:</p>\n\n<pre><code>@list = (7,8,9,10);\nprint grep /1/, @list;        # 10 -- only \"10\" matches /1/\nprint grep 1, @list;          # 7 8 9 10, EXPR is always true\n</code></pre>\n\n<p>Your use of <code>grep</code> is more like the 2nd case. The first argument to <code>grep</code> is just a non-empty and non-zero scalar, so it is always \"true\" and the return value of <code>grep</code> is always every element in the list. I suspect you want something like</p>\n\n<pre><code>if (grep / $val $instance/, @soc_data) { ... }\n</code></pre>\n\n<p>or if <code>$val</code> and <code>$instance</code> might have regexp metacharacters,</p>\n\n<pre><code>if (grep / \\Q$val\\E \\Q$instance\\E/, @soc_data) { ... }\n</code></pre>\n\n<p>(I don't really know what you mean by \"toggling\", so I probably haven't properly addressed that part of your question)</p>\n"}], "owner": {"reputation": 11, "user_id": 10065156, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kJPvPDixrwg/AAAAAAAAAAI/AAAAAAAABoM/HBHoVplRV1k/photo.jpg?sz=128", "display_name": "Chaitanyh Singh", "link": "https://stackoverflow.com/users/10065156/chaitanyh-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1531324017, "creation_date": 1531315873, "last_edit_date": 1531316858, "question_id": 51286781, "link": "https://stackoverflow.com/questions/51286781/how-to-grep-a-pattern-for-each-and-every-element-of-an-array", "title": "How to grep a pattern for each and every element of an array", "body": "<p>I have buffered a complete file in an array soc_data(@soc_data).Now i am trying to grep a pattern in each and every line of the file or we can say each and every element of the array .</p>\n\n<p>i have used this .But this is not working properly and flag is always 1 , but it should toggle as the pattern is not present in every line but only in few lines.</p>\n\n<pre><code>my $flag = 0 ;\nif(grep(\"  \".$val.\" \".$instance, @soc_data)){\n  $flag = 1 ;\n}\nelse {\n $flag = 0 ;\n}\n</code></pre>\n\n<p>Please suggest the way to do it and the mistake that i am doing here .</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1531309195, "post_id": 51283761, "comment_id": 89546254, "body": "What have you tried? What problems are you having? Please show us your code."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1531382377, "post_id": 51283761, "comment_id": 89577259, "body": "See also <a href=\"https://metacpan.org/pod/Number::Bytes::Human\" rel=\"nofollow noreferrer\"><code>Number::Bytes::Human</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1531320815, "creation_date": 1531320815, "answer_id": 51288596, "question_id": 51283761, "link": "https://stackoverflow.com/questions/51283761/convert-kb-mb-gb-tb-into-kb-using-perl/51288596#51288596", "title": "Convert KB, MB, GB, TB into KB using PERL", "body": "\n\n<p>I would build a hash of multipliers for each factor and use it in a regex substitution</p>\n\n<p>The following starts with a multiple of 1 for Kilobytes and increases it my a factor of 1024 == 2<sup>10</sup> for each subsequent factor. You can change 1024 to 1000 == 10<sup>3</sup> if that's what you prefer</p>\n\n<p>The substitution simply looks for a sequence of digits and decimal points followed by one of the eligible factor letters, does the multiplication and replaces the letter with <code>K</code></p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy %factors;\n{\n    my $f = 1;\n\n    for my $c ( qw/ K M G T P E / ) {\n        $factors{$c} = $f;\n        $f *= 1024;\n    }\n}\n\nmy $s = '323.2T, 123.23G, 1.011T, 2.42M';\n\n$s =~ s/([\\d.]+)([KMGTPE])/$1 * $factors{$2} . 'K'/eg;\n\nsay $s;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>347033357516.8K, 129216020.48K, 1085552984.064K, 2478.08K\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7997817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7beaeada5c15994a060855cf2c57043?s=128&d=identicon&r=PG&f=1", "display_name": "Madhanika", "link": "https://stackoverflow.com/users/7997817/madhanika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1531412866, "creation_date": 1531306700, "last_edit_date": 1531412225, "question_id": 51283761, "link": "https://stackoverflow.com/questions/51283761/convert-kb-mb-gb-tb-into-kb-using-perl", "title": "Convert KB, MB, GB, TB into KB using PERL", "body": "<p>I have the size of disk value as below.</p>\n\n<pre><code>323.2T, 123.23G, 1.011T, 2.42M.\n</code></pre>\n\n<p>How to convert all these into KB in Perl</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "edited": false, "score": 0, "creation_date": 1531305676, "post_id": 51282927, "comment_id": 89543989, "body": "Is the data stored as &#39;seen here&#39; (one line) or is supposed to be EOL separated?"}, {"owner": {"reputation": 31, "user_id": 9327919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a67baf89a126c88caaee3d74056fa88?s=128&d=identicon&r=PG&f=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/9327919/dev"}, "reply_to_user": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "edited": false, "score": 0, "creation_date": 1531306031, "post_id": 51282927, "comment_id": 89544224, "body": "It is like in a table with two cloumns"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531306631, "post_id": 51282927, "comment_id": 89544627, "body": "Can you please <a href=\"https://stackoverflow.com/posts/51282927/edit\">edit your question</a> so we can actually see the formatting of your input data."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531306762, "post_id": 51282927, "comment_id": 89544711, "body": "Don&#39;t worry, I&#39;ve done it for you. Now please show us exactly what output you want."}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 1, "creation_date": 1531306871, "post_id": 51282927, "comment_id": 89544798, "body": "What have you tried so far? Post your code! What happens when you run it? What did you expect to happen instead? What are you exactly having problems with?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531306892, "post_id": 51282927, "comment_id": 89544815, "body": "It would also help to know which Excel reading module you are using."}, {"owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "edited": false, "score": 0, "creation_date": 1531318704, "post_id": 51282927, "comment_id": 89553325, "body": "Please, could you edit your answer and add the following information: Is the input file plain text one? If so, could you upload it somewhere? or at least part of the data? If It is not a plain text file, what kind is it?  Also, you may add your original script to the answer."}], "answers": [{"comments": [{"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 1, "creation_date": 1531306939, "post_id": 51283728, "comment_id": 89544855, "body": "You could explain your answer instead of just dumping in the code. That way others can learn from it, rather than just copying &amp; pasting."}, {"owner": {"reputation": 31, "user_id": 9327919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a67baf89a126c88caaee3d74056fa88?s=128&d=identicon&r=PG&f=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/9327919/dev"}, "edited": false, "score": 0, "creation_date": 1531308314, "post_id": 51283728, "comment_id": 89545694, "body": "Thanks for you help. My data looks like below       STATUS, ID  Pending ,123  Completed ,456  Expired ,789  Completed ,987  Open, 654  Closed ,321  Completed ,159  Rejected ,753  ie, $input  has the above data"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 31, "user_id": 9327919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a67baf89a126c88caaee3d74056fa88?s=128&d=identicon&r=PG&f=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/9327919/dev"}, "edited": false, "score": 1, "creation_date": 1531309151, "post_id": 51283728, "comment_id": 89546218, "body": "@Dev: Dumping your data in a comment like that isn&#39;t really very helpful, I&#39;m afraid :-)"}, {"owner": {"reputation": 31, "user_id": 9327919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a67baf89a126c88caaee3d74056fa88?s=128&d=identicon&r=PG&f=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/9327919/dev"}, "edited": false, "score": 0, "creation_date": 1531309222, "post_id": 51283728, "comment_id": 89546275, "body": "Below is the code I tried to print the data from excel file  use strict; use warnings; use 5.010;  my($input, $line);  if(@ARGV!=1){ print \\nUsage: &lt;Nmae.pl&gt; &lt;Inputfile Name&gt;  $input = shift(@ARGV);  open(IN_FILE , &quot;&lt;$input&quot;) or die (&quot;Error opening file $input&quot;)  while(IN_FILE){ $line = $_; chomp($line); $line =~ s/ //g; say $line }  output:  STATUS, ID Pending ,123 Completed ,456 Expired ,789 Completed ,987 Open, 654 Closed ,321 Completed ,159 Rejected ,753  I want only below to be printed  456 987 159"}, {"owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "edited": false, "score": 0, "creation_date": 1531309561, "post_id": 51283728, "comment_id": 89546543, "body": "Just don&#39;t chomp the lines and concat all data inside some variable. Then, use that variable as $input of my script. Or chomp the lines, store them on an array and then forget about the split part."}, {"owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "reply_to_user": {"reputation": 31, "user_id": 9327919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a67baf89a126c88caaee3d74056fa88?s=128&d=identicon&r=PG&f=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/9327919/dev"}, "edited": false, "score": 0, "creation_date": 1531311236, "post_id": 51283728, "comment_id": 89547638, "body": "@Dev I changed my answer, now it is based on your script"}, {"owner": {"reputation": 31, "user_id": 9327919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a67baf89a126c88caaee3d74056fa88?s=128&d=identicon&r=PG&f=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/9327919/dev"}, "edited": false, "score": 0, "creation_date": 1531313632, "post_id": 51283728, "comment_id": 89549399, "body": "@Julio, I&#39;m not getting any output for the above script."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 31, "user_id": 9327919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a67baf89a126c88caaee3d74056fa88?s=128&d=identicon&r=PG&f=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/9327919/dev"}, "edited": false, "score": 1, "creation_date": 1531313974, "post_id": 51283728, "comment_id": 89549639, "body": "@Dev: Dumping your code in a comment is even less helpful than dumping your data there :-) Please edit your question to add your code."}, {"owner": {"reputation": 31, "user_id": 9327919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a67baf89a126c88caaee3d74056fa88?s=128&d=identicon&r=PG&f=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/9327919/dev"}, "edited": false, "score": 0, "creation_date": 1531317302, "post_id": 51283728, "comment_id": 89552197, "body": "@julio, I have updated the question for more understanding. please check"}, {"owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "reply_to_user": {"reputation": 31, "user_id": 9327919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a67baf89a126c88caaee3d74056fa88?s=128&d=identicon&r=PG&f=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/9327919/dev"}, "edited": false, "score": 0, "creation_date": 1531467895, "post_id": 51283728, "comment_id": 89615784, "body": "Hi @Dev, I believe that now it should work. I guess that your file is using MAC line endings. Try with my updated answer."}], "tags": [], "owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "is_accepted": false, "score": -1, "last_activity_date": 1531467826, "last_edit_date": 1531467826, "creation_date": 1531306599, "answer_id": 51283728, "question_id": 51282927, "link": "https://stackoverflow.com/questions/51282927/excel-column-filer-using-perl/51283728#51283728", "title": "Excel column filer using Perl", "body": "<p>I modified your script. It seems that you are loading plain text file, not an excel one.</p>\n\n<p>This should work:</p>\n\n<pre><code>use strict;\nuse warnings;\n\n@ARGV or die \"\\nUsage: &lt;Nmae.pl&gt; &lt;Inputfile Name&gt;;\";\n\nmy $input = shift;\nopen my $fh, '&lt;', $input\n  or die \"Error opening file $input; $!\";\n\nlocal $/ = \"\\r\";\nmy @lines;\nwhile (my $line = &lt;$fh&gt;) {\n  # If the line is: Begins with none or more spaces,\n  # \"Completed\" word, none or more spaces, digits\n  # then print captured digits\n  $line =~ m{ ^ \\s* Completed \\s+ (\\d+) }sxmi\n    and print $1 . \"\\n\"; # $1 stores first capturing group ()\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>D:\\Temp&gt;type aaa.txt\nSTATUS     ID\nPending     123\nCompleted   456\nExpired      789\nCompleted   987\nOpen           654\nClosed        321\nCompleted   159\nRejected    753\n\nD:\\Temp&gt;Nmae.pl aaa.txt\n456\n987\n159\n</code></pre>\n\n<p>Edit: Changed answer based on @DEV original script</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1531384139, "creation_date": 1531384139, "answer_id": 51300746, "question_id": 51282927, "link": "https://stackoverflow.com/questions/51282927/excel-column-filer-using-perl/51300746#51300746", "title": "Excel column filer using Perl", "body": "<p>I've extracted your code from the comment where you dumped it. Please put it in your question (where it is readable!) in the future. But the code you have given us doesn't compile. I had to make a few fixes before I could even run it. Please don't waste our time by giving us broken code to look at!</p>\n\n<p>Here's your existing code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nmy($input, $line);\n\nif(@ARGV!=1){\n  # I've added missing quote marks and a closing semicolon here\n  print \"\\nUsage: &lt;Nmae.pl&gt; &lt;Inputfile Name&gt;\";\n} # I've added what seems to be a missing close brace here\n\n$input = shift(@ARGV);\n# I've added a missing semi-colon here.\nopen(IN_FILE , \"&lt;$input\") or die (\"Error opening file $input\");\n\nwhile(&lt;IN_FILE&gt;){ # Added missing file input operator around file handle\n  $line = $_;\n  chomp($line);\n  $line =~ s/ //g;\n  say $line; # Added missing comma\n}\n</code></pre>\n\n<p>This code is clearly written to process a text file. So I'm not sure why you've mentioned Excel in your question. But I've assumed that your code is more correct than your question and have read the data from a text file.</p>\n\n<p>So here's how I've rewritten it to do what you asked for:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\n# Errors should go to STDERR, not STDOUT. Also kill the process\n# if we have no input. Hence \"die\", not \"print\".\ndie \"Usage: &lt;Nmae.pl&gt; &lt;Inputfile Name&gt;\\n\" unless @ARGV;\n\n# Place to store data we're interested in\nmy @matches;\n\n# Use empty file input operator to read from files named in @ARGV\n# without having to open them.\nwhile (&lt;&gt;) {\n  # Look for lines containing \"Completed\" and capture the\n  # following digits\n  if (/Completed\\s+(\\d+)) {\n    # Matched digits will be in $1\n    push @matches, $1;\n  }\n}\n\n# Print the matches\nsay \"@matches\";\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9327919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a67baf89a126c88caaee3d74056fa88?s=128&d=identicon&r=PG&f=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/9327919/dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1531467826, "creation_date": 1531304307, "last_edit_date": 1531323360, "question_id": 51282927, "link": "https://stackoverflow.com/questions/51282927/excel-column-filer-using-perl", "title": "Excel column filer using Perl", "body": "<p>I've a .csv file which has the below data</p>\n\n<pre><code>   COLUMN 1       COLUMN 2\n      STATUS        ID\n      Pending       123\n       Completed    456\n      Expired       789\n       Completed    987\n        Open        654\n        Closed      321\n        Completed   159\n         Rejected   753\n</code></pre>\n\n<p>The perl script should get the file name from the command line and 1st column ie 'STATUS' should be filtered out for all 'Completed' and should print the values in the 2nd column ie, from ID's column.</p>\n\n<p>output should be like:</p>\n\n<p>456\n987\n159</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1531297699, "post_id": 51280436, "comment_id": 89538664, "body": "How&#39;s the second solution from <a href=\"https://stackoverflow.com/a/50962511/4653379\">that answer</a> ? It&#39;s cleaner and simpler anyway (I think)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1531298025, "post_id": 51280436, "comment_id": 89538892, "body": "@zdim it is indeed.. but doing <code>dd \\@if_sections;</code> prints the data in square brackets and I cannot figure out how to split the data out later."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1531298203, "post_id": 51280436, "comment_id": 89538991, "body": "oh .. sorry for not explaining it. The <code>dd \\@if_sections</code> is for convenience, to show it easily.  The <code>@if_sections</code> array has array references for elements, each having lines for an interface. So <code>@{$if_sections[0]}</code> are lines of the first interface etc."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1531299261, "post_id": 51280436, "comment_id": 89539691, "body": "@zdim ah... ok, so I can just grep the number of lines and then do? <code>for my $i (0..$#idx) { print @{$if_sections[$i]} }</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1531302257, "post_id": 51280436, "comment_id": 89541833, "body": "For instance, and then there are easier ways as well.  I edited that answer, I hope it&#39;s clearer now.  Please let me know if not, or if more comes up."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1531303374, "post_id": 51280436, "comment_id": 89542536, "body": "perfect, thanks a mill @zdim"}], "answers": [{"tags": [], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "is_accepted": true, "score": 0, "last_activity_date": 1531301445, "creation_date": 1531301445, "answer_id": 51281955, "question_id": 51280436, "link": "https://stackoverflow.com/questions/51280436/find-a-match-and-copy-lines-after-in-perl/51281955#51281955", "title": "find a match and copy lines after in perl", "body": "<pre><code>use strict; use warnings;\n\nmy $interface_line;\nwhile(&lt;DATA&gt;) {\n  if( /^interface/ ) { # start of new interface-section\n    $interface_line = 1;\n  }elsif( $interface_line &amp;&amp; /^[ \\t]/ ) { # interface-section followup\n    $interface_line++;\n  }elsif( $interface_line ) { # end of interface-section \n    $interface_line = undef;\n  }\n\n  if( $interface_line ) {\n     print \"Interface:\\n\" if $interface_line == 1;\n     print \"$interface_line: $_\";\n  }\n}\n\n__DATA__\ninterface 123\n item1\n item2\n item3\ninterface 456\n item5\n item6\n item7\ncard 477\n something foo\n somethig bar\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 51281955, "answer_count": 1, "score": 0, "last_activity_date": 1531301445, "creation_date": 1531296897, "question_id": 51280436, "link": "https://stackoverflow.com/questions/51280436/find-a-match-and-copy-lines-after-in-perl", "title": "find a match and copy lines after in perl", "body": "<p>I have the following data..</p>\n\n<pre><code>interface 123\n item1\n item2\n item3\ninterface 456\n item5\n item6\n item7\ncard 477\n something foo\n somethig bar\n</code></pre>\n\n<p>Each interface starts at the very beginning of the line, where the detail of each interface has a space before the actual item. This is the only thing that can distinguish when the config detail of a ended.</p>\n\n<p>I need to search each interface, and copy it and it's detail until the next line that does not start with a space.</p>\n\n<p>So I would need to separate each interface with it's content detail, but not card. I was helped in a previous question with this, but the 2 loops are throwing me out and I would want to run 1 loop only as I do alot more later like deduplication, so 2 loops are becoming very confusing me.</p>\n\n<pre><code>my @idx = grep { $lines[$_] =~ /^interface/ } 0..$#lines;\n\nfor my $i (0..$#idx-1) {\nsay \"Interface:\";\nsay \"\\t$_\" for @lines[$idx[$i]..$idx[$i+1]-1];\n}\n\n# The last interface section stops at the first unindented line\nsay \"Interface:\";\nfor my $i ($idx[-1] .. $#lines) {\n    last if $lines[$i] =~ /^\\S/ and $lines[$i] !~ /^interface/;\n    say \"\\t$lines[$i]\";\n}\n</code></pre>\n\n<p>Can someone kindly help me do the same thing in a single loop?</p>\n"}, {"tags": ["perl", "log4perl"], "answers": [{"tags": [], "owner": {"reputation": 2450, "user_id": 1186729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec301bbe6bfd4c849a29d715f6094745?s=128&d=identicon&r=PG", "display_name": "Denis Ibaev", "link": "https://stackoverflow.com/users/1186729/denis-ibaev"}, "is_accepted": false, "score": 2, "last_activity_date": 1531300314, "creation_date": 1531300314, "answer_id": 51281586, "question_id": 51280432, "link": "https://stackoverflow.com/questions/51280432/how-to-get-appender-file-name-using-logger-object/51281586#51281586", "title": "How to get appender file name using logger object?", "body": "<p><code>appender_by_name()</code> is the method in <code>Log::Log4perl</code> class. So you need to use it as:</p>\n\n<pre><code>Log::Log4perl-&gt;appender_by_name('LOG1')\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8757355"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1531300314, "creation_date": 1531296892, "question_id": 51280432, "link": "https://stackoverflow.com/questions/51280432/how-to-get-appender-file-name-using-logger-object", "title": "How to get appender file name using logger object?", "body": "<p>I want to get appender file name using logger object.</p>\n\n<pre><code>my $log_conf = {\n   'log4perl.rootLogger'             =&gt; \"DEBUG, LOG1, SCREEN\",\n   'log4perl.appender.SCREEN'        =&gt; \"Log::Log4perl::Appender::Screen\",\n   'log4perl.appender.SCREEN.stderr' =&gt; \"0\",\n   'log4perl.appender.SCREEN.layout' =&gt; \"Log::Log4perl::Layout::PatternLayout\",\n   'log4perl.appender.SCREEN.layout.ConversionPattern' =&gt;\n     \"autom:%d{yyyy_MMM_d H:m:s}_\" . get_ip_address() . \"_%C::: %m %n\",\n   'log4perl.appender.LOG1'          =&gt; \"Log::Log4perl::Appender::File\",\n   'log4perl.appender.LOG1.filename' =&gt; file_path($file_name, $path),\n   #'log4perl.appender.LOG1.mode'                        =&gt; \"append\",\n   'log4perl.appender.LOG1.layout' =&gt; \"Log::Log4perl::Layout::PatternLayout\",\n   'log4perl.appender.LOG1.layout.ConversionPattern' =&gt;\n     \"autom:%d{yyyy_MMM_d H:m:s}_%C::: %m %n\"\n};\nLog::Log4perl-&gt;init($log_conf);\nmy $logger = Log::Log4perl-&gt;get_logger($file_name);\n</code></pre>\n\n<p>I went over <a href=\"https://metacpan.org/pod/Log::Log4perl#Access-defined-appenders\" rel=\"nofollow noreferrer\">doc</a> and it says that I can access appenders using <code>appender_by_name()</code> class method.</p>\n\n<p>I tried to access it using the command <code>$logger-&gt;appender_by_name()</code>, but it is returning me following error:</p>\n\n<blockquote>\n  <p>Can't locate object method \"appender_by_name\" via package \"Log::Log4perl::Logger\"</p>\n</blockquote>\n\n<pre><code>Perl Version: 5.22\nLog::Log4perl Version: 1.48\n</code></pre>\n\n<p>Following is the dump of my logger object:</p>\n\n<pre><code>$VAR1 = bless( {\n                 'TRACE' =&gt; sub { \"DUMMY\" },\n                 'DEBUG' =&gt; sub { \"DUMMY\" },\n                 'FATAL' =&gt; $VAR1-&gt;{'DEBUG'},\n                 'additivity' =&gt; 1,\n                 'level' =&gt; undef,\n                 'layout' =&gt; undef,\n                 'appender_names' =&gt; [],\n                 'OFF' =&gt; $VAR1-&gt;{'DEBUG'},\n                 'is_WARN' =&gt; sub { \"DUMMY\" },\n                 'is_TRACE' =&gt; sub { \"DUMMY\" },\n                 'is_OFF' =&gt; sub { \"DUMMY\" },\n                 'is_DEBUG' =&gt; sub { \"DUMMY\" },\n                 'ERROR' =&gt; $VAR1-&gt;{'DEBUG'},\n                 'is_INFO' =&gt; sub { \"DUMMY\" },\n                 'is_ERROR' =&gt; sub { \"DUMMY\" },\n                 'is_ALL' =&gt; sub { \"DUMMY\" },\n                 'WARN' =&gt; $VAR1-&gt;{'DEBUG'},\n                 'INFO' =&gt; $VAR1-&gt;{'DEBUG'},\n                 'num_appenders' =&gt; 0,\n                 'is_FATAL' =&gt; sub { \"DUMMY\" },\n                 'category' =&gt; 'autom_controller.log',\n                 'ALL' =&gt; $VAR1-&gt;{'TRACE'}\n               }, 'Log::Log4perl::Logger' );\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1531297921, "post_id": 51280381, "comment_id": 89538821, "body": "Don&#39;t use comma between prints (<code>say &quot;hi&quot;, say &quot;ho&quot;;</code>), but write them as separate statements, <code>say &quot;hi&quot;; say &quot;ho&quot;;</code>. The prints are coming out in reversed order and you&#39;re getting an extra <code>1</code> printed, too."}, {"owner": {"reputation": 31, "user_id": 9993697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6431eb7199f06264f3daa65b256751a?s=128&d=identicon&r=PG&f=1", "display_name": "Riju Mukherjee", "link": "https://stackoverflow.com/users/9993697/riju-mukherjee"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1531298268, "post_id": 51280381, "comment_id": 89539030, "body": "if i am using ; like say $out &#39; &#39; x $pad_length, $write;        say $out &#39; &#39; x $fs_headerrecord_cut_casettenumber_pad_len, substr($_, $fs_headerrecord_batch_casettenumber_start_pos, $fs_hea derrecord_batch_casettenumber_data_len);  Then 1 is not getting printed but &quot;H&quot; is on another line"}, {"owner": {"reputation": 31, "user_id": 9993697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6431eb7199f06264f3daa65b256751a?s=128&d=identicon&r=PG&f=1", "display_name": "Riju Mukherjee", "link": "https://stackoverflow.com/users/9993697/riju-mukherjee"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1531298293, "post_id": 51280381, "comment_id": 89539049, "body": "I want like the expected output which i have shown above"}, {"owner": {"reputation": 31, "user_id": 9993697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6431eb7199f06264f3daa65b256751a?s=128&d=identicon&r=PG&f=1", "display_name": "Riju Mukherjee", "link": "https://stackoverflow.com/users/9993697/riju-mukherjee"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1531303610, "post_id": 51280381, "comment_id": 89542681, "body": "Ignore the above comment. This is now resolved"}, {"owner": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "edited": false, "score": 1, "creation_date": 1531303678, "post_id": 51280381, "comment_id": 89542724, "body": "<code>say &quot;blah&quot;</code> is the equivalent of <code>print &quot;blah\\n&quot;</code> - in other words, it adds a new line to the end of whatever you&#39;re <code>say</code>-ing."}], "answers": [{"tags": [], "owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "is_accepted": false, "score": 2, "last_activity_date": 1531304223, "creation_date": 1531304223, "answer_id": 51282897, "question_id": 51280381, "link": "https://stackoverflow.com/questions/51280381/say-feature-in-perl/51282897#51282897", "title": "Say feature in Perl", "body": "<p>You are using 2 says, so you will print 2 newlines.</p>\n\n<p>See: print vs say:</p>\n\n<p><a href=\"https://perldoc.perl.org/functions/print.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/functions/print.html</a></p>\n\n<p><a href=\"https://perldoc.perl.org/functions/say.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/functions/say.html</a></p>\n\n<p>Also, you are printing an extra \"1\" because you are printing the return value of the second say as a parameter to the first say.</p>\n\n<p>Try replacing this:</p>\n\n<pre><code>say $out ' ' x $pad_length, 'H', substr($_,0,1), say $out ' ' x $fs_headerrecord_cut_casettenumber_pad_len, substr($_, $fs_headerrecord_batch_casettenumber_start_pos, $fs_headerrecord_batch_casettenumber_data_len);                \n</code></pre>\n\n<p>with this:</p>\n\n<pre><code>print $out ' ' x $pad_length, 'H', substr($_,0,1);\nsay $out ' ' x $fs_headerrecord_cut_casettenumber_pad_len, substr($_, $fs_headerrecord_batch_casettenumber_start_pos, $fs_headerrecord_batch_casettenumber_data_len);\n</code></pre>\n\n<p>or send all data to the same say statement:</p>\n\n<pre><code>say $out \n    ' ' x $pad_length, 'H', \n    substr($_,0,1),\n    $out ' ' x $fs_headerrecord_cut_casettenumber_pad_len, \n    substr($_, $fs_headerrecord_batch_casettenumber_start_pos, $fs_headerrecord_batch_casettenumber_data_len);\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9993697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6431eb7199f06264f3daa65b256751a?s=128&d=identicon&r=PG&f=1", "display_name": "Riju Mukherjee", "link": "https://stackoverflow.com/users/9993697/riju-mukherjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531304223, "creation_date": 1531296704, "last_edit_date": 1531303134, "question_id": 51280381, "link": "https://stackoverflow.com/questions/51280381/say-feature-in-perl", "title": "Say feature in Perl", "body": "<p>I Have a below Perl code</p>\n\n<pre><code>$fs_headerrecord_cut_casettenumber_pad_len = 2;\n$fs_headerrecord_batch_casettenumber_start_pos = 21;\n$fs_headerrecord_batch_casettenumber_data_len = 2;\n$fs_header_record = 1;\n$pad_length = 0;\nmy $dir = \".\";\nopendir(DIR, $dir) or die \"Cannot open directory: $dir!\\n\";\nmy @files = readdir(DIR);\nclosedir(DIR);\n\nopen my $out, \"&gt;&gt;output.txt\" or die \"Cannot open cutfile!\\n\";\nforeach my $file (@files) {\n\n    #next unless (-M $file &lt;= 1 &amp;&amp; $file =~ /^fs.*\\.DTA$/i) ;\n    if (-M $file &lt;= 1 &amp;&amp; $file =~ /^fs.*\\.DTA$/i) {\n        #print log_date() .\"$file\\n\";\n        print \"$file\\n\";\n        open my $fs_in, \"&lt;$file\" or die \"Cannot open $file!\\n\";\n        while (&lt;$fs_in&gt;) {\n            $recordlength = substr($_,220,1);\n            if ($recordlength == $fs_header_record) {\n                say $out ' ' x $pad_length, 'H', substr($_,0,1), say $out ' ' x $fs_headerrecord_cut_casettenumber_pad_len, substr($_, $fs_headerrecord_batch_casettenumber_start_pos, $fs_headerrecord_batch_casettenumber_data_len);\n</code></pre>\n\n<p>I want to write \"H\" before casettenumber. The output which i am getting is below</p>\n\n<pre><code>OUTPUT\n\n\n\n14\nH 1\n  14\nH 1\n  14\nH 1\n  14\nH 1\n  14\nH 1\n  14\n</code></pre>\n\n<p>Expected Output</p>\n\n<pre><code>H 14\nH 14\nH 14\nH 14\nH 14\n</code></pre>\n\n<p>When i am printing \"H\" it is getting printed in a new line. Can anybody please tell me what is wrong in my code?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531309295, "post_id": 51279760, "comment_id": 89546327, "body": "@Borodin I prefer TIMTOWTDI over TMTOWTDI, as in &quot;T<b>i</b>m Toady&quot;. The two are basically equivalent so there&#39;s no need to &quot;fix&quot; it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531313469, "post_id": 51279760, "comment_id": 89549280, "body": "@haukex: As you wish. I have seen the alternative spelling creep in over the last twenty years, and assumed that it was a back-derivation from the phrase <i>tim-toady</i> where the author hadn&#39;t seen the acronym in print. But if you have a preference for the variation then you are just as welcome to use it you are to spell the language <i>Pearl</i>."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531315462, "post_id": 51279760, "comment_id": 89550761, "body": "@Borodin So you&#39;re saying that using TIMTOWTDI instead of TMTOWTDI is on the same level as spelling the language &quot;Pearl&quot;? That&#39;s not very Perlish of you (and kind of ironic), since there <i>is</i> more than one way to do it \ud83d\ude1c"}, {"owner": {"reputation": 11, "user_id": 8319907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/229f429a223e51e38d17f5879acfca0a?s=128&d=identicon&r=PG&f=1", "display_name": "seedof", "link": "https://stackoverflow.com/users/8319907/seedof"}, "edited": false, "score": 0, "creation_date": 1531399374, "post_id": 51279760, "comment_id": 89588525, "body": "@haukex: May I ask one more question ?  Acutally I would like to go thought every files in the main  and  then go thought every line of the open file in the subroutine.  Because I need to do multiple match_replace in same file thus I have multiple subroutines. In that case , what variable I should pass from main to subroutine?  I should do $line = &lt;$fh&gt;  in the main or in the subroutines ?"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 11, "user_id": 8319907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/229f429a223e51e38d17f5879acfca0a?s=128&d=identicon&r=PG&f=1", "display_name": "seedof", "link": "https://stackoverflow.com/users/8319907/seedof"}, "edited": false, "score": 0, "creation_date": 1531471076, "post_id": 51279760, "comment_id": 89617433, "body": "@seedof I&#39;m a little unclear on what exactly you want to do with multiple matches, perhaps it would be best to explain (with code) in a new question. But in general: Yes, you can pass <code>$fh</code> around like a normal variable (because it is a normal variable), and if you want to do <code>&lt;$fh&gt;</code> in the <code>sub</code> that&#39;s fine too - but if you have multiple <code>sub</code>s, I would recommend against doing <code>&lt;$fh&gt;</code> in multiple places, that&#39;s something that will usually make code much more complicated than it needs to be."}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": true, "score": 1, "last_activity_date": 1531309135, "last_edit_date": 1531309135, "creation_date": 1531294719, "answer_id": 51279760, "question_id": 51277798, "link": "https://stackoverflow.com/questions/51277798/perl-find-a-match-and-read-next-line-in-perl/51279760#51279760", "title": "Perl, find a match and read next line in perl", "body": "<p>I would recommend a thorough read of <a href=\"http://perldoc.perl.org/perlintro.html\" rel=\"nofollow noreferrer\"><code>perlintro</code></a> - it will give you a lot of the information you need. Additional comments:</p>\n\n<ol>\n<li><p>Always use <a href=\"http://perldoc.perl.org/strict.html\" rel=\"nofollow noreferrer\"><code>strict</code></a> and <a href=\"http://perldoc.perl.org/warnings.html\" rel=\"nofollow noreferrer\"><code>warnings</code></a>. The first will enforce some good coding practices (like for example declaring variables), the second will inform you about potential mistakes. For example, one warning produced by the code you showed would be <code>readline() on unopened filehandle F</code>, giving you the hint that <code>F</code> is not open at that point (more on that below).</p></li>\n<li><p><code>@list = &lt;@ARGV&gt;;</code>: This is a bit tricky, I wouldn't recommend it - you're essentially using <a href=\"http://perldoc.perl.org/functions/glob.html\" rel=\"nofollow noreferrer\"><code>glob</code></a>, and expanding <code>targetfolder/*</code> is something your shell should be doing, and if you're on Windows, I'd recommend <a href=\"https://metacpan.org/pod/Win32::Autoglob\" rel=\"nofollow noreferrer\"><code>Win32::Autoglob</code></a> instead of doing it manually.</p></li>\n<li><p><code>foreach ... { open ... }</code>: You're not doing anything with the files once you've opened them - the loop to read from the files needs to be inside the <code>foreach</code>.</p></li>\n<li><p><em>\"Is the whole file or only 1st line  is loaded?\"</em> <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\"><code>open</code></a> doesn't read anything from the file, it just opens it and provides a <em>filehandle</em> (which you've named <code>F</code>) that you then need to read from.</p></li>\n<li><p>I'd strongly recommend you use the more modern three-argument form of <code>open</code> and check it for errors, as well as use lexical filehandles since their scope is not global, as in <code>open my $fh, '&lt;', $file or die \"$file: $!\";</code>.</p></li>\n<li><p><em>\"is this correct to judge if there is still file to load?\"</em> Yes, <code>while (&lt;$filehandle&gt;)</code> is a good way to read a file line-by-line, and the loop will end when everything has been read from the file. You may want to use the more explicit form <code>while (my $line = &lt;$filehandle&gt;)</code>, so that your variable has a name, instead of the default <a href=\"http://perldoc.perl.org/perlvar.html#$_\" rel=\"nofollow noreferrer\"><code>$_</code></a> variable - it does make the code a bit more verbose, but if you're just starting out that may be a good thing.</p></li>\n<li><p><code>match_replace()</code>: You're not passing any parameters to the <code>sub</code>. Even though this code might still \"work\", it's passing the current line to the <code>sub</code> through the global <code>$_</code> variable, which is not a good practice because it will be confusing and error-prone once the script starts getting longer.</p></li>\n<li><p><code>if (/^\\sName\\s+/){$name = $1;}</code>: Since you've named the <code>sub</code> <code>match_replace</code>, I'm guessing you want to do a search-and-replace operation. In Perl, that's called <code>s/search/replacement/</code>, and you can read about it in <a href=\"http://perldoc.perl.org/perlrequick.html\" rel=\"nofollow noreferrer\"><code>perlrequick</code></a> and <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\"><code>perlretut</code></a>. As for the code you've shown, you're using <code>$1</code>, but you don't have any \"capture groups\" (<code>(...)</code>) in your regular expression - you can read about that in those two links as well.</p></li>\n<li><p><em>\"if I want to read the 5th line in downward , how to do that ?\"</em> As always in Perl, There Is More Than One Way To Do It (TIMTOWTDI). One way is with the <a href=\"http://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow noreferrer\">range operator <code>..</code></a> - you can skip the first through fourth lines by saying <code>next if 1..4;</code> at the beginning of the while loop, this will test those line numbers against the special <a href=\"http://perldoc.perl.org/perlvar.html#$.\" rel=\"nofollow noreferrer\"><code>$.</code></a> variable that keeps track of the most recently read line number.</p></li>\n<li><p><em>\"and if I would like to read multi lines in multi array[row], how to do that ?\"</em> One way is to use <a href=\"http://perldoc.perl.org/functions/push.html\" rel=\"nofollow noreferrer\"><code>push</code></a> to add the current line to the end of an array. Since keeping the lines of a file in an array can use up more memory, especially with large files, I'd strongly recommend making sure you think through the algorithm you want to use here. You haven't explained <em>why</em> you would want to keep things in an array, so I can't be more specific here.</p></li>\n</ol>\n\n<p>So, having said all that, here's how I might have written that code. I've added some debugging code using <a href=\"http://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\"><code>Data::Dumper</code></a> - it's always helpful to see the data that your script is working with.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse warnings;\nuse strict;\nuse Data::Dumper; # for debugging\n$Data::Dumper::Useqq=1;\n\nfor my $file (@ARGV) {\n    print Dumper($file);  # debug\n    open my $fh, '&lt;', $file or die \"$file: $!\";\n    while (my $line = &lt;$fh&gt;) {\n        next if 1..4;\n        chomp($line);  # remove line ending\n        match_replace($line);\n    }\n    close $fh;\n}\n\nsub match_replace {\n    my ($line) = @_;  # get argument(s) to sub\n    my $name;\n    if ( $line =~ /^\\sName\\s+(.*)$/ ) {\n        $name = $1;\n    }\n    print Data::Dumper-&gt;Dump([$line,$name],['line','name']);  # debug\n    # ... do more here ...\n}\n</code></pre>\n\n<p>The above code is explicitly looping over <a href=\"http://perldoc.perl.org/perlvar.html#@ARGV\" rel=\"nofollow noreferrer\"><code>@ARGV</code></a> and opening each file, and I did say above that more verbose code can be helpful in understanding what's going on. I just wanted to point out a nice feature of Perl, the \"magic\" <code>&lt;&gt;</code> operator (discussed in <a href=\"http://perldoc.perl.org/perlop.html#I/O-Operators\" rel=\"nofollow noreferrer\"><code>perlop</code> under \"I/O Operators\"</a>), which will automatically open the files in <code>@ARGV</code> and read lines from them. (There's just one small thing, if I want to use the <code>$.</code> variable and have it count the lines per file, I need to use the <code>continue</code> block I've shown below, this is explained in <a href=\"http://perldoc.perl.org/functions/eof.html\" rel=\"nofollow noreferrer\"><code>eof</code></a>.) This would be a more \"idiomatic\" way of writing that first loop:</p>\n\n<pre><code>while (&lt;&gt;) {  # reads line into $_\n    next if 1..4;\n    chomp;    # automatically uses $_ variable\n    match_replace($_);\n} continue { close ARGV if eof }  # needed for $. (and range operator)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8319907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/229f429a223e51e38d17f5879acfca0a?s=128&d=identicon&r=PG&f=1", "display_name": "seedof", "link": "https://stackoverflow.com/users/8319907/seedof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "accepted_answer_id": 51279760, "answer_count": 1, "score": 0, "last_activity_date": 1531320590, "creation_date": 1531286709, "last_edit_date": 1592644375, "question_id": 51277798, "link": "https://stackoverflow.com/questions/51277798/perl-find-a-match-and-read-next-line-in-perl", "title": "Perl, find a match and read next line in perl", "body": "<p>I would like to use</p>\n<pre><code>myscript.pl targetfolder/*\n</code></pre>\n<p>to read some number from ASCII files.</p>\n<h3>myscript.pl</h3>\n<pre><code>@list = &lt;@ARGV&gt;;\n\n# Is the whole file or only 1st line is loaded?\n\nforeach $file ( @list ) {\n    open (F, $file);\n}\n\n# is this correct to judge if there is still file to load?\n\nwhile ( &lt;F&gt; ) {\n    match_replace()\n}\n\nsub match_replace {\n\n    # if I want to read the 5th line in downward, how to do that?\n    # if I would like to read multi lines in multi array[row],\n    # how to do that?\n\n    if ( /^\\sName\\s+/ ) {\n        $name = $1;\n    }               \n }\n</code></pre>\n"}, {"tags": ["perl", "hash", "reference"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1531263121, "post_id": 51274939, "comment_id": 89528010, "body": "If by &quot;HASH values&quot; you mean references: Yes."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1531263187, "post_id": 51274939, "comment_id": 89528032, "body": "Related: <a href=\"https://p3rl.org/REF\" rel=\"nofollow noreferrer\">p3rl.org/REF</a>"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 5, "creation_date": 1531263646, "post_id": 51274939, "comment_id": 89528127, "body": "You&#39;re mistaken. <code>$hashA{$a}{$b}{$c}{$d}</code> contains 5. <code>$hashA{$a}{$b}{$c}{$d} = $hashB{$a}{$c}{$d}</code> only copies the value 5, not the reference."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1531264577, "post_id": 51274939, "comment_id": 89528318, "body": "<a href=\"https://tio.run/##K0gtyjH9/7@0OFWhuKQoM7nEmgvELk8sysvMSy@25uLKrVTQUEnUUVBJAuJkIE7RVLBVKCzXSFRIUkhWSNG0BitRzUgsznDUUQDTTkBBLhUwq1olsbZaJRmIU2qB@kxhEo4QiSRkSUwd@FSbAyULijLzSrDo01FQislTsub6/x8A\" title=\"Perl 5 \u2013 Try It Online\" rel=\"nofollow noreferrer\">Cannot reproduce.</a> Try writing a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that shows the unexpected behavior."}, {"owner": {"reputation": 11, "user_id": 10061708, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cJ6W5qQKh4g/AAAAAAAAAAI/AAAAAAAAAFg/0vI6cb7o9Vo/photo.jpg?sz=128", "display_name": "Gordon Smith", "link": "https://stackoverflow.com/users/10061708/gordon-smith"}, "edited": false, "score": 0, "creation_date": 1531320393, "post_id": 51274939, "comment_id": 89554651, "body": "Thanks, all.  I determined that I was getting too cute with the hashes."}, {"owner": {"reputation": 11, "user_id": 10061708, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cJ6W5qQKh4g/AAAAAAAAAAI/AAAAAAAAAFg/0vI6cb7o9Vo/photo.jpg?sz=128", "display_name": "Gordon Smith", "link": "https://stackoverflow.com/users/10061708/gordon-smith"}, "edited": false, "score": 0, "creation_date": 1531321228, "post_id": 51274939, "comment_id": 89555255, "body": "Thanks, all.  I determined that I was getting too cute with the hashes.  I created, for lack of a better term, a 4-level hash, where the 4th index was the 3rd value, so $hashA{$a}[$b}{$c}[$d} was $hashA{$a}{$b}{$c}{$hashA{$a}{$b}{$c}}.  I would then create hashB, which had one more level, and assign hashA level 3 to hashB level 4, and hashA level 4 to hashB level 5.  Then, if I changed hashB level 5, it also changed hashA level 4.  If I split hashA into two differently named hashes, one with three levels, one with 4, and the same for hashB (4 and 5), the assignments don&#39;t run over each other."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531264814, "post_id": 51275124, "comment_id": 89528359, "body": "Re &quot;<i>This takes a reference to %hashQ, like a pointer in other languages</i>&quot;, A reference is simply a pointer one can&#39;t modify. Some languages have one, some have the other, and some have both"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531265241, "post_id": 51275124, "comment_id": 89528458, "body": "@ikegami &quot;Can&#39;t modify&quot; in the sense that you can&#39;t scribble arbitrarily over the memory it points to, but Perl references do so much more. There&#39;s memory management via reference counting. Various flags. Size and length tracking. &quot;Magic&quot;. Etc... To a C programmer, Perl references are better described as pointers to fully memory managed and encapsulated structs."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531265829, "post_id": 51275124, "comment_id": 89528569, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/174758/discussion-between-schwern-and-ikegami\">continue this discussion in chat</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1531267564, "post_id": 51275124, "comment_id": 89528858, "body": "I think it&#39;s more accurate to say: &quot;<i>&quot;Can&#39;t modify&quot; in the sense that you can&#39;t scribble arbitrarily over the memory it points to. Forbidding pointers allows Perl to keep track of what memory is being used and automatically free it when its no longer used. This is all done behind the scenes when taking a reference and erasing them</i>&quot;"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 5, "last_activity_date": 1531264950, "last_edit_date": 1531264950, "creation_date": 1531264598, "answer_id": 51275124, "question_id": 51274939, "link": "https://stackoverflow.com/questions/51274939/are-hash-values-in-perl-essentially-memory-locations/51275124#51275124", "title": "Are HASH values in Perl essentially memory locations?", "body": "<blockquote>\n  <p><em>Are HASH values in Perl essentially memory locations?</em></p>\n</blockquote>\n\n<p>Yes, but you're protected from directly accessing the memory. We refer to them as \"references\". A \"hash of hashes\" is really a hash of references to other hashes. Perl will automatically create the intermediate hashes for you, a process known as \"autovivification\".</p>\n\n<pre><code>my %hashB;\n$hashB{a}{c}{d} = 5;\nprint $hashB{a}{c}{d};\n</code></pre>\n\n<p>Let's expand out this example to make all the autovivification explicit. I'll use simple letters rather than variables so we don't have to define them.</p>\n\n<pre><code>my %hashB;\n\n# $hashB{a}{c}{d} = 5;\nmy $hashD = { d =&gt; 5 };\nmy $hashC = { c =&gt; $hashD };\n$hashB{a} = $hashC;\n\n# print $hashB{a}{c}{d};\n$hashC = $hashB{a};\n$hashD = $hashC-&gt;{c};\nprint $hashD-&gt;{d};\n</code></pre>\n\n<p>This is all the work Perl is doing behind the scenes. Each level of nesting is its own hash.</p>\n\n<p>Note that hash values are only ever scalars, single values. If you try this...</p>\n\n<pre><code>$hashB{q} = %hashQ;\n</code></pre>\n\n<p>...you'll get something very odd. In this case Perl tries to treat <code>%hashQ</code> as a scalar. A hash as a scalar is the number of buckets in the hash, something like <code>1/8</code>. Not very useful.</p>\n\n<p>What you can do is this.</p>\n\n<pre><code>$hashB{q} = \\%hashQ;\n</code></pre>\n\n<p>This takes a reference to <code>%hashQ</code>, like a pointer in other languages, and assigns it to <code>$hashB{q}</code>.</p>\n\n<p>Now if you make changes to keys in <code>$hashB{q}</code> you'll actually be changing <code>%hashQ</code>.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse v5.10;\n\nmy %hashQ = ( foo =&gt; 23 );\nmy %hashB;\n\n# assign a reference to %hashQ\n$hashB{q} = \\%hashQ;\nsay $hashB{q}{foo};     # 23\nsay $hashQ{foo};     # 23\n\n# change %hashQ via a reference\n$hashB{q}{foo} = 42;\nsay $hashB{q}{foo};  # 42\nsay $hashQ{foo};     # 42\n\n# change %hashQ directly\n$hashQ{foo} = 99;\nsay $hashB{q}{foo};  # 99\nsay $hashQ{foo};     # 99\n</code></pre>\n\n<hr>\n\n<p>On the other hand, simple string and number values in Perl are copied. So in your example...</p>\n\n<pre><code>$hashB{$a}{$c}{$d} = 5; # assign 5\n\n$hashA{$a}{$b}{$c}{$d} = $hashB{$a}{$c}{$d}; # COPY 5\n\n$hashA{$a}{$b}{$c}{$d} = 7; # assign 7\n</code></pre>\n\n<p><code>$hashB{$a}{$c}{$d}</code> remains 5 because its value, 5, was copied.</p>\n\n<p>On the other hand, if you did this...</p>\n\n<pre><code>$hashB{$a}{$c}{$d} = 5; # assign 5\n\n$hashA{$a}{$b}{$c} = $hashB{$a}{$c}; # copy a reference\n\n$hashA{$a}{$b}{$c}{$d} = 7; # assign 7\n</code></pre>\n\n<p>Now <code>$hashB{$a}{$c}{$d}</code> is 7 because you copied a reference to the hash in <code>$hashB{$a}{$c}</code>.</p>\n\n<hr>\n\n<p>For more, see...</p>\n\n<ul>\n<li><a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"noreferrer\">Perl Reference Tutorial</a></li>\n<li><a href=\"http://perldoc.perl.org/perlref.html\" rel=\"noreferrer\">Perl References</a></li>\n<li><a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"noreferrer\">Perl Data Structures Cookbook</a></li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 10061708, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cJ6W5qQKh4g/AAAAAAAAAAI/AAAAAAAAAFg/0vI6cb7o9Vo/photo.jpg?sz=128", "display_name": "Gordon Smith", "link": "https://stackoverflow.com/users/10061708/gordon-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1531266347, "creation_date": 1531262964, "last_edit_date": 1531265096, "question_id": 51274939, "link": "https://stackoverflow.com/questions/51274939/are-hash-values-in-perl-essentially-memory-locations", "title": "Are HASH values in Perl essentially memory locations?", "body": "<p>I have an issue.\nIf I assign a value of one hash (Hash A) to another hash (Hash B), and then change that value of Hash B, Hash A also changes.  How do I avoid that?</p>\n\n<p>E.g.</p>\n\n<pre><code>$hashB{a}{b}{c} = 5;\n\n$hashA{a}{b} = $hashB{a}{b};\n\n$hashA{a}{b}{c} = 7;\n</code></pre>\n\n<p>Now <code>$hashB{a}{b}{c} = 7</code>!  I want the hash to to hold the original value.</p>\n\n<p>How do I do that?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "edited": false, "score": 0, "creation_date": 1531259669, "post_id": 51274407, "comment_id": 89527043, "body": "I was looking fro this only but I want to do this in a perl script not from a command prompt"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531260729, "post_id": 51274407, "comment_id": 89527374, "body": "Please test your answers before posting them. Your code doesn&#39;t even compile."}, {"owner": {"reputation": 63648, "user_id": 97248, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d891ba8bd448f11617333f8642870262?s=128&d=identicon&r=PG", "display_name": "pts", "link": "https://stackoverflow.com/users/97248/pts"}, "edited": false, "score": 2, "creation_date": 1531261498, "post_id": 51274407, "comment_id": 89527581, "body": "Always do error checking on I/O, e.g. <code>open(my $input, &#39;&lt;&#39;, &#39;input_filename&#39;) or die(&quot;open input_filename: $!\\n&quot;)</code>"}], "tags": [], "owner": {"reputation": 22367, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "is_accepted": true, "score": 1, "last_activity_date": 1531261215, "last_edit_date": 1531261215, "creation_date": 1531259589, "answer_id": 51274407, "question_id": 51274303, "link": "https://stackoverflow.com/questions/51274303/convert-file-data-into-a-string-perl/51274407#51274407", "title": "Convert file data into a string perl", "body": "<p>I don't know what you mean by \"convert this data into a string\", but to remove the newlines, all you need to do is <code>chomp</code> the input.</p>\n\n<pre><code>perl -pe 'chomp' input_file &gt;output_file\n</code></pre>\n\n<p>If you like the spaces after the commas, a simple regex substitution will do.</p>\n\n<pre><code>perl -pe 's/\\n/ /' input_file &gt;output_file\n</code></pre>\n\n<p>To do either of these as part of a larger script, simply wrap it in a loop explicitly.</p>\n\n<pre><code>open(my $input, '&lt;', 'input_filename');\nopen(my $output, '&gt;', 'output_filename');\nwhile (&lt;$input&gt;) {\n  s/\\n/ /; # Or whatever work you want to do to each line of the file\n  print $output $_;\n}\nclose $output;\nclose $input;\n</code></pre>\n"}], "owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 51274407, "answer_count": 1, "score": -2, "last_activity_date": 1531261215, "creation_date": 1531259000, "question_id": 51274303, "link": "https://stackoverflow.com/questions/51274303/convert-file-data-into-a-string-perl", "title": "Convert file data into a string perl", "body": "<p>I have a file in which have comma separated  data below is the format of file :</p>\n\n<pre><code>560052400,\n560052400,\n560052400,\nABCF,\nDEF,\nFFRRR,\n560052431,\n</code></pre>\n\n<p>Now what i am trying to do is to convert this data into a string a write into a file and in the new file format will be like :</p>\n\n<pre><code>560052400, 560052400, 560052400, ABCF, DEF, FFRRR, 560052431,\n</code></pre>\n\n<p>How we can do this in Perl</p>\n"}, {"tags": ["arrays", "perl", "plot"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1531258464, "post_id": 51273783, "comment_id": 89526601, "body": "ALWAYS use <code>use strict; use warnings qw( all );</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 0, "creation_date": 1531271452, "post_id": 51273958, "comment_id": 89529632, "body": "This, but <code>plot</code> takes an ARRAY ref, so do <code>$graph-&gt;plot([$params{e}, $params{f}])</code>... or using hash slicing, <code>$graph-&gt;plot([@params{&#39;e&#39;, &#39;f&#39;}])</code>"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 0, "creation_date": 1531321692, "post_id": 51273958, "comment_id": 89555553, "body": "Fixed. Thanks @Joshua."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1531321679, "last_edit_date": 1531321679, "creation_date": 1531257172, "answer_id": 51273958, "question_id": 51273783, "link": "https://stackoverflow.com/questions/51273783/perl-plotting-data-from-multiple-arrays/51273958#51273958", "title": "perl: Plotting data from multiple arrays", "body": "<p>Passing an argument <code>'e' =&gt; [0,9,2,1,7]</code> to a subroutine does not automatically create a variable called <code>@e</code> inside the subroutine. Your subroutine does do not do any processing of arguments whatsoever. Consider something like this to do what you seem to want:</p>\n\n<pre><code>sub MyFunc {\n\n    my %params = @_;\n    ...\n    my $gd = $graph-&gt;plot( [$params{\"e\"}, $params{\"f\"}] ) ...\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 9104399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daabc05469bdc596944f1c1d07d636ef?s=128&d=identicon&r=PG&f=1", "display_name": "Alam ", "link": "https://stackoverflow.com/users/9104399/alam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531321679, "creation_date": 1531256227, "question_id": 51273783, "link": "https://stackoverflow.com/questions/51273783/perl-plotting-data-from-multiple-arrays", "title": "perl: Plotting data from multiple arrays", "body": "<p>In my perl code, I have several arrays with the name 'a', 'b', 'c'.... 'e', 'f'. I am sending them as the argument while calling 'MyFunc'. There I want to plot any two arrays, for example, 'e' vs 'f'.</p>\n\n<p>I tried in the following way (please look at the code), but I get a message that no data points are available in the line where <em><code>my $gd = $graph-&gt;plot(\\@e,\\@f) or die $graph-&gt;error;</code></em> command is being executed.</p>\n\n<p>How to make it work?</p>\n\n<pre><code>MyFunc(\n    'a' =&gt; [0, 1,2,3,4],\n    'c' =&gt; [0, -1,2,-3,6],  \n    'c' =&gt; [0, 2,4,2,5],\n    'd' =&gt; [0, 1,2,3,4],\n    'e' =&gt; [0, 9,2,1,7],\n    'f' =&gt; [-2, 5,-1,1,7],\n    'g' =&gt; [5, 1,8,-2,5],\n);\n\nsub MyFunc {\n\nuse GD::Graph::lines;\nmy $graph = GD::Graph::lines-&gt;new;\n\n$graph-&gt;set( \n    x_label           =&gt; 'X Label',\n    y_label           =&gt; 'Y label',\n    title             =&gt; 'Some simple graph',\n    y_max_value       =&gt; 8,\n    y_tick_number     =&gt; 8,\n    y_label_skip      =&gt; 2 \n) or die $graph-&gt;error;\n\nmy $gd = $graph-&gt;plot(\\@e,\\@f) or die $graph-&gt;error;\n\nopen(IMG, '&gt;file.gif') or die $!;\nbinmode IMG;\nprint IMG $gd-&gt;gif;\nclose IMG;\n\n\n};\n</code></pre>\n"}, {"tags": ["perl", "module", "package"], "comments": [{"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 1, "creation_date": 1531256436, "post_id": 51273694, "comment_id": 89525810, "body": "Note that recent versions of Perl (you do not say which one you use), that is 5.26 and above, do not include <code>.</code> (local directory) in <code>@INC</code> so by default  a module in same directory as script will not be found by default. See <a href=\"https://wiki.gentoo.org/wiki/Project:Perl/Dot-In-INC-Removal\" rel=\"nofollow noreferrer\">wiki.gentoo.org/wiki/Project:Perl/Dot-In-INC-Removal</a> for all details. You do not have the problem per se since you provide the full path, but that will make things complicated when you want to move your script+libraries elsewhere. See the <code>FindBin</code> module to help with that case."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1531256453, "post_id": 51273694, "comment_id": 89525824, "body": "The error messages indicates that the module is found. The problem is that the &lt;strike&gt;module&lt;/strike&gt; script contains a compile-time error [edited]"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 3543078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15ccb0031c59d9d8fad367eb778ef6e9?s=128&d=identicon&r=PG&f=1", "display_name": "user3543078", "link": "https://stackoverflow.com/users/3543078/user3543078"}, "edited": false, "score": 0, "creation_date": 1531258046, "post_id": 51273809, "comment_id": 89526448, "body": "Thank you, I didn&#39;t even notice that! This was originally someone else&#39;s script that &quot;wasn&#39;t working&quot;. Thank you again!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1531256316, "creation_date": 1531256316, "answer_id": 51273809, "question_id": 51273694, "link": "https://stackoverflow.com/questions/51273694/perl-cant-find-module-listed-in-same-directory-as-script/51273809#51273809", "title": "Perl can&#39;t find module listed in same directory as script", "body": "<p>Although you have shown very little of your code, \nthe problem would presumably be that you have declared <code>$enrollment_type</code> and tried to use <code>$employment_type</code>, which has not been declared</p>\n\n<p>Had perl been unable to find the module, it is the <code>use Custom::Hash</code> statement that would throw the error</p>\n"}], "owner": {"reputation": 53, "user_id": 3543078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15ccb0031c59d9d8fad367eb778ef6e9?s=128&d=identicon&r=PG&f=1", "display_name": "user3543078", "link": "https://stackoverflow.com/users/3543078/user3543078"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 51273809, "answer_count": 1, "score": 1, "last_activity_date": 1531256316, "creation_date": 1531255815, "last_edit_date": 1592644375, "question_id": 51273694, "link": "https://stackoverflow.com/questions/51273694/perl-cant-find-module-listed-in-same-directory-as-script", "title": "Perl can&#39;t find module listed in same directory as script", "body": "<p>I need to keep any custom modules in the same-ish directory as my script.</p>\n<p>I keep getting this error suggesting that Perl can't &quot;see&quot; the module I'm declaring</p>\n<blockquote>\n<p>Global symbol &quot;$employment_type&quot; requires explicit package name at early_enrollments_by_term.pl line 260.</p>\n<p>Execution of early_enrollments_by_term.pl aborted due to compilation errors.</p>\n</blockquote>\n<p>My module is <code>Hash.pm</code> and is in directory <code>/home/pgb2/canvas/canvas-sis-feeds/scripts/lib/Custom</code></p>\n<h3>Hash.pm</h3>\n<pre><code>package Custom::Hash;\n</code></pre>\n<p>My script is <code>early_enrollments_by_term.pl</code> and lives in <code>/home/pgb2/canvas/canvas-sis-feeds/scripts/</code></p>\n<h3>early_enrollments_by_term.pl</h3>\n<pre><code>#!/usr/bin/perl\n\nuse strict;\n\nuse DBI;\n\nuse lib qw(/home/pgb2/canvas/canvas-sis-feeds/scripts/lib);\n\nuse Custom::Hash;\n\nmy $enrollment_type = $Custom::Hash::enrollment_hash{$role};  # line 259\nprint &quot;\\nenrollment_type: $employment_type\\n&quot;;                # line 260\n</code></pre>\n<p>Would anyone be able to tell why it's not finding the module?</p>\n"}, {"tags": ["regex", "perl", "repeat"], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 0, "last_activity_date": 1531250071, "creation_date": 1531250071, "answer_id": 51272566, "question_id": 51272278, "link": "https://stackoverflow.com/questions/51272278/obtain-values-of-a-text-string-in-a-long-text/51272566#51272566", "title": "Obtain values of a text string in a long text", "body": "<p><a href=\"http://stedolan.github.io/jq/\" rel=\"nofollow noreferrer\">http://stedolan.github.io/jq/</a></p>\n\n<pre><code>jq '..|.kills?' xbox-match-api.json\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 9917722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ac451abd4e5067f93c800bf79bd8be5?s=128&d=identicon&r=PG&f=1", "display_name": "Ravai", "link": "https://stackoverflow.com/users/9917722/ravai"}, "edited": false, "score": 0, "creation_date": 1531254464, "post_id": 51272997, "comment_id": 89524976, "body": "Thank you very much, that&#39;s what I was looking for."}], "tags": [], "owner": {"reputation": 1544, "user_id": 7095433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e608c3fba680f67e2997cae63cf626?s=128&d=identicon&r=PG", "display_name": "landru27", "link": "https://stackoverflow.com/users/7095433/landru27"}, "is_accepted": true, "score": 1, "last_activity_date": 1531252174, "creation_date": 1531252174, "answer_id": 51272997, "question_id": 51272278, "link": "https://stackoverflow.com/questions/51272278/obtain-values-of-a-text-string-in-a-long-text/51272997#51272997", "title": "Obtain values of a text string in a long text", "body": "<p>full sample.txt:</p>\n\n<pre><code>\"killPointsDelta\":-6.18067741,\"killStreaks\":0,\"kills\":1\n\"killPointsDelta\":-6.18067741,\"killStreaks\":0,\"kills\":3\n\"killPointsDelta\":-6.18067741,\"killStreaks\":0,\"kills\":5\n\"killPointsDelta\":-6.18067741,\"killStreaks\":0,\"kills\":0\n\"killPlace\":93,\"killPoints\":1326,\"killPointsDelta\":-18.0114288,\"killStreaks\":0,\"kills\":0,\"lastKillPoints\":0,\"lastWinPoints\":0,\"longestKill\":0,\"mostDamage\":0,\"name\":\"ReliableNicolas\",\"playerId\":\"account.95037ec4997d488b86deedf1cf479112\",\"revives\":0,\"rideDistance\":0,\"roadKills\":0,\"swimDistance\":0,\"teamKills\":0,\"timeSurvived\":102.023,\"vehicleDestroys\":0,\"walkDistance\":45.7359657,\"weaponsAcquired\":1,\"winPlace\":96,\"winPoints\":1528,\"winPointsDelta\":-10.5121641},\"actor\":\"\",\"shardId\":\"xbox-eu\"}},{\"type\":\"participant\",\"id\":\"e290c65b-0ae0-4e95-b673-60695ca5c53c\",\"attributes\":{\"actor\":\"\",\"shardId\":\"xbox-eu\",\"stats\":{\"DBNOs\":0,\"assists\":0,\"boosts\":1,\"damageDealt\":125.838959,\"deathType\":\"byplayer\",\"headshotKills\":0,\"heals\":1,\"killPlace\":50,\"killPoints\":1350,\"killPointsDelta\":-3.38219357,\"killStreaks\":0,\"kills\":0,\"lastKillPoints\":0,\"lastWinPoints\":0,\"longestKill\":0,\"mostDamage\":0,\"name\":\"RGB3 illusionz\",\"playerId\":\"account.52947057108a4f0ab90e66c4a85f8146\",\"revives\":0,\"rideDistance\":1201.93909,\"roadKills\":0,\"swimDistance\":0,\"teamKills\":0,\"timeSurvived\":890.847,\"vehicleDestroys\":0,\"walkDistance\":1067.83276,\"weaponsAcquired\":7,\"winPlace\":42,\"winPoints\":1523,\"winPointsDelta\":4.073688}}},{\"type\":\"roster\",\"id\":\"1a1584cd-1088-4531-8995-8b6b2c86d112\",\"attributes\":{\"stats\":{\"rank\":39,\"teamId\":100015},\"won\":\"false\",\"shardId\":\"xbox-eu\"},\"relationships\":{\"team\":{\"data\":null},\"participants\":{\"data\":[{\"type\":\"participant\",\"id\":\"34504b4e-72a0-4b27-8c2e-d00d49087019\"}]}}},{\"type\":\"roster\",\"id\":\"5a062295-c1ea-41c6-97d0-b7608106b130\",\"attributes\":{\"stats\":{\"rank\":89,\"teamId\":100042},\"won\":\"false\",\"shardId\":\"xbox-eu\"},\"relationships\":{\"team\":{\"data\":null},\"participants\":{\"data\":[{\"type\":\"participant\",\"id\":\"6a5311f5-be80-4fba-83ff-e03b6dd50a18\"}]}}},{\"type\":\"roster\",\"id\":\"8ae96e66-2b53-4d4c-8ea9-edef1e72e4e9\",\"attributes\":{\"won\":\"false\",\"shardId\":\"xbox-eu\",\"stats\":{\"rank\":45,\"teamId\":100063}},\"relationships\":{\"team\":{\"data\":null},\"participants\":{\"data\":[{\"type\":\"participant\",\"id\":\"a8e2fba9-ebf0-4d40-879b-b28c0b7e7d3e\"}]}}},{\"type\":\"roster\",\"id\":\"c60a6439-0882-4492-a6a0-ae13d3998593\",\"attributes\":{\"stats\":{\"rank\":85,\"teamId\":100079},\"won\":\"false\",\"shardId\":\"xbox-eu\"},\"relationships\":{\"team\":{\"data\":null},\"participants\":{\"data\":[{\"type\":\"participant\",\"id\":\"95659497-d1a3-41dd-8207-bc2928ecfaf6\"}]}}},{\"type\":\"participant\",\"id\":\"ed50e918-e8b4-4b80-88d4-dcb2386ee3be\",\"attributes\":{\"stats\":{\"DBNOs\":0,\"assists\":0,\"boosts\":0,\"damageDealt\":0,\"deathType\":\"byplayer\",\"headshotKills\":0,\"heals\":0,\"killPlace\":68,\"killPoints\":1266,\"killPointsDelta\":-7.962034,\"killStreaks\":0,\"kills\":0,\"lastKillPoints\":0,\"lastWinPoints\":0,\"longestKill\":0,\"mostDamage\":0,\"name\":\"cjjannerman\",\"playerId\":\"account.c4211e45f7914b4dba6857c8e4185a29\",\"revives\":0,\"rideDistance\":0,\"roadKills\":0,\"swimDistance\":0,\"teamKills\":0,\"timeSurvived\":520.226,\"vehicleDestroys\":0,\"walkDistance\":899.256958,\"weaponsAcquired\":4,\"winPlace\":67,\"winPoints\":1608,\"winPointsDelta\":-5.16031933},\"actor\":\"\",\"shardId\":\"xbox-eu\"}},{\"type\":\"participant\",\"id\":\"9e4231ea-b1e5-4161-9d14-92e09ea75b49\",\"attributes\":{\"stats\":{\"DBNOs\":0,\"assists\":0,\"boosts\":0,\"damageDealt\":66.86932,\"deathType\":\"byplayer\",\"headshotKills\":0,\"heals\":5,\"killPlace\":57,\"killPoints\":1337,\"killPointsDelta\":-6.18067741,\"killStreaks\":0,\"kills\":0,\"lastKillPoints\":0,\"lastWinPoints\":0,\"longestKill\":0,\"mostDamage\":0,\"name\":\"RSTHIBS\",\"playerId\":\"account.0dd24316ab8e457293af9326e8e8a291\",\"revives\":0,\"rideDistance\":3556.051,\"roadKills\":0,\"swimDistance\":0,\"teamKills\":0,\"timeSurvived\":734.35,\"vehicleDestroys\":0,\"walkDistance\":764.56,\"weaponsAcquired\":5,\"winPlace\":52,\"winPoints\":1612,\"winPointsDelta\":-1.36759019},\"actor\":\"\",\"shardId\":\"xbox-eu\"}},{\"type\":\"participant\",\"id\":\"cdfbce43-b254-44ac-aa44-6874680a2d2b\",\"attributes\":{\"stats\":{\"DBNOs\":0,\"assists\":0,\"boosts\":0,\"damageDealt\":0,\"deathType\":\"byplayer\",\"headshotKills\":0,\"heals\":0,\"killPlace\":69,\"killPoints\":1433,\"killPointsDelta\":-15.2984076,\"killStreaks\":0,\"kills\":0,\"lastKillPoints\":0,\"lastWinPoints\":0,\"longestKill\":0,\"mostDamage\":0,\"name\":\"CoRe X SCULLION\",\"playerId\":\"account.9701b6993a304bf8b3892657aa5cd4b3\",\"revives\":0,\"rideDistance\":0,\"roadKills\":0,\"swimDistance\":0,\"teamKills\":0,\"timeSurvived\":432.763,\"vehicleDestroys\":0,\"walkDistance\":829.7604,\"weaponsAcquired\":10,\"winPlace\":71,\"winPoints\":1615,\"winPointsDelta\":-6.362017},\"actor\":\"\",\"shardId\":\"xbox-eu\"}},{\"type\":\"roster\",\"id\":\"b026d5ac-3ed7-4d4e-bdfe-e449f24ec17d\",\"attributes\":{\"stats\":{\"rank\":24,\"teamId\":100061},\"won\":\"false\",\"shardId\":\"xbox-eu\"},\"relationships\":{\"team\":{\"data\":null},\"participants\":{\"data\":[{\"type\":\"participant\",\"id\":\"2ccbbdad-ef5b-4ff9-be51-c3c82d49b6c8\"}]}}},{\"type\":\"roster\",\"id\":\"e529c2fb-2fa8-41fb-b23a-267c44c3e623\",\"attributes\":{\"stats\":{\"rank\":10,\"teamId\":100073},\"won\":\"false\",\"shardId\":\"xbox-eu\"},\"relationships\":{\"participants\":{\"data\":[{\"type\":\"participant\",\"id\":\"90c65c8c-1ce2-40be-84e8-e1e2a14a8bab\"}]},\"team\":{\"data\":null}}},{\"type\":\"participant\",\"id\":\"34504b4e-72a0-4b27-8c2e-d00d49087019\",\"attributes\":{\"stats\":{\"DBNOs\":0,\"assists\":0,\"boosts\":0,\"damageDealt\":63.0793152,\"deathType\":\"byplayer\",\"headshotKills\":0,\"heals\":0,\"killPlace\":49,\"killPoints\":1156,\"killPointsDelta\":7.23155546,\"killStreaks\":0,\"kills\":0,\"lastKillPoints\":0,\"lastWinPoints\":0,\"longestKill\":0,\"mostDamage\":0,\"name\":\"Jumbolicker\",\"playerId\":\"account.e1f5cfe107424609927e552820c5d5ad\",\"revives\":0,\"rideDistance\":0,\"roadKills\":0,\"swimDistance\":0,\"teamKills\":0,\"timeSurvived\":979.869,\"vehicleDestroys\":0,\"walkDistance\":1031.32593,\"weaponsAcquired\":2,\"winPlace\":39,\"winPoints\":1551,\"winPointsDelta\":4.23961639}\n</code></pre>\n\n<p>Perl command:</p>\n\n<pre><code>perl -ne 'while (s/^.*?\"kills\":([0-9]+)//) {print(\"$1\\n\");}' sample.txt\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>1\n3\n5\n0\n0\n0\n0\n0\n0\n0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 9917722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ac451abd4e5067f93c800bf79bd8be5?s=128&d=identicon&r=PG&f=1", "display_name": "Ravai", "link": "https://stackoverflow.com/users/9917722/ravai"}, "edited": false, "score": 1, "creation_date": 1531254479, "post_id": 51273248, "comment_id": 89524985, "body": "Thank you very much, that&#39;s what I was looking for."}], "tags": [], "owner": {"reputation": 74, "user_id": 4109113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88acb982d7434e525fb84036d8dd74fa?s=128&d=identicon&r=PG&f=1", "display_name": "bislinks", "link": "https://stackoverflow.com/users/4109113/bislinks"}, "is_accepted": false, "score": -1, "last_activity_date": 1531253515, "creation_date": 1531253515, "answer_id": 51273248, "question_id": 51272278, "link": "https://stackoverflow.com/questions/51272278/obtain-values-of-a-text-string-in-a-long-text/51273248#51273248", "title": "Obtain values of a text string in a long text", "body": "<p>Here is my answer <pre>without perl one liner</pre></p>\n\n<p>But the answer given by @landru27 probably best suits your need.</p>\n\n<p>File: sample.txt contained all the text in one line!</p>\n\n<pre>\n\"killPlace\":93,\"killPoints\":1326,\"killPointsDelta\":-18.0114288,\"killStreaks\":0,\"kills\":0,\"lastKillPoints\":0,\"lastWinPoints\":0,\"longestKill\":0,\"mostDamage\":0,\"name\":\"ReliableNicolas\",\"playerId\":\"account.95037ec4997d488b86deedf1cf479112\",\"revives\":0,\"rideDistance\":0,\"roadKills\":0,\"swimDistance\":0,\"teamKills\":0,\"timeSurvived\":102.023,\"vehicleDestroys\":0,\"walkDistance\":45.7359657,\"weaponsAcquired\":1,\"winPlace\":96,\"winPoints\":1528,\"winPointsDelta\":-10.5121641},\"actor\":\"\",\"shardId\":\"xbox-eu\"}},{\"type\":\"participant\",\"id\":\"e290c65b-0ae0-4e95-b673-60695ca5c53c\",\"attributes\":{\"actor\":\"\",\"shardId\":\"xbox-eu\",\"stats\":{\"DBNOs\":0,\"assists\":0,\"boosts\":1,\"damageDealt\":125.838959,\"deathType\":\"byplayer\",\"headshotKills\":0,\"heals\":1,\"killPlace\":50,\"killPoints\":1350,\"killPointsDelta\":-3.38219357,\"killStreaks\":0,\"kills\":0,\"lastKillPoints\":0,\"lastWinPoints\":0,\"longestKill\":0,\"mostDamage\":0,\"name\":\"RGB3 illusionz\",\"playerId\":\"account.52947057108a4f0ab90e66c4a85f8146\",\"revives\":0,\"rideDistance\":1201.93909,\"roadKills\":0,\"swimDistance\":0,\"teamKills\":0,\"timeSurvived\":890.847,\"vehicleDestroys\":0,\"walkDistance\":1067.83276,\"weaponsAcquired\":7,\"winPlace\":42,\"winPoints\":1523,\"winPointsDelta\":4.073688}}},{\"type\":\"roster\",\"id\":\"1a1584cd-1088-4531-8995-8b6b2c86d112\",\"attributes\":{\"stats\":{\"rank\":39,\"teamId\":100015},\"won\":\"false\",\"shardId\":\"xbox-eu\"},\"relationships\":{\"team\":{\"data\":null},\"participants\":{\"data\":[{\"type\":\"participant\",\"id\":\"34504b4e-72a0-4b27-8c2e-d00d49087019\"}]}}},{\"type\":\"roster\",\"id\":\"5a062295-c1ea-41c6-97d0-b7608106b130\",\"attributes\":{\"stats\":{\"rank\":89,\"teamId\":100042},\"won\":\"false\",\"shardId\":\"xbox-eu\"},\"relationships\":{\"team\":{\"data\":null},\"participants\":{\"data\":[{\"type\":\"participant\",\"id\":\"6a5311f5-be80-4fba-83ff-e03b6dd50a18\"}]}}},{\"type\":\"roster\",\"id\":\"8ae96e66-2b53-4d4c-8ea9-edef1e72e4e9\",\"attributes\":{\"won\":\"false\",\"shardId\":\"xbox-eu\",\"stats\":{\"rank\":45,\"teamId\":100063}},\"relationships\":{\"team\":{\"data\":null},\"participants\":{\"data\":[{\"type\":\"participant\",\"id\":\"a8e2fba9-ebf0-4d40-879b-b28c0b7e7d3e\"}]}}},{\"type\":\"roster\",\"id\":\"c60a6439-0882-4492-a6a0-ae13d3998593\",\"attributes\":{\"stats\":{\"rank\":85,\"teamId\":100079},\"won\":\"false\",\"shardId\":\"xbox-eu\"},\"relationships\":{\"team\":{\"data\":null},\"participants\":{\"data\":[{\"type\":\"participant\",\"id\":\"95659497-d1a3-41dd-8207-bc2928ecfaf6\"}]}}},{\"type\":\"participant\",\"id\":\"ed50e918-e8b4-4b80-88d4-dcb2386ee3be\",\"attributes\":{\"stats\":{\"DBNOs\":0,\"assists\":0,\"boosts\":0,\"damageDealt\":0,\"deathType\":\"byplayer\",\"headshotKills\":0,\"heals\":0,\"killPlace\":68,\"killPoints\":1266,\"killPointsDelta\":-7.962034,\"killStreaks\":0,\"kills\":0,\"lastKillPoints\":0,\"lastWinPoints\":0,\"longestKill\":0,\"mostDamage\":0,\"name\":\"cjjannerman\",\"playerId\":\"account.c4211e45f7914b4dba6857c8e4185a29\",\"revives\":0,\"rideDistance\":0,\"roadKills\":0,\"swimDistance\":0,\"teamKills\":0,\"timeSurvived\":520.226,\"vehicleDestroys\":0,\"walkDistance\":899.256958,\"weaponsAcquired\":4,\"winPlace\":67,\"winPoints\":1608,\"winPointsDelta\":-5.16031933},\"actor\":\"\",\"shardId\":\"xbox-eu\"}},{\"type\":\"participant\",\"id\":\"9e4231ea-b1e5-4161-9d14-92e09ea75b49\",\"attributes\":{\"stats\":{\"DBNOs\":0,\"assists\":0,\"boosts\":0,\"damageDealt\":66.86932,\"deathType\":\"byplayer\",\"headshotKills\":0,\"heals\":5,\"killPlace\":57,\"killPoints\":1337,\"killPointsDelta\":-6.18067741,\"killStreaks\":0,\"kills\":0,\"lastKillPoints\":0,\"lastWinPoints\":0,\"longestKill\":0,\"mostDamage\":0,\"name\":\"RSTHIBS\",\"playerId\":\"account.0dd24316ab8e457293af9326e8e8a291\",\"revives\":0,\"rideDistance\":3556.051,\"roadKills\":0,\"swimDistance\":0,\"teamKills\":0,\"timeSurvived\":734.35,\"vehicleDestroys\":0,\"walkDistance\":764.56,\"weaponsAcquired\":5,\"winPlace\":52,\"winPoints\":1612,\"winPointsDelta\":-1.36759019},\"actor\":\"\",\"shardId\":\"xbox-eu\"}},{\"type\":\"participant\",\"id\":\"cdfbce43-b254-44ac-aa44-6874680a2d2b\",\"attributes\":{\"stats\":{\"DBNOs\":0,\"assists\":0,\"boosts\":0,\"damageDealt\":0,\"deathType\":\"byplayer\",\"headshotKills\":0,\"heals\":0,\"killPlace\":69,\"killPoints\":1433,\"killPointsDelta\":-15.2984076,\"killStreaks\":0,\"kills\":0,\"lastKillPoints\":0,\"lastWinPoints\":0,\"longestKill\":0,\"mostDamage\":0,\"name\":\"CoRe X SCULLION\",\"playerId\":\"account.9701b6993a304bf8b3892657aa5cd4b3\",\"revives\":0,\"rideDistance\":0,\"roadKills\":0,\"swimDistance\":0,\"teamKills\":0,\"timeSurvived\":432.763,\"vehicleDestroys\":0,\"walkDistance\":829.7604,\"weaponsAcquired\":10,\"winPlace\":71,\"winPoints\":1615,\"winPointsDelta\":-6.362017},\"actor\":\"\",\"shardId\":\"xbox-eu\"}},{\"type\":\"roster\",\"id\":\"b026d5ac-3ed7-4d4e-bdfe-e449f24ec17d\",\"attributes\":{\"stats\":{\"rank\":24,\"teamId\":100061},\"won\":\"false\",\"shardId\":\"xbox-eu\"},\"relationships\":{\"team\":{\"data\":null},\"participants\":{\"data\":[{\"type\":\"participant\",\"id\":\"2ccbbdad-ef5b-4ff9-be51-c3c82d49b6c8\"}]}}},{\"type\":\"roster\",\"id\":\"e529c2fb-2fa8-41fb-b23a-267c44c3e623\",\"attributes\":{\"stats\":{\"rank\":10,\"teamId\":100073},\"won\":\"false\",\"shardId\":\"xbox-eu\"},\"relationships\":{\"participants\":{\"data\":[{\"type\":\"participant\",\"id\":\"90c65c8c-1ce2-40be-84e8-e1e2a14a8bab\"}]},\"team\":{\"data\":null}}},{\"type\":\"participant\",\"id\":\"34504b4e-72a0-4b27-8c2e-d00d49087019\",\"attributes\":{\"stats\":{\"DBNOs\":0,\"assists\":0,\"boosts\":0,\"damageDealt\":63.0793152,\"deathType\":\"byplayer\",\"headshotKills\":0,\"heals\":0,\"killPlace\":49,\"killPoints\":1156,\"killPointsDelta\":7.23155546,\"killStreaks\":0,\"kills\":0,\"lastKillPoints\":0,\"lastWinPoints\":0,\"longestKill\":0,\"mostDamage\":0,\"name\":\"Jumbolicker\",\"playerId\":\"account.e1f5cfe107424609927e552820c5d5ad\",\"revives\":0,\"rideDistance\":0,\"roadKills\":0,\"swimDistance\":0,\"teamKills\":0,\"timeSurvived\":979.869,\"vehicleDestroys\":0,\"walkDistance\":1031.32593,\"weaponsAcquired\":2,\"winPlace\":39,\"winPoints\":1551,\"winPointsDelta\":4.23961639}\n</pre>\n\n<pre><code>#/usr/bin/perl\n\nopen(F, \"./sample.txt\") or print \"Error opening file $!\";\nmy $f = &lt;F&gt;;\nclose F;\n\nmy @line = split(/\"playerId\":/, $f);\n\n#print scalar(@line) . \"\\n\"; \n\nforeach my $line ( @line ) \n{\n# \"kills\":0,\nprint \"$1\\n\" if $line =~ /\"kills\":(\\d+),/; \n}\n</code></pre>\n\n<p>Result</p>\n\n<pre>\n0\n0\n0\n0\n0\n0\n\n</pre>\n"}], "owner": {"reputation": 1, "user_id": 9917722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ac451abd4e5067f93c800bf79bd8be5?s=128&d=identicon&r=PG&f=1", "display_name": "Ravai", "link": "https://stackoverflow.com/users/9917722/ravai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 51272997, "answer_count": 3, "score": -3, "last_activity_date": 1531253515, "creation_date": 1531248869, "last_edit_date": 1531248990, "question_id": 51272278, "link": "https://stackoverflow.com/questions/51272278/obtain-values-of-a-text-string-in-a-long-text", "title": "Obtain values of a text string in a long text", "body": "<p>I would need to have the following result.</p>\n\n<pre><code>cat sample.txt\n\n\"killPointsDelta\":-6.18067741,\"killStreaks\":0,\"kills\":1\n\"killPointsDelta\":-6.18067741,\"killStreaks\":0,\"kills\":3\n\"killPointsDelta\":-6.18067741,\"killStreaks\":0,\"kills\":5\n\"killPointsDelta\":-6.18067741,\"killStreaks\":0,\"kills\":0\n\n\nperl -ne 'print \"$&amp;\\n\" if /\"kills\":\\K[^,}]+/' sample.txt \n</code></pre>\n\n<p>Correct expected result:</p>\n\n<pre><code>1\n3\n5\n0\n</code></pre>\n\n<p>So far so good. But the problem is when the file contains a paragraph instead of lines.</p>\n\n<pre><code>\"killPlace\":93,\"killPoints\":1326,\"killPointsDelta\":-18.0114288,\"killStreaks\":0,\"kills\":0,\"lastKillPoints\":0,\"lastWinPoints\":0,\"longestKill\":0,\"mostDamage\":0,\"name\":\"ReliableNicolas\",\"playerId\":\"account.95037ec4997d488b86deedf1cf479112\",\"revives\":0,\"rideDistance\":0,\"roadKills\":0,\"swimDistance\":0,\"teamKills\":0,\"timeSurvived\":102.023,\"vehicleDestroys\":0,\"walkDistance\":45.7359657,\"weaponsAcquired\":1,\"winPlace\":96,\"winPoints\":1528,\"winPointsDelta\":-10.5121641},\"actor\":\"\",\"shardId\":\"xbox-eu\"}},{\"type\":\"participant\",\"id\":\"e290c65b-0ae0-4e95-b673-60695ca5c53c\",\"attributes\":{\"actor\":\"\",\"shardId\":\"xbox-eu\",\"stats\":{\"DBNOs\":0,\"assists\":0,\"boosts\":1,\"damageDealt\":125.838959,\"deathType\":\"byplayer\",\"headshotKills\":0,\"heals\":1,\"killPlace\":50,\"killPoints\":1350,\"killPointsDelta\":-3.38219357,\"killStreaks\":0,\"kills\":0,\"lastKillPoints\":0,\"lastWinPoints\":0,\"longestKill\":0,\"mostDamage\":0,\"name\":\"RGB3 illusionz\",\"playerId\":\"account.52947057108a4f0ab90e66c4a85f8146\",\"revives\":0,\"rideDistance\":1201.93909,\"roadKills\":0,\"swimDistance\":0,\"teamKills\":0,\"timeSurvived\":890.847,\"vehicleDestroys\":0,\"walkDistance\":1067.83276,\"weaponsAcquired\":7,\"winPlace\":42,\"winPoints\":1523,\"winPointsDelta\":4.073688}}},{\"type\":\"roster\",\"id\":\"1a1584cd-1088-4531-8995-8b6b2c86d112\",\"attributes\":{\"stats\":{\"rank\":39,\"teamId\":100015},\"won\":\"false\",\"shardId\":\"xbox-eu\"},\"relationships\":{\"team\":{\"data\":null},\"participants\":{\"data\":[{\"type\":\"participant\",\"id\":\"34504b4e-72a0-4b27-8c2e-d00d49087019\"}]}}},{\"type\":\"roster\",\"id\":\"5a062295-c1ea-41c6-97d0-b7608106b130\",\"attributes\":{\"stats\":{\"rank\":89,\"teamId\":100042},\"won\":\"false\",\"shardId\":\"xbox-eu\"},\"relationships\":{\"team\":{\"data\":null},\"participants\":{\"data\":[{\"type\":\"participant\",\"id\":\"6a5311f5-be80-4fba-83ff-e03b6dd50a18\"}]}}},{\"type\":\"roster\",\"id\":\"8ae96e66-2b53-4d4c-8ea9-edef1e72e4e9\",\"attributes\":{\"won\":\"false\",\"shardId\":\"xbox-eu\",\"stats\":{\"rank\":45,\"teamId\":100063}},\"relationships\":{\"team\":{\"data\":null},\"participants\":{\"data\":[{\"type\":\"participant\",\"id\":\"a8e2fba9-ebf0-4d40-879b-b28c0b7e7d3e\"}]}}},{\"type\":\"roster\",\"id\":\"c60a6439-0882-4492-a6a0-ae13d3998593\",\"attributes\":{\"stats\":{\"rank\":85,\"teamId\":100079},\"won\":\"false\",\"shardId\":\"xbox-eu\"},\"relationships\":{\"team\":{\"data\":null},\"participants\":{\"data\":[{\"type\":\"participant\",\"id\":\"95659497-d1a3-41dd-8207-bc2928ecfaf6\"}]}}},{\"type\":\"participant\",\"id\":\"ed50e918-e8b4-4b80-88d4-dcb2386ee3be\",\"attributes\":{\"stats\":{\"DBNOs\":0,\"assists\":0,\"boosts\":0,\"damageDealt\":0,\"deathType\":\"byplayer\",\"headshotKills\":0,\"heals\":0,\"killPlace\":68,\"killPoints\":1266,\"killPointsDelta\":-7.962034,\"killStreaks\":0,\"kills\":0,\"lastKillPoints\":0,\"lastWinPoints\":0,\"longestKill\":0,\"mostDamage\":0,\"name\":\"cjjannerman\",\"playerId\":\"account.c4211e45f7914b4dba6857c8e4185a29\",\"revives\":0,\"rideDistance\":0,\"roadKills\":0,\"swimDistance\":0,\"teamKills\":0,\"timeSurvived\":520.226,\"vehicleDestroys\":0,\"walkDistance\":899.256958,\"weaponsAcquired\":4,\"winPlace\":67,\"winPoints\":1608,\"winPointsDelta\":-5.16031933},\"actor\":\"\",\"shardId\":\"xbox-eu\"}},{\"type\":\"participant\",\"id\":\"9e4231ea-b1e5-4161-9d14-92e09ea75b49\",\"attributes\":{\"stats\":{\"DBNOs\":0,\"assists\":0,\"boosts\":0,\"damageDealt\":66.86932,\"deathType\":\"byplayer\",\"headshotKills\":0,\"heals\":5,\"killPlace\":57,\"killPoints\":1337,\"killPointsDelta\":-6.18067741,\"killStreaks\":0,\"kills\":0,\"lastKillPoints\":0,\"lastWinPoints\":0,\"longestKill\":0,\"mostDamage\":0,\"name\":\"RSTHIBS\",\"playerId\":\"account.0dd24316ab8e457293af9326e8e8a291\",\"revives\":0,\"rideDistance\":3556.051,\"roadKills\":0,\"swimDistance\":0,\"teamKills\":0,\"timeSurvived\":734.35,\"vehicleDestroys\":0,\"walkDistance\":764.56,\"weaponsAcquired\":5,\"winPlace\":52,\"winPoints\":1612,\"winPointsDelta\":-1.36759019},\"actor\":\"\",\"shardId\":\"xbox-eu\"}},{\"type\":\"participant\",\"id\":\"cdfbce43-b254-44ac-aa44-6874680a2d2b\",\"attributes\":{\"stats\":{\"DBNOs\":0,\"assists\":0,\"boosts\":0,\"damageDealt\":0,\"deathType\":\"byplayer\",\"headshotKills\":0,\"heals\":0,\"killPlace\":69,\"killPoints\":1433,\"killPointsDelta\":-15.2984076,\"killStreaks\":0,\"kills\":0,\"lastKillPoints\":0,\"lastWinPoints\":0,\"longestKill\":0,\"mostDamage\":0,\"name\":\"CoRe X SCULLION\",\"playerId\":\"account.9701b6993a304bf8b3892657aa5cd4b3\",\"revives\":0,\"rideDistance\":0,\"roadKills\":0,\"swimDistance\":0,\"teamKills\":0,\"timeSurvived\":432.763,\"vehicleDestroys\":0,\"walkDistance\":829.7604,\"weaponsAcquired\":10,\"winPlace\":71,\"winPoints\":1615,\"winPointsDelta\":-6.362017},\"actor\":\"\",\"shardId\":\"xbox-eu\"}},{\"type\":\"roster\",\"id\":\"b026d5ac-3ed7-4d4e-bdfe-e449f24ec17d\",\"attributes\":{\"stats\":{\"rank\":24,\"teamId\":100061},\"won\":\"false\",\"shardId\":\"xbox-eu\"},\"relationships\":{\"team\":{\"data\":null},\"participants\":{\"data\":[{\"type\":\"participant\",\"id\":\"2ccbbdad-ef5b-4ff9-be51-c3c82d49b6c8\"}]}}},{\"type\":\"roster\",\"id\":\"e529c2fb-2fa8-41fb-b23a-267c44c3e623\",\"attributes\":{\"stats\":{\"rank\":10,\"teamId\":100073},\"won\":\"false\",\"shardId\":\"xbox-eu\"},\"relationships\":{\"participants\":{\"data\":[{\"type\":\"participant\",\"id\":\"90c65c8c-1ce2-40be-84e8-e1e2a14a8bab\"}]},\"team\":{\"data\":null}}},{\"type\":\"participant\",\"id\":\"34504b4e-72a0-4b27-8c2e-d00d49087019\",\"attributes\":{\"stats\":{\"DBNOs\":0,\"assists\":0,\"boosts\":0,\"damageDealt\":63.0793152,\"deathType\":\"byplayer\",\"headshotKills\":0,\"heals\":0,\"killPlace\":49,\"killPoints\":1156,\"killPointsDelta\":7.23155546,\"killStreaks\":0,\"kills\":0,\"lastKillPoints\":0,\"lastWinPoints\":0,\"longestKill\":0,\"mostDamage\":0,\"name\":\"Jumbolicker\",\"playerId\":\"account.e1f5cfe107424609927e552820c5d5ad\",\"revives\":0,\"rideDistance\":0,\"roadKills\":0,\"swimDistance\":0,\"teamKills\":0,\"timeSurvived\":979.869,\"vehicleDestroys\":0,\"walkDistance\":1031.32593,\"weaponsAcquired\":2,\"winPlace\":39,\"winPoints\":1551,\"winPointsDelta\":4.23961639}\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "awk", "filemaker"], "comments": [{"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 1, "creation_date": 1531245254, "post_id": 51271291, "comment_id": 89521036, "body": "Please add your desired output for that sample input to your question."}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 1, "creation_date": 1531245318, "post_id": 51271291, "comment_id": 89521057, "body": "It is a decent question but I am not going to retype your example to answer it. Please provide your example as TEXT that one can easily copy."}, {"owner": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "reply_to_user": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1531246073, "post_id": 51271291, "comment_id": 89521376, "body": "@Cyrus -- Table2 is the desired output.  It shows the resulting &quot;Country&quot; column with data added. Thanks."}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 1, "creation_date": 1531250555, "post_id": 51271291, "comment_id": 89523329, "body": "Why do you need Table1, Firstname column already includes the country as the last word?"}, {"owner": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "reply_to_user": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1531255436, "post_id": 51271291, "comment_id": 89525396, "body": "@karakfa -- apologies for the confusion.  Table2/Firstname column could also have content e.g. of David, Havana.   No country included there.  Needs to be obtained from Table1."}, {"owner": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1531255569, "post_id": 51271291, "comment_id": 89525459, "body": "@Ed Morton -- Table2 above is my required output.  Table2 but with a blank &quot;Country&quot; column is the starting point, i.e. I have 2 Tables as the starting point.  &quot;Harry Varadero&quot; e.g. is the data I&#39;m starting with in a &quot;vague&quot; format."}, {"owner": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1531256707, "post_id": 51271291, "comment_id": 89525924, "body": "@ed -- I will need to manually adjust the data after-the-fact for any issues e.g. Cuba, Kansas, USA.  Can&#39;t be avoided in the input files unfortunately.  Not expecting many issues."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 0, "creation_date": 1531247351, "post_id": 51271732, "comment_id": 89521963, "body": "Thanks.  I&#39;m a perl novice and am getting an error with your script.  I added it to a perljoin.txt file and ran from its folder in Mac Terminal   &gt; perl perljoin.txt -----&gt; Can&#39;t locate List/AllUtils.pm in @INC (you may need to install the List::AllUtils module)"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 2, "creation_date": 1531248843, "post_id": 51271732, "comment_id": 89522607, "body": "I have replaced it with List::Util, which you hopefully already have installed."}, {"owner": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 0, "creation_date": 1531254472, "post_id": 51271732, "comment_id": 89524983, "body": "I&#39;ve installed both List/AllUtils and also DBD::CSV using CPAN.  I reran version 1 of the code and get this error message ----&gt;   Can&#39;t locate object method &quot;selectall_array&quot; via package &quot;DBI::db&quot; at perljoin.txt line 12.   I get exactly the same error when I run Version 2."}, {"owner": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 0, "creation_date": 1531255094, "post_id": 51271732, "comment_id": 89525250, "body": ".....and when I try to install this:    install DBI::db  Reading &#39;/Users/fred/.cpan/Metadata&#39;   Database was generated on Tue, 10 Jul 2018 15:29:02 GMT Warning: Cannot install DBI::db, don&#39;t know what it is."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1531272021, "post_id": 51271732, "comment_id": 89529759, "body": "Tip: One usually wants <code>PrintError =&gt; 0</code> with <code>RaiseError =&gt; 1</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1531272105, "post_id": 51271732, "comment_id": 89529773, "body": "Tip: Passing <code>f_dir =&gt; &quot;&#47;tmp&quot;</code> to <code>connect</code> is better than <code>chdir &#39;&#47;tmp&#39;;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 2, "creation_date": 1531272323, "post_id": 51271732, "comment_id": 89529812, "body": "@s2016, DBI::db is the namespace used internally by DBI for database handles (<code>$dbh</code>). Try upgrading DBI (<code>cpan DBI</code>). Maybe your version doesn&#39;t have <code>$dbh-&gt;selectall_array</code>?"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 6, "last_activity_date": 1531248813, "last_edit_date": 1531248813, "creation_date": 1531246417, "answer_id": 51271732, "question_id": 51271291, "link": "https://stackoverflow.com/questions/51271291/how-to-use-awk-to-solve-this-2-table-data-join/51271732#51271732", "title": "How to use AWK to solve this 2 Table Data Join?", "body": "<pre><code>use DBI qw();\nrequire DBD::CSV;\nuse List::Util 1.45 qw(uniq);\n\nchdir '/tmp'; # location of csv files\nmy $dbh = DBI-&gt;connect(\"dbi:CSV:\", undef, undef, {\n    f_ext =&gt; '.csv',\n    csv_sep_char =&gt; \"\\t\",\n    RaiseError =&gt; 1,\n}) or die \"Cannot connect: $DBI::errstr\";\n\nfor my $country (\n    uniq map { $_-&gt;[0] }\n    # sql distinct not implemented\n    $dbh-&gt;selectall_array('select country from table1')\n) {\n    $dbh-&gt;do(\n        'update table2 set Country = ? where Firstname like ' .\n            $dbh-&gt;quote(\"%$country%\"),\n        {},\n        $country\n    );\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 0, "creation_date": 1531257143, "post_id": 51273700, "comment_id": 89526089, "body": "Thanks. Will this gawk work for a Firstname field = Fred, Havana ?  I&#39;ve updated the OP for clarity.  i.e. There is not always a country embedded in the Firstname field -- that&#39;s why I need to &quot;Join&quot; with my Table1."}, {"owner": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 0, "creation_date": 1531261806, "post_id": 51273700, "comment_id": 89527677, "body": "Correct about the input files.  When I run the new GAWK I get no countries on the output ---------&gt; Firstname Fred, Havana James, (Varadero, Cuba) Jack (Cuba) Harry Varadero, Cuba Josh Cuba Gary, Mavinga &amp; Other, Angola Jamie, (Angola)\tCountry"}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1531263887, "post_id": 51273700, "comment_id": 89528177, "body": "@EdMorton: Habits die hard in late 50&#39;s"}, {"owner": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 0, "creation_date": 1531264545, "post_id": 51273700, "comment_id": 89528313, "body": "@dawg -- when I copy/pasted both input text from OP and rerun I get this error output ----&gt; Firstname\tCountry Fred, Havana\t James, (Varadero, Cuba)\t Jack (Cuba)\t Harry Varadero, Cuba\t Gary, Mavinga &amp; Other, Angola\t Jamie, (Angola)"}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "reply_to_user": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 0, "creation_date": 1531267766, "post_id": 51273700, "comment_id": 89528893, "body": "It is likely that you file is not tab delimited then"}, {"owner": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 0, "creation_date": 1531268469, "post_id": 51273700, "comment_id": 89529006, "body": "I can try with | pipe-delimited files for input and output to test it.  How should your script be changed?  Thanks."}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "reply_to_user": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 0, "creation_date": 1531269330, "post_id": 51273700, "comment_id": 89529173, "body": "If you mean using <code>|</code> to delimit fields, just change <code>\\t</code> to <code>|</code> wherever you see it."}, {"owner": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 0, "creation_date": 1531327800, "post_id": 51273700, "comment_id": 89559001, "body": "Thanks - your code works.  After I clean-up the input files with both a | pipe-delimited (or tabs).  Could you help me to understand your Awk code a little?"}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "reply_to_user": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 0, "creation_date": 1531332955, "post_id": 51273700, "comment_id": 89561439, "body": "@s2016: Great. I added comments. If this works for you, please consider accepting the answer."}, {"owner": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 0, "creation_date": 1531504270, "post_id": 51273700, "comment_id": 89636622, "body": "I\u2019d like to exec the awk via a text file from Mac bash command line and am having problems formatting it. Getting \u2018 and {} positions wrong."}], "tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 1, "last_activity_date": 1531335916, "last_edit_date": 1531335916, "creation_date": 1531255831, "answer_id": 51273700, "question_id": 51271291, "link": "https://stackoverflow.com/questions/51271291/how-to-use-awk-to-solve-this-2-table-data-join/51273700#51273700", "title": "How to use AWK to solve this 2 Table Data Join?", "body": "<p><strong>If</strong> I understand what you are doing, it is taking the first (city) and second column (country) of this <code>\\t</code> delimited file:</p>\n\n<pre><code>city_ascii  country iso2\nMavinga Angola  AO\nMenongue    Angola  AO\nMucusso Angola  AO\nGuines  Cuba    CU\nHavana  Cuba    CU\nHolguin Cuba    CU\nLas Tunas   Cuba    CU\nManzanillo  Cuba    CU\nMatanzas    Cuba    CU\nMoron   Cuba    CU\nSanta   Clara   Cuba    CU\nVaradero    Cuba    CU\n</code></pre>\n\n<p>And matching the string in this filetogether with this single column file:</p>\n\n<pre><code>Firstname\nFred, Havana, Cuba\nJames, (Varadero, Cuba)\nJack (Cuba)\nHarry Varadero, Cuba\nJosh Cuba\nGary, Mavinga &amp; Other, Angola\nJamie, (Angola)\n</code></pre>\n\n<p>To produce the two column file in your example. </p>\n\n<p>The <code>awk</code> does that:</p>\n\n<pre><code>awk -F '\\t' 'FNR==NR{city[$1]=$2; ct[$2]; next}\n             # ^^ FNR==NR means it is the first file; set city and country      \n     FNR==1 {printf \"%s\\t%s\\n\", $0,\"Country\"; next}\n     # ^^   second file, first line - print the header   \n     {split($0, arr, /[^[:alpha:]]/)\n      # ^ split word like things from paren, punctuation, etc\n      for (e in arr) {s=arr[e]   # loop over those words\n                      if (s in city) { printf \"%s\\t%s\\n\", $0,city[s]; next }\n                      # ^ a city? print that\n                      if (s in ct) { printf \"%s\\t%s\\n\", $0,s; next }}\n                      # ^ a country? print that\n                      }' file1 file2\nFirstname   Country\nFred, Havana    Cuba\nJames, (Varadero, Cuba) Cuba\nJack (Cuba) Cuba\nHarry Varadero, Cuba    Cuba\nJosh Cuba   Cuba\nGary, Mavinga &amp; Other, Angola   Angola\nJamie, (Angola) Angola\n</code></pre>\n\n<p>The <code>next</code> statements tell <code>awk</code> to go to the next line of the file.</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 0, "creation_date": 1531259552, "post_id": 51273999, "comment_id": 89526997, "body": "When I run this I get output of ----------&gt; Firstname,Country &quot;Fred, Havana&quot;, &quot;James, (Varadero, Cuba)&quot;, Jack (Cuba), &quot;Harry Varadero, Cuba&quot;, Josh Cuba, &quot;Gary, Mavinga &amp; Other, Angola&quot;, &quot;Jamie, (Angola)&quot;,     --------&gt; i.e. missing the Country name.  Thanks."}, {"owner": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 0, "creation_date": 1531262321, "post_id": 51273999, "comment_id": 89527798, "body": "I now get wrong output as follows -----&gt;  Firstname Fred, Havana James, (Varadero, Cuba) Jack (Cuba) Harry Varadero, Cuba Josh Cuba Gary, Mavinga &amp; Other, Angola Jamie, (Angola)"}, {"owner": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 0, "creation_date": 1531262475, "post_id": 51273999, "comment_id": 89527842, "body": "If any easier both input files can be | pipe-delimited as can the output file."}, {"owner": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 0, "creation_date": 1531263112, "post_id": 51273999, "comment_id": 89528008, "body": "Ed -- I just replicated the same error by doing the following:  I copy/pasted from my OP above the &quot;TABLE1 (Input)&quot; into Table3.txt.  Ditto for TABLE2 (Input) into Table4.txt.  In that order.  I ran:  awk -f tst.awk Table3.txt Table4.txt &gt;output.txt"}, {"owner": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 0, "creation_date": 1531264183, "post_id": 51273999, "comment_id": 89528233, "body": "I&#39;m on Mac High Sierra running GNU Awk 4.2.1, API: 2.0 (GNU MPFR 4.0.1, GNU MP 6.1.2)."}, {"owner": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 0, "creation_date": 1531269336, "post_id": 51273999, "comment_id": 89529176, "body": "Done -- please see the OP."}, {"owner": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 0, "creation_date": 1531325925, "post_id": 51273999, "comment_id": 89558020, "body": "Thanks - you are correct and the script now works.  Trying to understand the code (I am an Awk newbie).  Can you explain this part? ---&gt;  {     orig = $0     country = &quot;&quot;     gsub(/[^[:alpha:]]/,&quot; &quot;)     for (i=NF; i&gt;0; i--) {         if ($i in map) {             country = map[$i]             break         }     }     print orig, country }"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 0, "creation_date": 1531356081, "post_id": 51273999, "comment_id": 89569211, "body": "that saves the original input, then converts all non-alphanumeric characters in the line to blanks so all that&#39;s left is a series of alphanumeric strings/words, then loops backwards from the end stopping at the first one that appears to be the name of a country as stored in the map[] array. Then it prints the original input followed by the derived country."}, {"owner": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 0, "creation_date": 1531504419, "post_id": 51273999, "comment_id": 89636682, "body": "\u2014 rather than matching words from right to left can this be reversed?  First words are more accurate matches."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "edited": false, "score": 1, "creation_date": 1531505039, "post_id": 51273999, "comment_id": 89636967, "body": "Of course. Just look at the loop <code>for (i=NF; i&gt;0; i--)</code>, the syntax to flip it should be obvious <code>for (i=1; i&lt;=NF; i++)</code>, but in the example you provided in your question, e.g. <code>James, (Varadero, Cuba)</code>, right to left is clearly the way to go to determine the country as otherwise you&#39;ll be guessing at countries based on peoples names when the country is right there in the input."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": 1, "last_activity_date": 1531257389, "creation_date": 1531257389, "answer_id": 51273999, "question_id": 51271291, "link": "https://stackoverflow.com/questions/51271291/how-to-use-awk-to-solve-this-2-table-data-join/51273999#51273999", "title": "How to use AWK to solve this 2 Table Data Join?", "body": "<p>It sounds like this might be what you're looking for:</p>\n\n<pre><code>$ cat tst.awk\nBEGIN { FS=OFS=\"\\t\" }\nNR==FNR {\n    map[$1] = $2\n    map[$2] = $2\n    next\n}\nFNR==1 {\n    print\n    FS=\" \"\n    next\n}\n{\n    orig = $0\n    country = \"\"\n    gsub(/[^[:alpha:]]/,\" \")\n    for (i=NF; i&gt;0; i--) {\n        if ($i in map) {\n            country = map[$i]\n            break\n        }\n    }\n    print orig, country\n}\n\n$ awk -f tst.awk file1 file2\nFirstname       Country\nFred, Havana    Cuba\nJames, (Varadero, Cuba) Cuba\nJack (Cuba)     Cuba\nHarry Varadero, Cuba    Cuba\nJosh Cuba       Cuba\nGary, Mavinga &amp; Other, Angola   Angola\nJamie, (Angola) Angola\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 6014422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74871664cd7cbe2c1c43dd682d0d3a36?s=128&d=identicon&r=PG&f=1", "display_name": "s2016", "link": "https://stackoverflow.com/users/6014422/s2016"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 51273999, "answer_count": 3, "score": -2, "last_activity_date": 1531335916, "creation_date": 1531244492, "last_edit_date": 1531269269, "question_id": 51271291, "link": "https://stackoverflow.com/questions/51271291/how-to-use-awk-to-solve-this-2-table-data-join", "title": "How to use AWK to solve this 2 Table Data Join?", "body": "<p>I have 2 data tables as shown (they are 2 x tab-delimited files).\nI'm trying to populate the Table-2 Country column with the corresponding country from Table-1. Need to \"join\" from info in Table-2's Firstname field.</p>\n\n<p><a href=\"https://i.stack.imgur.com/UxPJF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UxPJF.png\" alt=\"2 INPUT TABLES &amp; DESIRED RESULT\"></a></p>\n\n<p>What's the best approach here, given the complexity of the data in the Table-2, Firstname column?  Would other Mac tools be better to use than AWK e.g. Excel formulae, Perl, Filemaker etc?</p>\n\n<p>TABLE1 (Input):</p>\n\n<pre><code>city_ascii  country iso2\nMavinga Angola  AO\nMenongue    Angola  AO\nMucusso Angola  AO\nGuines  Cuba    CU\nHavana  Cuba    CU\nHolguin Cuba    CU\nLas Tunas   Cuba    CU\nManzanillo  Cuba    CU\nMatanzas    Cuba    CU\nMoron   Cuba    CU\nSanta Clara Cuba    CU\nVaradero    Cuba    CU\n</code></pre>\n\n<p>TABLE2 (Input):</p>\n\n<pre><code>Firstname\nFred, Havana\nJames, (Varadero, Cuba)\nJack (Cuba)\nHarry Varadero, Cuba\nJosh Cuba\nGary, Mavinga &amp; Other, Angola\nJamie, (Angola)\n</code></pre>\n\n<p>TABLE2 (Result):</p>\n\n<pre><code>Firstname   Country\nFred, Havana  Cuba\nJames, (Varadero, Cuba) Cuba\nJack (Cuba) Cuba\nHarry Varadero, Cuba    Cuba\nJosh Cuba   Cuba\nGary, Mavinga &amp; Other, Angola   Angola\nJamie, (Angola) Angola\n</code></pre>\n\n<p>============\nHere is debugging info in answer to Ed's Qs below:</p>\n\n<pre><code>awk -F'\\t' '{print NF\"&lt;\"$1\"&gt;&lt;\"$2\"&gt;&lt;\"$3\"&gt;\"}' Table3.txt | cat -v\n\n    1&lt;city_ascii  country iso2&gt;&lt;&gt;&lt;&gt;\n    1&lt;Mavinga Angola  AO&gt;&lt;&gt;&lt;&gt;\n    1&lt;Menongue    Angola  AO&gt;&lt;&gt;&lt;&gt;\n    1&lt;Mucusso Angola  AO&gt;&lt;&gt;&lt;&gt;\n    1&lt;Guines  Cuba    CU&gt;&lt;&gt;&lt;&gt;\n    1&lt;Havana  Cuba    CU&gt;&lt;&gt;&lt;&gt;\n    1&lt;Holguin Cuba    CU&gt;&lt;&gt;&lt;&gt;\n    1&lt;Las Tunas   Cuba    CU&gt;&lt;&gt;&lt;&gt;\n    1&lt;Manzanillo  Cuba    CU&gt;&lt;&gt;&lt;&gt;\n    1&lt;Matanzas    Cuba    CU&gt;&lt;&gt;&lt;&gt;\n    1&lt;Moron   Cuba    CU&gt;&lt;&gt;&lt;&gt;\n    1&lt;Santa Clara Cuba    CU&gt;&lt;&gt;&lt;&gt;\n    1&lt;Varadero    Cuba    CU&gt;&lt;&gt;&lt;&gt;\n\n    ==============\n    awk -F'\\t' '{print NF\"&lt;\"$1\"&gt;&lt;\"$2\"&gt;&lt;\"$3\"&gt;\"}' Table4.txt | cat -v\n\n    1&lt;Firstname&gt;&lt;&gt;&lt;&gt;\n    1&lt;Fred, Havana&gt;&lt;&gt;&lt;&gt;\n    1&lt;James, (Varadero, Cuba)&gt;&lt;&gt;&lt;&gt;\n    1&lt;Jack (Cuba)&gt;&lt;&gt;&lt;&gt;\n    1&lt;Harry Varadero, Cuba&gt;&lt;&gt;&lt;&gt;\n    1&lt;Josh Cuba&gt;&lt;&gt;&lt;&gt;\n    1&lt;Gary, Mavinga &amp; Other, Angola&gt;&lt;&gt;&lt;&gt;\n    1&lt;Jamie, (Angola)&gt;&lt;&gt;&lt;&gt;\n\n    ===============\n    cat -v tst.awk\n\n    BEGIN { FS=OFS=\"\\t\" }\n    NR==FNR {\n        map[$1] = $2\n        map[$2] = $2\n        next\n    }\n    FNR==1 {\n        print\n        FS=\" \"\n        next\n    }\n    {\n        orig = $0\n        country = \"\"\n        gsub(/[^[:alpha:]]/,\" \")\n        for (i=NF; i&gt;0; i--) {\n            if ($i in map) {\n                country = map[$i]\n                break\n            }\n        }\n        print orig, country\n    }\n\n    ===============\n    awk -f tst.awk Table3.txt Table4.txt &gt;output.txt\n\n    Firstname\n    Fred, Havana    \n    James, (Varadero, Cuba) \n    Jack (Cuba) \n    Harry Varadero, Cuba    \n    Josh Cuba   \n    Gary, Mavinga &amp; Other, Angola   \n    Jamie, (Angola) \n\n    ================\n    awk -F'\\t' '{print NF\"&lt;\"$1\"&gt;&lt;\"$2\"&gt;&lt;\"$3\"&gt;\"}' output.txt | cat -v\n\n    1&lt;Firstname&gt;&lt;&gt;&lt;&gt;\n    2&lt;Fred, Havana&gt;&lt;&gt;&lt;&gt;\n    2&lt;James, (Varadero, Cuba)&gt;&lt;&gt;&lt;&gt;\n    2&lt;Jack (Cuba)&gt;&lt;&gt;&lt;&gt;\n    2&lt;Harry Varadero, Cuba&gt;&lt;&gt;&lt;&gt;\n    2&lt;Josh Cuba&gt;&lt;&gt;&lt;&gt;\n    2&lt;Gary, Mavinga &amp; Other, Angola&gt;&lt;&gt;&lt;&gt;\n    2&lt;Jamie, (Angola)&gt;&lt;&gt;&lt;&gt;\n</code></pre>\n"}, {"tags": ["regex", "perl", "multiline"], "answers": [{"tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": true, "score": 0, "last_activity_date": 1531243377, "creation_date": 1531243377, "answer_id": 51271030, "question_id": 51270909, "link": "https://stackoverflow.com/questions/51270909/perl-multiline-issue-need-one-liner-to-print-last-match-before-string-in-file/51271030#51271030", "title": "perl multiline issue: need one liner to print last match before string in file", "body": "<p>You could use</p>\n\n<pre><code>^\n(\\d{4}-\\d{2}-\\d{2}\\ \\d+:\\d+:\\d+):\n(?:(?!^\\d{4})[\\s\\S])+?\n\\QTHIS IS MATCHED STRING\\E\n</code></pre>\n\n<p>See <a href=\"https://regex101.com/r/wlL8sp/1/\" rel=\"nofollow noreferrer\"><strong>a demo on regex101.com</strong></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 7144835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/821fd38e11a4b6032cdf9bd6bbb54adb?s=128&d=identicon&r=PG&f=1", "display_name": "Wayne A.", "link": "https://stackoverflow.com/users/7144835/wayne-a"}, "edited": false, "score": 0, "creation_date": 1531251216, "post_id": 51271644, "comment_id": 89523672, "body": "Definitely easier to understand.   I&#39;ll keep note of that.  Thanks!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 39, "user_id": 7144835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/821fd38e11a4b6032cdf9bd6bbb54adb?s=128&d=identicon&r=PG&f=1", "display_name": "Wayne A.", "link": "https://stackoverflow.com/users/7144835/wayne-a"}, "edited": false, "score": 0, "creation_date": 1531331991, "post_id": 51271644, "comment_id": 89561003, "body": "@WayneA. Welcome :)  Also note that there are often two ways about it -- either it&#39;s all done in a regex which then may end up being advanced and tricky, or with basic processing and elementary regex."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1531428267, "last_edit_date": 1531428267, "creation_date": 1531246031, "answer_id": 51271644, "question_id": 51270909, "link": "https://stackoverflow.com/questions/51270909/perl-multiline-issue-need-one-liner-to-print-last-match-before-string-in-file/51271644#51271644", "title": "perl multiline issue: need one liner to print last match before string in file", "body": "<p>For a fairly elementary approach, which avoids an involved regex, process line by line and when a timestamp pattern is matched record it. Then as you run into pattern <code>THIS...</code> you will have had the (last) previous timestamp.</p>\n\n<pre><code>perl -wnE'\n    $ts = $1 if /(\\d{4}-\\d{2}-\\d{2}[ ]\\d{2}:\\d{2}:\\d{2})/; \n    say $ts // \"no previous time stamp\"  if /THIS IS MATCHED STRING/;\n' file.txt\n</code></pre>\n\n<p>If the timestamp is captured and saved with <code>($ts) = /.../</code> then failed matches on lines without it turn it <code>undef</code>, so it may not be there when <code>THIS</code> is found. Thus it is saved from <code>$1</code> only once there is a match.</p>\n\n<p>The defined-or (<code>//</code>) on <code>$ts</code> is used in case the file had no time stamps at all before <code>THIS</code></p>\n"}], "owner": {"reputation": 39, "user_id": 7144835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/821fd38e11a4b6032cdf9bd6bbb54adb?s=128&d=identicon&r=PG&f=1", "display_name": "Wayne A.", "link": "https://stackoverflow.com/users/7144835/wayne-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 51271030, "answer_count": 2, "score": 1, "last_activity_date": 1531428267, "creation_date": 1531242897, "question_id": 51270909, "link": "https://stackoverflow.com/questions/51270909/perl-multiline-issue-need-one-liner-to-print-last-match-before-string-in-file", "title": "perl multiline issue: need one liner to print last match before string in file", "body": "<p>I have a log file like this:</p>\n\n<pre><code>2018-07-10 10:03:01: random text1\n2018-07-10 10:03:02: random text2\n2018-07-10 10:03:03: random text3\n    more text\n    and more\n    THIS IS MATCHED STRING\n2018-07-10 10:03:04: random text4\n</code></pre>\n\n<p>I want to use a perl one-liner to find the most recent timestamp before \"THIS IS MATCHED STRING\".</p>\n\n<p>I tried this:</p>\n\n<pre><code>perl -0777 -nle 'print \"$1\\n\" while m/(\\d\\d\\d\\d-\\d\\d-\\d\\d \\d\\d:\\d\\d:\\d\\d).+?THIS IS MATCHED STRING/sg'\n</code></pre>\n\n<p>But it matched the first timestamp, \"2018-07-10 10:03:01\" instead of the \"2018-07-10 10:03:03\" that I wanted.   Obviously (at least I think), I don't have a good understanding of how the greedy/lazy matching is working.   </p>\n\n<p>Any help would be appreciated!</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 4, "last_activity_date": 1531240546, "creation_date": 1531240546, "answer_id": 51270310, "question_id": 51270144, "link": "https://stackoverflow.com/questions/51270144/read-all-files-of-a-directory-or-only-one-file/51270310#51270310", "title": "Read all files of a directory or only one file", "body": "<p>You can use the <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\"><code>-d</code> built-in</a> to check if something is a directory, or the <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\"><code>-f</code> built-in</a> to check if it's a file. One or the other will do, but it's safer to check both so you can catch input that is neither.</p>\n\n<pre><code>if ( -d $file_or_dir ) {\n    # it's a directory ...\n} \nelsif ( -f $file_or_directory ) {\n    # it's a file ...\nelse {\n    # it's bad input, so neither\n}\n</code></pre>\n\n<p>The command line arguments are in <a href=\"https://perldoc.perl.org/perlvar.html#%40ARGV\" rel=\"nofollow noreferrer\"><code>@ARGV</code></a>. It's a simple array that you can read from. You could easily wrap your whole program in a loop so it works for multiple arguments.</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1531242060, "post_id": 51270319, "comment_id": 89519479, "body": "Why are you insisting on perl v5.10?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1531244925, "post_id": 51270319, "comment_id": 89520884, "body": "@Borodin To demonstrate good habits. <code>say</code> and <code>state</code> are available without having to think about it. I consider <code>strict</code>, <code>warnings</code>, <code>v5.10</code>, and <code>autodie</code> standard headers to plug some of the worst gotchas."}, {"owner": {"reputation": 103, "user_id": 7526615, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sdoo3rMCmaw/AAAAAAAAAAI/AAAAAAAAAR0/kSG2ip-VjKQ/photo.jpg?sz=128", "display_name": "Tesla001", "link": "https://stackoverflow.com/users/7526615/tesla001"}, "edited": false, "score": 0, "creation_date": 1531246117, "post_id": 51270319, "comment_id": 89521397, "body": "Thank you for your help @Schwern, this worked perfectly."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 4, "last_activity_date": 1531240585, "creation_date": 1531240585, "answer_id": 51270319, "question_id": 51270144, "link": "https://stackoverflow.com/questions/51270144/read-all-files-of-a-directory-or-only-one-file/51270319#51270319", "title": "Read all files of a directory or only one file", "body": "<p>Yes, you can use the <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\">file test operators</a> to check things about a file. <code>-f</code> to check if it's a regular file, <code>-d</code> to check if it's a directory, and a bunch of others to check for other things.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie;\nuse v5.10;\n\nmy $arg = shift;\nmy @files;\n\nif( -d $arg ) {\n    opendir my $dh, $arg;\n    @files = readdir $dh;\n}\nelsif( -f $arg ) {\n    push @files, $arg;\n}\nelse {\n    die \"$arg is neither a file nor directory\";\n}\n</code></pre>\n\n<p>Don't forget to filter <code>.</code> and <code>..</code> out from <code>readdir</code>. Consider using <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> instead.</p>\n"}], "owner": {"reputation": 103, "user_id": 7526615, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sdoo3rMCmaw/AAAAAAAAAAI/AAAAAAAAAR0/kSG2ip-VjKQ/photo.jpg?sz=128", "display_name": "Tesla001", "link": "https://stackoverflow.com/users/7526615/tesla001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1531240585, "creation_date": 1531239926, "last_edit_date": 1531240077, "question_id": 51270144, "link": "https://stackoverflow.com/questions/51270144/read-all-files-of-a-directory-or-only-one-file", "title": "Read all files of a directory or only one file", "body": "<p>How can I write a script that reads all files from a specific directory or only one file from a specific directory depending on what the user provides as argument?</p>\n\n<p>I know that I can open all files from a directory using the following:</p>\n\n<pre><code>opendir my $dh, $dir or die \"Could not open '$dir' for reading: $!\\n\";\n\nmy @files = readdir($dh);\n\n{\n\n#Do something\n\n}\n\nclosedir($dh);\n</code></pre>\n\n<p>I also know that I can open only one file from a directory using the following:</p>\n\n<pre><code>my $src = $ARGV[0];\n\nopen(SRC,'&lt;',$src) or die $!;\n\n{\n\n#Do something\n\n}\n\nclose(SRC);\n</code></pre>\n\n<p>Is there a way to detect what the user is providing as argument in order to know if the argument is a directory or only a file? If so, how can it be achieved?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 35, "user_id": 4633772, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MoLgS8yk4q0/AAAAAAAAAAI/AAAAAAAABR4/UUlSWLmnzk4/photo.jpg?sz=128", "display_name": "Chris Boone", "link": "https://stackoverflow.com/users/4633772/chris-boone"}, "edited": false, "score": 0, "creation_date": 1531234113, "post_id": 51268074, "comment_id": 89514746, "body": "The backslash character usually means an escape.  Surely it couldn&#39;t be this easy: Are the last, four lines really just subbing(in order) +r for -s, +m for -m, +p for -p, and +cp for -cp?  I&#39;m going to feel like a moron if it&#39;s that simple..."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1531235167, "post_id": 51268074, "comment_id": 89515440, "body": "It is that simple"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1531236018, "post_id": 51268074, "comment_id": 89516084, "body": "Why don&#39;t you post the whole script. ?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1531242847, "post_id": 51268074, "comment_id": 89519864, "body": "You&#39;ve got it backwards, though; in the last four lines, <code>+r</code> is being replaced with <code>-s</code>, <code>+m</code> is being replaced with <code>-m</code>, etc."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1531297937, "post_id": 51268074, "comment_id": 89538831, "body": "<i>&quot;I know that &quot;$parm=~s/&quot; makes the value of &#39;$parm&#39; equal to the return on the substitution regex(es).&quot;</i> Sorry, that&#39;s not correct: <code>$y =~ s&#47;...&#47;...&#47;;</code> means &quot;run this search/replace regex on <code>$y</code>, modifying <code>$y</code>.&quot; <code>$x = $y=~s&#47;&#47;&#47;;</code> means &quot;run the regex on the value of <code>$y</code>, modifying <code>$y</code>, and assign the return value of that operation, which is the number of substitutions made, to <code>$x</code>&quot;. <code>$x = $y=~s&#47;&#47;&#47;r</code> (Perl &gt;=5.14) means &quot;run the regex on the value of <code>$y</code>, not modifying it, and assign the modified string to <code>$x</code>.&quot; <a href=\"https://www.perlmonks.org/?node_id=1215373\" rel=\"nofollow noreferrer\">See also</a>."}, {"owner": {"reputation": 35, "user_id": 4633772, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MoLgS8yk4q0/AAAAAAAAAAI/AAAAAAAABR4/UUlSWLmnzk4/photo.jpg?sz=128", "display_name": "Chris Boone", "link": "https://stackoverflow.com/users/4633772/chris-boone"}, "edited": false, "score": 0, "creation_date": 1531397789, "post_id": 51268074, "comment_id": 89587454, "body": "Thank you for the clarification.  I greatly appreciate it."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 4633772, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MoLgS8yk4q0/AAAAAAAAAAI/AAAAAAAABR4/UUlSWLmnzk4/photo.jpg?sz=128", "display_name": "Chris Boone", "link": "https://stackoverflow.com/users/4633772/chris-boone"}, "edited": false, "score": 0, "creation_date": 1531236112, "post_id": 51268389, "comment_id": 89516144, "body": "Yep.  I feel stupid.  I was trying to make it too hard, when I should have just looked at what was there.  Thank you so much for your answer, Mr. Abercrombie.  It was most helpful.  I was scrambling around the net, looking for the definition of the &quot;+/-cp&quot; flag, when I should have just looked at the positioning of the escape characters.  Thank you, again."}], "tags": [], "owner": {"reputation": 371, "user_id": 5941270, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SUN0cJxejpM/AAAAAAAAAAI/AAAAAAAAAFw/GRkavdkMb-k/photo.jpg?sz=128", "display_name": "Daniel Abercrombie", "link": "https://stackoverflow.com/users/5941270/daniel-abercrombie"}, "is_accepted": false, "score": 6, "last_activity_date": 1531235347, "last_edit_date": 1531235347, "creation_date": 1531234446, "answer_id": 51268389, "question_id": 51268074, "link": "https://stackoverflow.com/questions/51268074/what-is-this-perl-script-snippet-doing/51268389#51268389", "title": "What is this perl script snippet doing?", "body": "<p>You have the open right.</p>\n\n<p>The next line depends on the value of <code>$/</code> which separates input lines for you. The default is a newline. If there is something like <code>local $/;</code> before this snippet, or <code>$/ = undef;</code>, then the lines won't be separated. Under default behavior, the second line will only read the first line of the log file for you. If <code>$/</code> is undefined, the entire file will be read in.</p>\n\n<p>The third line with the <a href=\"https://perldoc.perl.org/functions/chop.html\" rel=\"nofollow noreferrer\">chop</a> removes the last character from <code>$parm</code>. (<a href=\"https://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow noreferrer\">chomp</a> is generally is a safer alternative that only removes the end if it is whatever <code>$/</code> is holding. There's likely no difference since your line should end with a single character <code>$/</code>, but you never know...)</p>\n\n<p>The next few lines about closing and deleting the file are correct.</p>\n\n<p><code>/ABORT/</code> searches the <code>$parm</code> string for the pattern <code>\"ABORT\"</code>.</p>\n\n<p>The substitutions at the end are all literal changes of <code>+r</code> to <code>-s</code> and conditional <code>+</code> to <code>-</code> (depending on the characters that follow) in the <code>$parm</code> string.</p>\n\n<p>It might be helpful to print <code>$parm</code> along the way, so you can see what's happening.</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 4633772, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MoLgS8yk4q0/AAAAAAAAAAI/AAAAAAAABR4/UUlSWLmnzk4/photo.jpg?sz=128", "display_name": "Chris Boone", "link": "https://stackoverflow.com/users/4633772/chris-boone"}, "edited": false, "score": 0, "creation_date": 1531397740, "post_id": 51283401, "comment_id": 89587418, "body": "Thank you, Mr. Cross.  That helps me a great deal.  I guess I was just overthinking it."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 5, "last_activity_date": 1532681470, "last_edit_date": 1532681470, "creation_date": 1531305666, "answer_id": 51283401, "question_id": 51268074, "link": "https://stackoverflow.com/questions/51268074/what-is-this-perl-script-snippet-doing/51283401#51283401", "title": "What is this perl script snippet doing?", "body": "<pre><code>open(fitmp,\"&lt;/tmp/new_parms$VAR.log\"); &lt;-- stores the file(?) in the file handler 'fitmp'\n</code></pre>\n\n<p>Opens the file and associates it with a filehandle (which means you can use the filehandle to access data from the file).</p>\n\n<p>In old-style Perl, you'll often see code like this (although, it's generally considered good practice to use all upper-case letters when using this style of filehandle). And you should always check the value returned from <code>open()</code> and take appropriate action.</p>\n\n<p>Newer Perl code will use a lexical variable for the filehandle and pass three arguments to <code>open()</code> (separating the file mode, <code>&lt;</code>, from the name).</p>\n\n<p>So I'd write this code as:</p>\n\n<pre><code>open(my $fitmp, '&lt;', '/tmp/new_parms$VAR.log')\n  or die \"Can't open '/tmp/new_parms$VAR.log': $!\";\n</code></pre>\n\n<p>Moving on...</p>\n\n<pre><code>$parm=&lt;fitmp&gt;;  &lt;-- stores the contents of the file in the variable \"$parm\"\n</code></pre>\n\n<p>Stores the first line of data from the file in <code>$parm</code>. This data will include the newline character from the end of that first line.</p>\n\n<pre><code>chop($parm);  &lt;-- stores the last line(character?) of the file in $parm\n</code></pre>\n\n<p>No. This removes the last character from the variable, <code>$parm</code>. I mentioned above that the data read from the file would include the newline character. This line of code removes it. Note, however, <code>chop()</code> is a slightly dangerous function to use (as it always removes the last character - even if it isn't a newline). Since Perl 5 was released (in 1994), we have the safer function <code>chomp()</code> which only removes newlines. You should use that instead.</p>\n\n<pre><code>close(fitmp);  &lt;-- closes the file\nunlink(\"/tmp/new_parms$VAR.log\";  &lt;-- deletes the file\n</code></pre>\n\n<p>Yes. Those two explanations are correct.</p>\n\n<pre><code>if($parm =~ /ABORT/){exit(1);}  &lt;-- closes the program if there is a problem\n</code></pre>\n\n<p>More specifically, if the data you've read from the file contains the string 'ABORT', then exit the program.</p>\n\n<pre><code>$parm=~s/\\+r/\\-s/;\n$parm=~s/\\+m/\\-m/;\n$parm=~s/\\+p/\\-p/;\n$parm=~s/\\+cp/\\-cp/;\n</code></pre>\n\n<p>You're right that <code>$var =~ s/PATTERN/STRING/</code> is doing a substitution on <code>$var</code>, but you're getting the details wrong. There's nothing about newlines or whitespace here.</p>\n\n<p>The important thing to realise about these four lines of code is that the <code>+</code> and <code>-</code> characters are all preceded by a <code>\\</code>. This has the effect of escaping them and means they match themselves, and don't have any of the special meaning that you mention in your question. It's also worth mentioning that there is no point in escaping the <code>-</code> characters in the replacement strings as the <code>-</code> has no special meaning in a string.</p>\n"}], "owner": {"reputation": 35, "user_id": 4633772, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MoLgS8yk4q0/AAAAAAAAAAI/AAAAAAAABR4/UUlSWLmnzk4/photo.jpg?sz=128", "display_name": "Chris Boone", "link": "https://stackoverflow.com/users/4633772/chris-boone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1532681470, "creation_date": 1531233572, "question_id": 51268074, "link": "https://stackoverflow.com/questions/51268074/what-is-this-perl-script-snippet-doing", "title": "What is this perl script snippet doing?", "body": "<p>I've been trying to search for resources on how to decode what is going on, here.  I've found several Perl \"cheat sheets\", but I'm having trouble finding definitions of the flags.  I've annotated what I think I know, and please correct me if I am mistaken.</p>\n\n<p>I know that \"$parm=~s/\" makes the value of '$parm' equal to the return on the substitution regex(es).  Beyond this, I'm lost.  I THINK that the line \"$parm=~s/+r/-s/;\" removes carriage returns and white spaces, but I'm not 100% sure.  The + and - characters on that and all subsequent lines are throwing me.  I thought that the + character denoted \"one or more\", but the presence of the - in the second parameter makes me doubt that.</p>\n\n<pre><code>open(fitmp,\"&lt;/tmp/new_parms$VAR.log\"); &lt;-- stores the file(?) in the file handler 'fitmp'\n$parm=&lt;fitmp&gt;;  &lt;-- stores the contents of the file in the variable \"$parm\"\nchop($parm);  &lt;-- stores the last line(character?) of the file in $parm\nclose(fitmp);  &lt;-- closes the file\nunlink(\"/tmp/new_parms$VAR.log\";  &lt;-- deletes the file\nif($parm =~ /ABORT/){exit(1);}  &lt;-- closes the program if there is a problem\n$parm=~s/\\+r/\\-s/;\n$parm=~s/\\+m/\\-m/;\n$parm=~s/\\+p/\\-p/;\n$parm=~s/\\+cp/\\-cp/;\n</code></pre>\n"}, {"tags": ["perl", "csv"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531242881, "post_id": 51267774, "comment_id": 89519879, "body": "<code>join(&#39;,&#39;, map { qq&#47;&quot;$person-&gt;{$_}&quot;&#47; } @head)</code> is better as <code>join(&#39;,&#39;, map { qq&#47;&quot;$_&quot;&#47; } @{$person}{@head})</code>"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 5, "last_activity_date": 1531233049, "creation_date": 1531233049, "answer_id": 51267900, "question_id": 51267774, "link": "https://stackoverflow.com/questions/51267774/is-there-added-value-in-using-textcsv-for-writing-output/51267900#51267900", "title": "Is there added value in using Text::CSV for writing output?", "body": "<p>Your CSV won't be valid if <code>$person-&gt;{col1}</code> contains <code>\"</code>. Also, all columns will be wrapped in double quotes, which might not be desired (e.g. numbers). You'll also get <code>\"\"</code> for undefined values, which might not work if you plan to load the CSV into a database that makes a distinction between <code>null</code> and <code>''</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1531241754, "post_id": 51269727, "comment_id": 89519319, "body": "Also, <code>Text::CSV</code> will, by default, use the XS  module <code>Text::CSV_XS</code> as its backend, which will be substantially faster than any non-trivial Perl equivalent."}], "tags": [], "owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "is_accepted": true, "score": 7, "last_activity_date": 1531238369, "creation_date": 1531238369, "answer_id": 51269727, "question_id": 51267774, "link": "https://stackoverflow.com/questions/51267774/is-there-added-value-in-using-textcsv-for-writing-output/51269727#51269727", "title": "Is there added value in using Text::CSV for writing output?", "body": "<p>For <strike>simple</strike> trivial data (which, admittedly, is quite common) there's no advantage. You can <code>join</code> , <code>print</code>, and go on your merry way. For a quick throw-away script that's likely all you need (and faster, too, if you'd need to consult the Text::CSV documentation).</p>\n\n<p>The advantages start when your data is non-trivial.</p>\n\n<ul>\n<li>Does it contain commas?</li>\n<li>Does it contain double-quotes?</li>\n<li>Does it contain newlines?</li>\n<li>Does it contain non-ASCII characters?</li>\n<li>Is there a distinction between <code>undef</code> (no value) and <code>''</code> (empty string)?</li>\n<li>Might you need to use a different separator (or let the user specify it)?</li>\n</ul>\n\n<p>For production code, the standard pro-module advice applies:</p>\n\n<ul>\n<li>Reuse instead of reinvent (particularly if you'll be generating more than one CSV file)</li>\n<li>It keeps your code cleaner (more consistent and with better separation of concerns)</li>\n<li>CPAN modules are often faster (better optimized), more robust (edge-case handling), and have a cleaner API than in-house solutions.</li>\n<li>The overhead of loading a module is almost certainly a non-issue.</li>\n</ul>\n"}], "owner": {"reputation": 387, "user_id": 1463788, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a87bd7788b25685b65135313865f5356?s=128&d=identicon&r=PG", "display_name": "ND Geek", "link": "https://stackoverflow.com/users/1463788/nd-geek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "accepted_answer_id": 51269727, "answer_count": 2, "score": 2, "last_activity_date": 1531238369, "creation_date": 1531232709, "last_edit_date": 1531234222, "question_id": 51267774, "link": "https://stackoverflow.com/questions/51267774/is-there-added-value-in-using-textcsv-for-writing-output", "title": "Is there added value in using Text::CSV for writing output?", "body": "<p>If I am writing tabular output to a file as CSV, what advantage does loading an extra module\n<a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\"><code>Text::CSV</code></a>\nand converting my data to an object get me over a basic loop and string manipulation? I have seen a couple of answers that suggest doing this: <a href=\"https://stackoverflow.com/a/2283266/1463788\"><em>How can I get column names and row data in order with DBI in Perl</em></a> and <a href=\"https://stackoverflow.com/questions/1444096/\"><em>How do I create a CSV file using Perl</em></a>.</p>\n\n<p>Loading up an entire module seems like overkill and significant overhead for something I can write in four lines of Perl (ignoring data retrieval, etc.):</p>\n\n<pre><code>my $rptText = join(',', map { qq/\"$_\"/ } @head) . \"\\n\";\n\nforeach my $person ( @$data ) {\n    $rptText .= join(',', map { qq/\"$person-&gt;{$_}\"/ } @head) . \"\\n\";\n}\n</code></pre>\n\n<p>So what does loading\n<code>Text::CSV</code>\nget me over the above code?</p>\n"}, {"tags": ["perl", "locale"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531232613, "post_id": 51267643, "comment_id": 89513720, "body": "have you installed the locale packages manually?"}, {"owner": {"reputation": 8378, "user_id": 2266042, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/78bba49bd539fb064b8bcf79874703d0?s=128&d=identicon&r=PG", "display_name": "John Crawford", "link": "https://stackoverflow.com/users/2266042/john-crawford"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531233035, "post_id": 51267643, "comment_id": 89514022, "body": "No, this is a clean install of 18.04"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531233651, "post_id": 51267643, "comment_id": 89514430, "body": "There are packages for them. See <a href=\"https://packages.ubuntu.com/bionic/locales\" rel=\"nofollow noreferrer\">packages.ubuntu.com/bionic/locales</a>. Try to install them."}, {"owner": {"reputation": 8378, "user_id": 2266042, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/78bba49bd539fb064b8bcf79874703d0?s=128&d=identicon&r=PG", "display_name": "John Crawford", "link": "https://stackoverflow.com/users/2266042/john-crawford"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531234202, "post_id": 51267643, "comment_id": 89514808, "body": "I&#39;ve already done &quot;sudo apt-get install locales&quot;."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1531237488, "post_id": 51267643, "comment_id": 89517052, "body": "<a href=\"https://packages.ubuntu.com/bionic/locales-all\" rel=\"nofollow noreferrer\">packages.ubuntu.com/bionic/locales-all</a> is the correct package (grep for <code>en_GB.utf8</code> in <a href=\"https://packages.ubuntu.com/bionic/amd64/locales-all/filelist\" rel=\"nofollow noreferrer\">filelist</a>), <code>locales</code> contains only directories."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1531237751, "post_id": 51267643, "comment_id": 89517215, "body": "I just did a quick google @daxim. Didn&#39;t actually check in detail."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1531298253, "post_id": 51267643, "comment_id": 89539021, "body": "When you ran <code>dpkg-reconfigure locales</code>, did you make sure that both <code>en_GB.UTF-8</code> and <code>en_US.UTF-8</code> are selected/generated?"}, {"owner": {"reputation": 8378, "user_id": 2266042, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/78bba49bd539fb064b8bcf79874703d0?s=128&d=identicon&r=PG", "display_name": "John Crawford", "link": "https://stackoverflow.com/users/2266042/john-crawford"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1531307541, "post_id": 51267643, "comment_id": 89545260, "body": "@haukex, I have no idea how I missed that. That worked, cheers"}], "owner": {"reputation": 8378, "user_id": 2266042, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/78bba49bd539fb064b8bcf79874703d0?s=128&d=identicon&r=PG", "display_name": "John Crawford", "link": "https://stackoverflow.com/users/2266042/john-crawford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1074, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1531232358, "creation_date": 1531232358, "question_id": 51267643, "link": "https://stackoverflow.com/questions/51267643/perl-failed-locales-how-do-you-set-it", "title": "Perl failed locales. How do you set it?", "body": "<p>I am getting the following whenever I try and run perl on Ubuntu 18.04:</p>\n\n<pre><code>perl: warning: Setting locale failed.\nperl: warning: Please check that your locale settings:\nLANGUAGE = (unset),\nLC_ALL = (unset),\nLC_CTYPE = \"en_GB.UTF-8\",\nLANG = \"en_US.UTF-8\"\nare supported and installed on your system.\nperl: warning: Falling back to a fallback locale (\"en_US.UTF-8\").\n</code></pre>\n\n<p>I've tried running \"dpkg-reconfigure locales\" but nothing seems to work.  How can I setup my locales on 18.04?</p>\n"}, {"tags": ["regex", "string", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531225052, "post_id": 51264883, "comment_id": 89507844, "body": "The commas are irrelevant. What&#39;s wrong with <code>$main_string =~ &#47;\\b$sub1\\b&#47;</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1531226521, "creation_date": 1531226521, "answer_id": 51265534, "question_id": 51264883, "link": "https://stackoverflow.com/questions/51264883/checking-if-a-string-is-substring-of-another-string-separated-by-commas-using-re/51265534#51265534", "title": "Checking if a string is substring of another string separated by commas using regex [Perl]", "body": "<p>Just separate the substrings with <code>|</code> and say it must be preceded by the very beginning or a comma, and followed by the very end or a comma. One of these must be a look-around assertion, as the comma ending one sub might be the comma starting another sub:</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nmy $main_str = \"   hello   ,how, are, you \";\nmy @subs = qw( hello how hello1 you );\n\nmy $re = join '|', @subs;\n\nsay $1 while $main_str =~ /(?:^|,)\\s*($re)\\s*(?=,|$)/g;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": false, "score": 2, "last_activity_date": 1531269519, "last_edit_date": 1531269519, "creation_date": 1531229956, "answer_id": 51266793, "question_id": 51264883, "link": "https://stackoverflow.com/questions/51264883/checking-if-a-string-is-substring-of-another-string-separated-by-commas-using-re/51266793#51266793", "title": "Checking if a string is substring of another string separated by commas using regex [Perl]", "body": "<p>Depending on how frequently you're checking those matches, and how many... it may  <em>potentially</em> be faster to put the words in a hash for quick look-ups</p>\n\n<pre><code>my $main_str = \"   hello   ,how,   are, you\";\n\nmy %words = map { $_ =&gt; 1 } $main_str =~ /\\w+/g;\n\nfor my $sub (qw( hello how hello1 )) {\n    printf( \"%8s : %s\\n\", $sub, $words{$sub} ? \"Found\" : \"Not found\" );\n}\n</code></pre>\n\n<p>OUTPUT</p>\n\n<pre><code>   hello : Found\n     how : Found\n  hello1 : Not found\n</code></pre>\n\n<p>I know this isn't really an answer to your question (so don't accept this answer!). Just offerring a possible alternative.</p>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1531269519, "creation_date": 1531224765, "question_id": 51264883, "link": "https://stackoverflow.com/questions/51264883/checking-if-a-string-is-substring-of-another-string-separated-by-commas-using-re", "title": "Checking if a string is substring of another string separated by commas using regex [Perl]", "body": "<p>I would like to use regex in order to check if a string is a substring of another string but with an additional rule: the main string includes commas, so the substring should be one of the strings separated by commas. </p>\n\n<p>It will be easier to explain using an example:</p>\n\n<pre><code>my $main_str = \"   hello   ,how,   are, you\";\nmy $sub1 = \"hello\";\nmy $sub2 = \"how\";\nmy $sub3 = \"hello1\";\n</code></pre>\n\n<p>For <code>$sub1</code> and <code>$sub2</code> the output should say - \"found in the string\".</p>\n\n<p>For <code>sub3</code> it should say - \"didn't find in the string\".</p>\n\n<p>You can assume that <code>$sub</code> contains the only alphabet <code>a-Z</code> with no special symbols (or whitespaces).</p>\n\n<p>Consider the following regex:</p>\n\n<pre><code>@arr = ($main =~ /[^\\s,]+/g);\n</code></pre>\n\n<p>With this regex, I can split the <code>$main</code> string into an array by commas without whitespaces. I could iterate over the array and check if one of them is <code>$sub</code> but it will require an additional function/loop to do so - meaning it's doesn't look very nice. I would like to solve this problem with beautiful regex rather than a loop.</p>\n\n<p>Is it possible to create a regex similar to the one above, which checks if a string is a substring of another string which separated by commas and no whitespaces included?</p>\n"}, {"tags": ["shell", "perl", "unix"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1531223807, "post_id": 51264246, "comment_id": 89506987, "body": "What does <code>ade</code> do with the HERE document?"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1531228312, "post_id": 51264246, "comment_id": 89510311, "body": "seems like a require tty issue."}], "answers": [{"tags": [], "owner": {"reputation": 991, "user_id": 2413548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d6ec5ea2e353b5979f01f9f38f47fa?s=128&d=identicon&r=PG", "display_name": "hootnot", "link": "https://stackoverflow.com/users/2413548/hootnot"}, "is_accepted": false, "score": 0, "last_activity_date": 1531255082, "creation_date": 1531255082, "answer_id": 51273547, "question_id": 51264246, "link": "https://stackoverflow.com/questions/51264246/stty-standard-input-inappropriate-ioctl-for-device-running-perl-script-from/51273547#51273547", "title": "stty: standard input: Inappropriate ioctl for device . Running Perl script from shell script", "body": "<p>without knowing details of your script I guess you need to swap lines:</p>\n\n<pre><code>...\nade useview $dvn &lt;&lt; EOF &gt; \"$fprResult\"   #&lt;-- you setup $fprResult by redirecting\n...\nperl ...\nEOF  # &lt;-- up to here goes in that file, that includes the perl call also\n</code></pre>\n\n<p>I think you need:</p>\n\n<pre><code>ade useview $dvn &lt;&lt; EOF &gt; \"$fprResult\"\n...\nEOF\nperl -w /net/slcai797/scratch/upatch/LATEST/bin/uPatchSubmit -INSTANCE=slc09xhz.us.oracle.com:1609/prtr11db -ADE_VIEW_ROOT=$AVR -WAIT_FOR_COMPLETE=N | tee $fprResult\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4637763, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205057364226483/picture?type=large", "display_name": "Arjun Vijayvargiya", "link": "https://stackoverflow.com/users/4637763/arjun-vijayvargiya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1971, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531255082, "creation_date": 1531222777, "last_edit_date": 1531224370, "question_id": 51264246, "link": "https://stackoverflow.com/questions/51264246/stty-standard-input-inappropriate-ioctl-for-device-running-perl-script-from", "title": "stty: standard input: Inappropriate ioctl for device . Running Perl script from shell script", "body": "\n\n<p>This is the shell script where I am running my Perl script from. <code>ade</code> is a control versioning system, and <code>useview</code> provides a different environment from the usual command line.</p>\n\n<p>When I run the script it throws</p>\n\n<blockquote>\n  <p>stty: standard input: Inappropriate ioctl for device</p>\n</blockquote>\n\n<p>When I do it manually from the command line instead of using the script that is built for automation, the Perl script runs without any error.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>#!/bin/sh\n    host=\"slc09xhz.us.oracle.com\"\n    port=1609\n    sid=prtr11db   \n    fprResult=/home/$USER/Desktop/myscripts/fprResult.txt\n    echo \"HOST:$host\"\n    echo \"PORT:$port\"\n    echo \"SID:$sid\"\n    echo \"ENV:$env\"\n    instance=\"${host}:${port}/${sid}\"\n    dvn=tv1\n    libpath=\"/ade/${USER}_${dvn}/fainteg/dist/merant/lib:/usr/lib:/ade/${USER}_${dvn}/dmsc/lib:/ade/${USER}_${dvn}/ldap/lib:/ade/${USER}_${dvn}/oracle/lib:/ade/${USER}_${dvn}/fusionapps/lib/linuxx64:/ade/${USER}_${dvn}/fusionapps/hcm/pyt/lib/linuxx64:/ade/${USER}_${dvn}/bishiphome/dist/clients/epm/Essbase/EssbaseRTC/bin:/ade/${USER}_${dvn}/opmn/lib:/net/slcai797.us.oracle.com/scratch/upatch/v2.17.0/lib/import/common:/net/slcai797.us.oracle.com/scratch/upatch/v2.17.0/lib/perl:/usr/local/bin/perl_5.6.1/lib/5.6.1/i686-linux:/usr/local/bin/perl_5.6.1/lib/5.6.1:/usr/local/bin/perl_5.6.1/lib/site_perl/5.6.1/i686-linux:/usr/local/bin/perl_5.6.1/lib/site_perl/5.6.1:/usr/local/bin/perl_5.6.1/lib/site_perl\"\n    perlp=\"/net/slcai797.us.oracle.com/scratch/upatch/v2.17.0/lib/import/common:/net/slcai797.us.oracle.com/scratch/upatch/v2.17.0/lib/perl:/usr/local/bin/perl_5.6.1/lib/5.6.1/i686-linux:/usr/local/bin/perl_5.6.1/lib/5.6.1:/usr/local/bin/perl_5.6.1/lib/site_perl/5.6.1/i686-linux:/usr/local/bin/perl_5.6.1/lib/site_perl/5.6.1:/usr/local/bin/perl_5.6.1/lib/site_perl\"\n    echo \"INSTANCE: $instance\"\n    ade useview $dvn &lt;&lt; EOF &gt; \"$fprResult\"\n    cd /net/slcai797/scratch/upatch/LATEST/bin\n    setenv LD_LIBRARY_PATH $libpath\n    setenv PATH \"${PATH}:${perlp}\"\n    #printenv | grep PATH\n    #printenv | grep LIB\n    perl -w /net/slcai797/scratch/upatch/LATEST/bin/uPatchSubmit -INSTANCE=slc09xhz.us.oracle.com:1609/prtr11db -ADE_VIEW_ROOT=$AVR -WAIT_FOR_COMPLETE=N | tee $fprResult\n    EOF\n</code></pre>\n"}, {"tags": ["perl", "hash", "hashtable"], "answers": [{"comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 63, "user_id": 5405937, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/de9adf180c7d061a105fa15be25299bf?s=128&d=identicon&r=PG&f=1", "display_name": "Stock Overvalued", "link": "https://stackoverflow.com/users/5405937/stock-overvalued"}, "edited": false, "score": 0, "creation_date": 1531290596, "post_id": 51257779, "comment_id": 89534713, "body": "It <i>does</i> sort, see line <code>for my $k2 (sort keys \u2026</code>."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 63, "user_id": 5405937, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/de9adf180c7d061a105fa15be25299bf?s=128&d=identicon&r=PG&f=1", "display_name": "Stock Overvalued", "link": "https://stackoverflow.com/users/5405937/stock-overvalued"}, "edited": false, "score": 2, "creation_date": 1531290661, "post_id": 51257779, "comment_id": 89534746, "body": "The first line is not there just for fun! It protects against syntax errors! I don&#39;t appreciate it when you modify my code, run it, get an error and then pretend it&#39;s my fault. \u2013 I changed it to <a href=\"http://p3rl.org/feature#The-&#39;postderef&#39;-and-&#39;postderef_qq&#39;-features\" rel=\"nofollow noreferrer\">feature</a> to make it more clear what&#39;s going on. \u2013 You can either upgrade to a <a href=\"http://p3rl.org/policy#MAINTENANCE-AND-SUPPORT\" rel=\"nofollow noreferrer\">supported version of Perl</a> (which I think is best for everyone) or change the code to work with your unsupported version, postderef <code>-&gt;@*</code> becomes <code>@{ \u2026 }</code> around the expression, and analog with the <code>%</code> sigil"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 1, "last_activity_date": 1531290588, "last_edit_date": 1531290588, "creation_date": 1531200416, "answer_id": 51257779, "question_id": 51257504, "link": "https://stackoverflow.com/questions/51257504/perl-sort-nested-hash/51257779#51257779", "title": "Perl, Sort nested hash", "body": "<p>Just iterate over the keys in nested loops, sort the values as you encounter them. Edit: see <a href=\"http://p3rl.org/dsc#HASHES-OF-HASHES\" rel=\"nofollow noreferrer\">http://p3rl.org/dsc#HASHES-OF-HASHES</a></p>\n\n<pre><code>use feature qw(postderef);\nuse Tie::Hash::Indexed qw();\n\nmy $unsorted = {\n    'masterkeyB' =&gt; {\n        'D' =&gt; ['b', 'c', 'a'],\n        'A' =&gt; ['b', 'a', 'c'],\n        'C' =&gt; ['a', 'c', 'b'],\n        'B' =&gt; ['a', 'c', 'b'],\n    },\n    'masterkeyA' =&gt; {\n        'B' =&gt; ['a', 'c', 'b'],\n        'C' =&gt; ['a', 'c', 'b'],\n        'A' =&gt; ['b', 'a', 'c'],\n        'D' =&gt; ['b', 'c', 'a'],\n    }\n};\n\ntie my %sorted, 'Tie::Hash::Indexed';\nfor my $k1 (sort keys $unsorted-&gt;%*) {\n    for my $k2 (sort keys $unsorted-&gt;{$k1}-&gt;%*) {\n        my $v = $unsorted-&gt;{$k1}{$k2};\n        $v = [sort $v-&gt;@*] unless 'C' eq $k2;\n        $sorted{$k1}{$k2} = $v;\n    }\n}\n__END__\n$HASH1 = {\n    masterkeyA =&gt; {\n        A =&gt; ['a', 'b', 'c'],\n        B =&gt; ['a', 'b', 'c'],\n        C =&gt; ['a', 'c', 'b'],\n        D =&gt; ['a', 'b', 'c']\n    },\n    masterkeyB =&gt; {\n        A =&gt; ['a', 'b', 'c'],\n        B =&gt; ['a', 'b', 'c'],\n        C =&gt; ['a', 'c', 'b'],\n        D =&gt; ['a', 'b', 'c']\n    }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "is_accepted": false, "score": 1, "last_activity_date": 1531487915, "last_edit_date": 1531487915, "creation_date": 1531202662, "answer_id": 51258181, "question_id": 51257504, "link": "https://stackoverflow.com/questions/51257504/perl-sort-nested-hash/51258181#51258181", "title": "Perl, Sort nested hash", "body": "<p>Unlike arrays, hashes in perl don't stay in sorted order, so the common paradigm is to sort the hash keys while you're traversing the data structure. The basic code snippets you need are</p>\n\n<pre><code>for my $k ( sort keys %hash ) {\n  for my $sk ( sort keys %{$hash-&gt;{$k}} ) {\n    # do something\n  }\n}\n</code></pre>\n\n<p>to access hash keys in sorted order, and</p>\n\n<pre><code>if ( $k ne 'KEY' ) {\n  # sort this array\n  $hash-&gt;{$k} = sort @{$hash-&gt;{$k}}\n}\n</code></pre>\n\n<p>to selectively sort arrays.</p>\n\n<p>For example, say you're printing out the hash:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature ':5.16';\n\nmy $data = {\n      'masterkeyB' =&gt; {\n            'D' =&gt; ['b', 'c', 'a'],\n            'A' =&gt; ['b', 'a', 'c'],\n            'C' =&gt; ['a', 'c', 'b'],\n            'B' =&gt; ['a', 'c', 'b'],\n          },\n      'masterkeyA' =&gt; {\n            'B' =&gt; ['a', 'c', 'b'],\n            'C' =&gt; ['a', 'c', 'b'],\n            'A' =&gt; ['b', 'a', 'c'],\n            'D' =&gt; ['b', 'c', 'a'],\n            }\n    };\n\n\nfor my $mk ( sort keys %$data ) {\n  say $mk;\n  for my $letter ( sort keys %{$data-&gt;{$mk}} ) {\n    say '  ' . $letter;\n    if ( $letter eq 'C') {\n      say '    [ ' . join(\", \", @{$data-&gt;{$mk}{$letter}}) . ' ]';\n    }\n    else {\n      say '    [ ' . join(\", \", sort @{$data-&gt;{$mk}{$letter}}) . ' ]';\n    }\n  }\n}\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>masterkeyA\n  A\n    [ a, b, c ]\n  B\n    [ a, b, c ]\n  C\n    [ a, c, b ]\n  D\n    [ a, b, c ]\nmasterkeyB\n  A\n    [ a, b, c ]\n  B\n    [ a, b, c ]\n  C\n    [ a, c, b ]\n  D\n    [ a, b, c ]\n</code></pre>\n\n<p>Obviously you can change the <code>say</code> lines to do whatever you are planning to do with this data.</p>\n"}, {"tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": 0, "last_activity_date": 1531242049, "last_edit_date": 1531242049, "creation_date": 1531234781, "answer_id": 51268503, "question_id": 51257504, "link": "https://stackoverflow.com/questions/51257504/perl-sort-nested-hash/51268503#51268503", "title": "Perl, Sort nested hash", "body": "<p>I think this does what you need. Not easy to ready but works.</p>\n\n<pre><code>my %sorted;\nmap {my $key = $_; map {$sorted{$key}-&gt;{$_} = ($_ eq 'C' ? $hash{$key}-&gt;{$_} : [sort @{$hash{$key}-&gt;{$_}}])} keys %{$hash{$key}}} keys %hash;\n</code></pre>\n\n<p>or sort original hash </p>\n\n<pre><code>map {my $key = $_; map {$hash{$key}-&gt;{$_} = ($_ eq 'C' ? $hash{$key}-&gt;{$_} : [sort @{$hash{$key}-&gt;{$_}}])} keys %{$hash{$key}}} keys %hash;\n</code></pre>\n\n<p>or shorter version</p>\n\n<pre><code>map {my $key = $_; map {$hash{$key}-&gt;{$_} = [sort @{$hash{$key}-&gt;{$_}}] if($_ ne 'C')} keys %{$hash{$key}}} keys %hash;\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 5405937, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/de9adf180c7d061a105fa15be25299bf?s=128&d=identicon&r=PG&f=1", "display_name": "Stock Overvalued", "link": "https://stackoverflow.com/users/5405937/stock-overvalued"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1531487915, "creation_date": 1531198538, "last_edit_date": 1531249785, "question_id": 51257504, "link": "https://stackoverflow.com/questions/51257504/perl-sort-nested-hash", "title": "Perl, Sort nested hash", "body": "<p>I have a data structure which looks like this (hash of hashes):</p>\n\n<pre><code>$VAR1 = {\n          'masterkeyB' =&gt; {\n                'D' =&gt; ['b', 'c', 'a'],\n                'A' =&gt; ['b', 'a', 'c'],\n                'C' =&gt; ['a', 'c', 'b'],\n                'B' =&gt; ['a', 'c', 'b'],\n              },\n          'masterkeyA' =&gt; {\n                'B' =&gt; ['a', 'c', 'b'],\n                'C' =&gt; ['a', 'c', 'b'],\n                'A' =&gt; ['b', 'a', 'c'],\n                'D' =&gt; ['b', 'c', 'a'],\n                }\n        };\n</code></pre>\n\n<p>I would like to sort this structure in alphabetical order :</p>\n\n<pre><code>$VAR1 = {\n          'masterkeyA' =&gt; {\n                'A' =&gt; ['a', 'b', 'c'],\n                'B' =&gt; ['a', 'b', 'c'],\n                'C' =&gt; ['a', 'c', 'b'],\n                'D' =&gt; ['a', 'b', 'c'],\n              },\n          'masterkeyB' =&gt; {\n                'A' =&gt; ['a', 'b', 'c'],\n                'B' =&gt; ['a', 'b', 'c'],\n                'C' =&gt; ['a', 'c', 'b'],\n                'D' =&gt; ['a', 'b', 'c'],\n                }\n        };\n</code></pre>\n\n<p>Note that all the arrays are sorted except for 'C'.</p>\n"}, {"tags": ["python", "perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1531167767, "post_id": 51253378, "comment_id": 89485886, "body": "Was the result from <code>system</code> 1024?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 4, "creation_date": 1531167854, "post_id": 51253378, "comment_id": 89485917, "body": "Show your code ."}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 1, "creation_date": 1531172812, "post_id": 51253378, "comment_id": 89487826, "body": "See <a href=\"https://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/system.html</a> to understand what is the <code>system</code> return value and how to use it. Some modules like <code>IPC::Run</code> may make your life easier than by calling a naked <code>system()</code>."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1531190977, "post_id": 51253378, "comment_id": 89491940, "body": "Or <a href=\"https://metacpan.org/pod/IPC::System::Simple\" rel=\"nofollow noreferrer\">metacpan.org/pod/IPC::System::Simple</a>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1531197743, "post_id": 51253378, "comment_id": 89493383, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. We can&#39;t debug vague descriptions of code."}, {"owner": {"reputation": 31, "user_id": 9191084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb87ebbd99712197adf8a803873157cf?s=128&d=identicon&r=PG&f=1", "display_name": "bgm195", "link": "https://stackoverflow.com/users/9191084/bgm195"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1531200780, "post_id": 51253378, "comment_id": 89494255, "body": "@melpomene Fixed. Is it OK now?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1531200970, "post_id": 51253378, "comment_id": 89494337, "body": "What happens if you run <code>python py_test.py 4; echo $?</code> in the shell?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1531247064, "post_id": 51253378, "comment_id": 89521842, "body": "Or <a href=\"https://metacpan.org/pod/IPC::Run3\" rel=\"nofollow noreferrer\">IPC::Run3</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8733319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c09429e5fb247ab0d90a6b22d6df35e2?s=128&d=identicon&r=PG&f=1", "display_name": "Marshall C", "link": "https://stackoverflow.com/users/8733319/marshall-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1531196310, "last_edit_date": 1531196310, "creation_date": 1531177766, "answer_id": 51255163, "question_id": 51253378, "link": "https://stackoverflow.com/questions/51253378/calling-python-script-from-perl/51255163#51255163", "title": "Calling Python Script From Perl", "body": "<p>from \"perldoc perlvar\"</p>\n\n<pre><code>$?      The status returned by the last pipe close, backtick (``) command,\n        successful call to \"wait()\" or \"waitpid()\", or from the \"system()\"\n        operator. This is just the 16-bit status word returned by the\n        traditional Unix \"wait()\" system call (or else is made up to look\n        like it). Thus, the exit value of the subprocess is really (\"$? &gt;&gt;\n        8\"), and \"$? &amp; 127\" gives which signal, if any, the process died\n        from, and \"$? &amp; 128\" reports whether there was a core dump.\n</code></pre>\n\n<p>It sounds like your python script may not be successfully exiting with the 4.</p>\n\n<p>test.py</p>\n\n<pre><code>#!/usr/bin/env python3\n\nimport sys\n\nsys.exit(4)\n</code></pre>\n\n<p>test.pl</p>\n\n<pre><code>#!/usr/bin/env perl\nuse warnings;\nuse strict;\n\nsystem(\"./test.py\");\nprint \"\\$? = $?\\n\"\ndie(\"Killed by signal \".( $? &amp; 0x7F ) if $? &amp; 0x7F;\ndie(\"Exited with error \".( $? &gt;&gt; 8 ) if $? &gt;&gt; 8;\nprint \"Success\\n\";\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>~/test$ ./test.pl\n$? = 1024\nExited with error 4\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1531201334, "post_id": 51257921, "comment_id": 89494453, "body": "So it turns out Perl had nothing to do with it. This is why preparing a minimal test case is a good idea."}], "tags": [], "owner": {"reputation": 31, "user_id": 9191084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb87ebbd99712197adf8a803873157cf?s=128&d=identicon&r=PG&f=1", "display_name": "bgm195", "link": "https://stackoverflow.com/users/9191084/bgm195"}, "is_accepted": true, "score": 1, "last_activity_date": 1531201256, "creation_date": 1531201256, "answer_id": 51257921, "question_id": 51253378, "link": "https://stackoverflow.com/questions/51253378/calling-python-script-from-perl/51257921#51257921", "title": "Calling Python Script From Perl", "body": "<p>I found my problem.\nI entered to sys.exit argv[1], but at start python treats this as string.\nAfter I changed it to sys.exit(int(argv[1])) everything worked fine.</p>\n\n<p>That also explains why it printed the \"4\"...</p>\n"}], "owner": {"reputation": 31, "user_id": 9191084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb87ebbd99712197adf8a803873157cf?s=128&d=identicon&r=PG&f=1", "display_name": "bgm195", "link": "https://stackoverflow.com/users/9191084/bgm195"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 775, "favorite_count": 0, "accepted_answer_id": 51257921, "answer_count": 2, "score": -1, "last_activity_date": 1531201256, "creation_date": 1531167363, "last_edit_date": 1531201003, "question_id": 51253378, "link": "https://stackoverflow.com/questions/51253378/calling-python-script-from-perl", "title": "Calling Python Script From Perl", "body": "<p>I am trying to catch a python exit coode form inside perl.</p>\n\n<p>My python code, py_test.py:</p>\n\n<pre><code>import sys\nsys.exit(sys.argv[1])\n</code></pre>\n\n<p>My perl code, test.pl:</p>\n\n<pre><code>#!/usr/bin/perl -w\n$res = system(\"python py_test.py \".$ARGV[0]);\nprint(\"\\$res ==== $res \\n &gt;&gt;&gt;\". $? .\"\\n\");\n</code></pre>\n\n<p>I ran:</p>\n\n<pre><code>perl test.pl 4\n</code></pre>\n\n<p>The result was:</p>\n\n<pre><code>4\n$res ==== 256\n&gt;&gt;&gt;256\n</code></pre>\n\n<p>I am using python 2.4.3 and perl 5.8.8 on 32bit RHEL 5.3.</p>\n\n<p>Can someone help me understand what happened here, I can't seem to understand this behaviour, did I do something wrong? (I looked at this code for hours, I never encountered something this weird with system)</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1531155822, "post_id": 51250643, "comment_id": 89480137, "body": "Try running the output through a hex dump to see &quot;invisible&quot; characters. (In Linux, I&#39;d run <code>perl ... | xxd</code>)."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1531157313, "post_id": 51250643, "comment_id": 89480905, "body": "What does <code>printf(&#39;%vx&#39;, $msgReceived)</code> show?"}], "answers": [{"tags": [], "owner": {"reputation": 52444, "user_id": 82511, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/68191be8e55efa97fdda3a4a65af2b22?s=128&d=identicon&r=PG", "display_name": "djna", "link": "https://stackoverflow.com/users/82511/djna"}, "is_accepted": false, "score": 2, "last_activity_date": 1531176682, "last_edit_date": 1531176682, "creation_date": 1531162179, "answer_id": 51252227, "question_id": 51250643, "link": "https://stackoverflow.com/questions/51250643/perl-strings-and-integers-and-context/51252227#51252227", "title": "perl strings and integers and context", "body": "<p>As both choroba and Matt Jacob implied, there was a non printable character before the first zero in the real program. In the test program we used only the expected leading 0s.</p>\n\n<p>Lesson: check your data before you blame the language.</p>\n"}], "owner": {"reputation": 52444, "user_id": 82511, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/68191be8e55efa97fdda3a4a65af2b22?s=128&d=identicon&r=PG", "display_name": "djna", "link": "https://stackoverflow.com/users/82511/djna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1531176682, "creation_date": 1531155702, "question_id": 51250643, "link": "https://stackoverflow.com/questions/51250643/perl-strings-and-integers-and-context", "title": "perl strings and integers and context", "body": "<p>I have code like this, in a much larger program</p>\n\n<pre><code> my ($chunkCountStr, $msgid, $chunk) =  split (/:/, $msgReceived, 3);\n                if ( $chunkCountStr &amp;&amp; $msgid &amp;&amp; $chunk ) {\n                        my $chunkCount = $chunkCountStr;\n                        $chunkCount += 0;\n                        print \"candidate :$chunkCountStr: :$chunkCount: \\n\";\n                 # and more ...\n</code></pre>\n\n<p>I see this result printed: </p>\n\n<blockquote>\n  <p>candidate :00002: :0:</p>\n</blockquote>\n\n<p>So my attempt to convert to an numeric value fails </p>\n\n<p>I pull that code out into a little test program.</p>\n\n<pre><code>#!/usr/bin/perl  use strict;\n\nmy $chunkCountStr = \"0002\"; \nmy $theThing = \"1232131\"; \nmy $anotherThing = \"zzzz\";\n\nif ( $chunkCountStr &amp;&amp; $theThing &amp;&amp; $anotherThing )  {\n    my $chunkCount = $chunkCountStr;\n    $chunkCount += 0;\n    print \"candidate :$chunkCountStr: :$chunkCount: \\n\"; \n}\n</code></pre>\n\n<p>And it works as expected.</p>\n\n<blockquote>\n  <p>candidate :0002: :2:</p>\n</blockquote>\n\n<p>So what have I missed? What's the difference in the two cases?</p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 3, "creation_date": 1531149948, "post_id": 51248704, "comment_id": 89476892, "body": "Please show the code you already have."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531150807, "post_id": 51248704, "comment_id": 89477449, "body": "I assume that every second line of your data isn&#39;t really blank? Stack Overflow uses <i>Markdown</i> and you should read and understand <a href=\"https://stackoverflow.com/editing-help\"><i>Markdown help</i></a> before posting again"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1531151104, "post_id": 51248704, "comment_id": 89477622, "body": "What does <i>&quot;criteria for common entries have at least 50 position on both sides&quot;</i> mean? I don&#39;t understand what it means to have 50 positions both sides of a criterion."}], "answers": [{"tags": [], "owner": {"reputation": 24167, "user_id": 7388477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e42e688ade97076d4fdd1939946e7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Valdi_Bo", "link": "https://stackoverflow.com/users/7388477/valdi-bo"}, "is_accepted": false, "score": -1, "last_activity_date": 1531202713, "last_edit_date": 1531202713, "creation_date": 1531172837, "answer_id": 51254484, "question_id": 51248704, "link": "https://stackoverflow.com/questions/51248704/compare-two-files-to-find-common-and-unique-entries/51254484#51254484", "title": "Compare two files to find common, and unique entries", "body": "<p>You can try the following program.</p>\n\n<p>If you change your mind about how many occurences must be\non both sides, change the value of <code>$limit</code> variable.\nMaybe just 1 would be enough?</p>\n\n<pre><code>use strict; use warnings;\n# Count text occurrences in 2 files\n\nmy %counts;         # Hash of arrays (occurrence counters)\n\nsub inputProcess {\n  # Process input file\n  my $fn = shift;   # File name\n  my $n = shift;    # Counter index\n  open (my $fh, '&lt;', $fn) or die \"Can't open $fn: $!\";\n  while (&lt;$fh&gt;) {\n    chomp;\n    $counts{$_}[$n]++;\n  }\n}\n\nsub readCounts {\n  # Read counters, substituting 0 if any does not exist\n  my $cnt = shift;  # Reference to array of counters\n  my @v = (0, 0);\n  foreach my $i ( 0 .. $#v ) {\n    $v[$i] = $cnt-&gt;[$i] if exists $cnt-&gt;[$i];\n  }\n  return @v;\n}\n\nsub printUniq {\n  # Print unique entries for the given counter\n  my $myCnt = shift;            # \"My\" counter\n  my $otherCnt = 1 - $myCnt;    # The \"other\" counter\n  print \"Unique entries from file $myCnt:\\n\";\n  foreach my $key (sort keys %counts) {\n    my $val = $counts{$key};\n    my @v = readCounts($val);\n    if ($v[$myCnt] &gt; 0 &amp;&amp; $v[$otherCnt] == 0) {\n      printf \"%s\\n\", $key;\n    }\n  }\n}\n\nsub printCommon {\n  # Print common entries for both files\n  print \"Common entries for both files:\\n\";\n  my $limit = 50;\n  foreach my $key (sort keys %counts) {\n    my $val = $counts{$key};\n    my @v = readCounts($val);\n    if ($v[0] &gt;= $limit &amp;&amp; $v[1] &gt;= $limit) {\n      printf \"%s\\n\", $key;\n    }\n  }\n}\n\ninputProcess('Inp1.txt', 0);\ninputProcess('Inp2.txt', 1);\nprint \"All entries and counts\\n\";\nforeach my $key (sort keys %counts) {\n  my $val = $counts{$key};\n  my ($v0, $v1) = readCounts($val);\n  printf \"%-16s / %3d, %3d\\n\", $key, $v0, $v1;\n}\nprintUniq(0);\nprintUniq(1);\nprintCommon();\n</code></pre>\n\n<p>The idea is to use hash of (references to) arrays.\nThe key is just the entry read from a file.\nEach array (value in the hash) contains 2 counters, for both files.</p>\n\n<p>The program prints sorted entries, but if you wish, just remove\nthe sorting.</p>\n\n<p>Writing the above program, I assumed that <strong>each whole line</strong> is a separate entry. If it is not the case, modyfiy <em>inputProcess</em> function accordingly.</p>\n\n<p>And one more remark: The first file contains <em>Del</em> at the end of each line,\nwhereas the second file doesn't. Such entries (full lines) will not \"match\".</p>\n"}], "owner": {"reputation": 177, "user_id": 7049776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0296803aff303d32d5bdc998c995dae7?s=128&d=identicon&r=PG&f=1", "display_name": "bioinforesearch", "link": "https://stackoverflow.com/users/7049776/bioinforesearch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1531202713, "creation_date": 1531148933, "last_edit_date": 1531151389, "question_id": 51248704, "link": "https://stackoverflow.com/questions/51248704/compare-two-files-to-find-common-and-unique-entries", "title": "Compare two files to find common, and unique entries", "body": "<p></p>\n\n<p>I would like to compare entries in two files.</p>\n\n<h3>first file</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>ch1 12345 ch1 12900 Del\nch1 13000 ch1 13689 Del\nch2 14567 ch2 14905 Del\nch4 23001 ch4 26019 Del\n</code></pre>\n\n<h3>second file</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>ch1 12309 ch1 12865 \nch2 14531 ch2 14871 \nch3 16909 ch3 16990\nch4 45401 ch4 45810\n</code></pre>\n\n<ul>\n<li><p>Entries common to both the first and second file (criteria for common entries have at least 50 position on both sides)</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ch1 12345 ch1 12900 Del, ch1 12309 ch1 12865\nch2 14567 ch2 14905 Del, ch2 14531 ch2 14871 \n</code></pre></li>\n<li><p>Entries unique to the first file</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ch1 13000 ch1 13689 Del\nch4 23001 ch4 26019 Del\n</code></pre></li>\n<li><p>Entries unique to the second file</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ch3 16909 ch3 1699\nch4 45401 ch4 45810\n</code></pre></li>\n</ul>\n\n<p>I have written a Perl program looping one array within another array and identified the common entries, but with this approach I can't identify the unique entries.</p>\n"}, {"tags": ["perl", "foreach", "tk"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9350237, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Kemc0ZFWyC0/AAAAAAAAAAI/AAAAAAAAGH0/ZQN5yA1CARE/photo.jpg?sz=128", "display_name": "mac t&#237;re beag", "link": "https://stackoverflow.com/users/9350237/mac-t%c3%adre-beag"}, "edited": false, "score": 0, "creation_date": 1531213007, "post_id": 51244735, "comment_id": 89500104, "body": "Thanks man that is exactly the sort of thing I&#39;m looking for!   So my error was I was creating the frame not putting them into an array?   One further question I could ask is how I could modify a widgets within a frame using this system, I guess I have to push them too into an array? I&#39;m confident I&#39;ll figure it out =)  Thanks again!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 11, "user_id": 9350237, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Kemc0ZFWyC0/AAAAAAAAAAI/AAAAAAAAGH0/ZQN5yA1CARE/photo.jpg?sz=128", "display_name": "mac t&#237;re beag", "link": "https://stackoverflow.com/users/9350237/mac-t%c3%adre-beag"}, "edited": false, "score": 0, "creation_date": 1531223229, "post_id": 51244735, "comment_id": 89506607, "body": "@mact&#237;rebeag: The problem is more that your frame handle <code>$exempleFrame</code> is local to the subroutine and is discarded once it has been created. Any way of saving those handles would suffice. Another way would be to get the list through the tree of widgets using <code>$main_frame-&gt;children</code>, but that would break if you added other independent frames to the main frame that weren&#39;t part of this &quot;set&quot;. There are many ways to solve this, and the best way depends on the problem you are solving."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1531160272, "last_edit_date": 1531160272, "creation_date": 1531136453, "answer_id": 51244735, "question_id": 51242628, "link": "https://stackoverflow.com/questions/51242628/access-tk-frame-created-from-loop/51244735#51244735", "title": "Access Tk frame created from loop", "body": "<p>The handle <code>$exempleFrame</code> allows you to access the frame for modifying it via <code>configure</code>. You simply need to copy it somewhere so that you don't lose it when the subroutine exits</p>\n\n<p>In your case you could have the subroutine return the frame handle</p>\n\n<pre><code>sub frame_creation{\n    my ($name, $color) = @_;\n\n    my $exempleFrame = $main_frame-&gt;Frame()-&gt;pack(-side =&gt; 'left', -fill =&gt; 'x');\n    my $exempleLabel = $exempleFrame-&gt;Label(-text =&gt; $name, -background =&gt; $color)-&gt;pack(-side =&gt; 'left', -fill =&gt; 'x');\n\n    return $exempleFrame;\n}\n</code></pre>\n\n<p>and it could be <code>pushed</code> onto an array when you make the call</p>\n\n<pre><code>my @frames;\n\nfor my $name ( @names ) {\n    push @frames, frame_creation($name, 'green');\n}\n</code></pre>\n\n<p>You can then make calls like</p>\n\n<pre><code>$frames[4]-&gt;configure(-background =&gt; 'red')\n</code></pre>\n\n<p>to set the attributes of individual frames</p>\n\n<p>This may be better done differently depending on how you need to access the frames (for instance, a hash relating the frame names to their handles may be useful) but this method will give you a simple collection of frame handles, which may be sufficient</p>\n\n<h3>Note</h3>\n\n<p>As you have written your code, each label completely fills and obscures its frame parent, so setting the background colour of the frame will have no visible effect</p>\n\n<p>Here's a complete program that retains your red label background, but adds (external) ten-pixel padding around the label so that its containing frame can be seen</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Tk;\n\nmy $mw = MainWindow-&gt;new(-title =&gt; 'test');\n\nmy @names = qw/ M024 M016 M032 M066 M065 M044 M096 M099 /;\nmy @frames;\n\nmy $main_frame = $mw-&gt;Frame()-&gt;pack(-side =&gt; 'top', -fill =&gt; 'x');\n\npush @frames, frame_creation($_, 'green') for @names;\n\n$_-&gt;configure(-bg =&gt; 'red') for @frames;\n\nMainLoop();\n\nsub frame_creation{\n    my ($name, $color) = @_;\n\n    my $frame = $main_frame-&gt;Frame()-&gt;pack(\n        -side =&gt; 'left',\n        -fill =&gt; 'x',\n    );\n\n    my $label = $frame-&gt;Label(\n        -text =&gt; $name,\n        -bg   =&gt; $color,\n    )-&gt;pack(\n        -side =&gt; 'left',\n        -fill =&gt; 'x',\n        -padx =&gt; 10,\n        -pady =&gt; 10,\n    );\n\n    $frame;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<p><img src=\"https://i.stack.imgur.com/JDoE4.png\" alt=\"Perl/Tk Example\"></p>\n"}], "owner": {"reputation": 11, "user_id": 9350237, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Kemc0ZFWyC0/AAAAAAAAAAI/AAAAAAAAGH0/ZQN5yA1CARE/photo.jpg?sz=128", "display_name": "mac t&#237;re beag", "link": "https://stackoverflow.com/users/9350237/mac-t%c3%adre-beag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1531160272, "creation_date": 1531129815, "last_edit_date": 1531135907, "question_id": 51242628, "link": "https://stackoverflow.com/questions/51242628/access-tk-frame-created-from-loop", "title": "Access Tk frame created from loop", "body": "<p>I am creating a few Tk frames from an array. Each frame has a label and a status. The status is represented by the <code>background</code> option and the <code>$color</code> argument.</p>\n\n<p>I have made the following example</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Tk;\n\nmy $mw         = MainWindow-&gt;new(-title =&gt; 'test');\nmy $main_frame = $mw-&gt;Frame()-&gt;pack(-side =&gt; 'top', -fill =&gt; 'x');\n\nmy @array = ('M024','M016','M032','M066','M065','M044','M096','M099');\n\nforeach my $example ( @array ) {\n  Frame_creation($example, 'green');\n};\n\nMainLoop;\n\nsub Frame_creation{\n    my ($name, $color) = @_;\n\n    my $exempleFrame = $main_frame-&gt;Frame()-&gt;pack(-side =&gt; 'left', -fill =&gt; 'x');\n    my $exempleLabel = $exempleFrame-&gt;Label(-text =&gt; $name, -background =&gt; $color)-&gt;pack(-side =&gt; 'left', -fill =&gt; 'x');\n}\n</code></pre>\n\n<p>Once the frame is created, how do I target the frame in the future if I desire to modify it with a <code>configure</code>?</p>\n"}, {"tags": ["mongodb", "perl"], "answers": [{"tags": [], "owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "is_accepted": true, "score": 3, "last_activity_date": 1531126618, "creation_date": 1531126618, "answer_id": 51241612, "question_id": 51241245, "link": "https://stackoverflow.com/questions/51241245/get-answer-from-mongodb-in-perl/51241612#51241612", "title": "get answer from mongodb in perl", "body": "<p>The syntax error you are getting is from perl and has nothing to do with MongoDB.\nTo build a hashref, you must use the following notation:</p>\n\n<pre><code>{\n    key =&gt; value,\n    other_key =&gt; other_value,\n}\n</code></pre>\n\n<p>not <code>{ \"key\": \"value\" }</code> ( which looks like JSON ).</p>\n"}], "owner": {"reputation": 23, "user_id": 7012951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e6fcba0fe0fa914264d95f8d9d7047d?s=128&d=identicon&r=PG", "display_name": "rahulruns", "link": "https://stackoverflow.com/users/7012951/rahulruns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 51241612, "answer_count": 1, "score": 0, "last_activity_date": 1531126618, "creation_date": 1531125529, "question_id": 51241245, "link": "https://stackoverflow.com/questions/51241245/get-answer-from-mongodb-in-perl", "title": "get answer from mongodb in perl", "body": "<p>I have written code to fetch answer from MongoDB in Perl but it is not working. It always gives context error. What I am trying to do is fetch result based on a search criteria in MongoDB</p>\n\n<pre><code>use strict;\nuse warnings;\nuse MongoDB;\nuse Data::Dumper;\n\nsub answer_get {\nmy $database = shift;\nmy $database_collection = shift;\nmy $msg = shift;\nmy $client = MongoDB-&gt;connect();\nmy $db = $client-&gt;get_database( 'tutorial' );\nmy $query_result = $db-&gt;get_collection( 'users' )-&gt;find({context: \"what\", \nkeyword: \"IP\"},{\"define\":1});\n}\nmy $get_answer = answer_get(\"tutorial\", \"users\", \"IP\");\n#print $get_answer;\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>syntax error at mongoreply.pl line 15, near \"context:\"\nGlobal symbol \"$query_result\" requires explicit package name (did you forget \nto declare \"my $query_result\"?) at mongoreply.pl line 21.\nsyntax error at mongoreply.pl line 25, near \"}\"\nExecution of mongoreply.pl aborted due to compilation errors.\n</code></pre>\n\n<p>When I am running it in MongoDB I am getting answer</p>\n\n<pre><code>db.users.find({context: \"what\", keyword: \"IP\"},{\"define\":1})\n{ \"_id\" : ObjectId(\"5b4314bda763102504004ea1\"), \"define\" : \"An Internet \nProtocol address (IP address) is a numerical label assigned to each device \nconnected to a computer network that uses the Internet Protocol for \ncommunication\" }\n</code></pre>\n\n<p>What my requirement is to get statement in define that I have </p>\n"}, {"tags": ["perl", "floating-point"], "comments": [{"owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "edited": false, "score": 0, "creation_date": 1531068183, "post_id": 51233717, "comment_id": 89447188, "body": "please could you show us an example of your call to range. e.g., range(1,10,1);"}, {"owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "edited": false, "score": 0, "creation_date": 1531069964, "post_id": 51233717, "comment_id": 89447651, "body": "I think this is a display issue with floats. try running it with   printf(&quot;%.2f\\n&quot; , $_) for @range; instead of Data::Dumper"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1531071315, "post_id": 51233717, "comment_id": 89447986, "body": "Interestingly <code>my @range = map { -3 + $_&#47;100 } 0..30</code> does not give me round-off errors"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1531091281, "post_id": 51233717, "comment_id": 89452249, "body": "@H&#229;kon H&#230;gland, Sure it does. It&#39;s impossible to store a number that&#39;s periodic in binary into a floating point number. You can see the error with <code>printf(&quot;%.20g&quot;, $_);</code>. It does have the benefit of avoiding error <i>accumulation</i>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1531091383, "post_id": 51233717, "comment_id": 89452265, "body": "@JonathanGreszwinsky The problem is that 1/10 is periodic in binary (just like 1/3 is in decimal), so it can&#39;t be stored accurately in a floating point number. On top of that, you make the problem worse by repeatedly adding inaccurate numbers."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1531091060, "post_id": 51234567, "comment_id": 89452209, "body": "BigFloat would still suffer form the same problem. No matter how big you make the float, you can&#39;t store a number that&#39;s periodic in binary into a float. BigRat could work, but that&#39;s surely overkill. <code>map { $_ &#47; 0.01 } -300 .. -270</code> would avoid error accumulation, and rounding or tolerances can handle the rest."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531118154, "post_id": 51234567, "comment_id": 89457620, "body": "@ikegami Thanks, edited. The extra <code>use bignum;</code> was a vestige from my test code that I forgot to remove, and I switched my example code over to <code>Math::BigRat</code> because my point was to show how to do it with as much accuracy as possible, but I highlighted that it may be overkill."}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 2, "last_activity_date": 1531118056, "last_edit_date": 1531118056, "creation_date": 1531071863, "answer_id": 51234567, "question_id": 51233717, "link": "https://stackoverflow.com/questions/51233717/why-does-perl-have-floating-point-errors-here/51234567#51234567", "title": "Why does perl have floating point errors here?", "body": "<blockquote>\n  <p>Why does this happen?</p>\n</blockquote>\n\n<p>See <strong><a href=\"https://floating-point-gui.de/\" rel=\"nofollow noreferrer\">What Every Programmer Should Know About Floating-Point Arithmetic</a></strong>.</p>\n\n<blockquote>\n  <p>Adding the bignum module does not change the fact that the variables calculated are wrong.</p>\n</blockquote>\n\n<p>I'm guessing that you added the <code>use bignum;</code> inside of <code>sub range</code>, but because <a href=\"http://perldoc.perl.org/bignum.html\" rel=\"nofollow noreferrer\"><code>bignum</code></a> is scoped, this won't automatically affect the variables passed into that <code>sub</code>. So either <code>bignum</code> needs to be in effect wherever the literals that you pass into <code>range</code> are defined and it'll work, or, you could just upgrade the variables in the <code>sub</code> itself, as in:</p>\n\n<pre><code>use Math::BigRat;\nsub range {\n    my $start = Math::BigRat-&gt;new(shift);\n    my $end   = Math::BigRat-&gt;new(shift);\n    my $step  = Math::BigRat-&gt;new(shift);\n    ...\n    return map {$_-&gt;numify} @range;\n}\n</code></pre>\n\n<p><strong>However</strong>, using the <a href=\"http://perldoc.perl.org/Math/BigRat.html\" rel=\"nofollow noreferrer\"><code>Math::BigRat</code></a>, <code>Math::BigFloat</code>, etc. (including via the <code>bignum</code> and related pragmas) objects everywhere will slow down the code, so this may be overkill. So that the objects are used only within the <code>sub</code> above, I'm downgrading the objects back into regular scalars with <code>numify</code>, but that's optional depending on your performance requirements.</p>\n\n<p>Depending on what precision you actually need, you could also round your numbers off via e.g. <code>sprintf(\"%.2f\",$i)</code> (just as an example: <code>for (my $i = $start; $i &lt;= $end; $i = 0+sprintf(\"%.2f\",$i+$step) )</code>).\nAnother possibility, as pointed out by @ikegami in the comment, would be to work with integers and do the division last, as in e.g. <code>map { $_/100 } -300 .. -270</code>.</p>\n"}], "owner": {"reputation": 107, "user_id": 8472333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b6fb8fe7cbf1443cef128deceefc329?s=128&d=identicon&r=PG&f=1", "display_name": "JonathanGreszwinsky", "link": "https://stackoverflow.com/users/8472333/jonathangreszwinsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "closed_date": 1531081393, "answer_count": 1, "score": 1, "last_activity_date": 1531118056, "creation_date": 1531065261, "last_edit_date": 1531080512, "question_id": 51233717, "link": "https://stackoverflow.com/questions/51233717/why-does-perl-have-floating-point-errors-here", "closed_reason": "Duplicate", "title": "Why does perl have floating point errors here?", "body": "<p>I have this code:</p>\n\n<pre><code>sub range {\n        my ($start, $end, $step) = @_;\n\n        if($step == 0) {\n                die(\"Step size cannot be 0!\")\n        }\n        if($start &gt; $end) {\n                ($start, $end) = ($end, $start);\n        }\n        my @range = ();\n        for (my $i = $start; $i &lt;= $end; $i += $step) {\n                push @range, $i;\n        }\n\n        return @range;\n}\n</code></pre>\n\n<p>When running</p>\n\n<pre><code>my @range = range(-3, -2.7, 0.01);\n</code></pre>\n\n<p>I get this list:</p>\n\n<pre><code>...\n$VAR23 = '-2.78';\n$VAR24 = '-2.77';\n$VAR25 = '-2.76000000000001';\n$VAR26 = '-2.75000000000001';\n$VAR27 = '-2.74000000000001';\n$VAR28 = '-2.73000000000001';\n$VAR29 = '-2.72000000000001';\n$VAR30 = '-2.71000000000001';\n$VAR31 = '-2.70000000000001';\n</code></pre>\n\n<p>Why does this happen?</p>\n\n<p>I have perl v5.24.1 on a 4.9.0-7-amd64 #1 SMP Debian 4.9.107-1 machine. Adding the bignum module does not change the fact that the variables calculated are wrong.</p>\n\n<p>Also, this does not happen when doing sometheng like \"-2.7 - 0.01\". </p>\n"}, {"tags": ["perl", "subroutine"], "comments": [{"owner": {"reputation": 991, "user_id": 2413548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d6ec5ea2e353b5979f01f9f38f47fa?s=128&d=identicon&r=PG", "display_name": "hootnot", "link": "https://stackoverflow.com/users/2413548/hootnot"}, "edited": false, "score": 4, "creation_date": 1531063465, "post_id": 51233260, "comment_id": 89445932, "body": "why use globals instead of passing the variable as argument ?"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 3, "creation_date": 1531070160, "post_id": 51233260, "comment_id": 89447704, "body": "<a href=\"https://www.perlmonks.org/?node_id=1218119\" rel=\"nofollow noreferrer\">Crossposted to PerlMonks</a>."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1531072372, "post_id": 51233260, "comment_id": 89448228, "body": "The obvious answer is to pass the <code>$server</code> variable into the subroutines (<code>command1($server)</code>). But you say &quot;the problem is $server variable cannot be passed inside the subroutines&quot;. It would be interesting to here what is preventing you from doing that."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1531090236, "post_id": 51233260, "comment_id": 89452079, "body": "(1) It is very unreasonable that a variable can&#39;t be local and passed to a subroutine.  You&#39;d have to explain it really well why this is so  (2) Given that, with <code>foreach (@servers) { func() };</code> the <code>$_</code> in the loop (another server in each iteration) is seen in the sub <code>func</code> as <code>$_</code>, so the sub is then <code>sub func { $server = $_ ... }</code>.  But this is horrible and I hope you can just normally, explicitly and transparently, pass to the function what it needs."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531074295, "post_id": 51233480, "comment_id": 89448697, "body": "Why do you insist on using a package variable for a global? Lexicals make perfectly good global variables."}, {"owner": {"reputation": 991, "user_id": 2413548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d6ec5ea2e353b5979f01f9f38f47fa?s=128&d=identicon&r=PG", "display_name": "hootnot", "link": "https://stackoverflow.com/users/2413548/hootnot"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531076733, "post_id": 51233480, "comment_id": 89449245, "body": "update because of @Borodin&#39;s question. Bottom line is keep away from using globals. A trap is easily created. Using <code>$server</code> as a lexical here in the foreach does not do what you think it would"}, {"owner": {"reputation": 991, "user_id": 2413548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d6ec5ea2e353b5979f01f9f38f47fa?s=128&d=identicon&r=PG", "display_name": "hootnot", "link": "https://stackoverflow.com/users/2413548/hootnot"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531120636, "post_id": 51233480, "comment_id": 89458759, "body": "@ikegami: <code>local </code>? : <i>Can&#39;t localize lexical variable $server</i>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531134039, "post_id": 51233480, "comment_id": 89466356, "body": "Oh sorry,  I thought you were using <code>our</code>. You&#39;re actually <i>increasing</i> the scope by using <code>my</code> instead of <code>our</code>+<code>local</code>."}], "tags": [], "owner": {"reputation": 991, "user_id": 2413548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d6ec5ea2e353b5979f01f9f38f47fa?s=128&d=identicon&r=PG", "display_name": "hootnot", "link": "https://stackoverflow.com/users/2413548/hootnot"}, "is_accepted": false, "score": -1, "last_activity_date": 1531135016, "last_edit_date": 1531135016, "creation_date": 1531063665, "answer_id": 51233480, "question_id": 51233260, "link": "https://stackoverflow.com/questions/51233260/passing-the-value-of-a-global-variable-inside-a-subroutine/51233480#51233480", "title": "Passing the value of a global variable inside a subroutine", "body": "<p>.. if you want to use globals:</p>\n\n<pre><code>our $server;\nmy (@list);\n\n... rest of the code ...\n</code></pre>\n\n<p>or when you want to keep it a lexical, see also <a href=\"https://stackoverflow.com/questions/28306510/perl-foreach-loop-variable-scope\">Perl foreach loop variable scope</a></p>\n\n<pre><code>use strict;\nuse warnings;\n\n\nmy (@list, $server);\n\n@list = qw/server1.net server2.net server3.net/;\n\nforeach (@list) {\n  $server = $_;   # &lt;&lt;-- use it this way\n  #calling sub-routines\n  command1();\n  command2();\n}\n\nsub command1 {\n  print $server;\n  system(\"command1\");\n}\n\nsub command2 {\n  print $server;\n  system(\"command2\");\n}\n</code></pre>\n\n<p>preferred: pass as argument like:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy (@list);\n\n@list = qw/server1.net server2.net server3.net/;\n\nforeach my $server(@list) {\n  #calling sub-routines\n  command1($server);\n  command2($server);\n}\n\nsub command1 {\n  my ($server) = @_;\n  print $server, \"\\n\";\n  system(\"command1\");\n}\n\nsub command2 {\n  my ($server) = @_;\n  print $server, \"\\n\";\n  system(\"command2\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1531117045, "last_edit_date": 1531117045, "creation_date": 1531092458, "answer_id": 51236726, "question_id": 51233260, "link": "https://stackoverflow.com/questions/51233260/passing-the-value-of-a-global-variable-inside-a-subroutine/51236726#51236726", "title": "Passing the value of a global variable inside a subroutine", "body": "<p>One of the most important rules of good programming is to reduce <a href=\"https://en.wikipedia.org/wiki/Coupling_(computer_programming)\" rel=\"nofollow noreferrer\">coupling</a>. Reducing a piece of code's dependencies on other pieces of code increases readability, increases maintainability, and decrease the chance of errors.</p>\n\n<p>Your subs should not rely on having a global variable declared and available. The subs should have a server parameter instead.</p>\n\n<p>For the same reason, you should also be limiting the scope of your variables to where they are needed.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw( say );\n\nsub command1 {\n   my ($server) = @_;\n   say $server;\n   system(\"command1\", $server);\n}\n\nsub command2 {\n   my ($server) = @_;\n   say $server;\n   system(\"command2\", $server);\n}\n\n{\n   my @servers = qw( server1.net server2.net server3.net );\n\n   for my $server (@servers) {\n      command1($server); \n      command2($server);\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 453, "user_id": 3834663, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5d57a494e224d18d06846290386de89b?s=128&d=identicon&r=PG&f=1", "display_name": "user3834663", "link": "https://stackoverflow.com/users/3834663/user3834663"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 51236726, "answer_count": 2, "score": 0, "last_activity_date": 1531161299, "creation_date": 1531062285, "question_id": 51233260, "link": "https://stackoverflow.com/questions/51233260/passing-the-value-of-a-global-variable-inside-a-subroutine", "title": "Passing the value of a global variable inside a subroutine", "body": "<p>Below is the code snippet i have written, here the problem is $server variable cannot be passed inside the subroutines. How can i pass the value of a global variable inside a subroutine. Please help!</p>\n\n<pre><code>    use strict;\n    use warnings;\n\n    my (@list,$server);\n\n    @list = qw/server1.net server2.net server3.net/;\n\n    foreach $server(@list) {\n    #calling sub-routines\n    command1(); \n    command2();\n    }\n\n    sub command1 {\n    print $server;\n    system(\"command1\");\n    }\n\n    sub command2 {\n    print $server;\n    system(\"command2\");\n    }\n</code></pre>\n"}, {"tags": ["perl", "ipc", "sysv-ipc"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1531048241, "post_id": 51231211, "comment_id": 89441898, "body": "See also: <a href=\"http://ods.com.ua/win/eng/program/Perl5Unleashed/ch13.phtml\" rel=\"nofollow noreferrer\">ods.com.ua/win/eng/program/Perl5Unleashed/ch13.phtml</a>. From that example (Listing 13.2 in the link) it seems like the documentation is correct and your code example is incorrect"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1531049034, "post_id": 51231211, "comment_id": 89442089, "body": "You&#39;ve found a bug in the documentation. &quot;<i>be followed by the length of the actual message,</i>&quot; is nonsense and should be deleted. On the other hand, your code doesn&#39;t make much sense either because it passes the length as the message type."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1531049210, "post_id": 51231211, "comment_id": 89442137, "body": "By the way, <a href=\"https://perl5.git.perl.org/perl.git/blob/6cb72a3d7fbefb477b95588e2fd81e33073da8b3:/doio.c#l3009\" rel=\"nofollow noreferrer\">here&#39;s the <code>msgsnd</code> code in perl</a>. It shows that the message size is computed automatically from the string you pass in."}, {"owner": {"reputation": 52444, "user_id": 82511, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/68191be8e55efa97fdda3a4a65af2b22?s=128&d=identicon&r=PG", "display_name": "djna", "link": "https://stackoverflow.com/users/82511/djna"}, "edited": false, "score": 0, "creation_date": 1531049428, "post_id": 51231211, "comment_id": 89442195, "body": "Yes, I&#39;m pretty sure I&#39;m in a twisty maze of broken code and doubtful documentation. What values should the $type parameter take?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1531049632, "post_id": 51231211, "comment_id": 89442254, "body": "For that you should refer to <a href=\"http://man7.org/linux/man-pages/man2/msgsnd.2.html\" rel=\"nofollow noreferrer\"><code>man 2 msgsnd</code></a> as Leonard&#39;s answer says: &quot;<i>The <code>mtype</code> field must have a strictly positive integer value.  This value can be used by the receiving process for message selection (see the description of <code>msgrcv()</code> below).</i>&quot; The system itself doesn&#39;t care; it&#39;s only meaningful to the receiver."}], "answers": [{"comments": [{"owner": {"reputation": 52444, "user_id": 82511, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/68191be8e55efa97fdda3a4a65af2b22?s=128&d=identicon&r=PG", "display_name": "djna", "link": "https://stackoverflow.com/users/82511/djna"}, "edited": false, "score": 0, "creation_date": 1531048032, "post_id": 51231350, "comment_id": 89441846, "body": "Thanks, that makes perfect sense, other than it not seeming to be consistent with the documentation. Why does the doc say &quot;pack(&quot;l! a*&quot;, $type, $message)&quot;? I&#39;m seeing length($msg) rather than a $type."}, {"owner": {"reputation": 991, "user_id": 2413548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d6ec5ea2e353b5979f01f9f38f47fa?s=128&d=identicon&r=PG", "display_name": "hootnot", "link": "https://stackoverflow.com/users/2413548/hootnot"}, "reply_to_user": {"reputation": 52444, "user_id": 82511, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/68191be8e55efa97fdda3a4a65af2b22?s=128&d=identicon&r=PG", "display_name": "djna", "link": "https://stackoverflow.com/users/82511/djna"}, "edited": false, "score": 0, "creation_date": 1531048314, "post_id": 51231350, "comment_id": 89441917, "body": "Pls. checkout the documentation for <i>pack</i>. It will clear some things. The way <i>pack</i> is used depends on your application. See this doc: <a href=\"https://perldoc.perl.org/perlpacktut.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlpacktut.html</a> with a lot of examples"}, {"owner": {"reputation": 52444, "user_id": 82511, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/68191be8e55efa97fdda3a4a65af2b22?s=128&d=identicon&r=PG", "display_name": "djna", "link": "https://stackoverflow.com/users/82511/djna"}, "edited": false, "score": 0, "creation_date": 1531049324, "post_id": 51231350, "comment_id": 89442164, "body": "Thanks, it&#39;s the apparent inconsistency between the perl doc I include above and the examples I see in the tut you reference."}], "tags": [], "owner": {"reputation": 991, "user_id": 2413548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d6ec5ea2e353b5979f01f9f38f47fa?s=128&d=identicon&r=PG", "display_name": "hootnot", "link": "https://stackoverflow.com/users/2413548/hootnot"}, "is_accepted": false, "score": 0, "last_activity_date": 1531048035, "last_edit_date": 1531048035, "creation_date": 1531047903, "answer_id": 51231350, "question_id": 51231211, "link": "https://stackoverflow.com/questions/51231211/perl-parameters-to-msgsnd/51231350#51231350", "title": "Perl: Parameters to msgsnd", "body": "<p>it creates a binary representation of the msg: <em>len</em> <em>msg</em>. Check it by:</p>\n\n<pre><code>perl -e '$a= \"abcde\"; print(pack(\"l! a*\", length($a), $a))' | od -c\n</code></pre>\n\n<p>Gives:</p>\n\n<pre><code> 0000000 005  \\0  \\0  \\0  \\0  \\0  \\0  \\0   a   b   c   d   e\n</code></pre>\n\n<p>0000015</p>\n"}, {"tags": [], "owner": {"reputation": 11455, "user_id": 10888, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/adbf81127c90a370ceab11b3087a8e4e?s=128&d=identicon&r=PG", "display_name": "Leonard", "link": "https://stackoverflow.com/users/10888/leonard"}, "is_accepted": false, "score": 2, "last_activity_date": 1531048034, "creation_date": 1531048034, "answer_id": 51231365, "question_id": 51231211, "link": "https://stackoverflow.com/questions/51231211/perl-parameters-to-msgsnd/51231365#51231365", "title": "Perl: Parameters to msgsnd", "body": "<p>The <a href=\"https://linux.die.net/man/2/msgsnd\" rel=\"nofollow noreferrer\">man page for msgsnd</a> says \"The mtext field is an array (or other structure) whose size is specified by msgsz, a nonnegative integer value. Messages of zero length (i.e., no mtext field) are permitted. The mtype field must have a strictly positive integer value. This value can be used by the receiving process for message selection (see the description of msgrcv() below).\"</p>\n\n<p>Thus type is not used by sndmsg itself and the length that appears in the type field might or might not be used on the receiving side.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 52444, "user_id": 82511, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/68191be8e55efa97fdda3a4a65af2b22?s=128&d=identicon&r=PG", "display_name": "djna", "link": "https://stackoverflow.com/users/82511/djna"}, "edited": false, "score": 0, "creation_date": 1531091471, "post_id": 51231496, "comment_id": 89452272, "body": "@djna, If it answered your question, please check the mark next to it. :)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1531091536, "last_edit_date": 1592644375, "creation_date": 1531049051, "answer_id": 51231496, "question_id": 51231211, "link": "https://stackoverflow.com/questions/51231211/perl-parameters-to-msgsnd/51231496#51231496", "title": "Perl: Parameters to msgsnd", "body": "<p>The application in question decided to use the type field to store the length of the message.</p>\n<p>(This is rather odd, since the size of the message is already available to the reader.)</p>\n<hr />\n<p>When the receiver request a message from the system, they may constrain the request to specific message types.</p>\n<blockquote>\n<ul>\n<li><p>If msgtyp is 0, then the first message in the queue is read.</p>\n</li>\n<li><p>If msgtyp is greater than 0, then the first message in the queue of type msgtyp is read, unless MSG_EXCEPT was specified in msgflg, in which case the first message in the queue of type not equal to msgtyp will be read.</p>\n</li>\n<li><p>If msgtyp is less than 0, then the first message in the queue with the lowest type less than or equal to the absolute value of msgtyp will be read.</p>\n</li>\n</ul>\n</blockquote>\n<p>If the receiver specifies <code>0</code> for <code>msgtyp</code>, then the message type provided by the sender isn't used by the system, and can therefore be used to carry other information.</p>\n"}], "owner": {"reputation": 52444, "user_id": 82511, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/68191be8e55efa97fdda3a4a65af2b22?s=128&d=identicon&r=PG", "display_name": "djna", "link": "https://stackoverflow.com/users/82511/djna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 51231496, "answer_count": 3, "score": 3, "last_activity_date": 1531091536, "creation_date": 1531046919, "last_edit_date": 1531049111, "question_id": 51231211, "link": "https://stackoverflow.com/questions/51231211/perl-parameters-to-msgsnd", "title": "Perl: Parameters to msgsnd", "body": "<p>I am maintaining some existing code</p>\n\n<p>I see this fragment:</p>\n\n<pre><code>msgsnd( $mQueue, pack(\"l! a*\", length($msg), $msg), 0) \n                                   || ... error handling ...\n</code></pre>\n\n<p>I would like to understand the call to pack() as the second argument to msgsnd.</p>\n\n<p>I find the following <a href=\"https://perldoc.perl.org/functions/msgsnd.html\" rel=\"nofollow noreferrer\">documentation for msgsend</a></p>\n\n<blockquote>\n  <p>Calls the System V IPC function msgsnd to send the message MSG to the\n  message queue ID. MSG must begin with the native long integer message\n  type, be followed by the length of the actual message, and then\n  finally the message itself. This kind of packing can be achieved with\n  pack(\"l! a*\", $type, $message) . Returns true if successful, false on\n  error. See also SysV IPC in perlipc and the documentation for\n  IPC::SysV and IPC::Msg .</p>\n</blockquote>\n\n<p>This gives the second parameter to pack as $type, but does not explain what $type is. The code I'm trying to understand instead passes the message length.</p>\n\n<p>What's going on? So far as I can tell the existing code is working reliably.</p>\n"}, {"tags": ["intellij-idea", "mason", "perl"], "answers": [{"tags": [], "owner": {"reputation": 14089, "user_id": 1623249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f09067f319ab59616926ba35e866fa70?s=128&d=identicon&r=PG", "display_name": "Maria Ines Parnisari", "link": "https://stackoverflow.com/users/1623249/maria-ines-parnisari"}, "is_accepted": false, "score": 0, "last_activity_date": 1531072221, "creation_date": 1531072221, "answer_id": 51234630, "question_id": 51226003, "link": "https://stackoverflow.com/questions/51226003/intellij-error-htmlmason-components-are-not-configured/51234630#51234630", "title": "Intellij error &quot;HTML::Mason components are not configured&quot;", "body": "<p>To fix this, go to the <strong>Settings</strong> menu, select <strong>Perl5</strong>, select your project, click the \"HTML::Mason components\" button, and select your source folder.</p>\n\n<p><a href=\"https://i.stack.imgur.com/1GzGA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1GzGA.png\" alt=\"Component roots\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 459, "user_id": 3628200, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c5c4d58401daea2a8c12d58df8bb94a7?s=128&d=identicon&r=PG&f=1", "display_name": "rneha725", "link": "https://stackoverflow.com/users/3628200/rneha725"}, "is_accepted": false, "score": 0, "last_activity_date": 1588173126, "creation_date": 1588173126, "answer_id": 61505166, "question_id": 51226003, "link": "https://stackoverflow.com/questions/51226003/intellij-error-htmlmason-components-are-not-configured/61505166#61505166", "title": "Intellij error &quot;HTML::Mason components are not configured&quot;", "body": "<p>You have to provide the source directory of your components folder where you are going to store your <code>*.mas</code>(components) files.\nGo to <code>Settings</code>, select <code>Perl5</code> and then select you component root folder.</p>\n"}], "owner": {"reputation": 179, "user_id": 4951877, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/APkSY.png?s=128&g=1", "display_name": "JeanieJ", "link": "https://stackoverflow.com/users/4951877/jeaniej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 459, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1588173126, "creation_date": 1530988770, "question_id": 51226003, "link": "https://stackoverflow.com/questions/51226003/intellij-error-htmlmason-components-are-not-configured", "title": "Intellij error &quot;HTML::Mason components are not configured&quot;", "body": "<p>I am trying to work with Perl/Mason packages on Intellij. I see red underlines everywhere with an error saying \"HTML::Mason components are not configured\". What steps do I need to take to get rid of them? </p>\n"}, {"tags": ["perl", "pipe", "substitution", "carriage-return", "chomp"], "comments": [{"owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 0, "creation_date": 1530983222, "post_id": 51225226, "comment_id": 89430871, "body": "I suspect there is a carriage return and line feed in your data which is causing the <code>|</code> character to show up at the start of line. Just a wild guess. try getting rid of all white space chars from <code>$line</code>"}, {"owner": {"reputation": 9, "user_id": 7728974, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HpKFO4S3nik/AAAAAAAAAAI/AAAAAAAAAGY/QmPVz9BnKxg/photo.jpg?sz=128", "display_name": "Konabob", "link": "https://stackoverflow.com/users/7728974/konabob"}, "reply_to_user": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 0, "creation_date": 1530990234, "post_id": 51225226, "comment_id": 89432503, "body": "The data is a list of IP addresses with carriage returns (\\r). For each line of data, I am trying to chomp of that carriage return, then it should print the $line, and add the  | character before the next $line is processed. I want the output to be all on one line. The s/// function seems to do what I expect it to do, but I am not comfortable with how I have chomp set up. There may be something else going on with my print command. I am baffled!"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1530997961, "post_id": 51225226, "comment_id": 89433977, "body": "chomp removes a trailing <code>\\n</code>, not a <code>\\r</code>..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1531003787, "post_id": 51225226, "comment_id": 89434962, "body": "Post answers as answers, even if it&#39;s to your own question"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1531040936, "post_id": 51225226, "comment_id": 89440292, "body": "@Shawn <a href=\"http://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow noreferrer\"><code>chomp</code></a> removes whatever the current value of <a href=\"http://perldoc.perl.org/perlvar.html#%24/\" rel=\"nofollow noreferrer\"><code>$&#47;</code></a> is, which is <code>\\n</code> only by default."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1531003806, "last_edit_date": 1531003806, "creation_date": 1531002092, "answer_id": 51227345, "question_id": 51225226, "link": "https://stackoverflow.com/questions/51225226/perl-chomp-plus-s-yielding-very-strange-results/51227345#51227345", "title": "Perl chomp plus =~s Yielding very strange results", "body": "<p><code>chomp</code> removes the value of <code>$/</code>, which is set to the string produced by <code>\"\\n\"</code> by default.</p>\n\n<p>For input, however, you have</p>\n\n<pre><code>@dead = (\n   \"54.245\\.\\r\\n\",\n   \"54.252\\.\\r\\n\",\n   \"60.177\\.\\r\\n\",\n);\n</code></pre>\n\n<p>This simple fix:</p>\n\n<pre><code>open(my $dead_fh, '&lt;', $dead_qfn)\n   or die(\"Can't open \\\"$dead_qfn: $!\\n\");\n\nwhile (my $line = &lt;$dead_fh&gt;) {\n   $line =~ s/\\s+\\z//;\n   $line =~ s/\\./\\\\./g\n   print($out_fh \"\\\\(\\\\[$line\\|\");\n}\n\nprint($out_fh \"\\n\");\n</code></pre>\n\n<p>(The alternative is to add the <code>:crlf</code> layer to your input handle.)</p>\n\n<p>Using <a href=\"http://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\"><code>quotemeta</code></a> makes more sense</p>\n\n<pre><code>open(my $dead_fh, '&lt;', $dead_qfn)\n   or die(\"Can't open \\\"$dead_qfn: $!\\n\");\n\nwhile (my $line = &lt;$dead_fh&gt;) {\n   $line =~ s/\\s+\\z//;\n   print($out_fh quotemeta(\"([$line|\"));\n}\n\nprint($out_fh \"\\n\");\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 7728974, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HpKFO4S3nik/AAAAAAAAAAI/AAAAAAAAAGY/QmPVz9BnKxg/photo.jpg?sz=128", "display_name": "Konabob", "link": "https://stackoverflow.com/users/7728974/konabob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531003806, "creation_date": 1530982864, "last_edit_date": 1531001628, "question_id": 51225226, "link": "https://stackoverflow.com/questions/51225226/perl-chomp-plus-s-yielding-very-strange-results", "title": "Perl chomp plus =~s Yielding very strange results", "body": "<p>I am writing a perl program which creates a procmailrc text file.</p>\n\n<p>The output procmail requires looks like this:\n(partial IP addresses separated by \"|\")</p>\n\n<pre><code>\\(\\[54\\.245\\.|\\(\\[54\\.252\\.|\\(\\[60\\.177\\.|\n</code></pre>\n\n<p>Here is my perl script:</p>\n\n<pre><code>open (DEAD, \"$dead\");\n@dead = &lt;DEAD&gt;;\nforeach $line (@dead) { chomp $line; $line =~s /\\./\\\\./g;\nprint FILE \"\\\\(\\\\[$line\\|\\n\"; }\nclose (DEAD);\n</code></pre>\n\n<p>Here is the output I am getting:</p>\n\n<pre><code>|(\\[54\\.245\\.\n|(\\[54\\.252\\.\n|(\\[60\\.177\\.\n</code></pre>\n\n<p>Why is chomp not removing the line breaks?\nStranger still, why is the '|' appearing at the front of each line, rather than at the end?</p>\n\n<p>If I replace $line with a word, (print FILE \"\\(\\[test\\|\"; })\nThe output looks the way I would expect it to look:</p>\n\n<pre><code>\\(\\[test|\\(\\[test|\\(\\[test|\\(\\[test|\n</code></pre>\n\n<p>What am I missing here?</p>\n\n<p>So I found a work-around that does not use chomp:\nThe answer was here:<a href=\"https://www.perlmonks.org/?node_id=504626\" rel=\"nofollow noreferrer\">https://www.perlmonks.org/?node_id=504626</a></p>\n\n<p>My new code:</p>\n\n<pre><code>open (DEAD, \"$dead\");\n@dead = &lt;DEAD&gt;;\nforeach $line (@junk) { \n$line =~ s/\\r[\\n]*//gm; $line =~ s/\\./\\\\./g;  $line =~ s/\\:/\\\\:/g;\nprint FILE \"\\\\(\\\\[$line \\|\"; }\nclose (DEAD);\n</code></pre>\n\n<p>Thanks to those of you who gave me some hints.</p>\n"}, {"tags": ["perl", "unix", "tcl"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 1, "creation_date": 1530922903, "post_id": 51218908, "comment_id": 89419033, "body": "How do you invoke Tcl?  Is it being run from within the Perl code?  You need to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates the issue, something that somebody else could take and run locally."}, {"owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 1, "creation_date": 1530924004, "post_id": 51218908, "comment_id": 89419177, "body": "Why would one need to pass a &quot;global&quot; variable?"}, {"owner": {"reputation": 119001, "user_id": 301832, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG", "display_name": "Donal Fellows", "link": "https://stackoverflow.com/users/301832/donal-fellows"}, "edited": false, "score": 0, "creation_date": 1530967058, "post_id": 51218908, "comment_id": 89426932, "body": "Would you expect <code>output_directory_final</code> to match <code>output_directory_init</code> on the other? They&#39;re obviously different\u2026"}, {"owner": {"reputation": 45, "user_id": 10044714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbc64ef3de10b4a409c96510e97cc9b?s=128&d=identicon&r=PG&f=1", "display_name": "coolcom", "link": "https://stackoverflow.com/users/10044714/coolcom"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1531153721, "post_id": 51218908, "comment_id": 89479076, "body": "@JimGarrison I&#39;m launching a job and tunning the tcl script. Hence, I could not give the entire code. But, this being a question, I have put forward my code which has the issue."}, {"owner": {"reputation": 45, "user_id": 10044714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbc64ef3de10b4a409c96510e97cc9b?s=128&d=identicon&r=PG&f=1", "display_name": "coolcom", "link": "https://stackoverflow.com/users/10044714/coolcom"}, "reply_to_user": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 0, "creation_date": 1531153748, "post_id": 51218908, "comment_id": 89479092, "body": "@RedCricket I changed the title. Sorry for the typo!"}, {"owner": {"reputation": 45, "user_id": 10044714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbc64ef3de10b4a409c96510e97cc9b?s=128&d=identicon&r=PG&f=1", "display_name": "coolcom", "link": "https://stackoverflow.com/users/10044714/coolcom"}, "reply_to_user": {"reputation": 119001, "user_id": 301832, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG", "display_name": "Donal Fellows", "link": "https://stackoverflow.com/users/301832/donal-fellows"}, "edited": false, "score": 0, "creation_date": 1531153777, "post_id": 51218908, "comment_id": 89479111, "body": "@DonalFellows I changed it. Sorry for the typo!"}], "answers": [{"comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1531094563, "post_id": 51219033, "comment_id": 89452720, "body": "Or, specify the global namespace: <code>$::env(...)</code>"}, {"owner": {"reputation": 1487, "user_id": 607434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0b458e94231d885c11b9d87773264bd?s=128&d=identicon&r=PG", "display_name": "andy mango", "link": "https://stackoverflow.com/users/607434/andy-mango"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1531099406, "post_id": 51219033, "comment_id": 89453405, "body": "Quite right. I was just avoiding the <code>namespace</code> concept for a professed newbie."}], "tags": [], "owner": {"reputation": 1487, "user_id": 607434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0b458e94231d885c11b9d87773264bd?s=128&d=identicon&r=PG", "display_name": "andy mango", "link": "https://stackoverflow.com/users/607434/andy-mango"}, "is_accepted": true, "score": 1, "last_activity_date": 1530923598, "creation_date": 1530923598, "answer_id": 51219033, "question_id": 51218908, "link": "https://stackoverflow.com/questions/51218908/passing-environment-variables-from-perl-to-tcl/51219033#51219033", "title": "Passing environment variables from perl to tcl", "body": "<p>By special dispensation, the global array <code>env</code> in Tcl contains the values of the environment variables for the process. In your case, try something like:</p>\n\n<pre><code>set out_path $env(output_directory_final)\n</code></pre>\n\n<p>Be mindful that if you are inside a <code>proc</code>, then a <code>global env</code> command is necessary to obtain local access to the variable.</p>\n"}], "owner": {"reputation": 45, "user_id": 10044714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbc64ef3de10b4a409c96510e97cc9b?s=128&d=identicon&r=PG&f=1", "display_name": "coolcom", "link": "https://stackoverflow.com/users/10044714/coolcom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 1, "accepted_answer_id": 51219033, "answer_count": 1, "score": 1, "last_activity_date": 1531153625, "creation_date": 1530921845, "last_edit_date": 1531153625, "question_id": 51218908, "link": "https://stackoverflow.com/questions/51218908/passing-environment-variables-from-perl-to-tcl", "title": "Passing environment variables from perl to tcl", "body": "<p>I'm a newbie to Perl and Tcl. I'm trying to pass a variable from a Perl script to a Tcl script. I declared the variable as environment variable and trying to pass. But no results. Please find the code below:</p>\n\n<p>Perl side:</p>\n\n<pre><code> $ENV{'output_directory_final'} = \"./$Image_name/$Date_release/final\";\n</code></pre>\n\n<p>Tcl side:</p>\n\n<pre><code> set out_path ${output_directory_final};\n</code></pre>\n\n<p>But, this is not working. Can anyone give any other ideas?</p>\n"}, {"tags": ["regex", "perl", "ubuntu-18.04"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1530916118, "post_id": 51218150, "comment_id": 89417783, "body": "What is this <code>configure</code> file?  By  the looks of the error it is apparently executed as a Perl script, which it isn&#39;t (the shown snippet isn&#39;t valid Perl)."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9975655, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q04-_BO67rU/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq17IbWpfCleYbcSh3uwe8pY43tB9g/mo/photo.jpg?sz=128", "display_name": "P Cho", "link": "https://stackoverflow.com/users/9975655/p-cho"}, "edited": false, "score": 0, "creation_date": 1531518675, "post_id": 51220185, "comment_id": 89641866, "body": "Thanks, but I&#39;m getting the error:  *** Error *** The GENIE environmental variable (pointing to the top level GENIE directory) is not defined at ./configure line 63.  There seems to be a problem with the configure file, should I try defining the variables as I tried last time?"}, {"owner": {"reputation": 1, "user_id": 9975655, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q04-_BO67rU/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq17IbWpfCleYbcSh3uwe8pY43tB9g/mo/photo.jpg?sz=128", "display_name": "P Cho", "link": "https://stackoverflow.com/users/9975655/p-cho"}, "edited": false, "score": 0, "creation_date": 1531519457, "post_id": 51220185, "comment_id": 89642091, "body": "I would be very grateful if you could please help me again"}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 2, "last_activity_date": 1530941271, "creation_date": 1530941271, "answer_id": 51220185, "question_id": 51218150, "link": "https://stackoverflow.com/questions/51218150/regex-modifier-error-on-a-perl-configure-file/51220185#51220185", "title": "Regex Modifier error on a perl configure file", "body": "<p>I found this <a href=\"http://releases.genie-mc.org/\" rel=\"nofollow noreferrer\">GENIE-Generator</a> program and downloaded the (rather old) version 2.8.6. Lines 62, 71 and 75 of the configure script do not match up with what you quoted, nor do I get your errors when trying to run it.</p>\n\n<p>Your copy has been altered in some fashion for some reason from the stock source tarball, and changed into something that isn't valid perl.</p>\n\n<p>What I would do: Delete the whole thing, and re-download a fresh copy of the source (I'd suggest the current release unless you're locked into that old one for some reason), and try again with the new, clean copy.</p>\n\n<pre><code>$ rm -rf GENIE-Generator_v2.8.6 GENIE-Generator_v2.8.6.tar.gz\n$ wget http://www.hepforge.org/archive/genie/GENIE-Generator_v2.8.6.tar.gz\n$ tar xzf GENIE-Generator_v2.8.6.tar.gz\n$ cd GENIE-Generator_v2.8.6\n$ ./configure\n</code></pre>\n\n<p>(Adjust filenames as needed)</p>\n"}], "owner": {"reputation": 1, "user_id": 9975655, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q04-_BO67rU/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq17IbWpfCleYbcSh3uwe8pY43tB9g/mo/photo.jpg?sz=128", "display_name": "P Cho", "link": "https://stackoverflow.com/users/9975655/p-cho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530941271, "creation_date": 1530914618, "question_id": 51218150, "link": "https://stackoverflow.com/questions/51218150/regex-modifier-error-on-a-perl-configure-file", "title": "Regex Modifier error on a perl configure file", "body": "<p>I was trying to install Genie on my computer (which is running Ubuntu 18.04 LTS), but I am stuck on a piece of code. I am sending you the error message when I try to check the dependencies of the program or the </p>\n\n<blockquote>\n  <p>./configure </p>\n</blockquote>\n\n<p>However, I am getting the following error:</p>\n\n<pre><code>    p:~/Downloads/GENIE-Generator_v2.8.6$ ./configure\nBareword found where operator expected at ./configure line 62, near \"$/Downloads\"\n    (Missing operator before Downloads?)\nBareword found where operator expected at ./configure line 71, near \"$/Downloads\"\n    (Missing operator before Downloads?)\nUnquoted string \"root\" may clash with future reserved word at ./configure line 71.\nUnquoted string \"data\" may clash with future reserved word at ./configure line 75.\nUnquoted string \"banner\" may clash with future reserved word at ./configure line 75.\nUnquoted string \"txt\" may clash with future reserved word at ./configure line 75.\nUnquoted string \"configure\" may clash with future reserved word at ./configure line 85.\nsyntax error at ./configure line 62, near \"$/Downloads\"\nsyntax error at ./configure line 71, near \"$/Downloads\"\nExecution of ./configure aborted due to compilation errors.\n</code></pre>\n\n<p>In the configure file, the appropriate lines would be:</p>\n\n<pre><code>$GENIE =$/Downloads/GENIE-Generator_v2.8.6;     (ln 62)\n$ROOTSYS =$/Downloads/root                      (ln 71)\n$BANNER_FILE = $GENIE/data/banner/BANNER.txt;   (ln 75)\n</code></pre>\n\n<p>.</p>\n\n<p>I am a novice in this community, so I'm afraid I don't know a lot about the etiquette and guidelines of this community or of the language. I have a very limited understanding of both the language (Perl) and the OS (Ubuntu), so I'm afraid I would need a step by step solution. I would be very grateful if you could please provide me with one.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["oracle", "perl", "dbi", "dbd"], "owner": {"reputation": 387, "user_id": 1463788, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a87bd7788b25685b65135313865f5356?s=128&d=identicon&r=PG", "display_name": "ND Geek", "link": "https://stackoverflow.com/users/1463788/nd-geek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1530898689, "creation_date": 1530898689, "question_id": 51215368, "link": "https://stackoverflow.com/questions/51215368/dbdoracle-unable-to-connect-due-to-ocienvnlscreate-error-on-macos-10-12-6", "title": "DBD::Oracle unable to connect due to OCIEnvNlsCreate error on MacOS 10.12.6", "body": "<p>I'm trying to connect to an Oracle server in a Perl script.  The script works on other machines that are already configured.  I'm trying to set up my machine to allow me to do local development.</p>\n\n<p>I have extracted <code>instantclient-basic-macos.x64-11.2.0.4.0.zip</code>, <code>instantclient-sqlplus-macos.x64-11.2.0.4.0.zip</code>, <code>instatnclient-sdk-macos.x64-11.2.0.4.0.zip</code>, and <code>instantclient-jdbc-macos.x64-11.2.0.4.0.zip</code> to <code>/usr/local/oracle_client</code>.  I have added that location to my <code>PATH</code>, <code>ORACLE_HOME</code>, <code>LD_LIBRARY_PATH</code>, and <code>DYLD_LIBRARY_PATH</code> environment variables via both <code>.bashrc</code> and <code>.bash_profile</code> in an attempt to find a fix.  I have added the variables to the Perl script environment directly by setting them directly in the script:</p>\n\n<pre><code>$ENV{'ORACLE_HOME'} = '/usr/local/oracle_client';\n$ENV{'LD_LIBRARY_PATH'} = $ENV{'ORACLE_HOME'};\n$ENV{'DYLD_LIBRARY_PATH'} = $ENV{'ORACLE_HOME'};\n</code></pre>\n\n<p>I have reinstalled DBD::Oracle multiple times with various environment configurations.  I can connect to the database using the <code>sqlplus</code> client installed to <code>/usr/local/oracle_client</code>.</p>\n\n<p>Inside <code>/usr/local/oracle_client</code>, I have created symlinks for <code>bin</code> and <code>lib</code> pointing to the <code>/usr/local/oracle_client</code> dir (<code>bin -&gt; .</code>).  The SDK also lives inside a subdirectory structure located at <code>/usr/local/oracle_client/sdk</code>, but all of the include files have been copied to the /usr/local/oracle_client folder.</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["perl", "soap", "request", "wsdl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531118060, "post_id": 51215232, "comment_id": 89457571, "body": "Welcome to Stack Overflow. You did not really ask a question. This is not the right place to ask for tutorial links. Please <a href=\"https://stackoverflow.com/posts/51215232/edit\">edit</a> your question and ask for concrete help."}, {"owner": {"reputation": 55, "user_id": 10043658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a89924381eca7b075e59da532c69da9?s=128&d=identicon&r=PG&f=1", "display_name": "DanoSVK", "link": "https://stackoverflow.com/users/10043658/danosvk"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531176400, "post_id": 51215232, "comment_id": 89488913, "body": "@simbabque I didn&#39;t ask for tutorial link, I was asking what is wrong with the code, please read it again, I said that I was looking for tutorials but it didn&#39;t help me so then I went here."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531212133, "post_id": 51215232, "comment_id": 89499605, "body": "And yet, you have not told us what the code is supposed to be doing, what is happening, if there are any errors, or what you need help with, and you still have not asked a question. Why do you think your code is <i>bad</i>? Please take the <a href=\"https://stackoverflow.com/tour\">tour</a>, read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and then provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. We can only help if you give us more information."}, {"owner": {"reputation": 55, "user_id": 10043658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a89924381eca7b075e59da532c69da9?s=128&d=identicon&r=PG&f=1", "display_name": "DanoSVK", "link": "https://stackoverflow.com/users/10043658/danosvk"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531297227, "post_id": 51215232, "comment_id": 89538377, "body": "@simbabque Thank you, I updated question."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531297622, "post_id": 51215232, "comment_id": 89538609, "body": "Can you see the actual XML that being sent over the wire? Try using <a href=\"https://metacpan.org/pod/LWP::ConsoleLogger::Everywhere\" rel=\"nofollow noreferrer\">LWP::ConsoleLogger::Everywhere</a> to easily get that. Can you download the WSDL file to compare? I think a 401 would be rather that you need basic auth in the request that it does to get the WSDL in the first place. That&#39;s not an XML based request, but a simple HTTP GET."}], "owner": {"reputation": 55, "user_id": 10043658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a89924381eca7b075e59da532c69da9?s=128&d=identicon&r=PG&f=1", "display_name": "DanoSVK", "link": "https://stackoverflow.com/users/10043658/danosvk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 429, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1531297207, "creation_date": 1530898095, "last_edit_date": 1531297207, "question_id": 51215232, "link": "https://stackoverflow.com/questions/51215232/soap-request-in-perl", "title": "SOAP request in Perl", "body": "<p>I have to make SOAP request in Perl to some web service.</p>\n\n<p>Details what I have:</p>\n\n<ul>\n<li>URL of website: <a href=\"https://example.com/integration/webServices/api?wsdl\" rel=\"nofollow noreferrer\">https://example.com/integration/webServices/api?wsdl</a></li>\n<li>Name of service: importSheet</li>\n<li>Parameters for calling service: importSheetRequest</li>\n<li>userId: 123456</li>\n<li>apiKey: abcdefgh123456</li>\n</ul>\n\n<p>This is example of SOAP:  </p>\n\n<pre><code>&lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:ns1=\"http://webeph/wsdl/\"&gt;\n   &lt;SOAP-ENV:Body&gt;\n      &lt;ns1:importSheetRequest&gt;\n         &lt;auth&gt;\n            &lt;!-- auth data (userId and apiKey) --&gt;\n         &lt;/auth&gt;\n         &lt;EPH&gt;\n            &lt;!-- some custom params --&gt;\n         &lt;/EPH&gt;\n         &lt;contract&gt;true&lt;/contract&gt;\n      &lt;/ns1:importSheetRequest&gt;\n   &lt;/SOAP-ENV:Body&gt;\n&lt;/SOAP-ENV:Envelope&gt;\n</code></pre>\n\n<p>And this is code in Perl so far, but it is bad, I was looking for tutorials but I don't understand it, so I would be very happy for any help.</p>\n\n<pre><code>    my $soap = SOAP::Lite-&gt;soapversion('1.2')-&gt;new(\n        'service' =&gt; 'https://example.com/integration/webServices/api?wsdl',\n        'timeout' =&gt; 600\n    );\n    $soap-&gt;transport-&gt;timeout(600);\n    $soap-&gt;default_ns('https://example.com');\n    $soap-&gt;on_action(\n        sub\n        { \"https://example.com/integration/webServices/api?wsdl\" }\n    );\n    my $request = $soap-&gt;call(\n        'importSheet',\n        SOAP::Data-&gt;name('userId')-&gt;value('123456'),\n        SOAP::Data-&gt;name('apiKey')-&gt;value('abcdefgh123456'),\n        SOAP::Data-&gt;name('contract')-&gt;value('true'),\n    );\n\n\n    my $result = $request -&gt;result();\n\n    print Dumper($result);\n</code></pre>\n\n<p>Error what I get is:</p>\n\n<blockquote>\n  <p>-crashed with Service description '<a href=\"https://example.com/integration/webServices/api?wsdl\" rel=\"nofollow noreferrer\">https://example.com/integration/webServices/api?wsdl</a>' can't be\n  loaded: 401 Unauthorized</p>\n</blockquote>\n\n<p>So I think there is problem with authorization, so problem should be in this section:</p>\n\n<pre><code> &lt;auth&gt;\n    &lt;!-- auth data (userId and apiKey) --&gt;\n &lt;/auth&gt;\n</code></pre>\n\n<p>So this:</p>\n\n<pre><code>    SOAP::Data-&gt;name('userId')-&gt;value('123456'),\n    SOAP::Data-&gt;name('apiKey')-&gt;value('abcdefgh123456')\n</code></pre>\n\n<p>Should be nested in auth tag I think, but I don't know if it is the problem and how to do it.</p>\n"}, {"tags": ["perl", "dbix-class"], "answers": [{"tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1530900506, "creation_date": 1530900506, "answer_id": 51215742, "question_id": 51214451, "link": "https://stackoverflow.com/questions/51214451/is-there-a-way-to-provide-mysql-enable-utf8-1-option-for-dbic-migration-scr/51215742#51215742", "title": "Is there a way to provide `mysql_enable_utf8 =&gt; 1` option for dbic-migration script?", "body": "<p>Seems I found. <a href=\"https://metacpan.org/pod/DBI#parse_dsn\" rel=\"nofollow noreferrer\">The section</a> where described how DSN is parsed shows:</p>\n\n<pre><code>DBI-&gt;parse_dsn(\"dbi:MyDriver(RaiseError=&gt;1):db=test;port=42\")\n</code></pre>\n\n<p>Thus in my case I just setup <code>DBIC_MIGRATION_DSN</code>:</p>\n\n<pre><code>DBIC_MIGRATION_DSN='dbi:mysql(mysql_enable_utf8=&gt;1):dbname=mydb;host=127.0.0.1;port=3306' dbic-migration ....\n</code></pre>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 51215742, "answer_count": 1, "score": 1, "last_activity_date": 1530900506, "creation_date": 1530894575, "question_id": 51214451, "link": "https://stackoverflow.com/questions/51214451/is-there-a-way-to-provide-mysql-enable-utf8-1-option-for-dbic-migration-scr", "title": "Is there a way to provide `mysql_enable_utf8 =&gt; 1` option for dbic-migration script?", "body": "<p>I use <a href=\"https://metacpan.org/pod/DBIx::Class::Migration\" rel=\"nofollow noreferrer\">DBIx::Class::Migration</a></p>\n\n<p>I extract data from database with command:</p>\n\n<pre><code>${MIGRATION_CMD} --schema_class ${APP_NAMESPACE} --database ${DB_TYPE} -Ilib dump_all_sets\n</code></pre>\n\n<p>The database is utf8 aware, but dumped fixtures has '?????' in place of utf8 character:</p>\n\n<pre><code>$HASH1 = {\n           id         =&gt; 125,\n           last_name  =&gt; '?????',\n         };\n</code></pre>\n\n<p>The module does not document how to tell <code>dbic-migration</code> script about utf8 database aware.</p>\n\n<p><strong>Is there a way to provide <code>mysql_enable_utf8 =&gt; 1</code> option for <code>dbic-migration</code> script?</strong> Like I do that with connect:</p>\n\n<pre><code>App::Schema-&gt;connect( $DSN, $user, $password, {\n    mysql_enable_utf8 =&gt; 1\n});\n</code></pre>\n"}, {"tags": ["perl", "scope", "global-variables", "dynamic-scope"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1530887262, "post_id": 51212279, "comment_id": 89406024, "body": "This is a good explanation of something overly complicated. Why do you want to do this? In most cases this is not a good idea."}, {"owner": {"reputation": 115, "user_id": 8278183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f39893532f42c1a136ba2fd95a6739?s=128&d=identicon&r=PG&f=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/8278183/akhil"}, "edited": false, "score": 0, "creation_date": 1530944195, "post_id": 51212279, "comment_id": 89421750, "body": "As to the purpose of  <code>change</code>, the idea is to expose a &quot;handle&quot; for someone else to influence the script without having to actually modify the script. So some functions like <code>change</code> would be in a file (like <code>funcs.pm</code>) and this person will just have to change that file to influence some stuff happening in the main script. The way this was set up was to have a pre-agreed upon set of variable names that would be messed around with in <code>funcs.pm</code> (passing arguments is probably a much better idea)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1531156766, "post_id": 51212279, "comment_id": 89480615, "body": "A couple of notes. The <a href=\"https://perldoc.perl.org/functions/package.html\" rel=\"nofollow noreferrer\">package</a> &quot;<i>declares the BLOCK or <b>the rest of the compilation unit</b></i>&quot; (my emphasis) as being in that namespace; so the posted sample program doesn&#39;t even have <code>main::</code>  (2) As shown <code>change</code> is in <code>plshelp</code> package, not <code>funcs</code> as implied in a comment. So it&#39;d be <code>plshelp::change()</code>, but if you export the symbol <code>change</code> from <code>plshelp</code> package and import it in the caller then you can just say <code>change()</code>. Nothing from the <code>use</code>d package <code>funcs</code> is seen in the code."}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 8278183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f39893532f42c1a136ba2fd95a6739?s=128&d=identicon&r=PG&f=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/8278183/akhil"}, "edited": false, "score": 0, "creation_date": 1530891165, "post_id": 51213366, "comment_id": 89408134, "body": "<i>Did you imagine that the package statement was solely for advertising for help and it didn&#39;t matter what you put in there:</i> I imagined <code>package</code> was just for specifying the namespace of the subsequent code. If both <code>change</code> and the main script were to use variables in the same namespace, why not use the same namespace (<code>package</code>) in both places?"}, {"owner": {"reputation": 115, "user_id": 8278183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f39893532f42c1a136ba2fd95a6739?s=128&d=identicon&r=PG&f=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/8278183/akhil"}, "edited": false, "score": 0, "creation_date": 1530891407, "post_id": 51213366, "comment_id": 89408249, "body": "<i>I can&#39;t really explain things as your own code is so far from working:</i> It&#39;s not that far from working actually. If I use <code>$plshelp::pointer</code> instead of <code>$pointer</code> in <code>funcs.pm</code>, the code works fine. It also works fine if I declare a global variable with <code>our $pointer</code> in <code>funcs.pm</code>. It also works fine if I remove the <code>use strict</code> directive."}, {"owner": {"reputation": 115, "user_id": 8278183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f39893532f42c1a136ba2fd95a6739?s=128&d=identicon&r=PG&f=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/8278183/akhil"}, "edited": false, "score": 0, "creation_date": 1530891564, "post_id": 51213366, "comment_id": 89408350, "body": "I don&#39;t see anything that much <i>wrong</i> with the code from a purely syntactic perspective. It is possible that this is a very bad way of achieving the thing I want to do, but the code is quite alright as far as the Perl compiler is concerned."}, {"owner": {"reputation": 115, "user_id": 8278183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f39893532f42c1a136ba2fd95a6739?s=128&d=identicon&r=PG&f=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/8278183/akhil"}, "edited": false, "score": 0, "creation_date": 1530891739, "post_id": 51213366, "comment_id": 89408446, "body": "Coming to the code you have suggested, if I could pass an argument to the <code>change</code> function like you did using <code>change(\\$var)</code>, why would I even go through so much trouble using dynamic scoping and all?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": -1, "last_activity_date": 1530890754, "last_edit_date": 1530890754, "creation_date": 1530890042, "answer_id": 51213366, "question_id": 51212279, "link": "https://stackoverflow.com/questions/51212279/how-to-avoid-global-variable-declaration-when-using-perls-dynamic-scoping/51213366#51213366", "title": "How to avoid global variable declaration when using Perl&#39;s dynamic scoping?", "body": "<p>There's too much wrong with your code to just fix it</p>\n\n<p>You've used <code>package plshelp</code> in both the main script and the module, even though the main entry point is in <code>main.pl</code> and your module is in <code>funcs.pm</code>. That's just irresponsible. Did you imagine that the <code>package</code> statement was solely for advertising for help and it didn't matter what you put in there?</p>\n\n<p>Your post doesn't say what is wrong with what you have written, but it's surprising that it doesn't throw an error.</p>\n\n<p>Here's something close that does what you seem to expect. I can't really explain things as your own code is so far from working</p>\n\n<h3>Functions.pm</h3>\n\n<pre><code>package Functions;\n\nuse strict;\nuse warnings;\n\nuse Exporter 'import';\n\nour @EXPORT_OK = 'change';\n\nsub change {\n\n    my ($ref) = @_;\n\n    $$ref = 4;\n}\n</code></pre>\n\n<h3>main.pl</h3>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse Functions 'change';\n\nmy $var = 44;\n\nprint \"$var\\n\";\nchange(\\$var);\nprint \"$var\\n\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>44\n4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 5, "last_activity_date": 1530961772, "creation_date": 1530961772, "answer_id": 51222595, "question_id": 51212279, "link": "https://stackoverflow.com/questions/51212279/how-to-avoid-global-variable-declaration-when-using-perls-dynamic-scoping/51222595#51222595", "title": "How to avoid global variable declaration when using Perl&#39;s dynamic scoping?", "body": "<p>Let's be clear about how global variables with <code>our</code> work and why they have to be declared: There's a difference between the storage of a global variable, and visibility of its unqualified name. Under <code>use strict</code>, undefined variable names will not implicitly refer to a global variable.</p>\n\n<ul>\n<li><p>We can always access the global variable with its fully qualified name, e.g. <code>$Foo::bar</code>. </p></li>\n<li><p>If a global variable in the current package already exists at compile time and is marked as an imported variable, we can access it with an unqualified name, e.g. <code>$bar</code>. If a <code>Foo</code> package is written appropriately, we could say <code>use Foo qw($bar); say $bar</code> where <code>$bar</code> is now a global variable in our package.</p></li>\n<li><p>With <code>our $foo</code>, we create a global variable in the current package if that variable doesn't already exist. The name of the variable is also made available in the current lexical scope, just like the variable of a <code>my</code> declaration.</p></li>\n</ul>\n\n<p>The <code>local</code> operator does not create a variable. Instead, it saves the current value of a global variable and clears that variable. At the end of the current scope, the old value is restored. You can interpret each global variable name as a stack of values. With <code>local</code> you can add (and remove) values on the stack.\nSo while <code>local</code> can dynamically scope a value, it does not create a dynamically scoped variable name.</p>\n\n<p>By carefully considering which code is compiled when, it becomes clear why your example doesn't currently work:</p>\n\n<ul>\n<li><p>In your main script, you load the module <code>funcs</code>. The <code>use</code> statement is executed in the BEGIN phase, i.e. during parsing.</p>\n\n<pre><code>use warnings;\nuse strict;\n\npackage plshelp;\nuse funcs;\n</code></pre></li>\n<li><p>The <code>funcs</code> module is compiled:</p>\n\n<pre><code>use warnings;\nuse strict;\n\npackage plshelp;\n\nsub change\n{\n    ${$pointer} = 4;\n}\n</code></pre>\n\n<p>At this point, no <code>$pointer</code> variable is in lexical scope and no imported global <code>$pointer</code> variable exists. Therefore you get an error. This compile-time observation is unrelated to the existence of a <code>$pointer</code> variable at runtime.</p></li>\n</ul>\n\n<p>The canonical way to fix this error is to declare an <code>our $pointer</code> variable name in the scope of the <code>sub change</code>:</p>\n\n<pre><code>sub change {\n    our $pointer;\n    ${$pointer} = 4;\n}\n</code></pre>\n\n<p>Note that the global variable will exist anyway, this just brings the name into scope for use as an unqualified variable name.</p>\n\n<hr>\n\n<p>Just because you can use global variables doesn't mean that you should. There are two issues with them:</p>\n\n<ul>\n<li><p>On a design level, global variables do not declare a clear interface. By using a fully qualified name you can simply access a variable without any checks. They do not provide any encapsulation. This makes for fragile software and weird action-at-a-distance.</p></li>\n<li><p>On an implementation level, global variables are simply less efficient than lexical variables. I have never actually seen this matter, but think of the cycles!</p></li>\n</ul>\n\n<p>Also, global variables are <em>global</em> variables: They can only have one value at a time! Scoping the value with <code>local</code> can help to avoid this in some cases, but there can still be conflicts in complex systems where two modules want to set the same global variable to different values and those modules call into each other.</p>\n\n<p>The only good uses for global variables I have seen are to provide additional context to a callback that cannot take extra parameters, roughly similar to your approach. But where possible it is always better to pass the context as a parameter. Subroutine arguments are already effectively dynamically scoped:</p>\n\n<pre><code>sub change {\n  my ($pointer) = @_;\n  ${$pointer} = 4;\n}\n\n...\nmy $var = 3;\nchange(\\$var);\n</code></pre>\n\n<p>If there is a lot of context it can be come cumbersome to pass all those references: <code>change(\\$foo, \\$bar, \\$baz, \\@something_else, \\%even_more, ...)</code>. It could then make sense to bundle that context into an object, which can then be manipulated in a more controlled manner. Manipulating local or global variables is not always the best design.</p>\n"}], "owner": {"reputation": 115, "user_id": 8278183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f39893532f42c1a136ba2fd95a6739?s=128&d=identicon&r=PG&f=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/8278183/akhil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 1, "accepted_answer_id": 51222595, "answer_count": 2, "score": 1, "last_activity_date": 1530961772, "creation_date": 1530886225, "last_edit_date": 1530942911, "question_id": 51212279, "link": "https://stackoverflow.com/questions/51212279/how-to-avoid-global-variable-declaration-when-using-perls-dynamic-scoping", "title": "How to avoid global variable declaration when using Perl&#39;s dynamic scoping?", "body": "<p>I am trying to write a perl script that calls a function written somewhere else (by someone else) which manipulates some of the variables in my script's scope. Let's say the script is <code>main.pl</code> and the function is there in <code>funcs.pm</code>. My <code>main.pl</code> looks like this:</p>\n\n<pre><code>use warnings;\nuse strict;\n\npackage plshelp;\nuse funcs;\n\nmy $var = 3;\nprint \"$var\\n\";   # &lt;--- prints 3\n\n{                 # New scope somehow prevents visibility of $pointer outside\n    local our $pointer = \\$var;\n    change();\n}\n\nprint \"$var\\n\";   # &lt;--- Ideally should print whatever funcs.pm wanted\n</code></pre>\n\n<p>For some reason, using <code>local our $pointer;</code> prevents visibility of <code>$pointer</code> outside the scope. But if I just use <code>our $pointer;</code>, the variable can be seen outside the scope in <code>main.pl</code> using <code>$plshelp::pointer</code> (but not in <code>funcs.pm</code>, so it would be useless anyway). As a side-note, could someone please explain this?</p>\n\n<p><code>funcs.pm</code> looks something like this:</p>\n\n<pre><code>use warnings;\nuse strict;\n\npackage plshelp;\n\nsub change\n{\n    ${$pointer} = 4;\n}\n</code></pre>\n\n<p>I expected this to change the value of <code>$var</code> and print <code>4</code> when the main script was run. But I get a compile error saying <code>$pointer</code> wasn't declared. This error can be removed by adding <code>our $pointer;</code> at the top of <code>change</code> in <code>funcs.pm</code>, but that would create an unnecessary global variable that is visible everywhere. We can also remove this error by removing the <code>use strict;</code>, but that seems like a bad idea. We can also get it to work by using <code>$plshelp::pointer</code> in <code>funcs.pm</code>, but the person writing <code>funcs.pm</code> doesn't want to do that.</p>\n\n<p>Is there a good way to achieve this functionality of letting <code>funcs.pm</code> manipulate variables in my scope without declaring global variables? If we were going for global variables anyway, I guess I don't need to use dynamic scoping at all. </p>\n\n<p>Let's just say it's not possible to pass arguments to the function for some reason.</p>\n\n<p><strong>Update</strong></p>\n\n<p>It seems that <code>local our</code> isn't doing any \"special\" as far as preventing visibility is concerned. From <a href=\"https://perldoc.perl.org/functions/our.html\" rel=\"nofollow noreferrer\">perldoc</a>:</p>\n\n<blockquote>\n  <p>This means that when <code>use strict 'vars'</code> is in effect, <code>our</code> lets you use a package variable without qualifying it with the package name, but only within the lexical scope of the our declaration. This applies immediately--even within the same statement.</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>This works even if the package variable has not been used before, as package variables spring into existence when first used.</p>\n</blockquote>\n\n<p>So this means that <code>$pointer</code> \"exists\" even after we leave the curly braces. Just that we have to refer to it using <code>$plshelp::pointer</code> instead of just <code>$pointer</code>. But since we used <code>local</code> before initializing <code>$pointer</code>, it is still undefined outside the scope (although it is still \"declared\", whatever that means). A clearer way to write this would be <code>(local (our $pointer)) = \\$var;</code>. Here, <code>our $pointer</code> \"declares\" <code>$pointer</code> and returns <code>$pointer</code> as well. We now apply <code>local</code> on this returned value, and this operation returns <code>$pointer</code> again which we are assigning to <code>\\$var</code>.</p>\n\n<p>But this still leaves the main question of whether there is a good way of achieving the required functionality unanswered.</p>\n"}, {"tags": ["perl", "hash", "recaptcha"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1530889311, "post_id": 51211839, "comment_id": 89407091, "body": "Just a little help with tracing back: how can the result of method <code>verify</code> be an empty string? <a href=\"https://metacpan.org/source/PATTAWAN/Captcha-reCAPTCHA-V2-0.3/lib/Captcha/reCAPTCHA/V2.pm#L72\" rel=\"nofollow noreferrer\">metacpan.org/source/PATTAWAN/Captcha-reCAPTCHA-V2-0.3/lib/&hellip;</a> When <code>post_form</code> returns an empty string. <a href=\"https://metacpan.org/source/DAGOLDEN/HTTP-Tiny-0.070/lib/HTTP/Tiny.pm#L417\" rel=\"nofollow noreferrer\">metacpan.org/source/DAGOLDEN/HTTP-Tiny-0.070/lib/HTTP/&hellip;</a>"}, {"owner": {"reputation": 25, "user_id": 4430932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c34f3d59a747673aaf2ee04d8d99272d?s=128&d=identicon&r=PG&f=1", "display_name": "derhendrik", "link": "https://stackoverflow.com/users/4430932/derhendrik"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1530964579, "post_id": 51211839, "comment_id": 89426252, "body": "Thank you for your hint, daxim. I will look further into this issue. What confuses me is the fact that it works on my machine but not on the webserver. Maybe I have to request some help from the webhost. Greetings to Austria from Germany. derhendrik"}], "answers": [{"tags": [], "owner": {"reputation": 322, "user_id": 8419020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dkUE9.png?s=128&g=1", "display_name": "Simerax", "link": "https://stackoverflow.com/users/8419020/simerax"}, "is_accepted": true, "score": 1, "last_activity_date": 1531650941, "creation_date": 1531650941, "answer_id": 51347547, "question_id": 51211839, "link": "https://stackoverflow.com/questions/51211839/error-cant-use-string-as-a-hash-ref-while-strict-refs-in-combinatio/51347547#51347547", "title": "Error: &#39; Can&#39;t use string (&quot;&quot;) as a HASH ref while &quot;strict refs&quot; &#39; in combination with google recaptcha v2. Works on local machine but not on webhost", "body": "<p>The Verify Function has a bug. I just looked at the implementation. in case that \"$res\" isn't 'successful' it wont give you back the wanted hash reference.</p>\n\n<p>As a quick workaround I would check if your <code>my $result</code> is equal to <code>\"\"</code> if thats the case the verify function failed.\nIn the long run you should probably submit that bug to the creator of the module.</p>\n\n<p><strong>disclaimer: I havent downloaded the module and just looked at the source without actually trying my workaround so take it with a grain of salt and try it in a safe environment first</strong></p>\n\n<pre><code>sub verify {\n    my ($self, $secret, $response, $remoteip) = @_;\n\n    # ... more code here, removed for better readability\n\n    my $res = $self-&gt;{ua}-&gt;post_form(\n        $self-&gt;{verify_api},\n        $params\n    );\n\n    if ($res-&gt;{success}) {\n        my $content = decode_json $res-&gt;{content};\n        if ($content-&gt;{success}){\n            return { success =&gt; 1 };\n        } else {\n            return { success =&gt; 0, error_codes =&gt; $content-&gt;{'error-codes'} };\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 4430932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c34f3d59a747673aaf2ee04d8d99272d?s=128&d=identicon&r=PG&f=1", "display_name": "derhendrik", "link": "https://stackoverflow.com/users/4430932/derhendrik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "accepted_answer_id": 51347547, "answer_count": 1, "score": 1, "last_activity_date": 1531650941, "creation_date": 1530884748, "question_id": 51211839, "link": "https://stackoverflow.com/questions/51211839/error-cant-use-string-as-a-hash-ref-while-strict-refs-in-combinatio", "title": "Error: &#39; Can&#39;t use string (&quot;&quot;) as a HASH ref while &quot;strict refs&quot; &#39; in combination with google recaptcha v2. Works on local machine but not on webhost", "body": "<p>I am very new to Perl and was just assigned the quick task to change the reCAPTCHA to reCAPTCHA v2.</p>\n\n<p>On my local machine this works fine, however when I push the new version of the login form to the webhost, the form does not seem to work. I get the following error:</p>\n\n<p>AH01215: Can't use string (\"\") as a HASH ref while \"strict refs\" in use at login_new.cgi line 68,  line 1.: [........]</p>\n\n<p>The code snippet is based on the documentation I found here: <a href=\"https://metacpan.org/pod/Captcha::reCAPTCHA::V2\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Captcha::reCAPTCHA::V2</a></p>\n\n<p>And according to the error log my error is somewhere in here (line 68):</p>\n\n<pre><code>if ($submit) {\n    my $response = $cgi-&gt;param('g-recaptcha-response');\n    my $result = $captcha-&gt;verify($captcha_private_key, $response );\n\n    if ($result-&gt;{success})  # This is line 68\n    {....}\n</code></pre>\n\n<p>This is quite confusing to me, especially since it is working on my local machine. Could you please help? Best regards and thank you in advance!</p>\n"}, {"tags": ["json", "perl"], "answers": [{"comments": [{"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 1, "creation_date": 1530884642, "post_id": 51211796, "comment_id": 89404432, "body": "What is <code>-0777</code>? Can you elaborate? I don&#39;t get it"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 2, "creation_date": 1530884674, "post_id": 51211796, "comment_id": 89404452, "body": "That&#39;s a hyperlink up there. Do follow it."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1530884876, "post_id": 51211796, "comment_id": 89404590, "body": "Ohhh, the new perldoc website. Sweet. :)"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 8, "last_activity_date": 1530884619, "creation_date": 1530884619, "answer_id": 51211796, "question_id": 51211682, "link": "https://stackoverflow.com/questions/51211682/json-invalid-for-perl-but-ok-for-jq/51211796#51211796", "title": "Json invalid for perl but ok for jq", "body": "<p>The decoder works fine, but you're only reading one line.</p>\n\n<p>Slurp the file with <a href=\"http://p3rl.org/run#-0[octal/hexadecimal]\" rel=\"noreferrer\"><code>perl -0777</code></a>\u2026</p>\n"}], "owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1530884619, "creation_date": 1530884318, "question_id": 51211682, "link": "https://stackoverflow.com/questions/51211682/json-invalid-for-perl-but-ok-for-jq", "title": "Json invalid for perl but ok for jq", "body": "<p>Why does the following string passes as JSON with jq but not with perl?<br>\nExample:  </p>\n\n<pre><code>$ cat dummy.json | jq '.'  \n{  \n  \"field\": {  \n    \"customer_id\": \"abc\"  \n  },    \n  \"result\": \"processed\"  \n}  \n</code></pre>\n\n<p>But with perl fails:  </p>\n\n<pre><code>$ cat dummy.json | perl -MData::Dumper -MJSON=decode_json -ne'print decode_json($_)'  \n, or } expected while parsing object/hash, at character offset 1 (before \"\\n\") at -e line 1.  \n</code></pre>\n\n<p>What am I messing up here?</p>\n"}, {"tags": ["perl", "io", "character-encoding"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 3, "creation_date": 1530875287, "post_id": 51208958, "comment_id": 89398794, "body": "There is no way to reliably detect the character set for plain text."}, {"owner": {"reputation": 6130, "user_id": 299242, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9bda794bc71267206358bf04ea0a179?s=128&d=identicon&r=PG", "display_name": "mscha", "link": "https://stackoverflow.com/users/299242/mscha"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1530877194, "post_id": 51208958, "comment_id": 89399845, "body": "Not 100% reliably, no.  But it should certainly be possible to do a \u201cgood enough\u201d detection of the major charsets.  Even with a 1% failure rate it&#39;s still better than just assuming UTF-8 or Latin-1 and falling over or showing weird characters all the time.  (And vim, for instance, does a great job: I can&#39;t remember if ever misdetecting a file.)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530879641, "post_id": 51208958, "comment_id": 89401261, "body": "Note that Windows 1252 (CP-1252) is <b><i>not</i></b> the same as ISO-8859-1. The former has printable characters in the first sixteen characters of the upper register <code>&quot;\\x80&quot;</code> to <code>&quot;\\9F&quot;</code> where the latter has the same range unassigned to leave space for the C1 control character set."}, {"owner": {"reputation": 6130, "user_id": 299242, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9bda794bc71267206358bf04ea0a179?s=128&d=identicon&r=PG", "display_name": "mscha", "link": "https://stackoverflow.com/users/299242/mscha"}, "edited": false, "score": 1, "creation_date": 1530880069, "post_id": 51208958, "comment_id": 89401532, "body": "Windows-1252 (cp1252) is a superset of iso-8859-1, though.  (HTML5, for instance, uses windows-1252 as a default to deal with incorrectly specified Windows content.)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530880956, "post_id": 51208958, "comment_id": 89402051, "body": "@mscha: I commented only because you wrote <code>latin-1&#47;windows-1252</code> in your original post. Latin-1 and ISO-8859-1 are two names for the same encoding, but CP-1252 is different. When guessing an encoding it is best to assume that, if the sample data uses character codes <code>&quot;\\x80&quot;</code> to <code>&quot;\\9F&quot;</code> then it is using CP-1252 where the characters are printable. In Latin-1, the <i>Latin-1 Supplement</i> assigns control characters to this range, but I have never seen them used, and I would have thought the existing 32 ASCII control characters were sufficient for any purpose."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1530888188, "post_id": 51208958, "comment_id": 89406514, "body": "@TomB: Okay, I over-reached with my claim for ASCII. But UTF-7 is rare and even Microsoft are dropping UTF-16, even so <code>Encode::Guess</code> still identifies them both."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530878734, "post_id": 51209805, "comment_id": 89400694, "body": "Perhaps some words about how this works?"}, {"owner": {"reputation": 6130, "user_id": 299242, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9bda794bc71267206358bf04ea0a179?s=128&d=identicon&r=PG", "display_name": "mscha", "link": "https://stackoverflow.com/users/299242/mscha"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530880209, "post_id": 51209805, "comment_id": 89401619, "body": "Added some comments to the code."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530881485, "post_id": 51209805, "comment_id": 89402399, "body": "Comments only obfuscate code. A description in a parallel text document is far more useful."}, {"owner": {"reputation": 383, "user_id": 310160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d2197007f14c74e2d26cbb914ce8973?s=128&d=identicon&r=PG", "display_name": "balakrishnan", "link": "https://stackoverflow.com/users/310160/balakrishnan"}, "edited": false, "score": 0, "creation_date": 1563457116, "post_id": 51209805, "comment_id": 100712996, "body": "It works for me. Like, it reads the file in bytes (raw) and convert it to given character set."}], "tags": [], "owner": {"reputation": 6130, "user_id": 299242, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9bda794bc71267206358bf04ea0a179?s=128&d=identicon&r=PG", "display_name": "mscha", "link": "https://stackoverflow.com/users/299242/mscha"}, "is_accepted": false, "score": 3, "last_activity_date": 1530881469, "last_edit_date": 1530881469, "creation_date": 1530877677, "answer_id": 51209805, "question_id": 51208958, "link": "https://stackoverflow.com/questions/51208958/autodetect-the-character-encoding-when-reading-a-file/51209805#51209805", "title": "Autodetect the character encoding when reading a file", "body": "<p>Here's my current workaround.  Does the trick, at least for UTF-8 and Latin-1 (or Windows-1252) files.</p>\n\n<pre><code>use 5.024;\nuse experimental 'signatures';\nuse Encode qw(decode);\n\nsub slurp($file)\n{\n    # Read the raw bytes\n    local $/;\n    open (my $fh, '&lt;:raw', $file) or return undef();\n    my $raw = &lt;$fh&gt;;\n    close($fh);\n\n    my $content;\n\n    # Try to interpret the content as UTF-8\n    eval { my $text = decode('utf-8', $raw, Encode::FB_CROAK); $content = $text };\n\n    # If this failed, interpret as windows-1252 (a superset of iso-8859-1 and ascii)\n    if (!$content) {\n        eval { my $text = decode('windows-1252', $raw, Encode::FB_CROAK); $content = $text };\n    }\n\n    # If this failed, give up and use the raw bytes\n    if (!$content) {\n        $content = $raw;\n    }\n\n    return $content;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1530884248, "last_edit_date": 1530884248, "creation_date": 1530878377, "answer_id": 51210022, "question_id": 51208958, "link": "https://stackoverflow.com/questions/51208958/autodetect-the-character-encoding-when-reading-a-file/51210022#51210022", "title": "Autodetect the character encoding when reading a file", "body": "<p>It depends what possible encodings you may be dealing with.\nTake a look at the\n<a href=\"https://metacpan.org/pod/Encode::Guess\" rel=\"nofollow noreferrer\"><code>Encode::Guess</code></a>\nmodule</p>\n\n<p>In general, it's very easy to tell whether you <strong><em>don't</em></strong> have an ASCII file as the code points are seven bits, so anything over 127 means it's not ASCII. It's also possible to tell reliably whether your file <strong><em>isn't</em></strong> UTF-8 as multi-byte characters have a specific sequence for their most-significant bits. Anything else is less reliable, but possible</p>\n\n<p>I don't know what encodings you might be using, but this is the general idea. <code>Encode::Guess</code> is part of the core <code>Encode</code> module, and so shouldn't need installing</p>\n\n<pre><code>use Encode::Guess;\n\nmy $enc = guess_encoding($data, qw/ ascii cp1252 iso-8859-1 utf-8 /);\nsay ref $enc? $enc-&gt;name : $enc, \"\\n\";\n</code></pre>\n\n<p>or you can perform a best-guess decoding without checking what the module has chosen</p>\n\n<pre><code>  use Encode::Guess qw/ ascii cp1252 iso-8859-1 utf-8 /;\n\n  my $chars = decode(\"Guess\", $data);\n</code></pre>\n\n<p>Remember that the <strong><em>fewer</em></strong> the possible encodings that you offer, the more likely the guess is to be accurate. You should read the module documentation carefully</p>\n\n<h2><br/></h2>\n\n<h3>Update</h3>\n\n<p>Here's the OP's one-liner demonstration that <code>Encode::Guess</code> <em>\"doesn't do the trick\"</em> written as a proper program</p>\n\n<p>Note that, as the documentation says, <code>guess_encoding</code> may sometimes return a string like <code>utf-8 or iso-8859-1</code> in which case there is ambiguity that the programmer must handle. *That isn't the case in the OP's example: the data is identified as being UTF-8-encoded, and both <code>guess_encoding</code> and <code>decode('guess', ...)</code> return the correct results</p>\n\n<p>You can use this code to test <code>Encode::Guess</code> with any byte string that you choose: just modify the contents of <code>$raw</code></p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\nuse open qw/ :std encoding(UTF-8) /;\n\nuse Encode;\nuse Encode::Guess;\nuse Data::Dump;\n\nmy $raw = qq/H\\x{C3}\\x{A9}llo, W\\x{C3}\\x{B8}rld!/;\n\nmy $enc = guess_encoding($raw);\n\nif ( my $class = ref $enc ) {\n    printf qq{Guessed encoding \\$enc is an %s object \"%s\"\\n}, $class, $enc-&gt;name\n}\nelse {\n    printf qq{Guessed encoding \\$enc is a scalar \"%s\"\\n}, $enc;\n}\n\nmy $chars = decode('guess', $raw);\n\nprintf \"Decoded characters: %s\\n\", $chars;\ndd $chars;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>Guessed encoding $enc is an Encode::utf8 object \"utf8\"\nDecoded characters: H\u00e9llo, W\u00f8rld!\n\"H\\xE9llo, W\\xF8rld!\"\n</code></pre>\n"}], "owner": {"reputation": 6130, "user_id": 299242, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9bda794bc71267206358bf04ea0a179?s=128&d=identicon&r=PG", "display_name": "mscha", "link": "https://stackoverflow.com/users/299242/mscha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1083, "favorite_count": 0, "closed_date": 1530883675, "answer_count": 2, "score": 1, "last_activity_date": 1530889317, "creation_date": 1530874918, "last_edit_date": 1530889317, "question_id": 51208958, "link": "https://stackoverflow.com/questions/51208958/autodetect-the-character-encoding-when-reading-a-file", "closed_reason": "Duplicate", "title": "Autodetect the character encoding when reading a file", "body": "<p>I sometimes have to read text files from external sources, which can use various character encodings; usually UTF-8, Latin-1 or Windows CP-1252.</p>\n\n<p>Is there a way to conveniently read these files, autodetecting the encoding like editors such as Vim do?</p>\n\n<p>I'm hoping for something as simple as:</p>\n\n<pre><code>open(my $f, '&lt;:encoding(autodetect)', 'foo.txt') or die 'Oops: $!';\n</code></pre>\n\n<p>Note that <a href=\"https://metacpan.org/pod/Encode::Guess\" rel=\"nofollow noreferrer\">Encode::Guess</a> does not do the trick: it only works if an encoding can be unambiguously detected, otherwise it croaks.  Most UTF-8 data is nominally valid latin-1 data, so it fails on UTF-8 files.</p>\n\n<p>Example:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse 5.020;\nuse warnings;\n\nuse Encode;\nuse Encode::Guess qw(utf-8 cp1252);\n\nbinmode STDOUT =&gt; 'utf8';\n\nmy $utf8 = \"H\\x{C3}\\x{A9}llo, W\\x{C3}\\x{B8}rld!\"; # \"H\u00e9llo, W\u00f8rld!\" in UTF-8\nmy $latin = \"H\\x{E9}llo, W\\x{F8}rld!\";            # \"H\u00e9llo, W\u00f8rld!\" in CP-1252\n\n# Version 1\nmy $enc1 = Encode::Guess-&gt;guess($latin);\nif (ref($enc1)) {\n    say $enc1-&gt;name, ': ', $enc1-&gt;decode($latin);\n}\nelse {\n    say \"Oops: $enc1\";\n}\nmy $enc2 = Encode::Guess-&gt;guess($utf8);\nif (ref($enc2)) {\n    say $enc2-&gt;name, ': ', $enc2-&gt;decode($utf8);\n}\nelse {\n    say \"Oops: $enc2\";\n}\n\n# Version 2\nsay decode(\"Guess\", $latin);\nsay decode(\"Guess\", $utf8);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>cp1252: H\u00e9llo, W\u00f8rld!\nOops: utf-8-strict or utf8 or cp1252\nH\u00e9llo, W\u00f8rld!\ncp1252 or utf-8-strict or utf8 at ./guesstest line 32.\n</code></pre>\n\n<p>The version under \"Update\" in Borodin's answer works only on UTF-8 data, but croaks on Latin-1 data.\n<code>Encode::Guess</code> can simply not be used if you need to handle both UTF-8 and Latin-1 files.</p>\n\n<p>This isn't intended to be the same question as <a href=\"https://stackoverflow.com/questions/1970660/how-can-i-guess-the-encoding-of-a-string-in-perl\">this one</a>: I'm looking for a way to autodetect when <em>opening</em> a file.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1530877877, "post_id": 51208788, "comment_id": 89400210, "body": "There is a good answer for this somewhere, but I can&#39;t find it right now. Essentially if you can run Perl, you can load the CPAN module and make it install stuff in a local lib. I&#39;ll try and find that duplicate target later."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1530877822, "post_id": 51209667, "comment_id": 89400174, "body": "This doesn&#39;t answer the question."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1530883125, "post_id": 51209667, "comment_id": 89403405, "body": "Instead of manually messing with <code>@INC</code>, you can also just <a href=\"https://perldoc.pl/lib\" rel=\"nofollow noreferrer\"><code>use lib</code></a>."}], "tags": [], "owner": {"reputation": 59, "user_id": 7203941, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154668860349757/picture?type=large", "display_name": "Dejan Lazar", "link": "https://stackoverflow.com/users/7203941/dejan-lazar"}, "is_accepted": true, "score": 1, "last_activity_date": 1530877265, "creation_date": 1530877265, "answer_id": 51209667, "question_id": 51208788, "link": "https://stackoverflow.com/questions/51208788/how-to-use-perl-modules-without-terminal-access/51209667#51209667", "title": "How to use Perl modules without terminal access?", "body": "<p>You can put package(something.pm) in your folder structure. I personally like to put them in <code>modules</code> folder.</p>\n\n<p>Then include it in your script. I did it like that:</p>\n\n<pre><code>BEGIN {push @INC, '&lt;path_to_your_project&gt;/modules'};\nuse &lt;YOUR_PACKAGE&gt;;   &lt;- package name\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 1, "creation_date": 1530916653, "post_id": 51212244, "comment_id": 89417893, "body": "... and make sure to deactivate this script after you&#39;re done, and if possible protect the script with a password (disclaimer: I&#39;m the author)"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 2, "last_activity_date": 1530888371, "last_edit_date": 1530888371, "creation_date": 1530886106, "answer_id": 51212244, "question_id": 51208788, "link": "https://stackoverflow.com/questions/51208788/how-to-use-perl-modules-without-terminal-access/51212244#51212244", "title": "How to use Perl modules without terminal access?", "body": "<p>Try <a href=\"http://sf.net/projects/cgipan\" rel=\"nofollow noreferrer\">http://sf.net/projects/cgipan</a> to install modules without shell access.</p>\n\n<p><img src=\"https://i.stack.imgur.com/20ctc.png\" alt=\"\"></p>\n"}], "owner": {"reputation": 219, "user_id": 5179776, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3b67ce56655c6fd60e9e22f36f5df01f?s=128&d=identicon&r=PG&f=1", "display_name": "Nissa", "link": "https://stackoverflow.com/users/5179776/nissa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 51209667, "answer_count": 2, "score": 0, "last_activity_date": 1530888371, "creation_date": 1530874339, "question_id": 51208788, "link": "https://stackoverflow.com/questions/51208788/how-to-use-perl-modules-without-terminal-access", "title": "How to use Perl modules without terminal access?", "body": "<p>I am using a web hosting service that only provide FTP access but not terminal (telnet, SSH, etc) access. Perl core is already installed on the server along with a small number of modules (such as LWP::Simple). My script want to use modules that were not installed (such as WWW::Mechanize). Are there any way that I use these modules without normal installation?</p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 2, "creation_date": 1530868416, "post_id": 51206867, "comment_id": 89394646, "body": "&quot;Which parser can I use ?&quot; \u2014 Questions asking for library recommendations are off-topic."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 2, "creation_date": 1530868461, "post_id": 51206867, "comment_id": 89394674, "body": "&quot;how does it work ?&quot; \u2014 It has documentation. There&#39;s no point in Stackoverflow just rewriting all the documentation that already exists. Please read <a href=\"https://meta.stackoverflow.com/q/261592/19068\">this</a>"}, {"owner": {"reputation": 1, "user_id": 10020143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10be3451f3e142bf5f5f9ca8a1430095?s=128&d=identicon&r=PG&f=1", "display_name": "prodDBK", "link": "https://stackoverflow.com/users/10020143/proddbk"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1530871798, "post_id": 51206867, "comment_id": 89396782, "body": "I was not asking for documentation but for ideas. But it seems confusing, so I removed this question. The other are more important."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1530872133, "post_id": 51206867, "comment_id": 89396982, "body": "@prodDBK: Removing that sentence has left your post without a question at all: you have simply described your situation. What are you asking, exactly?"}], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 2, "last_activity_date": 1530871755, "creation_date": 1530871755, "answer_id": 51208009, "question_id": 51206867, "link": "https://stackoverflow.com/questions/51206867/duplicate-xml-elements-and-add-attributes/51208009#51208009", "title": "Duplicate XML elements and add attributes", "body": "<p>Tutorial: <a href=\"https://grantm.github.io/perl-libxml-by-example/\" rel=\"nofollow noreferrer\">https://grantm.github.io/perl-libxml-by-example/</a></p>\n\n<pre><code>use 5.024;\nuse IO::Prompt qw(prompt);\nuse XML::LibXML qw();\n\nmy $dom = XML::LibXML-&gt;new(line_numbers =&gt; 1)-&gt;parse_file('so51206867.xml');\nfor my $imageobject ($dom-&gt;findnodes('//imageobject')) {\n    say 'Found at line ' . $imageobject-&gt;line_number;\n    say $imageobject-&gt;toString;\n    if (prompt 'Duplicate? ', '-yes') {\n        my $copy = $imageobject-&gt;cloneNode(1);\n        $imageobject-&gt;setAttribute(arch =&gt; 'html;fo;fo-print');\n        $copy-&gt;setAttribute(arch =&gt; 'screen');\n        $copy-&gt;findnodes('//imagedata')-&gt;get_node(1)-&gt;setAttribute(width =&gt; '100%');\n        $imageobject-&gt;addSibling($copy);\n    }\n}\n$dom-&gt;toFile('so51206867-out.xml');\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10020143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10be3451f3e142bf5f5f9ca8a1430095?s=128&d=identicon&r=PG&f=1", "display_name": "prodDBK", "link": "https://stackoverflow.com/users/10020143/proddbk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1530871923, "creation_date": 1530868245, "last_edit_date": 1530871923, "question_id": 51206867, "link": "https://stackoverflow.com/questions/51206867/duplicate-xml-elements-and-add-attributes", "title": "Duplicate XML elements and add attributes", "body": "<p>I need a program that will duplicate XML elements and add attributes to them. It could be easier with an XSLT transform but I need the program to ask whether each matching element should be duplicated.</p>\n\n<p>Here is a small and simple example of what I start with</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;article&gt;\n  &lt;section&gt;\n    &lt;title&gt;title&lt;/title&gt;\n    &lt;para&gt;text&lt;/para&gt;\n    &lt;mediaobject&gt;\n\n      &lt;imageobject&gt;\n        &lt;imagedata fileref=\"filename.png\" format=\"PNG\"/&gt;    \n      &lt;/imageobject&gt;\n\n    &lt;/mediaobject&gt;\n    &lt;para&gt;text&lt;/para&gt;\n  &lt;/section&gt;\n&lt;/article&gt;\n</code></pre>\n\n<p>What I want after passing the script</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;article&gt;\n  &lt;section&gt;\n    &lt;title&gt;title&lt;/title&gt;\n    &lt;para&gt;text&lt;/para&gt;\n    &lt;mediaobject&gt;\n\n      &lt;imageobject arch=\"html;fo;fo-print\"&gt;\n        &lt;imagedata fileref=\"filename.png\" format=\"PNG\"/&gt;    \n      &lt;/imageobject&gt;\n\n      &lt;imageobject arch=\"screen\"&gt;\n        &lt;imagedata fileref=\"filename.png\" format=\"PNG\" width=\"100%\"/&gt;    \n      &lt;/imageobject&gt;\n\n    &lt;/mediaobject&gt;\n  &lt;/section&gt;\n&lt;/article&gt;\n</code></pre>\n\n<p>I need the program to find\neach <code>imageobject</code> element \nand ask whether it\nshould be duplicated.\nIf so then it is duplicated and attributes <code>arch</code> and <code>width</code> are added.</p>\n\n<p>The XML file has to be external to the script and it would be nice if I could apply it to several files.</p>\n"}, {"tags": ["perl", "ssl", "web-scraping", "proxy", "www-mechanize"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1530861335, "post_id": 51203873, "comment_id": 89390796, "body": "What happens when you try <a href=\"http://p3rl.org/LWP::Protocol::connect#Proxy-Authentication\" rel=\"nofollow noreferrer\">p3rl.org/LWP::Protocol::connect#Proxy-Authentication</a>"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1530864749, "post_id": 51203873, "comment_id": 89392549, "body": "What version of LWP you are using? Make sure to use a version newer than 6.06 since versions before that have problems with HTTPS over proxy."}, {"owner": {"reputation": 39, "user_id": 4515099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6796e8cb665f5b80b2390d962d2b8fa?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Golatkar", "link": "https://stackoverflow.com/users/4515099/aniket-golatkar"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1530868197, "post_id": 51203873, "comment_id": 89394493, "body": "@daxim appreciate your prompt reply. Using the proxy authorization in above link I was able to get the content of HTTPS URL.  Can you point out why the above code is failing for HTTPS request?"}, {"owner": {"reputation": 39, "user_id": 4515099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6796e8cb665f5b80b2390d962d2b8fa?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Golatkar", "link": "https://stackoverflow.com/users/4515099/aniket-golatkar"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1530868261, "post_id": 51203873, "comment_id": 89394540, "body": "@SteffenUllrich Thanks for quick response, I am using LWP&#39;s version 6.34"}], "owner": {"reputation": 39, "user_id": 4515099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6796e8cb665f5b80b2390d962d2b8fa?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Golatkar", "link": "https://stackoverflow.com/users/4515099/aniket-golatkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1530858671, "creation_date": 1530856843, "last_edit_date": 1530858671, "question_id": 51203873, "link": "https://stackoverflow.com/questions/51203873/perl-wwwmechanize-for-https-over-proxy", "title": "Perl WWW::Mechanize for HTTPS over proxy", "body": "<p>I am trying to scrape a website using <code>WWW::Mechanize</code> module. I have configured the mechanize agent with a proxy URL and setting the proxy credentials using <code>credentials</code> method.</p>\n\n<p>Code snippet :</p>\n\n<pre><code>my $url = 'https://abcde.com';\nmy $proxy_username = 'abc';\nmy $proxy_password = 'xyz';\nmy $proxy_url = 'http://xx.xxx.xxx.xxx:13228';\n\nmy $mechanize_agent = new WWW::Mechanize('cookie_jar' =&gt; {}, 'noproxy' =&gt; 1, 'ssl_opts' =&gt; { 'verify_hostname' =&gt; 0 });\n$mechanize_agent-&gt;credentials( $proxy_username, $proxy_password );\n$mechanize_agent-&gt;proxy(['http', 'https'], $proxy_url);\n$mechanize_agent-&gt;get($url) or die 'Error in get request of $url: $@';\n</code></pre>\n\n<p>When URL is a plain HTTP, the script fetches and gives back the result. But when I try to hit HTTPS url I get the error </p>\n\n<blockquote>\n  <p>establishing SSL tunnel failed: 407 Proxy Authentication Required</p>\n</blockquote>\n\n<p>I credentials are valid and I can view the website using proxy URL in Mozilla browser. Also i need t avoid using call to <code>env_proxy()</code> function since the proxy URL is dynamic. How can I get let my script fetch HTTPS request?</p>\n\n<p>All suggestions are welcome!\nthanks in advance. </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1530870010, "post_id": 51203651, "comment_id": 89395630, "body": "So, <code>&quot;man man sky&quot;</code> should result in <code>&quot;man nam sky&quot;</code>, right? Please precise the question."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1530878307, "post_id": 51203651, "comment_id": 89400441, "body": "This looks like a XY problem. If you want to match whole words, use the <code>\\b</code> assertion."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1530955785, "post_id": 51203651, "comment_id": 89424072, "body": "So, <code>&quot;man man sky&quot;</code> should result in <code>&quot;man nam sky&quot;</code>, right? Please precise the question."}, {"owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "edited": false, "score": 0, "creation_date": 1530958617, "post_id": 51203651, "comment_id": 89424799, "body": "<code>man man sky</code> should become <code>nam nam sky</code>"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1531038902, "post_id": 51203651, "comment_id": 89439896, "body": "Then you should use <a href=\"https://stackoverflow.com/a/51204265/3832970\"><code>s&#47;(?&lt;!\\S)man(?!\\S)&#47;nam&#47;g</code></a> (see <a href=\"https://regex101.com/r/1wP3bc/2\" rel=\"nofollow noreferrer\">demo</a>)."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1530874219, "post_id": 51204124, "comment_id": 89398230, "body": "More efficient: <code>s&#47; man(?= )&#47; nam&#47;g</code> or <code>s&#47;\\s\\Kman(?=\\s)&#47;nam&#47;g</code>"}], "tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": true, "score": 5, "last_activity_date": 1530874194, "last_edit_date": 1530874194, "creation_date": 1530858022, "answer_id": 51204124, "question_id": 51203651, "link": "https://stackoverflow.com/questions/51203651/removing-multiple-consecutive-words-separated-with-whitespace/51204124#51204124", "title": "Removing multiple consecutive words separated with whitespace", "body": "<p>The regex is eating up characters which it matches. So, to avoid this, you should use lookahead and lookbehind to match it in this case. Check <a href=\"https://perldoc.perl.org/perlre.html#Regular-Expressions\" rel=\"nofollow noreferrer\"><code>perlre</code></a></p>\n\n<pre><code>$name =~ s/(?&lt;=\\s)man(?=\\s)/nam/g;\n</code></pre>\n\n<p>Quoting from <code>perlre</code></p>\n\n<p><strong>Look Ahead:</strong></p>\n\n<blockquote>\n<pre><code>(?=pattern)\nA zero-width positive lookahead assertion. For example, /\\w+(?=\\t)/ matches \na word followed by a tab, without including the tab in $&amp;.\n</code></pre>\n</blockquote>\n\n<p><strong>Look Behind:</strong></p>\n\n<blockquote>\n<pre><code>(?&lt;=pattern) \\K A zero-width positive lookbehind assertion. For\nexample, /(?&lt;=\\t)\\w+/ matches a word that follows a tab, without\nincluding the tab in $&amp; . Works only for fixed-width lookbehind.\n</code></pre>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530874355, "post_id": 51204265, "comment_id": 89398300, "body": "<code>$</code> means <code>(?=\\n?\\z)</code>, so <code>(?=$|\\s)</code> means <code>(?=\\n?\\z|\\s)</code>, which is a complicated way of writing <code>(?=\\s|\\z)</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1530874462, "post_id": 51204265, "comment_id": 89398359, "body": "Note that your substitutions are nearly identical to <code>s&#47;\\bman\\b&#47;nam&#47;g</code>, which is probably close enough for the OP."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1530874757, "post_id": 51204265, "comment_id": 89398511, "body": "@ikegami If the goal is to match before the whitespace or <i>the very end of string</i>, then yes, <code>\\z</code> should be used (<code>chomp</code> would relieve the problem). The <code>(?&lt;!\\S)</code> and <code>(?!\\S)</code> lookarounds define <i>whitespace</i> boundaries rather than <i>word boundaries</i>, so although they may look similar, they are quite  different: <code>\\bman\\b</code> matches <code>man</code> in <code>man-of-war</code>, but <code>(?&lt;!\\S)man(?!\\S)</code> won&#39;t."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530874887, "post_id": 51204265, "comment_id": 89398581, "body": "Re &quot;<i>If the goal is</i>&quot;, No, <code>(?=$|\\s)</code> and <code>(?=\\s|\\z)</code> are equivalent as I said"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530875004, "post_id": 51204265, "comment_id": 89398655, "body": "Re &quot;<i>They are quite different</i>&quot;, I did say they were different"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530875081, "post_id": 51204265, "comment_id": 89398694, "body": "@ikegami :) I understand <i>nearly identical</i> as something &quot;not-so-different&quot; :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1530875210, "post_id": 51204265, "comment_id": 89398757, "body": "...yet still different"}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 2, "last_activity_date": 1530874841, "last_edit_date": 1530874841, "creation_date": 1530858629, "answer_id": 51204265, "question_id": 51203651, "link": "https://stackoverflow.com/questions/51203651/removing-multiple-consecutive-words-separated-with-whitespace/51204265#51204265", "title": "Removing multiple consecutive words separated with whitespace", "body": "<p>I understand you want to replace <code>man</code> in between whitespace characters or start/end of string.</p>\n\n<p>In this case, you may use two approaches, with positive lookarounds containing alternation operator checking for string boundaries and/or whitespaces, or negative lookarounds checking for the non-whitespace chars on  both ends of the search word.</p>\n\n<p>Use either of the two:</p>\n\n<pre><code>$name =~ s/(?&lt;=^|\\s)man(?=\\z|\\s)/nam/g;\n$name =~ s/(?&lt;!\\S)man(?!\\S)/nam/g;\n</code></pre>\n\n<p>From the point of view of efficiency, the second option is better since alternation is a bit \"expensive\".</p>\n\n<p>The <code>(?&lt;=^|\\s)</code> positive lookbehind matches a location in string that is preceded with start of string (<code>^</code>) or (<code>|</code>) a whitespace (<code>\\s</code>) and the <code>(?=$|\\s)</code> positive lookahead makes sure there is a whitespace or end of string (<code>$</code>) immediately after <code>man</code>.</p>\n\n<p>The <code>(?&lt;!\\S)</code> negative lookbehind matches a location in string that is not immediately preceded with a non-whitespace char, i.e. if there is a non-whitespace char there will be no match), and <code>(?!\\S)</code> negative lookahead asserts there is no non-whitespace right after <code>man</code>.</p>\n\n<p>See more details about <a href=\"https://perldoc.perl.org/perlre.html#Lookaround-Assertions\" rel=\"nofollow noreferrer\"><em>Lookaround Assertions</em> at <code>perlre</code></a>.</p>\n"}], "owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 51204124, "answer_count": 2, "score": 0, "last_activity_date": 1531039302, "creation_date": 1530855722, "last_edit_date": 1531039302, "question_id": 51203651, "link": "https://stackoverflow.com/questions/51203651/removing-multiple-consecutive-words-separated-with-whitespace", "title": "Removing multiple consecutive words separated with whitespace", "body": "<p>In the code below the pattern <code>/ man /</code> matches twice consecutively. So when I substitute that pattern only the first occurence is matched but the second occurence is not matched.</p>\n\n<p>As I understand the problem the first pattern itself matches until the start of second pattern(i.e, the space after man is the end of first pattern and also the start of first pattern). So second pattern is not matched. How to match this pattern globally when it occurs consecutively.</p>\n\n<pre><code>use strict;\nuse warnings;\n\n#my $name =\" man sky man \";  #this works\n\nmy $name =\" man man sky\";    #this does'nt\n$name =~s/ man / nam /g;    #expected= 'nam nam sky'\nprint $name,\"\\n\";\n</code></pre>\n"}, {"tags": ["perl", "constants", "spaceship-operator"], "answers": [{"tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 5, "last_activity_date": 1531002258, "last_edit_date": 1531002258, "creation_date": 1530851762, "answer_id": 51203096, "question_id": 51203023, "link": "https://stackoverflow.com/questions/51203023/perl-lexer-why-does-eq-in-the-context-of/51203096#51203096", "title": "Perl lexer: why does &quot;&lt;=&gt;&quot; eq &quot;=&quot; in the context of &lt;=&gt;&lt;=&gt;&lt;=&gt;?", "body": "<pre><code>my $foo = &lt;=&gt;;\nmy $foo = &lt;-&gt;;\nmy $foo = &lt;/&gt;;\n</code></pre>\n\n<p>These are all interpreted as uses of <a href=\"http://perldoc.perl.org/functions/glob.html\" rel=\"nofollow noreferrer\"><code>glob</code></a>. Since there are no <code>*</code>, <code>?</code>, or <code>[\u2026]</code> constructions in their arguments, they expand to the text passed in.</p>\n\n<pre><code>my $foo = &lt;a&gt;;\n</code></pre>\n\n<p>This is interpreted as reading one line from a file handle called <code>a</code>.</p>\n\n<p>Anyways. <code>&lt;=&gt;&lt;=&gt;&lt;=&gt;</code> behaves like <code>glob(\"=\") &lt;=&gt; glob(\"=\")</code>. Since both sides evaluate to <code>\"=\"</code>, they're equal, and the comparison returns 0.</p>\n"}, {"tags": [], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "is_accepted": true, "score": 2, "last_activity_date": 1530895676, "last_edit_date": 1530895676, "creation_date": 1530852846, "answer_id": 51203226, "question_id": 51203023, "link": "https://stackoverflow.com/questions/51203023/perl-lexer-why-does-eq-in-the-context-of/51203226#51203226", "title": "Perl lexer: why does &quot;&lt;=&gt;&quot; eq &quot;=&quot; in the context of &lt;=&gt;&lt;=&gt;&lt;=&gt;?", "body": "<p>I think I see what's going on, </p>\n\n<pre><code>glob(\"*asdf*\");\n</code></pre>\n\n<p>Will return only files that have the string <code>asdf</code> in their name because the metacharacter expansion tests for file-exists. However,</p>\n\n<pre><code>glob(\"asdf\");\n</code></pre>\n\n<p>will <strong>always</strong> return <code>asdf</code>, regardless of the status of the file. By extension <code>&lt;=&gt;</code> lackinging a metacharacter will also return <code>'='</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1531002527, "post_id": 51204133, "comment_id": 89434726, "body": "This is the only answer that explains why <code>&lt;=&gt;</code> is sometimes interpreted as a uses of <code>glob</code>, and why <code>&lt;a&gt;</code> isn&#39;t, which is the very question asked. (It&#39;s also the only one that explains why <code>&lt;&lt;&gt;</code> is interpreted as none of those.)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 9, "last_activity_date": 1531211694, "last_edit_date": 1531211694, "creation_date": 1530858051, "answer_id": 51204133, "question_id": 51203023, "link": "https://stackoverflow.com/questions/51203023/perl-lexer-why-does-eq-in-the-context-of/51204133#51204133", "title": "Perl lexer: why does &quot;&lt;=&gt;&quot; eq &quot;=&quot; in the context of &lt;=&gt;&lt;=&gt;&lt;=&gt;?", "body": "<p>Where an expression is expected, Perl picks the first of the following that applies:</p>\n\n<ul>\n<li><code>&lt;&gt;</code> is short for <code>&lt;ARGV&gt;</code></li>\n<li><code>&lt;&lt;&gt;&gt;</code> is a \"safe\" version of <code>&lt;&gt;</code> (uses 3-arg open instead of 2-arg open)</li>\n<li><code>&lt;&lt;</code> is otherwise the start of a <a href=\"http://perldoc.perl.org/perlop.html#%3c%3c_EOF_\" rel=\"nofollow noreferrer\">here-doc operator</a>.</li>\n<li><code>&lt;IDENTIFIER&gt;</code> is short for <a href=\"http://perldoc.perl.org/functions/readline.html\" rel=\"nofollow noreferrer\"><code>readline(IDENTIFIER)</code></a></li>\n<li><code>&lt;...&gt;</code> is otherwise short for <a href=\"http://perldoc.perl.org/functions/glob.html\" rel=\"nofollow noreferrer\"><code>glob(qq&lt;...&gt;)</code></a></li>\n</ul>\n\n<p>Where an infix or postfix operator is expected, Perl picks the first of the following that applies:</p>\n\n<ul>\n<li><code>&lt;=&gt;</code> is the <a href=\"http://perldoc.perl.org/perlop.html#Equality-Operators\" rel=\"nofollow noreferrer\">numerical comparison operator</a>.</li>\n<li><code>&lt;=</code> is otherwise the numerical less-than-or-equal operator.</li>\n<li><code>&lt;&lt;</code> is the shift operator.</li>\n<li><code>&lt;</code> is otherwise the numerical less-than operator.</li>\n</ul>\n\n<p>(The last three might not be relevant here. I added them to cover everything starting with <code>&lt;</code>.)</p>\n\n<p>So,</p>\n\n<ul>\n<li><p>&#x20;</p>\n\n<pre><code>&lt;=&gt;&lt;=&gt;&lt;=&gt;\n</code></pre>\n\n<p>is short for</p>\n\n<pre><code>glob(qq&lt;=&gt;) &lt;=&gt; glob(qq&lt;=&gt;)\n</code></pre>\n\n<p>which can be written</p>\n\n<pre><code>glob(\"=\") &lt;=&gt; glob(\"=\")\n</code></pre>\n\n<p>or</p>\n\n<pre><code>\"=\" &lt;=&gt; \"=\"\n</code></pre>\n\n<p>since a glob pattern with no special glob characters simply returns the pattern.</p>\n\n<p>It warns \"isn't numeric\" twice and evaluates to zero.</p></li>\n<li><p>&#x20;</p>\n\n<pre><code>my $foo = &lt;=&gt;;\n</code></pre>\n\n<p>is short for</p>\n\n<pre><code>my $foo = glob(qq&lt;=&gt;);\n</code></pre>\n\n<p>which can be written</p>\n\n<pre><code>my $foo = glob(\"=\");\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $foo = \"=\";\n</code></pre></li>\n<li><p>&#x20;</p>\n\n<pre><code>my $foo = &lt;a&gt;;\n</code></pre>\n\n<p>is short for</p>\n\n<pre><code>my $foo = readline(a);\n</code></pre>\n\n<p>It warns \"used only once: possible typo\" if there are no other mentions of <code>*a</code>.</p>\n\n<p>It warns \"on unopened filehandle\" if you haven't previously opened <code>a</code> as a file handle.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 6, "last_activity_date": 1530868666, "last_edit_date": 1530868666, "creation_date": 1530868377, "answer_id": 51206902, "question_id": 51203023, "link": "https://stackoverflow.com/questions/51203023/perl-lexer-why-does-eq-in-the-context-of/51206902#51206902", "title": "Perl lexer: why does &quot;&lt;=&gt;&quot; eq &quot;=&quot; in the context of &lt;=&gt;&lt;=&gt;&lt;=&gt;?", "body": "<p>When in doubt check with <code>-MO=Deparse</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -MO=Deparse -e '$foo = &lt;=&gt;'\n\nuse File::Glob ();\n$foo = glob('=');\n</code></pre>\n\n<p>Spacefleet gives 0 as both operands to <code>&lt;=&gt;</code> are equal,</p>\n\n<pre><code>perl -MO=Deparse -e '$foo = &lt;=&gt;&lt;=&gt;&lt;=&gt;'\n\nuse File::Glob ();\n$foo = glob('=') &lt;=&gt; glob('=');\n</code></pre>\n"}], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 51203226, "answer_count": 4, "score": 12, "last_activity_date": 1531211694, "creation_date": 1530851171, "question_id": 51203023, "link": "https://stackoverflow.com/questions/51203023/perl-lexer-why-does-eq-in-the-context-of", "title": "Perl lexer: why does &quot;&lt;=&gt;&quot; eq &quot;=&quot; in the context of &lt;=&gt;&lt;=&gt;&lt;=&gt;?", "body": "<p>I was just reading the secret pseudo-constants, namely the <em>Space fleet constant</em></p>\n\n<pre><code>&lt;=&gt;&lt;=&gt;&lt;=&gt;   Space fleet                 0\n</code></pre>\n\n<p>This seems to be because the outer <code>&lt;=&gt;</code> is doing something I don't understand. My question is why does </p>\n\n<pre><code>my $foo = &lt;=&gt;;\n</code></pre>\n\n<p>Set <code>$foo</code> to <code>=</code>? Other non-alphanumerics seem to work too,</p>\n\n<pre><code>my $foo = &lt;=&gt;;\nmy $foo = &lt;-&gt;;\nmy $foo = &lt;/&gt;;\n</code></pre>\n\n<p>But, alphanumerics don't...</p>\n\n<pre><code>my $foo = &lt;a&gt;;\n</code></pre>\n\n<p>Moreover, <a href=\"https://metacpan.org/pod/distribution/perlsecret/lib/perlsecret.pod\" rel=\"noreferrer\">the <code>perlsecret</code> pod is confusing to me</a>,</p>\n\n<blockquote>\n  <p>Even though it looks like a sequence of three spaceship operators, only the middle ship is an actual spaceship. The two outer \"spaceships\" are actually calls to <code>glob(\"=\")</code>.</p>\n</blockquote>\n\n<p>It doesn't seem to be the case either, as I can't make sense as to why, <code>glob(\"=\")</code> would return <code>=</code>, but <code>glob(\"a\")</code> would return <code>undef</code> -- even if there is a file called <code>a</code> in the current working directory.</p>\n\n<p>What is Perl doing in both of these cases? I assume it's falling back to a literal if the thing inside the <code>&lt;&gt;</code> isn't an alphanumeric -- is that behavior supported?</p>\n"}, {"tags": ["arrays", "perl", "scalar"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1530849748, "post_id": 51201863, "comment_id": 89386832, "body": "For more information about reference variables, see <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10039979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xEwfK.gif?s=128&g=1", "display_name": "Fabio Elia Locatelli", "link": "https://stackoverflow.com/users/10039979/fabio-elia-locatelli"}, "edited": false, "score": 0, "creation_date": 1530934961, "post_id": 51201936, "comment_id": 89420364, "body": "Thanks for your input. I think I might adopt the syntax you show in the last example."}], "tags": [], "owner": {"reputation": 141, "user_id": 6277637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b75bd241571946bd8060b505d56ec4b?s=128&d=identicon&r=PG&f=1", "display_name": "James E Keenan", "link": "https://stackoverflow.com/users/6277637/james-e-keenan"}, "is_accepted": false, "score": 1, "last_activity_date": 1530841014, "creation_date": 1530841014, "answer_id": 51201936, "question_id": 51201863, "link": "https://stackoverflow.com/questions/51201863/perl-syntax-meaning/51201936#51201936", "title": "Perl @$ syntax meaning", "body": "<p>You state that you have \"adapted a code fragment for getting column names in DBI\", but it is not immediately evident how you have gotten to that point from the DBI library.</p>\n\n<p>Reading <em>perldoc DBI</em>, the closest I get to something to retrieve column names is:</p>\n\n<pre><code>\"column_info\"\n  $sth = $dbh-&gt;column_info( $catalog, $schema, $table, $column );\n\n  # then $sth-&gt;fetchall_arrayref or $sth-&gt;fetchall_hashref etc\n</code></pre>\n\n<p>The <em>$sth->fetchall_arrayref</em> would return an array reference.  An array reference in Perl 5 is a scalar and is denoted with the '$' sigil.  To iterate over the elements of that arrayref, you need to de-reference the arrayref.  You can do that with either:</p>\n\n<pre><code>foreach (@$tableColumns) { ...\n</code></pre>\n\n<p>or, more formally:</p>\n\n<pre><code>foreach (@{$tableColumns}) { ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 10039979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xEwfK.gif?s=128&g=1", "display_name": "Fabio Elia Locatelli", "link": "https://stackoverflow.com/users/10039979/fabio-elia-locatelli"}, "edited": false, "score": 0, "creation_date": 1530934872, "post_id": 51202324, "comment_id": 89420354, "body": "Thank you! I am still not very familiar with Perl references but you pointed me in the right direction."}], "tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": true, "score": 4, "last_activity_date": 1530845075, "creation_date": 1530845075, "answer_id": 51202324, "question_id": 51201863, "link": "https://stackoverflow.com/questions/51201863/perl-syntax-meaning/51202324#51202324", "title": "Perl @$ syntax meaning", "body": "<p>Here, <code>$databaseStatement-&gt;{NAME}</code> returns an array ref.</p>\n\n<pre><code>$tableColumns = $databaseStatement-&gt;{NAME};\n</code></pre>\n\n<p>If you were to <code>print $tableColumns</code> you'd see something like <code>ARRAY(0x18af700)</code>.</p>\n\n<p>So it's storing an array ref, how do you access that array? You <em>dereference</em> it.</p>\n\n<pre><code>for my $entry ( @{ $tableColumns } ) { ... }\n</code></pre>\n\n<p>The <code>@$tableColumns</code> is just shorthand syntax for dereferencing.</p>\n\n<hr>\n\n<p>So what's the rationale for all this?</p>\n\n<p>Perl does not allow you to store lists inside an array or as a hash value; you can only store scalar values. This include <em>references</em>, which then allows you to, for example,  store references to an array or hash inside another array or hash.</p>\n\n<pre><code>my @simpsons = ('Homer', 'Marge', 'Bart', 'Lisa', 'Maggie');\n\nmy %characters = (\n    simpsons =&gt; \\@simpsons, # Create references to existing array\n    flanders =&gt; ['Ned', 'Maude', 'Rod', 'Tod'], # Anonymous array-ref\n);\n\n$simpsons[2] = 'Bort'; # This will affect the entry in the hash\n\nfor my $character ( @{ $characters{simpsons} } ) {\n    print $character . \"\\n\";\n}\n</code></pre>\n\n<p>Note that I can't use the shorthand <code>@$characters{simpsons}</code> here, but if if I do <code>my $simpsons = $characters{simpsons}</code> I can then iterate over <code>@$simpsons</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 10039979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xEwfK.gif?s=128&g=1", "display_name": "Fabio Elia Locatelli", "link": "https://stackoverflow.com/users/10039979/fabio-elia-locatelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 791, "favorite_count": 0, "accepted_answer_id": 51202324, "answer_count": 2, "score": 2, "last_activity_date": 1530845075, "creation_date": 1530840115, "question_id": 51201863, "link": "https://stackoverflow.com/questions/51201863/perl-syntax-meaning", "title": "Perl @$ syntax meaning", "body": "<p>I have adapted a code fragment for getting column names in DBI and it works fine:</p>\n\n<pre><code>$tableColumns = $databaseStatement-&gt;{NAME};\n\nprint $fileHandle $documentFormatter-&gt;{openTableRow};\nforeach(@$tableColumns){\n  print $fileHandle $documentFormatter-&gt;{openTableHeader};\n  print $fileHandle $_;\n  print $fileHandle $documentFormatter-&gt;{closeTableHeader};\n}\nprint $fileHandle $documentFormatter-&gt;{closeTableRow};\n</code></pre>\n\n<p>However, I do not fully understand why in line 3 I need to use <strong>@$</strong> when I iterate over the headers returned by statement execution. Also why would the variable <strong>$tableColumns</strong> be a scalar rather than an array?</p>\n\n<p>Hope you can clarify this because I'm rather confused :(</p>\n\n<p>Thanks in advance,\nFabio</p>\n"}, {"tags": ["r", "perl", "permutation", "permute"], "comments": [{"owner": {"reputation": 1866, "user_id": 8223954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VoZVZ.jpg?s=128&g=1", "display_name": "Mankind_008", "link": "https://stackoverflow.com/users/8223954/mankind-008"}, "edited": false, "score": 0, "creation_date": 1530824521, "post_id": 51199680, "comment_id": 89381353, "body": "wouldnt you just need to sample with replacement the Drug feature and keep the rest of data frame same??. simply using <code>sample(c(&quot;T&quot;,&quot;C&quot;), 351, replace = TRUE)</code> for every permutation."}, {"owner": {"reputation": 27, "user_id": 2697374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5128d070d186d0414a6a07b2f46a5cf?s=128&d=identicon&r=PG&f=1", "display_name": "snowy_squirrel", "link": "https://stackoverflow.com/users/2697374/snowy-squirrel"}, "reply_to_user": {"reputation": 1866, "user_id": 8223954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VoZVZ.jpg?s=128&g=1", "display_name": "Mankind_008", "link": "https://stackoverflow.com/users/8223954/mankind-008"}, "edited": false, "score": 0, "creation_date": 1530824772, "post_id": 51199680, "comment_id": 89381448, "body": "but wouldn&#39;t the integrity of the pairing be compromised? Because every pairing has to have the same drug label (eg; s1 and s3 have to have either T or C both, but not T and C). Sorry it wasn&#39;t clear, I added it in the original question."}, {"owner": {"reputation": 1866, "user_id": 8223954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VoZVZ.jpg?s=128&g=1", "display_name": "Mankind_008", "link": "https://stackoverflow.com/users/8223954/mankind-008"}, "edited": false, "score": 0, "creation_date": 1530824934, "post_id": 51199680, "comment_id": 89381520, "body": "okay. Got your requirement now. One more thing, if you have paired samples. howcome total number of samples odd. Does any one of the sample not paired?"}, {"owner": {"reputation": 27, "user_id": 2697374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5128d070d186d0414a6a07b2f46a5cf?s=128&d=identicon&r=PG&f=1", "display_name": "snowy_squirrel", "link": "https://stackoverflow.com/users/2697374/snowy-squirrel"}, "reply_to_user": {"reputation": 1866, "user_id": 8223954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VoZVZ.jpg?s=128&g=1", "display_name": "Mankind_008", "link": "https://stackoverflow.com/users/8223954/mankind-008"}, "edited": false, "score": 0, "creation_date": 1530825335, "post_id": 51199680, "comment_id": 89381657, "body": "sorry again.. I corrected it; it&#39;s indeed 350 samples but 351 columns because of the 1st one used for feature names etc)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1530826081, "post_id": 51199680, "comment_id": 89381910, "body": "One approach: (1) record all pairings (by processing the first row)  (2) generate permutations of the header (&quot;drug&quot;) one by one (3) compare each with pairings and reject if it messes it up.  (*) If most are paired and there are cross-pairings this may be too slow, in which case you can devise a permutation generator to use known pairings."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1530826225, "creation_date": 1530826225, "answer_id": 51200158, "question_id": 51199680, "link": "https://stackoverflow.com/questions/51199680/permute-labels-of-matrix-while-preserving-the-pairing-of-the-samples/51200158#51200158", "title": "Permute labels of matrix while preserving the pairing of the samples", "body": "<p>Identify the column indexes of the pairs, find the drug associated with the pairs, shuffle the drugs, then assign the shuffled drugs back to the pairs.</p>\n\n<pre><code>use List::Util qw( shuffle );\n\nmy @matrix = (\n   [ 'Drug',    'T',   'T',  'T',   'C',  'T',   ..... ],\n   [ 'Sample',  's1',  's2', 's3',  's4', 's5',  ..... ],\n   [ 'Pair',    '16',  '81', '-16', '32', '-81', ..... ],\n   [ 'Cond',    'B',   'D',  'B',   'B',  'D',   ..... ],\n   [ 'F1',      '34',  '23', '12',  '',   '9',   ..... ],\n   [ 'F2',      '78',  '',   '11',  '87', '10',  ..... ],\n);\n\nmy %pair_col_idxs_by_key;\n{\n   my $drug_row = $matrix[0];\n   for my $col_idx (1..$#$drug_row) {\n   my $row = $matrix[$col_idx];\n   push @{ $pair_col_idxs_by_key{join(\":\", abs($row-&gt;[2]), $row-&gt;[3])} }, $pair_col_idxs;\n}\n\nmy @all_pair_col_idxs = values(%pair_col_idxs_by_key);\nmy @drugs = map { $matrix[ 0 ][ $_-&gt;[0] ] } @all_pair_col_idxs;\n\n@drugs = shuffle @drugs;\n\n# Keep reshuffling until you get a previously unseen result.\n\nfor my $i (0..$#all_pair_col_idxs) {\n   my $pair_col_idxs = $all_pair_col_idxs[$i];\n   my $drug          = $drug[$i];\n\n   $matrix[0][$_] = $drug for @$pair_col_idxs;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1866, "user_id": 8223954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VoZVZ.jpg?s=128&g=1", "display_name": "Mankind_008", "link": "https://stackoverflow.com/users/8223954/mankind-008"}, "is_accepted": true, "score": 2, "last_activity_date": 1530835415, "last_edit_date": 1530835415, "creation_date": 1530826822, "answer_id": 51200254, "question_id": 51199680, "link": "https://stackoverflow.com/questions/51199680/permute-labels-of-matrix-while-preserving-the-pairing-of-the-samples/51200254#51200254", "title": "Permute labels of matrix while preserving the pairing of the samples", "body": "<p>Given the data <code>df</code>. <em>Group by absolute value of</em> <code>Pair</code> and then <em>sample/ permute</em> <code>Drug</code> <em>for the grouped pairs</em>. Finally <em>join back</em> on absolute value of <code>Pairs</code>. Using <code>dplyr</code>:</p>\n\n<pre><code>t_df &lt;- as.data.frame(t(df))                    # transposed to use features as cols\nt_df$Pair &lt;- as.numeric(as.character(t_df$Pair)\n\nlibrary(dplyr)\n\n# Wrap this into a function to call/ permute 1000 times\ndf_out &lt;- t_df %&gt;% mutate(abs_pair = abs(Pair)) %&gt;% \n              group_by(abs_pair) %&gt;% filter(row_number()==1) %&gt;% \n          ungroup() %&gt;% mutate(Permuted_drug = sample(Drug, n())) %&gt;%      \n              select(abs_pair, Permuted_drug) %&gt;%\n          inner_join(t_df %&gt;% mutate(abs_pair = abs(Pair)))\n\ndf_out\n#  abs_pair Permuted_drug Drug  Sample  Pair Cond \n#     &lt;dbl&gt; &lt;fct&gt;         &lt;fct&gt; &lt;fct&gt;  &lt;dbl&gt; &lt;fct&gt;\n#1       16 T             T     s1        16 B    \n#2       16 T             T     s3       -16 B    \n#3       81 C             T     s2        81 D    \n#4       81 C             T     s5       -81 D    \n#5       32 T             C     s4        32 B    \n</code></pre>\n\n<p><em>Data Used:</em></p>\n\n<pre><code>df &lt;- read.table(text = \"Drug    T   T   T   C   T\nSample  s1  s2  s3  s4  s5\nPair    16  81 -16  32 -81\nCond    B   D    B   B  D\", row.names = 1)\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 2697374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5128d070d186d0414a6a07b2f46a5cf?s=128&d=identicon&r=PG&f=1", "display_name": "snowy_squirrel", "link": "https://stackoverflow.com/users/2697374/snowy-squirrel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 1, "accepted_answer_id": 51200254, "answer_count": 2, "score": 1, "last_activity_date": 1530835415, "creation_date": 1530823739, "last_edit_date": 1530825257, "question_id": 51199680, "link": "https://stackoverflow.com/questions/51199680/permute-labels-of-matrix-while-preserving-the-pairing-of-the-samples", "title": "Permute labels of matrix while preserving the pairing of the samples", "body": "<p>I have a matrix that's 490 rows (features; F1..F490) and 350 columns (350 samples; s1..s350). \nThe first columns look like this:</p>\n\n<pre><code>Drug    T   T   T   C   T\nSample  s1  s2  s3  s4  s5 .....\nPair    16  81 -16  32 -81 .....\nCond    B   D    B   B  D  .....\nF1      34  23   12     9  .....\nF2      78       11  87 10 .....\n...\n</code></pre>\n\n<p>(there are missing data, it's normal).</p>\n\n<p>There are 2 conditions; B and D. There are 2 drugs (T and C).\nThe samples are paired. So for example, s1 and s3 are paired because their Pair value is the same (in absolute value).</p>\n\n<p>What I'm trying to do, is to permute the drugs labels 1000 times while preserving the information on the pairing (Pair value). So, a pair should always have the same condition (B in this case) and the same Pair value (16 and -16 in this case). Also, they have to have the same drug label. Example; s1 and s3 are a pair; the have the same Pair value, are both B and have both the drug label T.</p>\n\n<p>So 1 of the 1000 permuted files should look something like this for example:</p>\n\n<pre><code>Drug    C   T   C   T   T\nSample  s1  s2  s3  s4  s5 .....\nPair    16  81 -16  32 -81 .....\nCond    B   D    B   B  D  .....\nF1      34  23   12     9  .....\nF2      78       11  87 10 .....\n...\n</code></pre>\n\n<p>I don't mind if the samples are not in order.</p>\n\n<p>I've tried permute and sample (in R), but I can't seem to find a way to do it while including the conditions described above.. I'm sorry if this is obvious..</p>\n\n<p>I want to use these permutated files (n=1000) for a downstream analysis that I already coded.</p>\n\n<p>Thank you very much for your input.</p>\n"}, {"tags": ["perl", "dbix-class"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1530877678, "post_id": 51209803, "comment_id": 89400096, "body": "This answer is a stub. Feel free to expand it."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 0, "last_activity_date": 1530877671, "creation_date": 1530877671, "answer_id": 51209803, "question_id": 51198453, "link": "https://stackoverflow.com/questions/51198453/connect-to-a-dbixclass-database-without-repeating-the-connection-details/51209803#51209803", "title": "Connect to a DBIx::Class database without repeating the connection details?", "body": "<p>Put your connection details in a config file, create a utility to return the connection and read the config details like you showed, or as a factory type function. Make the config dependant on the environment and you'll have testing capabilities for free.</p>\n"}], "owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1530877671, "creation_date": 1530818314, "last_edit_date": 1530824744, "question_id": 51198453, "link": "https://stackoverflow.com/questions/51198453/connect-to-a-dbixclass-database-without-repeating-the-connection-details", "title": "Connect to a DBIx::Class database without repeating the connection details?", "body": "<p><a href=\"https://metacpan.org/pod/distribution/DBIx-Class/lib/DBIx/Class/Manual/Intro.pod\" rel=\"nofollow noreferrer\"><code>DBIx::Class::Manual::Intro</code></a>\nsuggests connecting to the database as follows</p>\n\n<pre><code>my $schema = MyApp::Schema-&gt;connect(...)\n</code></pre>\n\n<p>explicitly providing connection details such as the password.</p>\n\n<p>I want to connect to the same database from multiple different scripts, and it would be unwise to code the same connection parameters into each of the programs separately.</p>\n\n<p>What is the \"official\" way to create a connection method with fixed connection details?</p>\n\n<p>I realize that I can write something like this</p>\n\n<pre><code>package MyApp::Schema;\n\nuse base qw/DBIx::Class::Schema/;\n\nsub my_connect {\n  $_[0]::SUPER-&gt;connect(...);\n}\n\n1;\n</code></pre>\n\n<p>Is this approach recommended?</p>\n\n<p>I realize that providing different connection details may be useful for testing scripts, but in reality we do not yet use testing scripts, so this is currently irrelevant for our team.</p>\n"}, {"tags": ["perl", "date", "split"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1530801812, "post_id": 51194103, "comment_id": 89369788, "body": "Can you clarify what you want to do please? I understood that you want to create smaller files with a sub-set based on year and month. So the first line of your input file should go into a file in the directory <code>2018-06&#47;</code> and the last line should go into a different file in the directory <code>2018-07&#47;</code>. Is that correct?"}, {"owner": {"reputation": 658, "user_id": 5543203, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bdYF4.png?s=128&g=1", "display_name": "Henrik supports the community", "link": "https://stackoverflow.com/users/5543203/henrik-supports-the-community"}, "edited": false, "score": 0, "creation_date": 1530801951, "post_id": 51194103, "comment_id": 89369897, "body": "And how many output files do you expect? (the solution gets more complicated if you need many - as in several thousand - files)"}, {"owner": {"reputation": 43, "user_id": 9999117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd95bd057cbc44201cbb5f5d107d32?s=128&d=identicon&r=PG&f=1", "display_name": "Perler", "link": "https://stackoverflow.com/users/9999117/perler"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1530802106, "post_id": 51194103, "comment_id": 89370023, "body": "@simbabque yes, it&#39;s correct :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1530802219, "post_id": 51194103, "comment_id": 89370097, "body": "You do realize your code does something completely different?"}, {"owner": {"reputation": 43, "user_id": 9999117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd95bd057cbc44201cbb5f5d107d32?s=128&d=identicon&r=PG&f=1", "display_name": "Perler", "link": "https://stackoverflow.com/users/9999117/perler"}, "reply_to_user": {"reputation": 658, "user_id": 5543203, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bdYF4.png?s=128&g=1", "display_name": "Henrik supports the community", "link": "https://stackoverflow.com/users/5543203/henrik-supports-the-community"}, "edited": false, "score": 0, "creation_date": 1530802223, "post_id": 51194103, "comment_id": 89370098, "body": "@Henrik My csv contain last access on a server. I think to found only last two months on my csv log file."}, {"owner": {"reputation": 43, "user_id": 9999117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd95bd057cbc44201cbb5f5d107d32?s=128&d=identicon&r=PG&f=1", "display_name": "Perler", "link": "https://stackoverflow.com/users/9999117/perler"}, "edited": false, "score": 0, "creation_date": 1530802311, "post_id": 51194103, "comment_id": 89370171, "body": "@simbaque My code actualy write into 2018-July directory, because it works with locatime :("}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1530802473, "post_id": 51194103, "comment_id": 89370279, "body": "You don&#39;t need to care about today&#39;s date. You care about some value in each line of data, which happens to represent a date."}, {"owner": {"reputation": 43, "user_id": 9999117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd95bd057cbc44201cbb5f5d107d32?s=128&d=identicon&r=PG&f=1", "display_name": "Perler", "link": "https://stackoverflow.com/users/9999117/perler"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1530802581, "post_id": 51194103, "comment_id": 89370372, "body": "@simbabque You&#39;re absolutely right, I was thinking badly. I&#39;ve updated the code right now"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1530803381, "post_id": 51194694, "comment_id": 89370950, "body": "Oh. You wanted the month name, not the <code>MM</code> numbers. In that case, my regex does not make much sense. But you could use a lookup hash."}, {"owner": {"reputation": 43, "user_id": 9999117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd95bd057cbc44201cbb5f5d107d32?s=128&d=identicon&r=PG&f=1", "display_name": "Perler", "link": "https://stackoverflow.com/users/9999117/perler"}, "edited": false, "score": 0, "creation_date": 1530803455, "post_id": 51194694, "comment_id": 89371005, "body": "After my last edit, my code works \u2665. What do you think about it ? Now i study your code, for undestand your solution..."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 43, "user_id": 9999117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd95bd057cbc44201cbb5f5d107d32?s=128&d=identicon&r=PG&f=1", "display_name": "Perler", "link": "https://stackoverflow.com/users/9999117/perler"}, "edited": false, "score": 1, "creation_date": 1530803589, "post_id": 51194694, "comment_id": 89371099, "body": "@Perler I am happy you got it to work on your own! That&#39;s great! Some of the points in my answer already address code review. Your solution is very complex. You re-open file handles all the time, and don&#39;t explicitly close them. You use extra modules that are not really needed. I would reject it as too complicated and inefficient in a $work code review I&#39;m afraid. Feel free to post it to <a href=\"https://codereview.stackexchange.com\">Code Review</a> for an in-depths review. :)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1530803317, "creation_date": 1530803317, "answer_id": 51194694, "question_id": 51194103, "link": "https://stackoverflow.com/questions/51194103/split-my-output-into-multiple-files/51194694#51194694", "title": "Split my output into multiple files", "body": "<p>There is no reason to care about the actual date, or to use date functions at all here. You want to split up your data based on a partial value of one of the columns in the data. That just happens to be the date.</p>\n\n<blockquote>\n<pre><code>NAME08;2018/06/26;16:03:57   # This goes to 2018-06/\nNAME09;2018/06/26;16:03:57   #\nNAME02;2018/06/27;16:58:12   #\nNAME03;2018/07/03;07:47:21      # This goes to 2018-07/\nNAME21;2018/07/03;10:53:00      #\nNAMEXX;2018/07/05;03:13:01      #\nNAME21;2018/07/05;15:39:00      #\n</code></pre>\n</blockquote>\n\n<p>The easiest way to do this is to iterate your input data, then stick it into a hash with keys for each year-month combination. But you're talking about log files, and they might be large, so that's inefficient.</p>\n\n<p>We should work with different file handles instead.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %months = ( 6 =&gt; 'June', 7 =&gt; 'July' );\n\nmy %handles;\nwhile (my $row = &lt;DATA&gt;) {\n\n    # no chomp, we don't actually care about reading the whole row\n    my (undef, $dir) = split /;/, $row; # discard name and everything after date\n\n    # create the YYYY-MM key\n    $dir =~ s[^(....)/(..)][$1-$months{$2}];\n\n    # open a new handle for this year/month if we don't have it yet\n    unless (exists $handles{$dir}) {\n        # create the directory (skipped here) ...\n        open my $fh, '&gt;', \"$dir/filename.csv\" or die $!;\n        $handles{$dir} = $fh;\n    }\n\n    # write out the line to the correct directory\n    print { $handles{$dir} } $row;\n}\n\n__DATA__\nNAME08;2018/06/26;16:03:57\nNAME09;2018/06/26;16:03:57\nNAME02;2018/06/27;16:58:12\nNAME03;2018/07/03;07:47:21\nNAME21;2018/07/03;10:53:00\nNAMEXX;2018/07/05;03:13:01\nNAME21;2018/07/05;15:39:00\n</code></pre>\n\n<p>I've skipped the part about creating the directory as you already know how to do this.</p>\n\n<p>This code will also work if your rows of data are not sequential. It's not the most efficient as the number of handles will grow the more data you have, but as long you don't have 100s of them at the same time that does not really matter.</p>\n\n<p>Things of note:</p>\n\n<ul>\n<li>You don't need <code>chomp</code> because you don't care about working with the last field.</li>\n<li>You don't need to assign all of the values after <code>split</code> because you don't care about them. </li>\n<li>You can discard values by assigning them to <code>undef</code>.</li>\n<li>Always use three-argument <code>open</code> and <em>lexical</em> file handles. </li>\n<li>the <code>{}</code> in <code>print { ... } $row</code>are needed to tell Perl that this is the handle we are printing too. See <a href=\"http://perldoc.perl.org/functions/print.html\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/functions/print.html</a>.</li>\n</ul>\n"}], "owner": {"reputation": 43, "user_id": 9999117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd95bd057cbc44201cbb5f5d107d32?s=128&d=identicon&r=PG&f=1", "display_name": "Perler", "link": "https://stackoverflow.com/users/9999117/perler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 51194694, "answer_count": 1, "score": 1, "last_activity_date": 1530806545, "creation_date": 1530801561, "last_edit_date": 1592644375, "question_id": 51194103, "link": "https://stackoverflow.com/questions/51194103/split-my-output-into-multiple-files", "title": "Split my output into multiple files", "body": "\n<p>I have the following list in a CSV file, and my goal is to split this list into directories named <code>YYYY-Month</code> based on the date in each row.</p>\n<pre class=\"lang-none prettyprint-override\"><code>NAME99;2018/06/13;12:27:30\nNAME01;2018/06/13;13:03:59\nNAME00;2018/06/15;11:33:01\nNAME98;2018/06/15;12:22:00\nNAME34;2018/06/15;16:58:45\nNAME17;2018/06/18;15:51:10\nNAME72;2018/06/19;10:06:37\nNAME70;2018/06/19;12:44:03\nNAME77;2018/06/19;16:36:55\nNAME25;2018/06/11;16:32:57\nNAME24;2018/06/11;16:32:57\nNAME23;2018/06/11;16:37:15\nNAME01;2018/06/11;16:37:15\nNAME02;2018/06/11;16:37:15\nNAME01;2018/06/11;16:37:18\nNAME02;2018/06/05;09:51:17\nNAME00;2018/06/13;15:04:29\nNAME07;2018/06/19;10:02:26\nNAME08;2018/06/26;16:03:57\nNAME09;2018/06/26;16:03:57\nNAME02;2018/06/27;16:58:12\nNAME03;2018/07/03;07:47:21\nNAME21;2018/07/03;10:53:00\nNAMEXX;2018/07/05;03:13:01\nNAME21;2018/07/05;15:39:00\nNAME01;2018/07/05;16:00:14\nNAME00;2018/07/08;11:50:10\nNAME07;2018/07/09;14:46:00\n</code></pre>\n<p>What is the smartest method to achieve this result without having to create a list of static routes, in which to carry out the append?</p>\n<p>Currently my program writes this list to a directory called <code>YYYY-Month</code> only on the basis of <code>localtime</code> but does not do anything on each line.</p>\n<h3>Perl</h3>\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\nuse feature qw(say);\n\nuse File::Path qw&lt;mkpath&gt;;\nuse File::Spec;\nuse File::Copy;\nuse POSIX qw&lt;strftime&gt;;\n\nmy $OUTPUT_FILE = 'output.csv';\nmy $OUTFILE     = 'splitted_output.csv';\n\n# Output to file\nopen( GL_INPUT, $OUTPUT_FILE ) or die $!;\n$/ = &quot;\\n\\n&quot;;    # input record separator\n\nwhile ( &lt;GL_INPUT&gt; ) {\n\n    chomp;\n    my @lines = split /\\n/;\n\n    my $i = 0;\n\n    foreach my $lines ( @lines ) {\n\n        # Encapsulate Date/Time\n        my ( $name, $y, $m, $d, $time ) =\n                $lines[$i] =~ /\\A(\\w+);(\\d+)\\/(\\d+)\\/(\\d+);(\\d+:\\d+:\\d+)/;    \n\n        # Generate Directory YYYY-Month - #2009-January\n        my $dir = File::Spec-&gt;catfile( $BASE_LOG_DIRECTORY, &quot;$y-$m&quot; ) ;\n        unless ( -e $dir ) {\n            mkpath $dir;\n        }\n\n        my $log_file_path = File::Spec-&gt;catfile( $dir, $OUTFILE );\n        open( OUTPUT, '&gt;&gt;', $log_file_path ) or die $!;\n\n        # Here I append value into files\n        print OUTPUT join ';', &quot;$y/$m/$d&quot;, $time, &quot;$name\\n&quot;;    \n        \n        $i++;\n    }\n}\n\nclose( GL_INPUT );\nclose( OUTPUT );\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1530801426, "post_id": 51193981, "comment_id": 89369474, "body": "Your question is confusing. Your module exports <code>dummy_method</code> but you are trying to import and run <code>some_method</code> which doesn&#39;t even exist. Note that, once you have imported a subroutine correctly, you don&#39;t need to qualify it fully: <code>some_method(&#39;foo&#39;)</code> will be fine."}, {"owner": {"reputation": 4629, "user_id": 3474146, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rb7ih.jpg?s=128&g=1", "display_name": "alex", "link": "https://stackoverflow.com/users/3474146/alex"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530801499, "post_id": 51193981, "comment_id": 89369533, "body": "@Borodin It was a typo - this is fixed."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1530801617, "post_id": 51193981, "comment_id": 89369616, "body": "I wish you would copy and paste your real code and errors."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1530801728, "post_id": 51193981, "comment_id": 89369698, "body": "what Borodin said.  You have changed the error message in an important way.  Or else changed the code.  We can&#39;t tell for sure.  Always always always copy and paste your actual code and errors."}, {"owner": {"reputation": 4629, "user_id": 3474146, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rb7ih.jpg?s=128&g=1", "display_name": "alex", "link": "https://stackoverflow.com/users/3474146/alex"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530801890, "post_id": 51193981, "comment_id": 89369854, "body": "@Borodin I didn&#39;t make the error message up."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1530802086, "post_id": 51193981, "comment_id": 89370007, "body": "@alex   Yes, you did. I doubt if the original message contained <i>either</i> <code>some_method</code> or <code>dummy_method</code>. It certainly can&#39;t be correct both before and after you modified it."}, {"owner": {"reputation": 4629, "user_id": 3474146, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rb7ih.jpg?s=128&g=1", "display_name": "alex", "link": "https://stackoverflow.com/users/3474146/alex"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530804878, "post_id": 51193981, "comment_id": 89371938, "body": "@Borodin Respectfully speaking - I did not, although I did obfuscate the method name and my home directory path.  I wanted to create a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a> so my question was not closed as off-topic.  I think you suspect that there is a simple typographical error in my actual code, because there was a typo in my question. I can assure you that this is not the case and that I performed multiple sanity checks before posting the question."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530806884, "post_id": 51193981, "comment_id": 89373132, "body": "<i>&quot;I did obfuscate the method name&quot;</i>  That involves making stuff up.  <i>&quot;I wanted to create a minimal, complete, and verifiable example&quot;</i> That&#39;s laudable, but it involves writing code that produces the same error, and then <i>copying and pasting that exact code</i> into your question. Your code generates <code>&quot;&#39;dummy_method&#39;&quot; is not exported by the Foo::Utilities module</code> which is very different from the message that you show. Furthermore, there is no error at all when the fix from <b><i>ysth</i></b> is made, and I can only imagine that you have named your module file incorrectly as I wrote in my answer."}, {"owner": {"reputation": 4629, "user_id": 3474146, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rb7ih.jpg?s=128&g=1", "display_name": "alex", "link": "https://stackoverflow.com/users/3474146/alex"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530811197, "post_id": 51193981, "comment_id": 89375407, "body": "@Borodin Yes, it&#39;s made it up but it shouldn&#39;t matter in this case. <code>&#47;s&#47;dummy_method&#47;actual_subroutine_name&#47;</code> - the problem should persist.  As for the error, I can assure you that this is the exact same error that I copy/pasted from STDOUT - I just changed the <code>actual_subroutine_name</code> to <code>dummy_method</code>.  Sorry for the confusion."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530812372, "post_id": 51193981, "comment_id": 89375956, "body": "@alex: You&#39;re misunderstanding me. You should be creating an <i>MCVE</i>, including any name changes that you want to make, that displays the same problem as your main code when you run it. Then you post that code together with the messages that it generates. What you have done seems to be to type in something that you think should do the same thing, making an error with the subroutine identifier, and posted an edited version of the original error message with the name changed incorrectly. I doubt if you&#39;ve even tried to run your &quot;MCVE&quot; and that completely spoils the point."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530812575, "post_id": 51193981, "comment_id": 89376064, "body": "@alex: <i>&quot;this is the exact same error that I copy/pasted from STDOUT - I just changed the <code>actual_subroutine_name</code> to <code>dummy_method</code>&quot;</i> Yes, but I imagine it&#39;s the edited output from your real code. What you have shown in your question does something different, so it&#39;s not an MCVE and frankly it&#39;s useless for diagnosing the issue."}, {"owner": {"reputation": 4629, "user_id": 3474146, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rb7ih.jpg?s=128&g=1", "display_name": "alex", "link": "https://stackoverflow.com/users/3474146/alex"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530815584, "post_id": 51193981, "comment_id": 89377420, "body": "@Borodin As a follow-up, the issue ended up actually being that multiple  <code>Foo::Utilities</code> modules were being referenced by my <code>$PERL5LIB</code> environmental variable. The one that did not have the <code>dummy_method</code> subroutine was taking precedence over the one that I updated - so the error message that I posted was technically true, but indeed misleading, as the problem was an environmental issue.  I appreciate your help with this issue."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1530819244, "post_id": 51193981, "comment_id": 89379081, "body": "You should add export tags of all to export all: <code>our %EXPORT_TAGS = ( all  =&gt; [ @EXPORT, @EXPORT_OK ] );</code> Then one could get all the exports with: <code>use Utilities &#39;:all&#39;;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530801814, "post_id": 51194112, "comment_id": 89369793, "body": "<i>&quot;Some people are obsessed with using <code>qw</code> for import lists, even if there is only one element&quot;</i>    Indeed they are, even those here who should know better. I get the idea that it makes it simpler to add to or reduce the list of imported identifiers (which has a parallel in leaving a trailing comma at the end of a list) but it makes the import of a single item much noisier and uglier."}, {"owner": {"reputation": 4629, "user_id": 3474146, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rb7ih.jpg?s=128&g=1", "display_name": "alex", "link": "https://stackoverflow.com/users/3474146/alex"}, "edited": false, "score": 0, "creation_date": 1530802042, "post_id": 51194112, "comment_id": 89369966, "body": "This is a good suggestion - but in both cases I still get an error saying that the subroutine is not exported from the parent Perl module."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 4629, "user_id": 3474146, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rb7ih.jpg?s=128&g=1", "display_name": "alex", "link": "https://stackoverflow.com/users/3474146/alex"}, "edited": false, "score": 0, "creation_date": 1530802191, "post_id": 51194112, "comment_id": 89370081, "body": "@alex: Then there is something else wrong with your code that you have removed from what you have posted. There is no way that we can help you."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1530821730, "post_id": 51194112, "comment_id": 89380116, "body": "Re &quot;<i>Some people are obsessed with using qw for import lists</i>&quot;, Consistency is key to readable code!"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530834244, "post_id": 51194112, "comment_id": 89383887, "body": "@ikegami not just readable, it helps you spot bugs from inconsistency.  But, yes.  That&#39;s why I <i>never</i> use qw for imports, since it looks so silly with just one (and as demonstrated by this question and other anecdotal evidence I&#39;ve seen, newbies tend to think it is part of the use syntax)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1530849881, "post_id": 51194112, "comment_id": 89386861, "body": "That&#39;s one of the many benefits of readability. :) I don&#39;t have a problem with people thinking a great practice is mandatory. I don&#39;t think it&#39;s any more silly putting parens around one argument to use/import than putting parens around the arguments of anything else. Besides, a bit silliness is trumped by readability every day."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 7, "last_activity_date": 1530803055, "last_edit_date": 1530803055, "creation_date": 1530801585, "answer_id": 51194112, "question_id": 51193981, "link": "https://stackoverflow.com/questions/51193981/cant-find-exported-subroutine-in-perl/51194112#51194112", "title": "Can&#39;t find exported subroutine in Perl", "body": "<p>Some people are obsessed with using qw for import lists, even if there is only one element.  I think this makes others think this is a requirement, when it is just one way of making a list.</p>\n\n<pre><code>use Foo::Utilities qw('dummy_method');\n</code></pre>\n\n<p>says to import a method called <code>'dummy_method'</code>, not <code>dummy_method</code>, just like <code>print qw('dummy_method')</code> prints <code>'dummy_method'</code>, not <code>dummy_method</code>.</p>\n\n<p>Try instead:</p>\n\n<pre><code>use Foo::Utilities 'dummy_method';\n</code></pre>\n\n<p>or, if you must:</p>\n\n<pre><code>use Foo::Utilities qw(dummy_method);\n</code></pre>\n\n<p>Though since you are exporting it by default, you could just do:</p>\n\n<pre><code>use Foo::Utilities;\n</code></pre>\n\n<p>Or, since you are calling it as Foo::Utilities::dummy_method, not even export it by default:</p>\n\n<pre><code>use Foo::Utilities ();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4629, "user_id": 3474146, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rb7ih.jpg?s=128&g=1", "display_name": "alex", "link": "https://stackoverflow.com/users/3474146/alex"}, "edited": false, "score": 1, "creation_date": 1530816403, "post_id": 51194639, "comment_id": 89377802, "body": "<i>There must also be a Foo/Utilities.pm that behaves differently, otherwise the use statement would fail even to find the file</i> This was the solution to my problem.  An older version of <code>Utilities.pm</code> file was taking precedence over the newer one in my <code>$PERL5LIB</code> environmental variable, causing Perl to use the wrong module (hence the &quot;missing export&quot; error)."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1530803149, "creation_date": 1530803149, "answer_id": 51194639, "question_id": 51193981, "link": "https://stackoverflow.com/questions/51193981/cant-find-exported-subroutine-in-perl/51194639#51194639", "title": "Can&#39;t find exported subroutine in Perl", "body": "<p>The code you have written, with the modification suggested by <strong><em>ysth</em></strong>, works correctly. The only remaining possibility that I can think of is that you have named or located your module incorrectly</p>\n\n<pre><code>use Foo::Utilities 'dummy_method'\n</code></pre>\n\n<p>will load a file called <code>Foo/Utilities.pm</code> where the <code>Foo</code> directory is in one of the paths in your <code>@INC</code>. It is a common error to omit the initial directories that must be in the path to the module, and you do say that your module is called just <code>Utilities.pm</code></p>\n\n<p>There must also be a <code>Foo/Utilities.pm</code> that behaves differently, otherwise the <code>use</code> statement would fail even to find the file</p>\n\n<p>I have written your code in more modern Perl. This also works</p>\n\n<h3>Foo/Utilities.pm</h3>\n\n<pre><code>package Foo::Utilities;\n\nuse strict;\nuse warnings 'all';\n\nuse Exporter 'import';\n\nour @EXPORT = qw(dummy_method);\n\nsub dummy_method {\n  print \"dummy_method()\\n\";\n  'do things';\n}\n</code></pre>\n\n<h3>main.pl</h3>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Foo::Utilities 'dummy_method';\n\nmy $foo = dummy_method('foo');\n\nprint(\"$foo\\n\");\n</code></pre>\n\n<p>There is no need for using <code>vars</code> any more, and it has been better to <em>import</em> the <code>import</code> method from <code>Exporter</code> (instead of inheriting it) since Perl v5.8.7</p>\n"}], "owner": {"reputation": 4629, "user_id": 3474146, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rb7ih.jpg?s=128&g=1", "display_name": "alex", "link": "https://stackoverflow.com/users/3474146/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "accepted_answer_id": 51194639, "answer_count": 2, "score": 2, "last_activity_date": 1530815727, "creation_date": 1530801212, "last_edit_date": 1530803168, "question_id": 51193981, "link": "https://stackoverflow.com/questions/51193981/cant-find-exported-subroutine-in-perl", "title": "Can&#39;t find exported subroutine in Perl", "body": "<p>I have a module called <code>Utilities.pm</code>.  It exports a subroutine called <code>dummy_method</code>.</p>\n\n<pre><code>package Foo::Utilities;\n\nuse strict;\nuse vars qw($VERSION @ISA @EXPORT @EXPORT_OK);\n\nrequire Exporter;\n\n@ISA = qw(Exporter);\n@EXPORT = qw(dummy_method);\n\nsub dummy_method {\n  # do things\n}\n</code></pre>\n\n<p>I have a Perl script that uses the <code>dummy_method</code> subroutine:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Foo::Utilities qw('dummy_method');\n\nmy $foo = Foo::Utilities::dummy_method(\"foo\");\nprint(\"$foo\\n\");\n</code></pre>\n\n<p>Executing that script throws an export error:</p>\n\n<blockquote>\n  <p>\"dummy_method\" is not exported by the Foo::Utilities module<br>\n  Can't continue after import errors at /home/me/foo.pl line 3<br>\n  BEGIN failed--compilation aborted at /home/me/foo.pl line 3.  </p>\n</blockquote>\n\n<p>I'm confused because I am explicitly exporting that subroutine with <code>@EXPORT = qw(dummy_method);</code>.  How do I use <code>dummy_method</code> in another script?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1530797030, "post_id": 51192110, "comment_id": 89366479, "body": "If you simply want an array of scalars, you could do: <code>$array_ref = [map { $_-&gt;{name} } @$array_ref]</code>"}, {"owner": {"reputation": 311, "user_id": 6057413, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1e2e2b60be0c22e958a60052489ab283?s=128&d=identicon&r=PG&f=1", "display_name": "Phoenix", "link": "https://stackoverflow.com/users/6057413/phoenix"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1530797053, "post_id": 51192110, "comment_id": 89366495, "body": "I have given final result as  [CWG.Basicmode.sim, NoInit,etc];"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 311, "user_id": 6057413, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1e2e2b60be0c22e958a60052489ab283?s=128&d=identicon&r=PG&f=1", "display_name": "Phoenix", "link": "https://stackoverflow.com/users/6057413/phoenix"}, "edited": false, "score": 2, "creation_date": 1530800425, "post_id": 51192588, "comment_id": 89368775, "body": "@Phoenix: Please don&#39;t solicit votes on Stack Overflow."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 4, "last_activity_date": 1530797761, "last_edit_date": 1530797761, "creation_date": 1530797321, "answer_id": 51192588, "question_id": 51192110, "link": "https://stackoverflow.com/questions/51192110/convert-an-array-of-hashes-to-array-of-scalar-values-in-perl/51192588#51192588", "title": "Convert an array of hashes to array of scalar values in Perl", "body": "<p>To convert an array of hashes to a plain array of scalar values to be constructed from the hashes from a given key, you can use <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\"><code>map</code></a>. For example, assuming each hash has a <code>name</code> key, we can put the values of all these keys in a new arrayref like this:</p>\n\n<pre><code>my $new_array_ref = [map { $_-&gt;{name} } @$array_ref];\n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 6057413, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1e2e2b60be0c22e958a60052489ab283?s=128&d=identicon&r=PG&f=1", "display_name": "Phoenix", "link": "https://stackoverflow.com/users/6057413/phoenix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "accepted_answer_id": 51192588, "answer_count": 1, "score": 0, "last_activity_date": 1543571805, "creation_date": 1530795996, "last_edit_date": 1543571805, "question_id": 51192110, "link": "https://stackoverflow.com/questions/51192110/convert-an-array-of-hashes-to-array-of-scalar-values-in-perl", "title": "Convert an array of hashes to array of scalar values in Perl", "body": "<p>I have a reference to an array of hashes like this</p>\n\n<pre><code>[\n    {\n        'parameters'              =&gt; '',\n        'default_init_for_config' =&gt; '1',\n        'name'                    =&gt; 'CWG.BasicCmode.sim',\n        'init'                    =&gt; 'config/CWG.BasicCmode.sim'\n    },\n    {\n        'parameters'              =&gt; '',\n        'default_init_for_config' =&gt; '0',\n        'name'                    =&gt; 'CWG.BasicCmode.MFA.sim',\n        'init'                    =&gt; 'config/CWG.BasicCmode.MFA.sim'\n    },\n    {\n        'parameters'              =&gt; '',\n        'default_init_for_config' =&gt; '0',\n        'name'                    =&gt; 'NoInit',\n        'init'                    =&gt; 'config/NoInit'\n    },\n    {\n        'parameters'              =&gt; '',\n        'default_init_for_config' =&gt; '0',\n        'name'                    =&gt; '2Vsim.mcc',\n        'init'                    =&gt; 'config/2Vsim.mcc'\n    },\n]\n</code></pre>\n\n<p>I want to extract the value of the key <code>name</code> alone and assign it to the same array.</p>\n\n<p>I deleted all the other keys and got something like this:</p>\n\n<pre><code>[\n    {\n        'name' =&gt; 'CWG.BasicCmode.sim'\n    },\n    {\n        'name' =&gt; 'CWG.BasicCmode.MFA.sim'\n    },\n    {\n        'name' =&gt; 'NoInit'\n    },\n    {\n        'name' =&gt; '2Vsim.mcc'\n    },\n    {\n        'name' =&gt; 'FakeAFF_HA.sim'\n    },\n    {\n        'name' =&gt; 'ISCSI.sim'\n    },\n    {\n        'name' =&gt; 'CWG.ExtendedCmode.sim'\n    },\n    {\n        'name' =&gt; 'CWG.BasicCmodeNonHA.sim'\n    },\n    {\n        'name' =&gt; '2Vsim.FakeAFF.mcc'\n    },\n]\n</code></pre>\n\n<p>How to proceed now?</p>\n\n<p>The output should be</p>\n\n<pre><code>[\n    'CWG.Basicmode.sim',\n    'CWG.BasicCmode.MFA.sim',\n    'NoInit',\n    ...\n]\n</code></pre>\n"}, {"tags": ["windows", "perl", "cpan", "activeperl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530768129, "post_id": 51183705, "comment_id": 89349438, "body": "Cwd has a pure Perl component (Cwd.pm) and a binary component (Cwd.dll). The two components being loaded are from different versions of the module. You have a messed up installation, or you are telling Perl to look for modules in places where it shouldn&#39;t."}, {"owner": {"reputation": 129, "user_id": 2260515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d2d1b0b05f7c0924d8dfd9790fb6123?s=128&d=identicon&r=PG", "display_name": "Oren Maurer", "link": "https://stackoverflow.com/users/2260515/oren-maurer"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530769554, "post_id": 51183705, "comment_id": 89349946, "body": "Where do I check it? - I mean if I tell Perl to look for modules in places where it shouldn&#39;t."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1530769647, "post_id": 51183705, "comment_id": 89349986, "body": "Are the <code>PERL5LIB</code> or <code>PERLLIB</code> env vars set?"}, {"owner": {"reputation": 129, "user_id": 2260515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d2d1b0b05f7c0924d8dfd9790fb6123?s=128&d=identicon&r=PG", "display_name": "Oren Maurer", "link": "https://stackoverflow.com/users/2260515/oren-maurer"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530770165, "post_id": 51183705, "comment_id": 89350176, "body": "No, I do not see these env vars.    I am looking on:  Control Panel\\All Control Panel Items\\System System Properties -&gt; Advanced -&gt; Environment Variables"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1530770276, "post_id": 51183705, "comment_id": 89350226, "body": "More definitely, just type <code>set | find &quot;PERL&quot;</code> from the cmd in the console from which you run <code>cpan</code>. It&#39;s probably not going to give you anything different though, leaving the other option: A messed up Perl directory."}, {"owner": {"reputation": 129, "user_id": 2260515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d2d1b0b05f7c0924d8dfd9790fb6123?s=128&d=identicon&r=PG", "display_name": "Oren Maurer", "link": "https://stackoverflow.com/users/2260515/oren-maurer"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530770602, "post_id": 51183705, "comment_id": 89350355, "body": "You are right, it gives nothing:   <code>C:\\Users\\orenm&gt;  set | find &quot;PERL&quot;  C:\\Users\\orenm&gt;</code>  This means... what?  Do I need to do &#39;Remove&#39; and install again?"}, {"owner": {"reputation": 129, "user_id": 2260515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d2d1b0b05f7c0924d8dfd9790fb6123?s=128&d=identicon&r=PG", "display_name": "Oren Maurer", "link": "https://stackoverflow.com/users/2260515/oren-maurer"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530771009, "post_id": 51183705, "comment_id": 89350513, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/174381/discussion-between-oren-maurer-and-ikegami\">continue this discussion in chat</a>."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1530837317, "post_id": 51183705, "comment_id": 89384528, "body": "Do <code>where perl</code> and <code>where cpan</code> refer to the same place?"}], "answers": [{"tags": [], "owner": {"reputation": 129, "user_id": 2260515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d2d1b0b05f7c0924d8dfd9790fb6123?s=128&d=identicon&r=PG", "display_name": "Oren Maurer", "link": "https://stackoverflow.com/users/2260515/oren-maurer"}, "is_accepted": false, "score": 1, "last_activity_date": 1531036334, "creation_date": 1531036334, "answer_id": 51229907, "question_id": 51183705, "link": "https://stackoverflow.com/questions/51183705/cpan-shell-errors-activeperl-5-24-3/51229907#51229907", "title": "cpan shell errors - ActivePerl 5.24.3", "body": "<p>Well - solved. :) \nAs ikegami noted - I probably messed up the installation. </p>\n\n<p>I have managed to solve this by doing the following: </p>\n\n<ol>\n<li>Choosing the \"Remove\" option of the ActivePerl installer, </li>\n<li>Move aside the C:\\Perl64\\ directory,  I mean - rename it. </li>\n<li>I verified the I don't have Perl in the system path variables. \nand: </li>\n<li>Activated the ActivePerl installer exe (\"ActivePerl-5.24.3.2404-MSWin32-x64-404865.exe\"), choosing the typical installation. </li>\n</ol>\n"}], "owner": {"reputation": 129, "user_id": 2260515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d2d1b0b05f7c0924d8dfd9790fb6123?s=128&d=identicon&r=PG", "display_name": "Oren Maurer", "link": "https://stackoverflow.com/users/2260515/oren-maurer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1531036334, "creation_date": 1530767106, "question_id": 51183705, "link": "https://stackoverflow.com/questions/51183705/cpan-shell-errors-activeperl-5-24-3", "title": "cpan shell errors - ActivePerl 5.24.3", "body": "<p>I have just installed Activestate Perl 5.24.3 on Windows 7 PC. </p>\n\n<p>I am able to instal with ppm. Installed also CPAN.  </p>\n\n<p>But - I fail to launch the CPAN shell on CMD (DOS command line). </p>\n\n<p>Here is whan I get when trying to invoke the cpan shell in CMD: </p>\n\n<pre><code>C:\\Users\\orenm&gt;cpan\nCwd object version 3.63_01 does not match bootstrap parameter 3.74 at C:/Perl64/lib/DynaLoader.pm line 211.\nCompilation failed in require at C:/Perl64/site/lib/File/Spec/Win32.pm line 5.\nBEGIN failed--compilation aborted at C:/Perl64/site/lib/File/Spec/Win32.pm line5.\nCompilation failed in require at C:/Perl64/site/lib/File/Spec.pm line 21.\nCompilation failed in require at C:/Perl64/site/lib/CPAN.pm line 10.\nBEGIN failed--compilation aborted at C:/Perl64/site/lib/CPAN.pm line 10.\nCompilation failed in require at C:/Perl64/site/lib/App/Cpan.pm line 288.\nBEGIN failed--compilation aborted at C:/Perl64/site/lib/App/Cpan.pm line 288.\nCompilation failed in require at C:\\Perl64\\site\\bin/cpan line 7.\nBEGIN failed--compilation aborted at C:\\Perl64\\site\\bin/cpan line 7.\n\nC:\\Users\\orenm&gt;\n</code></pre>\n\n<p>This also happens when trying to use the C:\\Perl64\\bin\\cpan.bat . </p>\n"}]