[{"tags": ["perl", "awk", "sed", "grep", "ag"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484755558, "post_id": 41724003, "comment_id": 70642754, "body": "How close is close?"}, {"owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484755611, "post_id": 41724003, "comment_id": 70642795, "body": "+/- 5 lines is close.... i&#39;m hoping whatever the tool accepts a parameter that I can specify for closeness"}, {"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1484755846, "post_id": 41724003, "comment_id": 70642960, "body": "Have &quot;path&quot; and &quot;redirect&quot; to appear in the same line?"}, {"owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "edited": false, "score": 0, "creation_date": 1484755945, "post_id": 41724003, "comment_id": 70643023, "body": "the word &quot;path&quot; and &quot;redirect&quot; appears in the same line, and the word &quot;flash&quot; appears in a &quot;close by&quot; line"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1484755997, "post_id": 41724003, "comment_id": 70643057, "body": "Is the data structured in any way? E.g. is it parsable as JSON, YAML or XML?"}, {"owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "edited": false, "score": 0, "creation_date": 1484756060, "post_id": 41724003, "comment_id": 70643105, "body": "for the purpose of this discussion let&#39;s say its a unstructured unparsable verbose log file"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 6, "creation_date": 1484756652, "post_id": 41724003, "comment_id": 70643539, "body": "Yes, this is trivial to do but <a href=\"https://stackoverflow.com/posts/41724003/edit\">edit</a> your question to include concise, testable sample input and expected output so you don&#39;t end up with a solution to a problem you don&#39;t have (or a really bad &quot;solution&quot; to a problem you do have!). As of now you haven&#39;t even told us what your output should be ( file names? blocks of lines from matching files? Something else?) never mind shown us an example. Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and provide the missing <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> including concise, testable sample input and expected output plus what you&#39;ve tried so far."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1484756832, "post_id": 41724380, "comment_id": 70643667, "body": "Does this end up having to read the file twice? First to grep, second to awk?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1484758383, "post_id": 41724380, "comment_id": 70644791, "body": "@Sobrique Not exactly. It does two passes, but the second pass only searches the 10 lines surrounding each instance of the word &quot;text&quot;. This would be pretty inefficient if &quot;text&quot; appeared on every single line, so obviously the assumption is that it doesn&#39;t appear frequently."}], "tags": [], "owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "is_accepted": true, "score": 1, "last_activity_date": 1484756496, "last_edit_date": 1495542259, "creation_date": 1484756496, "answer_id": 41724380, "question_id": 41724003, "link": "https://stackoverflow.com/questions/41724003/file-searching-and-proximity-search/41724380#41724380", "title": "File searching and proximity search", "body": "<p>The easier filter is the one with \"flash\". It is also good to do it first, so that the more expensive pattern matching is done in the subset of matched files.</p>\n\n<p>For this, just say:</p>\n\n<pre><code>grep -RH -C 5 \"text\" *\n</code></pre>\n\n<p>This will recursively (<code>-R</code>) look for the pattern \"text\" and print the name of the file (<code>-H</code>) when this happens. Also, it will print the surrounding 5 lines (<code>-C 5</code>). Just change <code>5</code> with a variable if you want so.</p>\n\n<p>Then it is time to use awk to check two patterns with:</p>\n\n<pre><code>awk '/pattern1/ &amp;&amp; /pattern2/ {print FILENAME}' file\n</code></pre>\n\n<p>This is useful as <a href=\"https://stackoverflow.com/a/30948232/1983854\">awk is quite good on multiple patterns matching</a>.</p>\n\n<p>Since we do not have the filename but a stream on the form <code>filename:flash</code>, etc, we can have a basic Bash loop to handle the result from <code>grep</code>:</p>\n\n<pre><code>while IFS=\":\" read -r filename data;\ndo\n    awk -v f=\"$filename\" '/path/ &amp;&amp; /redirect/ {print f}' &lt;&lt;&lt; \"$data\"\ndone &lt; &lt;(grep -RH -C5 \"text\" *)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1484769282, "post_id": 41724457, "comment_id": 70650981, "body": "I take it you don&#39;t like statement modifiers? Also, you&#39;re saving lines in <code>@buffer</code> just to count them (the OP just wants a pass/fail on each file) so why not set your two flags to <code>$buffer_limit</code> and decrement them on each line if they&#39;re non-zero"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1484756669, "creation_date": 1484756669, "answer_id": 41724457, "question_id": 41724003, "link": "https://stackoverflow.com/questions/41724003/file-searching-and-proximity-search/41724457#41724457", "title": "File searching and proximity search", "body": "<p>This is a bit more complicated than it seems, because you're looking for words in rough proximity. </p>\n\n<p>So I'd probably tackle it a bit like this:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy $buffer_limit = 5; # +/- 5\n\nmy @buffer; \n\nmy $first_flag;\nmy $second_flag; \n\n#iterate stdin or files specified on command line\nwhile ( my $line = &lt;&gt; ) {\n\n   #test first condition\n   if ( $line =~ m/path/ and $line =~ m/redirect/ ) { $first_flag++; };\n   #test second condition\n   if ( $line =~ m/flash/ ) { $second_flag++; };\n\n   #if either is true - match has been seen recently. \n   #save the line in the buffer. \n   if ( $first_flag or $second_flag ) { \n         push @buffer, $line\n   }\n   #if both are true, we print (and flush the buffer)\n   if ( $first_flag and $second_flag ) { \n       print \"Match found up to line $.:\\n\";\n       print @buffer;\n       @buffer = ();\n       $first_flag = 0;\n       $second_flag = 0; \n   }\n   #exceeding limit means that both matches haven't been seen in proximity. \n   if ( @buffer &gt; $buffer_limit ) { \n      @buffer = ();\n      $first_flag = 0;\n      $second_flag = 0;\n   }\n}\n</code></pre>\n\n<p>We use a rolling 5 line buffer. We start capturing when we hit one or other 'match' and we print/flush if we hit the second match. And then empty the buffer if we exceed 5 lines. </p>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1484756974, "creation_date": 1484756974, "answer_id": 41724577, "question_id": 41724003, "link": "https://stackoverflow.com/questions/41724003/file-searching-and-proximity-search/41724577#41724577", "title": "File searching and proximity search", "body": "<pre><code>ack -A6 -B4 'path.*redirect|redirect.*path' FILES | grep flash\n</code></pre>\n\n<p>outputs lines that contain the pattern <code>flash</code> in the 4 lines before or 6 lines after the lines in the files <code>FILES</code> that contain the patterns <code>path</code> and <code>redirect</code> along with the filename and the line number of the line containing <code>flash</code>.</p>\n\n<p>Without the <code>ack</code> command (or the <code>egrep</code> command, which will also work), you can rephrase this as two <code>grep</code> commands</p>\n\n<pre><code>(grep -A6 -B4 'path.*redirect' FILES ; grep -A6 -B4 'redirect.*path' FILES) |\n    grep flash\n</code></pre>\n"}], "owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "closed_date": 1484783931, "accepted_answer_id": 41724380, "answer_count": 3, "score": -4, "last_activity_date": 1484768795, "creation_date": 1484755487, "last_edit_date": 1495542259, "question_id": 41724003, "link": "https://stackoverflow.com/questions/41724003/file-searching-and-proximity-search", "closed_reason": "Needs details or clarity", "title": "File searching and proximity search", "body": "<p>I've been looking at <a href=\"https://stackoverflow.com/questions/9081/grep-a-file-but-show-several-surrounding-lines\">grep a file, but show several surrounding lines?</a></p>\n\n<p>I'm using a bash terminal, looking for a file which</p>\n\n<ul>\n<li><p>Has both <code>path</code> and <code>redirect</code> on any one line</p></li>\n<li><p>Has <code>flash</code> on a nearby line, within five lines from the first</p></li>\n</ul>\n\n<p>In this possible with grep, ag, Perl, sed or any tool you guys know of?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1484750656, "post_id": 41722211, "comment_id": 70639238, "body": "<a href=\"http://stackoverflow.com/a/1425292/168657\">You&#39;re doing it right</a>. Are you sure the file is being updated? Try displaying <code>-s &quot;log_file.txt&quot;</code> after you seek. Maybe the process that updates the file is buffering its output."}, {"owner": {"reputation": 1, "user_id": 7296033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b05b12760c272dac65adca8486d2261?s=128&d=identicon&r=PG&f=1", "display_name": "gigibigi", "link": "https://stackoverflow.com/users/7296033/gigibigi"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1484751775, "post_id": 41722211, "comment_id": 70640018, "body": "do you know a way of accessing the row and performing some actions with the data in the row?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1484753757, "post_id": 41722211, "comment_id": 70641529, "body": "are existing rows updated or is the only change new rows added at the end?"}, {"owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "edited": false, "score": 1, "creation_date": 1484753843, "post_id": 41722211, "comment_id": 70641594, "body": "I geuess closing the file before the sleep and reopening it before the while would solve the problem. The file might not have been updated but rewritten completely."}, {"owner": {"reputation": 1, "user_id": 7296033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b05b12760c272dac65adca8486d2261?s=128&d=identicon&r=PG&f=1", "display_name": "gigibigi", "link": "https://stackoverflow.com/users/7296033/gigibigi"}, "edited": false, "score": 0, "creation_date": 1484753973, "post_id": 41722211, "comment_id": 70641682, "body": "Existing rows are not updated, the only update is adding new rows that I am trying to access and perform actions with them."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1484791918, "last_edit_date": 1484791918, "creation_date": 1484756722, "answer_id": 41724481, "question_id": 41722211, "link": "https://stackoverflow.com/questions/41722211/how-to-display-a-row-of-a-file-which-is-continuously-updating-on-a-server-in-per/41724481#41724481", "title": "How to display a row of a file which is continuously updating on a server in Perl?", "body": "<p>Don't try to reinvent the wheel; use <a href=\"http://search.cpan.org/perldoc?File::Tail\" rel=\"nofollow noreferrer\">File::Tail</a>.</p>\n\n<pre><code>use File::Tail qw( );\n\nmy $tail = File::Tail-&gt;new('log_file.txt');\nwhile (defined( my $line = $file-&gt;read() )) {\n  print($line);\n}\n</code></pre>\n\n<p>Unlike yours, its won't return partial lines, it detects log file rotations, etc.</p>\n"}], "owner": {"reputation": 1, "user_id": 7296033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b05b12760c272dac65adca8486d2261?s=128&d=identicon&r=PG&f=1", "display_name": "gigibigi", "link": "https://stackoverflow.com/users/7296033/gigibigi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1484791918, "creation_date": 1484750307, "last_edit_date": 1484751817, "question_id": 41722211, "link": "https://stackoverflow.com/questions/41722211/how-to-display-a-row-of-a-file-which-is-continuously-updating-on-a-server-in-per", "title": "How to display a row of a file which is continuously updating on a server in Perl?", "body": "<p>I am trying to display the updates of a file which is continuously updating. This file is accessed from a server, every time there is an update in the file it has to be printed. This is the code I have managed to build until now:</p>\n\n<pre><code>open(FH,'&lt;','log_file.txt') or die $!;  # open file\nfor (;;) {\n    while (my $row = &lt;FH&gt;) {\n    chomp $row;\n    print \"$row\\n\";\n    }\n    sleep 1;\n    seek FH, 0, 1;\n}\n</code></pre>\n\n<p>The code reads the file, prints all existing rows and stays in the loop. Unfortunately, the code does not print the newly added rows. Any help on my issue?</p>\n"}, {"tags": ["perl", "template-toolkit"], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 891294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76e542df8b067faf365124e8919cdbc6?s=128&d=identicon&r=PG", "display_name": "hoppfrosch", "link": "https://stackoverflow.com/users/891294/hoppfrosch"}, "edited": false, "score": 1, "creation_date": 1484749795, "post_id": 41719554, "comment_id": 70638547, "body": "Thanks - you&#39;re my hero of the day! Should have read the docu more carefully ;-)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 311, "user_id": 891294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76e542df8b067faf365124e8919cdbc6?s=128&d=identicon&r=PG", "display_name": "hoppfrosch", "link": "https://stackoverflow.com/users/891294/hoppfrosch"}, "edited": false, "score": 2, "creation_date": 1484754359, "post_id": 41719554, "comment_id": 70641947, "body": "I can recommend a <a href=\"http://shop.oreilly.com/product/9780596004767.do\" rel=\"nofollow noreferrer\">good book</a> :-)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 8, "last_activity_date": 1484742806, "creation_date": 1484742806, "answer_id": 41719554, "question_id": 41718657, "link": "https://stackoverflow.com/questions/41718657/how-to-include-templatetoolkit-macros/41719554#41719554", "title": "How to include Template::Toolkit- Macros?", "body": "<p>Using <code>INCLUDE</code>, all variable definitions (and a macro is really just a fancy variable) are localised to the included file. Which means the macros definitions aren't visible outside of the included file.</p>\n\n<p>To make the macros visible in the calling file, you need <code>PROCESS</code> instead of <code>INCLUDE</code>. As <a href=\"https://metacpan.org/pod/distribution/Template-Toolkit/lib/Template/Manual/Directives.pod#PROCESS\" rel=\"noreferrer\">the documentation says</a>:</p>\n\n<blockquote>\n  <p>The <code>PROCESS</code> directive is similar to <code>INCLUDE</code> but does not perform any\n  localisation of variables before processing the template. Any changes\n  made to variables within the included template will be visible in the\n  including template.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 12427, "user_id": 498634, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/580e34a7c6e156d847e8ee768388daa4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel B&#246;hmer", "link": "https://stackoverflow.com/users/498634/daniel-b%c3%b6hmer"}, "is_accepted": false, "score": 1, "last_activity_date": 1504617265, "creation_date": 1504617265, "answer_id": 46055933, "question_id": 41718657, "link": "https://stackoverflow.com/questions/41718657/how-to-include-templatetoolkit-macros/46055933#46055933", "title": "How to include Template::Toolkit- Macros?", "body": "<p>If you are using more than 1 template file with macros shared among them, try this:</p>\n\n<p>Easier and cleaner than including <code>[% PROCESS 'macros.tt' %]</code> in every template is to make TT process your macros file before every call with <a href=\"http://template-toolkit.org/docs/modules/Template.html#section_PRE_PROCESS_POST_PROCESS\" rel=\"nofollow noreferrer\"><code>PRE_PROCESS</code></a>.</p>\n\n<pre><code>use Template;\n\nmy $tt = Template-&gt;new({\n    INCLUDE_PATH =&gt; '/usr/local/templates',\n    PRE_PROCESS  =&gt; 'macros.tt',\n})\n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 891294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76e542df8b067faf365124e8919cdbc6?s=128&d=identicon&r=PG", "display_name": "hoppfrosch", "link": "https://stackoverflow.com/users/891294/hoppfrosch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "accepted_answer_id": 41719554, "answer_count": 2, "score": 4, "last_activity_date": 1504617265, "creation_date": 1484740099, "question_id": 41718657, "link": "https://stackoverflow.com/questions/41718657/how-to-include-templatetoolkit-macros", "title": "How to include Template::Toolkit- Macros?", "body": "<p>This question is about the usage of macros from Template::Toolkit (Perl)</p>\n\n<p>I`m failing to write macros and putting them into a separate file to use them within several other template files.</p>\n\n<p>My macros are located in a separate template file named macros.tt:</p>\n\n<pre><code>----- file macros.tt ------\n[% MACRO decorateStatus(status) BLOCK -%]\n    [% ico = 'status_unknown' -%]\n    [% IF status == \"New\" -%][% ico = 'status_waiting' -%]\n    [% ELSIF status == \"Working\" -%][% ico = 'status_work' -%]\n    [% ELSIF status == \"Deleted\" -%][% ico = 'status_deleted' -%]\n    [% END -%]\n    [% status %] &lt;img src=\"[% c.uri_for('/images/ico/' _ ico _ '.png') %]\" text=\"[% status %]\"&gt;\n[% END-%]\n</code></pre>\n\n<p>Now I\u2019m trying to use this macro within another template \u2013 but this fails as the macro is not expanded:</p>\n\n<pre><code>----- file demo.tt -------\n[% INCLUDE macros.tt %]\n\u2026.\n[% status = \u2018New\u2019 %]\n&lt;td&gt;[% decorateStatus(status) %]&lt;/td&gt;\n\u2026.\n</code></pre>\n\n<p>Putting the macro directly in the file where I want to use it, everything works as expected.  </p>\n\n<p>What\u2019s the \u201ccorrect\u201d way to include macros from a different file?</p>\n"}, {"tags": ["perl", "ascii", "utf"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1484737968, "post_id": 41716505, "comment_id": 70630382, "body": "Note that you are telling Perl that your sub <code>BackSlashed</code> has no arguments. The parenthesis <code>()</code> in <code>sub BackSlashed()</code> are a prototype definition that say it shouldn&#39;t have args. Since that&#39;s not what you want, remove the parens."}], "answers": [{"comments": [{"owner": {"reputation": 1211, "user_id": 948212, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f1ba5d38efed0cd3a8281edebb37db2b?s=128&d=identicon&r=PG", "display_name": "Anton Shevtsov", "link": "https://stackoverflow.com/users/948212/anton-shevtsov"}, "edited": false, "score": 0, "creation_date": 1484736790, "post_id": 41716721, "comment_id": 70629587, "body": "<code>my $str=&#39;\u041d\u041e\u0412\u0410\u042f \u041f\u0410\u041f\u041a\u0410&#39;; $str =~ s&#47;([^a-zA-Z0-9])&#47;sprintf &quot;\\\\%03o&quot;, ord($1)&#47;eg; print $str; #output is: \\2035\\2036\\2022\\2020\\2057\\040\\2037\\2020\\2037\\2032\\2020</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1211, "user_id": 948212, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f1ba5d38efed0cd3a8281edebb37db2b?s=128&d=identicon&r=PG", "display_name": "Anton Shevtsov", "link": "https://stackoverflow.com/users/948212/anton-shevtsov"}, "edited": false, "score": 0, "creation_date": 1484737328, "post_id": 41716721, "comment_id": 70629954, "body": "@AntonShevtsov do you have <code>use utf8</code>? If I remove that from my code I get your expected output. With it, I get the four-digit numbers."}, {"owner": {"reputation": 1211, "user_id": 948212, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f1ba5d38efed0cd3a8281edebb37db2b?s=128&d=identicon&r=PG", "display_name": "Anton Shevtsov", "link": "https://stackoverflow.com/users/948212/anton-shevtsov"}, "edited": false, "score": 0, "creation_date": 1484737351, "post_id": 41716721, "comment_id": 70629967, "body": "All is UTF-8, Russian. I commented &#39;use utf8&#39; and script work fine. But i need &#39;use utf8&#39; for my source.. ("}, {"owner": {"reputation": 1211, "user_id": 948212, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f1ba5d38efed0cd3a8281edebb37db2b?s=128&d=identicon&r=PG", "display_name": "Anton Shevtsov", "link": "https://stackoverflow.com/users/948212/anton-shevtsov"}, "edited": false, "score": 1, "creation_date": 1484737690, "post_id": 41716721, "comment_id": 70630196, "body": "i made it <code>use utf8;  my $str=&#39;\u041d\u041e\u0412\u0410\u042f \u041f\u0410\u041f\u041a\u0410&#39;; utf8::encode($str); $str =~ s&#47;([^a-zA-Z0-9])&#47;sprintf &quot;\\\\%o&quot;, ord($1)&#47;eg; print $str;</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1211, "user_id": 948212, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f1ba5d38efed0cd3a8281edebb37db2b?s=128&d=identicon&r=PG", "display_name": "Anton Shevtsov", "link": "https://stackoverflow.com/users/948212/anton-shevtsov"}, "edited": false, "score": 0, "creation_date": 1484737693, "post_id": 41716721, "comment_id": 70630200, "body": "@Anton I&#39;m updating the answer. With exactly the same you did. I got it at the same time :)"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1484741675, "post_id": 41716721, "comment_id": 70632835, "body": "The code points are not so high (don&#39;t forget that values are in octal). For example <code>\\2035</code> gives <code>41D</code> in hexadecimal (that is the code point for <code>U+041D&#47;\u041d&#47;CYRILLIC CAPITAL LETTER EN</code>)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1484757480, "post_id": 41716721, "comment_id": 70644106, "body": "ASCII has 128 characters. <code>[^\\P{ASCII}\\P{Print}]</code> probably matches only &quot;the 95 ASCII characters&quot; mentioned by the OP. But that doesn&#39;t escape <code>\\ </code> as needed, so <code>[^\\P{ASCII}\\P{Print}\\\\]</code> would be better. They might also want spaces to be escaped, which can be done as follows: <code>[^\\P{ASCII}\\P{Print}\\\\ ]</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484757706, "post_id": 41716721, "comment_id": 70644270, "body": "You&#39;re doing things in the wrong order, but it works anyway, and it&#39;s faster to do it in the order you are doing it. The same could not necessarily be said if an encoding other UTF-8 was used. With another encoding, you might have to do it in the proper order: <code>s&#47;...&#47; join &#39;&#39;, map sprintf(&quot;\\\\%03o&quot;, $_), split &#47;&#47;, encode($enc, $1)&#47;eg</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484757809, "post_id": 41716721, "comment_id": 70644334, "body": "@ikegami I don&#39;t understand the last part. Can you clarify that please? I think you have a typo in there somewhere that mixes things up."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484757873, "post_id": 41716721, "comment_id": 70644381, "body": "Reworded the comment for you."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484758011, "post_id": 41716721, "comment_id": 70644496, "body": "@ikegami But then why is it the wrong way around? Besides being slower, what would matching it first do right?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484758049, "post_id": 41716721, "comment_id": 70644521, "body": "Because encoding could produce bytes in 00..7F, so you could end up not escaping bytes that should be escaped. Take for example UTF-16le and the input is <code>&quot;\\x{4123}&quot;</code>. If you pre-encode, you&#39;d up with <code>\\043A</code> instead of <code>\\043\\101</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484758252, "post_id": 41716721, "comment_id": 70644668, "body": "@ikegami ah, now I get it. So the encode should be done in the substitute, or the whole thing should be broken up into a loop?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484758322, "post_id": 41716721, "comment_id": 70644742, "body": "Yes, but you don&#39;t need to with UTF-8. It&#39;s more efficient to do it the way you did."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484758498, "post_id": 41716721, "comment_id": 70644861, "body": "No. You can&#39;t use <code>return</code> that way, and your <code>encode</code> is misplaced. Remember, we want to escape the encoded bytes. See my earlier comment for actual code."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484759348, "post_id": 41716721, "comment_id": 70645432, "body": "I think your code is missing the <code>ord</code> @ikegami. Do you want to edit that into the answer, or maybe write up your own one?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1484767069, "post_id": 41716721, "comment_id": 70649751, "body": "Yes, missing <code>ord</code>. And no, it was just an offhand comment: More care needed for encodings other than UTF-8."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1484737901, "last_edit_date": 1495542281, "creation_date": 1484734769, "answer_id": 41716721, "question_id": 41716505, "link": "https://stackoverflow.com/questions/41716505/perl-print-ascii-but-backslashed-other/41716721#41716721", "title": "Perl | Print ASCII, but backslashed other", "body": "<p>You can use a regular expression substitution with an evaled substitution part. In there, need to <a href=\"http://perldoc.perl.org/functions/ord.html\" rel=\"nofollow noreferrer\">convert each character to its numeric value</a> first, and then <a href=\"http://perldoc.perl.org/functions/sprintf.html\" rel=\"nofollow noreferrer\">output it in octal notation</a>. There's a good explanation for it <a href=\"https://stackoverflow.com/a/18091433/1331451\">in this answer</a>. Attach an escaped backslash <code>\\</code> to get it to show up in the output.</p>\n\n<pre><code>$str =~ s/([^a-zA-Z0-9])/sprintf \"\\\\%03o\", ord($1)/eg;\n</code></pre>\n\n<p>I limited the capture group to basic ASCII letters and numbers. If you want something else, just change the character group.</p>\n\n<hr>\n\n<p>Since your sample output has octets but you said your code has the <code>use utf8</code> pragma, you need to convert Perl's representation of the string to the corresponding octet sequence before you run the substitution.</p>\n\n<pre><code>use utf8;\nmy $str = '\u041d\u041e\u0412\u0410\u042f \u041f\u0410\u041f\u041a\u0410';\nprint foo($str);\n\nsub foo { # note that there are no () here!\n    my $str = shift;\n    utf8::encode($str);\n    $str =~ s/([^a-zA-Z0-9])/sprintf \"\\\\%03o\", ord($1)/eg;\n    return $str;\n}\n</code></pre>\n"}], "owner": {"reputation": 1211, "user_id": 948212, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f1ba5d38efed0cd3a8281edebb37db2b?s=128&d=identicon&r=PG", "display_name": "Anton Shevtsov", "link": "https://stackoverflow.com/users/948212/anton-shevtsov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "accepted_answer_id": 41716721, "answer_count": 1, "score": 3, "last_activity_date": 1484737901, "creation_date": 1484734110, "question_id": 41716505, "link": "https://stackoverflow.com/questions/41716505/perl-print-ascii-but-backslashed-other", "title": "Perl | Print ASCII, but backslashed other", "body": "<p>I want print 95 ASCII symblols unchanged, but for others to print its codes.\nHow make it in pure perl? 'unpack' function? Any module?</p>\n\n<pre><code>print BackSlashed('test folder'); # expected test\\040folder\n\nprint BackSlashed('test \u0442\u0435\u0441\u0442\u043e\u0432\u0430\u044f folder'); \n# expected test\\040\\321\\202\\320\\265\\321\\201\\321\\202\\320\\276\\320\\262\\320\\260\\321\\217\\040folder\n\nprint BackSlashed('\u041d\u041e\u0412\u0410\u042f \u041f\u0410\u041f\u041a\u0410');\n# expected \\320\\235\\320\\236\\320\\222\\320\\220\\320\\257\\040\\320\\237\\320\\220\\320\\237\\320\\232\\320\\220\n\nsub BackSlashed() {\nmy $str = shift;\n.. backslashed code here...\nreturn $str\n}\n</code></pre>\n"}, {"tags": ["perl", "file", "awk", "grep"], "comments": [{"owner": {"reputation": 1081, "user_id": 1835621, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f0003b0ad475c4569fb5152ee3f6b943?s=128&d=identicon&r=PG", "display_name": "Yaron", "link": "https://stackoverflow.com/users/1835621/yaron"}, "edited": false, "score": 0, "creation_date": 1484723184, "post_id": 41713207, "comment_id": 70621365, "body": "Perl supports regex natively, I don&#39;t think using external tools will give you the best results."}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1484723335, "post_id": 41713207, "comment_id": 70621432, "body": "And what happens when you run your code?  Please visit the <a href=\"https://stackoverflow.com/help\">help center</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> to learn how to use this site effectively."}, {"owner": {"reputation": 95, "user_id": 7225696, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88e1f7762ddba8483ef31843a1f92dfc?s=128&d=identicon&r=PG&f=1", "display_name": "Vinodini Natrajan", "link": "https://stackoverflow.com/users/7225696/vinodini-natrajan"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1484723405, "post_id": 41713207, "comment_id": 70621459, "body": "@JimGarrison edited the question"}, {"owner": {"reputation": 3089, "user_id": 6165935, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5SjwIcK5M8I/AAAAAAAAAAI/AAAAAAAAAFQ/xyQQHb_jXoQ/photo.jpg?sz=128", "display_name": "Michael Vehrs", "link": "https://stackoverflow.com/users/6165935/michael-vehrs"}, "edited": false, "score": 10, "creation_date": 1484724153, "post_id": 41713207, "comment_id": 70621799, "body": "Just as an aside, the command line you are starting with is awful. You virtually never need to use <code>grep</code> and <code>awk</code> in the same pipeline, not to mention <code>cat</code>. That should simply read: <code>awk &#39;&#47;specific_word&#47; {print $2}&#39; temp_file</code>."}, {"owner": {"reputation": 95, "user_id": 7225696, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88e1f7762ddba8483ef31843a1f92dfc?s=128&d=identicon&r=PG&f=1", "display_name": "Vinodini Natrajan", "link": "https://stackoverflow.com/users/7225696/vinodini-natrajan"}, "reply_to_user": {"reputation": 3089, "user_id": 6165935, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5SjwIcK5M8I/AAAAAAAAAAI/AAAAAAAAAFQ/xyQQHb_jXoQ/photo.jpg?sz=128", "display_name": "Michael Vehrs", "link": "https://stackoverflow.com/users/6165935/michael-vehrs"}, "edited": false, "score": 0, "creation_date": 1484724312, "post_id": 41713207, "comment_id": 70621879, "body": "@MichaelVehrs yes it is.. but all I need is to do it in a perl way"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1484754706, "post_id": 41713207, "comment_id": 70642178, "body": "<a href=\"https://stackoverflow.com/posts/41713207/edit\">edit</a> your question to show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> including concise, testable sample input and expected output. See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 7225696, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88e1f7762ddba8483ef31843a1f92dfc?s=128&d=identicon&r=PG&f=1", "display_name": "Vinodini Natrajan", "link": "https://stackoverflow.com/users/7225696/vinodini-natrajan"}, "edited": false, "score": 0, "creation_date": 1484723428, "post_id": 41713288, "comment_id": 70621467, "body": "I need to use it in my script"}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "reply_to_user": {"reputation": 95, "user_id": 7225696, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88e1f7762ddba8483ef31843a1f92dfc?s=128&d=identicon&r=PG&f=1", "display_name": "Vinodini Natrajan", "link": "https://stackoverflow.com/users/7225696/vinodini-natrajan"}, "edited": false, "score": 0, "creation_date": 1484723654, "post_id": 41713288, "comment_id": 70621582, "body": "@VinodiniNatrajan you should figure it out on your own now."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 95, "user_id": 7225696, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88e1f7762ddba8483ef31843a1f92dfc?s=128&d=identicon&r=PG&f=1", "display_name": "Vinodini Natrajan", "link": "https://stackoverflow.com/users/7225696/vinodini-natrajan"}, "edited": false, "score": 0, "creation_date": 1484733030, "post_id": 41713288, "comment_id": 70627050, "body": "@VinodiniNatrajan The <code>use v5.10;</code> or <code>use feature &#39;say&#39;;</code> at the top of the script gives you  the ability to do <code>say &quot;hello&quot;</code>, instead of <code>print &quot;hello\\n&quot;</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1484740007, "post_id": 41713288, "comment_id": 70631707, "body": "I think you can skip the use of <code>@F</code> entirely by just <code>print +(split)[1] if m&#47;$specific_word&#47;</code>. It might be worth <code>quotemeta</code> or <code>\\Q\\E</code> depending on the source of <code>$specific_word</code> too, as adding a broken regex from user input can lead to all sorts of wierdness."}], "tags": [], "owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "is_accepted": false, "score": 3, "last_activity_date": 1484723670, "last_edit_date": 1484723670, "creation_date": 1484723332, "answer_id": 41713288, "question_id": 41713207, "link": "https://stackoverflow.com/questions/41713207/performing-grep-awk-in-perl/41713288#41713288", "title": "Performing grep, awk in perl", "body": "<pre><code>perl -lane \"print \\$F[1] if /$specific_word/\" $temp_file\n</code></pre>\n\n<p>If you really want to be verbose (make sure you <code>use 5.12.0</code> (or similar) to get <code>say</code>:</p>\n\n<pre><code>open my $f, '&lt;', $temp_file;\n\nwhile(&lt;$f&gt;) {\n        my @F = split;\n        say $F[1] if /$specific_word/;\n}\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 7225696, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88e1f7762ddba8483ef31843a1f92dfc?s=128&d=identicon&r=PG&f=1", "display_name": "Vinodini Natrajan", "link": "https://stackoverflow.com/users/7225696/vinodini-natrajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1484732240, "creation_date": 1484722957, "last_edit_date": 1484725604, "question_id": 41713207, "link": "https://stackoverflow.com/questions/41713207/performing-grep-awk-in-perl", "title": "Performing grep, awk in perl", "body": "<p>I need to perform the following task in perl script</p>\n\n<p><code>'cat $temp_file | grep $specific_word | awk '{ print \\$2 }'</code></p>\n\n<pre><code>open(F,$temp_file);\n@list=&lt;F&gt;;close F;\n$specific_word =\"String I want\";\n@f=grep /$specific_word/,@list;\nprint $f[2];\n</code></pre>\n\n<p>I am doing the above. Can someone help me with this. Is there any alternate way to do this?</p>\n\n<p><strong>Note: I need to print the second word of each grepped line. By the above code, I am getting only the second line.</strong></p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1484690636, "post_id": 41707661, "comment_id": 70611205, "body": "You should explain the differences between what this does and what Perl does (<code>if !ref($dir)</code>)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1484690731, "post_id": 41707661, "comment_id": 70611247, "body": "Also, why don&#39;t you create a CPAN module so it can be maintained in one place rather than in everyone&#39;s code base.  [ Seems like simbabque beat me to it :) ]"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1484690943, "post_id": 41707661, "comment_id": 70611355, "body": "Looks reasonable. References in <code>@INC</code> only get there if you put them there, so I&#39;m not sure that that part is completely necessary, but I guess it doesn&#39;t hurt anything. I&#39;d also suggest <code>-e &amp;&amp; ! -d</code> as the file test, which is what Path::Tiny does."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1484691009, "post_id": 41707661, "comment_id": 70611386, "body": "Thanks for the comments I will look into them!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484691060, "post_id": 41707661, "comment_id": 70611406, "body": "It really doesn&#39;t matter what Path::Tiny does. It&#39;s what Perl <a href=\"https://perl5.git.perl.org/perl.git/blob/443bd156a6baaf7a8fe6b6b05fcf6c4178140ed2:/pp_ctl.c#l3587\" rel=\"nofollow noreferrer\">does</a> that matters."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1484691617, "post_id": 41707661, "comment_id": 70611627, "body": "What Perl does is <code>st_rc = PerlLIO_stat(p, &amp;st); if (st_rc &lt; 0 || S_ISDIR(st.st_mode) || S_ISBLK(st.st_mode)) { return NULL; }</code> (<code>stat</code> + <code>-d</code> + <code>-b</code>) and then tries to <code>open</code> it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1484691735, "post_id": 41707661, "comment_id": 70611673, "body": "Also, <code>require</code> doesn&#39;t always search <code>@INC</code>. I believe neither <code>require &quot;&#47;foo&#47;bar.pm&quot;</code> nor <code>require &quot;.&#47;foo&#47;bar.pm&quot;</code> will use <code>@INC</code> (but <code>require &quot;foo&#47;bar.pm&quot;</code> will)."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484694821, "post_id": 41707661, "comment_id": 70612857, "body": "I&#39;m pretty sure too that <code>require &quot;.&#47;foo&#47;bar.pm&quot;</code> ignores <code>@INC</code>. On top of that, even if there is a <code>foo&#47;bar.pm</code> in the working directory, it will load it again, because it uses its argument as the key for <code>%INC</code>. That way, you can <code>require</code> the same thing twice (but not more). Essentially a poor man&#39;s <code>do</code>. Or a good way to shoot yourself in the foot."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 7, "last_activity_date": 1484689910, "creation_date": 1484689910, "answer_id": 41707661, "question_id": 41707660, "link": "https://stackoverflow.com/questions/41707660/determine-absolute-path-of-module-without-using-require/41707661#41707661", "title": "Determine absolute path of module without using require", "body": "<p>I am posting this solution to my own question since I could not find a CPAN module that did this.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse File::Spec;\n\nmy $mod_name = 'My::Module';\nmy $abs_path = mod_name_to_abs_path( $mod_name );\n\nsub mod_name_to_abs_path {\n    my ( $mod_name ) = @_;\n\n    my $rel_fn = $mod_name =~ s{::}{/}gr;\n    $rel_fn .= '.pm';\n    my $abs_path;\n    for my $dir (@INC) {\n        if ( !ref( $dir ) ) {\n            my $temp = File::Spec-&gt;catfile( $dir, $rel_fn );\n            if ( -e $temp  ) {\n                if ( ! ( -d _ || -b _ ) ) {\n                    $abs_path = $temp;\n                    last;\n                }\n            }\n        }\n    }\n    return $abs_path;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1484694660, "post_id": 41708532, "comment_id": 70612806, "body": "Sounds like it does."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 6, "last_activity_date": 1484751315, "last_edit_date": 1484751315, "creation_date": 1484693815, "answer_id": 41708532, "question_id": 41707660, "link": "https://stackoverflow.com/questions/41707660/determine-absolute-path-of-module-without-using-require/41708532#41708532", "title": "Determine absolute path of module without using require", "body": "<p>The <a href=\"https://metacpan.org/pod/Module::Util\" rel=\"nofollow noreferrer\"><code>Module::Util</code></a> module provides the <code>find_installed</code> function which does what I think you need.</p>\n\n<p>There is also the object-oriented <a href=\"https://metacpan.org/pod/Module::Info\" rel=\"nofollow noreferrer\"><code>Module::Info</code></a> and <a href=\"https://metacpan.org/pod/Module::Data\" rel=\"nofollow noreferrer\"><code>Module::Data</code></a> modules which will do something superficially similar</p>\n\n<p>This program shows the use of all three</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse Module::Util 'find_installed';\nuse Module::Info ();\nuse Module::Data ();\n\nsay find_installed('Module::Util');\n\nsay Module::Info-&gt;new_from_module('Module::Info')-&gt;file;\n\nsay Module::Data-&gt;new('Module::Data')-&gt;path;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>C:\\Strawberry\\perl\\site\\lib\\Module\\Util.pm\nC:\\Strawberry\\perl\\site\\lib\\Module\\Info.pm\nC:\\Strawberry\\perl\\site\\lib\\Module\\Data.pm\n</code></pre>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 41708532, "answer_count": 2, "score": 3, "last_activity_date": 1484751315, "creation_date": 1484689910, "question_id": 41707660, "link": "https://stackoverflow.com/questions/41707660/determine-absolute-path-of-module-without-using-require", "title": "Determine absolute path of module without using require", "body": "<p>In some cases you need to determine the absolute path name of a Perl\nmodule, but you do not need to load the Perl module:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $mod_name = 'My::Module';\nmy $abs_path = mod_name_to_abs_path( $mod_name );\n\nsub mod_name_to_abs_path {\n    my ( $mod_name ) = @_;\n\n    my $rel_fn = $mod_name =~ s{::}{/}gr;\n    $rel_fn .= '.pm';\n    require $rel_fn;\n\n    return $INC{$rel_fn};\n}\n</code></pre>\n\n<p>The above code loads the module (with <code>require</code>). </p>\n\n<p>How can I determine the absolute path name of a module without using require? </p>\n"}, {"tags": ["xml", "perl", "xslt", "xslt-1.0"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484681464, "post_id": 41705409, "comment_id": 70606460, "body": "That looks right to me, or are you asking how to convert it programmatically?"}, {"owner": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484681672, "post_id": 41705409, "comment_id": 70606558, "body": "Yes, to write a Perl or xslt script to convert it automatically."}], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "edited": false, "score": 0, "creation_date": 1484682264, "post_id": 41705563, "comment_id": 70606871, "body": "Thanks @ikegami, your script works for fixed name and type, I am pretty sure that with some modification it will work with dynamic elements and recursively! To be verified!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "edited": false, "score": 0, "creation_date": 1484683593, "post_id": 41705563, "comment_id": 70607616, "body": "Update to handle all complex types."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1484686969, "last_edit_date": 1484686969, "creation_date": 1484681951, "answer_id": 41705563, "question_id": 41705409, "link": "https://stackoverflow.com/questions/41705409/perl-or-xslt-convert-xml-schema-named-type-to-anonymous-type/41705563#41705563", "title": "Perl or xslt: convert XML schema named type to anonymous type", "body": "<p>It's just an XML file, so use your favorite XML parser.</p>\n\n<pre><code>use XML::LibXML               qw( );\nuse XML::LibXML::XPathContext qw( );\n\nsub resolve_qname {\n   my ($context_node, $qname) = @_;\n   my $local_part = $qname;\n   my $namespace = $local_part =~ s/^([^:]*)://\n       ? $context_node-&gt;lookupNamespaceURI($1) // $1 : '';\n   return \"{$namespace}$local_part\";\n}\n\nmy $in_qfn  = '...';\nmy $out_qfn = '...';\n\nmy $parser = XML::LibXML-&gt;new();\nmy $doc    = $parser-&gt;parse_file($in_qfn);\nmy $root   = $doc-&gt;documentElement();\n\nmy $xpc = XML::LibXML::XPathContext-&gt;new();\n$xpc-&gt;registerNs(xs =&gt; 'http://www.w3.org/2001/XMLSchema');\n\nmy %unsupported;\n\nmy %type_nodes_by_name;\nfor my $type_node ($xpc-&gt;findnodes('xs:complexType', $root)) {\n   my $type_name = $type_node-&gt;getAttribute('name')\n      or next;\n\n   $type_node-&gt;removeAttribute('name');\n   $type_nodes_by_name{resolve_qname($type_node, $type_name)} = $type_node;\n}\n\nfor my $element_node ($xpc-&gt;findnodes('//xs:element', $root)) {\n   my $type_name = $element_node-&gt;getAttribute('type')\n      or next;\n\n   my $type_node = $type_nodes_by_name{resolve_qname($element_node, $type_name)}\n      or next;\n\n   $element_node-&gt;removeAttribute('type');\n   $element_node-&gt;appendChild($type_node-&gt;cloneNode(1));\n}\n\nfor my $type_node (values(%type_nodes_by_name)) {\n   $type_node-&gt;parentNode()-&gt;removeChild($type_node);\n}\n\n$doc-&gt;toFile($out_qfn);\n</code></pre>\n\n<p>Input:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;xsd:schema xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"&gt;\n  &lt;xsd:element name=\"person\" type=\"Person\"/&gt;\n  &lt;xsd:element name=\"person2\" type=\"Person\"/&gt;\n  &lt;xsd:complexType name=\"Person\"&gt;\n    &lt;xsd:sequence&gt;\n      &lt;xsd:element name=\"first\" type=\"xsd:string\"/&gt;\n      &lt;xsd:element name=\"last\" type=\"xsd:string\"/&gt;\n    &lt;/xsd:sequence&gt;\n  &lt;/xsd:complexType&gt;\n&lt;/xsd:schema&gt;\n</code></pre>\n\n<p>Output (after prettification):</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;xsd:schema xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"&gt;\n  &lt;xsd:element name=\"person\"&gt;\n    &lt;xsd:complexType&gt;\n      &lt;xsd:sequence&gt;\n        &lt;xsd:element name=\"first\" type=\"xsd:string\"/&gt;\n        &lt;xsd:element name=\"last\" type=\"xsd:string\"/&gt;\n      &lt;/xsd:sequence&gt;\n    &lt;/xsd:complexType&gt;\n  &lt;/xsd:element&gt;\n  &lt;xsd:element name=\"person2\"&gt;\n    &lt;xsd:complexType&gt;\n      &lt;xsd:sequence&gt;\n        &lt;xsd:element name=\"first\" type=\"xsd:string\"/&gt;\n        &lt;xsd:element name=\"last\" type=\"xsd:string\"/&gt;\n      &lt;/xsd:sequence&gt;\n    &lt;/xsd:complexType&gt;\n  &lt;/xsd:element&gt;\n&lt;/xsd:schema&gt;\n</code></pre>\n\n<p><code>resolve_qname</code> isn't <a href=\"https://www.w3.org/TR/xmlschema11-1/#src-resolve\" rel=\"nofollow noreferrer\">accurate</a>, but probably good enough.</p>\n"}], "owner": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 41705563, "answer_count": 1, "score": 0, "last_activity_date": 1484686969, "creation_date": 1484681384, "last_edit_date": 1484682164, "question_id": 41705409, "link": "https://stackoverflow.com/questions/41705409/perl-or-xslt-convert-xml-schema-named-type-to-anonymous-type", "title": "Perl or xslt: convert XML schema named type to anonymous type", "body": "<p>I am trying to convert named complex type to anonymous type in XML Schema using Perl script or xslt.</p>\n\n<p>The element name and type could be anything dynamic.</p>\n\n<p>XML schema example:</p>\n\n<pre><code>&lt;xsd:element name=\"person\" type=\"Person\"/&gt;\n&lt;xsd:element name=\"person2\" type=\"Person\"/&gt;\n&lt;xsd:complexType name=\"Person\"&gt;\n  &lt;xsd:sequence&gt;\n    &lt;xsd:element name=\"first\" type=\"xsd:string\"/&gt;\n    &lt;xsd:element name=\"last\" type=\"xsd:string\"/&gt;\n  &lt;/xsd:sequence&gt;\n&lt;/xsd:complexType&gt;\n</code></pre>\n\n<p>Will be converted to:</p>\n\n<pre><code>&lt;xsd:element name=\"person\"&gt;\n  &lt;xsd:complexType&gt;\n    &lt;xsd:sequence&gt;\n      &lt;xsd:element name=\"first\" type=\"xsd:string\"/&gt;\n      &lt;xsd:element name=\"last\" type=\"xsd:string\"/&gt;\n    &lt;/xsd:sequence&gt;\n  &lt;/xsd:complexType&gt;\n&lt;/xsd:element&gt;\n&lt;xsd:element name=\"person2\"&gt;\n  &lt;xsd:complexType&gt;\n    &lt;xsd:sequence&gt;\n      &lt;xsd:element name=\"first\" type=\"xsd:string\"/&gt;\n      &lt;xsd:element name=\"last\" type=\"xsd:string\"/&gt;\n    &lt;/xsd:sequence&gt;\n  &lt;/xsd:complexType&gt;\n&lt;/xsd:element&gt;\n</code></pre>\n\n<p>Any help would be appreciated!</p>\n"}, {"tags": ["perl", "shell", "date", "sh", "ksh"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1484667973, "post_id": 41701315, "comment_id": 70598550, "body": "Can you install 3rd-party perl modules, or do you need to stick with built-in functionality? If the latter, exactly which version of Perl do you have? (Also, do you have a Python interpreter? If so, again, exactly which version?)"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 4, "creation_date": 1484668070, "post_id": 41701315, "comment_id": 70598613, "body": "...aside: <code>MM&#47;DD&#47;YYYY</code> is perhaps the worst widely-used date format (other than <code>MON&#47;DD&#47;YY</code>): ASCII sort treats it badly, and it&#39;s often ambiguous (one often can&#39;t tell if you&#39;re using <code>DD&#47;MM&#47;YYYY</code>, which is also popular). When you have control, <code>YYYY-MM-DD</code> is the Right Thing: It&#39;s much less ambiguous to human readers, it&#39;s RFC-compliant, and it sorts nicely."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1484668413, "post_id": 41701315, "comment_id": 70598881, "body": "&quot;<code>MM&#47;DD&#47;YYYY</code> is perhaps the worst widely-used date format&quot; Not to mention that it doesn&#39;t even make sense."}, {"owner": {"reputation": 87, "user_id": 1758616, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2228e3cc1ba5e9dede3cdd5dd1cf3f5a?s=128&d=identicon&r=PG", "display_name": "user1758616", "link": "https://stackoverflow.com/users/1758616/user1758616"}, "edited": false, "score": 0, "creation_date": 1484668460, "post_id": 41701315, "comment_id": 70598918, "body": "Hi, I do not have built in modules.  I found the below command to increment the system date &#39;perl -e &#39;use POSIX;print strftime &quot;%Y-%m-%d&quot;,localtime time+86400&#39;. I am looking for a perl command that accepts  a date and increments it."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1484668491, "post_id": 41701315, "comment_id": 70598940, "body": "If you don&#39;t have built-in modules, you don&#39;t have Perl.  Perl is the interpreter, and the modules that ship with the interpreter, and its POD (documentation)."}, {"owner": {"reputation": 87, "user_id": 1758616, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2228e3cc1ba5e9dede3cdd5dd1cf3f5a?s=128&d=identicon&r=PG", "display_name": "user1758616", "link": "https://stackoverflow.com/users/1758616/user1758616"}, "edited": false, "score": 0, "creation_date": 1484668567, "post_id": 41701315, "comment_id": 70598991, "body": "I get this error Can&#39;t locate DateTime.pm in @INC"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1484668610, "post_id": 41701315, "comment_id": 70599020, "body": "DateTime isn&#39;t a built-in module.  See the FAQ: <a href=\"http://perldoc.perl.org/perlfaq4.html#How-do-I-find-yesterday%27s-date%3f\" rel=\"nofollow noreferrer\">perldoc.perl.org/&hellip;</a>  ...the principles expressed there would apply to your question of &quot;how do I find tomorrow&#39;s date?&quot; Pay specific attention to Time::Piece and Time::Seconds, since they DO ship with Perl."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1484669636, "post_id": 41701315, "comment_id": 70599672, "body": "My question about whether you have a Python interpreter remains unanswered. (Someone else might give you a Perl answer; I could certainly give you a Python one, wrapped in a shell function if that makes it easier)."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484669732, "post_id": 41701315, "comment_id": 70599734, "body": "@ThisSuitIsBlackNot, ...I&#39;m not sure that it is, inasmuch as this one has a &quot;built-in modules only&quot; restriction, thus excluding DateTime, whereas the other question has no such restriction."}], "answers": [{"comments": [{"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1484671892, "post_id": 41702170, "comment_id": 70601210, "body": "Love the ISO 8601 link - how true!"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1484670915, "last_edit_date": 1484670915, "creation_date": 1484670438, "answer_id": 41702170, "question_id": 41701315, "link": "https://stackoverflow.com/questions/41701315/increment-date-in-shell-script-on-aix/41702170#41702170", "title": "Increment date in shell script on AIX", "body": "<p>Given a constraint of 'uses core':</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Time::Piece;\nuse Time::Seconds;\n\nmy $FORMAT = '%m/%d/%Y';\n\nmy $start = '01/22/2016';\nmy $end   = '01/31/2016';\n\nmy $start_t = Time::Piece-&gt;strptime( $start, $FORMAT );\nmy $end_t   = Time::Piece-&gt;strptime( $end,   $FORMAT );\n\nwhile ( $start_t &lt;= $end_t ) {\n   print $start_t -&gt;strftime($FORMAT), \"\\n\";\n   $start_t += ONE_DAY;\n}\n</code></pre>\n\n<p>Both <code>Time::Piece</code> and <code>Time::Seconds</code> are core as of perl 5.9.5. The latter is only needed for <code>ONE_DAY</code> - otherwise you can just add <code>60 * 60 * 24</code> instead. </p>\n\n<p>I'm sure you can figure out how to print the strings etc. yourself. </p>\n\n<p>(I'd also note - this is a horrible time format, and <a href=\"https://xkcd.com/1179/\" rel=\"nofollow noreferrer\">should be avoided</a>)</p>\n"}, {"tags": [], "owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1484692718, "creation_date": 1484692718, "answer_id": 41708300, "question_id": 41701315, "link": "https://stackoverflow.com/questions/41701315/increment-date-in-shell-script-on-aix/41708300#41708300", "title": "Increment date in shell script on AIX", "body": "<p>You can make a shellscript using awk like this:</p>\n\n<pre><code>str=\"some string\"\nstartd=\"12/25/2016\"\nendd=\"1/17/2017\"\n\nmaxloop=10\n\necho \"${maxloop}\" |\nawk -v string=\"${str}\" -v startdate=\"${startd}\" -v enddate=\"${endd}\" '{\n    split(startdate,A,\"[/]\");\n    T1=mktime(A[3] \" \" A[1] \" \" A[2] \" 0 0 0\");\n    split(enddate,B,\"[/]\");\n    T2=mktime(B[3] \" \" B[1] \" \" B[2] \" 23 59 59\");\n    linenr=1;\n    while (T1 &lt; T2) {\n       printf(\"%s,%s\\n\",string,\n          strftime(\"%m-%d-%Y\",T1));\n       T1+=3600*24;\n       if (linenr++ &gt; $1) break;\n    }\n}'\n</code></pre>\n\n<p>The linenr/maxloop is not adding something to the solution but will help against\nmistakes in the input values or maintenance of the script.</p>\n"}], "owner": {"reputation": 87, "user_id": 1758616, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2228e3cc1ba5e9dede3cdd5dd1cf3f5a?s=128&d=identicon&r=PG", "display_name": "user1758616", "link": "https://stackoverflow.com/users/1758616/user1758616"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 1, "closed_date": 1484732217, "answer_count": 2, "score": 0, "last_activity_date": 1484692718, "creation_date": 1484667796, "last_edit_date": 1484667943, "question_id": 41701315, "link": "https://stackoverflow.com/questions/41701315/increment-date-in-shell-script-on-aix", "closed_reason": "Duplicate", "title": "Increment date in shell script on AIX", "body": "<p>I have to create a shell script file that accepts a string, start date and end date and generates the output file in the below format.</p>\n\n<p>Note : Dates are in MM/DD/YYYY</p>\n\n<pre><code>string,start date\nstring,start date + 1\n...\nstring,end date\n</code></pre>\n\n<p>I am not able to increment the date. I tried using <code>date -d</code> option but it is not available on AIX.</p>\n\n<p>Could someone please help with a built in shell script command or perl command to increment the date ?. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1484671983, "post_id": 41700830, "comment_id": 70601268, "body": "The code fails here <code>if ( my $aref = first { index($sample_id, $_-&gt;[1]) != -1 } @matrix_key )</code> but $sample_id is correct and also dumper displays the correct  matrix_key file, yet it only works for the first folder  in /data/results. I have no clue why....Any suggestions would be greatly appreciated. Thanks"}, {"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 1, "creation_date": 1484672089, "post_id": 41700830, "comment_id": 70601352, "body": "It would really help if you pinned down exactly where it fails. Could be the glob, could be something else, but there&#39;s a bunch of code here that someone would have to go down the whole hundred lines to check it out. Please also reformat it so that it&#39;s properly indented and so on. The way it is now, everything is shown as a regex from /zip$/ down."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "reply_to_user": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1484673058, "post_id": 41700830, "comment_id": 70601927, "body": "I&#39;m not sure how to format the code correctly so it&#39;s not in red."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "reply_to_user": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1484673682, "post_id": 41700830, "comment_id": 70602301, "body": "Do you want me to shorten the code?  I thought it would help to see the whole script? Thanks"}, {"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 1, "creation_date": 1484677869, "post_id": 41700830, "comment_id": 70604614, "body": "Well, it helps to isolate the error. Whatever it is, it must be reduced to one or a couple of lines. In the process of isolation, you might end up finding the solution yourself..."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "reply_to_user": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1484678217, "post_id": 41700830, "comment_id": 70604802, "body": "@jjmerelo the error occurs here <code>if ( my $aref = first { index($sample_id, $_-&gt;[1]) != -1 } @matrix_key )</code> I&#39;ve printed both the sample_id and @matrix_key and the code should find a match but it fails for the second folder. Please help."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "reply_to_user": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1484686018, "post_id": 41700830, "comment_id": 70608825, "body": "I&#39;ve updated the code to isolate the error but still don&#39;t know what causes it. Thanks"}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1484687429, "post_id": 41700830, "comment_id": 70609602, "body": "I&#39;m fairly new at perl myself, but my impression is that <a href=\"http://www.perlmonks.org/?node_id=696592\" rel=\"nofollow noreferrer\">nested <code>sub</code>s are tricky</a>.  In your shoes, I would move <code>find_vcf</code> out to the top-level scope, and make  <code>@matrix_key</code> a <code>my @matrix_key;</code> before <code>find_vcf</code> and the <code>for</code> loop.  After all, if <code>$sample_id</code> is correct but the <code>first</code> fails, <code>@matrix_key</code> is the only other piece of data in the <code>first</code> to experiment with!"}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1484687991, "post_id": 41700830, "comment_id": 70609893, "body": "... And the same with <code>$location</code>.  Also, please rename one of <code>$matrix_key</code> and <code>@matrix_key</code> - don&#39;t use the same name for two different variables!"}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1484688352, "post_id": 41700830, "comment_id": 70610099, "body": "<code>move find_vcf out to the top-level scope</code> not sure what you mean by that? Also, I need to run find_vcf for each folder in /data/results directory so how can I take it out of the for loop?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1484689434, "post_id": 41700830, "comment_id": 70610629, "body": "I haven&#39;t looked closely, but any use of a named sub within a loop or another sub is a bug. Your issue can probably be fixed by changing to <code>my $find_vcf = sub { ... }; find({ wanted =&gt; $find_vcf, ...</code>."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1484689971, "post_id": 41700830, "comment_id": 70610911, "body": "<code>find({ wanted =&gt; find_vcf, no_chdir=&gt;1}, $location);</code> doesn&#39;t compile. Could you please give a more complete example? thanks"}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1484691219, "post_id": 41700830, "comment_id": 70611466, "body": "Put <code>sub find_vcf { ... }</code> before the <code>for</code> loop.  You only have to define the function once, and then can call it multiple times."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1484692003, "post_id": 41700830, "comment_id": 70611769, "body": "Now I get the following error: <code>Undefined subroutine &amp;main::find_vcf called at &#47;usr&#47;share&#47;perl5&#47;File&#47;Find.pm lin                                                                                                                                                             e 691.</code>"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1484699532, "post_id": 41700830, "comment_id": 70614329, "body": "you changed  sub find_vcf  to   my $find_vcg = sub { ... }; but the call is still { wanted =&gt; find_vcf }.  The function find_vcf is no longer declared."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1484702872, "post_id": 41700830, "comment_id": 70615231, "body": "@user3781528 I said <code>wanted =&gt; $find_vcf</code>, not <code>wanted =&gt; find_vcf</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1484716328, "post_id": 41700830, "comment_id": 70618728, "body": "@user3781528  I edited your question, to fix (some of) inconsistent and excessive indentation and blank lines.  If you don&#39;t like that please click on <code>edited [time]</code> above my username and you&#39;ll see the edit versions.  Click on <code>rollback</code> under the previous version to restore it to what it had been."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1486258889, "post_id": 41700830, "comment_id": 71268184, "body": "A reminder, see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>  If there are still problems with this question please let us know"}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1486345872, "post_id": 41700830, "comment_id": 71291133, "body": "Sorry, i spent several hours but couldnt get the reference to file: find: rule library to work, so i put it aside for a while. I need to find another way."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1487621050, "post_id": 41700830, "comment_id": 71857280, "body": "@user3781528  Sure -- but &quot;another way&quot; isn&#39;t a solution -- you need to find out why modules installed in a fairly standard location don&#39;t work.  (Then use some other way if you wish, by all means :)"}], "answers": [{"comments": [{"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1484751740, "post_id": 41707771, "comment_id": 70639987, "body": "Perl can&#39;t locate File::Find::Rule module inside the script, however when I type  <code>perldoc -l File::Find::Rule</code> in login directory it gives me a path: <code>&#47;usr&#47;local&#47;share&#47;perl5&#47;File&#47;Find&#47;Rule.pm</code> When do I need to install the module? I&#39;ve also tried sudo cpan File::Find::Rule."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1484766206, "post_id": 41707771, "comment_id": 70649235, "body": "@user3781528  That&#39;s strange -- the first thing indicates that the module is installed, and on the system path. (Is that where all modules are?) It may be something about how your environment is setup. Try to include that library path explicitely in the script, with <code>use lib ...</code>;  See <a href=\"http://perldoc.perl.org/lib.html\" rel=\"nofollow noreferrer\">lib</a> -- but also search SO posts, to solve it fully."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1484818894, "post_id": 41707771, "comment_id": 70670013, "body": "@user3781528  Why not try <code>perldoc -l</code> on some of the modules you <i>can</i> use in a script and check where they are.  Perhaps it&#39;s some other place and you need to add <code>&#47;usr&#47;local&#47;share&#47;perl5</code> to <code>@INC</code>. That would be a surprise to me but it would result in what you say while it is simple to try."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1484896739, "post_id": 41707771, "comment_id": 70707824, "body": "@user3781528 Your other question and our exchange there cleared this up -- you need: <code>use lib &#39;&#47;usr&#47;local&#47;share&#47;perl5&#39;;</code> at the top of the script. Then let me know whether more in this answer would be helpful."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1486284765, "last_edit_date": 1486284765, "creation_date": 1484690411, "answer_id": 41707771, "question_id": 41700830, "link": "https://stackoverflow.com/questions/41700830/perl-code-fails-to-match-recursively-nested-subs/41707771#41707771", "title": "Perl code fails to match recursively (nested subs)", "body": "<p>The posted code appears to be a bit complicated for the job.</p>\n\n<p>Here is one way to do what I understand from the question. It uses <a href=\"http://search.cpan.org/~rclamp/File-Find-Rule-0.32/lib/File/Find/Rule.pm\" rel=\"nofollow noreferrer\">File::Find::Rule</a></p>\n\n<pre><code>use warnings;\nuse strict;\nuse File::Find::Rule;\nuse List::Util 'any';\n\nmy $base_dir = '/data/results';    \nmy @dirs = File::Find::Rule-&gt;maxdepth(1)-&gt;directory-&gt;in($base_dir);\n\nforeach my $dir (@dirs) \n{\n    # Find all .vcx files anywhere in this dir or below\n    my @vcx_files = File::Find::Rule-&gt;file-&gt;name('*.vcx')-&gt;in($dir);\n\n    # Remove the path and .vcx extension\n    my @names = map { m|.*/(.+)\\.vcx$| } @vcx_files;\n\n    # Find all text files to search, right in this folder\n    my @files = File::Find::Rule -&gt;\n        maxdepth(1)-&gt;file-&gt;name('*.txt')-&gt;in($dir);\n\n    foreach my $file (@files)\n    {\n        open my $fh, '&lt;', $file  or die \"Can't open $file: $!\";\n        &lt;$fh&gt;;  # drop the header line\n        # Get the second field on each line (with SampleName)\n        my @samples = map { (split)[1] } &lt;$fh&gt;;\n\n        # ... search @samples for @names ...\n     }\n}\n</code></pre>\n\n<p>It is fine to use <code>glob</code> for non-recursive searches above, but given its treatment of spaces better use core <a href=\"http://perldoc.perl.org/File/Glob.html\" rel=\"nofollow noreferrer\">File::Glob</a> replacement for it.</p>\n\n<p>There are other ways to organize traversal of directories and file searches,  and there are many ways to compare two lists. Please clarify the overall objective so that I can add suitable code to search <code>.vcx</code> names vs. file content.</p>\n\n<p>Please add checks, fix variable names, implement your policies for when things fail, etc.</p>\n"}], "owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1486284765, "creation_date": 1484666483, "last_edit_date": 1486258811, "question_id": 41700830, "link": "https://stackoverflow.com/questions/41700830/perl-code-fails-to-match-recursively-nested-subs", "title": "Perl code fails to match recursively (nested subs)", "body": "<p>The code below loops through folders in \u201c/data/results\u201d directory and matches each .vcf file name, located in a sub-folder (two levels down) to the content of a matrix_key file.</p>\n\n<p>This seem to work only for the first folder.  I printed the content of each @matrix_key and it\u2019s correct. The code always fails to match for the second folder.  Here is where it fails to match:: <code>if ( my $aref = first { index($sample_id, $_-&gt;[1]) != -1 } @matrix_key ) {</code></p>\n\n<p>I\u2019ve tried to run one folder at a time and it work great.  I don\u2019t understand why it fails when I put multiple folders in <code>/data/results/</code>? Could someone please suggest how to correct this issue? Thank you.</p>\n\n<p>Here is an example of directory structure:</p>\n\n<pre>\n/data/results/\n    TestFolder1/\n        subfolder1/Variants/MD-14-11856_RNA_v2.vcf\n        subfoder2/Variants/SU-16-16117_RNA_v2.vcf\n        matrix.txt\n        matrixkey.txt\n\n    TestFolder2/\n        subfolder1/Variants/SU-15-2542_v2.vcf\n        subfolder2/Variants/SU-16-16117_v2.vcf\n        matrix.txt\n        matrixkey.txt\n</pre>\n\n<p>Example of <code>@matrix_key</code>:</p>\n\n<pre>\nBarcode        SampleName\nbarcode_003    SU-15-2542\nbarcode-005    MD-14-11856\nbarcode-002    SU-16-16117\n</pre>\n\n<p>The code:                                      </p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse File::Copy qw(move);\nuse List::Util 'first';\nuse File::Find;\nuse File::Spec;\nuse Data::Dumper;\n\nuse File::Basename;\nuse File::Spec::Functions 'splitdir';\n\nmy $current_directory = \"/data/results\";\nmy @dirs = grep { -d } glob '/data/results/*';\n\nif (grep -d, glob(\"$current_directory/*\")) {\n    print \"$current_directory has subfolder(s)\\n\";\n}\nelse {\n    print \"there are no folders\\n\";\n    die;\n}\n\nmy %files;\n\nmy @matrix_key = (); \n\nfor my $dir ( @dirs ) { \n\n    print \"the directory is $dir\\n\";\n    my $run_folder = (split '/', $dir)[3];\n    print \"the folder is $run_folder\\n\";\n\n    my $key2 = $run_folder;\n\n    # checks if barcode matrix and barcode summary files exist  \n\n    #shortens the folder names and unzips them.\n\n    #check if each sample is present in the matrix file for each folder.\n    my $location = \"/data/results/\".$run_folder;\n\n    my $matrix_key_file = \"/data/results/\".$run_folder.\"/matrixkey.txt\";\n\n    open my $key, '&lt;', $matrix_key_file or die $!; # key file\n\n    &lt;$key&gt;; # throw away header line in key file (first line)\n\n    @matrix_key = sort { length($b-&gt;[1]) &lt;=&gt; length($a-&gt;[1]) } \n                  map [ split ], &lt;$key&gt;;\n    close $key or die $!;\n\n    print Dumper(@matrix_key) . \"===\\n\\n\";\n\n    find({ wanted =&gt; \\&amp;find_vcf, no_chdir=&gt;1}, $location);\n    #find({ wanted =&gt; find_vcf, no_chdir=&gt;1}, $location);\n}\n\nmy $find_vcf = sub {\n    #sub find_vcf {\n    my $F = $File::Find::name;\n\n    if ($F =~ /vcf$/ ) {\n        print \"$F\\n\";\n\n        $F =~ m|([^/]+).vcf$| or die \"Can't extract Sample ID\";\n        my $sample_id = $1; print \"the short vcf name is: $sample_id\\n\";\n\n        if ( my $aref = first { index($sample_id, $_-&gt;[1]) != -1 } @matrix_key ) {\n            #the code fails to match sample_id to matrix_key\n            #even though it's printed out correctly\n\n            print \"$sample_id \\t MATCHES $aref-&gt;[1]\\n\";\n            print \"\\t$aref-&gt;[1]_$aref-&gt;[0]\\n\\n\";\n\n        } else {\n            # handle all other possible exceptions\n\n            #print \"folder name is $run_folder\\n\";\n\n            die(\"The VCF file doesn't match the Summary Barcode file: $sample_id\\n\");\n        }\n\n    }\n}\n</code></pre>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 1, "creation_date": 1484664673, "post_id": 41700070, "comment_id": 70596200, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/40049853/perl-array-and-hash\">Perl: array and hash</a>"}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1484664725, "post_id": 41700070, "comment_id": 70596232, "body": "... and besides that one (see <a href=\"http://stackoverflow.com/a/40050190/2877364\">this answer</a>), try <a href=\"https://stackoverflow.com/q/32771192/2877364\">this question</a>."}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 1, "creation_date": 1484664962, "post_id": 41700070, "comment_id": 70596394, "body": "Where did <code>sinfos</code> var come from?"}, {"owner": {"reputation": 63, "user_id": 4764142, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8ed4e031865bdef2683cd2a398d2866a?s=128&d=identicon&r=PG&f=1", "display_name": "Sanchita Ghai", "link": "https://stackoverflow.com/users/4764142/sanchita-ghai"}, "edited": false, "score": 0, "creation_date": 1484665111, "post_id": 41700070, "comment_id": 70596507, "body": "edited the code"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484665062, "post_id": 41700268, "comment_id": 70596468, "body": "We not only have the same kind of answer, we even used the same way to format it. :D"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484665465, "post_id": 41700268, "comment_id": 70596787, "body": "@simbabque If you want to combine the second part of my answer regarding pushing more key-value pairs to the array, I&#39;ll delete mine."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1484665582, "post_id": 41700268, "comment_id": 70596894, "body": "Nonono, you only need 5k more rep for your t-shirt. ;) We can all have a Stack Overflow t-shirt party at YAPC::EU in Amsterdam this summer."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 7, "last_activity_date": 1484665355, "last_edit_date": 1484665355, "creation_date": 1484664965, "answer_id": 41700268, "question_id": 41700070, "link": "https://stackoverflow.com/questions/41700070/perl-adding-more-elements-to-array-created-from-hash/41700268#41700268", "title": "Perl: Adding more elements to array created from hash", "body": "<p>First, there is no conversion.</p>\n\n<pre><code>my @siteinfos = ();\n</code></pre>\n\n<p>defines an array <code>@siteinfos</code> and sets to the empty list. Of course, you could have achieved the same result by using just</p>\n\n<pre><code>my @siteinfos;\n</code></pre>\n\n<p>Next, the statement</p>\n\n<pre><code>push( @siteinfos, \\%info );\n</code></pre>\n\n<p>pushes a reference to the hash <code>%info</code> to <code>@siteinfos</code> as the sole element of that array.</p>\n\n<p>Next, the loop</p>\n\n<pre><code>foreach my $sinfo (@siteinfos) { # assuming original is a typo\n</code></pre>\n\n<p>ends up aliasing <code>$sinfo</code> to that sole hash reference in <code>@siteinfos</code>. In the body of the loop, you access an element of the original hash via the reference you pushed to <code>@siteinfos</code>.</p>\n\n<p>Now, things would have been different if you had done:</p>\n\n<pre><code>push @siteinfos, %info;\n</code></pre>\n\n<p>That would have set <code>@siteinfos</code> to a list like the following (the order is non-deterministic):</p>\n\n<pre><code>$VAR1 = [\n          'ip',\n          undef,\n          'clip',\n          0,\n          'isLocal',\n          0,\n          'name',\n          undef,\n          'parent',\n          ''\n        ];\n</code></pre>\n\n<p>The <code>undef</code> are there because the match variables were empty when I ran the script. Now, if you want to push another key-value pair to this array, that's trivial:</p>\n\n<pre><code> push @siteinfos, $key, $value;\n</code></pre>\n\n<p>But of course, by assigning the hash to an array, you are losing the ability to simply look up values by key. In addition, you can keep pushing duplicate keys to an array, but if you assign it back to another hash:</p>\n\n<pre><code>my %otherinfo = @siteinfos;\n</code></pre>\n\n<p>then only the last version of an even-indexed element (key) and its corresponding odd-indexed element (value) will survive.</p>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 5, "last_activity_date": 1484665026, "creation_date": 1484665026, "answer_id": 41700293, "question_id": 41700070, "link": "https://stackoverflow.com/questions/41700070/perl-adding-more-elements-to-array-created-from-hash/41700293#41700293", "title": "Perl: Adding more elements to array created from hash", "body": "<p>You are <strong>not</strong> converting anything. You are making a new array named <code>@siteinfos</code>.</p>\n\n<pre><code>my @siteinfos = ();\n</code></pre>\n\n<p>Then you add one entry, which is a reference to the hash <code>%info</code>.</p>\n\n<pre><code>push( @siteinfos, \\%info );\n</code></pre>\n\n<p>The array now holds a reference to <code>%info</code>. That's <code>$siteinfo[0]</code>.</p>\n\n<p>In your loop you iterate all the elements in <code>@siteinfos</code>. The hashref now goes into <code>$sinfo</code>.</p>\n\n<p>If you want to add more keys and values to that hashref, just put them in.</p>\n\n<pre><code>foreach my $sinfo (@siteinfos) {\n    if ( $sinfo-&gt;{'name'} eq  $sitename)  {\n        $sinfo-&gt;{foo} = \"bar\"; # as simple as this\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 4764142, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8ed4e031865bdef2683cd2a398d2866a?s=128&d=identicon&r=PG&f=1", "display_name": "Sanchita Ghai", "link": "https://stackoverflow.com/users/4764142/sanchita-ghai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1484665355, "creation_date": 1484664422, "last_edit_date": 1484665051, "question_id": 41700070, "link": "https://stackoverflow.com/questions/41700070/perl-adding-more-elements-to-array-created-from-hash", "title": "Perl: Adding more elements to array created from hash", "body": "<p>I have a perl script where we are converting Hash into array-</p>\n\n<pre><code>my %info = (\n          'name'    =&gt; $1,\n          'ip'      =&gt; $2,\n          'parent'  =&gt; '',\n          'isLocal' =&gt; 0,\n          'clip'    =&gt; 0,\n          );\nmy @siteinfos = ();\npush( @siteinfos, \\%info );\n</code></pre>\n\n<p>Now I am able to accesss the array by-</p>\n\n<pre><code>foreach my $site(@siteinfos) {\nif ( $site-&gt;{'name'} eq  $sitename)  {\n .....\n}\n</code></pre>\n\n<p>First I am not sure how this conversion actually works.Secondly,Now I want to add more elements to this array in (key,pair) format.How can I do so?</p>\n"}, {"tags": ["perl", "windbg", "symbols"], "comments": [{"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1484654593, "post_id": 41695610, "comment_id": 70589020, "body": "&quot;But, when the same command runs through the website&quot;, you need to provide more details. What web server? Show a short reproducible CGI script that does not work."}, {"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1489762510, "post_id": 41695610, "comment_id": 72827458, "body": "Is there a newline in the _NT_SYMBOL_PATH? I&#39;d remove it. Try the <code>-y</code> command line option instead of setting an environment variable. Environment variables do often not become active immediately (google for the difference between <code>set</code> and <code>setx</code>)."}, {"owner": {"reputation": 116, "user_id": 7430004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c69259888b74d7b6cf498abf6380166d?s=128&d=identicon&r=PG&f=1", "display_name": "Rajneesh Prakash", "link": "https://stackoverflow.com/users/7430004/rajneesh-prakash"}, "edited": false, "score": 0, "creation_date": 1490607454, "post_id": 41695610, "comment_id": 73170018, "body": "Thanks guys. I figured it was a issue with symbols not being available on the located path. they were being purged after a periodic interval and hence caused this issue."}], "owner": {"reputation": 116, "user_id": 7430004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c69259888b74d7b6cf498abf6380166d?s=128&d=identicon&r=PG&f=1", "display_name": "Rajneesh Prakash", "link": "https://stackoverflow.com/users/7430004/rajneesh-prakash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489762364, "creation_date": 1484651454, "last_edit_date": 1489762364, "question_id": 41695610, "link": "https://stackoverflow.com/questions/41695610/same-cdb-command-was-producing-different-results-when-running-it-through-perl-an", "title": "same cdb command was producing different results when running it through Perl and Command Prompt", "body": "<p>We run CDB through a website on dump files to analyze the dumps. We run the following command</p>\n\n<pre><code>c:\\PROGRA~1\\DEBUGG~1\\cdb.exe -z    \"C:\\Progra~1\\BitNam~1\\apache2\\htdocs\\dumps\\dumpfile.dmp\" -lines -c \".logopen C:\\Progra~1\\BitNam~1\\apache2\\htdocs\\dumps\\temp\\ministack_manual.txt; !sym noisy;.reload;!analyze -v;.ecxr;!for_each_frame dv /t;.logclose;\n</code></pre>\n\n<p>When we run the CDB through command prompt, it could load the symbol files for Microsoft component and works file. But, when the same command runs through the website, CDB couldn't find the symbols for Microsoft components.\nThe code is written in Perl and below is the snippet of code that runs CDB.</p>\n\n<pre><code>sub setSymbolPath{\n        $ENV{'_NT_SYMBOL_PATH'} = 'SRV*c:\\\\websymbols*http://msdl.microsoft.com/download/symbols;\n                                    SRV*c:\\\\websymbols*http://ctxsym.citrix.com/symbols;                                 \n                                    ';\nsetSymbolPath();        \n## $dump_file is the full path to the dump file with a file name\n## $mini_stack is the full path to the output file with a file name\nopen (DUMPFILE, \"c:\\\\PROGRA~1\\\\DEBUGG~1\\\\cdb.exe  \n                -z \\\"$dump_file\\\" -lines -c \\\".logopen $mini_stack;!sym     noisy;.reload;!analyze -v;.ecxr;!for_each_frame dv /t;.logclose;q\\\" |\");\nclose DUMPFILE;  \n</code></pre>\n"}, {"tags": ["perl", "imap"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1484650972, "post_id": 41695313, "comment_id": 70586683, "body": "Please <a href=\"https://stackoverflow.com/posts/41695313/edit\">edit</a> and include that output. I believe it&#39;s not actually part of the message, but the <code>ref</code> of the message object returned by <code>$imap-&gt;get</code>. Those objects do have a string overload to convert them into text, but you&#39;re not using it. You&#39;d have to do <code>print &quot;$msg&quot;</code> to force it into a string."}, {"owner": {"reputation": 33, "user_id": 4834502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-R1WV26rVIkc/AAAAAAAAAAI/AAAAAAAAAF0/e7QhVMaiY7g/photo.jpg?sz=128", "display_name": "Amram Elbaz", "link": "https://stackoverflow.com/users/4834502/amram-elbaz"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484651071, "post_id": 41695313, "comment_id": 70586736, "body": "I did it already. But it didn&#39;t change anything.  I&#39;m editing to add the output."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484651336, "post_id": 41695313, "comment_id": 70586925, "body": "Looking at the doc I think you don&#39;t need to get the <code>list()</code>, you can also just basically iterate from <code>1</code> to <code>$nbmsg</code> in a loop. The number is not an ID or anything, it&#39;s just an index. So <code>foreach my $msgnum ( 1 .. $nbmsg ) { ... }</code> would work. That would also sort them directly. What you have now returns the keys of <code>%$index</code> in random order because hashes in Perl are not sorted, and the implementation details make the order random. Don&#39;t rely no the order of what&#39;s coming out there, it would be different on a different machine."}, {"owner": {"reputation": 33, "user_id": 4834502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-R1WV26rVIkc/AAAAAAAAAAI/AAAAAAAAAF0/e7QhVMaiY7g/photo.jpg?sz=128", "display_name": "Amram Elbaz", "link": "https://stackoverflow.com/users/4834502/amram-elbaz"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484651372, "post_id": 41695313, "comment_id": 70586950, "body": "edited, thanks for your help. :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484651383, "post_id": 41695313, "comment_id": 70586963, "body": "Ohh. That is perfectly fine output. It&#39;s base64 encoded content. You need to decode it. The <code>==</code> are filler characters. They are padding to make the string have the right length. I&#39;ll write up an answer."}, {"owner": {"reputation": 33, "user_id": 4834502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-R1WV26rVIkc/AAAAAAAAAAI/AAAAAAAAAF0/e7QhVMaiY7g/photo.jpg?sz=128", "display_name": "Amram Elbaz", "link": "https://stackoverflow.com/users/4834502/amram-elbaz"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484651742, "post_id": 41695313, "comment_id": 70587224, "body": "Oh ok!  It&#39;s explaining everything. X) Thanks a lot !"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484651801, "post_id": 41695313, "comment_id": 70587267, "body": "My answer explains steps to help you figure this out. I can&#39;t do it for you because I don&#39;t have an imap server to play with. If you need additonal help, just comment on my answer."}, {"owner": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "edited": false, "score": 1, "creation_date": 1484652676, "post_id": 41695313, "comment_id": 70587820, "body": "FWIW, a valid base64 chunk is 4x characters long excluding whitespace and a few other characters, and it&#39;s padded with = characters to make that true. In this case the original content is 3a+1 bytes, which encodes to 4b+2, so there has to be two padding bytes at the end."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4834502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-R1WV26rVIkc/AAAAAAAAAAI/AAAAAAAAAF0/e7QhVMaiY7g/photo.jpg?sz=128", "display_name": "Amram Elbaz", "link": "https://stackoverflow.com/users/4834502/amram-elbaz"}, "edited": false, "score": 0, "creation_date": 1484652409, "post_id": 41695710, "comment_id": 70587659, "body": "By the way, regarding this doc part :  &quot;Optionally, a part can be specified in order to fetch a specific portion of a message. This is the raw, encoded body of the message part. The part number is a set of zero or more part specifiers delimited by periods. Every message has at least one part. Specifying a part of &#39;1&#39; returns the raw, encoded body. This is only useful if you know the header information such as encoding.&quot;    the body could be $imap-&gt;get($msgnum , &#39;1.1&#39;), I&#39;ll try it"}, {"owner": {"reputation": 33, "user_id": 4834502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-R1WV26rVIkc/AAAAAAAAAAI/AAAAAAAAAF0/e7QhVMaiY7g/photo.jpg?sz=128", "display_name": "Amram Elbaz", "link": "https://stackoverflow.com/users/4834502/amram-elbaz"}, "edited": false, "score": 0, "creation_date": 1484652683, "post_id": 41695710, "comment_id": 70587821, "body": "I just read the update, very instructive. I&#39;m not on my computer anymore, but I&#39;ll be back on it soon and try everything."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 33, "user_id": 4834502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-R1WV26rVIkc/AAAAAAAAAAI/AAAAAAAAAF0/e7QhVMaiY7g/photo.jpg?sz=128", "display_name": "Amram Elbaz", "link": "https://stackoverflow.com/users/4834502/amram-elbaz"}, "edited": false, "score": 1, "creation_date": 1484655010, "post_id": 41695710, "comment_id": 70589304, "body": "@amram you should not have accepted the answer yet if you didn&#39;t try. Maybe someone else will have a better one, but if it&#39;s already accepted they might be discouraged to post it."}, {"owner": {"reputation": 33, "user_id": 4834502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-R1WV26rVIkc/AAAAAAAAAAI/AAAAAAAAAF0/e7QhVMaiY7g/photo.jpg?sz=128", "display_name": "Amram Elbaz", "link": "https://stackoverflow.com/users/4834502/amram-elbaz"}, "edited": false, "score": 1, "creation_date": 1484659036, "post_id": 41695710, "comment_id": 70592102, "body": "I accept it as answering at my question about why I don&#39;t have the content of my messages."}, {"owner": {"reputation": 33, "user_id": 4834502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-R1WV26rVIkc/AAAAAAAAAAI/AAAAAAAAAF0/e7QhVMaiY7g/photo.jpg?sz=128", "display_name": "Amram Elbaz", "link": "https://stackoverflow.com/users/4834502/amram-elbaz"}, "edited": false, "score": 0, "creation_date": 1484662739, "post_id": 41695710, "comment_id": 70594795, "body": "Well, actually I&#39;d like to retrieve only the body of my email when I receive a lot of headers added to the output that I sent you earlier. I think I will have to use a regex to separate it from the rest of the message. Maybe on the encoding sentence that never changes."}, {"owner": {"reputation": 33, "user_id": 4834502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-R1WV26rVIkc/AAAAAAAAAAI/AAAAAAAAAF0/e7QhVMaiY7g/photo.jpg?sz=128", "display_name": "Amram Elbaz", "link": "https://stackoverflow.com/users/4834502/amram-elbaz"}, "edited": false, "score": 1, "creation_date": 1484662825, "post_id": 41695710, "comment_id": 70594874, "body": "Anyway, I tried to decode an isolated message with your :              my $decoded_msg = decode_base64(&quot;$msg&quot;);  and it worked well."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 33, "user_id": 4834502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-R1WV26rVIkc/AAAAAAAAAAI/AAAAAAAAAF0/e7QhVMaiY7g/photo.jpg?sz=128", "display_name": "Amram Elbaz", "link": "https://stackoverflow.com/users/4834502/amram-elbaz"}, "edited": false, "score": 0, "creation_date": 1484664556, "post_id": 41695710, "comment_id": 70596118, "body": "@AmramElbaz if there are multiple lines of headers, find the empty one. It&#39;s the separator that ends the header and starts the body. In a stringification its <code>\\n\\n</code>, just like in HTTP. Something like <code>1 while shift @$msg ne &quot;\\n&quot;;</code> should do that. It will still shift out the <code>\\n</code>, but break. What you put on the left is irrelevant."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1484652311, "last_edit_date": 1484652311, "creation_date": 1484651761, "answer_id": 41695710, "question_id": 41695313, "link": "https://stackoverflow.com/questions/41695313/netimapsimple-get-not-getting-the-entire-message/41695710#41695710", "title": "Net::IMAP::Simple get not getting the entire message", "body": "<p>Your messages are encoded as <a href=\"https://en.wikipedia.org/wiki/Base64\" rel=\"nofollow noreferrer\">Base64</a>. It's perfectly normal for emails to have that <a href=\"https://en.wikipedia.org/wiki/MIME#Content-Transfer-Encoding\" rel=\"nofollow noreferrer\">MIME type</a>, though not required. You need to decode them. A good way to do that is to use <a href=\"https://metacpan.org/pod/MIME::Base64\" rel=\"nofollow noreferrer\">MIME::Base64</a>. Note that the <code>==</code> is part of the Base64 string. It's a padding to make the string have the right length.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse MIME::Base64 'decode_base64';\n\nmy $decoded_msg = decode_base64($msg_body);\n</code></pre>\n\n<p>However, you need to get the body out of those message objects. The documentation is vague about that, it doesn't say what those objects are, and <code>get</code> only returns the raw message.</p>\n\n<p>I suggest you install <a href=\"https://metacpan.org/pod/Data::Printer\" rel=\"nofollow noreferrer\">Data::Printer</a> and use it to dump one of your <code>$msg</code> objects. That dump will include the internals of the object (which is likely a hash reference), and all the methods the object has. It's possible this object includes an accessor to get the already decoded content. If that's the case, you don't need to decode yourself. If not, grab the body out and decode it with <code>decode_base64</code>.</p>\n\n<hr>\n\n<p>Update: I read <a href=\"https://metacpan.org/source/JETTERO/Net-IMAP-Simple-1.2207/Simple.pm#L704\" rel=\"nofollow noreferrer\">the code</a>, and it creates Net::IMAP::Simple::_message objects in the <code>get</code> method. There is <a href=\"https://metacpan.org/source/JETTERO/Net-IMAP-Simple-1.2207/Simple.pm#L17\" rel=\"nofollow noreferrer\">a package definition at the top of the code</a>. It's a bit complex, but it's obvious. It uses the arrayref of lines as the data structure behind the object, so I was wrong above. </p>\n\n<blockquote>\n<pre><code>q( package Net::IMAP::Simple::_message;\n   use overload fallback=&gt;1, '\"\"' =&gt; sub { local $\"=\"\"; \"@{$_[0]}\" };\n   sub new { bless $_[1] })\n</code></pre>\n</blockquote>\n\n<p>And further down:</p>\n\n<blockquote>\n<pre><code>return  wantarray ? @lines : Net::IMAP::Simple::_message-&gt;new(\\@lines)\n</code></pre>\n</blockquote>\n\n<p>So to get the body, you need to get rid of the header string. Once you've dumped out the object, you should see how many elements at the beginning of the array are the header and the empty line. I assume index <code>0</code> is the header line, and index <code>1</code> is the empty line. If you don't care about those, you can just throw them away.</p>\n\n<p>This will change the object.</p>\n\n<pre><code>shift @$msg; # get rid of header\nshift @$msg; # get rid of empty line\n\nmy $decoded_msg = decode_base64(\"$msg\");\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4834502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-R1WV26rVIkc/AAAAAAAAAAI/AAAAAAAAAF0/e7QhVMaiY7g/photo.jpg?sz=128", "display_name": "Amram Elbaz", "link": "https://stackoverflow.com/users/4834502/amram-elbaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 0, "accepted_answer_id": 41695710, "answer_count": 1, "score": 3, "last_activity_date": 1484652311, "creation_date": 1484650655, "last_edit_date": 1592644375, "question_id": 41695313, "link": "https://stackoverflow.com/questions/41695313/netimapsimple-get-not-getting-the-entire-message", "title": "Net::IMAP::Simple get not getting the entire message", "body": "<p>I'm pretty noobish in perl, so maybe I did something stupid.\nMy issue is that I'm currently using a script to get all the messages contained by an email box through the IMAP protocol, using Net::IMAP::Simple in PERL, but it does not gives me the entire body of the messages.\nMy entire code looks like:</p>\n<pre><code>      use strict;\n      use Net::IMAP::Simple;\n      \n       my $imap = Net::IMAP::Simple-&gt;new('xxxxxxxxxxxxxx') or die 'Impossible to connect '.$!;\n      $imap-&gt;login('xxxxxxxx', 'xxxxxxxxx') or die 'Login Error!';\n      my $nbmsg = $imap-&gt;select('INBOX') or die 'Impossible to reach this folder !';\n      print 'You have '.$nbmsg.&quot; messages in this folder !\\n\\n&quot;;\n      my $index = $imap-&gt;list() or die 'Impossible to list these messages !';\n\n    foreach my $msgnum (keys %$index) {\n    #if(!$imap-&gt;seen($msgnum)) {\n          my $msg = $imap-&gt;get($msgnum) or die 'Impossible to retrieve this message'.$msgnum.' !';\n          print $msg.&quot;\\n\\n&quot;;\n    #   }\n    }\n    $imap-&gt;quit() or die 'quitting issue !';\n</code></pre>\n<p>And everytime that it is retrieving an email, it is giving me the first characters (which in my case are cryptics useless metadata generated by the bot that sending the messages), but not the entire body.</p>\n<p>EDIT: Here is the body part displayed in the output:</p>\n<blockquote>\n<p>Content-Type: text/plain; charset=&quot;utf-8&quot;\nContent-Transfer-Encoding: BASE64</p>\n<p>Q2UgbWVzc2FnZSBhIMOpdMOpIGfDqW7DqXLDqSBhdXRvbWF0aXF1ZW1lbnQgcGFyIGwnaW1wcmlt\nYW50ZSBtdWx0aWZvbmN0aW9ucyBYZXJveCBYRVJPWF83ODMwLgogICBFbXBsYWNlbWVudCBkdSBz\neXN0w6htZSA6IAogICBBZHJlc3NlIElQIHN5c3TDqG1lIDogMTkyLjE2OC4xLjIwMAogICBBZHJl\nc3NlIE1BQyBzeXN0w6htZSA6IDlDOjkzOjRFOjMzOjM1OkJECiAgIE1vZMOobGUgc3lzdMOobWUg\nOiBYZXJveCBXb3JrQ2VudHJlIDc4MzAKICAgTnVtw6lybyBkZSBzw6lyaWUgc3lzdMOobWUgOiAz\nOTEyNzk4ODk0CgpMJ0Fzc2lzdGFudCBkZSBjb21wdGV1ciBhIGVudm95w6kgbGUgcmVsZXbDqSBz\ndWl2YW50IGF1IHNlcnZldXIgZGUgY29tbXVuaWNhdGlvbiBYZXJveCBTTWFydCBlU29sdXRpb25z\nIGxlICAxNC8xMS8xNiAgIDA5OjI0OiAKICBUaXJhZ2VzIGVuIG5vaXIgOiAxMzIwNwogIFRpcmFn\nZXMgZW4gY291bGV1ciA6IDkyNjg3CiAgVG91cyBsZXMgdGlyYWdlcyA6IDEwNTg5NA==</p>\n</blockquote>\n<p>It is always ending by this &quot;==&quot; btw, which is making me think that the module is shortening the output.</p>\n<p>I looked after some details about it in the CPAN documentation but sadly didn't find anything.</p>\n"}, {"tags": ["arrays", "perl", "loops", "foreach"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1484650078, "post_id": 41694999, "comment_id": 70586057, "body": "<code>$lib++;</code> You are incrementing first then printing the value of <code>index</code> <code>1</code> element rather than <code>element</code> of <code>index</code> <code>0</code>, Move it to after <code>print</code> statement."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484650132, "post_id": 41694999, "comment_id": 70586094, "body": "Put a <code>next;</code> after the first <code>print</code> line. What does that show?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 1, "creation_date": 1484650201, "post_id": 41694999, "comment_id": 70586145, "body": "@AbhiNickz: You&#39;re right, but the OP says <i>&quot;The display line beginning &quot;Current entry&quot; always starts from 2&quot;</i>. Your comment doesn&#39;t explain that."}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1484650278, "post_id": 41694999, "comment_id": 70586204, "body": "There&#39;s something you&#39;re not telling us. If <code>$lib</code> is 2 on the first iteration, which from the code we see it can&#39;t, maybe <code>&amp;sql()</code> changes <code>$lib</code>?"}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1484650543, "post_id": 41694999, "comment_id": 70586391, "body": "You should check the contents of <code>@our_usage</code> with the <code>use Data::Dumper;  print Dumper(\\@our_usage);</code> that should debug the cause, only if array elements count is small."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 1, "creation_date": 1484650573, "post_id": 41694999, "comment_id": 70586419, "body": "Since you don&#39;t have <code>use strict</code> and you&#39;re not declaring your variables in a lexical scope with <code>my</code>, @Jens has a good point. If you have another variable <code>$lib</code> inside of <code>sub sql { ... }</code>, that will be <b>the same variable</b> as the <code>$lib</code> in this part of your code, because Perl makes all variables into package variables if you don&#39;t declare them with <code>my</code>. Thus, you&#39;d be changing the same thing from a different piece of code. That&#39;s why you should <b>always</b> have <code>use strict</code> in your code, it would tell you about it. Also include <code>use warnings</code> to see what else you are doing wrong."}, {"owner": {"reputation": 47, "user_id": 7429878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b966e9d16c07eaf3daf2c27cbf2c0fd4?s=128&d=identicon&r=PG&f=1", "display_name": "TyneBridges", "link": "https://stackoverflow.com/users/7429878/tynebridges"}, "edited": false, "score": 0, "creation_date": 1484651123, "post_id": 41694999, "comment_id": 70586772, "body": "Thanks for the comments. What I&#39;d expected was to see element 0 of each query result array (the first element) numbered as Current entry (1) but that never appears. I&#39;ve tried inserting &quot;next;&quot;  after &quot;print current entry&quot; and it seems to make no difference. I&#39;ll add &quot;use strict&quot; and see if that throws any errors."}, {"owner": {"reputation": 47, "user_id": 7429878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b966e9d16c07eaf3daf2c27cbf2c0fd4?s=128&d=identicon&r=PG&f=1", "display_name": "TyneBridges", "link": "https://stackoverflow.com/users/7429878/tynebridges"}, "edited": false, "score": 0, "creation_date": 1484652562, "post_id": 41694999, "comment_id": 70587746, "body": "I guess my problems are more fundamental coming from Pascal, where variable declarations are strict but straightforward. I thought I had a reasonable grasp of the basics of Perl but adding &quot;use strict&quot; gives a long list of &quot;requires explicit package&quot; errors and a whole new area I need to understand."}, {"owner": {"reputation": 47, "user_id": 7429878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b966e9d16c07eaf3daf2c27cbf2c0fd4?s=128&d=identicon&r=PG&f=1", "display_name": "TyneBridges", "link": "https://stackoverflow.com/users/7429878/tynebridges"}, "reply_to_user": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1484653087, "post_id": 41694999, "comment_id": 70588081, "body": "@Jens, I&#39;ve added the code for the SQL, which doesn&#39;t refer to $lib. Will double check that I haven&#39;t used $lib elsewhere."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 7429878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b966e9d16c07eaf3daf2c27cbf2c0fd4?s=128&d=identicon&r=PG&f=1", "display_name": "TyneBridges", "link": "https://stackoverflow.com/users/7429878/tynebridges"}, "edited": false, "score": 0, "creation_date": 1585153603, "post_id": 41697644, "comment_id": 107665011, "body": "Many thanks (belatedly!). (I wasn&#39;t able to use strict because my service (database) provider gave me the connection string (in a library) and they don&#39;t use strict, but I found some way round the problem.)"}], "tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 0, "last_activity_date": 1484657288, "creation_date": 1484657288, "answer_id": 41697644, "question_id": 41694999, "link": "https://stackoverflow.com/questions/41694999/missing-first-row-in-array-output/41697644#41697644", "title": "Missing first row in array output", "body": "<p>There's not enough code for us to see what exactly is going wrong.\nHere's a complete script that works, using fixed strings instead of calling <code>sql()</code> in the hope you can transform it to something working for you.</p>\n\n<pre><code>$ cat x.pl\n#!/usr/bin/env perl\n\nuse warnings;\nuse diagnostics;\nuse strict;\n\n# ...your other code here...\n\nmy @our_usage = (\"a~b~c~d~e\", \"1~2~3~4~5\", \"R~S~T~U~V\");\n# Iterate through array returned for the current borrower\nmy $lib = 0;\nforeach my $entry (@our_usage)\n{\n  # Put current line into our variables\n  $lib++;\n  print \"Current entry ($lib): $entry\\n\";\n  my ($ourbcode, $ourpcode, $oursname, $ourfnames, $ourloc) = split('~', $entry);\n  my $ourline = \"$ourbcode $ourpcode $oursname $ourfnames $ourloc\";\n  # Show each line on screen\n  print $ourline.\"\\n\";\n} # End of results loop\n</code></pre>\n\n<p>Sample run:</p>\n\n<pre><code>$ perl ./x.pl\nCurrent entry (1): a~b~c~d~e\na b c d e\nCurrent entry (2): 1~2~3~4~5\n1 2 3 4 5\nCurrent entry (3): R~S~T~U~V\nR S T U V\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 7429878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b966e9d16c07eaf3daf2c27cbf2c0fd4?s=128&d=identicon&r=PG&f=1", "display_name": "TyneBridges", "link": "https://stackoverflow.com/users/7429878/tynebridges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1484657288, "creation_date": 1484649822, "last_edit_date": 1484652980, "question_id": 41694999, "link": "https://stackoverflow.com/questions/41694999/missing-first-row-in-array-output", "title": "Missing first row in array output", "body": "<p>When I try to iterate through some results of a SQL query, I don't see the first entry. The following is in an outer loop with different input for the query. Some versions return one row, others return up to ten but the first row is always missing. The display line beginning \"Current entry\" always starts from 2. I know that Perl arrays start at zero but the \"foreach\" doesn't ask for specific numbers - just to show each array element. Am I doing something obviously wrong here?</p>\n\n<p>Thanks.  </p>\n\n<pre><code>  $OurSQL = \"select DISTINCT BORROWER.BARCODE, POST_CODE, SURNAME, FIRST_NAMES, \";\n  $OurSQL = $OurSQL.\"LOAN.CREATE_LOCATION FROM ADDRESS, CONTACT_POINT, BORROWER \";\n  $OurSQL = $OurSQL.\"left join LOAN on (BORROWER.BORROWER_ID = LOAN.BORROWER_ID) \";\n  $OurSQL = $OurSQL.\"where (BORROWER.BORROWER_ID = CONTACT_POINT.BORROWER_ID) and \";\n  $OurSQL = $OurSQL.\"(CONTACT_POINT.ADDRESS_ID = ADDRESS.ADDRESS_ID) and \";\n  $OurSQL = $OurSQL.\"(upper(BORROWER.SURNAME) = upper('\".$sname.\"') and upper(BORROWER.FIRST_NAMES) = upper('\".$fname.\"')) and \";\n  $OurSQL = $OurSQL.\"(ADDRESS.POST_CODE = '\".$postcode.\"') AND (LOAN.CREATE_DATE &gt;\";\n  $OurSQL = $OurSQL.\"dateadd(year, -1, getdate())) ORDER BY POST_CODE, SURNAME, FIRST_NAMES, CREATE_LOCATION\";\n\n$lib = 0;\n  (@our_usage) = &amp;sql($d, $OurSQL);\n  # Iterate through array returned for the current borrower\n  foreach $entry (@our_usage)\n  {\n    # Put current line into our variables\n    $lib++;\n    print \"Current entry ($lib): $entry\\n\";\n    ($ourbcode, $ourpcode, $oursname, $ourfnames, $ourloc) = split('~', $entry);\n    $ourline = \"$ourbcode $ourpcode $oursname $ourfnames $ourloc\";\n    # Show each line on screen\n    print $ourline.\"\\n\";\n    print OUT $ourline.\"\\n\";\n  } # End of results loop\n</code></pre>\n"}, {"tags": ["regex", "bash", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 2, "creation_date": 1484646105, "post_id": 41693665, "comment_id": 70583273, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/4736/learning-regular-expressions\">Learning Regular Expressions</a>"}, {"owner": {"reputation": 1202, "user_id": 5902284, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f8e7e787671552bbc854ddf9f675185a?s=128&d=identicon&r=PG&f=1", "display_name": "nicoco", "link": "https://stackoverflow.com/users/5902284/nicoco"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 1, "creation_date": 1484646145, "post_id": 41693665, "comment_id": 70583305, "body": "Hum I disagree, there is a specific question in my post."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1484646160, "post_id": 41693665, "comment_id": 70583321, "body": "<code>.</code> matches <i>any</i> character, including space. <code>\\w</code> matches word characters, so I don&#39;t see what you&#39;re attempting with <code>\\w.\\w</code>."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1484646200, "post_id": 41693665, "comment_id": 70583343, "body": "\u2018<i>there is a specific question in my post</i>\u2019 Would you mind pointing it out? I can&#39;t find it."}, {"owner": {"reputation": 1202, "user_id": 5902284, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f8e7e787671552bbc854ddf9f675185a?s=128&d=identicon&r=PG&f=1", "display_name": "nicoco", "link": "https://stackoverflow.com/users/5902284/nicoco"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1484646230, "post_id": 41693665, "comment_id": 70583355, "body": "As the post title states, I&#39;m trying to remove one-character words. I thought that <code>.</code> didn&#39;t match whitespace, that&#39;s a good start, thanks."}, {"owner": {"reputation": 13433, "user_id": 874178, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/AdjGb.jpg?s=128&g=1", "display_name": "sat", "link": "https://stackoverflow.com/users/874178/sat"}, "edited": false, "score": 1, "creation_date": 1484646286, "post_id": 41693665, "comment_id": 70583400, "body": "@nicoco, You can try with word boundary (<code>\\b</code>)."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 1, "creation_date": 1484646287, "post_id": 41693665, "comment_id": 70583402, "body": "@nicoco That&#39;s not a <i>question</i>, though. IMHO, this looks like a give-me-the-code post."}, {"owner": {"reputation": 1202, "user_id": 5902284, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f8e7e787671552bbc854ddf9f675185a?s=128&d=identicon&r=PG&f=1", "display_name": "nicoco", "link": "https://stackoverflow.com/users/5902284/nicoco"}, "reply_to_user": {"reputation": 13433, "user_id": 874178, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/AdjGb.jpg?s=128&g=1", "display_name": "sat", "link": "https://stackoverflow.com/users/874178/sat"}, "edited": false, "score": 0, "creation_date": 1484646583, "post_id": 41693665, "comment_id": 70583610, "body": "@sat Thanks, I didn&#39;t know this one."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 3, "creation_date": 1484650406, "post_id": 41693665, "comment_id": 70586295, "body": "@Biffen: I disagree. The OP has written a solution to their problem and is asking for help to get it working."}], "answers": [{"comments": [{"owner": {"reputation": 1202, "user_id": 5902284, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f8e7e787671552bbc854ddf9f675185a?s=128&d=identicon&r=PG&f=1", "display_name": "nicoco", "link": "https://stackoverflow.com/users/5902284/nicoco"}, "edited": false, "score": 0, "creation_date": 1484646695, "post_id": 41693834, "comment_id": 70583686, "body": "It leaves a lot of white spaces before the &quot;long&quot; words, but I can work with that. Thanks!"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 1202, "user_id": 5902284, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f8e7e787671552bbc854ddf9f675185a?s=128&d=identicon&r=PG&f=1", "display_name": "nicoco", "link": "https://stackoverflow.com/users/5902284/nicoco"}, "edited": false, "score": 1, "creation_date": 1484646767, "post_id": 41693834, "comment_id": 70583732, "body": "@nicoco You can use <code>s&#47;\\b\\w\\b ?&#47;&#47;g</code> to remove the whispaces aswell."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484667558, "post_id": 41693834, "comment_id": 70598293, "body": "Be very careful with <code>\\b</code>: what you have will clobber things like &quot;will-o&#39;-the-wisp&quot; and &quot;Build-A-Bear&quot;."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 2, "creation_date": 1484671449, "post_id": 41693834, "comment_id": 70600905, "body": "Or the same solution with GNU awk: <code>awk &#39;{gsub(&#47;\\&lt;.\\&gt; ?&#47;,&quot;&quot;)}1&#39;</code>."}], "tags": [], "owner": {"reputation": 13433, "user_id": 874178, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/AdjGb.jpg?s=128&g=1", "display_name": "sat", "link": "https://stackoverflow.com/users/874178/sat"}, "is_accepted": true, "score": 7, "last_activity_date": 1484646955, "last_edit_date": 1484646955, "creation_date": 1484646553, "answer_id": 41693834, "question_id": 41693665, "link": "https://stackoverflow.com/questions/41693665/remove-one-character-words/41693834#41693834", "title": "Remove one-character words", "body": "<p>You have to use word boundary <code>\\b</code> (or) <code>\\&lt;</code> and <code>\\&gt;</code> respectively match the empty string at the beginning and end of a word.</p>\n\n<pre><code>echo \"a b c d e f g h ijkl m n opqrst u v\" | sed 's/\\b\\w\\b \\?//g'\n</code></pre>\n\n<p>(OR)</p>\n\n<pre><code>echo \"a b c d e f g h ijkl m n opqrst u v\" | sed 's/\\&lt;.\\&gt; \\?//g'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1484649839, "post_id": 41693909, "comment_id": 70585902, "body": "You could use <code>grep -E</code> so you wouldn&#39;t need those pesky backslashes."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1484649993, "post_id": 41693909, "comment_id": 70585991, "body": "It should be noted that this separates all matches with a newline, which is not exactly the same as the desired output as written in the question.  This may or may not be a problem, depending on the circumstances."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1484661972, "post_id": 41693909, "comment_id": 70594179, "body": "In that case, pipe into <code>| paste -sd &quot; &quot;</code>"}], "tags": [], "owner": {"reputation": 11156, "user_id": 2214695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dee2ef257601e05c5659f04de9cb7c67?s=128&d=identicon&r=PG", "display_name": "oliv", "link": "https://stackoverflow.com/users/2214695/oliv"}, "is_accepted": false, "score": 4, "last_activity_date": 1484649317, "last_edit_date": 1484649317, "creation_date": 1484646782, "answer_id": 41693909, "question_id": 41693665, "link": "https://stackoverflow.com/questions/41693665/remove-one-character-words/41693909#41693909", "title": "Remove one-character words", "body": "<p>You could simply use <code>grep</code>:</p>\n\n<pre><code>echo \"a b c d e f g h ijkl m n opqrst u v\"  | grep -o '[a-z]\\{2,\\}'\n</code></pre>\n\n<p>where the regex is matching any word composed with at least 2 characters. </p>\n\n<p>The <code>-o</code> option in <code>grep</code> prints the matching pattern (and not the entire line).</p>\n"}, {"comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1484649907, "post_id": 41694543, "comment_id": 70585940, "body": "With <code>-w</code> you don&#39;t need the <code>\\b</code> anchors."}], "tags": [], "owner": {"reputation": 1152, "user_id": 3369871, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c8de0e95a53208ba7a7d6d47a1d0a846?s=128&d=identicon&r=PG&f=1", "display_name": "Vicky", "link": "https://stackoverflow.com/users/3369871/vicky"}, "is_accepted": false, "score": -1, "last_activity_date": 1484648895, "last_edit_date": 1484648895, "creation_date": 1484648529, "answer_id": 41694543, "question_id": 41693665, "link": "https://stackoverflow.com/questions/41693665/remove-one-character-words/41694543#41694543", "title": "Remove one-character words", "body": "<pre><code>echo \"a b c d e f g h ijkl m n opqrst u v\"  | grep -wo \"\\b[a-z][a-z]\\+\\b\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1484671388, "post_id": 41694857, "comment_id": 70600852, "body": "You shouldn&#39;t say <code>awk is not the most efficient way....</code>, just that the specific awk code you posted is not the most efficient way."}, {"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1484671446, "post_id": 41694857, "comment_id": 70600899, "body": "@EdMorton: As you say Ed! May be you can correct my logic or provide a more efficient way for this."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1484671521, "post_id": 41694857, "comment_id": 70600953, "body": "I added the awk equivalent of the accepted answer under that answer, see <a href=\"http://stackoverflow.com/a/41693834/1745001\">stackoverflow.com/a/41693834/1745001</a>"}, {"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1484671602, "post_id": 41694857, "comment_id": 70601014, "body": "@EdMorton: Well! everybody can&#39;t answer in the same <i>class</i> as of Ed Morton in <code>awk</code>"}], "tags": [], "owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "is_accepted": false, "score": 2, "last_activity_date": 1484649828, "last_edit_date": 1484649828, "creation_date": 1484649429, "answer_id": 41694857, "question_id": 41693665, "link": "https://stackoverflow.com/questions/41693665/remove-one-character-words/41694857#41694857", "title": "Remove one-character words", "body": "<p>Albeit, <code>Awk</code> is not the most efficient of ways to do this, answering only because it is tagged <a href=\"/questions/tagged/awk\" class=\"post-tag\" title=\"show questions tagged &#39;awk&#39;\" rel=\"tag\">awk</a>, using its <code>length()</code> string function. It is <code>POSIX</code> compliant, so no issues on portability.</p>\n\n<pre><code>echo \"a b c d e f g h ijkl m n opqrst u v\" | \\\n  awk '{for(i=1;i&lt;=NF;i++) {if (length($i)&gt;1) { printf \"%s \", $i }} }'\nijkl opqrst\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1484662038, "post_id": 41695389, "comment_id": 70594221, "body": "If you want to be more terse, you can omit the default variable: <code>grep {length &gt; 1} @F</code>"}], "tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1484650879, "creation_date": 1484650879, "answer_id": 41695389, "question_id": 41693665, "link": "https://stackoverflow.com/questions/41693665/remove-one-character-words/41695389#41695389", "title": "Remove one-character words", "body": "<p>Perl solution: just filter elements on <a href=\"http://perldoc.perl.org/functions/length.html\" rel=\"nofollow noreferrer\"><code>length</code></a></p>\n\n<pre><code>echo \"a b c d e f g h ijkl m n opqrst u v\" | perl -lanE \\\n  'say join \" \", grep {length($_) &gt; 1} @F'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1289, "user_id": 1330706, "user_type": "registered", "profile_image": "https://graph.facebook.com/859896960751961/picture?type=large", "display_name": "mug896", "link": "https://stackoverflow.com/users/1330706/mug896"}, "edited": false, "score": 0, "creation_date": 1485850321, "post_id": 41695701, "comment_id": 71084232, "body": "sed -r &#39;s/(\\s\\w\\b|\\b\\w\\s)//g&#39;"}], "tags": [], "owner": {"reputation": 8018, "user_id": 2064981, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74e3e392c752c4c9acb4ca4fb8f7af65?s=128&d=identicon&r=PG&f=1", "display_name": "SamWhan", "link": "https://stackoverflow.com/users/2064981/samwhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1484651737, "creation_date": 1484651737, "answer_id": 41695701, "question_id": 41693665, "link": "https://stackoverflow.com/questions/41693665/remove-one-character-words/41695701#41695701", "title": "Remove one-character words", "body": "<p>Not being familiar with any linux sprung tools, this is somewhat of a guess, but I think the (a) regex you want is</p>\n\n<pre><code>(?:\\s\\w\\b|\\b\\w\\s)\n</code></pre>\n\n<p>like</p>\n\n<pre><code>$ echo \"a b c d e f g h ijkl m n opqrst u v\" | sed 's/(?:\\s\\w\\b|\\b\\w\\s)//g'\n</code></pre>\n\n<p>This would replace any single character either preceded by, or foolowed by, a space with nothing.</p>\n\n<p><a href=\"https://regex101.com/r/UQePV3/1\" rel=\"nofollow noreferrer\">Check the regex out here at regex101</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "is_accepted": false, "score": 0, "last_activity_date": 1484657073, "last_edit_date": 1484657073, "creation_date": 1484655247, "answer_id": 41696872, "question_id": 41693665, "link": "https://stackoverflow.com/questions/41693665/remove-one-character-words/41696872#41696872", "title": "Remove one-character words", "body": "<p>Another in awk. A non-space (<code>[^ ]</code>) is considered a word. Feel free to replace it with your definition of a word.</p>\n\n<pre><code>$ awk '{while(sub(/^[^ ] | [^ ]$/,\"\")||sub(/ [^ ] /,\" \"));}1'\n</code></pre>\n\n<p>Using <code>sub</code> it replaces <code>[a space][non-space][a space]</code> tuples with a space\nand removes from the beginning and end of record the single characters and leading / trailing space. It's in a <code>while</code> so it keeps doing it until there are no hits left. To test it:</p>\n\n<pre><code>$ echo \"a b c d e f g h ijkl m n opqrst u v\"|awk '{while(sub(/^[^ ] | [^ ]$/,\"\")||sub(/ [^ ] /,\" \"));}1'\nijkl opqrst\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 1, "last_activity_date": 1484662168, "creation_date": 1484662168, "answer_id": 41699281, "question_id": 41693665, "link": "https://stackoverflow.com/questions/41693665/remove-one-character-words/41699281#41699281", "title": "Remove one-character words", "body": "<p>Just for fun, another option: translate spaces to newlines and look for lines with at least 2 characters</p>\n\n<pre><code>$ echo \"a b c d e f g h ijkl m n opqrst u v\" | tr ' ' '\\n' | grep .. | paste -sd \" \"\nijkl opqrst\n</code></pre>\n"}], "owner": {"reputation": 1202, "user_id": 5902284, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f8e7e787671552bbc854ddf9f675185a?s=128&d=identicon&r=PG&f=1", "display_name": "nicoco", "link": "https://stackoverflow.com/users/5902284/nicoco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1466, "favorite_count": 0, "accepted_answer_id": 41693834, "answer_count": 8, "score": 4, "last_activity_date": 1484662168, "creation_date": 1484646044, "question_id": 41693665, "link": "https://stackoverflow.com/questions/41693665/remove-one-character-words", "title": "Remove one-character words", "body": "<p>I'm looking for a regexp to remove one character words. I don't mind whether using <code>perl</code>, <code>awk</code>, <code>sed</code> or <code>bash</code> built-ins.</p>\n\n<p>Test case:</p>\n\n<pre><code>$ echo \"a b c d e f g h ijkl m n opqrst u v\" | $COMMAND\n</code></pre>\n\n<p>Desired output:</p>\n\n<pre><code>ijkl opqrst\n</code></pre>\n\n<p>What I've tried so far:</p>\n\n<pre><code>$ echo \"a b c d e f g h ijkl m n opqrst u v\" | sed 's/ . //g'\nacegijkln opqrstv\n</code></pre>\n\n<p>I'm guessing that:</p>\n\n<ul>\n<li>the <code>a</code> isn't removed because there is no white space before it</li>\n<li>the <code>c</code> remains because once the <code>b</code> has been removed, there is no more whitespace before it</li>\n<li>and so on...</li>\n</ul>\n\n<p>Attempt #2:</p>\n\n<pre><code>$ echo \"a b c d e f g h ijkl m n opqrst u v\" | sed 's/\\w.\\w//g'\n     s v\n</code></pre>\n\n<p>Here I don't get at all what's happening.</p>\n\n<p>Any help + explanations are welcome, I want to learn.</p>\n"}, {"tags": ["arrays", "perl", "multidimensional-array"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1484645411, "post_id": 41693389, "comment_id": 70582773, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/17434333/using-a-dynamically-generated-variable-name-in-perls-strict-mode\">Using a dynamically generated variable name in Perl&#39;s strict mode</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484657508, "post_id": 41693389, "comment_id": 70591018, "body": "Can you please explain a bit more what you mean by <i>name</i> and what should be <i>dynamic</i> about them? Maybe include an example, even if it has wrong syntax. Right now I think you don&#39;t want to do what Abhi believes, but I could be wrong. If it&#39;s what he suggests, then don&#39;t do it. It will cause you loads of grieve. But we&#39;d need a better explanation to tell."}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 3679380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OYUD4.jpg?s=128&g=1", "display_name": "mickvav", "link": "https://stackoverflow.com/users/3679380/mickvav"}, "edited": false, "score": 0, "creation_date": 1484923227, "post_id": 41693892, "comment_id": 70723633, "body": "In my practice, I prefer to use arrays of pointers, e.g. $ref-&gt;{&#39;name&#39;}-&gt;[0]-&gt;[1], as you will always pass these  things as pointers to functions and will not copy the data contained within - it will save you a lot of memory and performance on huge arrays."}, {"owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "reply_to_user": {"reputation": 137, "user_id": 3679380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OYUD4.jpg?s=128&g=1", "display_name": "mickvav", "link": "https://stackoverflow.com/users/3679380/mickvav"}, "edited": false, "score": 0, "creation_date": 1484924603, "post_id": 41693892, "comment_id": 70724533, "body": "@mickvav $ref-&gt;{&#39;name&#39;}-&gt;[0]-&gt;[1] is exactly the same as $ref-&gt;{&#39;name&#39;}[0][1]"}], "tags": [], "owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "is_accepted": true, "score": 2, "last_activity_date": 1484657398, "last_edit_date": 1484657398, "creation_date": 1484646720, "answer_id": 41693892, "question_id": 41693389, "link": "https://stackoverflow.com/questions/41693389/creating-2-d-arrays-dynamically-in-perl/41693892#41693892", "title": "Creating 2 D arrays dynamically in Perl", "body": "<p>It sounds like you want a tree/hash of arrays.  Use references to achieve this.</p>\n\n<p>Example of hash of array of array:</p>\n\n<pre><code>$ref = {};\n$ref-&gt;{'name'} = [];\n$ref-&gt;{'name'}[0] = [];\n$ref-&gt;{'name'}[0][1] = 3;\n</code></pre>\n\n<p>This could be dynamic if required.  Make sure you initialise what the reference is pointing at.</p>\n"}, {"tags": [], "owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "is_accepted": false, "score": 0, "last_activity_date": 1484647082, "creation_date": 1484647082, "answer_id": 41694007, "question_id": 41693389, "link": "https://stackoverflow.com/questions/41693389/creating-2-d-arrays-dynamically-in-perl/41694007#41694007", "title": "Creating 2 D arrays dynamically in Perl", "body": "<p>Example array of array references:</p>\n\n<pre><code>my @x;\n$x[$_] = [0..int(rand(5)+1)] for (0..3);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1484661090, "creation_date": 1484661090, "answer_id": 41698884, "question_id": 41693389, "link": "https://stackoverflow.com/questions/41693389/creating-2-d-arrays-dynamically-in-perl/41698884#41698884", "title": "Creating 2 D arrays dynamically in Perl", "body": "<p>You probably have some kind of loop? </p>\n\n<pre><code>for (...) {\n    my @subarray = ...;\n    push @a, \\@subarray;\n}\n</code></pre>\n\n<p>You could also do</p>\n\n<pre><code>for (...) {\n    push @a, [ ... ];\n}\n</code></pre>\n\n<p>If it's actually a foreach loop, you could even replace it with a <code>map</code>.</p>\n\n<pre><code>my @a = map { ...; [ ... ] } ...;\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 4764142, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8ed4e031865bdef2683cd2a398d2866a?s=128&d=identicon&r=PG&f=1", "display_name": "Sanchita Ghai", "link": "https://stackoverflow.com/users/4764142/sanchita-ghai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 41693892, "answer_count": 3, "score": 0, "last_activity_date": 1484661090, "creation_date": 1484645300, "last_edit_date": 1484657354, "question_id": 41693389, "link": "https://stackoverflow.com/questions/41693389/creating-2-d-arrays-dynamically-in-perl", "title": "Creating 2 D arrays dynamically in Perl", "body": "<p>I want to create 2-d arrays dynamically in Perl. I am not sure how to do this exactly.My requirement is something like this-</p>\n\n<pre><code>@a =([0,1,...],[1,0,1..],...)\n</code></pre>\n\n<p>Also I want to name the references to the internal array dynamically. i.e. I must be able to refer to my internal arrays with my chosen names which I will be allocating dynamically.\nCan someone please help me on this.</p>\n"}, {"tags": ["perl", "pdf"], "comments": [{"owner": {"reputation": 1145, "user_id": 3040180, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EYZmM.jpg?s=128&g=1", "display_name": "Madan Bhandari", "link": "https://stackoverflow.com/users/3040180/madan-bhandari"}, "edited": false, "score": 1, "creation_date": 1484641852, "post_id": 41692248, "comment_id": 70580579, "body": "what did you tried so far ?"}], "answers": [{"tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 0, "last_activity_date": 1484642514, "creation_date": 1484642514, "answer_id": 41692468, "question_id": 41692248, "link": "https://stackoverflow.com/questions/41692248/how-to-add-background-color-for-word-in-pdf-using-pdfapi2/41692468#41692468", "title": "How to add background color for word in PDF using PDF::API2?", "body": "<p>Check out <strong>Colors</strong> section in the documentation of <a href=\"https://metacpan.org/pod/PDF::API2::Content#Colors\" rel=\"nofollow noreferrer\">PDF::API2::Content</a>.</p>\n\n<pre><code>$content-&gt;fillcolor('blue');\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7247333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3df747cade280c2a6a898e1c14addb?s=128&d=identicon&r=PG&f=1", "display_name": "Stephan", "link": "https://stackoverflow.com/users/7247333/stephan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1484642514, "creation_date": 1484641729, "question_id": 41692248, "link": "https://stackoverflow.com/questions/41692248/how-to-add-background-color-for-word-in-pdf-using-pdfapi2", "title": "How to add background color for word in PDF using PDF::API2?", "body": "<p>I am extracting words left, top, right,bottom from xml and i created pdf but i want  to add background color for the words.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1484636039, "post_id": 41690544, "comment_id": 70577765, "body": "Specifically, <a href=\"http://search.cpan.org/perldoc?List%3a%3aFlatten%3a%3aRecursive\" rel=\"nofollow noreferrer\">List::Flatten::Recursive</a>&#39;s <code>flat</code> or the sub <a href=\"http://stackoverflow.com/a/20359734/589924\">provided</a> by Garen."}], "owner": {"reputation": 11, "user_id": 2882701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77dc158fc61310427eccf3cf451e0071?s=128&d=identicon&r=PG&f=1", "display_name": "Er.Abhi2710", "link": "https://stackoverflow.com/users/2882701/er-abhi2710"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 1, "closed_date": 1484635945, "answer_count": 0, "score": 1, "last_activity_date": 1484635220, "creation_date": 1484635220, "question_id": 41690544, "link": "https://stackoverflow.com/questions/41690544/how-to-flatten-a-multidimensinal-array-in-perl", "closed_reason": "Duplicate", "title": "How to flatten a multidimensinal array in perl?", "body": "<p>I am trying to flatten a multidimensional array shown below.</p>\n\n<pre><code>@arr = ([1,2,3,4],[5,6,7,8]);\n$ref = \\@arr;\n@a = map {@$_} @$ref;\nprint \"@a\";\n</code></pre>\n\n<p>But what about if and array ref contains another array ref in it as shown below.\n    @arr = ([1,2,3,4,[a,b]],[5,6,7,8]);</p>\n"}, {"tags": ["perl", "file"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1484632795, "post_id": 41689887, "comment_id": 70576499, "body": "Are you asking how to read a line from a text file? Your code already does that! (<code>open (FILE,&quot;header.asp&quot;); my $file = &lt;FILE&gt;; close(FILE);</code>)"}, {"owner": {"reputation": 17, "user_id": 7367867, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-t4n7BCbKdKU/AAAAAAAAAAI/AAAAAAAAAbY/1VhX27f9h1c/photo.jpg?sz=128", "display_name": "manav sharma", "link": "https://stackoverflow.com/users/7367867/manav-sharma"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484633300, "post_id": 41689887, "comment_id": 70576662, "body": "I want to call - &#39; DB_INST&#39;,&quot;USER&quot;,&quot;PASS&quot; from input file. And  value will go to below line.    $dbh = DBI-&gt;connect( &#39;dbi:Oracle:DB_INST&#39;,&quot;USER&quot;,&quot;PASS&quot;)     or die &quot;Database connection not made: $DBI::errstr&quot;;"}], "answers": [{"tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1484635012, "creation_date": 1484635012, "answer_id": 41690493, "question_id": 41689887, "link": "https://stackoverflow.com/questions/41689887/how-to-call-dbi-connect-parameters-from-text-file-in-perl-script/41690493#41690493", "title": "How to call DBI connect parameters from text file in perl script?", "body": "<p>You want to parse database credentials from properties file instead of hard coding it. Create <code>ini</code> file and enter credentials into them and then use <a href=\"https://metacpan.org/pod/Config::IniFiles\" rel=\"nofollow noreferrer\"><code>Config::IniFiles</code></a> to extract value out of them.</p>\n\n<p>Then, You can pass those values to <code>DBI</code> and connect to database.  </p>\n\n<pre><code>my $cfg = Config::IniFiles -&gt; new( -file =&gt; 'path/config/database_config.ini' );\n\nmy $dbinst = $cfg -&gt; val( 'DATABASE', 'DBINST' );\nmy $dbuser = $cfg -&gt; val( 'DATABASE', 'DBUSER' );\nmy $dbpass = $cfg -&gt; val( 'DATABASE', 'DBPASS' );\n\nmy $dbh = DBI-&gt;connect( \"dbi:Oracle:$dbinst\", $dbuser, $dbpass)\n    or die \"Database connection not made: $DBI::errstr\";\n</code></pre>\n\n<p>Here is config file:</p>\n\n<pre><code>[DATABASE]\n  # DB string\n  DBINST=XXX\n  # database username\n  DBUSER=XXX\n  # database password\n  DBPASS=XXX\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3105, "user_id": 4816207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jKNv2qYjH3g/AAAAAAAAAAI/AAAAAAAACnA/ZdLmPpJCAas/photo.jpg?sz=128", "display_name": "Prashant Pokhriyal", "link": "https://stackoverflow.com/users/4816207/prashant-pokhriyal"}, "is_accepted": false, "score": 0, "last_activity_date": 1558677400, "last_edit_date": 1558677400, "creation_date": 1484635740, "answer_id": 41690646, "question_id": 41689887, "link": "https://stackoverflow.com/questions/41689887/how-to-call-dbi-connect-parameters-from-text-file-in-perl-script/41690646#41690646", "title": "How to call DBI connect parameters from text file in perl script?", "body": "<p>Create a file database.conf and you can write it in any format CSV, XLS or simple delimited Flat file so that you can easily parse it. I'm considering a format where I'm using '=' as a separator.</p>\n\n<pre><code># filename database.conf\nHOST=dbi:Oracle:DB_INST\nUSER=USER,\nPASSWORD=PASS\n</code></pre>\n\n<p>Now in your perl script use following code for retrieving it:</p>\n\n<pre><code>my $db_conf_file = 'database.conf';\nmy $delimiter = '='; # You can change the delimiter accordingly\nmy %db;\n\nopen(my $FH, '&lt;', $db_conf_file) or die \"Could not open $db_conf_file\";\n\nwhile(my $line = &lt;$FH&gt;){\n  chomp $line;\n  my @fields = split $delimiter , $line;\n  $db-&gt;{$fields[0]} = $fields[1];\n}\n\nclose($FH);\n\n$dbh = DBI-&gt;connect($db-&gt;{HOST}, $db-&gt;{USER},$DB-&gt;{PASSWORD})\n  or die \"Database connection not made: $DBI::errstr\";\n..............\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1484724199, "creation_date": 1484724199, "answer_id": 41713531, "question_id": 41689887, "link": "https://stackoverflow.com/questions/41689887/how-to-call-dbi-connect-parameters-from-text-file-in-perl-script/41713531#41713531", "title": "How to call DBI connect parameters from text file in perl script?", "body": "<p>You already have code that reads data from a file:</p>\n\n<pre><code>open (FILE,\"header.asp\");\nmy $file = &lt;FILE&gt;;\nclose(FILE);\n</code></pre>\n\n<p>So I'm not really sure what problem you are having.</p>\n\n<p>Let's assume that you put the details in a file called credentials.txt which looks like this like this:</p>\n\n<pre><code>Oracle:DB_INST:USER:PASS\n</code></pre>\n\n<p>You could then write a subroutine called <code>get_credentials()</code> which looks like this:</p>\n\n<pre><code>sub get_credentials {\n  my $cred_file = 'credentials.txt';\n  open my $cred_fh, '&lt;', $cred_file\n    or die \"Can't open $cred_file: $!\\n\"\n\n  my $data = &lt;$cred_fh&gt;;\n  chomp $data;\n  return split /:/, $data;\n}\n</code></pre>\n\n<p>You would then call it like this:</p>\n\n<pre><code>my ($type, $instance, $user, $pass) = get_credentials();\nmy $dbh = DBI-&gt;connect( \"dbi:$type:$instance\", $user, $pass)\n  or die \"Database connection not made: $DBI::errstr\";\n</code></pre>\n\n<p>A few other comments on your code.</p>\n\n<ul>\n<li><strong>Always</strong> include <code>use strict</code> and <code>use warnings</code> in your code.</li>\n<li>Why <code>use Shell</code>? I don't think you use it?</li>\n<li>You create two CGI objects (<code>$cgi</code> and <code>$CGI_ST</code>). You only need one.</li>\n<li>We've known since the last millennium that putting raw HTML inside your Perl code is a terrible idea. Look at using templates to separate HTML from Perl.</li>\n<li>You print two CGI headers (<code>print $cgi-&gt;header</code> and <code>print \"Content-type: text/html\\n\\n\"</code>. That's one too many.</li>\n<li>Always check the return value from <code>open()</code> (<code>open (FILE,\"header.asp\") or die ...</code>)</li>\n<li>Use the three-arg version of <code>open()</code> and lexical filehandles (<code>open (my $fh, '&lt;', 'header.asp') or die ...</code>).</li>\n<li>Don't quote variables unnecessarily (<code>print \"$file\"</code> is better written <code>print $file</code> and <code>if ( \"$product\" eq \"2\" &amp;&amp; \"$environment\" eq \"MPET\" )</code> is better written <code>if ( $product eq \"2\" &amp;&amp; $environment eq \"MPET\" )</code>.</li>\n<li>I think you mean <code>$cgi-&gt;start_table()</code>, not <code>$cgi-&gt;table()</code>. But the <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#HTML-Generation-functions-should-no-longer-be-used\" rel=\"nofollow noreferrer\">HTML generation functions have been deprecated</a>. Please don't use them.</li>\n</ul>\n\n<p>Finally, and most importantly, CGI is old technology. Please read <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow noreferrer\">CGI::Alternatives</a> and switch to a modern technology that is based on PSGI.</p>\n"}], "owner": {"reputation": 17, "user_id": 7367867, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-t4n7BCbKdKU/AAAAAAAAAAI/AAAAAAAAAbY/1VhX27f9h1c/photo.jpg?sz=128", "display_name": "manav sharma", "link": "https://stackoverflow.com/users/7367867/manav-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 916, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1558677400, "creation_date": 1484632390, "last_edit_date": 1484632934, "question_id": 41689887, "link": "https://stackoverflow.com/questions/41689887/how-to-call-dbi-connect-parameters-from-text-file-in-perl-script", "title": "How to call DBI connect parameters from text file in perl script?", "body": "<p>I'm having a code in which i'm extracting data from table and displaying the O/P. But i want to give connection string from txt file(not hardcoded in script) . Can anyone help how i can provide below values from input file.</p>\n\n<pre><code>$dbh = DBI-&gt;connect( 'dbi:Oracle:DB_INST',\"USER\",\"PASS\")\n    or die \"Database connection not made: $DBI::errstr\";\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>#!/usr/bin/perl\n$ENV{ORACLE_HOME}='/ora/11.2.0.3';\n$LD_LIBRARY_PATH='/ora/11.2.0.3/lib';\nuse Shell;\nuse DBI ;\nuse CGI ;\nmy $cgi = new CGI;\nprint $cgi-&gt;header;\nmy $dbh;\n$CGI_ST = new CGI;\n#################### FUNCTIONS DECLARATION ########################################################\nsub Start_HTM\n{\n        print \"&lt;html&gt;\\n\\n\";\n        print \"&lt;title&gt;LOGICAL DATE CHECK&lt;/title&gt;\\n\\n\";\n        print \"&lt;body&gt;\\n&lt;center&gt;\\n\";\n        print \"&lt;hr&gt;&lt;h1 align=center&gt;&lt;font color=#FFA500&gt;&lt;u&gt;LOGICAL DATE CHECK&lt;/u&gt;&lt;/font&gt;&lt;/h1&gt;\\n\";\n}\nsub End_HTM\n{\n        print \"&lt;a href=\\\"#\\\" onClick=window.close()&gt;Close Window&lt;/a&gt;&lt;/b&gt;&lt;/small&gt;\";\n        print \"&lt;/center&gt;\\n&lt;/body&gt;\\n&lt;/html&gt;\";\n}\nsub DisBackButton\n{\n        print \"&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;INPUT TYPE=button value=Back onClick=history.back()&gt;\";\n}\n####################################################################################################\nprint \"Content-type: text/html\\n\\n\";\nopen (FILE,\"header.asp\");\nmy $file = &lt;FILE&gt;;\nclose(FILE);\nprint \"$file\";\nprint \"&lt;SCRIPT LANGUAGE=JavaScript&gt;\";\nprint \"&lt;/script&gt;\";\nmy $environment=$CGI_ST-&gt;param(\"environment\");\nmy $product=$CGI_ST-&gt;param(\"product\");\nStart_HTM();\nif ( \"$product\" eq \"2\" &amp;&amp; \"$environment\" eq \"MPET\" ) {\nprint $cgi-&gt;start_html(-title=&gt;'Basic CGI');\n# you should change the connect method call to use the DBD you are\n# using. The following examples all use DBD::ODBC and hence the\n# first argument to the connect method is 'dbi:ODBC:DSN'.\nmy $dsn = \"DBI:Oracle:$db_inst\";\n$dbh = DBI-&gt;connect( 'dbi:Oracle:DB_INST',\"USER\",\"PASS\") or die \"Database connection not made: $DBI::errstr\";\nmy $sql = qq{SELECT logical_date,logical_date_type from logical_date where expiration_date is null };\nmy $sth = $dbh-&gt;prepare( $sql ) || die $dbh-&gt;errstr;\n$sth-&gt;execute() || die $dbh-&gt;errstr;\nprint $cgi-&gt;table( { -border=&gt;\"1\" } );\n while (@data = $sth-&gt;fetchrow_array()) {\n $Logical_Date_O = $data[0];\n $Logical_Date_B = $data[1];\n $Logical_Date_R = $data[2];\nprint \"&lt;tr&gt;&lt;td&gt;&lt;font color='black'&gt;$Logical_Date_O&lt;/font&gt;&lt;/td&gt;\n&lt;td&gt;$Logical_Date_B&lt;/td&gt;&lt;td&gt;$Logical_Date_R&lt;/td&gt;&lt;/tr&gt;\\n\";\n}\n} \nprint $cgi-&gt;end_table;\nprint $cgi-&gt;end_html;\n</code></pre>\n"}, {"tags": ["windows", "perl", "activeperl"], "comments": [{"owner": {"reputation": 1, "user_id": 7428702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58afd4ddc04696ee80e292b694ab87f3?s=128&d=identicon&r=PG&f=1", "display_name": "H1Nerd1", "link": "https://stackoverflow.com/users/7428702/h1nerd1"}, "edited": false, "score": 0, "creation_date": 1485068233, "post_id": 41689798, "comment_id": 70765888, "body": "@Borodin The output for <code>perl -E &quot;say for @INC&quot;</code> is: <code>C:&#47;Program Files&#47;Perl64&#47;site&#47;lib C:&#47;Program Files&#47;Perl64&#47;lib .</code> When I enter <code>set PERLLIB</code> and <code>set PERL5LIB</code>, it indicates that there is no environment variable set."}, {"owner": {"reputation": 1, "user_id": 7428702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58afd4ddc04696ee80e292b694ab87f3?s=128&d=identicon&r=PG&f=1", "display_name": "H1Nerd1", "link": "https://stackoverflow.com/users/7428702/h1nerd1"}, "edited": false, "score": 0, "creation_date": 1485149240, "post_id": 41689798, "comment_id": 70787599, "body": "I ended up using a <code>PRINT</code>/<code>EXIT</code> combination instead of a <code>DIE</code> command, and it seems to have solved the problem. I don&#39;t think I know enough about the mechanics of <code>EXIT</code> vs. <code>DIE</code>, but it seems to be working, so moving on with my life. Thanks for the help!"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7428702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58afd4ddc04696ee80e292b694ab87f3?s=128&d=identicon&r=PG&f=1", "display_name": "H1Nerd1", "link": "https://stackoverflow.com/users/7428702/h1nerd1"}, "edited": false, "score": 0, "creation_date": 1484894836, "post_id": 41692825, "comment_id": 70707027, "body": "Thanks for this. There&#39;s only one entry on the list: C:\\Program Files\\Perl64\\bin\\perl.exe (which is where it&#39;s supposed to be). How do I check <code>PERLLIB</code> and <code>PERL5LIB</code>? Sorry, newb question."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 7428702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58afd4ddc04696ee80e292b694ab87f3?s=128&d=identicon&r=PG&f=1", "display_name": "H1Nerd1", "link": "https://stackoverflow.com/users/7428702/h1nerd1"}, "edited": false, "score": 0, "creation_date": 1484918498, "post_id": 41692825, "comment_id": 70720660, "body": "Enter <code>set PERLLIB</code> etc."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 7428702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58afd4ddc04696ee80e292b694ab87f3?s=128&d=identicon&r=PG&f=1", "display_name": "H1Nerd1", "link": "https://stackoverflow.com/users/7428702/h1nerd1"}, "edited": false, "score": 0, "creation_date": 1484918632, "post_id": 41692825, "comment_id": 70720743, "body": "Also show the output for <code>perl -E &quot;say for @INC&quot;</code>. It is probably best if you add information to your question rather than putting it in comments."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1484643545, "creation_date": 1484643545, "answer_id": 41692825, "question_id": 41689798, "link": "https://stackoverflow.com/questions/41689798/perl-command-line-interpreter-has-stopped-working-as-a-general-error-message-i/41692825#41692825", "title": "&quot;Perl Command Line Interpreter has stopped working&quot; as a general error message in Windows 10", "body": "<p>The problem is that perl is dying, and the error condition is never reached</p>\n\n<p>It's hard to be certain, but I would guess that you're picking up an old, faulty installation of perl instead of the one you think you are. That would explain why installing  Strawberry Perl shows no change</p>\n\n<p>Try entering</p>\n\n<pre><code>where perl\n</code></pre>\n\n<p>and see if there are multiple entries in the list. The entry at the top is the one that will be run in response to a <code>perl</code> command</p>\n\n<p>Locate the <code>perl.exe</code> file that you want to run, and specify it explicitly on the command line, like this</p>\n\n<pre><code>C:\\path\\to\\perl.exe\n</code></pre>\n\n<p>(obviously, giving the correct path)</p>\n\n<p>Also check the values of <code>PERLLIB</code> and <code>PERL5LIB</code> to make sure perl isn't picking up modules built from a different version</p>\n"}], "owner": {"reputation": 1, "user_id": 7428702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58afd4ddc04696ee80e292b694ab87f3?s=128&d=identicon&r=PG&f=1", "display_name": "H1Nerd1", "link": "https://stackoverflow.com/users/7428702/h1nerd1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2045, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527483960, "creation_date": 1484631887, "question_id": 41689798, "link": "https://stackoverflow.com/questions/41689798/perl-command-line-interpreter-has-stopped-working-as-a-general-error-message-i", "title": "&quot;Perl Command Line Interpreter has stopped working&quot; as a general error message in Windows 10", "body": "<p>I'm running ActivePerl 5.24 build 2401 x64. Previously, when I was running this build and version in Windows 7, my scripts, when encountering a fatal error, would indicate the line and reason (e.g. \"Line too long in  file, line 11\") in the command prompt from which I was running it. This was great for me to figure out what was wrong and to debug the file.</p>\n\n<p>I've recently migrated to a Windows 10 system. But now, whenever encountering an error in a script, all that happens is a window pops up saying \"Perl Command Line Interpreter has stopped working\". There is no additional information, and it's a pain in the butt because I have no idea where the script errored and crashed.</p>\n\n<p>To be clear, Perl is installed correctly on the Windows 10 system. When I corrected the script and/or data file, everything ran swimmingly. It's only when there's an error that it displays this message, and it's useless at helping me figure out what's wrong.</p>\n\n<p>I've taken to reconnecting my old system and running any scripts from there, because otherwise it's nearly impossible to figure out what's going on.</p>\n\n<p>Any pointers? Any way I can have the error messages print in Windows 10 in the command prompt rather than popping up a useless message? Or is there another debugging setup that I can use? I tried using perl -d but the debugger is a little too much for my level right now.</p>\n\n<p>For the record, I tried using the latest StrawberryPerl 5.24 build and ran into the exact same problem.</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484595964, "post_id": 41683490, "comment_id": 70564919, "body": "Okay, so do your files actually contain <code>&#39;blank line&#39;</code>, or is ther just a blank line there? Is ther an empty line before the end of the file? What about the lines that appear blank in your post; are they in the file or just part of your layout?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1484596580, "post_id": 41683490, "comment_id": 70565241, "body": "The problem I have here is that the task is trivial. It is as if a toddler asked &quot;Please mummy will you colour my pictures for me?&quot; or perhaps it&#39;s like asking to copy someone else&#39;s homework. Either way, you&#39;re abusing the fact that software solutions may be communicated digitally, which is unique amongst the engineering professions. You would <i>never</i> ask an automotive engineer, a bricklayer, a rocket scientist, or even your PC maintenance engineer a similar question! I think you should invest a few days of your time in learning to use a tool that is likely to be very useful to you."}, {"owner": {"reputation": 19, "user_id": 7426987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68de436b42ac19536e9a177dcbdb224c?s=128&d=identicon&r=PG&f=1", "display_name": "spheex12", "link": "https://stackoverflow.com/users/7426987/spheex12"}, "edited": false, "score": 0, "creation_date": 1484762730, "post_id": 41683490, "comment_id": 70647325, "body": "Thank you for the clash, but as a student, I have other worries than learning to code at the moment. I have results to give and I am not a computer guy. But ok, thank you for the remark.  And yes, it&#39;s a blank line, empty if you want. And yes, the lines that are blank in the script that I posted have to be blank.  Thank for your answer."}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484779868, "post_id": 41683490, "comment_id": 70656153, "body": "@Borodin: I don&#39;t think the task is trivial: <i>appending</i> to a file is trivial (<code>&gt;&gt;</code>), <i>prepending</i> is not, especially if it is to be side-effect free and fast (not an issue here). Aside from incidentals (<code>&#39;blank line&#39;</code>), the question is well-defined, and even contains a solution attempt (however far from an effective solution it may be). Before it was closed, effective solutions were offered, and there&#39;d be room for more. While there&#39;s certainly room for improvement, I don&#39;t think this question should have been closed, nor do I think it deserves the down-votes it got."}], "answers": [{"comments": [{"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 0, "creation_date": 1484597698, "post_id": 41683582, "comment_id": 70565723, "body": "That&#39;ll work, but note that <code>head</code> isn&#39;t needed at all, given that the entire <code>seed.com</code> file should be prepended. Also, while a subshell does no harm here, a group command (<code>{ ...;  ...; }</code>) is sufficient; that said, if both files are <code>cat</code>ted, a simple command will do: <code>cat seed.com &quot;test$i.com&quot;</code>, as in ikegami&#39;s answer."}, {"owner": {"reputation": 19, "user_id": 7426987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68de436b42ac19536e9a177dcbdb224c?s=128&d=identicon&r=PG&f=1", "display_name": "spheex12", "link": "https://stackoverflow.com/users/7426987/spheex12"}, "edited": false, "score": 0, "creation_date": 1484763372, "post_id": 41683582, "comment_id": 70647721, "body": "Thank you, I used Ikegami&#39;s solution and it worked. Thank you."}], "tags": [], "owner": {"reputation": 2079, "user_id": 200294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6c1e3a10307f666b31b2000b50802983?s=128&d=identicon&r=PG", "display_name": "Michael Rusch", "link": "https://stackoverflow.com/users/200294/michael-rusch"}, "is_accepted": false, "score": 0, "last_activity_date": 1484603991, "last_edit_date": 1484603991, "creation_date": 1484594382, "answer_id": 41683582, "question_id": 41683490, "link": "https://stackoverflow.com/questions/41683490/add-lines-on-the-top-of-a-set-of-files/41683582#41683582", "title": "Add lines on the top of a set of files", "body": "<p>The problem is with this line</p>\n\n<pre><code>head -7 seed.com | tail -7 &gt;&gt; test$i.com\n</code></pre>\n\n<p>I would do it like this</p>\n\n<pre><code>( head -n 7 seed.com ; cat test$i.com ) &gt; full_test$i.com\n</code></pre>\n\n<p>That will leave the <code>test*.com</code> files as they are, and create new files named <code>full_test*.com</code> that will be the combined versions.</p>\n\n<p>You could update the <code>test*.com</code> files directly, but if you accidentally ran the script twice then each <code>test*.com</code> would then have two headers.</p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 7426987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68de436b42ac19536e9a177dcbdb224c?s=128&d=identicon&r=PG&f=1", "display_name": "spheex12", "link": "https://stackoverflow.com/users/7426987/spheex12"}, "edited": false, "score": 0, "creation_date": 1484763345, "post_id": 41684192, "comment_id": 70647702, "body": "Thank you, it&#39;s working perfectly."}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "reply_to_user": {"reputation": 19, "user_id": 7426987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68de436b42ac19536e9a177dcbdb224c?s=128&d=identicon&r=PG&f=1", "display_name": "spheex12", "link": "https://stackoverflow.com/users/7426987/spheex12"}, "edited": false, "score": 0, "creation_date": 1484779283, "post_id": 41684192, "comment_id": 70655938, "body": "@spheex12: Glad to hear it. Allow me to give you the standard advice to newcomers: If an answer solves your problem, please accept it by clicking the large check mark (\u2713) next to it and optionally also up-vote it (up-voting requires at least 15 reputation points). If you found other answers helpful, please up-vote them. Accepting and up-voting helps future readers. Please see <a href=\"http://stackoverflow.com/help/someone-answers\">the relevant help-center article</a>."}, {"owner": {"reputation": 19, "user_id": 7426987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68de436b42ac19536e9a177dcbdb224c?s=128&d=identicon&r=PG&f=1", "display_name": "spheex12", "link": "https://stackoverflow.com/users/7426987/spheex12"}, "edited": false, "score": 0, "creation_date": 1484858738, "post_id": 41684192, "comment_id": 70695152, "body": "It&#39;s done. Thank you."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 0, "last_activity_date": 1484597548, "last_edit_date": 1484597548, "creation_date": 1484597097, "answer_id": 41684192, "question_id": 41683490, "link": "https://stackoverflow.com/questions/41683490/add-lines-on-the-top-of-a-set-of-files/41684192#41684192", "title": "Add lines on the top of a set of files", "body": "<p>You can't actually insert into a file. You can only write over a file. Inserting into a file would look something like the following before being optimized:</p>\n\n<ol>\n<li>Set buf_size = num_bytes_to_insert.</li>\n<li>Open file for rw.</li>\n<li>Set pos = file_size.</li>\n<li>While pos > 0,\n\n<ol>\n<li>Set dest_pos = pos.</li>\n<li>Set pos = pos - buf_size.</li>\n<li>Set pos = 0 if pos &lt; 0.</li>\n<li>Seek to position pos.</li>\n<li>Set num_bytes_to_read = dest_pos - pos.</li>\n<li>Read num_bytes_to_read bytes.</li>\n<li>Seek to position pos + num_bytes_to_insert.</li>\n<li>Write the bytes read.</li>\n</ol></li>\n<li>Seek to position 0.</li>\n<li>Write the data to be inserted.</li>\n</ol>\n\n<p>Advantages:</p>\n\n<ul>\n<li>File permissions are preserved.</li>\n<li>Fixed memory overhead (O(1) memory usage).</li>\n</ul>\n\n<p>Disadvantages:</p>\n\n<ul>\n<li>Complex</li>\n<li>Errors result in loss of data.</li>\n</ul>\n\n<hr>\n\n<p>There are two simpler approaches, one involving reading the entire file into memory, and one involving a temporary file. The following is the latter:</p>\n\n<pre><code>cat seed.com \"test$i.com\" &gt;\"test$i.com.tmp\" &amp;&amp; mv \"test$i.com.tmp\" \"test$i.com\"\n</code></pre>\n\n<p>Advantages:</p>\n\n<ul>\n<li>Simple</li>\n<li>Errors don't result in loss of data.</li>\n</ul>\n\n<p>Disadvantages:</p>\n\n<ul>\n<li>File permissions are lost.</li>\n<li>Memory overhead proportional to the size of the file (O(N) memory usage).</li>\n</ul>\n"}], "owner": {"reputation": 19, "user_id": 7426987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68de436b42ac19536e9a177dcbdb224c?s=128&d=identicon&r=PG&f=1", "display_name": "spheex12", "link": "https://stackoverflow.com/users/7426987/spheex12"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "closed_date": 1484609555, "accepted_answer_id": 41684192, "answer_count": 2, "score": -5, "last_activity_date": 1484779432, "creation_date": 1484593986, "last_edit_date": 1592644375, "question_id": 41683490, "link": "https://stackoverflow.com/questions/41683490/add-lines-on-the-top-of-a-set-of-files", "closed_reason": "Not suitable for this site", "title": "Add lines on the top of a set of files", "body": "\n<p>I am absolutely not a programmer and have no knowledge in this field.</p>\n<p>I always have to add seven lines to the top of my files in order to run them and it's boring.</p>\n<p>Is it possible to create a Perl script which would copy the same six lines from a file to a set of files which have the same name except for the number.</p>\n<h3>My seed file would be like this</h3>\n<pre class=\"lang-none prettyprint-override\"><code>nproc=8\nmem=48gb\nB3LYP/6-31g(d,p) opt\n\ninput\n\n1 1\n</code></pre>\n<p>And the names of the files are <code>test1.com</code>, <code>test2.com</code>, etc.</p>\n<p>Their form is like this</p>\n<pre class=\"lang-none prettyprint-override\"><code>H 2.3\nC 4.1\n'blank line'\n</code></pre>\n<p>I would like to transform them into</p>\n<pre class=\"lang-none prettyprint-override\"><code>nproc=8\nmem=48gb\nB3LYP/6-31g(d,p) opt\n\ninput\n\n1 1\nH 2.3\nC 4.1\n'blank line'\n</code></pre>\n<p>I tried modifying a script that I found, but it copied the seven lines at the bottom.</p>\n<p>Here is the script I used and which doesn't work (the file is a .sh):</p>\n<pre class=\"lang-none prettyprint-override\"><code>#!/bin/bash\n\nfor i in `seq 1 1 2` ; do\n\necho &quot;test&quot;$i.com\n\nhead -7 seed.com | tail -7 &gt;&gt; test$i.com\n\ndone\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1484583404, "post_id": 41680538, "comment_id": 70558487, "body": "It won&#39;t work in the first place - <code>-pi</code> will cause your thing to iterate line by line anyway."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484589634, "post_id": 41680538, "comment_id": 70561825, "body": "You are starting from the wrong place and your question is misleading. I suggest that you ask another question, showing what you have tried, and describe the transformation that you want to apply to your file."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484589713, "post_id": 41680538, "comment_id": 70561859, "body": "You really shouldn&#39;t be asking your users to enter regex patterns!"}, {"owner": {"reputation": 301, "user_id": 2629246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6138d9302aeb99c9e3d2fc3459677e6?s=128&d=identicon&r=PG", "display_name": "zjeraar", "link": "https://stackoverflow.com/users/2629246/zjeraar"}, "edited": false, "score": 0, "creation_date": 1484596794, "post_id": 41680538, "comment_id": 70565332, "body": "The users are specialists with regex, but that is not the point. I don&#39;t see how the question is misleading, but I can see you judge it as poorly formulated. It&#39;s kind of difficult to explain, since the text files vary and so do the regexes. The users enter regexes to transform each line to a line that they want. Sometimes a regex looks like the one in the question. I have this perl &quot;template&quot; <code>perl -pi -e &#39;s{[regex]}{\\n[output]}i &amp;&amp; s{.*\\n}{}&#39; sample_file</code> which works, except in the example I give in the question, then there needs to be an extra \\n after [output]. I hope this clarifies it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484598740, "post_id": 41680538, "comment_id": 70566165, "body": "Please put your clarification into your question. It may be &quot;difficult to explain&quot; but it&#39;s <b><i>impossible</i></b> to program <i>until</i> you have explained it. <i>&quot;specialists with regex&quot;</i> are extremely rare, and I hope that you chose your words carefully. Your implementation sounds disastrous, even if we ignore malicious input. Assuming you have so many specialists, why don&#39;t you get one of them to fix your problem?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484599098, "post_id": 41680538, "comment_id": 70566318, "body": "<i>I have this perl &quot;template&quot; ... which works, except in the example I give in the question</i>. Yes, until the next case where it won&#39;t work. And then the third case that&#39;s found. There is no way that this should be a one-liner; I would quote two weeks and 500 lines of Perl to implement what you&#39;re trying to do, and a month of testing before letting it close to live data. You are allowing your users to write <i>Perl code</i> (like <code>unlink &lt;*&gt;</code>) that your system executes without verification. Although that is foolish, I am certain that you will go ahead and implement it. May God keep you safe."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1484606290, "post_id": 41680538, "comment_id": 70569414, "body": "If we were to remove the silly &quot;one liner&quot; requirement, and the requirement that users be allowed to pass regular expressions as input, perhaps you could explain the actual objective -- as in, what is it that your users need to accomplish when calling your script?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1484660785, "last_edit_date": 1484660785, "creation_date": 1484620214, "answer_id": 41688181, "question_id": 41680538, "link": "https://stackoverflow.com/questions/41680538/search-and-replace-one-liner-preserve-newline-characters/41688181#41688181", "title": "Search and replace one-liner preserve newline characters", "body": "<p>Generally speaking, you want to <code>chomp</code> inputs lines, and add a newline to output lines. <code>-l</code> (in conjunction with <code>-n</code> or <code>-p</code>) will do both.</p>\n\n<p>For example, the following doesn't replace the newline with <code>!</code> because it was removed by <code>-l</code> (and subsequently re-added by the <code>print</code>).</p>\n\n<pre><code>perl -i -ple's/\\s/!/g' file\n</code></pre>\n\n<hr>\n\n<p>By the way, <code>\\1</code> (\"match what the first capture captured\") makes no sense in a substitution. You want <code>$1</code> (as <code>-w</code> would tell you).</p>\n"}], "owner": {"reputation": 301, "user_id": 2629246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6138d9302aeb99c9e3d2fc3459677e6?s=128&d=identicon&r=PG", "display_name": "zjeraar", "link": "https://stackoverflow.com/users/2629246/zjeraar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1484660785, "creation_date": 1484583058, "last_edit_date": 1484589477, "question_id": 41680538, "link": "https://stackoverflow.com/questions/41680538/search-and-replace-one-liner-preserve-newline-characters", "title": "Search and replace one-liner preserve newline characters", "body": "<p>sample_file:</p>\n\n<pre><code>this is a test line!\nthis is a test line!\nthis is a test line!\nthis is a test line!\n</code></pre>\n\n<p>I'm using a Perl one-liner to replace text like this:</p>\n\n<pre><code>perl -pi -e 's{this(.*)\\s}{\\n\\1\\n}i &amp;&amp; s{.*\\n}{}' sample_file\n</code></pre>\n\n<p>The <code>this(.*)\\s</code> part and <code>\\1</code> part are variable and I cannot change that (it comes from user input).</p>\n\n<p>My problem is that I need to adjust the <code>{\\n\\1\\n}</code> part depending on whether the first regex includes the newline character .</p>\n\n<p>For example, if the first regex is <code>{this(.*)\\s}</code> I need <code>{\\n\\1\\n}</code>, but if the first is like <code>{(.*)a test}</code> I need <code>{\\n\\1}</code>.</p>\n\n<p>How can I check whether the newline character is lost and put it back if necessary?</p>\n"}, {"tags": ["regex", "perl", "perl-module", "perl-data-structures", "mod-perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1484580191, "post_id": 41678516, "comment_id": 70556484, "body": "If you are simply fetching a web resource then you would be better off using one of Perl&#39;s libraries such as <code>LWP</code> to do this instead of shelling out to run <code>curl</code>. Presumably you&#39;re doing it this way in an attempt to stay in your comfort zone? Why do you have the <b>insecure</b> option <code>-k</code> enabled?"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1484595274, "post_id": 41683613, "comment_id": 70564609, "body": "<i>&quot;You should not use cURL&quot;</i> I think you should substantiate that. Why shouldn&#39;t the OP use <code>curl</code>?"}], "tags": [], "owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "is_accepted": false, "score": -1, "last_activity_date": 1484595233, "last_edit_date": 1592644375, "creation_date": 1484594472, "answer_id": 41683613, "question_id": 41678516, "link": "https://stackoverflow.com/questions/41678516/replace-http-response-header-status-from-curl-output/41683613#41683613", "title": "Replace HTTP response header status from curl output", "body": "\n<p>You should not use cURL; there are Perl modules based on <a href=\"https://metacpan.org/pod/LWP\" rel=\"nofollow noreferrer\"><code>LWP</code></a>.</p>\n<p>In your example you try to match a string and then replace the status code from <code>200</code> to <code>500</code> if the string matched. HTML should not ever be matched with regular expressions. Instead you should use a DOM parser which can also handle nested tags easily.</p>\n<p>According to the RFC, <code>HTTP 200</code> is only for successful requests, so the API does not meet the standard.</p>\n<p>You could do it with the following code:</p>\n<h3>template.html</h3>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;HTML&gt;\n&lt;HEAD&gt;\n&lt;TITLE&gt;Error retrieving data (1000)&lt;/TITLE&gt;\n&lt;/HEAD&gt;\n&lt;BODY&gt;\n&lt;H1&gt;Error retrieving data (1000)&lt;/H1&gt;\n&lt;/BODY&gt;\n&lt;/HTML&gt;\n</code></pre>\n<p><strong>Perl code</strong></p>\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\n\nuse Mojo::UserAgent;\n\nuse feature 'say';\n\nmy $ua = Mojo::UserAgent-&gt;new;\nmy $response = $ua-&gt;get(&quot;http://myserver.com/iis/mybroker/test.html&quot;)-&gt;res-&gt;dom-&gt;at('h1')-&gt;text;\nsay $response eq &quot;Error retrieving data (1000)&quot; ? &quot;Status code should be 500&quot; : &quot;Status code 200 is correct&quot;;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1484608944, "last_edit_date": 1484608944, "creation_date": 1484594527, "answer_id": 41683626, "question_id": 41678516, "link": "https://stackoverflow.com/questions/41678516/replace-http-response-header-status-from-curl-output/41683626#41683626", "title": "Replace HTTP response header status from curl output", "body": "<p>You've not answered the comments for four hours now, so here's a wild guess</p>\n\n<p>This is your program</p>\n\n<pre><code>#!/usr/bin/perl\n\nmy $curlvalue = `curl -vk http://myserver.com/test.html`;\n\n$search_string = \"Error retrieving data\";\n\nif ( $curlvalue =~ m/$search_string/isg ) {\n  print $curlvalue;\n  print \"AFTER OUTPUT\\n\";\n  $value =~ s/HTTP\\/1.1 200/HTTP\\/1.1 500/g;\n}\n\nprint $curlvalue;\n</code></pre>\n\n<p>It has neither <code>use strict</code> nor <code>use warnings 'all'</code> at the top, which are essential for any Perl program, and especially if you are asking for help with it.</p>\n\n<p>My wild guess is that you're expecting the full output of <code>curl</code>, and you're trying to write a <em>filter</em> that will amend the reported status in specific cases. Is that right?</p>\n\n<p>If so, then the problem is your substitution line</p>\n\n<pre><code>$value =~ s/HTTP\\/1.1 200/HTTP\\/1.1 500/g;\n</code></pre>\n\n<p>Because there is no <code>$value</code> variable, this line has no effect. You probably want <code>$curlvalue</code>, and I would use a different delimiter to avoid all of those escapes</p>\n\n<p>There's also no need for the <code>/g</code> modifier, nor various other stuff, so I think your code should look like this</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\n\nmy $curlvalue = `curl -v http://myserver.com/test.html`;\n\nmy $search = \"Error retrieving data\";\n\nif ( $curlvalue =~ /$search/i ) {\n\n    print \"BEFORE CHANGES\\n\";\n    print $curlvalue;\n\n    $curlvalue =~ s|HTTP/1.1 200|HTTP/1.1 500|;\n}\n\nprint \"AFTER CHANGES\\n\";\nprint $curlvalue;\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 3276813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c6ae0920248d6ae6397ef08e56cce21?s=128&d=identicon&r=PG&f=1", "display_name": "user3276813", "link": "https://stackoverflow.com/users/3276813/user3276813"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 573, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1484608944, "creation_date": 1484576487, "last_edit_date": 1484595321, "question_id": 41678516, "link": "https://stackoverflow.com/questions/41678516/replace-http-response-header-status-from-curl-output", "title": "Replace HTTP response header status from curl output", "body": "\n\n<p>Is there a way to replace the <code>HTTP/1.1 200</code> status with <code>HTTP/1.1 500</code> status after getting the response from the curl command?</p>\n\n<p>If the body of the response contains the string <code>Error retrieving data</code> then the status will ordinarily be <code>HTTP/1.1 200</code>. I need to change it to <code>HTTP/1.1 500</code> (internal server error)</p>\n\n<p>For example</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nmy $curlvalue = `curl -vk http://myserver.com/test.html`;\n$search_string = \"Error retrieving data\";\n\nif ( $curlvalue =~ m/$search_string/isg ) {\n  print $curlvalue;\n  print \"AFTER OUTPUT\\n\";\n  $value =~ s/HTTP\\/1.1 200/HTTP\\/1.1 500/g;\n}\n\nprint $curlvalue;\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>perl test.pl**\n\n** About to connect() to myserver.com (#0)\n*   Trying 111.111.111.11... connected\n* Connected to myserver.comt (11.111.111.11) port 80 (#0)\n&gt; GET /iis/mybroker/test.html HTTP/1.1\n&gt; User-Agent: curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.19.1     Basic ECC zlib/1.2.3 libidn/1.18 libssh2/1.4.2\n&gt; Host: myserver.com\n&gt; Accept: */*\n&gt; \n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                             Dload  Upload   Total   Spent    Left  Speed\n  0     0    0     0    0     0      0      0 --:--:--  0:00:02 --:--:--     0   \n&lt; HTTP/1.1 200 OK\n&lt; Date: Mon, 16 Jan 2017 13:47:10 GMT\n&lt; Server: Apache\n&lt; X-Frame-Options: SAMEORIGIN\n&lt; Transfer-Encoding: chunked\n&lt; Content-Type: text/html; charset=ISO-8859-1\n&lt; \n{ [data not shown]\n105   315    0   315    0     0    155      0 --:--:--  0:00:02 --:--:--   155*      Connection #0 to host myserver.com left intact\n* Closing connection #0\n&lt;HTML&gt;\n&lt;HEAD&gt;\n&lt;TITLE&gt;Error retrieving data (1000)&lt;/TITLE&gt;\n&lt;/HEAD&gt;\n&lt;BODY&gt;\n&lt;H1&gt;Error retrieving data (1000)&lt;/H1&gt;\n&lt;/BODY&gt;\n&lt;/HTML&gt;*\n</code></pre>\n\n<p><em>AFTER OUTPUT MESSAGE not showing HTTP header details</em></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&lt;HTML&gt;\n&lt;HEAD&gt;\n&lt;TITLE&gt;Error retrieving data (1000)&lt;/TITLE&gt;\n&lt;/HEAD&gt;\n&lt;BODY&gt;\n&lt;H1&gt;Error retrieving data (1000)&lt;/H1&gt;\n&lt;/BODY&gt;\n&lt;/HTML&gt;\n</code></pre>\n"}, {"tags": ["perl", "closures"], "comments": [{"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 1, "creation_date": 1484650888, "post_id": 41677754, "comment_id": 70586624, "body": "This sort of thing is often called a &quot;factory&quot;, and it&#39;s something I write about quite a bit in <a href=\"https://www.intermediateperl.com\" rel=\"nofollow noreferrer\">Intemediate Perl</a> and <a href=\"https://www.masteringperl.org\" rel=\"nofollow noreferrer\">Mastering Perl</a>."}], "answers": [{"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1484583344, "post_id": 41678128, "comment_id": 70558441, "body": "Could you please explain what your code is doing and how/why it is different than the OPs question for those who may not understand what you&#39;ve posted?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1484611681, "post_id": 41678128, "comment_id": 70571183, "body": "@stevieb, The OP uses pseudocode; mscha provided an implementation. But they also changed all the names, makeing it hard to see the parallel. That&#39;s why I posted my answer, which is really just a rewording of mscha&#39;s."}], "tags": [], "owner": {"reputation": 6130, "user_id": 299242, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9bda794bc71267206358bf04ea0a179?s=128&d=identicon&r=PG", "display_name": "mscha", "link": "https://stackoverflow.com/users/299242/mscha"}, "is_accepted": true, "score": 3, "last_activity_date": 1484589795, "last_edit_date": 1484589795, "creation_date": 1484575324, "answer_id": 41678128, "question_id": 41677754, "link": "https://stackoverflow.com/questions/41677754/perl-and-closures-is-it-possible-to/41678128#41678128", "title": "Perl and closures. Is it possible to?", "body": "<p>Try something like this:</p>\n\n<pre><code>use 5.012;\nuse warnings;\n\nmy $z;\nsub test\n{\n    my ($x, $y) = @_;\n\n    return sub { complicated_code($x, $y, $z) };\n}\n\nmy $on2;\nsub test_xxx\n{\n    my ($other_name1, $on3) =  @_;\n\n    return sub { complicated_code($on3, $other_name1, $on2) };\n}\n\nsub complicated_code\n{\n    my ($a, $b, $c) = @_;\n\n    return $a + $b + $c;\n}\n\n$z = 42;\nmy $closure = test(2,3);\nsay $closure-&gt;();       # 47\n$z = 1;\nsay $closure-&gt;();       # 6\n\nmy $closure_xxx = test_xxx(4,5);\n$on2 = 23;\nsay $closure_xxx-&gt;();   # 32\n</code></pre>\n\n<p>In other words, put your complicated code with many lines in a regular <code>sub</code>, and simply call this <code>sub</code> in your closure.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1484612027, "last_edit_date": 1484612027, "creation_date": 1484602650, "answer_id": 41685385, "question_id": 41677754, "link": "https://stackoverflow.com/questions/41677754/perl-and-closures-is-it-possible-to/41685385#41685385", "title": "Perl and closures. Is it possible to?", "body": "<p><code>closure</code> would be defined as follows:</p>\n\n<pre><code>sub closure {\n    my ($sub_name, @args) = @_;\n    my $sub = \\&amp;$subname;\n    return sub { $sub-&gt;(@args) };\n}\n</code></pre>\n\n<p>But this indirection isn't helpful. Instead, simply replace</p>\n\n<pre><code>my $closure = closure( 'subname', $x, $y, $z );\n\nmy $closure = closure( 'subname', $on3, $other_name1, $on2 );\n</code></pre>\n\n<p>with</p>\n\n<pre><code>my $closure = sub { subname($x, $y, $z) };\n\nmy $closure = sub { subname($on3, $other_name1, $on2) };\n</code></pre>\n\n<p>If you did need a helper, it wouldn't be so generic. It would usually have some task-specific prep code followed by a <code>return sub { };</code></p>\n\n<pre><code>sub make_foo_iter {\n   my @args = @_;\n   # ...\n   return sub {\n      # ...\n   };\n}\n\nmy $iter = make_foo_iter(...);\n</code></pre>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 41678128, "answer_count": 2, "score": 0, "last_activity_date": 1484612027, "creation_date": 1484574121, "last_edit_date": 1484600476, "question_id": 41677754, "link": "https://stackoverflow.com/questions/41677754/perl-and-closures-is-it-possible-to", "title": "Perl and closures. Is it possible to?", "body": "<p>To write closure in Perl we need to write</p>\n\n<pre><code>sub test {\n    my( $x, $y, $z ) =  @_;\n\n    my $closure =  sub{ $x + $y + $z };\n}\n</code></pre>\n\n<p>But sometimes, if not always, the subroutine may have many lines, and I would like to take the subroutine's definition outside and use something like this</p>\n\n<pre><code>my $z;\n\nsub test {\n    my( $x, $y ) =  @_;\n\n    my $closure =  closure( 'subname', $x, $y, $z );\n}\n\nsub subname : closure ( $var1, $var2, $var3 ) {\n    $var1 + $var2 + $var3\n}\n</code></pre>\n\n<p>So I can reuse this closure from elsewhere</p>\n\n<pre><code>my $on2;\n\nsub test_xxx {\n    my( $other_name1, $on3 ) =  @_;\n\n    my $closure =  closure( 'subname', $on3, $other_name1, $on2 );\n}\n</code></pre>\n\n<p>Is this possible in Perl?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1484563577, "post_id": 41674258, "comment_id": 70546441, "body": "It looks like an attempt to remove ^M (Control-M, also know as carriage return, \\r) from the end of line, i.e. converting DOS line endings to Unix line endings. But are you sure the ^M are not display artefacts of your terminal or editor? Also, the extra space character looks like it would get in the way of that purpose."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1484572373, "post_id": 41674626, "comment_id": 70551533, "body": "<b><i>&quot;Often ^M literal characters end up in files when copy paste is inappropriately used&quot;</i></b> That&#39;s an excellent point."}], "tags": [], "owner": {"reputation": 28754, "user_id": 1153938, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/deBjQ.jpg?s=128&g=1", "display_name": "Vorsprung", "link": "https://stackoverflow.com/users/1153938/vorsprung"}, "is_accepted": true, "score": 1, "last_activity_date": 1484563761, "creation_date": 1484563761, "answer_id": 41674626, "question_id": 41674258, "link": "https://stackoverflow.com/questions/41674258/perl-regular-expression-details/41674626#41674626", "title": "Perl Regular Expression Details", "body": "<p>It means if <code>$line</code> contains the exact sub string <code>^M</code> (hat-emm-space) at the end then remove it</p>\n\n<p>The reason for the initial backslash is that <code>^</code> has a special meaning in regexp and the backslash turns off the special meaning and makes it literally match</p>\n\n<p>The $ is an anchor to force a match at the end of the line</p>\n\n<p>Often ^M literal characters end up in files when copy paste is inappropriately used</p>\n"}], "owner": {"reputation": 45, "user_id": 5633519, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/892060767544350/picture?type=large", "display_name": "Parvej Islam", "link": "https://stackoverflow.com/users/5633519/parvej-islam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 41674626, "answer_count": 1, "score": -4, "last_activity_date": 1484563761, "creation_date": 1484562494, "last_edit_date": 1484563453, "question_id": 41674258, "link": "https://stackoverflow.com/questions/41674258/perl-regular-expression-details", "title": "Perl Regular Expression Details", "body": "<p>There is a line <code>$line =~ s/\\^M $//</code> in a perl code. What does the regex <code>s/\\^M $//</code> mean?</p>\n"}, {"tags": ["perl", "vim", "ctags", "tagbar"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484573465, "post_id": 41673233, "comment_id": 70552204, "body": "I think you will get better answers if you ask your question the <a href=\"https://vi.stackexchange.com\">Vi and Vim</a> Stack Exchange site, which is especially for vi and vim. That&#39;s where the power-users are, and they might be more able to help you."}, {"owner": {"reputation": 156267, "user_id": 546861, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SIhsx.png?s=128&g=1", "display_name": "romainl", "link": "https://stackoverflow.com/users/546861/romainl"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1484576092, "post_id": 41673233, "comment_id": 70553869, "body": "@simbabque, the &quot;power-users&quot; are here, too, but the right place for plugin-related issues is plugin issue trackers."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 2198403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff7f719b6408f07c8d88a313955eadd?s=128&d=identicon&r=PG", "display_name": "Marcel", "link": "https://stackoverflow.com/users/2198403/marcel"}, "edited": false, "score": 0, "creation_date": 1484865701, "post_id": 41725759, "comment_id": 70698643, "body": "Thanks for the tip. I tried it with ctags and uctags. The latter creates some more entries but in both cases it definitely looks more to what I was looking for. Anyway, tagbar is not showing me anything with this setting, but completion and tag navigation in vim works better now!"}], "tags": [], "owner": {"reputation": 6468, "user_id": 2057509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0bKBt.jpg?s=128&g=1", "display_name": "gregory", "link": "https://stackoverflow.com/users/2057509/gregory"}, "is_accepted": false, "score": 1, "last_activity_date": 1484857505, "last_edit_date": 1484857505, "creation_date": 1484760370, "answer_id": 41725759, "question_id": 41673233, "link": "https://stackoverflow.com/questions/41673233/how-to-group-subroutines-with-packages-in-vim-tagbar-for-perl/41725759#41725759", "title": "How to group subroutines with packages in vim tagbar for perl?", "body": "<p>I believe your tags are not being fully qualified, which leads to seeing everything as flat. You should be generating your perl tags with the --extra=q flag; for example:  </p>\n\n<pre><code>ctags -f tags --recurse --totals \\ \n--exclude=blib --exclude=.svn \\ \n--exclude=.git --exclude='*~' \\ \n--extra=q \\ \n--languages=Perl \\ \n--langmap=Perl:+.t\n</code></pre>\n\n<p>Also, make sure to add a colon to the list of keyword chars in your .vimrc, so you can do completion on Module::Names:   </p>\n\n<pre><code>set iskeyword+=:\n</code></pre>\n\n<p>Note: I haven't used universal ctags yet, so I can't confirm this is your issue but I did check their documentation (<a href=\"http://docs.ctags.io/en/latest/news.html?highlight=extra%3Dq\" rel=\"nofollow noreferrer\">http://docs.ctags.io/en/latest/news.html?highlight=extra%3Dq</a>) and this flag is still used and NOT on by default. </p>\n"}], "owner": {"reputation": 21, "user_id": 2198403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff7f719b6408f07c8d88a313955eadd?s=128&d=identicon&r=PG", "display_name": "Marcel", "link": "https://stackoverflow.com/users/2198403/marcel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1484857505, "creation_date": 1484559341, "question_id": 41673233, "link": "https://stackoverflow.com/questions/41673233/how-to-group-subroutines-with-packages-in-vim-tagbar-for-perl", "title": "How to group subroutines with packages in vim tagbar for perl?", "body": "<p>For some time I have been using perl with vim now. Before that I used IntelliJ with a plugin for perl. The only thing that I am missing is a different view in vim tagbar. I have configured it to run with universal ctags and it shows me categories for packages, subroutines and constants. But with an example script file that has three packages where each package has a create() method those methods all show up under the category \"Subroutines\". And the package names all show up underneath \"Packages\". That's it. This is a very flat view.</p>\n\n<p>What I would like to have is (in addition or as a replacement) a tree view where I have all the methods belonging to a package attached to it. But I could not get it to work so far :-( I would appreciate any ideas on how I have to configure tagbar to get a more tree-like view in Perl.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1484565737, "post_id": 41670294, "comment_id": 70547610, "body": "You can accept answers from the below updates."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1484580537, "post_id": 41670294, "comment_id": 70556705, "body": "@ssr1012: One may also wait a day or two to see if a better answer appears"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484635846, "post_id": 41670294, "comment_id": 70577656, "body": "@Borodin: OP said/confirms <code>it helps</code> for <code>Jim Garrison</code> answers. Hence I requested here."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490636937, "post_id": 41670294, "comment_id": 73190709, "body": "See <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>  It is good to always acknowledge the asnwer that is best for you by &quot;accepting&quot; it and to vote on all that are good.  It is an expected response, it &quot;wraps up&quot; the question, and it informs future visitors to this page about what was best for your problem."}], "answers": [{"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1484550785, "post_id": 41670411, "comment_id": 70539828, "body": "@JimGarrison Can you explain the use of <code>()</code>.?  <code>my ($w_after) = $words =~ &#47;anywhere\\s+(\\S+)&#47;;</code> it is also give the same result then why.?"}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 2, "creation_date": 1484552180, "post_id": 41670411, "comment_id": 70540476, "body": "@mkHun that is used for operator precedence. In this case <code>=~</code> has higher prcedence than <code>=</code> that&#39;s why giving same result."}], "tags": [], "owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "is_accepted": true, "score": 3, "last_activity_date": 1484547090, "creation_date": 1484547090, "answer_id": 41670411, "question_id": 41670294, "link": "https://stackoverflow.com/questions/41670294/extract-first-word-after-specific-word/41670411#41670411", "title": "Extract first word after specific word", "body": "<p>Very close:</p>\n\n<pre><code>my ($w_after) = ($words =~ /anywhere\\s+(\\S+)/);\n   ^        ^                       ^^^\n   +--------+                        |\n     Note 1                        Note 2\n</code></pre>\n\n<p>Note 1: <code>=~</code> returns a <em>list</em> of captured items, so the assignment target needs to be a list.</p>\n\n<p>Note 2: allow one or more blanks after <code>anywhere</code></p>\n"}, {"tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": -1, "last_activity_date": 1484547380, "creation_date": 1484547380, "answer_id": 41670466, "question_id": 41670294, "link": "https://stackoverflow.com/questions/41670294/extract-first-word-after-specific-word/41670466#41670466", "title": "Extract first word after specific word", "body": "<p>This Regex to be matched:</p>\n\n<pre><code>my ($expect) = ($words=~m/anywhere\\s+([^\\s]+)\\s+/);\n</code></pre>\n\n<p><code>^\\s+</code> the word between two spaces</p>\n\n<p>Thanks.</p>\n"}, {"tags": [], "owner": {"reputation": 1880, "user_id": 4281182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/teZv4.png?s=128&g=1", "display_name": "Sel&#231;uk Cihan", "link": "https://stackoverflow.com/users/4281182/sel%c3%a7uk-cihan"}, "is_accepted": false, "score": -1, "last_activity_date": 1484555600, "creation_date": 1484555600, "answer_id": 41672222, "question_id": 41670294, "link": "https://stackoverflow.com/questions/41670294/extract-first-word-after-specific-word/41672222#41672222", "title": "Extract first word after specific word", "body": "<p>If you want to also take into consideration the punctuation marks, like in:</p>\n\n<pre><code>my $words = \"Today i'm not going anywhere; except to office.\";\n</code></pre>\n\n<p>Then try this:</p>\n\n<pre><code>my ($w_after) = ($words =~ /anywhere[[:punct:]|\\s]+(\\S+)/);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1484563217, "post_id": 41673320, "comment_id": 70546228, "body": "Whilst your answer is correct, the thing the OP needs is the <code>my ( $w_after ) </code> so it does the assignment in a list context. I think it would be useful to spell that out."}], "tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 0, "last_activity_date": 1484905455, "last_edit_date": 1484905455, "creation_date": 1484559614, "answer_id": 41673320, "question_id": 41670294, "link": "https://stackoverflow.com/questions/41670294/extract-first-word-after-specific-word/41673320#41673320", "title": "Extract first word after specific word", "body": "<p>First, you have to write parentheses around left side expression of <code>=</code> operator to force array context for regexp evaluation. See <a href=\"http://perldoc.perl.org/perlop.html#m%2f_PATTERN_%2fmsixpodualngc\" rel=\"nofollow noreferrer\"><code>m//</code> and <code>//</code></a> in <a href=\"http://perldoc.perl.org/perlop.html\" rel=\"nofollow noreferrer\"><code>perlop</code></a> documentation.[1] You can write \nparentheses also around <a href=\"http://perldoc.perl.org/perlop.html#Binding-Operators\" rel=\"nofollow noreferrer\"><code>=~</code></a> binding operator to improve readability but it is not necessary because <code>=~</code> has pretty high <a href=\"http://perldoc.perl.org/perlop.html#Operator-Precedence-and-Associativity\" rel=\"nofollow noreferrer\">priority</a>.</p>\n\n<p>Use <a href=\"http://perldoc.perl.org/perlrecharclass.html#POSIX-Character-Classes\" rel=\"nofollow noreferrer\">POSIX Character Classes</a> <code>word</code></p>\n\n<pre><code>my ($w_after) = ($words =~ / \\b anywhere \\W+ (\\w+) \\b /x);\n</code></pre>\n\n<p>Note I'm using <code>x</code> so whitespaces in regexp are ignored. Also use <code>\\b</code> word boundary to anchor regexp correctly.</p>\n\n<p>[1]: I write <code>my ($w_after)</code> just for convenience because you can write <code>my ($a, $b, $c, @rest)</code> as equivalent of <code>(my $a, my $b, my $c, my @rest)</code> but you can also control scope of your variables like <code>(my $a, our $UGLY_GLOBAL, local $_, @_)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 428, "user_id": 1626653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/36RNP.jpg?s=128&g=1", "display_name": "khw", "link": "https://stackoverflow.com/users/1626653/khw"}, "is_accepted": false, "score": 1, "last_activity_date": 1490655428, "last_edit_date": 1490655428, "creation_date": 1485224362, "answer_id": 41818956, "question_id": 41670294, "link": "https://stackoverflow.com/questions/41670294/extract-first-word-after-specific-word/41818956#41818956", "title": "Extract first word after specific word", "body": "<p>In Perl v5.22 and later, you can use <code>\\b{wb}</code> to get better results for natural language.  The pattern could be </p>\n\n<pre><code>/anywhere\\b{wb}.+?\\b{wb}(.+?\\b{wb})/\n</code></pre>\n\n<p>\"wb\" stands for word break, and it will account for words that have apostrophes in them, like \"I'll\", that plain <code>\\b</code> doesn't.</p>\n\n<pre><code>.+?\\b{wb} \n</code></pre>\n\n<p>matches the shortest non-empty sequence of characters that don't have a word break in them.  The first one matches the span of spaces in your sentence; and the second one matches \"except\".  It is enclosed in parentheses, so upon completion <code>$1</code> contains \"except\".</p>\n\n<p><code>\\b{wb}</code> is documented most fully in <a href=\"http://perldoc.perl.org/perlrebackslash.html\" rel=\"nofollow noreferrer\">perlrebackslash</a></p>\n"}], "owner": {"reputation": 199, "user_id": 7417672, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2ad237af02e20c5e05e2fc22985bf646?s=128&d=identicon&r=PG&f=1", "display_name": "MrAZ", "link": "https://stackoverflow.com/users/7417672/mraz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 898, "favorite_count": 0, "accepted_answer_id": 41670411, "answer_count": 5, "score": 2, "last_activity_date": 1490655428, "creation_date": 1484546446, "last_edit_date": 1484572676, "question_id": 41670294, "link": "https://stackoverflow.com/questions/41670294/extract-first-word-after-specific-word", "title": "Extract first word after specific word", "body": "<p>I'm having difficulty writing a Perl program to extract the word following a certain word.</p>\n\n<p>For example:</p>\n\n<pre><code>Today i'm not  going anywhere except to office.\n</code></pre>\n\n<p>I want the word after <code>anywhere</code>, so the output should be <code>except</code>.</p>\n\n<p>I have tried this</p>\n\n<pre><code>my $words = \"Today i'm not  going anywhere except to office.\";\nmy $w_after = ( $words =~ /anywhere (\\S+)/ );\n</code></pre>\n\n<p>but it seems this is wrong.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 4, "creation_date": 1484532762, "post_id": 41668426, "comment_id": 70535148, "body": "Anything wrong with <code>command &gt; file</code>?"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 3, "creation_date": 1484534450, "post_id": 41668426, "comment_id": 70535467, "body": "<i>I see the output of the command inside the sprintf() function.</i>  Impossible."}, {"owner": {"reputation": 1, "user_id": 7423294, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207573166359001/picture?type=large", "display_name": "Oly396", "link": "https://stackoverflow.com/users/7423294/oly396"}, "edited": false, "score": 0, "creation_date": 1484534490, "post_id": 41668426, "comment_id": 70535471, "body": "the sprintf function seems not to like it.... and for some reason, it STILL prints."}, {"owner": {"reputation": 1, "user_id": 7423294, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207573166359001/picture?type=large", "display_name": "Oly396", "link": "https://stackoverflow.com/users/7423294/oly396"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1484534542, "post_id": 41668426, "comment_id": 70535480, "body": "@7stud it is very much so possible, I can definitively say that, because I can see it happening."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 3, "creation_date": 1484534666, "post_id": 41668426, "comment_id": 70535503, "body": "Try it.  Here is an entire perl program: <code>my $cmd = sprintf(&#39;ls -%s%s&#39;, &#39;a&#39;, &#39;l&#39;);</code>  You claim that will show the listing of the current directory in your terminal.  It won&#39;t.  No way.  No how.  Impossible."}, {"owner": {"reputation": 1, "user_id": 7423294, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207573166359001/picture?type=large", "display_name": "Oly396", "link": "https://stackoverflow.com/users/7423294/oly396"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1484534842, "post_id": 41668426, "comment_id": 70535550, "body": "While that is an entire, it&#39;s ignoring the aforementioned system() call, which I believe is where this whole debacle is coming from. @7stud"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 1, "creation_date": 1484534907, "post_id": 41668426, "comment_id": 70535566, "body": "Hah.  Yet you said this: \t <i>I see the output of the command inside the sprintf() function.</i>  So what you appear to mean is:  <i>I see the output of the command inside <code>system()</code></i>."}, {"owner": {"reputation": 1, "user_id": 7423294, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207573166359001/picture?type=large", "display_name": "Oly396", "link": "https://stackoverflow.com/users/7423294/oly396"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1484534947, "post_id": 41668426, "comment_id": 70535578, "body": "because I do.... @7stud"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 1, "creation_date": 1484534988, "post_id": 41668426, "comment_id": 70535586, "body": "Well, I just showed you how that was impossible.  The output you are seeing is not coming from anything to do with the <code>sprintf()</code> line."}, {"owner": {"reputation": 1, "user_id": 7423294, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207573166359001/picture?type=large", "display_name": "Oly396", "link": "https://stackoverflow.com/users/7423294/oly396"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 1, "creation_date": 1484535091, "post_id": 41668426, "comment_id": 70535608, "body": "There is a command, that is being run, by the system call. The command&#39;s elements are being defined by the sprintf function, and then system is used to execute the command in the terminal. I am seeing the output, from the command that is defined inside the sprintf function, when it is executed by the system call. @7stud"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1484535166, "post_id": 41668426, "comment_id": 70535624, "body": "@Oly396 what <i>do</i> you want to happen to the output?"}, {"owner": {"reputation": 1, "user_id": 7423294, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207573166359001/picture?type=large", "display_name": "Oly396", "link": "https://stackoverflow.com/users/7423294/oly396"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1484535210, "post_id": 41668426, "comment_id": 70535632, "body": "I&#39;d ideally like to have the output of the command&#39;s output placed in a file. @ysth"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1484535346, "post_id": 41668426, "comment_id": 70535667, "body": "<i>The command&#39;s elements are being defined by the sprintf function</i> -- How is that relevant?"}, {"owner": {"reputation": 1, "user_id": 7423294, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207573166359001/picture?type=large", "display_name": "Oly396", "link": "https://stackoverflow.com/users/7423294/oly396"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 1, "creation_date": 1484535507, "post_id": 41668426, "comment_id": 70535695, "body": "@7stud before you go quoting things, make sure you quote the <i>whole</i> thing: &quot;When I run my script in my terminal window, I see the output of the command inside the sprintf() function. &quot; I said I saw the output of the command <i>inside</i> the sprintf function. I was mearly explaining <i>which</i> output I did not want to see."}, {"owner": {"reputation": 1, "user_id": 7423294, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207573166359001/picture?type=large", "display_name": "Oly396", "link": "https://stackoverflow.com/users/7423294/oly396"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1484535684, "post_id": 41668426, "comment_id": 70535730, "body": "You said &quot; The output you are seeing is not coming from anything to do with the sprintf() line.&quot; Which is absolutely <b>not</b> true. That&#39;s why it&#39;s there. I was answering your question, that&#39;s how it&#39;s relevant. @7stud"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1484535812, "post_id": 41668426, "comment_id": 70535762, "body": "What I&#39;m getting at is how would your question differ if you had asked, &quot;How can I stop a system() call from outputting to my terminal?&quot;"}, {"owner": {"reputation": 1, "user_id": 7423294, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207573166359001/picture?type=large", "display_name": "Oly396", "link": "https://stackoverflow.com/users/7423294/oly396"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 1, "creation_date": 1484535897, "post_id": 41668426, "comment_id": 70535774, "body": "@7stud It wouldn&#39;t. So what <b>I&#39;m</b> getting at, is that you are really not answering anything, and instead of being helpful, you&#39;re just arguing semantics."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1484537993, "post_id": 41668426, "comment_id": 70536212, "body": "Btw, you should be using <code>shell_quote</code> from String::ShellQuote, not <code>sprintf</code>."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 3, "creation_date": 1484539151, "post_id": 41668426, "comment_id": 70536426, "body": "Crikey, get a room, you guys."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484579345, "post_id": 41668426, "comment_id": 70555955, "body": "@Oly396: The confusion comes from your use of <i>inside</i>, which is unfamiliar. You&#39;re implying that that&#39;s where you see the output, and it would be better to write &quot;the command created by the <code>sprintf</code> function&quot; or perhaps &quot;from the <code>sprintf</code> function&quot;. That said, it seems to me that <b>7stud</b> was being unnecessarily quarrelsome, continuing to argue after your meaning became clear."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7423294, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207573166359001/picture?type=large", "display_name": "Oly396", "link": "https://stackoverflow.com/users/7423294/oly396"}, "edited": false, "score": 0, "creation_date": 1484536302, "post_id": 41668883, "comment_id": 70535857, "body": "That is awesome! I have a small issue though, I don&#39;t have access to IPC::System::Simple, as this is a remote machine and I&#39;m not admin on said box. :/"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 2, "creation_date": 1484536759, "post_id": 41668883, "comment_id": 70535953, "body": "<code>my $cmd_stdout_output = `$cmd`</code>"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 2, "last_activity_date": 1484535882, "creation_date": 1484535882, "answer_id": 41668883, "question_id": 41668426, "link": "https://stackoverflow.com/questions/41668426/how-to-hide-the-output-of-a-command-ran-inside-sytem/41668883#41668883", "title": "How to hide the output of a command ran inside sytem()?", "body": "<p>Raw use of perl's system() is discouraged because it isn't trivial to detect errors and come up with a relevant error message.  Consider using <a href=\"http://p3rl.org/IPC::System::Simple\" rel=\"nofollow noreferrer\"><code>IPC::System::Simple</code></a>.  Since you want to capture the output, use its capture().</p>\n\n<pre><code>use IPC::System::Simple 'capture';\n\nmy $output = capture($command);  # dies if command fails; catch this with eval if necessary\nFile::Slurp::write_file('somefile', $output);\n</code></pre>\n\n<p>Alternatively, just redirect the output to a file in your command:</p>\n\n<pre><code>use IPC::System::Simple 'system';\nsystem(\"$command &gt;somefile\");\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7423294, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207573166359001/picture?type=large", "display_name": "Oly396", "link": "https://stackoverflow.com/users/7423294/oly396"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1484535882, "creation_date": 1484531745, "question_id": 41668426, "link": "https://stackoverflow.com/questions/41668426/how-to-hide-the-output-of-a-command-ran-inside-sytem", "title": "How to hide the output of a command ran inside sytem()?", "body": "<p>I have looked all over and found plenty of answers, and after much trial and error, I have come to this conclusion: I don't know. </p>\n\n<p>I am running a thing in Perl:</p>\n\n<pre><code>my $command = sprintf('commandHereDoingSCPishThingsThatHasToRunInMyShell', options, options, options);\nsystem($command);\n</code></pre>\n\n<p>When I run my script in my terminal window, I see the output of the command inside the sprintf() function. </p>\n\n<p>I would like for the output to be re-directed to a file, and to not have to see the program executing on my terminal window.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["forms", "perl", "cgi"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1484520374, "post_id": 41666788, "comment_id": 70532465, "body": "<a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#CGI.pm-HAS-BEEN-REMOVED-FROM-THE-PERL-CORE\" rel=\"nofollow noreferrer\">metacpan.org/pod/distribution/CGI/lib/&hellip;</a>"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 2, "creation_date": 1484520441, "post_id": 41666788, "comment_id": 70532492, "body": "You might want to find a modern guide to writing webpages. We&#39;ve had CSS for over two decades now."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1484520538, "post_id": 41666788, "comment_id": 70532529, "body": "The HTML generation from CGI.pm <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#HTML-Generation-functions-should-no-longer-be-used\" rel=\"nofollow noreferrer\">has been deprecated recently</a> and <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#CGI.pm-HAS-BEEN-REMOVED-FROM-THE-PERL-CORE\" rel=\"nofollow noreferrer\">CGI.pm has been removed from the core</a>. If your environment only supports CGI, you should still use a Template engine like <a href=\"https://metacpan.org/pod/Text::Xslate\" rel=\"nofollow noreferrer\">Text::XSlate</a> instead of this ugly wall of escaped HTML. <a href=\"https://www.youtube.com/watch?v=jKOqtRMT85s\" rel=\"nofollow noreferrer\">Watch this talk</a> to see what I mean."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1484520570, "post_id": 41666788, "comment_id": 70532537, "body": "@Quentin it&#39;s at least like, 2000, right? We even have refrigerators! :)"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1484523029, "post_id": 41666788, "comment_id": 70533121, "body": "Don&#39;t. It&#39;s a recipe for spaghetti code and security holes. Instead, have a common library that both programs use."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1484520301, "post_id": 41667155, "comment_id": 70532444, "body": "A bit more explanation would greatly improve your answer."}, {"owner": {"reputation": 2121, "user_id": 3610183, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/yJjyl.jpg?s=128&g=1", "display_name": "rainman", "link": "https://stackoverflow.com/users/3610183/rainman"}, "edited": false, "score": 0, "creation_date": 1484521994, "post_id": 41667155, "comment_id": 70532897, "body": "@Duncan where should I place this code in my code ??"}, {"owner": {"reputation": 230, "user_id": 7322508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1aDE1.jpg?s=128&g=1", "display_name": "Duncan Carr", "link": "https://stackoverflow.com/users/7322508/duncan-carr"}, "edited": false, "score": 0, "creation_date": 1484522779, "post_id": 41667155, "comment_id": 70533068, "body": "Hi rainman. Just place your HTML form code inside the &quot;no params&quot; bit, and process the posted data in the other bit. Either you have posted data or you don&#39;t, so right at the start of the script you can branch accordingly."}, {"owner": {"reputation": 230, "user_id": 7322508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1aDE1.jpg?s=128&g=1", "display_name": "Duncan Carr", "link": "https://stackoverflow.com/users/7322508/duncan-carr"}, "edited": false, "score": 0, "creation_date": 1484522926, "post_id": 41667155, "comment_id": 70533100, "body": "I&#39;ve edited the script slightly to make more obvious."}], "tags": [], "owner": {"reputation": 230, "user_id": 7322508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1aDE1.jpg?s=128&g=1", "display_name": "Duncan Carr", "link": "https://stackoverflow.com/users/7322508/duncan-carr"}, "is_accepted": true, "score": 1, "last_activity_date": 1484522898, "last_edit_date": 1484522898, "creation_date": 1484520209, "answer_id": 41667155, "question_id": 41666788, "link": "https://stackoverflow.com/questions/41666788/generate-html-form-and-process-it-in-one-perl-cgi-file/41667155#41667155", "title": "Generate HTML form and process it in one PERL/CGI file", "body": "<pre><code>#!/usr/bin/perl -w\n\nuse CGI qw/:standard/;\n\nprint header( 'text/plain' );\n\n$cgi = CGI-&gt;new();\n\nif ( $cgi-&gt;param )\n{\n    &lt;&lt;&lt; YOU HAVE POST DATA - PROCESS IT &gt;&gt;&gt;\n}\nelse\n{\n    &lt;&lt;&lt; THERE IS NO POST DATA - PRINT YOUR HTML &gt;&gt;&gt;\n}\n</code></pre>\n\n<p>I do that like this ...</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1484581278, "creation_date": 1484581278, "answer_id": 41679956, "question_id": 41666788, "link": "https://stackoverflow.com/questions/41666788/generate-html-form-and-process-it-in-one-perl-cgi-file/41679956#41679956", "title": "Generate HTML form and process it in one PERL/CGI file", "body": "<p>You appear to be writing a web application in the mid-1990s. This will, at least update you to use Perl practices from the start of this millennium.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse CGI qw[params header];\nuse Template;\n\nmy $tt = Template-&gt;new;\n\nif (params) {\n  # We have some CGI parameters, extract them, do something\n  # useful with them and then display a page thanking the user.\n\n  my $foo = param('foo');\n  my $bar = param('bar');\n\n  process_user_input($foo, $bar);\n\n  $tt-&gt;process('thankyou.tt', { foo =&gt; $foo, bar =&gt; $bar })\n    or die $tt-&gt;error;\n} else {\n  # No parameters, so let's show the user the input form\n  $tt-&gt;process('form.tt')\n    or die $tt-&gt;error;\n}\n</code></pre>\n\n<p>Notice that we avoid using the heavily-deprecated HTML generation functions from CGI.pm. Instead we use the <a href=\"https://metacpan.org/release/Template-Toolkit\" rel=\"nofollow noreferrer\">Template Toolkit</a>, which allows us to separate our output into template files (here called <code>form.tt</code> and <code>thankyou.tt</code>).</p>\n\n<p>Notice that there's a certain amount of hand-waving here as I don't know what the names of your parameters are or what you need to do with them.</p>\n\n<p>But this is still old technology. You would be well advised to read <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow noreferrer\">CGI::Alternatives</a> and update your technology to something written this millennium.</p>\n"}], "owner": {"reputation": 2121, "user_id": 3610183, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/yJjyl.jpg?s=128&g=1", "display_name": "rainman", "link": "https://stackoverflow.com/users/3610183/rainman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 694, "favorite_count": 0, "accepted_answer_id": 41667155, "answer_count": 2, "score": 0, "last_activity_date": 1484581278, "creation_date": 1484517575, "question_id": 41666788, "link": "https://stackoverflow.com/questions/41666788/generate-html-form-and-process-it-in-one-perl-cgi-file", "title": "Generate HTML form and process it in one PERL/CGI file", "body": "<p>I am trying to create a form with PERL/CGI, and I would like to process the data introduced in that form  within the same CGI file.</p>\n\n<p>here is my code:</p>\n\n<pre><code>#! /usr/bin/perl\n\nuse CGI qw(:standard);\n\nmy $cgi = new CGI;\n\nprint header, start_html(\"Shop web\"),\n\n  h1({-align=&gt;center, -style=&gt;\"color:blue;Font-Size: 35pt;\"},'Oferta T-shirt' ), \n  \"&lt;p align=\\\"center\\\"&gt;\n  \\&lt;img src=\\\"/img/t-shirts.jpg\\\" width=\\\"30%\\\"&gt;\n    &lt;\\/p&gt;\",\n\n    \"&lt;br\\\\&gt;\n    &lt;table align = \\\"center\\\" border = \\\"2\\\" bordercolor=\\\"green\\\" &gt;\n            &lt;col width=\\\"120\\\"&gt;\n            &lt;col width=\\\"120\\\"&gt;\n            &lt;col width=\\\"120\\\"&gt; \n            &lt;tr&gt;\n                &lt;th bgcolor=\\\"lightgray\\\"&gt;Talla&lt;/th&gt;\n                &lt;th bgcolor=\\\"lightgray\\\"&gt;Color&lt;/th&gt; \n                &lt;th bgcolor=\\\"lightgray\\\"&gt;Precio&lt;/th&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td align=\\\"center\\\"&gt;S&lt;/td&gt;\n                &lt;td align=\\\"center\\\"&gt;Negro&lt;/td&gt; \n                &lt;td align = \\\"center\\\"&gt;8 &amp;euro;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td align=\\\"center\\\"&gt;M&lt;/td&gt;\n                &lt;td align=\\\"center\\\"&gt;Blanco&lt;/td&gt; \n                &lt;td align=\\\"center\\\"&gt;9 &amp;euro; &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td align=\\\"center\\\"&gt;L&lt;/td&gt;\n                &lt;td align=\\\"center\\\"&gt;Azul&lt;/td&gt; \n                &lt;td align= \\\"center\\\"&gt;11.5 &amp;euro; &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td align= \\\"center\\\"&gt;XL&lt;/td&gt;\n                &lt;td align= \\\"center\\\"&gt;Rojo&lt;/td&gt; \n                &lt;td align= \\\"center\\\"&gt;12 &amp;euro; &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td align= \\\"center\\\"&gt;XXL&lt;/td&gt;\n                &lt;td align= \\\"center\\\"&gt;Amarillo&lt;/td&gt; \n                &lt;td align= \\\"center\\\"&gt;15.5 &amp;euro; &lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/table&gt; \",\n\n        \"&lt;br /&gt;\n        &lt;h2 align=\\\"center\\\"&gt;&lt;font color = \\\"blue\\\"&gt; Compra tu camiseta&lt;/font&gt;&lt;/h2&gt;\n        &lt;br&gt;\",\n\n        \"&lt;center&gt;\n\n            &lt;form action=\\\"compra.cgi\\\" method=\\\"POST\\\" &gt;\n                &lt;input type=\\\"hidden\\\" name=\\\"subject\\\" value=\\\"Formulario por email\\\"&gt;\n                &lt;table&gt; \n\n                    &lt;tr&gt;&lt;td&gt;Direcci&amp;oacuten de envio&lt;/td&gt;\n                        &lt;td&gt;&lt;input type=\\\"text\\\" name=\\\"nombre\\\" size=\\\"35\\\"&gt;&lt;/td&gt;\n                    &lt;/tr&gt; \n\n                    &lt;tr&gt; \n                        &lt;td&gt;Cantidad&lt;/td&gt; \n                        &lt;td&gt; &lt;input type=\\\"text\\\" name=\\\"cantidad\\\" size=\\\"6\\\"&gt;&lt;/td&gt; \n                    &lt;/tr&gt; \n\n                    &lt;tr&gt; \n\n                        &lt;td colspan=\\\"2\\\" align=\\\"center\\\"&gt;   \n                            &lt;br&gt;\n                            &lt;input type=\\\"submit\\\" name=\\\"Enviar\\\" value=\\\"Comprar\\\"  style=\\\"height: 30px; width: 120px\\\"&gt; \n                        &lt;/td&gt; \n                    &lt;/tr&gt; \n                &lt;/table&gt; \n            &lt;/form&gt; \n        &lt;/center&gt;\",\n\n\nend_html();\n</code></pre>\n\n<p>In other words: how can I process the data introduced in the form without creating another CGI file to capture that data.</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1484524993, "post_id": 41666370, "comment_id": 70533519, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/4616395/perl-regular-expression-using-variable-as-search-string-with-perl-operator-char\">Perl regular expression (using variable as search string with perl operator chars included)</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": false, "score": 4, "last_activity_date": 1484514924, "creation_date": 1484514924, "answer_id": 41666408, "question_id": 41666370, "link": "https://stackoverflow.com/questions/41666370/how-can-i-use-a-string-variable-that-contains-square-brackets-inside-a-regex-pat/41666408#41666408", "title": "How can I use a string variable that contains square brackets inside a regex pattern?", "body": "<p>Replace </p>\n\n<pre><code>my $foo = \"debug_bus[0]\";\n</code></pre>\n\n<p>With </p>\n\n<pre><code>my $foo = quotemeta \"debug_bus[0]\";\n</code></pre>\n\n<p>From <a href=\"http://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\">quotemeta</a> documentation : </p>\n\n<blockquote>\n  <p>quotemeta EXPR<br>\n  <em>Returns the value of EXPR with all the ASCII non-\"word\" characters backslashed</em>.</p>\n</blockquote>\n\n<p>Without using quotemeta, <code>[0]</code> is interpreted as a <a href=\"http://perldoc.perl.org/perlrecharclass.html#Bracketed-Character-Classes\" rel=\"nofollow noreferrer\">bracketed character class</a>, containing only <code>0</code>, and then is equivalent to just <code>0</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 6, "last_activity_date": 1484545989, "last_edit_date": 1484545989, "creation_date": 1484516687, "answer_id": 41666670, "question_id": 41666370, "link": "https://stackoverflow.com/questions/41666370/how-can-i-use-a-string-variable-that-contains-square-brackets-inside-a-regex-pat/41666670#41666670", "title": "How can I use a string variable that contains square brackets inside a regex pattern?", "body": "<p>You need to properly escape (\"quote\") <a href=\"http://perldoc.perl.org/perlre.html#Quoting-metacharacters\" rel=\"noreferrer\">metacharacters</a> in your regex using <code>\\Q...\\E</code> (inside) or <a href=\"http://perldoc.perl.org/functions/quotemeta.html\" rel=\"noreferrer\"><code>quotemeta</code></a> (outside)</p>\n\n<p>Therefore, you want:</p>\n\n<pre><code>$bar =~ m/\\Q$foo\\E/;\n</code></pre>\n\n<p>Or just:</p>\n\n<pre><code>$bar =~ /\\Q$foo/;\n</code></pre>\n\n<p>You can omit the <code>m</code> when the delimiters are <code>//</code>, and you don't really need <code>\\E</code> in this case because there's nothing else in your pattern.</p>\n"}], "owner": {"reputation": 199, "user_id": 2293417, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/75570e759ec6e669fcedfe8920a0b40c?s=128&d=identicon&r=PG", "display_name": "ajcrm125", "link": "https://stackoverflow.com/users/2293417/ajcrm125"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1182, "favorite_count": 0, "accepted_answer_id": 41666670, "answer_count": 2, "score": 1, "last_activity_date": 1484545989, "creation_date": 1484514670, "last_edit_date": 1484524835, "question_id": 41666370, "link": "https://stackoverflow.com/questions/41666370/how-can-i-use-a-string-variable-that-contains-square-brackets-inside-a-regex-pat", "title": "How can I use a string variable that contains square brackets inside a regex pattern?", "body": "<p>Trying to match a string with brackets.  </p>\n\n<p>For example:</p>\n\n<pre><code>my $foo = \"debug_bus[0]\";\nmy $bar = \"debug_bus[0][12:0] = some_value;\";\n\nif ($bar =~ $foo)\n{\n    print \"Match\\n\";\n}\nelse\n{\n    print \"No Match\\n\";\n}\n</code></pre>\n\n<p>I would expect \"Match\" but I keep getting \"No Match\" which leads me to believe maybe brackets in '[0]' are causing an issue?</p>\n"}, {"tags": ["c", "perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1484502552, "post_id": 41664177, "comment_id": 70526764, "body": "what does <code>ldd ver</code> show?"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1484502679, "post_id": 41664177, "comment_id": 70526823, "body": "Is it for sure that <code>#include &lt;wiringPi.h&gt;</code> draws the right file? Can you test to add declaration <code>char * wiringPiVersion(void);</code> right in front of your function <code>main</code>?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1484502697, "post_id": 41664177, "comment_id": 70526831, "body": "@ysth <code>ldd (Debian GLIBC 2.19-18+deb8u4) 2.19</code>"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1484502811, "post_id": 41664177, "comment_id": 70526877, "body": "@ysth adding the declaration where you stated results in the same error, before and after commenting out the header include line"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1484502899, "post_id": 41664177, "comment_id": 70526899, "body": "I meant running ldd on your test program"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1484502994, "post_id": 41664177, "comment_id": 70526920, "body": "@ysth the app never gets compiled into an executable"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1484503026, "post_id": 41664177, "comment_id": 70526933, "body": "Also, moving the c file into the directory where the modified header is and changing to <code>#include &quot;wiringPi.h&quot;</code> doesn&#39;t help either"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1484503885, "post_id": 41664177, "comment_id": 70527285, "body": "and <code>-lwiringPi</code> draws the binary which you compiled <i>after</i> you added function <code>wiringPiVersion()</code>, for sure?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1484504123, "post_id": 41664177, "comment_id": 70527367, "body": "well, there&#39;s only one on my system, and I verified that it was updated, and to boot, my Perl XS picks it up fine"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1484504369, "post_id": 41664177, "comment_id": 70527454, "body": "&quot;actually it&#39;s a `#define&quot; what is actually a #define? Please post real unedited code that is known to reproduce the problem."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1484504404, "post_id": 41664177, "comment_id": 70527462, "body": "@StephanLechner I&#39;m wrong... if I use <code>-L &#47;usr&#47;local&#47;lib</code> where the updated <code>.so</code> is, it works! The only other .so is in the wiringPi compilation directory that&#39;s far away from where I&#39;m compiling. I wouldn&#39;t think that one would be included. So what you mentioned led to the answer (adding the full library path to the compilation command)"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1484504493, "post_id": 41664177, "comment_id": 70527494, "body": "@n.m. I apologize. Question updated."}], "answers": [{"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 3, "last_activity_date": 1484505615, "last_edit_date": 1484505615, "creation_date": 1484504781, "answer_id": 41664687, "question_id": 41664177, "link": "https://stackoverflow.com/questions/41664177/undefined-reference-error-after-adding-function-to-a-c-project/41664687#41664687", "title": "&quot;undefined reference&quot; error after adding function to a C project", "body": "<p>So it turned out that there were two <code>.so</code> files generated when I rebuilt wiringPi... one in the wiringPi's build directory way under my home directory, and the other in <code>/usr/local/lib</code>.</p>\n\n<p>After a tip in comments, I added the library path explicitly:</p>\n\n<pre><code>gcc -o ver wpi_ver.c -L/usr/local/lib -lwiringPi\n</code></pre>\n\n<p>...and it all fell together and works as expected:</p>\n\n<pre><code>$ ./ver\nwiringPi version: 2.36\n</code></pre>\n\n<p>Note: I have sent Gordon the patch in hopes it gets included in the next wiringPi cut.</p>\n\n<p>Update: I received an email back from Gordon and he stated that currently, only the <code>gpio</code> application has the ability to report the version, so he advised that he's going to add something similar to my patch in a future release.</p>\n"}, {"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 1, "last_activity_date": 1484504968, "last_edit_date": 1495541789, "creation_date": 1484504968, "answer_id": 41664719, "question_id": 41664177, "link": "https://stackoverflow.com/questions/41664177/undefined-reference-error-after-adding-function-to-a-c-project/41664719#41664719", "title": "&quot;undefined reference&quot; error after adding function to a C project", "body": "<p>Although already solved, I added this answer to show what gave me the hint.\nError message \"undefined reference\" points to a linker error (cf. <a href=\"https://stackoverflow.com/a/22426590/2630032\">answer on SO</a>), so its about checking if the correct library is drawn. </p>\n"}], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 0, "accepted_answer_id": 41664687, "answer_count": 2, "score": 2, "last_activity_date": 1484505615, "creation_date": 1484501777, "last_edit_date": 1484504485, "question_id": 41664177, "link": "https://stackoverflow.com/questions/41664177/undefined-reference-error-after-adding-function-to-a-c-project", "title": "&quot;undefined reference&quot; error after adding function to a C project", "body": "<p>I've added a new function <code>wiringPiVersion()</code> to <a href=\"http://wiringpi.com\" rel=\"nofollow noreferrer\">wiringPi</a>, but after I build and install the shared library, when I attempt to compile a small C program around it, I get:</p>\n\n<p>wpi_ver.c:(.text+0xc): undefined reference to `wiringPiVersion'</p>\n\n<p>However, when I include it in an XS based Perl module, all works well. I don't know enough about C to figure out what's going wrong here, and I've been searching for the better part of two hours trying different things to no avail.</p>\n\n<p>Here's my small C program to test the new function:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;wiringPi.h&gt;\n\nint main (){\n    char * ver = wiringPiVersion();\n    printf(\"wiringPi version: %s\\n\", ver);\n    return 0;\n}\n</code></pre>\n\n<p>Compilation that throws the error:</p>\n\n<pre><code>gcc -o ver wpi_ver.c -lwiringPi\n</code></pre>\n\n<p>The addition to wiringPi's header file:</p>\n\n<pre><code>extern char * wiringPiVersion(void);\n</code></pre>\n\n<p>The wiringPi's .c file addition:</p>\n\n<pre><code>#define WPI_VERSION \"2.36\"\n\nchar * wiringPiVersion(void){\n    return WPI_VERSION;\n}\n</code></pre>\n\n<p>In my Perl module's XS file, I have:</p>\n\n<pre><code>char *\nwiringPiVersion()\n</code></pre>\n\n<p>...and my Perl module's Makefile.PL</p>\n\n<pre><code>LIBS =&gt; ['-lwiringPi'],\n</code></pre>\n\n<p>...and after re-installing the Perl module, I can access the function without any issues in a test script.</p>\n\n<p>I'm hoping this is something simple I'm overlooking which someone may be able to point out. My question is, how do I rectify this?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1484489605, "post_id": 41661532, "comment_id": 70522374, "body": "You can try read the file into a string and then discard the beginning of the file using a regex substitution"}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1484490627, "post_id": 41661532, "comment_id": 70522717, "body": "As @DaveCross said, it&#39;s uneasy to help without a code example; however, when dealing with structured documents, Regexp::Grammars could help you (the examples are precisely based on latex). Just a thought."}], "answers": [{"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 6, "last_activity_date": 1484574371, "last_edit_date": 1484574371, "creation_date": 1484543434, "answer_id": 41669811, "question_id": 41661532, "link": "https://stackoverflow.com/questions/41661532/limiting-effect-of-perl-script/41669811#41669811", "title": "Limiting effect of perl script", "body": "<p><code>local $/</code> can be used for things other than a complete slurp.  <code>$/</code> is the input record separator, and perl reads everything up to and including the input record separator, then returns it as a <em>line</em>.  The default value for <code>$/</code> is a newline <code>\"\\n\"</code>.</p>\n\n<p>If you set the input record separator to undef, then (somehow) perl will never find an input record separator in the file, so you get the whole file returned as a <em>line</em>.  But you can set the input record separator to anything you want...</p>\n\n<pre><code>$ cat data.txt\nI don't want to proccess \nthis part of the file.\n\\begin{document}\nI just want to process\nthe stuff down here.\n\\begin{document}\nhello\n</code></pre>\n\n<hr>\n\n<pre><code>use strict;\nuse warnings; \nuse 5.020;\nuse autodie;\nuse Data::Dumper;\n\nmy $fname = 'data.txt';\nopen my $INFILE, '&lt;', $fname;\n\nmy ($unprocessed, $needs_processing);\n\n{\n    local $/ = \"\\\\begin{document}\\n\";\n    $unprocessed = &lt;$INFILE&gt;;\n    $/ = undef;  #Read rest of file no matter what it contains.\n    $needs_processing = &lt;$INFILE&gt;;\n}\n\nclose $INFILE;\n\nprint $unprocessed;\nsay '-' x 10;\nprint $needs_processing;\n\n--output:--\nI don't want to proccess \nthis part of the file.\n\\begin{document}\n----------\nI just want to process\nthe stuff down here.\n\\begin{document}\nhello\n</code></pre>\n\n<p>If you want to do inplace editing of the file:</p>\n\n<pre><code>use strict;\nuse warnings; \nuse 5.020;\nuse autodie;\nuse Data::Dumper;\n\nmy $fname = 'data.txt';\nmy $divider = \"\\\\begin{document}\\n\";\nmy $backup = '.bak';\n\nopen my $INFILE, '&lt;', $fname;\n\n{\n    local ($^I, $/, @ARGV) = ($backup, $divider, $fname);\n\n    CHUNK:\n    while(&lt;&gt;) {\n\n        if($. == 1) {    # $. is the line number (starts at 1)\n            print;       #STDOUT has been redirected to the file 'data.txt'.\n            $/ = undef;  #Read rest of file no matter what it contains.\n            next CHUNK;\n        }\n\n        #Process $_ here:\n        s/e/E/g;\n\n        print;  #STDOUT has been redirected to the file 'data.txt'.\n    }\n\n}\n\nclose $INFILE;\n</code></pre>\n\n<hr>\n\n<pre><code>$ cat data.txt\nI don't want to proccess \nthis part of the file.\n\\begin{document}\nI just want to procEss\nthE stuff down hErE.\n\\bEgin{documEnt}\nhEllo\n</code></pre>\n\n<p>The original file will be in <code>data.txt.bak</code>.  If you don't want a backup, assign a blank string to <code>$^I</code>.</p>\n\n<p>Note that in your code, the statement:</p>\n\n<pre><code>local $/;\n</code></pre>\n\n<p>doesn't do anything useful.  In your code, that statement is not inside a block(= a portion of code surrounded by braces).  <code>local $/</code> says:</p>\n\n<ol>\n<li>Stash the original value of <code>$/</code> somewhere.</li>\n<li>Assign undef to <code>$/</code>.</li>\n<li>When the block containing <code>local $/</code> is exited, assign the original value to <code>$/</code>.</li>\n</ol>\n\n<p>But because <code>local $/;</code> is not inside a block in your code, no block will be exited, and the original value of <code>$/</code> will never be restored.  As a result, there is no point in stashing the original value of <code>$/</code>.</p>\n"}], "owner": {"reputation": 316, "user_id": 5325278, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7728f95f0aca570b95858008b415a05f?s=128&d=identicon&r=PG&f=1", "display_name": "Toothrot", "link": "https://stackoverflow.com/users/5325278/toothrot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 41669811, "answer_count": 1, "score": 1, "last_activity_date": 1484574371, "creation_date": 1484486450, "last_edit_date": 1484490680, "question_id": 41661532, "link": "https://stackoverflow.com/questions/41661532/limiting-effect-of-perl-script", "title": "Limiting effect of perl script", "body": "<p>I want to run a perl script on a tex-document but not on the preamble.\nHow can I limit the effect of it to the part of the file below a certain pattern (e.g. <code>^\\\\begin\\{document\\}$</code>)? This is the script:</p>\n\n<pre><code># Insert the macro \\gr{} around Greek passages.\n\n#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Encode;\n\nmy $L = qr/[^A-Za-z]/;\nmy $g = qr/\\p{Greek}/;\n\nlocal $/;           # slurp\n$_ = decode('utf-8', &lt;&gt;);\n\n# Remove already existing instances.\ns/\\\\gr\n(               # 1\n {\n  (             # 2\n   (?: \\\\.          # 3. escaped chars\n     | [^{}]\n     | (?1)         # recur to 1\n   )*\n  )  \n }\n)\n/$2/xg;\n\n# Insert new.\ns/(\n  [([]*             # begin with puncuation?\n  $g                # Greek;\n  ($L|\\\\\\w+)*       # contain any non-Latin char or cmd;\n  $g                # end with Greek\n  [)\\]]*            # and puncuation?\n  )\n/\\\\gr{$&amp;}/xg;\n\nprint encode('utf-8', $_);\n</code></pre>\n"}, {"tags": ["perl", "mojolicious"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484482265, "post_id": 41660844, "comment_id": 70520250, "body": "Are you rubber-ducking and coming up with the answers to most of your questions really fast or are you building your own little FAQ with weird Mojo questions? In any case, it&#39;s interesting. :)"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484483268, "post_id": 41660844, "comment_id": 70520538, "body": "@simbabque I spent whole day yesterday. Also ask about this at official IRC. And did not get answer yet: is this expected behavior  or not. This this answer actually is not. Because suggested localization breaks some tests. Posting here I hope to find people whose also faced this problem."}], "tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1484481643, "creation_date": 1484481643, "answer_id": 41660844, "question_id": 41660790, "link": "https://stackoverflow.com/questions/41660790/why-mojolicious-render-maybe-implicitly-changes-stash/41660844#41660844", "title": "Why Mojolicious render_maybe implicitly changes stash?", "body": "<p>I suggest that stash keys for <a href=\"https://github.com/kraih/mojo/blob/master/lib/Mojolicious/Controller.pm#L188\" rel=\"nofollow noreferrer\"><code>render_maybe</code></a> should be localized in same way as they are localized for <a href=\"https://github.com/kraih/mojo/blob/master/lib/Mojolicious/Controller.pm#L190\" rel=\"nofollow noreferrer\"><code>render_to_string</code></a> <a href=\"https://github.com/kraih/mojo/blob/master/lib/Mojolicious/Renderer.pm#L83\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 528, "user_id": 1815811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OdnDK.jpg?s=128&g=1", "display_name": "vitas", "link": "https://stackoverflow.com/users/1815811/vitas"}, "is_accepted": false, "score": 0, "last_activity_date": 1484902933, "creation_date": 1484902933, "answer_id": 41759681, "question_id": 41660790, "link": "https://stackoverflow.com/questions/41660790/why-mojolicious-render-maybe-implicitly-changes-stash/41759681#41759681", "title": "Why Mojolicious render_maybe implicitly changes stash?", "body": "<p>In similar situaion I use <a href=\"https://metacpan.org/pod/Mojolicious::Renderer#template_path\" rel=\"nofollow noreferrer\">Mojolicious::Renderer::template_path()</a>:</p>\n\n<pre><code>sub test {\n  my $self =  shift;\n\n  $self-&gt;render_maybe( 'not_existent1', foo =&gt; 1 ) if $self-&gt;app-&gt;renderer-&gt;template_path({ template =&gt; \"not_existent1, format =&gt; 'html', handler =&gt; 'ep'});\n  $self-&gt;render_maybe( 'not_existent2', bar =&gt; 2 ) if $self-&gt;app-&gt;renderer-&gt;template_path({ template =&gt; \"not_existent2, format =&gt; 'html', handler =&gt; 'ep'});\n  $self-&gt;render;\n}\n1;\n</code></pre>\n\n<p>OR better create helper:</p>\n\n<pre><code>  $app-&gt;helper(template_exists =&gt; sub { \n       shift-&gt;app-&gt;renderer-&gt;template_path({ template =&gt; shift, \n                                             format =&gt; 'html',\n                                             handler =&gt; 'ep'})\n  });\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>sub test {\n  my $self =  shift;/Mojolicious::Renderer#template_path\n\n  return $self-&gt;render( 'not_existent1', foo =&gt; 1 ) if $self-&gt;template_exists('not_existeunt1');  \n  return $self-&gt;render( 'not_existent2', bar =&gt; 2 ) if $self-&gt;template_exists('not_existeunt2');\n  $self-&gt;render;\n}\n</code></pre>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1484902933, "creation_date": 1484481253, "question_id": 41660790, "link": "https://stackoverflow.com/questions/41660790/why-mojolicious-render-maybe-implicitly-changes-stash", "title": "Why Mojolicious render_maybe implicitly changes stash?", "body": "<p>I have changed default Mojolicious application in next way:</p>\n\n<ol>\n<li>Add route <code>/test</code> into <code>MyApp.pm</code></li>\n</ol>\n\n<pre>\n   # Normal route to controller\n   $r->get('/')->to('example#welcome');\n+  $r->get('/test')->to('example#test');\n}\n</pre>\n\n<ol start=\"2\">\n<li>Add action <code>test</code> and template into <code>MyApp::Controller::Example.pm</code></li>\n</ol>\n\n<pre>\n+\n+sub test {\n+  my $self =  shift;\n+\n+  $self->render_maybe( 'not_existent1', foo => 1 );\n+  $self->render_maybe( 'not_existent2', bar => 2 );\n+  $self->render;\n+}\n+\n+1;\n+\n+__DATA__\n+@@ example/test.html.ep\n+$foo $bar\n</pre>\n\n<ol start=\"3\">\n<li>Then run:</li>\n</ol>\n\n<pre>\n./script/my_app get /test\n</pre>\n\n<p>The output is <code>1--2</code>. This is not expected because I render template without any arguments.</p>\n\n<p>I'm inclined to believe that this behavior is the bug.<br>\nIf not tell me please how to prevent original <code>stash</code> while trying to render other templates?</p>\n"}, {"tags": ["ruby", "perl", "shell"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484438759, "post_id": 41656336, "comment_id": 70511555, "body": "Since your Ruby statements are so long, perhaps you could describe the differences for us?"}], "answers": [{"comments": [{"owner": {"reputation": 1803, "user_id": 2565086, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/4bbf81bfc2e7edf541834050eeea37e5?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/2565086/greg"}, "edited": false, "score": 0, "creation_date": 1484439922, "post_id": 41656498, "comment_id": 70511808, "body": "Thank you. I don&#39;t know why I got into that thinking. But after I wrote the last sentence of the second paragraph in the edit, I got to thinking maybe it wasn&#39;t true. And it works. I guess I&#39;m used to the using #{} inside double quotes in a put that I got locked into that thinking. Of course, I barely know what I&#39;m doing. Also explains why the question never came up in searches. Duh"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1803, "user_id": 2565086, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/4bbf81bfc2e7edf541834050eeea37e5?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/2565086/greg"}, "edited": false, "score": 1, "creation_date": 1484441342, "post_id": 41656498, "comment_id": 70512069, "body": "If this were Perl then I would say that you should study the documentation. Unfortunately, Ruby&#39;s documentation in the western world consists of a collection of unofficial third-party documents and paid-for books. I can&#39;t see it documented anywhere that backticks interpolate blocks in the same way as double quotes, but that&#39;s what they do. You should remember that single, double, and backticks are generalised as <code>%q&#47;&#47;</code>, <code>%Q&#47;&#47;</code> and <code>%x&#47;&#47;</code> which allow you to use whatever delimiters you wish so as to avoid unnecessary escaping."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1803, "user_id": 2565086, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/4bbf81bfc2e7edf541834050eeea37e5?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/2565086/greg"}, "edited": false, "score": 0, "creation_date": 1484441571, "post_id": 41656498, "comment_id": 70512110, "body": "I would also say that, with a long system command like this you should build a variable, say <code>cmd</code>, out of the concatenation of a number of double-quoted strings, corresponding to the executable and each of its parameters. That would let you put each of them on a separate line, so that your code remains readable, and then all you need is <code>perlOutput = %x&#47;#{cmd}&#47;</code> to commit."}, {"owner": {"reputation": 1803, "user_id": 2565086, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/4bbf81bfc2e7edf541834050eeea37e5?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/2565086/greg"}, "edited": false, "score": 0, "creation_date": 1484443344, "post_id": 41656498, "comment_id": 70512436, "body": "<code>backticks interpolate blocks in the same way as double quotes</code>. I wrestled with this when I first wrote this script years ago, but just hard coded it, but now I really need the variable, so glad it&#39;s finally done right (and simply). @mu is to short and Borodin: Thank you. Worth knowing. All those folder and file locations are variables and when I put them in #{}, the code is pretty clean, but if I there were more variables your approach would be helpful."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1484439695, "creation_date": 1484439695, "answer_id": 41656498, "question_id": 41656336, "link": "https://stackoverflow.com/questions/41656336/calling-perl-script-from-ruby-with-ruby-varibles/41656498#41656498", "title": "Calling Perl script from Ruby with Ruby varibles", "body": "<p>You have too many quotation marks. It is the outermost quotes that designate the operation to be performed, so an assignment like </p>\n\n<pre><code>perlOutput = \"`...`\"\n</code></pre>\n\n<p>won't treat the backticks as anything special; they will simply be included in the string</p>\n\n<p>However, backticks or <code>%q{}</code> <em>will</em> interpolate variables, just as double quotes do, so you want simply</p>\n\n<pre><code>perlOutput = `perl ... --timeoffset #{timeOffset} ...`\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1484463219, "post_id": 41656811, "comment_id": 70515877, "body": "I wasn&#39;t aware of <code>perlOutput, =...</code>. Alternatively, <code>perlOutput,* = ...</code> or <code>perlOutput = Open3.capture2(...).first</code>."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484504009, "post_id": 41656811, "comment_id": 70527329, "body": "@Borodin: But there is <code>Open3.capture3</code> (or <code>Open3.popen3</code>, <code>Open3.popen2e</code>, or even <code>Open3.capture2e</code>) if you&#39;re also interested in what <code>stderr</code> has to say. And you rarely really want <code>stdout</code> and <code>stderr</code> mashed into one pile except as a convenience (really a false laziness IMO when there are better options available). I do miss the quality of documentation in the Perl world."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484505102, "post_id": 41656811, "comment_id": 70527699, "body": "@muistooshort: I&#39;m aware of that, but I think you should be explaining it to the OP instead of to me. It&#39;s far from obvious that <code>Open3</code> won&#39;t handle a final <code>2&gt;&amp;1</code> parameter as one may expect it to, and I think it should be addressed in your answer since it&#39;s part of the statement that the OP says he wants to get working. A good reason for merging the stdout and stderr streams is a rough and ready way to get an idea of the relative timings of the output. Buffering must be disabled for it to work, but it is simpler than timestamping everything and using an app to merge the two logs."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484505594, "post_id": 41656811, "comment_id": 70527890, "body": "@muistooshort: I am reminded of the excellence of Perl&#39;s language and CPAN documentation every time I step out of my Perl box. Sadly, I can see Ruby becoming obsolescent just because of this and its poor benchmark results. Perl continues to be fast, and Python doesn&#39;t upset programmers in the way that Perl does, despite Perl being a more extraordinary language than most people realise."}], "tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 2, "last_activity_date": 1484442803, "last_edit_date": 1495540912, "creation_date": 1484442803, "answer_id": 41656811, "question_id": 41656336, "link": "https://stackoverflow.com/questions/41656336/calling-perl-script-from-ruby-with-ruby-varibles/41656811#41656811", "title": "Calling Perl script from Ruby with Ruby varibles", "body": "<p>Your problem is, as <a href=\"https://stackoverflow.com/a/41656498/479863\">Borodin</a> points out, that you have the wrong quotes. However, there is a much better way to approach this sort of things that avoids all the quoting and escaping and shell problems completely and that way is to use <a href=\"http://ruby-doc.org/stdlib-2.4.0/libdoc/open3/rdoc/Open3.html\" rel=\"nofollow noreferrer\">Open3</a> from the standard library. Something like:</p>\n\n<pre><code>perlOutput, _ = Open3.capture2(\n  'perl',\n  '/Users/gscar/Documents/Ruby/Photo handling/lib/gpsPhoto.pl',\n  '--dir',\n  '/Volumes/Knobby Aperture Two/_Download folder/Latest Download/',\n  '--gpsdir',\n  '/Users/gscar/Dropbox/ GPX daily logs/2017 Massaged/',\n  '--timeoffset',\n  timeOffset.to_s,\n  '--maxtimediff',\n  50000.to_s\n)\n</code></pre>\n\n<p>That will give you the output in <code>perlOutput</code> and the process's exist status in <code>_</code> (you can also say <code>perlOutput, = ...</code> but I find the explicit throw-away <code>_</code> clearer to read). No shell involved so no extra escaping needed.</p>\n\n<p>If you want <code>stderr</code> too, then use <a href=\"http://ruby-doc.org/stdlib-2.4.0/libdoc/open3/rdoc/Open3.html#method-c-capture3\" rel=\"nofollow noreferrer\"><code>Open3.capture3</code></a> rather than appending <code>2&gt;&amp;1</code> to a shell command to commingle <code>stdout</code> and <code>stderr</code>.</p>\n"}], "owner": {"reputation": 1803, "user_id": 2565086, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/4bbf81bfc2e7edf541834050eeea37e5?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/2565086/greg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "accepted_answer_id": 41656811, "answer_count": 2, "score": -1, "last_activity_date": 1484442803, "creation_date": 1484438316, "last_edit_date": 1484439244, "question_id": 41656336, "link": "https://stackoverflow.com/questions/41656336/calling-perl-script-from-ruby-with-ruby-varibles", "title": "Calling Perl script from Ruby with Ruby varibles", "body": "<p>I want to include a variable in a Perl script I'm calling from a Ruby script. The following doesn't work. Nothing seems to happen. Not critical that I capture output, but it doesn't work without the <code>2&gt;&amp;1</code> either. </p>\n\n<p>The difference in the two scripts is that <code>--timeoffset #{timeOffset}</code> is included in the first. In the second <code>#{timeOffset}</code> is replaced by <code>28000</code>. And the double quotes are not in the second. Of course the double quotes are needed to evaluate a variable, otherwise it's just text going to Perl.</p>\n\n<pre><code>perlOutput = \"`perl '/Users/gscar/Documents/Ruby/Photo\\ handling/lib/gpsPhoto.pl' --dir '/Volumes/Knobby Aperture Two/_Download\\ folder/Latest\\ Download/' --gpsdir '/Users/gscar/Dropbox/\\ GPX\\ daily\\ logs/2017\\ Massaged/' --timeoffset #{timeOffset} --maxtimediff 50000 2&gt;&amp;1` \"\n</code></pre>\n\n<p>This does work, simple back-ticked input, no Ruby variables</p>\n\n<pre><code>perlOutput = `perl '/Users/gscar/Documents/Ruby/Photo\\ handling/lib/gpsPhoto.pl' --dir '/Volumes/Knobby Aperture Two/_Download\\ folder/Latest\\ Download/' --gpsdir '/Users/gscar/Dropbox/\\ GPX\\ daily\\ logs/2017\\ Massaged/' --timeoffset 28800 --maxtimediff 50000`\n</code></pre>\n\n<p>The Perl script works well and am not aware of any Ruby alternatives.</p>\n\n<p>Sorry not broken into lines, but otherwise the backticks get confused.</p>\n"}, {"tags": ["python", "perl", "unix"], "comments": [{"owner": {"reputation": 881839, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1484423387, "post_id": 41654279, "comment_id": 70507176, "body": "The <b>output</b> is still line buffered.."}, {"owner": {"reputation": 680, "user_id": 264745, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7e566b7a44295043db6019db7b5014ef?s=128&d=identicon&r=PG", "display_name": "dcc310", "link": "https://stackoverflow.com/users/264745/dcc310"}, "reply_to_user": {"reputation": 881839, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1484423900, "post_id": 41654279, "comment_id": 70507336, "body": "@MartijnPieters the output to the <i>terminal</i> is line buffered, correct?  I was assuming the printing to the terminal is consistent between Python and Perl (because a standalone Python script that prints every few seconds is very real-time), and the difference in behavior I&#39;m seeing (i.e. perl immediate, python sporadic) is due to buffering between <code>echo</code> and the scripts&#39; input."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 881839, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1484423952, "post_id": 41654279, "comment_id": 70507354, "body": "@MartijnPieters That &quot;duplicate&quot; doesn&#39;t really answer the question."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1484424058, "post_id": 41654279, "comment_id": 70507393, "body": "Oh, it&#39;s hidden in one of the comments: &quot;If you iterate over the input with <code>for line in sys.stdin: ...</code> then the for loop will collect a number of lines before the body of the loop is run. This will behave like buffering, though it&#39;s rather batching. Instead, do <code>while true: line = sys.stdin.readline()</code>&quot;"}, {"owner": {"reputation": 680, "user_id": 264745, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7e566b7a44295043db6019db7b5014ef?s=128&d=identicon&r=PG", "display_name": "dcc310", "link": "https://stackoverflow.com/users/264745/dcc310"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1484424389, "post_id": 41654279, "comment_id": 70507492, "body": "@melpomene good eyes!  That indeed fixes the issue."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484427246, "post_id": 41654279, "comment_id": 70508405, "body": "Rather than have two questions pointing to the same &quot;answer&quot; where the useful information is hidden in a comment, I am voting to reopen this question so that it may be answered properly. Unless someone can find a proper instance of this question being answered correctly?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484428172, "post_id": 41654279, "comment_id": 70508679, "body": "This question was closed because it was said to have been &quot;answered&quot; by <a href=\"http://stackoverflow.com/questions/107705/disable-output-buffering#comment24604506_107717\">this comment</a> beneath another related question. It has now been reopened, and the solution needs fleshing out and explaining by someone who know Python better than I do."}, {"owner": {"reputation": 881839, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1484435151, "post_id": 41654279, "comment_id": 70510643, "body": "I picked a better duplicate, one that directly points out that you should not use <code>sys.stdin.__iter__()</code>."}], "owner": {"reputation": 680, "user_id": 264745, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7e566b7a44295043db6019db7b5014ef?s=128&d=identicon&r=PG", "display_name": "dcc310", "link": "https://stackoverflow.com/users/264745/dcc310"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "closed_date": 1484435129, "answer_count": 0, "score": 1, "last_activity_date": 1484427562, "creation_date": 1484423308, "last_edit_date": 1484427562, "question_id": 41654279, "link": "https://stackoverflow.com/questions/41654279/unix-input-output-buffering-perl-vs-python", "closed_reason": "Duplicate", "title": "Unix input/output buffering: Perl vs Python", "body": "<p>I've been reading SO discussion on how output going to a terminal is line buffered, and output to pipes or files etc is usually \"block buffered\". I am trying the following two pipelines on OSX, which aim to prepend a timestamp to the incoming lines:</p>\n\n<pre><code>while [ 1 ] ; do echo $RANDOM &amp;&amp; sleep .5 ; done | ~/bin/prepend_ts_python \n</code></pre>\n\n<p>and</p>\n\n<pre><code>while [ 1 ] ; do echo $RANDOM &amp;&amp; sleep .5 ; done | ~/bin/prepend_ts_perl\n</code></pre>\n\n<p>The Perl program is (and I don't know much about Perl):</p>\n\n<pre><code>#!/usr/bin/perl\n\nwhile ( &lt;&gt; ) {\n    print scalar(localtime()), \" \";\n    print;\n}\n</code></pre>\n\n<p>The Python program (clearly not prepending a timestamp yet) is:</p>\n\n<pre><code>#!/usr/bin/python\n\nimport sys\n\nfor line in sys.stdin:\n    print(\"foo\")\n</code></pre>\n\n<p>The pipeline using the Perl version prints output immediately, as desired, whereas the Python one outputs intermittently.</p>\n\n<p>I was under the impression that any buffering that was going on was being determined by the <code>while</code>/<code>echo</code> loop, and for this reason people were recommending using the <code>unbuffer</code> command on the beginning of the pipeline.</p>\n\n<p>Does Perl have some way of flushing its STDIN? I didn't think it could reach \"backwards\" in the pipeline. Why are they different?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 103376, "user_id": 712649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tP0yV.jpg?s=128&g=1", "display_name": "Mathias R. Jessen", "link": "https://stackoverflow.com/users/712649/mathias-r-jessen"}, "edited": false, "score": 1, "creation_date": 1484404968, "post_id": 41651131, "comment_id": 70501072, "body": "Remove <code>d0</code> at the end, quantifier should be 16-18: <code>&#47;(c\\d\\d?t[A-Z0-9]{16,18})&#47;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1484417524, "post_id": 41651131, "comment_id": 70505249, "body": "There&#39;s nothing in this question about &quot;strings with constant length&quot;!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1484418092, "post_id": 41651131, "comment_id": 70505432, "body": "This looks like the output from a command-line utility. Please would you explain where it comes from so that the answers will be more useful to other people."}], "answers": [{"tags": [], "owner": {"reputation": 13302, "user_id": 4082217, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/15ad55dad62ce17d0852311c0e3fa92c?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Yusuf", "link": "https://stackoverflow.com/users/4082217/mohammad-yusuf"}, "is_accepted": false, "score": 1, "last_activity_date": 1484405131, "creation_date": 1484405131, "answer_id": 41651201, "question_id": 41651131, "link": "https://stackoverflow.com/questions/41651131/matching-strings-with-constant-length/41651201#41651201", "title": "Matching strings with constant length?", "body": "<p>Try this:</p>\n\n<pre><code>cat tmp | perl -ne 'print \"$1\\n\" if /(c\\d+t[A-Z0-9]{16,18}(d0)?)/'\nc9t5000CCA23B2C6A65d0\nc10t5000C50086135011\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484417948, "post_id": 41651207, "comment_id": 70505384, "body": "I would guess that there are always 16 hex digits after <code>t</code> (a 64-bit value), optionally followedby <code>d0</code>"}], "tags": [], "owner": {"reputation": 103376, "user_id": 712649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tP0yV.jpg?s=128&g=1", "display_name": "Mathias R. Jessen", "link": "https://stackoverflow.com/users/712649/mathias-r-jessen"}, "is_accepted": true, "score": 2, "last_activity_date": 1484405187, "creation_date": 1484405187, "answer_id": 41651207, "question_id": 41651131, "link": "https://stackoverflow.com/questions/41651131/matching-strings-with-constant-length/41651207#41651207", "title": "Matching strings with constant length?", "body": "<blockquote>\n  <p>Why doesn't the below output both lines?</p>\n</blockquote>\n\n<p>because the second line doesn't end with <code>d0</code>, remove that from the pattern.</p>\n\n<blockquote>\n  <p>the length is between 15 and 16 chars, so that should be fine?</p>\n</blockquote>\n\n<p>the length of the substring following <code>c\\d\\d?t</code> is 18 and 16 respectively:</p>\n\n<pre><code>5000CCA23B2C6A65d0\n5000C50086135011\n</code></pre>\n\n<p>So change it to:</p>\n\n<pre><code>cat tmp | perl -ne 'print \"$1\\n\" if /(c\\d\\d?t[A-Z0-9]{16,18})/'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1484418164, "last_edit_date": 1484418164, "creation_date": 1484417857, "answer_id": 41653368, "question_id": 41651131, "link": "https://stackoverflow.com/questions/41651131/matching-strings-with-constant-length/41653368#41653368", "title": "Matching strings with constant length?", "body": "<p>I think your data looks like</p>\n\n<ul>\n<li><p><code>c</code></p></li>\n<li><p>one or two decimal digits</p></li>\n<li><p><code>t</code></p></li>\n<li><p>sixteen hex digits</p></li>\n<li><p>optionally, <code>d0</code></p></li>\n</ul>\n\n<p>A pattern to capture that looks like <code>/(c\\d{1,2}t\\p{hex}{16}(?:d0)?)/</code></p>\n"}], "owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 41651207, "answer_count": 3, "score": 0, "last_activity_date": 1484418164, "creation_date": 1484404614, "question_id": 41651131, "link": "https://stackoverflow.com/questions/41651131/matching-strings-with-constant-length", "title": "Matching strings with constant length?", "body": "<p>Why doesn't the below output both lines?</p>\n\n<pre><code>$ cat tmp \nc9::dsk/c9t5000CCA23B2C6A65d0\nc10::dsk/c10t5000C50086135011\n$ cat tmp | perl -ne 'print \"$1\\n\" if /(c\\d\\d?t[A-Z0-9]{15,16}d0)/'\nc9t5000CCA23B2C6A65d0\n</code></pre>\n\n<p>The second <code>\\d</code> is optional, so it would allow <code>c10</code> and the length is between 15 and 16 chars, so that should be fine?</p>\n"}, {"tags": ["perl", "dbix-class"], "answers": [{"comments": [{"owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "edited": false, "score": 2, "creation_date": 1484416472, "post_id": 41649733, "comment_id": 70504916, "body": "As the InflateColumn docs state: It will handle all types of references except scalar references."}], "tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": true, "score": 2, "last_activity_date": 1484472046, "last_edit_date": 1484472046, "creation_date": 1484395118, "answer_id": 41649733, "question_id": 41649380, "link": "https://stackoverflow.com/questions/41649380/why-dbix-column-is-not-deflated/41649733#41649733", "title": "Why DBIx column is not deflated?", "body": "<p><code>deflate</code> will be called when <code>value</code> is an array reference or a hash reference</p>\n\n<pre><code>$schema-&gt;resultset( 'Table' )-&gt;create({\n    request =&gt; [ 'value' ]\n});\n</code></pre>\n\n<p><strong>UPD</strong> The <a href=\"http://search.cpan.org/dist/DBIx-Class/lib/DBIx/Class/InflateColumn.pod#DESCRIPTION\" rel=\"nofollow noreferrer\">DOC</a></p>\n\n<blockquote>\n  <p>It will handle all types of references except scalar references. It will not handle scalar values, these are ignored and thus passed through to SQL::Abstract. This is to allow setting raw values to \"just work\". Scalar references are passed through to the database to deal with, to allow such settings as \\'year + 1' and \\'DEFAULT' to work.</p>\n  \n  <p>If you want <strong>to filter plain scalar values and replace them with something else</strong>, see <a href=\"http://search.cpan.org/dist/DBIx-Class/lib/DBIx/Class/FilterColumn.pod\" rel=\"nofollow noreferrer\">DBIx::Class::FilterColumn</a>.</p>\n</blockquote>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 41649733, "answer_count": 1, "score": 2, "last_activity_date": 1484472046, "creation_date": 1484392762, "last_edit_date": 1484396047, "question_id": 41649380, "link": "https://stackoverflow.com/questions/41649380/why-dbix-column-is-not-deflated", "title": "Why DBIx column is not deflated?", "body": "<p>I have <code>InflateColumn</code> defined like this</p>\n\n<pre><code>__PACKAGE__-&gt;inflate_column( request =&gt; { inflate =&gt; sub{ die },  deflate =&gt; sub{ die } } );\n</code></pre>\n\n<p>But when I try to store data into this column it is stored without problem.</p>\n\n<pre><code>$schema-&gt;resultset( 'Table' )-&gt;create({\n    request =&gt; 'value'\n});\n</code></pre>\n\n<p>Why is <code>inflate/deflate</code> not called?</p>\n"}, {"tags": ["arrays", "perl", "hash", "io-socket"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1484380485, "post_id": 41647519, "comment_id": 70494978, "body": "Please <code>use strict</code> your code. Apart from that there is no concept of a <i>connection id</i> or <i>user</i> in websockets so it is unclear what you are trying to do. If you only want to count the number of current connections just look at the size of the array returned by <code>$serv-&gt;connections()</code>. If you want to get information about each of these connections like the peers IP address just call the appropriate methods <a href=\"https://metacpan.org/pod/Net::WebSocket::Server::Connection#ip()\" rel=\"nofollow noreferrer\">as documented</a>."}, {"owner": {"reputation": 31, "user_id": 7417787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2cd6694da66fac263fa383644743887?s=128&d=identicon&r=PG&f=1", "display_name": "BryanD", "link": "https://stackoverflow.com/users/7417787/bryand"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1484411002, "post_id": 41647519, "comment_id": 70503036, "body": "I can&#39;t seem to get the information as you pointed out in the link, which is why I posted the question. Using data dumped does not show the port or ip. Can you provide a working example of how this would be accomplished?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1484419227, "post_id": 41647519, "comment_id": 70505794, "body": "I&#39;ve even linked to the exact function, named <code>ip</code>. I can neither see that you&#39;ve modified your code to <code>use strict</code> nor can I see how you&#39;ve attempted to use the function <code>ip</code> so it&#39;s not possible to see what you are doing wrong."}, {"owner": {"reputation": 31, "user_id": 7417787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2cd6694da66fac263fa383644743887?s=128&d=identicon&r=PG&f=1", "display_name": "BryanD", "link": "https://stackoverflow.com/users/7417787/bryand"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1484423710, "post_id": 41647519, "comment_id": 70507272, "body": "Yes I see that. Thank you for your attempt to assist with my problem. I have already reviewed the documentation after a Google search turned up the cpan module outage with the exact information. I was hoping I could get more than a Google link answer. My attempts roo extract the information are already included and commented out in the code I provided as I explained in the initial post. The link you provided, and also available at cpan simply state calling ip() yields results. But I do not see a proper syntax for making this call or where to incorporate such call in my example. Thanks."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1484424238, "post_id": 41647519, "comment_id": 70507453, "body": "To show all IP try <code>print $_-&gt;ip() for $serv-&gt;connections()</code>. At least that&#39;s what I would read from the documentation. And again, no attempt to use <code>ip</code> is shown in your code and the code is still not using <code>use strict</code>."}, {"owner": {"reputation": 31, "user_id": 7417787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2cd6694da66fac263fa383644743887?s=128&d=identicon&r=PG&f=1", "display_name": "BryanD", "link": "https://stackoverflow.com/users/7417787/bryand"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1484427802, "post_id": 41647519, "comment_id": 70508571, "body": "You are correct I did not specify the ip specifically. I tried dumping all contents of $Serv-&gt;connections() into the hash %users and printing all contents. I will try your method and report back. Thank you for the syntax example."}, {"owner": {"reputation": 31, "user_id": 7417787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2cd6694da66fac263fa383644743887?s=128&d=identicon&r=PG&f=1", "display_name": "BryanD", "link": "https://stackoverflow.com/users/7417787/bryand"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1484437349, "post_id": 41647519, "comment_id": 70511224, "body": "I have updated the code to reflect the suggested changes. The code still runs but the IP and PORT sections do not display anything in the console. I am still able to connect from the web and operate as it did before."}, {"owner": {"reputation": 31, "user_id": 7417787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2cd6694da66fac263fa383644743887?s=128&d=identicon&r=PG&f=1", "display_name": "BryanD", "link": "https://stackoverflow.com/users/7417787/bryand"}, "edited": false, "score": 0, "creation_date": 1484450183, "post_id": 41647519, "comment_id": 70513547, "body": "I have updated the code and tested with: <code>use warnings;</code> as recommended. I am still unable to obtain the IP or PORT of the client connections."}, {"owner": {"reputation": 31, "user_id": 7417787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2cd6694da66fac263fa383644743887?s=128&d=identicon&r=PG&f=1", "display_name": "BryanD", "link": "https://stackoverflow.com/users/7417787/bryand"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1484453528, "post_id": 41647519, "comment_id": 70514093, "body": "After messing with variations of the <code>$_-&gt;ip()</code> syntax I was able to get things working! here is the section that needed altering. I updated the original post to include the solution."}, {"owner": {"reputation": 31, "user_id": 7417787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2cd6694da66fac263fa383644743887?s=128&d=identicon&r=PG&f=1", "display_name": "BryanD", "link": "https://stackoverflow.com/users/7417787/bryand"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1484454033, "post_id": 41647519, "comment_id": 70514184, "body": "Thanks @SteffenUllrich for solution with syntax"}], "owner": {"reputation": 31, "user_id": 7417787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2cd6694da66fac263fa383644743887?s=128&d=identicon&r=PG&f=1", "display_name": "BryanD", "link": "https://stackoverflow.com/users/7417787/bryand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 871, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1484453647, "creation_date": 1484376271, "last_edit_date": 1484453647, "question_id": 41647519, "link": "https://stackoverflow.com/questions/41647519/perl-netwebsocketserver", "title": "Perl Net::WebSocket::Server", "body": "<p>I am using the Perl Module Net::WebSocket::Server to build a message deliver system for users that are visiting a domain. I amd using the example scripts from the CPAN module page, and this is the code I have running:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse IO::Socket::SSL;\nuse Net::WebSocket::Server;\n\nmy $ssl_server = IO::Socket::SSL-&gt;new(\n      Listen        =&gt; 5,\n      LocalPort     =&gt; 4000,\n      Proto         =&gt; 'tcp',\n      SSL_cert_file =&gt; '/ssl/domain.com.crt',\n      SSL_key_file  =&gt; '/ssl/domain.com.key',\n    ) or die \"failed to listen: $!\";\n\nmy $port = 4000;\n#print \"Starting WebSocket chat server on port $port, press Ctr-C to disconnect\\n$\nNet::WebSocket::Server-&gt;new(\n    listen =&gt; $ssl_server,\n    on_connect =&gt; sub {\n        my ($serv, $conn) = @_;\n        $conn-&gt;on(\n            utf8 =&gt; sub {\n                my ($conn, $msg) = @_;\n                # print \"got: $msg\\n\";\n                print $_-&gt;ip() for( $serv-&gt;connections() );\n                print $_-&gt;port() for( $serv-&gt;connections() );\n                $_-&gt;send_utf8($msg) for( $serv-&gt;connections() );\n            },\n    );\n    },\n)-&gt;start;\n</code></pre>\n\n<p>I would like to extract some type of information that will supply me with the users online, for example IP or connection ID and put them all into an array. You can see my commented attempts grab the conection data and print it using datadumper, but this has only resulted in errors or hashes. Can anyone figure out how to extract IPs or connection IDs and put them into an array so I know howmany unique connections there are?</p>\n\n<p>Solution:</p>\n\n<pre><code>Net::WebSocket::Server-&gt;new(\n    listen =&gt; $ssl_server,\n    on_connect =&gt; sub {\n        my ($serv, $conn) = @_;\n\n        $conn-&gt;on(\n            utf8 =&gt; sub {\n                my ($conn, $msg) = @_;\n                $IP = $conn-&gt;ip();\n                $PORT = $conn-&gt;port();\n                # print \"got: $msg\\n\";\n                $_-&gt;send_utf8('IP: ' . $IP . ' PORT: ' . $PORT  . ' '. $msg) for( $serv-&gt;connections() );\n            },\n    );\n    },\n)-&gt;start;\n</code></pre>\n"}, {"tags": ["perl", "graph", "graph-theory", "directed-graph"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1484360608, "post_id": 41645919, "comment_id": 70491942, "body": "This may be naive, but  (1) Did you try using <code>SP_Dijkstra</code> between all sources and sinks  (2) <a href=\"http://search.cpan.org/~dburdick/Boost-Graph-1.4/Graph.pm\" rel=\"nofollow noreferrer\">Boost::Graph</a> seems to have some ready search algorithms."}, {"owner": {"reputation": 88, "user_id": 2975263, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001251739077/picture?type=large", "display_name": "pedroivo000", "link": "https://stackoverflow.com/users/2975263/pedroivo000"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1484361988, "post_id": 41645919, "comment_id": 70492156, "body": "I&#39;ve tried using the SP_Dijkstra function of Graph, but it takes a very long time to generate the paths between the source and sink nodes. I might have implemented it wrong, so I&#39;ll have to double check that version of the script to see if it was correct. Thanks for pointing me to Boost::Graph. It seems to be very simple to implement the search functions, so I&#39;ll definitely give it a try."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484362041, "post_id": 41645919, "comment_id": 70492163, "body": "Can there ever be more than one path between any two nodes?"}, {"owner": {"reputation": 88, "user_id": 2975263, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001251739077/picture?type=large", "display_name": "pedroivo000", "link": "https://stackoverflow.com/users/2975263/pedroivo000"}, "edited": false, "score": 0, "creation_date": 1484362265, "post_id": 41645919, "comment_id": 70492205, "body": "No, because the program used to generate the graph prevents new connections between nodes in the same subgraph. Each node represents a DNA sequence and each edge represents an overlap between them. Each subgraph represents a cluster of overlapping sequences, and the tool used to find the overlaps and generate the clusters has an option to prevent new overlaps from being found between DNA sequences in the same cluster. Would that be a problem, somehow?"}], "answers": [{"comments": [{"owner": {"reputation": 88, "user_id": 2975263, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001251739077/picture?type=large", "display_name": "pedroivo000", "link": "https://stackoverflow.com/users/2975263/pedroivo000"}, "edited": false, "score": 0, "creation_date": 1484369843, "post_id": 41646812, "comment_id": 70493243, "body": "Thanks! That is along the lines of what I was trying to write after my initial attempt failed with the APSP algorithm. I am running the scrip on a large cluster here in my university, so memory shouldn&#39;t be a problem. I&#39;ll try your code on my script and see what happens :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 88, "user_id": 2975263, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001251739077/picture?type=large", "display_name": "pedroivo000", "link": "https://stackoverflow.com/users/2975263/pedroivo000"}, "edited": false, "score": 0, "creation_date": 1484372135, "post_id": 41646812, "comment_id": 70493542, "body": "<code>return \\@paths;</code> was missing."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1484372127, "last_edit_date": 1484372127, "creation_date": 1484368342, "answer_id": 41646812, "question_id": 41645919, "link": "https://stackoverflow.com/questions/41645919/find-all-paths-starting-from-source-node-with-perl/41646812#41646812", "title": "Find all paths starting from source node with Perl", "body": "<p>You're not interested in finding the shortest path, so forget about all those shortest path algorithms.</p>\n\n<p>You're interested in finding all paths. This is called tree traversal, and it can be performed depth-first or breadth-first. Since you're traversing the entire tree, it doesn't really matter which approach is taken. The following performs a depth-first search using recursion:</p>\n\n<pre><code>sub build_paths {\n   my ($graph) = @_;\n\n   my @paths;\n\n   local *_helper = sub {\n      my $v = $_[-1];\n      my @successors = $graph-&gt;successors($v);\n      if (@successors) {\n         _helper(@_, $_)\n            for @successors;\n      } else {\n         push @paths, [ @_ ];\n      }\n   };\n\n   _helper($_)\n      for $graph-&gt;source_vertices();\n\n   return \\@paths;\n}\n\ndie if $graph-&gt;has_a_cycle;\n\nmy $paths = build_paths($graph);\n</code></pre>\n\n<p>Yes, it would be possible to parallelize the work, but I'm not writing that for you.</p>\n\n<p>What concerns me the most is memory. Depending on the number of branches in the paths, you could easily end up running out of memory. Note that storing the paths as strings (of comma-separated values) would take less memory than storing them as arrays.</p>\n"}], "owner": {"reputation": 88, "user_id": 2975263, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001251739077/picture?type=large", "display_name": "pedroivo000", "link": "https://stackoverflow.com/users/2975263/pedroivo000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 0, "accepted_answer_id": 41646812, "answer_count": 1, "score": 2, "last_activity_date": 1489439476, "creation_date": 1484357862, "last_edit_date": 1489439476, "question_id": 41645919, "link": "https://stackoverflow.com/questions/41645919/find-all-paths-starting-from-source-node-with-perl", "title": "Find all paths starting from source node with Perl", "body": "<p>First I would like to clarify that I have very little experience with Graph Theory and the proper algorithms to parse a directed graph, and that I've searched here on SO but didn't quite find what I was looking for. Hopefully you guys can help me :)</p>\n\n<p>I have a large directed graph (around 3000 nodes) that has several subgraphs made out of connected nodes, and the subgraphs are not connected to each other. Here is a small representative graph of the data I have here:</p>\n\n<p><a href=\"https://i.stack.imgur.com/XLavT.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XLavT.jpg\" alt=\"directed graph with unconnected subgraphs\"></a></p>\n\n<p>I am writing a Perl script to find all possible paths starting from each source node to the sink nodes and store them in an array of arrays. So, for this graph, the possible paths would be:</p>\n\n<pre><code>1,2,3,4,5,6\n1,2,3,4,5,7\n1,8,9,10\n11,12,13\n11,14\n15,16,17\n</code></pre>\n\n<p>The way I've done this search in my script was to use the <a href=\"http://search.cpan.org/~jhi/Graph-0.9704/lib/Graph.pod\" rel=\"nofollow noreferrer\">Graph</a> module in the following steps:</p>\n\n<ol>\n<li>Find all source nodes in the graph and store them in an array</li>\n<li>Find all sink nodes in the graph and store them in an array</li>\n<li>Find all pairs short paths with the Floyd-Warshall algorithm</li>\n<li>Search the APSP Floyd-Warshall graph object if exist a path between a source node and a sink node. If there is a path, store it in array of arrays. If there isn't a path, do nothing.</li>\n</ol>\n\n<p>Here is the part of my script that does it:</p>\n\n<pre><code>#Getting all source nodes in the graph:\nmy @source_nodes = $dot_graph-&gt;source_vertices();\nmy @sink_nodes = $dot_graph-&gt;sink_vertices();\n\n# Getting all possible paths between from source to sink nodes in the graph:\nprint \"Calculating all possible overlaps in graph\\n\";\nmy $all_possible_paths = $dot_graph-&gt;APSP_Floyd_Warshall();\nprint \"Done\\n\"; \n\n# print \"Extending overlapping contigs\\n\"; \nmy @all_paths;\nforeach my $source (@source_nodes) {\n    foreach my $sink (@sink_nodes) {\n        my @path_vertices = $all_possible_paths-&gt;path_vertices($source, $sink);\n        my $path_length = $all_possible_paths-&gt;path_length($source,$sink);\n\n        #Saving only the paths that actually exist:\n        push (@all_paths, \\@path_vertices) unless (!@path_vertices);\n    }\n}\n</code></pre>\n\n<p>The problem with that is that it works fine for small graphs, but now that I have 3000 nodes, it would take a very very long time to finish (assuming that each path would take 1ms to be found, it would take 312.5 days to go through all of them). I know using the Floyd-Warshall algorithm to find all possible paths in the graph to only find the paths between sources and sinks is not efficient, but when I wrote the script I needed the results as soon as possible and my graphs were a lot smaller. </p>\n\n<p>My question is <strong>how can I find the all paths starting from each source in the graph that will end in a sink node, without find all possible paths first?</strong> Is that what is called a breadth-first or a depth-first search? How to implement that with Perl (and if possible, with the Graph module)? Any help would be awesome!</p>\n\n<p>P.S.: In order to make the program run faster, I started trying to breaking the initial big graph into its subgraphs and running the original script, but forking the main loop that searches for the paths between sources and sinks using <a href=\"http://search.cpan.org/~yanick/Parallel-ForkManager-1.19/lib/Parallel/ForkManager.pm\" rel=\"nofollow noreferrer\">Parallel::ForkManager</a>. What do you guys think of that approach?</p>\n"}, {"tags": ["perl", "match", "conditional-statements"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 4, "creation_date": 1484346026, "post_id": 41644225, "comment_id": 70488501, "body": "1) You don&#39;t need <code>BigInt</code> for 50 bits; 2) You could just replace <code>X</code> with <code>.</code> and check a pattern match."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1484352242, "post_id": 41644225, "comment_id": 70490362, "body": "@Sinan &#220;n&#252;r, I&#39;m pretty sure it won&#39;t work without BigInt if you want to use bitwise-AND numbers and your IV size is 32 bits. (Bitwise-AND is way more efficient than a regex match.)"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484394865, "post_id": 41644225, "comment_id": 70498156, "body": "@ikegami If that is the case, two 32-bit integers is still going to be faster than <code>BigInt</code>. I did not go into all the ways one can do this without using <code>BigInt</code>."}, {"owner": {"reputation": 339, "user_id": 5683724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-ys-8Xx_dcVY/AAAAAAAAAAI/AAAAAAAAACg/QkZg_guBu6g/photo.jpg?sz=128", "display_name": "Jaeyoung Park", "link": "https://stackoverflow.com/users/5683724/jaeyoung-park"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1486439777, "post_id": 41644225, "comment_id": 71333924, "body": "@Sinan&#220;n&#252;r &quot;.&quot; does not work for my case. Is there any don&#39;t care symbol except for &quot;.&quot;. Also, I am sorry about my slow response. I couldn&#39;t not follow this thread since I moved into the other state and started a new job here."}], "answers": [{"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 3, "last_activity_date": 1484346437, "creation_date": 1484346437, "answer_id": 41644426, "question_id": 41644225, "link": "https://stackoverflow.com/questions/41644225/dont-care-symbol-in-perl/41644426#41644426", "title": "Don&#39;t care symbol in Perl", "body": "<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy $search_for = 'X1001100100010110111110110101001000010110101111101';\n(my $pat = $search_for) =~ s/X/./g;\n\nwhile (my $line = &lt;DATA&gt;) {\n    next unless $line =~ /\\S/;\n    my $key = (split ' ', $line, 3)[1];\n    if ($key =~ /^$pat\\z/) {\n        print $line;\n    }\n}\n\n__DATA__\n0.1 11001100100010110111110110101001000010110101111101  rml_irf_old_e_cwp_e[1]  rml_irf_new_e_cwp_e[1]  rml_irf_swap_even_e rml_irf_old_e_cwp_e[0]  rml_irf_new_e_cwp_e[0]  rml_irf_swap_odd_e\n0.1 11101100110010011011001101100111001001100000010011  3.923510310023e-06  3.19470818154393e-08    7.05437377900141e-10    7.05437377900141e-10    4.89200539851702e-17    5.01433479478681e-19\n0.1 10000110001111010010111101110011001001011110000100  rml_irf_new_e_cwp_e[1]  rml_irf_new_e_cwp_e[0]\n0.1 01110111010010000000101001000001100011011100011111  0.052908822741908   2.7185508579738e-05\n0.1 01001100100100001011101000011111100101111011000111  rml_irf_new_e_cwp_e[1]\n0.1 00111101000100001101010111010100000111100100100101  1.09213787524617e-25\n0.1 00001000011110000101010110111000000111011110011001  rml_irf_new_e_cwp_e[1]  rml_irf_new_lo_cwp_e[1] rml_irf_new_lo_cwp_e[2]\n0.1 01101001011110101011111011011011101100110100000101  2.28019753307221e-06    2.89026436307201e-\n</code></pre>\n\n<p>In addition, you really ought to take a critical look at your variables. You have too many of them, and they are not named usefully. Also, if they all begin with <code>A</code>, the <code>A</code> conveys no information.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1487364488, "last_edit_date": 1495540807, "creation_date": 1484346489, "answer_id": 41644436, "question_id": 41644225, "link": "https://stackoverflow.com/questions/41644225/dont-care-symbol-in-perl/41644436#41644436", "title": "Don&#39;t care symbol in Perl", "body": "<p>If I understand it right, you need the first (least significant) 49 bits to be the same.  </p>\n\n<p>For instance, set bit 50 for both then compare</p>\n\n<pre><code>if ( ($v1 | (1&lt;&lt;49)) == ($v2 | (1&lt;&lt;49)) ) { say \"Match\" }\n</code></pre>\n\n<p>where <code>$v1</code> and <code>$v2</code> are integers that may only differ in the 50-th bit for the test to return true.</p>\n\n<p>The rest is about choosing how to form those integers from binary strings.</p>\n\n<hr>\n\n<p>Using <a href=\"http://perldoc.perl.org/Math/BigInt.html\" rel=\"nofollow noreferrer\">Math::BigInt</a> as in the question (with <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a>'s comparison numbers)</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Math::BigInt;\n\nmy $input_bin = '01001100100010110111110110101001000010110101111101';\nmy $input  = Math::BigInt-&gt;from_bin($input_bin);    \nprint \"$input_bin  input\\n\";\n\n# First number in @nums differs from input only in the left-most bit\nmy @nums = (\n   '11001100100010110111110110101001000010110101111101',\n   '11101100110010011011001101100111001001100000010011'\n);\n\nmy $bits = 49;\nforeach my $num_bin (@nums) \n{\n   my $num = Math::BigInt-&gt;from_bin($num_bin);\n\n   if ( ($input | (1&lt;&lt;$bits)) == ($num | (1&lt;&lt;$bits)) ) \n   { \n       print \"$num_bin  matches\\n\"; \n   } \n   else { \n       print \"$num_bin  does not match\\n\" \n   }\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre>\n01001100100010110111110110101001000010110101111101  input\n11001100100010110111110110101001000010110101111101  matches\n11101100110010011011001101100111001001100000010011  does not match\n</pre>\n\n<p>There are other modules for this, firstly <a href=\"http://search.cpan.org/~salva/Math-Int64-0.54/lib/Math/Int64.pm\" rel=\"nofollow noreferrer\">Math::Int64</a>.</p>\n\n<p>If you have no other use of <code>Math::BigInt</code> you can get your integers in other ways, provided your system has 64 bit support and Perl was compiled with it.</p>\n\n<hr>\n\n<p>Using <a href=\"http://perldoc.perl.org/functions/pack.html\" rel=\"nofollow noreferrer\">pack</a>, where the string first need be padded to 64</p>\n\n<pre><code>my $input = unpack(\"Q&gt;\", pack(\"B*\", substr(\"0\" x 64 . $input_bin, -64)));\n</code></pre>\n\n<p>where <code>Q</code> is</p>\n\n<blockquote>\n<pre><code>q  A signed quad (64-bit) value.\n    Q  An unsigned quad value.\n     (Quads are available only if your system supports 64-bit\n      integer values _and_ if Perl has been compiled to support\n      those.  Raises an exception otherwise.)\n</code></pre>\n</blockquote>\n\n<p>and <code>&gt;</code> is the big-endian modifier, needed for agreement with <code>B</code> template in <code>pack</code>.</p>\n\n<hr>\n\n<p>Using <a href=\"http://perldoc.perl.org/functions/oct.html\" rel=\"nofollow noreferrer\">oct</a> is far simpler, if you don't mind turning off <code>'portable'</code> warnings</p>\n\n<pre><code>no warnings 'portable';\n\nmy $input = oct '0b' . $input_bin;\n\nmy $bits = 49;\nforeach my $num_bin (@nums) \n{\n   my $num = oct '0b' . $num_bin;\n\n   if ( ($input | (1&lt;&lt;$bits)) == ($num | (1&lt;&lt;$bits)) ) { \n       print \"$num_bin  matches\\n\"; \n   } else { \n       print \"$num_bin  does not match\\n\" \n   }\n}\n</code></pre>\n\n<p>The warning would be about this code not being portable between 32 and 64 bit Perls.  This should be considerably faster than <code>pack</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 339, "user_id": 5683724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-ys-8Xx_dcVY/AAAAAAAAAAI/AAAAAAAAACg/QkZg_guBu6g/photo.jpg?sz=128", "display_name": "Jaeyoung Park", "link": "https://stackoverflow.com/users/5683724/jaeyoung-park"}, "edited": false, "score": 0, "creation_date": 1486442167, "post_id": 41644972, "comment_id": 71334557, "body": "Thank you for all your help. I decided to use the string version because it is the fastest one. Also, I am sorry about my slow response. I recently moved into the other state and got a new job so I did not follow up. Thanks anyway!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 6, "last_activity_date": 1484664748, "last_edit_date": 1484664748, "creation_date": 1484349650, "answer_id": 41644972, "question_id": 41644225, "link": "https://stackoverflow.com/questions/41644225/dont-care-symbol-in-perl/41644972#41644972", "title": "Don&#39;t care symbol in Perl", "body": "<p>Using <a href=\"http://search.cpan.org/perldoc?Math::BigInt\" rel=\"nofollow noreferrer\">Math::BigInt</a>: (Comes with Perl)</p>\n\n<pre><code>use Math::BigInt qw( );\n\nmy $pattern = 'X1001100100010110111110110101001000010110101111101';\nmy $mask = Math::BigInt-&gt;from_bin( $pattern =~ tr/X01/011/r );\nmy $targ = Math::BigInt-&gt;from_bin( $pattern =~ tr/X/0/r );\n\nfor my $num_bin (qw(\n   11001100100010110111110110101001000010110101111101\n   11101100110010011011001101100111001001100000010011\n)) {\n   my $num = Math::BigInt-&gt;from_bin($num);\n   if (($num &amp; $mask) == $targ) {\n      say \"$num_bin matches\";\n   } else {\n      say \"$num_bin doesn't match\";\n   }\n}\n</code></pre>\n\n<p>Using <a href=\"http://search.cpan.org/perldoc?Math::UInt64\" rel=\"nofollow noreferrer\">Math::UInt64</a>: (Faster than BigInt)</p>\n\n<pre><code>use Math::UInt64 qw( net_to_uint64 );\n\nsub bin_to_uint64 { net_to_uint64 pack 'B*', substr( ( \"0\" x 64 ) . $_[0], -64 ) }\n\nmy $pattern = 'X1001100100010110111110110101001000010110101111101';\nmy $mask = bin_to_uint64( $pattern =~ tr/X01/011/r );\nmy $targ = bin_to_uint64( $pattern =~ tr/X/0/r );\n\nfor my $num_bin (qw(\n   11001100100010110111110110101001000010110101111101\n   11101100110010011011001101100111001001100000010011\n)) {\n   my $num = bin_to_uint64($num);\n   if (($num &amp; $mask) == $targ) {\n      say \"$num_bin matches\";\n   } else {\n      say \"$num_bin doesn't match\";\n   }\n}\n</code></pre>\n\n<p>Using native integers: (Fastest yet if supported)</p>\n\n<pre><code>use Config qw( %Config );\n\nsub bin_to_uint64 { unpack 'Q&gt;', pack 'B*', substr( ( '0' x 64 ) . $_[0], -64 ) }\n\ndie(\"64-ints required\\n\") if $Config{ivsize} &lt; 8;\n\nmy $pattern = 'X1001100100010110111110110101001000010110101111101';\nmy $mask = bin_to_uint64( $pattern =~ tr/X01/011/r );\nmy $targ = bin_to_uint64( $pattern =~ tr/X/0/r );\n\nfor my $num_bin (qw(\n   11001100100010110111110110101001000010110101111101\n   11101100110010011011001101100111001001100000010011\n)) {\n   my $num = bin_to_uint64($num);\n   if (($num &amp; $mask) == $targ) {\n      say \"$num_bin matches\";\n   } else {\n      say \"$num_bin doesn't match\";\n   }\n}\n</code></pre>\n\n<p>Using packed ints: (Fastest yet. As written, assumes pattern and num_bin are the same length.)</p>\n\n<pre><code>sub bin_to_packed { pack 'B*', $_[0] }\n\nmy $pattern = 'X1001100100010110111110110101001000010110101111101';\nmy $mask = bin_to_packed( $pattern =~ tr/X01/011/r );\nmy $targ = bin_to_packed( $pattern =~ tr/X/0/r );\n\nfor my $num_bin (qw(\n   11001100100010110111110110101001000010110101111101\n   11101100110010011011001101100111001001100000010011\n)) {\n   my $num = bin_to_packed($num);\n   if (($num &amp; $mask) eq $targ) {\n      say \"$num_bin matches\";\n   } else {\n      say \"$num_bin doesn't match\";\n   }\n}\n</code></pre>\n\n<p>Using strings: (Fastest because nothing needs to be done in the loop but the actual check. Assumes pattern and num_bin are the same length.)</p>\n\n<pre><code>my $pattern = 'X1001100100010110111110110101001000010110101111101';\nmy $mask = $pattern =~ tr/X01/\\x00\\xFF\\xFF/r;\nmy $targ = $pattern =~ tr/X/\\x00/r;\n\nfor my $num_bin (qw(\n   11001100100010110111110110101001000010110101111101\n   11101100110010011011001101100111001001100000010011\n)) {\n   if (($num_bin &amp; $mask) eq $targ) {\n      say \"$num_bin matches\";\n   } else {\n      say \"$num_bin doesn't match\";\n   }\n}\n</code></pre>\n\n<p>Same as above, but works without 5.14+</p>\n\n<pre><code>my $pattern = 'X1001100100010110111110110101001000010110101111101';\n( my $mask = $pattern ) =~ tr/X01/\\x00\\xFF\\xFF/;\n( my $targ = $pattern ) =~ tr/X/\\x00/;\n\nfor my $num_bin (qw(\n   11001100100010110111110110101001000010110101111101\n   11101100110010011011001101100111001001100000010011\n)) {\n   if (($num_bin &amp; $mask) eq $targ) {\n      say \"$num_bin matches\";\n   } else {\n      say \"$num_bin doesn't match\";\n   }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>11001100100010110111110110101001000010110101111101 matches\n11101100110010011011001101100111001001100000010011 doesn't match\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 339, "user_id": 5683724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-ys-8Xx_dcVY/AAAAAAAAAAI/AAAAAAAAACg/QkZg_guBu6g/photo.jpg?sz=128", "display_name": "Jaeyoung Park", "link": "https://stackoverflow.com/users/5683724/jaeyoung-park"}, "is_accepted": false, "score": 0, "last_activity_date": 1484440414, "creation_date": 1484440414, "answer_id": 41656558, "question_id": 41644225, "link": "https://stackoverflow.com/questions/41644225/dont-care-symbol-in-perl/41656558#41656558", "title": "Don&#39;t care symbol in Perl", "body": "<p>Thank you for all your answers. I would appreciate all the help. I think what I wanted to know is Shinan's answer. I think the Don't care symbol is \".\" so I would use \".\" instead of using \"X\".</p>\n\n<p>Also, I think my first explanation was not sufficient so I would explain the details. </p>\n\n<p>1) Any bit of the input can be the don't care even if  I used it only for the first bit in my example. </p>\n\n<p>2) BigInt - Even if the example is 50-bit, I will use more bit later so native integer is not enough. However,  Math::Uint64 is much faster as ikegami suggested and I will use it.</p>\n\n<p>I will test all your suggestion tonight and post my answer soon. Thank you again.</p>\n"}], "owner": {"reputation": 339, "user_id": 5683724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-ys-8Xx_dcVY/AAAAAAAAAAI/AAAAAAAAACg/QkZg_guBu6g/photo.jpg?sz=128", "display_name": "Jaeyoung Park", "link": "https://stackoverflow.com/users/5683724/jaeyoung-park"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 1, "answer_count": 4, "score": 1, "last_activity_date": 1487364488, "creation_date": 1484345415, "question_id": 41644225, "link": "https://stackoverflow.com/questions/41644225/dont-care-symbol-in-perl", "title": "Don&#39;t care symbol in Perl", "body": "<p>I am wondering whether it is a Don't care symbol (X) in Perl.</p>\n\n<p>I have a 50-bit binary input (actually, I used BigInt). If the input is matched with data in database, I would return a pre-defined value.  </p>\n\n<p>Let's say the data in the database is 11001100100010110111110110101001000010110101111101  . </p>\n\n<p>If the input is X1001100100010110111110110101001000010110101111101, I would like to treat that it is a matched case because X can be 1 or 0. I know a way to split 50 bits in 50 1-bit and make an exception, but I would prefer to handle 50-bit together.</p>\n\n<p>test.pl (main code, looks messy but the operation is simple, read database and input file and return an output file including a pre-defined value for the matched case. run by test.pl ) :</p>\n\n<pre><code>#!/usr/bin/perl \n\nuse strict;\n#use warnings;\nuse Math::BigInt;\n#use Math::Gauss ':all';\n#use Math::Gauss;\nuse 5.010;\nuse List::Util qw(sum);\n\nmy $Astrip=\"cmp_top.iop.sparc0.exu.rml.\";\nmy $Aj=0;\nmy @Aoutput;\nmy $At=0;\nmy $Agen;\nmy @Aitems; my @Aweights;\nmy @Aitems_p; my @Aweights_p;\nmy $Ap=0;\nmy $Aselected_p = 0;\nmy $Atotal_p; my $Arand_p; my $Alimit_p;\nmy $Ai=0; my $Am=0; my $Ak=0;\nmy $Atotal; my $Arand; my $Alimit;\nmy $Aselected =0; my $Attemp=0; my $Ane=0; my $Asum=0;\nmy $Al=0; my $Attest=0;\n\n#### change edb workload - matmul\nopen(CSV,'database.db')||die(\"Cannot open edb file $!\");\nmy @Aedb;\n\nwhile(&lt;CSV&gt;){\n    my @Arow=split(/\\t/,$_);\n    push(@Aedb,\\@Arow);\n}\nclose CSV || die $!;\n#       if ($At == 0) { goto ASTART;        }\nmy @Ainput=do{\n    open my $Afh,\"&lt;\",\"test.input\" or die(\"Cannot open an input file $!\");\n    &lt;$Afh&gt;;\n};\nfor (my $An=0; $An &lt; (scalar @Ainput); $An +=3) {\n### First loop\n$Attest = 0;\nfor ($Ai=0; $Ai &lt; (scalar @Aedb); $Ai +=2) {\n    $a = Math::BigInt-&gt;new(\"$Aedb[$Ai][1]\");\n    $b = Math::BigInt-&gt;new(\"$Ainput[$An]\"); \n    if ( $a == $b ) {\n\n    $a = Math::BigInt-&gt;new(\"$Aedb[$Ai+1][1]\");\n    $b = Math::BigInt-&gt;new(\"$Ainput[$An+1]\");\n    if ( $a == $b ) {       $Attemp=0;\n        $Attest++; \n        $Agen=$Ainput[$An+2];\n        if (not defined $Agen) { $Arand_p = rand();}\n        else { $Arand_p =  $Agen;   }\n        #$Attemp=0;\n        for ($Aj=2; $Aj &lt; scalar @{ $Aedb[$Ai+1] }; $Aj++) {\n            if ( $Aedb[$Ai+1][$Aj]/$Aedb[$Ai+1][2] &gt; $Arand_p ) {\n                $At++;\n                    $Aedb[$Ai][$Aj] =~ s/\\n//g;\n                $Aoutput[$At+$An/3]= $Astrip.$Aedb[$Ai][$Aj];\n                $Attemp++;\n            }\n        }\n    #$Aoutput[$An/3+$At-$Attemp]= $Attemp;\n    }\n    }\n}\n\n}\nopen(my $Afh2, '&gt;', 'test.output');\nprint $Afh2 join(\"\\n\", @Aoutput);\nclose $Afh2;\n</code></pre>\n\n<p>database.db (database file):</p>\n\n<pre><code>0.1 11001100100010110111110110101001000010110101111101  rml_irf_old_e_cwp_e[1]  rml_irf_new_e_cwp_e[1]  rml_irf_swap_even_e rml_irf_old_e_cwp_e[0]  rml_irf_new_e_cwp_e[0]  rml_irf_swap_odd_e\n0.1 11101100110010011011001101100111001001100000010011  3.923510310023e-06  3.19470818154393e-08    7.05437377900141e-10    7.05437377900141e-10    4.89200539851702e-17    5.01433479478681e-19\n0.1 10000110001111010010111101110011001001011110000100  rml_irf_new_e_cwp_e[1]  rml_irf_new_e_cwp_e[0]\n0.1 01110111010010000000101001000001100011011100011111  0.052908822741908   2.7185508579738e-05\n0.1 01001100100100001011101000011111100101111011000111  rml_irf_new_e_cwp_e[1]\n0.1 00111101000100001101010111010100000111100100100101  1.09213787524617e-25\n0.1 00001000011110000101010110111000000111011110011001  rml_irf_new_e_cwp_e[1]  rml_irf_new_lo_cwp_e[1] rml_irf_new_lo_cwp_e[2]\n0.1 01101001011110101011111011011011101100110100000101  2.28019753307221e-06    2.89026436307201e-14    2.89026436307201e-14\n</code></pre>\n\n<p>test.input :</p>\n\n<pre><code>11001100100010110111110110101001000010110101111101\n11101100110010011011001101100111001001100000010011\n</code></pre>\n\n<p>test.output (a pre-defined value for the input and nothing for the unmatched case. I would like to have the same output with X10011...) :</p>\n\n<pre><code>cmp_top.iop.sparc0.exu.rml.rml_irf_old_e_cwp_e[1]\n</code></pre>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1484341511, "creation_date": 1484341511, "answer_id": 41643409, "question_id": 41643367, "link": "https://stackoverflow.com/questions/41643367/pass-either-a-regex-or-string-into-a-perl-subroutine/41643409#41643409", "title": "Pass either a regex or string into a Perl subroutine", "body": "<p>I recommend against that since that which <code>\"hello\\s+world\"</code> returns is as much of a regex pattern as that which <code>qr/hello\\s+world/</code> returns.</p>\n\n<p>That said, you can use builtin <a href=\"http://search.cpan.org/perldoc?re\" rel=\"nofollow noreferrer\"><code>re::is_regexp</code></a> to check if a scalar contains a regex pattern compiled by <code>qr</code>.</p>\n"}], "owner": {"reputation": 392, "user_id": 2346823, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GB7Hs.png?s=128&g=1", "display_name": "Yoshiya", "link": "https://stackoverflow.com/users/2346823/yoshiya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "closed_date": 1484341569, "accepted_answer_id": 41643409, "answer_count": 1, "score": 1, "last_activity_date": 1484341511, "creation_date": 1484341316, "question_id": 41643367, "link": "https://stackoverflow.com/questions/41643367/pass-either-a-regex-or-string-into-a-perl-subroutine", "closed_reason": "Duplicate", "title": "Pass either a regex or string into a Perl subroutine", "body": "<p>I would like to write a Perl subroutine that takes either a string value or a regex value as a parameter and do different things depending on the result. For the sake of this question it simply returns <code>\"regex\"</code> if it is a regex value and <code>\"string\"</code> if it is not a regex:</p>\n\n<pre><code>sub value_string_or_regex {\n    my ($value) = @_;\n    my $result = '';\n    # magic here\n    return $result;\n}\n</code></pre>\n\n<p>So the following code would print out \"<code>string</code>\":</p>\n\n<pre><code>print(value_string_or_regex(\"hello world\") . \"\\n\");\n</code></pre>\n\n<p>And the following code would print out \"<code>regex</code>\":</p>\n\n<pre><code>print(value_string_or_regex(qr/^.*world$/) . \"\\n\");\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 5, "creation_date": 1484338537, "post_id": 41642726, "comment_id": 70485346, "body": "Why &quot;<i>without using reverse function.</i>&quot;?  Seems pretty arbitrary."}, {"owner": {"reputation": 620, "user_id": 6641380, "user_type": "registered", "accept_rate": 97, "profile_image": "https://lh4.googleusercontent.com/-xpKbsD1iVLg/AAAAAAAAAAI/AAAAAAAAAGg/MAO7biFVz9I/photo.jpg?sz=128", "display_name": "Shankhadeep Mukerji", "link": "https://stackoverflow.com/users/6641380/shankhadeep-mukerji"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1484338646, "post_id": 41642726, "comment_id": 70485397, "body": "@zdim its a part of academic exercise, to do so."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1484338673, "post_id": 41642726, "comment_id": 70485409, "body": "<a href=\"http://www.justskins.com/forums/reverse-range-10-1-a-25966.html\" rel=\"nofollow noreferrer\">More techniques from a Google search result</a>"}, {"owner": {"reputation": 1405, "user_id": 1476792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c301fe5a5792851c5eb25873d06214?s=128&d=identicon&r=PG", "display_name": "Yimin Rong", "link": "https://stackoverflow.com/users/1476792/yimin-rong"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1484340962, "post_id": 41642726, "comment_id": 70486465, "body": "@zdim - I&#39;m guessing it&#39;s probably homework..."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 2, "creation_date": 1484341366, "post_id": 41642726, "comment_id": 70486633, "body": "<code>print $months[-$_] for 1..@months;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1405, "user_id": 1476792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c301fe5a5792851c5eb25873d06214?s=128&d=identicon&r=PG", "display_name": "Yimin Rong", "link": "https://stackoverflow.com/users/1476792/yimin-rong"}, "edited": false, "score": 0, "creation_date": 1484341832, "post_id": 41642726, "comment_id": 70486813, "body": "@YiminRong  Yeah, they said so ... I like the term &quot;academic exercise&quot; though :)"}], "answers": [{"tags": [], "owner": {"reputation": 1405, "user_id": 1476792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c301fe5a5792851c5eb25873d06214?s=128&d=identicon&r=PG", "display_name": "Yimin Rong", "link": "https://stackoverflow.com/users/1476792/yimin-rong"}, "is_accepted": false, "score": 3, "last_activity_date": 1484338579, "creation_date": 1484338579, "answer_id": 41642782, "question_id": 41642726, "link": "https://stackoverflow.com/questions/41642726/print-array-elements-in-reverse-order-in-perl/41642782#41642782", "title": "print array elements in reverse order in perl", "body": "<p>In pseudocode:</p>\n\n<pre><code>while array is not empty\n    element \u2190 pop from array\n    print element\nend\n</code></pre>\n\n<p>I'll leave it as an exercise for you to find the actual names of the functions. \u263a</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1484339923, "last_edit_date": 1484339923, "creation_date": 1484338612, "answer_id": 41642789, "question_id": 41642726, "link": "https://stackoverflow.com/questions/41642726/print-array-elements-in-reverse-order-in-perl/41642789#41642789", "title": "print array elements in reverse order in perl", "body": "<pre><code>@months[-6 .. 0], @months[-1 .. 0]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>@months[-6 .. 0, -1 .. 0]\n</code></pre>\n\n<p>means</p>\n\n<pre><code>@months[-6, -5, -4, -3, -2, -1, 0, -1, 0]\n</code></pre>\n\n<p>But you want</p>\n\n<pre><code>@months[-1, -2, -3, -4, -5, -6, -7, -8]\n</code></pre>\n\n<p>or simply</p>\n\n<pre><code>@months[7, 6, 5, 4, 3, 2, 1, 0]\n</code></pre>\n\n<hr>\n\n<p>The obvious solution is</p>\n\n<pre><code>reverse(@months)\n</code></pre>\n\n<p>Other expressions that work:</p>\n\n<pre><code>@months[ map { -$_ } 1..@months ]\n\n@months[ map { $#months-$_ } 0..$#months ]\n\nmap { $months[-$_] } 1..@months\n\nmap { $months[ $#months-$_ ] } 0..$#months\n\nuse feature qw( current_sub );\nsub { @_ ? pop(@_), __SUB__-&gt;(@_) : () }-&gt;(@months)\n\ndo { my @reversed; for my $month (@months) { unshift(@reversed, $month) } @reversed }\n</code></pre>\n\n<p>An in-place solution:</p>\n\n<pre><code>for (0..@months/2-1) {\n   ($month[$_], $month[-$_-1]) = ($month[-$_-1], $month[$_]);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484349128, "post_id": 41642915, "comment_id": 70489531, "body": "It&#39;s ok if answers overlap; you don&#39;t need to excuse it :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484349982, "post_id": 41642915, "comment_id": 70489794, "body": "@ikegami Thank you for saying that :)  The &#39;history&#39; of this was funny though -- I posted (the bottom part only at the time) and then looked up ... and it was right there in your extensive answer! So i deleted it ... I added another piece later"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1484461149, "last_edit_date": 1495540897, "creation_date": 1484339127, "answer_id": 41642915, "question_id": 41642726, "link": "https://stackoverflow.com/questions/41642726/print-array-elements-in-reverse-order-in-perl/41642915#41642915", "title": "print array elements in reverse order in perl", "body": "<p>To only \"<em>print the elements</em>\"</p>\n\n<pre><code>while (my $mon = pop @months) { say $mon }\n</code></pre>\n\n<p>or</p>\n\n<pre><code>say pop @months while @months;\n</code></pre>\n\n<p>Or, as given in a comment by <a href=\"https://stackoverflow.com/users/223226/%D0%A1%D1%83%D1%85%D0%BE%D0%B927\">\u0421\u0443\u0445\u043e\u043927</a></p>\n\n<pre><code>print $months[-$_] for 1..@months;\n</code></pre>\n\n<hr>\n\n<p>Original post (contained in the earlier answer by ikegami).</p>\n\n<p>\"<em>Without reverse function</em>\"</p>\n\n<pre><code>my @nums = 1..5;\n\nmy @rev_ind = map { -$_ + $#nums } 0..$#nums;\n\nprint \"@nums[@rev_ind]\\n\";\n</code></pre>\n\n<p>Prints <code>5 4 3 2 1</code></p>\n\n<hr>\n"}, {"tags": [], "owner": {"reputation": 685, "user_id": 7400458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e295f678c85d4289bd3f2b886db25d9e?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastien Dufresne", "link": "https://stackoverflow.com/users/7400458/sebastien-dufresne"}, "is_accepted": false, "score": 0, "last_activity_date": 1484340349, "creation_date": 1484340349, "answer_id": 41643160, "question_id": 41642726, "link": "https://stackoverflow.com/questions/41642726/print-array-elements-in-reverse-order-in-perl/41643160#41643160", "title": "print array elements in reverse order in perl", "body": "<p>This is another versatile way to work with a variable number of elements, in reverse order, from an array, from the last element to the first one:</p>\n\n<pre><code>my @months = (January, February, March, April, May, June, July, August);\n\nfor (my $i = $#months; $i &gt;= 0; $i--) { \n  print $months[$i];\n} \n</code></pre>\n"}], "owner": {"reputation": 620, "user_id": 6641380, "user_type": "registered", "accept_rate": 97, "profile_image": "https://lh4.googleusercontent.com/-xpKbsD1iVLg/AAAAAAAAAAI/AAAAAAAAAGg/MAO7biFVz9I/photo.jpg?sz=128", "display_name": "Shankhadeep Mukerji", "link": "https://stackoverflow.com/users/6641380/shankhadeep-mukerji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2917, "favorite_count": 0, "accepted_answer_id": 41642789, "answer_count": 4, "score": 1, "last_activity_date": 1484461149, "creation_date": 1484338321, "question_id": 41642726, "link": "https://stackoverflow.com/questions/41642726/print-array-elements-in-reverse-order-in-perl", "title": "print array elements in reverse order in perl", "body": "<p>I am trying to print the elements of an array in reverse order, starting from the last element to the 0th element, when I dont know the list count, without using reverse function. Here is the input and output.</p>\n\n<pre><code>#!/usr/bin/perl/\nuse warnings;\nuse strict;\n\n@months = (January, February, March, April, May, June, July, August);\nprint @months[-6 .. 0];\nprint @months[-1 .. 0];\n</code></pre>\n\n<p>The output it gives me is </p>\n\n<pre><code>MarchAprilMayJuneJulyAugustJanuary\nAugustJanuary\n</code></pre>\n\n<p>But what I want is, it should print out</p>\n\n<pre><code>AugustJulyJuneMayAprilMarchFebruaryJanuary\n</code></pre>\n\n<p>Can anyone please help. I am a perl beginner. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484332894, "post_id": 41641316, "comment_id": 70482605, "body": "What exactly are you seeing that makes you think it isn&#39;t working? If you&#39;re getting an error, please <a href=\"https://stackoverflow.com/posts/41641316/edit\">edit</a> the exact error text into your question."}, {"owner": {"reputation": 1, "user_id": 7416345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b141643e866ed5c4588bdb22faacfd1?s=128&d=identicon&r=PG&f=1", "display_name": "Burn Bazzle", "link": "https://stackoverflow.com/users/7416345/burn-bazzle"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484335012, "post_id": 41641316, "comment_id": 70483606, "body": "It runs without throwing an error. However, its supposed to be processing the urls from my @URLs and it does not. That&#39;s the trouble I&#39;m having with it."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484335324, "post_id": 41641316, "comment_id": 70483743, "body": "Is that really the exact code you&#39;re using? <code>&quot;http:&#47;&#47;example.com, http:&#47;&#47;example2.com&quot;</code> is not a valid URL, so I would expect you to get an error."}, {"owner": {"reputation": 1, "user_id": 7416345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b141643e866ed5c4588bdb22faacfd1?s=128&d=identicon&r=PG&f=1", "display_name": "Burn Bazzle", "link": "https://stackoverflow.com/users/7416345/burn-bazzle"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484335364, "post_id": 41641316, "comment_id": 70483763, "body": "I should mention by stating up above that it works by changing the url line, it works only by processing a singular URL, an I want to process thousands from what I have defined in the my @URLs reference."}, {"owner": {"reputation": 1, "user_id": 7416345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b141643e866ed5c4588bdb22faacfd1?s=128&d=identicon&r=PG&f=1", "display_name": "Burn Bazzle", "link": "https://stackoverflow.com/users/7416345/burn-bazzle"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484335437, "post_id": 41641316, "comment_id": 70483805, "body": "I changed it to example. The original URLs did not return any $response codes. If I put a singular URL in the my $url, it ran. But I need it to process what&#39;s in my @URLs."}, {"owner": {"reputation": 1, "user_id": 7416345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b141643e866ed5c4588bdb22faacfd1?s=128&d=identicon&r=PG&f=1", "display_name": "Burn Bazzle", "link": "https://stackoverflow.com/users/7416345/burn-bazzle"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484335578, "post_id": 41641316, "comment_id": 70483886, "body": "The problem is the singular URL should be in the @_ where my $url = @_ is, and it is not. Something is broken there or in the foreach, I believe."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1484335847, "post_id": 41641316, "comment_id": 70484011, "body": "Ah, I see it now. You copied the example wrong. It should be <code>my ($url) = @_;</code>. You forgot the parentheses."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484335993, "post_id": 41641316, "comment_id": 70484076, "body": "@ThisSuitIsBlackNot sorry I essentially stole your answer. I read all the comments to make sure this hadn&#39;t been said, but I saw it immediately. Did code review the whole day at $work... ;)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7416345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b141643e866ed5c4588bdb22faacfd1?s=128&d=identicon&r=PG&f=1", "display_name": "Burn Bazzle", "link": "https://stackoverflow.com/users/7416345/burn-bazzle"}, "edited": false, "score": 0, "creation_date": 1484336080, "post_id": 41642131, "comment_id": 70484102, "body": "AHaha, sorry I missed that. Thanks. that was it."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1484335875, "creation_date": 1484335875, "answer_id": 41642131, "question_id": 41641316, "link": "https://stackoverflow.com/questions/41641316/trying-to-follow-the-netasynchttp-example-to-process-multiple-urls-but-faili/41642131#41642131", "title": "Trying to follow the Net::Async::HTTP example to process multiple URLs but failing to get it to work", "body": "<p>You are assigning the number of items in <code>@_</code> to <code>$url</code> because that's what arrays do in list context.</p>\n\n<pre><code>my ( $url ) = @_;\n</code></pre>\n\n<p>The parenthesis will tell Perl that the left-hand-side of the assignment is a list.</p>\n\n<pre><code>(my $url) = @_;\n</code></pre>\n\n<p>This would work as well, but looks stupid.</p>\n"}], "owner": {"reputation": 1, "user_id": 7416345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b141643e866ed5c4588bdb22faacfd1?s=128&d=identicon&r=PG&f=1", "display_name": "Burn Bazzle", "link": "https://stackoverflow.com/users/7416345/burn-bazzle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1484336073, "creation_date": 1484332602, "last_edit_date": 1484336073, "question_id": 41641316, "link": "https://stackoverflow.com/questions/41641316/trying-to-follow-the-netasynchttp-example-to-process-multiple-urls-but-faili", "title": "Trying to follow the Net::Async::HTTP example to process multiple URLs but failing to get it to work", "body": "<p>Below is what I have. If I change my <code>$url = @_</code> to a working URL, it works, but the example is supposed to read in from what's defined in my <code>@URLs</code> using the <code>foreach</code>, I believe. Could someone show me or tell me why this doesn't work so I can correct it?</p>\n\n<pre><code>#!/bin/perl\n\nuse IO::Async::Loop;\nuse Net::Async::HTTP;\nuse Future::Utils qw(fmap_void);\nuse URI;\n\nuse feature 'say';\n\nuse strict;\nuse warnings;\n\nmy @URLs = ( \"http://example.com, http://example2.com\" );\nmy $loop   = IO::Async::Loop-&gt;new();\nmy $http = Net::Async::HTTP-&gt;new();\n\n$loop-&gt;add($http);\n\nmy $future = fmap_void {\n    my $url = @_;\n    $http-&gt;GET($url)-&gt;on_done(\n        sub {\n            my $response = shift;\n            say $response-&gt;content;\n        }\n      )-&gt;on_fail(\n        sub {\n            my $fail = shift;\n            say $fail;\n        }\n      );\n}\nforeach =&gt; \\@URLs;\n$loop-&gt;await($future);\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 8, "creation_date": 1484324872, "post_id": 41639174, "comment_id": 70477978, "body": "Because <code>$DIR</code> is a different variable than <code>$dir</code>."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1484325482, "post_id": 41639174, "comment_id": 70478381, "body": "<code>use strict;</code> and <code>use warnings;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1484329020, "post_id": 41639174, "comment_id": 70480528, "body": "@stevieb: <i>&quot;Global symbol $DIR requires explicit package name&quot;</i> indicates that they have at least <code>use strict &#39;vars&#39;</code> in place."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1484326414, "last_edit_date": 1484326414, "creation_date": 1484325315, "answer_id": 41639333, "question_id": 41639174, "link": "https://stackoverflow.com/questions/41639174/perl-global-symbol-dir-requires-explicit-package-name-why-cant-i-print-the/41639333#41639333", "title": "Perl - Global symbol $DIR requires explicit package name (why can&#39;t I print the output?)", "body": "<p>You get the error because you are using a variable (<code>$DIR</code>) you never declared. You do have a declared a variable named <code>$dir</code> which appears to be the one you intended to use.</p>\n\n<pre><code>glob \"${dir}/*.csv\"\nglob \"$dir/*.csv\"\nglob $dir.\"/*.csv\"\n</code></pre>\n\n<p>Your code mishandles paths with spaces, <code>*</code>, <code>?</code>, etc. Fix the injection bug using </p>\n\n<pre><code>glob \"\\Q${dir}\\E/*.csv\"\nglob \"\\Q$dir\\E/*.csv\"\nglob quotemeta($dir).\"/*.csv\"\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7415806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e2246f642b15e5383925c9938ccd04c?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/7415806/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "closed_date": 1485783729, "answer_count": 1, "score": -6, "last_activity_date": 1484329038, "creation_date": 1484324754, "last_edit_date": 1484329038, "question_id": 41639174, "link": "https://stackoverflow.com/questions/41639174/perl-global-symbol-dir-requires-explicit-package-name-why-cant-i-print-the", "closed_reason": "Not suitable for this site", "title": "Perl - Global symbol $DIR requires explicit package name (why can&#39;t I print the output?)", "body": "<pre><code>#!/db/pub/infra/CPAN/perl/5.8.8/bin/perl\n\nuse lib '/db/pub/eq/arina/global/perl/lib';\nuse lib '/db/pub/infra/CPAN/perl/5.8.8/lib/site_perl/5.8.8';\n\nuse DBI;\nuse strict;\n\nsub main {\n\n    my $dir = \"/data/dbxpc2_archive/BookingManager/2017-01-12/data/PC1/millennium.ignore.ftp.noencrypt.DB_USD\";\n\n    my @files = glob \"${DIR}/*.csv\";\n\n    print @files;\n}\n\nmain();\n</code></pre>\n"}, {"tags": ["windows", "perl", "perl-module"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1484324343, "post_id": 41638917, "comment_id": 70477641, "body": "It sounds like you&#39;re just asking <a href=\"http://ss64.com/nt/set.html\" rel=\"nofollow noreferrer\">how to set environment variables in Windows</a>."}, {"owner": {"reputation": 17, "user_id": 7387690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/367429523635561/picture?type=large", "display_name": "Narimen Dal", "link": "https://stackoverflow.com/users/7387690/narimen-dal"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1484325621, "post_id": 41638917, "comment_id": 70478481, "body": "maybe, i am not sure of the problem because i already set the environement variable (PATH) and it doesn&#39;twork"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1484325699, "post_id": 41638917, "comment_id": 70478537, "body": "<code>PATH</code> is not the same as <code>WNHOME</code>. It tells you to set <code>WNHOME</code>, so you should set <code>WNHOME</code>."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1484326366, "post_id": 41638917, "comment_id": 70479004, "body": "You <i>MUST</i> learn how to use your chosen OS and development environment before trying your hand at programming. There are no two ways about it."}, {"owner": {"reputation": 17, "user_id": 7387690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/367429523635561/picture?type=large", "display_name": "Narimen Dal", "link": "https://stackoverflow.com/users/7387690/narimen-dal"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1484327273, "post_id": 41638917, "comment_id": 70479529, "body": "@Sinan&#220;n&#252;r your answers is not in the topic, if you have a constructiv idea, so tell it, because i know variable environement and all what you speak about, it just only problem of english ;)"}, {"owner": {"reputation": 17, "user_id": 7387690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/367429523635561/picture?type=large", "display_name": "Narimen Dal", "link": "https://stackoverflow.com/users/7387690/narimen-dal"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484327532, "post_id": 41638917, "comment_id": 70479681, "body": "@ThisSuitIsBlackNot thank you this help me because i was confused with the WNHOME, i was thinking windows home"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1484345909, "post_id": 41638917, "comment_id": 70488451, "body": "@NarimenDal Mine was not an answer, it was a comment. You asked how to set an environment variable. You need to know that stuff before you can program. It is just the way it is."}], "answers": [{"tags": [], "owner": {"reputation": 175, "user_id": 5186623, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10206691161224996/picture?type=large", "display_name": "Chedi Bechikh", "link": "https://stackoverflow.com/users/5186623/chedi-bechikh"}, "is_accepted": true, "score": 0, "last_activity_date": 1484327485, "creation_date": 1484327485, "answer_id": 41639947, "question_id": 41638917, "link": "https://stackoverflow.com/questions/41638917/installing-wordnet-module-perl-in-windows-10/41639947#41639947", "title": "Installing Wordnet module perl in Windows 10", "body": "<p>it is very simple, it is not the the PATH, but you must create  new variable one WNHOME (for example    C:\\Program Files\\WordNet\\2.1)it is for the folder of wordnet (WN)) and another variable WNSEARCHDIR for the dictionnary ex: C:\\Program Files\\WordNet\\2.1\\dict</p>\n"}], "owner": {"reputation": 17, "user_id": 7387690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/367429523635561/picture?type=large", "display_name": "Narimen Dal", "link": "https://stackoverflow.com/users/7387690/narimen-dal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "closed_date": 1485783907, "accepted_answer_id": 41639947, "answer_count": 1, "score": -1, "last_activity_date": 1484327485, "creation_date": 1484323964, "question_id": 41638917, "link": "https://stackoverflow.com/questions/41638917/installing-wordnet-module-perl-in-windows-10", "closed_reason": "Not suitable for this site", "title": "Installing Wordnet module perl in Windows 10", "body": "<p>i used the command </p>\n\n<pre><code>cpanm WordNet::Similarity\n</code></pre>\n\n<p>the first time it generate error for installing the dependencies  wiht the package</p>\n\n<p>WordNet::QueryData and the problem seem to be described byt this error message</p>\n\n<blockquote>\n  <p><strong>* Please set the WNHOME environment variable to the location of your\n  <em></strong>   WordNet installation.  QueryData.pm will not work otherwise.\n  <strong></em> Alternatively, you can make the installation in the default\n  *</strong>   location, C:\\Program Files\\WordNet\\3.0 on Windows, or /usr/local/WordNet-3.0 on unix.</p>\n</blockquote>\n\n<p>i donwloaded the last version for windows the version 2.1 i instaled it in C:\\Program Files (x86)\\WordNet\\2.1</p>\n\n<p>the first problem is that they haven't the same name so impossible that the instalation find this location</p>\n\n<p>and the proposed solution is to set </p>\n\n<blockquote>\n  <p>WNHOME environment variable (specifying the WordNet\n  installation directory). </p>\n</blockquote>\n\n<p>how to set the WNHOME? because i set the PATH in the environnment variable to the location and i have the same problem</p>\n"}, {"tags": ["arrays", "perl", "subroutine"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1484312092, "post_id": 41635082, "comment_id": 70469836, "body": "Your question has nothing to do with declarations."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484315120, "post_id": 41635082, "comment_id": 70471630, "body": "It would help a lot if you showed code that is compilable under <code>use strict</code> and <code>use warnings</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484322856, "post_id": 41635082, "comment_id": 70476673, "body": "It would help a lot if you showed code that will compile under <code>use strict</code> and <code>use warnings</code>. Making up stuff that isn&#39;t even Perl code makes your question far too ambiguous."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1484312280, "creation_date": 1484312280, "answer_id": 41635194, "question_id": 41635082, "link": "https://stackoverflow.com/questions/41635082/perl-passing-array-into-subroutine-dealing-with-undeclared-variables/41635194#41635194", "title": "Perl, passing array into subroutine, dealing with undeclared variables", "body": "<p>It's not a problem with a declaration, but rather passing an undefined value. </p>\n\n<p>There's several ways of handling this:</p>\n\n<ul>\n<li>Test for <code>defined</code> on the variable</li>\n<li>Set a 'default' <code>$possible //= \"default_value\"</code> will conditionally assign if undefined. </li>\n</ul>\n\n<p>Or do something else entirely. </p>\n"}, {"comments": [{"owner": {"reputation": 377, "user_id": 5373538, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-GxkXfmMS09k/AAAAAAAAAAI/AAAAAAAAAVE/5swI3yJ70nE/photo.jpg?sz=128", "display_name": "genesi5", "link": "https://stackoverflow.com/users/5373538/genesi5"}, "edited": false, "score": 0, "creation_date": 1484656765, "post_id": 41636240, "comment_id": 70590535, "body": "Thanks, that&#39;s almost exact what i need"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1484315831, "creation_date": 1484315831, "answer_id": 41636240, "question_id": 41635082, "link": "https://stackoverflow.com/questions/41635082/perl-passing-array-into-subroutine-dealing-with-undeclared-variables/41636240#41636240", "title": "Perl, passing array into subroutine, dealing with undeclared variables", "body": "<p>This isn't a problem with declarations. If you pass only two parameters to a subroutine that begins with</p>\n\n<pre><code>    my ( $firm1, $firm2, $possible ) = @_;\n</code></pre>\n\n<p>then <code>$possible</code> is <em>undefined</em>, which means it is set to the special value <code>undef</code>, which is like <code>NULL</code>, <code>None</code>, <code>nil</code> etc. in other languages</p>\n\n<p>As you have seen, you can't compare an undefined value without causing a warning message, and you must first used the <code>defined</code> operator to check that a variable is defined</p>\n\n<p>I <em>think</em> you want to test whether <code>$possible</code> is both defined and set to the string <code>smth</code>. You can do it this way</p>\n\n<pre><code>sub func {\n\n    my ( $firm1, $firm2, $possible ) = @_;\n\n    if ( defined $possible and $possible eq 'smth' ) {\n\n        # Do something\n    }\n}\n\nfunc( qw/ bla bla bla / );    # ok\nfunc( qw/ bla bla / );        # now also ok\n</code></pre>\n"}], "owner": {"reputation": 377, "user_id": 5373538, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-GxkXfmMS09k/AAAAAAAAAAI/AAAAAAAAAVE/5swI3yJ70nE/photo.jpg?sz=128", "display_name": "genesi5", "link": "https://stackoverflow.com/users/5373538/genesi5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 41636240, "answer_count": 2, "score": 0, "last_activity_date": 1515533281, "creation_date": 1484311863, "last_edit_date": 1515533281, "question_id": 41635082, "link": "https://stackoverflow.com/questions/41635082/perl-passing-array-into-subroutine-dealing-with-undeclared-variables", "title": "Perl, passing array into subroutine, dealing with undeclared variables", "body": "<p>I have a sub with some firmly variables and variables I declare and use within the sub, but when I call this sub I can't declare them.</p>\n\n<p>for example:</p>\n\n<pre><code>sub func{\nmy ($firm1, $firm2, $possible) = @_;\n...\nif($possible eq \"smth\"){ # in case i passed this scalar\n}\nelsif($possible eq (\"smth else\" or undef/i_don_t_know)){ # in case i didn't passed this var, but i need it as at least undef or smth like that\n}\n\nfunc(bla, bla, bla); # ok\nfunc(bla, bla); # not ok\n</code></pre>\n\n<p>When I tried that, I got an error </p>\n\n<blockquote>\n  <p>\"Use of uninitialized value $possible in string eq at test.pl line\n  ...\"</p>\n</blockquote>\n\n<p>How can I correct this?</p>\n"}, {"tags": ["perl", "awk", "sed"], "comments": [{"owner": {"reputation": 9362, "user_id": 2885763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/l4VVG.jpg?s=128&g=1", "display_name": "NeronLeVelu", "link": "https://stackoverflow.com/users/2885763/neronlevelu"}, "edited": false, "score": 1, "creation_date": 1484310883, "post_id": 41632817, "comment_id": 70469101, "body": "you need to work in multiline mode or using holding buffer to keep the folder name. Also, with a <code>a</code> you can&#39;t modify the content of this appended line, it&#39;s only in ouptut stream, not in current working buffer"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484320600, "post_id": 41632817, "comment_id": 70475190, "body": "Are the leading spaces in your data really there? Are the blank lines really there?"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484320378, "post_id": 41633635, "comment_id": 70475037, "body": "I can&#39;t account for the downvote, but your code is very non-Perlish. It also matches exact amounts of whitespace, when the leading spaces in the OP&#39;s data probably aren&#39;t even there. Your second <code>if</code> should also be an <code>elseif</code>. Put it up on <a href=\"http://codereview.stackexchange.com/\"><b>Code Review</b></a> if you want a thorough analysis."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484399244, "post_id": 41633635, "comment_id": 70499346, "body": "Thanks @Borodin for your given analysis, I will keep this in mind."}], "tags": [], "owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "is_accepted": false, "score": 0, "last_activity_date": 1484306922, "creation_date": 1484306922, "answer_id": 41633635, "question_id": 41632817, "link": "https://stackoverflow.com/questions/41632817/insert-text-after-specified-lines-in-a-file/41633635#41633635", "title": "insert text after specified lines in a file", "body": "<p>This works for the given <code>data</code> in <code>perl</code>.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nopen my $IN, \"&lt;\", \"test\";\nopen my $OUT, \"&gt;\", \"test_new\";\nmy $insert;\nwhile (my $line = &lt;$IN&gt;){\n    chomp($line);\n\n    if($line =~ m/cp abc\\/(.*).pdb lig.pdb$/){\n        $insert = $1;\n    }\n\n    if($line =~ m/    \\.\\/run\\.pl/){\n        $line = $line.\"\\n\".'    mv *.* '.$insert;\n    }\n    print $OUT $line.\"\\n\";\n}\nclose $IN;\nclose $OUT;\n</code></pre>\n\n<p><strong>OUTPUT:</strong></p>\n\n<pre><code>cp abc/P_10_10A.pdb lig.pdb\ncp abc/protein.pdbqt .\ncp abc/run.pl .\n./run.pl\nmv *.* P_10_10A\n\ncp abc/P_10_11A.pdb lig.pdb\ncp abc/protein.pdbqt .\ncp abc/run.pl .\n./run.pl\nmv *.* P_10_11A\n\ncp abc/P_10_11B.pdb lig.pdb\ncp abc/protein.pdbqt .\ncp abc/run.pl .\n./run.pl\nmv *.* P_10_11B\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "edited": false, "score": 1, "creation_date": 1484308537, "post_id": 41633918, "comment_id": 70467710, "body": "Did not understand the reason for down vote, down voter please let me know what&#39;s wrong here"}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 1, "creation_date": 1484309148, "post_id": 41633918, "comment_id": 70468097, "body": "I didn&#39;t downvoted the answer but given output doesn&#39;t contains <code>space</code> before lines starting with <code>mv *.* P_10_11B</code>."}, {"owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 1, "creation_date": 1484309438, "post_id": 41633918, "comment_id": 70468269, "body": "@AbhiNickz : If you need space please modify like this <code>$0=$0 RS &quot;    mv *.* &quot;s;</code> , put space just before <code>mv *.*</code>"}], "tags": [], "owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "is_accepted": true, "score": 0, "last_activity_date": 1484309522, "last_edit_date": 1484309522, "creation_date": 1484307867, "answer_id": 41633918, "question_id": 41632817, "link": "https://stackoverflow.com/questions/41632817/insert-text-after-specified-lines-in-a-file/41633918#41633918", "title": "insert text after specified lines in a file", "body": "<p><strong>One liner</strong></p>\n\n<pre><code>awk -F'[/.]' '!s &amp;&amp; /cp/{s=$2;}s &amp;&amp; /\\.\\/run\\.pl/{$0=$0 RS \"mv *.* \"s;s=\"\"}1' file\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<pre><code>awk -F'[/.]' '                    # -F set field sep forward slash or dot\n      !s &amp;&amp; /cp/{                 # if s is not set and cp word found\n             s=$2                 # Assign second column value to s\n      }\n      s &amp;&amp; /\\.\\/run\\.pl/{         # when s is set and ./run.pl found\n        $0 = $0 RS \"mv *.* \"s     # append current record with mv *.* value to s\n        s=\"\"                      # Reset s\n      }1                          # perform default operation print $0\n     ' file                       # Input file\n</code></pre>\n\n<p><strong>Input</strong></p>\n\n<pre><code>$ cat f\ncp abc/P_10_10A.pdb lig.pdb\ncp abc/protein.pdbqt .\ncp abc/run.pl .\n./run.pl \n\ncp abc/P_10_11A.pdb lig.pdb\ncp abc/protein.pdbqt .\ncp abc/run.pl .\n./run.pl\n\ncp abc/P_10_11B.pdb lig.pdb\ncp abc/protein.pdbqt .\ncp abc/run.pl .\n./run.pl\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ awk -F'[/.]' '!s &amp;&amp; /cp/{s=$2}s &amp;&amp; /\\.\\/run\\.pl/{$0 = $0 RS \"mv *.* \"s; s=\"\"}1' f\ncp abc/P_10_10A.pdb lig.pdb\ncp abc/protein.pdbqt .\ncp abc/run.pl .\n./run.pl \nmv *.* P_10_10A\n\ncp abc/P_10_11A.pdb lig.pdb\ncp abc/protein.pdbqt .\ncp abc/run.pl .\n./run.pl\nmv *.* P_10_11A\n\ncp abc/P_10_11B.pdb lig.pdb\ncp abc/protein.pdbqt .\ncp abc/run.pl .\n./run.pl\nmv *.* P_10_11B\n</code></pre>\n\n<p><strong>For space modify this statement</strong></p>\n\n<pre><code>$0=$0 RS \"    mv *.* \"s;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9362, "user_id": 2885763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/l4VVG.jpg?s=128&g=1", "display_name": "NeronLeVelu", "link": "https://stackoverflow.com/users/2885763/neronlevelu"}, "is_accepted": false, "score": 1, "last_activity_date": 1484311834, "last_edit_date": 1484311834, "creation_date": 1484310747, "answer_id": 41634741, "question_id": 41632817, "link": "https://stackoverflow.com/questions/41632817/insert-text-after-specified-lines-in-a-file/41634741#41634741", "title": "insert text after specified lines in a file", "body": "<p>a sed version</p>\n\n<pre><code>sed '/^[[:blank:]]*cp /,/^[[:blank:]]*\\./ {\n      H\n      /^[[:blank:]]*\\./!d\n      s/.*//;x\n      s#^\\(\\(.[[:blank:]]*\\)cp \\)\\([^[:blank:]]*/\\([^[:blank:]]*\\)\\)\\(\\.pdb.*\\)#\\1\\3\\5\\2mv *.* \\4#\n      }' YourFile\n</code></pre>\n\n<p>info:</p>\n\n<ul>\n<li>proceed by paragraph (<code>/^[[:blank:]]*cp /,/^[[:blank:]]*\\./</code>) from first cp until ./</li>\n<li>add each line to holding buffer (<code>H</code>)</li>\n<li>if not last line of paragraph, delete the line from current work buffer (so do nothing more and cycle with a read of next line) (<code>/^[[:blank:]]*\\./!d</code>)</li>\n<li>empty the line and swap buffer content (<code>s/.*//;x</code>)</li>\n<li><p>extract the <em>file name</em> of the paragraph and add it to the end with the <code>mv</code> info (<code>s#^\\(\\(.[[:blank:]]*\\)cp \\)\\([^[:blank:]]*/\\([^[:blank:]]*\\)\\)\\(\\.pdb.*\\)#\\1\\3\\5\\2mv *.* \\4#</code>). This regex is the tricky one with some special info</p>\n\n<ul>\n<li>there is a new line as 1st character (due to first <code>H</code> and not <code>h</code>)</li>\n<li>i use several subgroup to use them as pattern easily like the second group, a new line and first series of space (if any) that is included in 1st group</li>\n</ul></li>\n<li><p>let sed print the result</p>\n\n<ul>\n<li>modified paragraph</li>\n<li>untouched line like <em>empty</em> lines between paragraph</li>\n</ul></li>\n</ul>\n\n<hr>\n\n<p>an awk version</p>\n\n<pre><code>awk -F '[/.]' '\n   /cp / {f[n++]=$2}\n   /\\.\\/run/ {print;sub( /\\..*/, \"mv *.* \" f[n=0])}\n   7\n   ' YourFile\n</code></pre>\n\n<p>info:</p>\n\n<ul>\n<li>use <code>.</code> and <code>/</code> as field separator (<code>-F '[/.]'</code>)</li>\n<li>for each line with cp, keep folder name in and incremental array (first index = 0) (<code>/cp / {f[n++]=$2}</code>)</li>\n<li>for each line with <code>./run</code>: (<code>/\\.\\/run/ {print;sub( /\\..*/, \"mv *.* \" f[n=0])}</code>) \n\n<ul>\n<li>print the line </li>\n<li>replace the text part with <code>mv ...</code></li>\n<li>the good name is always f[0]</li>\n<li>reset the index in same time (<code>n=0</code>)</li>\n</ul></li>\n<li>print the line <code>7</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1484319857, "creation_date": 1484319857, "answer_id": 41637544, "question_id": 41632817, "link": "https://stackoverflow.com/questions/41632817/insert-text-after-specified-lines-in-a-file/41637544#41637544", "title": "insert text after specified lines in a file", "body": "<p></p>\n\n<p>This Perl approach expects the path to the input file on the command line and sends the output to stdout</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nlocal $/ = \"\";\n\nwhile ( &lt;&gt; ) {\n    if ( m| \\b cp \\s+ (?: \\w+ / )* (\\w+) |x ) {\n        my $pdb = $1;\n        s/ .* \\S \\K /\\nmv *.* $pdb/xs;\n    }\n    print;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-bash prettyprint-override\"><code>cp abc/P_10_10A.pdb lig.pdb\ncp abc/protein.pdbqt .\ncp abc/run.pl .\n./run.pl\nmv *.* P_10_10A \n\ncp abc/P_10_11A.pdb lig.pdb\ncp abc/protein.pdbqt .\ncp abc/run.pl .\n./run.pl\nmv *.* P_10_11A\n\ncp abc/P_10_11B.pdb lig.pdb\ncp abc/protein.pdbqt .\ncp abc/run.pl .\n./run.pl\nmv *.* P_10_11B\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 2176228, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/80c6f0691fe4930c40bd04b0dfd3d283?s=128&d=identicon&r=PG", "display_name": "user2176228", "link": "https://stackoverflow.com/users/2176228/user2176228"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 41633918, "answer_count": 4, "score": 2, "last_activity_date": 1484319857, "creation_date": 1484304480, "question_id": 41632817, "link": "https://stackoverflow.com/questions/41632817/insert-text-after-specified-lines-in-a-file", "title": "insert text after specified lines in a file", "body": "<p>I need support to do the following task for a file contains around 5000 lines.</p>\n\n<p>input</p>\n\n<pre><code>    cp abc/P_10_10A.pdb lig.pdb\n    cp abc/protein.pdbqt .\n    cp abc/run.pl .\n    ./run.pl \n\n    cp abc/P_10_11A.pdb lig.pdb\n    cp abc/protein.pdbqt .\n    cp abc/run.pl .\n    ./run.pl\n\n    cp abc/P_10_11B.pdb lig.pdb\n    cp abc/protein.pdbqt .\n    cp abc/run.pl .\n    ./run.pl\n</code></pre>\n\n<p>output</p>\n\n<pre><code>    cp abc/P_10_10A.pdb lig.pdb\n    cp abc/protein.pdbqt .\n    cp abc/run.pl .\n    ./run.pl\n    mv *.* P_10_10A\n\n    cp abc/P_10_11A.pdb lig.pdb\n    cp abc/protein.pdbqt .\n    cp abc/run.pl .\n    ./run.pl\n    mv *.* P_10_11A\n\n    cp abc/P_10_11B.pdb lig.pdb\n    cp abc/protein.pdbqt .\n    cp abc/run.pl .\n    ./run.pl\n    mv *.* P_10_11B\n</code></pre>\n\n<p>I could add mv <em>.</em> as follows..</p>\n\n<pre><code>    sed '0~4 a\\mv *.*  \\'       text_file.sh\n</code></pre>\n\n<p>How can I do the rest? thanks a lot.</p>\n"}, {"tags": ["perl", "elasticsearch"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484304012, "post_id": 41632400, "comment_id": 70464996, "body": "If you convert something from JSON, you get a plain data structure. There are no objects in Perl by default. You need to modify the data structure, that&#39;s correct. You have to go in completely or it will be replaced, that&#39;s correct."}], "answers": [{"comments": [{"owner": {"reputation": 392, "user_id": 5909136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afaad314b2d7cd25e4d05f673d779a17?s=128&d=identicon&r=PG&f=1", "display_name": "SmashingQuasar", "link": "https://stackoverflow.com/users/5909136/smashingquasar"}, "edited": false, "score": 0, "creation_date": 1484309955, "post_id": 41632699, "comment_id": 70468591, "body": "Thanks for your help, combining your answer to @simbabque answer, I now understand what was my issue!"}], "tags": [], "owner": {"reputation": 31736, "user_id": 1071630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8db924a2d5a3f60db1675e33e0d0cb3?s=128&d=identicon&r=PG", "display_name": "nikoshr", "link": "https://stackoverflow.com/users/1071630/nikoshr"}, "is_accepted": false, "score": 1, "last_activity_date": 1484304597, "last_edit_date": 1484304597, "creation_date": 1484304120, "answer_id": 41632699, "question_id": 41632400, "link": "https://stackoverflow.com/questions/41632400/dynamically-modify-elasticsearch-query-using-perl/41632699#41632699", "title": "Dynamically modify ElasticSearch query using Perl", "body": "<p>You can work directly with the hash reference <code>decode_json</code> returns. For example,</p>\n\n<ol>\n<li><p>get a reference to your <code>must_not</code> array</p>\n\n<pre><code>my $mustNots = $result-&gt;{query}-&gt;{bool}-&gt;{must_not};\n</code></pre></li>\n<li><p>add a filter to this array by pushing a hash ref</p>\n\n<pre><code>push(@{$mustNots}, {\"regexp\" =&gt; {\"designation\" =&gt; \"[Ff]+[Oo]+\"}});\n</code></pre></li>\n<li><p>you now have a third entry in <code>must_not</code>, <code>print encode_json($result);</code> gives </p>\n\n<pre><code>{\n    \"query\": {\n        \"bool\": {\n            \"must\": [\n                {\n                    \"term\": {\"isavailable\": \"1\"}\n                },\n                {\n                    \"term\": {\"visibility\": \"10\"}\n                },\n                {\n                    \"range\": {\"bestprice\": {\"gt\": \"0\"}}\n                }\n            ],\n            \"must_not\": [\n                {\n                    \"regexp\": {\n                        \"designation\": \"[Tt]+[Ee]+[Ss]+[Tt]+\"\n                    }\n                },\n                {\n                    \"regexp\": {\n                        \"designation\": \"[Ww]+[Ii]+[Ne]+[Ee]+\"\n                    }\n                },\n                {\n                    \"regexp\": {\n                        \"designation\": \"[Ff]+[Oo]+\"\n                    }\n                }\n            ]\n        }\n    }\n}\n</code></pre></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 392, "user_id": 5909136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afaad314b2d7cd25e4d05f673d779a17?s=128&d=identicon&r=PG&f=1", "display_name": "SmashingQuasar", "link": "https://stackoverflow.com/users/5909136/smashingquasar"}, "edited": false, "score": 1, "creation_date": 1484309908, "post_id": 41632722, "comment_id": 70468565, "body": "Thanks for your help, I&#39;m now able to do exactly what I want, and you provided a very neat explanation of what I was doing wrong!"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1484304164, "creation_date": 1484304164, "answer_id": 41632722, "question_id": 41632400, "link": "https://stackoverflow.com/questions/41632400/dynamically-modify-elasticsearch-query-using-perl/41632722#41632722", "title": "Dynamically modify ElasticSearch query using Perl", "body": "<p>It's not an object because Perl does not by default work with objects. If you want an object, you need to have a class, and then instantiate it. But <code>decode_json</code> can't do that. All it does is return a complex data structure.</p>\n\n<p>To add another entry to the array ref that holds the filters inside of that data structure, you need to <a href=\"http://perldoc.perl.org/functions/push.html\" rel=\"nofollow noreferrer\"><code>push</code></a> it in. For that you need to dereference the array ref, because <code>push</code> does not like to operate on references. Perl will do the right thing for you with the following syntax.</p>\n\n<pre><code>#    this dereferences the array ref for push\n#    |                                       |\npush @{ $result-&gt;{query}-&gt;{bool}-&gt;{must_not} }, {  # the { starts a new hash ref\n    \"regexp\" =&gt; { \n        \"designation\" =&gt; \"[Ff]+[Oo]+\", # we like trailing commas in Perl\n    },\n};\n</code></pre>\n\n<p>If you have a very new Perl (5.24), you can also use the post-fix deref syntax here, which is a bit cleaner to read.</p>\n\n<pre><code>push $result-&gt;{query}-&gt;{bool}-&gt;{must_not}-&gt;@, { ... };\n</code></pre>\n"}], "owner": {"reputation": 392, "user_id": 5909136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afaad314b2d7cd25e4d05f673d779a17?s=128&d=identicon&r=PG&f=1", "display_name": "SmashingQuasar", "link": "https://stackoverflow.com/users/5909136/smashingquasar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 41632722, "answer_count": 2, "score": 0, "last_activity_date": 1484304597, "creation_date": 1484303269, "last_edit_date": 1484304304, "question_id": 41632400, "link": "https://stackoverflow.com/questions/41632400/dynamically-modify-elasticsearch-query-using-perl", "title": "Dynamically modify ElasticSearch query using Perl", "body": "<p>At work I have a script made by people who aren't there any more. It is used to retrieve an XML file with a node looking like this:</p>\n\n<pre><code> &lt;query maxresults='15000'&gt;\n      &lt;![CDATA[                                                                         \n         and(                                                                            \n                 isavailable:1,                                 \n                 not(designation:string(\"test wine\", mode=\"or\")),                \n                 visibility:10,                                                   \n                 bestprice:&gt;0                                                        \n         )                                                                               \n       ]]&gt;\n  &lt;/query&gt;\n</code></pre>\n\n<p>We are using Perl for this. The goal is to modify the FAST request contained inside the node to dynamically add some parameters (e.g. limit the results with the \"maxresults\" attribute). This part of the code works, but we are switching to ElasticSearch and I need to change the code so it works.</p>\n\n<p>Problem is, I can't find a reliable way to modify an ElasticSearch query with Perl. So far I did this:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse JSON;\nuse Data::Dumper;\nuse Search::Elasticsearch;\n\nmy $json = \n'{\"query\":\n    {\"bool\":\n        {\"must\":\n            [\n             {\"term\":\n                {\"isavailable\":\"1\"}\n             },\n             {\"term\":\n                {\"visibility\":\"10\"}\n             },\n             {\"range\":\n                {\"bestprice\":\n                    {\"gt\":\"0\"}\n                }\n             }\n\n            ],\n         \"must_not\":\n            [{\"regexp\":\n                {\"designation\":\"[Tt]+[Ee]+[Ss]+[Tt]+\"}\n             },\n             {\"regexp\":\n                {\"designation\":\"[Ww]+[Ii]+[Ne]+[Ee]+\"}\n             }\n            ]\n        }\n    }\n }';\n\nmy $result = decode_json($json);\n</code></pre>\n\n<p>But it gives me a hash instead of an object and I'm getting a headache trying to dynamically modify this hash just to add (for example):</p>\n\n<pre><code>{\"regexp\": {\"designation\":\"[Ff]+[Oo]+\"}}\n</code></pre>\n\n<p>to the array inside the \"must_not\" object.</p>\n\n<p>I tried to do this:</p>\n\n<pre><code>my %must = (must_not =&gt; [{\"regexp\" =&gt; \n                                        {\"designation\" =&gt; \"[Ff]+[Oo]+\"}\n                           }\n                          ]);\n\n\n$result{\"query\"} = \\%must;\n\nprint keys(%{$result{query}});\n</code></pre>\n\n<p>But this simply replaces the whole node content with the %must hash and I can't find a way to properly append it. I tried to push a hash inside the array contained in the must_not object but I only get errors.</p>\n\n<p>I'm really puzzled by this situation, especially since I'm not really a Perl expert so any help is more than welcome!</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 13, "last_activity_date": 1484302170, "last_edit_date": 1484302170, "creation_date": 1484301240, "answer_id": 41631755, "question_id": 41631727, "link": "https://stackoverflow.com/questions/41631727/why-do-and-not-work-as-expected/41631755#41631755", "title": "Why do ^ and $ not work as expected?", "body": "<p>If you group the alternation, then you will get the expected behavior:</p>\n\n<pre><code>/^(a|b)$/\n</code></pre>\n\n<p>Your regex will find a <code>a</code> at the start of the string (with <code>^a</code> branch) or <code>b</code> at the end (with the <code>b$</code> branch).</p>\n\n<p>When you use <code>^(a|b)$</code>, the anchors are applied to the whole group and thus it will match a string that is equal to <code>a</code> or <code>b</code>.</p>\n\n<p>Also, if you do not really need to capture the value, you may either use a <a href=\"http://perldoc.perl.org/perlretut.html#Non-capturing-groupings\" rel=\"noreferrer\"><em>non-capturing group</em></a>, <code>/^(?:a|b)$/</code>, or a <a href=\"http://perldoc.perl.org/perlre.html#*n*\" rel=\"noreferrer\"><code>n</code> modifier</a>, <code>/^(a|b)$/n</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1484301940, "post_id": 41631914, "comment_id": 70463717, "body": "I believe <code>a</code> and <code>b</code> are just placeholders for a pattern of any length here, used just for example."}], "tags": [], "owner": {"reputation": 2627, "user_id": 3783352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ldO4p.jpg?s=128&g=1", "display_name": "mik", "link": "https://stackoverflow.com/users/3783352/mik"}, "is_accepted": false, "score": 4, "last_activity_date": 1484301820, "creation_date": 1484301820, "answer_id": 41631914, "question_id": 41631727, "link": "https://stackoverflow.com/questions/41631727/why-do-and-not-work-as-expected/41631914#41631914", "title": "Why do ^ and $ not work as expected?", "body": "<p>Your regexp matched <code>^a</code> or <code>b$</code>, because the alternative operator <code>|</code> has lower precedence than a sequence of concatenated regexps.</p>\n\n<p>In this particular case (an alternative of single characters) you can simplify it to a class:</p>\n\n<pre><code>/^[ab]$/\n</code></pre>\n"}], "owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "accepted_answer_id": 41631755, "answer_count": 2, "score": -1, "last_activity_date": 1484302170, "creation_date": 1484301162, "last_edit_date": 1484301534, "question_id": 41631727, "link": "https://stackoverflow.com/questions/41631727/why-do-and-not-work-as-expected", "title": "Why do ^ and $ not work as expected?", "body": "<p>This puzzled me the last 15 minutes:</p>\n\n<pre><code>if ('ab' =~ /^a|b$/) { print 't' } else { print 'f' }\nprint \"\\n\";\n</code></pre>\n\n<p>I have expected that 'a' or 'b' following the beginning and followed by the end, should match only one character.  So the test should fail for two characters 'ab'.  But it succeeds.  Why?</p>\n"}, {"tags": ["perl", "lwp"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1484289214, "post_id": 41627980, "comment_id": 70457599, "body": "How does <code>run()</code> &quot;<i>will do a LWP request</i>&quot;?  Does it spawn a new process, or simply runs LWP and waits for the sub to return?"}, {"owner": {"reputation": 19241, "user_id": 614944, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f92772ec8a16758d669026f736aa7f0f?s=128&d=identicon&r=PG", "display_name": "daisy", "link": "https://stackoverflow.com/users/614944/daisy"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1484291352, "post_id": 41627980, "comment_id": 70458484, "body": "@zdim the second one"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484292848, "post_id": 41627980, "comment_id": 70459095, "body": "Please show the code for <code>run</code>, otherwise we will be forced to guess and will get it wrong"}, {"owner": {"reputation": 19241, "user_id": 614944, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f92772ec8a16758d669026f736aa7f0f?s=128&d=identicon&r=PG", "display_name": "daisy", "link": "https://stackoverflow.com/users/614944/daisy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484293180, "post_id": 41627980, "comment_id": 70459237, "body": "@Borodin attached a shortened version"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1484294862, "post_id": 41627980, "comment_id": 70459941, "body": "Thanks. And please don&#39;t call a subroutine using an ampersand. That hasn&#39;t been best practice for twenty years. <code>run($_)</code> is correct, but your choice of name could be much better."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1484334168, "post_id": 41627980, "comment_id": 70483164, "body": "Btw, note <code>last if $_ eq &#39;exit&#39;;</code>, or <code>last if &#47;^exit$&#47;;</code>.  Fits nicely with <code>next unless ...</code>.  With regex it can also come before <code>chomp</code>."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1486262088, "last_edit_date": 1486262088, "creation_date": 1484290553, "answer_id": 41628980, "question_id": 41627980, "link": "https://stackoverflow.com/questions/41627980/kill-current-lwp-request-with-ctrl-c/41628980#41628980", "title": "Kill current LWP request with CTRL + C", "body": "<p>One way to stop code is to run it in a child process and <code>kill</code> that child in the parent's signal handler when <code>SIGINT</code> is received by the parent.  The parent keeps running since the signal is handled.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\n$SIG{INT} = \\&amp;sigint_handler;    # or: $SIG{INT} = sub { ... };\n\nsay \"Parent $$ start.\";\n\nmy $pid = run_proc();\nmy $gone_pid = waitpid $pid, 0;  # check status, in $?\n\nsay \"Parent exiting\";\n\nsub run_proc\n{\n    my $pid = fork // die \"Can't fork: $!\";\n    if ($pid == 0) {                               # child process\n        say \"\\tKid, sleep 5 (time for Ctrl-C)\";    # run your job here\n        sleep 5;                                \n        say \"\\tKid exiting.\";\n        exit;\n    }   \n    return $pid;\n}\n\nsub sigint_handler { \n    if ($pid and kill 0, $pid) {\n        say \"Got $_[0], send 'kill TERM' to child process $pid.\";\n        my $no_signalled = kill 15, $pid;\n     }\n     else { die \"Got $_[0]\" }   # or use exit\n}\n</code></pre>\n\n<p>A good deal of the code is for diagnostic prints. Some comments follow</p>\n\n<p>The <code>kill</code> only sends a signal. It does not in any way ensure that the process terminates. Check this with <code>kill $pid, 0</code>, which  returns true if the process has not <em>been reaped</em> (even if it's a zombie). On my system <code>TERM</code> is <code>15</code>, and even though this is very common please check.</p>\n\n<p>The signal could come at a time when the child is not running. The handler first checks whether the <code>$pid</code> is out there and if not it dies/exits, respecting <code>SIGINT</code>. Change as appropriate.</p>\n\n<p>After the <code>fork</code> the parent drops past <code>if ($pid == 0)</code> and returns the <code>$pid</code> right away.</p>\n\n<p>You can install <code>$SIG{TERM}</code> <em>in the child</em>, where it can clean up if it needs to exit orderly. </p>\n\n<p>The <code>SIGINT</code> handler will run out of the child as well, so <code>\"Got $_[0] ...\"</code> is printed twice. If this is a concern add a handler to the child to ignore the signal, <code>$SIG{INT} = 'IGNORE';</code>. With this in place and with Ctrl-C hit while the child is running, the output is</p>\n\n<pre>\nParent 9334 start.\n        Kid, sleep 5 (time for Ctrl-C)\n^CGot INT, send 'kill TERM' to child process 9335.\nParent exiting\n</pre>\n\n<p>The status of the child once it exited can be checked via <code>$?</code>, see <code>system</code> and <a href=\"http://perldoc.perl.org/perlvar.html#Error-Variables\" rel=\"nofollow noreferrer\">in perlvar</a>. </p>\n\n<p>Documentation: <a href=\"http://perldoc.perl.org/functions/fork.html\" rel=\"nofollow noreferrer\">fork</a> (and <a href=\"http://perldoc.perl.org/functions/exec.html\" rel=\"nofollow noreferrer\">exec</a>, <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">system</a>), <a href=\"http://perldoc.perl.org/perlvar.html#%25SIG\" rel=\"nofollow noreferrer\">%SIG in perlvar</a>, <a href=\"http://perldoc.perl.org/functions/waitpid.html\" rel=\"nofollow noreferrer\">waitpid</a>,  parts of <a href=\"http://perldoc.perl.org/perlipc.html\" rel=\"nofollow noreferrer\">perlipc</a>, <a href=\"http://perldoc.perl.org/functions/kill.html\" rel=\"nofollow noreferrer\">kill</a>.</p>\n\n<p>If the job done in the child needed to communicate with the parent then there would be more to do. However, the code snippet added to the question indicates that this is not the case.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1484294707, "last_edit_date": 1484294707, "creation_date": 1484293167, "answer_id": 41629571, "question_id": 41627980, "link": "https://stackoverflow.com/questions/41627980/kill-current-lwp-request-with-ctrl-c/41629571#41629571", "title": "Kill current LWP request with CTRL + C", "body": "<p>You need to provide a callback in your call to <code>$ua-&gt;request</code>. Issuing <code>die</code> in that callback will terminate the transfer.</p>\n\n<p>You then just need to set a flag variable in your Ctrl-C signal handler, and <code>die</code> in your callback if that flag is set.</p>\n\n<p>I'll write some code when I get back to a PC, and when you have shown what your <code>run</code> subroutine does.</p>\n\n<hr>\n\n<p>Here's some code that looks right, but I can't test it at present</p>\n\n<p><em>Beware that <code>run</code> is a dire identifier for any subroutine, especially one that starts a network transfer and prints the result</em></p>\n\n<pre><code>sub run {\n\n    my ($url) = @_;\n\n    my $die;\n    local $SIG{INT} = sub { $die = 1 };\n\n    my $ua = LWP::UserAgent-&gt;new;\n\n    my $resp = $ua-&gt;get(\n        $url,\n        ':content_cb' =&gt; sub {\n            die \"Interrupted LWP transfer\" if $die;\n            my ($data, $resp, $proto) = @_;\n            print $data;\n        },\n        ':read_size_hint' =&gt; 1024\n    );\n\n    print \"\\n\";  # Emulate additional newline from `say`\n}\n</code></pre>\n\n<p>Note that  reducing <code>:read_size_hint</code> will cause the callback to be called more frequently with smaller chunks of data. That will improve the response to <em>Ctrl-C</em> but reduce the efficiency of the transfer</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1484504661, "last_edit_date": 1484504661, "creation_date": 1484328651, "answer_id": 41640251, "question_id": 41627980, "link": "https://stackoverflow.com/questions/41627980/kill-current-lwp-request-with-ctrl-c/41640251#41640251", "title": "Kill current LWP request with CTRL + C", "body": "<p>Convert the signal into an exception.</p>\n\n<pre><code>local $SIG{INT} = sub { die \"SIGINT\\n\" };\n</code></pre>\n\n<p>Generally, one would then wrap the code in an <code>eval BLOCK</code>, but LWP::UserAgent catches these exceptions and returns an error response.</p>\n\n<p>For example,</p>\n\n<pre><code>use LWP::UserAgent;\nmy $ua = LWP::UserAgent-&gt;new();\nmy $response = do {\n   local $SIG{INT} = sub { die \"SIGINT\\n\" };\n   $ua-&gt;get(\"http://localhost/zzz.crx\")\n};\nsay $response-&gt;is_success ? \"Successful\" : \"Unsuccessful\";\nsay $response-&gt;code;\nsay $response-&gt;status_line;\n</code></pre>\n\n<p>Output if no SIGINT received:</p>\n\n<pre><code>Successful\n200\n200 OK\n</code></pre>\n\n<p>Output if SIGINT received:</p>\n\n<pre><code>Unsuccessful\n500\n500 SIGINT\n</code></pre>\n"}], "owner": {"reputation": 19241, "user_id": 614944, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f92772ec8a16758d669026f736aa7f0f?s=128&d=identicon&r=PG", "display_name": "daisy", "link": "https://stackoverflow.com/users/614944/daisy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 41640251, "answer_count": 3, "score": 2, "last_activity_date": 1486262088, "creation_date": 1484285740, "last_edit_date": 1484293167, "question_id": 41627980, "link": "https://stackoverflow.com/questions/41627980/kill-current-lwp-request-with-ctrl-c", "title": "Kill current LWP request with CTRL + C", "body": "<p>I have a script based on Term::ReadLine and LWP::UserAgent</p>\n\n<p>The logic is like this,</p>\n\n<pre><code>while (defined ($_ = $term-&gt;readline('console&gt; ')))\n{\n    next unless $_; chomp;\n\n    if ($_ eq 'exit')\n    {\n        last;\n    }\n    &amp;run ($_);\n}\n\nsub run {\n    my $ua   = LWP::UserAgent-&gt;new;\n    my $resp = $ua-&gt;get (...);\n\n    say $resp-&gt;content;\n}\n</code></pre>\n\n<p>In <code>run</code> it will do a LWP request. Now If I press <kbd>CTRL</kbd> + <kbd>C</kbd>, not only the LWP is terminated, the whole perl script is terminated as well.</p>\n\n<p>I wanted to kill the LWP request only. Any ideas? </p>\n\n<p>I can add a SIGINT handler, but I don't know what the handler should do</p>\n"}, {"tags": ["perl", "daemon"], "answers": [{"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1484263997, "post_id": 41624446, "comment_id": 70451123, "body": "It would interesting if this could be related to the <code>nohup</code> and <code>setsid</code> commands"}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": true, "score": 3, "last_activity_date": 1484261349, "creation_date": 1484261349, "answer_id": 41624446, "question_id": 41624106, "link": "https://stackoverflow.com/questions/41624106/start-a-pdf-viewer-from-a-perl-script/41624446#41624446", "title": "Start a pdf viewer from a Perl script", "body": "<pre><code>system 'evince test.pdf &amp;';\n</code></pre>\n\n<p>In my experience, this is likely to really be:</p>\n\n<pre><code>system 'evince $pdf_file &amp;';\n</code></pre>\n\n<p>If <code>$pdf_file</code> is user input, then we get shell-injection bugs, such as passing in a pdf name of <code>$(rm -rf /)</code> or even just <code>;rm -rf /</code>.  And what if the name has a space in it?  Well, you can avoid all that if you quote it, right?</p>\n\n<pre><code>system 'evince \"$pdf_file\" &amp;';\n</code></pre>\n\n<p>Well, no, now all I have to do is give you a filename of <code>\";rm -rf \"/</code>.  And what if my pdf has a double quote in its name?  You could use single quotes, but the same problem comes up if the filename has single quotes in it, and the shell injection isn't really any harder.  You could come up with an elaborate shellify function that properly quotes a string all so that the shell can unquote it and get back to the original entry ... but that seems like so much more work than your other options, neither of which suffers from these problems.</p>\n\n<pre><code>$SIG{CHLD} = \"IGNORE\"; #reap children as they complete\nmy $pid = fork();\nif ( $pid == 0 ) {\n    exec 'evince', 'test.pdf';\n}\n</code></pre>\n\n<p>Setting a global <code>$SIG{CHLD}</code> is nice and easy ... unless you need to handle other children as they die.  So only you can tell whether that's acceptable or not.  And, again in my experience, not even always then.  I've been bitten by this one - though rarely.  I had this mixed in with an application that, elsewhere, used <a href=\"https://metacpan.org/pod/AnyEvent\" rel=\"nofollow noreferrer\">AnyEvent</a>, and managed to break AE's subprocess handling.  (The same would likely hold true if you mixed this with any event system, I just happened to be using AE.)</p>\n\n<p>Also, this is missing the stdout and stderr redirects - and stdin redirect.  That's easy enough to add - inside your if, before the exec, just close and reopen the filehandles as you need, e.g.:</p>\n\n<pre><code>close STDOUT; open STDOUT, '&gt;', '/dev/null';\nclose STDERR; open STDERR, '&gt;', '/dev/null';\nclose STDIN;  open STDIN,  '&lt;', '/dev/null';\n</code></pre>\n\n<p>No big deal.  However, Proc::Daemon does set up a few more things for you to ensure signals don't reach from one to the other process, in either direction.  This depends on how severe you need to get.</p>\n\n<p>For most of my purposes, I've found #2 to be sufficient.  I've only reached for Proc::Daemon on a few projects, but that's where a) I have full control over the module installation, and b) it really matters.  Starting a pdf viewer wouldn't normally be such a case.</p>\n\n<p>I avoid #1 at all costs - I have had some fairly significant bites with shell injection, and now try to avoid the shell at all times.</p>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 41624446, "answer_count": 1, "score": 1, "last_activity_date": 1484261349, "creation_date": 1484259865, "question_id": 41624106, "link": "https://stackoverflow.com/questions/41624106/start-a-pdf-viewer-from-a-perl-script", "title": "Start a pdf viewer from a Perl script", "body": "<p>I have to start a pdf viewer from a Perl script. The viewer should\nbecome detached from the parent process and the terminal that the parent process was run from. If I close the parent or the terminal the \nviewer should still be kept running. I considered three approaches (using <code>evince</code> as the pdf viewer command):</p>\n\n<ol>\n<li><p>Using <code>system</code> and <code>sh</code>:</p>\n\n<pre><code>system 'evince test.pdf &amp;';\n</code></pre></li>\n<li><p>Using <code>fork()</code>:</p>\n\n<pre><code>$SIG{CHLD} = \"IGNORE\"; #reap children as they complete\nmy $pid = fork();\nif ( $pid == 0 ) {\n    exec 'evince', 'test.pdf';\n}\n</code></pre></li>\n<li><p>Using <code>Proc::Daemon</code>:</p>\n\n<pre><code>use Proc::Daemon;\nmy $daemon = Proc::Daemon-&gt;new(\n    work_dir     =&gt; '/tmp/evince',\n    child_STDOUT =&gt; '&gt;&gt;stdout.txt',\n    child_STDERR =&gt; '&gt;&gt;stderr.txt',\n);\nmy $pid = $daemon-&gt;Init();\nif ( $pid == 0 ) {\n    exec 'evince', 'test.pdf';\n}\n</code></pre></li>\n</ol>\n\n<p>What would be the difference between these approaches? Which approach would you recommend?</p>\n"}, {"tags": ["arrays", "perl", "customization"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1484259702, "post_id": 41623968, "comment_id": 70449552, "body": "I don&#39;t quite understand the goal -- to line up the output?  What does this mean: &quot;<i>prevent array size from not matching up with the elements in the new array</i>&quot;?  Can you post the desired output, if that is the question?"}, {"owner": {"reputation": 211, "user_id": 6595879, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97b48577f35bec769668efcc531a1901?s=128&d=identicon&r=PG&f=1", "display_name": "King of NES", "link": "https://stackoverflow.com/users/6595879/king-of-nes"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1484318596, "post_id": 41623968, "comment_id": 70473861, "body": "The output needed to be seen when you open the .txt file. It has to line up with the columns which need to be a pre-deterimined length. The comment in the code was for the other programmer to know that each array of elements had a max length of elements, so we could reference later."}], "answers": [{"comments": [{"owner": {"reputation": 211, "user_id": 6595879, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97b48577f35bec769668efcc531a1901?s=128&d=identicon&r=PG&f=1", "display_name": "King of NES", "link": "https://stackoverflow.com/users/6595879/king-of-nes"}, "edited": false, "score": 0, "creation_date": 1484318688, "post_id": 41624629, "comment_id": 70473924, "body": "Thank you! The input comes in tab delimited, but needs to be lined up, re-arranged by a user, and printed to new file where everything lines up nice and neat. Thank you!"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1484340259, "last_edit_date": 1484340259, "creation_date": 1484262229, "answer_id": 41624629, "question_id": 41623968, "link": "https://stackoverflow.com/questions/41623968/how-do-you-set-a-length-and-justify-an-array-field-in-perl/41624629#41624629", "title": "How do you set a length and justify an Array field in Perl?", "body": "<p>I am not sure that I fully understand the question, please clarify if needed.</p>\n\n<p>The width of a field that is being printed can be controlled by <a href=\"http://perldoc.perl.org/functions/printf.html\" rel=\"nofollow noreferrer\">printf</a>, or you can form a string of the desired length by <a href=\"http://perldoc.perl.org/functions/sprintf.html\" rel=\"nofollow noreferrer\">sprintf</a>. </p>\n\n<p>For the whole output to line up nicely you'd first need to find the length of the longest string in each column, or at least the longest one altogether.  That is not quite possible in what you show since you print one line at a time.</p>\n\n<pre><code>my $maxlen = '...';  # decide on or precompute the maximum field width\n\nmy $printToFile = join ' |  ', \n    map { sprintf \"%${maxlen}s\", $_ } @finalElementLine;\n</code></pre>\n\n<p>The <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\">map</a> formats a string of length <code>$maxlen</code> out of each element, by padding each with spaces as needed. It returns that list, which is then <a href=\"http://perldoc.perl.org/functions/join.html\" rel=\"nofollow noreferrer\">join</a>-ed into a scalar by what is used in the question.  </p>\n\n<p>If you want to line them up on the left use <code>sprintf \"%-${maxlen}s\", $_</code>. I use the <code>s</code> conversion (for a string) since no details are given.  See the documentation and adjust if needed.</p>\n\n<p>In order to reliably estimate the maximum field width you'd need to have all lines first.  If there isn't too much data you can store each processed line as an arrayref in an array and print at the end. With other simplifications</p>\n\n<pre><code>use warnings;\nuse strict;\nuse List::Util qw(max);\n\nmy $file = '...';\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nwhile (my $line = &lt;$fh&gt;) \n{   \n    chomp $line;\n    my @tokens = split /\\t/, $line;   \n\n    # Run the explicit loop if other processing is needed, or:\n    my @shiftedElements = grep { $_ ne '' and $_ ne ' ' } @tokens;\n    my $numOfElements = @shiftedElements;\n\n    # UNCLEAR -- is the first element below necessary?\n    # \"used to prevent array size from \n    #  not matching up with the elements in the new array\"\n    my @finalElementLine = ($numOfElements, @shiftedElements);\n\n    push @rows, \\@finalElementLine;\n}\nclose $fh;\n\nmy $maxlen = max map { length } map { @$_ } @rows;  # for all fields in all rows\n\nopen my $OUTFILE, '&gt;&gt;', $newFile or die \"Can't open for appending: $!\";\nforeach my $rline (@rows) \n{\n    my $printToFile = join ' |  ', \n        map { sprintf \"%${maxlen}\", $_ } @$rline;\n    print $OUTFILE $printToFile, \"\\n\";\n}\nclose $OUTFILE;\n</code></pre>\n\n<p>This prints out <em>all</em> fields with the same width. If some are much longer than others that isn't optimal, in which case set field widths separately for <em>each column</em> and use that in printing. That makes printing quite a bit messier so do it only if necessary. This has not been tested since I don't have your data, please work out possible details.  </p>\n\n<p>Some comments</p>\n\n<ul>\n<li><p>When an array is assigned to a scalar, the scalar gets the number of array elements</p></li>\n<li><p><code>$counter</code> isn't used so I removed it. To restore: <code>my $counter = @tokens;</code></p></li>\n<li><p>The condition in <code>grep</code> can be shortened using regex</p></li>\n<li><p>Each line (<code>@finalElementLine</code>) is stored in <code>@rows</code> as an arrayref</p></li>\n<li><p><code>$maxlen</code>: form a list of all fields in all rows, then take their lengths, then take max of that</p></li>\n<li><p>Each element <code>$rline</code> of <code>@rows</code> is <em>dereferenced</em> by <code>@$rline</code> into a list for <code>map</code></p></li>\n<li><p>If <code>$NumOfElements</code> actually isn't needed the whole loop simplifies greatly</p>\n\n<pre><code>push @rows, [ grep { not /^(?:| )$/ } @tokens ];\n</code></pre></li>\n<li><p>If you may exclude <em>any amount</em> of space (and not only a single one), then use<br>\n<code>grep { not /^\\s*$/ }</code> &nbsp; <em>not</em> only spaces (or nothing) &nbsp; &ndash; OR &ndash;<br>\n<code>grep { /\\S/ }</code> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; a non-space (at least one)</p></li>\n</ul>\n\n<hr>\n\n<p>If <code>$numOfElements</code> isn't necessary, a summary of the processing sequence is</p>\n\n<pre><code>my @rows = map { \n    my @r = grep { /\\S/ } split /\\t/; \n    @r ? \\@r : (); \n} &lt;$fh&gt;;\n</code></pre>\n\n<p>While this correctly replaces the <code>while</code> loop, such a squeeze is likely unsuitable for production.</p>\n\n<p>The <code>&lt;$fh&gt;</code> in list context returns all lines from the file, which <code>map</code> transforms into an output list, assigned to <code>@rows</code>. In <code>map</code> each line is <code>split</code> on tab and from that list empty/space-only elements are filtered out. The refarray is returned, or an empty list <code>()</code> if <code>@r</code> ended up with no elements.  </p>\n\n<p>An empty list in <code>map</code>'s return gets flattened with other elements into one list and thus effectively vanishes from the output. It's <code>map</code>'s trick to do <code>grep</code>'s job, filter things out. </p>\n"}], "owner": {"reputation": 211, "user_id": 6595879, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97b48577f35bec769668efcc531a1901?s=128&d=identicon&r=PG&f=1", "display_name": "King of NES", "link": "https://stackoverflow.com/users/6595879/king-of-nes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 41624629, "answer_count": 1, "score": 1, "last_activity_date": 1484340259, "creation_date": 1484259280, "question_id": 41623968, "link": "https://stackoverflow.com/questions/41623968/how-do-you-set-a-length-and-justify-an-array-field-in-perl", "title": "How do you set a length and justify an Array field in Perl?", "body": "<p>I'm breaking down a text file, and setting it to a new one. The code works, but I know the format doesn't line up correctly, because i'm new to Perl-and a google search didn't seem to work. Can you set your array's individual field lengths once you've built the array?</p>\n\n<pre><code>while (my $line = &lt;INFILE1&gt;) \n{   \n    chomp $line;\n    my @tokens = split /\\t/, $line;\n    $numOfElements = 0;\n    $counter = 0;\n    foreach $element (@tokens)\n    {\n        $counter = $counter + 1;\n    }\n\nforeach $element (@tokens)\n{\n\n    if ($element eq \"\" or $element eq \" \")\n    {\n\n    }\n    else\n    {\n        push @shiftedElements, $element;\n\n        $numOfElements = $numOfElements + 1;\n\n    }\n\n\n\n}\n\n\nmy @finalElementLine = ($numOfElements);#used to prevent array size` from not matching up with the elements in the new array\n    push @finalElementLine, @shiftedElements;#fills the new array \n    $printToFile = \" $finalElementLine[1] |   $finalElementLine[2]   |   $finalElementLine[$numOfElements]   |   $finalElementLine[$numOfElements-4]  |  $finalElementLine[$numOfElements-3] | $finalElementLine[$numOfElements-2]  $finalElementLine[$numOfElements-1]\\n\";\n\n\n\n\n    my $OUTFILE;        \n    open $OUTFILE, '&gt;&gt;', $newFile;\n    print { $OUTFILE } $printToFile;\n    close $OUTFILE;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 2, "creation_date": 1484245345, "post_id": 41620167, "comment_id": 70441991, "body": "<code>&quot;&#47;data&#47;backup&#47;$run_folder&quot;</code> is relative to the root of the filesystem. Did you mean to make it relative to the current directory instead? Copying to the root of the filesystem probably requires elevated privileges."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1484248681, "post_id": 41620167, "comment_id": 70443707, "body": "I thought that Perl automatically created a directory if it didn&#39;t exist but I was wrong. I&#39;ve added ` mkdir $target_dir;` and it fixed it."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1484249995, "post_id": 41621411, "comment_id": 70444456, "body": "<a href=\"https://metacpan.org/pod/File::Copy#RETURN\" rel=\"nofollow noreferrer\">metacpan.org/pod/File::Copy#RETURN</a> <i>All functions return 1 on success, 0 on failure. $! will be set if an error was encountered.</i>"}], "tags": [], "owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "is_accepted": false, "score": 1, "last_activity_date": 1484255200, "last_edit_date": 1484255200, "creation_date": 1484249414, "answer_id": 41621411, "question_id": 41620167, "link": "https://stackoverflow.com/questions/41620167/perl-copying-files-from-one-directory-to-another/41621411#41621411", "title": "Perl copying files from one directory to another", "body": "<p>There are a few things I would recommend you to do:</p>\n\n<p>Close your file handles as soon as possible if you are not using it anymore:</p>\n\n<pre><code>   opendir(my $DIR, $source_dir) || die \"can't opendir $source_dir: $!\";  \n   my @files = readdir($DIR);\n   close ($DIR);\n</code></pre>\n\n<p>As you are trying to backup some files and directories maybe the target destination will not have the directory so:</p>\n\n<pre><code> $target_dir = \"/data/backup/$run_folder\"; \n print $target_dir;\n\n if ( ! -d $target_dir ) \n { \n   #creates the dir\n }\n</code></pre>\n\n<p>And the last one:</p>\n\n<pre><code>   foreach my $t (@files)\n   {\n      chomp $t; # it removes any new line\n      if(-f \"$source_dir/$t\" ) {\n         #Check with -f only for files (no directories)\n         print \"$source_dir/$t\";\n         print \"$target_dir/$t\";\n\n         if ( ! copy \"$source_dir/$t\", \"$target_dir/$t\" )\n         {\n            print \"Some error: $!\";\n         }\n\n\n      }\n   }\n</code></pre>\n\n<p>Always TIMTOWTD, you could use File::Find which has a simple tutorial <a href=\"http://www.perlmonks.org/?node_id=217166\" rel=\"nofollow noreferrer\">here</a>. </p>\n"}], "owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4240, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1484255200, "creation_date": 1484244821, "question_id": 41620167, "link": "https://stackoverflow.com/questions/41620167/perl-copying-files-from-one-directory-to-another", "title": "Perl copying files from one directory to another", "body": "<p>I'm trying to copy files from multiple directories with the code bellow. It prints out the correct path and files but fails to copy them. Please suggest how to fix this issue? Thanks</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse File::Copy;\n\nmy $target_dir = \"\";\n\nmy @dirs = grep { -d } glob '/data/results/*';\n\nfor my $source_dir ( @dirs ) {\n\n   opendir(my $DIR, $source_dir) || die \"can't opendir $source_dir: $!\";  \n   my @files = readdir($DIR);\n\n   print \"the directory is $source_dir\\n\";\n    my $run_folder = (split '/', $source_dir)[3];\n    print \"the folder is $run_folder\\n\";\n\n   $target_dir = \"/data/backup/$run_folder\";\n   print $target_dir;\n\n   foreach my $t (@files)\n   {\n      if(-f \"$source_dir/$t\" ) {\n         #Check with -f only for files (no directories)\n         print \"$source_dir/$t\";\n         print \"$target_dir/$t\";\n\n         copy \"$source_dir/$t\", \"$target_dir/$t\";\n      }\n   }\n\n   closedir($DIR);\n\n}\n</code></pre>\n"}, {"tags": ["sql-server", "perl", "dbi"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484242809, "post_id": 41619285, "comment_id": 70440595, "body": "I assume the query should be <code>(GETDATE() - 30)</code>; placeholders are quoted by default, so you&#39;re actually getting <code>(GETDATE() - &#39;30&#39;)</code>. Look at the section &quot;Data types for placeholders&quot; in the <a href=\"https://metacpan.org/pod/DBI#bind_param\" rel=\"nofollow noreferrer\">DBI docs</a> and the <a href=\"https://metacpan.org/pod/DBD::ODBC#Binding-Columns\" rel=\"nofollow noreferrer\">DBD::ODBC docs</a>."}, {"owner": {"reputation": 241702, "user_id": 61305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVyZv.jpg?s=128&g=1", "display_name": "Aaron Bertrand", "link": "https://stackoverflow.com/users/61305/aaron-bertrand"}, "edited": false, "score": 1, "creation_date": 1484242845, "post_id": 41619285, "comment_id": 70440611, "body": "Well, start by <a href=\"http://sqlblog.com/blogs/aaron_bertrand/archive/2011/09/20/bad-habits-to-kick-using-shorthand-with-date-time-operations.aspx\" rel=\"nofollow noreferrer\">using <code>DATEADD()</code> instead of shorthand</a>. Also the part about the $dsn and connecting to the database was copied from a different question and is not relevant here."}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1484242873, "post_id": 41619285, "comment_id": 70440629, "body": "This does not look like an issue with Perl or DBI, rather your date query does not look right. Consider using <code>dateadd</code> to subtract days from <code>getdate</code> <a href=\"http://stackoverflow.com/questions/27247770/how-to-subtract-30-days-from-the-current-date-using-sql-server\" title=\"how to subtract 30 days from the current date using sql server\">stackoverflow.com/questions/27247770/&hellip;</a>"}, {"owner": {"reputation": 394, "user_id": 4504847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U9lvM.png?s=128&g=1", "display_name": "FrankRalphBob", "link": "https://stackoverflow.com/users/4504847/frankralphbob"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484243395, "post_id": 41619285, "comment_id": 70440928, "body": "@ThisSuitIsBlackNot - I guess I assume that the DBI would be able to figure out whether to quote or not because the variable, but that probably isn&#39;t clear here.   I was attempting to use the bind such that it would cut down SQL injection.  Is there a way to place that value in there without worrying about SQL injection?"}, {"owner": {"reputation": 394, "user_id": 4504847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U9lvM.png?s=128&g=1", "display_name": "FrankRalphBob", "link": "https://stackoverflow.com/users/4504847/frankralphbob"}, "reply_to_user": {"reputation": 241702, "user_id": 61305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVyZv.jpg?s=128&g=1", "display_name": "Aaron Bertrand", "link": "https://stackoverflow.com/users/61305/aaron-bertrand"}, "edited": false, "score": 0, "creation_date": 1484243523, "post_id": 41619285, "comment_id": 70441004, "body": "@Aaron Bertrand - Thanks for the DATEADD() advice, I will give it a shot.   Not sure where I copied the DSN stuff from, considering I typed it in.   The reason I added it was just in case the database handle was the problem.   But it appears that is not the case."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1484243524, "post_id": 41619285, "comment_id": 70441006, "body": "@Dr.Avalanche Apparently T-SQL lets you subtract a number from a datetime and it subtracts that number of days: <a href=\"https://msdn.microsoft.com/en-us/library/ms189518.aspx#Anchor_3\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/ms189518.aspx#Anchor_3</a>"}, {"owner": {"reputation": 241702, "user_id": 61305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVyZv.jpg?s=128&g=1", "display_name": "Aaron Bertrand", "link": "https://stackoverflow.com/users/61305/aaron-bertrand"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484243679, "post_id": 41619285, "comment_id": 70441094, "body": "@ThisSuitIsBlackNot Sure, but <a href=\"http://sqlblog.com/blogs/aaron_bertrand/archive/2011/09/20/bad-habits-to-kick-using-shorthand-with-date-time-operations.aspx\" rel=\"nofollow noreferrer\">that doesn&#39;t mean it&#39;s a good idea</a>."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1484244047, "post_id": 41619285, "comment_id": 70441301, "body": "@FrankRalphBob <i>&quot;I assume that the DBI would be able to figure out whether to quote or not&quot;</i> That depends on your version of DBD::ODBC and which driver you&#39;re using, among other things. See <a href=\"https://metacpan.org/pod/DBD::ODBC#odbc_default_bind_type\" rel=\"nofollow noreferrer\">metacpan.org/pod/DBD::ODBC#odbc_default_bind_type</a>"}, {"owner": {"reputation": 223115, "user_id": 426671, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zgBsf.jpg?s=128&g=1", "display_name": "Taryn", "link": "https://stackoverflow.com/users/426671/taryn"}, "edited": false, "score": 0, "creation_date": 1484249166, "post_id": 41619285, "comment_id": 70443996, "body": "Ok, folks let&#39;s try to keep things constructive here. If you want to continue this conversation, then please take it to chat."}, {"owner": {"reputation": 241702, "user_id": 61305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVyZv.jpg?s=128&g=1", "display_name": "Aaron Bertrand", "link": "https://stackoverflow.com/users/61305/aaron-bertrand"}, "reply_to_user": {"reputation": 223115, "user_id": 426671, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zgBsf.jpg?s=128&g=1", "display_name": "Taryn", "link": "https://stackoverflow.com/users/426671/taryn"}, "edited": false, "score": 0, "creation_date": 1484249525, "post_id": 41619285, "comment_id": 70444200, "body": "@bluefeet Thanks but I don&#39;t think I&#39;ll get a better answer out of him in chat."}], "answers": [{"comments": [{"owner": {"reputation": 241702, "user_id": 61305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVyZv.jpg?s=128&g=1", "display_name": "Aaron Bertrand", "link": "https://stackoverflow.com/users/61305/aaron-bertrand"}, "edited": false, "score": 0, "creation_date": 1484247003, "post_id": 41620717, "comment_id": 70442841, "body": "I would also suggest <code>DAY</code> instead of <code>dd</code>, just to be more descriptive. Nobody is going to assume <code>dd</code> means <code>month</code>, but try out <code>y</code> vs. <code>YEAR</code> and <code>w</code> vs. <code>WEEK</code>. Another case where a few keystrokes pay huge dividends."}, {"owner": {"reputation": 394, "user_id": 4504847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U9lvM.png?s=128&g=1", "display_name": "FrankRalphBob", "link": "https://stackoverflow.com/users/4504847/frankralphbob"}, "reply_to_user": {"reputation": 241702, "user_id": 61305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVyZv.jpg?s=128&g=1", "display_name": "Aaron Bertrand", "link": "https://stackoverflow.com/users/61305/aaron-bertrand"}, "edited": false, "score": 0, "creation_date": 1484248112, "post_id": 41620717, "comment_id": 70443399, "body": "@AaronBertrand  Good to know.   Thanks Aaron.   Unfortunately, my SQL Server knowledge still has a way to go - but always good to improve it."}], "tags": [], "owner": {"reputation": 394, "user_id": 4504847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U9lvM.png?s=128&g=1", "display_name": "FrankRalphBob", "link": "https://stackoverflow.com/users/4504847/frankralphbob"}, "is_accepted": false, "score": 2, "last_activity_date": 1484246811, "creation_date": 1484246811, "answer_id": 41620717, "question_id": 41619285, "link": "https://stackoverflow.com/questions/41619285/why-do-i-get-conversion-failed-when-converting-date-and-or-time-from-character/41620717#41620717", "title": "Why do I get &quot;Conversion failed when converting date and/or time from character string&quot; when subtracting a number from GETDATE()?", "body": "<p>First, a shout out to ThisSuitIsBlackNot for pointing out that the problem.   I made the assumption that the DBI/driver would be able to determine the value type.  That was wrong.  So, I explicitly stated the type:</p>\n\n<pre><code>$sth = $dbh-&gt;prepare($sql);\n$sth-&gt;bind_param( 1, ($argsRef-&gt;{lookBack} * -1), { TYPE =&gt; SQL_INTEGER });    \n$sth-&gt;execute();\nmy $qnCount = $sth-&gt;fetchrow_array(); \n</code></pre>\n\n<p>This allowed it to go through as an integer and the SQL ran without problem.</p>\n\n<p>In case you were wondering why I am multiplying by -1, is because I changed the query to use DATEADD:</p>\n\n<pre><code>SELECT COUNT(*)\nFROM tableName u\nWHERE 1=1 AND u.ManufacturerPartNumber IN ('x') \nAND CAST(u.InspectionStartDate AS DATETIME) &gt; DATEADD(dd, ?, GETDATE())\n</code></pre>\n\n<p>Although there seems to be some continuing discussion in regards to its use, it is working here.</p>\n\n<p>Thank you all for your help.</p>\n"}], "owner": {"reputation": 394, "user_id": 4504847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U9lvM.png?s=128&g=1", "display_name": "FrankRalphBob", "link": "https://stackoverflow.com/users/4504847/frankralphbob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 713, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1484246811, "creation_date": 1484241610, "last_edit_date": 1484242443, "question_id": 41619285, "link": "https://stackoverflow.com/questions/41619285/why-do-i-get-conversion-failed-when-converting-date-and-or-time-from-character", "title": "Why do I get &quot;Conversion failed when converting date and/or time from character string&quot; when subtracting a number from GETDATE()?", "body": "<p>I cannot figure out what I am doing incorrect here.   I have the following values for these variables.</p>\n\n<pre><code>my $sql =  qq~\n  SELECT COUNT(*)\n  FROM tableName u\n  WHERE 1=1 AND u.ManufacturerPartNumber IN ('X','Y','Z')\n  AND CAST(u.InspectionStartDate AS DATETIME) &gt; (GETDATE() - ?)\n~; \nmy $argsRef-&gt;{lookBack} = 30;\n</code></pre>\n\n<p>And when I try to run a <code>selectrow_array</code> on the sql like such:</p>\n\n<pre><code>my $qnCount = $dbh-&gt;selectrow_array($sql, undef, $argsRef-&gt;{lookBack});\n</code></pre>\n\n<p>I get the following error:  </p>\n\n<pre><code>DBD::ODBC::db selectrow_array failed: [Microsoft][ODBC SQL Server Driver][SQL Server]Conversion failed when converting date and/or time from character string. (SQL-22007) [for Statement \"\n SELECT COUNT(*)\n FROM tableName u\n WHERE 1=1 AND u.ManufacturerPartNumber IN ('X','Y','Z') \n AND CAST(u.InspectionStartDate AS DATETIME) &gt; (GETDATE() - ?)\n \"] \n</code></pre>\n\n<p>So, it is my understanding that the third parameter in the selectrow_array call from a database handle should be the bind variables.  Yet, they seem not to be binding....</p>\n\n<p>the database handle is created as such:</p>\n\n<pre><code>my $dbh = DBI-&gt;connect_cached(\"dbi:ODBC:$dsn\", undef, undef, {\n    PrintError =&gt; 0,\n    RaiseError =&gt; 1,\n    ShowErrorStatement =&gt; 1,\n    LongReadLen =&gt; 500000,\n}) \n</code></pre>\n\n<p><code>$dsn</code> is the correct DSN but not shown for various reasons, but we know it works due the error message coming back from SQL Server.</p>\n\n<p>Any idea what I am doing wrong?</p>\n\n<p>Thanks in advance for your help.</p>\n"}, {"tags": ["perl", "dbix-class"], "answers": [{"tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1484245376, "last_edit_date": 1484245376, "creation_date": 1484244581, "answer_id": 41620104, "question_id": 41619031, "link": "https://stackoverflow.com/questions/41619031/how-to-create-trigger-in-db-with-help-of-dbixclass-using-add-trigger-method/41620104#41620104", "title": "How to create trigger in DB with help of `DBIx::Class` using add_trigger method?", "body": "<p>There maybe the problem with <a href=\"http://search.cpan.org/dist/DBIx-Class/lib/DBIx/Class/ResultSource.pm#default_sqlt_deploy_hook\" rel=\"nofollow noreferrer\">DBIx::Class::ResultSource::default_sqlt_deploy_hook</a>:</p>\n\n<blockquote>\n  <p>which was originally designed to expect the Result class name and the $sqlt_table instance of <strong>the table being deployed</strong></p>\n</blockquote>\n\n<p>As work around add next line of code before <code>add_trigger</code>:</p>\n\n<pre><code>return   unless grep $_ eq 'users',  $schema-&gt;get_tables;\n</code></pre>\n\n<p>But the recommend way is to create deploy/upgrade/downgrade <code>.sql</code> files manually</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1484245376, "creation_date": 1484240801, "last_edit_date": 1484243534, "question_id": 41619031, "link": "https://stackoverflow.com/questions/41619031/how-to-create-trigger-in-db-with-help-of-dbixclass-using-add-trigger-method", "title": "How to create trigger in DB with help of `DBIx::Class` using add_trigger method?", "body": "<p>I want to add trigger into my database. I use <code>DBIx::Class</code> and follow these examples: <a href=\"http://search.cpan.org/~ilmari/SQL-Translator-0.11021/lib/SQL/Translator/Schema.pm#add_trigger\" rel=\"nofollow noreferrer\">1</a>, <a href=\"http://search.cpan.org/dist/DBIx-Class/lib/DBIx/Class/Manual/Cookbook.pod#Adding_Indexes_And_Functions_To_Your_SQL\" rel=\"nofollow noreferrer\">2</a>.<br>\nMy code is:</p>\n\n<pre><code>package App::Schema;\nuse base qw/DBIx::Class::Schema/;\n__PACKAGE__-&gt;load_namespaces();\n\nsub sqlt_deploy_hook {\n    my ($self, $schema) = @_;\n    $schema-&gt;add_trigger( name =&gt; 'foo' );\n}\n</code></pre>\n\n<p>1;</p>\n\n<p>But I get this error:</p>\n\n<pre><code>Failed to translate to YAML: translate: Error with producer 'SQL::Translator::Producer::YAML': Can't call method \"name\" on an undefined value at /home/kes/work/projects/x/app/local/lib/perl5/SQL/Translator/Schema/Trigger.pm line 198\n</code></pre>\n\n<p>When run command with all environment variables as required by <code>dbic-migration</code>:</p>\n\n<pre><code>dbic-migration --force --schema_class App::Schema --database PostgreSQL -Ilib prepare\n</code></pre>\n\n<p>Which point me somewhere into <a href=\"https://metacpan.org/pod/SQL::Translator::Schema::Trigger\" rel=\"nofollow noreferrer\"><code>SQL::Translator::Schema::Trigger</code></a></p>\n\n<p>What did I miss? How to fix this error?</p>\n\n<p><strong>UPD</strong></p>\n\n<p>Even when I add all arguments I got error:</p>\n\n<pre><code>Failed to translate to YAML: translate: Error with parser 'SQL::Translator::Parser::DBIx::Class': Table named users doesn't exist at /home/kes/work/projects/x/app/local/lib/perl5/SQL/Translator/Schema/Trigger.pm line 54\n</code></pre>\n\n<p><a href=\"https://metacpan.org/source/ILMARI/SQL-Translator-0.11021/lib/SQL/Translator/Schema/Trigger.pm#L54\" rel=\"nofollow noreferrer\">Here</a> the target line:</p>\n\n<pre><code>my $table = $args-&gt;{schema}-&gt;get_table($arg)\n   or die \"Table named $arg doesn't exist\";    \n</code></pre>\n\n<p>Modified code:</p>\n\n<pre><code>sub sqlt_deploy_hook {\n    my ($self, $schema) = @_;\n\n    warn \"TABLES: \" ,$schema-&gt;get_tables ,\"\\n\";\n    $schema-&gt;add_trigger(()\n        ,name =&gt;  'foo'\n        ,perform_action_when =&gt; 'after'\n        ,database_events     =&gt; 'insert'\n        ,on_table =&gt; 'users'\n        ,action =&gt; 'text'\n        ,scope =&gt; 'row'\n    );\n}\n</code></pre>\n\n<p>This code produce next warnings:</p>\n\n<pre><code>TABLES: users\nTABLES: dbix_class_deploymenthandler_versions\n</code></pre>\n\n<p>But DB has only one table at the moment. I expect it at least should produce:</p>\n\n<pre><code>TABLES: users dbix_class_deploymenthandler_versions\n</code></pre>\n\n<p>How to create trigger in <code>DB</code>?</p>\n"}, {"tags": ["perl", "rest", "sharepoint"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484233306, "post_id": 41615562, "comment_id": 70433978, "body": "Iirc the Rest::Client module has a built-in way to set the credentials automatically, but I can&#39;t verify right now."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1484233260, "creation_date": 1484233260, "answer_id": 41616355, "question_id": 41615562, "link": "https://stackoverflow.com/questions/41615562/basic-authentication-from-perl-to-sharepoint-using-rest-api-is-not-working/41616355#41616355", "title": "Basic Authentication from Perl to Sharepoint using REST API is not working", "body": "<p>I think your problem will be with <code>encode_base64</code> - if you do this:</p>\n\n<pre><code>use Data::Dumper;\nuse MIME::Base64;\n\nmy $username = 'mydomain.com\\admin';\nmy $password = 'testpwd';\n\nmy $headers = {Accept =&gt; 'application/json', \n               Authorization =&gt; 'Basic ' . encode_base64($username . ':' . $password)};\nprint Dumper $headers;\n</code></pre>\n\n<p>What you get at output is this:</p>\n\n<pre><code>$VAR1 = {\n          'Accept' =&gt; 'application/json',\n          'Authorization' =&gt; 'Basic bXlkb21haW4uY29tXGFkbWluOnRlc3Rwd2Q=\n'\n        };\n</code></pre>\n\n<p>Your header has an errant newline in it. </p>\n\n<p>So maybe try:</p>\n\n<pre><code>my $headers = {Accept =&gt; 'application/json', \n               Authorization =&gt; 'Basic ' . encode_base64($username . ':' . $password, '')};\n</code></pre>\n\n<p>Which sets the base64 line ending to <code>''</code>. You therefore get:</p>\n\n<pre><code>$VAR1 = {\n          'Accept' =&gt; 'application/json',\n          'Authorization' =&gt; 'Basic bXlkb21haW4uY29tXGFkbWluOnRlc3Rwd2Q='\n        };\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7410161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2631921ed8e83b41e25138dd9fb148ba?s=128&d=identicon&r=PG&f=1", "display_name": "user7410161", "link": "https://stackoverflow.com/users/7410161/user7410161"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1033, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484233260, "creation_date": 1484230975, "last_edit_date": 1484231246, "question_id": 41615562, "link": "https://stackoverflow.com/questions/41615562/basic-authentication-from-perl-to-sharepoint-using-rest-api-is-not-working", "title": "Basic Authentication from Perl to Sharepoint using REST API is not working", "body": "<pre><code>use REST::Client;\nuse JSON;\nuse Data::Dumper;\nuse MIME::Base64;\n\nmy $username = 'mydomain.com\\admin';\nmy $password = 'testpwd';\n\nmy $headers = {Accept =&gt; 'application/json', Authorization =&gt; 'Basic ' . encode_base64($username . ':' . $password)};\n\nmy $client = REST::Client-&gt;new();\n\n$client-&gt;setHost('http://55.170.145.189:2013');\n\n$client-&gt;GET(\n    '/SitePages', \n    $headers\n);\n\n\nprint $client-&gt;responseContent();\n</code></pre>\n\n<p>I am trying to connect Sharepoint using Perl REST api but always getting <strong>401 UNAUTHORIZED</strong>  error. I have verified  username and password. Both are working when accessing SharePoint website through browser using same credentials.</p>\n"}, {"tags": ["arrays", "perl", "split"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1484226504, "post_id": 41614003, "comment_id": 70429257, "body": "Can you supply an illustrative data set (smaller one) along with a desired output? I&#39;m not sure I&#39;m following exactly what you&#39;re after. You&#39;ve indicated problems with the &#39;next step&#39; but I don&#39;t see what the &#39;next step&#39; actually is."}, {"owner": {"reputation": 23, "user_id": 7326088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8710ced0e5ca6f3ee93aa2ab9d2a0857?s=128&d=identicon&r=PG&f=1", "display_name": "Markpw", "link": "https://stackoverflow.com/users/7326088/markpw"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1484227040, "post_id": 41614003, "comment_id": 70429581, "body": "Sure.  For example if this is the range: 269996\t269998\t269999\t301002\t301003\t301004\t301006\t301007  This should return as missing only the following two values and ignore the large gap: 269997 301005"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484238667, "post_id": 41614003, "comment_id": 70438047, "body": "Note: <code>glob(&quot;hotfolder&#47;*.out&quot;)</code> should be <code>( glob(&quot;hotfolder&#47;*.out&quot;) )[0]</code>. The former will give very odd results"}, {"owner": {"reputation": 23, "user_id": 7326088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8710ced0e5ca6f3ee93aa2ab9d2a0857?s=128&d=identicon&r=PG&f=1", "display_name": "Markpw", "link": "https://stackoverflow.com/users/7326088/markpw"}, "edited": false, "score": 0, "creation_date": 1484302492, "post_id": 41614003, "comment_id": 70464060, "body": "Thank you, I changed it for the latter one. It worked either way, but I am sure the second syntax is better."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7326088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8710ced0e5ca6f3ee93aa2ab9d2a0857?s=128&d=identicon&r=PG&f=1", "display_name": "Markpw", "link": "https://stackoverflow.com/users/7326088/markpw"}, "edited": false, "score": 0, "creation_date": 1484228244, "post_id": 41614331, "comment_id": 70430388, "body": "I see, thank you for your answer.  Where could I put &quot;push @missing&quot;? so that the missing values still get pushed to an array?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1484228762, "post_id": 41614331, "comment_id": 70430763, "body": "Where the &#39;say&#39; is. 1"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1484227343, "creation_date": 1484227343, "answer_id": 41614331, "question_id": 41614003, "link": "https://stackoverflow.com/questions/41614003/perl-split-sorted-array-into-two-arrays-based-on-values/41614331#41614331", "title": "Perl - Split sorted array into two arrays based on values", "body": "<p>Just check the difference between neighbouring numbers. If it's more than 1 but small enough (see <code>$gap_size</code> below), report the missing numbers:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nmy $gap_size = 50;  # Tune this to your needs.\n\nmy @numbers = sort { $a &lt;=&gt; $b } map /\\d+/g, &lt;&gt;;\n\nfor my $i (1 .. $#numbers) {\n    my $diff = $numbers[$i] - $numbers[$i-1];\n    if ($diff &gt; 1 &amp;&amp; $diff &lt; $gap_size) {\n        say for $numbers[$i-1] + 1 .. $numbers[$i] - 1;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7326088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8710ced0e5ca6f3ee93aa2ab9d2a0857?s=128&d=identicon&r=PG&f=1", "display_name": "Markpw", "link": "https://stackoverflow.com/users/7326088/markpw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 41614331, "answer_count": 1, "score": 2, "last_activity_date": 1484227698, "creation_date": 1484226320, "question_id": 41614003, "link": "https://stackoverflow.com/questions/41614003/perl-split-sorted-array-into-two-arrays-based-on-values", "title": "Perl - Split sorted array into two arrays based on values", "body": "<p>I am fairly new to Perl.</p>\n\n<p>I have a large array of numbers which is sorted first:</p>\n\n<pre><code>my @numbers = do {                                                      \n        open my $fh, '&lt;', glob(\"hotfolder/*.out\") or die $!;            \n        local $/;                                                           \n        &lt;$fh&gt; =~ /\\d+/g;                                                    \n};\n\n    my @sorted_numbers = sort { $a &lt;=&gt; $b } @numbers;\n</code></pre>\n\n<p>The sorted values are now in the @sorted_numbers array.\nNext it needs to find the missing values in this array:</p>\n\n<pre><code>my @missing;\n\n     my $i = 0;\n            for ( $sorted_numbers[ 0 ] .. $sorted_numbers[ -1 ] ) {         \n                ++$i, next if $_ == $sorted_numbers[ $i ];                  \n                    push @missing, \"$_\\n\";\n    }\n</code></pre>\n\n<p>This is where I need some help. I am not sure how to achieve the next step.\nEach number in the array either starts with 2 (200000) or 3 (300000).</p>\n\n<p>The missing values should only show between these ranges.\nLet's say the first range finished at 240000. The other range will start somewhere over 300000.</p>\n\n<p>Of course I do not want to return all the values outside these two ranges as missing.</p>\n\n<p>I tried something along these lines but the syntax and logic is completely wrong:</p>\n\n<pre><code>    foreach (my $step = @sorted_numbers) {\n\n\n    if ($step &lt;= 299999) {\n        my $i = 0;\n            for ( $sorted_numbers[ 0 ] .. $sorted_numbers[ -1 ] ) {         \n                ++$i, next if $_ == $sorted_numbers[ $i ];                  \n                    push @missing, \"$_\\n\";\n                    }   \n    }\n    else ($step &gt; 299999) {\n        my $i = 0;\n            for ( $sorted_numbers[ 0 ] .. $sorted_numbers[ -1 ] ) {         \n                ++$i, next if $_ == $sorted_numbers[ $i ];                  \n                    push @missing2, \"$_\\n\"; \n                    }\n        }\n    }\n</code></pre>\n\n<p>Let me know if something is unclear and I'll be happy to provide further information. </p>\n"}, {"tags": ["sql", "perl", "dbi"], "comments": [{"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 3, "creation_date": 1484224717, "post_id": 41613402, "comment_id": 70428085, "body": "How does it fail, show the error!"}, {"owner": {"reputation": 75, "user_id": 2919704, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/135b166a088d55ea5e3c1e37a62597ec?s=128&d=identicon&r=PG&f=1", "display_name": "Volverine", "link": "https://stackoverflow.com/users/2919704/volverine"}, "reply_to_user": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1484224766, "post_id": 41613402, "comment_id": 70428122, "body": "cant call preapre on undefined value"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484238811, "post_id": 41613402, "comment_id": 70438139, "body": "Always use <code>use strict; use warnings qw( all );</code>!"}], "answers": [{"tags": [], "owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "is_accepted": true, "score": 4, "last_activity_date": 1484225332, "last_edit_date": 1484225332, "creation_date": 1484224956, "answer_id": 41613546, "question_id": 41613402, "link": "https://stackoverflow.com/questions/41613402/prepare-command-not-working-with-dbi/41613546#41613546", "title": "prepare command not working with DBI", "body": "<p>You have:</p>\n\n<pre><code>$sth -&gt;prepare($sql2);\n</code></pre>\n\n<p>you need:</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare($sql2);\n</code></pre>\n\n<p><a href=\"https://metacpan.org/pod/DBI#prepare\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/DBI#prepare</a></p>\n\n<p>Also consider the <code>prepare_cached</code> method, depending on what you are actually doing:</p>\n\n<p><a href=\"https://metacpan.org/pod/DBI#prepare_cached\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/DBI#prepare_cached</a></p>\n"}], "owner": {"reputation": 75, "user_id": 2919704, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/135b166a088d55ea5e3c1e37a62597ec?s=128&d=identicon&r=PG&f=1", "display_name": "Volverine", "link": "https://stackoverflow.com/users/2919704/volverine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 41613546, "answer_count": 1, "score": 0, "last_activity_date": 1484225332, "creation_date": 1484224545, "question_id": 41613402, "link": "https://stackoverflow.com/questions/41613402/prepare-command-not-working-with-dbi", "title": "prepare command not working with DBI", "body": "<p>I am trying to do this but it is not working </p>\n\n<pre><code> my $sql2 = \"SELECT CODE_ID,NAME_CODE,SUM(INR_COL + OUT_COL) AS \\\"TOTAL SUM\\\" FROM nwsa WHERE trunc(REPORT_DATE) = to_date('?','dd-mm-yyyy')AND CODE_ID IN (?,?,?,?,?,?,?,?,?,?,?)GROUP BY CODE_ID,NAME_CODE\"; \n     $sth -&gt;prepare($sql2);\n     my $t= \"06-01-2017\";\n\n     $sth-&gt;execute($t,'A12A','A12B','A12C','A12D','A12E','A12EB','A12F','A12G','A12I','A12O','A12U');\n</code></pre>\n"}, {"tags": ["bash", "perl", "debian", "piping", "gnu-parallel"], "answers": [{"tags": [], "owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "is_accepted": true, "score": 2, "last_activity_date": 1484254500, "creation_date": 1484254500, "answer_id": 41622792, "question_id": 41612726, "link": "https://stackoverflow.com/questions/41612726/gnu-parallel-not-spawning-jobs/41622792#41622792", "title": "GNU parallel not spawning jobs", "body": "<p>-L is the record size. The bug was fixed around 20130122. What you want is to read 1 record of 10 lines:</p>\n\n<pre><code>parallel -L10 -N1 -j5 -k -v --pipe wc -l\n</code></pre>\n\n<p>or 10 records of 1 line:</p>\n\n<pre><code>parallel -L1 -N10 -j5 -k -v --pipe wc -l\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 2623177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/122878f3e944c3665ea56f95b8180a68?s=128&d=identicon&r=PG", "display_name": "artem", "link": "https://stackoverflow.com/users/2623177/artem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 41622792, "answer_count": 1, "score": 3, "last_activity_date": 1484254500, "creation_date": 1484222452, "question_id": 41612726, "link": "https://stackoverflow.com/questions/41612726/gnu-parallel-not-spawning-jobs", "title": "GNU parallel not spawning jobs", "body": "<p>After an upgrade to Debian 8.6 Jessie the GNU parallel script suddenly stopped parallelizing to more than 2 jobs with the --pipe and -L options.</p>\n\n<p>Before the upgrade the command:</p>\n\n<p><code>cat file_with_1064_lines.txt | parallel -L10 -j5 -k -v --pipe \"wc -l\"</code></p>\n\n<p>spawned 5 processes, which output this:</p>\n\n<pre>wc -l\n10\nwc -l\n10\n...\n</pre>\n\n<p>The same command after the upgrade:</p>\n\n<pre>\nwc -l\n1060\nwc -l\n4\n</pre>\n\n<p>(The two values above change with respect to the -L option value -- the first is <code>L*floor(1064/L)</code> and the second is <code>1064 mod L</code>, but there always only two processes outputting.)</p>\n\n<p>The same is observed independently of the parallel version (tested the latest and one from 2013).</p>\n\n<p>PS.</p>\n\n<pre>$ uname -a\n\nLinux 3.16.0-4-amd64 #1 SMP Debian 3.16.36-1+deb8u2 (2016-10-19) x86_64 GNU/Linux\n\n$ parallel --version\n\nGNU parallel 20161222\n</pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1484223223, "post_id": 41612563, "comment_id": 70427095, "body": "An example code of what you tried would be necessary to know how we can help you. I&#39;d suggest using a regular expression."}, {"owner": {"reputation": 55, "user_id": 7409514, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b62bbded041206256a534e93ac686257?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Nguyen", "link": "https://stackoverflow.com/users/7409514/rafael-nguyen"}, "edited": false, "score": 0, "creation_date": 1484239681, "post_id": 41612563, "comment_id": 70438681, "body": "Hi David,   I have edited my question. Kindly help to solve my issue."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484296520, "post_id": 41612563, "comment_id": 70460680, "body": "@RafaelNguyen If you answer to people in comments, you need to add an <code>@</code> character in front of their name, like I just did. That way, the person gets a notification. It will also give you auto-complete of the names to make it easier. The owner of the post you are commenting on will always get notified. So if you write to me, you do <code>@simbabque</code>. But you can only highlight one person per message. In terms of being friendly, there is no need around here to say <i>Hi</i> or <i>Thank you</i> or <i>Best regards</i> or anything. Your name is under your post, and voting is like saying thanks."}, {"owner": {"reputation": 55, "user_id": 7409514, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b62bbded041206256a534e93ac686257?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Nguyen", "link": "https://stackoverflow.com/users/7409514/rafael-nguyen"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484329517, "post_id": 41612563, "comment_id": 70480786, "body": "@simbabque This is noted for the next post."}, {"owner": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "edited": false, "score": 0, "creation_date": 1485940963, "post_id": 41612563, "comment_id": 71129806, "body": "You will need to convert the MySQL time to an number that represents the date in Excel. See the <a href=\"https://metacpan.org/pod/Excel::Writer::XLSX#DATES-AND-TIME-IN-EXCEL\" rel=\"nofollow noreferrer\">Dates and Times in Excel</a> section of the Excel::Writer::XLSX docs. In particular the first part: <i>There are two important things to understand about dates and times in Excel: 1. A date/time in Excel is a real number plus an Excel number format. 2. Excel::Writer::XLSX doesn&#39;t automatically convert date/time strings in write() to an Excel date/time.</i>"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 5, "creation_date": 1484225251, "post_id": 41613488, "comment_id": 70428446, "body": "While this provides an answer, you can improve it a lot by adding an explanation of what your code does and why it needs to do that. Links to documentation are also always appreciated. :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484234725, "post_id": 41613488, "comment_id": 70435064, "body": "In case they can&#39;t figure out that <code>\\d</code> matches a digit? Nah, this is the quintessential example of self-documented code."}, {"owner": {"reputation": 6063, "user_id": 3225495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/57OBG.jpg?s=128&g=1", "display_name": "BJ Myers", "link": "https://stackoverflow.com/users/3225495/bj-myers"}, "edited": false, "score": 1, "creation_date": 1484266594, "post_id": 41613488, "comment_id": 70451889, "body": "&quot;Self-documented&quot; and &quot;regex&quot; have never belonged in the same sentence."}], "tags": [], "owner": {"reputation": 230, "user_id": 7322508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1aDE1.jpg?s=128&g=1", "display_name": "Duncan Carr", "link": "https://stackoverflow.com/users/7322508/duncan-carr"}, "is_accepted": false, "score": 1, "last_activity_date": 1484224782, "creation_date": 1484224782, "answer_id": 41613488, "question_id": 41612563, "link": "https://stackoverflow.com/questions/41612563/how-to-write-hhmmss-fff-with-excelwriterxlsx-in-perl/41613488#41613488", "title": "How to write hh:mm:ss.fff with Excel::Writer::XLSX in Perl", "body": "<pre><code>#!/usr/bin/perl\n\n$string = \"002212212\"; # =&gt; 00:22:12.212\n\n$string =~ s/^(\\d{2})(\\d{2})(\\d{2})(\\d{3})/$1:$2:$3.$4/;\n\nprint $string, \"\\n\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 55, "user_id": 7409514, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b62bbded041206256a534e93ac686257?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Nguyen", "link": "https://stackoverflow.com/users/7409514/rafael-nguyen"}, "edited": false, "score": 0, "creation_date": 1484330838, "post_id": 41630726, "comment_id": 70481554, "body": "@ra I think you&#39;re mixing things. The format in Excel is for displaying, not storing. Internally this is just a number. You need to give it a float. You don&#39;t need mysql to calculate. The alternative would be to use a simple text field in Excel and ignore the &#39;."}, {"owner": {"reputation": 55, "user_id": 7409514, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b62bbded041206256a534e93ac686257?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Nguyen", "link": "https://stackoverflow.com/users/7409514/rafael-nguyen"}, "edited": false, "score": 0, "creation_date": 1484331398, "post_id": 41630726, "comment_id": 70481852, "body": "I have tried write_number and got the follow warning:  <code>Argument &quot;00:01:44.375000&quot; isn&#39;t numeric in addition (+) at &#47;usr&#47;local&#47;lib&#47;perl5&#47;site_perl&#47;5.16.3&#47;Excel&#47;Writer&#47;XLSX&#47;Work&zwnj;&#8203;\u200c\u200bsheet.pm line 2190</code>    I have used the follow query to get that variable: <code>SELECT SEC_TO_TIME(avg(timediff(column1,column2))) FROM table;</code>  The both column is using <code>date(5)</code>  type in MySQL."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 55, "user_id": 7409514, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b62bbded041206256a534e93ac686257?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Nguyen", "link": "https://stackoverflow.com/users/7409514/rafael-nguyen"}, "edited": false, "score": 0, "creation_date": 1484335781, "post_id": 41630726, "comment_id": 70483978, "body": "You now essentially have a different question @Rafael. If you want numbers, use numbers. The <code>00:01:04.375000</code> is a <b>string</b>. It contains colons <code>:</code>. Of course you cannot do additions on that because additions work on numbers only. You need to decide. Either you want to put numbers into Excel and tell Excel to format them like that string, or you want strings in that format. Does Excel mind that the <code>&#39;</code> when you do calculations there?"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1484297778, "creation_date": 1484297778, "answer_id": 41630726, "question_id": 41612563, "link": "https://stackoverflow.com/questions/41612563/how-to-write-hhmmss-fff-with-excelwriterxlsx-in-perl/41630726#41630726", "title": "How to write hh:mm:ss.fff with Excel::Writer::XLSX in Perl", "body": "<p>This is something custom to Excel. The single quote <code>'</code> is used to force numbers into a string context in Excel. It's not displayed, but it makes Excel put the number to the left instead of the right.</p>\n\n<p><a href=\"https://i.stack.imgur.com/SD9Xp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SD9Xp.png\" alt=\"number as a string goes to the left\"></a></p>\n\n<p>You can also see the little green triangle in the top left corner, and the <code>&lt;!&gt;</code> that it shows next to the selected column.</p>\n\n<p>I believe that Excel::Writer::XLSX tries to guess if you have a string or a number, but because of your rather strange format <code>00:22:12.212</code> it doesn't see it right.</p>\n\n<p>You can try using <a href=\"https://metacpan.org/pod/Excel::Writer::XLSX#write_number(-$row,-$column,-$number,-$format-)\" rel=\"nofollow noreferrer\"><code>write_number</code></a> instead of <code>write</code>. But we would need to know what exactly you have in your variable <code>$month[$i][7]</code>. If it's the literal <code>00:22:12.212</code> this might not help.</p>\n"}, {"tags": [], "owner": {"reputation": 55, "user_id": 7409514, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b62bbded041206256a534e93ac686257?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Nguyen", "link": "https://stackoverflow.com/users/7409514/rafael-nguyen"}, "is_accepted": false, "score": 0, "last_activity_date": 1486379470, "last_edit_date": 1486379470, "creation_date": 1486379030, "answer_id": 42066219, "question_id": 41612563, "link": "https://stackoverflow.com/questions/41612563/how-to-write-hhmmss-fff-with-excelwriterxlsx-in-perl/42066219#42066219", "title": "How to write hh:mm:ss.fff with Excel::Writer::XLSX in Perl", "body": "<p>I have found the way to insert time values with excel writer in perl. </p>\n\n<p>Step 1: write the data to another column. </p>\n\n<pre><code>$worksheet1-&gt;write(\"A2\",\"00:22:12.212\",$datablank);\n</code></pre>\n\n<ul>\n<li><p>The format with text size=1 and color=white. That way the column A2 will look like empty. (don't write any more to A2 column).</p>\n\n<p><code>my $datablank = $workbook-&gt;add_format(\nbold =&gt; 0,\nsize =&gt; 1,\nborder =&gt; 0,\ntext_wrap =&gt; 1,\ncolor =&gt; 'white',\nnum_format =&gt; '[h]:mm:ss.000'\n);</code></p></li>\n</ul>\n\n<p>Step 2: write a formula with <code>TIMEVALUE</code> as bellow:</p>\n\n<pre><code>$worksheet1-&gt;write_formula(\"A1\",\"=TIMEVALUE(A2)\",$datatimeformat);\n</code></pre>\n\n<ul>\n<li><p>The format: </p>\n\n<p><code>my $datatimeformat = $workbook-&gt;add_format(\ncenter_across =&gt; 1,\nbold =&gt; 0,\nsize =&gt; 11,\nborder =&gt; 1,\ntext_wrap =&gt; 1,\ncolor =&gt; 'black',\nbg_color =&gt; '#ffffff',\nnum_format =&gt; 'hh:mm:ss.000',\nalign =&gt; 'center',\nvalign =&gt; 'vcenter');</code></p></li>\n</ul>\n\n<p>Notice: We should used the values from A1 column to draw the chart. </p>\n"}], "owner": {"reputation": 55, "user_id": 7409514, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b62bbded041206256a534e93ac686257?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Nguyen", "link": "https://stackoverflow.com/users/7409514/rafael-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1486379470, "creation_date": 1484221992, "last_edit_date": 1484296804, "question_id": 41612563, "link": "https://stackoverflow.com/questions/41612563/how-to-write-hhmmss-fff-with-excelwriterxlsx-in-perl", "title": "How to write hh:mm:ss.fff with Excel::Writer::XLSX in Perl", "body": "<p>I'm generating a report with <a href=\"https://metacpan.org/pod/Excel::Writer::XLSX\" rel=\"nofollow noreferrer\">Excel::Writer::XLSX</a> in Perl. The report already gets generated but unfortunately the format is not correct with extra apostrophes <code>'</code>.</p>\n\n<ul>\n<li><p>The array fetched from mysql : <code>$month[$i][7]</code> (notice: The column is using <code>time(3)</code> type. Example: <code>00:22:12.212</code>).</p></li>\n<li><p>The Perl command used to write the data to excel: <code>$sheet1-&gt;write($row,7,$month[$i][7],$format1);#7</code></p></li>\n<li><p>The format of column: </p>\n\n<pre><code>my $format1 = $workbook-&gt;add_format(\ncenter_across =&gt; 1,\nbold =&gt; 0,\nsize =&gt; 11,\nborder =&gt; 1,\ntext_wrap =&gt; 1,\ncolor =&gt; 'black',\nbg_color =&gt; '#ffffff',\nnum_format =&gt; 'hh:mm:ss.000',\nalign =&gt; 'center',\nvalign =&gt; 'vcenter');\n</code></pre></li>\n</ul>\n\n<p>The apostrophes just show when I double click to column:</p>\n\n<blockquote>\n  <p><img src=\"https://i.stack.imgur.com/Vcvyd.png\" alt=\"The apostrophes just show when I double click to column\"></p>\n</blockquote>\n\n<p>I have used that data to draw the chart but the column is formatting with text so I think that is why the chart did not show the lines. Should I convert the array to time in Perl before write it to Excel? </p>\n\n<hr>\n\n<p>I'm sorry because the previous question was not clear and my english is not good also.  </p>\n\n<p>Thanks you all for support. </p>\n"}, {"tags": ["perl", "raspberry-pi"], "comments": [{"owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "edited": false, "score": 0, "creation_date": 1484223236, "post_id": 41611320, "comment_id": 70427103, "body": "I am not sure if this is what you are asking for, but Perl already comes with your raspberry pi, have a look at this question: <a href=\"http://raspberrypi.stackexchange.com/questions/5513/does-raspbian-come-with-perl\" title=\"does raspbian come with perl\">raspberrypi.stackexchange.com/questions/5513/&hellip;</a>"}, {"owner": {"reputation": 309, "user_id": 2542466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yJUst.jpg?s=128&g=1", "display_name": "Pahomi", "link": "https://stackoverflow.com/users/2542466/pahomi"}, "reply_to_user": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "edited": false, "score": 0, "creation_date": 1484226238, "post_id": 41611320, "comment_id": 70429072, "body": "Yes, I know that post, thanks! My system perl is corupted and I cannot reinstall it, upgrade it or build my own version as suggested out there because any of that actions need perl which is corupted. The only valid thing to do is to reinstall the os."}], "answers": [{"tags": [], "owner": {"reputation": 309, "user_id": 2542466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yJUst.jpg?s=128&g=1", "display_name": "Pahomi", "link": "https://stackoverflow.com/users/2542466/pahomi"}, "is_accepted": true, "score": 2, "last_activity_date": 1484227345, "creation_date": 1484227345, "answer_id": 41614332, "question_id": 41611320, "link": "https://stackoverflow.com/questions/41611320/cannot-install-anything-perl-error/41614332#41614332", "title": "Cannot install anything, PERL error", "body": "<p>What I did to solve the problem and to reinstall the perl and perl-base without reinstalling the os:</p>\n\n<p>I go to /var/cache/apt/archives where I found perl-base_5.20.2-3+deb8u6_armhf.deb and perl_5.20.2-3+deb8u6_armhf.deb then I reinstall them using </p>\n\n<pre><code>sudo dpkg -i perl-base_5.20.2-3+deb8u6_armhf.deb\nsudo dpkg -i perl_5.20.2-3+deb8u6_armhf.deb\n</code></pre>\n\n<p>Pay attention that your versions can be different. If they are not cached you  can download them from the mirror manually. Hope it will help someone.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10249760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b871b7a61de6ba23f0d1c745706ae919?s=128&d=identicon&r=PG&f=1", "display_name": "Joan Costa", "link": "https://stackoverflow.com/users/10249760/joan-costa"}, "is_accepted": false, "score": 0, "last_activity_date": 1534765923, "creation_date": 1534765923, "answer_id": 51930182, "question_id": 41611320, "link": "https://stackoverflow.com/questions/41611320/cannot-install-anything-perl-error/51930182#51930182", "title": "Cannot install anything, PERL error", "body": "<p>in my case of the same problem it has been necessary:</p>\n\n<pre><code>cd /var/cache/apt/archives\nsudo dpkg -i perl-base_5.24.1-3+deb9u4_armhf.deb\nsudo dpkg -i perl_5.24.1-3+deb9u4_armhf.deb\nsudo dpkg -i perl-modules-5.24_5.24.1-3+deb9u4_all.deb\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 2131223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9271d912875b2865e43d7c2f9b15f1?s=128&d=identicon&r=PG&f=1", "display_name": "user151166", "link": "https://stackoverflow.com/users/2131223/user151166"}, "is_accepted": false, "score": 0, "last_activity_date": 1535286348, "creation_date": 1535286348, "answer_id": 52026239, "question_id": 41611320, "link": "https://stackoverflow.com/questions/41611320/cannot-install-anything-perl-error/52026239#52026239", "title": "Cannot install anything, PERL error", "body": "<p>What I had to do is to overwrite that file (reinstall did not help me) :</p>\n\n<pre><code>cp /usr/lib/arm-linux-gnueabihf/perl-base/auto/re/re.so /usr/lib/arm-linux-gnueabihf/perl/5.24.1/auto/re/re.so\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10824849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8614c09c20f8dd8c0172a55d1336792e?s=128&d=identicon&r=PG&f=1", "display_name": "Ph.D. YG", "link": "https://stackoverflow.com/users/10824849/ph-d-yg"}, "is_accepted": false, "score": 1, "last_activity_date": 1545533060, "creation_date": 1545533060, "answer_id": 53900830, "question_id": 41611320, "link": "https://stackoverflow.com/questions/41611320/cannot-install-anything-perl-error/53900830#53900830", "title": "Cannot install anything, PERL error", "body": "<p>sudo apt-get install perl-modules</p>\n\n<p>can help you.</p>\n"}], "owner": {"reputation": 309, "user_id": 2542466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yJUst.jpg?s=128&g=1", "display_name": "Pahomi", "link": "https://stackoverflow.com/users/2542466/pahomi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1436, "favorite_count": 0, "accepted_answer_id": 41614332, "answer_count": 4, "score": 1, "last_activity_date": 1545533060, "creation_date": 1484218481, "question_id": 41611320, "link": "https://stackoverflow.com/questions/41611320/cannot-install-anything-perl-error", "title": "Cannot install anything, PERL error", "body": "<p>I have an raspberry-pi already installed and configured for a local aplication and I need to install other things on. Whatever I try to install, I get the following error:</p>\n\n<pre><code>(Can't find string terminator '\"' anywhere before EOF at     /usr/share/perl/5.20/warnings.pm line 355.\nCompilation failed in require at /usr/share/perl/5.20/Carp.pm line 5.\nBEGIN failed--compilation aborted at /usr/share/perl/5.20/Carp.pm line 5.\nCompilation failed in require at /usr/lib/arm-linux-gnueabihf/perl/5.20/IO/File.pm line 8.\nBEGIN failed--compilation aborted at /usr/lib/arm-linux-gnueabihf/perl/5.20/IO/File.pm line 8.\nCompilation failed in require at /usr/share/perl/5.20/FileHandle.pm line 9.\n</code></pre>\n\n<p>It seems that some perl files are corupted or something. I tried reinstalling perl and I also runned </p>\n\n<pre><code>sudo dpkg-reconfigure perl\nsudo apt-get --reinstall install perl-base\n</code></pre>\n\n<p>But I get the same error with string terminator in /usr/share/perl/5.20/warnings.pm line 355. Bellow is the code from warnings.pm at the line 355(the last line from file)</p>\n\n<pre><code>Croaker(\"package '$category' not registered for\nNUL NUL NUL NUL NUL \n</code></pre>\n\n<p>and so on. Any help it will be much apreciated. If you need some command outputs just ask. Thanks!</p>\n"}, {"tags": ["bash", "perl", "sed"], "comments": [{"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 0, "creation_date": 1484217398, "post_id": 41610788, "comment_id": 70423193, "body": "Why not just double-quote all your variables in the file?"}, {"owner": {"reputation": 1341, "user_id": 213648, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6d4b914fc99e9aa6267889a88a70d937?s=128&d=identicon&r=PG", "display_name": "Pranab", "link": "https://stackoverflow.com/users/213648/pranab"}, "reply_to_user": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 0, "creation_date": 1484217627, "post_id": 41610788, "comment_id": 70423348, "body": "That envvars file is created by me automatically during deployment using AWS&#39; get-config (which dumps the environment variables in YAML), replacing : with =, and piping it to a file. It double quotes the PYTHONPATH, single-quotes RDS_PORT and doesn&#39;t quote RDS_PASSWORD at all. How do I double-quote all or just the RDS_PASSWORD value there while not re-double-quoting the variables already in quotes?"}, {"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 0, "creation_date": 1484217722, "post_id": 41610788, "comment_id": 70423439, "body": "The reason why I asked this, how do you expect a solution for this? A separate script run manually or to be coupled with some other script?"}, {"owner": {"reputation": 1341, "user_id": 213648, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6d4b914fc99e9aa6267889a88a70d937?s=128&d=identicon&r=PG", "display_name": "Pranab", "link": "https://stackoverflow.com/users/213648/pranab"}, "reply_to_user": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 0, "creation_date": 1484218067, "post_id": 41610788, "comment_id": 70423674, "body": "Anything that works - from a better way to access env variables in cronjobs on AWS, to some bash/perl/sed/regex magic."}, {"owner": {"reputation": 1341, "user_id": 213648, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6d4b914fc99e9aa6267889a88a70d937?s=128&d=identicon&r=PG", "display_name": "Pranab", "link": "https://stackoverflow.com/users/213648/pranab"}, "reply_to_user": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 0, "creation_date": 1484226080, "post_id": 41610788, "comment_id": 70428968, "body": "Yes it worked, thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 1341, "user_id": 213648, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6d4b914fc99e9aa6267889a88a70d937?s=128&d=identicon&r=PG", "display_name": "Pranab", "link": "https://stackoverflow.com/users/213648/pranab"}, "edited": false, "score": 0, "creation_date": 1484222347, "post_id": 41611289, "comment_id": 70426523, "body": "Is there a way to pipe the output of /opt/elasticbeanstalk/bin/get-config environment --output yaml | sed -n &#39;1!p&#39; | sed -e &#39;s/^&#40;.*&#41;: /\\1=/g&#39; &gt; sed -r &#39;s/RDS_PASSWORD=([[:graph:]]+)/RDS_PASSWORD=&quot;\\1&quot;/&#39;  &gt; /usr/local/bin/envvars"}], "tags": [], "owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "is_accepted": true, "score": 2, "last_activity_date": 1484222522, "last_edit_date": 1484222522, "creation_date": 1484218389, "answer_id": 41611289, "question_id": 41610788, "link": "https://stackoverflow.com/questions/41610788/saving-aws-environment-variables-to-file-how-to-handle-special-character/41611289#41611289", "title": "Saving AWS Environment Variables to File - How to handle special character &#39;&amp;&#39;", "body": "<p>Using <code>GNU sed</code> you can do something like below,</p>\n\n<pre><code>sed -r 's/RDS_PASSWORD=([[:graph:]]+)/RDS_PASSWORD=\"\\1\"/' /usr/local/bin/envvars\nPYTHONPATH=\"/opt/python/current/app/mydjangoapp:$PYTHONPATH\"\nDJANGO_SETTINGS_MODULE=mydjangoapp.settings\nAWS_ACTIVE='true'\nRDS_PORT='5432'\nRDS_HOSTNAME=hostname.host.us-east-1.rds.amazonaws.com\nRDS_USERNAME=master\nRDS_DB_NAME=ebdb\nRDS_PASSWORD=\"My&amp;Password\"\n</code></pre>\n\n<p>You can then add the <code>-i</code> flag to <code>sed</code> to in-place substitution. I have used the character class <code>[[:graph:]]</code> which is</p>\n\n<pre><code>\u2018[:graph:]\u2019\nGraphical characters: \u2018[:alnum:]\u2019 and \u2018[:punct:]\u2019.\n</code></pre>\n\n<p>The special characters as part of <code>[:punct:]</code> are </p>\n\n<pre><code>! \" # $ % &amp; ' ( ) * + , - . / : ; &lt; = &gt; ? @ [ \\ ] ^ _ ` { | } ~\n</code></pre>\n\n<p>So the <code>sed</code> can handle the substitution if any of these above characters constitute the <code>RDS_PASSWORD</code> variable.</p>\n\n<p>The syntax you can use, is</p>\n\n<pre><code> /opt/elasticbeanstalk/bin/get-config environment --output yaml | \\\n    sed -n '1!p' | sed -e 's/^\\(.*\\): /\\1=/g' | \\\n    sed -r 's/RDS_PASSWORD=([[:graph:]]+)/RDS_PASSWORD=\"\\1\"/' &gt; /usr/local/bin/envvars \n</code></pre>\n"}], "owner": {"reputation": 1341, "user_id": 213648, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6d4b914fc99e9aa6267889a88a70d937?s=128&d=identicon&r=PG", "display_name": "Pranab", "link": "https://stackoverflow.com/users/213648/pranab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 427, "favorite_count": 1, "accepted_answer_id": 41611289, "answer_count": 1, "score": 1, "last_activity_date": 1484222522, "creation_date": 1484216981, "last_edit_date": 1484218621, "question_id": 41610788, "link": "https://stackoverflow.com/questions/41610788/saving-aws-environment-variables-to-file-how-to-handle-special-character", "title": "Saving AWS Environment Variables to File - How to handle special character &#39;&amp;&#39;", "body": "<p>I am trying to run a django <code>manage.py</code> task via cron, on AWS Elasticbeanstalk (EB).</p>\n\n<pre><code>*/10 * * * * root /usr/local/bin/notification_cron.sh &gt; /dev/null\n</code></pre>\n\n<p>The <code>notification_cron.sh</code> script calls a django <code>manage.py</code> task. </p>\n\n<p>Django needs EB's environment variables (like RDS_PORT, RDS_DB_NAME, RDS_PASSWORD etc). So I am saving these environment variables into a file at deployment, and reloading those in the bash script that also calls the manage.py task.</p>\n\n<p>This is part of my deployment config in <code>.ebextensions</code>:</p>\n\n<pre><code>commands:\n  001_envvars_to_bash_source_file:\n    command: |\n      # source our elastic beanstalk environment variables\n      /opt/elasticbeanstalk/bin/get-config --output YAML environment|perl -ne \"/^\\w/ or next; s/: /=/; print qq|\\$_|\" &gt; /usr/local/bin/envvars\n      chmod 755 /usr/local/bin/envvars\n\nfiles:\n  \"/usr/local/bin/notification_cron.sh\":\n    mode: \"000755\"\n    owner: root\n    group: root\n    content: |\n      #!/usr/bin/env bash\n\n      AWS_CONFIG_FILE=\"/home/ec2-user/.aws/config\"\n      set -o allexport\n      # Loading environment data\n      source /usr/local/bin/envvars\n      set +o allexport\n      cd /opt/python/current/app/\n      source /opt/python/run/venv/bin/activate\n      python manage.py my_management_task\n</code></pre>\n\n<p>The problem is caused by the line </p>\n\n<pre><code>  /opt/elasticbeanstalk/bin/get-config --output YAML environment|perl -ne \"/^\\w/ or next; s/: /=/; print qq|\\$_|\" &gt; /usr/local/bin/envvars\n</code></pre>\n\n<p>or the alternate sed equivalent</p>\n\n<pre><code>  /opt/elasticbeanstalk/bin/get-config environment --output yaml | sed -n '1!p' | sed -e 's/^\\(.*\\): /\\1=/g' &gt; /usr/local/bin/envvars\n</code></pre>\n\n<p>The contents of <code>/usr/local/bin/envvars</code> are not always in quotes:</p>\n\n<pre><code>PYTHONPATH=\"/opt/python/current/app/mydjangoapp:$PYTHONPATH\"\nDJANGO_SETTINGS_MODULE=mydjangoapp.settings\nAWS_ACTIVE='true'\nRDS_PORT='5432'\nRDS_HOSTNAME=hostname.host.us-east-1.rds.amazonaws.com\nRDS_USERNAME=master\nRDS_DB_NAME=ebdb\nRDS_PASSWORD=My&amp;Password\n</code></pre>\n\n<p>This causes trouble where an environment variable has the \"&amp;\" character.</p>\n\n<pre><code>'RDS_PASSWORD': My&amp;Password\n</code></pre>\n\n<p>Bash splits this up at the \"&amp;\" character when I <code>source /usr/local/bin/envvars</code> to import them back into my script before calling django's manage.py.</p>\n\n<p><strong>Phew. My question is:</strong></p>\n\n<p>How do I get <code>RDS_PASSWORD=\"My&amp;Password\"</code> in the <code>/usr/local/bin/envvars</code> file (note the double quotes required) without breaking the other lines like <code>RDS_PORT='5432'</code>?</p>\n"}, {"tags": ["perl", "environment-variables"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1484215143, "post_id": 41609957, "comment_id": 70421636, "body": "<a href=\"http://perldoc.perl.org/perlvar.html#$$\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlvar.html#$$</a> <a href=\"http://perldoc.perl.org/perlvar.html#%ENV\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlvar.html#%ENV</a>"}, {"owner": {"reputation": 47, "user_id": 7408972, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f8f5c63275c8e1b3f27d1184264db66c?s=128&d=identicon&r=PG&f=1", "display_name": "Dave 494", "link": "https://stackoverflow.com/users/7408972/dave-494"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1484215671, "post_id": 41609957, "comment_id": 70421997, "body": "Is %ENV the same? I have no idea how Perl works."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1484240507, "post_id": 41609957, "comment_id": 70439281, "body": "you should learn some perl before worrying about either"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 6, "last_activity_date": 1584633969, "last_edit_date": 1584633969, "creation_date": 1484217597, "answer_id": 41610993, "question_id": 41609957, "link": "https://stackoverflow.com/questions/41609957/perl-env-and/41610993#41610993", "title": "Perl $ENV and $$", "body": "<p>These are both documented in <a href=\"http://perldoc.perl.org/perlvar.html#$$\" rel=\"nofollow noreferrer\"><code>perlvar</code></a>:</p>\n\n<blockquote>\n  <p>$$\n  The process number of the Perl running this script.</p>\n  \n  <p>The hash %ENV contains your current environment</p>\n</blockquote>\n\n<p>There is no <code>$ENV</code> but there might be <code>$ENV{'PATH'}</code> which is how you tell to access the 'PATH' from the current environment. The thing that seems to confuse some, is that <code>%HASH</code> denotes a whole hash. But an individual value within a hash is a <em>scalar</em> and the sigil for scalar is <code>$</code>. So you would access <code>$HASH{'somekey'}</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "is_accepted": false, "score": 2, "last_activity_date": 1484217803, "creation_date": 1484217803, "answer_id": 41611069, "question_id": 41609957, "link": "https://stackoverflow.com/questions/41609957/perl-env-and/41611069#41611069", "title": "Perl $ENV and $$", "body": "<p>both <strong>%ENV</strong> (not <strong>$ENV</strong>) and <strong>$$</strong> are described in <a href=\"http://perldoc.perl.org/perlvar.html#General-Variables\" rel=\"nofollow noreferrer\">General-Variables</a></p>\n\n<ul>\n<li><strong>$$</strong> The process number of the Perl running this script. </li>\n<li><strong>%ENV</strong> The hash %ENV contains your current environment.</li>\n</ul>\n"}], "owner": {"reputation": 47, "user_id": 7408972, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f8f5c63275c8e1b3f27d1184264db66c?s=128&d=identicon&r=PG&f=1", "display_name": "Dave 494", "link": "https://stackoverflow.com/users/7408972/dave-494"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4398, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1584633969, "creation_date": 1484214856, "question_id": 41609957, "link": "https://stackoverflow.com/questions/41609957/perl-env-and", "title": "Perl $ENV and $$", "body": "<p>I recently started learning Perl in school and noticed <strong>$ENV</strong> and <strong>$$</strong> in a document.\nMy teacher told me it's something about process ID's and obviously environment variables, but I still don't fully understand.\nNow I am wondering what these two things do and how to use them.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl", "grep"], "comments": [{"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 2, "creation_date": 1484187272, "post_id": 41604024, "comment_id": 70410451, "body": "Why not just grep for <code>foobar</code> if it exists only once?"}, {"owner": {"reputation": 522, "user_id": 3904661, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/86fO8.jpg?s=128&g=1", "display_name": "MikasaAckerman", "link": "https://stackoverflow.com/users/3904661/mikasaackerman"}, "reply_to_user": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 0, "creation_date": 1484187815, "post_id": 41604024, "comment_id": 70410595, "body": "i need to grep for foo if its there then do some manipulation and add to output, if foobar is also  present then its added to the output as well."}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1484188055, "post_id": 41604024, "comment_id": 70410659, "body": "You said in your question that &quot;foo&quot; is always there, so really what merlin2011 mentioned is completely valid. All you need to check for is foobar..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1484189558, "post_id": 41604024, "comment_id": 70411040, "body": "This is a dreadful question. You need to &quot;find a line&quot;, so <i>one</i> line, and you are looking for <code>foo</code> (and? or?) <code>foobar</code> and you have to &quot;print both line&quot;, so now there are <i>two</i>. &quot;<code>foo</code> will always exist&quot; but your example shows lines without either <code>foo</code> or <code>foobar</code>. Any line that contains <code>foobar</code> clearly also contains <code>foo</code>. You must explain yourself better, and I suggest that you use real data and show clearly what result you want. You appear to be writing code before it is clear in your head what you&#39;re trying to achieve."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1484189952, "post_id": 41604024, "comment_id": 70411140, "body": "Please don&#39;t use percent <code>%</code> as the delimiter for <i>match</i> <code>m&#47;&#47;</code>. A slash <code>&#47;</code> is the default and the most familiar, and you should also omit the <code>m</code>, like <code>grep &#47;foo&#47;, @lines</code>"}], "answers": [{"tags": [], "owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "is_accepted": false, "score": 1, "last_activity_date": 1484188304, "creation_date": 1484188304, "answer_id": 41604175, "question_id": 41604024, "link": "https://stackoverflow.com/questions/41604024/how-to-grep-for-two-variables-in-two-different-line/41604175#41604175", "title": "How to grep for two variables in two different line?", "body": "<p>It's unclear what you are doing with the result, although you can grab both <code>foo</code> and <code>foobar</code>:</p>\n\n<pre><code>grep -noE \"foo\\w*\"\n</code></pre>\n\n<p>If you want to be specific:</p>\n\n<pre><code>grep -noE \"foo|foobar\"\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>2:foo\n3:foobar\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "is_accepted": false, "score": 1, "last_activity_date": 1484218645, "creation_date": 1484218645, "answer_id": 41611381, "question_id": 41604024, "link": "https://stackoverflow.com/questions/41604024/how-to-grep-for-two-variables-in-two-different-line/41611381#41611381", "title": "How to grep for two variables in two different line?", "body": "<p>your grep commands work well:</p>\n\n<pre><code>my @lines = split (\"\\n\", &lt;&lt;'END');\nLine 1 Line 1\n Line 2 foo Line 2\n Line 3 foobar Line 3\n Line 4 Line 4\nEND\n\nmy ($foo) = grep m%foo%, @lines;\nmy ($foobar) = grep m%foobar%,@lines;\n\nmy $res = lc $foo;\n$res .= lc $foobar if defined $foobar;\nprint \"$res\\n\";\n</code></pre>\n\n<p>IMHO doing a grep to find the needed lines, then manipulating these lines is a bad approach. The general pattern should be to iterate over the lines, to match a regexp to collect the needed data and finally to format your output. This code pattern works is ideal for 90% of file parsers.</p>\n\n<pre><code>my ($f1, $f2, $fb1, $fb2);\nfor my $line (@lines) {\n    if ($line =~ m/(\\d+) foo Line (\\d+)/) {\n        $f1 = $1;\n        $f2 = $2;\n    } elsif ($line =~ m/(\\d+) foobar Line (\\d+)/) {\n        $fb1 = $1;\n        $fb2 = $2;\n    }\n}\n\nif (defined $fb1) {\n    print \"foo and foobar: $f1 $f2 $fb1 $fb2\\n\";\n} else {\n    print \"Only foo $f1 $f2\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 522, "user_id": 3904661, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/86fO8.jpg?s=128&g=1", "display_name": "MikasaAckerman", "link": "https://stackoverflow.com/users/3904661/mikasaackerman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1484218645, "creation_date": 1484187072, "question_id": 41604024, "link": "https://stackoverflow.com/questions/41604024/how-to-grep-for-two-variables-in-two-different-line", "title": "How to grep for two variables in two different line?", "body": "<p>I have a situation where i need to find a line in a file which contains certain keyword for example ,below i am looking for foo and foobar in a file: </p>\n\n<pre><code> Line 1 Line 1\n Line 2 foo Line 2\n Line 3 foobar Line 3\n Line 4 Line 4\n etc\n</code></pre>\n\n<p>and have to print both line after adding few strings.\nchances are that foobar may not exist but foo will always exist.</p>\n\n<p>And they will only exist once.</p>\n\n<p>After finding foo and foobar necessary transition need to be done.</p>\n\n<pre><code>grep m%foo%, @lines;\ngrep m%foobar%,@lines;\n</code></pre>\n"}]