[{"tags": ["perl", "hash", "increment", "scalar"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434583619, "post_id": 30904058, "comment_id": 49846862, "body": "There is nothing wrong with that code. It will put three consecutive numbers in the hash elements as you require. You need to show the real code"}, {"owner": {"reputation": 415, "user_id": 2049083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc7fa8b5486247f7015f252df619282e?s=128&d=identicon&r=PG", "display_name": "MicrobicTiger", "link": "https://stackoverflow.com/users/2049083/microbictiger"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434585221, "post_id": 30904058, "comment_id": 49847243, "body": "I thought the same, but it definitley produces the same values when I print it. Added the print statement above."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1434585378, "post_id": 30904058, "comment_id": 49847287, "body": "is $Index some kind of overloaded object?"}, {"owner": {"reputation": 131, "user_id": 3014371, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/675f66ec033d7a56a7ddc5d7e6f9bc12?s=128&d=identicon&r=PG", "display_name": "GWP", "link": "https://stackoverflow.com/users/3014371/gwp"}, "edited": false, "score": 1, "creation_date": 1434585599, "post_id": 30904058, "comment_id": 49847330, "body": "What values are in $val2/3/4 ?   If they&#39;re all the same, you&#39;ll just keep clobbering the same data address."}, {"owner": {"reputation": 415, "user_id": 2049083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc7fa8b5486247f7015f252df619282e?s=128&d=identicon&r=PG", "display_name": "MicrobicTiger", "link": "https://stackoverflow.com/users/2049083/microbictiger"}, "edited": false, "score": 0, "creation_date": 1434586244, "post_id": 30904058, "comment_id": 49847477, "body": "GWP - Thank you. Nail -&gt; Head"}], "owner": {"reputation": 415, "user_id": 2049083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc7fa8b5486247f7015f252df619282e?s=128&d=identicon&r=PG", "display_name": "MicrobicTiger", "link": "https://stackoverflow.com/users/2049083/microbictiger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1434585048, "creation_date": 1434583035, "last_edit_date": 1434585048, "question_id": 30904058, "link": "https://stackoverflow.com/questions/30904058/perl-increment-scalar-fails-with-hash-value", "title": "perl increment scalar fails with hash value", "body": "<p>I am having a problem incrementing a hash value inside an if statement. All three values in the code below return the same number.</p>\n\n<pre><code>     if (defined $hash{$this} &amp;&amp; defined $$hash{$that} &amp;&amp; defined $$hash{$this2} &amp;&amp; defined $$hash{$that2})\n     {\n        $hash{$val1}{$val2}{Index} = $Index ;  \n        ++$Index;\n        $hash{$val1}{$val3}{Index}  = $Index ; \n        ++$Index;\n        $hash{$val1}{$val4}{Index}  = $Index ;  #\n        ++$Index;\n        push (@Index,  \"Index : \".$hash{$val1}{$val2}{Index}.\", \".$hash{$val1}{$val3}{Index}.\", \".$hash{$val1}{$val4}{Index});\n     }\n</code></pre>\n\n<p>How do i ensure each Index value is a different number?\nCheers</p>\n"}, {"tags": ["regex", "windows", "perl"], "answers": [{"comments": [{"owner": {"reputation": 1473, "user_id": 3841431, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4b711dfcaa497d4fea7ca03e198b16f?s=128&d=identicon&r=PG&f=1", "display_name": "wpcarro", "link": "https://stackoverflow.com/users/3841431/wpcarro"}, "edited": false, "score": 0, "creation_date": 1434745261, "post_id": 30904799, "comment_id": 49927856, "body": "Thank you, stevieb! Obviously my cmd-line knowledge is beginner. I will be sure to familiarize myself with cmd-line redirection (&#39;&gt;&#39;)...although I would probably be better off switching back to a Unix-based system."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 1473, "user_id": 3841431, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4b711dfcaa497d4fea7ca03e198b16f?s=128&d=identicon&r=PG&f=1", "display_name": "wpcarro", "link": "https://stackoverflow.com/users/3841431/wpcarro"}, "edited": false, "score": 0, "creation_date": 1434746010, "post_id": 30904799, "comment_id": 49928205, "body": "You&#39;re welcome. I just tested on Windows, and this escapes the inner quotes properly: <code>perl -ne &quot;print qq{$_\\n} for m&#47;(?&lt;=&quot;)(\\d\\.\\d+)(?=&quot;)&#47;g&quot; file.txt &gt; results.txt</code>. If this works for you, please mark answer as correct."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 0, "last_activity_date": 1434588574, "creation_date": 1434588574, "answer_id": 30904799, "question_id": 30903940, "link": "https://stackoverflow.com/questions/30903940/perl-regex-within-windows-cmd-line/30904799#30904799", "title": "Perl &amp; Regex within Windows CMD Line", "body": "<p>If I understand correctly, you want to pull out all of the matches from an entire file, and write those results to a separate file.</p>\n\n<p>This will work if the below results are what you're after. I don't have a Windows box to test on, but this should work (you might have to use double quotes on the outside of the one-liner and escape the ones inside, but I'm not sure.</p>\n\n<p>This one-liner iterates without printing (<code>-n</code>) the 'file.txt' file, and prints a match combined with a newline if there is one into the 'results.txt' file via command-line redirection:</p>\n\n<pre><code>perl -ne 'print \"$_\\n\" for m/(?&lt;=\")(\\d\\.\\d+)(?=\")/g' file.txt &gt; results.txt\n</code></pre>\n\n<p>Input file:</p>\n\n<pre><code>$ cat file.txt\none\ntwo \"9.162\"\nthree one \"6.3\"\nfive one six\n</code></pre>\n\n<p>Output file:</p>\n\n<pre><code>$ cat results.txt\n9.162\n6.3\n</code></pre>\n"}], "owner": {"reputation": 1473, "user_id": 3841431, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4b711dfcaa497d4fea7ca03e198b16f?s=128&d=identicon&r=PG&f=1", "display_name": "wpcarro", "link": "https://stackoverflow.com/users/3841431/wpcarro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 30904799, "answer_count": 1, "score": 1, "last_activity_date": 1434588574, "creation_date": 1434582285, "question_id": 30903940, "link": "https://stackoverflow.com/questions/30903940/perl-regex-within-windows-cmd-line", "title": "Perl &amp; Regex within Windows CMD Line", "body": "<p>Is there anyway to accomplish matching + storing all in one cmd line? So instead of saving the matches to an array: i.e.</p>\n\n<pre><code>($matches) = $filecontents =~ m/.../g\n</code></pre>\n\n<p>...the matches would save to a *.txt file? I have been experimenting for a couple of days now, and believe that I am close to a solution. But a few nuances of Perl and Windows CMD Prompt are preventing me from accomplishing this task. Here's what I most recently tried:</p>\n\n<pre><code>% perl -p -i.bak -e \"m/(?&lt;=\")(\\d\\.\\d+)(?=\")/g\" filename.extension\n</code></pre>\n\n<p>I am a beginner with the CMD line, and I am running Windows 7 (soon to be switching over to Linux). Obviously I need to specify a file to which I can save my matches. The trouble is, this is where my knowledge drops off. Could someone give me a hand with this? Any comments are appreciated. Thank you!</p>\n"}, {"tags": ["perl", "module"], "answers": [{"comments": [{"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "edited": false, "score": 0, "creation_date": 1434613246, "post_id": 30903858, "comment_id": 49856308, "body": "Better still is <code>use Exporter 5.57 &#39;import&#39;; # exported import method</code>, just in case somebody runs your code on an old Perl.  Exporter didn&#39;t support exporting its <code>import</code> method into your package until version 5.57."}, {"owner": {"reputation": 83, "user_id": 4684309, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZDYHoW-wtXs/AAAAAAAAAAI/AAAAAAAAABM/61p_WbAuP58/photo.jpg?sz=128", "display_name": "Liviu Popescu", "link": "https://stackoverflow.com/users/4684309/liviu-popescu"}, "edited": false, "score": 0, "creation_date": 1434635602, "post_id": 30903858, "comment_id": 49871840, "body": "this is a small example .. i want that variable to be in global because i need in all packages .. i have many packages"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1434581769, "creation_date": 1434581769, "answer_id": 30903858, "question_id": 30903491, "link": "https://stackoverflow.com/questions/30903491/how-to-modify-a-perl-variable-in-a-different-package/30903858#30903858", "title": "How to modify a Perl variable in a different package", "body": "<p>The code in <code>main.pl</code> doesn't have a <code>package</code> statement, so every package identifier is in the <code>main</code> package by default. That means <code>our $var=0</code> is setting the variable <code>$main::var</code> to zero, and is nothing to do with the variable <code>$Second::var</code> in the module file</p>\n\n<p>The obvious way to fix this is to fully-qualify the variable identifier in <code>main.pl</code>, like this</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Second;\n\n$Second::var = 0;\nsubroutine()\n</code></pre>\n\n<p>Note that you have a capital <code>P</code> in <code>Package</code> in <code>Second.pm</code> that shouldn't be there. Also, it is best to import the <code>import</code> subroutine from <code>Exporter</code> instead of subclassing it; and a module should always return a <em>true</em> value when it is compiled. The file should look like this</p>\n\n<pre><code>package Second;\n\nuse strict;\nuse warnings;\n\nuse Exporter 'import';\n\nour @EXPORT = qw(subroutine);\n\nour $var;\n\nsub subroutine {\n    print $var;\n}\n\n1;\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 4684309, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZDYHoW-wtXs/AAAAAAAAAAI/AAAAAAAAABM/61p_WbAuP58/photo.jpg?sz=128", "display_name": "Liviu Popescu", "link": "https://stackoverflow.com/users/4684309/liviu-popescu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 831, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1434581880, "creation_date": 1434579892, "last_edit_date": 1434581880, "question_id": 30903491, "link": "https://stackoverflow.com/questions/30903491/how-to-modify-a-perl-variable-in-a-different-package", "title": "How to modify a Perl variable in a different package", "body": "<p>I have this </p>\n\n<p>main.pl</p>\n\n<pre><code>use Second;\n\nsub main {\n    our $var = 0;\n    subroutine()\n}\n</code></pre>\n\n<p>Second.pm</p>\n\n<pre><code>Package Second;\n\nuse Exporter;\n\nour @ISA=qw(Exporter);\nour @EXPORT=qw(subroutine);\n\nuse strict;\n\nour $var;\nsub subroutine{\n    print $var;\n}\n</code></pre>\n\n<p>which gives the error</p>\n\n<blockquote>\n  <p>Use of uninitialized value in print at </p>\n</blockquote>\n\n<p>How can I send that variable without like parameter?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "edited": false, "score": 1, "creation_date": 1434578141, "post_id": 30903016, "comment_id": 49845019, "body": "measure the time it takes to execute the first variant. If it is too slow measure the second and if its faster: use it. I would always prefer the first variant because of its readability and comprehensibility"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1434579422, "post_id": 30903016, "comment_id": 49845567, "body": "To fit in the element exclusion, replace <code>values(%$a)</code> with <code>@{$a}{ grep { $_ ne $retColumn } keys(%$a) }</code>"}, {"owner": {"reputation": 751, "user_id": 3299282, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/669a479b873fa683ddd20e4b03d6751d?s=128&d=identicon&r=PG&f=1", "display_name": "lzc", "link": "https://stackoverflow.com/users/3299282/lzc"}, "edited": false, "score": 0, "creation_date": 1434637606, "post_id": 30903016, "comment_id": 49873571, "body": "Nice ikegami, you&#39;re giving me <a href=\"http://perldoc.perl.org/perldata.html#Slices\" rel=\"nofollow noreferrer\">hash slice</a>! I tested it, it works! <code>return reduce {grep &#47;\\S&#47;,  @{$a}{grep $_ ne $retColumn, keys %$a} &gt; grep &#47;\\S&#47;, @{$b}{grep $_ ne $retColumn, keys %$b} ? $a : $b} @matches;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1434637734, "post_id": 30903016, "comment_id": 49873669, "body": "@lzc, Indeed, but I posted it as a comment since I don&#39;t recommend it in that form due to readability issues. Readability is what is the most important, so the readability improvements you made and made many more."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1434617723, "post_id": 30903291, "comment_id": 49859056, "body": "Would <code>Memoize</code>ing <code>get_score</code> be worth considering in the first example? Looks like a good place to cache results."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1527476080, "last_edit_date": 1527476080, "creation_date": 1434578927, "answer_id": 30903291, "question_id": 30903016, "link": "https://stackoverflow.com/questions/30903016/reducing-code-verbosity-and-efficiency/30903291#30903291", "title": "Reducing code verbosity and efficiency", "body": "<blockquote>\n  <p>I wonder if the terse version is any efficient and/or advantage over the original one</p>\n</blockquote>\n\n<p>The terse version is less efficient than the original because it calculates the score of every element twice, but it does have readability advantages.</p>\n\n<p>The following keeps the readability gain (and even adds some):</p>\n\n<pre><code>sub get_score {\n   my ($match) = @_;\n   my @keys = grep { $_ ne $retColumn } keys %$match;\n   my $score = grep { /\\S/ } @{$match}{ @keys };\n   return $score;\n}\n\nreturn reduce { get_score($a) &gt; get_score($b) ? $a : $b } @matches;\n</code></pre>\n\n<p>You can look at any part of that sub and understand it without looking around. The least context you need to understand code, the more readable it is.</p>\n\n<p>If you did need an efficiency boost, you can avoid calling <code>get_score</code> on every input twice by using a Schwartzian Transform. As with many optimizations, you will take a readability hit, but at least it's idiomatic (well known and thus well recognizable).</p>\n\n<pre><code>return\n   map { $_-&gt;[0] }\n   reduce { $a-&gt;[1] &gt; $b-&gt;[1] ? $a : $b }\n   map { [ $match, get_score($match) ] }\n   @matches;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1434637234, "post_id": 30910979, "comment_id": 49873268, "body": "Re &quot;the rule of thumb is look at number and size of loops&quot;, That&#39;s not true at all!!! The number of loops is irrelevant. Your claims that <code>for (@a) { A }</code> is more efficient than <code>for (@a) { B } for (@a) { C }</code> are wrong. My solution has 5 loops, yet it&#39;s as efficient as the one-loop solution. What makes the difference here is the number of times the score is calculated, not how many loops it&#39;s spread over."}, {"owner": {"reputation": 751, "user_id": 3299282, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/669a479b873fa683ddd20e4b03d6751d?s=128&d=identicon&r=PG&f=1", "display_name": "lzc", "link": "https://stackoverflow.com/users/3299282/lzc"}, "edited": false, "score": 0, "creation_date": 1434637410, "post_id": 30910979, "comment_id": 49873417, "body": "Sobrique: You touched on all my question points perfectly! Thanks"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 751, "user_id": 3299282, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/669a479b873fa683ddd20e4b03d6751d?s=128&d=identicon&r=PG&f=1", "display_name": "lzc", "link": "https://stackoverflow.com/users/3299282/lzc"}, "edited": false, "score": 0, "creation_date": 1434637453, "post_id": 30910979, "comment_id": 49873446, "body": "@lzc, Well, he didn&#39;t touch the only question you actually asked, and what he said was wrong. Is there a point my answer didn&#39;t touch?"}, {"owner": {"reputation": 751, "user_id": 3299282, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/669a479b873fa683ddd20e4b03d6751d?s=128&d=identicon&r=PG&f=1", "display_name": "lzc", "link": "https://stackoverflow.com/users/3299282/lzc"}, "edited": false, "score": 0, "creation_date": 1434637748, "post_id": 30910979, "comment_id": 49873681, "body": "Certainly, I see how <code>return reduce {grep &#47;\\S&#47;,  @{$a}{grep $_ ne $retColumn, keys %$a} &gt; grep &#47;\\S&#47;, @{$b}{grep $_ ne $retColumn, keys %$b} ? $a : $b} @matches;</code> while it works, it certainly re"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 751, "user_id": 3299282, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/669a479b873fa683ddd20e4b03d6751d?s=128&d=identicon&r=PG&f=1", "display_name": "lzc", "link": "https://stackoverflow.com/users/3299282/lzc"}, "edited": false, "score": 0, "creation_date": 1434637964, "post_id": 30910979, "comment_id": 49873835, "body": "@lzc, Your comment was cut short?"}, {"owner": {"reputation": 751, "user_id": 3299282, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/669a479b873fa683ddd20e4b03d6751d?s=128&d=identicon&r=PG&f=1", "display_name": "lzc", "link": "https://stackoverflow.com/users/3299282/lzc"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1434638250, "post_id": 30910979, "comment_id": 49874084, "body": "hmm, the 5 minute rule... I accidentally posted too soon... I&#39;ll re-post shortly .. but briefly, I&#39;ll say @ikegami, thanks for adding life to my question :)"}, {"owner": {"reputation": 751, "user_id": 3299282, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/669a479b873fa683ddd20e4b03d6751d?s=128&d=identicon&r=PG&f=1", "display_name": "lzc", "link": "https://stackoverflow.com/users/3299282/lzc"}, "edited": false, "score": 0, "creation_date": 1434638450, "post_id": 30910979, "comment_id": 49874260, "body": "Certainly Sobrique, I see how <code>return reduce {grep &#47;\\S&#47;,  @{$a}{grep $_ ne $retColumn, keys %$a} &gt; grep &#47;\\S&#47;, @{$b}{grep $_ ne $retColumn, keys %$b} ? $a : $b} @matches;</code> while it works, renders as <a href=\"https://en.wikipedia.org/wiki/Write-only_language\" rel=\"nofollow noreferrer\">write only</a>. However, at some point I hope you&#39;ll agree that code like <code>next if grep $key eq $_, @hits;</code> <i>reads easier</i> than it&#39;s 10-line counterpart and is one of the reason we love Perl."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1434640326, "post_id": 30910979, "comment_id": 49875707, "body": "Oh totally. Readability is king. It&#39;s rarely worth worrying about efficiency on a modern system - usually the time spent outweighs the runtime of your script. And if it <i>does</i> matter, then the answer is &#39;profile your code, focus there&#39;. I keep getting into arguments about how &#39;perl is incomprehensible&#39; and repeatedly point out - I can write bad code in any language. Perl may make it easier, but for all those reasons you can write <i>good</i> code in perl tool."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 4, "last_activity_date": 1434618271, "creation_date": 1434618271, "answer_id": 30910979, "question_id": 30903016, "link": "https://stackoverflow.com/questions/30903016/reducing-code-verbosity-and-efficiency/30910979#30910979", "title": "Reducing code verbosity and efficiency", "body": "<p>There is a famous quote: </p>\n\n<blockquote>\n  <p>\"Premature optimisation is the root of all evil\" - Donald Knuth</p>\n</blockquote>\n\n<p>It is almost invariably the case that making code more concise really doesn't make much difference to the efficiency, and can cause significant penalties to readability and maintainability. </p>\n\n<p>Algorithm is important, code layout ... isn't really. Things like <code>reduce</code>, <code>map</code> and <code>grep</code> are still looping - they're just doing so behind the scenes. You've gained almost no efficiency by using them, you've just saved some bytes in your file. That's fine if they make your code more clear, but that should be your foremost consideration. </p>\n\n<p>Please - keep things clear first, foremost and always. Make your algorithm good. Don't worry about replacing an explicit loop with a <code>grep</code> or <code>map</code> unless these things make your code clearer. </p>\n\n<p>And in the interests of being constructive:</p>\n\n<ul>\n<li>use <code>strict</code> and <code>warnings</code> is really important. Really really important.</li>\n</ul>\n\n<p>To answer your original question:</p>\n\n<blockquote>\n  <p>I wonder if the terse version is any efficient and/or advantage over the original one</p>\n</blockquote>\n\n<p>No, I think if anything the opposite. Short of profiling code speed, the rule of thumb is look at number and size of loops - a single chunk of code rarely makes much difference, but running it lots and lots of times (unnecessarily) is where you get your inefficiency.</p>\n\n<p>In your first example - you have two loops, a <code>foreach</code> loop inside a <code>for</code> loop. It looks like you traverse your <code>@hits</code> data structure once, and 'unwrap' it to get at the inner layers. </p>\n\n<p>In your second example, both your <code>grep</code>s are loops, and your <code>reduce</code> is as well. If I'm reading it correctly, then it'll be traversing your data structure multiple times. (Because you are <code>grep</code>ing <code>values $a</code> and <code>$b</code> - these will be applied several times).</p>\n\n<p>So I don't think you have gained either readability or efficiency by doing what you've done. But you have made a function that's going to make future maintenance programmers have to think really hard. To take another quote:</p>\n\n<blockquote>\n  <p>\"Everyone knows that debugging is twice as hard as writing a program in the first place. So if you're as clever as you can be when you write it, how will you ever debug it?\" - Brian Kernighan</p>\n</blockquote>\n"}], "owner": {"reputation": 751, "user_id": 3299282, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/669a479b873fa683ddd20e4b03d6751d?s=128&d=identicon&r=PG&f=1", "display_name": "lzc", "link": "https://stackoverflow.com/users/3299282/lzc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 30910979, "answer_count": 2, "score": 0, "last_activity_date": 1527476080, "creation_date": 1434577813, "question_id": 30903016, "link": "https://stackoverflow.com/questions/30903016/reducing-code-verbosity-and-efficiency", "title": "Reducing code verbosity and efficiency", "body": "<p>I came across the below where some heavy stipulations were done, finally we got a number of <code>@hits</code> and we need to return just one:</p>\n\n<pre><code>if ($#hits &gt; 0)\n{\n    my $highestScore = 0;\n    my $chosenMatch = \"\";\n    for $hit (@hits)\n    {\n        my $currScore = 0;\n        foreach $k (keys %{$hit})\n        {\n            next if $k eq $retColumn;\n            $currScore++ if ($hit-&gt;{$k} =~ /\\S+/);\n        }\n\n        if ($currScore &gt; $highestScore)\n        {\n            $chosenMatch = $hit;\n            $highestScore = $currScore;\n        }\n    }\n    return ($chosenMatch);\n}\nelsif ($#hits == 0)\n{\n    return ($hits[0]);\n}\n</code></pre>\n\n<p>That's an eye full and I was hoping to simplify the above code, I came up with:</p>\n\n<pre><code>return reduce {grep /\\S+/, values %{$a} &gt; grep /\\S+/, values %{$b} ? $a : $b} @matches;\n</code></pre>\n\n<p>After of using of course <code>use</code>ing, <a href=\"http://perldoc.perl.org/List/Util.html#$result-=-reduce-\" rel=\"nofollow\">List::Util</a></p>\n\n<p>I wonder if the terse version is any efficient and/or advantage over the original one. Also, there's one condition that's skipped: <code>if $k eq $retColumn</code>, how can I efficiently get that in?</p>\n"}, {"tags": ["perl", "dom", "mojolicious", "mojo"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5021570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e7323da91f6948e9a813e753b1c6a34?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Simmonds", "link": "https://stackoverflow.com/users/5021570/jim-simmonds"}, "edited": false, "score": 1, "creation_date": 1434587015, "post_id": 30903675, "comment_id": 49847635, "body": "Thanks! It&#39;s working now. I didn&#39;t understand about the first and last node business. Now I understand it&#39;s passing me a set of nodes in the datat structure.  And yes, the original was a bit too compact to start out with (especially since I&#39;m just now familiarizing myself with Mojo).  Thanks again."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 13, "user_id": 5021570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e7323da91f6948e9a813e753b1c6a34?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Simmonds", "link": "https://stackoverflow.com/users/5021570/jim-simmonds"}, "edited": false, "score": 1, "creation_date": 1434587249, "post_id": 30903675, "comment_id": 49847697, "body": "@JimSimmonds: I&#39;m pleased to help: Mojolicious is a nice framework. I just wish it supported XPath expressions as well as CSS selectors. The <code>first</code> and <code>last</code> are just examples of extracting one <code>Mojo::DOM</code> object from a <code>Mojo::Collection</code>. You can also use <code>each</code> to return a list of nodes, and you can index it like an array reference, so <code>$collection-&gt;first</code> is the same as <code>$collection-&gt;[0]</code> etc."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 13, "user_id": 5021570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e7323da91f6948e9a813e753b1c6a34?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Simmonds", "link": "https://stackoverflow.com/users/5021570/jim-simmonds"}, "edited": false, "score": 0, "creation_date": 1434587392, "post_id": 30903675, "comment_id": 49847738, "body": "@JimSimmonds: I suggest you take a look at <a href=\"http://stackoverflow.com/help/someone-answers\"><b><i>What should I do when someone answers my question?</i></b></a>"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1434582553, "last_edit_date": 1434582553, "creation_date": 1434580759, "answer_id": 30903675, "question_id": 30902839, "link": "https://stackoverflow.com/questions/30902839/cant-locate-modules-using-mojodom/30903675#30903675", "title": "Can&#39;t locate module(s) using Mojo::DOM", "body": "<p>It's very difficult to debug a single long chained statement like that, and you're much better off splitting it into individual steps</p>\n\n<p>Passing a parameter to the <code>dom</code> method is the same as calling <code>find</code> with that parameter on the DOM object. <code>find</code> returns a <code>Mojo::Collection</code>, which makes sense as it's the set of nodes that match the CSS selector. The <code>ancestors</code> method applies only to a single node, so you have to pick one out with something like <code>first</code> or <code>last</code>, or process them all one at a time using <code>each</code></p>\n\n<p>Here's a rewrite of your code that produces what I assume is the expected result</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nuse open qw/ :std :encoding(UTF-8) /;\n\nuse Mojo;\n\nmy $url = 'http://stackoverflow.com/q/26353298';\n\nmy $ua = Mojo::UserAgent-&gt;new-&gt;max_redirects(3);\nmy $dom = $ua-&gt;get($url)-&gt;res-&gt;dom;\n\nmy $divs = $dom-&gt;find('a div');\n\nprintf \"%d matching div elements:\\n\\n\", $divs-&gt;size;\n\nmy $n;\nfor my $div ( $divs-&gt;each ) {\n  my $spacers = $div-&gt;ancestors('div.spacer');\n  for my $spacer ( $spacers-&gt;each ) {\n    printf \"%2d -- %s\\n\\n\", ++$n, $spacer-&gt;all_text;\n  }\n}\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>20 matching div elements:\n\n 1 -- Stack Exchange Podcast #65: The Word Has Two Meanings, You See\n\n 2 -- PIVOTing into a new career: please welcome Taryn Pratt, bluefooted Community \u2026\n\n 3 -- 0 Can't locate module(s) using Mojo::DOM\n\n 4 -- 0 tiny runable www::Mechanize examples for the beginner\n\n 5 -- 2 Perl WWW::Mechanize and authenticated proxy\n\n 6 -- 0 How to process a simple loop in Perl's WWW::Mechanize?\n\n 7 -- 1 not able to click a button in www::mechanize perl\n\n 8 -- 0 Perl - Mechanize? - How to get all links in a page up to a specific \u201cdelimiter\u201d text\n\n 9 -- 2 Why am I getting gibberish content using Perl's WWW::Mechanize?\n\n10 -- 1 Getting error in accessing a link using WWW::Mechanize\n\n11 -- 3 Perl WWW::Mechanize Web Spider. How to find all links\n\n12 -- 0 What is the best way to extract unique URLs and related link text via perl mechanize?\n\n13 -- 0 perl WWW::Mechanize file upload error\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5021570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e7323da91f6948e9a813e753b1c6a34?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Simmonds", "link": "https://stackoverflow.com/users/5021570/jim-simmonds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 697, "favorite_count": 0, "accepted_answer_id": 30903675, "answer_count": 1, "score": 1, "last_activity_date": 1434582553, "creation_date": 1434577056, "last_edit_date": 1495539828, "question_id": 30902839, "link": "https://stackoverflow.com/questions/30902839/cant-locate-modules-using-mojodom", "title": "Can&#39;t locate module(s) using Mojo::DOM", "body": "<p>I'm new to Mojolicious. I am sure this is probably a setup problem, but it's eaten up an entire day of my time. I'm trying to run this simple test code</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Mojo::DOM;\nuse Mojo::UserAgent;\n\nmy $ua = Mojo::UserAgent-&gt;new();\n\n$ua-&gt;get('https://stackoverflow.com/questions/26353298/find-links-containing-bold-text-using-wwwmechanize')-&gt;res-&gt;dom('a div')-&gt;ancestors('div.spacer')-&gt;each( sub { say $_-&gt;all_text } );\n</code></pre>\n\n<p>which I found at this location</p>\n\n<p><a href=\"https://stackoverflow.com/questions/26353298/find-links-containing-bold-text-using-wwwmechanize\">find links containing bold text using WWW::Mechanize</a></p>\n\n<p>and it is failing with</p>\n\n<pre><code>Can't locate object method \"ancestors\" via package \"Mojo::Collection\" at ./test4.pl line 10.\n</code></pre>\n\n<p>I've deinstalled and reinstalled a jillion times, tried different package installation options (cpan, cpanm, direct link, etc). No dice. I am mildly confused that the Mojo::Collection module does not appear to have an \"ancestors\" method in it (inherited or no), but I've seen several other examples like this which appear to use the same method in the same way. It's not just the \"ancestors\" module, either -- the problem seems to be affecting a few other methods as well.</p>\n\n<p>I'm using perl 5.18.2 on Linux Mint with Mojolicious package 6.11.</p>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["multithreading", "perl"], "answers": [{"comments": [{"owner": {"reputation": 15863, "user_id": 609087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2725ad67cddd93219495d032b0e063e5?s=128&d=identicon&r=PG", "display_name": "keety", "link": "https://stackoverflow.com/users/609087/keety"}, "edited": false, "score": 0, "creation_date": 1434577724, "post_id": 30902747, "comment_id": 49844843, "body": "does this mean copying a shared hash is not thread safe and it should be locked ?  intuitively copying seems to be  a read only operation  so it is odd .Is there any doc/code  where this is specified ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 15863, "user_id": 609087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2725ad67cddd93219495d032b0e063e5?s=128&d=identicon&r=PG", "display_name": "keety", "link": "https://stackoverflow.com/users/609087/keety"}, "edited": false, "score": 0, "creation_date": 1434578019, "post_id": 30902747, "comment_id": 49844961, "body": "Copying requires iterating over the hash, so yeah. // Documentation that the iterator is tied to the hash rather than the operator? Maybe not directly, but it can be deduced. &quot;As a side effect, calling keys() resets the internal iterator of the HASH&quot;. And you can easily see it by using two <code>each</code> to iterate over the same hash."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1434576723, "creation_date": 1434576723, "answer_id": 30902747, "question_id": 30902589, "link": "https://stackoverflow.com/questions/30902589/problems-copying-shared-hash-in-perl-threads/30902747#30902747", "title": "problems copying shared hash in perl threads", "body": "<p>Two threads are iterating over the same hash at the same time, so they are both changing its iterator. You need to make sure that no more than one thread uses the hash's iterator at a time.</p>\n\n<p>I'd remove all those :shared and use Thread::Queue::Any.</p>\n"}], "owner": {"reputation": 15863, "user_id": 609087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2725ad67cddd93219495d032b0e063e5?s=128&d=identicon&r=PG", "display_name": "keety", "link": "https://stackoverflow.com/users/609087/keety"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 30902747, "answer_count": 1, "score": 1, "last_activity_date": 1434576723, "creation_date": 1434576007, "question_id": 30902589, "link": "https://stackoverflow.com/questions/30902589/problems-copying-shared-hash-in-perl-threads", "title": "problems copying shared hash in perl threads", "body": "<p>I encountered what I feel is strange behavior of shared hash in perl and needed some help understanding it.</p>\n\n<p>The actual problem is in a far larger code-base and I have tried reducing it to smaller reproducible script.</p>\n\n<p>So essentially the problem I'm facing is I have a shared variable that looks something on these lines :</p>\n\n<pre><code> my %headers :shared= map { lc($_) =&gt; $custom_headers-&gt;{$_} }  keys %{$custom_headers};   \n my %task1_request :shared; \n $task1_request{count} = $count;\n $task1_request{header} = \\%headers if(keys %headers);\n</code></pre>\n\n<p>i.e I end up passing a reference to a shared variable <em>headers</em> to two separate threads</p>\n\n<p>Each of these threads performs \"read-only\" operations on the reference to hash \"<em>headers</em>\". </p>\n\n<p>However it looks like while passing a copy of the shared hash to a function in the thread , as shown in example below :</p>\n\n<pre><code>iterate_header($request-&gt;{count},%{$request-&gt;{header}});\n\nsub iterate_header\n{\n    my $count = shift;\n    my $current_count = scalar(@_);\n    if($count != $current_count) {\n      print STDERR \"Test failed Expected: $count, Actual : $current_count \\n\";\n    }\n    else {\n      print STDERR \"Test passed\\n\" ;\n    }\n}\n</code></pre>\n\n<p>results in copied hash being corrupt \ni.e The <em>@_</em> in the <em>iterate_header</em> is corrupt .</p>\n\n<p>It looks to me something on the lines of the iterator being global for a shared hash as a result the copy is not thread safe. However the above is just a reckless assumption on my part and I hope someone can help clarify  as to why copying a shared hash is causing this seemingly strange behavior and if this is expected ?</p>\n\n<p><strong>The reproducer script is  below :</strong></p>\n\n<pre><code>use strict;\nuse warnings;\nuse threads;\nuse threads::shared;\nuse Thread::Queue;\n\n#should run test_count * 2 times\nsub iterate_header\n{\n    my $count = shift;\n    my $current_count = scalar(@_);\n    if($count != $current_count) {\n      print STDERR \"Test failed Expected: $count, Actual : $current_count \\n\";\n    }\n    else {\n      print STDERR \"Test passed\\n\" ;\n    }\n}\n\nsub request_loop {\n    my ($request_queue) = @_;\n\n    # wait for the next reuest...\n    while (defined(my $request = $request_queue-&gt;dequeue())) {\n        my %result :shared;\n        if(exists($request-&gt;{header})) {\n            iterate_header($request-&gt;{count},%{$request-&gt;{header}});\n        }\n        last if(exists($request-&gt;{exit}));\n        $result{is_success} = \"200\";\n    }\n}\n\n# Main program\n# create thread queues\nmy $task1_request_queue = Thread::Queue-&gt;new();   \nmy $task2_request_queue = Thread::Queue-&gt;new();    \n\n# start worker threads\nmy $task1_worker = threads-&gt;create(\\&amp;request_loop, $task1_request_queue);\nmy $task2_worker = threads-&gt;create(\\&amp;request_loop, $task2_request_queue);\n\n# a high number to ensure tests fail\n my $test_count = 100; \n my $custom_headers = {\n        \"key\" =&gt; \"558193F28878E5FE\",\n        \"username\" =&gt; \"Mastodon\",\n        \"real_username\" =&gt; \"Mastodon\",\n        \"type\" =&gt; \"EMPLOYEE\",\n        \"expiration\" =&gt; \"1434556278\",\n        \"env\" =&gt; \"save it\",\n        \"for\" =&gt; \"some ip\",\n        \"long-string\" =&gt; \"This islong string\",\n        \"state\" =&gt; \"internal\",\n        \"account\" =&gt; \"home\",\n        \"original_account\" =&gt; \"home\",\n        \"key\" =&gt; \"MCwCFAPOE74uvXso5alKytqjlfpdqeY4AhRpDeIMLCAk3ciBcyDXLdnyZjC/7Q==\",\n        \"charset\" =&gt; \"iso-8859-1,*,utf-8\",\n        \"agent\" =&gt; \"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.166 Workstation/2013.9.213.116 Safari/535.19\",\n        \"accept\" =&gt; \"application/json, text/plain, */*\",\n        \"encoding\" =&gt; \"gzip,deflate\",\n        \"language\" =&gt; \"en-us,en\",\n        \"cookie\" =&gt; \"TS01375c99=012e7f4fa1e82941689f22669e2e6403ce1c75f9f8c7cb86de86c19a887f61a1109c6e2aae\",\n        \"created\" =&gt; \"1434555378\",\n\n    };\n\n\nmy @data = %{$custom_headers};\nmy $count = scalar(@data);\nprint STDERR  \"Expected Count for all tests:$count\\n\";\nfor(my $i = 0;$i &lt; 2; $i++) {\n  my %headers :shared= map { lc($_) =&gt; $custom_headers-&gt;{$_} }  keys %{$custom_headers};   \n  #add to task1 q\n    {    \n\n        my %task1_request :shared; \n        $task1_request{count} = $count;\n\n        $task1_request{header} = \\%headers if(keys %headers);\n\n        $task1_request_queue-&gt;enqueue(\\%task1_request);\n    }\n\n    # add to task2 q\n    {\n        my %task2_request :shared; \n        $task2_request{count} = $count;\n\n        $task2_request{header} = \\%headers if(keys %headers);\n        $task2_request_queue-&gt;enqueue(\\%task2_request);\n    }\n}\n\nmy %end_request :shared = (exit =&gt; 1);\n$task1_request_queue-&gt;enqueue(\\%end_request);\n$task2_request_queue-&gt;enqueue(\\%end_request);\n\n$task1_worker-&gt;join();\n$task2_worker-&gt;join();\nprint \"testing done\\n\";\n</code></pre>\n\n<p><strong>Example output of a test runs:</strong></p>\n\n<pre><code>[]$ perl thread_shared_issue.pl\nExpected Count for all tests:36\nTest passed\nTest passed\nTest passed\nTest passed\ntesting done\n[]$ perl thread_shared_issue.pl\nExpected Count for all tests:36\nTest failed Expected: 36, Actual : 16\nTest failed Expected: 36, Actual : 60\nTest failed Expected: 36, Actual : 18\nTest failed Expected: 36, Actual : 56\ntesting done\n</code></pre>\n\n<p><strong>Perl Version Tested with</strong></p>\n\n<pre><code>perl -version\n\nThis is perl 5, version 12, subversion 5 (v5.12.5) built for x86_64-linux-thread-multi\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 4705673, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yWQJUy1EoMM/AAAAAAAAAAI/AAAAAAAAAXg/VsMuloD23Y4/photo.jpg?sz=128", "display_name": "Colton Love", "link": "https://stackoverflow.com/users/4705673/colton-love"}, "edited": false, "score": 0, "creation_date": 1434575510, "post_id": 30902318, "comment_id": 49843849, "body": "but what could you uc(something) and not get SOMETHING?"}, {"owner": {"reputation": 49, "user_id": 4705673, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yWQJUy1EoMM/AAAAAAAAAAI/AAAAAAAAAXg/VsMuloD23Y4/photo.jpg?sz=128", "display_name": "Colton Love", "link": "https://stackoverflow.com/users/4705673/colton-love"}, "edited": false, "score": 0, "creation_date": 1434575787, "post_id": 30902318, "comment_id": 49843999, "body": "Thanks again for your help!"}, {"owner": {"reputation": 502, "user_id": 758481, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/827785da9c6441403eeb00af424986c5?s=128&d=identicon&r=PG", "display_name": "Jassi", "link": "https://stackoverflow.com/users/758481/jassi"}, "edited": false, "score": 0, "creation_date": 1434631844, "post_id": 30902318, "comment_id": 49868797, "body": "Although answer is already accepted. But adding just for better understanding.  As mentioned in <a href=\"http://perldoc.perl.org/functions/fc.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/fc.html</a>  You can think of fc when you are dealing with unicode comparison :D"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 11, "last_activity_date": 1434575610, "last_edit_date": 1434575610, "creation_date": 1434574852, "answer_id": 30902318, "question_id": 30901943, "link": "https://stackoverflow.com/questions/30901943/perl-would-i-use-fc-over-uc/30902318#30902318", "title": "Perl would I use fc over uc?", "body": "<p><code>fc</code> is used for case-insensitive comparisons.</p>\n\n<pre><code>uc($a) cmp uc($b)    # XXX\nlc($a) cmp lc($b)    # XXX\nfc($a) cmp fc($b)    # ok\n</code></pre>\n\n<p>An example where this makes a difference:</p>\n\n<pre><code>   lc uc fc\n-- -- -- --\nss ss SS ss\nSS ss SS ss\n\u00df  \u00df  SS ss\n\u1e9e  \u00df  \u1e9e  ss\n</code></pre>\n\n<p>Notice that fc(\"\u00df\") eq fc(\"\u1e9e\"), but uc(\"\u00df\") ne uc(\"\u1e9e\").</p>\n\n<p>Notice that fc(\"\u00df\") eq fc(\"ss\"), but lc(\"\u00df\") ne lc(\"ss\").</p>\n\n<hr>\n\n<p>The table was generated using</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw( fc );\n\nuse open ':std', ':encoding(UTF-8)';\n\nmy $ss = \"\\N{LATIN SMALL LETTER SHARP S}\";\nmy $SS = \"\\N{LATIN CAPITAL LETTER SHARP S}\";\n\nprintf(\"   lc uc fc\\n\");\nprintf(\"-- -- -- --\\n\");\nprintf(\"%-2s %-2s %-2s %-2s\\n\", $_, lc($_), uc($_), fc($_))\n   for 'ss', 'SS', $ss, $SS;\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 4705673, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yWQJUy1EoMM/AAAAAAAAAAI/AAAAAAAAAXg/VsMuloD23Y4/photo.jpg?sz=128", "display_name": "Colton Love", "link": "https://stackoverflow.com/users/4705673/colton-love"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 863, "favorite_count": 0, "accepted_answer_id": 30902318, "answer_count": 1, "score": 4, "last_activity_date": 1434575610, "creation_date": 1434573534, "question_id": 30901943, "link": "https://stackoverflow.com/questions/30901943/perl-would-i-use-fc-over-uc", "title": "Perl would I use fc over uc?", "body": "<p>When would you ever need to use <code>fc()</code>, when would <code>uc()</code> ever fail?</p>\n\n<p><a href=\"http://perldoc.perl.org/functions/fc.html\" rel=\"nofollow\">Perl fc documentation</a></p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 2797, "user_id": 4123698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883acd9ee061b3a325ba22b1fee3daca?s=128&d=identicon&r=PG&f=1", "display_name": "harvey", "link": "https://stackoverflow.com/users/4123698/harvey"}, "is_accepted": true, "score": 2, "last_activity_date": 1434590423, "creation_date": 1434590423, "answer_id": 30905035, "question_id": 30901795, "link": "https://stackoverflow.com/questions/30901795/how-to-extract-some-text-from-an-html-doc-using-webquery/30905035#30905035", "title": "How to extract some text from an HTML doc using Web::Query", "body": "<p>The dot selector denotes class selections, which is not what you intend for the second div and h3. For these you want descendant. The correct syntax is;</p>\n\n<pre><code>my $subject = $parts-&gt;find( 'div.subject &gt; div &gt; h3' )-&gt;text;\n\n# Which outputs\n# subjectfinal $VAR1 = '@if version_after macro is illogical';\n</code></pre>\n\n<p>For more information on CSS selectors which is what Web::Query is loosely based off have a look at <a href=\"http://www.w3schools.com/cssref/css_selectors.asp\" rel=\"nofollow\">http://www.w3schools.com/cssref/css_selectors.asp</a></p>\n"}], "owner": {"reputation": 862, "user_id": 3586150, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1f0969599955a953e592034929ed7a23?s=128&d=identicon&r=PG", "display_name": "Neil H Watson", "link": "https://stackoverflow.com/users/3586150/neil-h-watson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 30905035, "answer_count": 1, "score": 1, "last_activity_date": 1434590423, "creation_date": 1434572967, "question_id": 30901795, "link": "https://stackoverflow.com/questions/30901795/how-to-extract-some-text-from-an-html-doc-using-webquery", "title": "How to extract some text from an HTML doc using Web::Query", "body": "<p>I'm trying to extract the subject (between the h3 tags) in the following example using Web::Query. Find 'h3' returns the author text, but I want the h3 in the subject class instead. I tried .subject.div.h3 but it returns undef. </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Web::Query; # libweb-query-perl\nuse Data::Dumper;\n\nmy $testhtml ='\n&lt;html&gt;&lt;head&gt;&lt;/head&gt;\n&lt;body&gt;\n   &lt;div class=\"author\"\n      &lt;div&gt;&lt;h3&gt;Neil Watson&lt;/h3&gt;&lt;/div&gt;\n   &lt;/div&gt;\n   &lt;div class=\"subject\"&gt;\n      &lt;div&gt;&lt;h3&gt;@if version_after macro is illogical&lt;/h3&gt;&lt;/div&gt;\n   &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n';\n\nmy $parts = Web::Query-&gt;new_from_html( $testhtml );\nmy $subject = $parts-&gt;find( 'div.subject.div.h3' )-&gt;text;\n\nprint \"subjectfinal \".Dumper( $subject );\n</code></pre>\n"}, {"tags": ["bash", "perl", "shell", "sed", "scripting"], "comments": [{"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 1, "creation_date": 1434569284, "post_id": 30900627, "comment_id": 49840230, "body": "Show your desired output for that sample input."}], "answers": [{"comments": [{"owner": {"reputation": 243, "user_id": 4999890, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c34942cc479898b04d21c6c917d64955?s=128&d=identicon&r=PG&f=1", "display_name": "MadisonCooper", "link": "https://stackoverflow.com/users/4999890/madisoncooper"}, "edited": false, "score": 0, "creation_date": 1434569775, "post_id": 30900708, "comment_id": 49840510, "body": "Perfect. Thanks. I get the -oE part, but would you mind explaining the rest?"}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "reply_to_user": {"reputation": 243, "user_id": 4999890, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c34942cc479898b04d21c6c917d64955?s=128&d=identicon&r=PG&f=1", "display_name": "MadisonCooper", "link": "https://stackoverflow.com/users/4999890/madisoncooper"}, "edited": false, "score": 0, "creation_date": 1434570732, "post_id": 30900708, "comment_id": 49841131, "body": "<code>[0-9.-]+$</code> is a regular expression which describes the last part of your line. <code>[...]</code> lists the allowed characters (0 to 9, a dot and a minus sign). The plus means that the previous character must occur at least once. Here is the previous character one character from the allowed character list within <code>[...]</code>. <code>$</code> marks the end of line."}], "tags": [], "owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "is_accepted": true, "score": 1, "last_activity_date": 1434569368, "creation_date": 1434569368, "answer_id": 30900708, "question_id": 30900627, "link": "https://stackoverflow.com/questions/30900627/deleting-upto-a-line/30900708#30900708", "title": "Deleting upto a line", "body": "<p>Try this:</p>\n\n<pre><code>grep -oE '[0-9.-]+$' file\n</code></pre>\n\n<p>or</p>\n\n<pre><code>awk '{print $NF}' file\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 243, "user_id": 4999890, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c34942cc479898b04d21c6c917d64955?s=128&d=identicon&r=PG&f=1", "display_name": "MadisonCooper", "link": "https://stackoverflow.com/users/4999890/madisoncooper"}, "edited": false, "score": 0, "creation_date": 1434569814, "post_id": 30900713, "comment_id": 49840532, "body": "Perl, right? I forgot that you could do (split)[-1]. Thanks."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 243, "user_id": 4999890, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c34942cc479898b04d21c6c917d64955?s=128&d=identicon&r=PG&f=1", "display_name": "MadisonCooper", "link": "https://stackoverflow.com/users/4999890/madisoncooper"}, "edited": false, "score": 0, "creation_date": 1434569868, "post_id": 30900713, "comment_id": 49840579, "body": "Yes, Perl. I&#39;m sorry I should have said"}, {"owner": {"reputation": 243, "user_id": 4999890, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c34942cc479898b04d21c6c917d64955?s=128&d=identicon&r=PG&f=1", "display_name": "MadisonCooper", "link": "https://stackoverflow.com/users/4999890/madisoncooper"}, "edited": false, "score": 0, "creation_date": 1434569922, "post_id": 30900713, "comment_id": 49840616, "body": "It&#39;s ok. Looked familiar. Wanted to check."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1434569889, "last_edit_date": 1434569889, "creation_date": 1434569377, "answer_id": 30900713, "question_id": 30900627, "link": "https://stackoverflow.com/questions/30900627/deleting-upto-a-line/30900713#30900713", "title": "Deleting upto a line", "body": "<p>If you mean you want just the last field on each line then you can write this in Perl</p>\n\n<pre><code>open my $fh, '&lt;', 'myfile' or die $!;\nmy @data;\npush @data, (split)[-1] while &lt;$fh&gt;;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 276, "user_id": 522702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c7ff5a95ad47a104376994d5d783161?s=128&d=identicon&r=PG", "display_name": "Todd Minehardt", "link": "https://stackoverflow.com/users/522702/todd-minehardt"}, "is_accepted": false, "score": 0, "last_activity_date": 1434569486, "creation_date": 1434569486, "answer_id": 30900748, "question_id": 30900627, "link": "https://stackoverflow.com/questions/30900627/deleting-upto-a-line/30900748#30900748", "title": "Deleting upto a line", "body": "<p>Using awk and specifying field 8 (assuming the format doesn't change), here's what I get:</p>\n\n<pre><code>$ cat testfile \nfoo cat dog =      -48.34277635  foo(horse-&gt;0) =      -60.34277635\n$ awk '{print $8}' &lt; testfile\n-60.34277635\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 243, "user_id": 4999890, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c34942cc479898b04d21c6c917d64955?s=128&d=identicon&r=PG&f=1", "display_name": "MadisonCooper", "link": "https://stackoverflow.com/users/4999890/madisoncooper"}, "edited": false, "score": 0, "creation_date": 1434569891, "post_id": 30900768, "comment_id": 49840596, "body": "Why does that work? Does the second # represent the second instance of a number?"}, {"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "reply_to_user": {"reputation": 243, "user_id": 4999890, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c34942cc479898b04d21c6c917d64955?s=128&d=identicon&r=PG&f=1", "display_name": "MadisonCooper", "link": "https://stackoverflow.com/users/4999890/madisoncooper"}, "edited": false, "score": 0, "creation_date": 1434569992, "post_id": 30900768, "comment_id": 49840654, "body": "@jcklasseter: <code>##</code> means <i>remove the largest possible matching string from the beginning of the variable&#39;s contents</i> and <code>* </code> means <i>match anything up until space</i>. <a href=\"http://mywiki.wooledge.org/BashFAQ/100\" rel=\"nofollow noreferrer\">Source</a>."}], "tags": [], "owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "is_accepted": false, "score": 0, "last_activity_date": 1434569583, "creation_date": 1434569583, "answer_id": 30900768, "question_id": 30900627, "link": "https://stackoverflow.com/questions/30900627/deleting-upto-a-line/30900768#30900768", "title": "Deleting upto a line", "body": "<p>BASH builtin way:</p>\n\n<pre><code>#!/bin/bash\n\nline='foo cat dog =      -48.34277635  foo(horse-&gt;0) =      -60.34277635'\necho \"${line##* }\"\n</code></pre>\n\n<p>outputs:</p>\n\n<pre><code>-60.34277635\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 627, "user_id": 1804511, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/f4f30c54d08ae8991e7f16f8943ba086?s=128&d=identicon&r=PG", "display_name": "Dheeraj R", "link": "https://stackoverflow.com/users/1804511/dheeraj-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1434572317, "creation_date": 1434572317, "answer_id": 30901601, "question_id": 30900627, "link": "https://stackoverflow.com/questions/30900627/deleting-upto-a-line/30901601#30901601", "title": "Deleting upto a line", "body": "<p>awk -F 'delimiter' '{print $NF}' - if you need the last column</p>\n\n<p>awk -F 'delimiter' '{print $index}' - if you need index with a specific column. Please not here the index starts with 1 </p>\n"}], "owner": {"reputation": 243, "user_id": 4999890, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c34942cc479898b04d21c6c917d64955?s=128&d=identicon&r=PG&f=1", "display_name": "MadisonCooper", "link": "https://stackoverflow.com/users/4999890/madisoncooper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 30900708, "answer_count": 5, "score": -2, "last_activity_date": 1434572317, "creation_date": 1434569109, "last_edit_date": 1434570750, "question_id": 30900627, "link": "https://stackoverflow.com/questions/30900627/deleting-upto-a-line", "title": "Deleting upto a line", "body": "<p>I have a line that looks like: </p>\n\n<pre><code>  foo cat dog =      -48.34277635  foo(horse-&gt;0) =      -60.34277635  \n</code></pre>\n\n<p>and I only want the last set of numbers:</p>\n\n<pre><code>-60.34277635\n</code></pre>\n\n<p>The line is formatted with that exact spacing. I've looked everywhere for a simpler solution, but I can't find anything without chopping the file piece by piece by piece until I get it down to what I want. The only ways I have to do it is horribly inefficient and was wondering if there were any other ways of doing it. Normally, I would use sed to grab a specific character/word, and delete from there back. With as many times as words are repeated in my string, I can't easily do that. </p>\n\n<p>The length of the numbers can change too, but only the trailing decimals. </p>\n\n<p>If at all possible, help in Perl, or Bash/Shell would be best.</p>\n"}, {"tags": ["arrays", "perl"], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 3, "last_activity_date": 1434558891, "last_edit_date": 1434558891, "creation_date": 1434558395, "answer_id": 30897238, "question_id": 30897106, "link": "https://stackoverflow.com/questions/30897106/perl-an-array-content/30897238#30897238", "title": "Perl - an array content", "body": "<p>You can use grep to go through the array one at a time and see if any match:</p>\n\n<pre><code>if ( grep $file ~= /\\Q.$_\\z/, @array ) {\n</code></pre>\n\n<p>Or join the array elements into a single regex:</p>\n\n<pre><code>my @array = qw(avi mp4 mov);\nmy $selected_extensions = qr/^\\.(?:@{[ join '|', map quotemeta, sort @array ]})\\z/;\nmy $dir = \"E:\\Downloads\";\nopendir (my $dh, $dir);\nwhile (my $file = readdir($dh))\n{\n    if($file ~= $selected_extensions) \n    instructions...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1434558483, "post_id": 30897253, "comment_id": 49833559, "body": "I think you need an end anchor on your regex"}], "tags": [], "owner": {"reputation": 809, "user_id": 1151718, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/eb6505c0711f36325e0d1d68d73b4f82?s=128&d=identicon&r=PG", "display_name": "capfan", "link": "https://stackoverflow.com/users/1151718/capfan"}, "is_accepted": false, "score": 4, "last_activity_date": 1434559277, "last_edit_date": 1434559277, "creation_date": 1434558436, "answer_id": 30897253, "question_id": 30897106, "link": "https://stackoverflow.com/questions/30897106/perl-an-array-content/30897253#30897253", "title": "Perl - an array content", "body": "<p>There is a solution in perlfaq4, section \"How can I tell whether a certain element is contained in a list or array?\" here: <a href=\"http://perldoc.perl.org/perlfaq4.html#How-can-I-tell-whether-a-certain-element-is-contained-in-a-list-or-array\" rel=\"nofollow\">http://perldoc.perl.org/perlfaq4.html#How-can-I-tell-whether-a-certain-element-is-contained-in-a-list-or-array</a>?</p>\n\n<p>If you are using Perl 5.10 or newer, the solution is:</p>\n\n<pre><code>if( $item ~~ @array ) {\n    say \"The array contains $item\"\n}\n</code></pre>\n\n<p>Please have a look at the link if you have an older Perl. There is other possibilities as well.</p>\n\n<p>Regarding you task: if you just want to search a folder for files having a certain extension, I can recommend using <a href=\"https://metacpan.org/pod/File::Find::Rule\" rel=\"nofollow\">File::Find::Rule</a>:</p>\n\n<pre><code># find all the .pm files in @INC\nmy @files = File::Find::Rule-&gt;file()\n                        -&gt;name( qr/\\.(?:avi|mp4|mov)$/ )\n                        -&gt;in( $dir );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1434569595, "creation_date": 1434569595, "answer_id": 30900771, "question_id": 30897106, "link": "https://stackoverflow.com/questions/30897106/perl-an-array-content/30900771#30900771", "title": "Perl - an array content", "body": "<p>In your case you can write</p>\n\n<pre><code>while ( my $file = glob 'E:\\Downloads\\*.{avi,mp4,mov}' ) {\n    # Process $file\n}\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 4855154, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/937602396290797/picture?type=large", "display_name": "Micha\u0142 Habigier", "link": "https://stackoverflow.com/users/4855154/micha%c5%82-habigier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 30897238, "answer_count": 3, "score": 0, "last_activity_date": 1434569595, "creation_date": 1434557975, "last_edit_date": 1434558133, "question_id": 30897106, "link": "https://stackoverflow.com/questions/30897106/perl-an-array-content", "title": "Perl - an array content", "body": "<p>Can you explain me how to check if an element belongs to array? My script needs to know whether the element has wanted extension to make a shortcut and copy it to another directory.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>my @array = qw(avi mp4 mov);\nmy $dir = \"E:\\Downloads\";\nopendir (my $dh, $dir);\nwhile (my $file = readdir($dh))\n{\n    if($file ~= ) \n    instructions...\n}\n</code></pre>\n"}, {"tags": ["linux", "perl", "raspberry-pi", "port"], "answers": [{"tags": [], "owner": {"reputation": 2344, "user_id": 1051634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9709b2e69ab3bb3bf786acb6323366?s=128&d=identicon&r=PG", "display_name": "kartben", "link": "https://stackoverflow.com/users/1051634/kartben"}, "is_accepted": true, "score": 2, "last_activity_date": 1436247819, "creation_date": 1436247819, "answer_id": 31260625, "question_id": 30896600, "link": "https://stackoverflow.com/questions/30896600/fhem-interface-not-started/31260625#31260625", "title": "fhem interface not started", "body": "<p>If you have installed Kura, it is acting as a firewall so you need to use the Kura Web UI to open tcp port 8083, which is filtered by default.</p>\n\n<p><img src=\"https://i.stack.imgur.com/J6G2f.png\" alt=\"Kura Firewall\"></p>\n"}], "owner": {"reputation": 1823, "user_id": 4293609, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/23407d775ca63f213179c504ffebd0f9?s=128&d=identicon&r=PG&f=1", "display_name": "sabrina2020", "link": "https://stackoverflow.com/users/4293609/sabrina2020"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 1, "accepted_answer_id": 31260625, "answer_count": 1, "score": 0, "last_activity_date": 1436247819, "creation_date": 1434556543, "last_edit_date": 1434556791, "question_id": 30896600, "link": "https://stackoverflow.com/questions/30896600/fhem-interface-not-started", "title": "fhem interface not started", "body": "<p>I followed <a href=\"https://www.enocean.com/fileadmin/redaktion/pdf/white_paper/wp_Raspberry_talks_EnOcean.pdf\" rel=\"nofollow\">this</a> tutorial to install fhem on my <strong>Raspberry Pi</strong>:</p>\n\n<p>But the fhem interface is not started in my web navigator when I put:</p>\n\n<pre><code>http://192.168.1.5:8083/fhem\n</code></pre>\n\n<p>\"192.168.1.5\" is my raspberry pi address</p>\n\n<p>I checked processes in Linux, perl is listening on the port 8083:</p>\n\n<pre><code>tcp        0      0 0.0.0.0:8083            0.0.0.0:*               LISTEN      2207/perl\n</code></pre>\n\n<p>PS: KURA eclipse project is installed on my <strong>Raspberry Pi</strong>.</p>\n\n<p>What is wrong? what I have missed?</p>\n\n<p>Thanks a lot for your help!</p>\n"}, {"tags": ["arrays", "regex", "perl", "hash", "perl-data-structures"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 5019187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/834ece1d11606fb67c4575cc1ffdedf5?s=128&d=identicon&r=PG&f=1", "display_name": "chetangb", "link": "https://stackoverflow.com/users/5019187/chetangb"}, "edited": false, "score": 1, "creation_date": 1434567723, "post_id": 30899969, "comment_id": 49839250, "body": "&#39;&gt;&#39; the reason you are getting only 1 user output.   <a href=\"http://perldoc.perl.org/perlsyn.html#Loop-Control\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlsyn.html#Loop-Control</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4839151"}, "edited": false, "score": 0, "creation_date": 1434567961, "post_id": 30899969, "comment_id": 49839406, "body": "Thank you for you answer, but still, when <code>@Usernames</code> passes to foreach loop it generates  <code>sh: 1: Syntax error: &quot;(&quot; unexpected</code> because <code>@Usernames</code> consists of <code>HASH(0x21455d0)HASH(0x21612c0)</code> (for some goddamn reason)."}, {"owner": {"reputation": 3130, "user_id": 2064808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d819efdb2d3f9983a1437f3c1b9f710?s=128&d=identicon&r=PG", "display_name": "David Knipe", "link": "https://stackoverflow.com/users/2064808/david-knipe"}, "edited": false, "score": 1, "creation_date": 1434571113, "post_id": 30899969, "comment_id": 49841394, "body": "In the <code>system</code> call, <code>$_</code> evaluates to a reference to a hash. Then it converts it into a string; and when Perl converts a reference into a string you get things like <code>HASH(0x21455d0)</code>. I don&#39;t know anything about <code>chage</code>, but I suspect you want <code>$_</code> to be the <code>$1</code> that appeared in the first loop. In that case, change <code>push (@Usernames, \\%pwdsettings);</code> to <code>push (@Usernames, $1);</code>."}], "tags": [], "owner": {"reputation": 59, "user_id": 5019187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/834ece1d11606fb67c4575cc1ffdedf5?s=128&d=identicon&r=PG&f=1", "display_name": "chetangb", "link": "https://stackoverflow.com/users/5019187/chetangb"}, "is_accepted": true, "score": 0, "last_activity_date": 1434572871, "last_edit_date": 1434572871, "creation_date": 1434566999, "answer_id": 30899969, "question_id": 30896013, "link": "https://stackoverflow.com/questions/30896013/perl-multiply-loops-1-hash-and-regex/30899969#30899969", "title": "Perl: Multiply loops, 1 hash and regex", "body": "<p>you need to append the file when you output meaning use \">>\" instead of \">\" which will overwrite the file.\n<code>system(\"chage -l $_ &gt;&gt; $pwdsett_dump\")</code>  as you are running it in loop you are overwriting each time the loop executes.\nUse:</p>\n\n<pre><code>foreach (@Usernames) {\n    system(\"chage -l $_ &gt;&gt; $pwdsett_dump\")\n}\n########sample script\n#!/usr/bin/perl\n\nuse strict;\nuse warnings; \n\nmy $usernames_dump = \"/etc/passwd\";\nopen (my $fh2, \"&lt;\", $usernames_dump) or die \"Could not open file '$usernames_dump': $!\";\n\nmy @pwdsettings;\nmy $i =0;\nmy @pwdsett_dump;\nwhile (&lt;$fh2&gt;) {\n\nif ($_ =~ /(\\w+)[:]x[:]1[0-9]{3}/) {\nmy @user = split(/:/, $_);\n $pwdsettings[$i] = $user[0];\n $pwdsett_dump[$i] = `chage -l $user[0]|grep Last`;\n $pwdsett_dump[$i] =~ s/Last.*://;\n $pwdsett_dump[$i] =~ s/,//;\n my @m = split(/ /,$pwdsett_dump[$i]);\n print \"$user[0]\\t Date: $m[2] Month: $m[1] Year: $m[3]\\n\";\n $i++;\n   }\n }\n Output: testuser Date: 12 Month: May Year: 2015\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4839151"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 30899969, "answer_count": 1, "score": 1, "last_activity_date": 1434572871, "creation_date": 1434555045, "last_edit_date": 1434555451, "question_id": 30896013, "link": "https://stackoverflow.com/questions/30896013/perl-multiply-loops-1-hash-and-regex", "title": "Perl: Multiply loops, 1 hash and regex", "body": "<p>I got stuck with logic behind loops (while &amp; foreach) and AoH. I have basic knowledge about loops and arrays of hashes, but I can't quite understand  how to combine them into 1 single and simple solution. My task is to check regular user's password age, if it is older than <strong>n</strong>-days (last part is OK for me, I know how to solve it, using GetOptions etc,.). </p>\n\n<p>To accomplish that I figured out a solution:   </p>\n\n<p><strong>1</strong> Load file <strong>/etc/passwd</strong> into script, preform regex search to find out regular users. Regular users in Linux like systems have IDs from 1000 and above, so I use this regex to find out those: </p>\n\n<p><code>/(\\w+)[:]x[:]1[0-9]{3}/</code></p>\n\n<p><strong>2</strong> Load results of regex serch in to array:</p>\n\n<pre><code>my (@Usernames, %pwdsettings);\nwhile (my $pwdsettings = &lt;$fh2&gt;) {\n    if ($pwdsettings =~ /(\\w+)[:]x[:]1[0-9]{3}/) {\n    $pwdsettings{\"Username\"} = $1;\n    push (@Usernames, \\%pwdsettings);\n    }\n}\n</code></pre>\n\n<p><strong>3</strong> Preform <strong>chage</strong> check for every entry in array:</p>\n\n<pre><code>my $pwdsett_dump = \"tmp/pwdsett-dump.txt\";\n...\nforeach (@Usernames) {\n    system(\"chage -l $_ &gt; $pwdsett_dump\")\n}\n</code></pre>\n\n<p><strong>4</strong> Open <code>$pwdsett_dump</code> and then preform second regex search to get date of last password change. After, load results into existing hash inside array (AoH):</p>\n\n<pre><code>open (my $fh3, \"&lt;\", $pwdsett_dump) or die \"Could not open file '$pwdsett_dump': $!\";\nwhile (my $array = &lt;$fh3&gt;) {\n    if ($array =~ /^Last\\s+password\\s+change\\s+:\\s(\\w{3})\\s+(\\d{2}),\\s+(\\d{4})/) {\n        $pwdsettings{\"Month\"} = $1;\n        $pwdsettings{\"Day\"} = $2;\n        $pwdsettings{\"Year\"} = $3;\n    }\n}\n</code></pre>\n\n<p>But, somewhere it went terribly wrong. My script loads only 1 user in to AoH, second user is never loaded and I get <code>$VAR1-&gt;[0]</code>. </p>\n\n<p>What I want is to understand how AoH and loops are created in right way. </p>\n\n<p>Full script:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy $pwdsett_dump = \"tmp/pwdsett-dump.txt\";\nmy $usernames_dump = \"tmp/usernames-dump.txt\";\nsystem(\"cat /etc/passwd &gt; $usernames_dump\");\nopen (my $fh2, \"&lt;\", $usernames_dump) or die \"Could not open file '$usernames_dump': $!\";\n\nmy (@Usernames, %pwdsettings);\nwhile (my $pwdsettings = &lt;$fh2&gt;) {\n    if ($pwdsettings =~ /(\\w+)[:]x[:]1[0-9]{3}/) {\n    $pwdsettings{\"Username\"} = $1;\n    push (@Usernames, \\%pwdsettings);\n    }\n}\n\nforeach (@Usernames) {\n    system(\"chage -l $_ &gt; $pwdsett_dump\")\n}\nopen (my $fh3, \"&lt;\", $pwdsett_dump) or die \"Could not open file '$pwdsett_dump': $!\";\nwhile (my $array = &lt;$fh3&gt;) {\n    if ($array =~ /^Last\\s+password\\s+change\\s+:\\s(\\w{3})\\s+(\\d{2}),\\s+(\\d{4})/) {\n    $pwdsettings{\"Month\"} = $1;\n    $pwdsettings{\"Day\"} = $2;\n    $pwdsettings{\"Year\"} = $3;\n    }\n}\n\nprint Dumper \\@Usernames;\n</code></pre>\n"}, {"tags": ["xml", "perl", "xml-parsing"], "comments": [{"owner": {"reputation": 1248, "user_id": 1848302, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/c8d1cafa57d9dd3863ed21193de612bb?s=128&d=identicon&r=PG", "display_name": "Alex Lynham", "link": "https://stackoverflow.com/users/1848302/alex-lynham"}, "edited": false, "score": 0, "creation_date": 1434545708, "post_id": 30892180, "comment_id": 49823620, "body": "Could you share the perl code you&#39;ve tried so far?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434547459, "post_id": 30892180, "comment_id": 49825103, "body": "That is not well-formed XML. Please fix it"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5019502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf17b52bc72418061f4b4e1c25c8b0b1?s=128&d=identicon&r=PG&f=1", "display_name": "Ruvend yadav", "link": "https://stackoverflow.com/users/5019502/ruvend-yadav"}, "edited": false, "score": 0, "creation_date": 1434608458, "post_id": 30892411, "comment_id": 49853550, "body": "Thank you Sobrique. what you have done is working fine but I want these changes should reflect in the same file  - neo-datasource instead of printing xml contents in output console."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 1, "user_id": 5019502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf17b52bc72418061f4b4e1c25c8b0b1?s=128&d=identicon&r=PG&f=1", "display_name": "Ruvend yadav", "link": "https://stackoverflow.com/users/5019502/ruvend-yadav"}, "edited": false, "score": 0, "creation_date": 1434611492, "post_id": 30892411, "comment_id": 49855233, "body": "I have given you a tool and an approach that will fix your problem.  If you are having difficulties with how to open, read and write files, then I would suggest that is a separate question."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 1, "user_id": 5019502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf17b52bc72418061f4b4e1c25c8b0b1?s=128&d=identicon&r=PG&f=1", "display_name": "Ruvend yadav", "link": "https://stackoverflow.com/users/5019502/ruvend-yadav"}, "edited": false, "score": 0, "creation_date": 1434614766, "post_id": 30892411, "comment_id": 49857216, "body": "I am not prepared to do that. Stack Overflow is not a code writing service."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1434546406, "last_edit_date": 1434546406, "creation_date": 1434546085, "answer_id": 30892411, "question_id": 30892180, "link": "https://stackoverflow.com/questions/30892180/how-to-extract-particular-value-from-xml-file-and-modify-it-using-perl/30892411#30892411", "title": "How to extract particular value from xml file and modify it using perl?", "body": "<p>It's easy enough using an XML Parser. Like <a href=\"http://search.cpan.org/perldoc?XML::Twig\" rel=\"nofollow\"><code>XML::Twig</code></a>. </p>\n\n<p>For example:</p>\n\n<pre><code>#!/usr/bin/perl;\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nXML::Twig-&gt;new(\n    'pretty_print'  =&gt; 'indented_a',\n    'twig_handlers' =&gt; {\n        'var[@name=\"CLASS\"]/string' =&gt; sub { $_-&gt;set_text('NoDatabase') }\n    }\n)-&gt;parse( \\*DATA )-&gt;print;\n\n__DATA__\n&lt;?xml version=\"1.0\"?&gt;\n&lt;wddxPacket version=\"1.0\"&gt;\n   &lt;header/&gt;\n     &lt;data&gt;\n        &lt;array length=\"2\"&gt;\n          &lt;struct type=\"coldfusion.server.ConfigMap\"&gt;\n             &lt;var name=\"CFASTSTJ\"&gt;\n                &lt;struct type=\"coldfusion.server.ConfigMap\"&gt;\n                   &lt;var name=\"alter\"&gt;\n                      &lt;boolean value=\"true\"/&gt;\n                    &lt;/var&gt;\n                   &lt;var name=\"CLASS\"&gt;\n                       &lt;string&gt;macromedia.jdbc.MacromediaDriver&lt;/string&gt;\n                    &lt;/var&gt;\n                 &lt;/struct&gt;\n              &lt;/var&gt;\n           &lt;/struct&gt;\n         &lt;/array&gt;\n       &lt;/data&gt;  \n&lt;/wddxPacket&gt;   \n</code></pre>\n\n<p>This uses an xpath expression <code>'var[@name=\"CLASS\"]/string'</code> - which means any element <code>var</code> with a <code>name</code> attribute equal to <code>CLASS</code> with a subelement <code>string</code>. It will apply this to <em>any</em> instance that matches this. You may need a more specific xpath for your data. (e.g. <code>data/array/struct[@type=\"coldfusion.server.ConfigMap\"]/var[@name=\"CFASTSTJ\"]/struct[@type=\"coldfusion.server.ConfigMap\"]/var[@name=\"CLASS\"]/string</code> - that's probably overkill though :))</p>\n\n<p>Note - I've fixed your XML - I'm assuming that's a typographic error, rather than broken source XML. If your source XML is broken, then you have bigger problems. </p>\n\n<p>This outputs:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;wddxPacket version=\"1.0\"&gt;\n  &lt;header/&gt;\n  &lt;data&gt;\n    &lt;array length=\"2\"&gt;\n      &lt;struct type=\"coldfusion.server.ConfigMap\"&gt;\n        &lt;var name=\"CFASTSTJ\"&gt;\n          &lt;struct type=\"coldfusion.server.ConfigMap\"&gt;\n            &lt;var name=\"alter\"&gt;\n              &lt;boolean value=\"true\" /&gt;\n            &lt;/var&gt;\n            &lt;var name=\"CLASS\"&gt;\n              &lt;string&gt;NoDatabase&lt;/string&gt;\n            &lt;/var&gt;\n          &lt;/struct&gt;\n        &lt;/var&gt;\n      &lt;/struct&gt;\n    &lt;/array&gt;\n  &lt;/data&gt;\n&lt;/wddxPacket&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1434614850, "post_id": 30893035, "comment_id": 49857271, "body": "That is a different question to the one you asked. Asking it separately would be the appropriate course of action."}, {"owner": {"reputation": 1, "user_id": 5019502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf17b52bc72418061f4b4e1c25c8b0b1?s=128&d=identicon&r=PG&f=1", "display_name": "Ruvend yadav", "link": "https://stackoverflow.com/users/5019502/ruvend-yadav"}, "edited": false, "score": 0, "creation_date": 1434622844, "post_id": 30893035, "comment_id": 49862584, "body": "I wish these changes should reflect in the same xml file - neo-datasource instead of printing xml contents in output console. Could you please show me they way to do it.?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1434628801, "post_id": 30893035, "comment_id": 49866628, "body": "Related: <a href=\"http://stackoverflow.com/questions/30912884/how-to-modify-the-xml-value-that-should-reflect-in-the-same-xml-file-using-perl\" title=\"how to modify the xml value that should reflect in the same xml file using perl\">stackoverflow.com/questions/30912884/&hellip;</a>"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1434547621, "creation_date": 1434547621, "answer_id": 30893035, "question_id": 30892180, "link": "https://stackoverflow.com/questions/30892180/how-to-extract-particular-value-from-xml-file-and-modify-it-using-perl/30893035#30893035", "title": "How to extract particular value from xml file and modify it using perl?", "body": "<p>This program uses the <a href=\"https://metacpan.org/pod/XML::Twig\" rel=\"nofollow\"><code>XML::Twig</code></a> module to process your data</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $twig = XML::Twig-&gt;new( keep_spaces =&gt; 1 );\n$twig-&gt;parsefile('neo-datasource.xml');\n\nmy ($class_string) = $twig-&gt;findnodes('//var[@name=\"CLASS\"]/string');\n$class_string-&gt;set_text('NoDatabase');\n\nprint $twig-&gt;toString;\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;wddxPacket version=\"1.0\"&gt;\n  &lt;header/&gt;\n  &lt;data&gt;\n    &lt;array length=\"2\"&gt;\n      &lt;struct type=\"coldfusion.server.ConfigMap\"&gt;\n        &lt;var name=\"CFASTSTJ\"&gt;\n          &lt;struct type=\"coldfusion.server.ConfigMap\"&gt;\n            &lt;var name=\"alter\"&gt;\n              &lt;boolean value=\"true\"/&gt;\n            &lt;/var&gt;\n            &lt;var name=\"CLASS\"&gt;\n              &lt;string&gt;NoDatabase&lt;/string&gt;\n            &lt;/var&gt;\n          &lt;/struct&gt;\n        &lt;/var&gt;\n      &lt;/struct&gt;\n    &lt;/array&gt;\n  &lt;/data&gt;\n&lt;/wddxPacket&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5019502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf17b52bc72418061f4b4e1c25c8b0b1?s=128&d=identicon&r=PG&f=1", "display_name": "Ruvend yadav", "link": "https://stackoverflow.com/users/5019502/ruvend-yadav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 458, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1434547621, "creation_date": 1434545512, "last_edit_date": 1434546996, "question_id": 30892180, "link": "https://stackoverflow.com/questions/30892180/how-to-extract-particular-value-from-xml-file-and-modify-it-using-perl", "title": "How to extract particular value from xml file and modify it using perl?", "body": "<p>Here is the xml code where I want to extract 'string' value macromedia.jdbc.MacromediaDriver and modify it as NoDatabase using perl.</p>\n\n<p>File name- neo-datasource.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n-&lt;wddxPacket version=\"1.0\"&gt;\n   &lt;header/&gt;\n     -&lt;data&gt;\n        -&lt;array length=\"2\"&gt;\n          -&lt;struct type=\"coldfusion.server.ConfigMap\"&gt;\n             -&lt;var name=\"CFASTSTJ\"&gt;\n                -&lt;struct type=\"coldfusion.server.ConfigMap\"&gt;\n                   -&lt;var name=\"alter\"&gt;\n                      &lt;boolean value=\"true\"/&gt;\n                    &lt;/var&gt;\n                   -&lt;var name=\"CLASS\"&gt;\n                       &lt;string&gt;macromedia.jdbc.MacromediaDriver&lt;/string&gt;\n                    &lt;/var&gt;\n                 &lt;/struct&gt;\n           &lt;/struct&gt;\n         &lt;/array&gt;\n       &lt;/data&gt;      \n&lt;/wddxpacket&gt;   \n</code></pre>\n\n<p>Please anyone can share your ideas or perl script.</p>\n"}, {"tags": ["php", "perl", "parsing", "rrdtool"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1434546803, "post_id": 30891766, "comment_id": 49824542, "body": "You would be better off not reading it from the <code>rrd</code> and instead hooking the upstream <code>ping</code> operation instead."}, {"owner": {"reputation": 11, "user_id": 5019613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3acfad6c89f79d2e022213e4bfa96e08?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Paduch", "link": "https://stackoverflow.com/users/5019613/micha%c5%82-paduch"}, "edited": false, "score": 0, "creation_date": 1434546966, "post_id": 30891766, "comment_id": 49824659, "body": "I&#39;ve try already: rrdtool fetch /var/lib/smokeping/Host/Swadzim.rrd AVERAGE&lt;br /&gt; 1434546000: -nan 0.0000000000e+00 1.1677527778e-02 9.5520694444e-03 1.0010958333e-02 1.0222916667e-02 1.0669152778e-02 1.1147625000e-02 1.1677527778e-02 1.2782055556e-02 1.3641402778e-02 1.5893805556e-02 2.0290416667e-02 1434546720: -nan 0.0000000000e+00 1.0685083333e-02 9.2544444444e-03 9.5931388889e-03 9.9897500000e-03 1.0258138889e-02 1.0441527778e-02 1.0685083333e-02 1.1117277778e-02 1.1553638889e-02 1.2946375000e-02 1.4254041667e-02"}, {"owner": {"reputation": 862, "user_id": 3586150, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1f0969599955a953e592034929ed7a23?s=128&d=identicon&r=PG", "display_name": "Neil H Watson", "link": "https://stackoverflow.com/users/3586150/neil-h-watson"}, "edited": false, "score": 0, "creation_date": 1434547902, "post_id": 30891766, "comment_id": 49825482, "body": "You could start with some RRD modules in CPAN: <a href=\"https://metacpan.org/pod/distribution/rrdpoller/rrdpoller\" rel=\"nofollow noreferrer\">metacpan.org/pod/distribution/rrdpoller/rrdpoller</a>"}, {"owner": {"reputation": 3169, "user_id": 4114124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k73hh.jpg?s=128&g=1", "display_name": "Politank-Z", "link": "https://stackoverflow.com/users/4114124/politank-z"}, "edited": false, "score": 0, "creation_date": 1434550685, "post_id": 30891766, "comment_id": 49827735, "body": "Please don&#39;t post code in comments. I&#39;ve pasted your comment into your question."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1434555054, "creation_date": 1434555054, "answer_id": 30896021, "question_id": 30891766, "link": "https://stackoverflow.com/questions/30891766/smokeping-rrdtool-fetch/30896021#30896021", "title": "Smokeping rrdtool fetch", "body": "<p>I think you've a mistaken impression of what <code>rrdtool</code> does. It's a very nice tool for collecting time series data, collating it and archiving it. But inevitably - when you <em>do</em> archive the data, you lose resolution because you're aggregating your results.</p>\n\n<p>Now, what smokeping does is - ping a server, keeps track of latency and packet loss. </p>\n\n<p>That's all to the good, but if you want to monitor and alarm based on this - what you really need is to do the ping test yourself, rather than reading out of archive logs. At best - you'll be getting out of date information. </p>\n\n<p>You can probably extract the data you need from the rrd. I can't do this for you, because I don't have enough information. What you need to do is:</p>\n\n<ul>\n<li>Figure out which of the data sources (DS) in your RRD you're interested in. </li>\n<li>Figure out which of the Round-Robin-Archives (RRAs) you want to look at. </li>\n<li>Retrieve the <em>recent</em> data for that sample.</li>\n<li>Alert based on it. </li>\n</ul>\n\n<p><code>rrdtool fetch</code> which you refer to - is a step in the right direction. You'll probably need something like:</p>\n\n<pre><code>rrdtool fetch filename.rrd AVERAGE -s -5m \n</code></pre>\n\n<p>But then - from the values you get - you'll need to figure out which ones are relevant. (You might want to look at the <code>LAST</code> consolidation function as well as that may be relevant). </p>\n\n<pre><code>rrdtool info filename.rrd\n</code></pre>\n\n<p>can help you figure this out - it will list the data sources you're logging (in order).</p>\n\n<p>But really - it's just much easier to catch the results of the ping in the first place, rather than ping something, process the data, archive it, consolidate it, and extract a time averaged consolidated result from the archive. </p>\n"}, {"tags": [], "owner": {"reputation": 126, "user_id": 6371593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ae7383b08bf286bf440f86b6a5e5458?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/6371593/kevin"}, "is_accepted": false, "score": 0, "last_activity_date": 1569348592, "last_edit_date": 1569348592, "creation_date": 1569346121, "answer_id": 58085459, "question_id": 30891766, "link": "https://stackoverflow.com/questions/30891766/smokeping-rrdtool-fetch/58085459#58085459", "title": "Smokeping rrdtool fetch", "body": "<p>Why not use the alerts built into smokeping? They are pretty flexible and can do what you need</p>\n\n<p><a href=\"https://oss.oetiker.ch/smokeping/doc/smokeping_config.en.html\" rel=\"nofollow noreferrer\">https://oss.oetiker.ch/smokeping/doc/smokeping_config.en.html</a> and search for <strong>* Alerts *</strong></p>\n\n<p>For example</p>\n\n<pre><code>*** Alerts ***\nto = nettoolsalerts@xxx.com\nfrom = Smokeping@xxx.com\n\n+bigloss\ntype = loss\n# in percent\npattern = ==0%,==0%,==0%,==0%,&gt;0%,&gt;0%,&gt;0%\nedgetrigger = yes\ncomment = suddenly there is packet loss\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5019613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3acfad6c89f79d2e022213e4bfa96e08?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Paduch", "link": "https://stackoverflow.com/users/5019613/micha%c5%82-paduch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1048, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1569348592, "creation_date": 1434544428, "last_edit_date": 1434550685, "question_id": 30891766, "link": "https://stackoverflow.com/questions/30891766/smokeping-rrdtool-fetch", "title": "Smokeping rrdtool fetch", "body": "<p>How to fetch data from smokeping rrd file and make output with txt file when host go down or up in perl or php?</p>\n\n<p>I send 10 ICMP packets every 60sec.<br />\nI want to fetch data from rrd and parse it to have such output:<br /></p>\n\n<blockquote>\n  <p>17 Jun 2015 12:03:00 - host is down<br /> 17 Jun 2015 12:05:00 - host\n  is up<br /></p>\n</blockquote>\n\n<p>E.g. host down when no data received or packet loss > 50%</p>\n\n<p>I've already tried:</p>\n\n<pre><code>rrdtool fetch /var/lib/smokeping/Host/Swadzim.rrd AVERAGE\n 1434546000: -nan 0.0000000000e+00 1.1677527778e-02 9.5520694444e-03 1.0010958333e-02 1.0222916667e-02 1.0669152778e-02 1.1147625000e-02 1.1677527778e-02 1.2782055556e-02 1.3641402778e-02 1.5893805556e-02 2.0290416667e-02 1434546720: -nan 0.0000000000e+00 1.0685083333e-02 9.2544444444e-03 9.5931388889e-03 9.9897500000e-03 1.0258138889e-02 1.0441527778e-02 1.0685083333e-02 1.1117277778e-02 1.1553638889e-02 1.2946375000e-02 1.4254041667e-02\n</code></pre>\n"}, {"tags": ["performance", "perl"], "comments": [{"owner": {"reputation": 1222, "user_id": 1274254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bae169b187d3476d3ce665a0317fad62?s=128&d=identicon&r=PG", "display_name": "Thruston", "link": "https://stackoverflow.com/users/1274254/thruston"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434545723, "post_id": 30891745, "comment_id": 49823631, "body": "@Borodin I&#39;ll update the question"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434545979, "post_id": 30891745, "comment_id": 49823830, "body": "Sorry, my arithmetic was wrong - that&#39;s 60ms!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1434546184, "post_id": 30891745, "comment_id": 49823999, "body": "Do you really need this to run faster than 100ms?"}, {"owner": {"reputation": 758, "user_id": 4086509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmXxF.png?s=128&g=1", "display_name": "Sue D. Nymme", "link": "https://stackoverflow.com/users/4086509/sue-d-nymme"}, "edited": false, "score": 1, "creation_date": 1434546885, "post_id": 30891745, "comment_id": 49824602, "body": "For what it&#39;s worth, I replicated your results (perl 5.16, Windows 7). <code>my @values = &lt;DATA&gt;;</code> averaged 192ms; the while loop averaged 119ms. Interestingly, <code>my $values = [&lt;DATA&gt;];</code> took even longer: 240ms. I thought it might be faster (no need to copy the array), but no."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1434545643, "creation_date": 1434545643, "answer_id": 30892235, "question_id": 30891745, "link": "https://stackoverflow.com/questions/30891745/reading-from-data-file-handle/30892235#30892235", "title": "Reading from DATA file handle", "body": "<p><code>DATA</code> is a special file handle that's embedded into your script. It isn't much different from reading in data from a file normally. I would suggest though that using inlined data for 300k lines is probably not an ideal way of approaching it. </p>\n\n<p>Have you had a look at <code>Storable</code>? You might find that you can <code>store</code> and <code>retrieve</code> your data structure - you'll probably need to keep your file for initial loading. </p>\n\n<p>Alternatively - do you actually need all your reference data held in memory? It's fast to do direct memory access, but if you're not doing sequential key processing, you may find database style lookup on demand is better still?</p>\n\n<p>Failing that - you might also find that having a separate 'loader' thread that processes your file asynchronously might be an option too, as whilst it will still take time to load into memory, your program can just carry on whilst the data is being loaded. </p>\n\n<p>But pretty fundamentally - you're reading a large chunk of data serially from disk. It will always be limited by the speed of the disk. Faster disk means faster load.  The workarounds for this are things that move from disk to memory (like a database). </p>\n"}, {"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 3, "last_activity_date": 1434549693, "creation_date": 1434549693, "answer_id": 30893861, "question_id": 30891745, "link": "https://stackoverflow.com/questions/30891745/reading-from-data-file-handle/30893861#30893861", "title": "Reading from DATA file handle", "body": "<p>I did some benchmarking against three methods. I used an external file for reading (instead of <code>__DATA__</code>). The file consisted of 3 million lines of the exact data you were using.</p>\n\n<p>The methods are slurping the file, reading the file line-by line, and using <code>Storable</code> as Sobrique mentioned above. Each task is run 100 times. Here are the results, which show that once stored using <code>Storable</code>, it is by far much faster than the other two (118% faster than by line, and 45% faster than by slurping):</p>\n\n<pre><code>           Rate  by_line by_slurp by_store\nby_line  1.08/s       --     -33%     -54%\nby_slurp 1.62/s      50%       --     -31%\nby_store 2.36/s     118%      45%       --\n</code></pre>\n\n<p>Here's the code I used:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\n\nuse Benchmark qw(cmpthese timethese);\nuse Storable;\n\nmy $file = 'in.txt';\n\nstoreit();\n\ncmpthese(100, {\n    'by_line' =&gt; \\&amp;by_line,\n    'by_slurp' =&gt; \\&amp;by_slurp,\n    'by_store' =&gt; \\&amp;by_store,\n});\n\nsub by_line {\n\n    open my $fh, '&lt;', $file\n      or die \"Can't open $file: $!\";\n\n    my @ref_data;\n\n    for my $line (&lt;$fh&gt;){\n        push @ref_data, $line;\n    }\n}\n\nsub by_slurp {\n\n    open my $fh, '&lt;', $file\n      or die \"Can't open $file: $!\";\n\n    my @ref_data = &lt;$fh&gt;;\n}  \n\nsub storeit {\n    open my $fh, '&lt;', $file\n      or die \"Can't open $file: $!\";\n\n    my @ref_data = &lt;$fh&gt;;\n    close $fh;\n\n    store \\@ref_data, 'store.dat';\n}\n\nsub by_store{\n\n    my @ref_data = retrieve('store.dat');\n}\n</code></pre>\n"}], "owner": {"reputation": 1222, "user_id": 1274254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bae169b187d3476d3ce665a0317fad62?s=128&d=identicon&r=PG", "display_name": "Thruston", "link": "https://stackoverflow.com/users/1274254/thruston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 30893861, "answer_count": 2, "score": 1, "last_activity_date": 1434549693, "creation_date": 1434544372, "last_edit_date": 1434549036, "question_id": 30891745, "link": "https://stackoverflow.com/questions/30891745/reading-from-data-file-handle", "title": "Reading from DATA file handle", "body": "<p>My perl module needs to use a look up table that's about 309,000 lines long.</p>\n\n<p>Currently the part that loads the table into an array looks (roughly) like this:</p>\n\n<pre><code>use strict;\nuse warnings;\n\n# load all the data from below\nmy @ref_data; \nwhile (&lt;DATA&gt;) {\n    push @ref_data, $_\n}\nclose DATA;\n\n__DATA__\n00004f15ed000023f2\n00005015fc000623ec\n000051160a000b23e7\n000052161d001523e2\n0000531631002223de\n0000541645002e23da\n... etc ... \n</code></pre>\n\n<p>My own experiments on show that this <code>while</code> loop takes about 0.1 seconds to load the data.  This is about twice as fast as just doing this:</p>\n\n<pre><code>use strict;\nuse warnings;\n\n# load all the data from below\nmy @ref_data = &lt;DATA&gt;; \nclose DATA;\n\n__DATA__\n00004f15ed000023f2\n00005015fc000623ec\n000051160a000b23e7\n000052161d001523e2\n0000531631002223de\n0000541645002e23da\n... etc ...\n</code></pre>\n\n<p>And both of these are much faster than just putting <code>qw(...)</code> round all the data lines or editing the source to load the array one item at a time. </p>\n\n<p>I can guess that most of the approx 100 milliseconds is disk time, but is the <code>while</code> loop the fastest way to initialize my array, or can we go any faster by using some other Perl construct?</p>\n"}, {"tags": ["arrays", "perl", "foreach", "unique"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1434554447, "post_id": 30891835, "comment_id": 49830634, "body": "Also use <code>srand</code> if you fork."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1434545077, "last_edit_date": 1434545077, "creation_date": 1434544659, "answer_id": 30891835, "question_id": 30891590, "link": "https://stackoverflow.com/questions/30891590/creating-a-sequence-of-unique-random-digits/30891835#30891835", "title": "Creating a sequence of unique random digits", "body": "<p>To generate a list of four unique non-zero decimal digits, use <code>shuffle</code> from <a href=\"https://metacpan.org/pod/List::Util\" rel=\"nofollow\"><code>List::Util</code></a> and pick the first four</p>\n\n<p>Like this</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nuse List::Util 'shuffle';\n\nmy @unique = (shuffle 1 .. 9)[0..3];\n\nsay \"@unique\";\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>8 5 1 4\n</code></pre>\n\n<p>There's no need to seed the random number generator as Perl does it for you. Only use <code>srand</code> if you need a <em>repeatable</em> random sequence</p>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>Here's another way that's similar to what you already had. Essentially it just keeps making random numbers until it has four different ones</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nmy %unique;\n++$unique{int(rand 9) + 1} while keys %unique &lt; 4;\n\nsay join ' ', keys %unique;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "is_accepted": false, "score": 0, "last_activity_date": 1434544907, "creation_date": 1434544907, "answer_id": 30891928, "question_id": 30891590, "link": "https://stackoverflow.com/questions/30891590/creating-a-sequence-of-unique-random-digits/30891928#30891928", "title": "Creating a sequence of unique random digits", "body": "<p>@Boromir gave you what is probably the cleanest solution. If you do need to use <code>rand()</code>, just make sue no duplicates are saved in the first place instead of removing them later:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse 5.22.0;\n# Generating random seed using \n# Programming Perl p. 955\nsrand(time()^($$+($$&lt;&lt;15)));\n\n#Generating code that can't have duplicates\nmy %seen = ();\nwhile (scalar(keys(%seen)!=4)) {\n    $seen{int(rand(9)) + 1}++\n}\nsay keys %seen;\n</code></pre>\n"}], "owner": {"reputation": 1559, "user_id": 1839374, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c4041f81dcd0bc77ef0260ddcf6bb7fc?s=128&d=identicon&r=PG", "display_name": "Jesse Pet", "link": "https://stackoverflow.com/users/1839374/jesse-pet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 973, "favorite_count": 0, "accepted_answer_id": 30891835, "answer_count": 2, "score": 1, "last_activity_date": 1434545318, "creation_date": 1434544010, "last_edit_date": 1434545318, "question_id": 30891590, "link": "https://stackoverflow.com/questions/30891590/creating-a-sequence-of-unique-random-digits", "title": "Creating a sequence of unique random digits", "body": "<p>I have the following code</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.22.0;\n\n# Generating random seed using \n# Programming Perl p. 955\nsrand( time() ^ ($$ + ($$ &lt;&lt; 15 ) ) );\n\n# Generating code that could have duplicates\nmy @code = (\n    (int(rand(9)) + 1),\n    (int(rand(9)) + 1),\n    (int(rand(9)) + 1),\n    (int(rand(9)) + 1)\n);\n\n# Trying to remove duplicates and choosing the unique code\nmy %seen = ();\nmy @unique = grep { ! $seen{ $_ }++ } @code;\nsay @unique;\n</code></pre>\n\n<p>I am generating a list of four random numbers, and I need to make sure that all four numbers are unique. I am able to scrape out the unique numbers but it is not always maintaining a scalar length of 4.</p>\n\n<p>My initial thoughts were to do a <code>foreach</code> loop checking to see if each element is the same, but there has to be a quicker way to do this.  </p>\n\n<p>This is my initial thought (not using the unique set)</p>\n\n<pre><code>my $index = 0\nforeach my $element (@code) {\n    if ($element == $code[index]) {  \n        # repopulate @code at said element\n        $code[$index] = (int(rand(9)) + 1);\n    }\n    $index++;\n }\n</code></pre>\n\n<p>However, I believe that this might give me the same issue in that there might be duplicates.</p>\n\n<p>Is there a quicker way to do this while maintaining four numbers in my array that are all unique?</p>\n"}, {"tags": ["perl", "web-services", "soap", "https"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 1999315, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/483cb90bf0f10aad783d5a038c6dedcc?s=128&d=identicon&r=PG", "display_name": "user1999315", "link": "https://stackoverflow.com/users/1999315/user1999315"}, "edited": false, "score": 0, "creation_date": 1434703347, "post_id": 30890281, "comment_id": 49902511, "body": "Thanks Rsadinha. The libraries are all in place. Just want to know, if the webserver, which provides the web service, should have to have any set up to authenticate the certificates?"}, {"owner": {"reputation": 31, "user_id": 1999315, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/483cb90bf0f10aad783d5a038c6dedcc?s=128&d=identicon&r=PG", "display_name": "user1999315", "link": "https://stackoverflow.com/users/1999315/user1999315"}, "edited": false, "score": 0, "creation_date": 1435053554, "post_id": 30890281, "comment_id": 50027392, "body": "Can anyone let me know, how do we check what version of libraries are compiled during the perl installation?"}], "tags": [], "owner": {"reputation": 13104, "user_id": 621690, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6edc5dbf6a1b8cef7db25355aba35a1c?s=128&d=identicon&r=PG", "display_name": "Risadinha", "link": "https://stackoverflow.com/users/621690/risadinha"}, "is_accepted": false, "score": 0, "last_activity_date": 1434540626, "creation_date": 1434540626, "answer_id": 30890281, "question_id": 30890129, "link": "https://stackoverflow.com/questions/30890129/https-connection-to-web-server-through-soaplite-in-perl/30890281#30890281", "title": "HTTPS connection to web server through SOAP::Lite in Perl", "body": "<p>From <a href=\"http://marc.info/?l=openssl-users&amp;m=100632345124756&amp;w=2\" rel=\"nofollow\">http://marc.info/?l=openssl-users&amp;m=100632345124756&amp;w=2</a></p>\n\n<blockquote>\n  <p>Make sure that LD_LIBRARY_PATH environment variable contains the \n  libraries for openssl.  Also, make sure any old openssl installation\n  libs are not in that path.</p>\n</blockquote>\n"}], "owner": {"reputation": 31, "user_id": 1999315, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/483cb90bf0f10aad783d5a038c6dedcc?s=128&d=identicon&r=PG", "display_name": "user1999315", "link": "https://stackoverflow.com/users/1999315/user1999315"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434790463, "creation_date": 1434540229, "last_edit_date": 1434790463, "question_id": 30890129, "link": "https://stackoverflow.com/questions/30890129/https-connection-to-web-server-through-soaplite-in-perl", "title": "HTTPS connection to web server through SOAP::Lite in Perl", "body": "<p>We have been using <code>SOAP::Lite</code> to consume web services in Perl over http connection. This has to be migrated to https connection.<br>\nI tried with ssl_opts with SSL_cert_file and SSL_key_file values in proxy().<br>\nI am getting a fatal relocation error as below:  </p>\n\n<blockquote>\n  <p>Crypt/SSLeay/SSLeay.so: symbol OpenSSL_add_all_algorithms: referenced symbol not found</p>\n</blockquote>\n\n<p>Could you please help me resolving this issue? </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1434539497, "post_id": 30889482, "comment_id": 49818975, "body": "Where did you learn to put all your identifiers inside braces? I hope you realise that it&#39;s unnecessary, and I believe it makes the code less readable"}, {"owner": {"reputation": 150, "user_id": 2879194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d63fd47706ccff33bdda134d526f219?s=128&d=identicon&r=PG&f=1", "display_name": "alyx-brett", "link": "https://stackoverflow.com/users/2879194/alyx-brett"}, "edited": false, "score": 0, "creation_date": 1434540361, "post_id": 30889482, "comment_id": 49819558, "body": "Try looking at File::Find for tasks like this."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 9, "last_activity_date": 1434538865, "creation_date": 1434538865, "answer_id": 30889651, "question_id": 30889482, "link": "https://stackoverflow.com/questions/30889482/remove-elements-in-one-array-from-another-array-in-perl/30889651#30889651", "title": "Remove elements in one array from another array in perl", "body": "<p>To filter an array, you can use <a href=\"http://p3rl.org/grep\" rel=\"noreferrer\">grep</a>:</p>\n\n<pre><code>my @nonlinks = grep { my $f = $_;\n                      ! grep $_ eq $f, @symbolic_files_found }\n               @files_found;\n</code></pre>\n\n<p>But it's usually cleaner to use a hash.</p>\n\n<pre><code>my %files;\n@files{ @files_found } = ();            # All files are the keys.\ndelete @files{ @symbolic_files_found }; # Remove the links.\nmy @nonlinks = keys %files;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1434540728, "creation_date": 1434540728, "answer_id": 30890328, "question_id": 30889482, "link": "https://stackoverflow.com/questions/30889482/remove-elements-in-one-array-from-another-array-in-perl/30890328#30890328", "title": "Remove elements in one array from another array in perl", "body": "<p>I suggest that you install and use <a href=\"https://metacpan.org/pod/List::Compare\" rel=\"nofollow\"><code>List::Compare</code></a>. The code would look like this</p>\n\n<p>As I wrote in my comment, I'm not sure if you prefer to write your identifiers like that, and I'm also unclear if you've avoided backticks <code>`...`</code> (same as <code>qx{...}</code>) in favour of a pipe open for a reason, but this is closer to how I'd write your code</p>\n\n<p>If you prefer, <code>get_unique</code> has a synonym <code>get_Lonly</code> which you may find more expressive</p>\n\n<pre><code>use List::Compare;\n\nfor my $dir ( @code_vob_list ) {\n\n    chomp $dir;\n\n    my @files_found = qx{$cleartool find $dir -type f -exec 'echo \\$CLEARCASE_PN'};\n    chomp @files_found;\n\n    my @symbolic_files_found = qx{$cleartool find $dir -type l -exec 'echo \\$CLEARCASE_PN'};\n    chomp @symbolic_files_found;\n\n    my $lc = List::Compare-&gt;new('--unsorted', \\@files_found, \\@symbolic_files_found);\n    my @unique = $lc-&gt;get_unique;\n}\n</code></pre>\n"}], "owner": {"reputation": 1465, "user_id": 1734929, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/fa94be4b6d99305d3854003af58f5a41?s=128&d=identicon&r=PG", "display_name": "anders", "link": "https://stackoverflow.com/users/1734929/anders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2645, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1434540728, "creation_date": 1434538425, "question_id": 30889482, "link": "https://stackoverflow.com/questions/30889482/remove-elements-in-one-array-from-another-array-in-perl", "title": "Remove elements in one array from another array in perl", "body": "<p>I want to get all elements in clearcase, store them in an array, and then remove the symbolic links from that array. Problem is I don't know how to remove all elements in one array that are contained in another array since I'm new to perl.</p>\n\n<p>Bellow is my code so far.</p>\n\n<pre><code>foreach ${dir} (@{code_vob_list}) \n{\n    ${dir} =~ s/\\n//;\n    open(FIND_FILES, \"$cleartool find ${dir} -type f -exec 'echo \\$CLEARCASE_PN' |\") or die \"Can't stat cleartool or execute : $!\\n\"; #This command gets all files\n    @{files_found} = &lt;FIND_FILES&gt;;\n\n    open(SYMBOLIC_FIND_FILES, \"$cleartool find ${dir} -type l -exec 'echo \\$CLEARCASE_PN' |\") or die \"Can't stat cleartool or execute : $!\\n\"; #This command get all symbolic links\n    @{symbolic_files_found} = &lt;SYMBOLIC_FIND_FILES&gt;;\n    #Filter away all strings contained in @{symbolic_files_found} from @{files_found}\n    foreach my ${file} (@{files_found}) \n    {\n        #Here I will perform my actions on @{files_found} that not contains any symbolic link paths from @{symbolic_files_found}\n    }\n}\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["bash", "perl", "command-line", "awk", "sed"], "answers": [{"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1434541018, "post_id": 30887203, "comment_id": 49820011, "body": "^1 for the awk answer and a shudder for the sed one :-)."}, {"owner": {"reputation": 2627, "user_id": 215924, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/db83b716acfe0f3a1de6faa176d63fca?s=128&d=identicon&r=PG&f=1", "display_name": "Squidly", "link": "https://stackoverflow.com/users/215924/squidly"}, "edited": false, "score": 0, "creation_date": 1434622606, "post_id": 30887203, "comment_id": 49862420, "body": "@User112638726 Could you explain your sed answer?"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 2627, "user_id": 215924, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/db83b716acfe0f3a1de6faa176d63fca?s=128&d=identicon&r=PG&f=1", "display_name": "Squidly", "link": "https://stackoverflow.com/users/215924/squidly"}, "edited": false, "score": 0, "creation_date": 1434622941, "post_id": 30887203, "comment_id": 49862650, "body": "@MrBones *please. And what part are you struggling with ?"}, {"owner": {"reputation": 2627, "user_id": 215924, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/db83b716acfe0f3a1de6faa176d63fca?s=128&d=identicon&r=PG&f=1", "display_name": "Squidly", "link": "https://stackoverflow.com/users/215924/squidly"}, "edited": false, "score": 0, "creation_date": 1434623770, "post_id": 30887203, "comment_id": 49863189, "body": "With info sed I can bumble my way through it, but its a bit opaque people who come across it who only use <code>sed s&#47;x&#47;y&#47;</code> - there&#39;s a bunch of cool things happening, and it shows sed off nicely, so it&#39;s a nice example to break down :)"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 2627, "user_id": 215924, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/db83b716acfe0f3a1de6faa176d63fca?s=128&d=identicon&r=PG&f=1", "display_name": "Squidly", "link": "https://stackoverflow.com/users/215924/squidly"}, "edited": false, "score": 1, "creation_date": 1434624563, "post_id": 30887203, "comment_id": 49863700, "body": "@MrBones There ya go :)"}], "tags": [], "owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "is_accepted": true, "score": 6, "last_activity_date": 1434624548, "last_edit_date": 1434624548, "creation_date": 1434532434, "answer_id": 30887203, "question_id": 30887157, "link": "https://stackoverflow.com/questions/30887157/taking-multiple-header-rows-matching-condition-and-convert-into-a-column/30887203#30887203", "title": "Taking multiple header (rows matching condition) and convert into a column", "body": "<p>In awk</p>\n\n<pre><code>awk -F, 'NF==1{a=$0;next}{print a\",\"$0}' file\n</code></pre>\n\n<p>Checks if the number of fields is 1, if it is it sets a variable to that and skips the next block.</p>\n\n<p>For each line that doesn't have 1 field, it prints the saved variable and the line</p>\n\n<p>And in sed</p>\n\n<pre><code>sed -n '/,/!{h};/,/{x;G;s/\\n/,/;p;s/,.*//;x}' file\n</code></pre>\n\n<hr>\n\n<p>Broken down for MrBones wild ride.</p>\n\n<pre><code>sed -n '\n\n        /,/!{h};       // If the line does not contain a comma overwrite buffer with line\n\n       /,/{            // If the line contains a comma, do everything inside the brackets\n           x;          // Exchange the line for the held in buffer\n           G;          // Append buffer to line\n           s/\\n/,/;    // Replace the newline with a comma\n           p;          // Print the line\n           s/,.*//;    // Remove everything after the first comma\n           x           // exchange line for hold buffer to put title back in buffer for the next line.\n          }' file      // The file you are using\n</code></pre>\n\n<p>In essence it saves the lines without a <code>,</code>, i.e the headers. Then if its not a header, it switches the current line with the saved header and appends the now switched line to the end of the header. As it is appended with a newline, then the next statement replaces that with a comma. Then the line is printed. NExt to recover the header, everything after it is removed and it is swapped back into the buffer, ready for the next line.</p>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1434533611, "creation_date": 1434533611, "answer_id": 30887684, "question_id": 30887157, "link": "https://stackoverflow.com/questions/30887157/taking-multiple-header-rows-matching-condition-and-convert-into-a-column/30887684#30887684", "title": "Taking multiple header (rows matching condition) and convert into a column", "body": "<p>Perl solution:</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $header;\nwhile (&lt;&gt;) {                # Read line by line.\n    if (/,/) {              # If the line contains a comma,\n        print \"$header,$_\"; # prepend the header.\n    } else {\n        chomp;              # Remove the newline.\n        $header = $_;       # Remember the header.\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1434541221, "post_id": 30888250, "comment_id": 49820156, "body": "You also may want to take off the -w unless you want the warning for an unitialised <code>$s</code> to appear."}], "tags": [], "owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "is_accepted": false, "score": 1, "last_activity_date": 1434542947, "last_edit_date": 1434542947, "creation_date": 1434535068, "answer_id": 30888250, "question_id": 30887157, "link": "https://stackoverflow.com/questions/30887157/taking-multiple-header-rows-matching-condition-and-convert-into-a-column/30888250#30888250", "title": "Taking multiple header (rows matching condition) and convert into a column", "body": "<p><strong>Perl</strong></p>\n\n<pre><code>$ perl -F, -wlane ' if(@F eq 1){$s=$F[0]; next}print \"$s,$_\"' file\nDay1,1,Smith,London\nDay1,2,Bruce,Seattle\nDay1,5,Will,Dallas\nDay2,1,Mike,Frisco\nDay2,4,James,LA\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1434535381, "creation_date": 1434535381, "answer_id": 30888361, "question_id": 30887157, "link": "https://stackoverflow.com/questions/30887157/taking-multiple-header-rows-matching-condition-and-convert-into-a-column/30888361#30888361", "title": "Taking multiple header (rows matching condition) and convert into a column", "body": "<p>Another perl example- this time using <code>$/</code> to separate each record. </p>\n\n<pre><code>use strict;\nuse warnings;\n\nlocal $/ = \"Day\";\n\nwhile (&lt;&gt;) {\n    next unless my ($num) = m/^(\\d+)/;\n    for ( split /\\n/ ) {\n        print \"Day${num},$_\\n\" if m/,/;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1637, "user_id": 2397101, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2f71dd495d236d8233ffda10596a011e?s=128&d=identicon&r=PG&f=1", "display_name": "josifoski", "link": "https://stackoverflow.com/users/2397101/josifoski"}, "edited": false, "score": 0, "creation_date": 1434541814, "post_id": 30889284, "comment_id": 49820553, "body": "only {h;b} is enough, it will act like break command if label is not stated +1 for solution"}], "tags": [], "owner": {"reputation": 9874, "user_id": 4326936, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/71a107e53f14a27c4e83fb0adae2552c?s=128&d=identicon&r=PG&f=1", "display_name": "alijandro", "link": "https://stackoverflow.com/users/4326936/alijandro"}, "is_accepted": false, "score": 1, "last_activity_date": 1434537939, "creation_date": 1434537939, "answer_id": 30889284, "question_id": 30887157, "link": "https://stackoverflow.com/questions/30887157/taking-multiple-header-rows-matching-condition-and-convert-into-a-column/30889284#30889284", "title": "Taking multiple header (rows matching condition) and convert into a column", "body": "<p>Another sed version</p>\n\n<pre><code>sed -n '/Day[0-9]\\+/{h;b end};{G;s/\\(.*\\)\\n\\(.*\\)/\\2,\\1/;p;:end}'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1434543448, "post_id": 30890717, "comment_id": 49821860, "body": "<code>-ne&#39;tr</code> should be a space here ?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1434543546, "post_id": 30890717, "comment_id": 49821934, "body": "@User112638726: I&#39;m not sure exactly where you mean, but no"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1434543748, "post_id": 30890717, "comment_id": 49822111, "body": "There should be a space between the start of the command and the switches."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1434543807, "post_id": 30890717, "comment_id": 49822158, "body": "@User112638726: What, like <code>perl -ne &#39;tr&#47;,&#47;&#47; ...</code>? That&#39;s unnecessary. The &quot;command&quot; is a string parameter to the <code>-e</code> switch"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1434543923, "post_id": 30890717, "comment_id": 49822247, "body": "Oh right, didn&#39;t know :) Thanks for clearing that up. If i run it though i still get loads of errors such as <code>Bareword found where operator expected at -e</code>,<code>syntax error at -e line 1, near &quot;s&#47;\\s*\\z&#47;,&#47;r&quot;</code> and <code>Execution of -e aborted due to compilation errors.</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1434544044, "post_id": 30890717, "comment_id": 49822352, "body": "@User112638726: You&#39;re using an old version of Perl. The <code>&#47;r</code> modifier on <code>s&#47;&#47;&#47;</code> requires version 5.14 or later"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1434544078, "post_id": 30890717, "comment_id": 49822381, "body": "Ahh right. Might want to mention that on your answer!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1434544093, "post_id": 30890717, "comment_id": 49822389, "body": "@User112638726: I did :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 1, "creation_date": 1434544280, "post_id": 30890717, "comment_id": 49822552, "body": "@User112638726: Okay I&#39;ve added a version for older Perls"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1434544262, "last_edit_date": 1434544262, "creation_date": 1434541753, "answer_id": 30890717, "question_id": 30887157, "link": "https://stackoverflow.com/questions/30887157/taking-multiple-header-rows-matching-condition-and-convert-into-a-column/30890717#30890717", "title": "Taking multiple header (rows matching condition) and convert into a column", "body": "<p>This Perl one-line program will do as you ask. It requires Perl v5.14 or better</p>\n\n<pre><code>perl -ne'tr/,// ? print $c,$_ : ($c = s/\\s*\\z/,/r)' myfile.txt\n</code></pre>\n\n<p>for earlier versions of perl, use</p>\n\n<pre><code>perl -ne'tr/,// ? print $c,$_ : ($c = $_) =~ s/\\s*\\z/,/' myfile.txt\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>Day1,1,Smith,London\nDay1,2,Bruce,Seattle\nDay1,5,Will,Dallas\nDay2,1,Mike,Frisco\nDay2,4,James,LA\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1434549508, "post_id": 30891221, "comment_id": 49826777, "body": "This is like my sed, except devoid of all the pointless getting and exchanging. +1!"}, {"owner": {"reputation": 9362, "user_id": 2885763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/l4VVG.jpg?s=128&g=1", "display_name": "NeronLeVelu", "link": "https://stackoverflow.com/users/2885763/neronlevelu"}, "reply_to_user": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1434553040, "post_id": 30891221, "comment_id": 49829588, "body": "yes :-), same for the awk, same principle but test of rupture is on another <i>value</i>"}], "tags": [], "owner": {"reputation": 9362, "user_id": 2885763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/l4VVG.jpg?s=128&g=1", "display_name": "NeronLeVelu", "link": "https://stackoverflow.com/users/2885763/neronlevelu"}, "is_accepted": false, "score": 3, "last_activity_date": 1434543371, "last_edit_date": 1434543371, "creation_date": 1434543015, "answer_id": 30891221, "question_id": 30887157, "link": "https://stackoverflow.com/questions/30887157/taking-multiple-header-rows-matching-condition-and-convert-into-a-column/30891221#30891221", "title": "Taking multiple header (rows matching condition) and convert into a column", "body": "<pre><code>sed '/^Day/ {h;d;}\n     G;s/\\(.*\\)\\n\\(.*\\)/\\2,\\1/\n    ' YourFile\n</code></pre>\n\n<ul>\n<li>posix compliant</li>\n<li>print nothing if not at least 1 <em>data</em> after a <em>Day</em></li>\n<li>white line are treated as <em>data</em></li>\n</ul>\n\n<p><code>awk '{if ( $0 ~ /^Day/ ) Head = $0; else print Head \",\" $0}' YourFile</code></p>\n\n<ul>\n<li>use <code>Day</code> as paragraph separator and content as header to use on following line</li>\n</ul>\n"}], "owner": {"reputation": 261, "user_id": 4888870, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/j2N4r.jpg?s=128&g=1", "display_name": "Thomas Paine", "link": "https://stackoverflow.com/users/4888870/thomas-paine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 1, "accepted_answer_id": 30887203, "answer_count": 7, "score": 1, "last_activity_date": 1434624548, "creation_date": 1434532323, "last_edit_date": 1434533467, "question_id": 30887157, "link": "https://stackoverflow.com/questions/30887157/taking-multiple-header-rows-matching-condition-and-convert-into-a-column", "title": "Taking multiple header (rows matching condition) and convert into a column", "body": "<p>Hello I have a file that has multiple Headers in it that I need to have turned into column values. The file looks like this:</p>\n\n<pre><code>Day1\n1,Smith,London\n2,Bruce,Seattle\n5,Will,Dallas\nDay2\n1,Mike,Frisco\n4,James,LA\n</code></pre>\n\n<p>I would like the file to end up looking like this:</p>\n\n<pre><code>Day1,1,Smith,London\nDay1,2,Bruce,Seattle\nDay1,5,Will,Dallas\nDay2,1,Mike,Frisco\nDay2,4,James,LA\n</code></pre>\n\n<p>The file doesn't have sequential numbers before the names and it doesn't have the same quantity of records after the \"Day\" Header. \nDoes anyone have any ideas on how to accomplish this using the command-line? </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1434530304, "post_id": 30886332, "comment_id": 49812622, "body": "What Perl version are you using?"}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1434530452, "post_id": 30886332, "comment_id": 49812721, "body": "<code>$ perl -v This is perl 5, version 14, subversion 4 (v5.14.4) built for cygwin-thread-multi-64int</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434541927, "post_id": 30886332, "comment_id": 49820654, "body": "<a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601 date-time format</a> looks like <code>2015-06-17T10:20:34</code>"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1434532288, "post_id": 30886922, "comment_id": 49813981, "body": "<code>Time::Piece</code> is core as of 5.9.5. (You can see this with <code>corelist Time::Piece</code>)"}, {"owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "edited": false, "score": 2, "creation_date": 1434532710, "post_id": 30886922, "comment_id": 49814271, "body": "Why not just use <code>strftime</code> directly and give it the wanted format? Seems far better than taking a different format then regexping it."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "edited": false, "score": 1, "creation_date": 1434533210, "post_id": 30886922, "comment_id": 49814668, "body": "True @LeoNerd. But well, I&#39;ll leave it since I think a lot of people keep forgetting about Time::Piece, me included. ;)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1434547696, "post_id": 30886922, "comment_id": 49825286, "body": "I think he meant T::P&#39;s <code>strftime</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1434548410, "post_id": 30886922, "comment_id": 49825892, "body": "Also the OP asked for the <i>ISO</i> date and time, which has the <code>T</code>. See <a href=\"https://en.wikipedia.org/?title=ISO_8601\" rel=\"nofollow noreferrer\">en.wikipedia.org/?title=ISO_8601</a>, so it kind of makes sense to use that method."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 7, "last_activity_date": 1434531663, "creation_date": 1434531663, "answer_id": 30886922, "question_id": 30886332, "link": "https://stackoverflow.com/questions/30886332/get-iso-datetime-with-only-core-modules-in-perl/30886922#30886922", "title": "Get ISO DateTime with only core modules in Perl?", "body": "<p>Perl 5.14 contains the <a href=\"http://perldoc.perl.org/5.14.2/Time/Piece.html\">core module Time::Piece</a>, which has a <code>datetime</code> method that returns a date and time in ISO 8601.</p>\n\n<pre><code>use Time::Piece;\nmy $t = localtime;\nsay $t-&gt;datetime;\n</code></pre>\n\n<p>This will return <code>2015-06-17T10:59:15</code>. If you don't want the <code>T</code>, remove it.</p>\n\n<pre><code>say localtime-&gt;datetime =~ y/T/ /r;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "is_accepted": true, "score": 2, "last_activity_date": 1434532673, "creation_date": 1434532673, "answer_id": 30887285, "question_id": 30886332, "link": "https://stackoverflow.com/questions/30886332/get-iso-datetime-with-only-core-modules-in-perl/30887285#30887285", "title": "Get ISO DateTime with only core modules in Perl?", "body": "<p>This is simple with the <code>POSIX</code> function <code>strftime</code>:</p>\n\n<pre><code>use POSIX qw( strftime );\n\nprint strftime \"%Y-%m-%d %H:%M:%S\", localtime;\n</code></pre>\n\n<p><code>POSIX</code> has been core since 5.0.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1434640123, "last_edit_date": 1434640123, "creation_date": 1434542335, "answer_id": 30890941, "question_id": 30886332, "link": "https://stackoverflow.com/questions/30886332/get-iso-datetime-with-only-core-modules-in-perl/30890941#30890941", "title": "Get ISO DateTime with only core modules in Perl?", "body": "<p>The <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow\"><code>Time::Piece</code></a> module has been in core Perl since version 5.10, about eight years ago</p>\n\n<p>It overrides the <code>localtime</code> core function and looks like this</p>\n\n<pre><code>use Time::Piece;\n\nprint localtime-&gt;datetime;\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>2015-06-17T12:55:36\n</code></pre>\n\n<p>If you <em>really</em> want a space instead of the standard <code>T</code> then, on Perl v5.14 or later you can write</p>\n\n<pre><code>print localtime-&gt;datetime =~ tr/T/ /r;\n</code></pre>\n\n<p>In earler versions, which don't have the <code>/r</code> \"non-destructive\" option, you would have to put the string into a variable and modify it with <code>tr/T/ /</code></p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1434641924, "last_edit_date": 1434641924, "creation_date": 1434640375, "answer_id": 30919286, "question_id": 30886332, "link": "https://stackoverflow.com/questions/30886332/get-iso-datetime-with-only-core-modules-in-perl/30919286#30919286", "title": "Get ISO DateTime with only core modules in Perl?", "body": "<p>Time::Piece gives you an object with many useful methods. As other people have pointed out, the <code>datetime()</code> gives you the date and time in ISO format.</p>\n\n<pre><code>use Time::Piece;\n\nprint localtime-&gt;datetime;\n</code></pre>\n\n<p>But if you want a different format (like the \"not quite ISO\" format in your question) you can use the <code>strftime()</code> method.</p>\n\n<pre><code>use Time::Piece;\n\nprint localtime-&gt;strftime('%Y-%m-%d %H:%M:%S');\n</code></pre>\n\n<p>A couple of other points:</p>\n\n<ul>\n<li>Your DateTime installation might go quicker if you used a pre-built package (for example, <code>yum install perl-DateTime</code> on a RedHat derived system).</li>\n<li>There are two reasons for avoiding shelling out to run system commands - firstly you lose cross-platform compatibility and secondly creating a new shell is a relatively slow and expensive operation.</li>\n</ul>\n"}], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "accepted_answer_id": 30887285, "answer_count": 4, "score": 3, "last_activity_date": 1434641924, "creation_date": 1434530118, "question_id": 30886332, "link": "https://stackoverflow.com/questions/30886332/get-iso-datetime-with-only-core-modules-in-perl", "title": "Get ISO DateTime with only core modules in Perl?", "body": "<p>I would like to get a date-time string such as <code>2015-06-17 10:20:34</code> with only core modules. The reason of this is that <code>cpan install DateTime</code> takes ages on my machine because of the tests and the fetch of all the dependencies. </p>\n\n<p>If I give my Program to my colleagues. They will also need to install the missing modules. However, if I simply do:</p>\n\n<pre><code> my $date = `date \"+%Y-%m-%d %H:%M:%S\"`; chomp $date;\n</code></pre>\n\n<p>It takes only one line, it requires no additional modules and works on all <em>POSIX</em> machines. </p>\n\n<blockquote>\n  <p>Why should I need to install <code>DateTime</code> in this case? </p>\n</blockquote>\n\n<p>Yet <code>DateTime-&gt;now</code> is the solution recommended by google. I think it shouldn't, I think I am wrong and I can't figure out why.</p>\n"}, {"tags": ["multithreading", "perl", "process", "fork", "lwp-useragent"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434542421, "post_id": 30886264, "comment_id": 49821006, "body": "What platform are you working on?"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5014456, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-49zayFI9RRE/AAAAAAAAAAI/AAAAAAAAAA0/cyeR39FCCUc/photo.jpg?sz=128", "display_name": "Vijay Kumar", "link": "https://stackoverflow.com/users/5014456/vijay-kumar"}, "edited": false, "score": 0, "creation_date": 1434647842, "post_id": 30887261, "comment_id": 49880382, "body": "Well, Thanks a lot for the info. I narrowed down the number of forks to 1. That sort of helped me."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1434532600, "creation_date": 1434532600, "answer_id": 30887261, "question_id": 30886264, "link": "https://stackoverflow.com/questions/30886264/how-to-run-parallel-fork-as-single-thread-in-perl/30887261#30887261", "title": "How to run parallel fork as single thread in perl?", "body": "<p>As a word of warning - threads and forks are different things in perl. Very different. </p>\n\n<p>However the long and short of it is - you can't, at least not trivially - a fork is a separate process. It actually happens when you run -any- external command in perl, it's just by default perl sits and waits for that command to finish and return output. </p>\n\n<p>However if you've got access to the code, you can amend it to run single threaded - sometimes that's as simple as reducing the paralleism with a config parameter. (In fact quite often - debugging parallel code is a much more complicated task than sequential, so getting it working <em>before</em> running parallel is really important). </p>\n\n<p>You <em>might</em> be able to embed a <code>waitpid</code> into your primary code so you've only got one thing running at once. Without a code example though, it's impossible to say for sure. </p>\n"}], "owner": {"reputation": 17, "user_id": 5014456, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-49zayFI9RRE/AAAAAAAAAAI/AAAAAAAAAA0/cyeR39FCCUc/photo.jpg?sz=128", "display_name": "Vijay Kumar", "link": "https://stackoverflow.com/users/5014456/vijay-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 30887261, "answer_count": 1, "score": 0, "last_activity_date": 1434532600, "creation_date": 1434529923, "question_id": 30886264, "link": "https://stackoverflow.com/questions/30886264/how-to-run-parallel-fork-as-single-thread-in-perl", "title": "How to run parallel fork as single thread in perl?", "body": "<p>I was trying to check response messages written in perl which takes requests through Amazon API and returns responses..How to run parallel fork as single thread in perl?. I'm using LWP::UserAgent module and I want to debug HTTP requests. </p>\n"}, {"tags": ["perl", "email", "attachment", "mime", "plaintext"], "comments": [{"owner": {"reputation": 13, "user_id": 5018461, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Dpk7SpYiT_Y/AAAAAAAAAAI/AAAAAAAAABU/35mfaqMkgLg/photo.jpg?sz=128", "display_name": "ve m", "link": "https://stackoverflow.com/users/5018461/ve-m"}, "edited": false, "score": 0, "creation_date": 1434953212, "post_id": 30885618, "comment_id": 49977310, "body": "I&#39;m using Email::Sender now and everything is working fine."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1434543497, "creation_date": 1434543497, "answer_id": 30891403, "question_id": 30885618, "link": "https://stackoverflow.com/questions/30885618/plain-text-emails-displayed-as-attachment-on-some-email-clients/30891403#30891403", "title": "Plain text emails displayed as attachment on some email clients", "body": "<p>I think this is the closes thing you're going to get to an answer</p>\n\n<p>The <a href=\"https://metacpan.org/pod/MIME::Lite#WAIT\" rel=\"nofollow\">documentation for <code>MIME::Lite</code></a> says this</p>\n\n<blockquote>\n  <p>MIME::Lite is not recommended by its current maintainer. There are a number of alternatives, like Email::MIME or MIME::Entity and Email::Sender, which you should probably use instead. MIME::Lite continues to accrue weird bug reports, and it is not receiving a large amount of refactoring due to the availability of better alternatives. Please consider using something else.</p>\n</blockquote>\n\n<p>The \"current maintainer\" is the inimitable Ricardo Signes and I suggest you follow his advice</p>\n"}], "owner": {"reputation": 13, "user_id": 5018461, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Dpk7SpYiT_Y/AAAAAAAAAAI/AAAAAAAAABU/35mfaqMkgLg/photo.jpg?sz=128", "display_name": "ve m", "link": "https://stackoverflow.com/users/5018461/ve-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 30891403, "answer_count": 1, "score": 1, "last_activity_date": 1434543497, "creation_date": 1434527955, "last_edit_date": 1434528183, "question_id": 30885618, "link": "https://stackoverflow.com/questions/30885618/plain-text-emails-displayed-as-attachment-on-some-email-clients", "title": "Plain text emails displayed as attachment on some email clients", "body": "<p>The email can be viewed normally using some email clients (Evolution, Thunderbird), but with other clients (e.g., GMX) the body of the message remains empty and an attachment containing the body of the message is sent.</p>\n\n<p>I would like to know how I can prevent this from happening, since the message is intended to be read by humans and having the body in an attachment is weird.</p>\n\n<pre><code>    my $ServerName = \"\";\n\n    my $from_address = '';\n    my $to_address   = '';\n    my $subject      = 'MIME Test: Text';\n    my $mime_type    = 'text';\n    my $message_body = \"This is a test.\\n\";\n    # Create the initial text of the message\n    my $mime_msg = MIME::Lite-&gt;new(\n    From    =&gt; $from_address,\n    To      =&gt; $to_address,\n    Subject =&gt; $subject,\n    Type    =&gt; $mime_type,\n    Data    =&gt; encode(\"utf8\",$message_body)\n\n    ) or die \"Error creating MIME body: $!\\n\";\n\n    # encode body of message as a string so that we can pass it to Net::SMTP.\n\n    $message_body = $mime_msg-&gt;body_as_string();\n\n    # Let MIME::Lite handle the Net::SMTP details\n    MIME::Lite-&gt;send( 'smtp', $ServerName,);# AuthUser =&gt; $user, AuthPass =&gt; $pass );\n    $mime_msg-&gt;send() or die \"Error sending message: $!\\n\";\n</code></pre>\n"}, {"tags": ["linux", "windows", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1434529299, "post_id": 30885201, "comment_id": 49811978, "body": "<code>my $foo = @bar</code> will give you the <b>number of elements</b> in <code>@bar</code> because that&#39;s what an array will be turned into when used in scalar context."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1434529376, "post_id": 30885201, "comment_id": 49812034, "body": "See <a href=\"http://superuser.com/questions/233348/how-do-i-create-a-windows-batch-file-that-does-not-show-the-command-prompt-when\" title=\"how do i create a windows batch file that does not show the command prompt when\">superuser.com/questions/233348/&hellip;</a> for Windows."}, {"owner": {"reputation": 361, "user_id": 2064322, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce1402e783cd9c175d54b8c5539e610c?s=128&d=identicon&r=PG", "display_name": "Chaks", "link": "https://stackoverflow.com/users/2064322/chaks"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1434534046, "post_id": 30885201, "comment_id": 49815333, "body": "Thanks simbabque. I forgot to put double quote around @args. The link you have provided suggests using start $cmd I think for perl which I tried but it doesn&#39;t help. What could be the problem?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1434570822, "post_id": 30885201, "comment_id": 49841195, "body": "<code>java</code> should use the console in which your script is already executing. I have no idea why it&#39;s opening a second console for you."}, {"owner": {"reputation": 361, "user_id": 2064322, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce1402e783cd9c175d54b8c5539e610c?s=128&d=identicon&r=PG", "display_name": "Chaks", "link": "https://stackoverflow.com/users/2064322/chaks"}, "edited": false, "score": 0, "creation_date": 1434608698, "post_id": 30885201, "comment_id": 49853693, "body": "I have a C++ application that is calling perl scripts from which I am using system command. So the perl script is not running in any console. It opens new console when I am calling system command to execute java."}], "answers": [{"tags": [], "owner": {"reputation": 361, "user_id": 2064322, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce1402e783cd9c175d54b8c5539e610c?s=128&d=identicon&r=PG", "display_name": "Chaks", "link": "https://stackoverflow.com/users/2064322/chaks"}, "is_accepted": false, "score": 0, "last_activity_date": 1434710660, "creation_date": 1434710660, "answer_id": 30936194, "question_id": 30885201, "link": "https://stackoverflow.com/questions/30885201/suppress-windows-cmd-for-system-command-in-perl/30936194#30936194", "title": "Suppress windows cmd for system command in Perl", "body": "<p>I tried using Win32::SetChildShowWindow(0) and it worked perfectly. I have build Win32 module and linked Win32 library to my application. After adding below code before calling the system command no pop-up command prompt window is displayed.</p>\n\n<pre><code>Win32::SetChildShowWindow(0) \nif defined &amp;Win32::SetChildShowWindow;\n</code></pre>\n\n<p>You can also follow discussion on this here: <a href=\"http://www.perlmonks.org/?node_id=1130953\" rel=\"nofollow\">Perlmonks thread</a></p>\n"}, {"comments": [{"owner": {"reputation": 361, "user_id": 2064322, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce1402e783cd9c175d54b8c5539e610c?s=128&d=identicon&r=PG", "display_name": "Chaks", "link": "https://stackoverflow.com/users/2064322/chaks"}, "edited": false, "score": 0, "creation_date": 1434716178, "post_id": 30936771, "comment_id": 49910586, "body": "Perfect solution what I was looking for to remove console window when calling java as system command in perl. Tons of thanks."}], "tags": [], "owner": {"reputation": 35370, "user_id": 180275, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/4GALY.jpg?s=128&g=1", "display_name": "Ren&#233; Nyffenegger", "link": "https://stackoverflow.com/users/180275/ren%c3%a9-nyffenegger"}, "is_accepted": false, "score": 1, "last_activity_date": 1434712482, "last_edit_date": 1495542600, "creation_date": 1434712482, "answer_id": 30936771, "question_id": 30885201, "link": "https://stackoverflow.com/questions/30885201/suppress-windows-cmd-for-system-command-in-perl/30936771#30936771", "title": "Suppress windows cmd for system command in Perl", "body": "<p>Use <code>javaw</code> instead of <code>java</code>.</p>\n\n<p>This most probably boils down to changing the first line to</p>\n\n<pre><code>$args[0] = $rootpath.\"/jre/bin/javaw\";\n</code></pre>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/1997718/difference-between-java-exe-and-javaw-exe\">Difference between java.exe and javaw.exe</a></p>\n"}], "owner": {"reputation": 361, "user_id": 2064322, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce1402e783cd9c175d54b8c5539e610c?s=128&d=identicon&r=PG", "display_name": "Chaks", "link": "https://stackoverflow.com/users/2064322/chaks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1434712482, "creation_date": 1434526751, "last_edit_date": 1434619579, "question_id": 30885201, "link": "https://stackoverflow.com/questions/30885201/suppress-windows-cmd-for-system-command-in-perl", "title": "Suppress windows cmd for system command in Perl", "body": "<p>I am using a system command in Perl to execute java. I have formed an array @args that have different options to execute a jar file.  Something like below:</p>\n\n<pre><code>$args[0] = $rootpath.\"/jre/bin/java\";\n$args[1] = \" -jar \\\"\".$rootpath.\"/temp/abc.jar\\\"\";\n$args[2] = \" INP=\\\"\".$inputfilename.\"\\\"\";\n$args[3] = \" OUT=\\\"\".$outputfilename.\"\\\"\";\nsystem(@args);\n</code></pre>\n\n<p>This gives a popup window when executed which I want to suppress and want it to run in background. I want this to be suppressed in Linux also. I tried using tild but it didn't helped as below.</p>\n\n<pre><code>my $command = @args;\n$output = `$command`;\n</code></pre>\n\n<p>Please help in figuring this out.</p>\n"}, {"tags": ["python", "linux", "bash", "perl", "grep"], "comments": [{"owner": {"reputation": 80955, "user_id": 1002260, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/5ec9c21c8d54825b04def7a41998d18d?s=128&d=identicon&r=PG", "display_name": "Steven Penny", "link": "https://stackoverflow.com/users/1002260/steven-penny"}, "edited": false, "score": 0, "creation_date": 1434516099, "post_id": 30882187, "comment_id": 49805570, "body": "Did you try <code>tr &#39;\\0&#39; &#39;\\n&#39; &lt; input.txt</code>"}, {"owner": {"reputation": 1185, "user_id": 1736903, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3e6cff1838c264956235851cd685f75a?s=128&d=identicon&r=PG", "display_name": "lyrically wicked", "link": "https://stackoverflow.com/users/1736903/lyrically-wicked"}, "reply_to_user": {"reputation": 80955, "user_id": 1002260, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/5ec9c21c8d54825b04def7a41998d18d?s=128&d=identicon&r=PG", "display_name": "Steven Penny", "link": "https://stackoverflow.com/users/1002260/steven-penny"}, "edited": false, "score": 0, "creation_date": 1434516965, "post_id": 30882187, "comment_id": 49805839, "body": "I tested <code>tr &#39;\\0&#39; &#39;\\n&#39; &lt; path&#47;to&#47;input.txt &gt; path&#47;to&#47;output.txt</code> now, it does nothing to the input. output.txt remains as the same single line file."}, {"owner": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 1, "creation_date": 1434517046, "post_id": 30882187, "comment_id": 49805863, "body": "Line-based tools are not going to work. You are probably better off writing a script in Perl or Python to process the file."}, {"owner": {"reputation": 1185, "user_id": 1736903, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3e6cff1838c264956235851cd685f75a?s=128&d=identicon&r=PG", "display_name": "lyrically wicked", "link": "https://stackoverflow.com/users/1736903/lyrically-wicked"}, "edited": false, "score": 0, "creation_date": 1434518229, "post_id": 30882187, "comment_id": 49806233, "body": "I edited the tags, accordingly :) But strange, I think this is a very common operation (for example, <a href=\"http://vim.wikia.com/wiki/Copy_search_matches#Copy_matches\" rel=\"nofollow noreferrer\">vim.wikia.com/wiki/Copy_search_matches#Copy_matches</a>), but googling the web shows no example of such a script..."}], "answers": [{"comments": [{"owner": {"reputation": 1185, "user_id": 1736903, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3e6cff1838c264956235851cd685f75a?s=128&d=identicon&r=PG", "display_name": "lyrically wicked", "link": "https://stackoverflow.com/users/1736903/lyrically-wicked"}, "edited": false, "score": 0, "creation_date": 1434519845, "post_id": 30882918, "comment_id": 49806844, "body": "1. How to use it in console (that is, how to specify names of input and output files)? 2. What if I want to copy <code>\\[a.*?b&gt;</code> matches? I am not asking about <b>tags</b> (I posted <code>&lt;b&gt;.*?&lt;&#47;b&gt;</code> just as a very basic example), I want to copy <b>regex-based</b> matches. I edited the example, accordingly. 3. What will happen if there will be more than 32KB sized match? I am ready to skip such matches, but what exactly will happen with the script?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1185, "user_id": 1736903, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3e6cff1838c264956235851cd685f75a?s=128&d=identicon&r=PG", "display_name": "lyrically wicked", "link": "https://stackoverflow.com/users/1736903/lyrically-wicked"}, "edited": false, "score": 0, "creation_date": 1434520409, "post_id": 30882918, "comment_id": 49807092, "body": "1. <code>a.pl &lt;file</code>. 2a. You&#39;ll have to look for <code>[a</code> (or part thereof at the end of the buffer) instead of <code>&lt;b&gt;</code> (or part thereof at the end of the buffer). 2b. Most regex patterns can match an unlimited number of characters, so it&#39;s hard to tell if a pattern will match or not without having the entire file to match against.  3. There&#39;s a limit to how many times a given certain repetitions can repeat. The limit can be as low as 32K times. That limit has been raised, and it doesn&#39;t affect all repetitions. I just played it safe. There are ways around the limit."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1185, "user_id": 1736903, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3e6cff1838c264956235851cd685f75a?s=128&d=identicon&r=PG", "display_name": "lyrically wicked", "link": "https://stackoverflow.com/users/1736903/lyrically-wicked"}, "edited": false, "score": 0, "creation_date": 1434520537, "post_id": 30882918, "comment_id": 49807155, "body": "The repetition limit doesn&#39;t apply here. Mostly (only?) for <code>{m,n}</code>."}, {"owner": {"reputation": 1185, "user_id": 1736903, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3e6cff1838c264956235851cd685f75a?s=128&d=identicon&r=PG", "display_name": "lyrically wicked", "link": "https://stackoverflow.com/users/1736903/lyrically-wicked"}, "edited": false, "score": 0, "creation_date": 1434520900, "post_id": 30882918, "comment_id": 49807331, "body": "Sorry,  am not a Perl programmer. 1. What is <code>&lt;file</code>? There must be <b>two</b> paths/filenames - for input and output. 2. Can you edit the script for <code>[a .*? b&gt;</code>? 3. I suppose there will be a big problem if, say, the file contains <code>[a </code> somewhere at the beginning and <code>b&gt;</code> at the end? Not enough memory! The only way to avoid such problem is to specify a limit in regex, like <code>[a .{0,64000} b&gt;</code>, right?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1185, "user_id": 1736903, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3e6cff1838c264956235851cd685f75a?s=128&d=identicon&r=PG", "display_name": "lyrically wicked", "link": "https://stackoverflow.com/users/1736903/lyrically-wicked"}, "edited": false, "score": 0, "creation_date": 1434552110, "post_id": 30882918, "comment_id": 49828792, "body": "1. Redirect input. You already know how to redirect the output. 2. No, you could assume the <code>b&gt;</code> is forthcoming and start printing as soon as <code>[a</code> is found."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1185, "user_id": 1736903, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3e6cff1838c264956235851cd685f75a?s=128&d=identicon&r=PG", "display_name": "lyrically wicked", "link": "https://stackoverflow.com/users/1736903/lyrically-wicked"}, "edited": false, "score": 0, "creation_date": 1434553394, "post_id": 30882918, "comment_id": 49829901, "body": "Changed it so the length of the captured text can be arbitrary long without running out of memory. (Also, the buffer wasn&#39;t being flushed when it should have been.)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1434608476, "last_edit_date": 1434608476, "creation_date": 1434518725, "answer_id": 30882918, "question_id": 30882187, "link": "https://stackoverflow.com/questions/30882187/how-to-copy-matches-from-an-extremely-large-file-if-it-contains-no-newlines/30882918#30882918", "title": "How to copy matches from an extremely large file if it contains no newlines?", "body": "<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse constant BLOCK_SIZE =&gt; 64*1024;\n\nmy $buf = \"\";\nmy $searching = 1;\nwhile (1) {\n   my $rv = read(\\*STDIN, $buf, BLOCK_SIZE, length($buf));\n   die($!) if !defined($rv);\n   last if !$rv\n\n   while (1) {\n      if ($searching) {\n         my $len = $buf =~ m{\\[(?:a|\\z)} ? $-[0] : length($buf);\n         substr($buf, 0, $len, '');\n\n         last if $buf !~ s{^\\[a}{};\n\n         $searching = 0;\n      } else {\n         my $len = $buf =~ m{b(?:&gt;|\\z)} ? $-[0] : length($buf);\n         print substr($buf, 0, $len, '');\n\n         last if $buf !~ s{^b&gt;}{};\n\n         print(\"\\n\");\n         $searching = 1;\n      }\n   }\n}\n</code></pre>\n\n<p>Lots of assumptions made:</p>\n\n<ul>\n<li>Assumes the start tag is spelled exactly <code>[a</code>.</li>\n<li>Assumes the end tag is spelled exactly <code>b&gt;</code>.</li>\n<li>Assumes each start tag has a corresponding end tag.</li>\n<li>Assumes each end tag has a corresponding start tag.</li>\n<li>Assumes <code>[a</code> won't be found between <code>[a</code> and <code>b&gt;</code>.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 80955, "user_id": 1002260, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/5ec9c21c8d54825b04def7a41998d18d?s=128&d=identicon&r=PG", "display_name": "Steven Penny", "link": "https://stackoverflow.com/users/1002260/steven-penny"}, "is_accepted": false, "score": 0, "last_activity_date": 1443745868, "last_edit_date": 1495542339, "creation_date": 1443745868, "answer_id": 32898821, "question_id": 30882187, "link": "https://stackoverflow.com/questions/30882187/how-to-copy-matches-from-an-extremely-large-file-if-it-contains-no-newlines/32898821#32898821", "title": "How to copy matches from an extremely large file if it contains no newlines?", "body": "<p>Grep has <a href=\"http://savannah.gnu.org/forum/forum.php?forum_id=8152\" rel=\"nofollow noreferrer\">different behavior</a> starting with version 2.21:</p>\n\n<blockquote>\n  <p>When searching binary data, grep now may treat non-text bytes as line\n  terminators. This can boost performance significantly.</p>\n</blockquote>\n\n<p>So what happens now is that with binary data, all non-text bytes\n(including newlines) are treated as line terminators. If you want to change this\nbehavior, you can:</p>\n\n<ul>\n<li><p>use <code>--text</code>. This will ensure that only newlines are line terminators</p></li>\n<li><p>use <code>--null-data</code>. This will ensure that only null bytes are line terminators</p></li>\n</ul>\n\n<p><a href=\"https://stackoverflow.com/q/31467045/#31468059\">--line-regexp option with null data</a></p>\n"}], "owner": {"reputation": 1185, "user_id": 1736903, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3e6cff1838c264956235851cd685f75a?s=128&d=identicon&r=PG", "display_name": "lyrically wicked", "link": "https://stackoverflow.com/users/1736903/lyrically-wicked"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 30882918, "answer_count": 2, "score": 1, "last_activity_date": 1443745868, "creation_date": 1434514195, "last_edit_date": 1492086990, "question_id": 30882187, "link": "https://stackoverflow.com/questions/30882187/how-to-copy-matches-from-an-extremely-large-file-if-it-contains-no-newlines", "title": "How to copy matches from an extremely large file if it contains no newlines?", "body": "<p>The problem is I cannot avoid working with extremely big files which contain no newlines in them:  </p>\n\n<pre><code>&lt;a&gt;text1&lt;/a&gt;...gigabytes of data here, all in one single line...[a text to extract b&gt;\n</code></pre>\n\n<p>What should I do if I want to copy matches from this file (putting every match in a separate line, for convenience)? Say, <code>&lt;b&gt;.*?&lt;/b&gt;</code>.  </p>\n\n<p>If I use  </p>\n\n<pre><code>grep -Pzo '\\[a .*? b&gt;' path/to/input.txt &gt; path/to/output.txt\n</code></pre>\n\n<p>it will just give an error: <strong>memory exhausted</strong> (this is a related question: <a href=\"https://unix.stackexchange.com/questions/90036/grep-memory-exhausted\">grep-memory-exhausted</a>).<br>\nNeither sed nor awk won't allow to work with such a file. So, how should I extract matches from it?</p>\n"}, {"tags": ["linux", "windows", "perl", "process", "stdin"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1434517425, "post_id": 30881919, "comment_id": 49805972, "body": "@Harry Johnston, Two-way interactive communication with a child process."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1434517698, "post_id": 30881919, "comment_id": 49806067, "body": "@harry Johnston, In practice, it will be a more complex program."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1434517701, "post_id": 30881919, "comment_id": 49806068, "body": "@Nate: the reason the script as written behaves oddly, by the way, is because the script and the child process are competing for the same input source."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1434517770, "post_id": 30881919, "comment_id": 49806091, "body": "@Harry Johnston, They&#39;re not suppose to be using the same input source. Even if you fixed that, he&#39;ll still have problems."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1434518342, "post_id": 30881919, "comment_id": 49806280, "body": "@ikegami: it really doesn&#39;t sound as if <code>cat</code> is a stand-in for a more complicated program.  The OP was told that feeding data to <code>cat</code> and back &quot;makes the script non-blocking&quot;.  I&#39;m fairly sure that&#39;s nonsense."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1434519278, "post_id": 30881919, "comment_id": 49806631, "body": "Nate, my best guess is that piping the data to <code>cat</code> and back is completely unnecessary, and all you really needed to do to make the script work is disable buffering by saying <code>$| = 1</code> ; if so, that should work on both Linux and Windows.  If <code>cat</code> really is doing something magic that fixes a real problem, you&#39;re going to need to figure out exactly what the problem is and why <code>cat</code> fixes it; we&#39;ll need more information to help you with that.  Start by showing us what your original script looked like (before your colleague &quot;fixed&quot; it) and tell us what goes wrong when you use it."}, {"owner": {"reputation": 5906, "user_id": 474819, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/90031dd96e51d2025f48ce6805b550ec?s=128&d=identicon&r=PG", "display_name": "Nate Glenn", "link": "https://stackoverflow.com/users/474819/nate-glenn"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1434540890, "post_id": 30881919, "comment_id": 49819933, "body": "@HarryJohnston Indeed, cat is being used as some magic wand; the surrounding program is more complicated, but cat is used in the real thing. The fix you give makes a lot of sense, and I&#39;m going to try it tomorrow."}, {"owner": {"reputation": 5906, "user_id": 474819, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/90031dd96e51d2025f48ce6805b550ec?s=128&d=identicon&r=PG", "display_name": "Nate Glenn", "link": "https://stackoverflow.com/users/474819/nate-glenn"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1434541439, "post_id": 30881919, "comment_id": 49820292, "body": "@HarryJohnston actually this puzzles me. What is the practical difference between <code>print while(&lt;STDIN&gt;)</code> and <code>$|++; print while(&lt;STDIN&gt;)</code>? They both seem to print immediately after retrieving one line, with no buffering suffering."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1434574542, "post_id": 30881919, "comment_id": 49843365, "body": "@Nate: when you&#39;re writing to the console, buffering is automatically disabled, so there&#39;s no difference.  It does make a difference when standard output is redirected.  I was assuming that the tool that uses your script redirects your script&#39;s standard output, because that seemed the only reasonable guess as to what the original problem was."}, {"owner": {"reputation": 5906, "user_id": 474819, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/90031dd96e51d2025f48ce6805b550ec?s=128&d=identicon&r=PG", "display_name": "Nate Glenn", "link": "https://stackoverflow.com/users/474819/nate-glenn"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1434608611, "post_id": 30881919, "comment_id": 49853645, "body": "@HarryJohnston It was just buffering. The other stuff was just a (non-working) crazy workaround passed down from somewhere."}], "answers": [{"comments": [{"owner": {"reputation": 5906, "user_id": 474819, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/90031dd96e51d2025f48ce6805b550ec?s=128&d=identicon&r=PG", "display_name": "Nate Glenn", "link": "https://stackoverflow.com/users/474819/nate-glenn"}, "edited": false, "score": 0, "creation_date": 1434516651, "post_id": 30882179, "comment_id": 49805751, "body": "Why does <code>perl -pe1</code> cause deadlock? Also, <code>type CON</code> repeats whatever I type in the cmd, which I assumed was STDIN. What is it reading instead?"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 5906, "user_id": 474819, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/90031dd96e51d2025f48ce6805b550ec?s=128&d=identicon&r=PG", "display_name": "Nate Glenn", "link": "https://stackoverflow.com/users/474819/nate-glenn"}, "edited": false, "score": 0, "creation_date": 1434516944, "post_id": 30882179, "comment_id": 49805830, "body": "@Nate: CON is the console input, i.e., the keyboard."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1434517257, "post_id": 30882179, "comment_id": 49805924, "body": "<code>&lt;$com_reader&gt;</code> blocks until a newline is received from the child, but <code>child</code> won&#39;t print anything until it has 4k (Perl&#39;s old default) or 8k (Perl&#39;s new default) of data to print, which it can only get from its parent, but its parent won&#39;t send any more data because it&#39;s blocked."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1434517513, "last_edit_date": 1434517513, "creation_date": 1434514153, "answer_id": 30882179, "question_id": 30881919, "link": "https://stackoverflow.com/questions/30881919/windows-linux-child-process-stdin-differences/30882179#30882179", "title": "Windows/Linux child process STDIN differences", "body": "<p>This isn't a Windows verus Linux thing. You simply picked two awful examples.</p>\n\n<ol>\n<li><p><code>type con</code> reads from the console, not from STDIN. This can be seen using <code>type con &lt;nul</code>.</p></li>\n<li><p><code>cat</code> is extremely unusual. Buffering, on either system, is completely up to the individual application, but almost all applications work the same way, and it's different than how <code>cat</code> works. <code>cat</code> goes out of its way to make this very scenario work.</p></li>\n</ol>\n\n<p>Replace <code>cat</code> with <code>perl -pe1</code> to see the behaviour of virtually every other program:</p>\n\n<pre><code>1\nfirst line: 1\n&lt;deadlock&gt;\n</code></pre>\n\n<p>The way to convince those \"normal\" programs to line-buffer rather than block-buffer their output is to create a pseudo-tty. This is what Expect and <code>unbuffer</code> does, for example. This, of course, won't work in Windows. I'm not sure on what Windows programs base their decision to buffer, but I don't think it can be easily faked because I've never heard of a way to do it.</p>\n"}], "owner": {"reputation": 5906, "user_id": 474819, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/90031dd96e51d2025f48ce6805b550ec?s=128&d=identicon&r=PG", "display_name": "Nate Glenn", "link": "https://stackoverflow.com/users/474819/nate-glenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 1, "accepted_answer_id": 30882179, "answer_count": 1, "score": 0, "last_activity_date": 1434517513, "creation_date": 1434512233, "question_id": 30881919, "link": "https://stackoverflow.com/questions/30881919/windows-linux-child-process-stdin-differences", "title": "Windows/Linux child process STDIN differences", "body": "<p>I built a simple text processing script at work to be used by another program. When I was done, someone remembered that the script needs to not block STDIN/STDOUT for the tool using it to work right, and modified the script accordingly. The script opens *nix's <code>cat</code> in a subprocess via <a href=\"https://metacpan.org/pod/IPC::Open2\" rel=\"nofollow\"><code>IPC::Open2</code></a> and prints STDIN to it, reads it back and then processes and prints it to STDOUT. I have no idea how that makes the script non-blocking, but it apparently worked.</p>\n\n<p>I wanted it to work on Windows as well, so I changed out <code>cat</code> for <code>type CON</code>, which is a simple Windows command for printing STDIN. A sample script is below:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse IO::Handle;\nuse IPC::Open2;\n\nmy $command = ($^O eq 'MSWin32') ? 'type CON' : 'cat';\n\nmy ( $com_reader, $com_writer ) = ( IO::Handle-&gt;new, IO::Handle-&gt;new );\nopen2( $com_reader, $com_writer, $command );\n# input\nwhile (&lt;STDIN&gt;) {\n    print \"first line: $_\";\n    print $com_writer \"$_\";\n    my $line = &lt;$com_reader&gt;;\n    # ...process $line...\n\n    print \"next line: $line\";\n}\n</code></pre>\n\n<p>However the results are completely different. On Windows the STDIN streams for the main script and in the child script seem to be different, while on Linux they are the same. On Windows (I type 1 and 2 on separate lines of input):</p>\n\n<pre><code>&gt;perl test.pl\n&gt;1\nfirst line: 1\n&gt;2\nnext line: 2\n&gt;1\n&gt;2\nfirst line: 2\nnext line: 1\n&gt;1\n&gt;2\nfirst line: 2\nnext line: 1\n&gt;1\n&gt;2\nfirst line: 2\nnext line: 1\n</code></pre>\n\n<p>On Linux (same input):</p>\n\n<pre><code>&gt;perl test.pl\n&gt;1\nfirst line: 1\nnext line: 1\n&gt;2\nfirst line: 2\nnext line: 2\n&gt;1\nfirst line: 1\nnext line: 1\n&gt;2\nfirst line: 2\nnext line: 2\n</code></pre>\n\n<p>Why is the output different, and how can I make the Windows behavior match the Linux behavior? Also, why does this \"open cat in subprocess and pipe input through it\" trick work at all?</p>\n"}, {"tags": ["forms", "apache", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1434499377, "post_id": 30879984, "comment_id": 49801372, "body": "Please add the lines <code>use Data::Dumper; warn Dumper [&lt;STDIN&gt;];</code> <i>before</i> the <code>CGI-&gt;new</code> and post the output that you get. It would also be nice to see your HTML form"}, {"owner": {"reputation": 29, "user_id": 4477080, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AL0BJxeGvUk/AAAAAAAAAAI/AAAAAAAAAHM/c3VJMCeLawM/photo.jpg?sz=128", "display_name": "greggb", "link": "https://stackoverflow.com/users/4477080/greggb"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434501184, "post_id": 30879984, "comment_id": 49801829, "body": "Sorry, I didn&#39;t see this when I posted below.  I followed your instructions and now it all works.  Thanks!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434501355, "post_id": 30879984, "comment_id": 49801873, "body": "If removing that line fixed the problem then it sounds like STDIN is empty. Please can you show your HTML if you&#39;re at all interested in fixing this properly?"}, {"owner": {"reputation": 29, "user_id": 4477080, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AL0BJxeGvUk/AAAAAAAAAAI/AAAAAAAAAHM/c3VJMCeLawM/photo.jpg?sz=128", "display_name": "greggb", "link": "https://stackoverflow.com/users/4477080/greggb"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434502130, "post_id": 30879984, "comment_id": 49802087, "body": "&lt;form action=&quot;/prgs/gbc4_members_account.cgi&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;          &lt;input type=hidden name=action value=update&gt;          &lt;input type=submit value=&quot;submit&quot;&gt;          &lt;/form&gt;"}, {"owner": {"reputation": 29, "user_id": 4477080, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AL0BJxeGvUk/AAAAAAAAAAI/AAAAAAAAAHM/c3VJMCeLawM/photo.jpg?sz=128", "display_name": "greggb", "link": "https://stackoverflow.com/users/4477080/greggb"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434502170, "post_id": 30879984, "comment_id": 49802094, "body": "I did notice that after I added the file input back to the form there was an error.  The error log shows: $VAR1 = [], although this doesn&#39;t generate an internal server error.  I&#39;m not familiar with data::dumper and how it works, or I would have mentioned this sooner."}, {"owner": {"reputation": 29, "user_id": 4477080, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AL0BJxeGvUk/AAAAAAAAAAI/AAAAAAAAAHM/c3VJMCeLawM/photo.jpg?sz=128", "display_name": "greggb", "link": "https://stackoverflow.com/users/4477080/greggb"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434502603, "post_id": 30879984, "comment_id": 49802204, "body": "Maybe this will be more useful to you:"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434502979, "post_id": 30879984, "comment_id": 49802296, "body": "Hmm nothing wrong there that I can see. Would you add the <code>Dumper</code> code above and tell me what output you get when you have a moment?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434503470, "post_id": 30879984, "comment_id": 49802428, "body": "By the way, that code will stop the program from working and should be added only to see what data the form is sending and then removed again. Sorry that I didn&#39;t make that clear"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 4477080, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AL0BJxeGvUk/AAAAAAAAAAI/AAAAAAAAAHM/c3VJMCeLawM/photo.jpg?sz=128", "display_name": "greggb", "link": "https://stackoverflow.com/users/4477080/greggb"}, "edited": false, "score": 0, "creation_date": 1434503824, "post_id": 30880431, "comment_id": 49802532, "body": "Update:  now it&#39;s working just fine.  I have no idea why.  Here&#39;s the exact form: &lt;form action=&quot;/prgs/gbc4_members_account.cgi&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;          &lt;input type=&quot;hidden&quot; name=&quot;action&quot; value=&quot;update&quot;&gt;          &lt;input type=&quot;file&quot; name=&quot;test&quot;&gt;          &lt;input type=&quot;submit&quot; value=&quot;submit&quot;&gt;          &lt;/form&gt;  Again, no errors."}, {"owner": {"reputation": 2043, "user_id": 2335842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda02075da146f14d3d77844c9d5056f?s=128&d=identicon&r=PG", "display_name": "optional", "link": "https://stackoverflow.com/users/2335842/optional"}, "edited": false, "score": 0, "creation_date": 1434504119, "post_id": 30880431, "comment_id": 49802604, "body": "please update your original question and put the html form there;  also please use  this version for dumper diagnostics <code>Data::Dumper-&gt;new([join &#39;&#39;, &lt;STDIN&gt;])-&gt;Useqq(1)-&gt;Dump</code>"}, {"owner": {"reputation": 29, "user_id": 4477080, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AL0BJxeGvUk/AAAAAAAAAAI/AAAAAAAAAHM/c3VJMCeLawM/photo.jpg?sz=128", "display_name": "greggb", "link": "https://stackoverflow.com/users/4477080/greggb"}, "reply_to_user": {"reputation": 2043, "user_id": 2335842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda02075da146f14d3d77844c9d5056f?s=128&d=identicon&r=PG", "display_name": "optional", "link": "https://stackoverflow.com/users/2335842/optional"}, "edited": false, "score": 0, "creation_date": 1434508364, "post_id": 30880431, "comment_id": 49803629, "body": "The data::dumper statement you told me to use doesn&#39;t work.  Can&#39;t locate object method &quot;new&quot; via package &quot;Data::Dumper&quot;"}, {"owner": {"reputation": 2043, "user_id": 2335842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda02075da146f14d3d77844c9d5056f?s=128&d=identicon&r=PG", "display_name": "optional", "link": "https://stackoverflow.com/users/2335842/optional"}, "edited": false, "score": 0, "creation_date": 1434525977, "post_id": 30880431, "comment_id": 49809973, "body": "If you remove <code>use Data::Dumper;</code> then that might happen"}], "tags": [], "owner": {"reputation": 29, "user_id": 4477080, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AL0BJxeGvUk/AAAAAAAAAAI/AAAAAAAAAHM/c3VJMCeLawM/photo.jpg?sz=128", "display_name": "greggb", "link": "https://stackoverflow.com/users/4477080/greggb"}, "is_accepted": false, "score": 0, "last_activity_date": 1434503120, "last_edit_date": 1434503120, "creation_date": 1434500949, "answer_id": 30880431, "question_id": 30879984, "link": "https://stackoverflow.com/questions/30879984/unexpected-perl-cgi-pm-error-when-posting-from-multipart-form-data/30880431#30880431", "title": "unexpected Perl CGI.pm error when posting from multipart/form-data", "body": "<p>Okay, here's a more extensive reading of the error log after I added a file input to the form:</p>\n\n<pre><code>------WebKitFormBoundaryVLrUuePcs8gqhOtJ\\r, referer: http://gbc4.loc/prgs/gbc4_members_account.cgi\n[Tue Jun 16 17:56:49 2015] [error] [client 127.0.0.1] ',, referer: http://gbc4.loc/prgs/gbc4_members_account.cgi\n[Tue Jun 16 17:56:49 2015] [error] [client 127.0.0.1] 'Content-Disposition: form-data; name=\"action\"\\r, referer: http://gbc4.loc/prgs/gbc4_members_account.cgi\n[Tue Jun 16 17:56:49 2015] [error] [client 127.0.0.1] ',, referer: http://gbc4.loc/prgs/gbc4_members_account.cgi\n[Tue Jun 16 17:56:49 2015] [error] [client 127.0.0.1] '\\r, referer: http://gbc4.loc/prgs/gbc4_members_account.cgi\n[Tue Jun 16 17:56:49 2015] [error] [client 127.0.0.1] ',, referer: http://gbc4.loc/prgs/gbc4_members_account.cgi\n[Tue Jun 16 17:56:49 2015] [error] [client 127.0.0.1] 'update\\r, referer: http://gbc4.loc/prgs/gbc4_members_account.cgi\n[Tue Jun 16 17:56:49 2015] [error] [client 127.0.0.1] ',, referer: http://gbc4.loc/prgs/gbc4_members_account.cgi\n[Tue Jun 16 17:56:49 2015] [error] [client 127.0.0.1] '------WebKitFormBoundaryVLrUuePcs8gqhOtJ\\r, referer: http://gbc4.loc/prgs/gbc4_members_account.cgi\n[Tue Jun 16 17:56:49 2015] [error] [client 127.0.0.1] ',, referer: http://gbc4.loc/prgs/gbc4_members_account.cgi\n[Tue Jun 16 17:56:49 2015] [error] [client 127.0.0.1] 'Content-Disposition: form-data; name=\"test\"; filename=\"\"\\r, referer: http://gbc4.loc/prgs/gbc4_members_account.cgi\n[Tue Jun 16 17:56:49 2015] [error] [client 127.0.0.1] ',, referer: http://gbc4.loc/prgs/gbc4_members_account.cgi\n[Tue Jun 16 17:56:49 2015] [error] [client 127.0.0.1] 'Content-Type: application/octet-stream\\r, referer: http://gbc4.loc/prgs/gbc4_members_account.cgi\n[Tue Jun 16 17:56:49 2015] [error] [client 127.0.0.1] ',, referer: http://gbc4.loc/prgs/gbc4_members_account.cgi\n[Tue Jun 16 17:56:49 2015] [error] [client 127.0.0.1] '\\r, referer: http://gbc4.loc/prgs/gbc4_members_account.cgi\n[Tue Jun 16 17:56:49 2015] [error] [client 127.0.0.1] ',, referer: http://gbc4.loc/prgs/gbc4_members_account.cgi\n[Tue Jun 16 17:56:49 2015] [error] [client 127.0.0.1] '\\r, referer: http://gbc4.loc/prgs/gbc4_members_account.cgi\n[Tue Jun 16 17:56:49 2015] [error] [client 127.0.0.1] ',, referer: http://gbc4.loc/prgs/gbc4_members_account.cgi\n[Tue Jun 16 17:56:49 2015] [error] [client 127.0.0.1] '------WebKitFormBoundaryVLrUuePcs8gqhOtJ--\\r, referer: http://gbc4.loc/prgs/gbc4_members_account.cgi\n[Tue Jun 16 17:56:49 2015] [error] [client 127.0.0.1] ', referer: http://gbc4.loc/prgs/gbc4_members_account.cgi\n[Tue Jun 16 17:56:49 2015] [error] [client 127.0.0.1] ];, referer: http://gbc4.loc/prgs/gbc4_members_account.cgi\n[Tue Jun 16 17:56:50 2015] [error] [client 127.0.0.1] $VAR1 = [];, referer: http://gbc4.loc/prgs/gbc4_members_account.cgi\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 4477080, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AL0BJxeGvUk/AAAAAAAAAAI/AAAAAAAAAHM/c3VJMCeLawM/photo.jpg?sz=128", "display_name": "greggb", "link": "https://stackoverflow.com/users/4477080/greggb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 951, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1434522422, "creation_date": 1434497640, "last_edit_date": 1434522422, "question_id": 30879984, "link": "https://stackoverflow.com/questions/30879984/unexpected-perl-cgi-pm-error-when-posting-from-multipart-form-data", "title": "unexpected Perl CGI.pm error when posting from multipart/form-data", "body": "<p>I've solved this problem twice before with a quick fix.  Now I can't remember what that quick fix is, and I'd like to fix it right anyway.</p>\n\n<p>When I post from a form of <code>enctype=\"multipart/form-data\"</code>, and then create a new CGI object in the target script, i.e.:</p>\n\n<pre><code>my $query = new CGI;\n</code></pre>\n\n<p>I get the following error in my apache error log:</p>\n\n<pre><code>Malformed multipart POST: data truncated, referer: http...\n</code></pre>\n\n<p>I've confirmed this is where the error is occurring by placing die statements before and after the above mentioned statement.  And this the exact problem I've had before.</p>\n\n<p>I'm running on Windows XP, Perl 5.8.8.  I've gone through various linux servers over the years and have never had this problem on one of them.</p>\n\n<p>The fix to the problem before was to downgrade to a slightly older version of CGI.pm.  Today I thought I'd try upgrading to the most recent version, since it's been some time since I've tried a newer version.  But CGI.pm 4.20 still yields the same exact error.  </p>\n\n<p>It doesn't matter if there's any data on the form.  When it posts the error is generated.  And without the <code>enctype=\"multipart/form-data\"</code> the error doesn't occur.</p>\n\n<p>I'm reluctant to upgrade to a newer version of Perl because I have things just exactly where I want them and hate to risk messing that up.</p>\n\n<p>Any ideas or thoughts?</p>\n\n<p><strong>Edit:</strong> It doesn't matter what browser I use, and also I can't remember what version of CGI.pm I downgraded to, which is why I said I can't remember the quickfix. </p>\n\n<p><strong>Edit2:</strong> Here's the exact code for my form:</p>\n\n<pre><code>&lt;form action=\"/prgs/gbc4_members_account.cgi\" method=\"post\"\nenctype=\"multipart/form-data\"&gt; &lt;input type=\"hidden\" name=\"action\"\nvalue=\"update\"&gt; &lt;input type=\"file\" name=\"test\"&gt; &lt;input type=\"submit\"\nvalue=\"submit\"&gt; &lt;/form&gt;\n</code></pre>\n\n<p>And now that it's not causing internal server errors, I'm unable to create a valid filehandle to the file I try to upload on the form.  So the problem isn't solved afterall. I guess that was just my wishful thinking.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 6909, "user_id": 4454454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6UgUs.jpg?s=128&g=1", "display_name": "MaxZoom", "link": "https://stackoverflow.com/users/4454454/maxzoom"}, "edited": false, "score": 0, "creation_date": 1434487153, "post_id": 30877626, "comment_id": 49796433, "body": "There is 5 <code>the</code> words, and you should use match not split"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1434487388, "post_id": 30877626, "comment_id": 49796578, "body": "You should get 7 on the first, 6 on the second. Try a <code>print @splitter</code> or better yet use Data::Dumper."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1434488718, "last_edit_date": 1434488718, "creation_date": 1434487465, "answer_id": 30877813, "question_id": 30877626, "link": "https://stackoverflow.com/questions/30877626/counting-occurrences-of-a-word-in-a-string-in-perl/30877813#30877813", "title": "Counting occurrences of a word in a string in Perl", "body": "<p>With <code>split</code>, you're counting the substrings between the the's. Use match instead:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $regex = qr/[Tt]he/;\n\nfor my $string ('Hello the how are you the wanna work on the project but i the u the The',\n                'Hello the how are you the wanna work on the project but i the u the',\n                'the theological cathedral'\n               ) {\n    my $count = () = $string =~ /$regex/g;\n    print $count, \"\\n\";\n\n    my @between = split /$regex/, $string;\n    print 0 + @between, \"\\n\";\n\n    print join '|', @between;\n    print \"\\n\";\n}\n</code></pre>\n\n<p>Note that both methods return the same number for the two inputs you mentioned (and the first one returns 6, not 7).</p>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 4371408, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/64e67b7c1fda57d42e50c0a05b3c357b?s=128&d=identicon&r=PG&f=1", "display_name": "Amber O", "link": "https://stackoverflow.com/users/4371408/amber-o"}, "edited": false, "score": 0, "creation_date": 1434489525, "post_id": 30877817, "comment_id": 49797780, "body": "Thanks for all the answers. It gives me an insight on what I am doing. I have learn a lot. :)"}], "tags": [], "owner": {"reputation": 2927, "user_id": 3863903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f5bdf8cace56e1ded5d3a56730b8871?s=128&d=identicon&r=PG&f=1", "display_name": "Rakholiya Jenish", "link": "https://stackoverflow.com/users/3863903/rakholiya-jenish"}, "is_accepted": false, "score": 0, "last_activity_date": 1434487477, "creation_date": 1434487477, "answer_id": 30877817, "question_id": 30877626, "link": "https://stackoverflow.com/questions/30877626/counting-occurrences-of-a-word-in-a-string-in-perl/30877817#30877817", "title": "Counting occurrences of a word in a string in Perl", "body": "<p>What you need is 'countof' operator to count the number of matches:</p>\n\n<pre><code>my $string = \"Hello the how are you the wanna work on the project but i the u the The\";\nmy $count = () = $string =~/[Tt]he/g;\nprint $count;\n</code></pre>\n\n<p>If you want to select only the word <code>the</code> or <code>The</code>, add word boundary:</p>\n\n<pre><code>my $string = \"Hello the how are you the wanna work on the project but i the u the The\";\nmy $count = () = $string =~/\\b[Tt]he\\b/g;\nprint $count;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1434487589, "creation_date": 1434487589, "answer_id": 30877853, "question_id": 30877626, "link": "https://stackoverflow.com/questions/30877626/counting-occurrences-of-a-word-in-a-string-in-perl/30877853#30877853", "title": "Counting occurrences of a word in a string in Perl", "body": "<p>I get the correct number - 6 - for the first string</p>\n\n<p>However your method is wrong, because if you count the number of pieces you get by splitting on the regex pattern it will give you different values depending on whether the word appears at the beginning of the string. You should also put word boundaries <code>\\b</code> into your regular expression to prevent the regex from matching something like <code>theory</code></p>\n\n<p>Also, it is unnecessary to escape the square brackets, and you can use the <code>/i</code> modifier to do a case-independent match</p>\n\n<p>Try something like this instead</p>\n\n<pre><code>use strict;\nuse warnings;\n\nprint 'Enter the String: ';\nmy $inputline = &lt;&gt;;\nchomp $inputline;\n\nmy $regex = 'the';\n\nif ( $inputline ne '' ) {\n    my @matches = $inputline =~ /\\b$regex\\b/gi;\n    print scalar @matches, \" occurrences\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5390, "user_id": 5845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33c08292da6607bf653d8b42488c4003?s=128&d=identicon&r=PG", "display_name": "Liudvikas Bukys", "link": "https://stackoverflow.com/users/5845/liudvikas-bukys"}, "is_accepted": false, "score": 1, "last_activity_date": 1434496085, "last_edit_date": 1434496085, "creation_date": 1434490527, "answer_id": 30878655, "question_id": 30877626, "link": "https://stackoverflow.com/questions/30877626/counting-occurrences-of-a-word-in-a-string-in-perl/30878655#30878655", "title": "Counting occurrences of a word in a string in Perl", "body": "<p>The following snippet uses a code side-effect to increment a counter, followed by an always-failing match to keep searching.  It produces the correct answer for matches that overlap (e.g. \"aaaa\" contains \"aa\" 3 times, not 2).  The split-based answers don't get that right.</p>\n\n<pre><code>my $i;\nmy $string;\n\n$i = 0;\n$string = \"aaaa\";\n$string =~ /aa(?{$i++})(?!)/;\nprint \"'$string' contains /aa/ x $i (should be 3)\\n\";\n\n$i = 0;\n$string = \"Hello the how are you the wanna work on the project but i the u the The\";\n$string =~ /[tT]he(?{$i++})(?!)/;\nprint \"'$string' contains /[tT]he/ x $i (should be 6)\\n\";\n\n$i = 0;\n$string = \"Hello the how are you the wanna work on the project but i the u the\";\n$string =~ /[tT]he(?{$i++})(?!)/;\nprint \"'$string' contains /[tT]he/ x $i (should be 5)\\n\";\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 4371408, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/64e67b7c1fda57d42e50c0a05b3c357b?s=128&d=identicon&r=PG&f=1", "display_name": "Amber O", "link": "https://stackoverflow.com/users/4371408/amber-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1041, "favorite_count": 0, "accepted_answer_id": 30877853, "answer_count": 4, "score": 0, "last_activity_date": 1434511711, "creation_date": 1434486756, "last_edit_date": 1434488446, "question_id": 30877626, "link": "https://stackoverflow.com/questions/30877626/counting-occurrences-of-a-word-in-a-string-in-perl", "title": "Counting occurrences of a word in a string in Perl", "body": "<p>I am trying to find out the number of occurrences of \"The/the\". Below is the code I tried\"</p>\n\n<pre><code>print (\"Enter the String.\\n\");\n$inputline = &lt;STDIN&gt;;\nchop($inputline);\n$regex=\"\\[Tt\\]he\";\nif($inputline ne \"\")\n{\n\n @splitarr= split(/$regex/,$inputline);\n}\n\n$scalar=@splitarr;\nprint $scalar;\n</code></pre>\n\n<p>The string is :</p>\n\n<blockquote>\n  <p>Hello the how are you the wanna work on the project but i the u the\n  The</p>\n</blockquote>\n\n<p>The output that it gives is 7. However with the string : </p>\n\n<blockquote>\n  <p>Hello the how are you the wanna work on the project but i the u the</p>\n</blockquote>\n\n<p>the output is 5. I suspect my regex. Can anyone help in pointing out what's wrong. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 862, "user_id": 3586150, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1f0969599955a953e592034929ed7a23?s=128&d=identicon&r=PG", "display_name": "Neil H Watson", "link": "https://stackoverflow.com/users/3586150/neil-h-watson"}, "edited": false, "score": 3, "creation_date": 1434477838, "post_id": 30874698, "comment_id": 49791160, "body": "Show some work. What have you tried?"}, {"owner": {"reputation": 11, "user_id": 5016519, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mynqvUaHwY4/AAAAAAAAAAI/AAAAAAAAAXk/TcxwVpa1Z_4/photo.jpg?sz=128", "display_name": "Punya", "link": "https://stackoverflow.com/users/5016519/punya"}, "reply_to_user": {"reputation": 862, "user_id": 3586150, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1f0969599955a953e592034929ed7a23?s=128&d=identicon&r=PG", "display_name": "Neil H Watson", "link": "https://stackoverflow.com/users/3586150/neil-h-watson"}, "edited": false, "score": 0, "creation_date": 1434478043, "post_id": 30874698, "comment_id": 49791286, "body": "# General format date  my $date_format = $workbook-&gt;add_format();  $date_format-&gt;set_align(&#39;left&#39;); $date_format-&gt;set_num_format(&#39;mm/dd/yyyy&#39;);  if ($col_format)\t{  \tprint &quot;Col Type    : $col_format\\n&quot;;   \t\tif ($col_format eq &quot;date_format2&quot;)\t{  \t\t\t$date_format-&gt;set_num_format(&#39;mm/dd/yyyy&#39;); \t\t\t\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t}else{  \t\t\t$date_format-&gt;set_num_format(&#39;mm/dd/yyyy&#39;);  \t\t\t\t\t\t}  \t\t\t}"}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1434479077, "post_id": 30874698, "comment_id": 49791924, "body": "Please show the html and  script in the question."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5000560"}, "is_accepted": false, "score": 0, "last_activity_date": 1434549504, "last_edit_date": 1434549504, "creation_date": 1434485521, "answer_id": 30877245, "question_id": 30874698, "link": "https://stackoverflow.com/questions/30874698/need-to-extract-only-date-from-html-format-file-to-xlsx-using-perl/30877245#30877245", "title": "Need to Extract only Date from HTML format file to XLSx using Perl", "body": "<p>I have given a sample code which converts the cell format. It would be better if you share the HTML and the code you are trying to achieve.</p>\n\n<pre><code>$worksheet = $workbook-&gt;add_worksheet();\n$date_format = $workbook-&gt;add_format();\n$date_format-&gt;set_num_format('mm/dd/yy');\n$worksheet-&gt;write(0,  0, 36892.521, $date_format); \n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5016519, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mynqvUaHwY4/AAAAAAAAAAI/AAAAAAAAAXk/TcxwVpa1Z_4/photo.jpg?sz=128", "display_name": "Punya", "link": "https://stackoverflow.com/users/5016519/punya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434549504, "creation_date": 1434477105, "last_edit_date": 1434486447, "question_id": 30874698, "link": "https://stackoverflow.com/questions/30874698/need-to-extract-only-date-from-html-format-file-to-xlsx-using-perl", "title": "Need to Extract only Date from HTML format file to XLSx using Perl", "body": "<p>Kindly Help me in extracting only date from the HTML format to XLSX format using Perl.</p>\n\n<p>In HTML format the date is having with time in the format of \"2005-08-16 15:23:13.933\"</p>\n\n<p>I want to extract it as 2005-08-16.</p>\n\n<p>This is what I have written so far</p>\n\n<pre><code># General format date\n\nmy $date_format = $workbook-&gt;add_format();\n$date_format-&gt;set_align('left');\n$date_format-&gt;set_num_format('mm/dd/yyyy');\n\nif ( $col_format ) {\n\n    print \"Col Type : $col_format\\n\";\n\n    if ( $col_format eq \"date_format2\" ) {\n        $date_format-&gt;set_num_format('mm/dd/yyyy');\n    }\n    else {\n        $date_format-&gt;set_num_format('mm/dd/yyyy');\n    }\n}\n</code></pre>\n"}, {"tags": ["arrays", "perl", "hash"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5016189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a1a521ca21c4e0ab6928d8998221b80?s=128&d=identicon&r=PG&f=1", "display_name": "earfriend", "link": "https://stackoverflow.com/users/5016189/earfriend"}, "edited": false, "score": 0, "creation_date": 1434491231, "post_id": 30877264, "comment_id": 49798580, "body": "I am getting errors Use of uninitialized value $version in hash element at D:\\Home\\emahou\\test.pl line 17, &lt;$_[...]&gt; line 1. and it goes to line 30. @Borodin"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 13, "user_id": 5016189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a1a521ca21c4e0ab6928d8998221b80?s=128&d=identicon&r=PG&f=1", "display_name": "earfriend", "link": "https://stackoverflow.com/users/5016189/earfriend"}, "edited": false, "score": 0, "creation_date": 1434495044, "post_id": 30877264, "comment_id": 49800053, "body": "@earfriend: Looks like <code>imbfilelist.txt</code> isn&#39;t as you described it. Please show your real file"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1434485930, "last_edit_date": 1434485930, "creation_date": 1434485588, "answer_id": 30877264, "question_id": 30872892, "link": "https://stackoverflow.com/questions/30872892/i-need-to-create-an-out-files-out-of-my-hash-keys-and-store-a-file-list-to-the-f/30877264#30877264", "title": "I need to create an out files out of my hash keys and store a file list to the files based on my keys", "body": "<p>This seems to do as you ask</p>\n\n<p>It works by building a hash <code>%filelist</code> with keys from the second column of <code>imbfilelist.txt</code> and values <code>from</code>, <code>to</code>, <code>fh</code> (the output file handle) and <code>count</code> (the number of records that matched this range</p>\n\n<p>Then the <code>imbrange.txt</code> is read a line at a time, the nine-digit code extracted, and compared with the <code>from</code> and <code>to</code> values of each element of the <code>%filelist</code> hash. If a match is found then the line is printed to the corresponding file handle and the counter is incremented. If the code from this line doesn't match any of the ranges then <code>$none_matched</code> is incremented for output in the summary</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\nuse autodie;\n\nchdir 'D:\\Home\\emahou';\n\n# Build a hash of `version` strings with their `from` and `to` values\n\nopen my $fh, '&lt;', 'imbfilelist.txt';\nmy %filelist;\nwhile ( &lt;$fh&gt; ) {\n  chomp;\n  my ($version, $from, $to) = (split /\\s*,\\s*/)[1,2,3];\n  $filelist{$version} = { from =&gt; $from, to =&gt; $to };\n}\n\n# Open an output file for each item and set the count to zero\n\nwhile ( my ($version, $info) = each %filelist ) {\n  open $info-&gt;{fh}, '&gt;', \"$version.txt\";\n  $info-&gt;{count} = 0;\n}\n\n# Filter the data in the range file, printing to the\n# appropriate output file and keeping count\n\nopen $fh, '&lt;', 'imbrange.txt';\nmy $none_matched = 0;\nwhile ( my $line = &lt;$fh&gt; ) {\n  next unless $line =~ /\\S/;\n  chomp $line;\n  my $code = substr $line, 11, 9;\n  my $matched = 0;\n  while ( my ($version, $info) = each %filelist ) {\n    next unless $code &gt;= $info-&gt;{from} and $code &lt;= $info-&gt;{to};\n    print { $info-&gt;{fh} } $line, \"\\n\";\n    ++$info-&gt;{count};\n    ++$matched;\n  }\n  ++$none_matched unless $matched;\n}\n\nclose $_-&gt;{fh} for values %filelist;\n\n# Print the summary\n\nwhile ( my ($version, $info) = each %filelist ) {\n   print \"$version IMB Count: $info-&gt;{count}\\n\"\n}\nprint \"None matched IMB Count: $none_matched\\n\"\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>selfmail IMB Count: 14\nfolded IMB Count: 15\nNone matched IMB Count: 1\n</code></pre>\n\n<p><strong>folded.txt</strong></p>\n\n<pre><code>0026110795165557564528452972062\n0026110795165557648628452974959\n0026110795182749420290503162401\n0026110795182749566690703875348\n0026110795182750564290503365856\n0026110795182751155490713282618\n0026110795182751819190503415474\n0026110795182752054790503331977\n0026110795182752888194578410931\n0026110795182753115893308242647\n0026110795182753522398248322033\n0026110795182753601890723246006\n0026110795182754156995403760702\n0026110795182754174597213102232\n0026110795182754408698248770395\n</code></pre>\n\n<p><strong>selfmail.txt</strong></p>\n\n<pre><code>0026110795182754919290713221614\n0026110795182755128698248922635\n0026110795182755566790713334451\n0026110795182755669490713213633\n0026110795182755806390507009696\n0026110795182756204890713212248\n0026110795182756217690713273839\n0026110795182756259998248961157\n0026110795182756309595403769515\n0026110795182756708894578164887\n0026110795182756829090713282238\n0026110795182757082791367220156\n0026110795182757130090713274108\n0026110795182757297798248934527\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5016189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a1a521ca21c4e0ab6928d8998221b80?s=128&d=identicon&r=PG&f=1", "display_name": "earfriend", "link": "https://stackoverflow.com/users/5016189/earfriend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1434485930, "creation_date": 1434471167, "last_edit_date": 1434483264, "question_id": 30872892, "link": "https://stackoverflow.com/questions/30872892/i-need-to-create-an-out-files-out-of-my-hash-keys-and-store-a-file-list-to-the-f", "title": "I need to create an out files out of my hash keys and store a file list to the files based on my keys", "body": "<p>I have two files the first one has a number range and a version name, the number range is retrieved from the second file which is consist of a list number. From the second file I am looking for the numbers start in position 11 for 9 char then compare it with my first file \"the range file\" then print to the screen the name of the version and how many matches.</p>\n\n<p>My first file looks like this</p>\n\n<pre><code>imb,folded   ,655575645,827544086\nimb,selfmail ,827549192,827572977\n</code></pre>\n\n<p>My second file looks like this</p>\n\n<pre><code>0026110795165557564528452972062\n0026110795165557648628452974959\n0026110795182749420290503162401\n0026110795182749566690703875348\n0026110795182750564290503365856\n0026110795182751155490713282618\n0026110795182751819190503415474\n0026110795182752054790503331977\n0026110795182752888194578410931\n0026110795182753115893308242647\n0026110795182753522398248322033\n0026110795182753601890723246006\n0026110795182754156995403760702\n0026110795182754174597213102232\n0026110795182754408698248770395\n0026110795182754919290713221614\n0026110795182755128698248922635\n0026110795182755566790713334451\n0026110795182755669490713213633\n0026110795182755806390507009696\n0026110795182756204890713212248\n0026110795182756217690713273839\n0026110795182756259998248961157\n0026110795182756309595403769515\n0026110795182756708894578164887\n0026110795182756829090713282238\n0026110795182757082791367220156\n0026110795182757130090713274108\n0026110795182757297798248934527\n0026110795182757370277063564556\n</code></pre>\n\n<p>My output now looks like this</p>\n\n<pre><code>folded IMB Count: 15\nNo Matched IMB Count: 1\nselfmail IMB Count: 14\n</code></pre>\n\n<p>I need to create files with a name based on the version name in my first array, then to print to each files the original value for what it match. For instance folded has 15 match I need to print the original number from the file list to a file with a name of <code>folded.txt</code></p>\n\n<p>my code is</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings\nuse strict\nuse feature qw{ say };\n\nsub trimspaces {\n  my @argsarray = @_;\n  $argsarray[0] =~ s/^\\s+//;\n  $argsarray[0] =~ s/\\s+$//;\n  return $argsarray[0];\n}\n\nopen(INPUT  , \"&lt; D:\\\\Home\\\\emahou\\\\imbfilelist.txt\") or die $!;\nopen(INPUT2 , \"&lt; D:\\\\Home\\\\emahou\\\\imbrange.txt\") or die $!;\n\nmy $n;\nmy @fh;\nmy $value;\nmy @ranges;\nmy $isMatch;\nmy $printed;\nmy $fVersion;\nmy %versionHash=();\n\nwhile (&lt;INPUT2&gt;) {\n    chomp;\n\n    my ($version, $from, $to) = (split /,/)[ 1, 2, 3 ];\n    push @ranges, [ $from, $to, trimspaces($version)];\n\n    if (!exists $versionHash{trimspaces($version)})\n    {\n      $versionHash{trimspaces($version)}=0;\n    }\n}\n\n$versionHash{\"No Matched\"}=0;\n\nclose INPUT2;\n\nwhile (&lt;INPUT&gt;) {\n    $isMatch=0;\n    $n = substr($_,12-1,9);\n\n    for my $r (@ranges) {\n        if ( $n &gt;= $r-&gt;[0] &amp;&amp; $n &lt;= $r-&gt;[1]) {\n          $fVersion=$r-&gt;[2];\n\n          if (exists $versionHash{$fVersion}) {\n            $versionHash{$fVersion}++;\n          }\n\n          $isMatch=1;\n\n          last;\n        }\n    }\n\n    if (!$isMatch) {\n      $versionHash{\"No Matched\"}++;\n    }\n}\n\nforeach my $key (keys %versionHash) {\n  print STDOUT \"$key IMB Count: \" . $versionHash{$key} . \"\\n\";\n}\n\nclose INPUT;\n</code></pre>\n"}, {"tags": ["mysql", "perl", "sed", "solaris"], "comments": [{"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 2, "creation_date": 1434467758, "post_id": 30871550, "comment_id": 49784890, "body": "it is not clear what you want here. Provide a more clear sample of input, desired output and, of course, what you tried so far."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434467795, "post_id": 30871550, "comment_id": 49784910, "body": "Please show your code and describe the problems you are having with it"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 1391450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7baf4d6dc2e6469a9f06149d942cb520?s=128&d=identicon&r=PG", "display_name": "user1391450", "link": "https://stackoverflow.com/users/1391450/user1391450"}, "edited": false, "score": 0, "creation_date": 1434468620, "post_id": 30871689, "comment_id": 49785523, "body": "how should i give the file as an input., i tried : cat /tmp/caa_dump.sql | sed -n &#39;1,/-- Final view structure for view view_oss_user/p&#39; &gt; /tmp/new_test.sql   but it is stil printing the whole content"}, {"owner": {"reputation": 1637, "user_id": 2397101, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2f71dd495d236d8233ffda10596a011e?s=128&d=identicon&r=PG&f=1", "display_name": "josifoski", "link": "https://stackoverflow.com/users/2397101/josifoski"}, "reply_to_user": {"reputation": 13, "user_id": 1391450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7baf4d6dc2e6469a9f06149d942cb520?s=128&d=identicon&r=PG", "display_name": "user1391450", "link": "https://stackoverflow.com/users/1391450/user1391450"}, "edited": false, "score": 0, "creation_date": 1434468993, "post_id": 30871689, "comment_id": 49785800, "body": "looks good, check entered pattern (one character can blown it). If you know where is that line, print it to be sure"}, {"owner": {"reputation": 1637, "user_id": 2397101, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2f71dd495d236d8233ffda10596a011e?s=128&d=identicon&r=PG&f=1", "display_name": "josifoski", "link": "https://stackoverflow.com/users/2397101/josifoski"}, "reply_to_user": {"reputation": 13, "user_id": 1391450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7baf4d6dc2e6469a9f06149d942cb520?s=128&d=identicon&r=PG", "display_name": "user1391450", "link": "https://stackoverflow.com/users/1391450/user1391450"}, "edited": false, "score": 0, "creation_date": 1434469057, "post_id": 30871689, "comment_id": 49785831, "body": "but you can also use sed -n &#39;1,/pattern/p&#39; &lt;inputfile &gt;outputfile"}], "tags": [], "owner": {"reputation": 1637, "user_id": 2397101, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2f71dd495d236d8233ffda10596a011e?s=128&d=identicon&r=PG&f=1", "display_name": "josifoski", "link": "https://stackoverflow.com/users/2397101/josifoski"}, "is_accepted": true, "score": 2, "last_activity_date": 1434470887, "last_edit_date": 1434470887, "creation_date": 1434467889, "answer_id": 30871689, "question_id": 30871550, "link": "https://stackoverflow.com/questions/30871550/how-to-match-and-remove-the-content-preceding-it-from-a-file-in-unix/30871689#30871689", "title": "How to match and remove the content preceding it from a file in unix", "body": "<p>with GNU sed  </p>\n\n<pre><code>sed -n '1,/-- Final view structure for view `view_oss_user`/p'\n</code></pre>\n\n<p>this will print lines from 1 till pattern found, others will not be printed</p>\n\n<p>or if you want to exclude pattern line then  </p>\n\n<pre><code>sed -n '1,/-- Final view structure for view `view_oss_user`/p' | sed '$d'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 862, "user_id": 3586150, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1f0969599955a953e592034929ed7a23?s=128&d=identicon&r=PG", "display_name": "Neil H Watson", "link": "https://stackoverflow.com/users/3586150/neil-h-watson"}, "is_accepted": false, "score": 0, "last_activity_date": 1434467999, "creation_date": 1434467999, "answer_id": 30871724, "question_id": 30871550, "link": "https://stackoverflow.com/questions/30871550/how-to-match-and-remove-the-content-preceding-it-from-a-file-in-unix/30871724#30871724", "title": "How to match and remove the content preceding it from a file in unix", "body": "<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy @new_dump;\nmy $flag = 0;\n\nwhile(&lt;DATA&gt;)\n{\n   if ( m/-- Final view structure for view `view_oss_user`/ )\n   {\n      $flag++;\n   }\n   push @new_dump, $_ unless $flag &gt; 0;\n}\n\nprint Dumper( \\@new_dump );\n\n__DATA__\nrom `target` */;\n/*!50001 SET character_set_client      = @saved_cs_client */;\n/*!50001 SET character_set_results     = @saved_cs_results */;\n/*!50001 SET collation_connection      = @saved_col_connection */;\n\n--\n-- Final view structure for view `view_oss_user`\n--\n\n/*!50001 DROP VIEW IF EXISTS `view_oss_user`*/;\n/*!50001 SET @saved_cs_client          = @@character_set_client */;\n/*!50001 SET @saved_cs_results         = @@character_set_results */;\n/*!50001 SET @saved_col_connection     = @@collation_connection */;\n/*!50001 SET character_set_client      = latin1 */;\n/*!50001 SET character_set_results     = latin1 */;\n</code></pre>\n\n<p>Run it:</p>\n\n<pre><code> ./perl \n$VAR1 = [\n          'rom `target` */;\n',\n          '/*!50001 SET character_set_client      = @saved_cs_client */;\n',\n          '/*!50001 SET character_set_results     = @saved_cs_results */;\n',\n          '/*!50001 SET collation_connection      = @saved_col_connection */;\n',\n          '\n',\n          '--\n'\n        ];\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 1391450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7baf4d6dc2e6469a9f06149d942cb520?s=128&d=identicon&r=PG", "display_name": "user1391450", "link": "https://stackoverflow.com/users/1391450/user1391450"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "closed_date": 1434474278, "accepted_answer_id": 30871689, "answer_count": 2, "score": -2, "last_activity_date": 1434488519, "creation_date": 1434467485, "last_edit_date": 1434488519, "question_id": 30871550, "link": "https://stackoverflow.com/questions/30871550/how-to-match-and-remove-the-content-preceding-it-from-a-file-in-unix", "closed_reason": "Not suitable for this site", "title": "How to match and remove the content preceding it from a file in unix", "body": "<p>I have a mysql dump file, and i want to remove the content of the file after \"-- Final view structure for view <code>view_oss_user</code>\" using sed/perl. \nThe input file is something like this :\nContent :</p>\n\n<pre><code>rom `target` */;\n/*!50001 SET character_set_client      = @saved_cs_client */;\n/*!50001 SET character_set_results     = @saved_cs_results */;\n/*!50001 SET collation_connection      = @saved_col_connection */;\n\n--\n-- Final view structure for view `view_oss_user`\n--\n\n/*!50001 DROP VIEW IF EXISTS `view_oss_user`*/;\n/*!50001 SET @saved_cs_client          = @@character_set_client */;\n/*!50001 SET @saved_cs_results         = @@character_set_results */;\n/*!50001 SET @saved_col_connection     = @@collation_connection */;\n/*!50001 SET character_set_client      = latin1 */;\n/*!50001 SET character_set_results     = latin1 */;\n</code></pre>\n\n<p>And the output should be like below :</p>\n\n<pre><code>rom `target` */;\n    /*!50001 SET character_set_client      = @saved_cs_client */;\n    /*!50001 SET character_set_results     = @saved_cs_results */;\n    /*!50001 SET collation_connection      = @saved_col_connection */;\n\n    --\n</code></pre>\n"}, {"tags": ["perl", "scope", "package", "eval", "lexical"], "comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1434467480, "post_id": 30871301, "comment_id": 49784688, "body": "Why on earth would you <code>eval</code> an assignment of a variable to set itself?"}], "answers": [{"comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1434468183, "post_id": 30871631, "comment_id": 49785198, "body": "The correct answer would probably be to show this person how to access a package variable. It&#39;s an XY-problem."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1434468933, "post_id": 30871631, "comment_id": 49785752, "body": "@TLP, I did, though a proper template system should be used instead."}, {"owner": {"reputation": 35, "user_id": 5015829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb0eb8e5a17538f9507ab601b91f29a7?s=128&d=identicon&r=PG&f=1", "display_name": "Veltro", "link": "https://stackoverflow.com/users/5015829/veltro"}, "edited": false, "score": 0, "creation_date": 1434482547, "post_id": 30871631, "comment_id": 49793897, "body": "ikegami, Accepted and thanks for your clear answer, the part about how the variable is captured by the sub is the answer I was looking for. I just couldn&#39;t grasp what was happening here. TLP, I am aware of &#39;our&#39; and also that it makes the problem go away. I prefer the answer from ikegami because he explained to me how the life-cycle of a variable in a package works declared with &#39;my&#39;."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1434468014, "last_edit_date": 1434468014, "creation_date": 1434467688, "answer_id": 30871631, "question_id": 30871301, "link": "https://stackoverflow.com/questions/30871301/perl-eval-use-of-uninitialized-value-declared-in-package/30871631#30871631", "title": "perl eval Use of uninitialized value declared in package", "body": "<p><code>my</code> variables declared in a file (outside of curlies) go out of scope when the file finishes executing (before <code>require</code> and <code>use</code> return).</p>\n\n<p><code>$insertVar</code> will only continue to exist after the file has finished executing it if it's captured by a sub, and it will only be visible to the subs that capture it.</p>\n\n<p>For efficiency reasons, subs capture the fewest variables possible. If the sub doesn't reference <code>$insertVar</code>, it won't capture it. Since your first <code>testSub</code> doesn't reference <code>$insertVar</code>, it doesn't capture it. Since <code>$insertVar</code> has gone out of scope by the time you call <code>testSub</code>, it's not available to <code>eval</code>. You should get the warning <code>Variable \"$insertVar\" is not available</code>, but for reasons unknown to me, it's issued for the specific code you used.</p>\n\n<p>Your second <code>testSub</code> reference <code>$insertVar</code>, so <code>testSub</code> captures <code>$insertVar</code> and keeps it alive. Even though <code>$insertVar</code> has gone out of scope by the time you call <code>testSub</code>, it's available to <code>eval</code> since it was captured by the sub.</p>\n\n<p>If you declare the variables using <code>our</code>, they'll be global package variables, and thus won't go out of scope, and they'll be available to <code>eval</code>.</p>\n\n<pre><code>&gt;perl -wE\"use strict; use warnings; { my $x = 'abc'; sub foo { $x } } say foo()\"\nabc\n\n&gt;perl -wE\"use strict; use warnings; { my $x = 'abc'; sub foo { eval '$x' } } say foo()\"\nVariable \"$x\" is not available at (eval 1) line 2.\nUse of uninitialized value in say at -e line 1.\n\n\n&gt;perl -wE\"use strict; use warnings; { our $x = 'abc'; sub foo { eval '$x' } } say foo()\"\nabc\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 5015829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb0eb8e5a17538f9507ab601b91f29a7?s=128&d=identicon&r=PG&f=1", "display_name": "Veltro", "link": "https://stackoverflow.com/users/5015829/veltro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "accepted_answer_id": 30871631, "answer_count": 1, "score": 0, "last_activity_date": 1434468014, "creation_date": 1434466803, "question_id": 30871301, "link": "https://stackoverflow.com/questions/30871301/perl-eval-use-of-uninitialized-value-declared-in-package", "title": "perl eval Use of uninitialized value declared in package", "body": "<p>can anyone explain to me why a variable that is declared in package can not be accessed by eval function unless it is used one time inside a sub?<br>\n(perl v5.16.3 MSWin32-x64-multi-thread ActiveState)</p>\n\n<p>Package:</p>\n\n<pre><code>use strict;\nuse warnings;\npackage testPackage;\nmy $insertVar = \"TEST\";\nsub testSub {\n    my $class = shift;\n    my $test = shift;\n    eval '$test=\"'.$test.'\";';\n    return $test;\n}\n1;\n</code></pre>\n\n<p>Program:</p>\n\n<pre><code>use strict ;\nuse warnings ;\nuse testPackage ;\nmy $testVar = q[insertVar = ${insertVar}] ;\n$testVar = testPackage-&gt;testSub( $testVar ) ;\nprint \"$testVar\\n\" ;\n</code></pre>\n\n<p>Result when executing program:</p>\n\n<blockquote>\n  <p>Use of uninitialized value $insertVar in concatenation (.) or string\n  at (eval 1)  line 1. insertVar =</p>\n</blockquote>\n\n<p>Now if I use the variable inside testSub (by e.g. printing it):</p>\n\n<pre><code>use strict;\nuse warnings;\npackage testPackage;\nmy $insertVar = \"TEST\";\nsub testSub {\n    my $class = shift;\n    my $test = shift;\n    print $insertVar . \"\\n\";\n    eval '$test=\"'.$test.'\";';\n    return $test;\n}\n1;\n</code></pre>\n\n<p>Then the program runs exactly as I intended:</p>\n\n<blockquote>\n  <p>TEST</p>\n  \n  <p>insertVar = TEST</p>\n</blockquote>\n"}, {"tags": ["regex", "perl", "sorting"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4839151"}, "edited": false, "score": 0, "creation_date": 1434466835, "post_id": 30871088, "comment_id": 49784169, "body": "Oh, that was solution to my problem. Thank you."}, {"owner": {"reputation": 28754, "user_id": 1153938, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/deBjQ.jpg?s=128&g=1", "display_name": "Vorsprung", "link": "https://stackoverflow.com/users/1153938/vorsprung"}, "edited": false, "score": 1, "creation_date": 1434466977, "post_id": 30871088, "comment_id": 49784282, "body": "my answer is essentially the same except it&#39;s a one liner"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 1, "creation_date": 1434467504, "post_id": 30871088, "comment_id": 49784702, "body": "@MagomedSegaIsmailov: You&#39;re welcome, glad it helps."}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": true, "score": 4, "last_activity_date": 1434466298, "creation_date": 1434466298, "answer_id": 30871088, "question_id": 30870891, "link": "https://stackoverflow.com/questions/30870891/perl-count-and-regex-matches/30871088#30871088", "title": "Perl: Count and regex matches", "body": "<p>I'd do something like:</p>\n\n<pre><code>my %SuccessLogins;\nwhile (my $array = &lt;DATA&gt;) {\n    if ($array =~ /Accepted\\s+password\\s+for\\s+(\\S+)/) {\n      $SuccessLogins{$1}++;\n    }\n}\nsay Dumper\\%SuccessLogins;\n\n\n__DATA__\n2:Jun  9 16:17:14 localhost sshd[3042]: Accepted password for testuser1 from 192.168.0.105 port 56067 ssh2\n10:Jun  9 16:31:33 localhost sshd[3176]: Accepted password for testuser1 from 192.168.0.105 port 56136 ssh2\n16:Jun  9 16:32:06 localhost sshd[3244]: Accepted password for testuser1 from 192.168.0.105 port 56137 ssh2\n24:Jun  9 16:35:26 localhost sshd[3355]: Accepted password for testuser1 from 192.168.0.105 port 56138 ssh2\n67:Jun  9 19:46:07 localhost sshd[4982]: Accepted password for testuser1 from 192.168.0.105 port 58182 ssh2\n73:Jun  9 19:47:02 localhost sshd[5047]: Accepted password for testuser4 from 192.168.0.105 port 58183 ssh2\n79:Jun  9 19:57:26 localhost sshd[5160]: Accepted password for testuser2 from 192.168.0.105 port 58186 ssh2\n86:Jun  9 19:58:34 localhost sshd[5231]: Accepted password for testuser1 from 192.168.0.105 port 58187 ssh2\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>$VAR1 = {\n  'testuser4' =&gt; 1,\n  'testuser2' =&gt; 1,\n  'testuser1' =&gt; 6\n};\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4839151"}, "edited": false, "score": 0, "creation_date": 1434467148, "post_id": 30871200, "comment_id": 49784420, "body": "Thank you for your answer Sobrique! Your answer was very useful for me!"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1434466579, "creation_date": 1434466579, "answer_id": 30871200, "question_id": 30870891, "link": "https://stackoverflow.com/questions/30870891/perl-count-and-regex-matches/30871200#30871200", "title": "Perl: Count and regex matches", "body": "<p>The 'trick' with regular expressions is that a <em>capturing</em> regular expression creates an array.</p>\n\n<p>You can then evaluate that array in a scalar context, to figure out how many 'hits' there were. </p>\n\n<p>So:</p>\n\n<pre><code>my $string = \"fish fish fish fish fish\";\n\nmy @array = $string =~ m/(fish)/g;\n\nprint \"@array\\n\";\n\nprint scalar @array;\n</code></pre>\n\n<p>And that's really all it's doing. This works for multi line stuff too. </p>\n\n<p>The reason this isn't working with your script though - is that you're running a while loop that runs on each line. So you'll only ever match your pattern once, so your count will only be one. Likewise - your counter - will be of any match of the pattern, so isn't counting user logins like you expect. </p>\n\n<p>The way you avoid this is either:</p>\n\n<ul>\n<li>continue to work one line at a time and amend code accordingly.</li>\n<li>treat your file handle as a single 'chunk'.</li>\n</ul>\n\n<p>(The latter is a bad idea for really big files). \nSo an example for the first:</p>\n\n<pre><code>use Data::Dumper;\n\nmy %count_of;\nwhile ( &lt;DATA&gt; ) {\n   my ( $login) = m/Accepted password for (\\w+)/;\n   print \"$login\\n\"; \n   $count_of{$login}++;\n}\n\nprint Dumper \\%count_of;\n\n\n__DATA__\n2:Jun  9 16:17:14 localhost sshd[3042]: Accepted password for testuser1 from 192.168.0.105 port 56067 ssh2\n10:Jun  9 16:31:33 localhost sshd[3176]: Accepted password for testuser1 from 192.168.0.105 port 56136 ssh2\n16:Jun  9 16:32:06 localhost sshd[3244]: Accepted password for testuser1 from 192.168.0.105 port 56137 ssh2\n24:Jun  9 16:35:26 localhost sshd[3355]: Accepted password for testuser1 from 192.168.0.105 port 56138 ssh2\n67:Jun  9 19:46:07 localhost sshd[4982]: Accepted password for testuser1 from 192.168.0.105 port 58182 ssh2\n73:Jun  9 19:47:02 localhost sshd[5047]: Accepted password for testuser4 from 192.168.0.105 port 58183 ssh2\n79:Jun  9 19:57:26 localhost sshd[5160]: Accepted password for testuser2 from 192.168.0.105 port 58186 ssh2\n86:Jun  9 19:58:34 localhost sshd[5231]: Accepted password for testuser1 from 192.168.0.105 port 58187 ssh2\n</code></pre>\n\n<p>So the second:</p>\n\n<pre><code>local $/;\nmy @logins = &lt;DATA&gt; =~ m/Accepted password for (\\w+)/g;\nprint \"@logins\";\n\nprint scalar @logins;\n\n__DATA__\n2:Jun  9 16:17:14 localhost sshd[3042]: Accepted password for testuser1 from 192.168.0.105 port 56067 ssh2\n10:Jun  9 16:31:33 localhost sshd[3176]: Accepted password for testuser1 from 192.168.0.105 port 56136 ssh2\n16:Jun  9 16:32:06 localhost sshd[3244]: Accepted password for testuser1 from 192.168.0.105 port 56137 ssh2\n24:Jun  9 16:35:26 localhost sshd[3355]: Accepted password for testuser1 from 192.168.0.105 port 56138 ssh2\n67:Jun  9 19:46:07 localhost sshd[4982]: Accepted password for testuser1 from 192.168.0.105 port 58182 ssh2\n73:Jun  9 19:47:02 localhost sshd[5047]: Accepted password for testuser4 from 192.168.0.105 port 58183 ssh2\n</code></pre>\n\n<p>You'd then reduce <code>@logins</code> much like in the first example. </p>\n\n<p>But in either case - you can 'count' the elements in an array by doing it in a scalar context, which is why it's useful. </p>\n\n<p>You also have <code>$1</code>, <code>$2</code> etc. to draw upon when a pattern matches - again, this can be used for extracting a specific user from the list, but I prefer a more direct assignment. </p>\n"}, {"tags": [], "owner": {"reputation": 28754, "user_id": 1153938, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/deBjQ.jpg?s=128&g=1", "display_name": "Vorsprung", "link": "https://stackoverflow.com/users/1153938/vorsprung"}, "is_accepted": false, "score": 0, "last_activity_date": 1434466933, "creation_date": 1434466933, "answer_id": 30871348, "question_id": 30870891, "link": "https://stackoverflow.com/questions/30870891/perl-count-and-regex-matches/30871348#30871348", "title": "Perl: Count and regex matches", "body": "<p>Your script assumes that the regexp will pull multiple values all at the same time for the \"testuser\" string - it will not</p>\n\n<p>The hash construct %SuccessLogins makes a new hash each time it is called in the while loops - which is not what you are aiming to do, I believe</p>\n\n<p>I put your test data in the file td1 and then used this one liner</p>\n\n<pre><code>perl -ne '@r=/Accepted password for (\\w+)/gi; for $item (@r) {$total{$item}++;  } END{  use Data::Dumper; print Dumper(\\%total);}' &lt; td1\n</code></pre>\n\n<p>then I realised that in my test case with one line at a time being read in I might as well do this</p>\n\n<pre><code>perl -ne '/Accepted password for (\\w+)/gi;  $total{$1}++;  END{  use Data::Dumper; print Dumper(\\%total);}' &lt; td1\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4839151"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 0, "accepted_answer_id": 30871088, "answer_count": 3, "score": 0, "last_activity_date": 1434466933, "creation_date": 1434465853, "question_id": 30870891, "link": "https://stackoverflow.com/questions/30870891/perl-count-and-regex-matches", "title": "Perl: Count and regex matches", "body": "<p>I got stuck with one problem in my Perl script. Script generates output which consists of following:</p>\n\n<pre><code>...\n2:Jun  9 16:17:14 localhost sshd[3042]: Accepted password for testuser1 from 192.168.0.105 port 56067 ssh2\n10:Jun  9 16:31:33 localhost sshd[3176]: Accepted password for testuser1 from 192.168.0.105 port 56136 ssh2\n16:Jun  9 16:32:06 localhost sshd[3244]: Accepted password for testuser1 from 192.168.0.105 port 56137 ssh2\n24:Jun  9 16:35:26 localhost sshd[3355]: Accepted password for testuser1 from 192.168.0.105 port 56138 ssh2\n67:Jun  9 19:46:07 localhost sshd[4982]: Accepted password for testuser1 from 192.168.0.105 port 58182 ssh2\n73:Jun  9 19:47:02 localhost sshd[5047]: Accepted password for testuser4 from 192.168.0.105 port 58183 ssh2\n79:Jun  9 19:57:26 localhost sshd[5160]: Accepted password for testuser2 from 192.168.0.105 port 58186 ssh2\n86:Jun  9 19:58:34 localhost sshd[5231]: Accepted password for testuser1 from 192.168.0.105 port 58187 ssh2\n...\n</code></pre>\n\n<p>Second half of my script has to read all those lanes and create table over how many successful logins each user got. My solution looks like this (removed header including strict, warnings):</p>\n\n<pre><code>my %SuccessLogins;\nmy @LoginAttemptsSuccess;\nwhile (my $array = &lt;$fh&gt;) {\n    if ($array =~ /Accepted\\s+password\\s+for\\s+(\\S+)/) {\n      my $counter = () = $array =~ /Accepted\\s+password\\s+for\\s+(\\S+)/gi;\n      %SuccessLogins = (\n        \"User\"  =&gt; $1,\n        \"Successful\"    =&gt; $counter\n      );\n      push (@LoginAttemptsSuccess, \\%SuccessLogins);\n    }\n}\n</code></pre>\n\n<p>Problem is that script creates AoH which consists of 1 element and in it I get just 1 row. Solution should be a table with all users with corresponding number of successful logins:</p>\n\n<pre><code>User = testuser1\nSuccessful = 6\n\nUsername = testuser2\nSuccessful = 2\n</code></pre>\n\n<p>etc.</p>\n\n<p>I have read a lot of regex examples here on SO but I still don't get logic behind counting matches using regex and storing those results.</p>\n"}, {"tags": ["perl", "count"], "comments": [{"owner": {"reputation": 2490, "user_id": 1173884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1aJWD.jpg?s=128&g=1", "display_name": "Jindra Helcl", "link": "https://stackoverflow.com/users/1173884/jindra-helcl"}, "edited": false, "score": 0, "creation_date": 1434462735, "post_id": 30869565, "comment_id": 49780510, "body": "are you counting it at each line or in the whole file?"}, {"owner": {"reputation": 87, "user_id": 2929970, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1ba1d557a0e531cba692de01880c5e08?s=128&d=identicon&r=PG&f=1", "display_name": "AtmoSci", "link": "https://stackoverflow.com/users/2929970/atmosci"}, "edited": false, "score": 0, "creation_date": 1434463001, "post_id": 30869565, "comment_id": 49780768, "body": "I&#39;m counting the occurrences in the whole file"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3261763"}, "edited": false, "score": 0, "creation_date": 1475928206, "post_id": 30869565, "comment_id": 67146329, "body": "my answer was wrong, please unaccept it"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1434466332, "last_edit_date": 1434466332, "creation_date": 1434464281, "answer_id": 30870307, "question_id": 30869565, "link": "https://stackoverflow.com/questions/30869565/how-can-i-count-the-number-of-times-a-pattern-appears/30870307#30870307", "title": "How can I count the number of times a pattern appears", "body": "<p>I think you should use a regular expression rather than repeated calls to <code>split</code></p>\n\n<p>This example reads through each file twice, counting the dates on the first pass and printing those lines whose dates appear more than five times on the second</p>\n\n<p>It doesn't compress the date-time as you have done, but captures just up to the hour field, so the keys of the <code>%count</code> hash look like <code>2015-06-16 07</code>. It is only extra code to remove the punctuation and isn't necessary to make the program work</p>\n\n<p>I've also used <code>autodie</code>, which has been available since v5.10 of Perl and automatically checks the status of <code>open</code> and <code>chdir</code> calls for you. It is also best practice to use lexical file handles and the three-parameter form of <code>open</code></p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse 5.010;\nuse autodie;\n\nuse constant DIR =&gt; '/d2/aschwa/scripts_and_programs/NST_Scripts/data_organizers';\n\nchdir DIR;\n\nfor my $file ( @ARGV ) {\n\n    open my $raw_fh, '&lt;', $file;\n\n    my %count;\n\n    while ( &lt;$raw_fh&gt; ) {\n        ++$count{$1} if /^(\\d\\d\\d\\d-\\d\\d-\\d\\d \\d\\d):\\d\\d:\\d\\d/;\n    }\n\n    seek $raw_fh, 0, 0; # Rewind input file\n\n    open my $out_fh, '&gt;', \"Filtered_$file\";\n\n    while ( &lt;$raw_fh&gt; ) {\n        print unless /^(\\d\\d\\d\\d-\\d\\d-\\d\\d \\d\\d):\\d\\d:\\d\\d/ and $count{$1} &lt; 5;\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 2929970, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1ba1d557a0e531cba692de01880c5e08?s=128&d=identicon&r=PG&f=1", "display_name": "AtmoSci", "link": "https://stackoverflow.com/users/2929970/atmosci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475843784, "creation_date": 1434462590, "last_edit_date": 1434463375, "question_id": 30869565, "link": "https://stackoverflow.com/questions/30869565/how-can-i-count-the-number-of-times-a-pattern-appears", "title": "How can I count the number of times a pattern appears", "body": "<p>I am trying to count the number of occurrences that a particular string appears in a text document so that the string can be deleted if it occurs less than 5 times. The text file has a list of dates that are formatted as <code>2015-06-16 07:40:00</code>.</p>\n\n<p>After processing the incoming data from <code>2015-06-16 07:40:00</code> to <code>2015061607</code>, I want to count the number of times that this string appears. I have the processing of the incoming data correct but I don't know how to count the occurrences of the string.</p>\n\n<p>This is what I have so far. </p>\n\n<pre><code>#!/usr/bin/perl\n\nforeach $file (@ARGV) {\n\nopen (OUT, \"&gt;/d2/aschwa/scripts_and_programs/NST_Scripts/data_organizers/Filtered_$file\") || die \"Cannot open specified file\\n\";\n\nopen (RAW, \"/d2/aschwa/scripts_and_programs/NST_Scripts/data_organizers/$file\") || die \"Cannot open specified file to be processed\\n\";\n\nwhile(&lt;RAW&gt;) {\n\n    $event = $_;\n    chop($event);\n    @event = split (',', $event);\n    ($date_time, $var1, $var2, $var3) = @event[(0,1,2,3)];\n\n    @date_time = split (' ', $date_time);\n    ($date, $time) = @date_time[(0,1)];\n\n    @date_mod = split ('-', $date);\n    ($year, $month, $day) = @date_mod[(0,1,2)];\n    @time = split (':', $time);\n    ($hr, $mins, $sec) = @time[(0,1,2)];\n\n    $datehr = $year . $month . $day . $hr;\n\n    foreach ($event) {\n        $count{$datehr}++;\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 5015486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cN4Au.jpg?s=128&g=1", "display_name": "Tim Potapov", "link": "https://stackoverflow.com/users/5015486/tim-potapov"}, "edited": false, "score": 0, "creation_date": 1434466772, "post_id": 30870145, "comment_id": 49784100, "body": "Is it possible to capture in the above example the value for (?&amp;OPEN_TAG)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107, "user_id": 5015486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cN4Au.jpg?s=128&g=1", "display_name": "Tim Potapov", "link": "https://stackoverflow.com/users/5015486/tim-potapov"}, "edited": false, "score": 0, "creation_date": 1434466880, "post_id": 30870145, "comment_id": 49784207, "body": "Not sure what you mean, and it doesn&#39;t seem to be related to either the question or the answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1434463898, "creation_date": 1434463898, "answer_id": 30870145, "question_id": 30869014, "link": "https://stackoverflow.com/questions/30869014/predefined-subpatterns-vs-compiled-regex/30870145#30870145", "title": "Predefined subpatterns vs compiled regex", "body": "<p>Two reasons for using qr//:</p>\n\n<ol>\n<li><p>What you propose as an alternative relies on new features.</p></li>\n<li><p>The patterns passed to qr// aren't necessarily hardcoded or constant.</p></li>\n</ol>\n"}], "owner": {"reputation": 107, "user_id": 5015486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cN4Au.jpg?s=128&g=1", "display_name": "Tim Potapov", "link": "https://stackoverflow.com/users/5015486/tim-potapov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1434463898, "creation_date": 1434461332, "last_edit_date": 1434462133, "question_id": 30869014, "link": "https://stackoverflow.com/questions/30869014/predefined-subpatterns-vs-compiled-regex", "title": "Predefined subpatterns vs compiled regex", "body": "<p>Why would you use a predefined subpattern when a compiled regex can do the same. Seems like the compiled regex is better since you can also capture the output.Here is an example:</p>\n\n<pre><code>my $open_tag  = qr {&lt;head&gt;};\nmy $any       = qr {.*?};\nmy $close_tag = qr {&lt;/head&gt;};\n\nif (/($open_tag) ($any) ($close_tag)/x){\n  print $1;\n  print $2;\n  print $3;\n}\n</code></pre>\n\n<p>Versus:</p>\n\n<pre><code>if (m {\n           (? (DEFINE)\n               (? &lt;OPEN_TAG&gt;  &lt;head&gt;  )\n               (? &lt;ANY&gt;       .*?     )\n               (? &lt;CLOSE_TAG&gt; &lt;/head&gt; )\n            )\n           (?&amp;OPEN_TAG) (?&amp;ANY) (?&amp;CLOSE_TAG)\n         }x\n)\n\n### Won't work below\nprint $1; print $2; print $3;\n}\n</code></pre>\n\n#\n\n<p>Keep in mind im pretty new to Perl.\nThanks in advance.\n-Tim</p>\n"}, {"tags": ["perl", "perldoc"], "comments": [{"owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "edited": false, "score": 2, "creation_date": 1434460489, "post_id": 30868337, "comment_id": 49778675, "body": "To get a negative value, you should do the <code>sleep</code> <i>first</i>."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "edited": false, "score": 1, "creation_date": 1434460568, "post_id": 30868337, "comment_id": 49778738, "body": "@MichaelCarman yes, indeed. :)"}], "answers": [{"tags": [], "owner": {"reputation": 28754, "user_id": 1153938, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/deBjQ.jpg?s=128&g=1", "display_name": "Vorsprung", "link": "https://stackoverflow.com/users/1153938/vorsprung"}, "is_accepted": true, "score": 2, "last_activity_date": 1434460351, "creation_date": 1434460351, "answer_id": 30868602, "question_id": 30868337, "link": "https://stackoverflow.com/questions/30868337/m-script-start-time-minus-file-modification-time-in-days/30868602#30868602", "title": "-M Script start time minus file modification time, in days", "body": "<p>I think this explains what you are seeing</p>\n\n<pre><code>perl -E 'say \"START TIME\",$^T; qx(touch $_), sleep(5), say -M for \"/tmp/file\"; say \"STAT ON FILE\", (stat(_))[9]'\n</code></pre>\n\n<p>output when I ran it</p>\n\n<pre><code>START TIME1434460114\n0\nSTAT ON FILE1434460114\n</code></pre>\n\n<p>1) script starts $^T is set to 1434460114</p>\n\n<p>2) almost immediately the file \"/tmp/file\" is made with a modify time of 1434460114</p>\n\n<p>3) sleep for 5 seconds</p>\n\n<p>4) -M reports the difference of the modify time on the file and the script start time as zero</p>\n\n<p>try this  instead</p>\n\n<pre><code>perl -E 'say \"START TIME\",$^T;  sleep(5),qx(touch $_), say -M for \"/tmp/file\"; say \"STAT ON FILE\", (stat(_))[9]'\n</code></pre>\n\n<p>output on my system</p>\n\n<pre><code>START TIME1434460296\n-5.78703703703704e-05\nSTAT ON FILE1434460301\n</code></pre>\n"}], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 30868602, "answer_count": 1, "score": 1, "last_activity_date": 1434460351, "creation_date": 1434459644, "question_id": 30868337, "link": "https://stackoverflow.com/questions/30868337/m-script-start-time-minus-file-modification-time-in-days", "title": "-M Script start time minus file modification time, in days", "body": "<p>I would expect <code>-M $_</code> to be negative, but it is zero for:</p>\n\n<pre><code>perl -E 'qx(touch $_), sleep(5), say -M for \"/tmp/file\"'\n</code></pre>\n\n<p>Does <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"nofollow\">perldoc</a> mentions such behavior?</p>\n"}, {"tags": ["regex", "perl", "shell", "awk"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1434457882, "post_id": 30867551, "comment_id": 49776599, "body": "Follows on from:     <a href=\"http://stackoverflow.com/questions/30847880/how-to-check-whether-number-has-decimal-point-in-it-and-add-decimal-point-at-the/30848190#30848190\" title=\"how to check whether number has decimal point in it and add decimal point at the\">stackoverflow.com/questions/30847880/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "is_accepted": true, "score": 0, "last_activity_date": 1434458187, "last_edit_date": 1434458187, "creation_date": 1434457823, "answer_id": 30867659, "question_id": 30867551, "link": "https://stackoverflow.com/questions/30867551/check-for-decimal-point-and-add-it-at-the-end-if-its-not-there-using-awk-perl/30867659#30867659", "title": "Check for decimal point and add it at the end if its not there using awk/perl", "body": "<p>In awk</p>\n\n<p>Just sub for those fields</p>\n\n<pre><code>awk -F, -vOFS=\",\" '{sub(/^[^\\.]+$/,\"&amp;.\",$6);sub(/^[^\\.]+$/,\"&amp;.\",$11)}1' file\n</code></pre>\n\n<p>or sed</p>\n\n<pre><code>sed 's/^\\(\\([^,]*,\\)\\{5\\}[^.,]\\+\\),/\\1./;s/^\\(\\([^,]*,\\)\\{10\\}[^.,]\\+\\),/\\1./' file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1434458365, "last_edit_date": 1495542600, "creation_date": 1434457824, "answer_id": 30867660, "question_id": 30867551, "link": "https://stackoverflow.com/questions/30867551/check-for-decimal-point-and-add-it-at-the-end-if-its-not-there-using-awk-perl/30867660#30867660", "title": "Check for decimal point and add it at the end if its not there using awk/perl", "body": "<p>This is your error:</p>\n\n<pre><code>while (my $val = &lt;$fh&gt;) {\n</code></pre>\n\n<p>Change that to:</p>\n\n<pre><code>while ( &lt;$fh&gt; ) {\n</code></pre>\n\n<p>or tell <code>split</code> to use <code>$val</code>. </p>\n\n<pre><code>split ( /,/, $val ); \n</code></pre>\n\n<p>In the code above - you're setting <code>$val</code> in the while loop, but the various pattern matches and splits <em>aren't using</em> <code>$val</code> at all. </p>\n\n<p>Also note - the first element in a perl array is <code>0</code>. So you should probably have kept the 5 and 10 from the sample code you copied. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/30847880/how-to-check-whether-number-has-decimal-point-in-it-and-add-decimal-point-at-the/30848190#30848190\">https://stackoverflow.com/questions/30847880/how-to-check-whether-number-has-decimal-point-in-it-and-add-decimal-point-at-the/30848190#30848190</a></p>\n\n<p>This:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy $filename = 'test.dat';\nopen my $fh, $filename or die \"Could not open file '$filename': $!\";\nmy @cols_to_change = qw ( 5 10 );\nwhile (&lt;$fh&gt;) {\n    my @row = split(/,/);\n    foreach my $col (@cols_to_change) {\n        unless ( $row[$col] =~ m/\\./ ) { $row[$col] .= '.' }\n    }\n    print join( ',', @row );\n}\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>20150202,abc,,,,3625.300000,,,,,-5.,,,,,,,,,,,,,,,,,,,,,,\n20150202,def,,,,32.585,,,,,0.,,,,,,,,,,,,,,,,,,,,,,\n20150202,xyz,,,,12.,,,,,0.004167\n</code></pre>\n\n<p>As requested, when fed your sample data. </p>\n"}, {"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 0, "last_activity_date": 1434468866, "creation_date": 1434468866, "answer_id": 30872072, "question_id": 30867551, "link": "https://stackoverflow.com/questions/30867551/check-for-decimal-point-and-add-it-at-the-end-if-its-not-there-using-awk-perl/30872072#30872072", "title": "Check for decimal point and add it at the end if its not there using awk/perl", "body": "<p>For completeness, </p>\n\n<ol>\n<li><p>bash</p>\n\n<pre><code>(\n    IFS=,\n    while read -ra f; do \n        for i in 5 10; do \n            [[ ${f[i]} == *.* ]] || f[i]+=.   # add a dot if not there\n        done\n        echo \"${f[*]}\"                        # quotes required here\n    done &lt; file\n)\n</code></pre>\n\n<p>The parentheses put the code in a subshell so the value of IFS is not changed in your current shell. </p></li>\n<li><p>sed</p>\n\n<pre><code>sed -r '\n    s/^(([^,]*,){5})([^.,]+),/\\1\\3.,/\n    s/^(([^,]*,){10})([^.,]+),/\\1\\3.,/\n' file\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 91, "user_id": 5011702, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5143a8afe5c2e9553bb89bfd8e351ff3?s=128&d=identicon&r=PG&f=1", "display_name": "Vino", "link": "https://stackoverflow.com/users/5011702/vino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 1, "accepted_answer_id": 30867659, "answer_count": 3, "score": 2, "last_activity_date": 1434468866, "creation_date": 1434457556, "last_edit_date": 1434459296, "question_id": 30867551, "link": "https://stackoverflow.com/questions/30867551/check-for-decimal-point-and-add-it-at-the-end-if-its-not-there-using-awk-perl", "title": "Check for decimal point and add it at the end if its not there using awk/perl", "body": "<p>I have test.dat file with values given below:</p>\n\n<pre><code>    20150202,abc,,,,3625.300000,,,,,-5,,,,,,,,,,,,,,,,,,,,,,\n    20150202,def,,,,32.585,,,,,0,,,,,,,,,,,,,,,,,,,,,,\n    20150202,xyz,,,,12,,,,,0.004167,,,,,,,,,,,,,,,,,,,,,,\n</code></pre>\n\n<p>My expected output is shown below:</p>\n\n<pre><code>   20150202,abc,,,,3625.300000,,,,,-5.,,,,,,,,,,,,,,,,,,,,,,\n                                     ^. added here\n   20150202,def,,,,32.585,,,,,0.,,,,,,,,,,,,,,,,,,,,,,\n                               ^. added here\n   20150202,xyz,,,,12.,,,,,0.004167,,,,,,,,,,,,,,,,,,,,,,\n                     ^. added here\n</code></pre>\n\n<p>So if column 6 and 11 doesn't have decimal point in it, then we should add '.' at the end of the file.</p>\n\n<p>I have tried below code but it's throwing error message during split</p>\n\n<pre><code>    #!/usr/bin/perl\n    use strict;\n    use warnings;\n    my $filename = 'test.dat';\n    open my $fh, $filename or die \"Could not open file '$filename': $!\";\n    my @cols_to_change = qw ( 6 11 );\n    while (my $val = &lt;$fh&gt;) {\n       my @row = split (/,/);\n       foreach my $col ( @cols_to_change ) {\n          unless ( $row[$col] =~ m/\\./ ) { $row[$col] .= '.' }\n       }\n    print join ( ',', @row );\n    }\n</code></pre>\n\n<p>The error message I have received is given below:</p>\n\n<pre><code>Use of uninitialized value in split at test.pl line 11, &lt;$fh&gt; line 1.\nUse of uninitialized value in pattern match (m//) at test.pl line 13, &lt;$fh&gt; line 1.\nUse of uninitialized value in pattern match (m//) at test.pl line 13, &lt;$fh&gt; line 1.\nUse of uninitialized value in join or string at test.pl line 15, &lt;$fh&gt; line 1.\n....\n</code></pre>\n\n<p>I am not allowed to any additional perl modules such as Text::CSV. Also any solution with awk would be of great help!</p>\n"}, {"tags": ["perl", "awk", "increment"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 221438, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/939d87af4b3afeec5497dab32031f55d?s=128&d=identicon&r=PG", "display_name": "Martin Malmstr&#248;m", "link": "https://stackoverflow.com/users/221438/martin-malmstr%c3%b8m"}, "edited": false, "score": 0, "creation_date": 1434455740, "post_id": 30866764, "comment_id": 49775091, "body": "Perfect! Thanks a bunch!"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 1, "creation_date": 1434456971, "post_id": 30866764, "comment_id": 49775945, "body": "You can just use <code>i</code> once <code>&#39;{gsub(&#47;a&#47;,++i)}1&#39;</code>"}], "tags": [], "owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "is_accepted": false, "score": 5, "last_activity_date": 1434455503, "creation_date": 1434455503, "answer_id": 30866764, "question_id": 30866706, "link": "https://stackoverflow.com/questions/30866706/replace-character-with-increasing-numbers-per-line/30866764#30866764", "title": "replace character with increasing numbers per line", "body": "<p>Just increment before, not on every substitution:</p>\n\n<pre><code>awk '{i++; gsub(/a/,i)}1' file\n</code></pre>\n\n<p>This way, the variable gets updated once per line, not once per record.</p>\n\n<p>The same applies to the Perl script:</p>\n\n<pre><code>perl -pe 'BEGIN { our $i = 0; } $i++; s/a/$i/ge;' file\n</code></pre>\n\n<h3>Test</h3>\n\n<pre><code>$ cat a\n0 0 a a a\n2 3 a a a\n$ awk '{i++; gsub(/a/,i)}1' a\n0 0 1 1 1\n2 3 2 2 2\n$ perl -pe 'BEGIN { our $i = 0; } $i++; s/a/$i/ge;' a\n0 0 1 1 1\n2 3 2 2 2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 1, "last_activity_date": 1434457529, "creation_date": 1434457529, "answer_id": 30867543, "question_id": 30866706, "link": "https://stackoverflow.com/questions/30866706/replace-character-with-increasing-numbers-per-line/30867543#30867543", "title": "replace character with increasing numbers per line", "body": "<pre><code>perl -pe'$i++;s/a/$i/g'\n</code></pre>\n\n<p>or if you like to increment only for lines with any substitution</p>\n\n<pre><code>perl -pe'/a/&amp;&amp;$i++;s/a/$i/g'\n</code></pre>\n\n<p>In action:</p>\n\n<pre><code>$ cat a\n0 0 a a a\n1 2 0 0 0\n2 3 a a a\n$ perl -pe'$i++;s/a/$i/g' a\n0 0 1 1 1\n1 2 0 0 0\n2 3 3 3 3\n$ perl -pe'/a/&amp;&amp;$i++;s/a/$i/g' a\n0 0 1 1 1\n1 2 0 0 0\n2 3 2 2 2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1434467929, "creation_date": 1434467929, "answer_id": 30871700, "question_id": 30866706, "link": "https://stackoverflow.com/questions/30866706/replace-character-with-increasing-numbers-per-line/30871700#30871700", "title": "replace character with increasing numbers per line", "body": "<p>You can simply replace every occurrence of <code>a</code> with the current line number</p>\n\n<pre><code>perl -pe 's/a/$./g' FILE &gt; NEW_FILE\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 221438, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/939d87af4b3afeec5497dab32031f55d?s=128&d=identicon&r=PG", "display_name": "Martin Malmstr&#248;m", "link": "https://stackoverflow.com/users/221438/martin-malmstr%c3%b8m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1434467929, "creation_date": 1434455358, "last_edit_date": 1434455417, "question_id": 30866706, "link": "https://stackoverflow.com/questions/30866706/replace-character-with-increasing-numbers-per-line", "title": "replace character with increasing numbers per line", "body": "<p>I have large matrix files consisting of only \"0\" and \"a\" in clolumns and I want to do what this does:</p>\n\n<pre><code>perl -pe 'BEGIN { our $i = 1; } s/a/($i++)/ge;'; &lt; FILE &gt; NEW_FILE\n</code></pre>\n\n<p>but only increment once for each line instead of every instance on each line.</p>\n\n<p>So if my first line in the file is:</p>\n\n<pre><code>0 0 a a a\n</code></pre>\n\n<p>The perl command gives me:</p>\n\n<pre><code>0 0 1 2 3\n</code></pre>\n\n<p>While i would want</p>\n\n<pre><code>0 0 1 1 1 \n</code></pre>\n\n<p>and on the next line for instance <code>2 0 2 0 2</code> and so on...</p>\n\n<p>This should be possible to do with awk, but using:</p>\n\n<pre><code>'{ i=1; gsub(/a/,(i+1));print}' tmp2 \n</code></pre>\n\n<p>just gives me 0's and 2's for all lines... </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 2691, "user_id": 4726707, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8b512f5706b16c91ea718aafdb104fe1?s=128&d=identicon&r=PG&f=1", "display_name": "Blip", "link": "https://stackoverflow.com/users/4726707/blip"}, "edited": false, "score": 2, "creation_date": 1434455453, "post_id": 30866688, "comment_id": 49774882, "body": "could you clarify is this a question of java or peal?"}, {"owner": {"reputation": 3056, "user_id": 586229, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/fWSco.png?s=128&g=1", "display_name": "hoijui", "link": "https://stackoverflow.com/users/586229/hoijui"}, "edited": false, "score": 6, "creation_date": 1434455489, "post_id": 30866688, "comment_id": 49774915, "body": "please be more specific with your question. you might have to read about regular expressions first (follow a tutorial, for example). there is not <i>one</i> regular expression for a string, but many regular expressions might match a string."}, {"owner": {"reputation": 86959, "user_id": 1735406, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IF9uS.png?s=128&g=1", "display_name": "Maroun", "link": "https://stackoverflow.com/users/1735406/maroun"}, "edited": false, "score": 2, "creation_date": 1434455492, "post_id": 30866688, "comment_id": 49774918, "body": "Do you know what is Regular Expression? What do you mean by &quot;what is the Regular Expression for that String&quot;? There&#39;s no such a thing &quot;in the form of regular expression&quot;."}, {"owner": {"reputation": 747, "user_id": 3128655, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/33bd34d396dbf6a650b97a13714eacc1?s=128&d=identicon&r=PG&f=1", "display_name": "Anil Reddy Yarragonda", "link": "https://stackoverflow.com/users/3128655/anil-reddy-yarragonda"}, "reply_to_user": {"reputation": 3056, "user_id": 586229, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/fWSco.png?s=128&g=1", "display_name": "hoijui", "link": "https://stackoverflow.com/users/586229/hoijui"}, "edited": false, "score": 0, "creation_date": 1434455752, "post_id": 30866688, "comment_id": 49775106, "body": "@hoijui, can we capture entire string into one regular expression? I mean like ([a-zA-z]+)... This is for word.. like this"}, {"owner": {"reputation": 2691, "user_id": 4726707, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8b512f5706b16c91ea718aafdb104fe1?s=128&d=identicon&r=PG&f=1", "display_name": "Blip", "link": "https://stackoverflow.com/users/4726707/blip"}, "edited": false, "score": 0, "creation_date": 1434455827, "post_id": 30866688, "comment_id": 49775152, "body": "please be more specific about what you want. Like what you mean be <i>Regular Expression for above String</i>?"}, {"owner": {"reputation": 3056, "user_id": 586229, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/fWSco.png?s=128&g=1", "display_name": "hoijui", "link": "https://stackoverflow.com/users/586229/hoijui"}, "edited": false, "score": 4, "creation_date": 1434455940, "post_id": 30866688, "comment_id": 49775241, "body": "a regular expression only makes sense, if there are some strings that should match it, and some strings that should not match it. of course you can use a regex like &quot;.*&quot; which matches everything, but that would not warrant a new question. please read about regex first!"}, {"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 1, "creation_date": 1434456691, "post_id": 30866688, "comment_id": 49775753, "body": "@Anil <code>while ($line =~ &#47;style=&quot;([^&quot;]*)&quot;&#47;gis)</code>"}, {"owner": {"reputation": 747, "user_id": 3128655, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/33bd34d396dbf6a650b97a13714eacc1?s=128&d=identicon&r=PG&f=1", "display_name": "Anil Reddy Yarragonda", "link": "https://stackoverflow.com/users/3128655/anil-reddy-yarragonda"}, "reply_to_user": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1434457615, "post_id": 30866688, "comment_id": 49776403, "body": "I edited my post with all the details. @AvinashRaj, Thanks ... It will work."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1434457491, "creation_date": 1434457491, "answer_id": 30867528, "question_id": 30866688, "link": "https://stackoverflow.com/questions/30866688/regular-expression-in-string/30867528#30867528", "title": "Regular Expression in String", "body": "<p>That's XML. XML is a bad idea to parse via regular expression. The reason for this is because these XML snippets are semantically identical:</p>\n\n<pre><code>&lt;ul type=\"disc\"&gt;\n  &lt;li\n      class=\"MsoNormal\"\n      style=\"line-height: normal; margin: 0in 0in 10pt; color: black; mso-list: l1 level1 lfo2; tab-stops: list .5in; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto\"&gt;\n    &lt;span style=\"mso-fareast-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'\"&gt;\n      &lt;font size=\"3\"&gt;\n        &lt;font face=\"Calibri\"&gt;Highlight the items you want to recover.&lt;/font&gt;\n      &lt;/font&gt;\n    &lt;/span&gt;\n  &lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>And:</p>\n\n<pre><code>&lt;ul\ntype=\"disc\"\n&gt;&lt;li\nclass=\"MsoNormal\"\nstyle=\"line-height: normal; margin: 0in 0in 10pt; color: black; mso-list: l1 level1 lfo2; tab-stops: list .5in; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto\"\n&gt;&lt;span\nstyle=\"mso-fareast-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'\"\n&gt;&lt;font\nsize=\"3\"\n&gt;&lt;font\nface=\"Calibri\"\n&gt;Highlight the items you want to recover.&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;\n</code></pre>\n\n<p>And:</p>\n\n<pre><code>&lt;ul type=\"disc\"&gt;&lt;li class=\"MsoNormal\" style=\"line-height: normal; margin: 0in 0in 10pt; color: black; mso-list: l1 level1 lfo2; tab-stops: list .5in; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto\"&gt;&lt;span style=\"mso-fareast-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'\"&gt;&lt;font size=\"3\"&gt;&lt;font face=\"Calibri\"&gt;Highlight the items you want to recover.&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;\n</code></pre>\n\n<p>So please - use a parser. Since you've tagged <code>perl</code> I'm going to include a perl solution:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::Twig;\n\nXML::Twig-&gt;new(\n    twig_handlers =&gt; {\n        'span' =&gt; sub { print $_ -&gt;att('style'), \"\\n\" }\n    }\n)-&gt;parsefile ( 'your_file.xml' );\n</code></pre>\n\n<p>This will print - on a new line - the <code>style</code> attribute from your <code>span</code> elements. Once you've extracted this, you can turn it into key-values via splitting on <code>;</code> and using <code>:</code> as a key-value separator. </p>\n\n<p>E.g.:</p>\n\n<pre><code>my $style =  $_ -&gt;att('style'); \nmy %styles = map { split ( ': ', $_, 2 ) } split ( '; ', $style);\nprint Dumper \\%styles; \n</code></pre>\n\n<p>But exactly what you do is as much a question of what you're trying to accomplish. </p>\n"}], "owner": {"reputation": 747, "user_id": 3128655, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/33bd34d396dbf6a650b97a13714eacc1?s=128&d=identicon&r=PG&f=1", "display_name": "Anil Reddy Yarragonda", "link": "https://stackoverflow.com/users/3128655/anil-reddy-yarragonda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "closed_date": 1434473208, "accepted_answer_id": 30867528, "answer_count": 1, "score": -2, "last_activity_date": 1434538813, "creation_date": 1434455321, "last_edit_date": 1434538813, "question_id": 30866688, "link": "https://stackoverflow.com/questions/30866688/regular-expression-in-string", "closed_reason": "Needs details or clarity", "title": "Regular Expression in String", "body": "<p>I have some information in the <code>xml</code> file. I want to find out <strong>style</strong> attribute values in the xml file by using <code>perl</code> script. </p>\n\n<p><strong>xml file content:</strong></p>\n\n<pre><code>&lt;ul type=\"disc\"&gt;\n    &lt;li class=\"MsoNormal\" style=\"line-height: normal; margin: 0in 0in 10pt; color: black; mso-list: l1 level1 lfo2; tab-stops: list .5in; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto\"&gt;\n        &lt;span style=\"mso-fareast-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'\"&gt;&lt;font size=\"3\"&gt;&lt;font face=\"Calibri\"&gt;Highlight the items you want to recover.&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p><strong>Perl script snippet:</strong></p>\n\n<pre><code>while ($line =~ /style=\"([a-zA-Z0-9]+)\"/gis) {\n                if ($articlenbfound == 1) {\n                    $articlehits++;\n                    my $thelink = $1;\n                    disp_str(linktofile($dir . $name . $ext) . \"   line \" . $index . \": &lt;font color=red&gt;Article \" . $articlenb . \" match&lt;/font&gt;: \" . $thelink . \"\\n\");\n                }\n            }\n</code></pre>\n\n<p>In this Script i am capturing Style attributes value. And need to print all the style attribute values. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4400, "user_id": 1452951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caa59033112232be3423b6643c697816?s=128&d=identicon&r=PG", "display_name": "Dondi Michael Stroma", "link": "https://stackoverflow.com/users/1452951/dondi-michael-stroma"}, "edited": false, "score": 1, "creation_date": 1434454478, "post_id": 30865995, "comment_id": 49774233, "body": "The only way you can access <code>a</code> is through element <code>0</code> of the array. Not sure what you expected of the second print statement."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1434464967, "post_id": 30866313, "comment_id": 49782528, "body": "Note: @{$var1}-&gt;{a} should be equivalent to &quot;0&quot;-&gt;{a}, but it&#39;s not. It produces really odd code instead."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 5, "last_activity_date": 1434454216, "creation_date": 1434454216, "answer_id": 30866313, "question_id": 30865995, "link": "https://stackoverflow.com/questions/30865995/perl-array-reference-with-hash-reference/30866313#30866313", "title": "Perl Array Reference with hash reference", "body": "<pre><code>@$var1[0]-&gt;{a}\n</code></pre>\n\n<p>is usually written as</p>\n\n<pre><code>$var1-&gt;[0]{a}\n</code></pre>\n\n<p>The second syntax, though, is different.</p>\n\n<pre><code>@$var1-&gt;{a}\n</code></pre>\n\n<p>is equivalent to </p>\n\n<pre><code>@{$var1}-&gt;{a};\n</code></pre>\n\n<p>You can't dereference an array (<code>@{$var1}</code>) as a hash. Another question is why <code>undef</code> is reported, to which I don't know the answer.</p>\n"}, {"tags": [], "owner": {"reputation": 64, "user_id": 3919045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a38a84deafaf9cb9b5f54ce49623c7c6?s=128&d=identicon&r=PG&f=1", "display_name": "Alex G", "link": "https://stackoverflow.com/users/3919045/alex-g"}, "is_accepted": false, "score": 1, "last_activity_date": 1434454729, "creation_date": 1434454729, "answer_id": 30866485, "question_id": 30865995, "link": "https://stackoverflow.com/questions/30865995/perl-array-reference-with-hash-reference/30866485#30866485", "title": "Perl Array Reference with hash reference", "body": "<p>In the first statement you print the value of key 'a' of the first element in your array (which is $var1)\nIn the second statement you print the value of key 'a' of your array (and get an error as array doesn't have keys)</p>\n\n<p>Hope this helps</p>\n"}, {"tags": [], "owner": {"reputation": 941, "user_id": 3637135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/Z7NA2.jpg?s=128&g=1", "display_name": "karsas", "link": "https://stackoverflow.com/users/3637135/karsas"}, "is_accepted": true, "score": 0, "last_activity_date": 1434515237, "creation_date": 1434515237, "answer_id": 30882340, "question_id": 30865995, "link": "https://stackoverflow.com/questions/30865995/perl-array-reference-with-hash-reference/30882340#30882340", "title": "Perl Array Reference with hash reference", "body": "<pre><code>my $var1=[{'a'=&gt;'1','b'=&gt;'2'},1];\n</code></pre>\n\n<p>$var1 is array reference which contains hash reference at index 0 and scalar at index 1</p>\n\n<p>to derefer $var1 to array, we have to use @$var1.(which gives the 2-element array)\nAnd for accessing single element we have to use $$var1[0] or $var1->[0].</p>\n\n<p>And again $var1->[0] is a hash reference. \nTo derefer it, we have to use $var1->[0]{'a'}.</p>\n\n<p>But the statement \"@$var1->{'a'}\" is invalid, since </p>\n\n<ol>\n<li>Hash reference is present at 0 index of the array \"@$var1\".</li>\n<li>All references are scalar, Array cannot be used to derefer at hash reference.</li>\n</ol>\n\n<p>For more information, please refer </p>\n\n<ol>\n<li><a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow\">Perl Data Structures Cookbook</a></li>\n<li><a href=\"http://www.perl.com/pub/1999/09/refererents.html\" rel=\"nofollow\">Bless my Referents </a></li>\n</ol>\n"}], "owner": {"reputation": 23, "user_id": 5015126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5c01fa1dd2fece7bca551731a1ab7bb?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav_krish", "link": "https://stackoverflow.com/users/5015126/ragav-krish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2048, "favorite_count": 0, "accepted_answer_id": 30882340, "answer_count": 3, "score": 0, "last_activity_date": 1434515237, "creation_date": 1434453175, "last_edit_date": 1434453378, "question_id": 30865995, "link": "https://stackoverflow.com/questions/30865995/perl-array-reference-with-hash-reference", "title": "Perl Array Reference with hash reference", "body": "<pre><code>my $var1=[{'a'=&gt;'1','b'=&gt;'2'},1];\n\nprint @$var1[0]-&gt;{a};\n</code></pre>\n\n<p>it will print 1</p>\n\n<p>but, if i print like below:</p>\n\n<pre><code>print @$var1-&gt;{a};\n</code></pre>\n\n<p>it will print error like below</p>\n\n<pre><code>Can't use an undefined value as a HASH reference;\n</code></pre>\n\n<p>Can anyone explain diff between both print statement?</p>\n"}, {"tags": ["perl", "shell", "environment-variables", "csh"], "comments": [{"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 0, "creation_date": 1434562369, "post_id": 30865895, "comment_id": 49835989, "body": "Are the variables environment variables or shell variables?  If they are shell variables you won&#39;t be able to access them from Perl."}], "answers": [{"tags": [], "owner": {"reputation": 64, "user_id": 3919045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a38a84deafaf9cb9b5f54ce49623c7c6?s=128&d=identicon&r=PG&f=1", "display_name": "Alex G", "link": "https://stackoverflow.com/users/3919045/alex-g"}, "is_accepted": true, "score": 4, "last_activity_date": 1434453738, "last_edit_date": 1495540280, "creation_date": 1434453738, "answer_id": 30866154, "question_id": 30865895, "link": "https://stackoverflow.com/questions/30865895/perl-import-shell-variable/30866154#30866154", "title": "Perl: import shell variable", "body": "<p>You can:</p>\n\n<pre><code>print $ENV{'user'}\n</code></pre>\n\n<p>the reason your system call doesn't work is that system open a new shell that doesn't source .cshrc\nread <a href=\"https://stackoverflow.com/questions/4225102/which-shell-does-a-perl-system-call-use\">this</a> answer for more information</p>\n"}, {"comments": [{"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 0, "creation_date": 1434562192, "post_id": 30889070, "comment_id": 49835906, "body": "or, use single quotes: <code>system(&#39;echo $user&#39;)</code>"}], "tags": [], "owner": {"reputation": 1319, "user_id": 5014253, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153353808733890/picture?type=large", "display_name": "Lye Heng Foo", "link": "https://stackoverflow.com/users/5014253/lye-heng-foo"}, "is_accepted": false, "score": 0, "last_activity_date": 1434537405, "creation_date": 1434537405, "answer_id": 30889070, "question_id": 30865895, "link": "https://stackoverflow.com/questions/30865895/perl-import-shell-variable/30889070#30889070", "title": "Perl: import shell variable", "body": "<p>Either use Perl built-in system variable $ENV:</p>\n\n<pre><code>print $ENV{'user'}\n</code></pre>\n\n<p>Or use backslash to escape the variable $user.  Perl will interpret for $user variable defined inside the Perl program without the backslash. With backslash, \"echo $user\" is passed as system call.</p>\n\n<pre><code>system(\"echo \\$user\")\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 712405, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/NQ67W.jpg?s=128&g=1", "display_name": "eslam saad", "link": "https://stackoverflow.com/users/712405/eslam-saad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 30866154, "answer_count": 2, "score": 0, "last_activity_date": 1434537405, "creation_date": 1434452906, "last_edit_date": 1434460791, "question_id": 30865895, "link": "https://stackoverflow.com/questions/30865895/perl-import-shell-variable", "title": "Perl: import shell variable", "body": "<p>In shell, I had sourced <code>.cshrc</code> file which contains some defined variables like user name. </p>\n\n<p>I need to pass these variables to a certain Perl script.</p>\n\n<p><strong>For example</strong> in shell terminal, I typed </p>\n\n<p><code>&gt;echo $user</code></p>\n\n<p>The output is <code>&gt;esaad</code></p>\n\n<p>Then in Perl, to read <code>$user</code> variable, I tried:</p>\n\n<p><code>system(\"echo $user\")</code> </p>\n\n<p>Also tried this command:</p>\n\n<p><code>my $userName = system(</code> <code>echo $ENV{user}</code> <code>);</code></p>\n\n<p>but Perl asked for <code>$user</code> initialization as Perl variable not Shell one.</p>\n\n<p>How I could read this variable? </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1434455176, "post_id": 30865654, "comment_id": 49774684, "body": "Welcome to Stack Overflow. Take a look at <a href=\"http://stackoverflow.com/editing-help\">stackoverflow.com/editing-help</a> and to learn about formatting of questions and answers. I took the liberty of making it a bit more readable. Please also read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and then add the code you wrote to get your current output and some sample data."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4224232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5068723855618c2482081f3cdeb633?s=128&d=identicon&r=PG&f=1", "display_name": "Leslie Francis", "link": "https://stackoverflow.com/users/4224232/leslie-francis"}, "edited": false, "score": 0, "creation_date": 1434457317, "post_id": 30866997, "comment_id": 49776182, "body": "Hi Alex- Thanks for answering. Perhaps I didnt ask it properly. I cant do &#39;OR (|)&#39; here because I need to replace these words differently. So I need to do multiple passes. I have updated the question."}, {"owner": {"reputation": 64, "user_id": 3919045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a38a84deafaf9cb9b5f54ce49623c7c6?s=128&d=identicon&r=PG&f=1", "display_name": "Alex G", "link": "https://stackoverflow.com/users/3919045/alex-g"}, "reply_to_user": {"reputation": 1, "user_id": 4224232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5068723855618c2482081f3cdeb633?s=128&d=identicon&r=PG&f=1", "display_name": "Leslie Francis", "link": "https://stackoverflow.com/users/4224232/leslie-francis"}, "edited": false, "score": 0, "creation_date": 1434482639, "post_id": 30866997, "comment_id": 49793940, "body": "@LeslieFrancis Hi Leslie I fixed the code. it should work right now for your case."}], "tags": [], "owner": {"reputation": 64, "user_id": 3919045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a38a84deafaf9cb9b5f54ce49623c7c6?s=128&d=identicon&r=PG&f=1", "display_name": "Alex G", "link": "https://stackoverflow.com/users/3919045/alex-g"}, "is_accepted": false, "score": -1, "last_activity_date": 1434482490, "last_edit_date": 1434482490, "creation_date": 1434456104, "answer_id": 30866997, "question_id": 30865654, "link": "https://stackoverflow.com/questions/30865654/how-to-make-perl-skip-certain-words-during-search-and-replace/30866997#30866997", "title": "How to make perl skip certain words during search and replace", "body": "<p>This worked for me</p>\n\n<pre><code>s/(KY SPINE &amp; REHAB|SPINE|REHAB)/[$1]/g\n</code></pre>\n\n<p>Hope it will work for you either</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>this is a complete code that worked for me. can use it for your case or any other custom replace for any string. this might not be a cool one liner but it works. hope it is better suited for your needs.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy ($new, $last, $offset, $length, $replace);\n\nwhile(&lt;DATA&gt;) {\n    $new = '';\n    $last = 0;\n    while ($_ =~ m/KY SPINE &amp; REHAB|SPINE|REHAB/g) {\n        $offset = $-[0];\n        if ($&amp; eq 'KY SPINE &amp; REHAB') {\n            $replace = '[' . $&amp; . ']';\n        }\n        if ($&amp; eq 'SPINE') {\n            $replace = '(' . $&amp; . ')';\n        }\n        if ($&amp; eq 'REHAB') {\n            $replace = '(' . $&amp; . ')';\n        }\n        $length = $offset - $last;\n        $new .= substr($_, $last, $length) . $replace;\n        $last = $+[0];\n    }\n    $length = length($_) - $last;\n    $new .= substr($_, $last, $length);\n    print $new;\n}\n\n__DATA__\nlorem ipsum KY SPINE &amp; REHAB dolor sit amet SPINE consectetur adipiscing elit REHAB sed do eiusmod tempor incididunt ut labore et dolore magna aliqua  sit amet SPINE consectetur adipiscing elit REHAB sed do eiusmod tempor\n KY SPINE &amp; REHAB dolor sit amet SPINE consectetur adipiscing elit REHAB sed do eiusmod tempor incididunt ut amet SPINE consectetur adipiscing elit REHAB sed do eiusmod tempor adipiscing elit REHAB sed do eiusmod tempor\nlorem ipsum KY SPINE &amp; REHAB dolor sit amet SPINE consectetur adipiscing elit REHAB sed do eiusmod tempor incididunt ut labore et dolore magna aliqua  sit amet SPINE consectetur adipiscing elit REHAB sed do eiusmod tempor\nSPINE sit amet SPINE consectetur REHAB\nSPINE\nsit amet SPINE consectetur KY SPINE &amp; REHAB REHAB\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1434459886, "creation_date": 1434459886, "answer_id": 30868418, "question_id": 30865654, "link": "https://stackoverflow.com/questions/30865654/how-to-make-perl-skip-certain-words-during-search-and-replace/30868418#30868418", "title": "How to make perl skip certain words during search and replace", "body": "<p>If those are the only three phrases that you want to highlight then this will do it for you</p>\n\n<pre><code>perl -i -pe's/(KY SPINE &amp; REHAB|SPINE|REHAB)/$1 =~ tr/&amp;// ? \"[$1]\" : \"($1)\"/eg' myfile\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434459983, "post_id": 30868424, "comment_id": 49778296, "body": "That will fail on a record like <code>xxx xxx SPINE xxx xxx REHAB xxx</code>. And what&#39;s the <code>chomp</code> for?"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434460255, "post_id": 30868424, "comment_id": 49778514, "body": "@Borodin: Yes it will, but it works for the given example. The chomp is needed to avoid double line feed on output."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434462860, "post_id": 30868424, "comment_id": 49780644, "body": "The OP has shown no example data. And <code>print</code> is a useful alternative to <code>say</code> when you don&#39;t want to print an additional newline"}, {"owner": {"reputation": 1, "user_id": 4224232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5068723855618c2482081f3cdeb633?s=128&d=identicon&r=PG&f=1", "display_name": "Leslie Francis", "link": "https://stackoverflow.com/users/4224232/leslie-francis"}, "edited": false, "score": 0, "creation_date": 1434642847, "post_id": 30868424, "comment_id": 49877454, "body": "Hi, thanks for the answer. This would work if it were a few keywords. There are hundreds of such key words and any one of them can be a subset of the other. What I really want is the ability to skip strings that are enclosed in square brackets. I am actually doing HTML highlighting so I would like to skip strings which have HTML tags around it."}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 0, "last_activity_date": 1434459897, "creation_date": 1434459897, "answer_id": 30868424, "question_id": 30865654, "link": "https://stackoverflow.com/questions/30865654/how-to-make-perl-skip-certain-words-during-search-and-replace/30868424#30868424", "title": "How to make perl skip certain words during search and replace", "body": "<p>How about:</p>\n\n<pre><code>while(&lt;DATA&gt;) {\n    chomp;\n    s/(KY SPINE &amp; REHAB)/[$1]/;\n    s/(SPINE(?!.*REHAB)|(?&lt;!SPINE &amp; )REHAB)/($1)/;\n    say;\n}\n\n__DATA__\nKY SPINE &amp; REHAB - when found replace with square brackets around it\nSPINE - when found replace with round brackets around it\nREHAB - when found replace with round brackets around it\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>[KY SPINE &amp; REHAB] - when found replace with square brackets around it\n(SPINE) - when found replace with round brackets around it\n(REHAB) - when found replace with round brackets around it\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4224232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5068723855618c2482081f3cdeb633?s=128&d=identicon&r=PG&f=1", "display_name": "Leslie Francis", "link": "https://stackoverflow.com/users/4224232/leslie-francis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1434642970, "creation_date": 1434452273, "last_edit_date": 1434642970, "question_id": 30865654, "link": "https://stackoverflow.com/questions/30865654/how-to-make-perl-skip-certain-words-during-search-and-replace", "title": "How to make perl skip certain words during search and replace", "body": "<p>I am trying to do HTML highlighting if words in a file match certain key words/names. However there are times when part of a key word is also present and Perl matches it again. </p>\n\n<p>For e.g. I have the following key words</p>\n\n<ol>\n<li><code>KY SPINE &amp; REHAB</code>  - when found replace with square brackets around it</li>\n<li><code>SPINE</code>  - when found replace with round brackets around it </li>\n<li><code>REHAB</code> - when found replace with round brackets around it </li>\n</ol>\n\n<p>Once it matches with <code>KY SPINE &amp; REHAB</code> , I want to stop it from matching <code>SPINE</code> and <code>REHAB</code>.</p>\n\n<p>This is what I get now. I cant give HTML examples because I dont know how to display HTML tags as this website translates it and only displays the text. In reality I am trying to highlight these keywords with different colours based on which set they are coming from.</p>\n\n<p>What I get now:</p>\n\n<pre><code>[KY (SPINE) &amp; (REHAB)]\n</code></pre>\n\n<p>What I want is:</p>\n\n<pre><code>[KY SPINE &amp; REHAB]\n</code></pre>\n\n<p>How do I make Perl skip words while doing search and replace?</p>\n\n<p>I have millions of records for which I have to do this and even with parallel processing its not that fast. So code efficient suggestions will be appreciated.</p>\n\n<p>As an update, I have hundreds of keywords and any keyword could be a subset of another keyword. So its not practical to hard code it. I am looking for solutions where perl can skip strings enclosed within then square brackets so that further replacement does not happen. </p>\n"}, {"tags": ["perl", "inheritance"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434446846, "post_id": 30863350, "comment_id": 49769367, "body": "This is an <i>inheritance</i> chain, so there are no &quot;children&quot; as such. The base classes of <code>MYAPP::MOD::Test::TestGrandChild</code> objects are listed in <code>@MYAPP::MOD::Test::TestGrandChild::ISA</code>. If you explain what it is that you&#39;re trying to do then we may be able to help better"}, {"owner": {"reputation": 1673, "user_id": 1919092, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tAQlZ.jpg?s=128&g=1", "display_name": "learner", "link": "https://stackoverflow.com/users/1919092/learner"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434448152, "post_id": 30863350, "comment_id": 49770244, "body": "@Borodin thanks for the edit. My use case is I have to write a function which will return the immediate child of MYAPP::MOD given MYAPP::MOD::Test::TestGrandChild;"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434449125, "post_id": 30863350, "comment_id": 49770841, "body": "I&#39;m afraid that doesn&#39;t really help. It&#39;s pretty much what you said in the question. I think you&#39;re using the wrong terminology, but I can&#39;t fathom what the <i>right</i> terminology is. Please can you give an example and explain your application?"}, {"owner": {"reputation": 1673, "user_id": 1919092, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tAQlZ.jpg?s=128&g=1", "display_name": "learner", "link": "https://stackoverflow.com/users/1919092/learner"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434450247, "post_id": 30863350, "comment_id": 49771536, "body": "In simple term If I am given package name &quot;A&quot; I need to know if it is using &quot;use base&quot; statement, if yes then package it is using in use base, I need to know if it is doing the same thing and so on until I reach MYAPP::MOD package name, If I reach MYAPP::MOD package name I need to return package from where I reached MYAPP::MOD."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 0, "last_activity_date": 1434447073, "last_edit_date": 1495542141, "creation_date": 1434447073, "answer_id": 30863755, "question_id": 30863350, "link": "https://stackoverflow.com/questions/30863350/getting-the-root-of-a-multi-level-inheritance/30863755#30863755", "title": "Getting the root of a multi-level inheritance", "body": "<p>There is <a href=\"https://metacpan.org/pod/mro#mro::get_linear_isa-classname-type\" rel=\"nofollow noreferrer\">mro::get_linear_isa</a> that you can use to get a linear inheritance chain. It will not work if you have multiple inheritance in a class.</p>\n\n<pre><code>package AA;\nuse Moose;\n\npackage BB;\nuse Moose;\nextends 'AA';\n\npackage CC;\nuse Moose;\nextends 'BB';\n\npackage DD;\nuse Moose;\nextends 'CC';\n\npackage main;\nuse Data::Printer;\nuse mro;\n\nmy @foo = mro::get_linear_isa(\"DD\");\np @foo;\n\n__END__\n[\n    [0] [\n        [0] \"DD\",\n        [1] \"CC\",\n        [2] \"BB\",\n        [3] \"AA\",\n        [4] \"Moose::Object\"\n    ]\n]\n</code></pre>\n\n<p>Also see <a href=\"https://stackoverflow.com/a/10872275/1331451\">Schwern's answer</a> to <a href=\"https://stackoverflow.com/questions/10870581/what-is-the-best-practice-for-finding-out-all-superclasses-of-a-perl-class\">What is the best practice for finding out all superclasses of a Perl class?</a>. </p>\n"}], "owner": {"reputation": 1673, "user_id": 1919092, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tAQlZ.jpg?s=128&g=1", "display_name": "learner", "link": "https://stackoverflow.com/users/1919092/learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434447923, "creation_date": 1434445952, "last_edit_date": 1434447923, "question_id": 30863350, "link": "https://stackoverflow.com/questions/30863350/getting-the-root-of-a-multi-level-inheritance", "title": "Getting the root of a multi-level inheritance", "body": "<p>I have the following inheritance in my Perl modules</p>\n\n<pre><code>'Class::Accessor'\n       |\n'Class::Accessor::Fast'\n       |\n'MYAPP::MOD::Conf'\n       |\n'MYAPP::MOD'\n       |\n'MYAPP::MOD::Test'\n       |\n'MYAPP::MOD::Test::TestChild'\n       |\n'MYAPP::MOD::Test::TestGrandChild'\n</code></pre>\n\n<p>I want some way to get the immediate child of <code>MYAPP::MOD</code> given <code>MYAPP::MOD::Test::TestGrandChild</code>. Is it possible to do without hardcoding depth?</p>\n\n<p>In terms of code:</p>\n\n<pre><code>package MYAPP::MOD::Conf;\nuse base qw/Class::Accessor::Fast/;\n\npackage MYAPP::MOD;\nuse base qw(MYAPP::MOD::Configurable);\n\npackage MYAPP::MOD::Test;\nuse base qw(MYAPP::MOD);\n\npackage MYAPP::MOD::Test::TestChild;\nuse base qw(MYAPP::MOD::Test);\n\npackage MYAPP::MOD::Test::TestGrandChild;\nuse base qw(MYAPP::MOD::Test::TestChild);\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1434441622, "creation_date": 1434441622, "answer_id": 30861899, "question_id": 30861620, "link": "https://stackoverflow.com/questions/30861620/unable-to-understand-qr-interpolation/30861899#30861899", "title": "unable to understand qr interpolation", "body": "<p>There was a change in 5.14.0 that added the \"default modifiers\" syntax. See <a href=\"http://perldoc.perl.org/5.14.0/perldelta.html#Regular-Expressions\" rel=\"nofollow\">perldelta</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1434442139, "post_id": 30861906, "comment_id": 49766425, "body": "that means ?^ in 5.14 or above is same as only ? in previous versions"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1434442372, "post_id": 30861906, "comment_id": 49766539, "body": "No. It&#39;s a bit different. <a href=\"http://stackoverflow.com/a/30861899/1331451\">@choroba pointed</a> to the <a href=\"http://perldoc.perl.org/5.14.0/perldelta.html#Regular-Expressions\" rel=\"nofollow noreferrer\">perldelta for 5.14</a> which says <i>Stringification of regular expressions now uses this notation. For example, qr/hlagh/i would previously be stringified as (?i-xsm:hlagh) , but now it&#39;s stringified as (?^i:hlagh) .</i>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1434450871, "post_id": 30861906, "comment_id": 49771933, "body": "@Arunesh Singh, No, <code>(?:PAT)</code> doesn&#39;t change the flags at all. <code>(?^:PAT)</code> means use the default flags."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 5, "last_activity_date": 1434442234, "last_edit_date": 1434442234, "creation_date": 1434441646, "answer_id": 30861906, "question_id": 30861620, "link": "https://stackoverflow.com/questions/30861620/unable-to-understand-qr-interpolation/30861906#30861906", "title": "unable to understand qr interpolation", "body": "<p>The chapter of the Perl documentation that deals with this is called perlre. In the <a href=\"http://perldoc.perl.org/perlre.html#Extended-Patterns\" rel=\"noreferrer\">extended pattern matching section</a> it explains this.</p>\n\n<blockquote>\n  <p>Starting in Perl 5.14, a \"^\" (caret or circumflex accent) immediately\n  after the \"?\" is a shorthand equivalent to d-imsx . Flags (except \"d\"\n  ) may follow the caret to override it. But a minus sign is not legal\n  with it.</p>\n</blockquote>\n\n<p>So the <code>^</code> is not the beginning of the string. It is used for the sub-pattern to enable modifiers than the outside pattern.</p>\n\n<p>Here's a simpler example:</p>\n\n<pre><code>my $first_re = qr{\nfoo # comment\n}x;\n\nmy $second_re = qr/bar$first_re/i;\n\nsay $second_re;\n</code></pre>\n\n<p>The output of this is:</p>\n\n<pre><code>(?^i:bar(?^x:\nfoo # comment\n))\n</code></pre>\n\n<p>The inside regex <code>$first_re</code> has the modifier <code>/x</code> in the sub-pattern <code>(?^x: ... )</code>. It also includes the comment and the new lines. The <code>/x</code> makes sure those are treated correctly.</p>\n\n<p>The outside pattern <code>$second_re</code> has the <code>/i</code> modifier, but not <code>/x</code>. The inside one does not inherit the <code>/i</code>.</p>\n\n<pre><code>say 1 if 'BARFOO' =~ $second_re;\nsay 2 if 'BARfoo' =~ $second_re;\n</code></pre>\n\n<p>This will only print <code>2</code>.</p>\n"}], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 30861906, "answer_count": 2, "score": 1, "last_activity_date": 1434442918, "creation_date": 1434440673, "last_edit_date": 1434442918, "question_id": 30861620, "link": "https://stackoverflow.com/questions/30861620/unable-to-understand-qr-interpolation", "title": "unable to understand qr interpolation", "body": "<p>I was reading Programming Perl where I learned <code>qr</code> interpolation of strings as regex as :</p>\n\n<pre><code>$re = qr/my.STRING/is;\nprint $re;                  # prints (?si-xm:my.STRING)\n</code></pre>\n\n<p>and it says</p>\n\n<blockquote>\n  <p>The /s and /i modifiers were enabled in the pattern because they were\n  supplied to qr//. The /x and /m, however, are disabled because they\n  were not.</p>\n</blockquote>\n\n<p>But this script :</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse re 'debug';\n\n\n\nmy  $re = qr/abc/si;\nmy $string = qr/foo${re}bar/;\n\nprint \"$string \\n\";  #prints(?^:foo(?^si:abc)bar) \n</code></pre>\n\n<p>Why <code>^</code> get added in my second program, I am not giving <code>^</code> explicitly in input, while the book</p>\n\n<p>doesn't say it.Yes, I know what<code>?i:</code> means,\nbut I am not sure what <code>?^:</code> means?</p>\n"}, {"tags": ["php", "perl", "encoding", "shell-exec"], "comments": [{"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1434435097, "post_id": 30859647, "comment_id": 49762511, "body": "Its better to add code, people can easily understand what you are trying to  achieve."}, {"owner": {"reputation": 779, "user_id": 2192923, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ae3f9f93df9ae60d57654e128af240d8?s=128&d=identicon&r=PG", "display_name": "WolfyD", "link": "https://stackoverflow.com/users/2192923/wolfyd"}, "reply_to_user": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1434435306, "post_id": 30859647, "comment_id": 49762588, "body": "Yeah I guess so. I&#39;ll just figure out which code I need to add"}], "answers": [{"comments": [{"owner": {"reputation": 779, "user_id": 2192923, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ae3f9f93df9ae60d57654e128af240d8?s=128&d=identicon&r=PG", "display_name": "WolfyD", "link": "https://stackoverflow.com/users/2192923/wolfyd"}, "edited": false, "score": 0, "creation_date": 1434523020, "post_id": 30866921, "comment_id": 49808345, "body": "Sadly, I&#39;m working with the files of a multinational company, we have code here that is old enough that we don&#39;t dare touch it since a lot may depend on them working correctly. This is a side-project, that would work with collecting data from these scripts and write information into them as comments, but i cannot change anything about the working of these scripts or any comments that are already in there."}], "tags": [], "owner": {"reputation": 195, "user_id": 3214669, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0143V.jpg?s=128&g=1", "display_name": "Anique", "link": "https://stackoverflow.com/users/3214669/anique"}, "is_accepted": false, "score": 0, "last_activity_date": 1434455898, "creation_date": 1434455898, "answer_id": 30866921, "question_id": 30859647, "link": "https://stackoverflow.com/questions/30859647/sending-arguments-from-php-to-perl-on-linux/30866921#30866921", "title": "Sending arguments from PHP to Perl on Linux", "body": "<p>Would it not be easier to write everything as UTF-8? </p>\n\n<p>It would need a one-time conversion of all these Perl files to UTF-8 (which can also be done in Perl, if needed; just don't forget to set the <code>use utf8;</code> pragma), but after that you would only need to check that what you are sending to the file is actually UTF-8.</p>\n"}], "owner": {"reputation": 779, "user_id": 2192923, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ae3f9f93df9ae60d57654e128af240d8?s=128&d=identicon&r=PG", "display_name": "WolfyD", "link": "https://stackoverflow.com/users/2192923/wolfyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434455898, "creation_date": 1434433445, "last_edit_date": 1434435705, "question_id": 30859647, "link": "https://stackoverflow.com/questions/30859647/sending-arguments-from-php-to-perl-on-linux", "title": "Sending arguments from PHP to Perl on Linux", "body": "<p>I'm trying to run a Perl script on a remote (currently virtual) Linux server using <code>shell_exec()</code>. The Perl file requires 3 arguments, a file name, an encoding and the contents of the file. </p>\n\n<p>It's made, to write specific lines into Perl files made by other people.</p>\n\n<p>The script should open the file with the file name in <code>arg[0]</code> with the encoding in <code>arg[1]</code> and write in it the contents in <code>arg[2]</code>. </p>\n\n<p>I managed to get it to work, as in it writes the contents to the files, but since this program writes over files where the encoding is important, I would have to write them over in just the same encoding they were in originally, and since we use accented characters I need to make sure that those work properly as well. How could I do that?</p>\n\n<p>I will add code if needed.</p>\n\n<p>EDIT: Code:</p>\n\n<p>Perl:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse warnings;\n#use strict;\n\nmy $fileName = \"\";\nmy $contents = \"\";\nmy $encoding = \"\";\n\nif(@ARGV != 3){\n    print \"use: documentor_write_file fileName encoding contents\";\n    exit;\n}else{\n\n    $fileName = $ARGV[0];\n    $encoding = $ARGV[1];\n    $contents = $ARGV[2];\n\n}\n\nsub write_file{\n\n    open(DATA,\"&gt; :encoding($encoding)\",$fileName);\n    $contents =~ s/&amp;amp;/&amp;/g;\n\n    $contents =~ s/&amp;dollar;/$/g;\n\n    $contents =~ s/&amp;lt;/&lt;/g;\n\n    $contents =~ s/&amp;gt;/&gt;/g;\n\n    $contents =~ s/\\\\&amp;quot;/\\\"/g;\n\n    $contents =~ s/&amp;cent;/\u00a2/g;\n    $contents =~ s/&amp;pound;/\u00a3/g;\n    $contents =~ s/&amp;yen;/\u00a5/g;\n    $contents =~ s/&amp;euro;/\u20ac/g;\n    $contents =~ s/&amp;copy;/\u00a9/g;\n    $contents =~ s/&amp;reg;/\u00ae/g;\n\n    print(DATA);\n\n    print DATA $contents;\n\n}\n\nwrite_file;\n\nclose(DATA);\nexit;\n</code></pre>\n\n<p>PHP:</p>\n\n<pre><code>if(isset($_GET['stf'])){\n    $ret = \"\";\n\n    $fn = $_POST['fn'];     //File name\n    $enc = $_POST['enc'];       //Encoding\n    $cont = $_POST['content'];  //Content\n\n    $cont = str_replace(\"\\\"\",\"\\\\\\\"\", $cont);    //Replaces \" with \\\"\n    $cont = pg_escape_string($cont);        //\n    $cont = htmlspecialchars(htmlentities($cont));  //\n    $cont = str_replace(\"$\", \"&amp;dollar;\", $cont);    //replaces $ with &amp;dollar;\n\n    $cmd2 = \"perl /documentor_write_file.pl $fn $enc \" . \"\\\"\" . $cont . \"\\\"\";\n    $ret = shell_exec($cmd2);\n    //print($ret . \" - \" . $cmd2);\n}\n</code></pre>\n\n<hr>\n\n<p>Example:</p>\n\n<p>File contents: (Perl file)</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nBEGIN{push @INC,\"/usr/local/dpdregister/processes/common/\";}\neval {require 'dpdregister.conf'; use vars qw ( $dbh ) };\n\n=history\n&lt;HIST&gt;\nhistory2 \u00e1\u00e9\u0171\u00e1\u00e9\nt\u00f6bb history\n&lt;/HIST&gt;\n=cut\n</code></pre>\n\n<p>What it actually writes into the file:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nBEGIN{push @INC,\\&amp;amp;quot;/usr/local/dpdregister/processes/common/\\&amp;amp;quot;;}\neval {require ''dpdregister.conf''; use vars qw ( &amp;dollar;dbh ) };\n\n=history\n&amp;amp;lt;HIST&amp;amp;gt;\nhistory2 &amp;amp;aacute;&amp;amp;eacute;\\x{00c5}\\x{00b1}&amp;amp;aacute;&amp;amp;eacute;\nt&amp;amp;ouml;bb history\n\n&amp;amp;lt;/HIST&amp;amp;gt;\n=cut\n</code></pre>\n"}, {"tags": ["perl", "cpan"], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1434421323, "post_id": 30857818, "comment_id": 49758816, "body": "The site comes up for me. If you don&#39;t get another mirror working and you&#39;re curious, use another tool (like <code>wget</code> or <code>curl</code>) to download that file and see what you get."}, {"owner": {"reputation": 11248, "user_id": 10508, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/701a6677ec8342043519e95a24fc3099?s=128&d=identicon&r=PG", "display_name": "David M. Karr", "link": "https://stackoverflow.com/users/10508/david-m-karr"}, "edited": false, "score": 0, "creation_date": 1434427874, "post_id": 30857818, "comment_id": 49760191, "body": "I don&#39;t know what was really happening, but I just reran cpan to let it config itself, and it ended up with a different list of repos, and then I was able to install it."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1434421208, "creation_date": 1434421208, "answer_id": 30857818, "question_id": 30857620, "link": "https://stackoverflow.com/questions/30857620/installing-archivezip-perl-package-with-cpan-on-centos7-fails-with-not-in-gzi/30857818#30857818", "title": "Installing Archive::ZIp Perl package with cpan on centos7 fails with &quot;not in gzip format&quot;", "body": "<p>Instead of downloading <code>02packages.details.txt.gz</code>, the CPAN mirror (<a href=\"http://cpan.mmgdesigns.com.ar\" rel=\"nofollow\">http://cpan.mmgdesigns.com.ar</a>) returned HTML output to you, possibly a 404 error message.</p>\n\n<p>Perhaps that CPAN mirror is not serving CPAN files anymore, or perhaps you are behind a proxy and your proxy did not want to serve a file from ... Argentina, is it?</p>\n"}], "owner": {"reputation": 11248, "user_id": 10508, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/701a6677ec8342043519e95a24fc3099?s=128&d=identicon&r=PG", "display_name": "David M. Karr", "link": "https://stackoverflow.com/users/10508/david-m-karr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1510, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434421208, "creation_date": 1434419445, "question_id": 30857620, "link": "https://stackoverflow.com/questions/30857620/installing-archivezip-perl-package-with-cpan-on-centos7-fails-with-not-in-gzi", "title": "Installing Archive::ZIp Perl package with cpan on centos7 fails with &quot;not in gzip format&quot;", "body": "<p>I have a CentOS 7 VM.  I installed \"cpan-CPAN\" from yum.  I ran \"cpan\" and let it configure itself.  I ran it with sudo, although I realized later I didn't necessarily have to do that, if I later selected the \"sudo\" installation mode.</p>\n\n<p>After it finished configuring, I entered \"install Archive::Zip\".  It gave me this:</p>\n\n<pre><code>cpan[1]&gt; install Archive::Zip\nFetching with HTTP::Tiny:\nhttp://cpan.mmgdesigns.com.ar/authors/01mailrc.txt.gz\nReading '/root/.cpan/sources/authors/01mailrc.txt.gz'\n\ngzip: /root/.cpan/sources/authors/01mailrc.txt.gz: not in gzip format\n............................................................................DONE\nFetching with HTTP::Tiny:\nhttp://cpan.mmgdesigns.com.ar/modules/02packages.details.txt.gz\nReading '/root/.cpan/sources/modules/02packages.details.txt.gz'\n\ngzip: /root/.cpan/sources/modules/02packages.details.txt.gz: not in gzip format\nWarning: Your /root/.cpan/sources/modules/02packages.details.txt.gz does not contain a Line-Count header.\nPlease check the validity of the index file by comparing it to more\nthan one CPAN mirror. I'll continue but problems seem likely to\nhappen.\nWarning: Your /root/.cpan/sources/modules/02packages.details.txt.gz does not contain a Last-Updated header.\nPlease check the validity of the index file by comparing it to more\nthan one CPAN mirror. I'll continue but problems seem likely to\nhappen.\nCould not split line[\"                  &lt;/td&gt;\\cM\"]\nCould not split line[\"                &lt;/tr&gt;\\cM\"]\nCould not split line[\"              &lt;/tbody&gt;\\cM\"]\nCould not split line[\"            &lt;/table&gt;\\cM\"]\nGiving up parsing your /root/.cpan/sources/modules/02packages.details.txt.gz, too many errorsReading '/root/.cpan/sources/authors/01mailrc.txt.gz'\n\ngzip: /root/.cpan/sources/authors/01mailrc.txt.gz: not in gzip format\n............................................................................DONE\nReading '/root/.cpan/sources/modules/02packages.details.txt.gz'\n\ngzip: /root/.cpan/sources/modules/02packages.details.txt.gz: not in gzip format\nWarning: Your /root/.cpan/sources/modules/02packages.details.txt.gz does not contain a Line-Count header.\nPlease check the validity of the index file by comparing it to more\nthan one CPAN mirror. I'll continue but problems seem likely to\nhappen.\nWarning: Your /root/.cpan/sources/modules/02packages.details.txt.gz does not contain a Last-Updated header.\nPlease check the validity of the index file by comparing it to more\nthan one CPAN mirror. I'll continue but problems seem likely to\nhappen.\nCould not split line[\"                  &lt;/td&gt;\\cM\"]\nCould not split line[\"                &lt;/tr&gt;\\cM\"]\nCould not split line[\"              &lt;/tbody&gt;\\cM\"]\nCould not split line[\"            &lt;/table&gt;\\cM\"]\nGiving up parsing your /root/.cpan/sources/modules/02packages.details.txt.gz, too many errorsTerminal does not support GetHistory.\nLockfile removed.\n</code></pre>\n\n<p>What should I do at this point?</p>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 445, "user_id": 4098466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7adf4028d6e536b23711192e22d7e2?s=128&d=identicon&r=PG&f=1", "display_name": "Kim Ryan", "link": "https://stackoverflow.com/users/4098466/kim-ryan"}, "edited": false, "score": 0, "creation_date": 1434410776, "post_id": 30856452, "comment_id": 49756380, "body": "Looks like your error is simialr to this one on CPAN testers <a href=\"http://www.cpantesters.org/cpan/report/b02f5668-6c71-1014-8b3b-24dbe730af8d\" rel=\"nofollow noreferrer\">cpantesters.org/cpan/report/&hellip;</a> . I noticed you selected the &#39;f&#39; option, but they recommend &#39;a&#39; for Strawberry Perl."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1434413369, "post_id": 30856452, "comment_id": 49757026, "body": "Some of those errors are due to Coro&#39;s reliance on Perl internals. I&#39;m guessing you used perl 5.22, and it hasn&#39;t been updated for 5.22 yet. The author is notoriously difficult to work with, and he doesn&#39;t use a bug tracker, so you&#39;ll need to contact him to see if he&#39;s aware of the problem and what his plans are."}, {"owner": {"reputation": 445, "user_id": 4098466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7adf4028d6e536b23711192e22d7e2?s=128&d=identicon&r=PG&f=1", "display_name": "Kim Ryan", "link": "https://stackoverflow.com/users/4098466/kim-ryan"}, "edited": false, "score": 1, "creation_date": 1434415897, "post_id": 30856452, "comment_id": 49757619, "body": "Looks like issues are being addressed here <a href=\"https://rt.cpan.org/Public/Dist/Display.html?Name=Coro\" rel=\"nofollow noreferrer\">rt.cpan.org/Public/Dist/Display.html?Name=Coro</a>, you could raise another."}, {"owner": {"reputation": 500, "user_id": 1644925, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bd6b59cb8b550984582d0db4473779ce?s=128&d=identicon&r=PG", "display_name": "alexchandel", "link": "https://stackoverflow.com/users/1644925/alexchandel"}, "edited": false, "score": 0, "creation_date": 1467073242, "post_id": 30856452, "comment_id": 63569084, "body": "Someone got sufficiently frustrated with Coro &amp; perl 5.22/5.24 to <a href=\"http://blogs.perl.org/users/aristotle/2016/05/coro-vs-5022.html\" rel=\"nofollow noreferrer\">publish a blog post about it</a>."}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 0, "last_activity_date": 1442467057, "creation_date": 1442467057, "answer_id": 32623037, "question_id": 30856452, "link": "https://stackoverflow.com/questions/30856452/error-installing-coro-in-perl/32623037#32623037", "title": "Error installing Coro in Perl", "body": "<p><a href=\"https://metacpan.org/changes/distribution/Coro\" rel=\"nofollow\">Version 6.46</a> reports that it \"restore[s] portability to perls with windows fork emulation\".  That means Strawberry Perl.  It may solve your problem.</p>\n"}], "owner": {"reputation": 485, "user_id": 4108542, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/Qflfs.jpg?s=128&g=1", "display_name": "Artem", "link": "https://stackoverflow.com/users/4108542/artem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 637, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1442467057, "creation_date": 1434409899, "question_id": 30856452, "link": "https://stackoverflow.com/questions/30856452/error-installing-coro-in-perl", "title": "Error installing Coro in Perl", "body": "<p>I have trouble with installing Coro module.</p>\n\n<pre><code>.......\n                                              ^\ndmake:  Error code 129, while making 'State.o'\ndmake.exe:  Error code 255, while making 'subdirs'\n  MLEHMANN/Coro-6.43.tar.gz\n  C:\\STRAWB~1\\c\\bin\\dmake.exe -- NOT OK\nStopping: 'install' failed for 'M/ML/MLEHMANN/Coro-6.43.tar.gz'.\n</code></pre>\n\n<p>Full install log is here: <a href=\"http://pastebin.com/raw.php?i=B4dn6BeF\" rel=\"nofollow\">log</a></p>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 12454, "user_id": 79737, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/GaA88.jpg?s=128&g=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/79737/jay"}, "edited": false, "score": 1, "creation_date": 1434394403, "post_id": 30852615, "comment_id": 49749021, "body": "when calling a cgi script the web servers sets up the environment in a specific way. Are you setting up the environment when you call it from another script?"}, {"owner": {"reputation": 1905, "user_id": 2967091, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/38a09730313bd97951e23a3f7bd0d526?s=128&d=identicon&r=PG&f=1", "display_name": "Erik", "link": "https://stackoverflow.com/users/2967091/erik"}, "reply_to_user": {"reputation": 12454, "user_id": 79737, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/GaA88.jpg?s=128&g=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/79737/jay"}, "edited": false, "score": 0, "creation_date": 1434394568, "post_id": 30852615, "comment_id": 49749114, "body": "@Jay I am not doing anything specific to the environment"}, {"owner": {"reputation": 731, "user_id": 2098733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a85255ad3255904cf3838d62b54f25?s=128&d=identicon&r=PG", "display_name": "Tim De Lange", "link": "https://stackoverflow.com/users/2098733/tim-de-lange"}, "edited": false, "score": 2, "creation_date": 1434411465, "post_id": 30852615, "comment_id": 49756541, "body": "@Erik FWIW It would be much better to extract the code you would like to share to a module, and &quot;use&quot; it in the two scripts."}, {"owner": {"reputation": 1905, "user_id": 2967091, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/38a09730313bd97951e23a3f7bd0d526?s=128&d=identicon&r=PG&f=1", "display_name": "Erik", "link": "https://stackoverflow.com/users/2967091/erik"}, "reply_to_user": {"reputation": 731, "user_id": 2098733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a85255ad3255904cf3838d62b54f25?s=128&d=identicon&r=PG", "display_name": "Tim De Lange", "link": "https://stackoverflow.com/users/2098733/tim-de-lange"}, "edited": false, "score": 0, "creation_date": 1434441127, "post_id": 30852615, "comment_id": 49765868, "body": "@TimDeLange that&#39;s certainly a valid point and something that I&#39;ll look in for the longer term. On the short-term I am forced to get <i>something</i> to work and for that the quick and dirty fix is <i>much</i> easier. Cleaning up -- as unfortunately is often the case -- needs to come later"}], "answers": [{"comments": [{"owner": {"reputation": 2043, "user_id": 2335842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda02075da146f14d3d77844c9d5056f?s=128&d=identicon&r=PG", "display_name": "optional", "link": "https://stackoverflow.com/users/2335842/optional"}, "edited": false, "score": 0, "creation_date": 1434424364, "post_id": 30852963, "comment_id": 49759439, "body": "<a href=\"https://metacpan.org/pod/CGI#DEBUGGING\" rel=\"nofollow noreferrer\">metacpan.org/pod/CGI#DEBUGGING</a> can be turned on and off, isn&#39;t limited to an actual command line.  Also you can avoid the shell with <a href=\"https://metacpan.org/pod/Capture::Tiny\" rel=\"nofollow noreferrer\">metacpan.org/pod/Capture::Tiny</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2043, "user_id": 2335842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda02075da146f14d3d77844c9d5056f?s=128&d=identicon&r=PG", "display_name": "optional", "link": "https://stackoverflow.com/users/2335842/optional"}, "edited": false, "score": 0, "creation_date": 1434444552, "post_id": 30852963, "comment_id": 49767873, "body": "@optional: I think it would be better to present your information as another solution rather than simply denouncing mine"}, {"owner": {"reputation": 2043, "user_id": 2335842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda02075da146f14d3d77844c9d5056f?s=128&d=identicon&r=PG", "display_name": "optional", "link": "https://stackoverflow.com/users/2335842/optional"}, "edited": false, "score": 0, "creation_date": 1434503755, "post_id": 30852963, "comment_id": 49802513, "body": "why? I down voted because of innacurate comment ... got a msg that I should comment, so I did.  Answer was accepted. If you remove the part &quot;works only...&quot; I&#39;ll change my vote. &quot;denounce&quot; is too strong a word. Sometimes I just don&#39;t get stackoverflow guidelines."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2043, "user_id": 2335842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda02075da146f14d3d77844c9d5056f?s=128&d=identicon&r=PG", "display_name": "optional", "link": "https://stackoverflow.com/users/2335842/optional"}, "edited": false, "score": 0, "creation_date": 1434504080, "post_id": 30852963, "comment_id": 49802595, "body": "@optional: I don&#39;t care about your vote -- I&#39;m just saying that your comment is useless on its own, and it would be better to contrive a solution"}, {"owner": {"reputation": 2043, "user_id": 2335842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda02075da146f14d3d77844c9d5056f?s=128&d=identicon&r=PG", "display_name": "optional", "link": "https://stackoverflow.com/users/2335842/optional"}, "edited": false, "score": 0, "creation_date": 1434504295, "post_id": 30852963, "comment_id": 49802650, "body": "hmm, you&#39;re spreading misinformation about CGI module ... how is it useless to point this out?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2043, "user_id": 2335842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda02075da146f14d3d77844c9d5056f?s=128&d=identicon&r=PG", "display_name": "optional", "link": "https://stackoverflow.com/users/2335842/optional"}, "edited": false, "score": 0, "creation_date": 1434506769, "post_id": 30852963, "comment_id": 49803284, "body": "@optional: What do you mean by \u201cgot a msg that I should comment\u201d?"}, {"owner": {"reputation": 2043, "user_id": 2335842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda02075da146f14d3d77844c9d5056f?s=128&d=identicon&r=PG", "display_name": "optional", "link": "https://stackoverflow.com/users/2335842/optional"}, "edited": false, "score": 0, "creation_date": 1434506902, "post_id": 30852963, "comment_id": 49803316, "body": "i click the vote button, vote changes, then a popup says &quot;consider adding a comment explaining... &quot; or some such"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 5, "last_activity_date": 1434394689, "creation_date": 1434394689, "answer_id": 30852963, "question_id": 30852615, "link": "https://stackoverflow.com/questions/30852615/calling-cgi-script-from-other-cgi-script/30852963#30852963", "title": "calling cgi script from other cgi script", "body": "<p>A CGI program normally expects to fetch the parameter values from the environment variable <code>QUERY_STRING</code>. Passing parameter values on the command line is a debugging facility, and works only when the program is run from the command prompt</p>\n\n<p>You could try something like this</p>\n\n<pre><code>my $result = do {\n    local $ENV{QUERY_STRING} = 'BARE=1';\n    qx{./script.pl};\n};\n</code></pre>\n"}], "owner": {"reputation": 1905, "user_id": 2967091, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/38a09730313bd97951e23a3f7bd0d526?s=128&d=identicon&r=PG&f=1", "display_name": "Erik", "link": "https://stackoverflow.com/users/2967091/erik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 853, "favorite_count": 0, "closed_date": 1435878483, "accepted_answer_id": 30852963, "answer_count": 1, "score": 1, "last_activity_date": 1434394689, "creation_date": 1434393506, "last_edit_date": 1495541645, "question_id": 30852615, "link": "https://stackoverflow.com/questions/30852615/calling-cgi-script-from-other-cgi-script", "closed_reason": "Duplicate", "title": "calling cgi script from other cgi script", "body": "<p>I found a puzzling behavior using perl cgi for which -- I guess -- there is a perfectly valid explanation but I couldn't find one. \nThere is <a href=\"https://stackoverflow.com/questions/24947109/how-do-i-call-perl-cgi-script-from-another-perl-cgi-script\">this</a> question on stackoverflow, but what it describes seems to fail for me. \nThe situation: \nI have two perl cgi scripts. One of them (let's say <code>script.pl</code>) can produce a website standalone, but also has a parameter let's call it <code>BARE</code> so that it will simply spit out non-formatted information. </p>\n\n<pre><code>#!/usr/bin/perl                                                                                                                                                                                                                   \n\nuse strict;\nuse CGI;\n\nmy $cgi = new CGI;\n\nunless ( defined $cgi-&gt;param('BARE') ) {\n    print $cgi-&gt;header, $cgi-&gt;start_html,$cgi-&gt;h1('Hello World'), $cgi-&gt;end_html;\n} else {\n    print \"Bare\";\n}\n</code></pre>\n\n<p>Now I am trying to call this script with its 'BARE' parameter set as local script (as they are in the same directory) from another script (let's call it <code>call_my_script.pl</code>). </p>\n\n<pre><code>#!/usr/bin/perl                                                                                                                                                                                                                   \n\nuse strict;    \nuse CGI;\n\nmy $cgi = new CGI;\n\nmy $result = qx(./script.pl \"BARE=1\");\n\nprint $cgi-&gt;header,$cgi-&gt;start_html,$result,$cgi-&gt;end_html;\n</code></pre>\n\n<p>When running this script from the command line, I get: </p>\n\n<pre><code>&gt; ./call_my_script.pl \nContent-Type: text/html; charset=ISO-8859-1\n\n&lt;!DOCTYPE html\n        PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n         \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"en-US\" xml:lang=\"en-US\"&gt;\n&lt;head&gt;\n&lt;title&gt;Untitled Document&lt;/title&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=iso-8859-1\" /&gt;\n&lt;/head&gt;\n&lt;body&gt;\nBare\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>When instead I call the same script via browser it returns</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"iso-8859-1\"?&gt;\n&lt;!DOCTYPE html\n    PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n     \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"en-US\" xml:lang=\"en-US\"&gt;&lt;head&gt;&lt;title&gt;Untitled Document&lt;/title&gt;\n&lt;/head&gt;&lt;body&gt;Content-Type: text/html; charset=ISO-8859-1\n\n&lt;?xml version=\"1.0\" encoding=\"iso-8859-1\"?&gt;\n&lt;!DOCTYPE html\n    PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n     \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"en-US\" xml:lang=\"en-US\"&gt;&lt;head&gt;&lt;title&gt;Untitled Document&lt;/title&gt;\n&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Hello World&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>So despite the fact that I am calling the first script locally using <code>qx</code> and I am passing the parameter to get bare formatting, this does not get respected when calling things via browser. </p>\n\n<p>I am probably overlooking something obvious, but I'd be grateful to understand what it is.</p>\n"}, {"tags": ["xml", "perl", "data-structures", "perl-data-structures"], "comments": [{"owner": {"reputation": 62484, "user_id": 20745, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dc5d9e7efea07afc78d5408680438507?s=128&d=identicon&r=PG", "display_name": "friedo", "link": "https://stackoverflow.com/users/20745/friedo"}, "edited": false, "score": 2, "creation_date": 1434392288, "post_id": 30852145, "comment_id": 49747807, "body": "Perl hashes are unordered. You can not rely on the hash to return keys in any particular order."}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1434392566, "post_id": 30852145, "comment_id": 49747957, "body": "See <a href=\"http://stackoverflow.com/questions/30340027/why-do-the-same-hash-keys-have-different-order-when-printing/30340150#30340150\">Why do the same hash keys have different order when printing?</a>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1434397214, "post_id": 30852145, "comment_id": 49750595, "body": "This also looks like XML as parsed by <code>XML::Simple</code>. I would suggest using something else, and just using <code>xpath</code> expressions instead. Quote a sample of the XML and the desired outcome, and I&#39;m sure someone can give you an example that works."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435249434, "post_id": 30852145, "comment_id": 50132752, "body": "OK, with that information @Amar there&#39;s a different question to be had. I have posted an answer of what I think is a better way of solving the problem. But it might be worth opening a new question entirely anyway."}], "answers": [{"tags": [], "owner": {"reputation": 862, "user_id": 3586150, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1f0969599955a953e592034929ed7a23?s=128&d=identicon&r=PG", "display_name": "Neil H Watson", "link": "https://stackoverflow.com/users/3586150/neil-h-watson"}, "is_accepted": false, "score": 2, "last_activity_date": 1434393022, "last_edit_date": 1434393022, "creation_date": 1434392353, "answer_id": 30852240, "question_id": 30852145, "link": "https://stackoverflow.com/questions/30852145/keys-function-in-perl/30852240#30852240", "title": "keys function in perl", "body": "<p>Hashes do not store keys in a reliable order. This is the nature of hashes, either use the sort function or use an array. See: <a href=\"http://perldoc.perl.org/functions/keys.html\" rel=\"nofollow\">http://perldoc.perl.org/functions/keys.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5012506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a16a00f13abfbc9a3bfed716acabb514?s=128&d=identicon&r=PG&f=1", "display_name": "Amar", "link": "https://stackoverflow.com/users/5012506/amar"}, "edited": false, "score": 1, "creation_date": 1434547340, "post_id": 30852454, "comment_id": 49824982, "body": "Hi All,Thanks all for your valuable comments."}], "tags": [], "owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "is_accepted": false, "score": 0, "last_activity_date": 1458504390, "last_edit_date": 1495541262, "creation_date": 1434393024, "answer_id": 30852454, "question_id": 30852145, "link": "https://stackoverflow.com/questions/30852145/keys-function-in-perl/30852454#30852454", "title": "keys function in perl", "body": "<p>One way to think about this is to remember that you access the \"values\" in an array by the ordered elements in the data structure (which is why you use <code>$array[2]</code>, <code>@array[1,2,3]</code> or <code>$array_ref-&gt;[3]</code>). With a hash you access  \"values\" by their respective keys which could be in any order because you are accessing them in an \"unordered\" way.   </p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/30340027/why-do-the-same-hash-keys-have-different-order-when-printing/30340150#30340150\">Why do hash keys have different order when printing?</a> and other posts linked to under the \"<strong>Related</strong>\" sidebar for more detailed discussion.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5012506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a16a00f13abfbc9a3bfed716acabb514?s=128&d=identicon&r=PG&f=1", "display_name": "Amar", "link": "https://stackoverflow.com/users/5012506/amar"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1434550912, "post_id": 30852761, "comment_id": 49827925, "body": "Hi @ikegami, Ive attached my Script &amp; xml file in the question now. Could you please check let me know, the above exists is enough to change in the script??"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 11, "user_id": 5012506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a16a00f13abfbc9a3bfed716acabb514?s=128&d=identicon&r=PG&f=1", "display_name": "Amar", "link": "https://stackoverflow.com/users/5012506/amar"}, "edited": false, "score": 0, "creation_date": 1434554512, "post_id": 30852761, "comment_id": 49830683, "body": "@Amar, uh, why don&#39;t you tell us if you&#39;re still having a problem instead!"}, {"owner": {"reputation": 11, "user_id": 5012506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a16a00f13abfbc9a3bfed716acabb514?s=128&d=identicon&r=PG&f=1", "display_name": "Amar", "link": "https://stackoverflow.com/users/5012506/amar"}, "edited": false, "score": 0, "creation_date": 1434560094, "post_id": 30852761, "comment_id": 49834653, "body": "@ ikegami: Sorry man. I aint that much good in perl to write and test it .  :/Moreover I need few setup&#39;s like Linux box to run this script, which will be free by tomorrow. I just want to get my code ready, so that i can run and check it once I get the setup!!"}, {"owner": {"reputation": 11, "user_id": 5012506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a16a00f13abfbc9a3bfed716acabb514?s=128&d=identicon&r=PG&f=1", "display_name": "Amar", "link": "https://stackoverflow.com/users/5012506/amar"}, "edited": false, "score": 0, "creation_date": 1434560179, "post_id": 30852761, "comment_id": 49834720, "body": "There are some xml attributes like below :    &lt;measValue measObjLdn=&quot;ManagedElement=1,Chassis=1,Slot=1,Eth1GbCard=1,E&zwnj;&#8203;thernet1GBPort=2&quot;&gt;  How can i write my filter for those attributes??"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1434560959, "post_id": 30852761, "comment_id": 49835171, "body": "that sounds like a completely different question.  though if you do start a new question, you&#39;ll need to be a lot more informative than &quot;How can i write my filter&quot;?"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 2, "last_activity_date": 1434560674, "last_edit_date": 1434560674, "creation_date": 1434393960, "answer_id": 30852761, "question_id": 30852145, "link": "https://stackoverflow.com/questions/30852145/keys-function-in-perl/30852761#30852761", "title": "keys function in perl", "body": "<p>It looks to me like you are trying to see if keys exist; if so, try:</p>\n\n<pre><code>if( exists $data-&gt;{fileFooter} &amp;&amp;\n    exists $data-&gt;{fileFooter}{measCollec} &amp;&amp;\n    exists $data-&gt;{fileFooter}{measCollec}{endTime} &amp;&amp;\n    exists $data-&gt;{fileHeader} &amp;&amp;\n    exists $data-&gt;{fileHeader}{measCollec} &amp;&amp;\n    exists $data-&gt;{fileHeader}{measCollec}{beginTime}\n) {\n</code></pre>\n\n<p>or, if you have <code>no autovivification;</code> set,</p>\n\n<pre><code>if( exists $data-&gt;{fileFooter}{measCollec}{endTime} &amp;&amp;\n    exists $data-&gt;{fileHeader}{measCollec}{beginTime}\n) {\n</code></pre>\n\n<p>or do explicitly what <code>no autovivification;</code> does for you:</p>\n\n<pre><code>if ( exists ${ ${ $data-&gt;{fileFooter} || {} }{measCollec} || {} }{endTime} &amp;&amp;\n    exists ${ ${ $data-&gt;{fileHeader} || {} }{measCollec} || {} }{beginTime}\n) {\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5012506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a16a00f13abfbc9a3bfed716acabb514?s=128&d=identicon&r=PG&f=1", "display_name": "Amar", "link": "https://stackoverflow.com/users/5012506/amar"}, "edited": false, "score": 0, "creation_date": 1434549085, "post_id": 30854653, "comment_id": 49826450, "body": "Please find the xml file in below location:  <a href=\"https://docs.zoho.com/writer/published.do?rid=x6jdbcd99dd2df097455f99fa2907a84620ee\" rel=\"nofollow noreferrer\">docs.zoho.com/writer/&hellip;</a>"}], "tags": [], "owner": {"reputation": 4400, "user_id": 1452951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caa59033112232be3423b6643c697816?s=128&d=identicon&r=PG", "display_name": "Dondi Michael Stroma", "link": "https://stackoverflow.com/users/1452951/dondi-michael-stroma"}, "is_accepted": false, "score": 0, "last_activity_date": 1434401054, "creation_date": 1434401054, "answer_id": 30854653, "question_id": 30852145, "link": "https://stackoverflow.com/questions/30852145/keys-function-in-perl/30854653#30854653", "title": "keys function in perl", "body": "<p>The keys will be stored in an apparently random (but not truly random) order. The <code>keys</code> and <code>values</code> functions promise to return elements in the same order each time, but only when called on the same hash. A different hash\u2013even if the keys are the same\u2013may return keys in a completely different order. Modifying a hash may also change the order of the keys.</p>\n"}, {"tags": [], "owner": {"reputation": 731, "user_id": 2098733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a85255ad3255904cf3838d62b54f25?s=128&d=identicon&r=PG", "display_name": "Tim De Lange", "link": "https://stackoverflow.com/users/2098733/tim-de-lange"}, "is_accepted": false, "score": 1, "last_activity_date": 1434412722, "creation_date": 1434412722, "answer_id": 30856842, "question_id": 30852145, "link": "https://stackoverflow.com/questions/30852145/keys-function-in-perl/30856842#30856842", "title": "keys function in perl", "body": "<p>Yes. Since hashes are by definition unordered, the keys function will seem to \"evaluate randomly\".</p>\n\n<p>It would be better to parse your xml into array refs.</p>\n\n<p>You cannot count on a hash to be rendered in the same order time after time.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1435248832, "creation_date": 1435248832, "answer_id": 31055544, "question_id": 30852145, "link": "https://stackoverflow.com/questions/30852145/keys-function-in-perl/31055544#31055544", "title": "keys function in perl", "body": "<p>OK, sorry for taking a while to come back on this - it's easy to miss question updates. </p>\n\n<p>Anyway - Given your script seems to be 'gather XML, check for certain keys' - I honestly think we may have an XY problem here. Why are you trying to validate your XML when you could instead just decompose it and do a 'by key' search? </p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::Twig;\n\nmy %pos_lookup;\n\nsub extract_measType {\n    my ( $twig, $meastype ) = @_;\n    my $pos = $meastype-&gt;att('pos');\n    $pos_lookup{$pos} = $meastype-&gt;text;\n}\n\nmy $twig = XML::Twig-&gt;new(\n    'pretty_print'  =&gt; 'indented_a',\n    'twig_handlers' =&gt; { 'measType' =&gt; \\&amp;extract_measType }\n);\n$twig-&gt;parse( \\*DATA );\n\nforeach my $element ( $twig-&gt;root-&gt;get_xpath('measData/measInfo/measValue') )\n{\n    my $ldn = $element-&gt;att('measObjLdn');\n    print \"Data for: $ldn\\n\";\n    foreach my $reading ( $element-&gt;children('r') ) {\n        my $pos = $reading-&gt;att('pos');\n        print \"\\t\", $pos_lookup{$pos}, \":\", $reading-&gt;text, \"\\n\";\n    }\n}\n\n\n__DATA__\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt; \n &lt;measCollecFile&gt; \n   &lt;fileHeader fileFormatVersion=\"32.435 V10.0\" dnPrefix=\"DC=ericsson.se,g3SubNetwork=Sweden\"&gt; \n     &lt;fileSender localDn=\"ManagedElement=1,Chassis=1\"/&gt; \n     &lt;measCollec beginTime=\"2015-06-08T05:06:58Z\"/&gt; \n   &lt;/fileHeader&gt; \n   &lt;measData&gt; \n     &lt;managedElement localDn=\"ManagedElement=1,Chassis=1\"/&gt; \n     &lt;measInfo measInfoId=\"schema_profile_1\"&gt; \n       &lt;granPeriod duration=\"PT60S\" endTime=\"2015-06-08T05:06:58Z\"/&gt; \n       &lt;repPeriod duration=\"PT60S\"/&gt; \n       &lt;measType pos=\"1\"&gt;inOctets&lt;/measType&gt; \n       &lt;measType pos=\"2\"&gt;inPackets&lt;/measType&gt; \n       &lt;measType pos=\"3\"&gt;mcastInOctets&lt;/measType&gt; \n       &lt;measType pos=\"4\"&gt;mcastInPackets&lt;/measType&gt; \n       &lt;measType pos=\"5\"&gt;mcastOutOctets&lt;/measType&gt; \n       &lt;measType pos=\"6\"&gt;mcastOutPackets&lt;/measType&gt; \n       &lt;measType pos=\"7\"&gt;meteringClassCounter&lt;/measType&gt; \n       &lt;measType pos=\"8\"&gt;meteringPolicyName&lt;/measType&gt; \n       &lt;measType pos=\"9\"&gt;outOctets&lt;/measType&gt; \n       &lt;measType pos=\"10\"&gt;outPackets&lt;/measType&gt; \n       &lt;measType pos=\"11\"&gt;policingClassCounter&lt;/measType&gt; \n       &lt;measValue \nmeasObjLdn=\"ManagedElement=1,Chassis=1,Slot=1,Eth1GbCard=1,Ethernet1GBPort=1\"&gt; \n         &lt;r pos=\"1\"&gt;337060&lt;/r&gt; \n         &lt;r pos=\"2\"&gt;5616&lt;/r&gt; \n         &lt;r pos=\"3\"&gt;0&lt;/r&gt; \n         &lt;r pos=\"4\"&gt;0&lt;/r&gt; \n         &lt;r pos=\"5\"&gt;0&lt;/r&gt; \n         &lt;r pos=\"6\"&gt;0&lt;/r&gt; \n         &lt;r pos=\"7\"&gt;(N/A)&lt;/r&gt; \n         &lt;r pos=\"8\"&gt;(N/A)&lt;/r&gt; \n         &lt;r pos=\"9\"&gt;1176&lt;/r&gt; \n         &lt;r pos=\"10\"&gt;28&lt;/r&gt; \n         &lt;r pos=\"11\"&gt;(N/A)&lt;/r&gt; \n       &lt;/measValue&gt; \n       &lt;measValue \nmeasObjLdn=\"ManagedElement=1,Chassis=1,Slot=1,Eth1GbCard=1,Ethernet1GBPort=2\"&gt; \n         &lt;r pos=\"1\"&gt;1300&lt;/r&gt; \n         &lt;r pos=\"2\"&gt;20&lt;/r&gt; \n         &lt;r pos=\"3\"&gt;0&lt;/r&gt; \n         &lt;r pos=\"4\"&gt;0&lt;/r&gt; \n         &lt;r pos=\"5\"&gt;0&lt;/r&gt; \n         &lt;r pos=\"6\"&gt;0&lt;/r&gt; \n         &lt;r pos=\"7\"&gt;(N/A)&lt;/r&gt; \n         &lt;r pos=\"8\"&gt;(N/A)&lt;/r&gt; \n         &lt;r pos=\"9\"&gt;336936&lt;/r&gt; \n         &lt;r pos=\"10\"&gt;5624&lt;/r&gt; \n         &lt;r pos=\"11\"&gt;(N/A)&lt;/r&gt; \n       &lt;/measValue&gt; \n     &lt;/measInfo&gt; \n   &lt;/measData&gt; \n   &lt;fileFooter&gt; \n     &lt;measCollec endTime=\"2015-06-08T05:06:58Z\"/&gt; \n   &lt;/fileFooter&gt; \n &lt;/measCollecFile&gt; \n</code></pre>\n\n<p>Now, if you really want to check for the presence of particular things, I'd suggest a 'get_xpath' search:</p>\n\n<pre><code>my %to_check = (\n    '/measCollecFile/measData/measInfo/measType[@pos=\"1\"]' =&gt; 'inOctets',\n    '/measCollecFile/measData/measInfo/granPeriod'         =&gt; '',\n    '/measCollecFile/fileFooter/measCollec'                =&gt; '',\n    '/some/bogus/value'                                    =&gt; \"value\",\n);\nforeach my $xpath ( keys %to_check ) {\n    my $node = $twig-&gt;root-&gt;get_xpath( $xpath, 0 );\n    my $value = \"\";\n    if ($node) { $value = $node-&gt;text; }\n    print $xpath, \" =&gt; \", $value;\n    if   ( $node and $value eq $to_check{$xpath} ) { print \" OK\\n\"; }\n    else                                           { print \" ERROR\\n\"; }\n}\n</code></pre>\n\n<p>Sorry, I haven't reproduced your whole thing, but hopefully this illustrates the idea? I don't think you need to do quite as exhaustive a validation though. </p>\n"}], "owner": {"reputation": 11, "user_id": 5012506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a16a00f13abfbc9a3bfed716acabb514?s=128&d=identicon&r=PG&f=1", "display_name": "Amar", "link": "https://stackoverflow.com/users/5012506/amar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 1, "answer_count": 6, "score": 1, "last_activity_date": 1458504390, "creation_date": 1434392071, "last_edit_date": 1434550724, "question_id": 30852145, "link": "https://stackoverflow.com/questions/30852145/keys-function-in-perl", "title": "keys function in perl", "body": "<p>I have a perl script which evaluates an xml script using the <code>keys()</code> function. My script is written in such a way, attributes/tags in xml are not coming in order. Does the keys function in perl, evaluate randomly??</p>\n\n<p>Ex:</p>\n\n<pre><code>if( (keys %{$data})[0] eq 'fileFooter' and\n    (keys %{$data-&gt;{fileFooter}})[0] eq 'measCollec' and\n    (keys %{$data-&gt;{fileFooter}-&gt;{measCollec}})[0] eq 'endTime' and\n    (keys %{$data})[1] eq 'fileHeader' and\n    (keys %{$data-&gt;{fileHeader}})[0] eq 'measCollec' and\n    (keys %{$data-&gt;{fileHeader}-&gt;{measCollec}})[0] eq 'beginTime'\n</code></pre>\n\n<p>Here the fileFooter attribute in XML file is coming at the end and the fileHEader is coming at the beginning. In this case perl will work fine??</p>\n\n<p>Please find the script in below link :  <a href=\"https://docs.zoho.com/writer/published.do?rid=x6jdb8effa7ba9b0140258c9b3b1fb9617386\" rel=\"nofollow\">https://docs.zoho.com/writer/published.do?rid=x6jdb8effa7ba9b0140258c9b3b1fb9617386</a></p>\n\n<p>Please find the XML file in below link :</p>\n\n<p><a href=\"https://docs.zoho.com/writer/ropen.do?rid=x6jdbcd99dd2df097455f99fa2907a84620ee\" rel=\"nofollow\">https://docs.zoho.com/writer/ropen.do?rid=x6jdbcd99dd2df097455f99fa2907a84620ee</a></p>\n"}, {"tags": ["perl", "shell"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1434391902, "post_id": 30852057, "comment_id": 49747611, "body": "That script is incomplete and doesn&#39;t do anything."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1434392932, "post_id": 30852057, "comment_id": 49748171, "body": "You can probably install the modules along with the script, under your own account, but it can be tricky to get this right."}, {"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1434393096, "post_id": 30852057, "comment_id": 49748282, "body": "NB, that <code>open(TEST, &quot;cat test.txt |&quot;)</code> is a pointless complication on what could be just <code>open(TEST, &#39;&lt;test.txt&#39;)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 96909, "user_id": 3030305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/En2fP.png?s=128&g=1", "display_name": "John1024", "link": "https://stackoverflow.com/users/3030305/john1024"}, "is_accepted": true, "score": 2, "last_activity_date": 1434392928, "last_edit_date": 1434392928, "creation_date": 1434392419, "answer_id": 30852266, "question_id": 30852057, "link": "https://stackoverflow.com/questions/30852057/convert-perl-to-shell/30852266#30852266", "title": "Convert Perl to Shell", "body": "<p>Depending on exactly what the input is and what you are trying to do, that perl code fragment would likely translate to:</p>\n\n<pre><code>while read field1 field2 field3\ndo \n    # Run and record SNMP walk results.\n    echo \"1=$field1 2=$field2 3=$field3\"\ndone &lt;text.txt\n</code></pre>\n\n<p>For example, if <code>text.txt</code> is:</p>\n\n<pre><code>$ cat text.txt\none two three\ni ii iii\n</code></pre>\n\n<p>Then, the above code produces the output:</p>\n\n<pre><code>1=one 2=two 3=three\n1=i 2=ii 3=iii\n</code></pre>\n\n<p>As you can see, the shell <code>read</code> command reads a line (record) at a time and also does splitting on whitespace.  There are many options for <code>read</code> to control whether newlines or something else divide records (<code>-d</code>) and whether splitting is to be done on whitespace or something else (<code>IFS</code>) or whether backslashes in the input are to be treated as escape characters or not (<code>-r</code>).  See <code>man bash</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4021, "user_id": 3360759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndket.png?s=128&g=1", "display_name": "frhack", "link": "https://stackoverflow.com/users/3360759/frhack"}, "is_accepted": false, "score": 0, "last_activity_date": 1434394694, "last_edit_date": 1434394694, "creation_date": 1434393432, "answer_id": 30852589, "question_id": 30852057, "link": "https://stackoverflow.com/questions/30852057/convert-perl-to-shell/30852589#30852589", "title": "Convert Perl to Shell", "body": "<pre><code>while read string; do\n  str1=${string%% *}\n  str3=${string##* }\n  temp=${string#$str1 }\n  str2=${temp%% *}\n  echo $str1 $str2 $str3\ndone &lt;test.txt\n</code></pre>\n\n<p>alternate version</p>\n\n<pre><code>while read string; do\n  str1=${string%% *}\n  temp=${string#$str1 }\n  str2=${temp%% *}\n  temp=${string#$str1 $str2 }\n  str3=${temp%% *}\n  echo $str1 $str2 $str3\ndone &lt;test.txt\n</code></pre>\n\n<p><a href=\"http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html#tag_02_06_02\" rel=\"nofollow\">POSIX substring parameter expansion</a></p>\n\n<blockquote>\n  <p>${parameter%word}</p>\n  \n  <p>Remove Smallest Suffix Pattern. The word shall be expanded to produce\n  a pattern. The parameter expansion shall then result in parameter,\n  with the smallest portion of the suffix matched by the pattern\n  deleted.</p>\n  \n  <p>${parameter%%word}</p>\n  \n  <p>Remove Largest Suffix Pattern. The word shall be expanded to produce a\n  pattern. The parameter expansion shall then result in parameter, with\n  the largest portion of the suffix matched by the pattern deleted.</p>\n  \n  <p>${parameter#word}</p>\n  \n  <p>Remove Smallest Prefix Pattern. The word shall be expanded to produce\n  a pattern. The parameter expansion shall then result in parameter,\n  with the smallest portion of the prefix matched by the pattern\n  deleted. ${parameter##word} Remove Largest Prefix Pattern. The word\n  shall be expanded to produce a pattern. The parameter expansion shall\n  then result in parameter, with the largest portion of the prefix\n  matched by the pattern deleted.</p>\n  \n  <p>${parameter##word}</p>\n  \n  <p>Remove Largest Prefix Pattern. The word shall be expanded to produce a\n  pattern. The parameter expansion shall then result in parameter, with\n  the largest portion of the prefix matched by the pattern deleted.</p>\n</blockquote>\n"}], "owner": {"reputation": 51, "user_id": 2908294, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c1a85aaa209a2644560b21e661998260?s=128&d=identicon&r=PG&f=1", "display_name": "user2908294", "link": "https://stackoverflow.com/users/2908294/user2908294"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 30852266, "answer_count": 2, "score": -1, "last_activity_date": 1434394694, "creation_date": 1434391756, "question_id": 30852057, "link": "https://stackoverflow.com/questions/30852057/convert-perl-to-shell", "title": "Convert Perl to Shell", "body": "<p>I have Perl script that I use to SNMP walk devices. However the server I have available to me does not allow me to install all the modules needed. So I need to convert the script to Shell (sh). I can run the script on individual devices but would like it to read from a text like it did in Perl. The Perl Script starts with:</p>\n\n<pre><code> open(TEST, \"cat test.txt |\");\n@records=&lt;TEST&gt;;\nclose(TEST);\n\nforeach $line (@records)\n                {\n                ($field1, $field2, $field3)=split(/\\s+/, $line);\n                # Run and record SNMP walk results.\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1434391601, "post_id": 30851957, "comment_id": 49747447, "body": "It seems overly simple but, can you flip the logic and execute the <code>lt</code> logic first, otherwise run the <code>ge</code> logic?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 1, "creation_date": 1434391817, "post_id": 30851957, "comment_id": 49747571, "body": "@KevinDTimm It&#39;s a compilation error, not a runtime error, so changing <code>ge</code> to <code>lt</code> will have no effect."}, {"owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 1, "creation_date": 1434391819, "post_id": 30851957, "comment_id": 49747572, "body": "@KevinDTimm - Nope, it still fails due to syntax error.  Just like <code>if (1 == 0) { invalid text here }</code> fails even though it never runs."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1434392318, "post_id": 30851957, "comment_id": 49747820, "body": "I saw that it was a compilation error after submission but thought, what the heck (hence comment, not answer)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1434396529, "post_id": 30851957, "comment_id": 49750209, "body": "If you can put the version-specific code in a module, you can load it conditionally based on the perl version, e.g. <code>use if $] &gt;= 5.014, &#39;Foo&#39;;</code> On perl &lt;5.14, <code>Foo.pm</code> will never even be compiled."}], "answers": [{"tags": [], "owner": {"reputation": 4400, "user_id": 1452951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caa59033112232be3423b6643c697816?s=128&d=identicon&r=PG", "display_name": "Dondi Michael Stroma", "link": "https://stackoverflow.com/users/1452951/dondi-michael-stroma"}, "is_accepted": false, "score": 1, "last_activity_date": 1434401351, "creation_date": 1434401351, "answer_id": 30854733, "question_id": 30851957, "link": "https://stackoverflow.com/questions/30851957/version-dependent-fallback-code/30854733#30854733", "title": "Version-dependent fallback code", "body": "<p>Wrap it in a string-form of <code>eval</code> (because the block form of <code>eval</code> will cause the same error):</p>\n\n<pre><code>#!/usr/bin/perl\n\n# Don't use cryptic variable names\nuse English;\n\nmy $str = \"Hello, World!\";\nmy $search = ',';\n\nif ($PERL_VERSION ge v5.14) {\n    print \"Using version that supports /r modifier\\n\";\n\n    # Perl v5.14 introduced the /r flag for regular expressions\n    # From the perldoc: r  - perform non-destructive substitution and return the new value\n    eval 'print \"After replacement: \" . ($str =~ s/\\Q${search}\\E/_/gr) . $/;';\n    print \"Original string: \" . $str . $/;\n\n} else {\n    print \"This version does not support the /r modifier\\n\";\n\n    # Prior to Perl v5.14, no /r option existed and the original string will be clobbered\n    # To deal with this, we need to make a copy first, then modify the copy instead\n    my $str_copy = $str;\n    $str_copy =~ s/\\Q${search}\\E/_/g;\n\n    print \"After replacement: \" . $str_copy . $/;\n    print \"Original string: \" . $str . $/;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1434402098, "creation_date": 1434402098, "answer_id": 30854913, "question_id": 30851957, "link": "https://stackoverflow.com/questions/30851957/version-dependent-fallback-code/30854913#30854913", "title": "Version-dependent fallback code", "body": "<p>Many recent features are not forward-compatible. As you've seen, you'll get compile-time errors using a feature that is too new for the version of perl you are running. Using block-<code>eval</code> won't help, because the contents of the block need to be valid for the current perl interpreter.</p>\n\n<p>You are on the right track with checking for the current perl version and branching. The <a href=\"https://metacpan.org/pod/distribution/perl/pod/perlvar.pod#OLD_PERL_VERSION\" rel=\"nofollow\"><code>$]</code> variable</a> is one mechanism to do that. Checking <code>$Config{PERL_VERSION}</code> (after you <code>use Config</code>) is another.</p>\n\n<p>ThisSuitIsBlackNot pointed you to the <code>if</code> pragma, namely</p>\n\n<pre><code>use if $] &gt;= 5.014, 'Foo::New';  # take advantage of latest syntax,features\nuse if $] &lt;= 5.014, 'Foo::Old';  # workarounds for missing features \n</code></pre>\n\n<p>to load different modules depending on the capabilities of your current perl. At run time, conditional <code>require</code> statements could work the same way</p>\n\n<pre><code>if ($] &gt;= 5.014) {\n    require Foo::New;\n} else {\n    require Foo::Old;\n}\n</code></pre>\n\n<p>Finally, block eval is not a viable technique for version-dependent code, but string eval is. The gist is:</p>\n\n<pre><code>BEGIN {  # BEGIN block so these subs get parsed at compile time\n    if ($] &gt;= 5.014) {\n        eval q^*substwrepl = sub {\n            my ($str,$search) = @_;\n            $str =~ s/\\Q${search}\\E/_/gr\n        };^;\n    } else {\n        eval q^*substwrepl = sub {\n            my ($str,$search) = @_;\n            my $str_copy = $str;\n            $str_copy =~ s/\\Q${search}\\E/_/g;\n            $str_copy;\n        };^;\n    }\n}\n\n...  # later in your program\nmy $str = \"Hello, world\";\nprint \"After replacement: \", substrwrepl($str, \",\"), \"\\n\";\nprint \"Original string: \", $str, \"\\n\";\n</code></pre>\n\n<p><a href=\"https://metacpan.org/source/EXODIST/Test-Simple-1.001014/lib/Test/Builder.pm#22\" rel=\"nofollow\">See the <code>Test::Builder</code> module</a> for a real-live use of this construction.</p>\n"}], "owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 1, "accepted_answer_id": 30854913, "answer_count": 2, "score": 3, "last_activity_date": 1434402098, "creation_date": 1434391362, "last_edit_date": 1434393459, "question_id": 30851957, "link": "https://stackoverflow.com/questions/30851957/version-dependent-fallback-code", "title": "Version-dependent fallback code", "body": "<p>I have a script that needs to run on multiple servers, however, each server may not have the same version of Perl available and may have differing features.  </p>\n\n<p>Perl v5.14 introduced the <a href=\"http://perldoc.perl.org/perlop.html#s%2FPATTERN%2FREPLACEMENT%2Fmsixpodualgcer\" rel=\"nofollow\">/r modifier for regular expressions</a> which returns the result of a substitution and leaves the original text alone.  If that is not available, I would like to use some fallback code instead.</p>\n\n<p>Here's an example:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\n# Don't use cryptic variable names\nuse English;\n\nmy $str = \"Hello, World!\";\nmy $search = ',';\n\nif ($PERL_VERSION ge v5.14) {\n    print \"Using version that supports /r modifier\\n\";\n\n    # Perl v5.14 introduced the /r flag for regular expressions\n    # From the perldoc: r  - perform non-destructive substitution and return the new value\n    print \"After replacement: \" . ($str =~ s/\\Q${search}\\E/_/gr) . $/;\n    print \"Original string: \" . $str . $/;\n\n} else {\n    print \"This version does not support the /r modifier\\n\";\n\n    # Prior to Perl v5.14, no /r option existed and the original string will be clobbered\n    # To deal with this, we need to make a copy first, then modify the copy instead\n    my $str_copy = $str;\n    $str_copy =~ s/\\Q${search}\\E/_/g;\n\n    print \"After replacement: \" . $str_copy . $/;\n    print \"Original string: \" . $str . $/;\n}\n</code></pre>\n\n<p>When Perl v5.14 is available, running the script gives me the desired results:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ./version_dependent.pl\nUsing version that supports /r modifier\nAfter replacement: Hello_ World!\nOriginal string: Hello, World!\n</code></pre>\n\n<p>When a version less than v5.14 is used, I get a syntax error because of the <code>r</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ./version_dependent.pl\nBareword found where operator expected at ./version_dependent.pl line 15, near \"s/\\Q${search}\\E/_/gr\"\nsyntax error at ./version_dependent.pl line 15, near \"s/\\Q${search}\\E/_/gr\"\nExecution of ./version_dependent.pl aborted due to compilation errors.\n</code></pre>\n\n<p>What I would like to get is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ./version_dependent.pl\nThis version does not support the /r modifier\nAfter replacement: Hello_ World!\nOriginal string: Hello, World!\n</code></pre>\n\n<p>Is there any way to get the script to behave as intended?<br>\nIf this were a C-like language, I handle the issue using the preprocessor, but I don't think Perl has that functionality.</p>\n\n<hr>\n\n<p><strong>Edit</strong>: The above code is just an <em>example</em>.<br>\nIn the actual application, there are features I'm using from 5.14 for performance reasons.  I can manually recreate the functionality in versions less than 5.14, but the performance suffers.</p>\n"}, {"tags": ["perl", "unicode"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1434414235, "post_id": 30851728, "comment_id": 49757230, "body": "<code>pack(&#39;U&#39;, 0xFF)</code> is a weird way of doing <code>chr(0xFF)</code>, so it&#39;s no surprise that it&#39;s different than <code>encode(&#39;UTF-8&#39;, chr(0xFF))</code>"}], "answers": [{"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1434393084, "post_id": 30852216, "comment_id": 49748275, "body": "Ok so unpack can only handle byte strings (not character strings). It would be interesting to know how it truncates when it is given a character string, and where this truncation of character strings are documented?"}, {"owner": {"reputation": 29236, "user_id": 4727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01a99498921b93509c73d390704bddf6?s=128&d=identicon&r=PG", "display_name": "Leon Timmermans", "link": "https://stackoverflow.com/users/4727/leon-timmermans"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1434393495, "post_id": 30852216, "comment_id": 49748505, "body": "unpack H* apparently does a module 256 on the values, I don&#39;t think this is documented. Generally speaking, you shouldn&#39;t throw any character string at it, that will only cause grief."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1434414916, "post_id": 30852216, "comment_id": 49757382, "body": "@Leon Timmermans, &quot;This is because it creates character string, not a byte string.&quot; is complete nonsense, and there&#39;s truncation or modulo 256 happening here. He did <code>unpack(&quot;H*&quot;, &quot;\\xFF&quot;)</code>, which is perfectly legitimate."}, {"owner": {"reputation": 29236, "user_id": 4727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01a99498921b93509c73d390704bddf6?s=128&d=identicon&r=PG", "display_name": "Leon Timmermans", "link": "https://stackoverflow.com/users/4727/leon-timmermans"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1434548843, "post_id": 30852216, "comment_id": 49826240, "body": "@ikegami: that wasn&#39;t always so, on older versions of perl that returns <code>c3bf</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1434554254, "post_id": 30852216, "comment_id": 49830509, "body": "@Leon Timmermans, Yeah, <code>pack</code>&#39;s handling of some scalars used to be super buggy. I think it was fixed in 5.10. I don&#39;t know why you brought this up since noone&#39;s talking about the buggy behaviour of decade-old versions of Perl."}], "tags": [], "owner": {"reputation": 29236, "user_id": 4727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01a99498921b93509c73d390704bddf6?s=128&d=identicon&r=PG", "display_name": "Leon Timmermans", "link": "https://stackoverflow.com/users/4727/leon-timmermans"}, "is_accepted": true, "score": 2, "last_activity_date": 1434539693, "last_edit_date": 1434539693, "creation_date": 1434392297, "answer_id": 30852216, "question_id": 30851728, "link": "https://stackoverflow.com/questions/30851728/create-unicode-character-with-pack/30852216#30852216", "title": "Create unicode character with pack", "body": "<blockquote>\n  <p>Why do I get ff and not c3bf when using pack ?</p>\n</blockquote>\n\n<p>This is because pack creates a character string, not a byte string.</p>\n\n<pre><code>&gt; perl -MDevel::Peek -e 'Dump(pack(\"U\", 0xff));'\nSV = PV(0x13a6d18) at 0x13d2ce8\n  REFCNT = 1\n  FLAGS = (PADTMP,POK,READONLY,pPOK,UTF8)\n  PV = 0xa6d298 \"\\303\\277\"\\0 [UTF8 \"\\x{ff}\"]\n  CUR = 2\n  LEN = 32\n</code></pre>\n\n<p>Hence unpack(\"H*\") doesn't look at the byte-value of that string, but the (truncated) character value of it. If you'd do:</p>\n\n<pre><code>say unpack \"H*\", encode(\"UTF-8\", pack(\"U\", 0xff));\n</code></pre>\n\n<p>Then you'd get the expected result.</p>\n\n<p>See also <a href=\"http://www.nntp.perl.org/group/perl.perl5.porters/2013/05/msg201247.html\" rel=\"nofollow\">this thread</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1434440545, "post_id": 30857082, "comment_id": 49765525, "body": "Hmm, I am not sure I understand.  Why is then <code>perl -MDevel::Peek -e &#39;Dump(pack &#39;U&#39;, 0xff);&#39;</code> returning <code>c3bf</code>, whereas <code>perl -MDevel::Peek -e &#39;Dump(chr 0xff);&#39;</code> returns <code>ff</code> ? (You say that they both should return <code>ff</code>..)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1434449675, "post_id": 30857082, "comment_id": 49771177, "body": "<code>perl -MDevel::Peek -e &#39;Dump(pack &#39;U&#39;, 0xff);&#39;</code> says the string is <code>&quot;\\x{ff}&quot;</code>. <code>perl -MDevel::Peek -e &#39;Dump(chr 0xff);&#39;</code> says the string is <code>&quot;\\377&quot;</code>. In both cases, that&#39;s the single character <code>FF</code>. They are stored in differently internally, but they are the same thing string just like signed integer zero and floating point zero are both zero."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1434450686, "post_id": 30857082, "comment_id": 49771816, "body": "If code looks sees <code>C3 BF</code> when looking at <code>pack &#39;U&#39;, 0xff</code>, it&#39;s buggy. To work with such buggy code, you can use <code>utf8::upgrade</code> and <code>utf8::downgrade</code> to switch a variable between the two storage formats."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1434451850, "post_id": 30857082, "comment_id": 49772540, "body": "If I run <code>perl -MDevel::Peek -e &#39;Dump(pack &#39;U&#39;, 0xff);</code>, I get <code>PV = &quot;\\303\\277&quot;\\0 [UTF8 &quot;\\x{ff}&quot;]</code>. What do you get?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1434455704, "post_id": 30857082, "comment_id": 49775057, "body": "@H&#229;kon H&#230;gland, The same: The string <code>&quot;\\x{ff}&quot;</code> stored using the UTF8=1 storage format"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1434455720, "post_id": 30857082, "comment_id": 49775072, "body": "And then <code>perl -MDevel::Peek -e &#39;Dump(chr 0xff);&#39;</code> gives me <code>PV = &quot;\\377&quot;\\0</code>. So what confuses me is that obiviously &quot;\\377&quot; is not the same as &quot;\\303\\277&quot;. (But in your answer you say that <code>pack(&#39;U&#39;, 0xFF)</code> is the same as <code>chr 0xff</code>)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1434457437, "post_id": 30857082, "comment_id": 49776266, "body": "Noone said &quot;\\377&quot; is the same as &quot;\\303\\277&quot;. I said <code>chr(0xFF)</code> is the same as <code>pack(&#39;U&#39;, 0xFF)</code>, and neither are &quot;\\303\\277&quot;. You&#39;re confusing yourself by using the wrong tool. I already told you a convenient tool for examining strings: <code>sprint &#39;%vX&#39;</code>. Try <code>say chr(0xFF) eq pack(&#39;U&#39;, 0xFF) ? &quot;equal&quot; : &quot;not equal&quot;;</code> Not only will that say equal, you&#39;ll find they have the same length (1), and each of the characters are identical (<code>ord</code> returns 0xFF for the first and only character)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1434457446, "post_id": 30857082, "comment_id": 49776269, "body": "Why do people understand that IV=&quot;\\0\\0\\0\\1&quot; [+1] and NV=&quot;\\0\\0\\0\\0\\0\\0\\360\\77&quot; [+1.0*2^0] are the same number, but they refuse to accept that PV=&quot;\\377&quot;\\0 [&quot;\\x{ff}&quot;] and PV,UTF8=&quot;\\303\\277&quot;\\0 [&quot;\\x{ff}&quot;] are the same string?!? Why do those same people insist on peeking at the internal storage???"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1434415054, "last_edit_date": 1434415054, "creation_date": 1434414732, "answer_id": 30857082, "question_id": 30851728, "link": "https://stackoverflow.com/questions/30851728/create-unicode-character-with-pack/30857082#30857082", "title": "Create unicode character with pack", "body": "<pre><code>pack('U', 0xFF)\n</code></pre>\n\n<p>is just a weird way of doing</p>\n\n<pre><code>chr(0xFF)\n</code></pre>\n\n<p>so</p>\n\n<pre><code>\"\\xFF\"                             returns chars   FF\nchr(0xFF)                          returns chars   FF\npack('U', 0xFF)                    returns chars   FF\n\n\"\\xC3\\xBF\"                         returns chars   C3 BF\nencode('UTF-8', chr(0xFF))         returns chars   C3 BF\nencode('UTF-8', pack('U', 0xFF))   returns chars   C3 BF\n</code></pre>\n\n<p>so</p>\n\n<pre><code>say unpack \"H*\", \"\\xFF\";                             outputs   ff\nsay unpack \"H*\", chr(0xFF);                          outputs   ff\nsay unpack \"H*\", pack('U', 0xFF);                    outputs   ff\n\nsay unpack \"H*\", \"\\xC3\\xBF\";                         outputs   c3bf\nsay unpack \"H*\", encode('UTF-8', pack('U', 0xFF));   outputs   c3bf\nsay unpack \"H*\", encode('UTF-8', chr(0xFF));         outputs   c3bf\n</code></pre>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 30852216, "answer_count": 2, "score": 2, "last_activity_date": 1434539693, "creation_date": 1434390610, "question_id": 30851728, "link": "https://stackoverflow.com/questions/30851728/create-unicode-character-with-pack", "title": "Create unicode character with pack", "body": "<p>I am trying to understand how Perl handles unicode.</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nuse Encode qw(encode);\n\nsay unpack \"H*\", pack(\"U\", 0xff);\nsay unpack \"H*\", encode( 'UTF-8', chr 0xff );\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>ff\nc3bf\n</code></pre>\n\n<p>Why do I get <code>ff</code> and not <code>c3bf</code> when using pack ?</p>\n"}, {"tags": ["perl", "moose"], "comments": [{"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "edited": false, "score": 1, "creation_date": 1434391145, "post_id": 30851147, "comment_id": 49747226, "body": "<code>default =&gt; sub { oct(&#39;0444&#39;) }</code> is overkill.  <code>default =&gt; 0444</code> will do the same thing with less overhead."}], "answers": [{"comments": [{"owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 0, "creation_date": 1434391233, "post_id": 30851752, "comment_id": 49747262, "body": "Why it is so easy to understand the need of two different types (when someone other solves the problem)? Thank you very much."}, {"owner": {"reputation": 29236, "user_id": 4727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01a99498921b93509c73d390704bddf6?s=128&d=identicon&r=PG", "display_name": "Leon Timmermans", "link": "https://stackoverflow.com/users/4727/leon-timmermans"}, "edited": false, "score": 0, "creation_date": 1434393674, "post_id": 30851752, "comment_id": 49748596, "body": "Does that actually work reliably? Given strings and integers aren&#39;t really types on a core level?"}, {"owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 0, "creation_date": 1434395144, "post_id": 30851752, "comment_id": 49749457, "body": "could please check my question again? Somewhere i&#39;m doing something wrong."}], "tags": [], "owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "is_accepted": false, "score": 2, "last_activity_date": 1434392092, "last_edit_date": 1434392092, "creation_date": 1434390679, "answer_id": 30851752, "question_id": 30851147, "link": "https://stackoverflow.com/questions/30851147/moose-coercion-to-file-permission-octal-value/30851752#30851752", "title": "Moose coercion to file-permission octal value", "body": "<p>Try something like this:</p>\n\n<pre><code>subtype 'Perm',\n    as 'Int',\n    where { $_ &gt;= 0 and $_ &lt;= 06777 };\n\nsubtype 'PermStr',\n    as 'Str',\n    where { $_ =~ /\\A[01246]?[0-7]{3}\\z/ };\n\ncoerce 'Perm',\n  from 'PermStr',\n  via { oct($_) };\n</code></pre>\n\n<p>Don't forget to declare your attributes with <code>coerce =&gt; 1</code>.</p>\n\n<p>Note: The <code>where</code> clause I gave for <code>Perm</code> is less restrictive than the one you gave for <code>PermStr</code>.  Changing it to disallow 03000&ndash;03777 and 05000&ndash;05777 is an exercise left for the reader.</p>\n"}], "owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1434395104, "creation_date": 1434388645, "last_edit_date": 1434395104, "question_id": 30851147, "link": "https://stackoverflow.com/questions/30851147/moose-coercion-to-file-permission-octal-value", "title": "Moose coercion to file-permission octal value", "body": "<p>In my Moose object need manage file-permission attribute. Would be nice to accept, any variant, e.g:</p>\n\n<pre><code>my $obj = My::Obj-&gt;new();   # should assign default 0444\nmy $obj = My::Obj-&gt;new(perm =&gt; '1666'); #as string\nmy $obj = My::Obj-&gt;new(perm =&gt; 0555); #as octal\n</code></pre>\n\n<p>also verifies the value when it is set by the accessor, like:</p>\n\n<pre><code>$obj-&gt;perm('0666');\n#etc\n</code></pre>\n\n<p>So, looking for something</p>\n\n<pre><code>has 'perm' =&gt; (is =&gt; 'rw', isa =&gt; Perm, coerce =&gt; 1, default =&gt; sub { oct('0444') });\n</code></pre>\n\n<p>e.g. want store the permission as an number (what is usable in the file-operations).</p>\n\n<p>but have no idea how to create the <code>Perm</code> type, what</p>\n\n<ul>\n<li>dies on incorrect values</li>\n<li>coerces from valid string to octal value</li>\n<li>accepts valid octal value</li>\n</ul>\n\n<p>e.g. tried something like</p>\n\n<pre><code>subtype 'Perm',\n    as 'Str',  #but i want store a number \n    where { $_ =~ /\\A[01246]?[0-7]{3}\\z/ };  #but i know the validation for strings only\n</code></pre>\n\n<p>But the above verifies it as <code>Str</code> and I want store the <code>octal</code> value, so I'm lost.. ;(</p>\n\n<p>Could anyone help?</p>\n\n<h1>EDIT</h1>\n\n<p>Still fighting with this.</p>\n\n<pre><code>package Some;\nuse 5.018;\nuse warnings;\nuse namespace::sweep;\nuse Moose;\nuse Moose::Util::TypeConstraints;\n\nsubtype 'Perm', as 'Int', where { $_ &gt;= 0 and $_ &lt;= 06777 }, message { 'octal perm out of range' };\nsubtype 'PermStr', as 'Str', where { $_ =~ /\\A[01246]?[0-7]{3}\\z/ }, message { 'bad string-perm' };\ncoerce 'Perm', from 'PermStr', via { oct(\"$_\") };\n\nhas 'perm' =&gt; ( is =&gt; 'rw', isa =&gt; 'Perm', coerce =&gt; 1, default =&gt; 0444, );\nno Moose::Util::TypeConstraints;\n\npackage main;\nmy($p,$q);\n$p = '0333' ; $q = Some-&gt;new(perm =&gt; $p); printf(\"dec:%d oct:%o\\n\", $q-&gt;perm, $q-&gt;perm);\n$p = '0383' ; $q = Some-&gt;new(perm =&gt; $p); printf(\"dec:%d oct:%o\\n\", $q-&gt;perm, $q-&gt;perm);\n$p =   0333 ; $q = Some-&gt;new(perm =&gt; $p); printf(\"dec:%d oct:%o\\n\", $q-&gt;perm, $q-&gt;perm);\n$p = 033333 ; $q = Some-&gt;new(perm =&gt; $p); printf(\"dec:%d oct:%o\\n\", $q-&gt;perm, $q-&gt;perm);\n</code></pre>\n\n<p>the above prints:</p>\n\n<pre><code>dec:333 oct:515\ndec:383 oct:577\ndec:219 oct:333\nAttribute (perm) does not pass the type constraint because: octal perm out of range at ....\n</code></pre>\n\n<p>E.g. the perm entered as octal works (and detects the out of range), but from the string</p>\n\n<ul>\n<li>doesn't checks the match</li>\n<li>and it doesn't does the octal conversion.</li>\n</ul>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 862, "user_id": 3586150, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1f0969599955a953e592034929ed7a23?s=128&d=identicon&r=PG", "display_name": "Neil H Watson", "link": "https://stackoverflow.com/users/3586150/neil-h-watson"}, "edited": false, "score": 0, "creation_date": 1434386231, "post_id": 30850359, "comment_id": 49744515, "body": "Show your open statement and the die."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1434386346, "post_id": 30850359, "comment_id": 49744583, "body": "If that duplicate doesn&#39;t answer your question, let me know in a comment here and I will reopen the question for you."}, {"owner": {"reputation": 151, "user_id": 2762725, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cbcadfb216af8aa55e075227a586ee94?s=128&d=identicon&r=PG&f=1", "display_name": "eric kulcyk", "link": "https://stackoverflow.com/users/2762725/eric-kulcyk"}, "edited": false, "score": 0, "creation_date": 1434392508, "post_id": 30850359, "comment_id": 49747919, "body": "I was looking for something that could detect the handles at the time I try to open the file in the perl script.  Process explorer only updates twice a second and don&#39;t seem to show the perl program which is running.  Procmon might work except it runs out of memory trying to filter everything and makes to compiler go at a crawl."}], "owner": {"reputation": 151, "user_id": 2762725, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cbcadfb216af8aa55e075227a586ee94?s=128&d=identicon&r=PG&f=1", "display_name": "eric kulcyk", "link": "https://stackoverflow.com/users/2762725/eric-kulcyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "closed_date": 1434386264, "answer_count": 0, "score": 0, "last_activity_date": 1434385970, "creation_date": 1434385970, "question_id": 30850359, "link": "https://stackoverflow.com/questions/30850359/perl-detect-handles-for-permission-denied-error-while-opening-file", "closed_reason": "Duplicate", "title": "Perl Detect Handles for Permission Denied Error While Opening File", "body": "<p>I am debugging a large perl (5.10.1) script that sometimes has trouble opening a file for write access on Windows server 2012 R2.  I get a permission denied error, even though the perl script was run in an administrator command prompt and the only things which should be touching the file it is trying to open are the script itself or other instances of it (the script is run several times in a row).  The only thing I can think is that there is a handle that is sometimes not closed properly.  Is there any way to debug this and see what was prevent the file from being overwritten, or is combing through the code by hand the only way?  Are there other reasons for permission denied than open handles or a non-privileged user account?</p>\n"}, {"tags": ["perl", "export", "ksh"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1434383528, "post_id": 30849563, "comment_id": 49742746, "body": "<code>$ENV[VARNAME} = &quot;value&quot;;</code>."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1434383980, "post_id": 30849563, "comment_id": 49743083, "body": "@JonathanLeffler: <code>$ENV{</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1434384097, "post_id": 30849563, "comment_id": 49743171, "body": "@choroba: Aargh \u2014 yes, it is supposed to be symmetrically using braces <code>{}</code>, as in <code>$ENV{VARNAME} = &quot;value&quot;;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5012038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2d4ce71252f6769d98150193dc6a88?s=128&d=identicon&r=PG&f=1", "display_name": "qwerty12345", "link": "https://stackoverflow.com/users/5012038/qwerty12345"}, "edited": false, "score": 0, "creation_date": 1434384909, "post_id": 30849818, "comment_id": 49743689, "body": "and in ksh this would correspond to &quot;export varname = value&quot; ?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 3, "user_id": 5012038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2d4ce71252f6769d98150193dc6a88?s=128&d=identicon&r=PG&f=1", "display_name": "qwerty12345", "link": "https://stackoverflow.com/users/5012038/qwerty12345"}, "edited": false, "score": 0, "creation_date": 1434388076, "post_id": 30849818, "comment_id": 49745602, "body": "@qwerty12345: see update, but (give or take spacing around the <code>=</code> sign), the answer is &quot;yes&quot;."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 2, "last_activity_date": 1434389320, "last_edit_date": 1434389320, "creation_date": 1434384194, "answer_id": 30849818, "question_id": 30849563, "link": "https://stackoverflow.com/questions/30849563/perl-equivalent-to-kornshell-export-command/30849818#30849818", "title": "Perl equivalent to Kornshell export command?", "body": "<p>It's very straight-forward.  The <code>%ENV</code> hash contains the values of the environment variables keyed by environment variable name.  You can set or update an environment variable's value by assigning to <code>%ENV</code>:</p>\n\n<pre><code>$ENV{VARNAME} = \"value\";\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>my $varname = \"VARNAME\";\nmy $value = \"value\";\n$ENV{$varname} = $value;\n</code></pre>\n\n<p>You can delete an environment variable in Perl with:</p>\n\n<pre><code>delete $ENV{VARNAME};\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>And in <code>ksh</code> this would correspond to \"<code>export varname=value</code>\"?</p>\n</blockquote>\n\n<p>These examples are both equivalent to the (Korn, Bash, Bourne) shell notation:</p>\n\n<pre><code>export VARNAME=\"value\"\n</code></pre>\n\n<p>or, if you're stretching the limits a bit, the second is equivalent to:</p>\n\n<pre><code>varname=\"VARNAME\"\nvalue=\"value\"\nexport $varname=\"$value\"\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5012038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2d4ce71252f6769d98150193dc6a88?s=128&d=identicon&r=PG&f=1", "display_name": "qwerty12345", "link": "https://stackoverflow.com/users/5012038/qwerty12345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 30849818, "answer_count": 1, "score": 0, "last_activity_date": 1434389320, "creation_date": 1434383457, "question_id": 30849563, "link": "https://stackoverflow.com/questions/30849563/perl-equivalent-to-kornshell-export-command", "title": "Perl equivalent to Kornshell export command?", "body": "<p>I'm working on translating some kornshell to perl and was wondering if there is an equivalent in perl to export</p>\n"}, {"tags": ["perl", "formatting", "deobfuscation"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1434381712, "post_id": 30848816, "comment_id": 49741472, "body": "It accepts input until EOF"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1434381776, "post_id": 30848816, "comment_id": 49741519, "body": "That program generates code it latter executes. Why don&#39;t you actually look at the generated code? (Replace <code>eval</code> with <code>print</code>)"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1434633982, "post_id": 30848816, "comment_id": 49870508, "body": "The only difference between the code shown above and the generated code is that all instances of <code>x</code> are replaced with <code>pack</code>, its still incredibly confusing after that is replaced, but thanks to Google (and thanks to you for pointing it out) there&#39;s a full explanation online. :)"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434383269, "post_id": 30849084, "comment_id": 49742571, "body": "The claim that it is &quot;six or seven lines&quot; of Perl is a a little arbitrary"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434383488, "post_id": 30849084, "comment_id": 49742718, "body": "@Borodin, Well, the page includes an actual byte count, but the code was formatted to 80 char/lines (including newline) to display properly on an 80 char terminal. I guess that&#39;s a more &quot;understandable&quot; number."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1434383951, "post_id": 30849084, "comment_id": 49743061, "body": "Funny enough, but for the missing indentation the Perl part is just <i>as ugly</i> as the screenshot of the C code on the wiki page."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1434384960, "post_id": 30849084, "comment_id": 49743740, "body": "Wow,  I didn&#39;t even bother trying Google. I assumed with all of those special characters Google would never be able to make sense of it if I just pasted the code in the search bar... I guess google did have the answer this time! Thanks @ikegami!"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1434384994, "post_id": 30849084, "comment_id": 49743754, "body": "@tjwrona1992 For a play-by-play explanation of the code, see <a href=\"http://perl.plover.com/qrpff/article-main.html\" rel=\"nofollow noreferrer\">qrpff Explained</a> (linked in the Wikipedia article)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1434386153, "last_edit_date": 1434386153, "creation_date": 1434382135, "answer_id": 30849084, "question_id": 30848816, "link": "https://stackoverflow.com/questions/30848816/what-does-this-horribly-ugly-yet-somehow-secretly-beautiful-perl-code-do/30849084#30849084", "title": "What does this horribly ugly (yet somehow secretly beautiful) Perl code do?", "body": "<p>Passing the code to Google returns <a href=\"https://en.wikipedia.org/wiki/Qrpff\" rel=\"nofollow\">this page</a> that explains</p>\n\n<blockquote>\n  <p><code>qrpff</code> is a Perl script created by Keith Winstein and Marc Horowitz of the MIT SIPB. It performs DeCSS in six or seven lines. The name itself is an encoding of \"decss\" in rot-13.</p>\n</blockquote>\n\n<p>See also <a href=\"http://perl.plover.com/qrpff/article-main.html\" rel=\"nofollow\"><code>qrpff</code> explained</a>.</p>\n"}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "accepted_answer_id": 30849084, "answer_count": 1, "score": 0, "last_activity_date": 1434386212, "creation_date": 1434381361, "last_edit_date": 1434386212, "question_id": 30848816, "link": "https://stackoverflow.com/questions/30848816/what-does-this-horribly-ugly-yet-somehow-secretly-beautiful-perl-code-do", "title": "What does this horribly ugly (yet somehow secretly beautiful) Perl code do?", "body": "<p>I found this code in a Powerpoint presentation about Perl scripting and this was on a page demonstrating how ugly Perl code can get if you really  wanted to make it that way.  The presentation says nothing about what this code does.  Honestly I am just very curious to know... It has no compilation errors so it appears to be a valid Perl script, but I can't for the life of me figure out what it does.</p>\n\n<p>Here is the script:</p>\n\n<pre><code>$_='while(read+STDIN,$_,2048){$a=29;$b=73;$c=142;$t=255;@t=map{$_%16or$t^=$c^=(\n$m=(11,10,116,100,11,122,20,100)[$_/16%8])&amp;110;$t^=(72,@z=(64,72,$a^=12*($_%16\n-2?0:$m&amp;17)),$b^=$_%64?12:0,@z)[$_%8]}(16..271);if((@a=unx\"C*\",$_)[20]&amp;48){$h\n=5;$_=unxb24,join\"\",@b=map{xB8,unxb8,chr($_^$a[--$h+84])}@ARGV;s/...$/1$&amp;/;$\nd=unxV,xb25,$_;$e=256|(ord$b[4])&lt;&lt;9|ord$b[3];$d=$d&gt;&gt;8^($f=$t&amp;($d&gt;&gt;12^$d&gt;&gt;4^\n$d^$d/8))&lt;&lt;17,$e=$e&gt;&gt;8^($t&amp;($g=($q=$e&gt;&gt;14&amp;7^$e)^$q*8^$q&lt;&lt;6))&lt;&lt;9,$_=$t[$_]^\n(($h&gt;&gt;=8)+=$f+(~$g&amp;$t))for@a[128..$#a]}print+x\"C*\",@a}';s/x/pack+/g;eval\n</code></pre>\n\n<p>I made a few attempts at reformatting it to try and make some sense of it, but I think it would take a true Perl guru to sort this one out...</p>\n\n<p>Reformatted code:</p>\n\n<pre><code>$_ = 'while(read+STDIN, $_, 2048) {\n    $a = 29;\n    $b = 73;\n    $c = 142;\n    $t = 255;\n\n    @t = map {\n        $_%16 or $t ^= $c ^= ($m = (11, 10, 116, 100, 11, 122, 20, 100) [$_/16%8])&amp;110;\n        $t ^= (72, @z = (64, 72, $a ^= 12*($_%16 - 2 ? 0 : $m &amp; 17)), $b ^= $_%64 ? 12: 0, @z) [$_%8]\n    } (16..271);\n\n    if ((@a = unx\"C*\", $_) [20]&amp;48) {\n        $h=5;\n\n        $_ = unxb24, join \"\", @b = map {\n            xB8, unxb8, chr ($_^$a [--$h + 84])\n        } @ARGV;\n\n        s/...$/1$&amp;/;\n        $d = unxV, xb25, $_;\n        $e = 256 | (ord $b[4]) &lt;&lt; 9 | ord $b[3];\n        $d = $d\n            &gt;&gt; 8^($f = $t&amp;($d &gt;&gt; 12^$d &gt;&gt; 4^$d^$d/8))\n            &lt;&lt; 17, $e = $e &gt;&gt; 8^($t&amp;($g = ($q = $e &gt;&gt; 14&amp;7^$e)^$q*8^$q &lt;&lt; 6))\n            &lt;&lt; 9, $_ = $t[$_]^(($h &gt;&gt;= 8) += $f + (~$g&amp;$t)) for @a[128..$#a]\n    }\n\n    print+x\"C*\",@a\n}';\n\ns/x/pack+/g;\neval\n</code></pre>\n\n<p>When you run the code it seems to just continuously accept user input.  I haven't been able to figure out how to make it do anything else or whether it even can do anything else.</p>\n\n<p>The print statement near the end leads me to believe that there is some way to get it to a point where it will print an output though.</p>\n\n<blockquote>\n  <p>Also please don't tell me to migrate this to the codegolf website...  Questions about how code functions are considered off topic for the codegolf site and are told to be redirected to StackOverflow.</p>\n</blockquote>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "is_accepted": false, "score": 2, "last_activity_date": 1434381103, "last_edit_date": 1434381103, "creation_date": 1434380655, "answer_id": 30848571, "question_id": 30848536, "link": "https://stackoverflow.com/questions/30848536/find-numbers-in-a-file-and-change-their-value-with-perl/30848571#30848571", "title": "Find numbers in a file and change their value with perl", "body": "<pre><code>\\b0\\.\\d+\\b\n</code></pre>\n\n<p>You can try this.Replace by <code>1</code>.See demo.</p>\n\n<p><a href=\"https://regex101.com/r/hI0qP0/29\" rel=\"nofollow\">https://regex101.com/r/hI0qP0/29</a></p>\n"}, {"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1434381681, "post_id": 30848620, "comment_id": 49741455, "body": "And for bonus points: <code>echo -0.7 | perl -pe &#39;s&#47;\\b0\\.\\d+&#47;1&#47;g&#39;</code> prints <code>-1</code>. The OP&#39;s sample input doesn&#39;t contain negative numbers, but a robust solution should probably handle them. Of course, if we go that route, -1 should also be converted to 1, and the OP didn&#39;t mention that :)"}], "tags": [], "owner": {"reputation": 12977, "user_id": 4453262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b98c905b863b482c3d1d6616d3482b54?s=128&d=identicon&r=PG&f=1", "display_name": "karthik manchala", "link": "https://stackoverflow.com/users/4453262/karthik-manchala"}, "is_accepted": true, "score": 2, "last_activity_date": 1434380993, "last_edit_date": 1434380993, "creation_date": 1434380760, "answer_id": 30848620, "question_id": 30848536, "link": "https://stackoverflow.com/questions/30848536/find-numbers-in-a-file-and-change-their-value-with-perl/30848620#30848620", "title": "Find numbers in a file and change their value with perl", "body": "<p>You can just match the numbers that are less than one.. and replace with <code>1</code>:</p>\n\n<pre><code>perl -pe 's/\\b0\\.\\d+/1/g' file\n</code></pre>\n\n<p>See <a href=\"https://regex101.com/r/rL7dX9/2\" rel=\"nofollow\">DEMO</a></p>\n"}], "owner": {"reputation": 37, "user_id": 5009143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c546687f418f8064f0c2eb1c60e7984?s=128&d=identicon&r=PG&f=1", "display_name": "zone", "link": "https://stackoverflow.com/users/5009143/zone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 30848620, "answer_count": 2, "score": 2, "last_activity_date": 1434385370, "creation_date": 1434380549, "last_edit_date": 1434385370, "question_id": 30848536, "link": "https://stackoverflow.com/questions/30848536/find-numbers-in-a-file-and-change-their-value-with-perl", "title": "Find numbers in a file and change their value with perl", "body": "<p>I have a file with some data in it but there are a bunch of annoying numbers that are less than one which I wanted to just change to 1 instead of manually doing it. I was wondering how you would do this in perl. </p>\n\n<p>I tried using something like this</p>\n\n<pre><code>perl -pe 's/\\d+/$&amp; &lt; 1 ? $&amp;=1 : $&amp;/g' file\n</code></pre>\n\n<p>This basically just finds all numbers and then checks if they are less then 1. If so then set it to 1 and if not leave it alone. Unfortunately, it will not allow $&amp;=1 to happen since it is a readonly. Is there something else in perl that would achieve this effect?\nExample input:</p>\n\n<pre><code>this 1 is a 7 file that\nhas 0.5 some numbers 4\nthat are 0.3 less 0.1 than 0.9 \none as you see 1.1\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>this 1 is a 7 file that\nhas 1 some numbers 4\nthat are 1 less 1 than 1 \none as you see 1.1\n</code></pre>\n"}, {"tags": ["perl", "hash", "package", "command-line-interface"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1434380832, "post_id": 30848516, "comment_id": 49740833, "body": "<code>perl -wE &#39;use constant { FOO =&gt; 1, BAR =&gt; 2 }; say FOO, &quot; &quot;, BAR&#39;</code> (Note that <code>-E</code> enables all features, so there&#39;s no need for <code>-Mfeature=say</code>)"}, {"owner": {"reputation": 10389, "user_id": 317266, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b4f5deafa991b6d0f2b87ef20e9159fd?s=128&d=identicon&r=PG", "display_name": "Seki", "link": "https://stackoverflow.com/users/317266/seki"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1434381054, "post_id": 30848516, "comment_id": 49740997, "body": "@ThisSuitIsBlackNot: thanks for pointing the <code>-E</code> switch that I did not know. As I mentioned, <code>feature</code> is just an example, actually I was trying to import a custom module that takes a hash as parameter at import"}, {"owner": {"reputation": 10389, "user_id": 317266, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b4f5deafa991b6d0f2b87ef20e9159fd?s=128&d=identicon&r=PG", "display_name": "Seki", "link": "https://stackoverflow.com/users/317266/seki"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1434381120, "post_id": 30848516, "comment_id": 49741051, "body": "well, just adding the <code>use</code> block in the <code>-e</code> argument is so simple that I did not think about it :o/"}], "answers": [{"comments": [{"owner": {"reputation": 10389, "user_id": 317266, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b4f5deafa991b6d0f2b87ef20e9159fd?s=128&d=identicon&r=PG", "display_name": "Seki", "link": "https://stackoverflow.com/users/317266/seki"}, "edited": false, "score": 0, "creation_date": 1434436679, "post_id": 30848818, "comment_id": 49763263, "body": "Right. &quot;<code>-Mmodule</code> executes use module ; before executing your program. You can use quotes to add extra code after the module name, e.g., <code>&quot;-MMODULE qw(foo bar)&quot;</code>.&quot; Thanks :o)"}], "tags": [], "owner": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "is_accepted": true, "score": 2, "last_activity_date": 1434381369, "creation_date": 1434381369, "answer_id": 30848818, "question_id": 30848516, "link": "https://stackoverflow.com/questions/30848516/how-to-pass-a-hash-as-optional-argument-to-m-in-command-line/30848818#30848818", "title": "How to pass a hash as optional argument to -M in command line", "body": "<p>Looking at <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow\">perlrun</a> use: </p>\n\n<pre><code>perl -Mfeature=say \"-Mconstant {c1 =&gt; 'foo', c2 =&gt; 'bar'}\" -e\"say c1,c2\"\n</code></pre>\n"}], "owner": {"reputation": 10389, "user_id": 317266, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b4f5deafa991b6d0f2b87ef20e9159fd?s=128&d=identicon&r=PG", "display_name": "Seki", "link": "https://stackoverflow.com/users/317266/seki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 30848818, "answer_count": 1, "score": 2, "last_activity_date": 1434381369, "creation_date": 1434380493, "question_id": 30848516, "link": "https://stackoverflow.com/questions/30848516/how-to-pass-a-hash-as-optional-argument-to-m-in-command-line", "title": "How to pass a hash as optional argument to -M in command line", "body": "<p>I know that when we need to pass some arguments to the <code>use</code> keyword after a package name we can pass them in the command line after the <code>-M</code> parameter. </p>\n\n<p>For example:</p>\n\n<pre><code>use feature 'say';\nsay 'hello!';\n</code></pre>\n\n<p>can be invoked from the command line with</p>\n\n<pre><code>&gt;perl -Mfeature=say -e\"say 'hello!'\"\n</code></pre>\n\n<p>But what if the argument is a hash? Can I make a one-liner for the following example:</p>\n\n<pre><code>use constant {c1 =&gt; 'foo', c2 =&gt; 'bar'};\nuse feature 'say';\nsay c1, c2; #expected: foobar\n</code></pre>\n\n<p>This does not work:</p>\n\n<pre><code>&gt;perl -Mfeature=say -Mconstant={c1,'foo',c2,'bar'} -e\"say c1,c2\"\nConstant name '{c1' has invalid characters at -e line 0.\nBEGIN failed--compilation aborted.\n</code></pre>\n\n<p>Neither that:</p>\n\n<pre><code>&gt;perl -Mfeature=say -Mconstant=\"c1,'foo',c2,'bar'\" -e\"say c1,c2\"\n'foo'c2'bar'c2\n</code></pre>\n\n<p>I know that I can add multiple <code>-Mconstant=foo</code> in the command line, but it is just an example; I have a package here that can take a hash at import and that I am trying to invoke from command-line.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1434356740, "post_id": 30840453, "comment_id": 49724872, "body": "You haven&#39;t give <code>$ROW_DELIM&quot;</code> a value anywhere in that code. You need to address the problem elsewhere."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 1, "creation_date": 1434356774, "post_id": 30840453, "comment_id": 49724889, "body": "Adding <code>use diagnostics;</code> will probably help you."}, {"owner": {"reputation": 21, "user_id": 3441479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/203003cee323e16dd8da4d21a095d122?s=128&d=identicon&r=PG&f=1", "display_name": "Vipin Saroha", "link": "https://stackoverflow.com/users/3441479/vipin-saroha"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1434360686, "post_id": 30840453, "comment_id": 49727150, "body": "our $ROW_DELIM;  this is the declaration of varidable in Package"}, {"owner": {"reputation": 7536, "user_id": 1691146, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RW9zE.jpg?s=128&g=1", "display_name": "RobEarl", "link": "https://stackoverflow.com/users/1691146/robearl"}, "edited": false, "score": 0, "creation_date": 1434370555, "post_id": 30840453, "comment_id": 49733249, "body": "Voting to close based on OPs comment-in-answer: <code>Never mind.. i got it. Silly mistake, libraries did not have the updated .pm file. </code>"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1434356770, "creation_date": 1434356770, "answer_id": 30840515, "question_id": 30840453, "link": "https://stackoverflow.com/questions/30840453/perl-global-symbol-requires-explicit-package-name/30840515#30840515", "title": "Perl : Global symbol requires explicit package name", "body": "<p>Without being able to see how you export/import the function - it'll be one of these things:</p>\n\n<ul>\n<li>You've declared it with <code>my</code> in your package. </li>\n<li>You aren't exporting it like you think</li>\n<li>You aren't importing it like you think.</li>\n</ul>\n\n<p>Try <code>$OtherPackageName::ROW_DELIM</code> and see if that works. </p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1434362998, "creation_date": 1434362998, "answer_id": 30842503, "question_id": 30840453, "link": "https://stackoverflow.com/questions/30840453/perl-global-symbol-requires-explicit-package-name/30842503#30842503", "title": "Perl : Global symbol requires explicit package name", "body": "<p>It isn't enough to declare the variable in a module that your main code uses: you have to <em>export</em> it from that module to make it visible elsewhere</p>\n\n<p>If you need any further help then you must show the contents of the module, together with the statement that imports it into the main code</p>\n"}], "owner": {"reputation": 21, "user_id": 3441479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/203003cee323e16dd8da4d21a095d122?s=128&d=identicon&r=PG&f=1", "display_name": "Vipin Saroha", "link": "https://stackoverflow.com/users/3441479/vipin-saroha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "closed_date": 1434384993, "answer_count": 2, "score": 0, "last_activity_date": 1434599582, "creation_date": 1434356609, "last_edit_date": 1434599582, "question_id": 30840453, "link": "https://stackoverflow.com/questions/30840453/perl-global-symbol-requires-explicit-package-name", "closed_reason": "Not suitable for this site", "title": "Perl : Global symbol requires explicit package name", "body": "<pre><code>&amp;verify_se_linecount ( \\@rows );\n\n### Drop the modified file\nopen ( OUT, \"&gt; $RESOLVED_DIR\\\\$filenameonly\" );\n\n# Loop through each row in the EDI file\nforeach my $row  ( @rows ) {\n    print OUT $row . \"$ROW_DELIM\";  #  Line 164\n}\n\nclose OUT;\n</code></pre>\n\n<p>I have a Perl script (the code above is part of it) that works perfectly on a test server but shows a compilation error on a production server. The error is</p>\n\n<pre><code>Global symbol `$ROW_DELIM` requires explicit package name at &lt;script_name&gt; line 164\n</code></pre>\n\n<p>The variable is declared with <code>our $ROW_DELIM</code> in a package which is imported in this script. It does not show any error for other objects used from that package.</p>\n"}, {"tags": ["text-processing", "perl"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1434369151, "post_id": 30839392, "comment_id": 49732266, "body": "This question should have been closed, not voted up, because the OP&#39;s problem is caused by a typo."}], "answers": [{"comments": [{"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 1, "creation_date": 1434364619, "post_id": 30839393, "comment_id": 49729458, "body": "And then, it can be simplified further: <code>perl -ne &#39;print unless &#47;.{240}&#47;&#39; input.txt &gt; output.txt</code>"}, {"owner": {"reputation": 538, "user_id": 4316166, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jszIp.jpg?s=128&g=1", "display_name": "kos", "link": "https://stackoverflow.com/users/4316166/kos"}, "reply_to_user": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1434371697, "post_id": 30839393, "comment_id": 49734070, "body": "@salva That would print every line but those containing exactly 240 characters."}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 1, "creation_date": 1434373964, "post_id": 30839393, "comment_id": 49735709, "body": "no, my one-liner prints any line containing less that 240 characters. In order to match lines of 240 chars you would have to use <code>&#47;^.{240}$&#47;</code>."}], "tags": [], "owner": {"reputation": 538, "user_id": 4316166, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jszIp.jpg?s=128&g=1", "display_name": "kos", "link": "https://stackoverflow.com/users/4316166/kos"}, "is_accepted": true, "score": 7, "last_activity_date": 1434374473, "last_edit_date": 1434374473, "creation_date": 1434350889, "answer_id": 30839393, "question_id": 30839392, "link": "https://stackoverflow.com/questions/30839392/why-this-exclusion-not-working-for-long-sentences/30839393#30839393", "title": "Why this exclusion not working for long sentences?", "body": "<p>You're using the wrong syntax: <code>[]</code> is used to match a character class, while here you're trying to match a number of occurences of <code>.</code>, which can be done using <code>{}</code>:</p>\n\n<pre><code>perl -ne 'print unless /.{240,}/' input.txt &gt; output.txt\n</code></pre>\n\n<p>Also, as suggested by salva in the comments, the pattern can be shortened to <code>.{240}</code>:</p>\n\n<pre><code>perl -ne 'print unless /.{240}/' input.txt &gt; output.txt\n</code></pre>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1434352803, "question_id": 209717}, "owner": {"reputation": 118707, "user_id": 54964, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0VZ1V.png?s=128&g=1", "display_name": "L&#233;o L&#233;opold Hertz \uc900\uc601", "link": "https://stackoverflow.com/users/54964/l%c3%a9o-l%c3%a9opold-hertz-%ec%a4%80%ec%98%81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 30839393, "answer_count": 1, "score": 1, "last_activity_date": 1434374473, "creation_date": 1434348581, "question_id": 30839392, "link": "https://stackoverflow.com/questions/30839392/why-this-exclusion-not-working-for-long-sentences", "title": "Why this exclusion not working for long sentences?", "body": "<p>Command </p>\n\n<pre><code>perl -ne 'print unless /.[240,]/' input.txt &gt; output.txt\n</code></pre>\n\n<p>which includes some sentences which are longer than 240 letters. Why?</p>\n\n<p>Example data</p>\n\n<blockquote>\n  <p>Development of World Funny Society program on young people who\n  are working hard for the sport and social life such that they have\n  time to go pizzeria every now and then and do some fun, programming\n  and having great breakfast:| World scenario of free time programs are\n  often too long such that this star probably makes the program upset\n  (*)|Again a very long option which is not probably the reason which\n  makes this program upset|good shorter option which is ok but nice to\n  write here coffee morning messages|c last option is always good one\n  because you know that you can soon stop   1</p>\n</blockquote>\n\n<p>Example data 2 </p>\n\n<blockquote>\n  <p>Indications of this program depends on many things and I like much\n  more this than Lorem ipsum which is too generic and takes too much\n  time to open:|short option just in case|little longer option so good\n  to have it here too|shorter which is better too but how much is the\n  question|shortest is not the least|longer one once again but not too\n  long  1</p>\n</blockquote>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1434355789, "creation_date": 1434355789, "answer_id": 30840237, "question_id": 30837533, "link": "https://stackoverflow.com/questions/30837533/perl-match-multiline-string-and-replace/30840237#30840237", "title": "Perl match multiline string and replace", "body": "<p>There is no <code>sm///</code> in Perl. The <a href=\"http://perldoc.perl.org/functions/s.html\" rel=\"nofollow\">substitution operator</a> is <code>s///</code> and the <a href=\"http://perldoc.perl.org/functions/m.html\" rel=\"nofollow\">match operator</a> is <code>m//</code>. Probably that gave you a syntax error. Also doing this through the command line when you already have a Perl is a bit strange. </p>\n\n<p>You can savely use an XML parser, even if it is not installed in the remote host. Take a look at <a href=\"https://metacpan.org/pod/Object::Remote\" rel=\"nofollow\">Object::Remote</a>, which lets you run Perl code and even use Perl modules from your local machine on a remote machine through SSH. <a href=\"https://www.youtube.com/watch?v=7hIyawUrCcQ&amp;index=37&amp;list=PLiKOSMurci-jUdnXdTGCWHzONJitWpb0z\" rel=\"nofollow\">The author mst talks about that in <em>the __END__ of everything</em></a>. </p>\n"}, {"tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": false, "score": 2, "last_activity_date": 1434360560, "last_edit_date": 1434360560, "creation_date": 1434359930, "answer_id": 30841526, "question_id": 30837533, "link": "https://stackoverflow.com/questions/30837533/perl-match-multiline-string-and-replace/30841526#30841526", "title": "Perl match multiline string and replace", "body": "<p>You can let Net::OpenSSH do the shell quoting for you and get rid of one of your problems. Though, in any case, using regular expressions to handle XML is usually a bad idea as any minor change in the XML file could break your script.</p>\n\n<p>As it seems your files are not too big, just copy then to the local machine using <code>scp</code>, do any required processing locally using a proper XML handling module as <a href=\"https://metacpan.org/pod/distribution/XML-LibXML/LibXML.pod\" rel=\"nofollow\">XML::LibXML</a> and finally copy them back to the remote machine:</p>\n\n<pre><code>use Net::OpenSSH;\nuse XML::LibXML;\n\nmy $hour = '...';\nmy $min = '...';\n\nmy $ssh = Net::OpenSSH-&gt;new($host,\n                            user =&gt; 'xxxxx',\n                            password =&gt; '1234444');\n$ssh-&gt;error and die \"Can't ssh to $host: \" . $ssh-&gt;error;\n\n$ssh-&gt;system(cp =&gt; '/test.properties', '/test.properties.bak'); # backup\n$ssh-&gt;scp_get(\"/test.properties\");\n\nmy $dom = XML::LibXML-&gt;load_xml(location =&gt; 'test.properties');\nfor my $ele ($dom-&gt;findnodes('/config/bean[property[@name=\"jobDetail\" and\n                                            @ref=\"delayDisconnectJobDetail\"]]\n                                          /property[@name=\"cronExpression\"]')) {\n    $ele-&gt;setAttribute(value =&gt; \"* $hour $min ? * MON-FRI\");\n}\n\nopen my $out, '&gt;', 'test.properties.new';\nbinmode $out;\n$dom-&gt;toFH($out);\n\n$ssh-&gt;scp_put('test.properties.new', '/test.properties');\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 3411200, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/964c4eafb823c79a251c7435910157cc?s=128&d=identicon&r=PG&f=1", "display_name": "user3411200", "link": "https://stackoverflow.com/users/3411200/user3411200"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1434360560, "creation_date": 1434343725, "last_edit_date": 1434351367, "question_id": 30837533, "link": "https://stackoverflow.com/questions/30837533/perl-match-multiline-string-and-replace", "title": "Perl match multiline string and replace", "body": "<p>I have a file located in a remote host.I want to replace a string <code>cronExpression value=\"* 30 9 ? * MON-FRI\"</code> to <code>cronExpression value=\"* $hour $min ? * MON-FRI\"</code> in that file.</p>\n\n<p>Input file is: <code>test.properties</code></p>\n\n<p>Its contents are like:</p>\n\n<pre><code>&lt;bean id=\"DisconnectCronTrigger\"\nclass=\"org.springframework.scheduling.quartz.CronFactoryBean\"&gt;\n&lt;property name=\"jobDetail\" ref=\"delayDisconnectJobDetail\" /&gt;\n&lt;property name=\"cronExpression\" value=\"* 30 20 ? * MON-FRI\" /&gt;\n&lt;/bean&gt;\n&lt;bean id=\"retryJobDetail\"\nclass=\"org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean\"&gt;\n&lt;property name=\"targetObject\" ref=\"retryMeterCommandJob\" /&gt;\n&lt;property name=\"targetMethod\" value=\"executeAll\" /&gt;\n&lt;/bean&gt;\n&lt;bean id=\"retryCronTrigger\"\nclass=\"org.springframework.scheduling.quartz.CronTriggerFactoryBean\"&gt;\n&lt;property name=\"jobDetail\" ref=\"retryJobDetail\" /&gt;\n&lt;property name=\"cronExpression\" value=\"* 30 9 ? * MON-FRI\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>I tried the below mentioned code but failed to replace</p>\n\n<pre><code>%opts =(user =&gt; 'xxxxx',\npassword =&gt; '1234444');\nmy $ssh = Net::OpenSSH-&gt;new(\"$host\", %opts);\n$ssh-&gt;error and die \"Can't ssh to $host: \" . $ssh-&gt;error;\n\n$pathFolder=\"perl -pi -e  'sm/\\&lt;property name=\\\"jobDetail\\\"    ref=\\\"delayDisconnectJobDetail\\\" \\/\\&gt;.*?\n            \\&lt;property name=\\\"cronExpression\\\" value=\\\"\\* 30 20 \\? \\* MON\\-FRI\\\" /\\&lt;property name=\\\"jobDetail\\\"    ref=\\\"delayDisconnectJobDetail\\\" \\/\\&gt;.*?\n            \\&lt;property name=\\\"cronExpression\\\" value=\\\"\\* **40 10** \\? \\* MON\\-FRI\\\"/gsm'     /test.properties\";\n$ssh-&gt;system(\"$pathFolder\") or     die \"remote command failed: \" . $ssh-&gt;error;\n\n&lt;property name=\"targetMethod\" value=\"executeAll\" /&gt;\n&lt;/bean&gt;\n&lt;bean id=\"retryCronTrigger\"\nclass=\"org.springframework.scheduling.quartz.CronTriggerFactoryBean\"&gt;\n&lt;property name=\"jobDetail\" ref=\"retryJobDetail\" /&gt;\n&lt;property name=\"cronExpression\" value=\"* 30 9 ? * MON-FRI\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n"}, {"tags": ["arrays", "perl"], "answers": [{"comments": [{"owner": {"reputation": 459, "user_id": 3910757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ee7d2a2e6ef6a7e5d06502f4193b3c75?s=128&d=identicon&r=PG&f=1", "display_name": "kross", "link": "https://stackoverflow.com/users/3910757/kross"}, "edited": false, "score": 0, "creation_date": 1434413137, "post_id": 30845672, "comment_id": 49756957, "body": "Hello Borodin. Yeah I understand the idea, just been finding a way to put it into use. I have a small problem with this though, Is <code>Time::Piece</code> a module? I&#39;m not too sure but I don&#39;t think I have it on the server that I am using. It returns an error message saying <code>Can&#39;t locate Time&#47;Piece.pm</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 459, "user_id": 3910757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ee7d2a2e6ef6a7e5d06502f4193b3c75?s=128&d=identicon&r=PG&f=1", "display_name": "kross", "link": "https://stackoverflow.com/users/3910757/kross"}, "edited": false, "score": 0, "creation_date": 1434414049, "post_id": 30845672, "comment_id": 49757184, "body": "@hzq: Yes it&#39;s been a core module since v5.10 of perl -- around eight years ago. It does sound like it&#39;s not on your server, so it&#39;s <i>really</i> due for an update"}, {"owner": {"reputation": 459, "user_id": 3910757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ee7d2a2e6ef6a7e5d06502f4193b3c75?s=128&d=identicon&r=PG&f=1", "display_name": "kross", "link": "https://stackoverflow.com/users/3910757/kross"}, "edited": false, "score": 0, "creation_date": 1434414779, "post_id": 30845672, "comment_id": 49757354, "body": "Hmm I just checked the version, it&#39;s 5.10.1 so I&#39;m not sure why I&#39;m getting the error message. Is there another way around this? I&#39;m trying <code>POSIX &#39;strftime&#39;</code> instead of it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 459, "user_id": 3910757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ee7d2a2e6ef6a7e5d06502f4193b3c75?s=128&d=identicon&r=PG&f=1", "display_name": "kross", "link": "https://stackoverflow.com/users/3910757/kross"}, "edited": false, "score": 0, "creation_date": 1434414907, "post_id": 30845672, "comment_id": 49757379, "body": "@hzq: It should definitely be there on 5.10.1. You should talk to system management"}, {"owner": {"reputation": 459, "user_id": 3910757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ee7d2a2e6ef6a7e5d06502f4193b3c75?s=128&d=identicon&r=PG&f=1", "display_name": "kross", "link": "https://stackoverflow.com/users/3910757/kross"}, "edited": false, "score": 0, "creation_date": 1434415492, "post_id": 30845672, "comment_id": 49757514, "body": "Don&#39;t think that&#39;s possible haha. I&#39;ll just use the way in my question. I have an error on <code>my $now_timestamp = localtime-&gt;strftime(&#39;%Y-%m-%d.%H:%M:%S&#39;);</code> saying <code>Can&#39;t locate object method &quot;strftime&quot; via package &quot;Tue Jun 16 08:42:21 2015&quot; (perhaps you forgot to load &quot;Tue Jun 16 08:42:21 2015&quot;?) at exTester.pl line 13.</code> If you would like, I could edit the question to show what I&#39;ve done so far by integrating your answer."}, {"owner": {"reputation": 459, "user_id": 3910757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ee7d2a2e6ef6a7e5d06502f4193b3c75?s=128&d=identicon&r=PG&f=1", "display_name": "kross", "link": "https://stackoverflow.com/users/3910757/kross"}, "edited": false, "score": 0, "creation_date": 1434415850, "post_id": 30845672, "comment_id": 49757605, "body": "I used <code>strftime</code> and got it working. However, there&#39;s one last problem. This doesn&#39;t actually create four files but it creates one file with all the statements inside. My goal is to create a new file for each existing log file. So if there were 6 log files there should be 6 new <code>.sql</code> extension files."}, {"owner": {"reputation": 459, "user_id": 3910757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ee7d2a2e6ef6a7e5d06502f4193b3c75?s=128&d=identicon&r=PG&f=1", "display_name": "kross", "link": "https://stackoverflow.com/users/3910757/kross"}, "edited": false, "score": 0, "creation_date": 1434420716, "post_id": 30845672, "comment_id": 49758680, "body": "I realized this was an easier way. Thank you Borodin once again."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1434372741, "creation_date": 1434372741, "answer_id": 30845672, "question_id": 30836996, "link": "https://stackoverflow.com/questions/30836996/opening-multiple-files-in-perl-array/30845672#30845672", "title": "Opening multiple files in perl array", "body": "<p>You just need to enclose the code that handles a single file in a loop that iterates over all of the log files</p>\n\n<p>You should also reconsider the amount of comments that you use. It is far better to write your code and choose identifiers so that the behaviour is self-explanatory. It is also counter-productive to wrap parts of the process in subroutines</p>\n\n<p>This is how I would implement your problem. I haven't been able to test except to the extent that it compiles</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse 5.010;\nuse autodie;\n\nuse File::stat;\nuse Time::Piece;\n\nuse constant LOG_DIR =&gt; '/opt/lampp/htdocs/otpms/Data';\nuse constant COLUMNS =&gt; qw/ tester_name operating_system version board_name config date_modified log_created /;\n\nmy $now_timestamp = localtime-&gt;strftime('%Y-%m-%d.%H:%M:%S');\nopen my $out_fh, '&gt;', \"$now_timestamp.sql\";\n\nchdir LOG_DIR;\n\nwhile ( my $logfile = glob '*.log' ) {\n\n    warn \"Processing $logfile\\n\";\n\n    open my $log_fh, '&lt;', $logfile;\n\n    my %details;\n\n    while ( &lt;$log_fh&gt; ) {\n\n        if ( /Computer Name:\\s*(\\S+)/i ) {\n            $details{tester_name} = $1;\n        }\n        elsif ( /Operating System:\\s*(.*\\S)/i ) {\n            $details{op_sys} = $1;\n        }\n        elsif ( /IG-XL Version:\\s*([^;]*)/i ) {\n            $details{igxl_vn} = $1;\n        }\n        elsif ( /^([\\d.]+)\\s+(\\S+)/ ) {\n            push @{ $details{slot} }, $1;\n            push @{ $details{board_name} }, $2;\n        }\n    }\n\n    my $stat          = stat $logfile;\n    my $log_timestamp = localtime($stat-&gt;mtime)-&gt;strftime('%Y-%m-%d %H:%M:%S');\n\n    for my $i ( 0 .. $#{ $details{slot} } ) {\n\n        my @values = (\n            $details{tester_name},\n            $details{op_sys},\n            $details{board_name}[$i],\n            $details{igxl_vn},\n            $details{slot}[$i],\n            $now_timestamp,\n            $log_timestamp,\n        );\n\n        printf {$out_fh} \"INSERT INTO TesterDeviceMatrix.TBL_TESTER_INFO (%s) VALUES (%s);\\n\",\n            join(', ', COLUMNS),\n            join(', ', map \"'$_'\", @values);\n    }\n}\n\nclose $out_fh;\n</code></pre>\n"}], "owner": {"reputation": 459, "user_id": 3910757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ee7d2a2e6ef6a7e5d06502f4193b3c75?s=128&d=identicon&r=PG&f=1", "display_name": "kross", "link": "https://stackoverflow.com/users/3910757/kross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 0, "accepted_answer_id": 30845672, "answer_count": 1, "score": -2, "last_activity_date": 1434372741, "creation_date": 1434339465, "question_id": 30836996, "link": "https://stackoverflow.com/questions/30836996/opening-multiple-files-in-perl-array", "title": "Opening multiple files in perl array", "body": "<p>I have a perl script where by I assigned all the files with a <code>.log</code> extension to an array called <code>@allfiles</code>. How do I run my script for the files stored in each array? My idea is something like <code>open(my $fn, '&lt;', @allfiles) or die \"Could not open file '@files': $!\";</code> but that would be incorrect as it would read all files in the array at once. Any help?</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse POSIX 'strftime';\n\n#my $filename = 'IGXLEventLog.3.17.2015.20.25.12.625.log';\nmy $directory = \"/opt/lampp/htdocs/otpms/Data\";\nmy @allfiles = glob(\"*.log\");\nopendir (my $dir, $directory) or die \"Could not open directory '$directory': $!\";\nopen(my $fn, '&lt;', $filename) or die \"Could not open file '$filename': $!\";\n\nour @output;\nmy %details;\n\n    captureData();\n\nclose ($fn);\n\nmy $timestamp = strftime '%Y-%m-%d.%H:%M:%S', localtime;\n@output = $timestamp .'.sql';\nopen(my $fh, '&gt;', @output) or die \"Could not create file '@output': $!\";\n\n    createFile();\n\nclose($fh);\n\nsub captureData\n{\n    while(my $row = &lt;$fn&gt;)\n    {\n        chomp $row;\n\n        if ($row =~ /Computer Name:\\s*(\\S+)/i ) # match computer name with white space then non white space\n        {\n            $details{tester_name} = $1;\n        }\n        elsif ($row =~ /Operating System:\\s*(.*\\S)/i ) # match operating system with white space then any word\n        {\n            $details{op_sys} = $1;\n        }\n        elsif ($row =~ /IG-XL Version:\\s*([^;]*)/i ) # match ig-xl version with white space then semi colon\n        {\n            $details{igxl_vn} = $1;\n        }\n        elsif ($row =~ /^([\\d.]+)\\s+(\\S+)(?=\\s)/ ) #match slot with white space and then non white space\n        {\n            push @{$details{slot}}, $1;\n            push @{$details{board_name}},  $2;\n        }\n    }\n} # captureData\n\nsub createFile\n{\n    my $log_time_stamp = (stat($filename))[9];\n    my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst)=localtime($log_time_stamp);\n    my $nice_timestamp = sprintf ( \"%04d-%02d-%02d %02d:%02d:%02d\",\n                                   $year+1900,$mon+1,$mday,$hour,$min,$sec);\n   print $nice_timestamp;\n\n    for (my $i = 0; $i &lt; @{$details{slot}}; $i++)\n    {\n    print {$fh}\n        \"INSERT INTO TesterDeviceMatrix.TBL_TESTER_INFO\"\n        .\"(tester_name, operating_system, version, board_name, config , date_modified, log_created) \"\n        .\"VALUES ('$details{tester_name}', '$details{op_sys}', '$details{board_name}[$i]', \"\n        .\"'$details{igxl_vn}', '$details{slot}[$i]', '$timestamp', '$nice_timestamp');\\n\";\n    }\n} # createFile\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 305, "user_id": 1781749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65084b4eaadc6bfc209ef73609e1e256?s=128&d=identicon&r=PG", "display_name": "genx1mx6", "link": "https://stackoverflow.com/users/1781749/genx1mx6"}, "edited": false, "score": 0, "creation_date": 1434415433, "post_id": 30840574, "comment_id": 49757505, "body": "thanks, the $/ variable is probably what I&#39;m looking for. I haven&#39;t had a chance to try it yet.  my script is more complicated than what I posted, I was trying to make it readable so everyone could understand what I&#39;m trying to achieve.  in the end I need to look at all the interfaces on my network and extract all of the ones I choose ( ones that don&#39;t have a certain configuration, trunk links, etc) just depends on what report I&#39;m trying to run.   A quick question, what it be &quot;worth&quot; it to make the structure more complicated than an array? I just want to run a regex the entire interface config"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 305, "user_id": 1781749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65084b4eaadc6bfc209ef73609e1e256?s=128&d=identicon&r=PG", "display_name": "genx1mx6", "link": "https://stackoverflow.com/users/1781749/genx1mx6"}, "edited": false, "score": 0, "creation_date": 1434434862, "post_id": 30840574, "comment_id": 49762428, "body": "Depends what you are doing with the structure.  Hashes are pretty handy when you have keys and values like you do. But it depends really."}, {"owner": {"reputation": 305, "user_id": 1781749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65084b4eaadc6bfc209ef73609e1e256?s=128&d=identicon&r=PG", "display_name": "genx1mx6", "link": "https://stackoverflow.com/users/1781749/genx1mx6"}, "edited": false, "score": 1, "creation_date": 1434504762, "post_id": 30840574, "comment_id": 49802765, "body": "I got it. Thanks. I just create reports based off this interface data so I can use my other scripts to go out there and apply configs to interfaces that missing some of the default configs."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1434357902, "last_edit_date": 1434357902, "creation_date": 1434356964, "answer_id": 30840574, "question_id": 30835808, "link": "https://stackoverflow.com/questions/30835808/parsing-data-with-perl-capturing-a-range-of-text/30840574#30840574", "title": "Parsing data with perl- capturing a range of text", "body": "<p>Have a look at <code>$/</code> because I think that'll help. It's the record separator - which defaults to <code>\\n</code>. </p>\n\n<p>Then you can apply regular expressions to the current 'chunk' to pull out the data you require - by default a regular expression/capture group applies to <code>$_</code> the implicit variable. </p>\n\n<p>E.g. </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n\nlocal $/ = '!';\n\nwhile ( &lt;DATA&gt; ) {\n    my ( $interface ) = m/Interface (\\w+)/i;\n    next if $interface =~ m/Embedded-Service-Engine/;\n    my ( $mode ) = m/mode (\\w+)/;\n\n    print \"$interface $mode\\n\";\n\n    print \"---next record---\\n\";\n}\n\n__DATA__\nInterface fa1\n  mode access\n  port-security\n  mac-address sticky\n!\ninterface fa2\n  mode trunk\n!\n</code></pre>\n\n<p>If you need to keep the data for other uses (e.g. 'process as you go' isn't suitable) then the tool for the job is a hash. </p>\n\n<p>You can either use something like the above - and populate the hash with particular keys you're interested in - or use the magic of map to do it for you. </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\nlocal $/ = '!';\n\nmy %interfaces; \n\nwhile ( &lt;DATA&gt; ) {\n    my ( $interface ) = m/Interface (\\w+)/i; \n    next if $interface =~ m/Embedded-Service-Engine/;\n    my %interface_values =  map { my ( $key, $value ) = split; $key, $value || 1 } grep { /\\w/ } split ( \"\\n\" );\n    $interfaces{$interface} = \\%interface_values;\n}\n\nprint Dumper \\%interfaces\n\n__DATA__\nInterface fa1\n  mode access\n  port-security\n  mac-address sticky\n!\ninterface fa2\n  mode trunk\n!\n</code></pre>\n\n<p>That <code>map</code> line basically:</p>\n\n<ul>\n<li>splits the current record on <code>\\n</code> to get each line.</li>\n<li>filters 'not word' values (so blank lines and !) </li>\n<li>splits each line on whitepace, to get a key and value pair. </li>\n<li>If no value is defined, sets it to 1. (so in the example, <code>port-security</code> )</li>\n<li>Populates a hash with these key-value pairs. </li>\n<li>and then updates <code>%interfaces</code> with the hash for each interface ID. </li>\n</ul>\n\n<p>Giving something like:</p>\n\n<pre><code>$VAR1 = {\n          'fa1' =&gt; {\n                     'port-security' =&gt; 1,\n                     'mode' =&gt; 'access',\n                     'Interface' =&gt; 'fa1',\n                     'mac-address' =&gt; 'sticky'\n                   },\n          'fa2' =&gt; {\n                     'mode' =&gt; 'trunk',\n                     'interface' =&gt; 'fa2'\n                   }\n        };\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 305, "user_id": 1781749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65084b4eaadc6bfc209ef73609e1e256?s=128&d=identicon&r=PG", "display_name": "genx1mx6", "link": "https://stackoverflow.com/users/1781749/genx1mx6"}, "edited": false, "score": 0, "creation_date": 1434415299, "post_id": 30841690, "comment_id": 49757471, "body": "The thing is, there can be any amount of configurations on the interfaces. Just depends on its function. - I will look into the $/ operator. thanks!"}, {"owner": {"reputation": 305, "user_id": 1781749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65084b4eaadc6bfc209ef73609e1e256?s=128&d=identicon&r=PG", "display_name": "genx1mx6", "link": "https://stackoverflow.com/users/1781749/genx1mx6"}, "edited": false, "score": 0, "creation_date": 1434426243, "post_id": 30841690, "comment_id": 49759832, "body": "The &#39;$/&#39; operator was my solution. Can you look at my posted answer and see how a hash would make it better? seems to me it would just overly complicate it."}, {"owner": {"reputation": 2784, "user_id": 1487843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1BFY8.jpg?s=128&g=1", "display_name": "Marc Lambrichs", "link": "https://stackoverflow.com/users/1487843/marc-lambrichs"}, "reply_to_user": {"reputation": 305, "user_id": 1781749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65084b4eaadc6bfc209ef73609e1e256?s=128&d=identicon&r=PG", "display_name": "genx1mx6", "link": "https://stackoverflow.com/users/1781749/genx1mx6"}, "edited": false, "score": 0, "creation_date": 1434430625, "post_id": 30841690, "comment_id": 49760937, "body": "Both presented solutions use the record separator. The difference is do you need to read the data in one go ($/ = &#39;&#39;) or separate the data in records while reading ($/ = &#39;!&#39;). I&#39;ve put my follow-up as a comment to your suggested solution. We need more input, I guess."}], "tags": [], "owner": {"reputation": 2784, "user_id": 1487843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1BFY8.jpg?s=128&g=1", "display_name": "Marc Lambrichs", "link": "https://stackoverflow.com/users/1487843/marc-lambrichs"}, "is_accepted": false, "score": 1, "last_activity_date": 1434360841, "last_edit_date": 1434360841, "creation_date": 1434360470, "answer_id": 30841690, "question_id": 30835808, "link": "https://stackoverflow.com/questions/30835808/parsing-data-with-perl-capturing-a-range-of-text/30841690#30841690", "title": "Parsing data with perl- capturing a range of text", "body": "<p>A hash or hashref would be a result where you can work with. Furthermore, reading records based on a fixed structure can be read using a matching regex. Like so:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse Data::Dumper;\n\nour %MATCH;\n*MATCH = \\%+;\n\n# read file into variable\nmy ( $file, $data ) = ( 'interfaces.txt', undef );\nopen( my $fh, '&lt;', $file ) or die \"cannot open file $file\";\n{\n    local $/;\n    $data = &lt;$fh&gt;;\n}\nclose($fh);\nprint Dumper $data;\n\nmy $regex = qr{\n  (?sm)\n  interface           [^\\w\\n]+\n  (?&lt;interface&gt;       (\\w[^\\n]+))\n                      [^\\w]+\n  mode                [^\\w]+\n  (?&lt;mode&gt;            (\\w[^\\n]+))\n                      [^\\w]+\n  ((?&lt;portsecurity&gt;   port-security)\n                      [^\\w]+)?        # port-security is optional\n  (mac-address        [^\\w]+\n  (?&lt;macaddress&gt;      (\\w[^\\n]+))\n                      )?              # mac-address is optional\n  [^!]*\n  !\n}x;\n\nmy $results = {};\nwhile ( $data =~ m/$regex/g ) {\n    my $interface = $MATCH{interface};\n    $results-&gt;{$interface} = { mode =&gt; $MATCH{mode} ? $MATCH{mode} : '' };\n    $results-&gt;{$interface}-&gt;{'port-security'} = 1\n      if defined $MATCH{portsecurity};\n    $results-&gt;{$interface}-&gt;{macaddress} = $MATCH{macaddress}\n      if defined $MATCH{macaddress};\n}\nprint Dumper $results;\n</code></pre>\n\n<p>The result from your input is:</p>\n\n<pre><code>$VAR1 = {\n          'fa1' =&gt; {\n                     'macaddress' =&gt; 'sticky',\n                     'mode' =&gt; 'access',\n                     'port-security' =&gt; 1\n                   },\n          'fa2' =&gt; {\n                     'mode' =&gt; 'trunk'\n                   }\n        };\n</code></pre>\n\n<p>Having a hash with the interface names as key values, gives you the opportunity to use a 'grep' for the interfaces you want.</p>\n\n<p>If your structure is not fixed - there is no ordering in your fields mode, port-security, mac-address - then you would need to read a interface record in one go, and split up the fields using separate regexes for each field.</p>\n"}, {"comments": [{"owner": {"reputation": 2784, "user_id": 1487843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1BFY8.jpg?s=128&g=1", "display_name": "Marc Lambrichs", "link": "https://stackoverflow.com/users/1487843/marc-lambrichs"}, "edited": false, "score": 0, "creation_date": 1434429513, "post_id": 30858381, "comment_id": 49760621, "body": "Ok. I see what you&#39;re getting at. To answer your question &quot;Why bother to use a complicating hash?&quot;: it depends. Since you&#39;re just putting strings into @int, your data seems a bit unstructured. If you&#39;re only goal is knowing what interfaces are having substrings $seach and not $dontwant in them, I would say no. If you actuallly need to DO something with the interfaces and their underlying fields, then yes, it will be beneficial to use a hash for some structure. I think a fair question to ask what would be, what you need to do with your data. One more thing: use local for your separator. ;)"}, {"owner": {"reputation": 305, "user_id": 1781749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65084b4eaadc6bfc209ef73609e1e256?s=128&d=identicon&r=PG", "display_name": "genx1mx6", "link": "https://stackoverflow.com/users/1781749/genx1mx6"}, "reply_to_user": {"reputation": 2784, "user_id": 1487843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1BFY8.jpg?s=128&g=1", "display_name": "Marc Lambrichs", "link": "https://stackoverflow.com/users/1487843/marc-lambrichs"}, "edited": false, "score": 0, "creation_date": 1434432748, "post_id": 30858381, "comment_id": 49761606, "body": "@mlambrichs Thanks, I tried to &#39;my&#39; the separator, but wasn&#39;t compiling. local works just fine."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1434573736, "post_id": 30858381, "comment_id": 49842906, "body": "Also: <code>strict</code> and <code>warnings</code> come strongly recommended."}, {"owner": {"reputation": 305, "user_id": 1781749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65084b4eaadc6bfc209ef73609e1e256?s=128&d=identicon&r=PG", "display_name": "genx1mx6", "link": "https://stackoverflow.com/users/1781749/genx1mx6"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1434611714, "post_id": 30858381, "comment_id": 49855367, "body": "@Sobrique yeah I&#39;ve never actually coded perl with that... I know I&#39;m bad haha I&#39;m just a get the job done guy but i&#39;ll start looking into it and what it can do for me."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1434612514, "post_id": 30858381, "comment_id": 49855873, "body": "It makes life harder initially, but makes some really annoying bugs go away."}], "tags": [], "owner": {"reputation": 305, "user_id": 1781749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65084b4eaadc6bfc209ef73609e1e256?s=128&d=identicon&r=PG", "display_name": "genx1mx6", "link": "https://stackoverflow.com/users/1781749/genx1mx6"}, "is_accepted": true, "score": 0, "last_activity_date": 1434426116, "creation_date": 1434426116, "answer_id": 30858381, "question_id": 30835808, "link": "https://stackoverflow.com/questions/30835808/parsing-data-with-perl-capturing-a-range-of-text/30858381#30858381", "title": "Parsing data with perl- capturing a range of text", "body": "<p>This is my Final solution. In this particular case I'm searching for all switchports that have a maximum port-security not equal to 1. This is just an example and can be switched for any configuration. I'm also omitting certain interfaces from being caught if that configuration is actually applied to them.</p>\n\n<pre><code>#!/usr/bin/perl\n$MDIR='/currentConfig';\n\n#list of interfaces you don't want to see to filter output\n@omit =(\n'MANAGEMENT.PORT',\n'sup.mgmt',\n'Internal.EtherSwitch',\n'Router',\n'ip address \\d',\n'STRA'\n);\n#join with '|' to form the regex\n$dontwant = join('|',@omit);\n\n#search criteria\n$search='switchport port-security maximum [^1]';\n\nopendir(DIR,$MDIR) or die $!;\n@dirContents=readdir DIR;close DIR;\n\nforeach $file (@dirContents) {\n        open(IN,$MDIR.'/'.$file) or die $!;\n        #record seperator to !\n        $/='!';\n        my @inFile=&lt;IN&gt;; close IN;\n        #since the record seperator has been changed, '^' won't match beginning of line\n        my @ints = grep (/\\ninterface/i,@inFile);\n        #set record seperator back to normal\n        $/=\"\\n\";\n        foreach $int (@ints) {\n                if ( $int =~ m/$search/i &amp;&amp; $int !~ m/$dontwant/) {\n                        push(@finalint,$int);\n                }\n        }\n}\n#just list the interfaces found, i'll use this to make it comma seperated\nforeach $elem (@finalint) {\n        print $elem;\n}\n</code></pre>\n"}], "owner": {"reputation": 305, "user_id": 1781749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65084b4eaadc6bfc209ef73609e1e256?s=128&d=identicon&r=PG", "display_name": "genx1mx6", "link": "https://stackoverflow.com/users/1781749/genx1mx6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 30858381, "answer_count": 3, "score": 1, "last_activity_date": 1434426116, "creation_date": 1434326671, "question_id": 30835808, "link": "https://stackoverflow.com/questions/30835808/parsing-data-with-perl-capturing-a-range-of-text", "title": "Parsing data with perl- capturing a range of text", "body": "<p>I'm writing code to parse all the interfaces on my network, looking for certain configurations.. etc.</p>\n\n<p>the data looks like this:</p>\n\n<pre><code>Interface fa1\n  mode access\n  port-security\n  mac-address sticky\n!\ninterface fa2\n  mode trunk\n!\n</code></pre>\n\n<p>Basically starting with \"^interface \" and ending \"!\".</p>\n\n<p>my current algorithm is to \"record\" the data I need </p>\n\n<pre><code>foreach $line (@input) {\n    if ( $line =~ m/^interface.+\\d/ &amp;&amp; $line !~ m/interface Embedded-Service-Engine|BRI|TenGigabitEthernet|vlan|Port-channel|ATM|loopback/i) {\n        $record = 1;\n    }\n\n    #$int ne '' is to handle the rest of the file not in this format\n    if( $line =~ m/!/ &amp;&amp; $int ne '') {\n\n        #save data in format 'interface fa2,mode trunk'\n        #if the interface doesn't have port-security\n        push(@intlist, join(','split(\"\\r\\n\",$int)).\"\\n\") unless $int =~ m/port-security/;\n        $record=0;\n        $int='';\n    }\n    if ($record) {\n         $int.=$line;\n    }\n }\n</code></pre>\n\n<p>while this works in my case, I'd like a simply way to do it. I've searched and found that you can use the range operator '..' on regex</p>\n\n<p>which turns my code into :</p>\n\n<pre><code>@input # contains the file\n@interfaces = grep (/^interface.+\\d/ .. /!/, @input);\n</code></pre>\n\n<p>which gives me all the interface data, the problem is now every line is a single element in the <code>@interfaces</code> array. how can I then split this data up so everything from <code>/^interface.+\\d/ .. /!/</code> is one element in this array without creating more for loops?</p>\n\n<p>The goal is to get it down to one element so I can then scan it for interfaces I don't want to look at <code>interface Embedded-Service-Engine|BRI|TenGigabit</code> as well as interfaces that have the correct configurations.</p>\n"}, {"tags": ["linux", "bash", "perl", "shell", "unix"], "comments": [{"owner": {"reputation": 17600, "user_id": 793796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mk3lA.jpg?s=128&g=1", "display_name": "anishsane", "link": "https://stackoverflow.com/users/793796/anishsane"}, "edited": false, "score": 0, "creation_date": 1434289885, "post_id": 30828941, "comment_id": 49705326, "body": "On another note, if the code which logs this data - if you own the code, try to print the timestamps in <code>YYYY&#47;MM&#47;DD HH:mm:SS.ms</code> format (decreasing order of time unit). That becomes easy for sorting &amp; simple string comparison. Currently, if you want to select data from only last 10 mins, you have to do some complex string manipulation &amp; arithmetic."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4531856, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MKHviFc_zTs/AAAAAAAAAAI/AAAAAAAAATE/J-fpARDCrG4/photo.jpg?sz=128", "display_name": "Equbal Quasim", "link": "https://stackoverflow.com/users/4531856/equbal-quasim"}, "edited": false, "score": 0, "creation_date": 1434283411, "post_id": 30829044, "comment_id": 49703390, "body": "Great, and how to collect every 10 minutes as I only want to collect number which logged newly in log file last 10 minutes."}, {"owner": {"reputation": 17600, "user_id": 793796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mk3lA.jpg?s=128&g=1", "display_name": "anishsane", "link": "https://stackoverflow.com/users/793796/anishsane"}, "edited": false, "score": 1, "creation_date": 1434288646, "post_id": 30829044, "comment_id": 49704935, "body": "This entire pipeline can be reduced to a single <code>awk</code>."}, {"owner": {"reputation": 27303, "user_id": 1003123, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ef598363853c3081cc13585afbe81d0f?s=128&d=identicon&r=PG", "display_name": "enrico.bacis", "link": "https://stackoverflow.com/users/1003123/enrico-bacis"}, "reply_to_user": {"reputation": 17600, "user_id": 793796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mk3lA.jpg?s=128&g=1", "display_name": "anishsane", "link": "https://stackoverflow.com/users/793796/anishsane"}, "edited": false, "score": 0, "creation_date": 1434290706, "post_id": 30829044, "comment_id": 49705591, "body": "@anishsane: sure it is, but it is also normally way more difficult to read."}, {"owner": {"reputation": 17600, "user_id": 793796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mk3lA.jpg?s=128&g=1", "display_name": "anishsane", "link": "https://stackoverflow.com/users/793796/anishsane"}, "edited": false, "score": 2, "creation_date": 1434292990, "post_id": 30829044, "comment_id": 49706288, "body": "1. ^^ I don&#39;t agree with this. For the new person, you need to know the meanings of different options for all the commands. 2. Plus, Having <code>sort | uniq -c</code> is generally avoided, because that unnecessarily consumes more memory, when you only want the count. Memory may not be a constraint today on a desktop system, but linux does get used on embedded systems as well. So having a unified script is generally a good idea. 3. <code>cat | grep</code> is <a href=\"http://www.smallo.ruhr.de/award.html\" rel=\"nofollow noreferrer\"><code>uuoc</code></a>. Similar case with <code>grep | cut</code> &amp; <code>sort | uniq -c</code>. Having less number of processes is advisable..."}, {"owner": {"reputation": 17600, "user_id": 793796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mk3lA.jpg?s=128&g=1", "display_name": "anishsane", "link": "https://stackoverflow.com/users/793796/anishsane"}, "edited": false, "score": 0, "creation_date": 1434293000, "post_id": 30829044, "comment_id": 49706291, "body": "&amp; I&#39;m not saying that your answer is wrong. It&#39;s just inefficient. BTW, I didn&#39;t down vote your answer; I don&#39;t downvote answers unless they are &#39;wrong&#39;... :-)"}], "tags": [], "owner": {"reputation": 27303, "user_id": 1003123, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ef598363853c3081cc13585afbe81d0f?s=128&d=identicon&r=PG", "display_name": "enrico.bacis", "link": "https://stackoverflow.com/users/1003123/enrico-bacis"}, "is_accepted": true, "score": -1, "last_activity_date": 1434282878, "creation_date": 1434282878, "answer_id": 30829044, "question_id": 30828941, "link": "https://stackoverflow.com/questions/30828941/search-value-and-count-number-from-log-file/30829044#30829044", "title": "search value and count number from log file", "body": "<p>I would do something like this:</p>\n\n<pre><code>cat log | grep -o \"number\\=[0-9]\\+\" | cut -d= -f2 | sort | uniq -c\n</code></pre>\n\n<p>The output for your example is:</p>\n\n<pre><code>7 1193046\n6 466000000\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "is_accepted": false, "score": 0, "last_activity_date": 1434283803, "creation_date": 1434283803, "answer_id": 30829181, "question_id": 30828941, "link": "https://stackoverflow.com/questions/30828941/search-value-and-count-number-from-log-file/30829181#30829181", "title": "search value and count number from log file", "body": "<p>This perl script will print out your number and count for that number in a new file ('outfile.<code>file number</code>.txt') every 10 minutes</p>\n\n<pre><code>use warnings;\nuse strict; \n\nmy %hash;\nmy $count;\nwhile (1) {\n    open my $in, '&lt;', 'in.txt' or die $!;\n    $count++;\n        while(&lt;$in&gt;){\n            chomp;\n            my ($number) = /number=(\\d+)/;\n            $hash{$number}++;\n        }\n    open my $out, '&gt;', \"outfile.$count.txt\" or die $!;\n    print $out \"$_\\t$hash{$_}\\n\" foreach keys %hash;\n    sleep 600;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17600, "user_id": 793796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mk3lA.jpg?s=128&g=1", "display_name": "anishsane", "link": "https://stackoverflow.com/users/793796/anishsane"}, "edited": false, "score": 2, "creation_date": 1434289572, "post_id": 30830069, "comment_id": 49705225, "body": "I would not normally answer this question, because OP shows no efforts of solving the question. Answering because the accepted answer (kind of) suggests inefficient method. I will add explanation to the answer, after OP posts some code he has tried."}, {"owner": {"reputation": 1, "user_id": 4531856, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MKHviFc_zTs/AAAAAAAAAAI/AAAAAAAAATE/J-fpARDCrG4/photo.jpg?sz=128", "display_name": "Equbal Quasim", "link": "https://stackoverflow.com/users/4531856/equbal-quasim"}, "edited": false, "score": 0, "creation_date": 1434350870, "post_id": 30830069, "comment_id": 49721866, "body": "I tried what enrico has suggested and found the output as I expected and that&#39;s why I accepted the answer."}], "tags": [], "owner": {"reputation": 17600, "user_id": 793796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mk3lA.jpg?s=128&g=1", "display_name": "anishsane", "link": "https://stackoverflow.com/users/793796/anishsane"}, "is_accepted": false, "score": 1, "last_activity_date": 1434290076, "last_edit_date": 1434290076, "creation_date": 1434289271, "answer_id": 30830069, "question_id": 30828941, "link": "https://stackoverflow.com/questions/30828941/search-value-and-count-number-from-log-file/30830069#30830069", "title": "search value and count number from log file", "body": "<p>awk one-liner in a while loop:</p>\n\n<pre><code>while true; do \n    awk '{a[$NF]++}END{for(t in a){printf \"%d\\t%s\\n\", a[t], gensub(/number=/,\"\",1,t)}}' logfile\n    sleep 600\ndone\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>6       466000000\n7       1193046\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1434300983, "creation_date": 1434300983, "answer_id": 30832087, "question_id": 30828941, "link": "https://stackoverflow.com/questions/30828941/search-value-and-count-number-from-log-file/30832087#30832087", "title": "search value and count number from log file", "body": "<p>Assuming the output of <code>Data::Dump</code> is sufficiently well-formatted for this, this is a trivial problem for Perl</p>\n\n<pre><code>perl -MData::Dump -e\"/number=(\\d+)/ and ++$c{$1} while &lt;&gt;; dd \\%c;\"  logfile.log\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>{ 1193046 =&gt; 7, 466000000 =&gt; 6 }\n</code></pre>\n\n<p>If (for whatever reason) you can't have <code>Data::Dump</code> installed then the output is slighlty less neat with the core module <code>Data::Dumper</code></p>\n\n<pre><code>perl -MData::Dumper -e\"/number=(\\d+)/ and ++$c{$1} while &lt;&gt;; print Dumper \\%c;\"  logfile.log\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>$VAR1 = {\n          '1193046' =&gt; 7,\n          '466000000' =&gt; 6\n        };\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4531856, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MKHviFc_zTs/AAAAAAAAAAI/AAAAAAAAATE/J-fpARDCrG4/photo.jpg?sz=128", "display_name": "Equbal Quasim", "link": "https://stackoverflow.com/users/4531856/equbal-quasim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 30829044, "answer_count": 4, "score": -7, "last_activity_date": 1434300983, "creation_date": 1434282197, "last_edit_date": 1434282626, "question_id": 30828941, "link": "https://stackoverflow.com/questions/30828941/search-value-and-count-number-from-log-file", "title": "search value and count number from log file", "body": "<p>I've value in the logfile as below and I want to catch all the same number and count them and put in another file every 10 minutes. How can we do that ?</p>\n\n<pre>\n[14/06/2015 14:33:55.311] - WARNING- Conflict detected between two  sources !!! id1=67 id2=69 number=1193046\n[14/06/2015 14:33:55.607] - WARNING- Conflict detected between two  sources !!! id1=70 id2=69 number=1193046\n[14/06/2015 14:33:55.886] - WARNING- Conflict detected between two  sources !!! id1=69 id2=70 number=466000000\n[14/06/2015 14:33:56.086] - WARNING- Conflict detected between two  sources !!! id1=64 id2=69 number=1193046\n[14/06/2015 14:33:57.064] - WARNING- Conflict detected between two  sources !!! id1=70 id2=69 number=1193046\n[14/06/2015 14:33:57.074] - WARNING- Conflict detected between two  sources !!! id1=64 id2=69 number=1193046\n[14/06/2015 14:33:57.454] - WARNING- Conflict detected between two  sources !!! id1=68 id2=70 number=466000000\n[14/06/2015 14:33:57.657] - WARNING- Conflict detected between two  sources !!! id1=68 id2=70 number=466000000\n[14/06/2015 14:33:57.657] - WARNING- Conflict detected between two  sources !!! id1=68 id2=70 number=466000000\n[14/06/2015 14:33:58.309] - WARNING- Conflict detected between two  sources !!! id1=67 id2=70 number=466000000\n[14/06/2015 14:33:58.610] - WARNING- Conflict detected between two  sources !!! id1=70 id2=69 number=1193046\n[14/06/2015 14:33:58.814] - WARNING- Conflict detected between two  sources !!! id1=68 id2=69 number=1193046\n[14/06/2015 14:33:58.874] - WARNING- Conflict detected between two  sources !!! id1=69 id2=70 number=466000000\n</pre>\n"}, {"tags": ["windows", "perl", "literals", "console2"], "comments": [{"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "edited": false, "score": 0, "creation_date": 1434255076, "post_id": 30825777, "comment_id": 49697616, "body": "Learn how to use the code formatting tool on Stack Overflow, because we can&#39;t tell what program you&#39;re running.  Paste the literal code, highlight it, and click the <code>{}</code> icon to indent it 4 spaces."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1434260422, "post_id": 30825777, "comment_id": 49698328, "body": "The names, if they work at all, will be <code>__FILE__</code> and <code>__LINE__</code> with double underscores and no spaces, just like the symbols used in C with the C preprocessor.  The error message suggests that you used <code>_ _FILE_ _</code> with spaces and not just because the Markdown editor in Stack Overflow treats <code>__</code> as a symbol for bold.  What gives?  Can you quote the exact error message?  I&#39;m pretty sure it doesn&#39;t use &quot;cant&quot; instead of &quot;can&#39;t&quot; with an apostrophe.  And it should be indented 4 spaces so it appears as &#39;code&#39;."}], "answers": [{"tags": [], "owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "is_accepted": false, "score": 2, "last_activity_date": 1434260523, "creation_date": 1434260523, "answer_id": 30826300, "question_id": 30825777, "link": "https://stackoverflow.com/questions/30825777/how-to-make-line-and-file-run-in-perl/30826300#30826300", "title": "How to Make _ _ LINE _ _ and _ _ FILE_ _ run in perl?", "body": "<p>There's no space in the literals <code>__FILE__</code> and <code>__LINE__</code> (or <code>__END__</code>).  Just 2 underscores in a row, the word, and another 2 underscores.</p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 5007408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10c776b230dc766a9b84e26f47f7178c?s=128&d=identicon&r=PG&f=1", "display_name": "Jawn Fam", "link": "https://stackoverflow.com/users/5007408/jawn-fam"}, "edited": false, "score": 0, "creation_date": 1434292943, "post_id": 30826313, "comment_id": 49706266, "body": "Thank you for all of your help! I was able to get it working i removed the spaces between the literals. I greatly appreciate it. Btw, why does the perl example uses _ <i>FILE</i> _, _ _LINE _ _ etc when it should instead use <b>FILE</b>,<b>LINE</b> ?"}, {"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 0, "creation_date": 1434296229, "post_id": 30826313, "comment_id": 49707376, "body": "Where did you get the Perl example?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 19, "user_id": 5007408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10c776b230dc766a9b84e26f47f7178c?s=128&d=identicon&r=PG&f=1", "display_name": "Jawn Fam", "link": "https://stackoverflow.com/users/5007408/jawn-fam"}, "edited": false, "score": 0, "creation_date": 1434298422, "post_id": 30826313, "comment_id": 49708132, "body": "@JawnFam: Some people have problems spotting the difference between <code>_FILE_</code> and <code>__FILE__</code> so they use a space (preferably a fractional space, such as U+2009 THIN SPACE or U+200A HAIR SPACE) to separate them, but of course such spaces don&#39;t work well in a constant-width font.  Also, on SO, the Markdown system treats double underscores as a bold marker and single underscores requesting italic: <b>FILE</b> and <i>FILE</i>.  Contrast _\u2008_\u2008FILE\u2008_\u2008_ which should be just visible as two separate underscores with minimal space around them (U+2008 PUNCTUATION SPACE)."}, {"owner": {"reputation": 19, "user_id": 5007408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10c776b230dc766a9b84e26f47f7178c?s=128&d=identicon&r=PG&f=1", "display_name": "Jawn Fam", "link": "https://stackoverflow.com/users/5007408/jawn-fam"}, "reply_to_user": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 0, "creation_date": 1434344323, "post_id": 30826313, "comment_id": 49719474, "body": "@JimDavis i am using a book called &quot;perl by example&quot; its written by ellie quigley fourth edition. I am a noob, so i asked one of my coworkers who happens to be a programmer on which language i should learn first and he recommended perl, so i stuck with it. Imma try and finish the book and move on to another language one im done."}, {"owner": {"reputation": 19, "user_id": 5007408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10c776b230dc766a9b84e26f47f7178c?s=128&d=identicon&r=PG&f=1", "display_name": "Jawn Fam", "link": "https://stackoverflow.com/users/5007408/jawn-fam"}, "edited": false, "score": 0, "creation_date": 1434344367, "post_id": 30826313, "comment_id": 49719492, "body": "@JonathanLeffler okie dokie, i understand now. thank you for the clarification."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1434638762, "post_id": 30826313, "comment_id": 49874493, "body": "&quot;Perl By Example&quot; is a terrible book. You would be much better advised to read &quot;Learning Perl&quot; or &quot;Beginning Perl&quot;."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 2, "last_activity_date": 1434260660, "creation_date": 1434260660, "answer_id": 30826313, "question_id": 30825777, "link": "https://stackoverflow.com/questions/30825777/how-to-make-line-and-file-run-in-perl/30826313#30826313", "title": "How to Make _ _ LINE _ _ and _ _ FILE_ _ run in perl?", "body": "<p>You need to use names without spaces between the underscores:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nprint \"We are on line number \", __LINE__, \".\\n\";\nprint \"The name of this file is \", __FILE__, \".\\n\";\n__END__\n\nprint \"This is not part of the script\\n\";\n</code></pre>\n\n<p>When saved in <code>fileline.pl</code> and run, this produces:</p>\n\n<pre><code>We are on line number 5.\nThe name of this file is fileline.pl.\n</code></pre>\n\n<p>Note that there are no spaces between the consecutive underscores.  And note that the final line containing a <code>print</code> statement is not part of the script because it comes after the <code>__END__</code>.  (There's also a <code>__DATA__</code> directive that can sometimes be useful.)</p>\n"}], "owner": {"reputation": 19, "user_id": 5007408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10c776b230dc766a9b84e26f47f7178c?s=128&d=identicon&r=PG&f=1", "display_name": "Jawn Fam", "link": "https://stackoverflow.com/users/5007408/jawn-fam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "closed_date": 1434369264, "accepted_answer_id": 30826313, "answer_count": 2, "score": -2, "last_activity_date": 1434260660, "creation_date": 1434254020, "last_edit_date": 1434259976, "question_id": 30825777, "link": "https://stackoverflow.com/questions/30825777/how-to-make-line-and-file-run-in-perl", "closed_reason": "Needs details or clarity", "title": "How to Make _ _ LINE _ _ and _ _ FILE_ _ run in perl?", "body": "<p>(The Script)</p>\n\n<pre><code>#!/usr/bin/perl\n# Program, named literals.perl\n</code></pre>\n\n<p>written to test special literals</p>\n\n<pre><code>1   print \"We are on line number \", _ _LINE_ _, \".\\n\";\n2   print \"The name of this file is \",_ _FILE_ _,\".\\n\";\n3   _ _END_ _\n</code></pre>\n\n<p>And this stuff is just a bunch of chitter\u2013chatter that is to be\nignored by Perl. The <code>_ _END_ _ literal</code> is like <code>Ctrl\u2013d</code> or <code>\\004.[a]</code></p>\n\n<p>(Output)</p>\n\n<blockquote>\n  <p>1   We are on line number 3.<br>\n  2   The name of this file is literals.perl.</p>\n</blockquote>\n\n<p>Explanation\nThe special literal <code>_ _LINE_ _</code> cannot be enclosed in quotes if it is to be interpreted. It holds the current line number of the Perl script.</p>\n\n<p>The name of this script is <strong>literals.perl</strong>. The special literal <code>_ _FILE_ _</code> holds the name of the current Perl script.</p>\n\n<p>The special literal <code>_ _END_ _</code> represents the logical end of the script. It tells Perl to ignore any characters that follow it.</p>\n\n<pre><code>print \"The script is called\", _ _FILE_ _, \"and we are on line number \",\n_ _LINE_ _,\"\\n\";\n</code></pre>\n\n<p>(Output)</p>\n\n<blockquote>\n  <p>The script is called ./testing.plx and we are on line number 2</p>\n</blockquote>\n\n<p>I need help getting this example to work. I am having a bit of trouble running it. when i run it on console2 i would get an error stating this </p>\n\n<blockquote>\n  <p>\"cant locate object method \"_\" via package \"<em>LINE</em>\" (perhaps you\n  forgot to load \"<em>LINE</em>\"?) at C:\\users\\john\\desktop\\console2\\test.pl\n  line 5.</p>\n</blockquote>\n\n<p>Any ideas on how to fix this would be most appreciated. Thanks!  </p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 3946227, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/350678f4026c429767a0fc542afd623e?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Tharp", "link": "https://stackoverflow.com/users/3946227/daniel-tharp"}, "edited": false, "score": 0, "creation_date": 1434236844, "post_id": 30824387, "comment_id": 49694639, "body": "Thanks, that helps. What is the meaning of users in the line:        open CONFIG, &quot;&lt;&quot;, &quot;users&quot;;"}, {"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "reply_to_user": {"reputation": 103, "user_id": 3946227, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/350678f4026c429767a0fc542afd623e?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Tharp", "link": "https://stackoverflow.com/users/3946227/daniel-tharp"}, "edited": false, "score": 0, "creation_date": 1434236879, "post_id": 30824387, "comment_id": 49694647, "body": "@DanielTharp: <code>users</code> is the name of the file that the script will read from."}, {"owner": {"reputation": 103, "user_id": 3946227, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/350678f4026c429767a0fc542afd623e?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Tharp", "link": "https://stackoverflow.com/users/3946227/daniel-tharp"}, "edited": false, "score": 0, "creation_date": 1434237494, "post_id": 30824387, "comment_id": 49694825, "body": "Worked perfect. There was no users file so I didn&#39;t have that little clue. Appreciate the help!"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 103, "user_id": 3946227, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/350678f4026c429767a0fc542afd623e?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Tharp", "link": "https://stackoverflow.com/users/3946227/daniel-tharp"}, "edited": false, "score": 1, "creation_date": 1434245204, "post_id": 30824387, "comment_id": 49696175, "body": "@DanielTharp: You should usually use something like: <code>my $usersfile = &quot;users&quot;; open CONFIG, &quot;&lt;&quot;, $usersfile or die &quot;Failed to open $usersfile for reading&quot;;</code> (using the old style of file handle, or <code>open my $config, &quot;&lt;&quot;, $usersfile or die &quot;Failed to open $usersfile for reading&quot;;</code> using the new style lexical file handles, which you&#39;d refer to as <code>$config</code> in subsequent I/O operations)."}, {"owner": {"reputation": 103, "user_id": 3946227, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/350678f4026c429767a0fc542afd623e?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Tharp", "link": "https://stackoverflow.com/users/3946227/daniel-tharp"}, "edited": false, "score": 0, "creation_date": 1434339066, "post_id": 30824387, "comment_id": 49718314, "body": "To clarify, I&#39;m pretty much inheriting this project and don&#39;t know much perl as it stands, but that&#39;s more readable to me, yes. Thanks for the advice."}], "tags": [], "owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "is_accepted": true, "score": 3, "last_activity_date": 1434236339, "creation_date": 1434236339, "answer_id": 30824387, "question_id": 30824348, "link": "https://stackoverflow.com/questions/30824348/cant-figure-out-the-format-this-file-is-expecting-to-read/30824387#30824387", "title": "Can&#39;t figure out the format this file is expecting to read", "body": "<p>Each line of the file must be either:</p>\n\n<ul>\n<li>a comment (which is ignored), consisting of optional whitespace, a <code>#</code>, and arbitrary text</li>\n<li>a \"mask\", \"level\", and \"comment\", separated by whitespace, with no leading whitespace before the mask.  The mask and level cannot contain whitespace, though the comment can.</li>\n</ul>\n\n<p><code>&lt;CONFIG&gt;</code> is not a valid line; the expression <code>my $line = &lt;CONFIG&gt;</code> merely reads one line from the <code>CONFIG</code> filehandle and stores it in <code>$line</code>, and the <code>while</code> causes this to repeat until <code>&lt;CONFIG&gt;</code> returns a false value (usually <code>undef</code> at end-of-file).</p>\n"}], "owner": {"reputation": 103, "user_id": 3946227, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/350678f4026c429767a0fc542afd623e?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Tharp", "link": "https://stackoverflow.com/users/3946227/daniel-tharp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 30824387, "answer_count": 1, "score": 2, "last_activity_date": 1434236339, "creation_date": 1434235911, "question_id": 30824348, "link": "https://stackoverflow.com/questions/30824348/cant-figure-out-the-format-this-file-is-expecting-to-read", "title": "Can&#39;t figure out the format this file is expecting to read", "body": "<p>I've got a block of perl that is supposed to read from a static file for an IRC hostmask, a privilege level and a comment. Between the Perl (which I'm a certified novice in) and regex I'm having some trouble creating the file.</p>\n\n<pre><code>sub read_users {\n    @users = ();\n\n    open CONFIG, \"&lt;\", \"users\";\n    while (my $line = &lt;CONFIG&gt;)\n    {\n        next if $line =~ /^\\s*#/;\n        my ($mask, $level, $comment) = split /\\s+/, $line, 3;\n\n        push @users, [$mask, $level];\n    }\n    close CONFIG;\n}\n</code></pre>\n\n<p>The file currently reads:</p>\n\n<pre><code>&lt;CONFIG&gt;\nirc.hostmask.goes.here 500 comment\n</code></pre>\n\n<p>That isn't working. I see where it mentions the word users and the regex omits whitespace. I've grumbled over it enough and tried various formulations with no luck. Any ideas?</p>\n"}, {"tags": ["windows", "perl", "command-line", "permissions"], "comments": [{"owner": {"reputation": 1778, "user_id": 2740367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7OsG.png?s=128&g=1", "display_name": "leu", "link": "https://stackoverflow.com/users/2740367/leu"}, "edited": false, "score": 3, "creation_date": 1434211333, "post_id": 30820619, "comment_id": 49687632, "body": "does <code>print &quot;MOVE PROBLEM: $!&quot;</code> help to get more details?"}, {"owner": {"reputation": 1, "user_id": 4926022, "user_type": "registered", "profile_image": "https://graph.facebook.com/899310540129883/picture?type=large", "display_name": "glebogryzacz", "link": "https://stackoverflow.com/users/4926022/glebogryzacz"}, "reply_to_user": {"reputation": 1778, "user_id": 2740367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7OsG.png?s=128&g=1", "display_name": "leu", "link": "https://stackoverflow.com/users/2740367/leu"}, "edited": false, "score": 0, "creation_date": 1434211549, "post_id": 30820619, "comment_id": 49687719, "body": "Didn&#39;t think about it! Teacher said this var is veeeeery helpful and I forgot. It says &quot;Permission denied&quot;. How can I give the permission?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1434212762, "post_id": 30820619, "comment_id": 49688090, "body": "<code>chmod</code> is used to change permissions, and <code>chown</code> is used to change user and group ownership. They are both command-line utitilies, Perl functions and system calls."}, {"owner": {"reputation": 1, "user_id": 4926022, "user_type": "registered", "profile_image": "https://graph.facebook.com/899310540129883/picture?type=large", "display_name": "glebogryzacz", "link": "https://stackoverflow.com/users/4926022/glebogryzacz"}, "edited": false, "score": 0, "creation_date": 1434213439, "post_id": 30820619, "comment_id": 49688292, "body": "Im working with Windows. I&#39;ve already changed attributes but it didn&#39;t help."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1434215064, "post_id": 30820619, "comment_id": 49688761, "body": "Try moving the same files with windows <code>move&#47;?</code> from command line."}, {"owner": {"reputation": 1, "user_id": 4926022, "user_type": "registered", "profile_image": "https://graph.facebook.com/899310540129883/picture?type=large", "display_name": "glebogryzacz", "link": "https://stackoverflow.com/users/4926022/glebogryzacz"}, "edited": false, "score": 0, "creation_date": 1434231180, "post_id": 30820619, "comment_id": 49693237, "body": "And I found it out. I need to close the file BEFORE I want to move it. Thanks for help!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434289346, "post_id": 30820619, "comment_id": 49705159, "body": "@glebogryzacz: You didn&#39;t indicate in any way that you were opening these files. How are we supposed to help you?"}, {"owner": {"reputation": 1, "user_id": 4926022, "user_type": "registered", "profile_image": "https://graph.facebook.com/899310540129883/picture?type=large", "display_name": "glebogryzacz", "link": "https://stackoverflow.com/users/4926022/glebogryzacz"}, "edited": false, "score": 0, "creation_date": 1434316566, "post_id": 30820619, "comment_id": 49713774, "body": "Yes, I know. I tottally forgot about it. Anyway You&#39;ve helped with $! var. It helped"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1434382709, "creation_date": 1434382709, "answer_id": 30849308, "question_id": 30820619, "link": "https://stackoverflow.com/questions/30820619/copy-work-very-well-while-move-doesnt-work-at-all/30849308#30849308", "title": "Copy work very well, while Move doesnt work at all.", "body": "<p><code>copy</code> and <code>move</code> are documented to set <code>$!</code> on error. It's also good to check whether the arguments are what you expect them to be. Pay particular attention to the presence of newlines and trailing spaces.</p>\n\n<pre><code>move($_, $new_dir)\n   or warn(\"Can't move \\\"$_\\\" to \\\"$new_dir\\\": $!\\n\");\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4926022, "user_type": "registered", "profile_image": "https://graph.facebook.com/899310540129883/picture?type=large", "display_name": "glebogryzacz", "link": "https://stackoverflow.com/users/4926022/glebogryzacz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1434382709, "creation_date": 1434210855, "last_edit_date": 1434214954, "question_id": 30820619, "link": "https://stackoverflow.com/questions/30820619/copy-work-very-well-while-move-doesnt-work-at-all", "title": "Copy work very well, while Move doesnt work at all.", "body": "<pre><code>use File::Copy;\n\n\n#Variable with my directory I work on\n$dir = \"C:/projekty/perl/muzyka\";\n\n#Variables used to find all mp3 files\n$dir_tmp = $dir.\"/*.mp3\";\n@files = glob( $dir_tmp );\n\n#Variable with directory I want to create and put my files to\n$new_dir = \"C:/projekty/perl/muzyka/new_dir\";\n\n#Creating new directory\nmkdir ( $new_dir ) or print \"MKDIR PROBLEM\";\n</code></pre>\n\n<p>Till this point everything is allright. Now I put the loop:</p>\n\n<pre><code>foreach( @pliki )\n{   \n    copy( $_, $new_dir) or print \"COPY PROBLEM\";\n}\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>foreach( @pliki )\n{   \n    move( $_, $new_dir) or print \"MOVE PROBLEM\";\n}\n</code></pre>\n\n<p>And the problem is: Copy works perfectly fine, but Move doesn't want to do its job. It works sometimes depends on some modifications in code but never in a loop. Simple code with 1 line:</p>\n\n<pre><code>move($a, $b);\n</code></pre>\n\n<p>works perfectly. But if I use some conditions or loops it stops working even if arguments (directories) seem OK (I checked them with print function put in a loop). Why is it not working? Are there any circumstances that would cause errors?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1434208097, "post_id": 30820055, "comment_id": 49686587, "body": "I like this question, but it would help if you could explain (hopefully with code) where in the structure the data needs to come from, and perhaps any examples of code that you have tried."}, {"owner": {"reputation": 587, "user_id": 3168714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EMTiR.jpg?s=128&g=1", "display_name": "NickJHoran", "link": "https://stackoverflow.com/users/3168714/nickjhoran"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1434208685, "post_id": 30820055, "comment_id": 49686781, "body": "Updated to include data structure (example)"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1434209288, "post_id": 30820055, "comment_id": 49686976, "body": "Much better, but I don&#39;t see any hash keys named &#39;total&#39;. Is there any way you can put an example how the two are related?"}, {"owner": {"reputation": 587, "user_id": 3168714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EMTiR.jpg?s=128&g=1", "display_name": "NickJHoran", "link": "https://stackoverflow.com/users/3168714/nickjhoran"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1434209527, "post_id": 30820055, "comment_id": 49687062, "body": "Sorry, I should have explained it better.  The JSON above is converted to a perl data structure and during that process, the &quot;count&quot; field names are translated to &quot;total&quot;."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1434210120, "post_id": 30820055, "comment_id": 49687243, "body": "Ok. I&#39;d edit the post to state exactly that, so it&#39;s clear to other readers."}, {"owner": {"reputation": 587, "user_id": 3168714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EMTiR.jpg?s=128&g=1", "display_name": "NickJHoran", "link": "https://stackoverflow.com/users/3168714/nickjhoran"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1434210670, "post_id": 30820055, "comment_id": 49687410, "body": "Good point, will do."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434221185, "post_id": 30820055, "comment_id": 49690560, "body": "@NickJHoran: You&#39;ve given us very little to work with. Please show a self-contained sample of your data that we can test with, and the Perl code that you&#39;ve tried"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434222326, "post_id": 30820055, "comment_id": 49690862, "body": "@NickJHoran: Please give an example of the URLs that you want to build"}], "answers": [{"comments": [{"owner": {"reputation": 587, "user_id": 3168714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EMTiR.jpg?s=128&g=1", "display_name": "NickJHoran", "link": "https://stackoverflow.com/users/3168714/nickjhoran"}, "edited": false, "score": 0, "creation_date": 1434270337, "post_id": 30826029, "comment_id": 49700222, "body": "I realise now that I was looking at this problem from the wrong point of view (from the child nodes back up).  Top-down approach makes total sense.  Good answer - thanks!"}], "tags": [], "owner": {"reputation": 4400, "user_id": 1452951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caa59033112232be3423b6643c697816?s=128&d=identicon&r=PG", "display_name": "Dondi Michael Stroma", "link": "https://stackoverflow.com/users/1452951/dondi-michael-stroma"}, "is_accepted": true, "score": 2, "last_activity_date": 1434257933, "last_edit_date": 1434257933, "creation_date": 1434257258, "answer_id": 30826029, "question_id": 30820055, "link": "https://stackoverflow.com/questions/30820055/accessing-parent-level-using-datavisitorcallback-perl/30826029#30826029", "title": "Accessing parent level using Data::Visitor::Callback (Perl)", "body": "<p>Given the JSON you posted is in the variable <code>$json_string</code>, the following code uses recursion to add the parents to all the children in the hash key <code>parent</code>, that way you can access the parents in your code.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse JSON;\n\nmy $data = decode_json($json_string);\n\nadd_parent_to_children($_) for @$data;\n\nsub add_parent_to_children {\n  my $node        = shift;\n  my $parent      = shift;\n  $node-&gt;{parent} = $parent if $parent;\n  if ($node-&gt;{pivot}) {\n    add_parent_to_children($_, $node) for @{$node-&gt;{pivot}};\n  }\n}\n</code></pre>\n\n<p>Demo:</p>\n\n<pre><code>my $c3 = $data-&gt;[0]{pivot}[0]{pivot}[2];\nprint \"$c3-&gt;{value}\\n\";                 # prints C3\nprint \"$c3-&gt;{parent}{value}\\n\";         # prints B\nprint \"$c3-&gt;{parent}{parent}{value}\\n\"; # prints A\n</code></pre>\n"}], "owner": {"reputation": 587, "user_id": 3168714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EMTiR.jpg?s=128&g=1", "display_name": "NickJHoran", "link": "https://stackoverflow.com/users/3168714/nickjhoran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 30826029, "answer_count": 1, "score": 2, "last_activity_date": 1434257933, "creation_date": 1434207363, "last_edit_date": 1434210818, "question_id": 30820055, "link": "https://stackoverflow.com/questions/30820055/accessing-parent-level-using-datavisitorcallback-perl", "title": "Accessing parent level using Data::Visitor::Callback (Perl)", "body": "<p>This is a long-shot, but are there any perl developers out there who know anything about Data::Visitor::Callback?</p>\n\n<p>I have a complex data structure that I am traversing.  Each time I find a hash that has a 'total' key, I need to build up a URL.  I have some of the data that I need to create these URLs but some of the data comes from higher up in the structure.</p>\n\n<p>I don't think I can access the levels above and that makes it impossible to build my URLs.  I only just realised that I needed data from higher up the structure.</p>\n\n<p>If I can't make Data::Visitor::Callback work for me, then it means rolling my own traversal code - which is a pain.</p>\n\n<p>Data I am traversing is converted from the following JSON (the \"count\" keys are renamed to \"total\" as part of the conversion process):</p>\n\n<pre><code>[\n        {\n            \"field\": \"field_name\",\n            \"value\": \"A\",\n            \"count\": 647,\n            \"pivot\": [\n                {\n                    \"field\": \"field_name\",\n                    \"value\": \"B\",\n                    \"count\": 618,\n                    \"pivot\": [\n                        {\n                            \"field\": \"field_name\",\n                            \"value\": \"C1\",\n                            \"count\": 572\n                        },\n                        {\n                            \"field\": \"field_name\",\n                            \"value\": \"C2\",\n                            \"count\": 266\n                        },\n                        {\n                            \"field\": \"field_name\",\n                            \"value\": \"C3\",\n                            \"count\": 237\n                        }\n                    ]\n                },\n                ...\n</code></pre>\n\n<p>Once I get to the deepest level (C), I need both A and B values in order to construct my URLs.</p>\n\n<p>Because Data::Visitor::Callback is acting on each leaf independently, I'm not sure that it 'knows' where in the structure it is. </p>\n\n<p>All help very much appreciated.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c#", "perl", "delphi", "shared-libraries", "neko"], "comments": [{"owner": {"reputation": 9812, "user_id": 1345535, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b62063f3b5bf78c24c71085aca077e2e?s=128&d=identicon&r=PG", "display_name": "David W", "link": "https://stackoverflow.com/users/1345535/david-w"}, "edited": false, "score": 1, "creation_date": 1434203716, "post_id": 30819373, "comment_id": 49685262, "body": "If these are both Windows environment executables, can you try wrapping a COM interop layer around the legacy executable and use it as an out-of-process server?"}, {"owner": {"reputation": 1463, "user_id": 3169872, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/56860a51bd310b5d8569602a75455749?s=128&d=identicon&r=PG&f=1", "display_name": "DoctorMoisha", "link": "https://stackoverflow.com/users/3169872/doctormoisha"}, "reply_to_user": {"reputation": 9812, "user_id": 1345535, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b62063f3b5bf78c24c71085aca077e2e?s=128&d=identicon&r=PG", "display_name": "David W", "link": "https://stackoverflow.com/users/1345535/david-w"}, "edited": false, "score": 0, "creation_date": 1434204303, "post_id": 30819373, "comment_id": 49685423, "body": "It is what I meant by <code>IPC communications</code>, or am I wrong?"}, {"owner": {"reputation": 9812, "user_id": 1345535, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b62063f3b5bf78c24c71085aca077e2e?s=128&d=identicon&r=PG", "display_name": "David W", "link": "https://stackoverflow.com/users/1345535/david-w"}, "edited": false, "score": 2, "creation_date": 1434204436, "post_id": 30819373, "comment_id": 49685463, "body": "IPC isn&#39;t the same as a COM wrapper. I was just thinking about the possibility the Delphi executable implemented any COM(Component Object Model) interfaces and/or objects, which could then be wrapped in an interop layer and exposed to a 64-bit app out-of-process"}, {"owner": {"reputation": 570609, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1434204472, "post_id": 30819373, "comment_id": 49685476, "body": "What are you asking? You need two processes and IPC. No choice."}, {"owner": {"reputation": 1463, "user_id": 3169872, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/56860a51bd310b5d8569602a75455749?s=128&d=identicon&r=PG&f=1", "display_name": "DoctorMoisha", "link": "https://stackoverflow.com/users/3169872/doctormoisha"}, "reply_to_user": {"reputation": 9812, "user_id": 1345535, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b62063f3b5bf78c24c71085aca077e2e?s=128&d=identicon&r=PG", "display_name": "David W", "link": "https://stackoverflow.com/users/1345535/david-w"}, "edited": false, "score": 0, "creation_date": 1434204540, "post_id": 30819373, "comment_id": 49685490, "body": "@DavidW I see, thank you, I&#39;ll take a look."}], "answers": [{"tags": [], "owner": {"reputation": 570609, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": true, "score": 4, "last_activity_date": 1434208182, "creation_date": 1434208182, "answer_id": 30820190, "question_id": 30819373, "link": "https://stackoverflow.com/questions/30819373/using-32-bit-library-from-64-bit-application-with-perl-or-neko/30820190#30820190", "title": "Using 32-bit library from 64-bit application with perl or neko", "body": "<p>Neither Perl nor Neko are going to help you consume this 32 bit library in your 64 bit process. Were you to try to use either Perl or Neko you would just be injecting even more layers in between your two modules.</p>\n\n<p>You will need to use IPC of one form or another. There are many ways to do that. You could create a 32 bit C# host process for the 32 bit library, and then communicate between the 32 and 64 bit C# processes using one of the standard .net IPC frameworks.</p>\n\n<p>However, this does look like a good fit for an out-of-process COM solution. Create an out-of-process COM server that exposes the functionality of the 32 bit DLL. Consume that COM server from your 64 bit process as you would any other COM server.</p>\n"}], "owner": {"reputation": 1463, "user_id": 3169872, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/56860a51bd310b5d8569602a75455749?s=128&d=identicon&r=PG&f=1", "display_name": "DoctorMoisha", "link": "https://stackoverflow.com/users/3169872/doctormoisha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 30820190, "answer_count": 1, "score": -1, "last_activity_date": 1434208182, "creation_date": 1434203154, "question_id": 30819373, "link": "https://stackoverflow.com/questions/30819373/using-32-bit-library-from-64-bit-application-with-perl-or-neko", "title": "Using 32-bit library from 64-bit application with perl or neko", "body": "<p>I know, that it is very often question, but I want to know a little bit more on this subject.</p>\n\n<p>We have application, written in C#, which is compiled to x64. It must be compiled to x64, because it is requirment of our customer. Recently, we discovered that we have old delphi code(<em>sighs</em>) with very helpful module, that I must test(<em>double sighs</em>). For some stupid reason, I must not compile this module with anything else then delphi 7. So I'm stuck with x32 .dll of this module and x64 application to use it.</p>\n\n<p>I've already discovered workaround with IPC communications, but I'm familiar with <strong>perl</strong> and recently discovered <strong>neko</strong>. As far as I know perl is used for glue code and neko is used for sharing runtime between different languages. So maybe there is some workaround using perl, neko or something else?</p>\n\n<p>Also, if you can provide any example code of sharing runtime between two languages in neko, I'll be ver grateful.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["perl", "dictionary", "grep"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434289443, "post_id": 30817246, "comment_id": 49705189, "body": "Does <code>AGGLUTININ</code> really start on a new line?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1434359375, "post_id": 30817246, "comment_id": 49726351, "body": "<code>map</code> and <code>grep</code> are powerful tools, but ... if you don&#39;t follow what they&#39;re doing, don&#39;t use them. They&#39;re very much case studies in: &quot;\u201cEveryone knows that debugging is twice as hard as writing a program in the first place. So if you&#39;re as clever as you can be when you write it, how will you ever debug it?\u201d&quot; - Brian Kernighan"}], "answers": [{"comments": [{"owner": {"reputation": 11161, "user_id": 1908967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vPwiV.jpg?s=128&g=1", "display_name": "Grokify", "link": "https://stackoverflow.com/users/1908967/grokify"}, "reply_to_user": {"reputation": 9, "user_id": 5005858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2192806646a701e93aea445f4c192d6d?s=128&d=identicon&r=PG&f=1", "display_name": "real program", "link": "https://stackoverflow.com/users/5005858/real-program"}, "edited": false, "score": 0, "creation_date": 1434221284, "post_id": 30817306, "comment_id": 49690580, "body": "The example has been updated to capture and output the chain value, e.g. &quot;A, C, E, G&quot;."}], "tags": [], "owner": {"reputation": 11161, "user_id": 1908967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vPwiV.jpg?s=128&g=1", "display_name": "Grokify", "link": "https://stackoverflow.com/users/1908967/grokify"}, "is_accepted": false, "score": 1, "last_activity_date": 1434221091, "last_edit_date": 1434221091, "creation_date": 1434189084, "answer_id": 30817306, "question_id": 30817246, "link": "https://stackoverflow.com/questions/30817246/how-to-use-map-and-grep-in-perl-for-following-data/30817306#30817306", "title": "How to use map and grep in Perl for following data", "body": "<p>You can use a single regular expression like the following:</p>\n\n<pre><code>while (my $line = &lt;FILE&gt;) {\n    if ($line =~ /^COMPND.+?CHAIN:\\s*(.*?)\\s*;\\s*$/) {\n        my $chain = $1;\n        print \"$chain\\n\";\n    }\n}\n</code></pre>\n\n<p>This uses a regular expression to match COMPND, CHAIN and an ending <code>;</code>. The <code>\\s*</code> at the end of the regular expression will match any trailing spaces. It will capture the string between <code>CHAIN:</code> and <code>;</code> excluding trailing and leading spaces in <code>$1</code> which is set as the value for the <code>$chain</code> variable.</p>\n\n<p>More information on <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow\">Perldoc: Perlre - Perl regular expressions</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1434199671, "post_id": 30818104, "comment_id": 49684092, "body": "your script not give the result for this pdb file <a href=\"http://www.rcsb.org/pdb/files/4DX9.pdb\" rel=\"nofollow noreferrer\">rcsb.org/pdb/files/4DX9.pdb</a>"}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1434232224, "post_id": 30818104, "comment_id": 49693487, "body": "@Hussain That file does not follow the same structure as the one in the question. Lines are continued on the next line, and ended with <code>;</code> there. That is no longer trivial to parse, as you need multiline checking."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1434264390, "post_id": 30818104, "comment_id": 49699000, "body": "thank you for your reply. Hmm ya i need one liner for multiline checking. can you post it.?"}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1434279690, "post_id": 30818104, "comment_id": 49702441, "body": "@Hussain You need it? This is <a href=\"http://stackoverflow.com/users/5005858/real-program\">real program</a>&#39;s question. It is not trivial to do, since you must exclude the beginning of the new line, and make sure you do not corrupt data. The best thing to do would be to look at CPAN and see if someone has already created a parser for this file format."}], "tags": [], "owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "is_accepted": false, "score": 2, "last_activity_date": 1434194578, "creation_date": 1434194578, "answer_id": 30818104, "question_id": 30817246, "link": "https://stackoverflow.com/questions/30817246/how-to-use-map-and-grep-in-perl-for-following-data/30818104#30818104", "title": "How to use map and grep in Perl for following data", "body": "<pre><code>perl -nle'print $1 if /^COMPND\\s+\\S*\\s*CHAIN:(.+);/' /home/httpd/cgi-bin/r/1JAC.pdb\n</code></pre>\n\n<p>This is a fairly simple method of \"grepping\" part of a line to standard output. It will capture everything in the parentheses and print it.</p>\n\n<ul>\n<li><code>-n</code> uses a <code>while(&lt;&gt;)</code> loop to read data from your file</li>\n<li><code>-l</code> handles newlines</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": -1, "last_activity_date": 1434199565, "last_edit_date": 1434199565, "creation_date": 1434195270, "answer_id": 30818189, "question_id": 30817246, "link": "https://stackoverflow.com/questions/30817246/how-to-use-map-and-grep-in-perl-for-following-data/30818189#30818189", "title": "How to use map and grep in Perl for following data", "body": "<p>Try this</p>\n\n<pre><code>use warnings;\nuse strict;\nopen my $nis,\"&lt;1jac.pdb\";\nmy @ar = grep{ m/^COMPND/g} &lt;$nis&gt;;\nmy $s = join(\"\",@ar);\nmy @dav;\nmy @mp2  = map{split(/,\\s|,/, $_)} grep{ s/(COMPND\\s+\\d+\\s+(CHAIN\\:\\s+)?)|(\\n|;)//g} @dav= $s =~m/(COMPND\\s+\\d+\\s+CHAIN\\:.+?(?:.|\\n)+?\\;)/g;\n$, = \", \";\nprint @mp2;\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>A, C, E, G, B, D, F, H\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1434196766, "creation_date": 1434196766, "answer_id": 30818417, "question_id": 30817246, "link": "https://stackoverflow.com/questions/30817246/how-to-use-map-and-grep-in-perl-for-following-data/30818417#30818417", "title": "How to use map and grep in Perl for following data", "body": "<p>You may like this one-line solution</p>\n\n<pre><code>perl -le 'print for map /CHAIN:\\s*([^;]+)/, &lt;&gt;' /home/httpd/cgi-bin/r/1JAC.pdb\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>A, C, E, G\nB, D, F, H\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 0, "last_activity_date": 1434369757, "creation_date": 1434369757, "answer_id": 30844705, "question_id": 30817246, "link": "https://stackoverflow.com/questions/30817246/how-to-use-map-and-grep-in-perl-for-following-data/30844705#30844705", "title": "How to use map and grep in Perl for following data", "body": "<p>Using GNU grep with perl regular expressions: find the text between \"CHAIN:\" and the semicolon</p>\n\n<pre><code>$ grep -oP '(?&lt;=CHAIN: ).*?(?=;)' filename\nA, C, E, G\nB, D, F, H\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 5005858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2192806646a701e93aea445f4c192d6d?s=128&d=identicon&r=PG&f=1", "display_name": "real program", "link": "https://stackoverflow.com/users/5005858/real-program"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1434369757, "creation_date": 1434188705, "last_edit_date": 1434209669, "question_id": 30817246, "link": "https://stackoverflow.com/questions/30817246/how-to-use-map-and-grep-in-perl-for-following-data", "title": "How to use map and grep in Perl for following data", "body": "<p>How to display only the chains (such as <code>A, C, E, G</code>) which end with a semicolon <code>;</code></p>\n\n<p><strong>Data</strong></p>\n\n<pre><code>COMPND    MOL_ID: 1;                                                            \nCOMPND   2 MOLECULE: JACALIN;                                                   \nCOMPND   3 CHAIN: A, C, E, G;                                                   \nCOMPND   4 SYNONYM: JACKFRUIT \nAGGLUTININ;                                       \nCOMPND   5 MOL_ID: 2;                                                           \nCOMPND   6 MOLECULE: JACALIN;                                                   \nCOMPND   7 CHAIN: B, D, F, H;                                                   \nCOMPND   8 SYNONYM: JACKFRUIT AGGLUTININ  \n</code></pre>\n\n<p>I tried the below code</p>\n\n<pre><code>#!usr/local/bin/perl\n\nopen(FILE, \"/home/httpd/cgi-bin/r/1JAC.pdb\");\n\nwhile ( $line = &lt;FILE&gt; ) {\n\n    if ( $line =~ /^COMPND/ ) {\n\n        #$line = substr $line,4,21;\n\n        my $line =~ m(/\\$:^\\w+\\$\\;/g);\n        print $line;\n    }\n}\n</code></pre>\n"}, {"tags": ["php", "perl", "lwp-useragent"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434197305, "post_id": 30815449, "comment_id": 49683423, "body": "Is all that really necessary? You could write just <code>use LWP::Simple; my $table_content = get(&#39;http:&#47;&#47;www.yahoo.com&#47;&#39;);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 4081154, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-yYBc8fROXeI/AAAAAAAAAAI/AAAAAAAAACo/Y6RUcXS7pBY/photo.jpg?sz=128", "display_name": "Richard Jones", "link": "https://stackoverflow.com/users/4081154/richard-jones"}, "edited": false, "score": 0, "creation_date": 1434175371, "post_id": 30815498, "comment_id": 49678612, "body": "Thank you :) wow, much easier. :) haha"}], "tags": [], "owner": {"reputation": 1610, "user_id": 4868546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U4Gbv.jpg?s=128&g=1", "display_name": "umka", "link": "https://stackoverflow.com/users/4868546/umka"}, "is_accepted": true, "score": 1, "last_activity_date": 1434173967, "last_edit_date": 1495541664, "creation_date": 1434173967, "answer_id": 30815498, "question_id": 30815449, "link": "https://stackoverflow.com/questions/30815449/downloading-a-webpage-source-code-from-another-one-of-my-websites-in-php/30815498#30815498", "title": "Downloading a webpage source code from another one of my websites in PHP", "body": "<p>You can fetch a page using <code>file_get_contents()</code> function, if URL wrapper is enabled and you don't need to pass additional headers, store cookies, etc.:</p>\n\n<pre><code>$page_contents=file_get_contents(\"http://example.com/\");\n</code></pre>\n\n<p>Otherwise you can do it using CURL. Follow this topic: <a href=\"https://stackoverflow.com/questions/14953867/how-to-get-page-content-using-curl\">How to get page content using cURL?</a></p>\n"}], "owner": {"reputation": 101, "user_id": 4081154, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-yYBc8fROXeI/AAAAAAAAAAI/AAAAAAAAACo/Y6RUcXS7pBY/photo.jpg?sz=128", "display_name": "Richard Jones", "link": "https://stackoverflow.com/users/4081154/richard-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "closed_date": 1434189051, "accepted_answer_id": 30815498, "answer_count": 1, "score": 1, "last_activity_date": 1434173967, "creation_date": 1434173510, "question_id": 30815449, "link": "https://stackoverflow.com/questions/30815449/downloading-a-webpage-source-code-from-another-one-of-my-websites-in-php", "closed_reason": "Needs details or clarity", "title": "Downloading a webpage source code from another one of my websites in PHP", "body": "<p>I am more of a Perl programmer, learning PHP still...</p>\n\n<p>I have this code in Perl that I can use to download source code of one of my other pages, or any page I want...</p>\n\n<pre><code>use LWP::UserAgent;\n\nmy $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;agent(\"Mozilla/8.0\"); # act like we are very capable browser\n$ua-&gt;cookie_jar({ file =&gt; \"$ENV{HOME}/.cookies.txt\", autosave =&gt; 1 });\n#   $ua-&gt;cookie_jar(HTTP::Cookies-&gt;new(file =&gt; \"lwpcookies.txt\"));\n$req = HTTP::Request-&gt;new(GET =&gt; \"http://www.yahoo.com/\");\n#   $req-&gt;header('Accept' =&gt; 'text/plain');\n$req-&gt;referer('http://www.yahoo.com/');\n# send request\n$res = $ua-&gt;request($req);\nif ($res-&gt;is_success) {\n    my $_tableContent = $res-&gt;content; # This gets the page content and fills it into the variable $_tableContent...\n ....\n</code></pre>\n\n<p>My question is, is there a way to do that in Php as easy as that? Or even easier?</p>\n\n<p>Thank you.\n-Rich</p>\n"}, {"tags": ["regex", "perl", "pattern-matching"], "comments": [{"owner": {"reputation": 4701, "user_id": 3662110, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/I19Jk.jpg?s=128&g=1", "display_name": "jmargolisvt", "link": "https://stackoverflow.com/users/3662110/jmargolisvt"}, "edited": false, "score": 2, "creation_date": 1434173569, "post_id": 30815442, "comment_id": 49678321, "body": "How much of this do you need to match?  What have you tried?"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1434209312, "post_id": 30815502, "comment_id": 49686986, "body": "The code allowed spaces and newlines after the text, which the OP specifically forbad. Fixed."}], "tags": [], "owner": {"reputation": 4021, "user_id": 3360759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndket.png?s=128&g=1", "display_name": "frhack", "link": "https://stackoverflow.com/users/3360759/frhack"}, "is_accepted": true, "score": 0, "last_activity_date": 1434209296, "last_edit_date": 1434209296, "creation_date": 1434173986, "answer_id": 30815502, "question_id": 30815442, "link": "https://stackoverflow.com/questions/30815442/need-help-in-pattern-matching-in-perl/30815502#30815502", "title": "Need help in pattern matching in Perl", "body": "<pre><code>my $if = \"Iface Name: bnx2i.00:17:a4:77:14:2f\";\nif ($if =~ /^Iface Name: ([a-f0-9]+\\.(?:[a-f0-9]{2}:){5}[a-f0-9]{2})\\z/) {\n   print $1;\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 4968122, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d6c8c0186c3b5100bc85b4dab793b28e?s=128&d=identicon&r=PG&f=1", "display_name": "Sam 333", "link": "https://stackoverflow.com/users/4968122/sam-333"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 1, "accepted_answer_id": 30815502, "answer_count": 1, "score": -1, "last_activity_date": 1450332356, "creation_date": 1434173421, "last_edit_date": 1450332356, "question_id": 30815442, "link": "https://stackoverflow.com/questions/30815442/need-help-in-pattern-matching-in-perl", "title": "Need help in pattern matching in Perl", "body": "<p>How to do the pattern match of \"Iface Name: bnx2i.00:17:a4:77:14:2f\" exactly? There should not be spaces or new lines before and after.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 4391, "user_id": 2332415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fa5a4e5ffdf883a1fcb1840c915d485?s=128&d=identicon&r=PG", "display_name": "Slaven Rezic", "link": "https://stackoverflow.com/users/2332415/slaven-rezic"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1438954108, "post_id": 30818555, "comment_id": 51675501, "body": "string eval is not per se bad. You just shouldn&#39;t use it in a performance-critical loop and have to be somewhat more careful to not create syntax errors in the eval&#39;ed code."}], "tags": [], "owner": {"reputation": 4391, "user_id": 2332415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fa5a4e5ffdf883a1fcb1840c915d485?s=128&d=identicon&r=PG", "display_name": "Slaven Rezic", "link": "https://stackoverflow.com/users/2332415/slaven-rezic"}, "is_accepted": false, "score": 5, "last_activity_date": 1435758189, "last_edit_date": 1435758189, "creation_date": 1434197657, "answer_id": 30818555, "question_id": 30814892, "link": "https://stackoverflow.com/questions/30814892/how-can-i-export-a-list-of-modules-with-my-own-module/30818555#30818555", "title": "How can I export a list of modules with my own module?", "body": "<p>Try out the CPAN module <a href=\"https://metacpan.org/pod/ToolSet\" rel=\"nofollow\">ToolSet</a>.</p>\n\n<p><strong>Other similar CPAN modules:</strong></p>\n\n<ul>\n<li>(2015) <a href=\"https://metacpan.org/pod/perl5i\" rel=\"nofollow\">perl5i</a></li>\n<li>(2015) <a href=\"https://metacpan.org/pod/strictures\" rel=\"nofollow\">strictures</a></li>\n<li>(2015) <a href=\"https://metacpan.org/pod/Modern::Perl\" rel=\"nofollow\">Modern::Perl</a></li>\n<li>(2014) <a href=\"https://metacpan.org/pod/Import::Into\" rel=\"nofollow\">Import::Into</a></li>\n<li>(2012) <a href=\"http://search.cpan.org/~mons/uni-perl-0.92/perl.pm.PL\" rel=\"nofollow\">uni::perl</a></li>\n<li>(2011) <a href=\"https://metacpan.org/pod/release/MLEHMANN/common-sense-3.4/sense.pm.PL\" rel=\"nofollow\">common::sense</a></li>\n<li>(2011) <a href=\"https://metacpan.org/pod/rig\" rel=\"nofollow\">rig</a></li>\n<li>(2010) <a href=\"https://metacpan.org/pod/Acme::Very::Modern::Perl\" rel=\"nofollow\">Acme::Very::Modern::Perl</a></li>\n<li>(2009) <a href=\"https://metacpan.org/pod/latest\" rel=\"nofollow\">latest</a></li>\n<li>(2005) <a href=\"https://metacpan.org/pod/Toolkit\" rel=\"nofollow\">Toolkit</a></li>\n<li>(2001) <a href=\"https://metacpan.org/pod/Pollute::Persistent\" rel=\"nofollow\">Pollute::Persistent</a></li>\n</ul>\n"}], "owner": {"reputation": 708, "user_id": 2348668, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/01a3034479d75cafcbb36061ed78cdf9?s=128&d=identicon&r=PG", "display_name": "user2348668", "link": "https://stackoverflow.com/users/2348668/user2348668"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1486630331, "creation_date": 1434167677, "last_edit_date": 1495535383, "question_id": 30814892, "link": "https://stackoverflow.com/questions/30814892/how-can-i-export-a-list-of-modules-with-my-own-module", "title": "How can I export a list of modules with my own module?", "body": "<p>I want to create a Base class that exports the following modules everytime I use it:</p>\n\n<pre><code>use 5.018;\nuse Data::Dumper;\nuse Warning; \n#etc etc \n</code></pre>\n\n<p><strong>Similar questions:</strong></p>\n\n<ul>\n<li>(2017) <a href=\"https://stackoverflow.com/q/42126154/2173773\">Shortcut to import modules?</a></li>\n<li>(2016) <a href=\"https://stackoverflow.com/q/40953539/2173773\">Perl import into all my packages?</a></li>\n<li>(2015) <a href=\"https://stackoverflow.com/q/28714502/2173773\">How to load a bunch of perl modules into a perl script</a></li>\n<li>(2013) <a href=\"https://stackoverflow.com/questions/16504478/is-there-any-way-to-auto-use-certain-modules-everytime-i-write-a-script\">Is there any way to \u201cauto-use\u201d certain modules everytime I write a script?</a></li>\n<li>(2012) <a href=\"https://stackoverflow.com/questions/13393144/how-to-include-a-file-that-contains-all-the-required-perl-module-names\">How to include a file that contains all the required Perl module names?</a></li>\n<li>(2011) <a href=\"https://stackoverflow.com/questions/6491058/how-to-use-multiple-modules-with-one-use\">How to \u201cuse\u201d multiple modules with one \u201cuse\u201d?</a></li>\n<li>(2011) <a href=\"https://stackoverflow.com/questions/6412799/perl-how-to-make-use-mydefaults-with-modern-perl-utf8-defaults\">How to make \u201cuse My::defaults\u201d with modern perl &amp; utf8 defaults?</a></li>\n<li>(2011) <a href=\"https://stackoverflow.com/questions/6494138/perl-explanation-how-to-works-the-uniperl-module-loading-pragmas-and-othe\">Explanation how to works the \u201cuni::perl\u201d module - loading pragmas and other modules</a></li>\n<li>(2011) <a href=\"https://stackoverflow.com/questions/4919625/perl-how-to-share-the-import-of-a-large-list-of-modules-between-many-independen\">How to share the import of a large list of modules between many independent scripts?</a></li>\n<li>(2010) <a href=\"https://stackoverflow.com/questions/2467819/how-do-i-group-my-package-imports-into-a-single-custom-package\">How do I group my package imports into a single custom package?</a></li>\n<li>(2009) <a href=\"https://stackoverflow.com/questions/437785/is-there-a-way-to-use-a-single-file-that-in-turn-uses-multiple-others-in-perl\">Is there a way to \u201cuse\u201d a single file that in turn uses multiple others in Perl?</a></li>\n</ul>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4970866, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6034c75527159d9ef5eb0220ce64cc70?s=128&d=identicon&r=PG&f=1", "display_name": "chrisyyy", "link": "https://stackoverflow.com/users/4970866/chrisyyy"}, "edited": false, "score": 0, "creation_date": 1434386202, "post_id": 30814452, "comment_id": 49744497, "body": "Thank you for the very thorough answer and explanation you are awesome."}, {"owner": {"reputation": 8571, "user_id": 1307166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc3a10ed3ebf00cf0f9dc70a014a703e?s=128&d=identicon&r=PG", "display_name": "b4hand", "link": "https://stackoverflow.com/users/1307166/b4hand"}, "reply_to_user": {"reputation": 43, "user_id": 4970866, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6034c75527159d9ef5eb0220ce64cc70?s=128&d=identicon&r=PG&f=1", "display_name": "chrisyyy", "link": "https://stackoverflow.com/users/4970866/chrisyyy"}, "edited": false, "score": 0, "creation_date": 1434395739, "post_id": 30814452, "comment_id": 49749799, "body": "When you do get upvote privileges feel free to come back and give me a vote. :)"}], "tags": [], "owner": {"reputation": 8571, "user_id": 1307166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc3a10ed3ebf00cf0f9dc70a014a703e?s=128&d=identicon&r=PG", "display_name": "b4hand", "link": "https://stackoverflow.com/users/1307166/b4hand"}, "is_accepted": true, "score": 1, "last_activity_date": 1434161684, "creation_date": 1434161684, "answer_id": 30814452, "question_id": 30813936, "link": "https://stackoverflow.com/questions/30813936/not-moving-files-in-perl-grep-in-if-expression/30814452#30814452", "title": "Not moving files in perl grep in if expression", "body": "<p>There's actually more than one thing wrong with your code. Here's a complete working example:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse Cwd;\nuse File::Copy;\n\nsub clean_old_runs {\n    my $current = cwd();\n    opendir(DIR, $current);\n\n    mkdir 'junk';\n\n    my @files = readdir(DIR);\n\n    my $num_of_files = scalar(@files);\n\n    foreach my $file (@files) {\n        unless ($file =~ /\\.ext[12]$/ or $file =~ /\\.pl$/) {\n            move(\"$current/$file\", \"$current/junk/$file\");\n        }\n    }\n\n    close DIR;\n}\n\nclean_old_runs();\n</code></pre>\n\n<p>I'll walk through the wrong pieces of your original code one at a time:</p>\n\n<pre><code>my @files = readdir(DIR);\n\nmy $num_of_files = scalar(@files);\n\nfor(my $n = 0; $n &lt; $num_of_files; $n++) {\n      # ...\n}\n</code></pre>\n\n<p>Here <code>@files</code> contains the <em>actual</em> file names. Your <code>for</code> loop doesn't actually iterate over those files. Thus, I've changed the loop to use a <code>foreach</code> iteration since you already have an array containing the files that you care about.</p>\n\n<p>Next your <code>unless</code> logic is in fact wrong as you suspected:</p>\n\n<pre><code>unless ( grep {/\\.ext1$/} @_ or grep {/\\.ext2$/} @_ or grep {/\\.pl$/} @_) { \n    move(\"$current/@_\", \"$current/junk/@_\");\n}\n</code></pre>\n\n<p>In particular, the <code>@_</code> variable is the arguments to your function, which doesn't appear to be given any, but it's unclear from context since you don't show any invocation of <code>clean_old_runs</code>. Regardless, it appears you want to operate on <code>@files</code> inside this function. Furthermore, in my version, I'm already iterating over <code>@files</code>, so it doesn't make sense to use <code>grep</code> here, but in your version you would be running the <code>grep</code> many times for each file if you ran it in your loop.</p>\n\n<p>I combined the two patterns to simplify things as <code>/\\.ext[12]$/</code> matches both <code>/\\.ext1/</code> and <code>/\\.ext2/</code>.</p>\n"}], "owner": {"reputation": 43, "user_id": 4970866, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6034c75527159d9ef5eb0220ce64cc70?s=128&d=identicon&r=PG&f=1", "display_name": "chrisyyy", "link": "https://stackoverflow.com/users/4970866/chrisyyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 30814452, "answer_count": 1, "score": 0, "last_activity_date": 1434161684, "creation_date": 1434155216, "last_edit_date": 1434159645, "question_id": 30813936, "link": "https://stackoverflow.com/questions/30813936/not-moving-files-in-perl-grep-in-if-expression", "title": "Not moving files in perl grep in if expression", "body": "<p>I have the current subroutine written to move files in my current directory to a /junk directory off my current directory if they don't have a certain file extension. For some reason, none of the files are getting moved, and I think it has to do with my <code>unless</code> expression. I've only been working in Perl for about a week so any help is very much appreciated!</p>\n\n<pre><code>sub clean_old_runs {\n\n    my $current = cwd();\n    opendir(DIR, $current);\n\n    mkdir 'junk';\n\n    my @files = readdir(DIR);\n\n    my $num_of_files = scalar(@files);\n\n    for(my $n = 0; $n &lt; $num_of_files; $n++) {\n        unless ( grep {/\\.ext1$/} @_ or grep {/\\.ext2$/} @_ or grep {/\\.pl$/} @_) { \n            move(\"$current/@_\", \"$current/junk/@_\");\n        }\n    }\n\n    close DIR;\n}\n</code></pre>\n"}, {"tags": ["c", "perl", "endianness"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1434157976, "post_id": 30813826, "comment_id": 49676046, "body": "Apart from your rant (justified or not): what is your actual question and how is that related to C actually (apart from the rant, I say)?"}, {"owner": {"reputation": 621, "user_id": 1713351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5f6f80d7ad92101ee021e9d013fafd?s=128&d=identicon&r=PG", "display_name": "kjpires", "link": "https://stackoverflow.com/users/1713351/kjpires"}, "edited": false, "score": 0, "creation_date": 1434160792, "post_id": 30813826, "comment_id": 49676462, "body": "The third argument to <code>vec</code> isn&#39;t the number of bits to translate, it is the chunk size."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1434173757, "post_id": 30813826, "comment_id": 49678349, "body": "The endianness of your processor is irrelevant. Your file data -- specifically the first four bytes -- are in little-endian order, and you just need to unpack them as such. I don&#39;t understand why you won&#39;t just try the <code>unpack &#39;V&#39;, $bdat</code> that I suggested and keep involving <code>vec</code> that you know doesn&#39;t work and I have explained why"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434174233, "post_id": 30813826, "comment_id": 49678420, "body": "You really shouldn&#39;t be using <code>vec</code> at all except for chunk sizes smaller than a byte"}], "answers": [{"comments": [{"owner": {"reputation": 140, "user_id": 4282598, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/WfQRb.jpg?s=128&g=1", "display_name": "BrianP007", "link": "https://stackoverflow.com/users/4282598/brianp007"}, "edited": false, "score": 0, "creation_date": 1434156369, "post_id": 30813961, "comment_id": 49675818, "body": "I wanted the SAME 32 bits I wrote, VERBATIM. Vector mangles them differently depending on the length???"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 140, "user_id": 4282598, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/WfQRb.jpg?s=128&g=1", "display_name": "BrianP007", "link": "https://stackoverflow.com/users/4282598/brianp007"}, "edited": false, "score": 0, "creation_date": 1434157356, "post_id": 30813961, "comment_id": 49675963, "body": "@BrianP007: I don&#39;t understand what you mean by <i>\u201cthe same 32 bits I wrote\u201d</i>. <code>vec</code> will unpack multi-byte fields in a big-endian order, the same as <code>unpack &#39;N&#39;</code> as I said. If you try <code>unpack &#39;V&#39;, $bdat</code> then you will find that it works"}, {"owner": {"reputation": 140, "user_id": 4282598, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/WfQRb.jpg?s=128&g=1", "display_name": "BrianP007", "link": "https://stackoverflow.com/users/4282598/brianp007"}, "edited": false, "score": 0, "creation_date": 1434170054, "post_id": 30813961, "comment_id": 49677757, "body": "&gt;&gt;   I don&#39;t understand what you mean by \u201cthe same 32 bits I wrote\u201d                              Earlier I had used vec() to read large 1 and 4 bit/pixel bitmaps, asking for either 1 or 4 bits at a time. The graphs I made of the 1 bit black/transparent bitmask and the 4 bit color png files crated fit the Photoshop originals perfectly."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 140, "user_id": 4282598, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/WfQRb.jpg?s=128&g=1", "display_name": "BrianP007", "link": "https://stackoverflow.com/users/4282598/brianp007"}, "edited": false, "score": 0, "creation_date": 1434173269, "post_id": 30813961, "comment_id": 49678279, "body": "@BrianP007: I have explained that you <i>can&#39;t</i> pass the result of <code>vec</code> to <code>unpack</code>. <code>vec</code> returns a binary value whereas <code>unpack</code>is expecting a string. <code>vec($bdat, 0, 32)</code> is <i>identical</i> to <code>unpack(&#39;N&#39;, $bdat)</code>, so <code>unpack(&#39;V&#39;, vec($bdat, 0, 32))</code> is the same as <code>unpack(&#39;V&#39;, unpack(&#39;N&#39;, $bdat))</code> which doesn&#39;t make sense as you can&#39;t stack <code>unpack</code> calls. If you would just try <code>unpack(&#39;V&#39;, $bdat)</code> <i>without</i> involving <code>vec</code> then you will have the correct result"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 140, "user_id": 4282598, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/WfQRb.jpg?s=128&g=1", "display_name": "BrianP007", "link": "https://stackoverflow.com/users/4282598/brianp007"}, "edited": false, "score": 0, "creation_date": 1434198039, "post_id": 30813961, "comment_id": 49683619, "body": "You are so determined to be a victim that you have focussed on <i>\u201cClearly a case of intel&#39;s 1972 8008 NUXI architecture\u201d</i> and <i>\u201cObviously wrong Endian, it is not VAX\u201d</i> instead of the real situation, which is <i>\u201cI must figure out how I am misusing either VEC or Unpack\u201d</i>. Your data <i>is</i> in VAX (little-endian) order and your problem is that you don&#39;t understand what <code>vec</code> and <code>unpack</code> do: you shouldn&#39;t be using <code>vec</code> at all here."}, {"owner": {"reputation": 140, "user_id": 4282598, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/WfQRb.jpg?s=128&g=1", "display_name": "BrianP007", "link": "https://stackoverflow.com/users/4282598/brianp007"}, "edited": false, "score": 0, "creation_date": 1434231458, "post_id": 30813961, "comment_id": 49693298, "body": "Borodin,  With 1 and 4 bit VECtors, vec() returned exactly what the C program wrote. Crossing the 16 bit threshold, I started seeing Obvious Wrong Endianness introduced by vec(). Unpack is the standard Perl tool to fix the problem. Feeding one into the other was the problem. Small vectors still use vec() and 2+ byte packets now use unpack() without vec(). The goal of determining the root of the Misuse is accomplished. No Ugly Hacks! Thank you. But, you seem to be more agitated than necessary.  Sorry if the Endian comment struck a raw nerve &lt;|;o"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 140, "user_id": 4282598, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/WfQRb.jpg?s=128&g=1", "display_name": "BrianP007", "link": "https://stackoverflow.com/users/4282598/brianp007"}, "edited": false, "score": 0, "creation_date": 1434277868, "post_id": 30813961, "comment_id": 49701961, "body": "@BrianP007: I&#39;m glad you have your solution. Rather than your comments about endianness, it was your insistence on proving me wrong without even trying my solution that jarred. Together with your attitude of blaming this nasty technology, your responses are very frustrating -- Olaf made a similar observation. By the way,  you could also unpack your bits with <code>unpack &#39;b*&#39;</code> and your nybbles with <code>unpack </code>h*&#39;`"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1434155857, "last_edit_date": 1434155857, "creation_date": 1434155378, "answer_id": 30813961, "question_id": 30813826, "link": "https://stackoverflow.com/questions/30813826/correct-way-to-unpack-a-32-bit-vector-in-perl-to-read-a-uint32-written-in-c/30813961#30813961", "title": "Correct way to unpack a 32 bit vector in Perl to read a uint32 written in C", "body": "<p>You are confusing things by combining <code>vec</code> with <code>unpack</code></p>\n\n<p>The correct way is simply</p>\n\n<pre><code>unpack 'V', $bdat\n</code></pre>\n\n<p>which returns a value of <code>0x00000B6A</code> as you expect</p>\n\n<p><code>vec($bdat, 0, 32)</code> is equivalent to <code>unpack 'N', $bdat</code> as you can see from the value of <code>$xres</code> in your first code block, and the <a href=\"http://perldoc.perl.org/functions/vec.html\" rel=\"nofollow\">documentation for <code>vec</code></a> confirms this with</p>\n\n<blockquote>\n  <p>If BITS is 16 or more, bytes of the input string are grouped into chunks of size BITS/8, and each group is converted to a number as with pack()/unpack() with big-endian formats n/N</p>\n</blockquote>\n\n<p>The line</p>\n\n<pre><code>$vul = unpack(\"V\", vec($bdat, 0, 32))\n</code></pre>\n\n<p>is very wrong, because the decimal value of <code>vec($bdat, 0, 32)</code> is 1779105792, so you are then calling <code>unpack</code> on the <em>string</em> <code>\"1779105792\"</code> which doesn't do anything useful at all</p>\n"}], "owner": {"reputation": 140, "user_id": 4282598, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/WfQRb.jpg?s=128&g=1", "display_name": "BrianP007", "link": "https://stackoverflow.com/users/4282598/brianp007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 920, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1434162953, "creation_date": 1434153909, "last_edit_date": 1434162953, "question_id": 30813826, "link": "https://stackoverflow.com/questions/30813826/correct-way-to-unpack-a-32-bit-vector-in-perl-to-read-a-uint32-written-in-c", "title": "Correct way to unpack a 32 bit vector in Perl to read a uint32 written in C", "body": "<p>I am parsing a Photoshop raw, 16 bit/channel, RGB file in C and trying to keep a log of exceptional data points. I need a very fast C analysis of up to 36 MPix images with 16 bit quanta or 216 MB Photoshop .RAW files. </p>\n\n<p>&lt;1% of the points have weird skin tones and I want to graph them with PerlMagick or Perl GD to see where they are coming from.</p>\n\n<p>The first 4 bytes of the C data file contain the unsigned image width as a uint32_t. In Perl, I read the whole file in binary mode and extract the first 32 bits:</p>\n\n<pre><code>Xres=1779105792l = 0x6a0b0000\n</code></pre>\n\n<p>It looks a lot like the C log file:</p>\n\n<pre><code>DA: Color anomalies=14177=0.229%:\nDA: II=1) raw PIDX=0x10000b25,  XCols=[0]=0x00000b6a\n</code></pre>\n\n<p>Dec(0x00000b6a) = 2922, the Exact X_Columns_Width of a small test file. </p>\n\n<p>Clearly a case of intel's 1972 8008 NUXI architecture. How hard could it possibly be to translate 0x6a0b0000 to 0x6a0b0000; swap 2 bytes and 2 nibbles and you're done. Slicing the 8 characters and rearranging them could be done but that is the kind of ugly hack I am trying to avoid. </p>\n\n<p>Grab the same 32 bit vector from file offset zero and unpack it as \"VAX\" unsigned long. </p>\n\n<pre><code>$xres = vec($bdat, 0, 32);  # vec EXPR,OFFSET,BITS\n$vul   = unpack(\"V\", vec($bdat, 0, 32));\nprintf(\"Length (\\$bdat)=%d, xres=0x%08x, Vax ulong=%ul=0x%08x\\n\",\n    length($bdat), $xres, $vul, $vul);\nLength ($bdat) = 56712, xres=0x6a0b0000, Vax ulong=959919921l=0x39373731\n</code></pre>\n\n<p>Every single hex character is mangled. Obviously wrong Endian, it is not VAX. The \"Other\" one is Network Big-endian</p>\n\n<pre><code>http://perldoc.perl.org/functions/pack.html\nN  An unsigned long (32-bit) in \"network\" (big-endian) order.\nV  An unsigned long (32-bit) in \"VAX\" (little-endian) order.\n$nul = unpack(\"N\", vec($bdat, 0, 32));  # Network Unsigned Long 32b\nprintf(\"Xres=0x%08x, NET ulong=%ul=0x%08x\\n\", $xres, $nul, $nul);\nXres=0x6a0b0000, NET ulong=825702201l=0x31373739\n</code></pre>\n\n<p>The $XRES still shows the right hex in the wrong order. The \"NETWORK\" long 32 bit uint extracted from the same bits is unrecognizable. Try Binary</p>\n\n<pre><code>$bits = unpack(\"b*\", vec($bdat, 0, 32));\nprintf(\"bits=$bits, len=%d\\n\", length $bits);\n   bits=10001100111011001110110010011100100011000000110010101100111011001001110001001100, len=80\n</code></pre>\n\n<p>I clearly asked for 32 bits and got 80 bits. What gives? </p>\n\n<p>Try for 4, unsigned, 8bit bytes which can NOT be swapped:</p>\n\n<pre><code>for($ii = 0; $ii &lt; 4; $ii++)  {\n    $bit_off=$ii*8;  # Bit offset\n    $uc = unpack(\"C\", vec($bdat, $bit_off, 8));  # C  An unsigned char \n    printf(\"II $ii, bo $bit_off, d=%d, u=%u, x=0x%x\\n\", \n       $uc,$uc, $uc);\n}\nII 0, bo 0, d=49, u=49, x=0x31\nII 1, bo 8, d=51, u=51, x=0x33\nII 2, bo 16, d=49, u=49, x=0x31\nII 3, bo 24, d=49, u=49, x=0x31\n</code></pre>\n\n<p>I am looking for hex 0, 6, a or b. There are no \"3\"s or \"1\"s in the right answer. Try pirating from a C file:</p>\n\n<pre><code>http://cpansearch.perl.org/src/MHX/Convert-Binary-C-0.76/tests/include/include/bits/byteswap.h\n$x = $xres;\n$x= (((($x) &amp; 0xff000000) &gt;&gt; 24) | ((($x) &amp; 0x00ff0000) &gt;&gt;  8) |     ((($x) &amp; 0x0000ff00) &lt;&lt;  8) | ((($x) &amp; 0x000000ff) &lt;&lt; 24));\nprintf(\"\\$xres=0x%08x -&gt; \\$x=0x%08x = %u\\n\", $xres, $x, $x);\n$xres=0x6a0b0000 -&gt; $x=0x00000b6a = 2922\n</code></pre>\n\n<p>It WORKS! But, this is uglier than converting the original, wrong order hex number to a string to untangle it:</p>\n\n<pre><code>$stupid_str = sprintf(\"%08x\", $xres);\n$stupid_num = join('', reverse ($stupid_str =~ m/../g));\nprintf(\"Stupid_num '%s'-&gt;0x%08x=%d\\n\", $stupid_num, $dec=hex $stupid_num, $dec);\nStupid_num '00000b6a'-&gt;0x00000b6a=2922\n</code></pre>\n\n<p>It's like judging the Ugliest Dog contest, but I would still rather have to maintain the text version than the even more abominable C version. </p>\n\n<p>I know there are ways to do this in Java/Python/Go/Ruby/.....</p>\n\n<p>I know there are command line utilities that do exactly this.</p>\n\n<p>I must figure out how I am misusing either VEC or Unpack, both of which I have used a zillion times. It is the Brain Teasing aspect which is driving me nuts!  EndianNess == EndianMess!!!</p>\n\n<p>TYVM!</p>\n\n<p>=================================================</p>\n\n<p>Borodin,</p>\n\n<p>Thanks for lookin' at this. </p>\n\n<p>My intel processor is little-endian. When I read it back, it was trans-mutilated by vec to the \"correct\" big-endian, network format. </p>\n\n<p>I just tried reading it VERBATIM from a BINARY file read and it works fine:</p>\n\n<pre><code>($b4 = $bdat) =~ s/^(....).*$/$1/msg;   # Give me my 4 bytes back without mutilation!\nprintf(\"B4='%s'=&gt;0x%08x=&lt;0x%08x\\n\", $b4, unpack(\"L&gt;\", $b4), unpack(\"L&lt;\", $b4));\nB4='j...' = &gt;0x6a0b0000 = &lt;0x00000b6a   &lt;&lt;&lt;  THE RIGHT ANSWER!!!\n</code></pre>\n\n<blockquote>\n  <blockquote>\n    <p>If you try unpack 'V', $bdat then you will find that it works</p>\n  </blockquote>\n</blockquote>\n\n<p>That was my first attempt:\n    $vul   = unpack(\"V\", vec($bdat, 0, 32));  #  UNPACK V!<br>\n    printf(\"Length (\\$bdat)=%d, xres=0x%08x, Vax ulong=%ul=0x%08x\\n\",\n        length($bdat), $xres, $vul, $vul);\n    Length ($bdat) = 56712, xres=0x6a0b0000, Vax ulong=959919921l=0x39373731   &lt;&lt;&lt;&lt; TOTALLY WRONG!</p>\n\n<p>I had already verified that the $BDAT info was the right data in the wrong format. It just needed some rearrangement. </p>\n\n<p>I just used vec() to generate 1 bit and 4 bit graphics files and it worked faithfully, returning the exact bits I wrote. It must have mistaken my Intel i7 for my IBM System/370. I7/37??? Easy mistake to make. :)</p>\n\n<p>I read the [confusing] part about \"converted to a number as with pack ...\". That's why my number was backward. The >>unpack(\"V\", vec($bdat\"&lt;&lt; ... was my ill-fated attempt to byte-swap the backward number in $BDAT from the WRONG VEC()-preferred FORMAT to the native format supported by my architecture.</p>\n\n<p>Now I understand why I saw so many examples of people extracting by the byte, to avoid Big Brother's helping hand! </p>\n\n<pre><code>Data::BitStream::Vec \"uses a Perl vec to store the data. The vector is accessed in 1-bit units\"\n</code></pre>\n\n<p>Thanks 1E6,</p>\n\n<pre><code>B\n</code></pre>\n"}, {"tags": ["regex", "perl", "substitution"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 1, "creation_date": 1434145335, "post_id": 30812582, "comment_id": 49673256, "body": "This should work. what is your Output?"}, {"owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "edited": false, "score": 0, "creation_date": 1434145518, "post_id": 30812582, "comment_id": 49673317, "body": "The relative sizes of the pattern and the substituting string do not matter. Your example code works perfectly fine with me. Can you show the complete code ?"}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 4180345, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/fd5766ada96891ff3478f96ff856bc4b?s=128&d=identicon&r=PG&f=1", "display_name": "chris202 ", "link": "https://stackoverflow.com/users/4180345/chris202"}, "edited": false, "score": 0, "creation_date": 1434147103, "post_id": 30812890, "comment_id": 49673849, "body": "It works, thank you ! Could you explain the formula a little ?"}, {"owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "edited": false, "score": 0, "creation_date": 1434178200, "post_id": 30812890, "comment_id": 49679072, "body": "Note that, despite the somewhat misleading abbreviation, <code>&#47;e</code> really has nothing to do with <code>eval</code>. It just causes the right-hand side of the substitution to be parsed (at compile time) as Perl code, rather than as a (double-quoted) string. Just to confuse things further, <code>&#47;ee</code> <a href=\"http://perldoc.perl.org/perlop.html#s%2fPATTERN%2fREPLACEMENT%2fmsixpodualgcer\" rel=\"nofollow noreferrer\">really does</a> apply <code>eval</code> to the result of the substitution, and does share its &quot;evilness&quot; (inefficiency, lack of compile-time error checking, very high risk of security holes if applied to user input)."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": true, "score": 2, "last_activity_date": 1434147547, "last_edit_date": 1434147547, "creation_date": 1434146976, "answer_id": 30812890, "question_id": 30812582, "link": "https://stackoverflow.com/questions/30812582/perl-substitute-pattern-with-pattern-of-different-size/30812890#30812890", "title": "perl: substitute pattern with pattern of different size", "body": "<p>Something like this using eval  (untested).</p>\n\n<pre><code>$string=~ s/(A)|C/ length($1) ? '123': '456'/eg;  \n</code></pre>\n\n<p>Using the <em>eval</em> flag in the <code>s///</code> form means to evaluate the <em>replacement</em><br>\nside as a line of code that returns a value.  </p>\n\n<p>In this case it executes a ternary conditional in the replacement code.  </p>\n\n<p>It's sort of like an inline regex callback.<br>\nIt's much more complicated though since it can be like <code>s///eeg</code> so<br>\nbetter to refer to the docs.  </p>\n\n<p>Remember, <em>eval</em> is really evil, misspelled !!</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1434151209, "post_id": 30812996, "comment_id": 49674929, "body": "There&#39;s no need for the <code>&#47;e</code> modifier when the replacement can be expressed as a simple interpolated string. <code>$string =~ s&#47;($search)&#47;$map{$1}&#47;g</code> is fine"}], "tags": [], "owner": {"reputation": 29164, "user_id": 11289, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a82922f943c2ed9dac3f2b00343a6a3b?s=128&d=identicon&r=PG", "display_name": "Axeman", "link": "https://stackoverflow.com/users/11289/axeman"}, "is_accepted": false, "score": 7, "last_activity_date": 1434375869, "last_edit_date": 1434375869, "creation_date": 1434147734, "answer_id": 30812996, "question_id": 30812582, "link": "https://stackoverflow.com/questions/30812582/perl-substitute-pattern-with-pattern-of-different-size/30812996#30812996", "title": "perl: substitute pattern with pattern of different size", "body": "<p>You're getting what I'd expect you to get. Your regex looks for <em>one</em> occurrence of either an <code>'A'</code> or a <code>'B'</code> or a <code>'C'</code> or a <code>'D'</code> and replaces it with the <em>literal string</em> <code>'123|B|456|D'</code>. Hence <code>'A B C D'</code> -> <code>'123|B|456|D B C D'</code></p>\n\n<p>So it finds the first occurrence, the <code>'A'</code> and replaces it with the string you specified. An <em>alternation</em> matches various strings, but the pipe characters mean nothing in the replacement slot. </p>\n\n<p>What you need to do is create a mapping from input to output, like so: </p>\n\n<pre><code>my %map = ( A =&gt; '123', C =&gt; '456' );\n</code></pre>\n\n<p>Then you need to use it in the replacements. Let's give you a search expression: </p>\n\n<pre><code>my $search = join( '|', keys %map );\n</code></pre>\n\n<p>Now let's write the substitution (I prefer braces when I code substitutions that have code in them:</p>\n\n<pre><code>$string =~ s{($search)}{ $map{$1} }g;\n</code></pre>\n\n<p>The <code>g</code> switch means we match every part of the string we can, and the <code>e</code> switch tells Perl to <em>evaluate</em> the replacement expression as Perl code. </p>\n\n<p>The output is <code>'123 B 456 D'</code></p>\n"}, {"tags": [], "owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "is_accepted": false, "score": 1, "last_activity_date": 1434148255, "last_edit_date": 1495541640, "creation_date": 1434148255, "answer_id": 30813087, "question_id": 30812582, "link": "https://stackoverflow.com/questions/30812582/perl-substitute-pattern-with-pattern-of-different-size/30813087#30813087", "title": "perl: substitute pattern with pattern of different size", "body": "<p>The easiest way to do this is with two substitutions:</p>\n\n<pre><code>$string =~ s/A/123/g;\n$string =~ s/B/456/g;\n</code></pre>\n\n<p>or even (using an inline <code>for</code> loop as a shorthand to apply multiple substitutions to one string):</p>\n\n<pre><code>s/A/123/g, s/B/456/g for $string;\n</code></pre>\n\n<p>Of course, for more complicated patterns, this may not produce the same results as doing both substitutions in one pass; in particular, this may happen if the patterns can overlap (as in A = <code>YZ</code>, B = <code>XY</code>), or if pattern B can match the string substituted for pattern A.</p>\n\n<p>If you wish to do this in one pass, the most general solution is to use the <a href=\"https://stackoverflow.com/questions/6082219/perl-regex-e-eval-modifier-with-s\"><code>/e</code> modifier</a>, which causes the substitution to be interpreted as Perl code, as in:</p>\n\n<pre><code>$string =~ s/(A|B)/ $1 eq 'A' ? '123' : '456' /eg;\n</code></pre>\n\n<p>You can even include multiple expressions, separated by semicolons, inside the substitution; the last expression's value is what will be substituted into the string.  If you do this, you may find it useful to use <a href=\"http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators\" rel=\"nofollow noreferrer\">paired delimiters</a> for readability, like this:</p>\n\n<pre><code>$string =~ s{(A|B)}{\n    my $foo = \"\";\n    $foo = '123' if $1 eq 'A';\n    $foo = '456' if $1 eq 'B';\n    $foo;  # &lt;-- this is what gets substituted for the pattern\n}eg;\n</code></pre>\n\n<p>If your patterns are constant strings (as in the simple examples above), an even more efficient solution is to use a look-up hash, as in:</p>\n\n<pre><code>my %map = ('A' =&gt; '123', 'B' =&gt; '456');\n$string =~ s/(A|B)/$map{$1}/g;\n</code></pre>\n\n<p>With this method, you don't even need the <code>/e</code> modifier (although, for this specific example, adding it would make no difference).  The advantage of using <code>/e</code> is that it lets you implement more complicated rules for choosing the replacement than a simple hash lookup would allow.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10644741, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-z094vaVB3G8/AAAAAAAAAAI/AAAAAAAAA1A/AKM2HetKt5I/photo.jpg?sz=128", "display_name": "Krupa Kiran", "link": "https://stackoverflow.com/users/10644741/krupa-kiran"}, "is_accepted": false, "score": 0, "last_activity_date": 1610722050, "creation_date": 1610722050, "answer_id": 65738231, "question_id": 30812582, "link": "https://stackoverflow.com/questions/30812582/perl-substitute-pattern-with-pattern-of-different-size/65738231#65738231", "title": "perl: substitute pattern with pattern of different size", "body": "<p>String=&quot;A B C D&quot;</p>\n<p>echo $String | perl - pi - e 's/A/123/' &amp;&amp; perl - pi - e 's/C/456/'</p>\n"}], "owner": {"reputation": 181, "user_id": 4180345, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/fd5766ada96891ff3478f96ff856bc4b?s=128&d=identicon&r=PG&f=1", "display_name": "chris202 ", "link": "https://stackoverflow.com/users/4180345/chris202"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 30812890, "answer_count": 4, "score": 3, "last_activity_date": 1610722050, "creation_date": 1434145258, "last_edit_date": 1434146652, "question_id": 30812582, "link": "https://stackoverflow.com/questions/30812582/perl-substitute-pattern-with-pattern-of-different-size", "title": "perl: substitute pattern with pattern of different size", "body": "<p>here is my string <code>A B C D</code> and I want to replace <code>A</code> by <code>123</code> and <code>C</code> by <code>456</code> for example. However this doesn't work.</p>\n\n<pre><code>$string=~ s/A|B|C|D/123|B|456|D/;\n</code></pre>\n\n<p>I want this <code>123 B 456 D</code> but i get this <code>123|B|456|D B C D</code></p>\n\n<p>Probably because the number of characters in my two patterns is different.</p>\n\n<p>Is there a way to substitute patterns of different size using some other piece of code ? Thanks a lot.</p>\n"}, {"tags": ["perl", "split"], "comments": [{"owner": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "edited": false, "score": 0, "creation_date": 1434132279, "post_id": 30809005, "comment_id": 49667150, "body": "<code>split</code> is best used when you have a fixed number of fields from line to line.  You don&#39;t here.  A regex is better."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1434131976, "creation_date": 1434131976, "answer_id": 30809448, "question_id": 30809005, "link": "https://stackoverflow.com/questions/30809005/perl-split-to-grab-time-in-the-string/30809448#30809448", "title": "perl split to grab time in the string", "body": "<pre><code>my $secs = 0;\nwhile ($output =~ /running time\\s+(?:(\\d+):)?(\\d+(?:\\.\\d+)?)/g) {\n    $secs += $1*60 if $1;\n    $secs += $2;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 1655685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6ada486f4a073fcda747a9cb5788896?s=128&d=identicon&r=PG", "display_name": "cuaspectcox", "link": "https://stackoverflow.com/users/1655685/cuaspectcox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 30809448, "answer_count": 1, "score": 0, "last_activity_date": 1434131976, "creation_date": 1434130295, "last_edit_date": 1434131811, "question_id": 30809005, "link": "https://stackoverflow.com/questions/30809005/perl-split-to-grab-time-in-the-string", "title": "perl split to grab time in the string", "body": "<p>Current we have a shared software, the purpose of the script is to collect all the using time for each user. To do this, I want to find the log file by user and grab the rows which record the running time and add it up to a final number for each user.</p>\n\n<ol>\n<li>The code is written in Perl.</li>\n<li>I have all userid saved in one file say userlist</li>\n<li><p>In a loop, for each userid to get all time related rows and saved in one variable.</p>\n\n<pre><code>my $output = `find / -name \"$userID\" -print0 | xargs -0 grep 'running time' ` ; \n</code></pre></li>\n</ol>\n\n<p>The content in <code>$output</code> will be like following:</p>\n\n<pre><code>logPath:Time INFO  [XXX] :user -       running time           1.75 seconds\nlogPath:Time INFO  [XXX] :user -       running time           0.34 seconds\nlogPath:Time INFO  [XXX] :user -       running time           21.15 seconds\nlogPath:Time INFO  [XXX] :user -       running time           43:10.83\nlogPath:Time INFO  [XXX] :user -       running time           10:50.77\n</code></pre>\n\n<p>The question for me is that: how should I wrote the split function or use some other ways to sum up these times? 43:10.83 is 43 mins and 10.83 seconds.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1434127110, "post_id": 30808069, "comment_id": 49664247, "body": "Could you post a (simplified) input sample?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1434128217, "last_edit_date": 1434128217, "creation_date": 1434127369, "answer_id": 30808223, "question_id": 30808069, "link": "https://stackoverflow.com/questions/30808069/perl-making-a-script-as-efficient-as-a-perl-one-liner/30808223#30808223", "title": "perl : making a script as efficient as a perl one-liner", "body": "<p>If I understand correct, you want to be able to do</p>\n\n<pre><code>~/Tools/perl/edif_extr_cell.pl design.edif nmos1p8v | myfilter\n</code></pre>\n\n<p>Ideally, you'd merge the two Perl scripts into one rather than having one script launch two instances of Perl, but this turns out to be rather hard because of the change to <code>$/</code> (via <code>-00</code>) and because you insert newlines in the first filter.</p>\n\n<p>The simplest answer:</p>\n\n<pre><code>#!/bin/sh\nperl -pe's/^/\\n/ if /portImplementation|figure\\s+device/' |\n   perl -00ne'print if /portImplementation/'\n</code></pre>\n\n<p>It appears that you were trying to write the equivalent of that <code>sh</code> script in Perl. It would look like the following:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse IPC::Open qw( open3 );\n\n# open3 has issues with lexical file handles.\n\npipe(local *PIPE_READER, local *PIPE_WRITER)\n   or die($!);\n\nmy $pid1 = open3('&lt;&amp;STDIN', '&gt;&amp;PIPE_WRITER', '&gt;&amp;STDERR',\n   'perl', '-pes/^/\\n/ if /portImplementation|figure\\s+device/');\n\nmy $pid2 = open3('&lt;&amp;PIPE_READER', '&gt;&amp;STDOUT', '&gt;&amp;STDERR',\n   'perl', '-00neprint if /portImplementation/');\n\nwaitpid($pid1);\nwaitpid($pid2);\n</code></pre>\n\n<p>I'd normally recommend IPC::Run3 or IPC::Run for launching and interfacing with child processes, but low-level <code>open3</code> does the trick nicely in this particular situation.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1434129064, "post_id": 30808505, "comment_id": 49665396, "body": "What about the effect of paragraph mode (<code>-00</code>)? You need to flush the buffer on empty lines."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1434140655, "post_id": 30808505, "comment_id": 49671339, "body": "@ikegami: In the input file, the only empty lines were the ones created by the previous substitution."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1434140939, "post_id": 30808505, "comment_id": 49671439, "body": "I don&#39;t believe that&#39;s true in general, or even in the OP&#39;s case. The code seems clearly designed to avoid printing other elements at the same level as <code>portImplementation</code>"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1434141287, "post_id": 30808505, "comment_id": 49671576, "body": "@ikegami: That&#39;s why I asked for sample input."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 0, "last_activity_date": 1434128404, "creation_date": 1434128404, "answer_id": 30808505, "question_id": 30808069, "link": "https://stackoverflow.com/questions/30808069/perl-making-a-script-as-efficient-as-a-perl-one-liner/30808505#30808505", "title": "perl : making a script as efficient as a perl one-liner", "body": "<p>I downloaded a random EDIF file from <a href=\"https://raw.githubusercontent.com/dhirajt/common-digital-gates/master/NOR_Gate/design.edif\" rel=\"nofollow\">GitHub</a>, running the following script on it gives the same output as your code:</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nmy @buffer;\nmy $found;\nmy $prepend = q();\n\nwhile (&lt;&gt;) {\n\n    if (/portImplementation|figure\\s+device/) {\n        if ($found &amp;&amp; @buffer) {\n            print $prepend, @buffer;\n            $prepend = \"\\n\";\n        }\n        undef $found;\n        @buffer = ();\n    }\n\n    $found ||= /portImplementation/;\n    push @buffer, $_;\n}\n\n# Don't forget to output the last paragraph!\nprint $prepend, @buffer if $found &amp;&amp; @buffer;\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 4386691, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/862dd6e0f0a133e5d68ecf118d7e888d?s=128&d=identicon&r=PG", "display_name": "azpiuser", "link": "https://stackoverflow.com/users/4386691/azpiuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1434128404, "creation_date": 1434126848, "question_id": 30808069, "link": "https://stackoverflow.com/questions/30808069/perl-making-a-script-as-efficient-as-a-perl-one-liner", "title": "perl : making a script as efficient as a perl one-liner", "body": "<p>I'm able to do this on the command line and it works :</p>\n\n<pre><code>~/Tools/perl/edif_extr_cell.pl design.edif nmos1p8v | perl -p -e 's/^/\\n/ if /portImplementation|figure\\s+device/;' | perl -n -000 -e 'print if /portImplementation/;'\n</code></pre>\n\n<p>(basically, extracting a section of the EDIF file).</p>\n\n<p>Now, I want to make a utility of this. And my script is below. Question : can this code be more efficient? If feel like it's very inelegant. I could pipe streams easily on the command line but, in a script, I feel lost.</p>\n\n<pre><code>#!/usr/bin/perl -w -p\n\nBEGIN{ $file = '';}\n\ns/^/\\n/ if /portImplementation|figure\\s+device/;\n$file .= $_;\n\nEND{ \n    $cmd = q{\\rm -f /tmp/dump}.$$.'.txt';\n    system( $cmd );\n    open( OUT, \"&gt;/tmp/dump$$.txt\");\n    print OUT $file;\n    close OUT;\n    $out = `perl -n -000 -e 'print if /portImplementation/;' /tmp/dump$$.txt`;\n    system( $cmd );\n    print $out;\n}\n</code></pre>\n"}, {"tags": ["perl", "catalyst", "dbix-class"], "owner": {"reputation": 175, "user_id": 2501114, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/11828669ae1ad44e7334fc2b90d721c1?s=128&d=identicon&r=PG", "display_name": "Andrey Ch", "link": "https://stackoverflow.com/users/2501114/andrey-ch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1434120623, "creation_date": 1434119920, "last_edit_date": 1434120623, "question_id": 30805774, "link": "https://stackoverflow.com/questions/30805774/catalyst-schema-trait-withcurrentuser-some-objects-from-old-some-from-cloned-s", "title": "Catalyst schema trait WithCurrentUser: some objects from old, some from cloned schema", "body": "<p>I have a proof-of-concept app that does the following:</p>\n\n<ul>\n<li>In AuthTest::Schema it preloads authentication rules into an object var.</li>\n<li>In AuthTest::Model::DB uses WithCurrentUser trait to have the current user set on the schema object with every web request.</li>\n<li>On every DB query, it checks (by subclassing ResultSet) whether the current user is allowed to perform the requested action.</li>\n<li>In controller code, I also explicitly call <code>$user-&gt;isAccessAllowed()</code> (which chains to the internal access control check class AuthorizationResolver).</li>\n</ul>\n\n<p>The problem is: some DB objects in the app seem to have been created via the Schema with WithCurrentUser not initialized, and some with it initialized. E.g. the <code>$c-&gt;user</code> itself seems to have been created via the Schema without the trait WithCurrentUser.</p>\n\n<p>I.e. when I call <code>$user-&gt;isAccessAllowed()</code>, which in turn calls AuthorizationResolver with <code>$user-&gt;result_source-&gt;schema</code>, this schema has current_user set to <code>undef</code>. On the other hand, when AuthorizationResolver is called from within ResultSet that I have just created from <code>$c-&gt;model('DB::Author')</code>, <code>current_user</code> in the schema is correctly set to the current user.</p>\n\n<p>I.e., it seems that the user object is created (by <code>$c-&gt;find_user</code> or restored from session) from the old copy of schema that doesn't contain the WithCurrentUser trait. While any new calls to <code>$c-&gt;model()</code> create objects from the new clone.</p>\n\n<p>I work this around currently by explicitly supplying the AuthorizationResolver with the user object when <code>$user-&gt;isAllowedAccess()</code> is called, but clearly the whole thing may break at another place when there are two copies of the Schema object.</p>\n\n<p>Ideas welcome.</p>\n"}, {"tags": ["c++", "bash", "perl"], "comments": [{"owner": {"reputation": 15695, "user_id": 682404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxO2o.png?s=128&g=1", "display_name": "xxbbcc", "link": "https://stackoverflow.com/users/682404/xxbbcc"}, "edited": false, "score": 0, "creation_date": 1434118995, "post_id": 30805295, "comment_id": 49659111, "body": "Use a regex - since this is for a specifc bit of code (not a general case of finding something), it&#39;s very simple to whip up a regex that finds a number between two known symbols."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5000825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l2Pnl.jpg?s=128&g=1", "display_name": "insomniacjunkie", "link": "https://stackoverflow.com/users/5000825/insomniacjunkie"}, "edited": false, "score": 0, "creation_date": 1434120154, "post_id": 30805722, "comment_id": 49659833, "body": "What happened to the other post? I suppose that guy deleted it. Anyway he had posted:     perl -i.bak -ple &#39;if(/FT_BAR,/){@a=split(&quot;,&quot;); $a[1]++; s/$_/join(&quot;, &quot;,@a,)/e;}&#39; filename.cpp"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 53, "user_id": 5000825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l2Pnl.jpg?s=128&g=1", "display_name": "insomniacjunkie", "link": "https://stackoverflow.com/users/5000825/insomniacjunkie"}, "edited": false, "score": 0, "creation_date": 1434120194, "post_id": 30805722, "comment_id": 49659849, "body": "That&#39;ll probably work, yes. I don&#39;t think splitting is really necessary though."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1434120211, "post_id": 30805722, "comment_id": 49659870, "body": "I did delete it. I noticed it was incorrect (missing a comma). I was using split instead of what Sobrique did and was working on a fix. This post is exactly what I was nearly left with and is a more efficient one-liner :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434121390, "post_id": 30805722, "comment_id": 49660631, "body": "<code>s&#47;$_&#47;join(&quot;, &quot;,@a,)&#47;e</code> is generally written <code>$_ = join &#39;, &#39;, @a</code> (unless <code>$_</code> contains regex metacharacters, in which case this won&#39;t work anyway)"}, {"owner": {"reputation": 53, "user_id": 5000825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l2Pnl.jpg?s=128&g=1", "display_name": "insomniacjunkie", "link": "https://stackoverflow.com/users/5000825/insomniacjunkie"}, "edited": false, "score": 0, "creation_date": 1434121500, "post_id": 30805722, "comment_id": 49660710, "body": "The one-liner with the split worked, but yes it was missing the comma... Sobrique&#39;s one-liner spits out an error &quot;Can&#39;t open perl script &quot;s/FT_BAR, (\\d+),/&quot;FT_BAR, &quot;.($1+1).&quot;,&quot;/eg;&quot;: No such file or directory. Use -S to search $PATH for it.&quot;"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1434121660, "post_id": 30805722, "comment_id": 49660802, "body": "That sound like missing the <code>-e</code> flag."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1434121842, "post_id": 30805722, "comment_id": 49660919, "body": "You could save that repetition with <code>s&#47;FT_BAR, \\K(\\d+)(?=,)&#47;$1+1&#47;e</code>. And the <code>&#47;g</code> modifier is unnecessary. And I don&#39;t know what <code>-n</code> <i>and</i> <code>-p</code> together will do, but you certainly don&#39;t need both!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1434122214, "post_id": 30805722, "comment_id": 49661159, "body": "The <code>-e</code> option is missing in your own code, because perl will take <code>ne</code> as a parameter for <code>-i</code>. So you have written <code>perl -i&#39;ne&#39; -p &#39;...&#39;</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1434122677, "post_id": 30805722, "comment_id": 49661473, "body": "Well spotted. I thought tidying it up would help, but missed that :/"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1434122658, "last_edit_date": 1434122658, "creation_date": 1434119754, "answer_id": 30805722, "question_id": 30805295, "link": "https://stackoverflow.com/questions/30805295/find-and-increment-a-number-in-cpp-source/30805722#30805722", "title": "Find and Increment a Number in cpp Source", "body": "<p>Perl has the <code>e</code> regex flag for <code>evaluate</code>. </p>\n\n<pre><code>use strict;\nuse warnings;\n\nwhile ( &lt;DATA&gt; ) {\n    s/FT_BAR, (\\d+),/\"FT_BAR, \".($1+1).\",\"/eg;\n    print;\n}\n\n__DATA__\nFT_BAR, 1,\n</code></pre>\n\n<p>You can turn this into a one liner:</p>\n\n<pre><code>perl -pi.bak -e 's/FT_BAR, (\\d+),/\"FT_BAR, \".($1+1).\",\"/e;' test_re.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 5000825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l2Pnl.jpg?s=128&g=1", "display_name": "insomniacjunkie", "link": "https://stackoverflow.com/users/5000825/insomniacjunkie"}, "edited": false, "score": 0, "creation_date": 1434744318, "post_id": 30806365, "comment_id": 49927406, "body": "I&#39;d like to note that out of the suggested solutions, this is the solution that I ended up actually using. Thank you!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1434121574, "creation_date": 1434121574, "answer_id": 30806365, "question_id": 30805295, "link": "https://stackoverflow.com/questions/30805295/find-and-increment-a-number-in-cpp-source/30806365#30806365", "title": "Find and Increment a Number in cpp Source", "body": "<p>How about</p>\n\n<pre><code>perl -pe's/(\\d+)/$1+1/e if /FT_BAR, \\d+,/' foo.cpp &gt; new.cpp\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5000825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l2Pnl.jpg?s=128&g=1", "display_name": "insomniacjunkie", "link": "https://stackoverflow.com/users/5000825/insomniacjunkie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 30806365, "answer_count": 2, "score": -2, "last_activity_date": 1434122658, "creation_date": 1434118681, "question_id": 30805295, "link": "https://stackoverflow.com/questions/30805295/find-and-increment-a-number-in-cpp-source", "title": "Find and Increment a Number in cpp Source", "body": "<p>I'd like to preface that I am unable to make changes to the underlying source code. This is code that gets checked out for each project for a team and I cannot make any changes at this time.</p>\n\n<p>Okay so essentially, in a particular .cpp file, let's say foo.cpp, there is a unique line somewhere in the middle that reads:</p>\n\n<pre><code>FT_BAR, 1,\n</code></pre>\n\n<p>where 1 could be any number (but is going to be 1,2,3,4,5... practically never anything higher)...</p>\n\n<p>I'd like to have a Bash or Perl script that allows me to automatically find this number and increase it by one. For what purpose you may ask... well, it would save me precious seconds multiple times per day and spare me a great deal of tedium endured by opening and closing this file to increase this number.</p>\n\n<p>What is the best approach to this problem? I'm sure I will be embarrassed by a ridiculously simple one-line solution or some standard Unix tool that does exactly this, but I've been unable to find this so please forgive me if this is the case.</p>\n"}, {"tags": ["perl", "moose", "mojolicious"], "comments": [{"owner": {"reputation": 862, "user_id": 3586150, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1f0969599955a953e592034929ed7a23?s=128&d=identicon&r=PG", "display_name": "Neil H Watson", "link": "https://stackoverflow.com/users/3586150/neil-h-watson"}, "edited": false, "score": 0, "creation_date": 1434119479, "post_id": 30804829, "comment_id": 49659391, "body": "Check on the Mojolicious Google group or #mojo on Perl&#39;s IRC servers."}, {"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "reply_to_user": {"reputation": 862, "user_id": 3586150, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1f0969599955a953e592034929ed7a23?s=128&d=identicon&r=PG", "display_name": "Neil H Watson", "link": "https://stackoverflow.com/users/3586150/neil-h-watson"}, "edited": false, "score": 3, "creation_date": 1434120284, "post_id": 30804829, "comment_id": 49659923, "body": "Thanks. I&#39;m actually on IRC so that would be my next move, but I thought it would be helpful to document the answer here for those who aren&#39;t on IRC."}], "answers": [{"comments": [{"owner": {"reputation": 48744, "user_id": 40468, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/43722cb1e955874a8eb721e9dfe101d1?s=128&d=identicon&r=PG", "display_name": "Ether", "link": "https://stackoverflow.com/users/40468/ether"}, "edited": false, "score": 2, "creation_date": 1434387610, "post_id": 30809096, "comment_id": 49745333, "body": "If you are using Moose to extend a non-Moose class, you really ought to use MooseX::NonMoose to avoid clashes in the constructor (among other issue)."}], "tags": [], "owner": {"reputation": 62484, "user_id": 20745, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dc5d9e7efea07afc78d5408680438507?s=128&d=identicon&r=PG", "display_name": "friedo", "link": "https://stackoverflow.com/users/20745/friedo"}, "is_accepted": true, "score": 7, "last_activity_date": 1434130609, "creation_date": 1434130609, "answer_id": 30809096, "question_id": 30804829, "link": "https://stackoverflow.com/questions/30804829/do-mojolicious-and-moose-play-well-together/30809096#30809096", "title": "Do Mojolicious and Moose play well together?", "body": "<p>In my experience, they work fine together. I've successfully built Mojolicious apps with Moose (and Moo should work fine as well.)</p>\n\n<p>Moose can extend the base Mojolicious controller class and then you can do whatever usual Moose things you want. Here's an example:</p>\n\n<pre><code>package MyApp {\n    use Moose;\n    extends 'Mojolicious';\n    with 'MyApp::Role::Whatever';\n\n    sub startup { \n        my $self = shift;\n        my $r = $self-&gt;routes;\n        $r-&gt;get('/')-&gt;to('foo#default');\n    }\n}\n\npackage MyApp::Foo {\n    use Moose;\n    extends 'Mojolicious::Controller';\n\n    sub default {\n        my $self = shift;\n        $self-&gt;render( text =&gt; \"Helloooooo!!\" );\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 587, "user_id": 3168714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EMTiR.jpg?s=128&g=1", "display_name": "NickJHoran", "link": "https://stackoverflow.com/users/3168714/nickjhoran"}, "is_accepted": false, "score": 3, "last_activity_date": 1434402171, "creation_date": 1434402171, "answer_id": 30854933, "question_id": 30804829, "link": "https://stackoverflow.com/questions/30804829/do-mojolicious-and-moose-play-well-together/30854933#30854933", "title": "Do Mojolicious and Moose play well together?", "body": "<p>They definitely play nicely.  I've built an API that runs on a cluster of 20 servers.  It's a mojo app that also uses moose classes which consume multiple roles.</p>\n\n<p>The approach I've taken is to layer the application properly, right down to the storage layer.  In that respect mojo is only really needed at the upper levels in the stack.  Early on I create a moose-based request object that is then pushed down the stack.  Lower down, a moose-based response object is created which passes the response back to the upper levels of the stack.  Finally mojo takes over and handles the final json response.</p>\n\n<p>We're pushing a lot of production traffic through the stack and it performs brilliantly.  One thing I did was to make sure that I use XS versions of modules where possible as this boosted performance of the stack.</p>\n"}, {"tags": [], "owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "is_accepted": false, "score": 7, "last_activity_date": 1482360342, "creation_date": 1482360342, "answer_id": 41273188, "question_id": 30804829, "link": "https://stackoverflow.com/questions/30804829/do-mojolicious-and-moose-play-well-together/41273188#41273188", "title": "Do Mojolicious and Moose play well together?", "body": "<p>Since the time that I initially asked this question, we've moved some Mojo + Moose code into production.  There are some caveats which I will share here.  This answer was actually written by Florian Ragwitz.  I'm posting on his behalf.</p>\n\n<p>Mojolicious and Moose can play well together, but some care has to be taken for things to work well, and there are some caveats.</p>\n\n<p>It's important that Moose's constructor is used for creating new objects. Using\n<code>MooseX::NonMoose</code> is an easy way to ensure that. Without calling into Moose\nduring object construction, many Moose features such as <code>BUILDARGS</code>, <code>BUILD</code>,\nattribute type constraint checking, and eager builders won't work.</p>\n\n<p><code>MooseX::NonMoose</code> will also delegate to the original <code>Mojolicious::Controller</code>\nconstructor, which has the behaviour of just blessing the constructor arguments\nprovided into a hash reference. This might result in some odd results.</p>\n\n<p>For example:</p>\n\n<pre><code>package MyController;\n\nuse Moose;\nuse MooseX::NonMoose;\n\nextends 'Mojolicious::Controller';\n\nhas foo =&gt; (init_arg =&gt; 'bar');\n</code></pre>\n\n<p>Later on...</p>\n\n<pre><code>MyController-&gt;new(bar =&gt; 42) # bless { foo =&gt; 42, bar =&gt; 42 }, 'MyController'\n</code></pre>\n\n<p>Note how the resulting blessed hash reference contains the keys <code>foo</code> and \n<code>bar</code>, rather than just <code>bar</code> as you'd expect from a regular Moose class. This\nusually isn't a problem as long as you don't intend to use object slots with\nthe same name as another attribute's <code>init_arg</code>.</p>\n\n<p>There are also limitations on what Moose extensions can be used. Mojo requires hash-based instances, so you won't be able to use any of the non-hash-based meta instances Moose offers, like <code>MooseX::GlobRef</code> and <code>MooseX::ArrayRef</code>. <code>MooseX::StrictConstructor</code> also won't work in\nthis environment, because Moose can't tell which constructor arguments were\nintended to be consumed by the Mojo constructor.</p>\n\n<p>Overall, combining Mojolicious and Moose should work pretty well in practice as\nlong as you're aware of the small caveats and are OK with not being able to use\ncertain Moose extensions.</p>\n"}], "owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1194, "favorite_count": 4, "accepted_answer_id": 30809096, "answer_count": 3, "score": 10, "last_activity_date": 1482360342, "creation_date": 1434117244, "question_id": 30804829, "link": "https://stackoverflow.com/questions/30804829/do-mojolicious-and-moose-play-well-together", "title": "Do Mojolicious and Moose play well together?", "body": "<p>I'm working on a Mojo app and I'd like to be able to consume some Moose roles to make my life easier.</p>\n\n<p>On CPAN I see <a href=\"https://metacpan.org/pod/MojoX::Moose::Controller\">MojoX::Moose::Controller</a>, which has very simple internals. I don't see much else on using Moose with Mojo.  Any potential issues I should be aware of or is it just smooth sailing?</p>\n"}, {"tags": ["perl", "activeperl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1434128815, "post_id": 30803638, "comment_id": 49665251, "body": "Well, any virtual unix machine will do, not just cygwin."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1434130596, "post_id": 30803638, "comment_id": 49666258, "body": "@ikegami: cygwin is not a virtual machine, it is a linux emulation layer and environment in Windows"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1434130707, "post_id": 30803638, "comment_id": 49666325, "body": "@ysth, And that&#39;s the definition of a virtual machine. &quot;In computing, a virtual machine (VM) is an emulation of a particular computer system. &quot;"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1434132418, "post_id": 30803638, "comment_id": 49667222, "body": "it does not therefore follow that an emulation of a particular computer system is a virtual machine.  cygwin is not a virtual machine."}], "tags": [], "owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "is_accepted": false, "score": 2, "last_activity_date": 1434113671, "creation_date": 1434113671, "answer_id": 30803638, "question_id": 30803190, "link": "https://stackoverflow.com/questions/30803190/perl-module-expect-pm-is-not-available-for-windows-64-bit-system/30803638#30803638", "title": "Perl module expect.pm is not available for windows 64 bit system", "body": "<p>According to <a href=\"http://search.cpan.org/~rgiersig/Expect-1.15/Expect.pod#Can_I_use_this_module_with_ActivePerl_on_Windows?\" rel=\"nofollow\">CPAN</a> the only way for this to work in Windows is through <a href=\"https://www.cygwin.com/\" rel=\"nofollow\">Cygwin</a>.</p>\n\n<p>This appears to be due to a dependency on <a href=\"http://search.cpan.org/~toddr/IO-Tty-1.12/Tty.pm\" rel=\"nofollow\">IO:tty</a>, which has the same suggestion to use it through Cygwin.  </p>\n"}, {"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1434124852, "post_id": 30805645, "comment_id": 49662848, "body": "would have been better as a comment or edit to Degustaf&#39;s answer"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1434125376, "post_id": 30805645, "comment_id": 49663201, "body": "@ysth, Explaining that it can&#39;t possibly run on Windows is not a comment when the question asks if he needs to switch to Linux to use the module. As for duplicating Degustaf&#39;s answer, I didn&#39;t see any other answers when I posted. Besides, i don&#39;t care for his answer that &quot;you need to use another OS if you want it to work in Windows&quot;."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1434128363, "post_id": 30805645, "comment_id": 49664980, "body": "well, then, maybe it should be a comment on the question.  because it isn&#39;t an answer to (paraphrasing only lightly) &quot;how do I use Expect.pm with ActivePerl, or do I need to switch to Linux&quot;, which Degustaf&#39;s answer does nicely answer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1434128933, "post_id": 30805645, "comment_id": 49665337, "body": "@ysth, Why do you think I need to spell out that you can&#39;t use a module on Windows after explaining that the the module relies on features Windows doesn&#39;t have? but fine, I did it."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1434128877, "last_edit_date": 1434128877, "creation_date": 1434119584, "answer_id": 30805645, "question_id": 30803190, "link": "https://stackoverflow.com/questions/30803190/perl-module-expect-pm-is-not-available-for-windows-64-bit-system/30805645#30805645", "title": "Perl module expect.pm is not available for windows 64 bit system", "body": "<p>It won't run on Windows. Expect creates a pseudo-tty to try fool the child program into not buffering its output. Windows doesn't have ttys.</p>\n"}], "owner": {"reputation": 59, "user_id": 4622472, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh5.googleusercontent.com/-1XuvV7i6ktg/AAAAAAAAAAI/AAAAAAAADFU/UYCyey46VaQ/photo.jpg?sz=128", "display_name": "Bhushan Patil", "link": "https://stackoverflow.com/users/4622472/bhushan-patil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 760, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1434128877, "creation_date": 1434112386, "last_edit_date": 1434112556, "question_id": 30803190, "link": "https://stackoverflow.com/questions/30803190/perl-module-expect-pm-is-not-available-for-windows-64-bit-system", "title": "Perl module expect.pm is not available for windows 64 bit system", "body": "<p>I am using Activeperl for my windows 64 bit machine, I want to use <code>expect.pm</code> module for windows 64 bit, but getting these errors:</p>\n\n<pre><code>Can't locate Expect.pm in @INC (you may need to install the Expect module) (@INC contains: D:/Software/eclips/.metadata/.plugins/org.epic.debug \n</code></pre>\n\n<p>I have googled it many are saying this module is not supported in windows 64 bit. Can somebody guide me how can I install it, if not so do I need to shift Linux environment?</p>\n"}, {"tags": ["perl", "xpath", "xml-parsing", "libxml2", "xml-libxml"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1434116143, "post_id": 30802929, "comment_id": 49657270, "body": "Note: <code>$context-&gt;registerNs( &#39;u&#39; =&gt; &#39;&quot;urn:ietf:params:xml:ns:netconf:base:1.0&#39; );</code> is useless since you override the association of <code>u</code> in the next statement."}, {"owner": {"reputation": 121, "user_id": 3922604, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7714622ce4fd398ca41ac07bc016bafa?s=128&d=identicon&r=PG&f=1", "display_name": "user3922604", "link": "https://stackoverflow.com/users/3922604/user3922604"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1434116419, "post_id": 30802929, "comment_id": 49657451, "body": "thanks for the advice. I change it to $context-&gt;registerNs( &#39;w&#39; =&gt; &#39;&quot;urn:ietf:params:xml:ns:netconf:base:1.0&#39; )"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1434119456, "post_id": 30802929, "comment_id": 49659375, "body": "If you don&#39;t need it, you can simply remove it. In fact, in your sample, there are no nodes in the <code>urn:ietf:params:xml:ns:netconf:base:1.0</code> namespace."}], "answers": [{"comments": [{"owner": {"reputation": 45496, "user_id": 436560, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/2GESV.jpg?s=128&g=1", "display_name": "Lajos Arpad", "link": "https://stackoverflow.com/users/436560/lajos-arpad"}, "edited": false, "score": 1, "creation_date": 1434116820, "post_id": 30803218, "comment_id": 49657738, "body": "You should accept this answer if it solved your problem."}], "tags": [], "owner": {"reputation": 121, "user_id": 3922604, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7714622ce4fd398ca41ac07bc016bafa?s=128&d=identicon&r=PG&f=1", "display_name": "user3922604", "link": "https://stackoverflow.com/users/3922604/user3922604"}, "is_accepted": false, "score": 0, "last_activity_date": 1434112507, "creation_date": 1434112507, "answer_id": 30803218, "question_id": 30802929, "link": "https://stackoverflow.com/questions/30802929/access-sub-child-value-by-libxmlxpathcontext/30803218#30803218", "title": "access sub child value by libxml::xpathcontext", "body": "<p>I got it . I just need to put u for each element</p>\n\n<pre><code>for my $node ($context-&gt;findnodes('//u:inner/u:name')\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 3922604, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7714622ce4fd398ca41ac07bc016bafa?s=128&d=identicon&r=PG&f=1", "display_name": "user3922604", "link": "https://stackoverflow.com/users/3922604/user3922604"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434112507, "creation_date": 1434111627, "last_edit_date": 1434112323, "question_id": 30802929, "link": "https://stackoverflow.com/questions/30802929/access-sub-child-value-by-libxmlxpathcontext", "title": "access sub child value by libxml::xpathcontext", "body": "<p>I want to access the value of sub child and modify it. This is my xml</p>\n\n<pre><code> &lt;config xmlns:xc=\"urn:ietf:params:xml:ns:netconf:base:1.0\"&gt;\n&lt;outer1 xmlns=\"http://blablabla\" &gt;\n  &lt;inner&gt;\n    &lt;name&gt;\n        &lt;prenom&gt;Hello&lt;/prenom&gt;\n    &lt;/name&gt;\n    &lt;profession&gt;warrior&lt;/profession&gt;\n  &lt;/inner&gt;\n  &lt;inner&gt;\n    &lt;name&gt;\n        &lt;prenom&gt;Hello&lt;/prenom&gt;\n    &lt;/name&gt;\n    &lt;org&gt;wwf&lt;/org&gt;\n    &lt;profession&gt;warrior&lt;/profession&gt;\n  &lt;/inner&gt;\n&lt;/outer1&gt;\n</code></pre>\n\n<p></p>\n\n<p>and this is my code</p>\n\n<pre><code>my $dom = XML::LibXML-&gt;load_xml( location =&gt; $xml);\nmy $context = XML::LibXML::XPathContext-&gt;new( $dom-&gt;documentElement() );\n$context-&gt;registerNs( 'u' =&gt; '\"urn:ietf:params:xml:ns:netconf:base:1.0' );\n$context-&gt;registerNs( 'u' =&gt; 'http://blablabla');\n\nfor my $node ($context-&gt;findnodes('//u:inner') ) {\n    for my $node2 ($node-&gt;findnodes('//u:name') ) {\n         #if (($node-&gt;findnodes('u:name', $node2) -&gt;size) != 1) {next;}\n         my ($mh)   = $node-&gt;findnodes('u:prenom', $node2);\n         my $size  = $node-&gt;findnodes('u:prenom', $node2) -&gt;size;\n         print \"size $size\";\n         if ($size != 1) {next;}\n         $mh -&gt;removeChildNodes();\n         $mh-&gt;appendText('World12456');\n         print \"mh = $mh\";\n    }\n}\n</code></pre>\n\n<p>I want to access prenom and modify it to 'World12456'. With currrent code; I got this error XPath error : Undefined namespace prefix\n error : xmlXPathCompiledEval: evaluation failed. Then I tried different way</p>\n\n<pre><code>for my $node ($context-&gt;findnodes('//u:inner') ) {\n         my ($mh)   = $context-&gt;findnodes('u:name/prenom', $node);\n         my $size  = $context-&gt;findnodes('u:name/prenom', $node) -&gt;size;\n         print \"size $size\";\n         if ($size != 1) {next;}\n         $mh -&gt;removeChildNodes();\n         $mh-&gt;appendText('World12456');\n         print \"mh = $mh\";\n}\n</code></pre>\n\n<p>Then I get the size is 0 for both. It doesn't find the tag prenom. With </p>\n\n<pre><code>for my $node ($context-&gt;findnodes('//u:inner/name')\n</code></pre>\n\n<p>It displays nothing.</p>\n\n<p>I am sorry if this is duplicate but I don't find any link to access the sub child with xpathcontext yet. </p>\n"}, {"tags": ["xml", "perl", "xml-twig"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1434111895, "post_id": 30802600, "comment_id": 49654281, "body": "Testing if there are children sounds like a good idea."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1434114323, "post_id": 30803689, "comment_id": 49655938, "body": "It&#39;s pretty close (probably close enough for my needs). But it doesn&#39;t quite give the desired output, as it doesn&#39;t adjust the top level <code>some_content</code> node. (presumably due to the presence of children?)"}, {"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1434115912, "post_id": 30803689, "comment_id": 49657108, "body": "Drats! I missed this. And it looks like a bug. The handler is not called when the text is followed by an open tag. I&#39;ll check this we."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1434118708, "post_id": 30803689, "comment_id": 49658916, "body": "Possibly. I&#39;m not sure, because there&#39;s some oddities with <code>text</code> vs. <code>text_only</code>. It also seems to reformat in a way that isn&#39;t the indent format specified. (But I can live with that too)."}, {"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1434119310, "post_id": 30803689, "comment_id": 49659289, "body": "Duh! there&#39;s a simpler way: use <code>char_handler</code> (edited above)."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1434119446, "post_id": 30803689, "comment_id": 49659366, "body": "I take it that only works per character though? I&#39;m (ideally) looking for a more general case that lets me regex transform."}, {"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1434126860, "post_id": 30803689, "comment_id": 49664096, "body": "no, it works on the entire string (as sent by the parser though, so it will be called for non-significant whitespace, and if the content of an element includes a line return it will be called 3 times, one on the first line, once for the line return itself and one for the second line)"}], "tags": [], "owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "is_accepted": true, "score": 4, "last_activity_date": 1434119353, "last_edit_date": 1434119353, "creation_date": 1434113821, "answer_id": 30803689, "question_id": 30802600, "link": "https://stackoverflow.com/questions/30802600/xmltwig-set-text-without-clobbering-structure/30803689#30803689", "title": "XML::Twig - set_text without clobbering structure", "body": "<p>Instead of having the handler on <code>_all_</code>, try having it only on text elements: <code>#TEXT</code>, and change <code>text_only</code> to <code>text</code>. It should work. </p>\n\n<p><strong>update</strong>: Or use the <code>char_handler</code> option when you create the twig: <code>char_handler =&gt;  sub { uc shift },</code> instead of the handler.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1434119321, "creation_date": 1434119321, "answer_id": 30805535, "question_id": 30802600, "link": "https://stackoverflow.com/questions/30802600/xmltwig-set-text-without-clobbering-structure/30805535#30805535", "title": "XML::Twig - set_text without clobbering structure", "body": "<p>My current approach is to:</p>\n\n<ul>\n<li>iterate all the nodes.</li>\n<li><code>cut</code> all the children.</li>\n<li>amend the text. </li>\n<li><code>paste</code> all the children. </li>\n</ul>\n\n<p>This seems inefficient, but it does appear to work:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse XML::Twig;\nuse Data::Dumper;\n\nsub replace_text {\n    my ( $twig, $element ) = @_;\n\n    my $newtext = $element-&gt;text_only;\n    my @children;\n    foreach my $child ( $element-&gt;children ) {\n        if ( not $child-&gt;tag eq \"#PCDATA\" ) {\n            push( @children, $child-&gt;cut );\n        }\n    }\n    $newtext =~ tr/[a-z]/[A-Z]/;\n    $element-&gt;set_text($newtext);\n\n    $_-&gt;paste( 'last_child', $element ) for @children;\n}\n\nmy $twig =\n    XML::Twig-&gt;new( 'twig_handlers' =&gt; { '_all_' =&gt; \\&amp;replace_text, } );\n$twig-&gt;parse( \\*DATA );\n\nprint \"Result:\\n\";\n$twig-&gt;print;\n\n__DATA__\n&lt;root&gt;\n    &lt;some_content&gt;fish\n        &lt;a_subnode&gt;morefish&lt;/a_subnode&gt;\n    &lt;/some_content&gt;\n    &lt;some_more_content&gt;cabbage&lt;/some_more_content&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>This turns my output into:</p>\n\n<pre><code>&lt;root&gt;&lt;some_content&gt;FISH\n        &lt;a_subnode&gt;MOREFISH&lt;/a_subnode&gt;&lt;/some_content&gt;&lt;some_more_content&gt;CABBAGE&lt;/some_more_content&gt;&lt;/root&gt;\n</code></pre>\n\n<p>So whilst it does transmogrify the nodes, it also for some reason, breaks the output format. </p>\n\n<p>Reparsing it:</p>\n\n<pre><code>XML::Twig -&gt; new ( 'pretty_print' =&gt; 'indented_a' ) -&gt; parse ( $twig -&gt; sprint ) -&gt; print;\n</code></pre>\n\n<p>Seems to do the trick. (Although double parsing just to reformat seems even less elegant)</p>\n\n<pre><code>&lt;root&gt;\n  &lt;some_content&gt;FISH\n        &lt;a_subnode&gt;MOREFISH&lt;/a_subnode&gt;&lt;/some_content&gt;\n  &lt;some_more_content&gt;CABBAGE&lt;/some_more_content&gt;\n&lt;/root&gt;\n</code></pre>\n"}], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 30803689, "answer_count": 2, "score": 4, "last_activity_date": 1434119353, "creation_date": 1434110523, "question_id": 30802600, "link": "https://stackoverflow.com/questions/30802600/xmltwig-set-text-without-clobbering-structure", "title": "XML::Twig - set_text without clobbering structure", "body": "<p>With <code>XML::Twig</code> using the <code>set_text</code> method - there is a warning:</p>\n\n<blockquote>\n  <p>set_text ($string)\n  Set the text for the element: if the element is a PCDATA, just set its text, otherwise cut all the children of the element and create a single PCDATA child for it, which holds the text.</p>\n</blockquote>\n\n<p>So if I want to do something simple, like - say - changing the case of all the text in my XML::Document:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $twig = XML::Twig-&gt;new(\n    'pretty_print'  =&gt; 'indented_a',\n    'twig_handlers' =&gt; {\n        '_all_' =&gt; sub {\n            my $newtext = $_-&gt;text_only;\n            $newtext =~ tr/[a-z]/[A-Z]/;\n            $_-&gt;set_text($newtext);\n        }\n    }\n);\n$twig-&gt;parse( \\*DATA );\n$twig-&gt;print;\n\n__DATA__\n&lt;root&gt;\n    &lt;some_content&gt;fish\n        &lt;a_subnode&gt;morefish&lt;/a_subnode&gt;\n    &lt;/some_content&gt;\n    &lt;some_more_content&gt;cabbage&lt;/some_more_content&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>This - because of <code>set_text</code> replacing children - gets clobbered into:</p>\n\n<pre><code>&lt;root&gt;&lt;/root&gt;\n</code></pre>\n\n<p>But if I focus on just one (bottom level) node (e.g. <code>a_subnode</code>) then it works fine. </p>\n\n<p>Is there an elegant way to replace/transform text within an element without clobbering the data structure below it? I mean, I can do test on the presence of children or something similar, but ... there seems like there should be a better way of doing this. (A different library maybe?)</p>\n\n<p>(And for the sake of clarity - this is my example of transliterating all the text in a document, my actual use case is rather more convoluted, but is still 'about' in place text tranformation). </p>\n\n<p>I'm considering perhaps a node cut/and/paste approach (cut all children, replace text, paste all children) but that seems to be an inefficient approach. </p>\n"}, {"tags": ["php", "perl"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4976845, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3kkdm-o5gD0/AAAAAAAAAAI/AAAAAAAABF4/-9GJCDh4I1s/photo.jpg?sz=128", "display_name": "Amit Aggarwal", "link": "https://stackoverflow.com/users/4976845/amit-aggarwal"}, "edited": false, "score": 0, "creation_date": 1434105845, "post_id": 30800973, "comment_id": 49650463, "body": "forget the $response_body this is xml data"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 3, "user_id": 4976845, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3kkdm-o5gD0/AAAAAAAAAAI/AAAAAAAABF4/-9GJCDh4I1s/photo.jpg?sz=128", "display_name": "Amit Aggarwal", "link": "https://stackoverflow.com/users/4976845/amit-aggarwal"}, "edited": false, "score": 0, "creation_date": 1434106881, "post_id": 30800973, "comment_id": 49651158, "body": "Yes. Parsing XML isn&#39;t hard, but going through <code>XML::Simple</code> makes it harder. I would suggest you roll back a bit, and just parse the XML directly."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1434107719, "post_id": 30800973, "comment_id": 49651682, "body": "OP is not asking about how to parse, he wants to know what XML::Simple does and if there is a php equivalent."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1434107914, "last_edit_date": 1434107914, "creation_date": 1434105353, "answer_id": 30800973, "question_id": 30800755, "link": "https://stackoverflow.com/questions/30800755/xmlin-function-of-perl-in-php/30800973#30800973", "title": "xmlin function of Perl in php", "body": "<p>What that is an import mechanism used by the <a href=\"http://search.cpan.org/~grantm/XML-Simple-2.20/lib/XML/Simple.pm\" rel=\"nofollow\"><code>XML::Simple</code></a> library to parse XML. The <code>XML::Simple</code> man page warns:</p>\n\n<blockquote>\n  <p>The use of this module in new code is discouraged. Other modules are available which provide more straightforward and consistent interfaces.</p>\n</blockquote>\n\n<p>This isn't a good approach to XML parsing though, so I wouldn't worry about it too much - look instead at <code>$response_body</code> - which will be some XML data - and how you process it to extract what you want. </p>\n\n<p>Without knowing what your source XML looks like though, it's impossible to say what <code>XMLin</code> will be returning. </p>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 0, "last_activity_date": 1434108030, "creation_date": 1434108030, "answer_id": 30801789, "question_id": 30800755, "link": "https://stackoverflow.com/questions/30800755/xmlin-function-of-perl-in-php/30801789#30801789", "title": "xmlin function of Perl in php", "body": "<p>The function <code>XMLIn</code> is exported from the <a href=\"https://metacpan.org/pod/XML::Simple\" rel=\"nofollow\">XML::Simple CPAN module</a>. It lets you convert an XML document/string to a Perl data structure. Both <code>KeyAttr</code> and <code>ForceArray</code> are configuration settings for the parser.</p>\n\n<p><a href=\"https://metacpan.org/pod/XML::Simple#ForceArray-names-in---important\" rel=\"nofollow\">Docs on <code>ForceArray</code></a>:</p>\n\n<blockquote>\n  <p>This alternative (and preferred) form of the 'ForceArray' option allows you to specify a list of element names which should always be forced into an array representation, rather than the 'all or nothing' approach above. [...]</p>\n</blockquote>\n\n<p><a href=\"https://metacpan.org/pod/XML::Simple#KeyAttr-list-in-out---important1\" rel=\"nofollow\">Docs on <code>KeyAttr</code></a>:</p>\n\n<blockquote>\n  <p>This alternative (and preferred) method of specifiying the key attributes allows more fine grained control over which elements are folded and on which attributes. For example the option 'KeyAttr => { package => 'id' } will cause any package elements to be folded on the 'id' attribute. No other elements which have an 'id' attribute will be folded at all. [...]</p>\n</blockquote>\n\n<p>A quick google gave me <a href=\"http://php.net/manual/en/simplexml.examples-basic.php\" rel=\"nofollow\">SimpleXML</a> as a PHP equivalent. I also found a <a href=\"http://blog.teamtreehouse.com/how-to-parse-xml-with-php5\" rel=\"nofollow\">blogpost that nicely describes how to use it</a>.</p>\n\n<p>You can use it in PHP like this:</p>\n\n<pre><code>&lt;?\n// ... $response_body should be there\n$config = new SimpleXMLElement($response_body);\n\nvar_dump($config);\n?&gt;\n</code></pre>\n\n<p>It makes sense to look at the XML document because the resulting data structure will probably be different in PHP than it was in Perl (not only because of hashes vs. arrays with named keys).</p>\n"}], "owner": {"reputation": 3, "user_id": 4976845, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3kkdm-o5gD0/AAAAAAAAAAI/AAAAAAAABF4/-9GJCDh4I1s/photo.jpg?sz=128", "display_name": "Amit Aggarwal", "link": "https://stackoverflow.com/users/4976845/amit-aggarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 508, "favorite_count": 0, "accepted_answer_id": 30801789, "answer_count": 2, "score": -1, "last_activity_date": 1434201468, "creation_date": 1434104738, "last_edit_date": 1434201468, "question_id": 30800755, "link": "https://stackoverflow.com/questions/30800755/xmlin-function-of-perl-in-php", "title": "xmlin function of Perl in php", "body": "<pre><code>my $config = XMLin($response_body, KeyAttr =&gt; { server =&gt; 'name' }, ForceArray =&gt; [ 'server', 'address' ]);\n</code></pre>\n\n<p>i don't understand what is <code>xmlin</code> , <code>keyattr</code> and <code>force array</code> \nplease tell me if there is some function in php</p>\n"}, {"tags": ["perl", "ubuntu", "reference", "storable"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1434103118, "post_id": 30800259, "comment_id": 49649026, "body": "Which line is home/VD/Cache.pm 347?"}, {"owner": {"reputation": 83, "user_id": 4008429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ecd5ad49d4d856001a89bce7489ffaf?s=128&d=identicon&r=PG&f=1", "display_name": "Darko1991", "link": "https://stackoverflow.com/users/4008429/darko1991"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1434103291, "post_id": 30800259, "comment_id": 49649130, "body": "return Storable::nfreeze($ret) if(defined $ret);"}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 4008429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ecd5ad49d4d856001a89bce7489ffaf?s=128&d=identicon&r=PG&f=1", "display_name": "Darko1991", "link": "https://stackoverflow.com/users/4008429/darko1991"}, "edited": false, "score": 0, "creation_date": 1434106932, "post_id": 30800677, "comment_id": 49651197, "body": "You are right about nfreeze an thaw, both are completely different. I need to leave line 347 in the original form: return Storable::thaw($ret) if(defined $ret); But this leaves me with my compatibility problem. Any suggestions how to fix  Byte order is not compatible at /usr/lib/perl/5.18/Storable.pm, at /home/VD/Cache.pm line 347. ???"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1434104895, "last_edit_date": 1434104895, "creation_date": 1434104480, "answer_id": 30800677, "question_id": 30800259, "link": "https://stackoverflow.com/questions/30800259/perl-error-not-a-reference/30800677#30800677", "title": "Perl error: not a reference", "body": "<p>So, \"not a reference\" means ... exactly what it says on the tin. Can you try printing the thingy with <code>Data::Dumper</code> from comments it's this line:</p>\n\n<pre><code>return Storable::nfreeze($ret) if(defined $ret)\n</code></pre>\n\n<p>So - what does:</p>\n\n<pre><code>print Dumper $ret; \n</code></pre>\n\n<p>produce? Is it a reference? </p>\n\n<p>I'm not so sure though that you're right about needing <code>nfreeze</code> instead of <code>thaw</code>, because they both do different things. <code>freeze</code> packs a variable; <code>thaw</code> unpacks it. So <code>nfreeze</code> can replace <code>freeze</code>. </p>\n\n<p>But the core purpose of doing this is to transfer your packed up scalar to another program on another architecture. Is this what you're doing? </p>\n\n<p>If so, can I suggest instead considering transferring it as <code>JSON</code> or <code>XML</code> instead? </p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1434119656, "creation_date": 1434119656, "answer_id": 30805682, "question_id": 30800259, "link": "https://stackoverflow.com/questions/30800259/perl-error-not-a-reference/30805682#30805682", "title": "Perl error: not a reference", "body": "<p>Go back to your original system, <code>thaw</code> then <code>nfreeze</code> the file there to fix it. </p>\n\n<pre><code>perl -MStorable=nstore,retrieve -e'nstore(retrieve($ARGV[0]), $ARGV[1])' file fixed\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 4008429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ecd5ad49d4d856001a89bce7489ffaf?s=128&d=identicon&r=PG&f=1", "display_name": "Darko1991", "link": "https://stackoverflow.com/users/4008429/darko1991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 592, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1434119656, "creation_date": 1434102982, "last_edit_date": 1434106941, "question_id": 30800259, "link": "https://stackoverflow.com/questions/30800259/perl-error-not-a-reference", "title": "Perl error: not a reference", "body": "<p>I recently migrated some Perl code from SunSolaris to a Linux(Ubuntu) box of 64 bit. After the migration <code>Storable.pm</code> is breaking with the following error: </p>\n\n<pre><code>Byte order is not compatible at /usr/lib/perl/5.18/Storable.pm, at /home/VD/Cache.pm line 347.\n</code></pre>\n\n<p>After some research on the internet I found that I need to use <code>nfreeze</code> instead of <code>thaw</code>, but now I receive the following error:</p>\n\n<pre><code>not a reference at /home/VD/Cache.pm line 347.\n</code></pre>\n\n<p>Any suggestions how to fix this? </p>\n\n<pre><code>    sub get\n    {\n      my($self, $type, $param_ref) = @_;\n       #return 1 if(!$self-&gt;{'INI'}{'sf.system.cache.enabled'});\n\nif($self-&gt;{'INI'}{'sf.system.cache.database.enabled'})\n{\n    ### DATABASE\n    my $param = $self-&gt;SF::Cache::convert_parameter($type, $param_ref);\n\n    if($self-&gt;SF::Cache::CACHE_TABLE_USERCONTENT &amp;&amp; $$param{'type'} == 2)\n    {\n        ### user-content\n        my $query = 'SELECT PARAM_CONTENT AS C, DATA AS D FROM    sf_cache_usercontent WHERE SITE=? AND PARAM_USER=?';\n        my $bindvar = { 1=&gt;$self-&gt;{'site'}, 2=&gt;$$param{'user'} };\n        my $sth = $self-&gt;db_select($query, $bindvar);\n        #print SF::Util::debug_dumpquery($query, $bindvar);\n        return undef if($self-&gt;{'Error'});\n\n        my %usercontent;\n        undef(%usercontent);\n        while(my $hashref = $self-&gt;db_fetch($sth))\n        {\n            $usercontent{$$hashref{'C'}} = $$hashref{'D'};# ? 1 : 0;\n        }\n\n        return \\%usercontent;\n    }\n    else\n    ### ******************************************************************************************************\n    {\n        my $ret = $self-&gt;SF::Cache::get_database('DATA', $param);\n\n        return Storable::nfreeze($ret) if(defined $ret);\n    }\n}\nelse\n{\n    ### FILESYSTEM\n    my $filename = $self-&gt;SF::Cache::filename($type, $param_ref);\n    if($filename &amp;&amp; -e $filename)\n    {\n        if($self-&gt;{'INI'}{'sf.system.cache.lock.enabled'} &amp;&amp; defined  &amp;lock_retrieve)\n        {\n            return lock_retrieve $filename;\n        }\n        else\n        {\n            return retrieve $filename;\n        }\n    }\n    else\n    {\n        $! = 0;\n    }\n}\nreturn undef;\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 1, "creation_date": 1434099573, "post_id": 30799105, "comment_id": 49646925, "body": "Add your code please."}, {"owner": {"reputation": 21, "user_id": 3234590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68ee5b0bcd415af44f59a9eb26710ee5?s=128&d=identicon&r=PG&f=1", "display_name": "Aks", "link": "https://stackoverflow.com/users/3234590/aks"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1434100182, "post_id": 30799105, "comment_id": 49647278, "body": "my $ssh = Net::SSH::Perl -&gt;new($remote_host,options ==&gt; [&quot;BatchMode yes&quot;], protocol ==&gt;2);"}, {"owner": {"reputation": 21, "user_id": 3234590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68ee5b0bcd415af44f59a9eb26710ee5?s=128&d=identicon&r=PG&f=1", "display_name": "Aks", "link": "https://stackoverflow.com/users/3234590/aks"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1434100226, "post_id": 30799105, "comment_id": 49647317, "body": "$ssh-&gt;login($remote_user, $remote_password)"}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1434100330, "post_id": 30799105, "comment_id": 49647378, "body": "Please add the code to your question using the edit function. Is the content of <code>$remote_user</code> and <code>$remote_password</code> correct?"}, {"owner": {"reputation": 21, "user_id": 3234590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68ee5b0bcd415af44f59a9eb26710ee5?s=128&d=identicon&r=PG&f=1", "display_name": "Aks", "link": "https://stackoverflow.com/users/3234590/aks"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1434100543, "post_id": 30799105, "comment_id": 49647508, "body": "yes , content is fine i checked it using connection on localhost."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 3234590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68ee5b0bcd415af44f59a9eb26710ee5?s=128&d=identicon&r=PG&f=1", "display_name": "Aks", "link": "https://stackoverflow.com/users/3234590/aks"}, "edited": false, "score": 0, "creation_date": 1434100086, "post_id": 30799167, "comment_id": 49647232, "body": "yes, true but i am able to login manually without script and messages displayed there also ."}, {"owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "reply_to_user": {"reputation": 21, "user_id": 3234590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68ee5b0bcd415af44f59a9eb26710ee5?s=128&d=identicon&r=PG&f=1", "display_name": "Aks", "link": "https://stackoverflow.com/users/3234590/aks"}, "edited": false, "score": 0, "creation_date": 1434100182, "post_id": 30799167, "comment_id": 49647277, "body": "@Aks Please add the code you are trying to use. Also you are able to login in the machine and message displays or you are trying to login in the machine and message displays."}, {"owner": {"reputation": 21, "user_id": 3234590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68ee5b0bcd415af44f59a9eb26710ee5?s=128&d=identicon&r=PG&f=1", "display_name": "Aks", "link": "https://stackoverflow.com/users/3234590/aks"}, "edited": false, "score": 0, "creation_date": 1434100345, "post_id": 30799167, "comment_id": 49647387, "body": "code added above, i am able to log into the machine manually and message displayes there also like below   ssh abc@10.123.121.11 , messgaes displayes and then password prompt also comes, so i am into the system. But same thing is i guess not being done by perl script , and i need to ignore those messages"}], "tags": [], "owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "is_accepted": false, "score": 1, "last_activity_date": 1434099512, "creation_date": 1434099512, "answer_id": 30799167, "question_id": 30799105, "link": "https://stackoverflow.com/questions/30799105/ssh-and-sftp-login-via-perl/30799167#30799167", "title": "Ssh and sftp login via perl", "body": "<p>You cannot just ignore these messages. These messages means that you need to provide <code>username</code> and <code>password</code> while doing ssh or sftp and also those username and password which are authorized to access the server. When you start providing them you will get access otherwise no access.</p>\n"}], "owner": {"reputation": 21, "user_id": 3234590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68ee5b0bcd415af44f59a9eb26710ee5?s=128&d=identicon&r=PG&f=1", "display_name": "Aks", "link": "https://stackoverflow.com/users/3234590/aks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1434102272, "creation_date": 1434099324, "last_edit_date": 1434102272, "question_id": 30799105, "link": "https://stackoverflow.com/questions/30799105/ssh-and-sftp-login-via-perl", "title": "Ssh and sftp login via perl", "body": "<p>I have Perl script which is doing ssh and sftp on remote server,i am getting error while running the script. Error says You are trying to access a restricted zone. Only Authorized users allowed.</p>\n\n<p>How is it possible to ignore these messages while doing ssh or sftp from Perl program?</p>\n\n<pre><code>my $ssh = Net::SSH::Perl -&gt;new($remote_host,options ==&gt; [\"BatchMode yes\"], protocol ==&gt;2);\n\n\n$ssh-&gt;login($remote_user, $remote_password) \n\n$sftp = Net::SFTP::Foreign-&gt;new($remote_host, user=&gt;$remote_user,password =&gt;$remote_password) \n\n./HcSGSN.pl You are trying to access a restricted zone. Only Authorized Users allowed. \n</code></pre>\n\n<p>Manually ssh and sftp</p>\n\n<pre><code>$ ssh pocsoc@&lt;ip&gt; You are trying to access a restricted zone. Only Authorized Users allowed. pocsoc@&lt;ip&gt; password: \nsftp pocsoc@&lt;ip&gt; Connecting to 10.210.9.17... You are trying to access a restricted zone. Only Authorized Users allowed. pocsoc@&lt;ip&gt; password\n</code></pre>\n"}, {"tags": ["perl", "unit-testing"], "comments": [{"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1434090712, "post_id": 30796592, "comment_id": 49642274, "body": "is it a linux command?"}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1434091321, "post_id": 30796592, "comment_id": 49642549, "body": "@ prateek :  Your question is not very clear. Update your question with some expecting output. Do you want run any Linux command and want save the output in a variable?"}, {"owner": {"reputation": 137, "user_id": 4243343, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-1RQhwdB4kW8/AAAAAAAAAAI/AAAAAAAAAFQ/x35pbl8QZRM/photo.jpg?sz=128", "display_name": "prateek goyal", "link": "https://stackoverflow.com/users/4243343/prateek-goyal"}, "edited": false, "score": 0, "creation_date": 1434092735, "post_id": 30796592, "comment_id": 49643251, "body": "This is a linux based device, i am automating the some tests for it. So this output comes as I run a command, and it is stored in a variable. For that thing I have code. Now I want to verfiy this output."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1434094992, "creation_date": 1434094992, "answer_id": 30797843, "question_id": 30796592, "link": "https://stackoverflow.com/questions/30796592/how-do-i-verify-output-from-an-external-command-in-a-perl-unit-test/30797843#30797843", "title": "How do I verify output from an external command in a Perl unit test?", "body": "<p>You can do that with Test::More and use, for example, a <a href=\"http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators\" rel=\"nofollow\">here-doc</a>.</p>\n\n<pre><code>use Test::More;\n\nmy $expected = &lt;&lt;'EXPECTED';\nUsage: dskrb [options]\n\n--help                  Help\n\n--list                  List all tickets\n\n--reset                 Clear all tickets\n\n--debug           &lt;arg&gt; Debug\n\n--client          &lt;arg&gt; Client principal, user@realm\n\n--password        &lt;arg&gt; Client password\n\n--client-kdc      &lt;arg&gt; Use this KDC in client realm.\n\n--cd-client       &lt;arg&gt; Client principal for Constrained Delegation, user@realm.\n\n--cd-password     &lt;arg&gt; Password for cd-client\n\n--server          &lt;arg&gt; Server principal, e.g. HTTP/target-server.abc.com[@realm]\n\n--server-kdc      &lt;arg&gt; Unse this server realm KDC\n\n--site            &lt;arg&gt; Site of client realm\n\n--login           &lt;arg&gt; Login Name\n\n--login-realm     &lt;arg&gt; Login Realm (must be provided with login)\n\n--probe           &lt;arg&gt; Look up Kerberos KDCs\n\n--overwrite       &lt;arg&gt; Overwrite precedence of auth methods (NTLMv1, NTLM). \nEXPECTED\n\nis `dskrb --help`, $expected, 'usage is displayed';\n\ndone_testing;\n</code></pre>\n\n<hr>\n\n<p>Note that this might not be the best test. Maybe you should just check if all arguments have some description, but not really care what that is, as changing the documentation (and usage is user-faced documentation) will hardly break functionality.</p>\n"}], "owner": {"reputation": 137, "user_id": 4243343, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-1RQhwdB4kW8/AAAAAAAAAAI/AAAAAAAAAFQ/x35pbl8QZRM/photo.jpg?sz=128", "display_name": "prateek goyal", "link": "https://stackoverflow.com/users/4243343/prateek-goyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434096836, "creation_date": 1434090517, "last_edit_date": 1434096836, "question_id": 30796592, "link": "https://stackoverflow.com/questions/30796592/how-do-i-verify-output-from-an-external-command-in-a-perl-unit-test", "title": "How do I verify output from an external command in a Perl unit test?", "body": "<p>I'm writing automated tests for an external program in Perl. I want to verify the output of its <code>--help</code> command in my test.</p>\n\n<p>The output of the command is like:</p>\n\n<pre><code>Usage: dskrb [options]\n\n    --help                  Help\n\n    --list                  List all tickets\n\n    --reset                 Clear all tickets\n\n    --debug           &lt;arg&gt; Debug\n\n    --client          &lt;arg&gt; Client principal, user@realm\n\n    --password        &lt;arg&gt; Client password\n\n    --client-kdc      &lt;arg&gt; Use this KDC in client realm.\n\n    --cd-client       &lt;arg&gt; Client principal for Constrained Delegation, user@realm.\n\n    --cd-password     &lt;arg&gt; Password for cd-client\n\n    --server          &lt;arg&gt; Server principal, e.g. HTTP/target-server.abc.com[@realm]\n\n    --server-kdc      &lt;arg&gt; Unse this server realm KDC\n\n    --site            &lt;arg&gt; Site of client realm\n\n    --login           &lt;arg&gt; Login Name\n\n    --login-realm     &lt;arg&gt; Login Realm (must be provided with login)\n\n    --probe           &lt;arg&gt; Look up Kerberos KDCs\n\n    --overwrite       &lt;arg&gt; Overwrite precedence of auth methods (NTLMv1, NTLM). \n</code></pre>\n\n<p>I know how to capture the output of the external program.</p>\n\n<p>How can I have this whole expected output in one variable and compare that variable with the variable capturing the output?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1434089746, "post_id": 30796394, "comment_id": 49641860, "body": "does the above works or not?"}, {"owner": {"reputation": 51, "user_id": 5001910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/059528783cf85b5ed16e65f7bb4d31f3?s=128&d=identicon&r=PG&f=1", "display_name": "xyz", "link": "https://stackoverflow.com/users/5001910/xyz"}, "reply_to_user": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1434089842, "post_id": 30796394, "comment_id": 49641912, "body": "I want to use it like this, it is not working"}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1434090430, "post_id": 30796394, "comment_id": 49642142, "body": "<a href=\"http://stackoverflow.com/questions/3238348/how-to-use-a-variable-as-modifier-in-a-substitution\" title=\"how to use a variable as modifier in a substitution\">stackoverflow.com/questions/3238348/&hellip;</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1434116394, "post_id": 30796394, "comment_id": 49657430, "body": "That linked question only has awful answers :("}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1434116462, "post_id": 30796394, "comment_id": 49657488, "body": "It makes no sense to add <code>g</code> dynamically on a match?!?"}], "owner": {"reputation": 51, "user_id": 5001910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/059528783cf85b5ed16e65f7bb4d31f3?s=128&d=identicon&r=PG&f=1", "display_name": "xyz", "link": "https://stackoverflow.com/users/5001910/xyz"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "closed_date": 1434092385, "answer_count": 0, "score": 5, "last_activity_date": 1434089658, "creation_date": 1434089658, "question_id": 30796394, "link": "https://stackoverflow.com/questions/30796394/how-to-change-match-modifier-within-a-program-in-perl", "closed_reason": "Duplicate", "title": "How to change match modifier within a program in perl?", "body": "<pre><code>$text =~ /\"helloworld\"/g\n</code></pre>\n\n<p>I want to have this regex modifdier 'g' into a variable so that later I can change it to a different modifier like this 'i', 's' so on </p>\n\n<p>e.g.</p>\n\n<pre><code>$text=\"helloworld\"\n$test=\"helloworld\"\n$modifier=\"g\"\n\n$text =~ /$test/$modifier\n</code></pre>\n"}, {"tags": ["perl", "makefile"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1434096544, "post_id": 30796391, "comment_id": 49645216, "body": "How is the status of each step stored?"}, {"owner": {"reputation": 75, "user_id": 1748182, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4e1039c350da97aae4f2a1a0f20231f4?s=128&d=identicon&r=PG", "display_name": "Emmanuel Sifakis", "link": "https://stackoverflow.com/users/1748182/emmanuel-sifakis"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434125793, "post_id": 30796391, "comment_id": 49663471, "body": "for first round step status will just be existence of output files...if they are present, then i will consider it passed, else failed.  next phase would be to write out some status file which states pass or error or waived."}], "answers": [{"tags": [], "owner": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "is_accepted": false, "score": 0, "last_activity_date": 1434252281, "creation_date": 1434252281, "answer_id": 30825679, "question_id": 30796391, "link": "https://stackoverflow.com/questions/30796391/mimicking-make-dependency-checking-in-perl/30825679#30825679", "title": "mimicking make dependency checking in perl", "body": "<p>I'm thinking you could use <code>make</code> itself instead of trying to simulate it. </p>\n\n<p>The makefile rules for \"building\" each <code>fileX</code> \"target\" from the <code>fileX-1</code> \"source file\" would be invoking your script for the respective step.</p>\n"}], "owner": {"reputation": 75, "user_id": 1748182, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4e1039c350da97aae4f2a1a0f20231f4?s=128&d=identicon&r=PG", "display_name": "Emmanuel Sifakis", "link": "https://stackoverflow.com/users/1748182/emmanuel-sifakis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1434252281, "creation_date": 1434089652, "last_edit_date": 1434092222, "question_id": 30796391, "link": "https://stackoverflow.com/questions/30796391/mimicking-make-dependency-checking-in-perl", "title": "mimicking make dependency checking in perl", "body": "<p>Not sure if I am explaining this well, but here goes...</p>\n\n<p>I have a perl script/flow that runs various steps. Each step is basically dependent on the output of its previous step in order to run.</p>\n\n<p>For example:</p>\n\n<pre><code>myflow -step1...input is file0, produces file1\nmyflow -step2...input is file1, produces file2\nmyflow -stepN...input is fileN-1, produces fileN\n</code></pre>\n\n<p>Right now users can run myflow <code>-step1 -step2...-stepN</code> to go from start to finish. I would like to somehow have the ability for the user to run myflow <code>-stepN</code>, have myflow check to see which steps need to be run prior to it, and then run <code>stepN</code>. Maybe no steps were run, so myflow <code>-stepN</code> would start from <code>step1</code> and continue until it finishes <code>stepN</code> or an error occurs. Maybe <code>step1</code> through <code>step3</code> ran fine previously, so running <code>-stepN</code> would start from <code>step4</code>. Maybe all steps ran fine, but the user modified/deleted/touched an intermediate file, so running <code>-stepN</code> would detect this and rerun from that previous step.</p>\n\n<p>Is there a cpan module that essentially mimics this make behavior, i.e. given steps, inputs they require, and outputs they produce, create a dependency graph and determine which steps need to be run?</p>\n"}, {"tags": ["perl", "module", "package"], "comments": [{"owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "edited": false, "score": 0, "creation_date": 1434096000, "post_id": 30795598, "comment_id": 49644968, "body": "<a href=\"http://stackoverflow.com/questions/14190483/what-is-difference-between-namespace-package-and-module-in-perl\" title=\"what is difference between namespace package and module in perl\">stackoverflow.com/questions/14190483/&hellip;</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434096814, "post_id": 30795598, "comment_id": 49645349, "body": "Where have you seen \u201cmodule\u201d used? It isn&#39;t a Perl language word"}, {"owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434097052, "post_id": 30795598, "comment_id": 49645480, "body": "@Borodin Please correct me if i am wrong. In the above link you explained perl module and here you are saying it isn&#39;t perl language word."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1434097223, "post_id": 30795598, "comment_id": 49645583, "body": "That&#39;s correct. A Perl module is a source file that is written according to a collection of conventions. It uses the <code>package</code> language word, but <code>module</code> isn&#39;t a reserved word itself"}, {"owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1434097656, "post_id": 30795598, "comment_id": 49645816, "body": "@Borodin ooh now i get it. I thought it otherwise."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1434108369, "post_id": 30795598, "comment_id": 49652094, "body": "Maybe we should say a <i>keyword</i> or a <i>built-in</i>. The term <i>language word</i> is a bit confusing. :)"}], "answers": [{"tags": [], "owner": {"reputation": 587, "user_id": 3168714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EMTiR.jpg?s=128&g=1", "display_name": "NickJHoran", "link": "https://stackoverflow.com/users/3168714/nickjhoran"}, "is_accepted": false, "score": 0, "last_activity_date": 1434404024, "creation_date": 1434404024, "answer_id": 30855332, "question_id": 30795598, "link": "https://stackoverflow.com/questions/30795598/difference-between-module-and-package-using-perl/30855332#30855332", "title": "Difference Between Module and Package using Perl?", "body": "<p>A perl module (.pm file) is a container for one or more packages.  Whilst they can contain multiple packages, the general convention is one package per module.  The naming structure is then nicely mirrored, as in:   </p>\n\n<ul>\n<li><p>lib/Some/Package/Path.pm</p></li>\n<li><p>package Some::Package::Path;</p></li>\n</ul>\n"}], "owner": {"reputation": 39, "user_id": 4861757, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/15ee3b81f6bd4510acc3999af15718d9?s=128&d=identicon&r=PG&f=1", "display_name": "stackcareer", "link": "https://stackoverflow.com/users/4861757/stackcareer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 203, "favorite_count": 0, "closed_date": 1434599842, "answer_count": 1, "score": 1, "last_activity_date": 1434404024, "creation_date": 1434085278, "last_edit_date": 1434096595, "question_id": 30795598, "link": "https://stackoverflow.com/questions/30795598/difference-between-module-and-package-using-perl", "closed_reason": "Duplicate", "title": "Difference Between Module and Package using Perl?", "body": "<p>As I try the below code for <code>package</code> using Perl I am not clear on the difference between <code>package</code> and module</p>\n\n<pre><code>#!usr/local/bin/perl -w\n\n$i = 1; print \"$i\\n\"; # Prints \"1\"\n\npackage foo;\n$i = 2; print \"$i\\n\"; # Prints \"2\"\n\npackage main;\nprint \"$i\\n\"; # Prints \"1\"\n</code></pre>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1434099711, "post_id": 30795478, "comment_id": 49647017, "body": "Welcome to Stack Overflow. Please take a moment to read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. You need to show us what you have tried, as we are not a code-writing service."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1434106759, "creation_date": 1434106759, "answer_id": 30801423, "question_id": 30795478, "link": "https://stackoverflow.com/questions/30795478/how-to-parse-xml-and-extract-elements-and-write-to-new-xml-with-specified-condit/30801423#30801423", "title": "How to parse xml and extract elements and write to new xml with specified condition", "body": "<p>Perl has an excellent <code>XML::Twig</code> library that can be used for XML parsing and solving problems as you outline. I will offer you a starter example, but please be aware - Stack Overflow is about helping you solve problems with your code, not for writing code for you. </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $twig = XML::Twig-&gt;new(\n    'pretty_print'  =&gt; 'indented_a',\n    'twig_handlers' =&gt; {\n        'HP_Code_ReviewID' =&gt; sub {\n            if ( $_-&gt;text =~ m/NA/ ) { $_-&gt;parent-&gt;print }\n        }\n    }\n)-&gt;parse( \\*DATA );\n\n__DATA__\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n    &lt;log&gt;\n    &lt;logentry revision=\"21754\"&gt;\n    &lt;author&gt;Madhu&lt;/author&gt;\n    &lt;date&gt;2015-05-12&lt;/date&gt;\n    &lt;QC_ID&gt;NA&lt;/QC_ID&gt;\n    &lt;Rally_ID&gt;US4940&lt;/Rally_ID&gt;\n   &lt;Description&gt;HotFix_MaxConnectionReduction.dBAssembly.xml file in Release-  Branch&lt;/Description&gt;\n   &lt;HP_Code_ReviewID&gt;CR1234&lt;/HP_Code_ReviewID&gt;\n   &lt;Deployment_Change_Needed&gt;No&lt;/Deployment_Change_Needed&gt;\n   &lt;Deployment_Change_Description&gt;NA\n   &lt;/Deployment_Change_Description&gt;\n   &lt;/logentry&gt;\n   &lt;logentry revision=\"21779\"&gt;\n   &lt;author&gt;sudha&lt;/author&gt;\n   &lt;date&gt;2015-05-19&lt;/date&gt;\n   &lt;QC_ID&gt;NA&lt;/QC_ID&gt;\n   &lt;Rally_ID&gt;US4940&lt;/Rally_ID&gt;\n   &lt;Description&gt; Adding Release-Branch&lt;/Description&gt;\n   &lt;HP_Code_ReviewID&gt; NA&lt;/HP_Code_ReviewID&gt;\n   &lt;Deployment_Change_Needed&gt;No&lt;/Deployment_Change_Needed&gt;\n   &lt;Deployment_Change_Description&gt;NA\n   &lt;/Deployment_Change_Description&gt;\n &lt;/logentry&gt;\n&lt;logentry revision=\"21808\"&gt;\n&lt;author&gt;sudha&lt;/author&gt;\n&lt;date&gt;2015-05-25&lt;/date&gt;\n&lt;QC_ID&gt;NA&lt;/QC_ID&gt;\n&lt;Rally_ID&gt;US4940&lt;/Rally_ID&gt;\n&lt;Description&gt;  modifying 15.6.1 in PP Release-Branch to bring new spaces in modules &lt;/Description&gt;\n&lt;HP_Code_ReviewID&gt; NA&lt;/HP_Code_ReviewID&gt;\n&lt;Deployment_Change_Needed&gt;No&lt;/Deployment_Change_Needed&gt;\n&lt;Deployment_Change_Description&gt;NA\n&lt;/Deployment_Change_Description&gt;\n&lt;/logentry&gt;\n&lt;/log&gt;\n</code></pre>\n\n<p>This sets a twig handler for <code>HP_Code_ReviewID' and if the text in it contains</code>NA` prints the parent element.</p>\n\n<p>Note that this isn't - explicitly - valid XML, because it only captures the <code>logentry</code> element. However you can do things with XML::Twig like deleting elements that <em>don't</em> match and then display the rest of the document. </p>\n\n<p>This prints:</p>\n\n<pre><code>  &lt;logentry revision=\"21779\"&gt;\n    &lt;author&gt;sudha&lt;/author&gt;\n    &lt;date&gt;2015-05-19&lt;/date&gt;\n    &lt;QC_ID&gt;NA&lt;/QC_ID&gt;\n    &lt;Rally_ID&gt;US4940&lt;/Rally_ID&gt;\n    &lt;Description&gt; Adding Release-Branch&lt;/Description&gt;\n    &lt;HP_Code_ReviewID&gt; NA&lt;/HP_Code_ReviewID&gt;\n  &lt;/logentry&gt;\n  &lt;logentry revision=\"21808\"&gt;\n    &lt;author&gt;sudha&lt;/author&gt;\n    &lt;date&gt;2015-05-25&lt;/date&gt;\n    &lt;QC_ID&gt;NA&lt;/QC_ID&gt;\n    &lt;Rally_ID&gt;US4940&lt;/Rally_ID&gt;\n    &lt;Description&gt;  modifying 15.6.1 in PP Release-Branch to bring new spaces in modules &lt;/Description&gt;\n    &lt;HP_Code_ReviewID&gt; NA&lt;/HP_Code_ReviewID&gt;\n  &lt;/logentry&gt;\n</code></pre>\n\n<p>To preserve these in context, you'd - basically - have to delete the things that <em>didn't</em> match:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $twig = XML::Twig-&gt;new(\n    'pretty_print'  =&gt; 'indented_a',\n    'twig_handlers' =&gt; {\n        'logentry' =&gt; sub {\n            if ( not $_-&gt;first_child_text('HP_Code_ReviewID') =~ m/NA/ ) {\n                $_-&gt;delete;\n            }\n        }\n    }\n)-&gt;parse( \\*DATA )-&gt;print;\n</code></pre>\n\n<p>(same <code>DATA</code> block as above).</p>\n\n<p>This will print:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;log&gt;\n  &lt;logentry revision=\"21779\"&gt;\n    &lt;author&gt;sudha&lt;/author&gt;\n    &lt;date&gt;2015-05-19&lt;/date&gt;\n    &lt;QC_ID&gt;NA&lt;/QC_ID&gt;\n    &lt;Rally_ID&gt;US4940&lt;/Rally_ID&gt;\n    &lt;Description&gt; Adding Release-Branch&lt;/Description&gt;\n    &lt;HP_Code_ReviewID&gt; NA&lt;/HP_Code_ReviewID&gt;\n    &lt;Deployment_Change_Needed&gt;No&lt;/Deployment_Change_Needed&gt;\n    &lt;Deployment_Change_Description&gt;NA\n   &lt;/Deployment_Change_Description&gt;\n  &lt;/logentry&gt;\n  &lt;logentry revision=\"21808\"&gt;\n    &lt;author&gt;sudha&lt;/author&gt;\n    &lt;date&gt;2015-05-25&lt;/date&gt;\n    &lt;QC_ID&gt;NA&lt;/QC_ID&gt;\n    &lt;Rally_ID&gt;US4940&lt;/Rally_ID&gt;\n    &lt;Description&gt;  modifying 15.6.1 in PP Release-Branch to bring new spaces in modules &lt;/Description&gt;\n    &lt;HP_Code_ReviewID&gt; NA&lt;/HP_Code_ReviewID&gt;\n    &lt;Deployment_Change_Needed&gt;No&lt;/Deployment_Change_Needed&gt;\n    &lt;Deployment_Change_Description&gt;NA\n&lt;/Deployment_Change_Description&gt;\n  &lt;/logentry&gt;\n&lt;/log&gt;\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 2750116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712185c0b95b791d553672c7d51f91bc?s=128&d=identicon&r=PG&f=1", "display_name": "user2750116", "link": "https://stackoverflow.com/users/2750116/user2750116"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1434106759, "creation_date": 1434084431, "question_id": 30795478, "link": "https://stackoverflow.com/questions/30795478/how-to-parse-xml-and-extract-elements-and-write-to-new-xml-with-specified-condit", "title": "How to parse xml and extract elements and write to new xml with specified condition", "body": "<p>I need to extract the xml elements from the given xml when  values is null or NA .</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n    &lt;log&gt;\n    &lt;logentry revision=\"21754\"&gt;\n    &lt;author&gt;Madhu&lt;/author&gt;\n    &lt;date&gt;2015-05-12&lt;/date&gt;\n    &lt;QC_ID&gt;NA&lt;/QC_ID&gt;\n    &lt;Rally_ID&gt;US4940&lt;/Rally_ID&gt;\n   &lt;Description&gt;HotFix_MaxConnectionReduction.dBAssembly.xml file in Release-  Branch&lt;/Description&gt;\n   &lt;HP_Code_ReviewID&gt;CR1234&lt;/HP_Code_ReviewID&gt;\n   &lt;Deployment_Change_Needed&gt;No&lt;/Deployment_Change_Needed&gt;\n   &lt;Deployment_Change_Description&gt;NA\n   &lt;/Deployment_Change_Description&gt;\n   &lt;/logentry&gt;\n   &lt;logentry revision=\"21779\"&gt;\n   &lt;author&gt;sudha&lt;/author&gt;\n   &lt;date&gt;2015-05-19&lt;/date&gt;\n   &lt;QC_ID&gt;NA&lt;/QC_ID&gt;\n   &lt;Rally_ID&gt;US4940&lt;/Rally_ID&gt;\n   &lt;Description&gt; Adding Release-Branch&lt;/Description&gt;\n   &lt;HP_Code_ReviewID&gt; NA&lt;/HP_Code_ReviewID&gt;\n   &lt;Deployment_Change_Needed&gt;No&lt;/Deployment_Change_Needed&gt;\n   &lt;Deployment_Change_Description&gt;NA\n   &lt;/Deployment_Change_Description&gt;\n &lt;/logentry&gt;\n&lt;logentry revision=\"21808\"&gt;\n&lt;author&gt;sudha&lt;/author&gt;\n&lt;date&gt;2015-05-25&lt;/date&gt;\n&lt;QC_ID&gt;NA&lt;/QC_ID&gt;\n&lt;Rally_ID&gt;US4940&lt;/Rally_ID&gt;\n&lt;Description&gt;  modifying 15.6.1 in PP Release-Branch to bring new spaces in modules &lt;/Description&gt;\n&lt;HP_Code_ReviewID&gt; NA&lt;/HP_Code_ReviewID&gt;\n&lt;Deployment_Change_Needed&gt;No&lt;/Deployment_Change_Needed&gt;\n&lt;Deployment_Change_Description&gt;NA\n&lt;/Deployment_Change_Description&gt;\n&lt;/logentry&gt;\n&lt;/log&gt;\n</code></pre>\n\n<p>I need to extract the xml elements when  values are null or NA</p>\n\n<p>and create new xml to process</p>\n\n<p>Expected Output from the above sample is  (\u201c HP_Code_ReviewID tag values is NA\u201d ) </p>\n\n<pre><code> &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n &lt;log&gt;\n&lt;logentry revision=\"21808\"&gt;\n&lt;author&gt;sudha&lt;/author&gt;\n&lt;date&gt;2015-05-25&lt;/date&gt;\n&lt;QC_ID&gt;NA&lt;/QC_ID&gt;\n&lt;Rally_ID&gt;US4940&lt;/Rally_ID&gt;\n&lt;Description&gt;  modifying 15.6.1 in PP Release-Branch to bring new spaces in modules &lt;/Description&gt;\n&lt;HP_Code_ReviewID&gt; NA&lt;/HP_Code_ReviewID&gt;\n&lt;Deployment_Change_Needed&gt;No&lt;/Deployment_Change_Needed&gt;\n&lt;Deployment_Change_Description&gt;NA\n&lt;/Deployment_Change_Description&gt;\n&lt;/logentry&gt;\n&lt;/log&gt;\n</code></pre>\n"}, {"tags": ["javascript", "html", "css", "perl", "caching"], "owner": {"reputation": 55, "user_id": 2949237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf95869963beab45b9f19e35e8be369e?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/2949237/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1434079660, "creation_date": 1434079660, "question_id": 30794860, "link": "https://stackoverflow.com/questions/30794860/how-to-effectively-manage-browser-cache-for-cms-like-websites", "title": "How to effectively manage browser cache for &quot;CMS-like&quot; websites", "body": "<p>(Sorry for the long post... trying to be as concise as I can on this.)</p>\n\n<p>I am the sole volunteer developer for a free \"CMS-like\" website system used by over 10,000+ Toastmasters public speaking clubs around the world.  Clubs enter content and configuration settings and the system generates a free website for them using a custom template.  The system is very dynamic, so browser cache management is a key consideration.  I am continuing to struggle to come up with a robust cache management strategy that works for all my 300,000+ users for their various browsers <em>despite all the research I have done related to this in these forums</em>.  I control all aspects of the software, the Perl server code, the MySQL db, the HTML, and the javascript.  I have an htaccess set up with ExpiresByType on the server.</p>\n\n<p>I am using cache buster query parameters for javascript libraries, CSS files, etc.  The Perl code patches in a RevDate query parameter into the HTML for my custom javascript files and my custom CSS:</p>\n\n<pre><code>&lt;script src=\"/js/jQuery-File-Upload/js/jquery.fileupload.js?v=9.9.3\"&gt;&lt;/script&gt;\n&lt;script src=\"/js/FTH/utilities.min.js?2015-06-11\"&gt;&lt;/script&gt;\n// In the HTML template: &lt;script src=\"/js/FTH/utilities.min.js?{{RevDate}}\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>I have the following Cache Control meta parameters set in the HTML template head section... (The template is a single HTML file w/ Mustache-style variables and section markers that allow sections to be removed by the Perl code as needed.)  </p>\n\n<pre><code>&lt;meta http-equiv=\"CACHE-CONTROL\" content=\"NO-CACHE\"&gt;\n&lt;meta http-equiv=\"PRAGMA\" content=\"NO-CACHE\"&gt;\n&lt;meta http-equiv=\"Expires\" content=\"-1\"&gt;\n</code></pre>\n\n<p>I have recently also added the indicated lines below for outputting the HTTP headers to the Perl routine that processes the template:</p>\n\n<pre><code>print $COOKIE;\nprint \"Content-type: text/html; charset=UTF-8\\n\";\n# The following have been added to the above...\nprint \"Cache-Control: no-cache\\n\";\nprint \"Pragma: no-cache\\n\\n\";\n</code></pre>\n\n<p>(From what I am reading, it looks like having the server output the cache control headers is a better approach than using the meta tags, but not sure why.)</p>\n\n<p>Despite all these approaches, I still run into cache related issues (e.g., cache not invalidated), especially with Google Chrome, if I do not also include the following forced reload script in the HTML head:</p>\n\n<pre><code>&lt;script&gt;\n  {{DOCCOOKIE}}  // Set first so that a reload does not lose cookies \n   (function TriggerReload(){\n     var getCookieRevDate = function(){ \n         return ((document.cookie.match(/(?:^|; )FTH2\\.RevDate=([^;]*)/) || [])[1] || ''); \n     }, \n     RD = getCookieRevDate(), \n     key = \"FTH2.RevDate\";\n     if (RD === \"{{RevDate}}\") { return; } // Cookie revision date matches server revision date. No reload necessary.\n     document.cookie = key + \"={{RevDate}}; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/\"; \n     if (RD &amp;&amp; getCookieRevDate() === \"{{RevDate}}\"){ location.reload(true); }  // Revision date was changed on server, and has been successfully stored locally and read back.\n    }());\n&lt;/script&gt;\n</code></pre>\n\n<p>I would like to get rid of this reload script, if possible, while maintaining a robust cache management strategy.  However, to date, I have not been able to make the system properly invalidate cached JavaScript and content on a Rev Date change without the forced reload.  I end up with my Chrome users (predominantly) complaining about a number of issues and I end up having to tell them to do a manual reload. (I have a link that does a location.reload(true) as a manual fallback for their use.)</p>\n\n<p>Anyone have any suggestions on how to improve on what I am doing to provide an effective cache management strategy with good performance???</p>\n"}, {"tags": ["javascript", "perl", "browser-addons"], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 4257253, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/23SFY.png?s=128&g=1", "display_name": "bluehexagons", "link": "https://stackoverflow.com/users/4257253/bluehexagons"}, "is_accepted": false, "score": 0, "last_activity_date": 1434079712, "creation_date": 1434079712, "answer_id": 30794867, "question_id": 30794734, "link": "https://stackoverflow.com/questions/30794734/level-of-control-in-browser-add-on-code-how-low-can-i-go/30794867#30794867", "title": "Level of control in browser add-on code: How low can I go?", "body": "<p>The short answer is: yes.</p>\n\n<p>If you are interested in making a Firefox/Chrome add-on you would be using JavaScript, which is a very powerful language. Anything you could do in JavaScript on the web page, plus much more when using browser-specific extension APIs, is possible in an add-on. If you aren't already familiar with JavaScript, my personal recommendation for learning is the <a href=\"https://developer.mozilla.org/en-US/\" rel=\"nofollow\">Mozilla Developer Network</a>. One approach for what you want to do would be to find anchor tags that link to articles, then add click event listeners to them that would start the routine you want (likely download the HTML using XMLHttpRequest or the 'fetch' API) and prevent the default behavior of following the link.</p>\n"}], "owner": {"reputation": 9, "user_id": 3733701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80b92350dac99514bc6674008fe7413e?s=128&d=identicon&r=PG&f=1", "display_name": "user3733701", "link": "https://stackoverflow.com/users/3733701/user3733701"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434079712, "creation_date": 1434078536, "question_id": 30794734, "link": "https://stackoverflow.com/questions/30794734/level-of-control-in-browser-add-on-code-how-low-can-i-go", "title": "Level of control in browser add-on code: How low can I go?", "body": "<p>Never having written a browser add-on, it's difficult for me to \nphrase this question concisely (and search for existing work). \nWhen viewing  a news media site, when I click on the link to a \nnews story, I would like to see only the text of the news article \nand prevent the browser from accessing <em>any</em> other URL in the \nstory's source page, including pictures, videos and ads. I can \ndo this in a terminal window with a Perl script: issue a get \non the URL, find the story by analyzing the HTML, extract and \nprint it -- or, as a CGI script, to a browser window. The \nfunctionally equivalent browser add-on would say, in effect, \ndon't grab that URL I just clicked on, let <em>me</em> get it, let me \nparse the page that's returned, and let me build my display of \nits contents with my own priorities. Does the browser add-on \nmodel provide for this level of control? If so, where's a good \nprimer for a newbie?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 240678, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1434076877, "post_id": 30794527, "comment_id": 49638372, "body": "So only single digits? No &quot;fiftynine&quot; ?"}, {"owner": {"reputation": 240678, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1434076956, "post_id": 30794527, "comment_id": 49638385, "body": "<code>s&#47;zero&#47;0&#47;g; s&#47;one&#47;1&#47;g; s&#47;two&#47;2&#47;g;</code>"}, {"owner": {"reputation": 9, "user_id": 4967621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf9c1d2a0292db5360705194ea9a4c4f?s=128&d=identicon&r=PG&f=1", "display_name": "FrankThai", "link": "https://stackoverflow.com/users/4967621/frankthai"}, "reply_to_user": {"reputation": 240678, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1434076975, "post_id": 30794527, "comment_id": 49638392, "body": "Yes, I want only single digits:D"}], "owner": {"reputation": 9, "user_id": 4967621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf9c1d2a0292db5360705194ea9a4c4f?s=128&d=identicon&r=PG&f=1", "display_name": "FrankThai", "link": "https://stackoverflow.com/users/4967621/frankthai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "closed_date": 1434078520, "answer_count": 0, "score": 0, "last_activity_date": 1434077136, "creation_date": 1434076725, "last_edit_date": 1434077136, "question_id": 30794527, "link": "https://stackoverflow.com/questions/30794527/how-can-i-convert-a-string-number-to-a-number-in-perl", "closed_reason": "Duplicate", "title": "How can I convert a string number to a number in Perl?", "body": "<p>I want to convert this string:</p>\n\n<pre><code>my $string = \"zero one two three four five six seven eight nine\";\nto \nmy $string = \"0 1 2 3 4 5 6 7 8 9\";\n</code></pre>\n\n<p>Is there anyway to do this in Perl Regex for only one pattern?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 795, "user_id": 2651994, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d9c186dfe9e6d9dba2747de09636779e?s=128&d=identicon&r=PG", "display_name": "lightbringer", "link": "https://stackoverflow.com/users/2651994/lightbringer"}, "edited": false, "score": 0, "creation_date": 1434075735, "post_id": 30794307, "comment_id": 49638096, "body": "how do you know a string contains 2 words if there is no space (e.g. <code>without = with + out</code>, will you treat that as 2 words or 1 word?)"}, {"owner": {"reputation": 344, "user_id": 3791101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08468078a37047c975e58e6d58b3a5bd?s=128&d=identicon&r=PG&f=1", "display_name": "ansario", "link": "https://stackoverflow.com/users/3791101/ansario"}, "reply_to_user": {"reputation": 795, "user_id": 2651994, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d9c186dfe9e6d9dba2747de09636779e?s=128&d=identicon&r=PG", "display_name": "lightbringer", "link": "https://stackoverflow.com/users/2651994/lightbringer"}, "edited": false, "score": 0, "creation_date": 1434075936, "post_id": 30794307, "comment_id": 49638129, "body": "In this case words right next to each other will start with a capital letter. It would be WithOut in the data."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1434086244, "last_edit_date": 1434086244, "creation_date": 1434084618, "answer_id": 30795506, "question_id": 30794307, "link": "https://stackoverflow.com/questions/30794307/regex-for-unsanitized-data-perl/30795506#30795506", "title": "Regex for unsanitized data - Perl", "body": "<p>This is pretty much a literal implementation of the requirement</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nmy $s = &lt;&lt;END_STRING;\nCat Bag\nDog Hair\nTurkey brown Caller\nThirteen,BoyXbox\nMac\nLizardDinosaur\nJRAinsley-McEwan Class1C\nEND_STRING\n\nmy @s = split/\\s*[\\n,]\\s*|(?&lt;=\\S)(?=[A-Z])/, $s;\n\nsay join ', ', map qq{\"$_\"}, @s;\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>\"Cat Bag\", \"Dog Hair\", \"Turkey brown Caller\", \"Thirteen\", \"Boy\", \"Xbox\", \"Mac\", \"Lizard\", \"Dinosaur\", \"J\", \"R\", \"Ainsley-\", \"Mc\", \"Ewan Class1\", \"C\"\n</code></pre>\n"}], "owner": {"reputation": 344, "user_id": 3791101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08468078a37047c975e58e6d58b3a5bd?s=128&d=identicon&r=PG&f=1", "display_name": "ansario", "link": "https://stackoverflow.com/users/3791101/ansario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 30795506, "answer_count": 1, "score": 0, "last_activity_date": 1434094886, "creation_date": 1434074822, "question_id": 30794307, "link": "https://stackoverflow.com/questions/30794307/regex-for-unsanitized-data-perl", "title": "Regex for unsanitized data - Perl", "body": "<p>I have some unsanitized data which I need to split into an array using perl. Ideally, I would have a sequence of values separated by commas. In this case, I would use the following to split the data:</p>\n\n<pre><code>/,\\s*/\n</code></pre>\n\n<p>Unfortunately this is a bit of a special case. Here is an example of the data I have:</p>\n\n<pre><code>Cat Bag\nDog Hair\nTurkey brown Caller\nThirteen,BoyXbox\nMac\nLizardDinosaur \n</code></pre>\n\n<p>The final array should be:</p>\n\n<pre><code>[Cat Bag, Dog Hair, Turkey brown Caller, Thirteen, Boy, Xbox, Mac, Lizard, Dinosaur]\n</code></pre>\n\n<p>As you can see, I need to split on newline characters, commas, and if there are two words next to each other with no space (eg: BoyXbox).</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["regex", "xml", "perl", "xml-parsing", "centos"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 4577358, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3697d69b26891f9f170cce7e81902f38?s=128&d=identicon&r=PG&f=1", "display_name": "CrazyEd38239", "link": "https://stackoverflow.com/users/4577358/crazyed38239"}, "edited": false, "score": 0, "creation_date": 1434076516, "post_id": 30793948, "comment_id": 49638286, "body": "I should have mentioned that I was a beginner with Perl.  Oddly enough, the websites I researched had a similar &gt;foreach line as an example for Perl."}, {"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "reply_to_user": {"reputation": 37, "user_id": 4577358, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3697d69b26891f9f170cce7e81902f38?s=128&d=identicon&r=PG&f=1", "display_name": "CrazyEd38239", "link": "https://stackoverflow.com/users/4577358/crazyed38239"}, "edited": false, "score": 1, "creation_date": 1434077233, "post_id": 30793948, "comment_id": 49638452, "body": "Googling for Perl has a tendency to turn up ancient and unhealthy information.  There are some good resources here at <a href=\"http://stackoverflow.com/tags/perl/info\">http://stackoverflow.com/tags/perl/info</a>."}, {"owner": {"reputation": 37, "user_id": 4577358, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3697d69b26891f9f170cce7e81902f38?s=128&d=identicon&r=PG&f=1", "display_name": "CrazyEd38239", "link": "https://stackoverflow.com/users/4577358/crazyed38239"}, "edited": false, "score": 0, "creation_date": 1434078788, "post_id": 30793948, "comment_id": 49638783, "body": "Thanks for the help.  I guess I can always rely on the joke, &quot;They can&#39;t put anything on the Internet that isn&#39;t true.&quot;"}], "tags": [], "owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "is_accepted": true, "score": 1, "last_activity_date": 1434072277, "creation_date": 1434072277, "answer_id": 30793948, "question_id": 30793645, "link": "https://stackoverflow.com/questions/30793645/how-to-print-a-result-from-multiple-root-elements-in-xml-using-perl/30793948#30793948", "title": "How to print a result from multiple root elements in XML using Perl", "body": "<p>What you're doing in your <code>foreach</code> there isn't Perl, and you're missing some punctuation in the <code>if</code>.  Something like this should work:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse 5.010;\n\nuse XML::Simple;\nuse Data::Dumper;\nuse LWP::Simple;\n\n# \"indirect object\" notation (new XML::Simple) is frowned upon\nmy $parser = XML::Simple-&gt;new;\n\n# used this for testing so i wouldn't have to download\n# the file for every run.\nmy $content = do { open my $fh, '&lt;', 'errata.latest.xml' or die; undef $/; &lt;$fh&gt; };\n# my $url = 'http://cefs.steve-meier.de/errata.latest.xml';\n# my $content = get $url or die \"Unable to get $url \\n\";\n\nmy $list = $parser-&gt;XMLin($content);\n# print Dumper($list);\n\nfor my $CEBA (keys %$list) {\n    # if the key doesn't match what you want\n    # and os_release != 6, then skip to the\n    # next entry.\n    next unless $CEBA =~ /\\ACEBA-\\d+--\\d+\\z/\n            and $list-&gt;{$CEBA}{os_release} == 6;\n\n    say for @{ $list-&gt;{$CEBA}{packages} };\n    ## ^-- essentially the same as --v\n    # for my $pkg (@{ $list-&gt;{$CEBA}{packages} }) {\n    #     print \"$pkg\\n\";\n    # }\n}\n</code></pre>\n\n<p>That said, even <a href=\"https://metacpan.org/pod/XML::Simple#STATUS-OF-THIS-MODULE\" rel=\"nofollow\">the XML::Simple documentation</a> says not to use it.  You'll probably run into problems with this when a CEBA entry only has one <code>package</code> tag in it.</p>\n"}], "owner": {"reputation": 37, "user_id": 4577358, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3697d69b26891f9f170cce7e81902f38?s=128&d=identicon&r=PG&f=1", "display_name": "CrazyEd38239", "link": "https://stackoverflow.com/users/4577358/crazyed38239"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 30793948, "answer_count": 1, "score": 0, "last_activity_date": 1434072277, "creation_date": 1434069599, "question_id": 30793645, "link": "https://stackoverflow.com/questions/30793645/how-to-print-a-result-from-multiple-root-elements-in-xml-using-perl", "title": "How to print a result from multiple root elements in XML using Perl", "body": "<p>I'm starting out with Perl and doing all the bad things you can with the language.  This program is using XML::Simple and Regular Expressions which the internet says do not do unless you hate yourself.</p>\n\n<p>Ok, the plan is to read an XML file from a website and read off the package for CentOS 6.6 that needs to be updated.  For those unfamiliar with CentOS or the Steve Meier errata XML, it is not nicely arranged with CEBA numbers as shown below...</p>\n\n<p><strong><em>Example after Parsing</em></strong></p>\n\n<pre><code>&lt;opt&gt;\n    &lt;CEBA-2005--169 description=\"Not available\" from=\"centos-announce@centos.org\" issue_date=\"2005-04-07 01:27:35\" notes=\"Not available\" product=\"CentOS Linux\" references=\"http://rhn.redhat.com/errata/RHBA-2005-169.html http://lists.centos.org/pipermail/centos-announce/2005-April/011555.html\" release=\"1\" solution=\"Not available\" synopsis=\"CentOS and up2date - bugfix update\" topic=\"Not available\" type=\"Bug Fix Advisory\"&gt;\n        &lt;os_arch&gt;i386&lt;/os_arch&gt;\n        &lt;os_arch&gt;x86_64&lt;/os_arch&gt;\n        &lt;os_release&gt;4&lt;/os_release&gt;\n        &lt;packages&gt;up2date-4.4.5.6-2.centos4.i386.rpm&lt;/packages&gt;\n        &lt;packages&gt;up2date-4.4.5.6-2.centos4.src.rpm&lt;/packages&gt;\n    &lt;/CEBA-2005--169&gt;\n    &lt;CEBA-2005--842 description=\"Not available\" from=\"centos-announce@centos.org\" issue_date=\"2005-11-18 17:52:49\" multirelease=\"1\" notes=\"Not available\" product=\"CentOS Linux\" references=\"https://rhn.redhat.com/errata/RHBA-2005-842.html http://lists.centos.org/pipermail/centos-announce/2005-November/012437.html http://lists.centos.org/pipermail/centos-announce/2005-November/012438.html\" release=\"2\" solution=\"Not available\" synopsis=\"Important CentOS shadow-utils - bugfix update\" topic=\"Not available\" type=\"Bug Fix Advisory\"&gt;\n        &lt;os_arch&gt;i386&lt;/os_arch&gt;\n        &lt;os_arch&gt;x86_64&lt;/os_arch&gt;\n        &lt;os_release&gt;4&lt;/os_release&gt; \n        &lt;packages&gt;shadow-utils-4.0.3-58.RHEL4.i386.rpm&lt;/packages&gt;\n    &lt;/CEBA-2005--842&gt;\n</code></pre>\n\n<p>As you can see, the root element of the XML file changes.  So I had to use regular expressions to \"read\" through the file.  But when I use my program, it does not print out a result.  The problem may be with the regular expressions used or how the element search is written.  I am not 100% sure where is the problem and any help is appreciated.</p>\n\n<p><strong><em>Program</em></strong></p>\n\n<pre><code># Script to parse XML file to show updates.\n\nuse strict;\nuse XML::Simple;\nuse Data::Dumper;\nuse LWP::Simple;\n\nmy $parser = new XML::Simple;\n\nmy $url = 'http://cefs.steve-meier.de/errata.latest.xml';\nmy $content = get $url or die \"Unable to get $url \\n\";\nmy $list = $parser-&gt;XMLin ($content);\nmy $CEBA = '(CEBA-([\\d]+)--([\\d]+))';\n\nforeach my $CEBA (@{$list-&gt;{/(CEBA-([\\d]+)--([\\d]+))/}}) {\n     if )$CEBS-&gt;{os_release eq '6') {\n           print $CEBA-&gt;{packages} /. \"\\n\";\n     }\n}\n</code></pre>\n"}, {"tags": ["bash", "perl", "file-handling"], "comments": [{"owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "edited": false, "score": 0, "creation_date": 1434096206, "post_id": 30792447, "comment_id": 49645064, "body": "Open outputfile with open and simply keep on appending to it and then close it. Why are you not adopting this approach?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1436027854, "post_id": 30792447, "comment_id": 50445615, "body": "This sounds like an XY problem. Perl doesn&#39;t overwrite stuff by default, so you don&#39;t need to avoid it doing so. What are you actually trying to accomplish?"}], "owner": {"reputation": 113, "user_id": 3862604, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/4Q7Ov.png?s=128&g=1", "display_name": "Chemist not a Programmer", "link": "https://stackoverflow.com/users/3862604/chemist-not-a-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1434061351, "creation_date": 1434061351, "question_id": 30792447, "link": "https://stackoverflow.com/questions/30792447/using-perl-to-write-new-files-while-avoiding-overwriting-old-files", "title": "Using perl to write new files while avoiding overwriting old files", "body": "<p>I have a perl script that performs a mathematical process on two text files. I then use a bash script so the perl script is applied to every text file in the directory. I then want the text files (inputfiles) to be copied into a new files (outputfile) with a different name and with the exact file structure, if the mathematical process gives a certain value.</p>\n\n<p>For the first 2 text files I want the perl script to write both text files to the same new text file with a different name.</p>\n\n<p>so something like:</p>\n\n<pre><code>use File::Copy;\n\nfor ($value &lt;= 5) {\n  copy(\"$inputfile1\"&amp;&amp;\"$inputfile2\",\"outputfile_0001.txt\") or die \"copy failed; $!\";\n}\n</code></pre>\n\n<p>I do know this does not work, but I want both $inputfile1 and $inputfile2 in outputfile_0001.txt with the exact same file structure. </p>\n\n<p>For the subsequent text files I would want something like this:</p>\n\n<pre><code>use File::Copy;\n\nfor ($value &lt;= 5; my $count = 0) {\n if (-e \"outputfile_00\"(0[1-9]|1[0-9]|20\".txt\") {\n  ++$count;    \n  copy(\"$inputfile1\"&amp;&amp;\"$inputfile2\",\"outputfile_\"sprintf(\"%d04\",$count)\".txt\") or die \"copy failed; $!\";\n  }\n   } elsif {\n     copy(\"$inputfile1\"&amp;&amp;\"$inputfile2\",\"outputfile_0001.txt\") or die \"copy failed; $!\";\n   }\n</code></pre>\n\n<p>This way I don't overwrite any old files and a new file will be written with both new inputfiles in it. </p>\n\n<p>I know I have used some very poor scripting here but this is the best I currently have. I will make edits if anything is unclear! </p>\n"}, {"tags": ["perl", "oop", "moose"], "answers": [{"tags": [], "owner": {"reputation": 6566, "user_id": 748019, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/939cc882ebaf28150d4f716b933d5960?s=128&d=identicon&r=PG", "display_name": "stevenl", "link": "https://stackoverflow.com/users/748019/stevenl"}, "is_accepted": true, "score": 1, "last_activity_date": 1434094747, "last_edit_date": 1434094747, "creation_date": 1434094277, "answer_id": 30797643, "question_id": 30792161, "link": "https://stackoverflow.com/questions/30792161/creating-attribute-defaults-by-calling-a-wrapped-object/30797643#30797643", "title": "Creating attribute defaults by calling a wrapped object", "body": "<p>You can use <code>$attr</code> where your question marks are because it is still in scope when you declare the attributes.</p>\n\n<pre><code>foreach my $attr (@getDefaultsFromWrappers) {\n    has $attr =&gt; (\n        is      =&gt; 'rw',\n        default =&gt; sub { shift-&gt;wrapped-&gt;$attr() },\n        lazy    =&gt; 1,\n    );\n}\n</code></pre>\n\n<p>The following is a possible alternative, which you might want to use if your attribute declarations are not uniform:</p>\n\n<pre><code>has weight =&gt; (\n    is      =&gt; 'rw',\n    isa     =&gt; 'Num',\n    default =&gt; _build_default_sub('weight'),\n    lazy    =&gt; 1,\n);\n\nhas label =&gt; (\n    is      =&gt; 'rw',\n    isa     =&gt; 'Str',\n    default =&gt; _build_default_sub('label'),\n    lazy    =&gt; 1,\n);\n\nsub _build_default_sub {\n    my ($attr) = @_;\n    return sub { shift-&gt;wrapped-&gt;$attr };\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5246536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71f0685dbe615b2609ced386e64265a2?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/5246536/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1441529417, "creation_date": 1441529417, "answer_id": 32421722, "question_id": 30792161, "link": "https://stackoverflow.com/questions/30792161/creating-attribute-defaults-by-calling-a-wrapped-object/32421722#32421722", "title": "Creating attribute defaults by calling a wrapped object", "body": "<p>This may be better handled by method delegation and default values in the inner object.</p>\n\n<p>With these, the example you gave can be better written as:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\npackage InnerClass;\n\nuse Moose;\n\nhas weight =&gt; (\n    is =&gt; 'rw',\n    default =&gt; 1,\n);\n\npackage WrapperClass;\n\nuse Moose;\n\nhas wrapped =&gt; (\n    is =&gt; 'rw',\n    isa =&gt; 'InnerClass',\n    lazy =&gt; 1,\n    default =&gt; sub { InnerClass-&gt;new },\n    handles =&gt; [ 'weight' ],\n);\n\npackage main;\n\nmy $foo = WrapperClass-&gt;new;\n\nprint $foo-&gt;weight;\n</code></pre>\n\n<p>Any additional defaults would be added as default on the InnerClass, and within the WrapperClass, add to wrapped 'handles' array ref to indicate that it should be delegated to that object.</p>\n\n<p>If don't want the defaults to be applied to all instances of InnerClass, then you can remove the default from there, specify all attributes required (to give better error detection), and specify all attributes in the default constructor.</p>\n"}], "owner": {"reputation": 65, "user_id": 2111338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2451e4514c7d5c8dcd5f4c966a270aa?s=128&d=identicon&r=PG", "display_name": "tcn", "link": "https://stackoverflow.com/users/2111338/tcn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 30797643, "answer_count": 2, "score": 0, "last_activity_date": 1441529417, "creation_date": 1434059880, "last_edit_date": 1434087937, "question_id": 30792161, "link": "https://stackoverflow.com/questions/30792161/creating-attribute-defaults-by-calling-a-wrapped-object", "title": "Creating attribute defaults by calling a wrapped object", "body": "<p>I have WrapperClass object that has an InnerClass object as an attribute. The InnerClass object has a weight attribute. My WrapperClass object also has a weight attribute and I want its default value to be whatever the value of the InnerClass object's weight attribute is.</p>\n\n<pre><code>#!/usr/bin/perl\npackage InnerClass;\nuse Moose;\n\nhas 'weight' =&gt; (\n    is =&gt; 'rw',\n);\n\npackage WrapperClass;\nuse Moose;\n\nhas 'wrapped' =&gt; (\n    is =&gt; 'rw',\n    lazy =&gt; 1,\n    default =&gt; sub {InnerClass-&gt;new(weight =&gt; 1)},\n);\n\nhas 'weight' =&gt; (\n    is =&gt; 'rw',\n    default =&gt; sub {\n        my $self = shift;\n        $self-&gt;wrapped-&gt;weight()\n    },\n    lazy =&gt; 1,\n);\n</code></pre>\n\n<p>The code above works, but in reality InnerClass has many attributes which WrapperClass needs to do the same thing for. Ideally I would do something like this when I'm writing WrapperClass:</p>\n\n<pre><code>use Moose;\n\nhas 'wrapped' =&gt; (\n    is =&gt; 'rw',\n);\n\nmy @getDefaultsFromWrappers\n    = qw(weight height mass x y z label); # etc ...\n\nforeach my $attr (@getDefaultsFromWrappers) {\n    has $attr =&gt; (\n        is =&gt; 'rw',\n        default =&gt; sub {\n            # Somehow tell the default which attribute\n            # it needs to call from wrapped object?\n            my $self = shift;\n            $self-&gt;wrapped-&gt;???()\n        },\n        lazy =&gt; 1,\n    );\n}\n</code></pre>\n\n<p>However, there is no way of passing an argument to a default or builder to tell it which attribute it is building. I've considered using <code>caller</code> but this seems like a hack.</p>\n\n<p>Does anyone know how I could accomplish this style of attribute declaration or is it a case of declaring each attribute and its default separately?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 3898856, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4ba41455a288f3a09a706c4797615b76?s=128&d=identicon&r=PG&f=1", "display_name": "Ani", "link": "https://stackoverflow.com/users/3898856/ani"}, "edited": false, "score": 0, "creation_date": 1434054379, "post_id": 30790688, "comment_id": 49631035, "body": "Oops. I got ti working! It&#39;s too late in the night here that i must quit. :-)"}, {"owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "reply_to_user": {"reputation": 101, "user_id": 3898856, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4ba41455a288f3a09a706c4797615b76?s=128&d=identicon&r=PG&f=1", "display_name": "Ani", "link": "https://stackoverflow.com/users/3898856/ani"}, "edited": false, "score": 0, "creation_date": 1434054434, "post_id": 30790688, "comment_id": 49631075, "body": "@Ani Night is day for a programmer ;)"}, {"owner": {"reputation": 101, "user_id": 3898856, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4ba41455a288f3a09a706c4797615b76?s=128&d=identicon&r=PG&f=1", "display_name": "Ani", "link": "https://stackoverflow.com/users/3898856/ani"}, "edited": false, "score": 0, "creation_date": 1434054720, "post_id": 30790688, "comment_id": 49631252, "body": "shivams, Can&#39;t agree more although I&#39;m just trying my hand. Night time is the best for doing this, minus all the noise in the day."}], "tags": [], "owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "is_accepted": false, "score": 2, "last_activity_date": 1434054647, "last_edit_date": 1434054647, "creation_date": 1434054108, "answer_id": 30790688, "question_id": 30790614, "link": "https://stackoverflow.com/questions/30790614/perl-file-handler-not-writing-to-file/30790688#30790688", "title": "perl file handler not writing to file", "body": "<p>Here you open <code>FILE</code> for writing:</p>\n\n<pre><code>open (FILE, \"&gt;&gt;\", \"$failed_launches\") or die \"can't open $failed_launches $!\";\n</code></pre>\n\n<p>but here you try to read from <code>FILE</code>; you never actually write anything to it!</p>\n\n<pre><code>while ($line = &lt;FILE&gt;){\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "is_accepted": false, "score": 0, "last_activity_date": 1434054357, "creation_date": 1434054357, "answer_id": 30790766, "question_id": 30790614, "link": "https://stackoverflow.com/questions/30790614/perl-file-handler-not-writing-to-file/30790766#30790766", "title": "perl file handler not writing to file", "body": "<p>You are opening <code>FILE</code> for writing but you are not writing to it. Instead you are reading from it. If you want to write to <code>FILE</code> by <code>print</code> statement. It is done this way</p>\n\n<pre><code>print FILE \"text\";\n</code></pre>\n\n<p>Also what i think you want to do is write <code>$line</code> to <code>FILE</code>. You should do it this way </p>\n\n<pre><code>open (FILE, \"&gt;&gt;\", \"$failed_launches\") or die \"can't open $failed_launches $!\";\nprint FILE \"$line\\n\";    \nclose (FILE);\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 3898856, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4ba41455a288f3a09a706c4797615b76?s=128&d=identicon&r=PG&f=1", "display_name": "Ani", "link": "https://stackoverflow.com/users/3898856/ani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1434054647, "creation_date": 1434053858, "question_id": 30790614, "link": "https://stackoverflow.com/questions/30790614/perl-file-handler-not-writing-to-file", "title": "perl file handler not writing to file", "body": "<p>The file handler FILE below isn't working, am i missing something obvious ? I can't get it to write to the file $failed_launches ?</p>\n\n<pre><code>open(my $data, '&lt;', $file) or die \"Could not open '$file' $!\\n\";\nwhile (my $line = &lt;$data&gt;) {\n    chomp $line;\n\n    if ($csv-&gt;parse($line)) {\n\n      my @fields = $csv-&gt;fields();\n       foreach ($fields[1] =~ /Problems/ || $fields[1] =~ /Failure/) {\n          open (FILE, \"&gt;&gt;\", \"$failed_launches\") or die \"can't open $failed_launches $!\";\n          while ($line = &lt;FILE&gt;){\n          print \"$line\\n\";\n          }\n          close (FILE);\n          $status = 1;\n          $msg = \"CMR:'$fields[0]' unsuccessful, contact SE team\";\n          SendStatus($fields[2], $status, $msg);\n\n       }\n       foreach ($fields[1] =~ /Success/){\n          $status = 0;\n          $msg = \"CMR:'$fields[0]' was successful!\";\n          SendStatus($fields[2], $status, $msg);\n       }\n\n    } else {\n        warn \"Line could not be parsed: $line\\n\";\n      }\n</code></pre>\n"}, {"tags": ["bash", "perl", "directory", "monitor"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1434053795, "post_id": 30790560, "comment_id": 49630706, "body": "What&#39;s the actual ultimate goal here?"}, {"owner": {"reputation": 53, "user_id": 5000825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l2Pnl.jpg?s=128&g=1", "display_name": "insomniacjunkie", "link": "https://stackoverflow.com/users/5000825/insomniacjunkie"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1434054367, "post_id": 30790560, "comment_id": 49631027, "body": "I have to process certain documents specific to the directories that are created. Each day I end up checking to see if the folder for each document has been created. If I had a list of new directories that were created I could save 5-10 minutes each day"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1434054657, "post_id": 30790560, "comment_id": 49631221, "body": "In which case <code>find -mtime -1</code> might be appropriate."}, {"owner": {"reputation": 53, "user_id": 5000825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l2Pnl.jpg?s=128&g=1", "display_name": "insomniacjunkie", "link": "https://stackoverflow.com/users/5000825/insomniacjunkie"}, "edited": false, "score": 0, "creation_date": 1434055655, "post_id": 30790560, "comment_id": 49631832, "body": "The directories that already exist are modified frequently."}, {"owner": {"reputation": 5521, "user_id": 755851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bb0ef4d5aebec860f85f7c76b894fd?s=128&d=identicon&r=PG", "display_name": "Foon", "link": "https://stackoverflow.com/users/755851/foon"}, "edited": false, "score": 1, "creation_date": 1434057581, "post_id": 30790560, "comment_id": 49632789, "body": "note that you <i>may</i> want to look into FAM/GAMIN if you need to detect immediately when directories get created, but it sounds like that&#39;s unnecessary for your current problem.  (E.g. <a href=\"https://people.gnome.org/~veillard/gamin/python.html\" rel=\"nofollow noreferrer\">people.gnome.org/~veillard/gamin/python.html</a>) ; this is a tool that allows you to have an app that gets events when files are created (or accessed, deleted, etc. but you can set up filters for just creation if you want)"}, {"owner": {"reputation": 53, "user_id": 5000825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l2Pnl.jpg?s=128&g=1", "display_name": "insomniacjunkie", "link": "https://stackoverflow.com/users/5000825/insomniacjunkie"}, "edited": false, "score": 0, "creation_date": 1434057667, "post_id": 30790560, "comment_id": 49632837, "body": "Okay I&#39;ve made a note, that could potentially be useful in the future. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5000825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l2Pnl.jpg?s=128&g=1", "display_name": "insomniacjunkie", "link": "https://stackoverflow.com/users/5000825/insomniacjunkie"}, "edited": false, "score": 0, "creation_date": 1434054854, "post_id": 30790753, "comment_id": 49631328, "body": "This is precisely what I am looking for, I love this... I&#39;m running into an error however &quot;Can&#39;t create ~/.seen_files: No such file or directory at ./check_new_games line 20&quot;. I did try creating the file and not creating the file"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 53, "user_id": 5000825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l2Pnl.jpg?s=128&g=1", "display_name": "insomniacjunkie", "link": "https://stackoverflow.com/users/5000825/insomniacjunkie"}, "edited": false, "score": 0, "creation_date": 1434054963, "post_id": 30790753, "comment_id": 49631413, "body": "You shouldn&#39;t need to create it - the script does that. It might actually cause problems if you do, because it&#39;ll try and read it if it exists.  But you&#39;ll need to set <code>$seen_db</code> to a valid file path - I just made a guess. Your home drive for example (<code>~&#47;.seen_db</code> should evaluate to &#39;in your home drive&#39; but if that&#39;s not working, try something else). (Or you could put it in <code>&#47;home&#47;Project&#47;working&#47;.seen_db</code> maybe?)."}, {"owner": {"reputation": 53, "user_id": 5000825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l2Pnl.jpg?s=128&g=1", "display_name": "insomniacjunkie", "link": "https://stackoverflow.com/users/5000825/insomniacjunkie"}, "edited": false, "score": 0, "creation_date": 1434055077, "post_id": 30790753, "comment_id": 49631497, "body": "Okay for some reason &quot;~/.seen_files&quot; gave me a problem but I switched this to &quot;/home/username/.seen_games&quot; and it worked fine. THANK YOU! First time on StackOverflow and amazed at the fast response."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 53, "user_id": 5000825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l2Pnl.jpg?s=128&g=1", "display_name": "insomniacjunkie", "link": "https://stackoverflow.com/users/5000825/insomniacjunkie"}, "edited": false, "score": 2, "creation_date": 1434055139, "post_id": 30790753, "comment_id": 49631542, "body": "You asked a good question, with a clear problem spec and showed a solid attempt at it yourself. That elicits good responses generally."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 4, "last_activity_date": 1434054890, "last_edit_date": 1434054890, "creation_date": 1434054305, "answer_id": 30790753, "question_id": 30790560, "link": "https://stackoverflow.com/questions/30790560/monitoring-a-directory-for-new-sub-directories/30790753#30790753", "title": "Monitoring a Directory for New Sub Directories", "body": "<p>You are correct - linux doesn't (necessarily) track any specific creation times. So you're going to need to compare 'before' and 'after. </p>\n\n<p>Perl has a nice mechanism for this in the form of hashes, and the built in <a href=\"http://perldoc.perl.org/Storable.html\" rel=\"nofollow\"><code>Storable</code></a> module.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Storable;\n\nmy $path    = \"/home/Project/working\";\nmy $seen_db = \"~/.seen_files\";\n\nmy %seen;\nif ( -f $seen_db ) { %seen = %{ retrieve $seen_db } }\n\nforeach my $entry ( glob(\"$path/*\") ) {\n    if ( -d $entry ) {\n        print \"New entry: $entry\\n\" unless $seen{$entry}++;\n    }\n}\n\nstore( \\%seen, $seen_db );\n</code></pre>\n\n<p>If you want to store some file metadata in your db - like <code>mtime</code> then it'll be worth looking at the <a href=\"http://perldoc.perl.org/functions/stat.html\" rel=\"nofollow\"><code>stat</code></a> function. </p>\n\n<p>However this might be a little overkill - as you might simply find that <code>find</code> will do the trick:</p>\n\n<pre><code>find /home/Project/working -mtime -1 -type d -maxdepth 1 -ls\n</code></pre>\n\n<p>(You can also use <code>-exec</code> as find option to perform an action on each of the files, like running a script). </p>\n"}], "owner": {"reputation": 53, "user_id": 5000825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l2Pnl.jpg?s=128&g=1", "display_name": "insomniacjunkie", "link": "https://stackoverflow.com/users/5000825/insomniacjunkie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 30790753, "answer_count": 1, "score": 3, "last_activity_date": 1434054890, "creation_date": 1434053671, "question_id": 30790560, "link": "https://stackoverflow.com/questions/30790560/monitoring-a-directory-for-new-sub-directories", "title": "Monitoring a Directory for New Sub Directories", "body": "<p>There is a large shared directory on a Linux machine that contains a number of projects. Once per day I need to determine if any new directories have been created since the previous day.</p>\n\n<p>What would be the best way to go about doing this?</p>\n\n<p>Does anyone have any suggestions? I am unable to install additional tools and would prefer a Bash script or something in Perl. Ideally, I would be able to access the file/directory creation date but it seems that only the date last modified is recorded.</p>\n\n<p>I am trying to do something like this, but I can't seem to massage this to work properly. There must be a simple solution.</p>\n\n<pre><code>#!/bin/bash\ncd /home/Project/working\n\nif [ ! -e /tmp/new_games_diff_0 ]\nthen\n    echo \"First run... cannot determine if there any new games\"\n    ls -1 &gt; /tmp/new_games_diff_0\n    exit\nfi\n\nls -1 &gt; /tmp/new_games_diff_1\ngvimdiff /tmp/new_games_diff_1 /tmp/new_games_diff_0 &amp;\n\ncp /tmp/new_games_diff_1 /tmp/new_games_diff_0\n</code></pre>\n"}]