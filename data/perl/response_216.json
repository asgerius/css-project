[{"tags": ["xml", "perl", "unicode", "xml-libxml", "xml-entities"], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 9398953, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TTZSKuGxTCk/AAAAAAAAAAI/AAAAAAAAABY/jKLeuLIo4D0/photo.jpg?sz=128", "display_name": "Quote", "link": "https://stackoverflow.com/users/9398953/quote"}, "edited": false, "score": 0, "creation_date": 1551296507, "post_id": 54913249, "comment_id": 96592967, "body": "Thank you. Indeed this solves my problem in this specific context, but before accepting this answer, I&#39;ll let this question sit to see if anyone has a more global solution."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 123, "user_id": 9398953, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TTZSKuGxTCk/AAAAAAAAAAI/AAAAAAAAABY/jKLeuLIo4D0/photo.jpg?sz=128", "display_name": "Quote", "link": "https://stackoverflow.com/users/9398953/quote"}, "edited": false, "score": 0, "creation_date": 1551301173, "post_id": 54913249, "comment_id": 96595047, "body": "@Bluewoods This is the proper solution to your problem. When you have text (which is what you get from decoding the XML) you must always encode it to bytes to send it anywhere - files and pipes and sockets all take bytes. UTF-8 is the most common encoding to use for this purpose."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1551301286, "post_id": 54913249, "comment_id": 96595095, "body": "@StefanBecker It&#39;s misleading to call it a &quot;UTF-8&quot; string. It is a decoded character string, it does not have an encoding. That Perl has to internally store it in an encoding is an implementation detail."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1551302283, "last_edit_date": 1551302283, "creation_date": 1551296310, "answer_id": 54913249, "question_id": 54912494, "link": "https://stackoverflow.com/questions/54912494/use-perl-libxml-element-getattribute-without-expanding-unicode-entities-in-va/54913249#54913249", "title": "Use perl LibXML Element-&gt;getAttribute() without expanding unicode entities in value", "body": "<p>This might not be the answer you are looking for, but IMHO <code>getAttribute</code> gives you enough information, i.e. a Perl string, to solve your issue in another way. You are trying to write that Perl string to a non-UTF8 file, that's why you get the \"wide character\" warning.</p>\n\n<p>A stripped-down example of how to get the <code>U+xxxx</code> value you are looking for:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\nuse open qw(:encoding(UTF-8) :std);\n\nuse XML::LibXML;\n\nmy $dom = XML::LibXML-&gt;load_xml(IO =&gt; \\*DATA)\n    or die \"XML\\n\";\nmy $root = $dom-&gt;documentElement();\nprint $root-&gt;toString(), \"\\n\";\n\nmy $attr = $root-&gt;getAttribute('unicode');\nprintf(\"'%s' is %d (U+%04X)\\n\", $attr, ord($attr), ord($attr));\n\nexit 0;\n\n__DATA__\n&lt;glyph unicode=\"&amp;#x2000;\" /&gt;\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\n&lt;glyph unicode=\"&amp;#x2000;\"/&gt;\n'\u2000' is 8192 (U+2000)\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE:</strong> The documentation for <a href=\"https://metacpan.org/pod/distribution/XML-LibXML/lib/XML/LibXML/Parser.pod#expand_entities\" rel=\"nofollow noreferrer\"><code>expand_entities</code></a> is IMHO misleading. It talks about \"entities\", but it obviously means <code>ENTITY</code> definitions, i.e. <em>new</em> entities introduced in the document. The <a href=\"http://www.xmlsoft.org/entities.html\" rel=\"nofollow noreferrer\">libxml2 documentation</a> is unfortunately not much clearer. But this <a href=\"https://mail.gnome.org/archives/xml/2005-August/msg00163.html\" rel=\"nofollow noreferrer\">old message</a> seems to indicate that the behavior you describe is expected, ie. a XML parser should always replace pre-defined entities:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse XML::LibXML;\n\nmy $parser = XML::LibXML-&gt;new({\n    expand_entities =&gt; $ARGV[0] ? 1 : 0,\n});\n\nmy $dom = $parser-&gt;load_xml(IO =&gt; \\*DATA)\n    or die \"XML\\n\";\n\nmy $root = $dom-&gt;documentElement();\nprint \"toString():  \", $root-&gt;toString(), \"\\n\";\nprint \"textContent: \", $root-&gt;textContent(), \"\\n\";\n\nmy $attr = $root-&gt;getAttribute('test');\nprint \"attribute:   ${attr}\\n\";\n\nexit 0;\n\n__DATA__\n&lt;?xml version=\"1.0\"?&gt;\n&lt;!DOCTYPE foo [\n&lt;!ENTITY author \"Fluffy Bunny\"&gt;\n]&gt;\n&lt;tag test=\"&amp;lt;&amp;author;&amp;gt;\"&gt;&amp;lt;&amp;author;&amp;gt;&lt;/tag&gt;\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl 0\ntoString():  &lt;tag test=\"&amp;lt;&amp;author;&amp;gt;\"&gt;&amp;lt;&amp;author;&amp;gt;&lt;/tag&gt;\ntextContent: &lt;Fluffy Bunny&gt;\nattribute:   &lt;Fluffy Bunny&gt;\n\n$ perl dummy.pl 1\ntoString():  &lt;tag test=\"&amp;lt;Fluffy Bunny&amp;gt;\"&gt;&amp;lt;Fluffy Bunny&amp;gt;&lt;/tag&gt;\ntextContent: &lt;Fluffy Bunny&gt;\nattribute:   &lt;Fluffy Bunny&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": false, "score": 1, "last_activity_date": 1551302623, "creation_date": 1551302623, "answer_id": 54914717, "question_id": 54912494, "link": "https://stackoverflow.com/questions/54912494/use-perl-libxml-element-getattribute-without-expanding-unicode-entities-in-va/54914717#54914717", "title": "Use perl LibXML Element-&gt;getAttribute() without expanding unicode entities in value", "body": "<p>The <a href=\"https://metacpan.org/pod/distribution/XML-LibXML/lib/XML/LibXML/Attr.pod#serializeContent($docencoding)\" rel=\"nofollow noreferrer\">serializeContent()</a> method might do what you're after:</p>\n\n<pre><code>my $xml = '&lt;doc&gt;\n  &lt;glyph unicode=\"&amp;#x2000;\" /&gt;\n&lt;/doc&gt;';\n\nmy $dom = XML::LibXML-&gt;load_xml(\n    string          =&gt; $xml,\n    expand_entities =&gt; 0,\n    no_network      =&gt; 1,\n);\n\nmy($attr) = $dom-&gt;findnodes('//glyph[1]/@unicode');\n\nsay $attr-&gt;serializeContent();\n</code></pre>\n\n<p>Which outputs:</p>\n\n<pre><code>&amp;#x2000;\n</code></pre>\n\n<p>I suspect, that the <code>expand_entities</code> option doesn't apply to numeric character entities.  The documentation is unclear and I haven't looked at the source.</p>\n\n<p>In the more common case where you <em>do</em> want all entities expanded and just want the actual characters that those entities represent, you don't even need to call <code>getAttribute()</code>.  Each node object uses a <a href=\"http://grantm.github.io/perl-libxml-by-example/basics.html#attributes-via-tied-hash\" rel=\"nofollow noreferrer\">tied hash</a> interface so you can just do this:</p>\n\n<pre><code>my $text = $glyph-&gt;{unicode};\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 9398953, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TTZSKuGxTCk/AAAAAAAAAAI/AAAAAAAAABY/jKLeuLIo4D0/photo.jpg?sz=128", "display_name": "Quote", "link": "https://stackoverflow.com/users/9398953/quote"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1551302623, "creation_date": 1551293209, "last_edit_date": 1551295777, "question_id": 54912494, "link": "https://stackoverflow.com/questions/54912494/use-perl-libxml-element-getattribute-without-expanding-unicode-entities-in-va", "title": "Use perl LibXML Element-&gt;getAttribute() without expanding unicode entities in value", "body": "<p>I am currently trying to create a perl script that uses LibXML to process data in an SVG font.</p>\n\n<p>In an SVG font, each character is defined as a glyph element with an unicode attribute that defines its unicode address in the form of a unicode entity; like so:</p>\n\n<pre><code>&lt;glyph unicode=\"&amp;#x2000;\" /&gt;\n</code></pre>\n\n<p>Part of want I want to do is take the value of each glyph element's unicode attribute and process it like a string. However, when I use Element->getAttribute('unicode'); against a glyph node, it returns a \"wide character\" that displays as a placeholder rectangle, leading me to believe that it expands the unicode entity into a unicode character and returns that. </p>\n\n<p>When I create my parser, I set expand_entities to 0, so I am not sure what else I could do to prevent this. I am rather new with XML processing, so I'm not sure I actually understand what's going on or if this is even supposed to be preventable.</p>\n\n<p>Here is a code sample:</p>\n\n<pre><code>use utf8;\nuse open ':std', ':encoding(UTF-8)';\nuse strict;\nuse warnings;\nuse XML::LibXML;\n$XML::LibXML::skipXMLDeclaration = 1;\n\nmy $xmlFile = $ARGV[0];\n\nmy $parser = XML::LibXML-&gt;new();\n$parser-&gt;load_ext_dtd(0);\n$parser-&gt;validation(0);\n$parser-&gt;no_network(1);\n$parser-&gt;recover(1);\n$parser-&gt;expand_entities(0);\n\nmy $xmlDom = $parser-&gt;load_xml(location =&gt; $xmlFile);\n\nmy $xmlDomSvg = XML::LibXML::XPathContext-&gt;new();\n$xmlDomSvg-&gt;registerNs('svg', 'http://www.w3.org/2000/svg');\n\nforeach my $myGlyph ($xmlDomSvg-&gt;findnodes('/svg:svg/svg:defs/svg:font/svg:glyph', $xmlDom))\n{\n  my $myGlyphCode = $myGlyph-&gt;getAttribute('unicode');\n  print $myGlyphCode . \"\\n\";\n}\n</code></pre>\n\n<p>Note: If I run print $myGlyph->toString();, the unicode entity in the output is not expanded, hence why I'm concluding that the expansion is happening in the getAttribute method. </p>\n"}, {"tags": ["python", "perl", "parsing"], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1551287963, "last_edit_date": 1551287963, "creation_date": 1551286430, "answer_id": 54910634, "question_id": 54910354, "link": "https://stackoverflow.com/questions/54910354/how-to-parse-a-config-file-for-selected-output/54910634#54910634", "title": "how to parse a config file for selected output?", "body": "<p>As your config file is structured the first thing your script needs is a section detection. The following would be my first attempt in Perl:</p>\n\n<ul>\n<li>read lines from <code>STDIN</code></li>\n<li>range operator in scalar context, i.e. as flip-flop, to detect start and end of a section</li>\n<li>while in the section\n\n<ul>\n<li>parse start line to detect type</li>\n<li>parse other lines</li>\n<li>process line according to section type</li>\n</ul></li>\n</ul>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\n\nwhile (&lt;STDIN&gt;) {\n    chomp;\n\n    if (/^slb\\s+/../^!\\s*$/) {\n        #print \"SECTION: $_\\n\";\n        my($type, $remainder);\n\n        # start line\n        if      (($type, $remainder) = /^slb\\s+(\\S+)\\s+(.+)/) {\n            print \"SECTION ${type} START (${remainder})\\n\";\n\n        # other lines in section\n        } elsif (($type, $remainder) = /^\\s+(\\S+)\\s+(.+)/) {\n            print \"OTHER ${type} LINE (${remainder})\\n\";\n\n        # end line, i.e. \"!\"\n        } else {\n            #print \"END LINE: $_\\n\";\n        }\n    }\n}\nexit 0;\n</code></pre>\n\n<p>Test run with your example:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl &lt;dummy.txt\nSECTION server START (websrv1 192.168.10.5)\nOTHER port LINE (80 tcp)\nSECTION server START (websrv2 192.168.10.6)\nOTHER port LINE (80 tcp)\nSECTION server START (websrv3 192.168.10.7)\nOTHER port LINE (80 tcp)\nSECTION service-group START (websrv_80 tcp)\nOTHER member LINE (websrv1 80)\nOTHER member LINE (websrv2 80)\nOTHER member LINE (websrv3 80)\nSECTION virtual-server START (websrv1 192.168.15.11)\nOTHER port LINE (80 tcp)\nOTHER source-nat LINE (pool at_pool1)\nOTHER service-group LINE (websrv_80)\n</code></pre>\n\n<hr>\n\n<p><strong>Alternative:</strong> as your script will need to attach semantic meaning to the parsed content and make connections between different type of \"objects\" (virtual, server, groups, ...) you should look into writing a real lexer/parser for your config file syntax. In the end that will be less tedious than parsing the lines by hand.</p>\n"}, {"tags": [], "owner": {"reputation": 2463, "user_id": 2346731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54b21109a70f680b9c50261b90d22f87?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/2346731/marcus"}, "is_accepted": false, "score": 0, "last_activity_date": 1551286486, "creation_date": 1551286486, "answer_id": 54910658, "question_id": 54910354, "link": "https://stackoverflow.com/questions/54910354/how-to-parse-a-config-file-for-selected-output/54910658#54910658", "title": "how to parse a config file for selected output?", "body": "<p>This can be done with a relatively simple awk script, modified from <a href=\"https://stackoverflow.com/a/17988834/2346731\">this stackoverflow post.</a> </p>\n\n<pre><code>awk '/websrv1/{flag=1}/!/{flag=0;}flag' config-file.conf \n</code></pre>\n\n<p>substitute websrv1 as necessary for the search term you are interested in, and config-file.conf for the file to search through.</p>\n"}, {"tags": [], "owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "is_accepted": false, "score": 0, "last_activity_date": 1551286667, "creation_date": 1551286667, "answer_id": 54910713, "question_id": 54910354, "link": "https://stackoverflow.com/questions/54910354/how-to-parse-a-config-file-for-selected-output/54910713#54910713", "title": "how to parse a config file for selected output?", "body": "<p>Sinc you didn't show any effort of your own but appreciate help, here is something to get you started with perl:</p>\n\n<p>Do you, by any chance know about</p>\n\n<pre><code>if (cond .. cond) {\n}\n</code></pre>\n\n<p>This can be used in a while loop like this:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>while (&lt;&gt;) {\n    if (/^slb/ .. /^(!|END)/) {\n      ... here you can collect your slb-blocks into a hash\n    }\n}\n</code></pre>\n\n<p>If you have read your data into a hash like for example:</p>\n\n<pre><code>'slb service-group websrv_80 tcp' =&gt; \"  member websrv1 80\\n  member websrv2 80\\n  member websrv3 80\",\n'slb virtual-server websrv1 192.168.15.11' =&gt; \"  port 80 tcp\\n    source-nat pool at_pool1\\n    service-group websrv_80\"\n</code></pre>\n\n<p>I think it will be easy to iterate over the hash keys, printing out the values. Adittionally you can then parse the output for any additional data to print.</p>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1551305466, "creation_date": 1551305466, "answer_id": 54915300, "question_id": 54910354, "link": "https://stackoverflow.com/questions/54910354/how-to-parse-a-config-file-for-selected-output/54915300#54915300", "title": "how to parse a config file for selected output?", "body": "<p>Here is an example of how to get started using <a href=\"https://metacpan.org/pod/Regexp::Grammars\" rel=\"nofollow noreferrer\"><code>Regexp::Grammars</code></a>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Regexp::Grammars;\n\nmy $parser = qr{   \n          &lt;nocontext:&gt;\n          &lt;blocks&gt;\n          &lt;rule: blocks&gt; (?: &lt;[block]&gt;&lt;.block_separator&gt;)*\n          &lt;rule: block&gt; &lt;[line]&gt;+\n          &lt;token: line&gt; ^(?: $ | (?: (?!(?:end | !))(?: .*?$)))\\n?\n          &lt;token: block_separator&gt; ^(?: end | !)\\s*\\n?\n}mx;\n\nmy $fn = 'config.txt';\nopen ( my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\nmy $text = do { local $/; &lt;$fh&gt; };\nclose $fh;\n\nif ($text =~ $parser) {\n    for my $block (@{ $/{blocks}{block} }) {\n        print join '', @{ $block-&gt;{line} };\n        print \"\\n\", '-' x 40, \"\\n\";\n    }\n}\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>ip nat pool nat_pool1 192.168.10.100 192.168.10.100 netmask /24\n\n----------------------------------------\nip route 0.0.0.0 /0 192.168.15.1\n\n----------------------------------------\nslb server websrv1 192.168.10.5\n  port 80 tcp\n\n----------------------------------------\nslb server websrv2 192.168.10.6\n  port 80 tcp\n\n----------------------------------------\nslb server websrv3 192.168.10.7\n  port 80 tcp\n\n----------------------------------------\nslb service-group websrv_80 tcp\n  member websrv1 80\n  member websrv2 80\n  member websrv3 80\n\n----------------------------------------\nslb virtual-server websrv1 192.168.15.11\n  port 80 tcp\n    source-nat pool at_pool1\n    service-group websrv_80\n\n----------------------------------------\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 3850716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f80376a88c15886467998a7a02b49810?s=128&d=identicon&r=PG&f=1", "display_name": "jogle900", "link": "https://stackoverflow.com/users/3850716/jogle900"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1551305466, "creation_date": 1551285649, "question_id": 54910354, "link": "https://stackoverflow.com/questions/54910354/how-to-parse-a-config-file-for-selected-output", "title": "how to parse a config file for selected output?", "body": "<p>I have a text config file sitting in my home directory (linux). This is the format:</p>\n\n<pre><code>ip nat pool nat_pool1 192.168.10.100 192.168.10.100 netmask /24\n!\nip route 0.0.0.0 /0 192.168.15.1\n!\nslb server websrv1 192.168.10.5\n  port 80 tcp\n!\nslb server websrv2 192.168.10.6\n  port 80 tcp\n!\nslb server websrv3 192.168.10.7\n  port 80 tcp\n!\nslb service-group websrv_80 tcp\n  member websrv1 80\n  member websrv2 80\n  member websrv3 80\n!\nslb virtual-server websrv1 192.168.15.11\n  port 80 tcp\n    source-nat pool at_pool1\n    service-group websrv_80\n!\nend\n</code></pre>\n\n<p>I need a script (perl? / python?) that can be fed an argument like this:</p>\n\n<p>script_name virtual-server_name </p>\n\n<p>And then produce output showing the source-nat and service-group details tied to the virtual server. So, in the example config below, if ran\n\"script_name websrv1\"</p>\n\n<p>The script would parse for the websrv1 virtual server and display the output along with the source-nat and slb-service-group configuration info tied to it. The script would output something like this:</p>\n\n<pre><code>slb virtual-server websrv1 192.168.15.11\n  port 80 tcp\n    source-nat pool at_pool1\n    service-group websrv_80\n\nslb service-group websrv_80 tcp  \n  member websrv1 80  \n  member websrv2 80  \n  member websrv3 80  \n\nip nat pool nat_pool1 192.168.10.100 192.168.10.100 netmask /24\n</code></pre>\n\n<p>An extra benefit would be if it added the websrv1, 2 and 3 lines below it as well. Any help is very much appreciated.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 0, "last_activity_date": 1551285133, "creation_date": 1551285133, "answer_id": 54910164, "question_id": 54909546, "link": "https://stackoverflow.com/questions/54909546/bypass-optional-field-in-pattern-match/54910164#54910164", "title": "Bypass optional field in pattern match", "body": "<p>You need to match an optional <code>&lt;/tr&gt;</code>, so You can do that with the following <code>(?:&lt;\\/tr&gt;)?</code> in your regex. This makes a non capturing group, because of the <code>?:</code> at the start, that matches 0 or 1 times. So your new regex is</p>\n\n<pre><code>/&lt;tr&gt;&lt;td&gt;\\d+(?:&lt;\\/td&gt;)?&lt;td&gt;(.*?)\\s-.*?&lt;\\/td&gt;&lt;td&gt;(\\d+?)&lt;/g\n</code></pre>\n\n<p>Normally I'd add a bit about not using regex to parse HTML, but as this is not well formed HTML I'll let it pass. However if you can exercise some control over what is creating the HTML try and fix it so that the <code>&lt;td&gt;</code> and <code>&lt;/td&gt;</code> tags are balanced.</p>\n"}, {"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1551345247, "post_id": 54914887, "comment_id": 96608981, "body": "Personally, I&#39;d rather <code>-&gt;find()</code> than <code>-&gt;look_down(_tag =&gt; )</code>"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1551348419, "post_id": 54914887, "comment_id": 96610928, "body": "@Dada I agree that in this particular case <code>find()</code> will be simpler. But <code>look_down()</code> is more generic, e.g. <code>look_down(_tag =&gt; &#39;table&#39;, class =&gt; qr&#47;some-table&#47;, ...)</code>. In my experience screenscraping real-world HTML requires more than just the tag name."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1551349703, "post_id": 54914887, "comment_id": 96611759, "body": "Oh, <code>look_down</code> is definitely more generic. And <code>find</code> won&#39;t indeed get you far on real-world HTML. I just personally prefer using <code>find</code> when I&#39;m only interested in the tag (feels more lightweight, and with a more obvious semantics). But  it&#39;s just a matter of tastes I guess :)"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1551303502, "creation_date": 1551303502, "answer_id": 54914887, "question_id": 54909546, "link": "https://stackoverflow.com/questions/54909546/bypass-optional-field-in-pattern-match/54914887#54914887", "title": "Bypass optional field in pattern match", "body": "<p>It is generally a <strong>bad</strong> idea to use regexes for HTML, XML, etc.</p>\n\n<p>Instead you should use an appropriate parser to convert it to a DOM and then implement your algorithm in the DOM domain. Using your example:</p>\n\n<ul>\n<li>parse the HTML from file or string</li>\n<li>(find the correct table in the document - left out in the example as I don't have the complete HTML)</li>\n<li>loop over the rows in the table</li>\n<li>extract the information you are looking for from the columns of a row</li>\n</ul>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse HTML::TreeBuilder;\n\nmy $parser = new HTML::TreeBuilder;\n\nmy $root = $parser-&gt;parse_file(\\*DATA)\n    or die \"HTML\\n\";\n\nforeach my $row ($root-&gt;look_down(_tag =&gt; 'tr')) {\n    if (my @columns = $row-&gt;look_down(_tag =&gt; 'td')) {\n        my $player  = $columns[1]-&gt;as_text();\n        my $total   = $columns[2]-&gt;as_text();\n        print \"Player =&gt; $player  Total =&gt; $total\\n\";\n    }\n}\n\nexit 0;\n\n__DATA__\n&lt;body&gt;\n  &lt;tr&gt;&lt;td&gt;10&lt;td&gt;MANNY MACHADO - FA&lt;/td&gt;&lt;td&gt;37&lt;/td&gt;&lt;/tr&gt;\n  &lt;tr&gt;&lt;td&gt;107&lt;/td&gt;&lt;td&gt;ALEDMYS DIAZ - HOU&lt;/td&gt;&lt;td&gt;18&lt;/td&gt;&lt;/tr&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nPlayer =&gt; MANNY MACHADO - FA  Total =&gt; 37\nPlayer =&gt; ALEDMYS DIAZ - HOU  Total =&gt; 18\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1551304717, "creation_date": 1551304717, "answer_id": 54915154, "question_id": 54909546, "link": "https://stackoverflow.com/questions/54909546/bypass-optional-field-in-pattern-match/54915154#54915154", "title": "Bypass optional field in pattern match", "body": "<p>With <a href=\"https://metacpan.org/pod/Mojo::DOM\" rel=\"nofollow noreferrer\">Mojo::DOM</a>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Mojo::DOM;\n\nmy $html = &lt;&lt;'EOD';\n&lt;tr&gt;&lt;td&gt;10&lt;td&gt;MANNY MACHADO - FA&lt;/td&gt;&lt;td&gt;37&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;107&lt;/td&gt;&lt;td&gt;ALEDMYS DIAZ - HOU&lt;/td&gt;&lt;td&gt;18&lt;/td&gt;&lt;/tr&gt;\nEOD\n\nmy $dom = Mojo::DOM-&gt;new($html);\nforeach my $tr ($dom-&gt;find('tr')-&gt;each) {\n  my @cells = $tr-&gt;children('td')-&gt;each;\n  my $player = $cells[1]-&gt;all_text;\n  my $total = $cells[2]-&gt;all_text;\n\n  # or alternatively\n  my $player = $tr-&gt;at('td:nth-of-type(2)')-&gt;all_text;\n  my $total = $tr-&gt;at('td:nth-of-type(3)')-&gt;all_text;\n\n  print \"\\nPlayer =&gt; $player  Total =&gt; $total\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "is_accepted": false, "score": 0, "last_activity_date": 1551337696, "creation_date": 1551337696, "answer_id": 54920195, "question_id": 54909546, "link": "https://stackoverflow.com/questions/54909546/bypass-optional-field-in-pattern-match/54920195#54920195", "title": "Bypass optional field in pattern match", "body": "<p>I'm also someone who would go for a proper HTML or XML modul to extract information like others above already said. So I will not elaborate on that.</p>\n\n<p>If I would have to extract from the wrongly formatted html you showed, I'd stick with a multi step aproach.</p>\n\n<ol>\n<li>cleanup</li>\n<li>extract</li>\n<li>more cleanup</li>\n</ol>\n\n<p>For cleanup I'd first check what's common. In this case every line starts with <code>&lt;tr&gt;</code> so I'd settle for that to find my lines, skipping those not starting with <code>&lt;tr&gt;</code>, after some optional whitespace:</p>\n\n<pre><code>while (&lt;&gt;) {\n    next unless /^\\s*&lt;tr&gt;/;\n</code></pre>\n\n<p>The next common thing I noticed is that every interesting field starts with <code>td</code>. So I'd replace it with something more easy like a tab. Assuming there could be tabs already, I'd first replace them with spaces:</p>\n\n<pre><code>    tr/\\t/ /;\n    s/&lt;td&gt;/\\t/g;\n</code></pre>\n\n<p>Now what I have is some tags sprinkled around the data I really need. And the data I really need is prepended with a tab. So let's delete the tags:</p>\n\n<pre><code>    s/&lt;.*?&gt;//g;\n</code></pre>\n\n<p>Finally I can extract my data:</p>\n\n<pre><code>    my($dummy, $number, $player, $total)= split /\\t/;\n</code></pre>\n\n<p>But since the player has some stuff appended (after <code>-</code>) let's remove that as well</p>\n\n<pre><code>    $player=~ s/\\s-.*//;\n    print \"\\nPlayer =&gt; $player  Total =&gt; $total\\n\";\n}\n</code></pre>\n\n<p>Putting it together and using DATA:</p>\n\n<pre><code>while (&lt;DATA&gt;) {\n    next unless /^\\s*&lt;tr&gt;/;\n    tr/\\t/ /;\n    s/&lt;td&gt;/\\t/g;\n    s/&lt;.*?&gt;//g;\n    my($dummy, $number, $player, $total)= split /\\t/;\n    $player=~ s/\\s-.*//;\n    print \"\\nPlayer =&gt; $player  Total =&gt; $total\\n\";\n}\n__DATA__\n&lt;tr&gt;&lt;td&gt;10&lt;td&gt;MANNY MACHADO - FA&lt;/td&gt;&lt;td&gt;37&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;107&lt;/td&gt;&lt;td&gt;ALEDMYS DIAZ - HOU&lt;/td&gt;&lt;td&gt;18&lt;/td&gt;&lt;/tr&gt;\n</code></pre>\n\n<p>Please be prepared that you might come across data with more whitespace and the approach will fail.</p>\n\n<p>Example:</p>\n\n<pre><code>&lt;tr&gt;\n  &lt;td&gt;10\n  &lt;td&gt;MANNY MACHADO - FA&lt;/td&gt;\n  &lt;td&gt;37&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;107&lt;/td&gt;\n    &lt;td&gt;ALEDMYS DIAZ - HOU&lt;/td&gt;\n    &lt;td&gt;18&lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 10157177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cifsisoxCms/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qgl7bNfO7PoxgxvnAkalc7y4NiXw/mo/photo.jpg?sz=128", "display_name": "James Finnegan", "link": "https://stackoverflow.com/users/10157177/james-finnegan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1551337696, "creation_date": 1551283124, "question_id": 54909546, "link": "https://stackoverflow.com/questions/54909546/bypass-optional-field-in-pattern-match", "title": "Bypass optional field in pattern match", "body": "<p>I'm trying to pull out the names of the players and totals, but in some cases there is an extra html tag following the number of the player in the list.  So how can I bypass that extra field when it appears.  I can't put parenthesis around it because it will try to match it, correct?</p>\n\n<pre><code>&lt;tr&gt;&lt;td&gt;10&lt;td&gt;MANNY MACHADO - FA&lt;/td&gt;&lt;td&gt;37&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;107&lt;/td&gt;&lt;td&gt;ALEDMYS DIAZ - HOU&lt;/td&gt;&lt;td&gt;18&lt;/td&gt;&lt;/tr&gt;\n\nwhile($content =~ /&lt;tr&gt;&lt;td&gt;\\d+?\\S+?&lt;td&gt;(.*?)\\s-.*?&lt;\\/td&gt;&lt;td&gt;(\\d+?)&lt;/g) {\n  my $player = $1;\n  my $total = $2;\n  print \"\\nPlayer =&gt; $player  Total =&gt; $total\\n\";\n}\n</code></pre>\n\n<p>I tried using the '\\S+?' to bypass it, but in this case it doesn't print out anything where the number of the player is less than 10.</p>\n"}, {"tags": ["perl", "grep", "pdl"], "answers": [{"comments": [{"owner": {"reputation": 357, "user_id": 3752927, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/f0d8aad08c87abac3043cf23f85cb3c9?s=128&d=identicon&r=PG&f=1", "display_name": "Alexglvr", "link": "https://stackoverflow.com/users/3752927/alexglvr"}, "edited": false, "score": 0, "creation_date": 1551429594, "post_id": 54908309, "comment_id": 96644672, "body": "thank you for you answer. It works if $titi is in first position of @toto. if $titi = pdl(4,5,6) for example it does not work..."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 357, "user_id": 3752927, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/f0d8aad08c87abac3043cf23f85cb3c9?s=128&d=identicon&r=PG&f=1", "display_name": "Alexglvr", "link": "https://stackoverflow.com/users/3752927/alexglvr"}, "edited": false, "score": 0, "creation_date": 1551433624, "post_id": 54908309, "comment_id": 96646758, "body": "@Alexglvr It works fine for me. I wonder why it does not work for you? I have updated my answer to show what I tried."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 357, "user_id": 3752927, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/f0d8aad08c87abac3043cf23f85cb3c9?s=128&d=identicon&r=PG&f=1", "display_name": "Alexglvr", "link": "https://stackoverflow.com/users/3752927/alexglvr"}, "edited": false, "score": 0, "creation_date": 1551437028, "post_id": 54908309, "comment_id": 96648612, "body": "Note: If you only work with integers (not floating points), I would recommend the simpler solution in the other answer of @simbabque . I.e.: <code>print(&quot;OK\\n&quot;) if (grep { PDL::all( $_ == $titi) } @toto);</code>"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1551433663, "last_edit_date": 1551433663, "creation_date": 1551279472, "answer_id": 54908309, "question_id": 54905561, "link": "https://stackoverflow.com/questions/54905561/perl-pdl-search-if-a-vector-is-in-an-array-or-in-a-matrix/54908309#54908309", "title": "Perl PDL : Search if a vector is in an array or in a matrix", "body": "<p>You can use <a href=\"https://metacpan.org/pod/Test::PDL#eq_pdl\" rel=\"nofollow noreferrer\"><code>eq_pdl</code></a> from <a href=\"https://metacpan.org/pod/Test::PDL\" rel=\"nofollow noreferrer\"><code>Test::PDL</code></a>:</p>\n\n<pre><code>use PDL;\nuse Test::PDL qw( eq_pdl );\nmy @toto;\npush(@toto, pdl(1,2,3));\npush(@toto, pdl(4,5,6));\nmy $titi = pdl(4,5,6);\nprint(\"OK\\n\") if (grep { eq_pdl( $_, $titi) } @toto);\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>OK\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1551279619, "creation_date": 1551279619, "answer_id": 54908368, "question_id": 54905561, "link": "https://stackoverflow.com/questions/54905561/perl-pdl-search-if-a-vector-is-in-an-array-or-in-a-matrix/54908368#54908368", "title": "Perl PDL : Search if a vector is in an array or in a matrix", "body": "<p>Disclaimer: I don't know anything about PDL. I've read the source to figure this one out.</p>\n\n<p>There's a function <code>PDL::all()</code> that you can use in conjunction with the overloaded comparison operator <code>==</code>. </p>\n\n<pre><code>use PDL;\nmy $foo = pdl(1,2,3);\nmy $bar = pdl(4,5,6);\nmy $qrr = pdl(1,2,3);\n\nprint \"OK 1\" if PDL::all( $foo == $bar );\nprint \"OK 2\" if PDL::all( $foo == $qrr );\n</code></pre>\n\n<p>I'm still looking for the documentation.</p>\n"}], "owner": {"reputation": 357, "user_id": 3752927, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/f0d8aad08c87abac3043cf23f85cb3c9?s=128&d=identicon&r=PG&f=1", "display_name": "Alexglvr", "link": "https://stackoverflow.com/users/3752927/alexglvr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 54908368, "answer_count": 2, "score": 3, "last_activity_date": 1551433663, "creation_date": 1551270659, "question_id": 54905561, "link": "https://stackoverflow.com/questions/54905561/perl-pdl-search-if-a-vector-is-in-an-array-or-in-a-matrix", "title": "Perl PDL : Search if a vector is in an array or in a matrix", "body": "<p>I try to make a grep like on a PDL matrix or array of Vector :</p>\n\n<pre><code>my @toto;\npush(@toto, pdl(1,2,3));\npush(@toto, pdl(4,5,6));\nmy $titi=pdl(1,2,3);\nprint(\"OK\") if (grep { $_ eq $titi} @toto);\n</code></pre>\n\n<p>I also tried</p>\n\n<pre><code>my @toto;\npush(@toto, pdl(1,2,3));\npush(@toto, pdl(4,5,6));\nmy $titi=pdl(1,2,3);\nprint(\"OK\") if (grep { $_ eq $titi} PDL::Matrix-&gt;pdl(\\@toto));\n</code></pre>\n\n<p>None works.</p>\n\n<p>Any help Please</p>\n"}, {"tags": ["arrays", "function", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 4, "creation_date": 1551263955, "post_id": 54903497, "comment_id": 96574105, "body": "It is not possible to pass two array arguments by value, all parameter will end up in the first array. Pass them by reference instead. For example, <code>get_coordinate(\\@array_col, \\@array_lin)</code>"}, {"owner": {"reputation": 197, "user_id": 9965855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fe94a03fb6a97722213a1f40110657?s=128&d=identicon&r=PG&f=1", "display_name": "SLP", "link": "https://stackoverflow.com/users/9965855/slp"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1551264024, "post_id": 54903497, "comment_id": 96574149, "body": "Thanks for your answer."}, {"owner": {"reputation": 197, "user_id": 9965855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fe94a03fb6a97722213a1f40110657?s=128&d=identicon&r=PG&f=1", "display_name": "SLP", "link": "https://stackoverflow.com/users/9965855/slp"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1551264041, "post_id": 54903497, "comment_id": 96574164, "body": "What do you mean by &quot;Pass them by reference&quot; ?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1551264054, "post_id": 54903497, "comment_id": 96574170, "body": "It&#39;s not an answer! He&#39;s probably writing one now though."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1551264119, "post_id": 54903497, "comment_id": 96574213, "body": "@SLP Re: <i>&quot;What do you mean by pass by reference&quot;</i>: See <a href=\"https://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1551264527, "post_id": 54903497, "comment_id": 96574517, "body": "@simbabque I do not have time to answer now, feel free to post your own :)"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1551264183, "creation_date": 1551264183, "answer_id": 54903607, "question_id": 54903497, "link": "https://stackoverflow.com/questions/54903497/perl-function-with-two-array-arguments/54903607#54903607", "title": "Perl - function with two array arguments", "body": "<p>Assigning to several arrays (or hashes) doesn't do what you think:</p>\n\n<pre><code>my (@array1, @array2) = ...\n</code></pre>\n\n<p>The first array gets all the elements. How should it know where to stop?</p>\n\n<p>You can use array references instead:</p>\n\n<pre><code>sub get_coordinate {\n    my ($arr1, $arr2) = @_;\n    my @arr1 = @$arr1;\n    my @arr2 = @$arr2;\n    ...\n}\nget_coordinate(\\@array1, \\@array2);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 197, "user_id": 9965855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fe94a03fb6a97722213a1f40110657?s=128&d=identicon&r=PG&f=1", "display_name": "SLP", "link": "https://stackoverflow.com/users/9965855/slp"}, "edited": false, "score": 2, "creation_date": 1551264884, "post_id": 54903702, "comment_id": 96574748, "body": "Thank you for the well detailed answer"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 8, "last_activity_date": 1551279673, "last_edit_date": 1551279673, "creation_date": 1551264495, "answer_id": 54903702, "question_id": 54903497, "link": "https://stackoverflow.com/questions/54903497/perl-function-with-two-array-arguments/54903702#54903702", "title": "Perl - function with two array arguments", "body": "<p>In Perl, all lists are flat. These two lists are equivalent.</p>\n\n<pre><code>( 1, 2, ( 3, 4, ( 5 ), (6, 7), 8), (), )\n( 1, 2, 3, 4, 5, 6, 7, 8 )\n</code></pre>\n\n<p>The same thing also happens when take several arrays and stick them in a list.</p>\n\n<pre><code>my @foo = (1, 2, 3);\nmy @bar = (4, 5, 6);\nmy @new = (@foo, @bar); # 1, 2, 3, 4, 5, 6\n</code></pre>\n\n<p>When you pass things to a function, those things get turned into a list of arguments. Therefore, the arrays will both end up in one list, like <code>@foo</code> and <code>@bar</code> above.</p>\n\n<pre><code>frobnicate(@foo, @bar);\n</code></pre>\n\n<p>When you assign something in list context, the entire list will be assigned left to right. For scalars in the list on the left-hand-side this means they will get their values. But as soon as there is an array, this will be greedy. It will suck up all the remaining values.</p>\n\n<pre><code>my ($one, $two, @rest, $will_be_undef) = (1, 2, 3, 4, 5, 6);\n</code></pre>\n\n<p>The values will be assigned like this:</p>\n\n<pre><code>$one = 1;\n$two = 2;\n@rest = ( 3, 4, 5, 6 );\n$will_be_undef = undef;\n</code></pre>\n\n<hr>\n\n<p>What you need to do to pass two arrays is to take references, and dereference them in our function.</p>\n\n<pre><code>frobnicate( \\@foo, \\@bar );\n\nsub frobnicate {\n    my ($first_array, $second_array) = @_;\n\n    my @foo = @{ $first_array };\n    my @bar = @{ $second_array };\n\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 9965855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fe94a03fb6a97722213a1f40110657?s=128&d=identicon&r=PG&f=1", "display_name": "SLP", "link": "https://stackoverflow.com/users/9965855/slp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1551279673, "creation_date": 1551263866, "question_id": 54903497, "link": "https://stackoverflow.com/questions/54903497/perl-function-with-two-array-arguments", "title": "Perl - function with two array arguments", "body": "<p>I have troubles using a function in Perl.</p>\n\n<p>My function has 2 arguments which are arrays :</p>\n\n<pre><code>sub get_coordinate {\n    my (@array_col, @array_lin) = (@_);\n\n    do some stuff\n}\n</code></pre>\n\n<p>I call it this way :</p>\n\n<pre><code>    $index_col                  = int(rand(10));\n    $index_lin                  = int(rand(10));\n    @array_col                  = (0,0,0,0,0,0,0,0,0,0);\n    @array_lin                  = (0,0,0,0,0,0,0,0,0,0);\n    $array_col[$index_col]      = 1;\n    $array_lin[$index_lin]      = 1;\n\n    get_coordinate(@array_col, @array_lin);\n</code></pre>\n\n<p>My problem is that I get the error message : Use of uninitialized value within @array_lin in numeric eq (==) at\n        switch.pl line 82 (#1)\n    (W uninitialized) An undefined value was used as if it were already\n    defined.  It was interpreted as a \"\" or a 0, but maybe it was a mistake.\n    To suppress this warning assign a defined value to your variables.</p>\n\n<p>I don't understand why @array_col is initialized an not @array_lin.</p>\n\n<p>When I print @array_col and @array_lin inside the function this way :</p>\n\n<pre><code>print \"@array_col\\n@array_lin\\n\";\n</code></pre>\n\n<p>I get : 0 0 0 0 0 0 0 1 0 0 1 0 0 0 0 0 0 0 0 0</p>\n\n<p>Any idea ?</p>\n\n<p>Thx,\nSLP</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 1281, "user_id": 6647585, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cac5dd1f2f2645dcc1dbf1165fed77c6?s=128&d=identicon&r=PG&f=1", "display_name": "Vlam", "link": "https://stackoverflow.com/users/6647585/vlam"}, "is_accepted": false, "score": 1, "last_activity_date": 1551246311, "creation_date": 1551246311, "answer_id": 54898806, "question_id": 54898715, "link": "https://stackoverflow.com/questions/54898715/regular-expression-parsing-multiple-text-on-condition/54898806#54898806", "title": "Regular expression parsing multiple text on condition", "body": "<p>This regex should work:</p>\n\n<pre><code>/(\\d+ vacancies|no\\. of post \\: \\d+)/ig\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1551251533, "creation_date": 1551251533, "answer_id": 54899945, "question_id": 54898715, "link": "https://stackoverflow.com/questions/54898715/regular-expression-parsing-multiple-text-on-condition/54899945#54899945", "title": "Regular expression parsing multiple text on condition", "body": "<p>While it is certainly possible to squeeze it into one unreadable regular expression conglomerate, divide and conquer might be the better strategy. My solution presents two possible alternatives.</p>\n\n<p>You can of course relax or tighten the regexes based on your real-life input.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $string1 = \"Job Description : Advt.No.01/2019-FCI Category IIIJunior Engineer /Assistant recruitment in Food Corporation of India (FCI) FCI recruiting 4103 Vacancies f...\";\nmy $string2 = \"Job Description : Assistant Professor (Management) job recruitment in Saurashtra University on contract basis No. of Post : 01 Eligibility :  As per ...\";\n\n# alternative 1\nforeach my $string ($string1, $string2) {\n    $string =~ /(\\d+)\\s+vacancies/i    ||\n    $string =~ /no\\. of post : (\\d+)/i\n        or die \"no match for '${string}'\\n\";\n    print \"MATCH: $1\\n\";\n}\n\n# alternative 2\nforeach my $string ($string1, $string2) {\n    my($submatch) = $string =~ /(\\d+\\s+vacancies|no\\. of post : \\d+)/i\n        or die \"no match for '${string}'\\n\";\n    my($number) = $submatch =~ /(\\d+)/;\n    print \"MATCH: ${number}\\n\";\n}\n\n\nexit 0;\n</code></pre>\n\n<p>Test output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nMATCH: 4103\nMATCH: 01\nMATCH: 4103\nMATCH: 01\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 0, "last_activity_date": 1551262944, "creation_date": 1551262944, "answer_id": 54903163, "question_id": 54898715, "link": "https://stackoverflow.com/questions/54898715/regular-expression-parsing-multiple-text-on-condition/54903163#54903163", "title": "Regular expression parsing multiple text on condition", "body": "<p>You can use like this, I combined both your regex with <code>|</code> and used <code>(?| )</code> to get the all matches in <code>$1</code> </p>\n\n<pre><code>$string=~m/(?|(?:pos.*?)\\s+(\\d+)\\s+|(\\d+)\\s+(?:vac.*?))/ig;\nprint $1,\"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 10999585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd4eba3e23ad98e940a457edcceec1e7?s=128&d=identicon&r=PG&f=1", "display_name": "Swapnil", "link": "https://stackoverflow.com/users/10999585/swapnil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1551262944, "creation_date": 1551245868, "last_edit_date": 1551250142, "question_id": 54898715, "link": "https://stackoverflow.com/questions/54898715/regular-expression-parsing-multiple-text-on-condition", "title": "Regular expression parsing multiple text on condition", "body": "<p>String mentioned below</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$string1 = \"Job Description : Advt.No.01/2019-FCI Category IIIJunior Engineer /Assistant recruitment in Food Corporation of India (FCI) FCI recruiting 4103 Vacancies f...\";\n$string2 = \"Job Description : Assistant Professor (Management) job recruitment in Saurashtra University on contract basis No. of Post : 01 Eligibility :  As per ...\";\n</code></pre>\n\n<p>The above string may be one at a time in text</p>\n\n<ol>\n<li>case: I need to parse no of post or vacancies numeric value. suppose if i find vacancies keyword then i need to get numeric value close to vacancies.</li>\n<li>case: suppose if now vacancies is not found in string then again i need to perform search on No. of Post and find numeric value close to it.</li>\n</ol>\n\n<p>So, how may I write the regular expression for it. I have two regular expression </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$string2 =~ m/(?:pos.*?)\\s+(\\d+)\\s+/ig;\nprint $1;\n\n$string1 =~ m/(\\d+)\\s+(?:vac.*?)/ig;\nprint $2;\n</code></pre>\n\n<p>I need to write one regular expression to work in both case. So, how may I proceed?</p>\n"}, {"tags": ["perl", "loops", "break"], "comments": [{"owner": {"reputation": 53, "user_id": 6649756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9966e4ad5f8afe6db3d41d6d8b4f499?s=128&d=identicon&r=PG&f=1", "display_name": "Sally Goldin", "link": "https://stackoverflow.com/users/6649756/sally-goldin"}, "edited": false, "score": 0, "creation_date": 1551243779, "post_id": 54898332, "comment_id": 96564874, "body": "Of course I am using &quot;strict&quot;."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1551245989, "post_id": 54898332, "comment_id": 96565490, "body": "Also see <a href=\"https://metacpan.org/pod/List::MoreUtils\" rel=\"nofollow noreferrer\">List::MoreUtils</a> with the whole range of its <a href=\"https://metacpan.org/pod/List::MoreUtils#Searching\" rel=\"nofollow noreferrer\">search</a> methods, eg <code>firstval</code> and <code>firstidx</code>"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 6649756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9966e4ad5f8afe6db3d41d6d8b4f499?s=128&d=identicon&r=PG&f=1", "display_name": "Sally Goldin", "link": "https://stackoverflow.com/users/6649756/sally-goldin"}, "edited": false, "score": 0, "creation_date": 1551258726, "post_id": 54898367, "comment_id": 96570797, "body": "Seems counter-intuitive, but I won&#39;t make this mistake again!"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1551300897, "post_id": 54898367, "comment_id": 96594941, "body": "The easiest way to avoid this problem is to always use loop-lexical iterators (<code>foreach my $foo</code>). Assign separately to a variable declared outside if you want to save a value."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 8, "last_activity_date": 1551243933, "creation_date": 1551243933, "answer_id": 54898367, "question_id": 54898332, "link": "https://stackoverflow.com/questions/54898332/perl-last-statement-and-variable-scope/54898367#54898367", "title": "perl &#39;last&#39; statement and variable scope", "body": "<p>It's not the <code>last</code> statement, <a href=\"https://metacpan.org/pod/perlsyn#Foreach-Loops\" rel=\"noreferrer\">it's the <code>foreach</code> statement</a>.</p>\n\n<blockquote>\n  <p>The foreach loop iterates over a normal list value and sets the scalar variable VAR to be each element of the list in turn. If the variable is preceded with the keyword my, then it is lexically scoped, and is therefore visible only within the loop. <strong>Otherwise, the variable is implicitly local to the loop and regains its former value upon exiting the loop.</strong> If the variable was previously declared with my, it uses that variable instead of the global one, but it's still localized to the loop. This implicit localization occurs only in a foreach loop. (Emphasis added).</p>\n</blockquote>\n"}], "owner": {"reputation": 53, "user_id": 6649756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9966e4ad5f8afe6db3d41d6d8b4f499?s=128&d=identicon&r=PG&f=1", "display_name": "Sally Goldin", "link": "https://stackoverflow.com/users/6649756/sally-goldin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 54898367, "answer_count": 1, "score": 3, "last_activity_date": 1551243933, "creation_date": 1551243707, "question_id": 54898332, "link": "https://stackoverflow.com/questions/54898332/perl-last-statement-and-variable-scope", "title": "perl &#39;last&#39; statement and variable scope", "body": "<p>Should-be simple Perl construction is not behaving as I expect.</p>\n\n<p>The <code>@closest</code> array holds strings of the form \"NNN-NNN\". I am trying to find the first array element where the initial \"NNN\" matches a specific value.</p>\n\n<p>Since I have declared <code>$compoundKey</code> outside the loop, I expect it to be persistent. The loop behaves as expected, exiting when I get a match. However, after the code exits the loop, the <code>$compoundKey</code> variable is empty. (See log output after code. I am looking for \"83\". The matched element is not the last element in the array.) </p>\n\n<pre><code>    my $compoundKey;\n    foreach $compoundKey (@closest)\n    {\n        logentry(\"In loop compoundKey is $compoundKey\\n\");\n        last if ($compoundKey =~ /^$RID/);   \n    }\n    logentry(\"Outside loop compoundKey is $compoundKey\\n\");\n</code></pre>\n\n<p>Log file:</p>\n\n<pre><code>    2019-02-27 18:15:26: In loop compoundKey is 90-1287\n    2019-02-27 18:15:26: In loop compoundKey is 86-1223\n    2019-02-27 18:15:26: In loop compoundKey is 86-1235\n    2019-02-27 18:15:26: In loop compoundKey is 87-1316\n    2019-02-27 18:15:26: In loop compoundKey is 89-1219\n    2019-02-27 18:15:26: In loop compoundKey is 83-1224\n    2019-02-27 18:15:26: Outside loop compoundKey is \n</code></pre>\n\n<p>I assume I can fix this by doing an explicit assignment of a temporary loop variable to <code>$compoundKey</code>, but I'm still somewhat mystified. Is there some bug in my code that I am not seeing? Or does the \"last\" statement in Perl behave in a totally different way than \"break\" in C or Java?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl", "influxdb"], "comments": [{"owner": {"reputation": 9501, "user_id": 55366, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/89489696e09f6d1307ce5726c35a2c3e?s=128&d=identicon&r=PG", "display_name": "Orjanp", "link": "https://stackoverflow.com/users/55366/orjanp"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1551332187, "post_id": 54896332, "comment_id": 96603474, "body": "Yes, the documentation says that the data element is a hash if the query was successful."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1551723605, "post_id": 54896332, "comment_id": 96736098, "body": "fyi: removed my comments on hashes/objects etc (it&#39;s all in the answers)"}], "answers": [{"comments": [{"owner": {"reputation": 9501, "user_id": 55366, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/89489696e09f6d1307ce5726c35a2c3e?s=128&d=identicon&r=PG", "display_name": "Orjanp", "link": "https://stackoverflow.com/users/55366/orjanp"}, "edited": false, "score": 0, "creation_date": 1551331932, "post_id": 54898303, "comment_id": 96603408, "body": "I did, and it said, &quot;If the returned object evaluates to true, indicating that the query was successful, then the returned object&#39;s data attribute contains the entire response from InfluxDB as Perl hash.&quot; And when I tried using the data attribute as a hash, I got the &quot;can&#39;t be used as a hash&quot; error. That was somewhat confusing."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1551243552, "creation_date": 1551243552, "answer_id": 54898303, "question_id": 54896332, "link": "https://stackoverflow.com/questions/54896332/looping-the-data-structure-returned-from-influxdbhttp-in-perl/54898303#54898303", "title": "Looping the data structure returned from InfluxDB::HTTP in perl", "body": "<p><code>Object returned by call to InfluxDB::HTTP::query() ... can't be used as &lt;HASH&gt;</code> is a clue that <code>$res</code> is an object. <a href=\"https://metacpan.org/pod/InfluxDB::HTTP#RETURN-VALUES-AND-ERROR-HANDLING\" rel=\"nofollow noreferrer\">Consult the relevant API</a> to see what operations are allowed on the object to access its data.</p>\n"}, {"comments": [{"owner": {"reputation": 9501, "user_id": 55366, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/89489696e09f6d1307ce5726c35a2c3e?s=128&d=identicon&r=PG", "display_name": "Orjanp", "link": "https://stackoverflow.com/users/55366/orjanp"}, "edited": false, "score": 1, "creation_date": 1551332377, "post_id": 54901583, "comment_id": 96603526, "body": "You are right. I needed the array index as well. I think the documentation could have been a little more comprehensive. A couple of examples would have been nice."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1551733313, "post_id": 54901583, "comment_id": 96740412, "body": "I also found docs to leave things to be desired.  One particular gripe: I don&#39;t see a point in docs telling me how the returned object&#39;s attribute (of a different class) is kept (as a hash) -- that&#39;s preciseley what is meant to be &quot;hidden&quot; (in OO) !!  Or, to not matter at least. They may want to tell me how to retrieve results though, but they don&#39;t."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 4, "last_activity_date": 1551262542, "last_edit_date": 1551262542, "creation_date": 1551258100, "answer_id": 54901583, "question_id": 54896332, "link": "https://stackoverflow.com/questions/54896332/looping-the-data-structure-returned-from-influxdbhttp-in-perl/54901583#54901583", "title": "Looping the data structure returned from InfluxDB::HTTP in perl", "body": "<p>The documentation has a section entitled <a href=\"https://metacpan.org/pod/InfluxDB::HTTP#RETURN-VALUES-AND-ERROR-HANDLING\" rel=\"nofollow noreferrer\">Return Values and Error Handling</a> which says:</p>\n\n<blockquote>\n  <p><code>Object::Result</code> is relied upon for returning data from subroutines.</p>\n</blockquote>\n\n<p>I guess it would be more helpful if that was a link to the <a href=\"https://metacpan.org/pod/Object::Result\" rel=\"nofollow noreferrer\">Object::Result</a> documentation or contained better examples of using the returned object.</p>\n\n<p>But looking at the source code, I see the result object is created like this:</p>\n\n<pre><code>result {\n    raw         { return $response; }\n    data        { return $data; }\n    results     { return $data-&gt;{results}; }\n    request_id  { return $response-&gt;header('Request-Id'); }\n    &lt;STR&gt;       { return \"Returned data: $content\"; }\n    &lt;BOOL&gt;      { return 1; }\n}\n</code></pre>\n\n<p>From which I guess, you can get the actual data that you want from <code>$res-&gt;data</code> or <code>$res-&gt;results</code> - both of which will return hash references. Or if you want the raw query response, you can use <code>$res-&gt;raw</code>.</p>\n\n<p>I think that the values data you want is <code>$res-&gt;results-&gt;[0]{series}[0]{values}</code>.</p>\n\n<p>Oh, and later on, the documentation for the <code>query()</code> method says:</p>\n\n<blockquote>\n  <p>If the returned object evaluates to true, indicating that the query was successful, then the returned object's <code>data</code> attribute contains the entire response from InfluxDB as Perl hash. Additionally the attribute <code>request_id</code> provides the request identifier as set in the HTTP reponse headers by InfluxDB. This can for example be useful for correlating requests with log files.</p>\n</blockquote>\n\n<p>Doesn't mention the <code>results</code> attribute though.</p>\n"}], "owner": {"reputation": 9501, "user_id": 55366, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/89489696e09f6d1307ce5726c35a2c3e?s=128&d=identicon&r=PG", "display_name": "Orjanp", "link": "https://stackoverflow.com/users/55366/orjanp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 1, "accepted_answer_id": 54901583, "answer_count": 2, "score": 2, "last_activity_date": 1551262542, "creation_date": 1551228075, "last_edit_date": 1551231526, "question_id": 54896332, "link": "https://stackoverflow.com/questions/54896332/looping-the-data-structure-returned-from-influxdbhttp-in-perl", "title": "Looping the data structure returned from InfluxDB::HTTP in perl", "body": "<p>Trying to get out the value pair in values.</p>\n\n<pre><code>my $influx = InfluxDB::HTTP-&gt;new(host =&gt; 'localhost', port =&gt; 8086);\nmy $query = 'SELECT mean(value) FROM db1.autogen.num1,db1.autogen.num2 WHERE time &gt; now() - 1h GROUP BY time(1s) LIMIT 20';\n\nmy $res = $influx-&gt;query([$query], epoch =&gt; 's',);\nprint $res;\n</code></pre>\n\n<p>The result I'm getting is this:</p>\n\n<pre><code>Returned data: {\"results\":[{\"statement_id\":0,\"series\":[{\"name\":\"num1\",\"columns\":[\"time\",\"value\"],\"values\":[[1550842812,114.098],[1550842812,114.084],[1550842812,114.07],[1550842812,114.055],[1550842812,114.041],[1550842813,114.027],[1550842813,114.012],[1550842813,113.998],[1550842813,113.984],[1550842813,113.969],[1550842814,113.955],[1550842814,113.941],[1550842814,113.926],[1550842814,113.911],[1550842814,113.897],[1550842815,113.883],[1550842815,113.868],[1550842815,113.854],[1550842815,113.84],[1550842815,113.825]]},{\"name\":\"num2\",\"columns\":[\"time\"\u2502 ,\"value\"],\"values\":[[1550842812,11.358],[1550842812,11.373],[1550842812,11.388],[1550842812,11.402],[1550842812,11.416],[1550842813,11.431],[1550842813,11.445],[1550842813,11.459],[155084\u2502 2813,11.474],[1550842813,11.488],[1550842814,11.502],[1550842814,11.517],[1550842814,11.531],[1550842814,11.545],[1550842814,11.56],[1550842815,11.575],[1550842815,11.589],[1550842815,11.\u2502 604],[1550842815,11.618],[1550842815,11.632]]}]}]}\n</code></pre>\n\n<p>But when I do a:</p>\n\n<pre><code>print $res-&gt;{results};\n\nObject returned by call to InfluxDB::HTTP::query() at test.pl line 10 can't be used as &lt;HASH&gt; at test.pl line 12.\n</code></pre>\n\n<p>So it looks like a hash, but it isn't? Any tips on how to work with the data structure?</p>\n\n<p><a href=\"https://metacpan.org/pod/InfluxDB::HTTP\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/InfluxDB::HTTP</a></p>\n"}, {"tags": ["amazon-web-services", "perl", "aws-lambda", "cpan"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1551218158, "post_id": 54894745, "comment_id": 96558567, "body": "See <a href=\"https://metacpan.org/pod/local::lib\" rel=\"nofollow noreferrer\">local::lib</a>."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1551218567, "post_id": 54894745, "comment_id": 96558733, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/7072101/installing-perl-cpan-modules-in-local-directory\">Installing PERL CPAN modules in local directory</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1551222240, "post_id": 54894745, "comment_id": 96560059, "body": "Aavoid headaches now and later by installing a local <code>perl</code> (e.g. using <code>perlbrew</code>) then using <code>cpan Foo::Bar</code>."}], "answers": [{"comments": [{"owner": {"reputation": 947, "user_id": 6282204, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/14281a0f96ca3c81d5d8b758d68a371c?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/6282204/aaron"}, "edited": false, "score": 0, "creation_date": 1551235660, "post_id": 54896190, "comment_id": 96563162, "body": "For <code>cpan Crypt:OPENSSL::AES</code> and <code>cpan Crypt:Rijndael packages</code>, I am getting <code>Couldn&#39;t find module errors.</code>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 947, "user_id": 6282204, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/14281a0f96ca3c81d5d8b758d68a371c?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/6282204/aaron"}, "edited": false, "score": 1, "creation_date": 1551238637, "post_id": 54896190, "comment_id": 96563809, "body": "@Aaron You misspelled the module names. The first one is spelled <code>Crypt::OpenSSL::AES</code> (note it is also case sensitive) and you missed half of the double-colon in the second one."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1551226733, "creation_date": 1551226733, "answer_id": 54896190, "question_id": 54894745, "link": "https://stackoverflow.com/questions/54894745/installing-packages-with-cpan/54896190#54896190", "title": "Installing packages with cpan", "body": "<p>With <a href=\"https://metacpan.org/pod/cpanm\" rel=\"nofollow noreferrer\">cpanm</a>:</p>\n\n<pre><code>cpanm -l local Crypt::CBC\n</code></pre>\n\n<p>Then in your script:</p>\n\n<pre><code>use lib '/path/to/local/lib/perl5';\n</code></pre>\n\n<p><a href=\"https://metacpan.org/pod/lib::relative\" rel=\"nofollow noreferrer\">lib::relative</a> could be used with a relative path instead of absolute.</p>\n\n<p>Or when running your script:</p>\n\n<pre><code>$ perl -I/path/to/local/lib/perl5 script.pl\n</code></pre>\n"}], "owner": {"reputation": 947, "user_id": 6282204, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/14281a0f96ca3c81d5d8b758d68a371c?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/6282204/aaron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1551226733, "creation_date": 1551218031, "question_id": 54894745, "link": "https://stackoverflow.com/questions/54894745/installing-packages-with-cpan", "title": "Installing packages with cpan", "body": "<p>I am trying to install these packages in a local directory to use with AWS Lambda.</p>\n\n<pre><code>cpan Crypt::CBC . \ncpan Crypt:OPENSSL::AES .\ncpan Crypt:Rijndael packages .\n</code></pre>\n\n<p>I don't think they are being installed correctly. How do I make sure they are installed in the local directory</p>\n"}, {"tags": ["perl", "makefile"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1551217957, "post_id": 54894267, "comment_id": 96558490, "body": "If Perl says that <code>NASM</code> is not found, it is likely correct. Have you checked that <code>nasm.exe</code> is on the path? Type <code>nasm</code> to verify. Also, please <a href=\"https://stackoverflow.com/posts/54894267/edit\">edit</a> your post and replace the screenshot image by text. This makes the post more readable and searchable."}, {"owner": {"reputation": 11, "user_id": 8210520, "user_type": "registered", "profile_image": "https://graph.facebook.com/1599879536721057/picture?type=large", "display_name": "Adam Alexandru", "link": "https://stackoverflow.com/users/8210520/adam-alexandru"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1551247265, "post_id": 54894267, "comment_id": 96565873, "body": "%PATH% contains NASM correct path, that&#39;s weird.."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1551247315, "post_id": 54894267, "comment_id": 96565893, "body": "Why do you say &quot;nothing worked&quot;? The first configuration <code>perl Configure VC-WIN64A no-asm</code> (i.e. C instead of assembler routines) obviously ran without error."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1551247458, "post_id": 54894267, "comment_id": 96565952, "body": "Are you sure that <code>nasm.exe</code> is in <code>%PATH%</code> in the command window you excuted the <code>perl Configure ...</code> in? F.ex. in <i>that command window</i> what does <code>nasm -v</code> print out?"}, {"owner": {"reputation": 11, "user_id": 8210520, "user_type": "registered", "profile_image": "https://graph.facebook.com/1599879536721057/picture?type=large", "display_name": "Adam Alexandru", "link": "https://stackoverflow.com/users/8210520/adam-alexandru"}, "edited": false, "score": 0, "creation_date": 1551247617, "post_id": 54894267, "comment_id": 96566010, "body": "It looks like it works but makefile isn&#39;t created. <code>nasm -v</code> show <code>NASM version 2.14.02 compiled on Dec 26 2018</code>"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1551248433, "post_id": 54894267, "comment_id": 96566293, "body": "Your picture (PLEASE <i>do not</i> remove the <code>!</code> in your edits) shows two configuration runs, but no <code>make</code> invocation after the first, error-free, configuration. So: have you tried to run <code>make</code> after the first configuration run to make sure that C-only build works or not?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1551248826, "post_id": 54894267, "comment_id": 96566451, "body": "<a href=\"https://github.com/openssl/openssl/blob/e766f4a0531bffdab8ad2038279b755928d7a40a/Configurations/10-main.conf#L8\" rel=\"nofollow noreferrer\">Looking at</a> you could try to write a test perl script with the line <code>print qx(nasm -v), &quot;\\n&quot;;</code> and run it in that command window to see what the problem might be in your environment."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8210520, "user_type": "registered", "profile_image": "https://graph.facebook.com/1599879536721057/picture?type=large", "display_name": "Adam Alexandru", "link": "https://stackoverflow.com/users/8210520/adam-alexandru"}, "edited": false, "score": 0, "creation_date": 1551252746, "post_id": 54899515, "comment_id": 96567992, "body": "Firstly, i&#39;m running on Windows. Secondly, after running your script i get: <code>TEST: NASM 2.14 found NASM version 2.14.02 compiled on Dec 26 2018 Use of uninitialized value in pattern match (m&#47;&#47;) at dummy.pl line 20. REAL: NASM not found</code>"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 11, "user_id": 8210520, "user_type": "registered", "profile_image": "https://graph.facebook.com/1599879536721057/picture?type=large", "display_name": "Adam Alexandru", "link": "https://stackoverflow.com/users/8210520/adam-alexandru"}, "edited": false, "score": 0, "creation_date": 1551253580, "post_id": 54899515, "comment_id": 96568327, "body": "I know you are running on Windows, but that&#39;s beside the point. The test script has already narrowed down the issue, but the details got lost in comments. I updated the test script to print a bit more exact information. The error message indicates that the redirection <code>2&gt;NUL</code> is not working in your environment. Have you tried <code>nasm -v 2&gt;NUL</code> in your <code>CMD</code> window?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 11, "user_id": 8210520, "user_type": "registered", "profile_image": "https://graph.facebook.com/1599879536721057/picture?type=large", "display_name": "Adam Alexandru", "link": "https://stackoverflow.com/users/8210520/adam-alexandru"}, "edited": false, "score": 0, "creation_date": 1551255176, "post_id": 54899515, "comment_id": 96569001, "body": "I think the issue here is Strawberry Perl. Updated my answer and question title accordingly."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1551255152, "last_edit_date": 1551255152, "creation_date": 1551249734, "answer_id": 54899515, "question_id": 54894267, "link": "https://stackoverflow.com/questions/54894267/openssl-perl-configuration-script-fails-with-strawberry-perl/54899515#54899515", "title": "OpenSSL perl configuration script fails with Strawberry Perl", "body": "<p>It might be that <a href=\"https://github.com/openssl/openssl/blob/e766f4a0531bffdab8ad2038279b755928d7a40a/Configurations/10-main.conf#L8\" rel=\"nofollow noreferrer\">this line</a> in the OpenSSL code is causing your problem, because if it fails it triggers the error message described in your question:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>if (`nasm -v 2&gt;NUL` =~ /NASM version ([0-9]+\\.[0-9]+)/ &amp;&amp; $1 &gt;= 2.0) {\n</code></pre>\n\n<p>You could try to debug this issue in your environment with the following stripped down test script:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $output = &lt;&lt;END_OF_STRING;\nNASM version 2.14.02 compiled on Dec 26 2018\ntest\nsome other junk\nEND_OF_STRING\n\nif ($output =~ /NASM version ([0-9]+\\.[0-9]+)/ &amp;&amp; $1 &gt;= 2.0) {\n    print \"TEST: NASM $1 found\\n\";\n} else {\n    die \"TEST: NASM not found\\n\";\n}\n\nprint \"TEST with redirection to NUL: \", `nasm -v 2&gt;NUL`;\nprint \"TEST without redirection to NUL: \", `nasm -v`;\n\nif (`nasm -v 2&gt;NUL` =~ /NASM version ([0-9]+\\.[0-9]+)/ &amp;&amp; $1 &gt;= 2.0) {\n    print \"REAL: NASM $1 found\\n\";\n} else {\n    die \"REAL: NASM not found\\n\";\n}\n\nexit 0;\n</code></pre>\n\n<p>When I run it on my Linux machine I get:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nTEST: NASM 2.14 found\nTEST with redirection to NUL: NASM version 2.13.03 compiled on Jul 14 2018\nTEST without redirection to NUL: NASM version 2.13.03 compiled on Jul 14 2018\nREAL: NASM 2.13 found\n</code></pre>\n\n<p>... and then I realized that I have <code>nasm</code> installed on that machine :-)</p>\n\n<hr>\n\n<p><strong>Update 1:</strong> based on your first run of the test script I would suggest to remove the <code>2&gt;NUL</code> from the OpenSSL source line, i.e.:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>if (`nasm -v` =~ /NASM version ([0-9]+\\.[0-9]+)/ &amp;&amp; $1 &gt;= 2.0) {\n</code></pre>\n\n<p>This doesn't modify OpenSSL functionality, but probably helps you over the installation bump...</p>\n\n<hr>\n\n<p><strong>Update 2:</strong> digging a bit further I'm almost certain that the issue here is Strawberry Perl. To quote from the <a href=\"http://strawberryperl.com/\" rel=\"nofollow noreferrer\">home page</a>:</p>\n\n<blockquote>\n  <p><strong>Straberry Perl</strong> is a perl environment for MS Windows containing all you need to run and develop perl applications. It is designed to be as close as possible to perl environment on UNIX systems.</p>\n</blockquote>\n\n<p>That translates to <code>system(STRING)</code>, <code>qx{}</code> or backtick operators calling a UNIX shell, e.g. bash, and <strong>not</strong> <code>cmd.exe</code>. But</p>\n\n<ul>\n<li>the OpenSSL <code>VC-WIN64A</code> configuration hard-codes the <code>cmd.exe</code> command line <code>nasm -v 2&gt;NUL</code>,</li>\n<li>that command line fails in Strawberry Perl shell,</li>\n<li>therefore <code>qx{nasm -v 2&gt;NUL}</code> returns an empty string,</li>\n<li>resulting in the <code>m//</code> regex to fail,</li>\n<li>leading the configure script to a false negative.</li>\n</ul>\n\n<p>In conclusion: either use the workaround I suggested or dig into the OpenSSL documentation if there is an alternative configuration option for Windows with Strawberry Perl.</p>\n"}], "owner": {"reputation": 11, "user_id": 8210520, "user_type": "registered", "profile_image": "https://graph.facebook.com/1599879536721057/picture?type=large", "display_name": "Adam Alexandru", "link": "https://stackoverflow.com/users/8210520/adam-alexandru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1551255233, "creation_date": 1551215907, "last_edit_date": 1551255233, "question_id": 54894267, "link": "https://stackoverflow.com/questions/54894267/openssl-perl-configuration-script-fails-with-strawberry-perl", "title": "OpenSSL perl configuration script fails with Strawberry Perl", "body": "<p>I'm trying to build OpenSSL but i have one big problem which i couldn't figure it out. </p>\n\n<p>I reinstalled VS 2017, perl, strawberry, nasm but nothing worked. </p>\n\n<p><code>%PATH%</code> contains perl path, nasm path etc.</p>\n\n<p>I found the same issue on github but still can't fix it. (My setup is x64)</p>\n\n<p><img src=\"https://i.stack.imgur.com/2u35g.png\" alt=\"Screenshot\"></p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 9375040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49b8916d2e2fdc85b1538a04ca6cef67?s=128&d=identicon&r=PG&f=1", "display_name": "AMVPlusPlus", "link": "https://stackoverflow.com/users/9375040/amvplusplus"}, "edited": false, "score": 0, "creation_date": 1551278947, "post_id": 54893968, "comment_id": 96583227, "body": "Thank you so much."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1551214628, "creation_date": 1551214628, "answer_id": 54893968, "question_id": 54893940, "link": "https://stackoverflow.com/questions/54893940/how-do-i-select-text-between-two-specific-symbols-in-perl/54893968#54893968", "title": "How do I select text between two specific symbols in Perl?", "body": "<pre><code>my ($substr) = $str =~ /&lt;([^&lt;\\@]*)\\@/\n   or die \"No match\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1551248040, "creation_date": 1551248040, "answer_id": 54899156, "question_id": 54893940, "link": "https://stackoverflow.com/questions/54893940/how-do-i-select-text-between-two-specific-symbols-in-perl/54899156#54899156", "title": "How do I select text between two specific symbols in Perl?", "body": "<p>You'll need a regex that</p>\n\n<ul>\n<li>looks for the starting <code>&lt;</code> character</li>\n<li>then (your question is unclear on this point)\n\n<ul>\n<li>captures one-or-more non-<code>@</code> characters, or</li>\n<li>captures zero-or-more non-<code>@</code> characters</li>\n</ul></li>\n<li>looks for the trailing <code>@</code> character</li>\n<li>also not specified in your question: do you need to strip leading and trailing white space from the match?</li>\n</ul>\n\n<p>I.e.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $Line = '&lt;some text here      @typeOf and more text here after';\nmy $tempVariable;\n\n# alternative 1: one-or-more characters\n($tempVariable) = $Line =~ /&lt;([^@]+)@/\n   or die \"No match alternative 1\";\nprint \"Alternative 1: '${tempVariable}'\\n\";\n\n# alternative 2: zero-or-more characters\n($tempVariable) = $Line =~ /&lt;([^@]*)@/\n   or die \"No match alternative 2\";\nprint \"Alternative 2: '${tempVariable}'\\n\";\n\nexit 0;\n</code></pre>\n\n<p>Test run (white space is not stripped):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nAlternative 1: 'some text here      '\nAlternative 2: 'some text here      '\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 9375040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49b8916d2e2fdc85b1538a04ca6cef67?s=128&d=identicon&r=PG&f=1", "display_name": "AMVPlusPlus", "link": "https://stackoverflow.com/users/9375040/amvplusplus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 54893968, "answer_count": 2, "score": 1, "last_activity_date": 1551248040, "creation_date": 1551214517, "question_id": 54893940, "link": "https://stackoverflow.com/questions/54893940/how-do-i-select-text-between-two-specific-symbols-in-perl", "title": "How do I select text between two specific symbols in Perl?", "body": "<p>I'm very new to Perl. I'm currently going through this Perl file and I've got this variable where I was able to format it down to get all the text after the \"&lt;\" symbol using this line I found from another stackflow question. </p>\n\n<pre><code>($tempVariable) = $Line =~ /(\\&lt;.*)\\s*$/;\n</code></pre>\n\n<p>So currently whenever I print this variable, I get the output</p>\n\n<pre><code>$tempVariable = &lt;some text here      @typeOf and more text here after\n</code></pre>\n\n<p>I need to get everything between the \"&lt;\" symbol and the \"@\"symbol.</p>\n\n<p>I tried looking at other stackflow questions and tried implementing it to mines but I keep getting errors so if anybody could help me out I would appreciate it.</p>\n"}, {"tags": ["perl", "perl-module", "perlbrew", "perlscript"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1551195889, "post_id": 54888981, "comment_id": 96547535, "body": "Works fine on my Ubuntu 18.10 laptop with perl version 5.29.3,  <code>Getopt::Long::Subcommand</code> version 0.102. (I get output: <code>Sample list: bis_WT.tab.gz,WT</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 401, "user_id": 3327344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f42350c4eb9da6f6f36a8388c05bffeb?s=128&d=identicon&r=PG&f=1", "display_name": "xie186", "link": "https://stackoverflow.com/users/3327344/xie186"}, "edited": false, "score": 0, "creation_date": 1551201723, "post_id": 54890509, "comment_id": 96550854, "body": "Work fine after upgrading Getopt::Long to version 2.50. Could you please tell me how you identify this problem. I want to learn how to trouble shoot similar problem in the future. Thank you."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 401, "user_id": 3327344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f42350c4eb9da6f6f36a8388c05bffeb?s=128&d=identicon&r=PG&f=1", "display_name": "xie186", "link": "https://stackoverflow.com/users/3327344/xie186"}, "edited": false, "score": 0, "creation_date": 1551202986, "post_id": 54890509, "comment_id": 96551526, "body": "I first uncommented out all the existing logging statements in the module. It showed differences in what what left in <code>@ARGV</code> after <code>Getopt::Long::GetOptions</code> returned. The fact that both the failing and passing tests happened using the same version of Getopt::Long::Subcommand pointed to an external problem, at least a problem with an interaction with something external to ::Subcommand. [continued]"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 401, "user_id": 3327344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f42350c4eb9da6f6f36a8388c05bffeb?s=128&d=identicon&r=PG&f=1", "display_name": "xie186", "link": "https://stackoverflow.com/users/3327344/xie186"}, "edited": false, "score": 0, "creation_date": 1551203074, "post_id": 54890509, "comment_id": 96551559, "body": "It could be differences in <code>perl</code> itself, but it could also be in a module that comes with Perl such Getopt::Long. Because we were dealing with fresh installs of Perl, <code>cpan</code> would have installed the latest version of dependencies that didn&#39;t come with Perl."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 401, "user_id": 3327344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f42350c4eb9da6f6f36a8388c05bffeb?s=128&d=identicon&r=PG&f=1", "display_name": "xie186", "link": "https://stackoverflow.com/users/3327344/xie186"}, "edited": false, "score": 0, "creation_date": 1551203256, "post_id": 54890509, "comment_id": 96551665, "body": "So I tried installing different versions of Getopt::Long with Perl 5.22 to find out what version worked and which ones didn&#39;t. Your program started working with 2.50 again, and the <code>CHANGES</code> file Getopt::Long 2.50 indicated it fixes a couple of bugs."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 401, "user_id": 3327344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f42350c4eb9da6f6f36a8388c05bffeb?s=128&d=identicon&r=PG&f=1", "display_name": "xie186", "link": "https://stackoverflow.com/users/3327344/xie186"}, "edited": false, "score": 0, "creation_date": 1551203481, "post_id": 54890509, "comment_id": 96551786, "body": "Having a solution, I didn&#39;t really care to find out what the actual problem was. If I wanted to debug that, I&#39;d start by logging the parameters passed to <code>Getopt::Long::GetOptions</code> (including <code>@ARGV</code>) and the values returned (including <code>@ARGV</code>). From those, I&#39;d construct a small test program, which I&#39;d reduce until nothing else can be removed without removing the error. This would normally give a pretty good idea where to look."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 401, "user_id": 3327344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f42350c4eb9da6f6f36a8388c05bffeb?s=128&d=identicon&r=PG&f=1", "display_name": "xie186", "link": "https://stackoverflow.com/users/3327344/xie186"}, "edited": false, "score": 0, "creation_date": 1551214936, "post_id": 54890509, "comment_id": 96557195, "body": "If not, then it provides the easiest call to trace because it has the least amount of distractions. <b>Reducing the problem is always key.</b> For example, you posted 130 lines of code, when you could have demonstrated your problem in 5-10 lines. That means that 95% of what you posted is irrelevant, and should have been left out as such."}, {"owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "edited": false, "score": 0, "creation_date": 1551263954, "post_id": 54890509, "comment_id": 96574104, "body": "I&#39;ve released Getopt::Long::Subcommand 0.103 that depends on Getopt::Long &gt;= 2.50. Thanks @ikegami!"}, {"owner": {"reputation": 401, "user_id": 3327344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f42350c4eb9da6f6f36a8388c05bffeb?s=128&d=identicon&r=PG&f=1", "display_name": "xie186", "link": "https://stackoverflow.com/users/3327344/xie186"}, "edited": false, "score": 0, "creation_date": 1551282098, "post_id": 54890509, "comment_id": 96585241, "body": "Thank you @ikegami."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1551282249, "post_id": 54890509, "comment_id": 96585359, "body": "Check the mark next to the answer if you&#39;re satisfied."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1551203333, "last_edit_date": 1551203333, "creation_date": 1551200123, "answer_id": 54890509, "question_id": 54888981, "link": "https://stackoverflow.com/questions/54888981/incorrect-behavior-of-perl-module-getoptlongsubcommand-in-perl-version-5-2/54890509#54890509", "title": "Incorrect behavior of perl module `Getopt::Long::Subcommand` in perl version 5.24.1", "body": "<p>Getopt::Long::Subcommand relies on Getopt::Long. Either Getopt::Long::Subcommand or your specific needs are  incompatible with Getopt::Long 2.43 (inclusive) to 2.50 (exclusive).</p>\n\n<p>The simple solution is to upgrade to the latest version of Getopt::Long.</p>\n\n<p>I filed a <a href=\"https://rt.cpan.org/Ticket/Display.html?id=128643\" rel=\"nofollow noreferrer\">ticket</a> requesting the addition of a dependency on Getopt::Long 2.50.</p>\n"}], "owner": {"reputation": 401, "user_id": 3327344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f42350c4eb9da6f6f36a8388c05bffeb?s=128&d=identicon&r=PG&f=1", "display_name": "xie186", "link": "https://stackoverflow.com/users/3327344/xie186"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1551203333, "creation_date": 1551195038, "question_id": 54888981, "link": "https://stackoverflow.com/questions/54888981/incorrect-behavior-of-perl-module-getoptlongsubcommand-in-perl-version-5-2", "title": "Incorrect behavior of perl module `Getopt::Long::Subcommand` in perl version 5.24.1", "body": "<p>I'm using <code>Getopt::Long::Subcommand</code> to parse the command line arguments. </p>\n\n<p>But I found that in some of Perl versions. This module has incorrect behavior. </p>\n\n<p>For example if I run <code>./ViewBS BisNonConvRate --sample bis_WT.tab.gz,WT</code>. I expect the output as below:</p>\n\n<pre><code>Subcommand: BisNonConvRate\nSample list: bis_WT.tab.gz,WT\n</code></pre>\n\n<p>In perl-v5.18.2, it works fine. I got the output I expected. \nBut in perl-v5.24.1, it does NOT. I got the output shown as below:</p>\n\n<pre><code>Subcommand: BisNonConvRate\nSample list:\n</code></pre>\n\n<p>I checked version of <code>Getopt::Long::Subcommand</code>. Both of them are the same version (0.102).</p>\n\n<p>Could anyone help on this issue? Thanks in advance. </p>\n\n<p>Here is how I configure the perl environment: </p>\n\n<pre><code>perlbrew install perl==5.24.1 ## or perl==5.18.2\nperlbrew use perl-5.24.1\nperlbrew install-cpanm\ncpanm Getopt::Long::Subcommand\ncpanm Bio::DB::HTS::Tabix\ncpanm Bio::SeqIO\n\n</code></pre>\n\n<p>Here is my code using <code>Getopt::Long::Subcommand</code> in 'ViewBS':</p>\n\n<pre><code>#!/usr/bin/env perl \n#!/usr/bin/perl --\n\n####################################################################\n# ViewBS - Tools for exploring and visualizing bisulfite sequencing \n# (BS-seq) data. \n####################################################################\nuse strict;\nuse warnings;\n\nuse Getopt::Long::Subcommand;\nuse Pod::Usage;\nuse File::Basename;\nuse Cwd qw(abs_path);\nuse Benchmark;\nmy $t_stt = Benchmark-&gt;new;\n\n#use FindBin;\n#use lib \"$FindBin::Bin\";\n$|++;    # Do not buffer output\n#$| = 1; # Do not buffer output \n\n#Self written libraries.\n## Package written by Shanshan Huang\nuse lib dirname(abs_path $0) . '/lib';  #include seft written packages in @INC.\n\nmy $main_path = dirname(abs_path $0);\n\nmy %opts;   ## store the values for common parameters\nmy %opts_subcmd; ### store the values for sub command parameters\n\n### Return hash structure, with these keys: success, subcommand (array of str) by GetOptions\nmy $resOpt = &amp;processCMD();  \n\nmy ($sub_cmd) = @{$resOpt-&gt;{subcommand}}; \nprint \"\\nSubcommand: $sub_cmd\\n\";\n\nif($sub_cmd eq \"BisNonConvRate\"){\n    print \"Sample list: @{$opts_subcmd{sample}}\\n\";\n}\n\nsub processCMD{\n    $resOpt = GetOptions(   # Return hash structure, with these keys: success, subcommand (array of str)\n        ## common options recognized by all subcommands\n        options =&gt; {\n        'help|h|?'       =&gt; \\$opts{help},\n        'version|v'      =&gt; \\$opts{version},\n        'verbose'        =&gt; \\$opts{verbose},\n        'outdir:s'       =&gt; \\$opts_subcmd{outdir},\n        'prefix:s'       =&gt; \\$opts_subcmd{prefix},\n        'minDepth:s'     =&gt; \\$opts_subcmd{minDepth},\n        'maxDepth:s'     =&gt; \\$opts_subcmd{maxDepth},\n        'context:s'      =&gt; \\@{$opts_subcmd{context}},    # context\n        'flank:i'        =&gt; \\$opts_subcmd{flank},\n        'height:f'       =&gt; \\$opts_subcmd{height},  ## figure size: height\n        'width:f'        =&gt; \\$opts_subcmd{width},   ## figure size: width\n        'height2:f'       =&gt; \\$opts_subcmd{height2}, ## for histogram\n        'width2:f'        =&gt; \\$opts_subcmd{width2},  ## for histogram\n        'random_region:i' =&gt; \\$opts_subcmd{random_region}, ## For heatmap error. annot allocate vector of size\n        'methodAverage'  =&gt; \\$opts_subcmd{methodAverage},  ## Calculate the average methylation level rather than the weighted methylated level.\n         },\n         subcommands =&gt; {\n             MethGeno =&gt; {       \n                 summary =&gt; 'Plot methylation information across the chromsome.',\n                 # subcommand-specific options\n                 options =&gt; {\n            # mandatory arguments\n                'genomeLength|g:s'       =&gt; \\$opts_subcmd{genomeLength},\n            'sample:s'               =&gt; \\@{$opts_subcmd{sample}},\n            # Optional arguments\n            'win:i'                  =&gt; \\$opts_subcmd{win},\n                    'step:i'                 =&gt; \\$opts_subcmd{step},       \n            'minLength:s'            =&gt; \\$opts_subcmd{minLength},  # cutoff for minimum length of chromosome.\n            'split:s'                =&gt; \\$opts_subcmd{'split'},      #\n                 }\n            },\n        MethOverRegion =&gt; {\n        summary =&gt; 'Plot average distribution of methylation over your defined regions.',\n        options =&gt; {\n            # mandatory arguments\n            'region:s'              =&gt; \\$opts_subcmd{region},\n                    'sample:s'               =&gt; \\@{$opts_subcmd{sample}},\n            # Optional arguments\n            'binLength:i'        =&gt; \\$opts_subcmd{binLength},\n            'binNumber:i'            =&gt; \\$opts_subcmd{binNumber},\n                'minLength:i'        =&gt; \\$opts_subcmd{minLength},\n            'maxLength:i'            =&gt; \\$opts_subcmd{maxLength},\n                    'type:s'                 =&gt; \\$opts_subcmd{type},\n                'regionName:s'           =&gt; \\$opts_subcmd{regionName},\n                #'legendTitle:s'          =&gt; \\$opts_subcmd{legendTitle},\n        }\n        },\n        MethHeatmap =&gt; {\n                summary =&gt; 'Generate heatmap for a given regions.',\n                options =&gt; {\n                    # mandatory arguments\n                    'regions:s'              =&gt; \\$opts_subcmd{region},\n                    'sample:s'               =&gt; \\@{$opts_subcmd{sample}},\n             # Optional arguments\n                    'merge'                 =&gt; \\$opts_subcmd{merge},   ### if --merge is true, then methylation level of different will be generated in one file rather than one file for each context\n                    'cluster_cols:s'         =&gt; \\$opts_subcmd{cluster_cols},\n            'cluster_rows:s'         =&gt; \\$opts_subcmd{cluster_rows},\n                }\n            },\n        MethOneRegion =&gt; {\n                summary =&gt; 'Generate heatmap for a given regions.',\n                options =&gt; {\n            'regions:s'              =&gt; \\$opts_subcmd{region},\n                'sample:s'               =&gt; \\@{$opts_subcmd{sample}},\n             }\n        },\n            MethCoverage =&gt; {\n                summary =&gt; 'Generate statistics of read coverage of the provided samples.',\n                options =&gt; {\n        'reference:s'        =&gt; \\$opts_subcmd{reference},\n                'sample:s'               =&gt; \\@{$opts_subcmd{sample}},\n        'outdir:s'               =&gt; \\$opts_subcmd{outdir},\n                 }\n            },\n        MethLevDist =&gt; {\n                summary =&gt; 'Generate distribution of methylation levels for the provided samples.',\n                options =&gt; {\n                'sample:s'               =&gt; \\@{$opts_subcmd{sample}},\n        'regions:s'              =&gt; \\$opts_subcmd{region},\n        'binMethLev:s'       =&gt; \\$opts_subcmd{binMethLev},\n                 }\n            },\n        GlobalMethLev =&gt; {\n                summary =&gt; 'Generate global (bulk) methylation levels for the provided samples.',\n                options =&gt; {\n                'sample:s'               =&gt; \\@{$opts_subcmd{sample}},\n                 }\n            },\n        BisNonConvRate =&gt; {\n                summary =&gt; 'Estimate non-conversion rate of BS-seq data.',\n                options =&gt; {\n                'sample:s'               =&gt; \\@{$opts_subcmd{sample}},\n            'chrom:s'               =&gt; \\$opts_subcmd{chrom},\n                 }\n            },\n        }\n    );\n    #print \"UUXXX\", join(\"\\t\", $resOpt-&gt;{subcommand}), \"\\n\";\n    push @{$opts_subcmd{subcommand}}, @{$resOpt-&gt;{subcommand}} if exists $resOpt-&gt;{subcommand};\n    return $resOpt;\n}\n\n</code></pre>\n\n<p>You can also get a copy of the file here: <a href=\"https://github.com/xie186/ViewBS/tree/66edfa79c35b404539ca3cdf4afcfd9c1bd20c6d/data/chk_issue25\" rel=\"nofollow noreferrer\">https://github.com/xie186/ViewBS/tree/66edfa79c35b404539ca3cdf4afcfd9c1bd20c6d/data/chk_issue25</a></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1551195222, "post_id": 54888846, "comment_id": 96547137, "body": "Try: <code>if (exists $refPRE{$c[0]} and (ref $refPRE{$c[0]} eq &quot;ARRAY&quot;) and @{$refPRE{$c[0]}})</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1551197628, "post_id": 54888846, "comment_id": 96548577, "body": "What you are trying to check for?"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1551195036, "post_id": 54888965, "comment_id": 96547005, "body": "Rubber duck! :D"}], "tags": [], "owner": {"reputation": 1822, "user_id": 615257, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fd2bf15bb56af496883e5d300ee2635d?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/615257/alex"}, "is_accepted": false, "score": 2, "last_activity_date": 1551194983, "creation_date": 1551194983, "answer_id": 54888965, "question_id": 54888846, "link": "https://stackoverflow.com/questions/54888846/perl-syntax-replacing-definedarray/54888965#54888965", "title": "Perl syntax (replacing &#39;defined(@array&#39;)", "body": "<p>Apparently posting here is all the catalyst I needed...</p>\n\n<p>Switching <code>if (defined @{$refPRE{$c[0]}})</code> to <code>if ($refPRE{$c[0]})</code> was sufficient to work! Hopefully this helps someone else who searching for this (specific) problem...</p>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1551195019, "creation_date": 1551195019, "answer_id": 54888973, "question_id": 54888846, "link": "https://stackoverflow.com/questions/54888846/perl-syntax-replacing-definedarray/54888973#54888973", "title": "Perl syntax (replacing &#39;defined(@array&#39;)", "body": "<blockquote>\n  <p>Can't use an undefined value as an ARRAY reference.</p>\n</blockquote>\n\n<p>This is saying that <code>$refPRE{ $c[0] }</code> is returning <code>undef</code>, and you cannot dereference <code>undef</code> as an array.</p>\n\n<pre><code>@{ undef } # will error\n</code></pre>\n\n<p>You don't need to deref this at all. If it returns <code>undef</code>, it's <em>false</em>. If it returns anything else, that will (likely) be <em>true</em>.</p>\n\n<pre><code>if ( $refPRE{$c[0]} )\n{\n   my $foo = @{ $refPRE{$c[0]} };\n    # do stuff\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 2, "last_activity_date": 1551195075, "creation_date": 1551195075, "answer_id": 54888984, "question_id": 54888846, "link": "https://stackoverflow.com/questions/54888846/perl-syntax-replacing-definedarray/54888984#54888984", "title": "Perl syntax (replacing &#39;defined(@array&#39;)", "body": "<p>Looking at your second error <code>$refPRE{$c[0]}</code> can be undefined so <code>@{ ... }</code> is failing. You can fix this using the <em>undef or</em> opperator <code>//</code> like this.</p>\n\n<pre><code>if (@{ $refPRE{$c[0]} // [] }) { ... }\n</code></pre>\n\n<p>This checks if <code>$refPRE{$c[0]}</code> is defined and if not returns an empty anonymous array. An empty array is false in an <code>if</code> statement.</p>\n"}], "owner": {"reputation": 1822, "user_id": 615257, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fd2bf15bb56af496883e5d300ee2635d?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/615257/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1551195075, "creation_date": 1551194623, "question_id": 54888846, "link": "https://stackoverflow.com/questions/54888846/perl-syntax-replacing-definedarray", "title": "Perl syntax (replacing &#39;defined(@array&#39;)", "body": "<p>Let me start by saying I haven't programmed in Perl in a LONG time.</p>\n\n<p>Currently trying to get some older code to work that relies on <code>defined</code> with an array.</p>\n\n<p>Code (abridged):</p>\n\n<pre><code># defined outside the file-reading block\nmy %refPRE;\n\n# line from a file\n@c = split();\n\n\nif (defined @{$refPRE{$c[0]}})\n{\n    # do stuff\n}\n</code></pre>\n\n<p>Now this won't run like this because of the following error:</p>\n\n<p><code>Can't use 'defined(@array)' (Maybe you should just omit the defined()?)</code></p>\n\n<p>Fine, but if I removed the <code>defined</code> then I get the following error:</p>\n\n<p><code>Can't use an undefined value as an ARRAY reference</code>. </p>\n\n<p>I can see what it's trying to do (if <code>$c[0]</code> is in the <code>$refPRE</code> then do this, else do something else) but I'm not familiar enough with Perl to figure out what the right way to get this to work is. Hoping this is trivial for someone.</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1551194364, "post_id": 54888357, "comment_id": 96546558, "body": "See also <a href=\"https://metacpan.org/pod/Hash::Flatten\" rel=\"nofollow noreferrer\">Hash::Flatten</a> and <a href=\"https://metacpan.org/pod/Data::Diver\" rel=\"nofollow noreferrer\">Data::Diver</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1551194538, "post_id": 54888357, "comment_id": 96546696, "body": "I&#39;ve included faster and simpler-to-use versions of Data::Diver&#39;s <code>Dive</code> and <code>DiveVal</code> in my answer."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 6760625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b78b82da4256bbddc522314ee404231a?s=128&d=identicon&r=PG", "display_name": "Mario T.", "link": "https://stackoverflow.com/users/6760625/mario-t"}, "edited": false, "score": 0, "creation_date": 1551194150, "post_id": 54888635, "comment_id": 96546410, "body": "%bighash has an entry: $bighash{&#39;core&#39;}{&#39;dates&#39;}{&#39;year&#39;} = 2019. which is what I&#39;m trying to access. It&#39;s multi-dimensional."}, {"owner": {"reputation": 55, "user_id": 6760625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b78b82da4256bbddc522314ee404231a?s=128&d=identicon&r=PG", "display_name": "Mario T.", "link": "https://stackoverflow.com/users/6760625/mario-t"}, "edited": false, "score": 0, "creation_date": 1551194329, "post_id": 54888635, "comment_id": 96546528, "body": "If I print $bighash{&#39;core&#39;}{&#39;dates&#39;}{&#39;year&#39;} then I get 2019 as the answer. What I would like to do is say print $bighash{\\%hash} to get the same answer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1551194377, "post_id": 54888635, "comment_id": 96546574, "body": "That may be, but <code>$bighash{\\%hash}</code> means something else. Your question was &quot;Can someone point me into what is going on&quot; when one does <code>$bighash{\\%hash}</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1551194619, "post_id": 54888635, "comment_id": 96546748, "body": "You might want to put some explanations on those dive subs. Especially the <code>lvalue</code> one is pretty advanced."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1551194800, "post_id": 54888635, "comment_id": 96546870, "body": "@simbabque, I already documented how to use in them in my answer. If instead you&#39;re interested in how it works, there&#39;s an explanation <a href=\"https://stackoverflow.com/a/31554981/589924\">here</a>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1551194745, "last_edit_date": 1551194745, "creation_date": 1551194051, "answer_id": 54888635, "question_id": 54888357, "link": "https://stackoverflow.com/questions/54888357/accessing-a-multi-dimensional-hash-using-strings/54888635#54888635", "title": "Accessing a multi-dimensional hash using strings", "body": "<blockquote>\n  <p><em>Can someone point me into what is going on [when I use <code>$bighash{\\%hash}</code>]?</em></p>\n</blockquote>\n\n<p>Hash keys are strings, and the stringification of <code>\\%hash</code> is something like <code>HASH(0x655178)</code>. The only element in <code>%bighash</code> has <code>core</code> &mdash;not <code>HASH(0x655178)</code>&mdash; for key, so the hash lookup returns <code>undef</code>.</p>\n\n<hr>\n\n<p>Useful tools:</p>\n\n<pre><code>sub dive_val :lvalue { my $p = \\shift; $p //= \\( $$p-&gt;{$_} ) for @_; $$p }   # For setting\nsub dive { my $r = shift; $r //= $r-&gt;{$_} for @_; $r }                       # For getting\n\ndive_val(\\%hash, split /\\./, 'core.dates.year') = 2019;\nsay dive(\\%hash, split /\\./, 'core.dates.year');\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 6760625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b78b82da4256bbddc522314ee404231a?s=128&d=identicon&r=PG", "display_name": "Mario T.", "link": "https://stackoverflow.com/users/6760625/mario-t"}, "edited": false, "score": 0, "creation_date": 1551194921, "post_id": 54888819, "comment_id": 96546942, "body": "So this worked for me. I also tried the dive options offered by ikegami but dive just returned the hash HASH(0x7fe01084fec8) rather than the value 2019. So I think your solution is the one I should go with. I also need to read up more about hashes and data structures."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1551195130, "post_id": 54888819, "comment_id": 96547071, "body": "Re &quot;<i>So this worked for me.</i>&quot;, And the answer says, it&#39;s identical to mine. (There was a bug in <code>dive_val</code> that I fixed, though)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 55, "user_id": 6760625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b78b82da4256bbddc522314ee404231a?s=128&d=identicon&r=PG", "display_name": "Mario T.", "link": "https://stackoverflow.com/users/6760625/mario-t"}, "edited": false, "score": 0, "creation_date": 1551195146, "post_id": 54888819, "comment_id": 96547084, "body": "@MarioT. you want to read <a href=\"https://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlref.html</a> and <a href=\"https://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlreftut.html</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1551195181, "post_id": 54888819, "comment_id": 96547112, "body": "@ikegami you know I&#39;m not trying to steal your answer, right? :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1551195217, "post_id": 54888819, "comment_id": 96547134, "body": "@simbabque, I have absolutely no problem with your answer. I was just disputing Mario&#39;s claim."}, {"owner": {"reputation": 55, "user_id": 6760625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b78b82da4256bbddc522314ee404231a?s=128&d=identicon&r=PG", "display_name": "Mario T.", "link": "https://stackoverflow.com/users/6760625/mario-t"}, "edited": false, "score": 0, "creation_date": 1551195623, "post_id": 54888819, "comment_id": 96547374, "body": "I&#39;m only using the getter dive method you provided and it just returns HASH(0x7fe01084fec8). It doesn&#39;t return the value 2019. So not sure why that is - I will definitely read the two references provided by @simbabque - I can&#39;t make that dive method return anything other than HASH(0x7fe01084fec8)."}, {"owner": {"reputation": 55, "user_id": 6760625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b78b82da4256bbddc522314ee404231a?s=128&d=identicon&r=PG", "display_name": "Mario T.", "link": "https://stackoverflow.com/users/6760625/mario-t"}, "edited": false, "score": 0, "creation_date": 1551195676, "post_id": 54888819, "comment_id": 96547411, "body": "I should clarify, I&#39;m not using dive_val to set the value as I&#39;m pulling in the larger %bighash and referencing that from dive. Perhaps this is the problem?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 55, "user_id": 6760625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b78b82da4256bbddc522314ee404231a?s=128&d=identicon&r=PG", "display_name": "Mario T.", "link": "https://stackoverflow.com/users/6760625/mario-t"}, "edited": false, "score": 0, "creation_date": 1551196231, "post_id": 54888819, "comment_id": 96547755, "body": "@MarioT. ikegami&#39;s <code>dive</code> sub does the same thing as my verbose code. You pass in a list. That&#39;s it. Should work exactly the same. You must have been using it wrong."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1551195215, "last_edit_date": 1551195215, "creation_date": 1551194539, "answer_id": 54888819, "question_id": 54888357, "link": "https://stackoverflow.com/questions/54888357/accessing-a-multi-dimensional-hash-using-strings/54888819#54888819", "title": "Accessing a multi-dimensional hash using strings", "body": "<p>There are no multi-dimensional hashes in Perl. Hashes are key/value pairs. Your understanding of Perl data structures is incomplete.</p>\n\n<p>Re-imagine your data structure as follows</p>\n\n<pre><code>my %bighash = (\n    core =&gt; {\n        dates =&gt; {\n            year =&gt; 2019,\n        },\n    },\n);\n</code></pre>\n\n<p>There is a difference between the round parentheses <code>()</code> and the curly braces <code>{}</code>. The <code>%</code> sigil on the variable name indicates that it's a hash, that is a set of unordered key/value pairs. The round <code>()</code> are a list. Inside that list are two scalar values, i.e. a key and a value. The value is a reference to another, anonymous, hash. That's why it has curly <code>{}</code>.</p>\n\n<p>Each of those levels is a separate, distinct data structure.</p>\n\n<p>This rewrite of your code is similar to what <a href=\"https://stackoverflow.com/a/54888635/1331451\">ikegami wrote in his answer</a>, but less efficient and more verbose.</p>\n\n<pre><code>my @keys = split( /\\./, 'core.dates.year' );\n\nmy $value = \\%bighash;\nfor my $key (@keys) {\n  $value //= $value-&gt;{$key};\n}\n\nprint $value;\n</code></pre>\n\n<p>It drills down step by step into the structure and eventually gives you the final value.</p>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1551194847, "creation_date": 1551194847, "answer_id": 54888924, "question_id": 54888357, "link": "https://stackoverflow.com/questions/54888357/accessing-a-multi-dimensional-hash-using-strings/54888924#54888924", "title": "Accessing a multi-dimensional hash using strings", "body": "<p><a href=\"https://metacpan.org/pod/Hash::Fold\" rel=\"nofollow noreferrer\"><code>Hash::Fold</code></a> would seem to be helpful here. You can \"flatten\" your hash and then access everything with a single key.</p>\n\n<pre><code>use Hash::Fold 'flatten';\nmy $flathash = flatten(\\%bighash, delimiter =&gt; '.');\nprint $flathash-&gt;{\"core.dates.year\"};\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 6760625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b78b82da4256bbddc522314ee404231a?s=128&d=identicon&r=PG", "display_name": "Mario T.", "link": "https://stackoverflow.com/users/6760625/mario-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 54888819, "answer_count": 3, "score": 2, "last_activity_date": 1551195215, "creation_date": 1551193149, "question_id": 54888357, "link": "https://stackoverflow.com/questions/54888357/accessing-a-multi-dimensional-hash-using-strings", "title": "Accessing a multi-dimensional hash using strings", "body": "<p>I have a large multi-dimensional hash which is an import of a JSON structure.</p>\n\n<pre><code>my %bighash;\n</code></pre>\n\n<p>There is an element in %bighash called:</p>\n\n<pre><code>$bighash{'core'}{'dates'}{'year'} = 2019.\n</code></pre>\n\n<p>I have a separate string variable called core.dates.year which I would like to use to extract 2019 from %bighash.</p>\n\n<p>I've written this code:</p>\n\n<pre><code>my @keys  = split(/\\./, 'core.dates.year');\nmy %hash = ();\nmy $hash_ref = \\%hash;\n\nfor my $key ( @keys ){\n    $hash_ref-&gt;{$key} = {};\n    $hash_ref = $hash_ref-&gt;{$key};\n}\n</code></pre>\n\n<p>which when I execute:</p>\n\n<pre><code>say Dumper \\%hash;\n</code></pre>\n\n<p>outputs:</p>\n\n<pre><code>$VAR1 = {\n          'core' =&gt; {\n                   'dates' =&gt; {\n                             'year' =&gt; {}\n                           }\n                 }\n        };\n</code></pre>\n\n<p>All good so far. But what I now want to do is say:</p>\n\n<pre><code>print $bighash{\\%hash};\n</code></pre>\n\n<p>Which I want to return 2019. But nothing is being returned or I'm seeing an error about \"Use of uninitialized value within %bighash in concatenation (.) or string at script.pl line 1371,  line 17 (#1)...</p>\n\n<p>Can someone point me into what is going on?</p>\n\n<p>My project involves embedding strings in an external file which is then replaced with actual values from %bighash so it's just string interpolation.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1551180811, "post_id": 54884333, "comment_id": 96538091, "body": "@Biffen please don&#39;t answer in comments."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 1758782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef0b94153e8dd153c95ff60ac4ba3046?s=128&d=identicon&r=PG", "display_name": "user1758782", "link": "https://stackoverflow.com/users/1758782/user1758782"}, "edited": false, "score": 0, "creation_date": 1551186413, "post_id": 54884708, "comment_id": 96541406, "body": "it still not working.  This is what I see now, with your code:        )(one     )(two     )(three  I am still not getting .one (one) .two (two) .three (three)"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 43, "user_id": 1758782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef0b94153e8dd153c95ff60ac4ba3046?s=128&d=identicon&r=PG", "display_name": "user1758782", "link": "https://stackoverflow.com/users/1758782/user1758782"}, "edited": false, "score": 2, "creation_date": 1551186664, "post_id": 54884708, "comment_id": 96541552, "body": "@user1758782 You should edit your post to add the current code you&#39;re trying and what you&#39;re seeing so it can be properly formatted. Anything with multiple lines just doesn&#39;t work in comments."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 43, "user_id": 1758782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef0b94153e8dd153c95ff60ac4ba3046?s=128&d=identicon&r=PG", "display_name": "user1758782", "link": "https://stackoverflow.com/users/1758782/user1758782"}, "edited": false, "score": 2, "creation_date": 1551186754, "post_id": 54884708, "comment_id": 96541617, "body": "@user1758782, It&#39;s hard to tell from your poorly-communicated description of the output, but it could be that you are trying to read a file with Windows line endings (CR LF) on a unix system (where lines end with LF). Either convert the file (e.g. using <code>dos2unix</code>), or remove all trailing white space (<code>s&#47;\\s+\\z&#47;&#47;</code>) instead of just line feeds (<code>chomp</code>)"}], "tags": [], "owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "is_accepted": false, "score": 5, "last_activity_date": 1551186842, "last_edit_date": 1551186842, "creation_date": 1551181189, "answer_id": 54884708, "question_id": 54884333, "link": "https://stackoverflow.com/questions/54884333/print-each-line-of-a-file/54884708#54884708", "title": "Print each line of a file", "body": "<p><code>$_</code> will include the newline, e.g. <code>one\\n</code>, so <code>print \".$_ \\($_\\)\"</code> becomes something like <code>print \".one\\n (one\\n)</code>.</p>\n\n<p>Use <a href=\"https://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow noreferrer\"><code>chomp</code></a> to get rid of them, or use <code>s/\\s+\\z//</code> to remove all trailing whitespace.</p>\n\n<pre><code>while (&lt;&gt;) {\n  chomp;\n  print \".$_ ($_)\\n\";\n}\n</code></pre>\n\n<p>(But add a <code>\\n</code> to print the newline that you <em>do</em> want.)</p>\n"}, {"comments": [{"owner": {"reputation": 655, "user_id": 9345938, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XVV2JO7Xl1M/AAAAAAAAAAI/AAAAAAAAFus/a44EGq2HBC0/photo.jpg?sz=128", "display_name": "Aureliano Guedes", "link": "https://stackoverflow.com/users/9345938/aureliano-guedes"}, "edited": false, "score": 2, "creation_date": 1551213414, "post_id": 54886592, "comment_id": 96556508, "body": "<code>perl -pe &#39;s&#47;([^\\s]+)&#47;.$1 ($1)&#47;&#39;</code> seems more secure for his case. Anyway I do prefer regexp for cases like this."}], "tags": [], "owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "is_accepted": false, "score": 2, "last_activity_date": 1551187634, "creation_date": 1551187634, "answer_id": 54886592, "question_id": 54884333, "link": "https://stackoverflow.com/questions/54884333/print-each-line-of-a-file/54886592#54886592", "title": "Print each line of a file", "body": "<p>Besides the correct answer already given, you can do this in a oneliner:</p>\n\n<pre><code>perl -pe 's/(.+)/.$1 ($1)/'\n</code></pre>\n\n<p>Or if you prefer a while loop:</p>\n\n<pre><code>while (&lt;&gt;) {\n    s/(.+)/.$1 ($1)/;\n    print;\n}\n</code></pre>\n\n<p>This simply modifies your current line to your desired output and prints it then.</p>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 2, "last_activity_date": 1551273498, "creation_date": 1551273498, "answer_id": 54906442, "question_id": 54884333, "link": "https://stackoverflow.com/questions/54884333/print-each-line-of-a-file/54906442#54906442", "title": "Print each line of a file", "body": "<p>Another Perl one-liner without using regex.</p>\n\n<pre><code> perl -ple ' $_=\".$_ ($_)\" ' \n</code></pre>\n\n<p>with the given inputs</p>\n\n<pre><code>$ cat test.txt\none\ntwo\nthree\n\n$ perl -ple ' $_=\".$_ ($_)\" ' test.txt\n.one (one)\n.two (two)\n.three (three)\n\n$\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 1758782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef0b94153e8dd153c95ff60ac4ba3046?s=128&d=identicon&r=PG", "display_name": "user1758782", "link": "https://stackoverflow.com/users/1758782/user1758782"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1551273498, "creation_date": 1551179941, "last_edit_date": 1551249674, "question_id": 54884333, "link": "https://stackoverflow.com/questions/54884333/print-each-line-of-a-file", "title": "Print each line of a file", "body": "<p>I have a file test.txt that reads as follows:</p>\n\n<pre><code>one\ntwo\nthree\n</code></pre>\n\n<p>Now, I want to print each line of this file as follows:</p>\n\n<pre><code>.one (one)\n.two (two)\n.three (three)\n</code></pre>\n\n<p>I try this in Perl:</p>\n\n<pre><code>@ARGV = (\"test.txt\");\nwhile (&lt;&gt;) {\n    print (\".$_ \\($_\\)\");\n}\n</code></pre>\n\n<p>This doesn't seem to work and this is what I get:</p>\n\n<pre><code>.one\n (one\n).two\n (two\n).three\n (three\n)\n</code></pre>\n\n<p>Can some help me figure out what's going wrong?</p>\n\n<hr>\n\n<p>Update : \nThanks to Aureliano Guedes for the suggestion.<br>\nThis 1-liner seems to work :\n    perl -pe 's/([^\\s]+)/.$1 ($1)/'</p>\n"}, {"tags": ["oracle", "perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1551173067, "post_id": 54882055, "comment_id": 96533410, "body": "What happens if you use a different $db object for the inner SQL query?"}, {"owner": {"reputation": 429, "user_id": 3997124, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/342b1337a43ea5357ca9337320c19862?s=128&d=identicon&r=PG&f=1", "display_name": "mradul", "link": "https://stackoverflow.com/users/3997124/mradul"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1551173402, "post_id": 54882055, "comment_id": 96533610, "body": "I did not exactly got while you are referring to as different $DB object. you mean to say oracle object or PERL object. I ma new to PERL so may not understand the terminologies used here. I will try to open another DB connection for inner loop as $DBH1 then will see what happens."}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1551173471, "post_id": 54882055, "comment_id": 96533657, "body": "Your problem is that you are assigning to <code>$sth_sql</code> in your loop which is overwriting your loop variable. Either rename one of the variables or make the inner one a <code>my</code> variable. See <code>perldoc -f my</code>. PS the language is Perl calling it PERL will annoy people."}, {"owner": {"reputation": 429, "user_id": 3997124, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/342b1337a43ea5357ca9337320c19862?s=128&d=identicon&r=PG&f=1", "display_name": "mradul", "link": "https://stackoverflow.com/users/3997124/mradul"}, "edited": false, "score": 0, "creation_date": 1551173715, "post_id": 54882055, "comment_id": 96533835, "body": "thanks for your comment i will try to use a different variable here. and as suggested will Perl from now on :)"}, {"owner": {"reputation": 429, "user_id": 3997124, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/342b1337a43ea5357ca9337320c19862?s=128&d=identicon&r=PG&f=1", "display_name": "mradul", "link": "https://stackoverflow.com/users/3997124/mradul"}, "reply_to_user": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1551174565, "post_id": 54882055, "comment_id": 96534374, "body": "@JGNI - I tried with new varibale as $sth_sql1 for inner loop and it working fine now however did not use &quot;my&quot; keyword for this. thanks for the help."}], "answers": [{"comments": [{"owner": {"reputation": 429, "user_id": 3997124, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/342b1337a43ea5357ca9337320c19862?s=128&d=identicon&r=PG&f=1", "display_name": "mradul", "link": "https://stackoverflow.com/users/3997124/mradul"}, "edited": false, "score": 0, "creation_date": 1551248567, "post_id": 54887476, "comment_id": 96566344, "body": "That&#39;s correct i am now using a different variable name inside the loop which has already been pointed out by JGNI and i thank him and you for making understand the bits of Perl scripting like the use/scope of &quot;my&quot; keyword."}], "tags": [], "owner": {"reputation": 407, "user_id": 4314055, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oneIw.jpg?s=128&g=1", "display_name": "Sylvain", "link": "https://stackoverflow.com/users/4314055/sylvain"}, "is_accepted": true, "score": 1, "last_activity_date": 1551190451, "creation_date": 1551190451, "answer_id": 54887476, "question_id": 54882055, "link": "https://stackoverflow.com/questions/54882055/execute-oracle-sql-query-in-perl-script-while-loop/54887476#54887476", "title": "Execute oracle sql query in PERL script while loop", "body": "<p>In the loop, the line <code>$sth_sql = $dbh-&gt;prepare($col_sql);</code> overwrite the content of the <code>$sth_sql</code> variable. The second time the loop run, the content of <code>$sth_sql</code> isn't the same and the statement that overwrote it has already been exhausted (trying to fetch from it again is what causes the error).</p>\n\n<p>To correct this issue you should either use a different name for the second <code>$sth_sql</code> variable or simply declare the second <code>$sth_sql</code> variable with <code>my</code> to keep it inside the loop (see <code>perldoc -f my</code>). </p>\n\n<p>Note: This solution has been identified by JGNI in the comment of the question. My role has only be to summarize the issue to provide a proper answer to this question. </p>\n"}], "owner": {"reputation": 429, "user_id": 3997124, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/342b1337a43ea5357ca9337320c19862?s=128&d=identicon&r=PG&f=1", "display_name": "mradul", "link": "https://stackoverflow.com/users/3997124/mradul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 0, "accepted_answer_id": 54887476, "answer_count": 1, "score": 1, "last_activity_date": 1551190451, "creation_date": 1551172773, "question_id": 54882055, "link": "https://stackoverflow.com/questions/54882055/execute-oracle-sql-query-in-perl-script-while-loop", "title": "Execute oracle sql query in PERL script while loop", "body": "<p>I am trying to execute an oracle sql query in while loop of a PERL script as follows --</p>\n\n<pre><code>    my $dbh = DBI-&gt;connect( 'dbi:Oracle:'.$dbname,\n        $dbusername,\n        $pass,\n        {   PrintError =&gt; 0,\n            RaiseError =&gt; 1\n        }   \n    ) || die \"Erreur lors de la connexion: $DBI::errstr\";\n\n    print (\"Connexion \u00e0 la base de donn\u00e9es $dbname avec $dbusername OK \\n\");\n\n    $requete = \"select distinct to_char(date_appli,'yyyymmdd') from DATE_APPLI \".\n           \"where frequence = 'Q' and actif = 1\";\n\n    $sth_sql = $dbh-&gt;prepare($requete);\n    $sth_sql-&gt;execute();\n    @row=$sth_sql-&gt;fetchrow_array;\n   $datesitu=@row[0];\n\n$sth_sql-&gt;finish;\nprint \"La date de situation est $datesitu \\n\";\n\n# SQL to get validation script and table names \n$requete = \"select SCRIPT_NAME, table_name from fdf_scripts\";\n\n$sth_sql = $dbh-&gt;prepare($requete);\n$sth_sql-&gt;execute();\n$sth_sql-&gt;bind_columns(undef, \\$script_name, \\$table_name);\n\nwhile ($sth_sql-&gt;fetch()) {\n\n  $script_sql=\"$sql_path\\\\\".\"FDF_Test_scripts\\\\\".$script_name.\".sql\";   #validation script path\n  $script_log=\"$log_path\\\\\".$script_name.\".log\";                        #log files path \n  $rep_file_name=\"$sql_path\\\\\".\"FDF_Test_scripts\\\\\".$table_name.\".sql\"; #reports SQL path\n  $csv_file=\"$sql_path\\\\\".\"FDF_Test_scripts\\\\\".$table_name.\".csv\";      #report CSV path \n\n#Load data into validation tables using validation scripts  \n\n  $CmdText=\"sqlplus -s $connect \\@$script_sql $script_log\";\n\n  print \"Inserting data into table : $table_name \\n\";\n\n  #system (\"$CmdText\");\n\n  $col_sql = \"select COLUMN_NAME from all_tab_cols where TABLE_NAME = upper(\\'$table_name\\')\\n\";\n\n  print \"$col_sql\\n\";\n\n  $sth_sql = $dbh-&gt;prepare($col_sql);\n  $sth_sql-&gt;execute();\n  $sth_sql-&gt;bind_columns(undef, \\$COLUMN_NAME);\n\n  while ($sth_sql-&gt;fetch()) {\n\n    print \"$COLUMN_NAME\\n\";\n\n  }\n\n\n\n  if (open (my $fh, '&lt;:encoding(UTF-8)', $script_log)){\n    while (my $line = &lt;$fh&gt;){\n      if ($line=~m/\\bERROR\\b/){ \n        print \"Error While Loading $table_name table Please Check log file for errors at: $script_log \\n\";\n      }       \n    }\n  }\n  else {\n        warn \"Could open file: $script_log \\n\"\n  }\n\n}\n</code></pre>\n\n<p>in above code i am fetching table names from a table and then looping them to get the column names of each table which is present in that table.</p>\n\n<p>The code got executed for one iteration of inner while loop but throw error for next iteration as below --</p>\n\n<pre><code>DBD::Oracle::st fetch failed: ERROR no statement executing (perhaps you need to call execute first) [for Statement \"select COLUMN_N\\\nAME from all_tab_cols where TABLE_NAME = upper('FDF_Bond_validation_results') \n</code></pre>\n\n<p>I am not proficient in PERL and just started to using this and not sure how can i overcome this problem.</p>\n\n<p>Please let me know if more information is required.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 8926, "user_id": 5331061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g1Sv2.jpg?s=128&g=1", "display_name": "Gurmanjot Singh", "link": "https://stackoverflow.com/users/5331061/gurmanjot-singh"}, "edited": false, "score": 0, "creation_date": 1551165961, "post_id": 54880265, "comment_id": 96529812, "body": "Try <a href=\"https://regex101.com/r/PEKlVy/2\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 1, "creation_date": 1551166279, "post_id": 54880265, "comment_id": 96529945, "body": "Running the same perl command against that file I get some different but expected results. Are you sure the input string is the same as you posted?"}, {"owner": {"reputation": 21467, "user_id": 766570, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/urpdN.jpg?s=128&g=1", "display_name": "abbood", "link": "https://stackoverflow.com/users/766570/abbood"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1551166412, "post_id": 54880265, "comment_id": 96529995, "body": "@revo sorry I removed some junk, the actual log file looks like <a href=\"https://gist.github.com/abbood/c2557d2698bff93f5fc18f0edfc47d0b\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 21467, "user_id": 766570, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/urpdN.jpg?s=128&g=1", "display_name": "abbood", "link": "https://stackoverflow.com/users/766570/abbood"}, "reply_to_user": {"reputation": 8926, "user_id": 5331061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g1Sv2.jpg?s=128&g=1", "display_name": "Gurmanjot Singh", "link": "https://stackoverflow.com/users/5331061/gurmanjot-singh"}, "edited": false, "score": 1, "creation_date": 1551166885, "post_id": 54880265, "comment_id": 96530218, "body": "@Potato.. it worked like a charm!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1551167414, "post_id": 54880265, "comment_id": 96530444, "body": "Note -- you are capturing and printing two things, while three are needed?  Also, I take it that the shown data is correct (and that a bit more that there is on each line, as seen on the link given above, is exactly as seen in that link, not affecting patterns)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1551167581, "post_id": 54880265, "comment_id": 96530532, "body": "The second pattern in your regex matches the emtpy <code>[]</code> at the end of the line (seen in the link, not in the question) because of the greediness of <code>.+</code>"}, {"owner": {"reputation": 21467, "user_id": 766570, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/urpdN.jpg?s=128&g=1", "display_name": "abbood", "link": "https://stackoverflow.com/users/766570/abbood"}, "edited": false, "score": 0, "creation_date": 1551167685, "post_id": 54880265, "comment_id": 96530588, "body": "updated question to include actual logs to avoid confusion"}, {"owner": {"reputation": 21467, "user_id": 766570, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/urpdN.jpg?s=128&g=1", "display_name": "abbood", "link": "https://stackoverflow.com/users/766570/abbood"}, "edited": false, "score": 0, "creation_date": 1553756827, "post_id": 54880265, "comment_id": 97504510, "body": "it worked perfectly! i granted you the correct answer"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1553760988, "post_id": 54880265, "comment_id": 97506260, "body": "Great, good to hear it&#39;s all good :)   And thank you for taking care of that."}], "answers": [{"tags": [], "owner": {"reputation": 28228, "user_id": 7132550, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1063981417044495/picture?type=large", "display_name": "Micha\u0142 Turczyn", "link": "https://stackoverflow.com/users/7132550/micha%c5%82-turczyn"}, "is_accepted": false, "score": 1, "last_activity_date": 1551166734, "creation_date": 1551166734, "answer_id": 54880520, "question_id": 54880265, "link": "https://stackoverflow.com/questions/54880265/perl-capture-groups-with-logs-using-regular-expressions/54880520#54880520", "title": "Perl capture groups with logs using regular expressions", "body": "<p>You could try this pattern <code>\\[([^\\]]++)\\].+phone\\_numbers\\D++(\\d++).+SmsJob\\:(\\w++)</code></p>\n\n<p>Explanation:</p>\n\n<p><code>\\[([^\\]]++)\\]</code> will match date inside square brackets, capturing date in a group,</p>\n\n<p><code>.+phone\\_numbers\\D++(\\d++)</code> will match one or more of any characters, then <code>phone_number</code> literally, then one or more non-digits and then it will capture actual phone number inside a group with <code>(\\d++)</code></p>\n\n<p><code>.+SmsJob\\:(\\w++)</code> will match first one or more of any characters, then <code>SmsmJob</code> literally, then <code>:</code> and then will capture job ID inside another capturing group</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1551426600, "last_edit_date": 1551426600, "creation_date": 1551166829, "answer_id": 54880541, "question_id": 54880265, "link": "https://stackoverflow.com/questions/54880265/perl-capture-groups-with-logs-using-regular-expressions/54880541#54880541", "title": "Perl capture groups with logs using regular expressions", "body": "<p>Relying fully on details of the format, with all <code>\"</code> and <code>[]</code> etc</p>\n\n<pre><code>perl -wnE'\n    say \"$1, $2, $3\"  \n        if /:\\[(.*?)\\].*?\"phone_numbers\":\\[\"(.*?)\"\\].*?SmsJob:(.*?)\"/\n' file\n</code></pre>\n\n<p>where I use explicit phrases (like <code>\"phone_numbers\":</code>) to anchor needed patterns.</p>\n\n<p>Note the non-greedy patterns everywhere. Since we have convenient textual \"anchors\" for what we need to capture there is no reason to let greedy patterns run amok; they are much harder to track mentally, can be tricky to get right, and are generally less efficient. <sup>&dagger;</sup></p>\n\n<p>Note that I use <code>\"</code> after <code>SmsJob</code> because <code>SmsJob:</code> comes last in <code>objectKey</code> and so it happens to have <code>\"</code> right after, which is handy to delimit the pattern to match. But if that <code>\"</code> isn't certain to be there then <code>.*?</code> need be changed; perhaps to <code>[0-9a-zA-Z]</code> (minimal pattern for what is allowed in <code>SmsJob</code> value), followed by a literal character that ends it (like <code>,</code> or <code>:</code> etc).</p>\n\n<p>This captures the timestamp and phone number and SmsJob correctly from the given sample.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup> &thinsp; The second pattern in the honest attempt in the question fails to capture what is expected because the greedy <code>.+</code> grabs <em>everything</em> all the way to the very last pair <code>[]</code> in the string, since the <code>\\[.*\\]</code> that comes after <code>.+</code> does match that last <code>[]</code> so the whole pattern matches that way. </p>\n"}, {"tags": [], "owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "is_accepted": false, "score": 1, "last_activity_date": 1551166882, "creation_date": 1551166882, "answer_id": 54880553, "question_id": 54880265, "link": "https://stackoverflow.com/questions/54880265/perl-capture-groups-with-logs-using-regular-expressions/54880553#54880553", "title": "Perl capture groups with logs using regular expressions", "body": "<p>Your current regex is so greedy and the given input string surely is different. You didn't try to get three capturing groups either. Try this instead:</p>\n\n<pre><code>\\[([\\d: -]+)\\][^][]+\\[\"([^][]+)\"\\].*?SmsJob:(\\w+)\n</code></pre>\n\n<p>Perl:</p>\n\n<pre><code>perl -ne 'print \"$1,$2,$3\\n\" if /\\[([\\d: -]+)\\][^][]+\\[\"([^][]+)\"\\].*?SmsJob:(\\w+)/' filename\n</code></pre>\n\n<p>Regex breakdown:</p>\n\n<ul>\n<li><code>\\[</code> Match <code>[</code> literally</li>\n<li><code>(</code> Start of first capturing group\n\n<ul>\n<li><code>[\\d: -]+</code> Match a combination of specified characters (digit, <code>:</code>, space and <code>-</code>)</li>\n</ul></li>\n<li><code>)</code> End of capturing group</li>\n<li><code>\\]</code> Match <code>]</code> literally</li>\n<li><code>[^][]+</code> Match anything but <code>[</code> and <code>]</code></li>\n<li><code>\\[\"</code> Match <code>[\"</code> literally</li>\n<li><code>(</code> Start of second capturing group\n\n<ul>\n<li><code>[^][]+</code> Match anything but <code>[</code> and <code>]</code></li>\n</ul></li>\n<li><code>)</code> End of capturing group</li>\n<li><code>\"\\].*?SmsJob:</code> Match up to <code>SmsJob:</code></li>\n<li><code>(\\w+)</code> Match a sequence of word characters and store in 3rd capturing group</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "is_accepted": false, "score": 0, "last_activity_date": 1551189562, "creation_date": 1551189562, "answer_id": 54887199, "question_id": 54880265, "link": "https://stackoverflow.com/questions/54880265/perl-capture-groups-with-logs-using-regular-expressions/54887199#54887199", "title": "Perl capture groups with logs using regular expressions", "body": "<p>Your \"JOB-VARS\" look very much like JSON to me. Maybe consider using the JSON module.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse JSON;\nmy $json= new JSON;\nwhile (&lt;&gt;) {\n    my ($ts, $jtext)= /\\[(.*?)\\] production.DEBUG: JOB-VARS : (.*)/;\n    my ($obj)= $json-&gt;decode_prefix($jtext);\n    my $phone_number= $obj-&gt;{phone_numbers}-&gt;[0];\n    my $jid= $obj-&gt;{objectKey};\n    $jid=~ s/^.*://;\n    printf \"| %19s | %-15s |%32s|\\n\",$ts,$phone_number,$jid;\n}\n</code></pre>\n"}], "owner": {"reputation": 21467, "user_id": 766570, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/urpdN.jpg?s=128&g=1", "display_name": "abbood", "link": "https://stackoverflow.com/users/766570/abbood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 54880541, "answer_count": 4, "score": 2, "last_activity_date": 1551655434, "creation_date": 1551165690, "last_edit_date": 1551655434, "question_id": 54880265, "link": "https://stackoverflow.com/questions/54880265/perl-capture-groups-with-logs-using-regular-expressions", "title": "Perl capture groups with logs using regular expressions", "body": "<p>I'm trying to convert this log line:</p>\n\n<pre><code>9:[2019-02-25 00:39:01] production.DEBUG: JOB-VARS : {\"phone_numbers\":[\"+9660599291111\"],\"message\":\"Your verification code is: 74222\",\"twilio\":{},\"objectKey\":\"job:class:App\\\\Jobs\\\\SmsJob:000000001328e347000000003113b4f8\",\"connection\":\"sqs-high\",\"queue\":null,\"delay\":null,\"job\":{},\"JOB-CLASS\":\"App\\\\Jobs\\\\SmsJob\"} [] []\n16:[2019-02-25 00:50:06] production.DEBUG: JOB-VARS : {\"phone_numbers\":[\"+9660533001112\"],\"message\":\"Your verification code is: 31231\",\"twilio\":{},\"objectKey\":\"job:class:App\\\\Jobs\\\\SmsJob:00000000206561fd000000003fb01b05\",\"connection\":\"sqs-high\",\"queue\":null,\"delay\":null,\"job\":{},\"JOB-CLASS\":\"App\\\\Jobs\\\\SmsJob\"} [] []\n54:[2019-02-25 03:59:42] production.DEBUG: JOB-VARS : {\"phone_numbers\":[\"+9647707771113\"],\"message\":\"Your verification code is: 64628\",\"twilio\":{},\"objectKey\":\"job:class:App\\\\Jobs\\\\SmsJob:0000000003baa9660000000022c0679c\",\"connection\":\"sqs-high\",\"queue\":null,\"delay\":null,\"job\":{},\"JOB-CLASS\":\"App\\\\Jobs\\\\SmsJob\"} [] []\n</code></pre>\n\n<p>into a spreadsheet that looks like this:</p>\n\n<pre><code>|       time          |   phone number   |            sms job id          | \n---------------------------------------------------------------------------\n| 2019-02-25 00:39:01 | +96605992911111  |000000001328e347000000003113b4f8|\n| 2019-02-25 00:50:06 | +96605992911112  |00000000206561fd000000003fb01b05|\n| 2019-02-25 03:59:42 | +96605992911113  |0000000003baa9660000000022c0679c|\n</code></pre>\n\n<p>I tried writing this line</p>\n\n<pre><code>perl -ne 'print \"$1,$2\\n\" if /\\[(.*?)\\].+(\\[.*\\])/' filename\n</code></pre>\n\n<p>but all I got is this:</p>\n\n<pre><code>2019-02-25 00:39:01,[]\n2019-02-25 00:50:06,[]\n2019-02-25 03:59:42,[]\n</code></pre>\n\n<p>I got stuck capturing the second group. Ideas?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1551136053, "post_id": 54875477, "comment_id": 96522178, "body": "Note that <code>File::Spec-&gt;rel2abs(&#39;.&#39;)</code> is actually a <i>different</i> wrong answer: it is the current working directory (at the time that line runs), which is not necessarily the directory that contains either the initial script or the current file."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1551147314, "post_id": 54875477, "comment_id": 96524817, "body": "how is A.pm installed?"}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1551135966, "post_id": 54875627, "comment_id": 96522148, "body": "Two modules that can wrap this functionality usefully: <a href=\"http://metacpan.org/pod/Dir::Self\" rel=\"nofollow noreferrer\">Dir::Self</a> and my own <a href=\"http://metacpan.org/pod/lib::relative\" rel=\"nofollow noreferrer\">lib::relative</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1551136237, "post_id": 54875627, "comment_id": 96522231, "body": "@Grinnz, Both of those have the same bug as my first snippet."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1551136667, "post_id": 54875627, "comment_id": 96522357, "body": "I&#39;m honestly not sure if I&#39;d call that a bug. If the user loads a script or module via a symlink, how is the author to know that they should search in the destination, not where the symlink is? I can think of use cases where you would want the latter. Anyway as you noted, in practice it&#39;s a rare problem."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1551136862, "post_id": 54875627, "comment_id": 96522420, "body": "@Grinnz, If you installed two files into the same directory (or in a relative one), the approach used by Dir::Self and lib::relative to find the neighbouring file won&#39;t always find the file. I would definitely call not being able to find the file you want to find -- or worse, finding the wrong file -- a bug. Not just a bug, but potentially a major security vulnerability! (That&#39;s why <code>.</code> is no longer in <code>@INC</code>.)"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1551464153, "post_id": 54875627, "comment_id": 96663145, "body": "I am considering replacing the incantation to <code>File::Spec-&gt;catdir(File::Basename::dirname(Cwd::abs_path __FILE__), &#39;path&#47;to&#47;lib&#39;)</code> (with checking for if <code>__FILE__</code> exists for oneliners, as abs_path is not portable for nonexistent files). Can you think of any cases where this approach would fail? I appreciate your insight."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1551464796, "post_id": 54875627, "comment_id": 96663416, "body": "@Grinnz, <code>__FILE__</code> and <code>$0</code> are <code>-e</code> for one-liners. /// Using <code>catdir</code> (which should be used as <code>catdir(..., &#39;path&#39;, &#39;to&#39;, &#39;lib&#39;)</code> to be useful) is overkill (except possibly to support VMS?) /// It could fail if the CWD is changed earlier in the program, as I already mentioned. It could also fail if the script is deleted and such, but there&#39;s nothing you can do about that."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1551465173, "post_id": 54875627, "comment_id": 96663582, "body": "Right, it contains caveats already about the chdir risk and passing file paths in the format expected by the OS - and the catdir is overkill for Unix/Windows but a small overkill for maximum portability."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1551134227, "last_edit_date": 1551134227, "creation_date": 1551133449, "answer_id": 54875627, "question_id": 54875477, "link": "https://stackoverflow.com/questions/54875477/is-there-a-way-to-get-the-directory-of-the-current-not-currently-executing-fil/54875627#54875627", "title": "Is there a way to get the directory of the current (not currently executing) file at runtime?", "body": "<p><code>__FILE__</code> returns the path that was used to retrieve the file being executed. This means you could use the following:</p>\n\n<pre><code>use File::Basename qw( dirname );\n\ndirname(__FILE__)\n</code></pre>\n\n<p>That will fail if a symlink was used to load the file, so one normally wants to resolve symlinks first.</p>\n\n<pre><code>use Cwd            qw( abs_path );\nuse File::Basename qw( dirname );\n\ndirname(abs_path(__FILE__))\n</code></pre>\n\n<p>This is more important for a script than for a module because the odds of a symlink being used to load a module are quite low.</p>\n\n<p>Warning: These can fail if the CWD changed since the module was loaded.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1551136339, "post_id": 54875780, "comment_id": 96522263, "body": "That doesn&#39;t get a <i>directory</i>. For that, you&#39;d need <code>dirname(abs_path($INC{&quot;Foo&#47;Bar.pm&quot;}))</code>, but aformentioned <code>dirname(abs_path(__FILE__))</code> is simpler."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1551136426, "post_id": 54875780, "comment_id": 96522286, "body": "Also there is no guarantee that where you loaded some other module from is the same place the current module is being loaded from, even if both are in sitelib."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1551136632, "post_id": 54875780, "comment_id": 96522348, "body": "@Grinnz, JSON was just an example. You&#39;d use the name of the relevant module."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 3, "last_activity_date": 1551134388, "creation_date": 1551134388, "answer_id": 54875780, "question_id": 54875477, "link": "https://stackoverflow.com/questions/54875477/is-there-a-way-to-get-the-directory-of-the-current-not-currently-executing-fil/54875780#54875780", "title": "Is there a way to get the directory of the current (not currently executing) file at runtime?", "body": "<p>If you've already <code>use</code>'d or <code>require</code>'d a module, the location of the file resides in <code>%INC</code>.</p>\n\n<pre><code>$ perl -MJSON -E 'say $INC{\"JSON.pm\"}'\n/opt/share/perl5/site_perl/5.16/JSON.pm\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 11045902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea760863dccef139e9632394db4693c?s=128&d=identicon&r=PG&f=1", "display_name": "Jon G", "link": "https://stackoverflow.com/users/11045902/jon-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 1, "accepted_answer_id": 54875627, "answer_count": 2, "score": 2, "last_activity_date": 1551134388, "creation_date": 1551132689, "question_id": 54875477, "link": "https://stackoverflow.com/questions/54875477/is-there-a-way-to-get-the-directory-of-the-current-not-currently-executing-fil", "title": "Is there a way to get the directory of the current (not currently executing) file at runtime?", "body": "<p>I have a .pm file, let's call it A.pm, that I am use-ing in another file B.pl, which lives in a separate directory. Inside A.pm, I would like to reference an external non-perl file that exists in same directory. To avoid hardcoding the path to that external file, I would like to get the directory in which A.pm lives at run time.</p>\n\n<p>I've tried using $FindBin::Bin and File::Spec->rel2abs('.'), but I've learned that those point you to directory of the currently <em>executing</em> script, not the current file. $0 gives me the name of the currently executing script as well.</p>\n\n<p>Is there a way to get the directory A.pm lives in aside from hardcoding the path in A.pm?</p>\n\n<p>EDIT: I should also note that I've tried just referencing the external file with path relative to A.pm, but during execution, the code looks for the external file in directory where B.pl lives, so that doesn't work either.</p>\n"}, {"tags": ["perl", "sqlplus"], "comments": [{"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 3, "creation_date": 1551126116, "post_id": 54874034, "comment_id": 96518120, "body": "Why not use <code>DBI</code> and <code>DBD::Oracle</code>?"}, {"owner": {"reputation": 9, "user_id": 7105927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/443741e4c1512215874d4116c41af5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Zain Danish", "link": "https://stackoverflow.com/users/7105927/zain-danish"}, "reply_to_user": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1551126169, "post_id": 54874034, "comment_id": 96518150, "body": "requirement is like that only"}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1551128764, "post_id": 54874034, "comment_id": 96519387, "body": "That&#39;s not really an answer to the question."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1551129518, "post_id": 54874034, "comment_id": 96519719, "body": "What exactly is the problem? You showed what you got, but I don&#39;t see any error message, and nothing stands out as special. What is it you were expecting?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1551129534, "post_id": 54874034, "comment_id": 96519722, "body": "Note that your code suffers from multiple code injection bugs."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1551161286, "post_id": 54874034, "comment_id": 96528000, "body": "Isn&#39;t your <code>SELECT</code> statement missing the trailing <code>;</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 118, "user_id": 2542096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3iTP.png?s=128&g=1", "display_name": "jiri.hofman", "link": "https://stackoverflow.com/users/2542096/jiri-hofman"}, "is_accepted": false, "score": 0, "last_activity_date": 1551168696, "creation_date": 1551168696, "answer_id": 54880960, "question_id": 54874034, "link": "https://stackoverflow.com/questions/54874034/perl-not-able-print-desired-output/54880960#54880960", "title": "perl not able print desired output", "body": "<p>I think there is a <code>;</code> missing</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$output=`echo \"select sysdate from dual;\"  | sqlplus  $dbuser\\/$dbpasswd\\@$db`;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "is_accepted": true, "score": 0, "last_activity_date": 1551179150, "creation_date": 1551179150, "answer_id": 54884097, "question_id": 54874034, "link": "https://stackoverflow.com/questions/54874034/perl-not-able-print-desired-output/54884097#54884097", "title": "perl not able print desired output", "body": "<p>Sqlplus requires many settings to be usable. I suggest:</p>\n\n<pre><code>$output=`( echo \"set heading off\" ; echo \"set feedback off\" ; echo \"set newpage none\" ; echo \"set pagesize 0\" ; echo \"select sysdate from dual;\" )  | sqlplus -s $dbuser\\/$dbpasswd\\@$db`;\n</code></pre>\n\n<p>And do not forget to chomp the result:</p>\n\n<pre><code>chomp $output\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 7105927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/443741e4c1512215874d4116c41af5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Zain Danish", "link": "https://stackoverflow.com/users/7105927/zain-danish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 54884097, "answer_count": 2, "score": -3, "last_activity_date": 1551179150, "creation_date": 1551126031, "question_id": 54874034, "link": "https://stackoverflow.com/questions/54874034/perl-not-able-print-desired-output", "title": "perl not able print desired output", "body": "<p>Hi I am writing a perl script to connect to a DB using SQL Plus but when i query out the data it is not showing proper output, can somebody explain this. </p>\n\n<blockquote>\n  <p>$ perl test.pl -u user -p paswd -d database</p>\n</blockquote>\n\n<pre><code>while ($ARGV[0] =~ /^-/)\n{\n        $opt = shift;\n        $dbuser = shift if ($opt eq \"-u\");\n        $dbpasswd = shift if ($opt eq \"-p\");\n        $db = shift if ($opt eq \"-d\");\n}\n$output=`echo \"select sysdate from dual\"  | sqlplus  $dbuser\\/$dbpasswd\\@$db`;\nprint $output;\n</code></pre>\n\n<p>Output screen: I want output as sysdate.</p>\n\n<pre><code>SQL*Plus: Release 11.2.0.3.0 Production on Mon Feb 25 13:13:38 2019\n\nCopyright (c) 1982, 2011, Oracle.  All rights reserved.\n\n\nConnected to:\nOracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production\nWith the Partitioning, OLAP, Data Mining and Real Application Testing options\n\nSQL&gt; SQL&gt;   2  Disconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production\nWith the Partitioning, OLAP, Data Mining and Real Application Testing options\n</code></pre>\n"}, {"tags": ["sql", "perl", "catalyst", "dbix-class"], "comments": [{"owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "edited": false, "score": 1, "creation_date": 1551164263, "post_id": 54873455, "comment_id": 96529094, "body": "The abbreviation of DBIx::Class is DBIC as DBIx is a whole CPAN namespace."}], "answers": [{"tags": [], "owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "is_accepted": false, "score": 1, "last_activity_date": 1551187571, "last_edit_date": 1551187571, "creation_date": 1551164405, "answer_id": 54879985, "question_id": 54873455, "link": "https://stackoverflow.com/questions/54873455/no-such-relationship-for-a-dbic-grouped-query/54879985#54879985", "title": "No such relationship for a DBIC grouped query", "body": "<p>You named the relationship <code>products</code> so that's what you need to use in the <code>join</code> parameter. A table name is never used in any DBIC parameter, only in the ResultSource definition.</p>\n\n<p>You also never have more than a single dot in one of the parameters.</p>\n\n<p>It's recommended to use <code>columns</code> instead of <code>select</code> and <code>as</code> because it's less prone to user errors.</p>\n\n<p><code>order_by</code> supports non-literal SQL syntax as well which is </p>\n\n<pre><code>[{ -asc =&gt; 'columnname' }]\n</code></pre>\n"}], "owner": {"reputation": 401, "user_id": 4748387, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/h8kAO.jpg?s=128&g=1", "display_name": "K&#233;rdez&#246;sk&#246;d\u0151 Indi&#225;n", "link": "https://stackoverflow.com/users/4748387/k%c3%a9rdez%c3%b6sk%c3%b6d%c5%91-indi%c3%a1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1551365466, "creation_date": 1551123292, "last_edit_date": 1551365466, "question_id": 54873455, "link": "https://stackoverflow.com/questions/54873455/no-such-relationship-for-a-dbic-grouped-query", "title": "No such relationship for a DBIC grouped query", "body": "<p>I tried to count all products grouped by their types, using this SQL query:</p>\n\n<pre><code>  select pt.id,\n         pt.name,\n         count(p.id) as n\n    from prd.product_types as pt,\n         prd.products as p\n   where pt.id = p.type\ngroup by pt.id,\n         pt.name\norder by pt.name\n</code></pre>\n\n<p>These two tables (<strong>prd.product_types</strong> and <strong>prd.products</strong>) are mapped by these two DBIC classes:</p>\n\n<pre><code>package ki::Schema::Result::ProductTypes;\n\nuse strict;\nuse warnings;\nuse utf8;\nuse Moose;\nuse MooseX::NonMoose;\nuse MooseX::MarkAsMethods autoclean =&gt; 1;\n\nextends 'DBIx::Class::Core';\n\n__PACKAGE__-&gt;load_components(\"InflateColumn::DateTime\", \"TimeStamp\", \"EncodedColumn\");\n__PACKAGE__-&gt;table(\"prd.product_types\");\n__PACKAGE__-&gt;add_columns(\n  \"id\",\n  {\n    data_type =&gt; \"uuid\",\n    default_value =&gt; \\\"uuid_generate_v4()\",\n    is_nullable =&gt; 0,\n    size =&gt; 16,\n  },\n  \"name\",\n  { data_type =&gt; \"varchar\", is_nullable =&gt; 0, size =&gt; 128 },\n);\n__PACKAGE__-&gt;set_primary_key(\"id\");\n__PACKAGE__-&gt;add_unique_constraint(\"uk_product_types\", [\"name\"]);\n__PACKAGE__-&gt;has_many(\n  \"products\",\n  \"ki::Schema::Result::Products\",\n  { \"foreign.type\" =&gt; \"self.id\" },\n  { cascade_copy =&gt; 0, cascade_delete =&gt; 0 },\n);\n__PACKAGE__-&gt;meta-&gt;make_immutable;\n\n1;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>package ki::Schema::Result::Products;\n\nuse strict;\nuse warnings;\nuse utf8;\nuse Moose;\nuse MooseX::NonMoose;\nuse MooseX::MarkAsMethods autoclean =&gt; 1;\n\nextends 'DBIx::Class::Core';\n\n__PACKAGE__-&gt;load_components(\"InflateColumn::DateTime\", \"TimeStamp\", \"EncodedColumn\");\n__PACKAGE__-&gt;table(\"prd.products\");\n__PACKAGE__-&gt;add_columns(\n  \"id\",\n  {\n    data_type =&gt; \"uuid\",\n    default_value =&gt; \\\"uuid_generate_v4()\",\n    is_nullable =&gt; 0,\n    size =&gt; 16,\n  },\n  \"type\",\n  { data_type =&gt; \"uuid\", is_foreign_key =&gt; 1, is_nullable =&gt; 0, size  =&gt; 16 },\n  \"name\",\n  { data_type =&gt; \"varchar\", is_nullable =&gt; 0, size =&gt; 128 },\n);\n__PACKAGE__-&gt;set_primary_key(\"id\");\n__PACKAGE__-&gt;add_unique_constraint(\"uk_products\", [\"name\"]);\n__PACKAGE__-&gt;belongs_to(\n  \"type\",\n  \"ki::Schema::Result::ProductTypes\",\n  { id =&gt; \"type\" },\n  { is_deferrable =&gt; 0, on_delete =&gt; \"NO ACTION\", on_update =&gt; \"NO ACTION\" },\n);\n__PACKAGE__-&gt;meta-&gt;make_immutable;\n\n1;\n</code></pre>\n\n<p>When I set the join it in my Catalyst controller, I get the \"No such relationship\":</p>\n\n<pre><code>DBIx::Class::ResultSource::_resolve_join(): No such relationship prd.products on ProductTypes\n</code></pre>\n\n<p>The result set is this:</p>\n\n<pre><code>$c-&gt;stash(product_types_rs =&gt; $c-&gt;model('DB_T::ProductTypes'));\n</code></pre>\n\n<p>and the join looks like this:</p>\n\n<pre><code>    $c-&gt;stash(categories =&gt; [$c-&gt;stash-&gt;{product_types_rs}-&gt;search({}, {\n        join     =&gt; [qw/ prd.products /],\n        select   =&gt; [ { count =&gt; 'prd.products.id' } ],\n        as       =&gt; [qw/ n /],\n        group_by =&gt; [qw/ id /],\n        order_by =&gt; 'name ASC'\n    })]);\n</code></pre>\n\n<p>The query above is a one to one reproduction of the query artist-cd from the DBIC documentation. But there is something what I can not understand and it is wrong.</p>\n\n<p>Back with some news:</p>\n\n<p>the only way what worked up to now is this:</p>\n\n<pre><code>$c-&gt;stash(categories =&gt; [$c-&gt;stash-&gt;{product_types_rs}-&gt;search({}, \n{\n    '+select' =&gt; [{ COUNT =&gt; 'products.id', -as =&gt; 'n'}],\n    join =&gt; ['products'],\n    group_by =&gt; 'me.id',\n    order_by =&gt; { -desc =&gt; ' COUNT( products.id )' },\n})])\n</code></pre>\n\n<p>and its SQL looks like this:</p>\n\n<pre><code>  SELECT me.id, me.name, COUNT( products.id ) AS n\n    FROM prd.product_types me LEFT JOIN prd.products products \n                                     ON products.type = me.id\nGROUP BY me.id\nORDER BY COUNT( products.id ) DESC\n</code></pre>\n\n<p>I tested the generated SQL query and I get the wanted result. There is a remaining issue. In my view, I do use this</p>\n\n<pre><code>[% FOREACH category IN categories -%]\n    &lt;li&gt;([% category.n %])&lt;/li&gt;\n[% END -%]\n</code></pre>\n\n<p>loop to iterate the result set. But the value of <strong>n</strong> is not displayed even if the Dumper->Dump() displays me the correct datas:</p>\n\n<pre><code>...\n'_column_data' =&gt; {\n    'name' =&gt; \"XTorckAlsa\",\n    'n' =&gt; 1,\n    'id' =&gt; '88b94b12-4169-4964-9022-3eebbc5c05c5'\n},\n...\n'_column_data' =&gt; {\n    'name' =&gt; \"Pledicts11\",\n    'n' =&gt; 5,\n    'id' =&gt; 'ebda7223-99e3-48d6-b662-c7d17d124787'\n},\n</code></pre>\n\n<p>I am still missing something.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1551123461, "post_id": 54873337, "comment_id": 96516954, "body": "<a href=\"https://github.com/Perl-Toolchain-Gang/Test-Harness/commit/062737a4a2ce3d43af18baa2e1626d17040ea21d\" rel=\"nofollow noreferrer\">Andy Armstrong wrote that doc line</a>, he could likely confirm."}, {"owner": {"reputation": 48744, "user_id": 40468, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/43722cb1e955874a8eb721e9dfe101d1?s=128&d=identicon&r=PG", "display_name": "Ether", "link": "https://stackoverflow.com/users/40468/ether"}, "edited": false, "score": 1, "creation_date": 1551123593, "post_id": 54873337, "comment_id": 96517016, "body": "Not knowing any better, I changed the documentation entry for that in July 2013, and then reverted it a few days later after I was schooled. I don&#39;t have irc logs covering that time frame but I bet there is something relevant on #toolchain or #perl-qa. I do recall there was an article covering the history, on somewhere like perlmonks or use.perl.org."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1588794342, "post_id": 54873337, "comment_id": 109040212, "body": "Thanks for the links!  In comments on the first of those commits, Ovid <a href=\"https://github.com/Perl-Toolchain-Gang/Test-Harness/commit/d389ff4ce551a19f6fb8a2cdaaf7fc33bd5dcc27#commitcomment-3579159\" rel=\"nofollow noreferrer\">mentioned</a> that Aristotle suggested it and Andy picked the name as a tribute."}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 2, "last_activity_date": 1551131792, "last_edit_date": 1551131792, "creation_date": 1551123287, "answer_id": 54873452, "question_id": 54873337, "link": "https://stackoverflow.com/questions/54873337/what-is-the-origin-of-the-word-arisdottle/54873452#54873452", "title": "What is the origin of the word &quot;arisdottle&quot;?", "body": "<p>I worked on Test::Harness and prove.</p>\n\n<p>While I don't remember specifically, it is likely a portmanteau of \"dot\" and \"Aristotle\". <a href=\"https://metacpan.org/author/ARISTOTLE\" rel=\"nofollow noreferrer\">Aristotle Pagaltzis</a> is a Perl contributor, <a href=\"https://github.com/Perl-Toolchain-Gang/Test-Harness/blob/master/Changes#L804\" rel=\"nofollow noreferrer\">he contributed to Test::Harness</a>, and is probably the person who came up with the idea. <a href=\"https://metacpan.org/pod/distribution/perlsecret/lib/perlsecret.pod#Enterprise\" rel=\"nofollow noreferrer\">Aristotle is also credited with the Enterprise operator <code>( )x!!</code></a>.</p>\n\n<p><a href=\"https://github.com/Perl-Toolchain-Gang/Test-Harness/commit/062737a4a2ce3d43af18baa2e1626d17040ea21d\" rel=\"nofollow noreferrer\">Andy Armstrong wrote that doc line</a> and would likely be able to confirm.</p>\n"}, {"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1551123826, "post_id": 54873534, "comment_id": 96517141, "body": "While there may not be any wider usage, I worked on that project. It&#39;s a very specific thing to Perl."}, {"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "edited": false, "score": 1, "creation_date": 1551124576, "post_id": 54873534, "comment_id": 96517461, "body": "It does come up a few times: <a href=\"https://grep.cpan.me/?q=arisdottle\" rel=\"nofollow noreferrer\">grep.cpan.me/?q=arisdottle</a>  A lot of these instances seem to be copy/paste, but it&#39;s a word that gets used, even if a wider audience is not aware of it."}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "edited": false, "score": 0, "creation_date": 1551126108, "post_id": 54873534, "comment_id": 96518114, "body": "@oalders Almost all of those look like copies of Module::Metadata, often via cpanm. There&#39;s one or two additional usages I missed, but nothing that looks especially significant."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1551126322, "post_id": 54873534, "comment_id": 96518215, "body": "@duskwuff The question is about the origin of the term, not whether the term is significant."}, {"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "edited": false, "score": 0, "creation_date": 1551127223, "post_id": 54873534, "comment_id": 96518652, "body": "@duskwuff that&#39;s why I said &quot;A lot of these instances seem to be copy/paste&quot;"}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 1, "last_activity_date": 1551123696, "creation_date": 1551123696, "answer_id": 54873534, "question_id": 54873337, "link": "https://stackoverflow.com/questions/54873337/what-is-the-origin-of-the-word-arisdottle/54873534#54873534", "title": "What is the origin of the word &quot;arisdottle&quot;?", "body": "<p>I'm not convinced this is a piece of standard terminology at all. Every single usage of the word I can find online is either:</p>\n\n<ol>\n<li><p><a href=\"https://metacpan.org/source/LEONT/Test-Harness-3.42/bin/prove#L125\" rel=\"nofollow noreferrer\">A fragment of the documentation for <code>bin/prove</code></a>, like you found in your post</p></li>\n<li><p><a href=\"https://metacpan.org/source/ETHER/Module-Metadata-1.000033/lib/Module/Metadata.pm#L60\" rel=\"nofollow noreferrer\">A fragment of <code>Module::Metadata</code></a></p></li>\n<li><p>A reference to a domain name \"arisdottle.net\" formerly owned by <a href=\"https://metacpan.org/author/AMIRI\" rel=\"nofollow noreferrer\">AMIRI</a>, which has since expired.</p></li>\n<li><p>Unrelated content, including some misspellings of the name Aristotle.</p></li>\n</ol>\n\n<p>There doesn't appear to be any wider usage -- and, anecdotally, I've never heard it. There's certainly no language-independent term for the usage of <code>::</code> as a package separator; <a href=\"https://stackoverflow.com/questions/592322/php-expects-t-paamayim-nekudotayim\">PHP, famously, had to invent their own</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1110, "user_id": 10032, "user_type": "registered", "profile_image": "https://graph.facebook.com/501401000/picture?type=large", "display_name": "hexten", "link": "https://stackoverflow.com/users/10032/hexten"}, "is_accepted": false, "score": 1, "last_activity_date": 1594040774, "creation_date": 1594040774, "answer_id": 62756770, "question_id": 54873337, "link": "https://stackoverflow.com/questions/54873337/what-is-the-origin-of-the-word-arisdottle/62756770#62756770", "title": "What is the origin of the word &quot;arisdottle&quot;?", "body": "<p>Oh yeah - better late than never - that's was me and, yes, it was a reference to <a href=\"https://metacpan.org/author/ARISTOTLE\" rel=\"nofollow noreferrer\">https://metacpan.org/author/ARISTOTLE</a></p>\n"}], "owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 54873452, "answer_count": 3, "score": 5, "last_activity_date": 1594040774, "creation_date": 1551122743, "question_id": 54873337, "link": "https://stackoverflow.com/questions/54873337/what-is-the-origin-of-the-word-arisdottle", "title": "What is the origin of the word &quot;arisdottle&quot;?", "body": "<p>An <strong>arisdottle</strong> is <strong>::</strong> and can be used when running <code>prove</code> to execute Perl tests.  The documentation for <code>prove</code> states that:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>It is possible to supply arguments to tests. To do so separate them from\nprove's own arguments with the arisdottle, '::'. For example\n\n    prove -v t/mytest.t :: --url http://example.com\n\nwould run t/mytest.t with the options '--url http://example.com'. When\nrunning multiple tests they will each receive the same arguments.\n</code></pre>\n\n<p>I'm interested in the origin of this term.  It's hard to Google. I asked in #toolchain on irc.perl.org and I have yet to get a concrete answer.  For historical reasons, I thought it would be helpful to document the term here.</p>\n"}, {"tags": ["perl", "cgi", "iis-8", "strawberry-perl"], "comments": [{"owner": {"reputation": 2279, "user_id": 13563, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VoEyi.jpg?s=128&g=1", "display_name": "jimtut", "link": "https://stackoverflow.com/users/13563/jimtut"}, "edited": false, "score": 0, "creation_date": 1551122651, "post_id": 54872984, "comment_id": 96516588, "body": "Please add an example Perl script and what happens when you access it thru IIS.  Also, I think you might need to a mimetype for Perl to IIS, and map that to the DLL.  I use ActivePerl, and it automatically does something like that I think."}, {"owner": {"reputation": 9944, "user_id": 448715, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rvewo.jpg?s=128&g=1", "display_name": "octopusgrabbus", "link": "https://stackoverflow.com/users/448715/octopusgrabbus"}, "reply_to_user": {"reputation": 2279, "user_id": 13563, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VoEyi.jpg?s=128&g=1", "display_name": "jimtut", "link": "https://stackoverflow.com/users/13563/jimtut"}, "edited": false, "score": 0, "creation_date": 1551125963, "post_id": 54872984, "comment_id": 96518055, "body": "@jimtut Can&#39;t post an example. I haven&#39;t gotten that far. I&#39;m still struggling adding what IIS 8 wants to configure this <code>C:\\Perl\\bin\\perl.exe &quot;%s%&quot; %s </code> and then the necessary module that isn&#39;t there yet."}, {"owner": {"reputation": 9944, "user_id": 448715, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rvewo.jpg?s=128&g=1", "display_name": "octopusgrabbus", "link": "https://stackoverflow.com/users/448715/octopusgrabbus"}, "reply_to_user": {"reputation": 2279, "user_id": 13563, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VoEyi.jpg?s=128&g=1", "display_name": "jimtut", "link": "https://stackoverflow.com/users/13563/jimtut"}, "edited": false, "score": 0, "creation_date": 1551199933, "post_id": 54872984, "comment_id": 96549883, "body": "@jimtut Added what you requested, and re-edited OP to make more sense."}, {"owner": {"reputation": 345, "user_id": 537243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/109714183d4309bd07f8e02a4841ef04?s=128&d=identicon&r=PG", "display_name": "Justin", "link": "https://stackoverflow.com/users/537243/justin"}, "edited": false, "score": 0, "creation_date": 1552431828, "post_id": 54872984, "comment_id": 97005426, "body": "When you say &quot; cannot find anything in the logs, Event or IIS that will give me a clue&quot; do you mean that you cannot find a matching 404 error event in the IIS logs at all? Or you did find some entries, but it didn&#39;t seem helpful to you? If you did find them, post them just in case they are helpful to viewers. Also: is this all done in the &quot;Default Web Site&quot;? Or a named application? Share some details about that part of the IIS configuration."}, {"owner": {"reputation": 10624, "user_id": 4448410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FysB.jpg?s=128&g=1", "display_name": "Jannes Botis", "link": "https://stackoverflow.com/users/4448410/jannes-botis"}, "edited": false, "score": 1, "creation_date": 1552588856, "post_id": 54872984, "comment_id": 97078942, "body": "Change &quot;#!/usr/local/bin/perl -w&quot; to the path of perl.exe. Did you &quot;enable 32-bit applications&quot; and set &quot;handler Mappings&quot; -&gt; &quot;Add a Script Map&quot;? <a href=\"http://gdavidcarter.blogspot.com/2016/04/installing-perl-on-windows-2012r2-iis-85.html\" rel=\"nofollow noreferrer\">gdavidcarter.blogspot.com/2016/04/&hellip;</a>"}, {"owner": {"reputation": 9944, "user_id": 448715, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rvewo.jpg?s=128&g=1", "display_name": "octopusgrabbus", "link": "https://stackoverflow.com/users/448715/octopusgrabbus"}, "reply_to_user": {"reputation": 10624, "user_id": 4448410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FysB.jpg?s=128&g=1", "display_name": "Jannes Botis", "link": "https://stackoverflow.com/users/4448410/jannes-botis"}, "edited": false, "score": 0, "creation_date": 1552599641, "post_id": 54872984, "comment_id": 97084043, "body": "@JannesBotis Please put this in as an answer, because I did none of this. I will try this as soon as possible. Thanks."}, {"owner": {"reputation": 9944, "user_id": 448715, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rvewo.jpg?s=128&g=1", "display_name": "octopusgrabbus", "link": "https://stackoverflow.com/users/448715/octopusgrabbus"}, "edited": false, "score": 0, "creation_date": 1552850388, "post_id": 54872984, "comment_id": 97157825, "body": "The comments and answer will be dealt with. I&#39;m a one man bad, and have to get some other things running first. I will update either the OP or with an answer when I try all this out. Thank you."}], "answers": [{"tags": [], "owner": {"reputation": 1135, "user_id": 11187838, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wxk3EVSuevM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd5Ukt0ayJDYXH5piOHkFG898W6eg/mo/photo.jpg?sz=128", "display_name": "Slawomir Dziuba", "link": "https://stackoverflow.com/users/11187838/slawomir-dziuba"}, "is_accepted": true, "score": 1, "last_activity_date": 1552604302, "creation_date": 1552604302, "answer_id": 55173236, "question_id": 54872984, "link": "https://stackoverflow.com/questions/54872984/strawberry-perl-and-iis-seemingly-configured-but-404-page-received/55173236#55173236", "title": "Strawberry Perl and IIS Seemingly Configured, But 404 Page Received", "body": "<p>Can you run any html file? If so, place a simple perl script next to it and call it.\nprint \"Content-type: text/html \\n\\n\";\nprint \"OK\";</p>\n\n<p>If this works, the problem is in your script. If it does not work you probably have the wrong settings. </p>\n\n<p>Check it out at <a href=\"http://gdavidcarter.blogspot.com/2016/04/installing-perl-on-windows-2012r2-iis-85.html\" rel=\"nofollow noreferrer\">http://gdavidcarter.blogspot.com/2016/04/installing-perl-on-windows-2012r2-iis-85.html</a> as Jannes Botis has already written.</p>\n\n<p>I do not have IIS and I can not check but since version 8 I probably do not need quotes in C:\\Perl\\bin\\perl.exe %s %s  (in contrast to previous versions where it is necessary)</p>\n"}, {"comments": [{"owner": {"reputation": 1135, "user_id": 11187838, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wxk3EVSuevM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd5Ukt0ayJDYXH5piOHkFG898W6eg/mo/photo.jpg?sz=128", "display_name": "Slawomir Dziuba", "link": "https://stackoverflow.com/users/11187838/slawomir-dziuba"}, "edited": false, "score": 0, "creation_date": 1553113049, "post_id": 55268807, "comment_id": 97270043, "body": "There is also Perl with ActiveState, also has its advantages in the form of better integration with the access to the GUI and precompiled modules. It depends on what is to be used. Both environments have their pros and cons."}], "tags": [], "owner": {"reputation": 9944, "user_id": 448715, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rvewo.jpg?s=128&g=1", "display_name": "octopusgrabbus", "link": "https://stackoverflow.com/users/448715/octopusgrabbus"}, "is_accepted": false, "score": 0, "last_activity_date": 1553110163, "creation_date": 1553110163, "answer_id": 55268807, "question_id": 54872984, "link": "https://stackoverflow.com/questions/54872984/strawberry-perl-and-iis-seemingly-configured-but-404-page-received/55268807#55268807", "title": "Strawberry Perl and IIS Seemingly Configured, But 404 Page Received", "body": "<p>I eventually got the new web site working working based on the helpful and valuable information from the answer and comments to the OP here, as well as some of the information in this <a href=\"http://gdavidcarter.blogspot.com/2016/04/installing-perl-on-windows-2012r2-iis-85.html\" rel=\"nofollow noreferrer\">link</a>, noted in @SlawomirDziuba's answer. </p>\n\n<p>My biggest problem was choosing the correct handler, and, in order to get this running on IIS8, I needed a script map, not the CGI module. I also installed Strawberry Perl into C:\\Perl, given there is no other Perl on the system anyway.</p>\n"}], "owner": {"reputation": 9944, "user_id": 448715, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rvewo.jpg?s=128&g=1", "display_name": "octopusgrabbus", "link": "https://stackoverflow.com/users/448715/octopusgrabbus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 889, "favorite_count": 0, "accepted_answer_id": 55173236, "answer_count": 2, "score": 3, "last_activity_date": 1553110163, "creation_date": 1551121117, "last_edit_date": 1551199645, "question_id": 54872984, "link": "https://stackoverflow.com/questions/54872984/strawberry-perl-and-iis-seemingly-configured-but-404-page-received", "title": "Strawberry Perl and IIS Seemingly Configured, But 404 Page Received", "body": "<p>I have been looking at a few posts on this topic, but I'm still confused. Strawberry Perl and IIS 8 are installed on our Windows 2012 R2 server. I know to add a Strawberry Perl.exe under <em>ISAPI and CGI Restrictions</em>, and finally corrected my mistake (earlier edit of this post) of listing a DL). You can use a .exe, not just a DLL, so I have provided the path to Strawberry Perl's perl.exe. <a href=\"https://i.stack.imgur.com/mCyjD.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mCyjD.jpg\" alt=\"IIS 8 Menu\"></a></p>\n\n<p>Edit 2/26/2019:\nAs requested, here is the first part of Select.pl, which is listed in default documents:</p>\n\n<pre><code>#!/usr/local/bin/perl -w\n# Permit/Web/Select.pl\n# -*- tab-width: 8 -*-\n\nuse strict;\nuse warnings;\nuse lib qw( ../../include ./include );\nuse DbArgs;\nuse DBI;\n\n######################################################################\n# Prototypes\n#\nsub main();\nsub HTMLPermitTypeRow($);\nsub HTMLPermitClassRow($);\nsub jsQuote($);\n\n######################################################################\n# Globals\n#\nmy $HTML_ROOT_DIRECTORY     = DbArgs::HTMLRootDirectory();\nmy $debugging               = 0;\n\n# start with Sunday to align with localtime order 0 to 6\n#\nmy @weekdays                 = qw(Sunday Monday Tuesday Wednesday Thursday Friday Saturday);\n\n# work Mon-Fri no holidays\n#\nmy @previousworkdays        = qw(Friday Friday Yesterday Yesterday Yesterday Yesterday Friday);\n\nmy %input;\n\nmain();\nexit(0);\n\n######################################################################\n#   main\n#\nsub main() {\n    my $header;\n    my $footer;\n    my $inspectorsrow;\n    my $today;\n    my ( $sec, $min, $hour, $mday, $mon, $year, $wday, $yday, $isdst )= localtime( );\n    my $inspected = $previousworkdays[$wday];\n\n    %input  = DbArgs::ParseArgs();\n\n    print \"Content-type: text/html\\n\\n\";\n\n    # define required input\n    # not defining optional input inspected, permittype, permitclass, reportformat\n    #\n    foreach ( qw( address contractor description inspector issue issue_thru owner ) ) {\n        $input{$_} = '' unless defined $input{$_};\n    }\n\n    my $hiddenfields = '';\n    foreach my $fieldname ( sort keys %input ) {\n        my %definedFields = ( 'address'     =&gt; ''\n                    , 'contractor'  =&gt; ''\n                    , 'description' =&gt; ''\n</code></pre>\n\n<p>There is a permits pool, which logs in as Administrator, and the permits application uses the permits pool. </p>\n\n<p>I have Select.pl listed as a default document, and the cgi handler is loaded. </p>\n\n<p>When I try to reach <a href=\"http://locahost/permits\" rel=\"nofollow noreferrer\">http://locahost/permits</a> or <a href=\"http://locahost/permits/Select.pl\" rel=\"nofollow noreferrer\">http://locahost/permits/Select.pl</a>, I get a 404, but cannot find anything in the logs, Event or IIS that will give me a clue of what is going wrong. Any pointers would be appreciated.</p>\n"}, {"tags": ["perl", "image-processing", "imagemagick"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1551122426, "post_id": 54872733, "comment_id": 96516509, "body": "Why are you opening the file <code>$pdfname</code> if you only use it as parameter in the systtem command line?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1551122584, "post_id": 54872733, "comment_id": 96516567, "body": "Have you tried the list form of <code>system()?</code> I.e. <code>system(qw(C:\\\\Program Files\\\\ImageMagick-6.6.2-Q16\\\\convert.exe), $pdfname, qw(-quality 60 -resize 256x335), $filename)</code> You should also add an error check to <code>system()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": false, "score": 2, "last_activity_date": 1551128753, "last_edit_date": 1551128753, "creation_date": 1551128103, "answer_id": 54874509, "question_id": 54872733, "link": "https://stackoverflow.com/questions/54872733/how-to-convert-a-pdf-document-to-jpg-using-imagemagick-and-perl/54874509#54874509", "title": "How to convert a PDF document to JPG using ImageMagick and Perl", "body": "<p>A few things...</p>\n\n<p>Firstly, remove the following lines - they are not needed:</p>\n\n<pre><code>open(my $fh, '&lt;', $pdfname);\nbinmode($fh); \n</code></pre>\n\n<hr>\n\n<p>Secondly, your ImageMagick version is <strong>ancient</strong> - it must be 7+ years old. Consider updating it - it is free.</p>\n\n<hr>\n\n<p>Thirdly, <strong>ImageMagick</strong> uses <strong>ghostscript</strong> to read PDF files - technically it <em>\"delegates\"</em> to <strong>ghostscript</strong>. In order for that work, it needs to be able to find <strong>ghostscript</strong> and I guess that is the issue. In the <strong>Command Prompt</strong> you probably have your <code>PATH</code> set to include the directory that contains <strong>ghostscript</strong> but Perl's <code>system()</code> command probably sets a different <code>PATH</code> that doesn't include that directory, so it can't be found.</p>\n\n<p>There are a couple of options but I am not that good on Windows, so you may need to work with me or someone else to get them working...</p>\n\n<p>The simplest is probably to find where <code>ghostscript</code> is installed, and then <strong>make a backup of</strong> and edit the file called <code>delegates.xml</code> in your <strong>ImageMagick</strong> directory and find the line that looks like this:</p>\n\n<pre><code>&lt;delegate decode=\"pdf\" encode=\"eps\" mode=\"bi\" command=\"&amp;quot;gs&amp;quot;  ...\n</code></pre>\n\n<p>and introduce the full path in front of the <code>gs</code> part, to end up with something like:</p>\n\n<pre><code>&lt;delegate decode=\"pdf\" encode=\"eps\" mode=\"bi\" command=\"&amp;quot;/full/path/to/gs&amp;quot; ...\n</code></pre>\n\n<p>The other option is to change your <code>system()</code> call in Perl, so you set the PATH to include ghostscript before you run <strong>ImageMagick</strong>. I have no idea how you would quote that, but you would want to run:</p>\n\n<pre><code>system(\"set PATH=C:\\path\\to\\ghostscript\\dir;C:\\path\\to\\ImageMagick\\dir;%PATH%  &amp;&amp; convert.exe YOURDOC.PDF -quality -resize widthxheight OUTPUT.PDF\")\n</code></pre>\n"}], "owner": {"reputation": 1102, "user_id": 4208719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cd078e79ba74af02fe5692190dbc73d3?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro ", "link": "https://stackoverflow.com/users/4208719/pedro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1551128753, "creation_date": 1551120058, "last_edit_date": 1551121639, "question_id": 54872733, "link": "https://stackoverflow.com/questions/54872733/how-to-convert-a-pdf-document-to-jpg-using-imagemagick-and-perl", "title": "How to convert a PDF document to JPG using ImageMagick and Perl", "body": "<p>I'm trying to convert a pdf into a jpg, but I keep getting an error and I don't know what am I doing wrong.</p>\n\n<p><code>form.pm</code>:</p>\n\n<pre><code> my $filename = \"C:\\\\inetpub\\\\wwwroot\\\\students.jpg\";\n  my $pdfname = \"C:\\\\inetpub\\\\wwwroot\\\\students.pdf\";\n\n  open(my $fh, '&lt;', $pdfname);\n  binmode($fh); \n\n  system('\"C:\\\\Program Files\\\\ImageMagick-6.6.2-Q16\\\\convert.exe\" \"' . $pdfname . '\" -quality 60 -resize 256x335 \"' . $filename . '\"');\n  return \"success\"; \n</code></pre>\n\n<p>I did a test thru the command line and is working fine, but from the file don't work.</p>\n"}, {"tags": ["perl", "character-encoding"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1551115577, "post_id": 54871473, "comment_id": 96513564, "body": "&quot;when I open a file&quot; - do you mean you open the file with an editor, e.g. vim or Emacs?"}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 0, "last_activity_date": 1551123017, "last_edit_date": 1551123017, "creation_date": 1551116958, "answer_id": 54871966, "question_id": 54871473, "link": "https://stackoverflow.com/questions/54871473/junk-characters-shows-up-while-opening-a-txt-file/54871966#54871966", "title": "Junk characters shows up while opening a txt file", "body": "<p><code>^@</code> represents a NUL byte (also known as <code>\\0</code>). If you have a lot of those in what's supposed to be a text file, that likely means the file is in UTF-16 but you're treating it as ASCII (or Latin-1 or UTF-8).</p>\n"}], "owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551123017, "creation_date": 1551115126, "last_edit_date": 1551116979, "question_id": 54871473, "link": "https://stackoverflow.com/questions/54871473/junk-characters-shows-up-while-opening-a-txt-file", "title": "Junk characters shows up while opening a txt file", "body": "<p>When I open a file which is .txt format it shows ^@(special characters) along with the actual data. But while printing the lines through Perl script it doesn't shows up. If the same is written to the output file it again shows up the special characters. Any suggestions would be appreciated.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 2, "creation_date": 1551113616, "post_id": 54870782, "comment_id": 96512512, "body": "<code>$VAR != $var1</code> Is this a typo in your code?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1551113691, "post_id": 54870782, "comment_id": 96512561, "body": "Wouldn&#39;t it be easier to first check that <code>&#47;\\bTOTO\\b</code> doesn&#39;t match? If it doesn&#39;t match the string is the result you want."}], "answers": [{"tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 5, "last_activity_date": 1551113782, "last_edit_date": 1551113782, "creation_date": 1551113618, "answer_id": 54871071, "question_id": 54870782, "link": "https://stackoverflow.com/questions/54870782/match-string-if-does-not-contain-a-specific-word/54871071#54871071", "title": "match string if does not contain a specific word", "body": "<p>You need the following regex</p>\n\n<pre><code>/^(?!.*TOTO)(.*)$/s\n</code></pre>\n\n<p>Try it at <a href=\"https://regex101.com/\" rel=\"noreferrer\">Regex 101</a> to get an explanation as to what it does</p>\n"}, {"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1551114348, "last_edit_date": 1551114348, "creation_date": 1551114015, "answer_id": 54871170, "question_id": 54870782, "link": "https://stackoverflow.com/questions/54870782/match-string-if-does-not-contain-a-specific-word/54871170#54871170", "title": "match string if does not contain a specific word", "body": "<p>I think you should simplify your logic:</p>\n\n<ul>\n<li>look for a word boundary <code>\\b</code></li>\n<li>plus the word <code>TOTO</code></li>\n<li>plus a word boundary <code>\\b</code></li>\n<li>apply the regex with the negative match operator <code>!~</code></li>\n</ul>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $var1=&lt;&lt;EO_STR;\n\nabc,./()\u00e9\u00e0 haha\nhihi\nhoho\n\nEO_STR\n\nmy $var2=&lt;&lt;EO_STR;\n\nabc,./()\u00e9\u00e0 haha\nhihi\n**TOTO**\nhoho\n\nEO_STR\n\nforeach my $var ($var1, $var2) {\n    if ($var !~ /\\bTOTO\\b/) {\n        print \"TOTO NOT FOUND; $var\\n\";\n    } else {\n        print \"TOTO FOUND: $var\\n\";\n    }\n}\n\nexit 0;\n</code></pre>\n\n<p>Of course you could simply reverse the logic if you prefer the regular match operator <code>=~</code>:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>if ($var =~ /\\bTOTO\\b/) {\n    print \"TOTO FOUND; $var\\n\";\n} else {\n    print \"TOTO NOT FOUND: $var\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nTOTO NOT FOUND;\nabc,./()\u00e9\u00e0 haha\n...\nhoho\n...\nTOTO FOUND:\nabc,./()\u00e9\u00e0 haha\n...\n**TOTO**\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 11114882, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4fofOQhdiJk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPl2f6zBXjSPjrKwy1rispOc_PioA/mo/photo.jpg?sz=128", "display_name": "&#193;lvaro Cano", "link": "https://stackoverflow.com/users/11114882/%c3%81lvaro-cano"}, "is_accepted": false, "score": 2, "last_activity_date": 1551114052, "creation_date": 1551114052, "answer_id": 54871181, "question_id": 54870782, "link": "https://stackoverflow.com/questions/54870782/match-string-if-does-not-contain-a-specific-word/54871181#54871181", "title": "match string if does not contain a specific word", "body": "<p>Also you could use the operator <strong>!~</strong>, you could try with the following code:</p>\n\n<pre><code>print $var1 . \"\\n\\n\" if ( $var1 !~ /TOTO/ );\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 10955982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fXlUjyZGvU4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM1ntguuklLWl7NMRK18InSOUcfEg/mo/photo.jpg?sz=128", "display_name": "Red_Developper", "link": "https://stackoverflow.com/users/10955982/red-developper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 54871071, "answer_count": 3, "score": 1, "last_activity_date": 1551114348, "creation_date": 1551112531, "question_id": 54870782, "link": "https://stackoverflow.com/questions/54870782/match-string-if-does-not-contain-a-specific-word", "title": "match string if does not contain a specific word", "body": "<pre><code>my $var1=&lt;&lt;EO_STR;\n\nabc,./()\u00e9\u00e0 haha\nhihi\nhoho\n\nEO_STR\n\nmy $var2=&lt;&lt;EO_STR;\n\nabc,./()\u00e9\u00e0 haha\nhihi\n**TOTO**\nhoho\n\nEO_STR\n</code></pre>\n\n<p>I have two variables VAR1 and VAR2 that contains a character string that contains punctuation characters, special characters..., I'd like to apply a regex that match all the contents of the variable only if it does not contain the word TOTO, if the string contains TOTO then do not return anything to me in $ 1 if else return all the text in the variable into $1.</p>\n\n<p>it means if I apply the regex on $var1 it will return the text:  \"abc,./()\u00e9\u00e0 haha\n    hihi\n    hoho \" in $ 1 and if I apply the same regex on $ var2 it will return nothing in $ 1 because $var2 contain TOTO</p>\n\n<p>I tried it but it does not work:</p>\n\n<pre><code>$VAR1=~/((?!TOTO).)*/;\nprint $1.\"\\n\\n\";\n\n$VAR2=~/((?!TOTO).)*/;\n    print $1.\"\\n\\n\";\n</code></pre>\n\n<p>he returns nothing in $ 1......</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1551112096, "post_id": 54870529, "comment_id": 96511653, "body": "O-Saft does not need to be installed. See the <a href=\"https://github.com/OWASP/O-Saft/blob/master/README\" rel=\"nofollow noreferrer\">README</a>: &quot;<i>O-Saft  can be executed from within the unpacked or cloned directory, installation is not necessary.</i>&quot; But there&#39;s also an <code>INSTALL.sh</code> script if you want to install it anyway."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1551118504, "post_id": 54870529, "comment_id": 96514839, "body": "@melpomene, I believe that installs (copies?) the application rather than installing the Perl modules for external use."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1551119054, "post_id": 54870529, "comment_id": 96515062, "body": "@KevDog, I&#39;m not convinced those are modules are meant to be used by anything other than O-Saft itself."}, {"owner": {"reputation": 11, "user_id": 11114802, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CV4gp016Gdo/AAAAAAAAAAI/AAAAAAABB6s/HSmSInjo9wY/photo.jpg?sz=128", "display_name": "KevDog", "link": "https://stackoverflow.com/users/11114802/kevdog"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1551120595, "post_id": 54870529, "comment_id": 96515778, "body": "@melpomene -- You are correct.  I found the problem with the Install.sh --check command kept telling me to try to use cpan to install the missing modules. The modules I wanted to use were in the net subdirectory of the git sources.  The problem with o-saft.pl was the first line of the script -- #!/usr/bin/perl.  I&#39;m using freebsd and the my perl was located within #!/usr/local/bin/perl.  I modified the script and it worked as the instructions stated it would.  Took me about an hour to figure this one out --"}], "answers": [{"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 1, "last_activity_date": 1551111775, "creation_date": 1551111775, "answer_id": 54870565, "question_id": 54870529, "link": "https://stackoverflow.com/questions/54870529/how-can-i-install-perl-modules-that-are-not-on-cpan/54870565#54870565", "title": "How can I install Perl modules that are not on CPAN?", "body": "<p>Just <code>use</code> them in your Perl program. When you run it, it will complain about them not being in <code>@INC</code> and tell you what directories are in <code>@INC</code>. </p>\n\n<p>Put them in one of those directories or modify your include path.</p>\n\n<pre><code>[ ~ ] \u279c  perl -MExample -e\"echo 1\";\nCan't locate Example.pm in @INC (you may need to install the Example module) (@INC contains: /Users/quentin/perl5/perlbrew/perls/perl-5.26.0-RC1/lib/site_perl/5.26.0/darwin-2level /Users/quentin/perl5/perlbrew/perls/perl-5.26.0-RC1/lib/site_perl/5.26.0 /Users/quentin/perl5/perlbrew/perls/perl-5.26.0-RC1/lib/5.26.0/darwin-2level /Users/quentin/perl5/perlbrew/perls/perl-5.26.0-RC1/lib/5.26.0).\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11114802, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CV4gp016Gdo/AAAAAAAAAAI/AAAAAAABB6s/HSmSInjo9wY/photo.jpg?sz=128", "display_name": "KevDog", "link": "https://stackoverflow.com/users/11114802/kevdog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1551114528, "creation_date": 1551111655, "last_edit_date": 1551114528, "question_id": 54870529, "link": "https://stackoverflow.com/questions/54870529/how-can-i-install-perl-modules-that-are-not-on-cpan", "title": "How can I install Perl modules that are not on CPAN?", "body": "<p>I'm trying to use the program O-Saft to verify my SSL certificates.  I'm using p5 on FreeBSD.  The git sources of O-Saft contain two modules called SSLhello.pm and SSLinfo.pm.  These modules are not found on CPAN.  Where do I install these modules so Perl can utilize them?</p>\n\n<p>This is my env variable:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>PERL5LIB=\"/home/kevdog/perl5/lib/perl5${PERL5LIB:+:${PERL5LIB}}\"; export PERL5LIB;\nPERL_LOCAL_LIB_ROOT=\"/home/kevdog/perl5${PERL_LOCAL_LIB_ROOT:+:${PERL_LOCAL_LIB_ROOT}}\"; export PERL_LOCAL_LIB_ROOT;\n</code></pre>\n"}, {"tags": ["git", "perl", "githooks", "git-commit"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1551109823, "post_id": 54869873, "comment_id": 96510343, "body": "Are you sure the option <code>--no-verify</code> isn&#39;t enabled?"}, {"owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1551109971, "post_id": 54869873, "comment_id": 96510450, "body": "100 % sure. I just call : <code>git commit</code> and then I enter my commit message."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1551110297, "post_id": 54869873, "comment_id": 96510666, "body": "Are you sure it commits anything? For me, it aborts the commit always, as each line contains at least the final newline, so it&#39;s never &quot;abort&quot; or &quot;&quot;."}, {"owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1551110446, "post_id": 54869873, "comment_id": 96510753, "body": "Well yes... If I do <code>git status</code> after that, it tells me that I have nothing to commit right know. And it catchs &quot;abort&quot; or &quot;&quot; because if I commit with &quot;&quot;/&quot;abort&quot; message, I print &quot;We shouldn&#39;t commit the modifications&quot; !"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1551110561, "post_id": 54869873, "comment_id": 96510823, "body": "At that point I&#39;d get out the big guns and run <code>strace -f -o wtf.log git commit</code> to see what the heck is going on."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1551110710, "post_id": 54869873, "comment_id": 96510904, "body": "@AntoineMaugein <code>$line</code> can never be <code>&quot;&quot;</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1551110925, "post_id": 54869873, "comment_id": 96511014, "body": "That doesn&#39;t follow."}, {"owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "edited": false, "score": 0, "creation_date": 1551111447, "post_id": 54869873, "comment_id": 96511283, "body": "Using : <code>strace -f -o wtf.log git commit</code>, I see that the last log line tells me : &quot;+++ exited with 1 +++&quot; so it should not be committed. But if I do <code>git status</code>, my file isn&#39;t present, I can&#39;t add it and I don&#39;t see a modified file."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1551111793, "post_id": 54869873, "comment_id": 96511475, "body": "Why <code>git status</code>? What does <code>git log -p</code> say?"}, {"owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "edited": false, "score": 0, "creation_date": 1551112095, "post_id": 54869873, "comment_id": 96511652, "body": "Git status gives me the changes to be committed no ? I should still see my file when I do git status if I prevent the last commit no ?"}, {"owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "edited": false, "score": 0, "creation_date": 1551112199, "post_id": 54869873, "comment_id": 96511716, "body": "Well.... <code>git log -p</code> tells me that the last commit is a few days ago... That&#39;s mean that I haven&#39;t committed any new changes and that the pre commit work...  I don&#39;t get it"}, {"owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "edited": false, "score": 0, "creation_date": 1551112287, "post_id": 54869873, "comment_id": 96511763, "body": "Why if the commit have been aborted, I don&#39;t see that I have changes to commit when I do git status... ? Anyway thanks for the help :)"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 2, "creation_date": 1551112948, "post_id": 54869873, "comment_id": 96512113, "body": "Isn&#39;t the logic reversed? &quot;abort&quot; doesn&#39;t lead to preventing of the commit..."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1551113840, "post_id": 54869873, "comment_id": 96512646, "body": "Does <code>git diff --cached</code> show anything?"}, {"owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "edited": false, "score": 0, "creation_date": 1551121635, "post_id": 54869873, "comment_id": 96516161, "body": "It doesn&#39;t show any diff even using --cached"}], "answers": [{"comments": [{"owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "edited": false, "score": 0, "creation_date": 1551116520, "post_id": 54870960, "comment_id": 96513948, "body": "Hello ! Thank you for the answer ! I&#39;d like more informations : 1. why is it preferable to use shift than ARGV here ? (2)"}, {"owner": {"reputation": 120535, "user_id": 123109, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/157c96de3d125abc1c363ff25c20dfaf?s=128&d=identicon&r=PG", "display_name": "Greg Bacon", "link": "https://stackoverflow.com/users/123109/greg-bacon"}, "reply_to_user": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "edited": false, "score": 1, "creation_date": 1551118242, "post_id": 54870960, "comment_id": 96514696, "body": "@Antoine It is arguably more idiomatic or elegant Perl where we tend to have a slight bias against indexing by individual array indices with <code>$array[$i]</code> or string indices with <code>substr</code>. Another way to write it is <code>my($commit_file) = @ARGV;</code>. Note that the parentheses around the <code>my</code> list are important because they impart list context, and that way <code>$commit_file</code> takes the value of the first element in <code>@ARGV</code>."}], "tags": [], "owner": {"reputation": 120535, "user_id": 123109, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/157c96de3d125abc1c363ff25c20dfaf?s=128&d=identicon&r=PG", "display_name": "Greg Bacon", "link": "https://stackoverflow.com/users/123109/greg-bacon"}, "is_accepted": true, "score": 3, "last_activity_date": 1551113208, "creation_date": 1551113208, "answer_id": 54870960, "question_id": 54869873, "link": "https://stackoverflow.com/questions/54869873/perl-commit-msg-hook-doesnt-stop-the-commit-when-exiting-1/54870960#54870960", "title": "Perl -- commit-msg hook doesn&#39;t stop the commit when exiting 1", "body": "<p>When I first installed your hook, I wasn\u2019t able to get it to commit <em>anything</em>, but that\u2019s because the hook has too many negatives. Your language teacher\u2019s admonitions to avoid double negatives will help you out when writing software too. The hook attempts to look for a valid condition by testing in the negative sense if a line looks good, set <code>$boolean</code> to 1 if so, but then <code>exit 0</code> (indicating success) only if <code>$boolean</code> was 0.</p>\n\n<p>The non-descript name <code>$boolean</code> is likely responsible in part. You may have lost track of your intended meaning between setting it and which exit status you wanted to produce. Further, your intent behind the logic will fail as long as the last line of the commit message is valid.</p>\n\n<p>The code below functions in the way you want with git 2.17.1.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#! /usr/bin/perl -w\n\nuse strict;\nuse warnings;\n\ndie \"Usage: $0 commit-log-message\\n\" unless @ARGV == 1; # (1)\n\n# Get the path to the files in which we have the commit message\nmy $commit_file = shift; # (2)\n\n# Read the file and extract the commit message (lines which don't start with #) \nmy $commit_msg = \"\";\nopen my $fh, \"&lt;\", $commit_file or die \"$0: open $commit_file: $!\"; # (3)\nwhile (&lt;$fh&gt;) {        # (4)\n    next if /^#/;      # (5)\n    $commit_msg .= $_;\n}\n\n# Check the message isn't empty or we don't have an \"abort\" line\nmy $valid_commit_msg = $commit_msg ne \"\" &amp;&amp; $commit_msg !~ /^abort$/m; # (6)\n\nif ($valid_commit_msg) { # (7)\n    print \"We should commit the modifications\\n\";\n    exit 0; # Don't prevent commit\n}\nelse {\n    print \"We shouldn't commit the modifications\\n\";\n    exit 1; # Prevent commit\n}\n</code></pre>\n\n<p><strong>(1)</strong> Yes, git is supposed to provide the name of the file with the log message, but sanity check for it in case the code gets copied or otherwise installed in the wrong hook.</p>\n\n<p><strong>(2)</strong> Pluck the argument from <code>@ARGV</code> with <code>shift</code>.</p>\n\n<p><strong>(3)</strong> Always, <em>always</em>, <strong>always</strong> check the return value from <code>open</code>. Note that the error message if it does fail contains the name of the program that had the error (<code>$0</code>), what it was trying to do (<code>\"open $commit_file\"</code>), and the error (<code>$!</code>). Develop this habit. It will save you a lot of frustration one day.</p>\n\n<p><strong>(4)</strong> Rather than copying lines into an array, concatenate them all into a single scalar. Use <code>while (&lt;$fh&gt;) { ... }</code> to see each line in <code>$_</code>, which is more idiomatic Perl and declutters your code.</p>\n\n<p><strong>(5)</strong> Skipping comment lines then becomes a simple <code>next if /^#/;</code>.</p>\n\n<p><strong>(6)</strong> Say what you mean. Rather than the mechanism (<code>$boolean</code>) name your intention. You want to know that a commit message is valid before letting it pass. A valid commit message must meet two conditions:</p>\n\n<ul>\n<li>The commit message is non-empty.</li>\n<li>The commit message does not have any line whose sole contents are <code>abort</code>.</li>\n</ul>\n\n<p>Rendered in Perl, this is</p>\n\n<pre><code>my $valid_commit_msg = $commit_msg ne \"\" &amp;&amp; $commit_msg !~ /^abort$/m;\n</code></pre>\n\n<p>A couple of notes:</p>\n\n<ul>\n<li>The <code>!~</code> operator inverts the sense of the regex match, <em>i.e.</em>, <code>$commit_msg</code> must <em>not</em> contain <code>abort</code>.</li>\n<li>The <code>/m</code> switch at the end of the pattern is for multi-line mode. It makes the <code>^</code> and <code>$</code> anchors match at the beginning and end of lines within the target rather than the leftmost and rightmost characters only.</li>\n</ul>\n\n<p><strong>(7)</strong> Use <code>$valid_commit_msg</code> as a boolean in a way that reads naturally.</p>\n\n<pre><code>if ($valid_commit_msg) { ... }\n</code></pre>\n\n<p>is preferable to <code>if ($valid_commit_msg == 0) { ... }</code> because the 0 value was the wrong one, repeating the good value is redundant, and a value hanging out at the end is easy to overlook.</p>\n"}, {"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1551113300, "creation_date": 1551113300, "answer_id": 54870985, "question_id": 54869873, "link": "https://stackoverflow.com/questions/54869873/perl-commit-msg-hook-doesnt-stop-the-commit-when-exiting-1/54870985#54870985", "title": "Perl -- commit-msg hook doesn&#39;t stop the commit when exiting 1", "body": "<p>I think the logic in your script is reversed, i.e. the word <code>abort</code> doesn't lead to exit code 1.</p>\n\n<p>I think the following should work:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse autodie;\n\nmy($commit_msg_file) = @ARGV\n    or die \"usage: $0 &lt;commit message file&gt;\\n\";\n\nopen(my $fh, '&lt;', $commit_msg_file);\nmy $do_commit;\nwhile (&lt;$fh&gt;) {\n    # skip comment or empty lines\n    next if /^#/ || /^\\s*$/;\n\n    # check for the word \"abort\" on its own line\n    last if (/^abort$/);\n\n    # at least one non-empty non-comment line detected\n    $do_commit++;\n    last;\n}\nclose($fh);\n\nif ($do_commit) {\n    print \"We should commit the modifications\\n\";\n    exit 0; # Don't prevent commit\n}\n\nprint \"We shouldn't commit the modifications\\n\";\nexit 1; # Prevent commit\n</code></pre>\n"}], "owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "accepted_answer_id": 54870960, "answer_count": 2, "score": 2, "last_activity_date": 1551113300, "creation_date": 1551109540, "last_edit_date": 1551110113, "question_id": 54869873, "link": "https://stackoverflow.com/questions/54869873/perl-commit-msg-hook-doesnt-stop-the-commit-when-exiting-1", "title": "Perl -- commit-msg hook doesn&#39;t stop the commit when exiting 1", "body": "<p><strong>Context :</strong> </p>\n\n<p>I am using some git-hooks to apply automatically some formatting options on Perl scripts. On a pre-commit hook I clean and reformat my scripts using perltidy. I want to check what the user put on the commit message and if it's empty or it's equivalent to \"abort\", we want to prevent the commit and undo the formatting modifications.</p>\n\n<p><strong>Problem :</strong></p>\n\n<p>I removed the .sample extension of the git hook and made it executable using <code>chmod u+x .git/hooks/commit-msg</code> but when my script <code>exit 1</code> the commit isn't stop like it should.</p>\n\n<blockquote>\n  <p><strong>commit-msg</strong></p>\n  \n  <p>This hook is invoked by git-commit[1] and git-merge[1], and can be bypassed with the --no-verify option. It takes a single parameter, the name of the file that holds the proposed commit log message. Exiting with a non-zero status causes the command to abort.</p>\n</blockquote>\n\n<p>source : <a href=\"https://git-scm.com/docs/githooks#_commit_msg\" rel=\"nofollow noreferrer\">https://git-scm.com/docs/githooks#_commit_msg</a></p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse warnings;\n\n# Get the path to the files in which we have the commit message\nmy $commit_file = $ARGV[0];\n\n# Read the file and extract the commit message (lines which don't start with #) \nmy @commit_msg;\nopen(my $fh, \"&lt;\", \"$commit_file\");\nwhile (my $line = &lt;$fh&gt;) {\n    if (substr($line, 0, 1) ne \"#\") {\n        push(@commit_msg, $line);\n    }\n}\n\n# Check the message isn't empty or we don't have a \"abort\" line\nmy $boolean = 0;\nforeach my $line (@commit_msg) {\n    if ($line ne \"abort\" &amp;&amp; $line ne \"\") {\n        $boolean = 1;\n    }\n}\n\nif ($boolean == 0) {\n    print \"We should commit the modifications\\n\";\n    exit 0; # Don't prevent commit\n}\nelse {\n    print \"We shouldn't commit the modifications\\n\";\n    exit 1; # Prevent commit\n}\n</code></pre>\n\n<p>The script is executable and works ! If I enter \"abort\" when I commit some stuff, it prints \"We shouldn't commit the modifications\" but commit them discarding the exit 1...</p>\n\n<p>I hope someone will be able to help ! I am new with git-hook and can't find a solution. Perhaps I miss something on Stackoverflow but I didn't find a post answering this issue.</p>\n\n<p>Best,</p>\n\n<p>Antoine</p>\n\n<p><strong>Edit :</strong>\n I don't commit using : <code>--no-verify</code></p>\n"}, {"tags": ["perl", "sed"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 2, "creation_date": 1551092368, "post_id": 54864626, "comment_id": 96499828, "body": "Why do you use Perl for the chosen approach? Wouldn&#39;t the simple shell one-liner <code>sed -i &#39;&#47;input=.*&#47;c\\input= &lt;REPLACEMENT&gt;&#39; $(input_file.txt)</code> be much simpler?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 2, "creation_date": 1551092443, "post_id": 54864626, "comment_id": 96499862, "body": "If you <i>do</i> want to use Perl, why don&#39;t you use Perl directly for updating the files?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 2, "creation_date": 1551092647, "post_id": 54864626, "comment_id": 96499990, "body": "You&#39;re trying to call sed to do an identical in-place edit of a file you&#39;re currently reading lines from, for every line you read? Um... Even after fixing the syntax errors that doesn&#39;t make any sense. Why not do it all in Perl, or just one sed invocation?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1551092898, "post_id": 54864626, "comment_id": 96500119, "body": "Anyways, <code>system()</code> is a function, not a quote-like operator. What you&#39;re passing it is not a valid perl expression; of course you&#39;re getting syntax errors."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1551093651, "post_id": 54864626, "comment_id": 96500511, "body": "If you want to use <code>perl</code> instead of <code>sed</code>, try this command: <code>perl -pse &#39;s&#47;input=.*&#47;$newinput&#47;&#39; -- -newinput=&lt;REPLACEMENT&gt; rerun.txt</code>"}, {"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 3, "creation_date": 1551105714, "post_id": 54864626, "comment_id": 96507695, "body": "This question seems to basically be &quot;I don&#39;t know perl. Teach me perl.&quot;, which is a rather broad question."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1551101360, "post_id": 54865288, "comment_id": 96504868, "body": "I have used &quot;quotes but still problem exists."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1551102121, "post_id": 54865288, "comment_id": 96505336, "body": "@Anthonyj: Then I assume there&#39;s something wrong in the way you&#39;re using the quotes. But unless you edit your question and show us what you&#39;ve done, I&#39;m unsure how I can help you :-)"}, {"owner": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1551102292, "post_id": 54865288, "comment_id": 96505452, "body": "I have edited my question ,please look once. And I tried   system as  system ( &quot;sed -i &quot;/input=.*/c\\input= $newinput&quot; $runnew &quot; ); . @Dave Cross"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1551102516, "post_id": 54865288, "comment_id": 96505591, "body": "@Anthonyj: You haven&#39;t edited your question to show us what you&#39;ve tried with quotes, have you? Please do that. Reading code in comments is hard."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1551102631, "post_id": 54865288, "comment_id": 96505661, "body": "@Anthonyj: Oh, wait. It looks like you added double quotes around the <code>sed</code> command, but didn&#39;t change the inner ones to single quotes. Perhaps compare what you have with what I actually put in my answer."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1551168147, "post_id": 54865288, "comment_id": 96530809, "body": "@Anthonyj: I&#39;m glad it&#39;s working for you. But I really recommend you look into some of the other answers which show you how to do this without using <code>sed</code>. Also - <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1551094421, "creation_date": 1551094421, "answer_id": 54865288, "question_id": 54864626, "link": "https://stackoverflow.com/questions/54864626/how-should-i-use-system-command-in-perl/54865288#54865288", "title": "how should I use system command in perl", "body": "<p><code>system()</code> takes a list of strings as its argument. You you need to put quotes around the command you pass it.</p>\n\n<pre><code>system ( \"sed -i '/input=.*/c\\input= $newinput' $runnew\" );\n</code></pre>\n\n<p>But your code still looks very strange. You're running exactly the same <code>sed</code> command for every line in the input file. Is that what you meant to do?</p>\n\n<p>It's not really clear what you're trying to do here. But I'm confident that the best approach would involve <strong>not</strong> using <code>sed</code> and using Perl to make your transformations.</p>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1551102174, "post_id": 54866230, "comment_id": 96505365, "body": "Thanks @stefan-becker its working . But is it doing only  on terminal and I should redirect to another file ? ."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 1, "creation_date": 1551103472, "post_id": 54866230, "comment_id": 96506244, "body": "I&#39;m not quite sure if I understand what you mean. You want to read all files and then dump all lines, possibly modified by the substitution, to one file? That would contradict what you wrote in your question."}, {"owner": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1551159302, "post_id": 54866230, "comment_id": 96527349, "body": "As I have specified in the question I have different lines to replace  , So Im reading each line and replacing it ."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1551160917, "post_id": 54866230, "comment_id": 96527881, "body": "I see you edited your question, but IMHO the problem description is not much clearer. Your desired output indicates that you want to insert <code>New_</code> before the last word of each line in <code>runnew</code>? Or?"}, {"owner": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1551162941, "post_id": 54866230, "comment_id": 96528561, "body": "@ Stefan Becker Or you can say that I want to replace everything after equal sign ."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1551163068, "post_id": 54866230, "comment_id": 96528607, "body": "But you are not saying what you replace it with. Therefore it is impossible to answer your question. Otherwise you would have already accepted my answer, because it replaces everything after <code>=</code>."}, {"owner": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1551164762, "post_id": 54866230, "comment_id": 96529310, "body": "Yes your answer serves the purpose."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1551164876, "post_id": 54866230, "comment_id": 96529350, "body": "Then please accept it so that your question no longer appears as unanswered. Thank you."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1551097748, "creation_date": 1551097748, "answer_id": 54866230, "question_id": 54864626, "link": "https://stackoverflow.com/questions/54864626/how-should-i-use-system-command-in-perl/54866230#54866230", "title": "how should I use system command in perl", "body": "<p>Why do you want to call <code>sed</code> at all? Your requirement can be much easier handled in Perl directly:</p>\n\n<ul>\n<li>add <code>-i.bak</code> to enable in-place replacement mode</li>\n<li>use the first command line parameter as replacement string\n\n<ul>\n<li>remove it from the <code>@ARGV</code> array so it will not be interpreted as file</li>\n</ul></li>\n<li>loop over all files on the command line\n\n<ul>\n<li>read line by line</li>\n<li>apply substitution</li>\n<li>print result</li>\n</ul></li>\n</ul>\n\n<p>Perl automatically takes care of opening the files, writing to the correct file and renaming old files to <code>.bak</code>.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl -i.bak\nuse warnings;\nuse strict;\n\nmy($replacement) = shift(@ARGV);\n\nwhile (&lt;&gt;) {\n    s/input=.*/input= $replacement/;\n    print;\n}\n\nexit 0;\n</code></pre>\n\n<p>Test run (taking an educated guess on your input data):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ cat dummy1.txt.bak \ninput= test1\ninput= test2\n$ cat dummy2.txt.bak \ninput= test3\ninput= test4\n\n$ perl dummy.pl REPLACEMENT dummy1.txt dummy2.txt\n\n$ cat dummy1.txt\ninput= REPLACEMENT\ninput= REPLACEMENT\n$ cat dummy2.txt\ninput= REPLACEMENT\ninput= REPLACEMENT\n</code></pre>\n\n<p>or to use the contents of the file \"rerun.txt\":</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl REPLACEMENT $(cat rerun.txt)\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 54865288, "answer_count": 2, "score": -2, "last_activity_date": 1551100732, "creation_date": 1551092148, "last_edit_date": 1551100732, "question_id": 54864626, "link": "https://stackoverflow.com/questions/54864626/how-should-i-use-system-command-in-perl", "title": "how should I use system command in perl", "body": "<p>I want to replace a line with the $var.\nrunnew has</p>\n\n<pre><code>input= input/old/should/change;\nreplace= input/old/replace;\nother = input/old/other;\nreplace_other= input/old/replace_other;\n</code></pre>\n\n<p>My output file should look like,</p>\n\n<pre><code> input= input/old/should/New;\nreplace= input/old/New_replace;\nother = input/old/New_other;\nreplace_other= input/old/New_replace_other;\n</code></pre>\n\n<p>I want to replace \"input =\" by  input = input/old/should/New;\n I have used like,</p>\n\n<pre><code>if ($#ARGV != 0) {\n    die \"\\n********USAGE &lt;cellname&gt; &lt;tech&gt;********\\n\"; \n}\n$newinput=$ARGV[0];\nopen(my $fh, \"$runnew\") or die \"Could not open rerun.txt: $!\";\nwhile (&lt;$fh&gt;) {\n system ( sed -i \"/input=.*/c\\input= $newinput\" $runnew );\n}\n</code></pre>\n\n<p>But there is error popping up \"Scalar found where operator expected at run.pl\" and its displaying sed line and asking \" (Missing operator before  $runnew?).\"\nWhen I used same sed on terminal its replacing the line . </p>\n\n<p>Please can anyone point out where the error is ?</p>\n\n<p>Yes Using Sed is simple but I have file with different lines and each line should be replaced . \nPlease let me knoe if you have better idea than this.\nThanks in advance.</p>\n"}, {"tags": ["perl", "sftp", "move"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 6, "creation_date": 1551090045, "post_id": 54863944, "comment_id": 96498425, "body": "Possibly a typo here: <code>$sftp=&gt;rename($old,$new);</code> shouldn&#39;t that be <code>$sftp-&gt;rename($old,$new);</code>"}, {"owner": {"reputation": 507, "user_id": 1939168, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/2e47f3a6db33bc8a8e3f28a18f12a7ef?s=128&d=identicon&r=PG", "display_name": "user1939168", "link": "https://stackoverflow.com/users/1939168/user1939168"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1551091269, "post_id": 54863944, "comment_id": 96499172, "body": "@Chris, you are right :) Thanks."}], "owner": {"reputation": 507, "user_id": 1939168, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/2e47f3a6db33bc8a8e3f28a18f12a7ef?s=128&d=identicon&r=PG", "display_name": "user1939168", "link": "https://stackoverflow.com/users/1939168/user1939168"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 275, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1551193032, "creation_date": 1551089882, "last_edit_date": 1551193032, "question_id": 54863944, "link": "https://stackoverflow.com/questions/54863944/renaming-a-remote-file-using-netsftpforeign", "title": "Renaming a remote file using Net::SFTP::Foreign", "body": "<p>I am using a below script for renaming a file on a remote host. I want to connect to a remote machine and then rename a file on the remote server.</p>\n\n<pre><code>#!/u01/app/perl-5.28/bin/perl\n\nuse strict;\nuse Net::SFTP::Foreign;\n\nmy %dirlist;\nmy $host='x.x.x.x';\nmy $sftp;\nmy $RemFile=\"/tmp/tempfile\";\nmy %args = (\n    user     =&gt; 'netcrk',\n    password =&gt; '*******',\n    #more     =&gt; '-v',\n    autodisconnect =&gt; 0\n);\n\n\n\nsub ConnToSftpHost\n{\n my $h=shift;\n print \"Connecting to host $h \\n\";\n $sftp = Net::SFTP::Foreign-&gt;new($h, %args);   # Check whether succeeded or failed!\n if ( $sftp-&gt;error ) {\n     die qq(Could not establish the SFTP connection);\n }\n $sftp-&gt;die_on_error(\"SSH connection failed\");\n}\n\nsub RenameRemFile\n{\n   my $old=shift;\n   my $new=$old.\".Finish\";\n   print \"Renaming Old File: $old \\n\";\n   $sftp=&gt;rename($old,$new);\n}\n\nConnToSftpHost($host);\nRenameRemFile($RemFile);\n$sftp-&gt;disconnect;\n\n$ ./renamesftp.pl\nConnecting to host x.x.x.x\nRenaming Old File: /tmp/tempfile\n$\n</code></pre>\n\n<p>I could see that the file is not being renamed and also no error is thrown.\nCould anybody please help me what is the issue here</p>\n"}, {"tags": ["perl", "ebay-api"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1551092032, "post_id": 54863728, "comment_id": 96499627, "body": "<a href=\"https://metacpan.org/pod/Net::eBay\" rel=\"nofollow noreferrer\">Net::Ebay</a> hasn&#39;t been updated since 2012. There are a number of outstanding <a href=\"https://rt.cpan.org/Public/Dist/Display.html?Name=Net-eBay\" rel=\"nofollow noreferrer\">problems with the code</a> (some going back thirteen years - and some mentioning problems with schema updates. All in all, I&#39;d be very wary about using this module."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1551092124, "post_id": 54863728, "comment_id": 96499686, "body": "Are you sure you should have <code>Item</code> key? Judging by the documentation (bad as it is) <code>Description</code> should be on the top-level, not inside <code>Item</code>."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1551092207, "post_id": 54863728, "comment_id": 96499741, "body": "@DaveCross thanks. Do you know of a more up to date module?"}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1551092307, "post_id": 54863728, "comment_id": 96499795, "body": "@StefanBecker I&#39;m pretty sure thats right. As you said, the documentation is pretty outdated. It seems to work otherwise (i tried it with a <b>getItem</b> request, and it grabbed it all fine)"}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 0, "creation_date": 1551092344, "post_id": 54863728, "comment_id": 96499816, "body": "Looking more at it- seems to be an issue with eBay&#39;s API themselves. A problem thats been around a while :/ <a href=\"https://ebay.to/2NpkXTe\" rel=\"nofollow noreferrer\">ebay.to/2NpkXTe</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1551092363, "post_id": 54863728, "comment_id": 96499824, "body": "@AndrewNewby: <a href=\"https://metacpan.org/pod/Marketplace::Ebay\" rel=\"nofollow noreferrer\">Marketplace::Ebay</a> looks better-maintained. I haven&#39;t used any of them though, so I can&#39;t really give recommendations."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1551092589, "post_id": 54863728, "comment_id": 96499955, "body": "@DaveCross thanks for that - will have a play and see if I can get it going :) (I have a feeling its still going to give that error message though, as it seems to be a general eBay API issue)"}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1551105871, "post_id": 54863728, "comment_id": 96507790, "body": "@DaveCross I&#39;ve just given Marketplace::Ebay a go, but it gives an error (even trying to select an item - which I could manage fine on the other module). Please see the question that I&#39;ve updated. Any ideas what it means? Gibberish to me!"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1551106675, "post_id": 54863728, "comment_id": 96508281, "body": "@AndrewNewby: Nope. Gibberish to me too. Sorry for wasting your time."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1551107010, "post_id": 54863728, "comment_id": 96508506, "body": "@DaveCross no worries. I&#39;ll keep digging with the other module. It seems to be an error with eBays API itself (lots of people complaining about it, but goes back almost a year :/)"}], "answers": [{"tags": [], "owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "is_accepted": true, "score": 0, "last_activity_date": 1551108339, "creation_date": 1551108339, "answer_id": 54869500, "question_id": 54863728, "link": "https://stackoverflow.com/questions/54863728/cant-update-description-of-listing-with-ebay-api/54869500#54869500", "title": "Can&#39;t update description of listing with eBay API", "body": "<p>Ah ha - got it! The issue seemed to be around the way the HTML was being passed along. If I put it inside a <code>CDATA</code> tag, it works fine:</p>\n\n<pre><code>my $new_desc = q|&lt;![CDATA[\nsome html etc here\n]]&gt;|;\n\nmy $result = $ebay-&gt;submitRequest( \"ReviseItem\",\n                      {\n                       DetailLevel =&gt; \"ReturnAll\",\n                       ErrorLevel =&gt; \"1\",\n                       SiteId =&gt; \"1\",\n                       Item =&gt; {\n                         Description =&gt; $new_desc,\n                         ItemID =&gt; 253430606975\n                       },\n                       ItemID =&gt; 253430606975\n                      }) || die;\n</code></pre>\n\n<p>...and updates perfectly </p>\n"}], "owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 54869500, "answer_count": 1, "score": 0, "last_activity_date": 1551108339, "creation_date": 1551089165, "last_edit_date": 1551105825, "question_id": 54863728, "link": "https://stackoverflow.com/questions/54863728/cant-update-description-of-listing-with-ebay-api", "title": "Can&#39;t update description of listing with eBay API", "body": "<p>I'm trying to write a <strong>Perl</strong> script that will update our <em>eBay listings</em> descriptions without having to keep logging in (running across multiple marketplaces if proving tricky to keep stock levels, descriptions etc updated). Here is what I have so far:</p>\n\n<pre><code> my $ebay = new Net::eBay( {\n                              SiteLevel =&gt; 'prod',\n                              DeveloperKey =&gt; 'x',\n                              ApplicationKey =&gt; 'x',\n                              CertificateKey =&gt; 'x',\n                              Token =&gt; 'x',\n                             } );\n\n  $ebay-&gt;setDefaults( { API =&gt; 2, compatibility =&gt; 900  } );\n\nmy $new_desc = q|&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n&lt;p&gt;We are proud to announce our first ever badge! With an easy-to-iron\non backing, fitting couldn't be any easier! We have designed the path to\n be a perfect addition to any piece of cosplay costume.&amp;nbsp; Please do send\nin the photos of it being used on your costumes, as we would love to\nshare.&lt;/p&gt;\n&lt;p&gt;The badge is 7 x 7 cm / 2 x 2 inches in size, and 2mm thi&lt;br&gt;&lt;/p&gt;|;\n\nmy $result = $ebay-&gt;submitRequest( \"ReviseItem\",\n                      {\n                       DetailLevel =&gt; \"ReturnAll\",\n                       ErrorLevel =&gt; \"1\",\n                       SiteId =&gt; \"1\",\n                       Item =&gt; {\n                         Description =&gt; \\$new_desc,\n                         ItemID =&gt; 253430606975\n                       },\n                       ItemID =&gt; 253430606975\n                      }) || die;\n\n print \"Result: \" . Dumper( $result ) . \"\\n\";\n</code></pre>\n\n<p>I get an error when running it though:</p>\n\n<pre><code>      'Errors' =&gt; [\n                  {\n                    'ShortMessage' =&gt; 'Return Policy Attribute Not Valid',\n                    'ErrorClassification' =&gt; 'RequestError',\n                    'ErrorCode' =&gt; '21920200',\n                    'LongMessage' =&gt; 'Return Policy Attribute returnDescription Not Valid On This Site',\n                    'SeverityCode' =&gt; 'Warning',\n                    'ErrorParameters' =&gt; {\n                                         'Value' =&gt; 'returnDescription',\n                                         'ParamID' =&gt; '0'\n                                       }\n                  },\n                  {\n                    'ShortMessage' =&gt; 'Description is missing.',\n                    'ErrorClassification' =&gt; 'RequestError',\n                    'ErrorCode' =&gt; '106',\n                    'SeverityCode' =&gt; 'Error',\n                    'LongMessage' =&gt; 'A description is required.'\n                  }\n                ],\n</code></pre>\n\n<p>Am I misunderstanding what gets passed in? from what I can understand, you just pass in the params you want to change? </p>\n\n<p>UPDATE: As suggested by Dave, I'm giving <strong>Marketplace::Ebay</strong> a go. Just testing by trying to select one of my items:</p>\n\n<pre><code> my $ebay = Marketplace::Ebay-&gt;new(\n                                  production =&gt; 1,\n                                  site_id =&gt; 3,\n                                  developer_key =&gt; 'xx',\n                                  application_key =&gt; 'xx',\n                                  certificate_key =&gt; 'xxx',\n                                  token =&gt; 'xx',\n                                  xsd_file =&gt; 'ebaySvc.xsd',\n                                 );\n\nmy $res = $ebay-&gt;api_call('GetItem', { ItemID =&gt; 253430606975 });\nprint Dumper($res);\n</code></pre>\n\n<p>But I get some weird error:</p>\n\n<blockquote>\n  <p>error: element `{urn:ebay:apis:eBLBaseComponents}GiftIcon' not\n  processed for {urn:ebay:apis:eBLBaseComponents}GetItemResponse/Item at\n  /<em>/</em>[5]/*[6] $VAR1 = undef;</p>\n</blockquote>\n\n<p>Any ideas?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 99, "user_id": 10782176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf99d5611f25e7124a2eb47c7cfd011?s=128&d=identicon&r=PG&f=1", "display_name": "Crazy coder", "link": "https://stackoverflow.com/users/10782176/crazy-coder"}, "edited": false, "score": 0, "creation_date": 1551084544, "post_id": 54862214, "comment_id": 96495433, "body": "@zdim Do you know any solution for this problem?"}, {"owner": {"reputation": 386, "user_id": 6400711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83370d2a7cf7c28e08586f262badff7b?s=128&d=identicon&r=PG&f=1", "display_name": "Phx Dev", "link": "https://stackoverflow.com/users/6400711/phx-dev"}, "edited": false, "score": 1, "creation_date": 1551085314, "post_id": 54862214, "comment_id": 96495802, "body": "Explain what do you want to do. What is @b ? Where is your file handler ?"}, {"owner": {"reputation": 99, "user_id": 10782176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf99d5611f25e7124a2eb47c7cfd011?s=128&d=identicon&r=PG&f=1", "display_name": "Crazy coder", "link": "https://stackoverflow.com/users/10782176/crazy-coder"}, "reply_to_user": {"reputation": 386, "user_id": 6400711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83370d2a7cf7c28e08586f262badff7b?s=128&d=identicon&r=PG&f=1", "display_name": "Phx Dev", "link": "https://stackoverflow.com/users/6400711/phx-dev"}, "edited": false, "score": 0, "creation_date": 1551085452, "post_id": 54862214, "comment_id": 96495888, "body": "Assume &lt;IN&gt; is a file handler"}, {"owner": {"reputation": 99, "user_id": 10782176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf99d5611f25e7124a2eb47c7cfd011?s=128&d=identicon&r=PG&f=1", "display_name": "Crazy coder", "link": "https://stackoverflow.com/users/10782176/crazy-coder"}, "reply_to_user": {"reputation": 386, "user_id": 6400711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83370d2a7cf7c28e08586f262badff7b?s=128&d=identicon&r=PG&f=1", "display_name": "Phx Dev", "link": "https://stackoverflow.com/users/6400711/phx-dev"}, "edited": false, "score": 0, "creation_date": 1551085744, "post_id": 54862214, "comment_id": 96496034, "body": "@Phx Dev  @b is array which has many values.&lt;IN&gt; is a file handler reading information from some other file.If the reading line matches with any elements from the array,it has to display that line from the file."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1551085744, "post_id": 54862214, "comment_id": 96496036, "body": "<code>&lt; &gt;</code> is a readline operation. <code>IN</code> is a file <i>handle</i>, not a handler. (Also, don&#39;t use bareword filehandles.)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1551085816, "post_id": 54862214, "comment_id": 96496078, "body": "Why don&#39;t you simply swap the two loops? Do <code>while (&lt;IN&gt;)</code> on the outside, then you don&#39;t have to worry about reading files again."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1551116572, "post_id": 54862214, "comment_id": 96513980, "body": "@cherry (Didn&#39;t see this until now -- and you&#39;ve got a really nice answer :)"}, {"owner": {"reputation": 99, "user_id": 10782176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf99d5611f25e7124a2eb47c7cfd011?s=128&d=identicon&r=PG&f=1", "display_name": "Crazy coder", "link": "https://stackoverflow.com/users/10782176/crazy-coder"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1552226296, "post_id": 54862214, "comment_id": 96921648, "body": "@zdim Yes,I got a good answers from these contributors."}], "answers": [{"tags": [], "owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "is_accepted": false, "score": 2, "last_activity_date": 1551085926, "creation_date": 1551085926, "answer_id": 54862768, "question_id": 54862214, "link": "https://stackoverflow.com/questions/54862214/file-handle-failed-to-read-second-time/54862768#54862768", "title": "File handle failed to read second time", "body": "<p>You read within a <code>while</code> loop until the filehandle is exhausted (reached <code>EOF</code> end of file).\nIf you don't close and reopen your filehandle you won't read anymore from it in the second iteration of the outer loop.</p>\n\n<p>If the amount of data you read from the filehandle is no so large you could read the file into an array variable and iterate over the content of the array variable.</p>\n\n<p>For example:</p>\n\n<pre><code>my @filecontent = &lt;IN&gt;;\nforeach $item_of_b (@b){\n    foreach my $line_of_file (@filecontent){\n        if($line_of_file =~ /$item_of_b/){\n            print $line_of_file;\n        }\n    }\n}\n</code></pre>\n\n<p>And <code>$a</code> and <code>$b</code> should not be used as variable names, they are special due to sorting.</p>\n"}, {"comments": [{"owner": {"reputation": 99, "user_id": 10782176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf99d5611f25e7124a2eb47c7cfd011?s=128&d=identicon&r=PG&f=1", "display_name": "Crazy coder", "link": "https://stackoverflow.com/users/10782176/crazy-coder"}, "edited": false, "score": 0, "creation_date": 1552226214, "post_id": 54862866, "comment_id": 96921624, "body": "@melponmene Thanks for your detailed explanation.I understand about this concept well."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 5, "last_activity_date": 1559357610, "last_edit_date": 1559357610, "creation_date": 1551086237, "answer_id": 54862866, "question_id": 54862214, "link": "https://stackoverflow.com/questions/54862214/file-handle-failed-to-read-second-time/54862866#54862866", "title": "File handle failed to read second time", "body": "<p>Your inner loop, <code>while(my $line = &lt;IN&gt;)</code>, extracts lines from the <code>IN</code> handle until it reaches the end of the file.</p>\n\n<p>When your outer loop, <code>foreach $a (@b)</code>, tries to read from <code>IN</code> again, it's still at end-of-file. The first iteration of the <code>foreach</code> loop consumes all lines from the file, leaving nothing for the other iterations.</p>\n\n<p>There are several possible ways to fix this:</p>\n\n<ul>\n<li><p><a href=\"https://perldoc.pl/functions/seek\" rel=\"nofollow noreferrer\">Seek</a> back to the beginning of <code>IN</code> before you attempt to read from it again:</p>\n\n<pre><code>foreach $a (@b){\n    seek IN, 0, 0\n        or die \"Cannot seek(): $!\";\n    while (my $line = &lt;IN&gt;) {\n        ...\n    }\n}\n</code></pre>\n\n<p>However, this only works for real files, not pipes or sockets or terminals.</p></li>\n<li><p>Read the whole file into memory up front, then iterate over a normal array:</p>\n\n<pre><code>my @lines = &lt;IN&gt;;\nforeach $a (@b){\n    foreach my $line (@lines) {\n        ...\n    }\n}\n</code></pre>\n\n<p>However, if the file is big, this will use a lot of memory.</p></li>\n<li><p>Switch the order of the two loops:</p>\n\n<pre><code>while (my $line = &lt;IN&gt;) {\n    foreach $a (@b) {\n        ...\n    }\n}\n</code></pre>\n\n<p>This is my favorite. Now you only need to read from the file once. <code>@b</code> is already in memory, so you can iterate over it as many times as you want.</p></li>\n</ul>\n\n<hr>\n\n<p>Side notes:</p>\n\n<ul>\n<li>Don't use bareword filehandles like <code>IN</code>. Normal variables (such as <code>$IN</code>) are pretty much superior in every way.</li>\n<li>Don't use variables called <code>$a</code> or <code>$b</code>. They're a bit special because Perl uses them in <a href=\"https://perldoc.pl/perlfunc#sort-SUBNAME-LIST\" rel=\"nofollow noreferrer\"><code>sort</code></a>.</li>\n<li>My personal preference is to never use <code>&lt; &gt;</code>. It's weirdly overloaded (it can mean either <a href=\"https://perldoc.pl/functions/readline\" rel=\"nofollow noreferrer\"><code>readline</code></a> or <a href=\"https://perldoc.pl/functions/glob\" rel=\"nofollow noreferrer\"><code>glob</code></a>, depending on the exact syntax you use) and it isn't terribly intuitive. Using <code>readline</code> means there's never any syntactic ambiguity and even programmers with no Perl experience can figure out what it does.</li>\n</ul>\n\n<p>With those changes:</p>\n\n<pre><code>while (my $line = readline $IN) {\n    foreach my $re (@regexes) {\n        if ($line =~ /$re/) {\n            print $line;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 10782176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf99d5611f25e7124a2eb47c7cfd011?s=128&d=identicon&r=PG&f=1", "display_name": "Crazy coder", "link": "https://stackoverflow.com/users/10782176/crazy-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 2, "accepted_answer_id": 54862866, "answer_count": 2, "score": 0, "last_activity_date": 1559357610, "creation_date": 1551083538, "last_edit_date": 1551086945, "question_id": 54862214, "link": "https://stackoverflow.com/questions/54862214/file-handle-failed-to-read-second-time", "title": "File handle failed to read second time", "body": "<p>How can I read from a file handle for the second time inside <code>foreach</code> loop in Perl?</p>\n\n<pre><code>foreach $a (@b){\n    while(my $line = &lt;IN&gt;){\n        if($line = /$a/){\n            print $line;\n        }\n    }\n}\n</code></pre>\n\n<p>The above code is not processing the second element from the list <code>@b</code>. How to make it possible?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 4315985, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6288c8da5c21978f523f9329b38bb253?s=128&d=identicon&r=PG&f=1", "display_name": "Rajendra Urs", "link": "https://stackoverflow.com/users/4315985/rajendra-urs"}, "edited": false, "score": 0, "creation_date": 1551084154, "post_id": 54862127, "comment_id": 96495244, "body": "Thanks Tim ,.. Also i have tried below and it is working as expected if (length($name)==10 &amp;&amp; grep {/^[7-9]/} $name"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 39, "user_id": 4315985, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6288c8da5c21978f523f9329b38bb253?s=128&d=identicon&r=PG&f=1", "display_name": "Rajendra Urs", "link": "https://stackoverflow.com/users/4315985/rajendra-urs"}, "edited": false, "score": 0, "creation_date": 1551086596, "post_id": 54862127, "comment_id": 96496504, "body": "@RajendraUrs: The <code>grep</code> is just adding unnecessary complications. Once you&#39;ve fixed the regex (which you have done) you can just use <code>$name =~ &#47;^[7-9]&#47;</code>."}], "tags": [], "owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "is_accepted": true, "score": 1, "last_activity_date": 1551083698, "last_edit_date": 1551083698, "creation_date": 1551083153, "answer_id": 54862127, "question_id": 54862088, "link": "https://stackoverflow.com/questions/54862088/validating-phone-number-using-perl/54862127#54862127", "title": "Validating phone number using perl", "body": "<p>I would just use a single regex here:</p>\n\n<pre><code>^[789][0-9]{9}$\n</code></pre>\n\n<p>This avoids having to spread your validation logic across a few places.</p>\n\n<pre><code>if ($name =~ m{/^[789][0-9]{9}$/}){\n    print \"$name is valid \\n\";\n}\nelse {\n    print \"$name is not valid \\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 1, "creation_date": 1551086794, "post_id": 54862930, "comment_id": 96496625, "body": "Hi Dave, I&#39;m glad that our paths Crossed +1."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1551086518, "creation_date": 1551086518, "answer_id": 54862930, "question_id": 54862088, "link": "https://stackoverflow.com/questions/54862088/validating-phone-number-using-perl/54862930#54862930", "title": "Validating phone number using perl", "body": "<p>It might be worth explaining what was wrong with your original version. You have two checks. The first one (<code>length($name)==10</code>) is fine. The problems are with the second one.</p>\n\n<blockquote>\n<pre><code>$name==~  m{/[^7-9]/}\n</code></pre>\n</blockquote>\n\n<p>There are three problems here. Firstly, you're using the wrong operator. You know you need to bind your variable (<code>$name</code>) to your match operator, but the binding operator is <code>=~</code> not <code>==~</code>. But, unfortunately, your operator isn't wrong enough to throw a syntax error. Perl will interpret it as a numeric comparison (<code>==</code>) followed by a bitwise negation (<code>~</code>). That's certainly not what you want!</p>\n\n<p>Your second problem is with the match operator. It looks like you know that the match operator is <code>m/.../</code> and that you also know you can choose an alternative delimiter for the match operator - you've picked <code>m{...}</code>. But you shouldn't nest those delimiters. When you use <code>m{/.../}</code> you're are looking for two literal characters <code>/</code> in your string.</p>\n\n<p>Finally, there's a problem with your actual regex. You want the string to start with 7, 8 or 9. Putting those digits in a character class (<code>[7-9]</code>) is a good idea. But you shouldn't also place the start of string anchor (<code>^</code>) inside the character class. At the start of a character class, <code>^</code> has a different meaning - it means \"not one of the characters listed here\". So your character class ends up meaning the exact opposite of what you wanted it to mean.</p>\n\n<p>Your match expression should have looked like this:</p>\n\n<pre><code>$name =~ m{^[7-9]}\n</code></pre>\n\n<p>Making your complete code:</p>\n\n<pre><code>print \"Enter phone number: \\n\";\n$name = &lt;&gt;;\nchomp $name;\n\nif (length($name) == 10 and $name =~  m{^[7-9]}) {\n  print \"$name is valid \\n\";\n}\nelse {\n  print \"$name is not valid \\n\";\n}\n</code></pre>\n\n<p>(I did a little tidying - adding some whitespace around operators and switching <code>&amp;&amp;</code> for <code>and</code> as is has lower precedence. You might also consider revising your variable name. <code>$name</code> is not a great name for a variable that contains a phone number!)</p>\n"}], "owner": {"reputation": 39, "user_id": 4315985, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6288c8da5c21978f523f9329b38bb253?s=128&d=identicon&r=PG&f=1", "display_name": "Rajendra Urs", "link": "https://stackoverflow.com/users/4315985/rajendra-urs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 54862127, "answer_count": 2, "score": 1, "last_activity_date": 1551086518, "creation_date": 1551083017, "last_edit_date": 1551083155, "question_id": 54862088, "link": "https://stackoverflow.com/questions/54862088/validating-phone-number-using-perl", "title": "Validating phone number using perl", "body": "<p>I want to validate phone number with following conditions:</p>\n\n<ol>\n<li>length should be 10 digits</li>\n<li>should start with 7 or 8 or 9 </li>\n</ol>\n\n<p>If it does not meet these requirements, we should fail the number.</p>\n\n<p>I have tried the following:</p>\n\n<pre><code>print \"Enter phone number: \\n\";\n$name=&lt;&gt;;\nchomp $name;\n\nif (length($name)==10 &amp;&amp; $name==~  m{/[^7-9]/}){\n  print \"$name is valid \\n\";\n}\nelse {\n  print \"$name is not valid \\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "hash"], "answers": [{"comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1551078632, "post_id": 54860863, "comment_id": 96492782, "body": "Updated my answer with a solution that processes the tables and generates the output table while they are read. I.e. it uses less memory than the initial approach."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 2, "last_activity_date": 1551078458, "last_edit_date": 1551078458, "creation_date": 1551077365, "answer_id": 54860863, "question_id": 54860223, "link": "https://stackoverflow.com/questions/54860223/is-it-possible-using-two-keys-and-values-to-merge-multi-files/54860863#54860863", "title": "is it possible using two keys and values to merge multi files?", "body": "<p>You are on the right path with a hash, you just have to calculate the key from the columns for each table. Di-section of the solution:</p>\n\n<ul>\n<li>read each row from the 3 TSV files using <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a>\n\n<ul>\n<li>for each row call the table-specific code ref</li>\n<li>extract the 2 columns that are needed for the key and concatenate them to the key string <code>$key</code></li>\n<li>for the first table: save key in the array <code>@order</code>, i.e. it defines the order of the output table</li>\n<li>in the hash <code>%table</code> under key <code>$key</code>: push the columns that go from this table to the final table onto an array ref</li>\n</ul></li>\n<li>loop over <code>@order</code>\n\n<ul>\n<li>fetch the array ref under <code>$key</code> from hash <code>%table</code></li>\n<li>dump row as TSV using <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a> to <code>STDOUT</code></li>\n</ul></li>\n</ul>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse autodie;\n\nuse Text::CSV;\n\nmy $csv = Text::CSV-&gt;new({\n    binary   =&gt; 1,\n    eol      =&gt; \"\\n\",\n    sep_char =&gt; \"\\t\",\n}) or die \"CSV creation\\n\";\n\nsub read_file($$) {\n    my($file, $code) = @_;\n    open(my $fh, '&lt;', $file);\n    while (my $row = $csv-&gt;getline( $fh )) {\n        $code-&gt;($row);\n    }\n    $csv-&gt;eof or $csv-&gt;error_diag();\n    close($fh);\n}\n\n# Output table + row order\nmy %table;\nmy @order;\n\n# Table 1\nread_file($ARGV[0], sub {\n    my($row) = @_;\n\n    #print \"ROW 1 @{ $row }\\n\";\n    my($col1, $col2) = @{ $row }[1,2];\n\n    # column_1, column_2 define key\n    my $key = \"${col1}${col2}\";\n    #print \"KEY 1 ${key}\\n\";\n\n    # table 1 defines order\n    push(@order, $key);\n    # ID, column_1, column_2, column_3 from table 1\n    $table{$key} = $row;\n});\n\n# Table 2\nread_file($ARGV[1], sub {\n    my($row) = @_;\n\n    #print \"ROW 2 @{ $row }\\n\";\n    my($col4, $col5, $col6) = @{ $row };\n\n    # column_4, column_5 define key\n    my $key = \"${col4}${col5}\";\n    #print \"KEY 2 ${key}\\n\";\n\n    # column_6 from table 2\n    push(@{ $table{$key} }, $col6);\n});\n\n# Table 3\nread_file($ARGV[2], sub {\n    my($row) = @_;\n\n    #print \"ROW 3 @{ $row }\\n\";\n    my($col7, $col8, $col9, $col10) = @{ $row };\n\n    # column_7, column_10 define key\n    my $key = \"${col7}${col10}\";\n    #print \"KEY 3 ${key}\\n\";\n\n    # column_7, column_8 from table 2\n    push(@{ $table{$key} }, $col7, $col8);\n});\n\nforeach my $key (@order) {\n    $csv-&gt;print(\\*STDOUT, $table{$key});\n}\n\nexit 0;\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl dummy1.txt dummy2.txt dummy3.txt \nA       100     100001  X       X       100     120000\nB       100     99999   Y       Y       100     66666\nC       100     88888   Z       Z       100     77777\nD       99      100001  Y       Y       99      100000\nE       99      88888   Z       Z       99      44444\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 9426481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d9e5d67bf0ef6f703fffa820ba1a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Victor.H", "link": "https://stackoverflow.com/users/9426481/victor-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 2, "accepted_answer_id": 54860863, "answer_count": 1, "score": 2, "last_activity_date": 1551078458, "creation_date": 1551073858, "last_edit_date": 1551076035, "question_id": 54860223, "link": "https://stackoverflow.com/questions/54860223/is-it-possible-using-two-keys-and-values-to-merge-multi-files", "title": "is it possible using two keys and values to merge multi files?", "body": "<p>I try to merge 3 files<br>\nFile 1:  4 columns tab-delimited file  </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ID   Column_1    Column_2     Column_3    \n A     100       100001         X   \n B     100        99999         Y     \n C     100        88888         Z    \n D      99       100001         Y   \n E      99        88888         Z       \n</code></pre>\n\n<p>File 2:  3  columns tab-delimited file     </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>  Column_4    Column_5     Column_6    \n  100       100001         X   \n  100        99999         Y     \n  100        88888         Z    \n   99       100001         Y   \n   99        88888         Z \n</code></pre>\n\n<p>File 3:  4  columns tab-delimited file   </p>\n\n<pre class=\"lang-none prettyprint-override\"><code> Column_7    Column_8     Column_9   Column_10   \n    100       120000        100       100001\n    100        66666        100        99999\n    100        77777        100        88888\n     99        100000        99       100001\n     99        44444         99        88888  \n</code></pre>\n\n<p>I want to make a merge file   </p>\n\n<pre class=\"lang-none prettyprint-override\"><code> ID  Column_1   Column_2   Column_3  Column_6  Column_7  Column_8  \n A     100       100001         X       X       100       120000 \n B     100        99999         Y       Y       100        66666\n C     100        88888         Z       Z       100        77777\n D      99       100001         Y       Y        99       100000   \n E      99        88888         Z       Z        99        44444  \n</code></pre>\n\n<p>I try to use hash approach depending on column 1 and 2. But I just found out that I have two keys and many values. How can I use hash to parse these files?</p>\n"}, {"tags": ["regex", "perl", "regex-recursion"], "comments": [{"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1551073156, "post_id": 54860028, "comment_id": 96490923, "body": "So your regex works properly and you just need to access the groups?"}, {"owner": {"reputation": 3218, "user_id": 3440266, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9d37ddb4e007bfd22023d6d5b95f0a45?s=128&d=identicon&r=PG&f=1", "display_name": "macabeus", "link": "https://stackoverflow.com/users/3440266/macabeus"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1551074313, "post_id": 54860028, "comment_id": 96491264, "body": "@revo Yeah. As far I tested, my regex works, but I don&#39;t know how to access the groups"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1551075181, "post_id": 54860028, "comment_id": 96491526, "body": "See this <a href=\"https://stackoverflow.com/questions/37369803/how-can-i-access-the-value-in-a-named-capture-group-in-a-regex-in-perl\" title=\"how can i access the value in a named capture group in a regex in perl\">stackoverflow.com/questions/37369803/&hellip;</a>"}, {"owner": {"reputation": 3218, "user_id": 3440266, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9d37ddb4e007bfd22023d6d5b95f0a45?s=128&d=identicon&r=PG&f=1", "display_name": "macabeus", "link": "https://stackoverflow.com/users/3440266/macabeus"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1551075950, "post_id": 54860028, "comment_id": 96491752, "body": "@revo I tried using it, but I can&#39;t. <code>%+</code> returns nothing."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1551076020, "post_id": 54860028, "comment_id": 96491777, "body": "Please show your attempt in your question."}, {"owner": {"reputation": 3218, "user_id": 3440266, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9d37ddb4e007bfd22023d6d5b95f0a45?s=128&d=identicon&r=PG&f=1", "display_name": "macabeus", "link": "https://stackoverflow.com/users/3440266/macabeus"}, "reply_to_user": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1551076321, "post_id": 54860028, "comment_id": 96491887, "body": "@Jan Sorry. I updated the code renaming the second <code>map</code> for <code>mapname</code>. But I still have the same problem"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1551079134, "post_id": 54860028, "comment_id": 96492979, "body": "See also <a href=\"https://metacpan.org/pod/Regexp::Grammars\" rel=\"nofollow noreferrer\">Regexp::Grammars</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1551083699, "post_id": 54860028, "comment_id": 96495031, "body": "<a href=\"https://metacpan.org/pod/Marpa::R2\" rel=\"nofollow noreferrer\">Marpa::R2</a> might be worth considering"}], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1551082646, "creation_date": 1551082646, "answer_id": 54862018, "question_id": 54860028, "link": "https://stackoverflow.com/questions/54860028/how-to-get-a-group-matched-in-a-recursive-regular-expression/54862018#54862018", "title": "How to get a group matched in a recursive regular expression?", "body": "<p>Maybe it is better to divide and conquer than to force feed everything into one regex?</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse Data::Dumper;\n\nwhile (&lt;DATA&gt;) {\n    my @row;\n    chomp;\n    if (/^move/) {\n        while (/(?:(\\d+)\\s+(\\d+))?(?:\\s+([[:alpha:]]+))?/g) {\n            my @match;\n            push(@match, +$1, +$2) if $1 &amp;&amp; $2;\n            push(@match, $3)       if $3;\n            push(@row, \\@match) if @match;\n        }\n    }\n\n    print \"$_: \", Dumper(\\@row);\n}\n\nexit 0;\n\n__DATA__\nmove 10 15\nmove 10 15 map\nmove map\nmove 10 15 mapA mapB\nmove 10 15 mapA mapB 33 44\nmove 10 15 mapA 33 44 mapB\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nmove 10 15: $VAR1 = [\n          [\n            '10',\n            '15'\n          ]\n        ];\nmove 10 15 map: $VAR1 = [\n          [\n            '10',\n            '15',\n            'map'\n          ]\n        ];\nmove map: $VAR1 = [\n          [\n            'map'\n          ]\n        ];\nmove 10 15 mapA mapB: $VAR1 = [\n          [\n            '10',\n            '15',\n            'mapA'\n          ],\n          [\n            'mapB'\n          ]\n        ];\nmove 10 15 mapA mapB 33 44: $VAR1 = [\n          [\n            '10',\n            '15',\n            'mapA'\n          ],\n          [\n            'mapB'\n          ],\n          [\n            '33',\n            '44'\n          ]\n        ];\nmove 10 15 mapA 33 44 mapB: $VAR1 = [\n          [\n            '10',\n            '15',\n            'mapA'\n          ],\n          [\n            '33',\n            '44',\n            'mapB'\n          ]\n        ];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3218, "user_id": 3440266, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9d37ddb4e007bfd22023d6d5b95f0a45?s=128&d=identicon&r=PG&f=1", "display_name": "macabeus", "link": "https://stackoverflow.com/users/3440266/macabeus"}, "edited": false, "score": 0, "creation_date": 1551083910, "post_id": 54862158, "comment_id": 96495126, "body": "Very thank you for the good answer! I&#39;m doing it just for study purpose (and &quot;insistence&quot;), to compare the limits between regex and a simple parser. In my real project, I&#39;m using parser combinator to do it."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 6, "last_activity_date": 1563776787, "last_edit_date": 1563776787, "creation_date": 1551083274, "answer_id": 54862158, "question_id": 54860028, "link": "https://stackoverflow.com/questions/54860028/how-to-get-a-group-matched-in-a-recursive-regular-expression/54862158#54862158", "title": "How to get a group matched in a recursive regular expression?", "body": "<p>As the question stands, you can't have that.  The <a href=\"https://perldoc.perl.org/perlre.html#Extended-Patterns\" rel=\"nofollow noreferrer\">perlre</a> says about this</p>\n\n<blockquote>\n  <p>Note that capture groups matched inside of recursion are not accessible after the recursion returns, so the extra layer of capturing groups is necessary. </p>\n</blockquote>\n\n<p>but the pattern <code>&lt;x&gt;</code> can't be had with \"an extra layer\" of capturing afterwards since it's used only inside the grammar.  You can only have the whole thing</p>\n\n<pre><code>if ($command =~ /\n        move\\s+ (?&lt;match&gt;(?&amp;commands))\n        (?(DEFINE)\n            (?&lt;coord&gt;    (?&lt;x&gt;\\d+)\\s+(?&lt;y&gt;\\d+) )\n            (?&lt;map&gt;      (?&lt;mapname&gt;[a-zA-Z]+) )\n            (?&lt;commands&gt; \\s* (?: (?&amp;coord) | (?&amp;map) ) \\s* (?&amp;commands)? )\n        )\n    /six)\n{\n    say \"got: $+{match}\";\n}\n</code></pre>\n\n<p>where I've moved the <code>?(DEFINED)</code> block at the end of the pattern, as recommended.</p>\n\n<p>Note that it wouldn't make sense either: in a recursive match, <em>which</em> of multiple <code>&lt;x&gt;</code> should one get? So you'd need to restructure the approach so to be able to re-capture the match you want; but I don't see how to do this if you want a subpattern buried so deeply.</p>\n\n<p>For the problem as presented I'd go with writing a simple parser, never mind a catch-all regex. Or, in your approach re-process the match for its parts, hopefully much easier once you have it.</p>\n\n<p>And then there are powerful tools, like <a href=\"https://metacpan.org/pod/Marpa::R2\" rel=\"nofollow noreferrer\">Marpa::R2</a>, <a href=\"https://metacpan.org/pod/Parse::RecDescent\" rel=\"nofollow noreferrer\">Parse::RecDescent</a>, <a href=\"https://metacpan.org/pod/Regexp::Grammars\" rel=\"nofollow noreferrer\">Regexp::Grammars</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "is_accepted": false, "score": 2, "last_activity_date": 1551191265, "creation_date": 1551191265, "answer_id": 54887753, "question_id": 54860028, "link": "https://stackoverflow.com/questions/54860028/how-to-get-a-group-matched-in-a-recursive-regular-expression/54887753#54887753", "title": "How to get a group matched in a recursive regular expression?", "body": "<p>Since I cannot yet comment, Stefan Becker's solution has a flaw.</p>\n\n<p>It will fail if a coordinate is 0.</p>\n\n<p>Here's the fix:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse Data::Dumper;\n\nwhile (&lt;DATA&gt;) {\n    my @row;\n    chomp;\n    if (/^move/) {\n        while (/(?:(\\d+)\\s+(\\d+))?(?:\\s+([[:alpha:]]+))?/g) {\n            my @match;\n            push(@match, +$1, +$2) if defined $1 &amp;&amp; defined $2;\n            push(@match, $3)       if $3;\n            push(@row, \\@match) if @match;\n        }\n    }\n\n    print \"$_: \", Dumper(\\@row);\n}\n\nexit 0;\n\n__DATA__\nmove 10 15\nmove 10 15 map\nmove map\nmove 10 15 mapA mapB\nmove 10 15 mapA mapB 33 44\nmove 10 15 mapA 33 44 mapB\nmove 0 15 mapA 33 44 mapB\n</code></pre>\n"}], "owner": {"reputation": 3218, "user_id": 3440266, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9d37ddb4e007bfd22023d6d5b95f0a45?s=128&d=identicon&r=PG&f=1", "display_name": "macabeus", "link": "https://stackoverflow.com/users/3440266/macabeus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 54862158, "answer_count": 3, "score": 3, "last_activity_date": 1563776787, "creation_date": 1551072722, "last_edit_date": 1563776544, "question_id": 54860028, "link": "https://stackoverflow.com/questions/54860028/how-to-get-a-group-matched-in-a-recursive-regular-expression", "title": "How to get a group matched in a recursive regular expression?", "body": "<p>I'm writing a simple regular expression that needs receive a pair of coordinates and/or a map name.</p>\n\n<p>For example:</p>\n\n<pre><code>move 10 15 # should returns [[10, 15]]\nmove 10 15 map # should returns [[10, 15, 'map']]\nmove map # should returns [['map']]\nmove 10 15 mapA mapB # should returns [[10, 15, 'mapA'], ['mapB']] \nmove 10 15 mapA mapB 33 44 # should returns [[10, 15, 'mapA'], ['mapB'], [33, 44]]\nmove 10 15 mapA 33 44 mapB # should returns [[10, 15, 'mapA'], [33, 44, 'mapB']]\n</code></pre>\n\n<p>Then, I wrote this regular expression:</p>\n\n<pre><code>/\n  (?(DEFINE)\n     (?&lt;coord&gt;    (?&lt;x&gt;\\d+)\\s+(?&lt;y&gt;\\d+) )\n     (?&lt;map&gt;      (?&lt;mapname&gt;[a-zA-Z]+) )\n     (?&lt;commands&gt; \\s* (?: (?&amp;coord) | (?&amp;map) ) \\s* (?&amp;commands)? )\n  )\n  move\\s+(?&amp;commands)\n/six\n</code></pre>\n\n<p>But how I can get the value for groups <code>x</code>, <code>y</code> and <code>map</code> using Perl?</p>\n\n<p>I tried with some ways:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $command = 'move 10 15';\n\n$command =~ /\n  (?(DEFINE)\n     (?&lt;coord&gt;    (?&lt;x&gt;\\d+)\\s+(?&lt;y&gt;\\d+) )\n     (?&lt;map&gt;      (?&lt;mapname&gt;[a-zA-Z]+) )\n     (?&lt;commands&gt; \\s* (?: (?&amp;coord) | (?&amp;map) ) \\s* (?&amp;commands)? )\n  )\n  move\\s+(?&amp;commands)\n/six;\n\nwhile (my ($k,$v) = each %+) { print \"$k $v\\n\" }\nprint \"$+{x}\";\n</code></pre>\n"}, {"tags": ["ajax", "perl", "request", "xmlhttprequest", "mojolicious"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1551064391, "post_id": 54858692, "comment_id": 96489119, "body": "That means the value is false."}], "answers": [{"tags": [], "owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "is_accepted": true, "score": 4, "last_activity_date": 1551114297, "last_edit_date": 1551114297, "creation_date": 1551075100, "answer_id": 54860409, "question_id": 54858692, "link": "https://stackoverflow.com/questions/54858692/how-to-check-is-ajax-in-mojolicious-perl/54860409#54860409", "title": "How to check is Ajax in Mojolicious Perl?", "body": "<p>The returned value is a boolean, look at the example code snippet below:</p>\n\n<pre><code>post '/ajax' =&gt; sub {\n    my $c = shift;\n\n    my $is_xhr = $c-&gt;req-&gt;is_xhr;\n\n    $c-&gt;render( text =&gt; sprintf('Is XHR: %s',($is_xhr)?'true':'false'));\n};\n</code></pre>\n\n<p>I have a created a demo at <a href=\"https://limitless-eyrie-46853.herokuapp.com/ajax\" rel=\"nofollow noreferrer\">https://limitless-eyrie-46853.herokuapp.com/ajax</a></p>\n"}], "owner": {"reputation": 358, "user_id": 6772972, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/606279049553570/picture?type=large", "display_name": "tranthaihoang", "link": "https://stackoverflow.com/users/6772972/tranthaihoang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 1, "accepted_answer_id": 54860409, "answer_count": 1, "score": 3, "last_activity_date": 1551114297, "creation_date": 1551061640, "question_id": 54858692, "link": "https://stackoverflow.com/questions/54858692/how-to-check-is-ajax-in-mojolicious-perl", "title": "How to check is Ajax in Mojolicious Perl?", "body": "<p>how to check if the request is from Ajax Mojolicious?</p>\n\n<p>I tried to use <code>Mojo::Message::Request</code></p>\n\n<pre><code>use Mojo::Message::Request;\nmy $req = Mojo::Message::Request-&gt;new;\nmy $bool = $req-&gt;is_xhr;\n</code></pre>\n\n<p>$req->is_xhr it is explained \"Check X-Requested-With header for XMLHttpRequest value.\"</p>\n\n<p>But I don't see any value returned.\nThanks in advance!</p>\n"}, {"tags": ["arrays", "string", "perl", "search", "hashtable"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1551059231, "post_id": 54857919, "comment_id": 96488178, "body": "Can you show some data, and point out what parts you need from that?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1551059745, "post_id": 54857919, "comment_id": 96488276, "body": "So, for {A,R}, you want -2?"}, {"owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1551059806, "post_id": 54857919, "comment_id": 96488293, "body": "That is correct @ikegami"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1551059864, "post_id": 54857919, "comment_id": 96488299, "body": "A HoH would make far more sense than an AoA, then. In fact, I&#39;d use a simple hash keyed by a 2-letter string."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1551059901, "post_id": 54857919, "comment_id": 96488304, "body": "<code>==</code> is for comparing numbers. You want <code>eq</code> to compare strings. <code>use warnings;</code> would have told you that."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1551059944, "post_id": 54857919, "comment_id": 96488316, "body": "You are using <code>$_</code> as a element index, but you never assign anything to <code>$_</code>. <code>use warnings;</code> would have told you that."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1551059989, "post_id": 54857919, "comment_id": 96488325, "body": "You assign something to <code>@rep</code>, then immediately assign something else. That makes no sense."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 0, "last_activity_date": 1551061093, "last_edit_date": 1551061093, "creation_date": 1551060286, "answer_id": 54858547, "question_id": 54857919, "link": "https://stackoverflow.com/questions/54857919/how-to-search-a-perl-array-for-a-string-that-changes-each-iteration/54858547#54858547", "title": "How to search a Perl array for a string that changes each iteration", "body": "<pre><code>my %score_lookup;\n{\n   my $found_header = 0;\n   my @col_ids;\n   while (&lt;&gt;) {\n      next if /^#/;\n\n      if ($found_header) {\n         my ($row_id, @fields) = split;\n         for my $i (0..$#fields) {\n            my $col_id = $col_ids[$i];\n            my $score = $fields[$i];\n            $score_lookup{ $row_id . $col_id } = $score;\n         }\n      } else {\n         $found_header = 1;\n         @col_ids = split;\n      }\n   }\n}\n\nmy $score = $score_lookup{ \"A\" . \"R\" };   # -2\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 54858547, "answer_count": 1, "score": 1, "last_activity_date": 1551064789, "creation_date": 1551053869, "last_edit_date": 1551064789, "question_id": 54857919, "link": "https://stackoverflow.com/questions/54857919/how-to-search-a-perl-array-for-a-string-that-changes-each-iteration", "title": "How to search a Perl array for a string that changes each iteration", "body": "<p>I have looked at documentation, and I know how to search an array for a string, print the string's location, etc. But my issue is that my string changes for each iteration. My goal is to search the first row of an array for a string, save its location, then search the first column of the array for a different string, and save that location (giving me a row, column location in the array). Here is the code of an \"idea\" I want to execute:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $subseq1 = 'MNIDDKL';\nmy $subseq2 = 'GLFLKCGGIDEMQSS';\nmy $line;\nmy @array;\nmy @arr;\nwhile($line = &lt;MATFILE&gt;) #Load the array\n{\n    $line =~ /^$/ and die \"Blank line detected at $.\\n\";\n    $line =~ /^#/ and next;\n    push @array, $line; #adds each line to the array\n};\nclose MATFILE;\n\n#Join then split\nmy $joined = join('', @array);\nmy @rep = $joined =~/./g;\n@rep = split(' ', $joined);\n\n#Need to split into row, column format:\nwhile (@rep)\n{\n    push (@arr, [splice(@rep, 0, 24)]);\n}\nmy ($len1, $len2) = map length, $subseq1, $subseq2;\nmy @subseq1 = $subseq1 =~ /./g;\nmy @subseq2 = $subseq2 =~ /./g;\nfor my $x (0..$len2) #Number of rows\n{\n    for my $y (0..$len1) #Number of columns\n    {\n        if ($subseq1[$y] == $arr[0][$_]) #Does not work \n        {\n        my $subcol = $_; #column from the sub matrix\n        }\n\n    if ($subseq2[$x] == $arr[$_][0]) #Does not work\n        {\n        my $subrow = $_; #row from pam matrix\n        }\n    }\n}\n</code></pre>\n\n<p>I know that I can use List::MoreUtils 'first_index' to find the first location of my string, but I am unsure how to do this as my string changes.</p>\n\n<p>Overall, I am looking to find the character in each string ('A' and 'R' for example), find one in the first row of the array, find the other in the first column of the array, and associate a location for it. Any and all help is appreciated!</p>\n\n<p>Here is the matrix I want to access:</p>\n\n<pre><code>#\n# PAM 250 substitution matrix, scale = ln(2)/3 = 0.231049\n#\n# Expected score = -0.844, Entropy = 0.354 bits\n#\n# Lowest score = -8, Highest score = 17\n#\n   A  R  N  D  C  Q  E  G  H  I  L  K  M  F  P  S  T  W  Y  V  B  Z  X  *\nA  2 -2  0  0 -2  0  0  1 -1 -1 -2 -1 -1 -3  1  1  1 -6 -3  0  0  0  0 -8\nR -2  6  0 -1 -4  1 -1 -3  2 -2 -3  3  0 -4  0  0 -1  2 -4 -2 -1  0 -1 -8\nN  0  0  2  2 -4  1  1  0  2 -2 -3  1 -2 -3  0  1  0 -4 -2 -2  2  1  0 -8\nD  0 -1  2  4 -5  2  3  1  1 -2 -4  0 -3 -6 -1  0  0 -7 -4 -2  3  3 -1 -8\nC -2 -4 -4 -5 12 -5 -5 -3 -3 -2 -6 -5 -5 -4 -3  0 -2 -8  0 -2 -4 -5 -3 -8\nQ  0  1  1  2 -5  4  2 -1  3 -2 -2  1 -1 -5  0 -1 -1 -5 -4 -2  1  3 -1 -8\nE  0 -1  1  3 -5  2  4  0  1 -2 -3  0 -2 -5 -1  0  0 -7 -4 -2  3  3 -1 -8\nG  1 -3  0  1 -3 -1  0  5 -2 -3 -4 -2 -3 -5  0  1  0 -7 -5 -1  0  0 -1 -8\nH -1  2  2  1 -3  3  1 -2  6 -2 -2  0 -2 -2  0 -1 -1 -3  0 -2  1  2 -1 -8\nI -1 -2 -2 -2 -2 -2 -2 -3 -2  5  2 -2  2  1 -2 -1  0 -5 -1  4 -2 -2 -1 -8\nL -2 -3 -3 -4 -6 -2 -3 -4 -2  2  6 -3  4  2 -3 -3 -2 -2 -1  2 -3 -3 -1 -8\nK -1  3  1  0 -5  1  0 -2  0 -2 -3  5  0 -5 -1  0  0 -3 -4 -2  1  0 -1 -8\nM -1  0 -2 -3 -5 -1 -2 -3 -2  2  4  0  6  0 -2 -2 -1 -4 -2  2 -2 -2 -1 -8\nF -3 -4 -3 -6 -4 -5 -5 -5 -2  1  2 -5  0  9 -5 -3 -3  0  7 -1 -4 -5 -2 -8\nP  1  0  0 -1 -3  0 -1  0  0 -2 -3 -1 -2 -5  6  1  0 -6 -5 -1 -1  0 -1 -8\nS  1  0  1  0  0 -1  0  1 -1 -1 -3  0 -2 -3  1  2  1 -2 -3 -1  0  0  0 -8\nT  1 -1  0  0 -2 -1  0  0 -1  0 -2  0 -1 -3  0  1  3 -5 -3  0  0 -1  0 -8\nW -6  2 -4 -7 -8 -5 -7 -7 -3 -5 -2 -3 -4  0 -6 -2 -5 17  0 -6 -5 -6 -4 -8\nY -3 -4 -2 -4  0 -4 -4 -5  0 -1 -1 -4 -2  7 -5 -3 -3  0 10 -2 -3 -4 -2 -8\nV  0 -2 -2 -2 -2 -2 -2 -1 -2  4  2 -2  2 -1 -1 -1  0 -6 -2  4 -2 -2 -1 -8\nB  0 -1  2  3 -4  1  3  0  1 -2 -3  1 -2 -4 -1  0  0 -5 -3 -2  3  2 -1 -8\nZ  0  0  1  3 -5  3  3  0  2 -2 -3  0 -2 -5  0  0 -1 -6 -4 -2  2  3 -1 -8\nX  0 -1  0 -1 -3 -1 -1 -1 -1 -1 -1 -1 -1 -2 -1  0  0 -4 -2 -1 -1 -1 -1 -8\n* -8 -8 -8 -8 -8 -8 -8 -8 -8 -8 -8 -8 -8 -8 -8 -8 -8 -8 -8 -8 -8 -8 -8  1\n</code></pre>\n\n<p>I will be accessing these values and using them to compute a score for sequence similarity.</p>\n"}, {"tags": ["regex", "perl", "awk", "sed", "ubuntu-16.04"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1551025706, "post_id": 54853893, "comment_id": 96479474, "body": "You have a typo in your replacement text <code>disbale</code> instead of <code>disable</code>."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 3, "creation_date": 1551025744, "post_id": 54853893, "comment_id": 96479480, "body": "Change <code>[^\\^]+</code> to <code>.*?</code> and add <code>sg</code> flags after the second <code>|</code>. And replace <code>\\1</code> with <code>$1</code>."}], "answers": [{"comments": [{"owner": {"reputation": 372, "user_id": 2795866, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6410ec8f4df96fb0a9569bc125879358?s=128&d=identicon&r=PG&f=1", "display_name": "Naive", "link": "https://stackoverflow.com/users/2795866/naive"}, "edited": false, "score": 0, "creation_date": 1551028897, "post_id": 54853999, "comment_id": 96480457, "body": "Hi Anubhava, Sorry I had forgotten to mention that disable can be at any position inside the flower bracket."}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 2, "last_activity_date": 1551029705, "last_edit_date": 1551029705, "creation_date": 1551025693, "answer_id": 54853999, "question_id": 54853893, "link": "https://stackoverflow.com/questions/54853893/perl-sed-command-to-replace-same-pattern-multiple-times/54853999#54853999", "title": "Perl/Sed command to replace same pattern multiple times", "body": "<p>You may use this <code>perl</code> command:</p>\n\n<pre><code>perl -0777 -pe 's/(?m)^service chargen\\s*\\{[^}]*disable\\s*=\\s*\\Kyes/no/g' file\n</code></pre>\n\n<p></p>\n\n<pre><code># description: An xinetd internal service which generate characters.  The\n# xinetd internal service which continuously generates characters until the\n# connection is dropped.  The characters look something like this:\n# !\"#$%&amp;'()*+,-./0123456789:;&lt;=&gt;?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefg\n# This is the tcp version.\nservice chargen\n{\n        disable         = no\n        type            = INTERNAL\n        id              = chargen-stream\n        socket_type     = stream\n        protocol        = tcp\n        user            = root\n        wait            = no\n}\n\n# This is the udp version.\nservice chargen\n{\n        disable         = no\n        type            = INTERNAL\n        id              = chargen-dgram\n        socket_type     = dgram\n        protocol        = udp\n        user            = root\n        wait            = yes\n}\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/JVCD7o/2\" rel=\"nofollow noreferrer\">RegEx Demo</a></p>\n\n<p><code>\\K</code> resets the starting point of the reported match. Any previously consumed characters are no longer included in the final match</p>\n"}, {"comments": [{"owner": {"reputation": 372, "user_id": 2795866, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6410ec8f4df96fb0a9569bc125879358?s=128&d=identicon&r=PG&f=1", "display_name": "Naive", "link": "https://stackoverflow.com/users/2795866/naive"}, "edited": false, "score": 1, "creation_date": 1551026228, "post_id": 54854000, "comment_id": 96479633, "body": "Hi James, I want to match <code>service chrgen</code> too. anyway, thanks for the answer."}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "reply_to_user": {"reputation": 372, "user_id": 2795866, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6410ec8f4df96fb0a9569bc125879358?s=128&d=identicon&r=PG&f=1", "display_name": "Naive", "link": "https://stackoverflow.com/users/2795866/naive"}, "edited": false, "score": 0, "creation_date": 1551029914, "post_id": 54854000, "comment_id": 96480759, "body": "Updated with the <code>service chrgen{...}</code>."}], "tags": [], "owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "is_accepted": false, "score": 1, "last_activity_date": 1551029876, "last_edit_date": 1551029876, "creation_date": 1551025699, "answer_id": 54854000, "question_id": 54853893, "link": "https://stackoverflow.com/questions/54853893/perl-sed-command-to-replace-same-pattern-multiple-times/54854000#54854000", "title": "Perl/Sed command to replace same pattern multiple times", "body": "<p>Awk ok?:</p>\n\n<pre><code>$ awk '/service chargen/,/}/{if(/disable/)sub(/yes/,\"no\")}1' file\n...\n        disable         = no\n...\n        disable         = no\n...\n</code></pre>\n\n<p>Explained:</p>\n\n<pre><code>$ awk '                          # well, awk\n/service chargen/,/}/ {          # between service chargen {...}\n    if(/disable/)                # if disable found\n        sub(/yes/,\"no\")          # replace yes with no\n}1' file                         # output\n</code></pre>\n\n<p>Feel free to tune the regex (<code>/disable/</code>) to your liking (for example <code>/^ *disable *=/</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 372, "user_id": 2795866, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6410ec8f4df96fb0a9569bc125879358?s=128&d=identicon&r=PG&f=1", "display_name": "Naive", "link": "https://stackoverflow.com/users/2795866/naive"}, "edited": false, "score": 1, "creation_date": 1551027821, "post_id": 54854079, "comment_id": 96480122, "body": "As currently written, the Perl solution only works if the <code>disable</code> line is the first in the <code>service chargen</code> description.  It could be modified to handle <code>disable</code> lines as other than the first; there&#39;s no modification needed to the <code>sed</code> script for that. It may not be a problem worth worrying about."}, {"owner": {"reputation": 372, "user_id": 2795866, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6410ec8f4df96fb0a9569bc125879358?s=128&d=identicon&r=PG&f=1", "display_name": "Naive", "link": "https://stackoverflow.com/users/2795866/naive"}, "edited": false, "score": 0, "creation_date": 1551028356, "post_id": 54854079, "comment_id": 96480298, "body": "Yes, disable can be at any position inside the flower bracket. thanks for highlighting it."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 1, "creation_date": 1551030451, "post_id": 54854079, "comment_id": 96480931, "body": "<code>sed -E &#39;&#47;^service chargen&#47;,&#47;^}&#47;s&#47;(disable *= *)yes&#47;\\1no&#47;&#39;</code> might be a bit shorter."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 3, "last_activity_date": 1551026282, "creation_date": 1551026282, "answer_id": 54854079, "question_id": 54853893, "link": "https://stackoverflow.com/questions/54853893/perl-sed-command-to-replace-same-pattern-multiple-times/54854079#54854079", "title": "Perl/Sed command to replace same pattern multiple times", "body": "<p>Using <code>sed</code>, you can use:</p>\n\n<pre><code>sed -e '/^service chargen/,/^}/ { /disable *= yes/ s/yes/no/; }'\n</code></pre>\n\n<p>The first part searches for ranges of lines from one starting <code>service chargen</code> to the first line afterwards that starts with <code>}</code>; within that range, it looks for lines containing <code>disable = yes</code> with arbitrary numbers of spaces between <code>disable</code> and the <code>= yes</code>, and changes the <code>yes</code> to <code>no</code>.  If necessary, you can make the regexes fussier (no trailing white space; don't edit <code>service chargen2018</code> blocks, demand the <code>}</code> have no trailing blanks, etc.) but it probably isn't necessary.</p>\n\n<p>You can often do in-place editing, but beware of differences between systems in the semantics of how you do that.  (BSD and macOS require <code>-i ''</code>; GNU only requires <code>-i</code>; both accept <code>-i.bak</code> and it means the same in both \u2014 but you have a backup file to cleanup.)</p>\n"}], "owner": {"reputation": 372, "user_id": 2795866, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6410ec8f4df96fb0a9569bc125879358?s=128&d=identicon&r=PG&f=1", "display_name": "Naive", "link": "https://stackoverflow.com/users/2795866/naive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 1, "accepted_answer_id": 54854079, "answer_count": 3, "score": 3, "last_activity_date": 1551107328, "creation_date": 1551025045, "last_edit_date": 1551107328, "question_id": 54853893, "link": "https://stackoverflow.com/questions/54853893/perl-sed-command-to-replace-same-pattern-multiple-times", "title": "Perl/Sed command to replace same pattern multiple times", "body": "<p>I need to set <code>disable=no</code> in <code>/etc/xinetd.d/chargen</code> using commands like perl or sed.</p>\n\n<p><code>/etc/xinetd.d/chargen</code> content is:</p>\n\n<pre><code># description: An xinetd internal service which generate characters.  The\n# xinetd internal service which continuously generates characters until the\n# connection is dropped.  The characters look something like this:\n# !\"#$%&amp;'()*+,-./0123456789:;&lt;=&gt;?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefg\n# This is the tcp version. \nservice chargen\n{\n        disable         = yes\n        type            = INTERNAL\n        id              = chargen-stream\n        socket_type     = stream\n        protocol        = tcp\n        user            = root\n        wait            = no \n}\n\n# This is the udp version. \nservice chargen\n{\n        disable         = yes\n        type            = INTERNAL\n        id              = chargen-dgram\n        socket_type     = dgram\n        protocol        = udp\n        user            = root\n        wait            = yes \n}\n</code></pre>\n\n<p>I have used perl command <pre>\n<code>perl -0777 -pe 's|(service chargen[^\\^]+)disable\\s+=\\syes|\\1disable=no|' /etc/xinetd.d/chargen</code> </pre>\nbut it is replacing at only one place.</p>\n\n<pre><code># description: An xinetd internal service which generate characters.  The\n# xinetd internal service which continuously generates characters until the\n# connection is dropped.  The characters look something like this:\n# !\"#$%&amp;'()*+,-./0123456789:;&lt;=&gt;?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefg\n# This is the tcp version.\nservice chargen\n{\n        disable         = yes\n        type            = INTERNAL\n        id              = chargen-stream\n        socket_type     = stream\n        protocol        = tcp\n        user            = root\n        wait            = no\n}\n\n# This is the udp version.\nservice chargen\n{\n        disable=no\n        type            = INTERNAL\n        id              = chargen-dgram\n        socket_type     = dgram\n        protocol        = udp\n        user            = root\n        wait            = yes\n}\n</code></pre>\n\n<p>what is the proper command to make it work in both places? </p>\n\n<p><strong>NOTE</strong>: I could have replaced <code>disable         = yes</code> with <code>disable         = no</code> without matching <code>service chargen</code> but I need to use same sed/perl command to replace in <code>/etc/xinetd.conf</code> which will have other services too. </p>\n\n<p><strong>UPDATE</strong> As Jonathan highlighted in his comment, disable can be at any position inside the flower bracket.</p>\n"}, {"tags": ["apache", "perl", "centos7", "web-hosting"], "comments": [{"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 2, "creation_date": 1551353403, "post_id": 54853679, "comment_id": 96614049, "body": "It looks like <code>&#47;home&#47;[user]</code> and <code>&#47;home&#47;[domain]</code> are two different paths in your setup and only the former is published in the parts you have provided. If your problem would have to do with CGI, you would either get some 500 error code or plain text served or such. I guess you really simply don&#39;t serve <code>&#47;home&#47;[domain]&#47;public_html</code> for some reason."}, {"owner": {"reputation": 3662, "user_id": 1281901, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d3785ec1489202606b4526c29a4e148b?s=128&d=identicon&r=PG", "display_name": "bendataclear", "link": "https://stackoverflow.com/users/1281901/bendataclear"}, "reply_to_user": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1551361972, "post_id": 54853679, "comment_id": 96619037, "body": "@ThorstenSch&#246;ning Sorry I made an error when replacing values, the only paths under <code>&#47;home</code> are the users name (<code>[user]</code>), I have updated the question."}, {"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 1, "creation_date": 1551376064, "post_id": 54853679, "comment_id": 96627291, "body": "What I said regarding CGI still applies in my opinion. Add some simply text file, image or whatever in <code>[...]&#47;public_html</code> and in <code>[...]&#47;public_html&#47;stats</code> and see if you still get the 404 by requesting both. Use individual names. Additionally tell us if some part of your path is a symlink, which you don&#39;t seem to allow by purpose.  Not sure if <code>SymLinksIfOwnerMatch</code> overrides <code>-FollowSymLinks</code>, don&#39;t think so."}, {"owner": {"reputation": 3662, "user_id": 1281901, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d3785ec1489202606b4526c29a4e148b?s=128&d=identicon&r=PG", "display_name": "bendataclear", "link": "https://stackoverflow.com/users/1281901/bendataclear"}, "reply_to_user": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1551698692, "post_id": 54853679, "comment_id": 96722361, "body": "@ThorstenSch&#246;ning I added some test files to the folder and discovered they wouldn&#39;t serve either, checking the logs it turned out there was an unrelated error in the .htaccess file."}], "answers": [{"comments": [{"owner": {"reputation": 3662, "user_id": 1281901, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d3785ec1489202606b4526c29a4e148b?s=128&d=identicon&r=PG", "display_name": "bendataclear", "link": "https://stackoverflow.com/users/1281901/bendataclear"}, "edited": false, "score": 0, "creation_date": 1551942943, "post_id": 55034662, "comment_id": 96827314, "body": "Can you elaborate?"}], "tags": [], "owner": {"reputation": 243, "user_id": 7077781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6565050815624b48cc91e53061ae49e7?s=128&d=identicon&r=PG&f=1", "display_name": "Yaakov5777", "link": "https://stackoverflow.com/users/7077781/yaakov5777"}, "is_accepted": false, "score": 0, "last_activity_date": 1551921916, "creation_date": 1551921916, "answer_id": 55034662, "question_id": 54853679, "link": "https://stackoverflow.com/questions/54853679/using-awstats-for-multiple-vhosts-404-on-perl-file/55034662#55034662", "title": "Using AWStats for multiple VHosts - 404 on perl file", "body": "<p>Just don't use perl at all, you can get ALL of the exact same functionality with Node.js with absolutely NO setbacks at all.</p>\n\n<p>You're welcome.</p>\n"}], "owner": {"reputation": 3662, "user_id": 1281901, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d3785ec1489202606b4526c29a4e148b?s=128&d=identicon&r=PG", "display_name": "bendataclear", "link": "https://stackoverflow.com/users/1281901/bendataclear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1551921916, "creation_date": 1551023730, "last_edit_date": 1551361910, "question_id": 54853679, "link": "https://stackoverflow.com/questions/54853679/using-awstats-for-multiple-vhosts-404-on-perl-file", "title": "Using AWStats for multiple VHosts - 404 on perl file", "body": "<p>I have a server setup using Centos 7 and the Centos Web Panel, I am using this to host several different domains.</p>\n\n<p>I want to enable AWStats for the domains, I have managed to install AWStats, I've added <code>awstats.[domain].conf</code> files for all the domains and I've setup cron jobs to  process the logs.</p>\n\n<p>I am now trying to allow each domain to see only their own data, I tried to add the awstats.pl file to their html folder:</p>\n\n\n\n<pre><code>/home/[user]/public_html/stats/awstats.pl\n</code></pre>\n\n<p>But calling this via <code>http://[domain]/stats/awstats.pl</code> gives me a 404 error.</p>\n\n<p>I've also tried the following locations, all of which give the same 404 error:</p>\n\n\n\n<pre><code>/home/[user]/public_html/cgi-bin/awstats.pl\n/home/[user]/public_html/stats/cgi-bin/awstats.pl\n/home/[user]/public_html/awstats.pl\n</code></pre>\n\n<p>an example of one of my vhosts files is below:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;VirtualHost [localserverip]:80&gt;\n    ServerName [domain]\n    ServerAlias www.[domain]\n    ServerAdmin webmaster@[domain]\n    DocumentRoot /home/[user]/public_html\n    UseCanonicalName Off\n    ScriptAlias /cgi-bin/ /home/[user]/public_html/cgi-bin/\n\n    CustomLog /usr/local/apache/domlogs/[domain].bytes bytes\n    CustomLog /usr/local/apache/domlogs/[domain].log combined\n    ErrorLog /usr/local/apache/domlogs/[domain].error.log\n\n    # Custom settings are loaded below this line (if any exist)\n    # IncludeOptional \"/usr/local/apache/conf/userdata/[user]/[domain]/*.conf\"\n\n    &lt;IfModule mod_setenvif.c&gt;\n        SetEnvIf X-Forwarded-Proto \"^https$\" HTTPS=on\n    &lt;/IfModule&gt;\n\n    &lt;IfModule mod_userdir.c&gt;\n        UserDir disabled\n        UserDir enabled [user]\n    &lt;/IfModule&gt;\n\n    &lt;IfModule mod_suexec.c&gt;\n        SuexecUserGroup [user] [user]\n    &lt;/IfModule&gt;\n\n    &lt;IfModule mod_suphp.c&gt;\n        suPHP_UserGroup [user] [user]\n        suPHP_ConfigPath /home/[user]\n    &lt;/IfModule&gt;\n\n    &lt;IfModule mod_ruid2.c&gt;\n        RMode config\n        RUidGid [user] [user]\n    &lt;/IfModule&gt;\n\n    &lt;IfModule itk.c&gt;\n        AssignUserID [user] [user]\n    &lt;/IfModule&gt;\n\n    &lt;Directory \"/home/[user]/public_html\"&gt;\n        Options -Indexes -FollowSymLinks\n        AllowOverride All Options=ExecCGI,Includes,IncludesNOEXEC,Indexes,MultiViews,SymLinksIfOwnerMatch\n    &lt;/Directory&gt;\n\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>I'm sure there's a misconfiguration with the cgi-bin somewhere but I'm not really familiar with how this works, can anyone see why I can't load the awstats file?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1550994404, "post_id": 54849222, "comment_id": 96471841, "body": "Didn&#39;t OP ask for <code>(\\S+)</code> i.e. capture of the desired match?"}], "tags": [], "owner": {"reputation": 8926, "user_id": 5331061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g1Sv2.jpg?s=128&g=1", "display_name": "Gurmanjot Singh", "link": "https://stackoverflow.com/users/5331061/gurmanjot-singh"}, "is_accepted": false, "score": 2, "last_activity_date": 1550988112, "creation_date": 1550988112, "answer_id": 54849222, "question_id": 54849193, "link": "https://stackoverflow.com/questions/54849193/regular-expression-to-find-a-string-immediately-preceding-a-date/54849222#54849222", "title": "Regular expression to find a string immediately preceding a date", "body": "<p>Try this regex:</p>\n\n<pre><code>\\S+(?=\\s+\\d{4}(?:-\\d{2}){2})\n</code></pre>\n\n<p><strong><a href=\"https://regex101.com/r/2SNDYF/1\" rel=\"nofollow noreferrer\">Click for Demo</a></strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n<li><code>\\S+</code> - matches 1+ occurrences of any character that is not a white-space</li>\n<li><code>(?=\\s+\\d{4}(?:-\\d{2}){2})</code> - positive lookahead to make sure that the current match is followed by 1+ occurrences of a whitespace followed by the date of the format <code>XXXX-XX-XX</code> where <code>X</code> is a digit.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1550992238, "creation_date": 1550992238, "answer_id": 54849601, "question_id": 54849193, "link": "https://stackoverflow.com/questions/54849193/regular-expression-to-find-a-string-immediately-preceding-a-date/54849601#54849601", "title": "Regular expression to find a string immediately preceding a date", "body": "<pre><code>my ($string) = $text =~ /\\s(\\S+)\\s+20[0-9]{2}-[0-9]{2}-[0-9]{2}\\s/;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my ($string) = $text =~ /\\s(\\S+)\\s+20\\d{2}-\\d{2}-\\d{2}\\s/a;      # 5.14+\n</code></pre>\n\n<p>Notes:</p>\n\n<p>The leading <code>\\s</code> is optional. It serves as an optimization.</p>\n\n<p>The trailing <code>\\s</code> is optional. It serves as to make sure sequences like <code>2000-00-0001</code> aren't considered dates. However, it will a string ending with a date from matching.</p>\n"}, {"tags": [], "owner": {"reputation": 70, "user_id": 8801973, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EnsTy.jpg?s=128&g=1", "display_name": "Joseph", "link": "https://stackoverflow.com/users/8801973/joseph"}, "is_accepted": false, "score": 0, "last_activity_date": 1550996038, "creation_date": 1550996038, "answer_id": 54850005, "question_id": 54849193, "link": "https://stackoverflow.com/questions/54849193/regular-expression-to-find-a-string-immediately-preceding-a-date/54850005#54850005", "title": "Regular expression to find a string immediately preceding a date", "body": "<p>You could find the string via the end of the sentence.</p>\n\n<p>XXXX....XXXXXXX GOT222 2017-11-10 THU 14:00:05</p>\n\n<p>Find</p>\n\n<pre><code>(\\w+)\\s[\\w-]+\\s\\w+\\s[\\w:]+$\n</code></pre>\n\n<p>Replace</p>\n\n<pre><code>$1\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 8504812, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KUfNaDY3P-A/AAAAAAAAAAI/AAAAAAAADCc/fkOLWVwabG8/photo.jpg?sz=128", "display_name": "Krishna Menon", "link": "https://stackoverflow.com/users/8504812/krishna-menon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1550996038, "creation_date": 1550987891, "question_id": 54849193, "link": "https://stackoverflow.com/questions/54849193/regular-expression-to-find-a-string-immediately-preceding-a-date", "title": "Regular expression to find a string immediately preceding a date", "body": "<p>I am not very familiar with a regular expression. Can you help me with a regular expression to select the string that immediately precedes the date in the below text? Here the result should output :</p>\n\n<p><em>GOT222</em></p>\n\n<p>Below is the text:</p>\n\n<p><em>[2017-11-10 14:00:05] USER=XXX , COMM=RTRV-RET-INF:::::USER_INFO=\"XXX\"; , OWNER=XXX , IP=99.99.999.999\n   GOT222 2017-11-10 THU 14:00:05</em></p>\n"}, {"tags": ["perl", "argv"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1550975452, "post_id": 54846243, "comment_id": 96468806, "body": "Use Getopt::Long!!!"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 1210923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86c45f9aded33fda66bf19355bbccf81?s=128&d=identicon&r=PG", "display_name": "user1210923", "link": "https://stackoverflow.com/users/1210923/user1210923"}, "edited": false, "score": 0, "creation_date": 1550971233, "post_id": 54846256, "comment_id": 96468187, "body": "I&#39;d quite forgotten I could do that. Perfect thanks."}, {"owner": {"reputation": 53, "user_id": 1210923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86c45f9aded33fda66bf19355bbccf81?s=128&d=identicon&r=PG", "display_name": "user1210923", "link": "https://stackoverflow.com/users/1210923/user1210923"}, "edited": false, "score": 0, "creation_date": 1550971351, "post_id": 54846256, "comment_id": 96468202, "body": "It&#39;s a web application and the program is kind of recursive it calls itself and other programs that call it in turn. I should have used an external scratchpad - but it was built many years ago when things were simpler - and it&#39;s grown"}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 5, "last_activity_date": 1550956388, "creation_date": 1550956388, "answer_id": 54846256, "question_id": 54846243, "link": "https://stackoverflow.com/questions/54846243/use-of-perl-argv/54846256#54846256", "title": "use of perl @ARGV", "body": "<blockquote>\n  <p>In a perl application I'm passing variables around with @ARGV.</p>\n</blockquote>\n\n<p>This is a poor design and should be avoided. If you need to pass values around, use function arguments, or at least your own global variable. Don't (ab)use a special variable for this.</p>\n\n<blockquote>\n  <p>Now it's got more complicated so I need to \"empty\" @ARGV before adding to it.</p>\n</blockquote>\n\n<p>If you want to make an array empty, assign an empty list to it:</p>\n\n<pre><code>@ARGV = ();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 1210923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86c45f9aded33fda66bf19355bbccf81?s=128&d=identicon&r=PG", "display_name": "user1210923", "link": "https://stackoverflow.com/users/1210923/user1210923"}, "edited": false, "score": 1, "creation_date": 1550971449, "post_id": 54846332, "comment_id": 96468216, "body": "The help is greatly appreciated. The criticism less so. Whatever is available can be used however you want.  You think it a terrible idea. I think it&#39;s a great idea. Doesn&#39;t hurt anybody"}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "reply_to_user": {"reputation": 53, "user_id": 1210923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86c45f9aded33fda66bf19355bbccf81?s=128&d=identicon&r=PG", "display_name": "user1210923", "link": "https://stackoverflow.com/users/1210923/user1210923"}, "edited": false, "score": 2, "creation_date": 1551001157, "post_id": 54846332, "comment_id": 96473297, "body": "@user1210923 - You say it &quot;doesn&#39;t hurt anybody&quot;, but the very existence of this question shows that it <i>did</i> hurt somebody: You. By making a poor design decision, you inadvertently made it harder for yourself to modify the program when it became more complex in the future, and possibly also harder for yourself (or anyone else who may one day work with the code) to understand what it&#39;s doing. Your design isn&#39;t being criticized because it violates some holy dogma, it&#39;s being criticized because it makes it harder to maintain and extend your program."}, {"owner": {"reputation": 53, "user_id": 1210923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86c45f9aded33fda66bf19355bbccf81?s=128&d=identicon&r=PG", "display_name": "user1210923", "link": "https://stackoverflow.com/users/1210923/user1210923"}, "edited": false, "score": 1, "creation_date": 1551015823, "post_id": 54846332, "comment_id": 96476738, "body": "Ha ha ha! The problem I had, if you recall, was not due to the use I make of @ARGV but that I had forgotten how to remove the values of an array. Using that system variable makes life very simple and it&#39;s easy to follow - considering iterative calls are rarely easy to follow. Your value judgement that this is a poor design decision is unwelcome and not  especially interesting.  As I said I&#39;m always grateful for advice on a particular problem. Anything else please keep to yourself. Although you claim not to be invoking dogma it really does come across that way."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 53, "user_id": 1210923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86c45f9aded33fda66bf19355bbccf81?s=128&d=identicon&r=PG", "display_name": "user1210923", "link": "https://stackoverflow.com/users/1210923/user1210923"}, "edited": false, "score": 0, "creation_date": 1551019868, "post_id": 54846332, "comment_id": 96477836, "body": "@user1210923: Well, we haven&#39;t seen enough of your code to see exactly how you&#39;re using <code>@ARGV</code>. But I bet that if we did, we could show you a much better way to achieve what you&#39;re trying to do without abusing Perl&#39;s built-in variables."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 53, "user_id": 1210923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86c45f9aded33fda66bf19355bbccf81?s=128&d=identicon&r=PG", "display_name": "user1210923", "link": "https://stackoverflow.com/users/1210923/user1210923"}, "edited": false, "score": 0, "creation_date": 1551022782, "post_id": 54846332, "comment_id": 96478608, "body": "@user1210923: <i>Anything else please keep to yourself.</i> I&#39;m afraid it doesn&#39;t work like that. The price of asking the experts on this site for advice is that they will sometimes give you more advice than you think you want - but it will always be advice that they think you need :-)"}, {"owner": {"reputation": 53, "user_id": 1210923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86c45f9aded33fda66bf19355bbccf81?s=128&d=identicon&r=PG", "display_name": "user1210923", "link": "https://stackoverflow.com/users/1210923/user1210923"}, "edited": false, "score": 1, "creation_date": 1551033198, "post_id": 54846332, "comment_id": 96481790, "body": "You&#39;d lose your bet Dave.  Had there been another way apart from an external scratchpad which would use real i/o I would have found it. I don&#39;t believe built-in variables can be abused. What a ridiculous concept. I happily accept it was thought I needed that advice bur it was really not relevant and stank of a holier-than-thou attitude. I&#39;ve been involved in IT for nearly 50 years and have coded far more languages than I care to remember and on far more architectures too. OK so as an OAP I get a bit forgetful and that was my problem. Abusing variables? How quaint"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 53, "user_id": 1210923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86c45f9aded33fda66bf19355bbccf81?s=128&d=identicon&r=PG", "display_name": "user1210923", "link": "https://stackoverflow.com/users/1210923/user1210923"}, "edited": false, "score": 1, "creation_date": 1551036990, "post_id": 54846332, "comment_id": 96482967, "body": "@user1210923: There&#39;s absolutely no point in continuing this conversation unless you&#39;re prepared to share more of your code so that we can see just why re-using <code>@ARGV</code> is such a good idea."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1550956953, "creation_date": 1550956953, "answer_id": 54846332, "question_id": 54846243, "link": "https://stackoverflow.com/questions/54846243/use-of-perl-argv/54846332#54846332", "title": "use of perl @ARGV", "body": "<p>Did you read <a href=\"https://perldoc.perl.org/functions/pop.html\" rel=\"nofollow noreferrer\">the documentation for <code>pop()</code></a>? It says:</p>\n\n<blockquote>\n  <p>Pops and returns the last value of the array, shortening the array by one element.</p>\n</blockquote>\n\n<p>So I'm not clear why you think it would empty the array. Perl has a great set of documentation, but it's useless if you don't read it :-)</p>\n\n<p>You can clear an array by assigning an empty list to it, like this:</p>\n\n<pre><code>@ARGV = ();\n</code></pre>\n\n<p>But I have to say that using <code>@ARGV</code> for this sounds like a terrible idea. <code>@ARGV</code> has a defined purpose - it contains the command-line arguments that are passed to your program. There's really no need to use it for anything else. If you want your own array, then just create a new array.</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 1210923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86c45f9aded33fda66bf19355bbccf81?s=128&d=identicon&r=PG", "display_name": "user1210923", "link": "https://stackoverflow.com/users/1210923/user1210923"}, "edited": false, "score": 1, "creation_date": 1550971494, "post_id": 54846699, "comment_id": 96468226, "body": "As I said earlier I forget a lot as I don&#39;t code as often any more. Thanks for pointing out the weakness using foreach. I have no reason to spend hundreds of hours re-working an architecture because someone things using a handy shortcut is a bad idea. i think it&#39;s a great idea. the only other solution would be a scratchpad and that would add i/o Why are you all so negative. Perl is not a sacred object - it&#39;s just a tool"}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 3, "creation_date": 1550976056, "post_id": 54846699, "comment_id": 96468898, "body": "The answers are for everyone who reads this in future, not just the person who asked the question."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 2, "creation_date": 1550995278, "post_id": 54846699, "comment_id": 96472022, "body": "This has nothing to do with Perl - I would give the same answer for a misuse of features in <i>any</i> SW development environment. &quot;I do/use X, because I can/it works for me&quot; is bad SW development practice and your question exemplifies what problems it can cause."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 5, "last_activity_date": 1550959979, "last_edit_date": 1550959979, "creation_date": 1550959537, "answer_id": 54846699, "question_id": 54846243, "link": "https://stackoverflow.com/questions/54846243/use-of-perl-argv/54846699#54846699", "title": "use of perl @ARGV", "body": "<p>Your mistake: you are using <code>foreach</code> (extracting list elements) and modifying (<code>pop</code>) the <strong>same array</strong>! To quote <a href=\"https://perldoc.perl.org/perlsyn.html#Foreach-Loops\" rel=\"noreferrer\">perlsyn</a>:</p>\n\n<blockquote>\n  <p>If any part of LIST is an array, <code>foreach</code> will get very confused if you add or remove elements within the loop body, for example with <code>splice</code>. <strong>So don't do that.</strong> </p>\n</blockquote>\n\n<p>The following illustrates what is happening in your code:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nprint \"ARGV BEFORE: \", scalar(@ARGV), \"\\n\";\n\nmy $count = 0;\nforeach my $loop (@ARGV) {\n    ++$count;\n    print \"ARGV beginning loop ${count} for ${loop}: \", scalar(@ARGV), \"\\n\";\n    pop @ARGV;\n    print \"ARGV end loop ${count} for ${loop}: \", scalar(@ARGV), \"\\n\";\n}\n\nprint \"ARGV AFTER: \", scalar(@ARGV), \"\\n\";\n\nexit 0;\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl 1 2 3 4\nARGV BEFORE: 4\nARGV beginning loop 1 for 1: 4\nARGV end loop 1 for 1: 3\nARGV beginning loop 2 for 2: 3\nARGV end loop 2 for 2: 2\nARGV AFTER: 2\n</code></pre>\n\n<p>Compare this to the correct approach that re-checks the list at each iteration:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>while (@ARGV) {\n    ++$count;\n    print \"ARGV beginning loop ${count}: \", scalar(@ARGV), \"\\n\";\n    pop @ARGV;\n    print \"ARGV end loop ${count}: \", scalar(@ARGV), \"\\n\";\n}\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl 1 2 3 4\nARGV BEFORE: 4\nARGV beginning loop 1: 4\nARGV end loop 1: 3\nARGV beginning loop 2: 3\nARGV end loop 2: 2\nARGV beginning loop 3: 2\nARGV end loop 3: 1\nARGV beginning loop 4: 1\nARGV end loop 4: 0\nARGV AFTER: 0\n</code></pre>\n\n<hr>\n\n<p>That said: <strong>PLEASE</strong> do yourself a favor and re-think your SW architecture/design. Misusing Perl variables with defined semantics for own purposes is an <em>extremely</em> bad idea.</p>\n"}], "owner": {"reputation": 53, "user_id": 1210923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86c45f9aded33fda66bf19355bbccf81?s=128&d=identicon&r=PG", "display_name": "user1210923", "link": "https://stackoverflow.com/users/1210923/user1210923"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1550959979, "creation_date": 1550956225, "question_id": 54846243, "link": "https://stackoverflow.com/questions/54846243/use-of-perl-argv", "title": "use of perl @ARGV", "body": "<p>In a perl application I'm passing variables around with @ARGV.\nWhen there were always two variables and always the same two no problems.\nNow it's got more complicated so I need to \"empty\" @ARGV before adding to it. So I thought this would work:</p>\n\n<pre><code>    foreach (@ARGV)\n            {\n                pop @ARGV;\n            }\n</code></pre>\n\n<p>It doesn't. When there are four elements it removes only two.\nAny idea why that should be?\nOr any other way of emptying it?</p>\n"}, {"tags": ["arrays", "perl", "read-text"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 2, "creation_date": 1550942037, "post_id": 54843575, "comment_id": 96461207, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8963400/the-correct-way-to-read-a-data-file-into-an-array\">The correct way to read a data file into an array</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6928, "user_id": 1015385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc84a03227c566697c4a16b2e9f8782?s=128&d=identicon&r=PG", "display_name": "JRFerguson", "link": "https://stackoverflow.com/users/1015385/jrferguson"}, "is_accepted": false, "score": 1, "last_activity_date": 1550940437, "last_edit_date": 1550940437, "creation_date": 1550940018, "answer_id": 54843720, "question_id": 54843575, "link": "https://stackoverflow.com/questions/54843575/how-to-read-a-txt-file-and-store-it-into-an-array/54843720#54843720", "title": "How to read a .txt file and store it into an array", "body": "<p>You are looking for <a href=\"https://perldoc.perl.org/functions/push.html\" rel=\"nofollow noreferrer\">push</a>.</p>\n\n<pre><code>push @array, $line;\n</code></pre>\n\n<p>You undoubtedly want to precede this with <code>chomp</code> to snip any newlines, first.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1550944060, "post_id": 54843926, "comment_id": 96461818, "body": "While it&#39;s great to provide solutions to the bigger problems, it would be nice if you also answered the question that was asked."}], "tags": [], "owner": {"reputation": 69, "user_id": 826461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6d8931fe8caad3d896d4b293e0fd7fae?s=128&d=identicon&r=PG", "display_name": "topmop75", "link": "https://stackoverflow.com/users/826461/topmop75"}, "is_accepted": false, "score": 1, "last_activity_date": 1550958464, "last_edit_date": 1550958464, "creation_date": 1550941333, "answer_id": 54843926, "question_id": 54843575, "link": "https://stackoverflow.com/questions/54843575/how-to-read-a-txt-file-and-store-it-into-an-array/54843926#54843926", "title": "How to read a .txt file and store it into an array", "body": "<p>If file is small as compared to available memory of your machine then you can simply use below method to read content of file in to an array</p>\n\n<pre><code>open my $infile, '&lt;', 'PAM250.txt' or die $!;\nmy @array = &lt;$infile&gt;;\nclose $infile;\n</code></pre>\n\n<p>If you are going to read a very large file then it is better to read it line by line as you are doing but use <a href=\"https://perldoc.perl.org/functions/push.html\" rel=\"nofollow noreferrer\">PUSH</a> to add each line at end of array.</p>\n\n<pre><code>push(@array,$line);\n</code></pre>\n\n<p>I will suggest you also read about some more array <a href=\"https://perlmaven.com/manipulating-perl-arrays\" rel=\"nofollow noreferrer\">manipulating functions in perl</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11107948, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/53f15f309d5537aab7ff97d3728f119e?s=128&d=identicon&r=PG", "display_name": "TRSi", "link": "https://stackoverflow.com/users/11107948/trsi"}, "is_accepted": false, "score": -1, "last_activity_date": 1550977760, "creation_date": 1550977760, "answer_id": 54848343, "question_id": 54843575, "link": "https://stackoverflow.com/questions/54843575/how-to-read-a-txt-file-and-store-it-into-an-array/54848343#54848343", "title": "How to read a .txt file and store it into an array", "body": "<pre><code>try this...\n\n\nsub room\n{\n   my $result = \"\";\n   open(FILE, &lt;$_[0]);\n   while (&lt;FILE&gt;) { $return .= $_; }\n   close(FILE);\n   return $result;\n}\n</code></pre>\n\n<p>so you have a basic functionality without great words. the suggest before contains the risk to fail on large files. fastest safe way is that. call it as you like...</p>\n\n<p>my @array = &amp;room('/etc/passwd');</p>\n\n<p>print room('/etc/passwd');</p>\n\n<p>you can shorten, rename as your convinience believes. </p>\n\n<p>to the kidding ducks nearby: by this way the the push was replaced by simplictiy. a text-file contains linebreaks. the traditional push removes the linebreak and pushing up just the line. the construction of an array is a simple string with linebreaks. now contain the steplength...</p>\n"}, {"tags": [], "owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "is_accepted": false, "score": 0, "last_activity_date": 1551190537, "creation_date": 1551190537, "answer_id": 54887518, "question_id": 54843575, "link": "https://stackoverflow.com/questions/54843575/how-to-read-a-txt-file-and-store-it-into-an-array/54887518#54887518", "title": "How to read a .txt file and store it into an array", "body": "<p>You're unclear to what you want to achieve.</p>\n\n<p>Is every line an element of your array?</p>\n\n<p>Is every line an array in your array and your \"words\" are the elements of this array?</p>\n\n<p>Anyhow.</p>\n\n<p>Here is how you can achieve both:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\n# Read all lines into your array, after removing the \\n\nmy @array= map { chomp; $_ } &lt;&gt;;\n\n# show it\nprint Dumper \\@array;\n\n# Make each line an array so that you have an array of arrays\n$_= [ split ] foreach @array;\n\n# show it\nprint Dumper \\@array;\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1551190537, "creation_date": 1550939093, "last_edit_date": 1550941992, "question_id": 54843575, "link": "https://stackoverflow.com/questions/54843575/how-to-read-a-txt-file-and-store-it-into-an-array", "title": "How to read a .txt file and store it into an array", "body": "<p>I know this is a fairly simple question, but I cannot figure out how to store all of the values in my array the way I want to.\nHere is a small portion what the .txt file looks like:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>0 A R N D\nA 2 -2 0 0\nR -2 6 0 -1\nN 0 0 2 2\nD 0 -1 2 4\n</code></pre>\n\n<p>Each value is delimited by either two spaces - if the next value is positive - or a space and a '-' - if the next value is negative</p>\n\n<p>Here is the code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen my $infile, '&lt;', 'PAM250.txt' or die $!;\nmy $line;\nmy @array;\n\nwhile($line = &lt;$infile&gt;) \n{\n    $line =~ /^$/ and die \"Blank line detected at $.\\n\";\n    $line =~ /^#/ and next; #skips the commented lines at the beginning\n    @array = $line;\n    print \"@array\"; #Prints the array after each line is read\n};\n\nprint \"\\n\\n@array\"; #only prints the last line of the array ?\n</code></pre>\n\n<p>I understand that @array only holds the last line that was passed to it. Is there a way where I can get @array to hold all of the lines?</p>\n"}, {"tags": ["perl", "subclass", "superclass", "subroutine"], "comments": [{"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 1, "creation_date": 1550938540, "post_id": 54842607, "comment_id": 96460192, "body": "Well, I&#39;ve certainly got a few things to check out with the answers below.  I&#39;ll get back to you all in a while.  All of the answers so far seem to be in the same vein.  @ikegami suggested that I might be trying to compare Apples to Oranges.  This will never be the case.  I just want to call the same <code>mySort()</code> on different subclasses, each with its own <code>compare()</code>.  The answers so far look promising."}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1550935853, "last_edit_date": 1550935853, "creation_date": 1550935441, "answer_id": 54843091, "question_id": 54842607, "link": "https://stackoverflow.com/questions/54842607/can-i-call-a-superclass-sort-with-a-subclass-compare-in-perl/54843091#54843091", "title": "Can I call a superclass sort with a subclass compare in perl?", "body": "<p>The variables <code>$a</code> and <code>$b</code> are used by <code>sort</code> as package variables in the same package that sort was called, so in order for the child class to see them, you could try this.</p>\n\n<p>In the parent class:</p>\n\n<pre><code>sub mySort {\n    my $self = shift;\n    @{$self-&gt;{itemList}} = sort { $self-&gt;compare($a, $b) } @{$self-&gt;{itemList}};\n    return $self;\n}\n</code></pre>\n\n<p>In the child class:</p>\n\n<pre><code>sub compare {\n    my ( $self, $a, $b ) = @_;\n    $a-&gt;{mass} &lt;=&gt; $b-&gt;{mass};\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1550937599, "post_id": 54843213, "comment_id": 96459967, "body": "Contrary to what you&#39;ve been told your whole life, <a href=\"https://www.improbable.com/airchives/paperair/volume1/v1i3/air-1-3-apples.php\" rel=\"nofollow noreferrer\">you can compare Apples and Oranges</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1550940670, "post_id": 54843213, "comment_id": 96460785, "body": "@mob, Jocularity aside, that kinda demonstrates my point. You can compare <i>fruits</i> by transmission spectra, by mass, etc, but you can&#39;t use a compare function that&#39;s specific to apples to compare fruits."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1550976087, "last_edit_date": 1550976087, "creation_date": 1550936349, "answer_id": 54843213, "question_id": 54842607, "link": "https://stackoverflow.com/questions/54842607/can-i-call-a-superclass-sort-with-a-subclass-compare-in-perl/54843213#54843213", "title": "Can I call a superclass sort with a subclass compare in perl?", "body": "<p>The punctuation variables such as <code>$_</code><sup>[1]</sup> are called \"super-globals\" because they refer to the variable in the <code>main::</code> namespace.<sup>[2]</sup> In other words, no matter what's the current package, <code>$_</code> is short for <code>$main::_</code>.</p>\n\n<p><code>$a</code> and <code>$b</code> aren't super-globals. They are ordinary package variables. <code>sort</code> populates the <code>$a</code> and <code>$b</code> of the package in which the <code>sort</code> is found, which leads to problems if <code>sort</code> and the compare function are found in different packages. This means that moving <code>mySort</code> to Fruit:: will cause <code>sort</code> to populate <code>$Fruit::a</code> and <code>$Fruit::b</code>, but your <code>compare</code> function reads <code>$Apple::a</code> and <code>$Apple::b</code>.</p>\n\n<p>There are a few solutions you could use when multiple packages are involved, but the simplest is to use the <code>($$)</code> prototype on the compare function. This causes <code>sort</code> to pass the values to compare as arguments instead of using <code>$a</code> and <code>$b</code>.</p>\n\n<pre><code>package Foo;\nmy $compare = \\&amp;Bar::compare;\nmy @sorted = sort $compare @unsorted;\n\npackage Bar;\nsub compare($$) { $_[0] cmp $_[1] }\n</code></pre>\n\n<p><code>sort</code> calls the sub as a function, not a method. If you want it called as a method, you'll need a wrapper.</p>\n\n<pre><code>package Foo;\nmy @sorted = sort { Bar-&gt;compare($a, $b) } @unsorted;\n\npackage Bar;\nsub compare { $_[1] cmp $_[2] }\n</code></pre>\n\n<p>That said, the idea of having <code>sort</code> in one class and the sorter in a sub class is fundamentally flawed. You can presumably have a list that contains both Apples and Oranges, so how can you determine which <code>compare</code> method to call?</p>\n\n<pre><code>package Foo;\nmy @sorted = sort { ???-&gt;compare($a, $b) } @unsorted;\n\npackage Bar;\nsub compare { $_[1] cmp $_[2] }\n</code></pre>\n\n<hr>\n\n<ol>\n<li><p>And a few named ones too such as <code>STDIN</code>.</p></li>\n<li><p>By using a fully-qualified name (e.g. <code>$package::_</code>), you can access the punctuation variables of other packages. These have no special meaning; they aren't used by Perl itself.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1550939521, "post_id": 54843335, "comment_id": 96460478, "body": "rules!  The <code>warn()</code>ings showed exactly what you would expect.  I&#39;d post the text, but I don&#39;t know how to do preformatted in the comments.  It shows <code>new() called with class Apples</code> and <code>mySort() called with class Apples</code> and <code>compare() called with class Fruit</code>.  I used the &quot;more defensively&quot; <code>compare</code> and the <code>UNIVERSAL-&gt;can()</code>."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 2, "last_activity_date": 1550977078, "last_edit_date": 1550977078, "creation_date": 1550937399, "answer_id": 54843335, "question_id": 54842607, "link": "https://stackoverflow.com/questions/54842607/can-i-call-a-superclass-sort-with-a-subclass-compare-in-perl/54843335#54843335", "title": "Can I call a superclass sort with a subclass compare in perl?", "body": "<p>You've got two problems. First, you need the <code>mySort</code> function in the super class to call the <code>compare</code> function for the correct subclass. Second, you need the <code>compare</code> function in the subclass to be able to receive the two elements it wants to compare from a call in a different package.</p>\n\n<p>It's not clear whether you worked out a solution to the first problem, but one solution is to use <code>UNIVERSAL::can</code> to find out the right comparison method.</p>\n\n<pre><code>package Fruit;\nsub mySort {\n    my $self = shift;\n    my $compare_func = $self-&gt;can(\"compare\");\n    @{$self-&gt;{itemList}} = sort $compare_func @{$self-&gt;{itemList}};\n}\n</code></pre>\n\n<p>This will find the correct subclass <code>compare</code> function and use it in the sort call.</p>\n\n<p>Now the issue in the <code>Apples::compare</code> function will be that when <code>Fruit::mySort</code> is ready to compare a couple of elements, it will set the package variables <code>$Fruit::a</code> and <code>$Fruit::b</code>, not <code>$Apples::a</code> and <code>$Apples::b</code>. So your <code>Apples::compare</code> function must be prepared for this. Here are a couple of solutions:</p>\n\n<pre><code>package Apples;\nsub compare {\n    package Fruit;\n    $a-&gt;{mass} &lt;=&gt; $b-&gt;{mass};\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sub compare {\n    $Fruit::a-&gt;{mass} &lt;=&gt; $Fruit::b-&gt;{mass}\n}\n</code></pre>\n\n<p>or more defensively,</p>\n\n<pre><code>package Apples;\nsub compare {\n    my $pkg = caller;\n    if ($pkg ne __PACKAGE__) {\n        no strict 'refs';\n        $a = ${\"${pkg}::a\"};\n        $b = ${\"${pkg}::b\"};\n    }\n    $a-&gt;{mass} &lt;=&gt; $b-&gt;{mass}\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Update</strong>: I thought about making a subroutine attribute that would copy <code>$a</code> and <code>$b</code> values into the correct package, but after benchmarking it and thinking about alternatives, I decided against it. Here were my results for posterity:</p>\n\n<p>Consider three sort routines (that might be in another package and hard to use from the current package)</p>\n\n<pre><code>sub numsort { $a &lt;=&gt; $b }\nsub lexsort { $a cmp $b }\nsub objsort { $a-&gt;{value} &lt;=&gt; $b-&gt;{value} }\n</code></pre>\n\n<p>Here are some ways we can make these packages accessible:</p>\n\n<ol>\n<li><p>implement a subroutine attribute to prepare the <code>$a</code> and <code>$b</code> variables in the right package. Implementation is too long to include here, but the sub declaration would look like</p>\n\n<pre><code>sub numsort : CrossPkg { $a &lt;=&gt; $b }\n</code></pre></li>\n<li><p>rewrite the comparison function to compare <code>$_[0]</code> and <code>$_[1]</code> instead of <code>$a</code> and <code>$b</code>, and use a wrapper in the <code>sort</code> call</p>\n\n<pre><code>sub lexcmp { $_[0] cmp $_[1] }\n...\n@output = sort { lexcmp($a,$b) } @input\n</code></pre></li>\n<li><p>Perform the sort call in the correct package, so it sets the correct <code>$a</code> and <code>$b</code> values.</p>\n\n<pre><code>@output = do { package OtherPackage; sort numsort @input };\n</code></pre></li>\n</ol>\n\n<p>And here are the benchmarking results. The <code>local</code> method is the ordinary <code>sort</code> call with no cross-package issues.</p>\n\n<pre>\n                 Rate attrib-numsort    wrap-numcmp  local-numsort repkg-numsort\nattrib-numsort 1.17/s             --           -90%           -96%          -96%\nwrap-numcmp    11.6/s           885%             --           -61%          -64%\nlocal-numsort  29.5/s          2412%           155%             --           -8%\nrepkg-numsort  32.2/s          2639%           178%             9%            --\n\n                 Rate attrib-lexsort  repkg-lexsort    wrap-lexcmp local-lexsort\nattrib-lexsort 3.17/s             --           -12%           -14%          -17%\nrepkg-lexsort  3.60/s            13%             --            -2%           -5%\nwrap-lexcmp    3.68/s            16%             2%             --           -3%\nlocal-lexsort  3.80/s            20%             6%             3%            --\n\n                 Rate attrib-objsort    wrap-objcmp  local-objsort repkg-objsort\nattrib-objsort 1.22/s             --           -81%           -88%          -89%\nwrap-objcmp    6.32/s           417%             --           -38%          -44%\nlocal-objsort  10.1/s           730%            61%             --          -10%\nrepkg-objsort  11.3/s           824%            79%            11%            --\n</pre>\n\n<p><strong>Summary</strong>: overhead is less of a concern with <code>lexsort</code>, \nwhere each comparison takes more time. The attribute \napproach is dead on arrival. Setting the package going into\nthe <code>sort</code> call has the\nbest results -- more or less no overhead -- but it isn't\nsuitable for this application (in an object hierarchy). \nRewriting the comparison function and wrapping the function\nin the <code>sort</code> call isn't too bad of a performance drop-off,\nand it works in an object hierarchy, so the final\nrecommendation is:</p>\n\n<pre><code>package Fruit;\nsub compare { ... }\nsub mySort {\n    my $self = shift;\n    @{$self-&gt;{itemList}} =\n        sort { $self-&gt;can(\"compare\")-&gt;($a,$b) } @{$self-&gt;{itemList}};\n}\n\npackage Apples;\nour @ISA = qw(Fruit)\nsub compare { $_[0]-&gt;{mass} &lt;=&gt; $_[1]-&gt;{mass} }\n</code></pre>\n"}], "owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 1, "accepted_answer_id": 54843335, "answer_count": 3, "score": 1, "last_activity_date": 1550977078, "creation_date": 1550931916, "last_edit_date": 1550941517, "question_id": 54842607, "link": "https://stackoverflow.com/questions/54842607/can-i-call-a-superclass-sort-with-a-subclass-compare-in-perl", "title": "Can I call a superclass sort with a subclass compare in perl?", "body": "<p>I want to use a superclass sort which uses a subclass compare function.  I've tried to distill the nature of the question in the following code.  This isn't the \"production\" code, but is presented here for illustration.  It's tested.</p>\n\n<pre><code>#!/usr/bin/perl\n# $Id: foo,v 1.10 2019/02/23 14:14:33 bennett Exp bennett $\n\nuse strict;\nuse warnings;\n\npackage Fruit;\nuse Scalar::Util 'blessed';\n\nsub new {\n    my $class = shift;\n    my $self = bless({}, $class);\n    $self-&gt;{itemList} = [];\n    warn \"Called with class \", blessed $self, \"\\n\";\n    return $self;\n}\n\npackage Apples;\n\nuse parent qw(-norequire Fruit);\n\nsub mySort {\n    my $self = shift;\n    @{$self-&gt;{itemList}} = sort compare @{$self-&gt;{itemList}};\n    return $self;\n}\n\nsub compare {\n    $a-&gt;{mass} &lt;=&gt; $b-&gt;{mass};\n}\n\npackage main;\n\nmy $apfel = Apples-&gt;new();\npush(@{$apfel-&gt;{itemList}}, { \"name\" =&gt; \"grannysmith\", \"mass\" =&gt; 12 });\npush(@{$apfel-&gt;{itemList}}, { \"name\" =&gt; \"macintosh\", \"mass\" =&gt; 6 });\npush(@{$apfel-&gt;{itemList}}, { \"name\" =&gt; \"Alkmene\", \"mass\" =&gt; 8 });\n\n$apfel-&gt;mySort();\n\nfor my $f (@{$apfel-&gt;{itemList}}) {\n    printf(\"%s is %d\\n\", $f-&gt;{name}, $f-&gt;{mass});\n}\n\nexit 0;\n</code></pre>\n\n<p>What I want to do is to move <code>mySort()</code> to the abstract superclass <code>Fruit</code>.  I've tried a number ways of addressing the <code>$self-&gt;compare()</code> subroutine, but I'm not having much luck.</p>\n\n<p>Any thoughts?</p>\n\n<p>I've gotten it to call the correct subroutine, but never with the correct <code>$a</code> and <code>$b</code>.  I've left all of my failed attempts out of this question in the hopes that someone will know right away how to move the <code>mySort()</code> to the <code>Fruit</code> package so that I can sort my oranges with the same subroutine.</p>\n"}, {"tags": ["html", "perl", "web-scraping", "web-crawler"], "comments": [{"owner": {"reputation": 251, "user_id": 1760870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/924c1ecc4988a3afec75d67b6495b670?s=128&d=identicon&r=PG", "display_name": "Jesus Alonso Abad", "link": "https://stackoverflow.com/users/1760870/jesus-alonso-abad"}, "edited": false, "score": 0, "creation_date": 1550923317, "post_id": 54840931, "comment_id": 96456142, "body": "That&#39;s a very different problem. What you intend to do is parse/scrape JavaScript code, not HTML. The contents of the <code>script</code> tag are a JS program you will have to parse with a radically different approach, I&#39;m afraid."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 251, "user_id": 1760870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/924c1ecc4988a3afec75d67b6495b670?s=128&d=identicon&r=PG", "display_name": "Jesus Alonso Abad", "link": "https://stackoverflow.com/users/1760870/jesus-alonso-abad"}, "edited": false, "score": 0, "creation_date": 1550926209, "post_id": 54840931, "comment_id": 96456885, "body": "@JesusAlonsoAbad I agree that is true for the general case. But OPs example clearly indicates that his source data has JSON strings embedded in the <code>&lt;script&gt;</code> tags."}, {"owner": {"reputation": 33, "user_id": 1848577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd4dab97268e72636137764df40d170f?s=128&d=identicon&r=PG", "display_name": "pOverlord", "link": "https://stackoverflow.com/users/1848577/poverlord"}, "edited": false, "score": 0, "creation_date": 1550927798, "post_id": 54840931, "comment_id": 96457326, "body": "Thanks for your comments. Stefan&#39;s solution works perfectly fine in my case."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 1848577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd4dab97268e72636137764df40d170f?s=128&d=identicon&r=PG", "display_name": "pOverlord", "link": "https://stackoverflow.com/users/1848577/poverlord"}, "edited": false, "score": 0, "creation_date": 1550927702, "post_id": 54841557, "comment_id": 96457298, "body": "Just tried your solution and it works perfectly. Just had to adjust the regex because the actual web had a couple more JSONs under the <code>&lt;script&gt;</code> tag. Thanks."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 33, "user_id": 1848577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd4dab97268e72636137764df40d170f?s=128&d=identicon&r=PG", "display_name": "pOverlord", "link": "https://stackoverflow.com/users/1848577/poverlord"}, "edited": false, "score": 0, "creation_date": 1550930512, "post_id": 54841557, "comment_id": 96458076, "body": "I think <code>-&gt;as_HTML()</code> may not be the best choice, although it works for your example. I&#39;ve updated my answer to use <code>-&gt;content_list()</code> instead."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 2, "last_activity_date": 1550930451, "last_edit_date": 1550930451, "creation_date": 1550924617, "answer_id": 54841557, "question_id": 54840931, "link": "https://stackoverflow.com/questions/54840931/perl-web-scraper-retrieve-data-from-text-inside-a-script-tag/54841557#54841557", "title": "Perl web scraper, retrieve data from text inside a script tag", "body": "<p>You are basically on the right path. But <a href=\"https://metacpan.org/pod/HTML::TreeBuilder\" rel=\"nofollow noreferrer\">HTML::TreeBuilder</a> doesn't understand anything about JavaScript.</p>\n\n<p>The approach:</p>\n\n<ul>\n<li>find the <code>&lt;script&gt;</code> nodes</li>\n<li>extract the JSON content from those nodes\n\n<ul>\n<li><strong>NOTE:</strong> this will be easy for the example given, but will require more finesse for more complicated <code>&lt;script&gt;</code> content</li>\n<li>The escape <code>\\;</code> in the regex isn't really required, but the SO syntax highlighter gets confused without it</li>\n</ul></li>\n<li>use <a href=\"https://metacpan.org/pod/JSON\" rel=\"nofollow noreferrer\">JSON</a> to decode the string to Perl data structures</li>\n<li>access those data structures in your script</li>\n</ul>\n\n<p>A first rough solution without error checking. I left some debugging lines, commented out, in the code so that you can trace what each step is doing:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\nuse HTML::TreeBuilder;\nuse JSON;\n\nmy $decoder = new JSON;\n\nmy $tree       = HTML::TreeBuilder-&gt;new_from_file(\\*DATA);\n#$tree-&gt;dump;\nmy @scripts    = $tree-&gt;look_down(_tag =&gt; 'script');\n#$scripts[0]-&gt;dump;\n# NOTE 1: -&gt;as_text() *DOES NOT* return &lt;script&gt; content!\n# NOTE 2: -&gt;as_HTML() probably doesn't work for all cases, i.e. escaping\nmy $javascript = ($scripts[0]-&gt;content_list())[0];\n#print \"${javascript}\\n\";\nmy($json)      = $javascript =~ /(\\{.+\\})\\;/s;\n#print \"${json}\\n\";\nmy $object     = $decoder-&gt;decode($json);\n\nprint Dumper($object);\nprint \"FOUND: units: \", $object-&gt;{data}-&gt;{units},\n      \" horsepower: \",  $object-&gt;{data}-&gt;{horsePower}, \"\\n\";\n\n# IMPORTANT: $tree needs to be destroyed by hand when you're done with it!\n$tree-&gt;delete;\n\nexit 0;\n\n__DATA__\n&lt;html lang=\"en\"&gt;\n    &lt;body&gt;\n        &lt;script type=\"text/javascript\"&gt;\n            panel.web.bootstrapData = {\n                \"data\": {\n                    \"units\": \"kW\",\n                    \"horsePower\": 100.00\n                }\n            };\n        &lt;/script&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\n$VAR1 = {\n          'data' =&gt; {\n                      'horsePower' =&gt; '100',\n                      'units' =&gt; 'kW'\n                    }\n        };\nFOUND: units: kW horsepower: 100\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 1848577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd4dab97268e72636137764df40d170f?s=128&d=identicon&r=PG", "display_name": "pOverlord", "link": "https://stackoverflow.com/users/1848577/poverlord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 54841557, "answer_count": 1, "score": 3, "last_activity_date": 1551016396, "creation_date": 1550920100, "last_edit_date": 1550926261, "question_id": 54840931, "link": "https://stackoverflow.com/questions/54840931/perl-web-scraper-retrieve-data-from-text-inside-a-script-tag", "title": "Perl web scraper, retrieve data from text inside a script tag", "body": "<p>So far I was using perl to obtain data from web pages using <code>HTML::TreeBuilder</code>. This was OK when the data was contained inside <code>meta</code> or <code>div</code> tags; but now I stumbled upon a new structure that I don't know how to crawl, though it looks pretty trivial.</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;html lang=\"en\"&gt;\n    &lt;body&gt;\n        &lt;script type=\"text/javascript\"&gt;\n            panel.web.bootstrapData = {\n                \"data\": {\n                    \"units\": \"kW\",\n                    \"horsePower\": 100.00\n                }\n            };\n        &lt;/script&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>The example displays the relevant part of the content that I get from the web. I would like to get the values for <code>units</code> and <code>horsePower</code>.</p>\n\n<p>Fragments of the code I was using so far:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse LWP::UserAgent;\nuse HTTP::Request::Common;\nuse HTML::TreeBuilder;\n\n[...]\n\n$reply = $ua-&gt;get($url, @ns_headers);\n\n# printing the reply would get us the first code snippet.\nprint $reply-&gt;content;\n\nunless ($reply-&gt;is_success) {\n    [...]\n}\n\nmy $tree = HTML::TreeBuilder-&gt;new_from_content($reply-&gt;content);\nmy @unit_array = $tree -&gt; look_down(_tag=&gt;'meta','itemprop'=&gt;'unit');\nmy $unit = $unit_array[0]-&gt;attr('content');\n\n[...]\n</code></pre>\n\n<p>Any one knows how to obtain the relevant data and whether I should use something other than <code>HTML::TreeBuilder</code> for that matter? I haven't found any similar cases searching through stackoverflow and the web.</p>\n"}, {"tags": ["perl", "conda", "perl-module"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1550908949, "post_id": 54836416, "comment_id": 96452769, "body": "You appear to have (at least) 3 installations of Perl: 5.18.2 (first one in your path), 5.22 (used by program giving the error) and 5.26.2 (the one that has File::Slurp installed, assuming <code>&#47;anaconda3&#47;lib&#47;site_perl&#47;5.26.2&#47;File&#47;Slurp</code> is really <code>&#47;anaconda3&#47;lib&#47;site_perl&#47;5.26.2&#47;File&#47;Slurp.pm</code>)"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1550910362, "post_id": 54836416, "comment_id": 96453056, "body": "Did you maybe forget to <code>source</code> the anaconda3 setup file? If I interpret the above correctly anaconda3 installs its own Perl installation (5.26.2), so it would need to be first in <code>$PATH</code> in those terminals where you use anaconda3."}, {"owner": {"reputation": 39, "user_id": 10536726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca374e1c44c6b1a1d36caf1af87f322?s=128&d=identicon&r=PG&f=1", "display_name": "newbie_here", "link": "https://stackoverflow.com/users/10536726/newbie-here"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1550924630, "post_id": 54836416, "comment_id": 96456493, "body": "@ikegami , most of the files were installed by conda itself. Will it help if I remove certain files? (I worry it will make other programs stop aswell.. but if it may help I would be happy to try)"}, {"owner": {"reputation": 39, "user_id": 10536726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca374e1c44c6b1a1d36caf1af87f322?s=128&d=identicon&r=PG&f=1", "display_name": "newbie_here", "link": "https://stackoverflow.com/users/10536726/newbie-here"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1550924776, "post_id": 54836416, "comment_id": 96456522, "body": "@Stefan Becker, I will add my path to the post. It has certain folders from anaconda3 in it, but what perl folder should I add?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1550928453, "post_id": 54836416, "comment_id": 96457538, "body": "I can&#39;t offer any advice. I just pointed out some information that may help you or others"}, {"owner": {"reputation": 39, "user_id": 10536726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca374e1c44c6b1a1d36caf1af87f322?s=128&d=identicon&r=PG&f=1", "display_name": "newbie_here", "link": "https://stackoverflow.com/users/10536726/newbie-here"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1550932632, "post_id": 54836416, "comment_id": 96458650, "body": "@ikegami thanks for that!"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 10536726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca374e1c44c6b1a1d36caf1af87f322?s=128&d=identicon&r=PG&f=1", "display_name": "newbie_here", "link": "https://stackoverflow.com/users/10536726/newbie-here"}, "edited": false, "score": 0, "creation_date": 1550950719, "post_id": 54844568, "comment_id": 96463848, "body": "Thank you very much for taking me through it step-by-step. (I completely agree with the diagnosis: messed up system). What fixed is was removing the perl package with &quot;conda remove -c bioconda perl&quot; and that did the trick. Without reinstalling it! So once again thank you very much for your time and effort which you donated so freely to me. It allows me to get back to my PhD again. THANK YOU!"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 2, "last_activity_date": 1550945513, "creation_date": 1550945513, "answer_id": 54844568, "question_id": 54836416, "link": "https://stackoverflow.com/questions/54836416/cant-locate-file-slurp-pm-in-inc-in-a-conda-installed-program/54844568#54844568", "title": "Can&#39;t locate File/Slurp.pm in @INC in a conda installed program", "body": "<p>It looks like you have messed up your system.</p>\n\n<p>If I interpret the messages correctly you have at least three different Perl installations:</p>\n\n<ul>\n<li>5.18.2 from your macOS Mojave (? <code>osvers=18.0</code>) installation</li>\n<li>5.22.0 from anaconda3</li>\n<li>5.26.2 from anaconda3???? (or only the packages, but not the perl binary itself)</li>\n</ul>\n\n<hr>\n\n<p><code>env -i CMD</code> starts <code>CMD</code> with an empty environment, so it will remove anything you might have configured. So <code>env -i perl -V</code> will find the \"default\" perl in your system, which is the one from the macOS Mojave installation in <code>/usr/bin/perl</code>.</p>\n\n<p>But that perl doesn't cause the error message, so we can ignore it.</p>\n\n<hr>\n\n<p>When you execute <code>conda ...</code> it seems to use a perl 5.22.0 from <code>/anaconda3</code>. But at the same time you have installed perl 5.26.2 in that environment. My educated guess would be:</p>\n\n<ul>\n<li>you had a failed install/update of the Anaconda 3 perl package, i.e. it already installed 5.26.2 packages, but not the binary and left the old perl 5.22.0 binary intact.</li>\n<li>you didn't use the same channel for different <code>conda install</code> runs (your question indicates that you want to use the \"bioconda\" channel?)</li>\n</ul>\n\n<p>So the first thing you should try is in the same terminal you ran <code>conda</code> in:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ which perl\n$ perl -V\n</code></pre>\n\n<hr>\n\n<p>How to fix this? Here are things I would try:</p>\n\n<ul>\n<li>Try to update the Anaconda 3 perl package with <code>conda update -c bioconda perl</code></li>\n<li>Try to remove &amp; reinstall the Anaconda3 perl package <code>conda remove -c bioconda perl</code> and <code>conda install -c bioconda perl</code></li>\n<li>The drastic approach: remove and reinstall Anaconda 3 from scratch, i.e. <code>rm -rf /anaconda3</code>, removing the <code>PATH</code> additions from <code>~/.bashrc</code> and then closing the terminal.</li>\n</ul>\n"}], "owner": {"reputation": 39, "user_id": 10536726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca374e1c44c6b1a1d36caf1af87f322?s=128&d=identicon&r=PG&f=1", "display_name": "newbie_here", "link": "https://stackoverflow.com/users/10536726/newbie-here"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1412, "favorite_count": 0, "accepted_answer_id": 54844568, "answer_count": 1, "score": 2, "last_activity_date": 1550945513, "creation_date": 1550876671, "last_edit_date": 1550942784, "question_id": 54836416, "link": "https://stackoverflow.com/questions/54836416/cant-locate-file-slurp-pm-in-inc-in-a-conda-installed-program", "title": "Can&#39;t locate File/Slurp.pm in @INC in a conda installed program", "body": "<p>I started getting in trouble with different programs installed using conda ('abricate', 'mlst') giving error messages with the Can't locate File/Slurp.pm in @INC. This occured after changing computers and having to reinstall different things and changing to anaconda3. As an example I get the following error message when trying to start abricate:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Can't locate File/Slurp.pm in @INC (you may need to install the File::Slurp module) \n(@INC contains: /anaconda3/lib/perl5/site_perl/5.22.0/darwin-thread-multi-2level /anaconda3/lib/perl5/site_perl/5.22.0 /anaconda3/lib/perl5/5.22.0/darwin-thread-multi-2level /anaconda3/lib/perl5/5.22.0 .) at /anaconda3/bin/abricate line 9.\nBEGIN failed--compilation aborted at /anaconda3/bin/abricate line 9.\n</code></pre>\n\n<p>when I search for the install on my computer it is already present in multiple locations (some of which are empty?):</p>\n\n<ul>\n<li>/anaconda3/pkgs/perl-file-slurp-9999.25-pl526_0/lib/site_perl/5.26.2/darwin-thread-multi-2level/auto/File/Slurp </li>\n<li>/anaconda3/pkgs/perl-file-slurp-tiny-0.004-pl526_1/lib/site_perl/5.26.2/File/Slurp</li>\n<li>/anaconda3/pkgs/perl-file-slurp-tiny-0.004-pl526_1/lib/site_perl/5.26.2/darwin-thread-multi-2level/auto/File/Slurp</li>\n<li>/anaconda3/lib/site_perl/5.26.2/darwin-thread-multi-2level/auto/File/Slurp</li>\n<li>/anaconda3/lib/site_perl/5.26.2/File/Slurp</li>\n</ul>\n\n<p>I tried to reinstalling the slurp module</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>conda install -c bioconda perl-file-slurp\n</code></pre>\n\n<p>but that did not help. </p>\n\n<p>I have tried to further understand <a href=\"https://stackoverflow.com/questions/2526804/how-is-perls-inc-constructed-aka-what-are-all-the-ways-of-affecting-where-pe\">how the @INC is build up</a>.\nBut I am confused about how this works with conda installed programs. When I look at the perl environment, I get different locations compared to the error message which specified different folders for the @INC.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ env -i perl -V\n\nSummary of my perl5 (revision 5 version 18 subversion 2) configuration:\n\n  Platform:\n    osname=darwin, osvers=18.0, archname=darwin-thread-multi-2level\n    uname='darwin osx337.sd.apple.com 18.0 darwin kernel version 17.0.0: fri may 4 10:33:38 pdt 2018; root:xnu-4570.1.46.100.2~1development_x86_64 x86_64 '\n    config_args='-ds -e -Dprefix=/usr -Dccflags=-g  -pipe  -Dldflags= -Dman3ext=3pm -Duseithreads -Duseshrplib -Dinc_version_list=none -Dcc=cc'\n    hint=recommended, useposix=true, d_sigaction=define\n    useithreads=define, usemultiplicity=define\n    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef\n    use64bitint=define, use64bitall=define, uselongdouble=undef\n    usemymalloc=n, bincompat5005=undef\n  Compiler:\n    cc='cc', ccflags =' -g -pipe -fno-common -DPERL_DARWIN -fno-strict-aliasing -fstack-protector',\n    optimize='-Os',\n    cppflags='-g -pipe -fno-common -DPERL_DARWIN -fno-strict-aliasing -fstack-protector'\n    ccversion='', gccversion='4.2.1 Compatible Apple LLVM 10.0.0 (clang-1000.0.42)', gccosandvers=''\n    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678\n    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16\n    ivtype='long', ivsize=8, nvtype='double', nvsize=8, Off_t='off_t', lseeksize=8\n    alignbytes=8, prototype=define\n  Linker and Libraries:\n    ld='cc', ldflags =' -fstack-protector'\n    libpth=/usr/lib /usr/local/lib\n    libs= \n    perllibs=\n    libc=, so=dylib, useshrplib=true, libperl=libperl.dylib\n    gnulibc_version=''\n  Dynamic Linking:\n    dlsrc=dl_dlopen.xs, dlext=bundle, d_dlsymun=undef, ccdlflags=' '\n    cccdlflags=' ', lddlflags=' -bundle -undefined dynamic_lookup -fstack-protector'\n\n\nCharacteristics of this binary (from libperl): \n  Compile-time options: HAS_TIMES MULTIPLICITY PERLIO_LAYERS\n                        PERL_DONT_CREATE_GVSV\n                        PERL_HASH_FUNC_ONE_AT_A_TIME_HARD\n                        PERL_IMPLICIT_CONTEXT PERL_MALLOC_WRAP\n                        PERL_PRESERVE_IVUV PERL_SAWAMPERSAND USE_64_BIT_ALL\n                        USE_64_BIT_INT USE_ITHREADS USE_LARGE_FILES\n                        USE_LOCALE USE_LOCALE_COLLATE USE_LOCALE_CTYPE\n                        USE_LOCALE_NUMERIC USE_PERLIO USE_PERL_ATOF\n                        USE_REENTRANT_API\n  Locally applied patches:\n    /Library/Perl/Updates/&lt;version&gt; comes before system perl directories\n    installprivlib and installarchlib points to the Updates directory\n  Built under darwin\n  Compiled at Aug 17 2018 17:29:08\n  @INC:\n    /Library/Perl/5.18/darwin-thread-multi-2level\n    /Library/Perl/5.18\n    /Network/Library/Perl/5.18/darwin-thread-multi-2level\n    /Network/Library/Perl/5.18\n    /Library/Perl/Updates/5.18.2\n    /System/Library/Perl/5.18/darwin-thread-multi-2level\n    /System/Library/Perl/5.18\n    /System/Library/Perl/Extras/5.18/darwin-thread-multi-2level\n    /System/Library/Perl/Extras/5.18\n    .\n</code></pre>\n\n<p>My path is as follows:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ echo $PATH\n/anaconda3/bin:/anaconda3/condabin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/ncbi/blast/bin:/opt/X11/bin\n</code></pre>\n\n<p>I believe it is also possible to change the environment by adding things to the program itself</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use lib '/anaconda3/lib/site_perl/5.26.2/darwin-thread-multi-2level';\n</code></pre>\n\n<p>but as I have the problem with multiple programs I would like to understand what the core problem is (except me being rather new to this...:)</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 91128, "user_id": 1229023, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/75b840909603c238921a81032efd57eb?s=128&d=identicon&r=PG", "display_name": "raina77ow", "link": "https://stackoverflow.com/users/1229023/raina77ow"}, "edited": false, "score": 0, "creation_date": 1550871697, "post_id": 54835569, "comment_id": 96445906, "body": "<a href=\"https://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\">grep</a> is your friend"}, {"owner": {"reputation": 195, "user_id": 5261978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a0496058b8e9abd377e8239bedf1b03?s=128&d=identicon&r=PG&f=1", "display_name": "Jason TK", "link": "https://stackoverflow.com/users/5261978/jason-tk"}, "reply_to_user": {"reputation": 91128, "user_id": 1229023, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/75b840909603c238921a81032efd57eb?s=128&d=identicon&r=PG", "display_name": "raina77ow", "link": "https://stackoverflow.com/users/1229023/raina77ow"}, "edited": false, "score": 0, "creation_date": 1550872142, "post_id": 54835569, "comment_id": 96446070, "body": "I&#39;ve been trying. They only showed how to loop thru and search and print certain key=value."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1550872481, "post_id": 54835569, "comment_id": 96446191, "body": "Try this: <code>my $newarr = [ grep { !( exists $_-&gt;{c} and $_-&gt;{c} eq &#39;success&#39;) } @$arr ]</code>"}, {"owner": {"reputation": 195, "user_id": 5261978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a0496058b8e9abd377e8239bedf1b03?s=128&d=identicon&r=PG&f=1", "display_name": "Jason TK", "link": "https://stackoverflow.com/users/5261978/jason-tk"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1550873249, "post_id": 54835569, "comment_id": 96446477, "body": "That did it. Thank you so much. @H&#229;konH&#230;gland"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1550890184, "post_id": 54835569, "comment_id": 96449889, "body": "Much like in the accepted answer, that leaves some elements in <code>$newarr</code> and <code>$arr</code> as <i>references to same data</i>, so it leaves you with a bug: for some changes in <code>$arr</code> the <code>$newarr</code> is changed, and the other way round. Instead, you&#39;d needa deep copy, or  <code>@$arr =  grep {  ... } @$arr</code>"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1550889583, "post_id": 54835962, "comment_id": 96449781, "body": "&quot;<i>The elements won&#39;t be recreated</i>&quot; -- correct, but that&#39;s a bug: If a value is changed in <code>$arr</code> then <code>@new</code> may get changed, and vice versa."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1550909780, "post_id": 54835962, "comment_id": 96452937, "body": "@zdim that&#39;s why I pointed it out to the OP so that he is aware of it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1550911097, "post_id": 54835962, "comment_id": 96453196, "body": "Sure, but there is nothing one can do about it once it&#39;s there; just can&#39;t work with these any more.  However, I think that <code>@$arr = grep ... @$arr</code> takes care of it? The OP says that overwriting is fine. (One can also mention a deep copy, with say <code>dclone</code>.)"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 4, "last_activity_date": 1550915795, "last_edit_date": 1550915795, "creation_date": 1550873860, "answer_id": 54835962, "question_id": 54835569, "link": "https://stackoverflow.com/questions/54835569/loops-thru-current-array-of-hashes-build-a-new-array-of-hashes-and-ignore-recor/54835962#54835962", "title": "Loops thru current array of hashes; build a new array of hashes and ignore records with certain key = value", "body": "<p>A simple <code>grep</code> should achieve this:</p>\n\n<ul>\n<li><code>@{}</code> to de-reference the array ref</li>\n<li><code>grep {}</code> to apply a filter on the resulting list</li>\n<li><code>$_-&gt;{c] ne 'success'</code> the filter that should be applied to each element</li>\n<li><code>grep</code> aliases <code>$_</code> to each element in the list: in your case each list element is a hash ref</li>\n<li><code>$-&gt;{c}</code> de-reference the hash ref to retrieve the value for key <code>c</code></li>\n<li><strong>NOTE:</strong> this is a shallow copy approach, i.e. <code>@{ $arr }</code> and <code>@new</code> contain references to the same hash refs.</li>\n</ul>\n\n<p>For details see <a href=\"https://perldoc.perl.org/perlfunc.html\" rel=\"nofollow noreferrer\">perlfunc</a>.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy $arr = [\n    {\n        'a' =&gt; 1,\n        'b' =&gt; 2,\n        'c' =&gt; 'failed',\n    },\n    {\n        'a' =&gt; 5,\n        'b' =&gt; 6,\n        'c' =&gt; 'success',\n    },\n];\n\nmy @new = grep { $_-&gt;{c} ne 'success' } @{ $arr };\n\nprint Dumper(\\@new);\n\nexit 0;\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\n$VAR1 = [\n          {\n            'c' =&gt; 'failed',\n            'b' =&gt; 2,\n            'a' =&gt; 1\n          }\n        ];\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 5261978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a0496058b8e9abd377e8239bedf1b03?s=128&d=identicon&r=PG&f=1", "display_name": "Jason TK", "link": "https://stackoverflow.com/users/5261978/jason-tk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 1, "accepted_answer_id": 54835962, "answer_count": 1, "score": 2, "last_activity_date": 1550915795, "creation_date": 1550871622, "last_edit_date": 1550872075, "question_id": 54835569, "link": "https://stackoverflow.com/questions/54835569/loops-thru-current-array-of-hashes-build-a-new-array-of-hashes-and-ignore-recor", "title": "Loops thru current array of hashes; build a new array of hashes and ignore records with certain key = value", "body": "<p>I have $arr with many records, but i only showed 2 records here for simplicity:</p>\n\n<pre><code>$arr = [\n     {\n       'a' =&gt; 1,\n       'b' =&gt; 2,\n       'c' =&gt; 'failed'\n     },\n     {\n       'a' =&gt; 5,\n       'b' =&gt; 6,\n       'c' =&gt; 'success'\n    },\n    {...}, {...}, {...}\n    ];\n</code></pre>\n\n<p>I want to loop thru $arr above and ignore any record with 'c'='success' and put in a new $newarr; or it's ok to overwrite $arr instead of creating a new $newarr.</p>\n\n<pre><code>$newarr = [\n     {\n       'a' =&gt; 1,\n       'b' =&gt; 2,\n       'c' =&gt; 'failed'\n     }\n];\n</code></pre>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1550864794, "post_id": 54833426, "comment_id": 96443076, "body": "<code>If not then print out the line number.</code> of the second and any later lines with that value?  or the first too?  or just the first?"}], "answers": [{"comments": [{"owner": {"reputation": 25477, "user_id": 1058419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/b5acg.jpg?s=128&g=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/1058419/sam-b"}, "edited": false, "score": 0, "creation_date": 1550862701, "post_id": 54833522, "comment_id": 96442223, "body": "no way! your code worked the entire file in under 5 seconds. bravo and thank you!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 25477, "user_id": 1058419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/b5acg.jpg?s=128&g=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/1058419/sam-b"}, "edited": false, "score": 0, "creation_date": 1550863185, "post_id": 54833522, "comment_id": 96442416, "body": "@SamB  Well, good -- it&#39;s a nod to the value of the notion of &quot;computational complexity&quot; :).  Searching through an array on every line ... it&#39;s <code>O(nm)</code> (<code>n</code> lines, <code>m</code> array values) which is really <code>O(n^2)</code> since <code>m</code>-array has a distinct value on each line so <i><code>m</code> is <code>n</code></i>; with the hash it&#39;s <code>O(n)</code>.  The key to this is -- it starts to matter with <code>n</code> large enough, and you&#39;ve got that with a million lines ..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 25477, "user_id": 1058419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/b5acg.jpg?s=128&g=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/1058419/sam-b"}, "edited": false, "score": 0, "creation_date": 1550863196, "post_id": 54833522, "comment_id": 96442424, "body": "@SamB   ... so at line 10 it&#39;s a 9-long array that&#39;s searched and on line 11 it&#39;s a 10 long array ... but at line 1_000 the array has that many elements ... and count how it goes at 100_000, and beyond. Another nasty bit here is that it does search through the <i>whole</i> array every single time, since there aren&#39;t many dupes there (presumably).  If you were up for it you could print timing information out (every 1_000 or 10_000 lines say), to see how this develops"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1551061365, "post_id": 54833522, "comment_id": 96488563, "body": "The check and the flag setting can be combined: <code>if (!$second_field_value{$fields[1]}++)</code> This is a common idiom for finding duplicates"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 4, "last_activity_date": 1607720551, "last_edit_date": 1607720551, "creation_date": 1550862101, "answer_id": 54833522, "question_id": 54833426, "link": "https://stackoverflow.com/questions/54833426/fastest-way-to-check-duplicate-columns-in-a-line-in-perl/54833522#54833522", "title": "Fastest way to check duplicate columns in a line in perl", "body": "<p>That's one of the things a hash is for</p>\n<pre><code>use feature qw(say);\n\n...\n\nmy %second_field_value;\n\nwhile (defined(my $recordLine = &lt;$filehandle&gt;))\n{\n    chomp $recordLine; \n    my @fields = split /,/, $recordLine;\n\n    if (exists $second_field_value{$fields[1]}) {\n        say &quot;DUP line: $. -- @fields[0,1]&quot;;\n    }\n    ++$second_field_value{$fields[1]};\n}\n</code></pre>\n<p>This will accumulate all possible values for this field, as it must. We can also store suitable info about dupes as they are found, depending on what needs to be reported about them.</p>\n<p>The line number (of the last read filehandle) is available in <a href=\"https://perldoc.perl.org/perlvar.html#$.\" rel=\"nofollow noreferrer\">$. variable</a>; no need for <code>$counter</code>.</p>\n<p>Note that a check and a flag/counter setting can be done in one expression, for</p>\n<pre><code>if ($second_field_values{$fields[1]}++) { say ... }  # already seen before\n</code></pre>\n<p>which is an idiom when checking for duplicates. Thanks to ikegami for bringing it up. This works by having the <a href=\"https://perldoc.perl.org/perlop.html#Auto-increment-and-Auto-decrement\" rel=\"nofollow noreferrer\">post-increment</a> in the condition (so the check is done with the old value, and the count is up to date in the block).</p>\n<p>I have to comment on the smart-match operator (<code>~~</code>) as well. It is widely understood that it has great problems in its current form and it is practically certain that it will suffer major changes, or worse.  Thus, simply put, I'd say: don't use it. The code with it has every chance of breaking at some unspecified point in the future, possibly without a warning, and perhaps quietly.</p>\n<hr />\n<p>Note on performance and &quot;computational complexity,&quot; raised in comments.</p>\n<p>Searching through an array on every line has <em>O</em>(<em>n</em>\u200a<em>m</em>) complexity (<code>n</code> lines, <code>m</code> values), what is really <em>O</em>(<em>n</em><sup>2</sup>) here since the array gets a new value on each line (so <em>m = n-1</em>); further, the whole array gets searched for (practically) every line as there normally aren't dupes. With the hash the complexity is <em>O</em>(<em>n</em>), as we have a constant-time lookup on each line.</p>\n<p>The crucial thing is that all that is about the size of input.  For a file of a few hundred lines we can't tell a difference. With a million lines, the reported run times are &quot;<em>anywhere from 2-3 hours</em>&quot; with array and &quot;<em>under 5 seconds</em>&quot; with hash.</p>\n<p>The fact that &quot;complexity&quot; assessment deals with input size has practical implications.</p>\n<p>For one, code with carelessly built algorithms which &quot;runs great&quot; may break miserably for unexpectedly large inputs -- or, rather, for realistic data once it comes to production runs.</p>\n<p>On the other hand, it is often quite satisfactory to run with code that is cleaner and simpler even as it has worse &quot;complexity&quot; -- when we understand its  use cases.</p>\n<p>Generally, the complexity tells us how the runtime depends on size, not what exactly it is. So an <em>O</em>(<em>n</em><sup>2</sup>) algorithm may well run faster than an <em>O</em>(<em>n</em>\u2009<em>log</em>\u200a<em>n</em>) one for small enough input. This has great practical importance and is used widely in choosing algorithms.</p>\n"}, {"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 2, "last_activity_date": 1550862135, "creation_date": 1550862135, "answer_id": 54833529, "question_id": 54833426, "link": "https://stackoverflow.com/questions/54833426/fastest-way-to-check-duplicate-columns-in-a-line-in-perl/54833529#54833529", "title": "Fastest way to check duplicate columns in a line in perl", "body": "<p>Use a hash. Arrays are good for storing sequential data, and hashes are good for storing random-access data. Your search of <code>@uniqueArray</code> is O(n) on each search, which is done once per line, making your algorithm O(n^2). A hash solution would be O(1) (more or less) on each search, which is done once per line, making it O(n) overall.</p>\n\n<p>Also, use <code>$.</code> for line numbers - perl tracks it for you.</p>\n\n<pre><code>my %seen;\nwhile(&lt;$filehandle&gt;)\n{\n  chomp;\n  my ($val1, $val2) = split /,/;\n\n  # track all values and their line numbers.\n  push @{$seen{$val2}}, [$., $val1];\n}\n\n# now go through the full list, looking for anything that was seen\n# more than once.\nfor my $val2 (grep { @{$seen{$_}} &gt; 1 } keys %seen)\n{\n  print \"DUP line: $val2 was seen on lines \", join \", \", map { \"$_[0] ($_[1]) \" } @{$seen{$val2}};\n  print \"\\n\";\n}\n</code></pre>\n\n<p>This is all O(n). Much faster.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1550906744, "last_edit_date": 1550906744, "creation_date": 1550905936, "answer_id": 54839171, "question_id": 54833426, "link": "https://stackoverflow.com/questions/54833426/fastest-way-to-check-duplicate-columns-in-a-line-in-perl/54839171#54839171", "title": "Fastest way to check duplicate columns in a line in perl", "body": "<p>The hash answer you've accepted would be the standard approach here. But I wonder if using an array would be a little faster. (I've also switched to using <code>$_</code> as I think it makes the code cleaner.)</p>\n\n<pre><code>use feature qw(say);\n\n...\n\nmy @second_field_value;\n\nwhile (&lt;$filehandle&gt;))\n{\n    chomp; \n    my @fields = split /,/;\n\n    if ($second_field_value[$fields[1]]) {\n        say \"DIP line: $. -- @fields\";\n    }\n    ++$second_field_value[$fields[1]];\n}\n</code></pre>\n\n<p>It would be a pretty sparse array, but it might still be faster than the hash version. (I'm afraid I don't have the time to benchmark it.)</p>\n\n<p><strong>Update:</strong> I ran some basic tests. The array version <strong>is</strong> faster. But not by enough that it's worth worrying about.</p>\n"}], "owner": {"reputation": 25477, "user_id": 1058419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/b5acg.jpg?s=128&g=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/1058419/sam-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 54833522, "answer_count": 3, "score": 3, "last_activity_date": 1607720551, "creation_date": 1550861610, "last_edit_date": 1550871515, "question_id": 54833426, "link": "https://stackoverflow.com/questions/54833426/fastest-way-to-check-duplicate-columns-in-a-line-in-perl", "title": "Fastest way to check duplicate columns in a line in perl", "body": "<p>I have a file with 1 million lines like this</p>\n\n<pre><code>aaa,111\nbbb,222\n...\n...\na3z,222 (line# 500,000)\n...\n...\nbz1,444 (last line# 1 million)\n</code></pre>\n\n<p>What I need to check is whether second value after comma is unique or not. If not then print out the line number. In example above it should print out</p>\n\n<pre><code>Duplicate: line: 500000 value: a3z,222\n</code></pre>\n\n<p>For this I am using perl and storing value of second column in an array. If I don't find a value in the array I add it to it. If the value already exists then I print it out as a duplicate. </p>\n\n<p>The problem is the logic I am using is super slow. It takes anywhere from 2-3 hours to complete. Is there a way I can speed this up? I don't want to create an array if I don't have to. I just want to check duplicate values in column 2 of the file. </p>\n\n<p>If there is a faster way to do it in a batch-file I am open to it. </p>\n\n<p>Here's my working code. </p>\n\n<pre><code># header\nuse warnings;\nuse DateTime;\nuse strict;\nuse POSIX qw(strftime);\nuse File::Find;\nuse File::Slurp;\nuse File::Spec;\nuse List::MoreUtils qw(uniq);\n\nprint \"Perl Starting ... \\n\\n\"; \n\n# Open the file for read access:\nopen my $filehandle, '&lt;', 'my_huge_input_file.txt';\n\nmy $counter = 0;\nmy @uniqueArray;\n# Loop through each line:\nwhile (defined(my $recordLine = &lt;$filehandle&gt;))\n{\n\n  # Keep track of line numbers\n  $counter++;\n\n\n  # Strip the linebreak character at the end.\n  chomp $recordLine;\n\n  my @fields = split(/,/, $recordLine);\n  my $val1=$fields[0]; \n  my $val2=$fields[1]; \n\n  if ( !($val2 ~~ @uniqueArray) &amp;&amp; ($val2 ne \"\") )\n  {\n        push(@uniqueArray, $val2);\n  }\n  else\n  {\n    print (\"DUP line: $counter - val1: $val1 - val2: $val2 \\n\");\n  }\n\n}\n\nprint \"\\nPerl End ... \\n\\n\"; \n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 3, "creation_date": 1550857082, "post_id": 54832342, "comment_id": 96439607, "body": "It&#39;ll help to know what this is for, and what problems are you having with <code>END</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1550857385, "post_id": 54832342, "comment_id": 96439742, "body": "How would <code>DEFER</code> differ from <code>END</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1550857459, "post_id": 54832342, "comment_id": 96439785, "body": "If you want the block to executed at the end of the file&#39;s execution (i.e. at the end of the current lexical scope) rather than at the end of the program as with <code>END</code>, you can use something like Sub::ScopeFinalizer"}, {"owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "edited": false, "score": 0, "creation_date": 1550857486, "post_id": 54832342, "comment_id": 96439794, "body": "A convenience shortcut module. <code>MyModule</code> will perform some setup as well as additional code to execute after the caller&#39;s code. Currently END works, but my concern is that this might interfere with other piece of code/module that uses END for something different."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1550857517, "post_id": 54832342, "comment_id": 96439814, "body": "There is no problem with having multiple END blocks."}, {"owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "edited": false, "score": 0, "creation_date": 1550857570, "post_id": 54832342, "comment_id": 96439832, "body": "Thanks, Sub::ScopeFinalizer might be handy."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1550857572, "post_id": 54832342, "comment_id": 96439836, "body": "An issue with <code>END</code> would be that the program has started &quot;global destruction&quot;, deallocating memory, closing filehandles. In an <code>END</code> block you couldn&#39;t depend on the program being in a consistent state like you can during the regular run phase."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1550857634, "post_id": 54832342, "comment_id": 96439861, "body": "@mob I thought <code>END</code> happened just before global destruction."}, {"owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1550857670, "post_id": 54832342, "comment_id": 96439878, "body": "@mob True, especially if <code>use MyModule</code> is called early resulting in its END block being called very late (since END execution follows LIFO order)."}, {"owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1550857877, "post_id": 54832342, "comment_id": 96439999, "body": "@mob But maybe that&#39;s an issue with DESTROY, and not END particularly?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1550857995, "post_id": 54832342, "comment_id": 96440066, "body": "Yeah, I think you guys are right about END-phase vs. global destruction phase."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1550860027, "post_id": 54832342, "comment_id": 96441057, "body": "In the END phase you are definitely in a different land as @mob says. Even if global destruction (in particular) didn&#39;t start, other things have changed; for example (at least some) signal handlers are gone (you can reinstall in the first-to-run END block).  But as for your concern voiced in a comment, END blocks are independent so it&#39;s not clear how this one would interfere with others."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1550860394, "post_id": 54832342, "comment_id": 96441234, "body": "A note just in case: as <code>END</code> blocks run in the order opposite of how they show in code this includes the <code>use</code> statements as well.  So <code>END</code> from this module runs after <code>END</code> in the caller (assuming caller&#39;s <code>END</code> comes after <code>use</code> statements) or <code>END</code> in packages which <code>use</code> statements come after it in the caller, but before <code>END</code> in packages with <code>use</code> statements before it in the caller."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1550861302, "post_id": 54832342, "comment_id": 96441628, "body": "See <a href=\"http://metacpan.org/pod/Manip::END\" rel=\"nofollow noreferrer\"><code>Manip::END</code></a> for some help with controlling the order that END blocks run in."}], "owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1550856830, "creation_date": 1550856830, "question_id": 54832342, "link": "https://stackoverflow.com/questions/54832342/defering-execution-of-a-block-of-perl-code", "title": "Defering execution of a block of Perl code", "body": "<p>In <code>lib/MyModule.pm</code>:</p>\n\n<pre><code>package MyModule;\nDEFER: {\n    print \"foo\";\n}\n1;\n</code></pre>\n\n<p>In <code>script.pl</code>:</p>\n\n<pre><code>use MyModule;\nprint \"bar\";\n</code></pre>\n\n<p>I want to be able to output:</p>\n\n<pre><code>bar\nfoo\n</code></pre>\n\n<p>That is, I want to defer the execution of code inside the DEFER: block into the runtime and preferably after the code in the caller is executed. Sort of the opposite of BEGIN {}. Currently I use END {}, which is pretty much the opposite of BEGIN {} I suppose, but I wonder if there are other alternatives. One of the requirements is that the caller code only wants to do <code>use MyModule</code> and nothing additional.</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1550847232, "post_id": 54829662, "comment_id": 96434202, "body": "The safer thing to do is to export your variables in the environment, and not to expand them into the text parsed as shell code at all. (That&#39;s &quot;safer&quot; in the &quot;security-vulnerability-avoidance&quot; sense)."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1550847269, "post_id": 54829662, "comment_id": 96434224, "body": "...though <code>ssh</code> parses everything as remote code regardless, so you can&#39;t avoid needing to trust your <code>remote_dir</code> value if you aren&#39;t giving it an extra layer of shell-safe escaping (only one layer for the remote system needed if you stop using <code>system()</code> and invoke ssh with an explicit argv, but right now, you need to escape against both local and remote shells)."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 3, "creation_date": 1550847602, "post_id": 54829662, "comment_id": 96434439, "body": "Consider using <a href=\"https://metacpan.org/pod/String::ShellQuote\" rel=\"nofollow noreferrer\">String::ShellQuote</a> to quote the list <code>[&quot;ls&quot;, $remote_dir]</code> into a single shell-safe string, and running <code>system(&quot;ssh&quot;, &quot;-i&quot;, &quot;id_pub&quot;, $ssh_addr, $safely_quoted_string)</code>."}, {"owner": {"reputation": 389, "user_id": 4475588, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-_r9duSvNEDo/AAAAAAAAAAI/AAAAAAAAOt4/Z2sVR0PktLo/photo.jpg?sz=128", "display_name": "Igor", "link": "https://stackoverflow.com/users/4475588/igor"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1550849601, "post_id": 54829662, "comment_id": 96435636, "body": "String::ShellQuote is not in Perl by default, so, unfortunately, it wouldn&#39;t work for me("}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1550850942, "post_id": 54829662, "comment_id": 96436377, "body": "@Igor Why not? If it&#39;s just a deployment issue and you want to run this script on hosts you can&#39;t install modules on, just copy/paste the subroutine from String::ShellQuote into your script."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1550851335, "post_id": 54829662, "comment_id": 96436596, "body": "... In fact, you can automate the paste-module-code-into-script step with <a href=\"https://metacpan.org/pod/App::FatPacker\" rel=\"nofollow noreferrer\">metacpan.org/pod/App::FatPacker</a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1550869681, "post_id": 54829662, "comment_id": 96445056, "body": "In short, I strongly recommend to figure out a way to use modules, instead of figuring out where to put slashes and quotes and whatnot.  You can install the module as a user (if that&#39;s how your code runs), or just copy-paste the code for the whole module into a file and you have your own module then, or use the linked app (thanks @melpomene)"}], "answers": [{"comments": [{"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1550850981, "post_id": 54830669, "comment_id": 96436400, "body": "It&#39;s generally safer and easier to give <code>ssh</code> a pre-quoted string as a single argument than to let it piece together the string itself. <code>system(&#39;ssh&#39;, &#39;-i&#39;, &#39;id_pub&#39;, $ssh_addr, &quot;ls $remotedir&quot;)</code>. This requires the value of <code>remotedir</code> itself to be appropriately escaped, rather than trying to wrap it in quotes. (For example, both <code>system(..., &#39;ls&#39;, &quot;&#39;$remote_dir&#39;&quot;)</code> and <code>system(..., &quot;ls &#39;$remotedir&#39;&quot;)</code> will fail if <code>$remotedir</code> contains a single quote.)"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 2, "creation_date": 1550851017, "post_id": 54830669, "comment_id": 96436415, "body": "Injecting literal single quotes is only safe if you trust your <code>remote_dir</code> not to contain literal single quotes itself. They&#39;re legal in filenames, so that&#39;s not a wise thing to trust."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1551137632, "post_id": 54830669, "comment_id": 96522663, "body": "String::ShellQuote is the proper way to quote an argument for a bourne-compatible shell as @ikegami&#39;s answer notes."}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 2, "last_activity_date": 1550851281, "last_edit_date": 1550851281, "creation_date": 1550850586, "answer_id": 54830669, "question_id": 54829662, "link": "https://stackoverflow.com/questions/54829662/using-perl-system-query-with-spaces-in-path-variable/54830669#54830669", "title": "Using perl system() query with spaces in path variable", "body": "<p>OK you have several possibilities for shell expansion with the way you are doing this.</p>\n\n<p>Firstly is using system() with a string. This will break all your paths on the space characters. you can solve this by using system as a list</p>\n\n<pre><code>system('ssh', '-i', 'id_pub', $ssh_addr, 'ls', $remote_dir)\n</code></pre>\n\n<p>Now we still have a problem as ssh will run the remote code on the remote server in a shell with shell expansion which will break the path on spaces <em>again</em></p>\n\n<p>So you need to put $remote_dir inside <code>'</code> characters to stop the remote shell from breaking up the path: giving</p>\n\n<pre><code>system('ssh', '-i', 'id_pub', $ssh_addr, 'ls', \"'$remote_dir'\")\n</code></pre>\n\n<p>Hope this helps/works</p>\n\n<p>Note that as the commenters below have said this makes the assumption that  $remote_dir has no <code>'</code> characters in it. You need to be either escaping or parsing $remote_dir to ensure that you don't get a path that looks like <code>/file.txt'; rm -rf / #</code> which will attempt to remove every file on the remote  system</p>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1550851447, "post_id": 54830909, "comment_id": 96436652, "body": "Correction: It doesn&#39;t work for inputs containing <code>\\0</code> characters."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1550851459, "post_id": 54830909, "comment_id": 96436660, "body": "@melpomene, those aren&#39;t &quot;possible&quot; values in the first place, since NULs can&#39;t be included in command lines (argument lists being arrays of NUL-terminated C strings at the operating system level)."}, {"owner": {"reputation": 389, "user_id": 4475588, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-_r9duSvNEDo/AAAAAAAAAAI/AAAAAAAAOt4/Z2sVR0PktLo/photo.jpg?sz=128", "display_name": "Igor", "link": "https://stackoverflow.com/users/4475588/igor"}, "edited": false, "score": 0, "creation_date": 1550851641, "post_id": 54830909, "comment_id": 96436762, "body": "This command is much more complex though to wrap a head around than the original one, what &quot;printf -v remote_cmd&quot; here does?"}, {"owner": {"reputation": 389, "user_id": 4475588, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-_r9duSvNEDo/AAAAAAAAAAI/AAAAAAAAOt4/Z2sVR0PktLo/photo.jpg?sz=128", "display_name": "Igor", "link": "https://stackoverflow.com/users/4475588/igor"}, "edited": false, "score": 0, "creation_date": 1550851667, "post_id": 54830909, "comment_id": 96436776, "body": "I am referring to @ARGV"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 389, "user_id": 4475588, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-_r9duSvNEDo/AAAAAAAAAAI/AAAAAAAAOt4/Z2sVR0PktLo/photo.jpg?sz=128", "display_name": "Igor", "link": "https://stackoverflow.com/users/4475588/igor"}, "edited": false, "score": 1, "creation_date": 1550851693, "post_id": 54830909, "comment_id": 96436788, "body": "@Igor, <code>printf -v</code> is a more efficient equivalent to for <code>remote_cmd=$(printf ...)</code>. The important thing is that we&#39;re using the <code>%q</code> format string to escape arbitrary content, so it generates a command line that escapes quotes, hidden characters, Unicode characters, and whatever else you run into into a format where it evaluates back to itself."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1550851762, "post_id": 54830909, "comment_id": 96436820, "body": "@CharlesDuffy I know those characters cannot be passed at all, but just ignoring the issue leads to implicit truncation, which may or may not have security implications. String::ShellQuote checks for <code>\\0</code> characters and throws an exception if they&#39;re found."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 389, "user_id": 4475588, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-_r9duSvNEDo/AAAAAAAAAAI/AAAAAAAAOt4/Z2sVR0PktLo/photo.jpg?sz=128", "display_name": "Igor", "link": "https://stackoverflow.com/users/4475588/igor"}, "edited": false, "score": 0, "creation_date": 1550851792, "post_id": 54830909, "comment_id": 96436844, "body": "@Igor, ...to speak a little bit to why that&#39;s important, think about what would happen if someone asked your script to get a listing of the directory with the literal name <code>$(rm -rf ~)&#39;$(rm -rf ~)&#39;</code> -- the substring on the left gets expanded unquoted or in double quotes, and the one on the right gets expanded in single quotes, so you can&#39;t pass that string <i>at all</i> if you don&#39;t have some kind of context-aware escaping."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1550851861, "post_id": 54830909, "comment_id": 96436878, "body": "@melpomene, I definitely won&#39;t argue against the statement that using <code>String::ShellQuote</code> is the better solution."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1550851994, "post_id": 54830909, "comment_id": 96436943, "body": "Heck, if it weren&#39;t for <code>\\0</code>, <code>\\n</code>, and empty strings, you could just half-ass it and use <a href=\"https://perldoc.pl/functions/quotemeta\" rel=\"nofollow noreferrer\"><code>quotemeta</code></a>. Alas ..."}, {"owner": {"reputation": 389, "user_id": 4475588, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-_r9duSvNEDo/AAAAAAAAAAI/AAAAAAAAOt4/Z2sVR0PktLo/photo.jpg?sz=128", "display_name": "Igor", "link": "https://stackoverflow.com/users/4475588/igor"}, "edited": false, "score": 0, "creation_date": 1550852212, "post_id": 54830909, "comment_id": 96437087, "body": "That part of code doesn&#39;t work with user input at all"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1550852268, "post_id": 54830909, "comment_id": 96437125, "body": "Igor, ...with my security hat on, though -- one needs to look back at what input it <i>does</i> work with, where that comes from, and whether a user with less privileges than what the script itself has could influence it. I&#39;ve seen a major data loss incident caused by nothing more than a buffer overflow (in a C library used by a Python script, so the immediate offender was a program written in a &quot;safe&quot; language) dumping garbage into a filename -- values don&#39;t need to be intentionally malicious to cause trouble."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 389, "user_id": 4475588, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-_r9duSvNEDo/AAAAAAAAAAI/AAAAAAAAOt4/Z2sVR0PktLo/photo.jpg?sz=128", "display_name": "Igor", "link": "https://stackoverflow.com/users/4475588/igor"}, "edited": false, "score": 0, "creation_date": 1550852481, "post_id": 54830909, "comment_id": 96437231, "body": "@Igor, ...and that&#39;s before considering issues of code reuse. Just as the answers on this question will be read by other people finding them on Google, someone else (or a future version of you) could well be copying/pasting the practices into somewhere they <i>do</i> handle user input. Better to code defensively even when you think it doesn&#39;t matter, so you don&#39;t discover a vulnerability after it unexpectedly does."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 389, "user_id": 4475588, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-_r9duSvNEDo/AAAAAAAAAAI/AAAAAAAAOt4/Z2sVR0PktLo/photo.jpg?sz=128", "display_name": "Igor", "link": "https://stackoverflow.com/users/4475588/igor"}, "edited": false, "score": 0, "creation_date": 1550854745, "post_id": 54830909, "comment_id": 96438465, "body": "@Igor, ...moreover, once you get accustomed to working with code following defensive idioms, those idioms stop looking strange/weird/verbose and become second nature. (And beyond that, you get a better idea of how your tools actually <i>work</i> under the hood when paying attention to the corner cases; ssh has a bunch of unexpected, unwanted behaviors that only make sense once you realize that it&#39;s concatenating all the <code>command...</code> arguments together into a single string passed to the remote shell as a single argument -- <i>after</i> the calling shell discarded any syntactical quotes)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1550858225, "post_id": 54830909, "comment_id": 96440177, "body": "Yeah, I used <code>--</code> pretty obsessively in scripts. The path is probably an absolute path, but hey, the <code>--</code> is free. I did resist passing one to <code>ssh</code>, though."}], "tags": [], "owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "is_accepted": false, "score": 5, "last_activity_date": 1550858170, "last_edit_date": 1550858170, "creation_date": 1550851367, "answer_id": 54830909, "question_id": 54829662, "link": "https://stackoverflow.com/questions/54829662/using-perl-system-query-with-spaces-in-path-variable/54830909#54830909", "title": "Using perl system() query with spaces in path variable", "body": "<p>Running a local shell and using it to escape your command to be safe for the remote shell would look like this:</p>\n\n<pre><code>system('env', \"ssh_addr=$ssh_addr\", \"remote_dir=$remote_dir\", 'bash', '-c',\n       'printf -v remote_cmd \"%q \" ls -- \"$remote_dir\"; ssh \"$ssh_addr\" \"$remote_cmd\"');\n</code></pre>\n\n<p>Unlike just using <code>\"'$remote_cmd'\"</code>, the above works with all possible values, including intentionally malicious ones, so long as your remote shell is also bash.</p>\n\n<p><sub>Thanks to <a href=\"https://stackoverflow.com/a/54831828/14122\">@ikegami's answer</a> for demonstrating the use of the end-of-options sigil <code>--</code> to ensure that even a <code>remote_dir</code> value that starts with dashes is parsed as a positional argument by <code>ls</code></sub></p>\n"}, {"comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1550857456, "post_id": 54831828, "comment_id": 96439780, "body": "I&#39;d argue that it&#39;s better to avoid the need to shell-quote the local command (when <code>system</code> can be used in its multi-argument form to not invoke a local shell at all), but this is absolutely the Right Way to quote the remote command, and preferable to my own answer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1550857633, "post_id": 54831828, "comment_id": 96439860, "body": "@Charles Duffy, duh, of course. I was going to include that but forgot. Fixed."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1550858011, "post_id": 54831828, "comment_id": 96440074, "body": "I&#39;d give you a second +1 if I could. :)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1550857614, "last_edit_date": 1550857614, "creation_date": 1550854703, "answer_id": 54831828, "question_id": 54829662, "link": "https://stackoverflow.com/questions/54829662/using-perl-system-query-with-spaces-in-path-variable/54831828#54831828", "title": "Using perl system() query with spaces in path variable", "body": "<p><a href=\"http://search.cpan.org/perldoc?String::ShellQuote\" rel=\"nofollow noreferrer\">String::ShellQuote</a>'s <code>shell_quote</code> is useful in building shell commands.</p>\n\n<pre><code>my $remote_cmd = shell_quote(\"ls\", \"--\", $remote_dir);\nmy $local_cmd = shell_quote(\"ssh\", \"-i\", \"id_pub\", $ssh_addr, $remote_cmd);\nsystem($local_cmd);\n</code></pre>\n\n<p>Of course, you can avoid the shell on the local side as follows:</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\n\nmy $remote_cmd = shell_quote(\"ls\", \"--\", $remote_dir);\nsystem(\"ssh\", \"-i\", \"id_pub\", $ssh_addr, $remote_cmd);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": false, "score": 1, "last_activity_date": 1550909525, "creation_date": 1550909525, "answer_id": 54839559, "question_id": 54829662, "link": "https://stackoverflow.com/questions/54829662/using-perl-system-query-with-spaces-in-path-variable/54839559#54839559", "title": "Using perl system() query with spaces in path variable", "body": "<p>Let <a href=\"https://metacpan.org/pod/Net::OpenSSH\" rel=\"nofollow noreferrer\">Net::OpenSSH</a> take care of everything for you:</p>\n\n<pre><code>my $ssh = Net::OpenSSH-&gt;new($ssh_addr);\n$ssh-&gt;error and die \"unable to connect to remote host: \" . $ssh-&gt;error;\nif ($ssh-&gt;test('test', '-d', $remote_dir)) {\n   # do something here!\n}\n</code></pre>\n\n<p>Oh, it seems you are on a Windows machine! You can use <a href=\"https://metacpan.org/pod/Net::SSH::Any\" rel=\"nofollow noreferrer\">Net::SSH::Any</a> there in a similar fashion.</p>\n"}], "owner": {"reputation": 389, "user_id": 4475588, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-_r9duSvNEDo/AAAAAAAAAAI/AAAAAAAAOt4/Z2sVR0PktLo/photo.jpg?sz=128", "display_name": "Igor", "link": "https://stackoverflow.com/users/4475588/igor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 670, "favorite_count": 0, "accepted_answer_id": 54830669, "answer_count": 4, "score": 6, "last_activity_date": 1550909525, "creation_date": 1550847048, "question_id": 54829662, "link": "https://stackoverflow.com/questions/54829662/using-perl-system-query-with-spaces-in-path-variable", "title": "Using perl system() query with spaces in path variable", "body": "<p>I seem to be stuck here. I want to send a system request from my script to another server via SSH, checking if a folder there exists. A folder path is passed from another script, stored in a variable and might have a space character in it. Since I couldn't replace the space with another character,  to avoid a \"not found\" on folder like \"foo bar\", I need to pass something like\n <code>ls '/folderpath/foo bar'</code> to other server's shell. \nSample code looks like this: </p>\n\n<pre><code>$cmd = 'ssh -i id_pub $ssh_addr ls $remote_dir'; \nif (system($cmd) == 0) {\ndo something\n}\n</code></pre>\n\n<p>I've exhausted all possible options - tired to escape the possible space with \\ before passing it to the command, tried to pass it with ' ', \" \", inside and adding both before passing it into $cmd. \nBut I always end up with something like this: </p>\n\n<pre><code>ls \\folderpath\\foo\\\\ bar or ls \\' \\folderpath\\foo bar\\'\n</code></pre>\n\n<p>but not <code>ls '\\folderpath\\foo bar'</code>  </p>\n\n<p>I'm not that good with Perl, possible someone more experienced can recommend a workaround? </p>\n"}, {"tags": ["perl", "visual-studio-2017"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10373893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05a4fabc5b358ef026c784d08555658b?s=128&d=identicon&r=PG&f=1", "display_name": "evan", "link": "https://stackoverflow.com/users/10373893/evan"}, "edited": false, "score": 0, "creation_date": 1550848848, "post_id": 54829971, "comment_id": 96435207, "body": "Thank you for all your assistance\uff01"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 11, "user_id": 10373893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05a4fabc5b358ef026c784d08555658b?s=128&d=identicon&r=PG&f=1", "display_name": "evan", "link": "https://stackoverflow.com/users/10373893/evan"}, "edited": false, "score": 0, "creation_date": 1550849127, "post_id": 54829971, "comment_id": 96435359, "body": "Please remember to accept the answer if it answers your question."}, {"owner": {"reputation": 11, "user_id": 10373893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05a4fabc5b358ef026c784d08555658b?s=128&d=identicon&r=PG&f=1", "display_name": "evan", "link": "https://stackoverflow.com/users/10373893/evan"}, "edited": false, "score": 0, "creation_date": 1550899550, "post_id": 54829971, "comment_id": 96451213, "body": "\u6709\u4e00\u4e2a\u8868\u793a\u63a5\u53d7\u7b54\u6848\u7684\u6309\u94ae\u9700\u8981\u6211\u6309\u4e00\u4e0b\uff1f\u6211\u6ca1\u6709\u627e\u5230\u54ea\u91cc\u786e\u8ba4\u8fd9\u4e2a\u7b54\u6848\u3002"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1550848151, "creation_date": 1550848151, "answer_id": 54829971, "question_id": 54829328, "link": "https://stackoverflow.com/questions/54829328/use-vs2017-build-perl/54829971#54829971", "title": "use vs2017 build perl", "body": "<p>This seems to be a bug in the Windows SDK, see</p>\n\n<ul>\n<li>Perl <a href=\"https://rt.perl.org/Public/Bug/Display.html?id=133666\" rel=\"nofollow noreferrer\">ticket #133666</a></li>\n<li>VS forum <a href=\"https://developercommunity.visualstudio.com/content/problem/289637/setargvobj-is-broken-in-the-latest-windows-sdk.html\" rel=\"nofollow noreferrer\">setargv.obj is broken in the latest windows sdk</a></li>\n</ul>\n\n<p>The Perl bug reporter confirmed that the bug went away after updating the SDK. Another alternative seems to be to switch from a <code>CFG=DebugFull</code> to a <code>CFG=Debug</code> build.</p>\n"}], "owner": {"reputation": 11, "user_id": 10373893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05a4fabc5b358ef026c784d08555658b?s=128&d=identicon&r=PG&f=1", "display_name": "evan", "link": "https://stackoverflow.com/users/10373893/evan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1550848151, "creation_date": 1550845915, "last_edit_date": 1550847800, "question_id": 54829328, "link": "https://stackoverflow.com/questions/54829328/use-vs2017-build-perl", "title": "use vs2017 build perl", "body": "<p>When I build perl use microsoft vc2017, I got an error :</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Running pm_to_blib for cpan/Module-Load-Conditional directly\nRunning pm_to_blib for cpan/Module-Loaded directly\nRunning pm_to_blib for cpan/NEXT directly\nRunning pm_to_blib for dist/Net-Ping directly\nRunning pm_to_blib for cpan/Params-Check directly\nRunning pm_to_blib for cpan/Perl-OSType directly\nRunning pm_to_blib for cpan/PerlIO-via-QuotedPrint directly\nCan't copy p to scripts/p: No such file or directory at Makefile.PL line 26.\nUnsuccessful Makefile.PL(cpan/Pod-Checker): code=512 at ..\\make_ext.pl line \n518.\nNMAKE : fatal error U1077: \u201c..\\miniperl.exe\u201d: \u8fd4\u56de\u4ee3\u7801 (return code)\u201c0x2\u201d\nStop.\n</code></pre>\n\n<p>What can I do?</p>\n"}, {"tags": ["mongodb", "perl"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1047, "user_id": 1191999, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8a5575da1a4d6205f568754e55294cfb?s=128&d=identicon&r=PG", "display_name": "Ram", "link": "https://stackoverflow.com/users/1191999/ram"}, "edited": false, "score": 0, "creation_date": 1551174216, "post_id": 54829726, "comment_id": 96534150, "body": "I have no idea @Ram. I have never used MongoDB."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1550847287, "creation_date": 1550847287, "answer_id": 54829726, "question_id": 54829240, "link": "https://stackoverflow.com/questions/54829240/how-can-i-get-perl-mongodb-admin-module/54829726#54829726", "title": "How can I get perl MongoDB Admin module", "body": "<p><a href=\"https://metacpan.org/pod/MongoDB::Admin\" rel=\"nofollow noreferrer\">MongoDB::Admin</a> seems to be out of date. If you look at the <a href=\"https://metacpan.org/changes/distribution/MongoDB#L764\" rel=\"nofollow noreferrer\">MongoDB driver changelog</a> you can see that at version 1.0 the MongoDB::Connection was dropped because it was deprecated.</p>\n\n<blockquote>\n  <ul>\n  <li>The long-deprecated MongoDB::Connection class has been removed.</li>\n  </ul>\n</blockquote>\n\n<p>The latest version of MongoDB::Admin is 0.03 from July 2011. At that point, MongoDB was at version 0.43, but is now on 2.0.3. A lot has happened since then.</p>\n\n<p>You might want to look for a different graphical user interface.</p>\n"}], "owner": {"reputation": 1047, "user_id": 1191999, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8a5575da1a4d6205f568754e55294cfb?s=128&d=identicon&r=PG", "display_name": "Ram", "link": "https://stackoverflow.com/users/1191999/ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1550847287, "creation_date": 1550845647, "question_id": 54829240, "link": "https://stackoverflow.com/questions/54829240/how-can-i-get-perl-mongodb-admin-module", "title": "How can I get perl MongoDB Admin module", "body": "<p>I am trying the Mongodb admin module from CPAN \n<a href=\"https://metacpan.org/pod/MongoDB::Admin\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/MongoDB::Admin</a></p>\n\n<p>The exact sample code does not work , because the module does not have a MongoDB::Connection package </p>\n\n<p>This is the script I am trying </p>\n\n<pre><code>use MongoDB;\nuse MongoDB::Admin;\n\nmy $connection = MongoDB::Connection-&gt;new(host =&gt; 'localhost', port =&gt; 27017);\nmy $admin = MongoDB::Admin-&gt;new('connection' =&gt; $connection);\n\nmy $ops = $admin-&gt;current_op();\n</code></pre>\n"}, {"tags": ["mysql", "git", "perl", "ubuntu", "redmine"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 2, "creation_date": 1550775228, "post_id": 54813743, "comment_id": 96405026, "body": "You&#39;re installing the right package, but all that <code>&#47;opt&#47;bitnami</code> stuff suggests you&#39;re not using the system Perl that the package is for, which is why the module isn&#39;t being found."}, {"owner": {"reputation": 331, "user_id": 2626376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43e1d9425f63b2abadf704086d30f65?s=128&d=identicon&r=PG", "display_name": "Kishan Parekh", "link": "https://stackoverflow.com/users/2626376/kishan-parekh"}, "edited": false, "score": 0, "creation_date": 1550807046, "post_id": 54813743, "comment_id": 96414738, "body": "I had faced similar problem on stock Bitnami 3.4.6-1 on Ubuntu 16.04 on Azure. System Perl is 5.22 while Bitnami&#39;s Perl version is 5.16 so could not use &quot;libdbd-mysql-perl&quot; package. I believe DBD MySQL modules were not packaged in above Bitnami release. Due to lack of time, I copied relevant MySQL files from Bitnami 3.3.x (having Bitnami Perl 5.16) to /opt/bitnami/perl/lib/site_perl/5.16.3/x86_64-linux-thread-m&zwnj;&#8203;ulti/ and restarted Bitnami services, and it worked. You may also check if tuning of /opt/bitnami/apache2/bin/envvars to use system Perl and DBD::MySQL solve your problem."}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 3395759, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/17df804a7b024e4244f12977ccb15b76?s=128&d=identicon&r=PG&f=1", "display_name": "vishal-mote", "link": "https://stackoverflow.com/users/3395759/vishal-mote"}, "edited": false, "score": 0, "creation_date": 1550840259, "post_id": 54822767, "comment_id": 96429977, "body": "I am getting following output for the first command :- -bash: /opt/bitnami/perl/bin/perldoc: /bitnami/ruby23stack-linux-x64/output/perl/bin/perl: bad interpreter: No such file or directory"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 157, "user_id": 3395759, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/17df804a7b024e4244f12977ccb15b76?s=128&d=identicon&r=PG&f=1", "display_name": "vishal-mote", "link": "https://stackoverflow.com/users/3395759/vishal-mote"}, "edited": false, "score": 0, "creation_date": 1550840429, "post_id": 54822767, "comment_id": 96430092, "body": "@vishal-mote: Putting information like that in a comment makes it almost unreadable. There are plenty of people here who would like to help you, but you need to make it easier for them. Please edit your question to add this useful information."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 157, "user_id": 3395759, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/17df804a7b024e4244f12977ccb15b76?s=128&d=identicon&r=PG&f=1", "display_name": "vishal-mote", "link": "https://stackoverflow.com/users/3395759/vishal-mote"}, "edited": false, "score": 0, "creation_date": 1550840527, "post_id": 54822767, "comment_id": 96430141, "body": "@vishal-mote: It looks to me like you&#39;re logged in to the system using a special <code>bitnami</code> user which has a non-standard path set up (it&#39;s running the Bitnami version of Perl, not the system Perl). What happens if you&#39;re logged in as a standard user?"}, {"owner": {"reputation": 157, "user_id": 3395759, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/17df804a7b024e4244f12977ccb15b76?s=128&d=identicon&r=PG&f=1", "display_name": "vishal-mote", "link": "https://stackoverflow.com/users/3395759/vishal-mote"}, "edited": false, "score": 0, "creation_date": 1550840870, "post_id": 54822767, "comment_id": 96430347, "body": "I have created this server instance using recommended image copy of aws market place. bitnami is standard user for this server, using root user I am getting same error as bad interpreter"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 157, "user_id": 3395759, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/17df804a7b024e4244f12977ccb15b76?s=128&d=identicon&r=PG&f=1", "display_name": "vishal-mote", "link": "https://stackoverflow.com/users/3395759/vishal-mote"}, "edited": false, "score": 0, "creation_date": 1550843162, "post_id": 54822767, "comment_id": 96431562, "body": "@vishal-mote: I think I can only repeat my recommendation to take this to Bitnami&#39;s support channels."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1550823500, "creation_date": 1550823500, "answer_id": 54822767, "question_id": 54813743, "link": "https://stackoverflow.com/questions/54813743/install-drivermysql-failed-cant-locate-dbd-mysql-pm/54822767#54822767", "title": "install_driver(mysql) failed: Can&#39;t locate DBD/mysql.pm", "body": "<p>In order for a Perl installation to talk to a MySQL database, it needs to use the DBD::mysql module. This module isn't part of the standard Perl installation and needs to be installed separately. When you install it using the CPAN command line tool (<code>cpan DBD::mysql</code>) or using <code>apt-get</code> (<code>apt-get install libdbd-mysql-perl</code>) it is installed in the library directories used by the system Perl (the one that is installed as part of your operating system). You can confirm that this has been installed correctly by running the following commands:</p>\n\n<pre><code>$ perldoc DBD::mysql\n$ perl -MDBD::mysql -le'print $DBD::mysql::VERSION'\n</code></pre>\n\n<p>If DBD::mysql is installed correctly, the first command will show you the documentation for the module and the second will give the version number.</p>\n\n<p>But, as I said, this is installed for use by the system Perl installation. It appears from the error message you're seeing that your Bitnami installation isn't using the system Perl. It is, instead, using a separate Perl installation which is installed in <code>/opt/bitnami</code>.</p>\n\n<p>So you need to get DBD::mysql installed in the module library for this Perl installation. It's possible to ask <code>cpan</code> to install a module in a different directory, but I'd be wary about just installing stuff into Bitnami's directory tree. I strongly suspect that an installation step has been skipped far earlier in the process. If Bitnami needs to use MySQL from a Perl program and installs its own Perl distribution complete with its own module library, then it should either include DBD::mysql in its installation or provide clear instructions on how to install it.</p>\n\n<p>My suggestion would be to carefully go over the installation instructions for Bitnami and see what they have to say about installing MySQL support. If that doesn't work, you should take this question to Bitnami's support channels.</p>\n"}], "owner": {"reputation": 157, "user_id": 3395759, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/17df804a7b024e4244f12977ccb15b76?s=128&d=identicon&r=PG&f=1", "display_name": "vishal-mote", "link": "https://stackoverflow.com/users/3395759/vishal-mote"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1957, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550823500, "creation_date": 1550773152, "last_edit_date": 1550773644, "question_id": 54813743, "link": "https://stackoverflow.com/questions/54813743/install-drivermysql-failed-cant-locate-dbd-mysql-pm", "title": "install_driver(mysql) failed: Can&#39;t locate DBD/mysql.pm", "body": "<p>Question is not repeated, first read the problem which I am facing, then mark it if it is repeated, will be helpful if repeatation of my question helps me in solving my problem, As I have been through all the links and solutions mentioned on other similar questions and problems but no luck.</p>\n\n<p>I am trying to setup redmine git on my ec2-aws-instance with help of below link</p>\n\n<p><a href=\"https://docs.bitnami.com/installer/how-to/configure-advanced-integration-git-redmine/\" rel=\"nofollow noreferrer\">https://docs.bitnami.com/installer/how-to/configure-advanced-integration-git-redmine/</a></p>\n\n<p>I am able to properly connect redmine projects with my git repositories but once I reach third step on above link I am facing issue as below</p>\n\n<p>step :- 3 <strong>Configure Git Access Control</strong></p>\n\n<p>Below is the error when try to secure my git repository with redmine user credentials.</p>\n\n<blockquote>\n  <p>[Thu Feb 21 17:46:26.918619 2019] [perl:error] [pid 26820:tid\n  139790464616192] [client 127.0.0.1:50156] install_driver(mysql)\n  failed: Can't locate DBD/mysql.pm in @INC (@INC contains:\n  /opt/bitnami/git/lib/site_perl/5.16.3\n  /opt/bitnami/perl/lib/5.16.3/x86_64-linux-thread-multi\n  /opt/bitnami/perl/lib/5.16.3\n  /opt/bitnami/perl/lib/site_perl/5.16.3/x86_64-linux-thread-multi\n  /opt/bitnami/perl/lib/site_perl/5.16.3\n  /opt/bitnami/perl/lib/5.16.3/x86_64-linux-thread-multi\n  /opt/bitnami/perl/lib/site_perl/5.16.3/x86_64-linux-thread-multi\n  /bitnami/ruby23stack-linux-x64/output/perl/lib/site_perl/5.16.3/x86_64-linux-thread-multi\n  /bitnami/ruby23stack-linux-x64/output/perl/lib/site_perl/5.16.3\n  /bitnami/ruby23stack-linux-x64/output/perl/lib/5.16.3/x86_64-linux-thread-multi\n  /bitnami/ruby23stack-linux-x64/output/perl/lib/5.16.3 .\n  /opt/bitnami/apache2) at (eval 6) line 3.\\nPerhaps the DBD::mysql perl\n  module hasn't been fully installed,\\nor perhaps the capitalisation of\n  'mysql' isn't right.\\nAvailable drivers: DBM, ExampleP, File, Gofer,\n  Proxy, Sponge.\\n at\n  /opt/bitnami/perl/lib/site_perl/5.16.3/x86_64-linux-thread-multi/Apache/Redmine.pm\n  line 557.\\n App 26921 stdout:</p>\n</blockquote>\n\n<p>Without third step my repositories are public, any who knows the repo url can clone my repos or perform other operations on my git repos. So third step is for security purpose as per above document link and which is important for me.</p>\n\n<p>Once I add below line into apache config as per documentation mentioned I am getting above error in my bitnami log when I try to clone a repository</p>\n\n<pre><code> &lt;Location \"/\"&gt;\n       AuthType Basic\n       AuthName \"Redmine git repositories\"\n       Require valid-user\n\n       PerlAccessHandler Apache::Authn::Redmine::access_handler\n       PerlAuthenHandler Apache::Authn::Redmine::authen_handler\n       RedmineDSN \"DBI:mysql:database=bitnami_redmine;host=localhost;mysql_socket=installdir/mysql/tmp/mysql.sock\"\n       RedmineDbUser \"REDMINE_DB_USERNAME\"\n       RedmineDbPass \"REDMINE_DB_PASSWORD\"\n       RedmineGitSmartHttp yes\n     &lt;/Location&gt;\n</code></pre>\n\n<p>When I run a following command to clone a repo, without third step on documentation, I am properly able to clone the repo, but with third step I am failing and getting above error in log and below error on command line.</p>\n\n<pre><code>bitnami@127.0.0.1:/tmp$ git clone http://git.domain.com/test2\nCloning into 'test2'...\nfatal: unable to access 'http://git.domain.com/test2/': The requested URL returned error: 500\n</code></pre>\n\n<p>I have even tried installing below package but no luck</p>\n\n<pre><code>sudo apt-get install libdbd-mysql-perl\n</code></pre>\n\n<p>my os is </p>\n\n<pre><code>Ubuntu 16.04.5 LTS \\n \\l\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11096885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be7d9f428193f741ad9c0ad8372e3db8?s=128&d=identicon&r=PG&f=1", "display_name": "tanker", "link": "https://stackoverflow.com/users/11096885/tanker"}, "edited": false, "score": 0, "creation_date": 1550777910, "post_id": 54811531, "comment_id": 96406301, "body": "Thanks blhsing.  Your method fit the flow of my script. I was writing my script so that all the massaging of the data was done in the scalier before the final conversion and output. As I mentioned I&#39;m pretty rudimentary in my Perl skills and your solution I could easily understand."}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1550778043, "post_id": 54811531, "comment_id": 96406366, "body": "@ikegami Thanks for helping to make the answer friendlier and more complete."}, {"owner": {"reputation": 13, "user_id": 11096885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be7d9f428193f741ad9c0ad8372e3db8?s=128&d=identicon&r=PG&f=1", "display_name": "tanker", "link": "https://stackoverflow.com/users/11096885/tanker"}, "edited": false, "score": 1, "creation_date": 1550778273, "post_id": 54811531, "comment_id": 96406479, "body": "Damn I didn&#39;t know enter would post the reply, continuing.  To be honest I couldn&#39;t get it to work at first, it took me a bit to realize I had to add the &quot;m&quot; option to the line for it to work.  As in:  <code>$data00 =~ s&#47;^D(\\d{2})\\&#47;(\\d{2})\\&#47;(\\d{2})\\n&#47;&quot;D$1\\&#47;$2\\&#47;&quot;.($3&lt;50?20:19).&quot;$&zwnj;&#8203;3\\n&quot;&#47;egm;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 13, "user_id": 11096885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be7d9f428193f741ad9c0ad8372e3db8?s=128&d=identicon&r=PG&f=1", "display_name": "tanker", "link": "https://stackoverflow.com/users/11096885/tanker"}, "edited": false, "score": 0, "creation_date": 1550824400, "post_id": 54811531, "comment_id": 96420742, "body": "@tanker, <code>&#47;m</code> changes the definition of <code>^</code> (and <code>$</code>). Normally, it only matches the start of the string. With <code>&#47;m</code>, it also matches after a line feed."}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": true, "score": 3, "last_activity_date": 1550777207, "last_edit_date": 1550777207, "creation_date": 1550765544, "answer_id": 54811531, "question_id": 54811261, "link": "https://stackoverflow.com/questions/54811261/regular-expression-substitution-with-conditional-replacement-in-perl/54811531#54811531", "title": "Regular Expression Substitution with Conditional Replacement in Perl", "body": "<p>When using <code>/e</code>, the replacement expression must be a valid Perl expression (i.e. what you could put following <code>$x =</code>).</p>\n\n<p>You can use the conditional operator (<code>?:</code>) to evaluate an expression differently based on a condition:</p>\n\n<pre><code>s/^D(\\d{2})\\/(\\d{2})\\/(\\d{2})\\n/ \"D$1\\/$2\\/\".( $3 &lt; 50 ? 20 : 19 ).\"$3\\n\" /eg\n</code></pre>\n\n<p>Note that replacing the delimiter can make things far more readable when many <code>/</code> are involved.</p>\n\n<pre><code>s{^D(\\d{2})/(\\d{2})/(\\d{2})\\n}{ \"D$1/$2/\".( $3 &lt; 50 ? 20 : 19 ).\"$3\\n\" }eg\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1550813140, "last_edit_date": 1550813140, "creation_date": 1550769069, "answer_id": 54812649, "question_id": 54811261, "link": "https://stackoverflow.com/questions/54811261/regular-expression-substitution-with-conditional-replacement-in-perl/54812649#54812649", "title": "Regular Expression Substitution with Conditional Replacement in Perl", "body": "<p>I'd use <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow noreferrer\">Time::Piece</a> to do this. Use the <code>strptime()</code> class method to parse the date into an object, and then <code>strftime()</code> to format it.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\nuse Time::Piece;\n\nwhile (&lt;DATA&gt;) {\n  chomp;\n\n  my $date = Time::Piece-&gt;strptime($_, 'D%m/%d/%y');\n\n  say $date-&gt;strftime('D%m/%d/%Y');\n}\n\n__DATA__\nD04/07/97\nD04/14/98\nD10/06/99\nD10/13/05\nD03/04/10\nD12/09/10\nD01/20/11\nD12/22/11\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>D04/07/1997\nD04/14/1998\nD10/06/1999\nD10/13/2005\nD03/04/2010\nD12/09/2010\nD01/20/2011\nD12/22/2011\n</code></pre>\n\n<p>The regex solution can be simplified by a) choosing a different delimiter and b) using the ternary operator. If you use <code>/e</code> then the replacement text needs to be syntactically valid Perl.</p>\n\n<pre><code>while (&lt;DATA&gt;) {\n  chomp;\n\n  s|D(\\d{2}/\\d{2}/)(\\d{2})|\"D$1\" . ($2 &lt; 50 ? '20' : '19') . $2|e;\n\n  say;\n}\n</code></pre>\n\n<p><strong>Update:</strong> There's one (possibly important) difference between the two solutions - the cut-off between the 20th and 21st centuries when converting from two-digit years to four-digit ones. The regex solution uses 50 (as mentioned in the original question). The Time::Piece solution uses 69 - and that limit is hard-coded, so there's no way of changing it. For the data in the original question, that makes no difference. But it might matter if you have data with a year between 1950 and 1969.</p>\n"}], "owner": {"reputation": 13, "user_id": 11096885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be7d9f428193f741ad9c0ad8372e3db8?s=128&d=identicon&r=PG&f=1", "display_name": "tanker", "link": "https://stackoverflow.com/users/11096885/tanker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 54811531, "answer_count": 2, "score": 1, "last_activity_date": 1550813140, "creation_date": 1550764732, "question_id": 54811261, "link": "https://stackoverflow.com/questions/54811261/regular-expression-substitution-with-conditional-replacement-in-perl", "title": "Regular Expression Substitution with Conditional Replacement in Perl", "body": "<p>My Perl skills are pretty rudimentary and I'm trying to convert dates in a data file loaded in a scalar variable to a four digit year using a regular expression substitution (among other things).</p>\n\n<p>I've got the following to work to add a 20 to all years.</p>\n\n<pre><code>$data00 =~ s/^D(\\d{2})\\/(\\d{2})\\/(\\d{2})\\n/D$1\\/$2\\/20$3\\n/gm;\n</code></pre>\n\n<p>However, the dates include those before 2000.</p>\n\n<p>While searching for a solution I ran across the /e option which said that it evaluates the replacement as Perl code.  However I don't find it listed in all the documentation I've run across and I'm not sure what the syntax would be.</p>\n\n<p>Is there a way to evaluate the $3 match and output 20 if $3 is less than 50 to make 2000 and 19 if not, to make 1997?  I selected 50 because it seemed to be a safe middle ground.</p>\n\n<p>For illustration purposes though I know it's incorrect:</p>\n\n<pre><code>$data00 =~ s/^D(\\d{2})\\/(\\d{2})\\/(\\d{2})\\n/D$1\\/$2\\/(if($3&lt;50)20 else 19)$3\\n/eg;\n</code></pre>\n\n<p>Is the /e even appropriate in this case?</p>\n\n<p>Line examples extracted from huge text file.</p>\n\n<pre><code>D04/07/97\nD04/14/98\nD10/06/99\nD10/13/05\nD03/04/10\nD12/09/10\nD01/20/11\nD12/22/11\n</code></pre>\n"}, {"tags": ["mysql", "perl", "dbi"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1550754603, "post_id": 54806710, "comment_id": 96392133, "body": "Actually the reference versions are faster than the array ones."}, {"owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1550774919, "post_id": 54806710, "comment_id": 96404894, "body": "So, nothing new on perl DBI except the old methods. Hmm."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1550823873, "post_id": 54806710, "comment_id": 96420491, "body": "You are micro-optimizing. This is not where your program is wasting time. Look elsewhere. (The latter will be ever so slightly slower than the first because, while they both do the same thing, <code>selectrow_array</code> is implemented in C. )"}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1550774823, "post_id": 54808143, "comment_id": 96404837, "body": "Also, benchmark. Posts about performance from decades ago will have little bearing on the current state of things."}, {"owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 0, "creation_date": 1550774854, "post_id": 54808143, "comment_id": 96404852, "body": "Documentation is old and unchanged for years. I thought there were some new methods available, including scalar. Thanks for sharing your opinion."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 1, "creation_date": 1550775101, "post_id": 54808143, "comment_id": 96404966, "body": "@Claude there is no need to change a well-working system. But Grinnz is right. You will have to look at your specific use-case on the hardware you are using. I&#39;ll repeat my last sentence though. You only need to benchmark if it&#39;s actually slow. There is no need to make it faster if it&#39;s not too slow. Making it faster for the sake of making it faster is wasting your time."}, {"owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 0, "creation_date": 1550775438, "post_id": 54808143, "comment_id": 96405121, "body": "Yes, you&#39;re right. But it is a little uncommon to fetch an array for just a simple string. On dbi documentation they advice you to be careful in scalar context, because unexpected results may occur."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 1, "creation_date": 1550775686, "post_id": 54808143, "comment_id": 96405251, "body": "@Claude. It&#39;s not uncommon. It says array, but it returns a list (because you can&#39;t return arrays in Perl). That means it makes copies of the values, which you can assign to an array. An array is in list context. It&#39;s a common idiom to assign a single value list in list context like this: <code>my ( $self ) = @_;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1550823721, "post_id": 54808143, "comment_id": 96420410, "body": "<code>selectrow_arrayref</code> is the same C function as <code>selectrow_array</code>, and the amount of work done by both is virtually identical. There should be no noticeable difference between the two (especially here where the row only has one field). /// Similarly, <code>fetchrow_arrayref</code> and <code>fetchrow_arrayref</code> are virtually identical C functions. There should be no noticeable difference between the two (especially here where the row only has one field)."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1550755298, "creation_date": 1550755298, "answer_id": 54808143, "question_id": 54806710, "link": "https://stackoverflow.com/questions/54806710/perl-dbi-fastest-way-to-get-a-single-scalar-value/54808143#54808143", "title": "perl DBI, fastest way to get a single scalar value", "body": "<p>The fastest way is to use <a href=\"https://metacpan.org/pod/DBI#fetchrow_arrayref\" rel=\"nofollow noreferrer\"><code>fetchrow_arrayref</code></a> or <a href=\"https://metacpan.org/pod/DBI#selectrow_arrayref\" rel=\"nofollow noreferrer\"><code>selectrow_arrayref</code></a>, depending on how many executes you have. This only really makes a difference if executed in a loop and you have thousands (or rather hundreds of thousands) of rows.</p>\n\n<p>When using <code>fetchrow_array</code>, it will make a copy every time, which slows you down. Also keep in mind that the behaviour for scalar context is <a href=\"https://metacpan.org/pod/DBI#fetchrow_arrayref\" rel=\"nofollow noreferrer\">only partly defined</a>.</p>\n\n<blockquote>\n  <p>If called in a scalar context for a statement handle that has more than one column, it is undefined whether the driver will return the value of the first column or the last. So don't do that.</p>\n</blockquote>\n\n<p>You can also do <a href=\"https://metacpan.org/pod/DBI#bind_col\" rel=\"nofollow noreferrer\"><code>bind_col</code></a>, which works with references.</p>\n\n<p>There used to be a good presentation on DBI speeds from about 10 or more years ago that I can't find right now. Also take a look at <a href=\"https://www.perlmonks.org/?node_id=273952#relative\" rel=\"nofollow noreferrer\">this very old Perlmonks post</a>, that explains quite a bit about performance.</p>\n\n<p>Keep in mind that you should only do optimisation when you really know you need it. Most of the time you won't.</p>\n"}, {"tags": [], "owner": {"reputation": 119, "user_id": 963183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c867babb1b402c48e4b9a84f0b82dc?s=128&d=identicon&r=PG", "display_name": "Bruce Van Allen", "link": "https://stackoverflow.com/users/963183/bruce-van-allen"}, "is_accepted": false, "score": 1, "last_activity_date": 1551152134, "creation_date": 1551152134, "answer_id": 54878089, "question_id": 54806710, "link": "https://stackoverflow.com/questions/54806710/perl-dbi-fastest-way-to-get-a-single-scalar-value/54878089#54878089", "title": "perl DBI, fastest way to get a single scalar value", "body": "<p>If \"modern\" means \"I only heard of it recently\", I'm feeling all modern with DBI's bind_col and bind_columns. Cribbing from a post by DBI hero Tim Bunce...</p>\n\n<p>For your case:</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare(\"SELECT COUNT(name) AS RESCOUNT FROM users\");\nmy $count = 0;\n$sth-&gt;bind_col(1,\\$count);  # bind to a reference to the variable\n$sth-&gt;execute() or die \"$DBI::errstr\";\n$sth-&gt;fetch;\nprint $count;\n</code></pre>\n\n<p>In a loop for a SELECT statement returning multiple records:</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare(qq{SELECT name FROM users WHERE zip_code == '20500'});\nmy $name = '';\n$sth-&gt;bind_col(1,\\$name);  # bind to a reference to the variable\n$sth-&gt;execute() or die \"$DBI::errstr\";\nwhile ($sth-&gt;fetch) {\n    print $name, \"\\n\";\n}\n</code></pre>\n\n<p>And with bind_columns this works:</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare(qq{SELECT name,phone,address FROM users WHERE zip_code == '20500'});\nmy @fields = qw/name phone address/; \n# With a 'SELECT All * ...', get all columns with @{$sth-&gt;{NAME_lc}}\nmy %data;\n$sth-&gt;bind_columns( \\( @data{@fields} ) ); # \\(...) gives references to its elements\n$sth-&gt;execute() or die \"$DBI::errstr\";\nwhile ($sth-&gt;fetch) {\n    print \"$data{name} lives at $data{address}, with phone $data{phone}.\", \"\\n\";\n}\n</code></pre>\n\n<p>Once the setup is handled, the looping is simple to write and fast to run. (But, benchmark).</p>\n\n<p>HTH, apologize if this diverges too much from the OP's problem statement. But it's the simplest and most direct way to get your returned data into the form of variable(s) you want, so you can move on to doing something with it...</p>\n"}], "owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 679, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1551152134, "creation_date": 1550750883, "question_id": 54806710, "link": "https://stackoverflow.com/questions/54806710/perl-dbi-fastest-way-to-get-a-single-scalar-value", "title": "perl DBI, fastest way to get a single scalar value", "body": "<p>I have this code to get a value count. </p>\n\n<p><strong>Short way:</strong></p>\n\n<pre><code>my $count = $dbh-&gt;selectrow_array(\"SELECT COUNT(name) AS RESCOUNT FROM users\");\n</code></pre>\n\n<p><strong>Long way</strong></p>\n\n<pre><code>my $sth = $dbh-&gt;prepare(\"SELECT COUNT(name) AS RESCOUNT FROM users\");\n$sth-&gt;execute() or die \"$DBI::errstr\";\nmy $count = $sth-&gt;fetchrow_array();\n$sth-&gt;finish;\n</code></pre>\n\n<p>selectrow_array, fetchrow_array --> but I don't need an array. I checked the docs, but found nothing for scalars. Just methods for arrays and hashes.\nThe method I use is fast enough, but I was just curious if there is a better, fastest way to get a single value from the call. Or this is the fastest possible way?</p>\n"}, {"tags": ["perl", "scope", "global-variables"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1550747073, "post_id": 54805535, "comment_id": 96387337, "body": "<code>our</code> and <code>$main::</code> are not global. They are package variables. You need to be more clear. Is all you want to do to use the variable outside of the scope of <code>initialize</code>?"}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1550747379, "post_id": 54805535, "comment_id": 96387541, "body": "I&#39;d settle for declaring a package $main:: variable within a subroutine."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1550747599, "post_id": 54805535, "comment_id": 96387673, "body": "Not really.  I&#39;d like the <code>initialize</code> subroutine to declare and initialize all of the globals (or package $main::) variables.  It&#39;s more a matter of curiosity at this point."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1550749680, "post_id": 54805535, "comment_id": 96388983, "body": "Have you considered writing OOP code instead? Make this an object, that would make a lot more sense."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1550750259, "post_id": 54805535, "comment_id": 96389309, "body": "No, my question was what I meant.  Sort of.  As a matter of curiosity, I was wondering if you could declare $main:: variables from within a sub.  After reading a bit about the compiler, I don&#39;t see how.  Not easily, anyway."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1550773309, "post_id": 54805535, "comment_id": 96404100, "body": "@simbabque, Re &quot;<i><code>our</code> and <code>$main::</code> are not global. They are package variables.</i>&quot;, 1) Package variables are global variables (visible everywhere). 2) <code>our</code> variables are lexical variables (aliased to package variables)."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1550749646, "post_id": 54805711, "comment_id": 96388969, "body": "@ErikBennett it&#39;s a &quot;this is how you can do what I think you want to do&quot;, because your question is a little unclear. There is no concept of <i>global</i> in Perl.There are namespaces and scopes. The only things that are truly <i>global</i> are <a href=\"https://perldoc.perl.org/perlvar.html#SPECIAL-VARIABLES\" rel=\"nofollow noreferrer\">special variables listed in perlvar</a>, like <code>$$</code> and <code>$^V</code> and so on. Those are often also called <i>super-global</i>. But you cannot make your own of these."}, {"owner": {"reputation": 478, "user_id": 3261294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e04c85709847a658e1699565b21a363?s=128&d=identicon&r=PG&f=1", "display_name": "BarneySchmale", "link": "https://stackoverflow.com/users/3261294/barneyschmale"}, "edited": false, "score": 0, "creation_date": 1550751049, "post_id": 54805711, "comment_id": 96389801, "body": "The first code sample does print 123. An error is thrown only when      use strict  is enabled."}, {"owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 0, "creation_date": 1550770072, "post_id": 54805711, "comment_id": 96402547, "body": "@sinbabque Isn&#39;t this nonsense? <code>our</code> doesn&#39;t make a lexical variable - <code>my</code> does. All <code>our</code> does is to allow you to address a (globally accessible) package variable without the package name. In a main package, for instance, you&#39;d normally use <code>$::variablename</code>, but after saying <code>our $variablename</code>, you can just use <code>$variablename</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 1, "creation_date": 1550772119, "post_id": 54805711, "comment_id": 96403554, "body": "@Silvar run this: <code>perl -E &#39;package Foo; our $bar = 1; { our $asdf = 2; } say $asdf; package main; say $bar;&#39;</code> Then remove stuff to play around with it. <code>our</code> makes a package variable, but it also imports it only into the lexical scope. Replace <code>say $asdf</code> with <code>$Foo::asdf</code> to make it work."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 0, "creation_date": 1550774346, "post_id": 54805711, "comment_id": 96404585, "body": "@Silvar <code>our</code> makes a &quot;lexical alias to a package variable&quot;. It declares it available under that name in the current lexical scope, <i>even if that scope changes packages afterward</i>, it will still refer to the same package variable. But if you exit the lexical scope of that <code>our</code> the alias will not be available."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 5, "last_activity_date": 1550778788, "last_edit_date": 1550778788, "creation_date": 1550747504, "answer_id": 54805711, "question_id": 54805535, "link": "https://stackoverflow.com/questions/54805535/can-i-declare-globals-in-a-subroutine-in-perl/54805711#54805711", "title": "Can I declare globals in a subroutine in perl?", "body": "<p>For your specific example, you don't need a <em>global</em> variable. </p>\n\n<p>Perl has <em>package variables</em>. Those are created with <code>our</code> and can also be accessed with <code>$namespace::</code> (where <code>main</code> is the default namespace, and <code>$::</code> works for that as well). Those are <em>global</em>, but we rarely call them that.</p>\n\n<p>You need to keep in mind that <code>our</code> makes a <em>lexical</em> alias, so if you declare it inside the sub, it will not be available outside, because there is no lexical alias in that larger scope.</p>\n\n<pre><code>use strict;\n\nsub foo {\n    our $bar = 123;\n}\n\nfoo();\nprint $bar; # error\n</code></pre>\n\n<p>You need to declare the variable in a larger scope.</p>\n\n<pre><code>use strict;\n\nour $bar;\n\nsub foo {\n    $bar = 123;\n}\n\nfoo();\nprint $bar;\n</code></pre>\n\n<p>This will work, because <code>$bar</code> is now available in the file's scope.</p>\n\n<p>All of this only applies when <code>use strict</code> is turned on. If you don't <em>declare</em> a variable, it will automatically become a package variable. However, if you turn on strict, you have to declare all variables. Therefore you need to be explicit.</p>\n\n<p>You can also use <code>my</code> if you declare it outside of the sub. </p>\n\n<pre><code>use strict;\n\nmy $bar;\n\nsub foo {\n    $bar = 123;\n}\n\nfoo();\nprint $bar;\n</code></pre>\n\n<p>Since you're doing this in a script and there is no explicit package declaration, I think it's safe to assume there are no other modules involved. In that case, it does not matter if you use <code>my</code> or <code>our</code>.</p>\n\n<p>If you were using this in a package with different files involved it would make a difference. Variables declared on the file scope with <code>my</code> are kind of <em>private</em>, as there is no way to access them from the outside directly.</p>\n\n<pre><code>package Foo;\nuse strict;\n\nmy $bar = 123;\n\n### other file\nuse Foo;\n\n# no way to get $bar as there is no $Foo::bar\n</code></pre>\n\n<p>But if you use <code>our</code> (or the outdated <code>use vars</code>) it will become a package variable.</p>\n\n<pre><code>package Foo;\nuse strict;\n\nour $bar = 123;\n\n### other file\n\nuse Foo;\nprint $Foo::bar;\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>Can I declare globals in a subroutine in Perl?</p>\n</blockquote>\n\n<p><strong>Yes</strong>, you can declare package variables in a subroutine with <code>our</code>. But you can't access them as lexical variables outside the scope they've been declared in, so you need to access them with their fully qualified package name, and that is ugly.</p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1550754559, "post_id": 54807704, "comment_id": 96392101, "body": "You know, if they are all fixed values, there is no need to make them variables. You can make them constants (or subs)."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1550754821, "post_id": 54807704, "comment_id": 96392277, "body": "Tell me more.  Most of them are ugly HTML code that messes with <code>perl-mode</code> in emacs."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1550755343, "post_id": 54807704, "comment_id": 96392618, "body": "Oh. Maybe you should just switch to a template system? If you were to move those into their own module, you&#39;re halfway there anyway."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1550755937, "post_id": 54807704, "comment_id": 96393020, "body": "Nah.  The HTML is about 1% of the output, and it&#39;s pretty basic.  I am curious about the best practices <code>sub</code> usage, though.  Do you have a link?"}, {"owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 0, "creation_date": 1550770401, "post_id": 54807704, "comment_id": 96402715, "body": "To get a constant that always evaluates to 10, just use <code>sub ten_constant { 10 }</code>. Can&#39;t modify that!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 0, "creation_date": 1550774448, "post_id": 54807704, "comment_id": 96404647, "body": "@Silvar well technically, you can. <code>perl -E &#39;sub ten {10} say ten(); *ten = sub {2}; say ten()&#39;</code>"}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1550777816, "post_id": 54807704, "comment_id": 96406258, "body": "@simbabque, @Silvar, @ikegami, (and everyone else) Is this &quot;answer&quot; correct enough that I can mark it closed?  Should I just blast it?  Or leave it for the next person who wants to use a variable before declaring it while <code>use strict</code> is in force?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1550778574, "post_id": 54807704, "comment_id": 96406614, "body": "You can only ping one person per comment. Only I was notified because my name came first."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1550778701, "post_id": 54807704, "comment_id": 96406685, "body": "I do not want to coerce you into accepting my answer, but I believe you should accept the answer that actually answers your question. You didn&#39;t ask for a better solution to your production code that you&#39;ve not shown us, but that&#39;s what you explain in your answer. You asked <i>Can I declare globals in a subroutine in Perl?</i>. I&#39;ll edit mine to make it even more clear."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1550791759, "post_id": 54807704, "comment_id": 96411760, "body": "Your answer confuses me, and here&#39;s why:  You say, &quot;You need to declare the variable in a larger scope.&quot;  I believe this to be true (now).  Then later on, you say, &quot;Yes, you can declare package variables in a subroutine with <code>our</code>.&quot;  Doesn&#39;t that just provide access to the outer (package) variable?  The actual declaration still has to occur in the outer scope?  I&#39;m not trying to be difficult, just trying to make sure I understand the post."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1550792366, "post_id": 54807704, "comment_id": 96411894, "body": "The whole reason this is even coming up is that I started writing in perl back in the early 1990s when there were only globals and locals.  At the time, it was fairly common, if somewhat ill-considered to have a subroutine called <code>initialize_globals</code>."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1550793717, "post_id": 54807704, "comment_id": 96412189, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/188852/discussion-between-erik-bennett-and-simbabque\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "is_accepted": false, "score": 0, "last_activity_date": 1550754006, "creation_date": 1550754006, "answer_id": 54807704, "question_id": 54805535, "link": "https://stackoverflow.com/questions/54805535/can-i-declare-globals-in-a-subroutine-in-perl/54807704#54807704", "title": "Can I declare globals in a subroutine in perl?", "body": "<p>I believe the answer is \"no\".  Not with <code>use strict</code>.  Among the features of <code>use strict</code> is checking whether or not you're using a variable before it's declared.</p>\n\n<p>The notion of wanting to do just that, as I did above, is at odds with the compile time checks of <code>use strict</code>.</p>\n\n<p>Thanks to @simbabque for helping me think through this more clearly.</p>\n\n<p>Rather than remove the <code>use strict</code>, I'm going to move the ugliness of the huge <code>$lorem</code> type variables (and there's a lot of them) to a separate package. </p>\n\n<p>-E</p>\n"}], "owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 54805711, "answer_count": 2, "score": 1, "last_activity_date": 1558946747, "creation_date": 1550746949, "last_edit_date": 1558946747, "question_id": 54805535, "link": "https://stackoverflow.com/questions/54805535/can-i-declare-globals-in-a-subroutine-in-perl", "title": "Can I declare globals in a subroutine in perl?", "body": "<p>Can I declare globals in a subroutine in perl with <code>use strict</code>?</p>\n\n<p>Consider the following code:</p>\n\n<pre><code>#!/usr/bin/perl\n# $Id: foo,v 1.5 2019/02/21 10:41:08 bennett Exp bennett $\n\nuse strict;\nuse warnings;\n\ninitialize();\n\nprint \"$lorem\\n\";\n\nexit 0;\n\nsub initialize {\n    # How would one delcare \"$lorem\" here such that it is available as\n    # a global?\n\n    $lorem = &lt;&lt;_EOM_\n    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n_EOM_\n    ;\n}\n</code></pre>\n\n<p>Note that I'm not asking if (ab)using globals in this fashion is a good idea;  I'm certain that it isn't.</p>\n\n<p>I've tried a few combinations of <code>our</code> and <code>$main::</code>, but they all fail in just the manner you might expect them to.</p>\n\n<p>At this point, I'm just curious.  Can it be done?\nI wonder if some sort of shenanigans with the <code>BEGIN</code> block would work.</p>\n\n<p>The following will work, but as @simbabque points out, it's ugly:</p>\n\n<pre><code>#!/usr/bin/perl\n# $Id: foo,v 1.7 2019/02/21 19:48:26 bennett Exp bennett $\n\nuse strict;\nuse warnings;\n\ninitialize();\n\nprintf(\"$main::lorem\\n\");\n\nexit 0;\n\nsub initialize {\n    # How would one delcare \"$lorem\" here such that is is available as\n    # a global-ish?\n\n    our $lorem = &lt;&lt;_EOM_\n    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n_EOM_\n    ;\n}\n</code></pre>\n"}, {"tags": ["c++", "perl", "swig"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1550742950, "post_id": 54803533, "comment_id": 96384743, "body": "&quot;does not work&quot; - can you please be more specific? Maybe the problem is that you forgot the quotes, i.e. <code>%module &quot;mymodule::mymodule&quot;</code>?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1550743100, "post_id": 54803533, "comment_id": 96384835, "body": "Not sure if this could be a duplicate of <a href=\"https://stackoverflow.com/questions/16146606/generate-a-perl-module-with-a-separate-namespace-using-swig\">Generate a perl module with a separate namespace using SWIG</a>..."}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1550743910, "creation_date": 1550743910, "answer_id": 54804469, "question_id": 54803533, "link": "https://stackoverflow.com/questions/54803533/module-names-with-swig/54804469#54804469", "title": "Module names with swig", "body": "<p>You are missing double quotes around the module name. According to <a href=\"http://www.swig.org/Doc1.3/Perl5.html\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n\n<blockquote>\n  <p>To give your module a nested namespace simply provide the fully\n  qualified name in your <code>%module</code> directive:</p>\n  \n  <p>%module \"Foo::Bar::Baz\"  </p>\n  \n  <p>NOTE: the double quotes are necessary.</p>\n</blockquote>\n"}], "owner": {"reputation": 155, "user_id": 3308713, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e112776ee95ccfff5eabeb03dd6e99ed?s=128&d=identicon&r=PG&f=1", "display_name": "user3308713", "link": "https://stackoverflow.com/users/3308713/user3308713"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 54804469, "answer_count": 1, "score": 1, "last_activity_date": 1550743910, "creation_date": 1550741221, "last_edit_date": 1550742866, "question_id": 54803533, "link": "https://stackoverflow.com/questions/54803533/module-names-with-swig", "title": "Module names with swig", "body": "<p>I am trying to use swig to create perl modules. </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>%module mymodule\n</code></pre>\n\n<p>works but</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>%module mymoduele::mymodule \n</code></pre>\n\n<p>does not work. Is there a way to make this work?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1550736484, "post_id": 54801987, "comment_id": 96380873, "body": "Split each row into fields and then use <a href=\"https://metacpan.org/pod/Text::Table\" rel=\"nofollow noreferrer\">Text::Table</a> to print out the table in the desired layout? Or use Perl formats."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1550738510, "post_id": 54801987, "comment_id": 96381954, "body": "Can you show a line or a few of input and desired output for that input?  I can&#39;t figure out from code what exactly you need."}], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1550737086, "creation_date": 1550737086, "answer_id": 54802264, "question_id": 54801987, "link": "https://stackoverflow.com/questions/54801987/replace-single-space-with-multiple-spaces-in-perl/54802264#54802264", "title": "Replace single space with multiple spaces in perl", "body": "<p>One approach is to use plain ol' Perl formats:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy($first, $second, $remainder);\nformat STDOUT =\n@&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; @&lt;&lt;&lt;&lt;&lt;&lt; @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n$first,                            $second,$remainder\n.\n\nwhile (&lt;DATA&gt;) {\n    ($first, $second, $remainder) = split(/\\s+/, $_, 3);\n    write;\n}\n\nexit 0;\n\n__DATA__\nABCD TEST EFGH don't touch\nFOO      BAR    FUD don't touch\n</code></pre>\n\n<p>Test output. I probably miscounted the columns, but you should get the idea:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nABCD                               TEST    EFGH don't touch\nFOO                                BAR     FUD don't touch\n</code></pre>\n\n<p>Other option would be <a href=\"https://metacpan.org/pod/Text::Table\" rel=\"nofollow noreferrer\">Text::Table</a></p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1550776232, "last_edit_date": 1550776232, "creation_date": 1550739190, "answer_id": 54802852, "question_id": 54801987, "link": "https://stackoverflow.com/questions/54801987/replace-single-space-with-multiple-spaces-in-perl/54802852#54802852", "title": "Replace single space with multiple spaces in perl", "body": "<p>Assuming that the fields in your data are demarcated by spaces</p>\n\n<pre><code>while (&lt;$fh&gt;) {\n    my ($first, @rest) = split;\n    printf \"%-35s @rest\\n\", $first;\n}\n</code></pre>\n\n<p>The first field is now going to be 36 wide, aligned left due to <code>-</code> in the format of <code>printf</code>. See <a href=\"https://perldoc.perl.org/functions/sprintf.html\" rel=\"nofollow noreferrer\">sprintf</a> for the many details. The rest is printed with single spaces between the original space-separated fields, but can instead be done as desired (tab separated, fixed width...).</p>\n\n<p>Or you can leave the \"rest\" after the first field untouched by splitting the line into two parts</p>\n\n<pre><code>while (&lt;$fh&gt;) {\n    my ($first, $rest) = /(\\S+)\\s+(.*)/;\n    printf \"%-35s $rest\\n\", $first;\n}\n</code></pre>\n\n<p>(or use <code>split ' ', $_, 2</code> instead of regex)</p>\n\n<p>Please give more detail if there are other requirements.</p>\n"}], "owner": {"reputation": 507, "user_id": 1939168, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/2e47f3a6db33bc8a8e3f28a18f12a7ef?s=128&d=identicon&r=PG", "display_name": "user1939168", "link": "https://stackoverflow.com/users/1939168/user1939168"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 54802852, "answer_count": 2, "score": 2, "last_activity_date": 1550776232, "creation_date": 1550735983, "question_id": 54801987, "link": "https://stackoverflow.com/questions/54801987/replace-single-space-with-multiple-spaces-in-perl", "title": "Replace single space with multiple spaces in perl", "body": "<p>I have a requirement of replacing a single space with multiple spaces so that the second field always starts at a particular position (here 36 is the position of second field always).\nI have a perl script written for this:</p>\n\n<pre><code>while(&lt;INP&gt;)\n{\nmy $md=35-index($_,\" \");\nmy $str;\n$str.=\" \" for(1..$md);\n$_=~s/ +/$str/;\nprint \"$_\" ;\n}\n</code></pre>\n\n<p>Is there any better approach with just using the regex in =~s/// so that I can use it on CLI directly instead of script.</p>\n"}, {"tags": ["perl", "csv", "upload", "mojolicious"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1550726937, "post_id": 54798729, "comment_id": 96376741, "body": "For CGI, that doesn&#39;t work either. Did you mean <code>$cgi-&gt;upload($file)</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 358, "user_id": 6772972, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/606279049553570/picture?type=large", "display_name": "tranthaihoang", "link": "https://stackoverflow.com/users/6772972/tranthaihoang"}, "edited": false, "score": 0, "creation_date": 1551061023, "post_id": 54813939, "comment_id": 96488506, "body": "Thanks for your answer, I think this answer will work, but before that I found a solution for myself! thank you"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1550789723, "last_edit_date": 1550789723, "creation_date": 1550773888, "answer_id": 54813939, "question_id": 54798729, "link": "https://stackoverflow.com/questions/54798729/how-to-upload-file-in-mojolicious-like-cgi-perl/54813939#54813939", "title": "How to upload file in Mojolicious like CGI Perl?", "body": "<p>Check out the <a href=\"https://metacpan.org/pod/Mojo::Upload\" rel=\"nofollow noreferrer\">Mojo::Upload</a> docs. Mojo::Upload is not a filehandle; to read the contents of the uploaded file, the easiest way is to use the <code>slurp</code> method, or if you really want to read it line by line, you can convert it to a File asset and retrieve the handle from that.</p>\n\n<pre><code>use Mojo::Base 'Mojolicious::Controller';\n\nsub action {\n  my $self = shift;\n  my $upfile = $self-&gt;req-&gt;upload('file');\n  my $contents = $upfile-&gt;slurp;\n  my $originhead = (split /^/, $contents)[0];\n\n  # or\n  my $file = $upfile-&gt;asset-&gt;to_file;\n  my $handle = $file-&gt;handle;\n  my ($originhead, $first_count);\n  while (my $line = &lt;$handle&gt;) {\n    $originhead = $line unless $first_count;\n    $first_count++;\n  }\n}\n</code></pre>\n\n<p>To parse a CSV, <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a> is usually much simpler than alternatives.</p>\n\n<pre><code>use Text::CSV 'csv';\nmy $array_of_hashes = csv(in =&gt; \\$contents, headers =&gt; 'auto', encoding =&gt; 'UTF-8') or die Text::CSV-&gt;error_diag;\n</code></pre>\n\n<p>Or for line-by-line processing:</p>\n\n<pre><code>my $csv = Text::CSV-&gt;new({binary =&gt; 1, auto_diag =&gt; 2});\nbinmode $handle, ':encoding(UTF-8)' or die \"binmode failed: $!\";\n$csv-&gt;header($handle);\nwhile (my $row = $csv-&gt;getline_hr($handle)) {\n  ...\n}\n</code></pre>\n"}], "owner": {"reputation": 358, "user_id": 6772972, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/606279049553570/picture?type=large", "display_name": "tranthaihoang", "link": "https://stackoverflow.com/users/6772972/tranthaihoang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550789723, "creation_date": 1550719279, "question_id": 54798729, "link": "https://stackoverflow.com/questions/54798729/how-to-upload-file-in-mojolicious-like-cgi-perl", "title": "How to upload file in Mojolicious like CGI Perl?", "body": "<p>I have a problem when using <code>Mojo::Upload</code> it is not the same as uploading CGI file perl.\nI need to read the lines in the CSV file uploaded, with the below code of CGI, it can work!</p>\n\n<pre><code>my $upfile = $cgi-&gt;param('file');\nmy $originhead;\n\nwhile(my $line = &lt;$upfile&gt;){\n    $originhead = $line if($first_count == 0);\n    $first_count++;\n}\n</code></pre>\n\n<p>$originhead = 'id, abc, cda' it is ok</p>\n\n<p>For Mojo, it doesn't work</p>\n\n<pre><code>use Mojo::Upload;\nmy $upfile = $self-&gt;req-&gt;upload('file');\n\n my $originhead;\n\n    while(my $line = &lt;$upfile&gt;){\n        $originhead = $line if($first_count == 0);\n        $first_count++;\n    }\n$originhead = null  fail\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["arrays", "algorithm", "perl", "hashtable"], "answers": [{"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 0, "last_activity_date": 1550710264, "creation_date": 1550710264, "answer_id": 54797562, "question_id": 54797422, "link": "https://stackoverflow.com/questions/54797422/convert-array-to-multidimensional-hash/54797562#54797562", "title": "Convert array to multidimensional hash", "body": "<p>The first 2 lines in the <code>for</code> loop are what is causing your problem. They assign a new hash reference each iteration of the loop (and erase what was entered in the previous iteration). In perl, there is no need to set a reference as you did. Just eliminate the first 2 lines and your data structure will be as you wish.</p>\n\n<p>The method you chose only shows <code>'prmt' =&gt; 2</code> because that was the last item entered.</p>\n"}, {"tags": [], "owner": {"reputation": 35084, "user_id": 585411, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xvEpe.jpg?s=128&g=1", "display_name": "btilly", "link": "https://stackoverflow.com/users/585411/btilly"}, "is_accepted": false, "score": 4, "last_activity_date": 1550710279, "creation_date": 1550710279, "answer_id": 54797564, "question_id": 54797422, "link": "https://stackoverflow.com/questions/54797422/convert-array-to-multidimensional-hash/54797564#54797564", "title": "Convert array to multidimensional hash", "body": "<p>The problem is that you are assigning to the source even if something was there, and you lose it.  Just do a <code>||=</code> instead of <code>=</code> and you'll be fine.</p>\n\n<p>Or even easier, just use the fact that Perl autovivifies and leave that out.</p>\n\n<pre><code>my $res;\nfor my $i (@$arr) {\n    $res-&gt;{ $i-&gt;{source} }{ $i-&gt;{group} }{ $i-&gt;{param} } = $i-&gt;{value};\n}\nwarn Dumper $res;\n</code></pre>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1550710279, "creation_date": 1550709384, "question_id": 54797422, "link": "https://stackoverflow.com/questions/54797422/convert-array-to-multidimensional-hash", "title": "Convert array to multidimensional hash", "body": "<p>My task is convert array, containing hash with <code>x</code> keys to <code>x-1</code> dimensional hash.</p>\n\n<p>Example:</p>\n\n<pre><code>use Data::Dumper;\nmy $arr = [\n    {\n        'source' =&gt; 'source1',\n        'group'  =&gt; 'group1',\n        'param'  =&gt; 'prm1',\n        'value'  =&gt; 1,\n    },\n    {\n        'source' =&gt; 'source1',\n        'group'  =&gt; 'group1',\n        'param'  =&gt; 'prm2',\n        'value'  =&gt; 2,\n    },\n];\n\n\nmy $res;\nfor my $i (@$arr) {\n    $res-&gt;{ $i-&gt;{source} }                               = {};\n    $res-&gt;{ $i-&gt;{source} }{ $i-&gt;{group} }                = {};\n    $res-&gt;{ $i-&gt;{source} }{ $i-&gt;{group} }{ $i-&gt;{param} } = $i-&gt;{value};\n}\nwarn Dumper $res;\n\nmy $res_expected = {\n    'source1' =&gt; {\n        'group1' =&gt; {\n            'prm1' =&gt; 1,  # wasn't added, why ?\n            'prm2' =&gt; 2\n        }\n    }\n};\n</code></pre>\n\n<p>However it doesn't work as expected, <code>'prm1' =&gt; 1</code> wasn't added. What is wrong and how to solve this task ?</p>\n"}]