[{"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1543427243, "post_id": 53524825, "comment_id": 93919438, "body": "Did you install the perl bindings for imagemagick?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1543440478, "post_id": 53524825, "comment_id": 93925497, "body": "Are you sure that Image::Magick is installed on your system? What do you get when you type <code>perldoc Image::Magick</code> at the command line?"}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1543445792, "post_id": 53524825, "comment_id": 93927415, "body": "You would better use strict and warnings BEFORE you use Image::Magick. And the error message that you are showing does not correspond exactly to the module name. Can you please run &#171; perl -MImage::Magick -e 1 &#187; and let us know what message you get ?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1543458931, "post_id": 53524825, "comment_id": 93930311, "body": "Position of strict and warnings is not that important, it won&#39;t affect how Image::Magick loads, but it is better to have them first in case you typo <code>use</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1543470770, "post_id": 53524825, "comment_id": 93933085, "body": "@GMB, <code>&#47;usr&#47;bin&#47;perl -MImage::Magic -e1</code> is actually more useful, since that uses the same <code>perl</code> as the script."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1543478985, "post_id": 53524825, "comment_id": 93936365, "body": "Your title had absolutely nothing to do with your problem. I&#39;ve changed it. I hope that&#39;s ok."}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1543525181, "post_id": 53524825, "comment_id": 93961556, "body": "@ikegami thanks, yes you are correct, remark noted ; unfortunately I cannot edit my comment anymore"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1543479823, "creation_date": 1543479823, "answer_id": 53534601, "question_id": 53524825, "link": "https://stackoverflow.com/questions/53524825/perl-using-imagemagick/53534601#53534601", "title": "Perl - Using Image::Magick", "body": "<p>The most likely explanation is that the error message is telling you that the <a href=\"https://metacpan.org/pod/Image::Magick\" rel=\"nofollow noreferrer\">Image::Magick</a> module just isn't installed on your system. What makes you think that it is installed? Have you used it in other programs? Do other people who use the system make use of it?</p>\n\n<p>The Image::Magick module isn't part of the standard Perl installation. It needs to be installed separately. It looks like you're using Linux and your shebang line points to what looks like the system Perl, so the quickest approach will be to install the version of Image::Magick that has been pre-packaged for your distribution and which will be available from your standard package repositories.</p>\n\n<p>On a RedHat-like system (RHEL, Centos, Fedora, etc) type:</p>\n\n<pre><code>sudo yum install ImageMagick-perl\n</code></pre>\n\n<p>(You might need <code>dnf</code> instead of <code>yum</code> on newer versions of Fedora.)</p>\n\n<p>On a Debian-like system (Debian, Ubuntu, etc) type:</p>\n\n<pre><code>sudo apt-get install libimage-magick-perl\n</code></pre>\n\n<p>There's also at least one problem with your code. After creating the Image::Magick object (<code>Image::Magick-&gt;new()</code>) and before doing any work on it (<code>$convertedFileName-&gt;Quantize(colorspace=&gt;'gray')</code>) you need to read the existing file into the object. Your code should probably look something like this:</p>\n\n<pre><code>while (my $image = readdir($dh2)){\n    my $convertedFileName = $image;  #assign current image to a variable\n    $convertedFileName =~ s/.jpg/-convert.jpg/; #change name of file\n    print \"$convertedFileName\\n\";\n\n    # Note: I'm using a new variable here\n    $image = Image::Magick-&gt;new; #make ImageMagick object\n\n    $image-&gt;Read(\"$directory/$convertedFileName\");\n    $image-&gt;Quantize(colorspace=&gt;'gray'); #alter the image\n}\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 10608302, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y8SMH4ugQTc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC9ShvUTusMl-nTC5pmjBewJaDDCw/mo/photo.jpg?sz=128", "display_name": "jack", "link": "https://stackoverflow.com/users/10608302/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 975, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1618725689, "creation_date": 1543425373, "last_edit_date": 1543479898, "question_id": 53524825, "link": "https://stackoverflow.com/questions/53524825/perl-using-imagemagick", "title": "Perl - Using Image::Magick", "body": "<p>I am trying to use ImageMagick to manipulate .jpg files. I believe I have successfully installed it because I can convert a .jpg image to a .png image on the command prompt by the following command:</p>\n\n<pre><code>convert   image.jpg    image.png\n</code></pre>\n\n<p>However, when I attempt to load the module in a script and execute the script I get a \u201cCan't locate imagemagick.pm in @INC (you may need to install the imagemagick module)\u201d error.</p>\n\n<p>How do I load the Image::Magick module into the script?</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse Image::Magick;   #load the ImageMagick module\nuse strict;\nuse warnings;\n\nmy $directory = 'path-to-images';\n\nopendir my $dh2, $directory or die \"Could not open file\";\n\nwhile (my $image = readdir($dh2)){\n        my $convertedFileName = $image;  #assign current image to a variable\n        $convertedFileName =~ s/.jpg/-convert.jpg/; #change name of file\n        print \"$convertedFileName\\n\";\n        $convertedFileName = Image::Magick-&gt;new; #make ImageMagick object\n\n\n           $convertedFileName-&gt;Quantize(colorspace=&gt;'gray'); #alter the image\n            }\n\n    closedir $dh2;\n</code></pre>\n"}, {"tags": ["perl", "command-line-interface"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1543427186, "post_id": 53524699, "comment_id": 93919416, "body": "In a <code>BEGIN</code> block. Normally you&#39;d use <code>Getopt::Std</code> or <code>Getopt::Long</code>. There&#39;s also perl&#39;s <code>-s</code> option."}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1543436694, "post_id": 53525889, "comment_id": 93923861, "body": "There really is no case where new code should use ::Std.  Always start with Getopt::Long"}, {"owner": {"reputation": 2351, "user_id": 10533011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13cf679869635f63c1d842fa24604a02?s=128&d=identicon&r=PG&f=1", "display_name": "Donat", "link": "https://stackoverflow.com/users/10533011/donat"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1543438262, "post_id": 53525889, "comment_id": 93924567, "body": "Yes, using long options is more up to date. You can easily adapt and improve. This is only for demonstration."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1543443164, "post_id": 53525889, "comment_id": 93926510, "body": "even just using short options, you should use Getopt::Long; it&#39;s no more difficult."}], "tags": [], "owner": {"reputation": 2351, "user_id": 10533011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13cf679869635f63c1d842fa24604a02?s=128&d=identicon&r=PG&f=1", "display_name": "Donat", "link": "https://stackoverflow.com/users/10533011/donat"}, "is_accepted": false, "score": 0, "last_activity_date": 1543429792, "creation_date": 1543429792, "answer_id": 53525889, "question_id": 53524699, "link": "https://stackoverflow.com/questions/53524699/how-can-i-process-options-using-perl-in-n-or-p-mode/53525889#53525889", "title": "How can I process options using Perl in -n or -p mode?", "body": "<p>Here is a short example program (name it <code>t.pl</code>), how you can do it:</p>\n\n<pre><code>#!/bin/perl\nuse Getopt::Std;\n\nBEGIN {\n  my %opts;\n  getopts('p', \\%opts);\n  $prefix = defined($opts{'p'}) ? 'prefix -&gt; ' : '';\n}\n\nprint $prefix, $_;\n</code></pre>\n\n<p>Call it like that:</p>\n\n<pre><code>perl -n t.pl file1 file2 file3\n</code></pre>\n\n<p>or (will add a prefix to every line): </p>\n\n<pre><code>perl -n t.pl -p file1 file2 file3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 472, "user_id": 1830614, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b045d60d744130d2f456a2525e50e933?s=128&d=identicon&r=PG", "display_name": "mpersico", "link": "https://stackoverflow.com/users/1830614/mpersico"}, "edited": false, "score": 0, "creation_date": 1543587976, "post_id": 53529756, "comment_id": 93984207, "body": "And now I see why I was having such a hard time. Check this out:   <code>perl -ne &#39;BEGIN{some; code; that; checks for -n;} per; line; code;&#39; -n file1 file2</code>   See my mistake? I unconsciously assumed that once I Perl processed the -e, all other args were for my program. Not so: that -n was swallowed by Perl. And, technically, so are the filenames.     From your second paragraph, it hit me that I had to add -- to stop option processing by Perl. Then I can process ARGV to my heart&#39;s content in the BEGIN block and anything left will be left to -p or-n handling.   Thank you @ikegami"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1594882040, "last_edit_date": 1594882040, "creation_date": 1543448397, "answer_id": 53529756, "question_id": 53524699, "link": "https://stackoverflow.com/questions/53524699/how-can-i-process-options-using-perl-in-n-or-p-mode/53529756#53529756", "title": "How can I process options using Perl in -n or -p mode?", "body": "<p>There are three primary ways of passing information to Perl without using STDIN or external storage.</p>\n<ul>\n<li><p>Arguments</p>\n<p>When using <code>-n</code> or <code>-p</code>, extract the arguments in the <code>BEGIN</code> block.</p>\n<pre><code>  perl -ne'BEGIN { ($x,$y)=splice(@ARGV,0,2) } f($x,$y)' -- &quot;$x&quot; &quot;$y&quot; ...\n</code></pre>\n</li>\n<li><p>Command-line options</p>\n<p>In a full program, you'd use <a href=\"http://search.cpan.org/perldoc?Getopt::Long\" rel=\"nofollow noreferrer\">Getopt::Long</a>, but <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\"><code>perl -s</code></a> will do fine here.</p>\n<pre><code>  perl -sne'f($x,$y)' -- -x=&quot;$x&quot; -y=&quot;$y&quot; -- ...\n</code></pre>\n</li>\n<li><p>Environment variables</p>\n<pre><code>  X=&quot;$x&quot; Y=&quot;$y&quot; perl -ne'f($ENV{X},$ENV{Y})' -- ...\n</code></pre>\n</li>\n</ul>\n"}], "owner": {"reputation": 472, "user_id": 1830614, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b045d60d744130d2f456a2525e50e933?s=128&d=identicon&r=PG", "display_name": "mpersico", "link": "https://stackoverflow.com/users/1830614/mpersico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 3, "accepted_answer_id": 53529756, "answer_count": 2, "score": 4, "last_activity_date": 1594882040, "creation_date": 1543424904, "question_id": 53524699, "link": "https://stackoverflow.com/questions/53524699/how-can-i-process-options-using-perl-in-n-or-p-mode", "title": "How can I process options using Perl in -n or -p mode?", "body": "<p>When running <code>perl -n</code> or <code>perl -p</code>, each command line argument is taken as a file to be opened and processed line by line. If you want to pass command line switches to that script, how can I do that?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1543458005, "post_id": 53520337, "comment_id": 93930137, "body": "Consider also <a href=\"https://metacpan.org/pod/Text::Balanced\" rel=\"nofollow noreferrer\">Text::Balanced</a> for parsing balanced nested brackets."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1543571161, "post_id": 53520337, "comment_id": 93975306, "body": "This code seems hard to maintain. If I were you, I wouldn&#39;t build such complicated regular expressions; I&#39;d perform the matching in several stages instead."}, {"owner": {"reputation": 3, "user_id": 10707139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca7783cd4f45a4f8f9840c55db99b80?s=128&d=identicon&r=PG&f=1", "display_name": "Zoaker", "link": "https://stackoverflow.com/users/10707139/zoaker"}, "edited": false, "score": 0, "creation_date": 1543669602, "post_id": 53520337, "comment_id": 94006651, "body": "I want match  &quot;$headname {}&quot;  from a string like &quot;A{  ... B {... $headname{}...}  ... C { ...$headname {} }}&quot;, so I write this regex expression by  $string =~ /($partten$NestedGuts)/xmgs,  $partten is the group head name partten, and $NestedGuts is the pair brackts, i think it is very effective and useful, untill encount this problem :("}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10707139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca7783cd4f45a4f8f9840c55db99b80?s=128&d=identicon&r=PG&f=1", "display_name": "Zoaker", "link": "https://stackoverflow.com/users/10707139/zoaker"}, "edited": false, "score": 0, "creation_date": 1543669203, "post_id": 53528871, "comment_id": 94006551, "body": "Thank you, your code works perfectly! I turned on warnings, but it didn&#39;t print any message. However, i should learn to use Regexp::Common"}], "tags": [], "owner": {"reputation": 35084, "user_id": 585411, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xvEpe.jpg?s=128&g=1", "display_name": "btilly", "link": "https://stackoverflow.com/users/585411/btilly"}, "is_accepted": true, "score": 1, "last_activity_date": 1543443015, "creation_date": 1543443015, "answer_id": 53528871, "question_id": 53520337, "link": "https://stackoverflow.com/questions/53520337/dynamic-regular-expression-for-nesting-brackets-failed-due-to-unknow-bugs/53528871#53528871", "title": "Dynamic regular expression for Nesting brackets failed due to unknow bugs", "body": "<p>First for matching nested brackets I normally use <code>Regexp::Common</code>.</p>\n\n<p>Next, I'm guessing that your problem is that Perl's regular expression engine breaks after matching 32767 groups.  You can verify this by turning on warnings and looking for a message like <code>Complex regular subexpression recursion limit (32766) exceeded</code>.</p>\n\n<p>If so, you can rewrite your code using <code>/g</code> and <code>\\G</code> and <code>pos</code>. The idea being that you match the brackets in a loop like this untested code:</p>\n\n<pre><code>my $start = pos($string);\nmy $open_brackets = 0;\nmy $failed;\nwhile (0 &lt; $open_brackets or $start == pos($string)) {\n    if ($string =~ m/\\G[^{}]*(\\{|\\})/g) {\n        if ($1 eq '{') {\n            $open_brackets++;\n        }\n        else {\n            $open_brackets--;\n        }\n    }\n    else {\n        $failed = 1;\n        break; # WE FAILED TO MATCH\n    }\n}\nif (not $failed and 0 == $open_brackets) {\n    my $matched = substr($string, $start, pos($string));\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10707139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca7783cd4f45a4f8f9840c55db99b80?s=128&d=identicon&r=PG&f=1", "display_name": "Zoaker", "link": "https://stackoverflow.com/users/10707139/zoaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 53528871, "answer_count": 1, "score": 0, "last_activity_date": 1543443015, "creation_date": 1543410970, "question_id": 53520337, "link": "https://stackoverflow.com/questions/53520337/dynamic-regular-expression-for-nesting-brackets-failed-due-to-unknow-bugs", "title": "Dynamic regular expression for Nesting brackets failed due to unknow bugs", "body": "<p>rencently I have met a strange bug when use a dynamic regular expressions in  perl for Nesting brackets' match. The origin string is \" {...test{...}...} \", I want to grep the pair brace begain with test, \"test{...}\". actually there are probably many pairs of brace before and end this group , I don't really know the deepth of them.</p>\n\n<p>Following is my match scripts: <strong>nesting_parser.pl</strong></p>\n\n<pre><code>#! /usr/bin/env perl\nuse Getopt::Long;\nuse Data::Dumper;\nmy %args = @ARGV;\n\nif(exists$args{'-help'})   {printhelp();}\nunless  ($args{'-file'})   {printhelp();}\nunless  ($args{'-regex'})  {printhelp();}\n\nmy $OpenParents;\nmy $counts;\nmy $NestedGuts = qr {\n(?{$OpenParents = 0})\n  (?&gt;\n    (?:\n      [^{}]+\n| \\{ (?{$OpenParents++;$counts++; print \"\\nLeft:\".$OpenParents.\" ;\"})\n\n| \\} (?(?{$OpenParents ne 0; $counts++}) (?{$OpenParents--;print \"Right: \".$OpenParents.\" ;\"})) (?(?{$OpenParents eq 0}) (?!))\n       )*\n       )\n}x;\n\n\nmy $string  = `cat $args{'-file'}`;\nmy $partten =      $args{'-regex'} ;\n\nprint \"####################################################\\n\";\nprint \"Grep [$partten\\{...\\}] from $args{'-file'}\\n\";\nprint \"####################################################\\n\";\n\n\nwhile ($string =~ /($partten$NestedGuts)/xmgs){\n print $1.\"}\\n\";\n  print $2.\"####\\n\";\n}\nprint \"Regex has seen $counts brackts\\n\";\nsub printhelp{\nprint \"Usage:\\n\";\nprint \"\\t./nesting_parser.pl -file [file] -regex '[regex expression]'\\n\";\nprint \"\\t[file]   : file path\\n\";\nprint \"\\t[regex]  : regex string\\n\";\nexit;\n}\n</code></pre>\n\n<p>Actually my regex is:</p>\n\n<pre><code>our $OpenParents;\nour $NestedGuts = qr {\n(?{$OpenParents = 0})\n(?&gt;\n(?:\n[^{}]+\n| \\{ (?{$OpenParents++;})\n| \\} (?(?{$OpenParents ne 0}) (?{$OpenParents--})) (?(?{$OpenParents eq 0} (?!))\n)*\n)\n}x;\n</code></pre>\n\n<p>I have add brace counts in  <strong>nesting_parser.pl</strong></p>\n\n<p>I also write a string generator for debug: <strong>gen_nesting.pl</strong></p>\n\n<pre><code>#! /usr/bin/env perl\nuse strict;\nmy $buffer = \"{{{test{\";\n\nunless ($ARGV[0]) {print \"Please specify the nest pair number!\\n\"; exit}\n\nfor (1..$ARGV[0]){\n    $buffer.= \"\\n\\{\\{\\{\\{$_\\}\\}\\}\\}\";\n   #$buffer.= \"\\n\\{\\{\\{\\{\\{\\{\\{\\{\\{$_\\}\\}\\}\\}\\}\\}\\}\\}\\}\";\n }\n$buffer .= \"\\n\\}}}}\";\n\nopen TEXT, \"&gt;log_$ARGV[0]\";\nprint TEXT $buffer;\nclose TEXT;\n</code></pre>\n\n<p>You can generate a test file by </p>\n\n<pre><code>./gen_nesting.pl 1000\n</code></pre>\n\n<p>It will create a log file named log_1000, which include 1000 lines brace pairs</p>\n\n<p>Now we test our match scripts:</p>\n\n<pre><code>./nesting_parser.pl -file log_1000 -regex \"test\" &gt; debug_1000\n</code></pre>\n\n<p>debug_1000 looks like a great perfect result, matched successfully! But when I gen a 4000 lines test log file and match it again, it seem crashed:</p>\n\n<pre><code>./gen_nesting.pl 4000\n./nesting_parser.pl -file log_4000 -regex \"test\" &gt; debug_4000\n</code></pre>\n\n<p>The end of debug_4000 shows</p>\n\n<pre><code>{{{{3277}\n####\nRegex has seen 26213 brackts\n</code></pre>\n\n<p>I don't know what's wrong with the regex expresions, mostly it works well for paired brackets, untill recently I found it crashed when I try to match a text file more than 600,000 lines.</p>\n\n<p>I'm really confused by this problems, \nI really hope to solve this problem.</p>\n\n<p>thank you all! </p>\n"}, {"tags": ["perl", "require"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1543408266, "post_id": 53519463, "comment_id": 93907596, "body": "Why this complicated setup? Do you control the code in all three files? This is really not a good idea."}, {"owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1543408915, "post_id": 53519463, "comment_id": 93907972, "body": "no, its not like that, this is just exemple , the real problem I have is with some big scripts"}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 5, "last_activity_date": 1543408676, "creation_date": 1543408676, "answer_id": 53519674, "question_id": 53519463, "link": "https://stackoverflow.com/questions/53519463/perl-cant-require-value-from-other-perl-file-and-use-it-in-3rd-perl-file/53519674#53519674", "title": "perl : can&#39;t require $value from other perl file and use it in 3rd perl file", "body": "<p>The <a href=\"http://perldoc.perl.org/functions/require.html\" rel=\"noreferrer\"><code>require</code> keyword</a> stores files it has already loaded in the <code>%INC</code> hash.</p>\n\n<pre><code>perl -MData::Dumper -E 'say Dumper \\%INC'\n$VAR1 = {\n    'Data/Dumper.pm' =&gt; '/home/simbabque/perl5/perlbrew/perls/perl-5.26.1/lib/5.26.1/x86_64-linux/Data/Dumper.pm',\n    'constant.pm' =&gt; '/home/simbabque/perl5/perlbrew/perls/perl-5.26.1/lib/5.26.1/constant.pm',\n    'feature.pm' =&gt; '/home/simbabque/perl5/perlbrew/perls/perl-5.26.1/lib/5.26.1/feature.pm',\n    'strict.pm' =&gt; '/home/simbabque/perl5/perlbrew/perls/perl-5.26.1/lib/5.26.1/strict.pm',\n    'warnings/register.pm' =&gt; '/home/simbabque/perl5/perlbrew/perls/perl-5.26.1/lib/5.26.1/warnings/register.pm',\n    'Exporter.pm' =&gt; '/home/simbabque/perl5/perlbrew/perls/perl-5.26.1/lib/5.26.1/Exporter.pm',\n    'XSLoader.pm' =&gt; '/home/simbabque/perl5/perlbrew/perls/perl-5.26.1/lib/5.26.1/XSLoader.pm',\n    'bytes.pm' =&gt; '/home/simbabque/perl5/perlbrew/perls/perl-5.26.1/lib/5.26.1/bytes.pm',\n    'warnings.pm' =&gt; '/home/simbabque/perl5/perlbrew/perls/perl-5.26.1/lib/5.26.1/warnings.pm',\n    'Carp.pm' =&gt; '/home/simbabque/perl5/perlbrew/perls/perl-5.26.1/lib/5.26.1/Carp.pm'\n};\n</code></pre>\n\n<p>When you try to <code>require $same_filename</code> again, it will look at <code>$INC{$same_filename}</code>. If that exists, it aborts.</p>\n\n<p>If you want to re-run the same file you can use the <a href=\"http://perldoc.perl.org/functions/do.html\" rel=\"noreferrer\"><code>do</code></a> keyword instead, which just loads and executes a file. This will re-read the file from disk <strong>every time</strong>.</p>\n\n<pre><code>sub red {\n    our $var;\n    print \"try : \";\n    do \"./3.pl\"\n}\n</code></pre>\n\n<p>Keep in mind that this is <strong>really bad practice</strong>. You should move this code into a function and pass lexical variables around.</p>\n"}], "owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543408676, "creation_date": 1543408000, "question_id": 53519463, "link": "https://stackoverflow.com/questions/53519463/perl-cant-require-value-from-other-perl-file-and-use-it-in-3rd-perl-file", "title": "perl : can&#39;t require $value from other perl file and use it in 3rd perl file", "body": "<p>So I have 3 perl files ( 1.pl, 2.pl, 3.pl) , I want to require a value from a loop in 2.pl and print it in 3.pl</p>\n\n<p>the scripts</p>\n\n<p>1.pl</p>\n\n<pre><code>use strict;\nuse warnings;\n\nrequire \"./2.pl\";\nsub red {\n    our $var;\n    print \"try : \";\n    require \"./3.pl\"\n}\n</code></pre>\n\n<p>2.pl</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @array = (\"http://exemple.org\", \"http://test.org\",\"http://perl.org\");\n\nforeach our $var(@array){\n    chomp ($var);\n    red();\n}\n\n1;\n</code></pre>\n\n<p>3.pl</p>\n\n<pre><code>use strict;\nuse warnings;\n\nour $var;\n\nprint \"3 : $var\\n\";\n\n1;\n</code></pre>\n\n<p>What I get when I open 1.pl in terminal :</p>\n\n<pre><code>try : 3 : http://exemple.org\ntry : try :\n</code></pre>\n\n<p>And what I want to get is :</p>\n\n<pre><code>try : 3 : http://exemple.org\ntry : 3 : http://test.org\ntry : 3 : http://perl.org\n</code></pre>\n\n<p>It seems like the 2nd require of 3.pl dont work , so what can I do?</p>\n"}, {"tags": ["java", "perl"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 4, "creation_date": 1543400954, "post_id": 53517204, "comment_id": 93903318, "body": "What\u2019s the working directory in each case?"}, {"owner": {"reputation": 366, "user_id": 10428563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g8Kqa.jpg?s=128&g=1", "display_name": "Java-Dev", "link": "https://stackoverflow.com/users/10428563/java-dev"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1543401034, "post_id": 53517204, "comment_id": 93903357, "body": "This is my working Directory for both case &quot;E:\\\\perl\\\\PerlCallbyServlet&quot; @Biffen"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 2, "creation_date": 1543401133, "post_id": 53517204, "comment_id": 93903431, "body": "Are you absolutely sure about that? Try letting the Perl script print its working directory. And are there <code>*.doc</code> etc files in <i>that</i> directory?"}, {"owner": {"reputation": 366, "user_id": 10428563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g8Kqa.jpg?s=128&g=1", "display_name": "Java-Dev", "link": "https://stackoverflow.com/users/10428563/java-dev"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1543401340, "post_id": 53517204, "comment_id": 93903540, "body": "Yes, There are one .doc, one .jpg and one .pl file in this working Directory. @Biffen"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 1, "creation_date": 1543401448, "post_id": 53517204, "comment_id": 93903614, "body": "Just to not leave any stone unturned: Do you know what <i>working</i> directory means? I.e. <i>not</i> the location of a script or binary."}, {"owner": {"reputation": 366, "user_id": 10428563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g8Kqa.jpg?s=128&g=1", "display_name": "Java-Dev", "link": "https://stackoverflow.com/users/10428563/java-dev"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1543401550, "post_id": 53517204, "comment_id": 93903687, "body": "Yes, working directory means from where I am executing my script"}, {"owner": {"reputation": 366, "user_id": 10428563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g8Kqa.jpg?s=128&g=1", "display_name": "Java-Dev", "link": "https://stackoverflow.com/users/10428563/java-dev"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 1, "creation_date": 1543401593, "post_id": 53517204, "comment_id": 93903724, "body": "use Cwd; my $dir = getcwd; this is command to get working directory"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 1, "creation_date": 1543402307, "post_id": 53517204, "comment_id": 93904161, "body": "And if you print <code>$dir</code>? Does it print what you expect when run from Java?"}], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 1, "last_activity_date": 1543562615, "last_edit_date": 1543562615, "creation_date": 1543472538, "answer_id": 53532972, "question_id": 53517204, "link": "https://stackoverflow.com/questions/53517204/perl-script-is-not-fully-executing-when-called-from-java-program/53532972#53532972", "title": "Perl script is not fully executing when called from Java Program", "body": "<p>Your Perl script does not set the working directory. I make the assumption that you want to add the contents of the directory <code>E:/perl/scripts</code> to <code>@list</code>. Try to add to the Perl script:</p>\n\n<pre><code>chdir('E:/perl/scripts');\n</code></pre>\n\n<p>Sorry, I do not use Windows, so I can't test if that is the correct path under Windows. </p>\n"}], "owner": {"reputation": 366, "user_id": 10428563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g8Kqa.jpg?s=128&g=1", "display_name": "Java-Dev", "link": "https://stackoverflow.com/users/10428563/java-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 53532972, "answer_count": 1, "score": 2, "last_activity_date": 1543562615, "creation_date": 1543400659, "last_edit_date": 1543400904, "question_id": 53517204, "link": "https://stackoverflow.com/questions/53517204/perl-script-is-not-fully-executing-when-called-from-java-program", "title": "Perl script is not fully executing when called from Java Program", "body": "<p>I am trying to execute my Perl script from Java program. I have already installed Perl in my computer. Below is my sample Perl file (<code>test.pl</code>).</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse 5.010;\nuse strict;\nuse warnings;\n\nuse Path::Tiny;\nuse autodie;\n\nmy $dir = path(\"E:/perl/scripts\"); \nmy $file = $dir-&gt;child(\"file.txt\"); \nmy $file_handle = $file-&gt;openw_utf8();\n\nmy @list=('a', 'list', 'of', 'lines');\npush @list,&lt;*.doc&gt;;\npush @list,&lt;*.pdf&gt;;\npush @list,&lt;*.jpg&gt;;\npush @list,&lt;*.pl&gt;;\nprint \"Value of list = @list \\n\";\n</code></pre>\n\n<p>And this is my Java code to execute Perl script.</p>\n\n<pre><code>Process process;\n\n    try {\n        process = Runtime.getRuntime().exec(\"cmd /c perl E:\\\\perl\\\\PerlCallbyServlet\\\\test.pl\");\n        //process = Runtime.getRuntime().exec(\"perl E:\\\\perl\\\\PerlCallbyServlet\\\\test.pl\");\n        process.waitFor();\n        if (process.exitValue() == 0) {\n            System.out.println(\"Command Successful\");\n            try {\n                BufferedReader in = new BufferedReader(new InputStreamReader(process.getInputStream()));\n                String line = null;\n                while ((line = in.readLine()) != null) {\n                    System.out.println(line);\n                }\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        } else {\n            System.out.println(\"Command Failure\");\n        }\n    } catch (Exception e) {\n        System.out.println(\"Exception: \" + e.toString());\n    }\n</code></pre>\n\n<p>Now first when I am trying to run this Java class I am getting below output.</p>\n\n<pre><code>Command Successful\nValue of list = a list of lines \n</code></pre>\n\n<p>But when I am running this script from command prompt using command</p>\n\n<pre><code>perl test.pl\n</code></pre>\n\n<p>My output is as below:</p>\n\n<pre><code>Value of list = a list of lines one.doc test.pl photo.jpg\n</code></pre>\n\n<p>So I am not getting same output of a Perl script executing from Java program as from command prompt.</p>\n"}, {"tags": ["xml", "perl", "xml-parsing"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 1677804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d568368b3869e48b5b166e2cee0391?s=128&d=identicon&r=PG", "display_name": "user1677804", "link": "https://stackoverflow.com/users/1677804/user1677804"}, "edited": false, "score": 0, "creation_date": 1543398425, "post_id": 53516324, "comment_id": 93901792, "body": "Worked like a charm! Thank you so much!"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 4, "last_activity_date": 1543397853, "creation_date": 1543397853, "answer_id": 53516324, "question_id": 53516070, "link": "https://stackoverflow.com/questions/53516070/xml-get-only-some-child-nodes-of-a-node/53516324#53516324", "title": "XML: Get only some child nodes of a node", "body": "<p><code>//parameter</code> searches for <code>parameter</code> everywhere, you only need to search under <code>session</code>, i.e. under the current node:</p>\n\n<pre><code>    foreach my $parameter ($session-&gt;findnodes('.//parameter')) {\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1543470870, "last_edit_date": 1543470870, "creation_date": 1543454363, "answer_id": 53530500, "question_id": 53516070, "link": "https://stackoverflow.com/questions/53516070/xml-get-only-some-child-nodes-of-a-node/53530500#53530500", "title": "XML: Get only some child nodes of a node", "body": "<pre class=\"lang-xml prettyprint-override\"><code>//parameter\n</code></pre>\n\n<p>is short for</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>/descendant::parameter\n</code></pre>\n\n<p>which means a descendant of the root node (<code>/</code>) named <code>parameter</code>, but you want to get descendants of the context node. For that, you want</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>descendant::parameter\n</code></pre>\n\n<p>which can also be written as</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>.//parameter\n</code></pre>\n\n<p>The thing is, <code>parameter</code> is a child of sessions, so what you really want is just</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>child::parameter\n</code></pre>\n\n<p>which can also be written as</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>parameter\n</code></pre>\n\n<hr>\n\n<p>Final code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse XML::LibXML;\n\nmy $filename = 'E:/perl_files/abc.xml';\nmy $dom = XML::LibXML-&gt;load_xml(location =&gt; $filename);\n\nforeach my $session ($dom-&gt;findnodes('/resource/session'))         # &lt;---\n{\n    print \"In SESSION \\n\";\n    foreach my $parameter ($session-&gt;findnodes('parameter')) {     # &lt;---\n        my $name= $parameter-&gt;getAttribute('name');\n        my $value= $parameter-&gt;getAttribute('value');\n        print \"Tag in session is $name with value $value\\n\";\n    }\n    print \"END OF SESSION\\n\";   \n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 1677804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d568368b3869e48b5b166e2cee0391?s=128&d=identicon&r=PG", "display_name": "user1677804", "link": "https://stackoverflow.com/users/1677804/user1677804"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 53530500, "answer_count": 2, "score": 3, "last_activity_date": 1543470870, "creation_date": 1543397121, "question_id": 53516070, "link": "https://stackoverflow.com/questions/53516070/xml-get-only-some-child-nodes-of-a-node", "title": "XML: Get only some child nodes of a node", "body": "<p>I want to traverse the two sessions in the below xml as two seperate nodes:</p>\n\n<p>abc.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt; \n&lt;resource&gt;    \n&lt;session&gt;\n     &lt;parameter name=\"QWS\" value=\"N1\"/&gt; \n     &lt;parameter name=\"AQC\" value=\"Y2\"/&gt;\n     &lt;parameter name=\"VDF\" value=\"301\"/&gt;\n     &lt;parameter name=\"VTT\" value=\"X2\"/&gt;\n     &lt;parameter name=\"HRR\" value=\"Y2\"/&gt;\n &lt;/session&gt;\n &lt;session&gt;\n    &lt;parameter name=\"ABC\" value=\"N\"/&gt; \n     &lt;parameter name=\"XYZ\" value=\"Y\"/&gt;\n     &lt;parameter name=\"GHI\" value=\"30\"/&gt;\n     &lt;parameter name=\"DEF\" value=\"X\"/&gt;\n     &lt;parameter name=\"QQW\" value=\"Y\"/&gt;  \n    &lt;/session&gt; \n&lt;/resource&gt;\n</code></pre>\n\n<p>However when i run this code, it traverses through both sessions both times:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse XML::LibXML;\n\nmy $filename = 'E:/perl_files/abc.xml';\nmy $dom = XML::LibXML-&gt;load_xml(location =&gt; $filename);\n\nforeach my $session ($dom-&gt;findnodes('//session'))\n{\n    print \"In SESSION \\n\";\n    foreach my $parameter ($session-&gt;findnodes('//parameter')) {\n        my $name= $parameter-&gt;getAttribute('name');\n        my $value= $parameter-&gt;getAttribute('value');\n        print \"Tag in session is $name with value $value\\n\";\n    }\n    print \"END OF SESSION\\n\";   \n}\n</code></pre>\n\n<p>Leaving me with this output:</p>\n\n<pre><code>In SESSION\nTag in session is QWS with value N1\nTag in session is AQC with value Y2\nTag in session is VDF with value 301\nTag in session is VTT with value X2\nTag in session is HRR with value Y2\nTag in session is ABC with value N\nTag in session is XYZ with value Y\nTag in session is GHI with value 30\nTag in session is DEF with value X\nTag in session is QQW with value Y\nEND OF SESSION\nIn SESSION\nTag in session is QWS with value N1\nTag in session is AQC with value Y2\nTag in session is VDF with value 301\nTag in session is VTT with value X2\nTag in session is HRR with value Y2\nTag in session is ABC with value N\nTag in session is XYZ with value Y\nTag in session is GHI with value 30\nTag in session is DEF with value X\nTag in session is QQW with value Y\nEND OF SESSION\n</code></pre>\n\n<p>I would like the output to be </p>\n\n<pre><code>In SESSION\nTag in session is QWS with value N1\nTag in session is AQC with value Y2\nTag in session is VDF with value 301\nTag in session is VTT with value X2\nTag in session is HRR with value Y2\nEND OF SESSION\nIn SESSION\nTag in session is ABC with value N\nTag in session is XYZ with value Y\nTag in session is GHI with value 30\nTag in session is DEF with value X\nTag in session is QQW with value Y\nEND OF SESSION\n</code></pre>\n\n<p>I am using XML::LibXML.\nWhat changes could I make to get the child nodes of only one session every time? \nI saw answers using childNodes(), but that would return a list and I do not want to use grep to find a particular node.</p>\n"}, {"tags": ["linux", "file", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543385834, "post_id": 53512417, "comment_id": 93895548, "body": "Why and how does the filename change -- does the inode stay the same?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543385892, "post_id": 53512417, "comment_id": 93895569, "body": "Do you need to keep track of individual files or just get all logs?"}, {"owner": {"reputation": 646, "user_id": 3640905, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/caf327259e41ec96ce59260c1c60b0b2?s=128&d=identicon&r=PG", "display_name": "CRSouser", "link": "https://stackoverflow.com/users/3640905/crsouser"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543385971, "post_id": 53512417, "comment_id": 93895598, "body": "The app (which i have zero control) is written to just dump them out fire and forget. Each file is independent vs an extension of the original file with no begin or end marker within the file itself.."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543386201, "post_id": 53512417, "comment_id": 93895686, "body": "My impression was that files are being appended to and you want to keep fetching the new content ... is that not correct? Or do you mean that it&#39;s always new files which you need to read, but that they have hard-to-predict names?"}, {"owner": {"reputation": 646, "user_id": 3640905, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/caf327259e41ec96ce59260c1c60b0b2?s=128&d=identicon&r=PG", "display_name": "CRSouser", "link": "https://stackoverflow.com/users/3640905/crsouser"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543386572, "post_id": 53512417, "comment_id": 93895843, "body": "I want to keep fetching new content from them as if they were a syslog feed basically, but being the tail read stops at the end of each file and moves onto the next one (which ive figured out the convention for each) im looking for a way to basically script the line by line copy for a continuous read based on changing file names and only reading the latest at any given time."}, {"owner": {"reputation": 985, "user_id": 1028276, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e6162fc9b0b93763c9b03531b32ab519?s=128&d=identicon&r=PG", "display_name": "eeijlar", "link": "https://stackoverflow.com/users/1028276/eeijlar"}, "edited": false, "score": 0, "creation_date": 1543387560, "post_id": 53512417, "comment_id": 93896253, "body": "Have you tried &#39;multitail&#39;:                                                                        <a href=\"https://superuser.com/questions/1243634/how-to-tail-multiple-pipe-files-or-streams\" title=\"how to tail multiple pipe files or streams\">superuser.com/questions/1243634/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543389026, "post_id": 53513916, "comment_id": 93896891, "body": "This is what I had in mind but it is unclear (to me) whether they need to keep track of individual files, in which case the first question (for me) is whether the inode changes or not."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543389941, "post_id": 53513916, "comment_id": 93897303, "body": "That&#39;s why I suggested to monitor the directory, not the files. Any file name change should trigger the watcher."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543433313, "post_id": 53513916, "comment_id": 93922302, "body": "Yes, that will trigger it for a new file. But how does one find out which old file that new file adds to? If that is what is happening (and if that is needed to be known).  I couldn&#39;t figure out what exactly is going on in the question, what I think affects how/what to monitor."}, {"owner": {"reputation": 646, "user_id": 3640905, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/caf327259e41ec96ce59260c1c60b0b2?s=128&d=identicon&r=PG", "display_name": "CRSouser", "link": "https://stackoverflow.com/users/3640905/crsouser"}, "edited": false, "score": 0, "creation_date": 1543450685, "post_id": 53513916, "comment_id": 93928578, "body": "I am not sure this will work but I am at least looking at it. Put some additional info in the question. Can inotify instead of just a path handle regex patterns for files under a directory?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1543471616, "post_id": 53513916, "comment_id": 93933373, "body": "I would implement the file name detection, i.e. your regex -&gt; log file type, into the inotify directory watcher. You&#39;ll need a hash that holds the currently monitored log file for each monitored type. If the code recognizes that a new file has been added for a log file type then it means the log file has changed, i.e. the watcher should trigger (whatever system you use) to stop reading from the old one and start reading from the new one."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1543388781, "creation_date": 1543388781, "answer_id": 53513916, "question_id": 53512417, "link": "https://stackoverflow.com/questions/53512417/how-to-stream-log-files-content-that-is-constantly-changing-file-names-in-perl/53513916#53513916", "title": "How to stream log files content that is constantly changing file names in perl?", "body": "<p>How about monitoring the log directory for changes with Linux inotify, e.g. <code>Linux::inotify2</code>? Then you could detect when new log files are created, stop reading from the old log file and start reading from the new log file.</p>\n"}, {"tags": [], "owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "is_accepted": false, "score": 1, "last_activity_date": 1545400152, "last_edit_date": 1545400152, "creation_date": 1545389285, "answer_id": 53883443, "question_id": 53512417, "link": "https://stackoverflow.com/questions/53512417/how-to-stream-log-files-content-that-is-constantly-changing-file-names-in-perl/53883443#53883443", "title": "How to stream log files content that is constantly changing file names in perl?", "body": "<p>Try <a href=\"https://metacpan.org/pod/tailswitch\" rel=\"nofollow noreferrer\">tailswitch</a>. I created this script to tail log files that are rotated daily and have YYYY-MM-DD on their names. To use this script, you just say:</p>\n\n<pre><code>% tailswitch '*.log'\n</code></pre>\n\n<p>The quoting prevents the shell from interpreting the glob pattern. The script will perform glob pattern from time to time to switch to a newer file based on its name.</p>\n"}], "owner": {"reputation": 646, "user_id": 3640905, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/caf327259e41ec96ce59260c1c60b0b2?s=128&d=identicon&r=PG", "display_name": "CRSouser", "link": "https://stackoverflow.com/users/3640905/crsouser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1545400152, "creation_date": 1543381113, "last_edit_date": 1543450460, "question_id": 53512417, "link": "https://stackoverflow.com/questions/53512417/how-to-stream-log-files-content-that-is-constantly-changing-file-names-in-perl", "title": "How to stream log files content that is constantly changing file names in perl?", "body": "<p>I a series of applications on Linux systems that I need to basically constantly 'stream' out or even just 'tail' out but the challenge is the filenames are constantly rolling and changing. </p>\n\n<p>The are all date encoded (dates being in different formats) and each then have different incremented formats.</p>\n\n<p>Most of them start with one and increase, but one doesn't have an extension and then adds an extension past the first file and the other increments a number but once hitting 99 rolls to increment a alpha and returns the numeric to 01 and then up again as it rolls so quickly.</p>\n\n<p>I just have the OS level shell scripting, OS command line utilities, and perl available to me to handle this situation for another application to pickup and read these logs.   </p>\n\n<p>The new files are always created right when it starts writing to the new file and groups of different logs (some I am reading some I am not) are being written to the same directory so I cannot just pickup anything hitting the directory.</p>\n\n<p>If I simply 'tail -n 1000000 -f |' them today this works fine for the reader application I am using until the file changes and I cannot setup file lists ranges within the reader application, but can pre-process them so they basically appear as a continuous stream to the reader vs. the reader directly invoking commands to read them.  A <a href=\"https://users.cs.cf.ac.uk/Dave.Marshall/PERL/node241.html\" rel=\"nofollow noreferrer\">simple Perl log reader like this</a> also work fine for a static filename but not for dynamic ones. It is critical I don't re-process any logs lines and just capture new lines being written to the logs.</p>\n\n<p>I admit I am not any form a Perl guru, and the best answers / clue I've been able to find so far is the use of <a href=\"https://stackoverflow.com/questions/5093477/perl-read-multiple-file\">Perl's Glob function to possibly</a> do this but the examples I've found basically reprocess all of the files on each run then seem to stop. </p>\n\n<p>Example File Names I am dealing with across multiple apps I am trying to handle.. </p>\n\n<ul>\n<li><strong>appA</strong>_YYMMDD.log</li>\n<li><strong>appA</strong>_YYMMDD_0001.log </li>\n<li><strong>appA</strong>_YYMMDD_0002.log </li>\n<li>WS01<strong>APPB</strong>_YYMMDD.log </li>\n<li>WS02<strong>APPB</strong>_YYMMDD.log </li>\n<li>WS03<strong>AppB</strong>_YYMMDD.log</li>\n<li><strong>APPC</strong>MMDD_A01.log </li>\n<li><strong>APPC</strong>MMDD_B01.log </li>\n<li>YYYYMMDD_001_<strong>APPD</strong>.log </li>\n</ul>\n\n<p>As denoted above the files do not have the same inode and simply monitoring the directory for change is not possible as a lot of things are written there. On the dev system it has more than 50 logs being written to the directory and thousands of files and I am only trying to retrieve 5.  I am seeing if multitail can be made available to try that suggestion but it is not currently available and installing any additional RPMs in the environment is generally a multi-month battle. </p>\n\n<p><em>ls -i\n24792 APPA_180901.log\n24805 APPA__180902.log\n17011 APPA__180903.log\n17072 APPA__180904.log\n24644 APPA__180905.log\n17081 APPA__180906.log\n17115 APPA__180907.log</em></p>\n\n<p>So really the root of what I am trying to do is simply a continuous stream regardless if the file name changes and not have to run the extract command repeatedly nor have big breaks in the data feed while some script figures out that the file being logged to has changed. I don't need to parse the contents (my other app does that)..  Is there an easy way of handling this changing file name?</p>\n"}, {"tags": ["shell", "perl", "awk", "sed", "scripting"], "comments": [{"owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 0, "creation_date": 1543358618, "post_id": 53507382, "comment_id": 93888617, "body": "Is it possible that there is a <code>Y</code> between two <code>X</code> lines?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1543360235, "post_id": 53507382, "comment_id": 93889162, "body": "What should be output if there is no X in the input?"}, {"owner": {"reputation": 398, "user_id": 9206667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d6bb27b254ebafea21e344dc2172c2?s=128&d=identicon&r=PG&f=1", "display_name": "Lance E.T. Compte", "link": "https://stackoverflow.com/users/9206667/lance-e-t-compte"}, "reply_to_user": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 0, "creation_date": 1543361292, "post_id": 53507382, "comment_id": 93889458, "body": "@kvantour: No. There should never be an &quot;X&quot; there, but I believe that rule is secondary to the need to find the LAST &quot;X&quot;."}, {"owner": {"reputation": 398, "user_id": 9206667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d6bb27b254ebafea21e344dc2172c2?s=128&d=identicon&r=PG&f=1", "display_name": "Lance E.T. Compte", "link": "https://stackoverflow.com/users/9206667/lance-e-t-compte"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1543361321, "post_id": 53507382, "comment_id": 93889461, "body": "@EdMorton: There will always be a &quot;X&quot; in the input. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 398, "user_id": 9206667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d6bb27b254ebafea21e344dc2172c2?s=128&d=identicon&r=PG&f=1", "display_name": "Lance E.T. Compte", "link": "https://stackoverflow.com/users/9206667/lance-e-t-compte"}, "edited": false, "score": 0, "creation_date": 1543362227, "post_id": 53507444, "comment_id": 93889709, "body": "If a platform has &quot;sed&quot;, but not &quot;awk&quot;, I&#39;d be surprised.  Both &quot;awk&quot; and &quot;tac&quot; are in &quot;/usr/bin&quot; on some platforms, but &quot;sed&quot; is in &quot;/bin&quot;. I&#39;m not sure if it&#39;s riskier to depend on &quot;tac&quot; or &quot;awk&quot;...  Thanks for your help.  I like your short answer..."}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1543381403, "post_id": 53507444, "comment_id": 93894148, "body": "If a platform is POSIX, it will have <code>awk</code>"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 398, "user_id": 9206667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d6bb27b254ebafea21e344dc2172c2?s=128&d=identicon&r=PG&f=1", "display_name": "Lance E.T. Compte", "link": "https://stackoverflow.com/users/9206667/lance-e-t-compte"}, "edited": false, "score": 1, "creation_date": 1543499603, "post_id": 53507444, "comment_id": 93948147, "body": "@LanceE.T.Compte it&#39;s riskier to depend on tac than awk. Over the past 35 years or so Ive used many machines that didn&#39;t have tac but none that didn&#39;t have some flavor of awk."}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": true, "score": 4, "last_activity_date": 1543349786, "creation_date": 1543349786, "answer_id": 53507444, "question_id": 53507382, "link": "https://stackoverflow.com/questions/53507382/sed-print-all-lines-through-the-last-match-of-pattern-a-then-print-only-lines/53507444#53507444", "title": "sed: print all lines THROUGH the LAST match of pattern A, then print ONLY lines that match pattern B", "body": "<p>without <code>tac</code>, a double-pass approach with <code>awk</code></p>\n\n<pre><code>$ awk 'NR==FNR{if(/^X$/) lx=NR; next} FNR&lt;=lx || /^Y$/' file{,}\n\na\nb\nX\nd\nX\nY\nY\n</code></pre>\n\n<p>mark the last index of <code>X</code> and print all before that index and other matching pattern.</p>\n"}, {"comments": [{"owner": {"reputation": 398, "user_id": 9206667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d6bb27b254ebafea21e344dc2172c2?s=128&d=identicon&r=PG&f=1", "display_name": "Lance E.T. Compte", "link": "https://stackoverflow.com/users/9206667/lance-e-t-compte"}, "edited": false, "score": 0, "creation_date": 1543361993, "post_id": 53509224, "comment_id": 93889644, "body": "How does your &quot;sed&quot; improve on mine, other than to get rid of &quot;tac&quot;? It seems you&#39;re finding the line number of the last match..."}, {"owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "edited": false, "score": 0, "creation_date": 1543364675, "post_id": 53509224, "comment_id": 93890350, "body": "Also can use &#39;.&#39; instead of \\s\\S by adding the s modifier: perl -0777 -nE &#39;say $1 while (/(^.*^X$|^Y$)/gms)&#39; file"}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1543381357, "post_id": 53509224, "comment_id": 93894134, "body": "<i>How does your &quot;sed&quot; improve on mine, other than to get rid of &quot;tac&quot;?</i> That is the improvement. <code>tac</code> is not that common on non Linux platforms, but the <code>sed</code> I have there is POSIX compliant. Indeed, the pipeline with <code>cat</code> is to determine the line number of the last <code>X</code>"}], "tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 2, "last_activity_date": 1543358212, "last_edit_date": 1543358212, "creation_date": 1543357770, "answer_id": 53509224, "question_id": 53507382, "link": "https://stackoverflow.com/questions/53507382/sed-print-all-lines-through-the-last-match-of-pattern-a-then-print-only-lines/53509224#53509224", "title": "sed: print all lines THROUGH the LAST match of pattern A, then print ONLY lines that match pattern B", "body": "<p>To avoid reading twice, you could use a <code>perl</code>:</p>\n\n<pre><code>$ perl -0777 -lnE 'say $1 while (/(\\A[\\s\\S]*^X$|^Y$)/gm)' file\na\nb\nX\nd\nX\nY\nY\n</code></pre>\n\n<p>Or, with <code>sed</code> and common utilities:</p>\n\n<pre><code>$ sed_cmd=$(printf \"1,%sp; /^Y/p\" $(cat -n file | sed -nE 's/^[[:space:]]*([[:digit:]][[:digit:]]*)[[:space:]]*X/\\1/p' | tail -n 1))\n$ sed -nE \"$sed_cmd\" file\n# same output\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 398, "user_id": 9206667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d6bb27b254ebafea21e344dc2172c2?s=128&d=identicon&r=PG&f=1", "display_name": "Lance E.T. Compte", "link": "https://stackoverflow.com/users/9206667/lance-e-t-compte"}, "edited": false, "score": 0, "creation_date": 1543361615, "post_id": 53509476, "comment_id": 93889544, "body": "I do find this kind of brute force approach is quite readable/maintainable. I&#39;m already worried about portability since I need to run on many different flavors of Linux. Isn&#39;t list::util in coremodules now?"}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "reply_to_user": {"reputation": 398, "user_id": 9206667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d6bb27b254ebafea21e344dc2172c2?s=128&d=identicon&r=PG&f=1", "display_name": "Lance E.T. Compte", "link": "https://stackoverflow.com/users/9206667/lance-e-t-compte"}, "edited": false, "score": 0, "creation_date": 1543362242, "post_id": 53509476, "comment_id": 93889712, "body": "Yes, <code>List::Util</code> is a core module."}], "tags": [], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "is_accepted": false, "score": 0, "last_activity_date": 1543362603, "last_edit_date": 1543362603, "creation_date": 1543359165, "answer_id": 53509476, "question_id": 53507382, "link": "https://stackoverflow.com/questions/53507382/sed-print-all-lines-through-the-last-match-of-pattern-a-then-print-only-lines/53509476#53509476", "title": "sed: print all lines THROUGH the LAST match of pattern A, then print ONLY lines that match pattern B", "body": "<p>Here's a somewhat more logically explicit version using Perl.</p>\n\n<pre><code>perl -MList::Util=max -lnE '\n    $lines{$.} = $_; \n    eof || next; \n    $last_match = max grep {$lines{$_} =~ /^X/} keys %lines;\n    say for @lines{1 .. $last_match};\n    say for grep {$_ =~ /^Y/} @lines{$last_match .. $.};\n' /path/to/logfile\n</code></pre>\n"}], "owner": {"reputation": 398, "user_id": 9206667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d6bb27b254ebafea21e344dc2172c2?s=128&d=identicon&r=PG&f=1", "display_name": "Lance E.T. Compte", "link": "https://stackoverflow.com/users/9206667/lance-e-t-compte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 53507444, "answer_count": 3, "score": 1, "last_activity_date": 1543362603, "creation_date": 1543349435, "question_id": 53507382, "link": "https://stackoverflow.com/questions/53507382/sed-print-all-lines-through-the-last-match-of-pattern-a-then-print-only-lines", "title": "sed: print all lines THROUGH the LAST match of pattern A, then print ONLY lines that match pattern B", "body": "<p>Esteemed colleagues...</p>\n\n<p>I generate log files of several thousand lines of the form:</p>\n\n<pre><code>a\nb\nX\nd\nX\ne\nb\ng\nY\na\nY\nd\n</code></pre>\n\n<p>For example, I would like the output of my script to print all lines THROUGH the last match of \"^X\" and then print only matches of \"^Y\".  Desired output for above:</p>\n\n<pre><code>a\nb\nX\nd\nX\nY\nY\n</code></pre>\n\n<p>\"X\" will always appear, but \"Y\" may not.  In cases where \"Y\" does not appear, I <em>believe</em> that the last \"X\" will be on the last line of the file.</p>\n\n<p>It was quite difficult to do this with \"sed\", although that's what I've been trying. I use \"tac\" to flip the line order so I can delete anything not matching \"^Y\" through the <em>FIRST</em> match of \"^X\". Because I don't use \"-n\", after that first match of \"^X\", all lines are echoed.  I just use \"tac\" again to flip it around and put it in a file.</p>\n\n<p>This <em>seems</em> to work...</p>\n\n<pre><code>tac /path/to/logfile | \\\nsed -e '1,/^X/ { /^Y/!d }' | \\\ntac &gt; /output/path/logfile.processed\n</code></pre>\n\n<p>No...?</p>\n\n<p>PS: Is \"tac\" commonly available on all Linux?</p>\n"}, {"tags": ["perl", "gnuplot"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1543349173, "post_id": 53507177, "comment_id": 93884441, "body": "Please show how you populate the hash and what it really contains. When I prepend <code>my %fail_counts = qw( blah1 8 blah2 8 blah3 65 blah4 39 blah5 23 blah6 12 );</code> to the script, it works correctly."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543349189, "post_id": 53507177, "comment_id": 93884446, "body": "Well, your range is off so you just don&#39;t get to see all points (except for the 8).  also, what are &quot;blah&quot;s for the x-axis?"}, {"owner": {"reputation": 21, "user_id": 556335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35449ff8133eab4409f25b46297f8568?s=128&d=identicon&r=PG", "display_name": "Kuli", "link": "https://stackoverflow.com/users/556335/kuli"}, "edited": false, "score": 0, "creation_date": 1543351751, "post_id": 53507177, "comment_id": 93885610, "body": "I used blah&#39;s to obfuscate the actual data which is probably confidential ;)  Updated original with how the hash is formed..."}, {"owner": {"reputation": 21, "user_id": 556335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35449ff8133eab4409f25b46297f8568?s=128&d=identicon&r=PG", "display_name": "Kuli", "link": "https://stackoverflow.com/users/556335/kuli"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543351981, "post_id": 53507177, "comment_id": 93885732, "body": "@zdim can you elaborate on my range?  I have seen so many examples of histograms and none of them have been very clear with how you identify the rows and columns.  I don&#39;t specify any range specifically other than auto x?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1543354370, "post_id": 53507177, "comment_id": 93886827, "body": "You get a warning <code>empty y range [8:8], adjusting to [7.92:8.08]</code> so it seemed to me that out of data you show only those with y==8 are used/shown. (I rarely used histograms in gnuplot so please check this.) Perhaps you want to set ranges anyway, given the warnings (while I wouldn&#39;t expect that you&#39;d <i>have to</i> do that for histograms). But @choroba ran this and it worked so maybe I am wrong."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 556335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35449ff8133eab4409f25b46297f8568?s=128&d=identicon&r=PG", "display_name": "Kuli", "link": "https://stackoverflow.com/users/556335/kuli"}, "is_accepted": false, "score": 0, "last_activity_date": 1543503056, "creation_date": 1543503056, "answer_id": 53541679, "question_id": 53507177, "link": "https://stackoverflow.com/questions/53507177/perl-gnuplot-inline-histogram/53541679#53541679", "title": "Perl Gnuplot inline Histogram", "body": "<p>I looks like there are extra characters in the hash as seen by @choroba</p>\n"}], "owner": {"reputation": 21, "user_id": 556335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35449ff8133eab4409f25b46297f8568?s=128&d=identicon&r=PG", "display_name": "Kuli", "link": "https://stackoverflow.com/users/556335/kuli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1543503056, "creation_date": 1543348546, "last_edit_date": 1543351908, "question_id": 53507177, "link": "https://stackoverflow.com/questions/53507177/perl-gnuplot-inline-histogram", "title": "Perl Gnuplot inline Histogram", "body": "<p>I am trying to feed the output of a 2x column hash to a simple barchart using gnuplot.</p>\n\n<p>For some reason it doesnt like something about my hash, or for some reason the inline data is not correct.  I only get the first row and it throws a few errors.</p>\n\n<pre><code>open my $out,'|-','gnuplot';\nsay $out 'unset key';\nsay $out 'set auto x';\nsay $out 'set ylabel \"Fail Count\"';\nsay $out \"set style histogram gap 5\";\nsay $out \"plot '-' using 2:xtic(1)\";\nforeach (keys %fail_counts) {\n  if ($fail_counts{$_} &gt; 1) {\n    say $out \"$_  $fail_counts{$_} \"; \n  }  \n}\nsay $out 'e';\nflush $out;\n&lt;STDIN&gt;;\nclose $out;\n</code></pre>\n\n<p>Here is what my hash looks like:</p>\n\n<p>blah1 8<br>\nblah2 8<br>\nblah3 65<br>\nblah4 39<br>\nblah5 23<br>\nblah6 12 </p>\n\n<p>Errors:<br>\nWarning: empty x range [0:0], adjusting to [-1:1]<br>\nWarning: empty y range [8:8], adjusting to [7.92:8.08]</p>\n\n<p>Here is how the hash is populated, its just a tabulation of individual rows of fail data:</p>\n\n<pre><code>#sum and plot the categories\n%fail_counts = ();\nforeach $fail (@fail_array) {\n  @temp_array=split/\\s+/,$fail;  \n  if (exists $fail_counts{$temp_array[4]}) {\n    $fail_counts{$temp_array[4]} = $fail_counts{$temp_array[4]} + 1;\n  } else {\n    $fail_counts{$temp_array[4]} = 1;\n  }\n}\n</code></pre>\n"}, {"tags": ["perl", "redis", "mojolicious"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1543343163, "post_id": 53505078, "comment_id": 93881501, "body": "Can you include the rest of the code that sets up the websocket (from the usage of $c and $c-&gt;app I assume it&#39;s within a Mojolicious websocket route) and describe what&#39;s not working?"}, {"owner": {"reputation": 499, "user_id": 10068025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wfKdy.jpg?s=128&g=1", "display_name": "Zarul Zakuan", "link": "https://stackoverflow.com/users/10068025/zarul-zakuan"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1543364195, "post_id": 53505078, "comment_id": 93890233, "body": "@Grinnz Thank you. I have editted my post. The code was based on the module example <a href=\"https://metacpan.org/source/JHTHORSEN/Mojo-Redis-3.11/examples/chat.pl\" rel=\"nofollow noreferrer\">metacpan.org/source/JHTHORSEN/Mojo-Redis-3.11/examples/chat.&zwnj;&#8203;pl</a>, except the password in URI part.  And to verify if it&#39;s working or not, I have another script that is using Redis module. This script works works everytime I do publish directly from redis-cli"}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1543373054, "post_id": 53510391, "comment_id": 93892213, "body": "The problem was likely that your Mojo::Redis object goes out of scope at the end of that action, which closes the connection. By declaring it as a state variable in a helper it stays around for the rest of that process."}, {"owner": {"reputation": 499, "user_id": 10068025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wfKdy.jpg?s=128&g=1", "display_name": "Zarul Zakuan", "link": "https://stackoverflow.com/users/10068025/zarul-zakuan"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1543373200, "post_id": 53510391, "comment_id": 93892240, "body": "@Grinnz Thank you! Yes I just noticed that as well. But how and when does it goes out of scope?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1543373256, "post_id": 53510391, "comment_id": 93892251, "body": "&quot;my&quot; variables go out of scope at the end of the block they are declared in if nothing else is holding a strong reference to them."}, {"owner": {"reputation": 499, "user_id": 10068025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wfKdy.jpg?s=128&g=1", "display_name": "Zarul Zakuan", "link": "https://stackoverflow.com/users/10068025/zarul-zakuan"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1543373391, "post_id": 53510391, "comment_id": 93892285, "body": "I see.. I thought when it reaches &#39;listen&#39;, the reference stays in that block"}], "tags": [], "owner": {"reputation": 499, "user_id": 10068025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wfKdy.jpg?s=128&g=1", "display_name": "Zarul Zakuan", "link": "https://stackoverflow.com/users/10068025/zarul-zakuan"}, "is_accepted": true, "score": 1, "last_activity_date": 1543365378, "creation_date": 1543365378, "answer_id": 53510391, "question_id": 53505078, "link": "https://stackoverflow.com/questions/53505078/perl-redis-listen-does-not-subscribe-to-channel/53510391#53510391", "title": "Perl Redis listen does not subscribe to channel", "body": "<p>Lol this is the second question that I answered myself. \nThis finally works when I moved the Mojo::Redis-new bit as helper</p>\n\n<p>So in the router file;</p>\n\n<pre><code>$self-&gt;helper(redis =&gt; sub {\n        state $redis = Mojo::Redis-&gt;new('redis://anything:jejakredis1234!@localhost:6379/');\n    });\n</code></pre>\n\n<p>and in controller</p>\n\n<pre><code>sub data_stream {\n    my $c = shift;\n    $c-&gt;inactivity_timeout(300);\n\n    my $pubsub = $c-&gt;redis-&gt;pubsub;\n\n    my $cb = $pubsub-&gt;listen('data' =&gt; sub  {\n        my ($pubsub, $msg) = @_;\n        $c-&gt;app-&gt;log-&gt;debug(\"WS: $msg\");\n        $c-&gt;send({text =&gt; $msg});\n    });\n\n    $c-&gt;on(finish =&gt; sub {\n        $c-&gt;app-&gt;log-&gt;debug(\"WS CONNECTION CLOSED!\");\n        $pubsub-&gt;unlisten('data' =&gt; $cb)\n    });\n}\n</code></pre>\n"}], "owner": {"reputation": 499, "user_id": 10068025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wfKdy.jpg?s=128&g=1", "display_name": "Zarul Zakuan", "link": "https://stackoverflow.com/users/10068025/zarul-zakuan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 53510391, "answer_count": 1, "score": 0, "last_activity_date": 1543365378, "creation_date": 1543339764, "last_edit_date": 1543364105, "question_id": 53505078, "link": "https://stackoverflow.com/questions/53505078/perl-redis-listen-does-not-subscribe-to-channel", "title": "Perl Redis listen does not subscribe to channel", "body": "<p>This code doesn't seem to be working and I don't know how to debug this.. I'm using Mojolicious to send out subscribed messages through websocket.</p>\n\n<pre><code>use Mojo::Redis;\n#Controller\nsub data_stream {\n    my $c = shift;\n    $c-&gt;inactivity_timeout(300);\n\n    my $redis = Mojo::Redis-new('redis://xxxxxxxx@localhost:6379/');\n    my $pubsub = $redis-&gt;pubsub;\n\n    my $cb = $pubsub-&gt;listen('data' =&gt; sub  {\n        my ($pubsub, $msg) = @_;\n        $c-&gt;app-&gt;log-&gt;debug(\"WS: $msg\");\n        $c-&gt;send({text =&gt; $msg});\n    });\n\n    $c-&gt;on(finish =&gt; sub {\n        $c-&gt;app-&gt;log-&gt;debug(\"WS CONNECTION CLOSED!\");\n        $pubsub-&gt;unlisten('data' =&gt; $cb)\n    });\n}\n</code></pre>\n\n<p>Sub above is called from the following router </p>\n\n<pre><code>$router-&gt;websocket('/data_stream')-&gt;to('grid#data_stream');\n</code></pre>\n"}, {"tags": ["macos", "perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1543339897, "last_edit_date": 1543339897, "creation_date": 1543338006, "answer_id": 53504619, "question_id": 53504380, "link": "https://stackoverflow.com/questions/53504380/downgrade-perl-version-on-mac/53504619#53504619", "title": "Downgrade perl version on mac", "body": "<p>The default installation location is</p>\n\n<pre><code>/usr/bin/perl\n</code></pre>\n\n<p>But that might not be where it's located on MacOS. You can find out for sure by running the following:</p>\n\n<pre><code>perlbrew off\nwhich perl\n</code></pre>\n\n<p>(Restarting the terminal will reactivate perlbrew.)</p>\n\n<hr>\n\n<p>The build you installed is in a directory under the directory returned by the following:</p>\n\n<pre><code>printf -- \"%s\\n\" \"${PERLBREW_ROOT:-$HOME/perl5/perlbrew}/perls\"\n</code></pre>\n\n<hr>\n\n<p>You can modify the PATH so that <code>perl</code> runs the desired build using</p>\n\n<pre><code>perlbrew switch &lt;name&gt;     # Changes it for this shell instance and those created later.\nperlbrew use &lt;name&gt;        # Changes it for this shell instance only.\n</code></pre>\n\n<p>You can get the names to use from</p>\n\n<pre><code>perlbrew list\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/q/25188575/589924\">Switching to the system Perl using perlbrew</a> for switching to the system Perl.</p>\n\n<hr>\n\n<p>Scripts need to have the correct <code>perl</code> specified on their shebang (<code>#!</code>) line. Scripts installed by the standard Perl module installers will have this set correctly, but you'll need to edit the shebang (<code>#!</code>) line of scripts you've installed manually.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1543385430, "post_id": 53505448, "comment_id": 93895380, "body": "How does this answer any of the questions? They OP is already using perlbrew and they&#39;re asking how to use it along with other questions, none of which this answers. On top of that, using <code>&#47;usr&#47;bin&#47;env perl</code> is a bad idea for the very reason you said: It will change what perl us used as <code>.perl-version</code> is changed, rather than using the one for which it was installed."}, {"owner": {"reputation": 1465, "user_id": 7327755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EsjT4.jpg?s=128&g=1", "display_name": "Ashton Wiersdorf", "link": "https://stackoverflow.com/users/7327755/ashton-wiersdorf"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1543417443, "post_id": 53505448, "comment_id": 93913410, "body": "@ikegami This is primarily for anyone else who runs across this question. I\u2019ve needed to run lower versions of peel for certain applications on macOS, and this has been the best solution for me. (I\u2019ve run perlbrew as well as plenv.) I hope someone else might find it useful."}], "tags": [], "owner": {"reputation": 1465, "user_id": 7327755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EsjT4.jpg?s=128&g=1", "display_name": "Ashton Wiersdorf", "link": "https://stackoverflow.com/users/7327755/ashton-wiersdorf"}, "is_accepted": false, "score": 0, "last_activity_date": 1543341218, "creation_date": 1543341218, "answer_id": 53505448, "question_id": 53504380, "link": "https://stackoverflow.com/questions/53504380/downgrade-perl-version-on-mac/53505448#53505448", "title": "Downgrade perl version on mac", "body": "<p>Another option (incompatible with <code>perlbrew</code>) is to use <a href=\"https://github.com/tokuhirom/plenv\" rel=\"nofollow noreferrer\">plenv</a>. This lets you run different versions of perl for each directory. After installing with <code>brew install plenv</code>, you'd use it like so:</p>\n\n<pre><code>$ plenv install 5.18.2\n$ cd project/needing/old/perl\n$ echo \"5.18.2\" &gt; .perl-version\n</code></pre>\n\n<p>Poof! Running <code>perl</code> in that directory or any of its subdirectories will use 5.18.2.</p>\n\n<p>Note: if you run a perl script with <code>./script.pl</code>, which has <code>#!/usr/bin/perl</code>, this should continue to use the perl installed at <code>/usr/bin/perl</code>. However, if the shebang line is <code>/usr/bin/env perl</code>, this should switch to the version specified by the <code>.perl-version</code> file.</p>\n"}], "owner": {"reputation": 123, "user_id": 288686, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ced150f40a1fbd8c57eb7b4f98d2c238?s=128&d=identicon&r=PG", "display_name": "user288686", "link": "https://stackoverflow.com/users/288686/user288686"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 866, "favorite_count": 0, "accepted_answer_id": 53504619, "answer_count": 2, "score": 1, "last_activity_date": 1543341218, "creation_date": 1543337193, "last_edit_date": 1543337354, "question_id": 53504380, "link": "https://stackoverflow.com/questions/53504380/downgrade-perl-version-on-mac", "title": "Downgrade perl version on mac", "body": "<p>First of all am new to MAC.<br>\nAm facing similar kind of issue on Mac where its shipped with V5.28.0 but i have to use perl V5.18.2 for my application. Have installed perl 5.18.2 using <code>perlbrew install 5.18.2</code> and the installation was successful.     </p>\n\n<p>Have two questions here     </p>\n\n<ol>\n<li><p>Where are my default version and other version installed ? Is there any command to know them ? Have already tried checking echo $PATH but no use.    </p></li>\n<li><p>How to set the default version to 5.18.2 ?</p></li>\n</ol>\n\n<p>Regards<br>\nAVK</p>\n"}, {"tags": ["perl", "naming-conventions"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1543336554, "post_id": 53503865, "comment_id": 93877750, "body": "Aren&#39;t .pl are automatically wrapped into .bat files on Windows and wrapped into extension-less bourne shell scripts on unix-like systems?"}, {"owner": {"reputation": 471, "user_id": 8354437, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t1dnmhBYQq0/AAAAAAAAAAI/AAAAAAAAAGY/filPXl0MTEU/photo.jpg?sz=128", "display_name": "Ankit Chauhan", "link": "https://stackoverflow.com/users/8354437/ankit-chauhan"}, "edited": false, "score": 0, "creation_date": 1543381503, "post_id": 53503865, "comment_id": 93894175, "body": "Can you please also tell if there is any common popular naming convention used to name the perl code files?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 471, "user_id": 8354437, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t1dnmhBYQq0/AAAAAAAAAAI/AAAAAAAAAGY/filPXl0MTEU/photo.jpg?sz=128", "display_name": "Ankit Chauhan", "link": "https://stackoverflow.com/users/8354437/ankit-chauhan"}, "edited": false, "score": 0, "creation_date": 1543399290, "post_id": 53503865, "comment_id": 93902311, "body": "@AnkitChauhan: I don&#39;t really understand the question. What sort of thing do you want to know?"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1543335442, "creation_date": 1543335442, "answer_id": 53503865, "question_id": 53502967, "link": "https://stackoverflow.com/questions/53502967/perl-filename-naming-convention/53503865#53503865", "title": "Perl Filename Naming Convention", "body": "<p><code>.pl</code> actually stands for \"Perl Library\". The extension was originally used in Perl 4 where the only way to have reusable code was to <code>require</code> another Perl file. These days, we use Perl modules (with a <code>.pm</code> extension) for this.</p>\n\n<p>It's unfortunate that using an extension for all Perl programs has become fashionable. People using your programs shouldn't be interested in the language that the program is written in. On all Unix-like operating systems, an extension is unnecessary as the shell can work out how to run a program by looking at the \"shebang line\" (<code>/usr/bin/perl</code>). Windows is the only popular operating system which doesn't use this technology.</p>\n\n<p>Therefore my advice is to not use the <code>.pl</code> extension at all - unless you're writing code that is to be run on Windows.</p>\n"}, {"tags": [], "owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "is_accepted": false, "score": 1, "last_activity_date": 1545389830, "creation_date": 1545389830, "answer_id": 53883575, "question_id": 53502967, "link": "https://stackoverflow.com/questions/53502967/perl-filename-naming-convention/53883575#53883575", "title": "Perl Filename Naming Convention", "body": "<p>There doesn't seem to be an official convention, but personally:</p>\n\n<ul>\n<li><p>I do not name my perl scripts with .pl extension. (If I put these scripts in a Perl distribution for CPAN, the tool will handle Windows so Windows users can also run the script without having to specify any extension.</p></li>\n<li><p>I use all lowercase letters, with words separated by \"-\". Mixing lowercase and uppercase letters can be problematic on case-sensitive filesystems. Not using \"-\" will make words harder to read.</p></li>\n</ul>\n\n<p>Additionally, I write my scripts with names in the form of \"verb\"+\"object\", e.g. \"list-perl-releases\", \"create-user\", and so on. And if a script only applies to my computer/laptop, I insert \"my\" somewhere in the name, e.g. \"list-my-commits\", \"mount-my-google-drives\".  But that's just my personal preference.</p>\n"}], "owner": {"reputation": 471, "user_id": 8354437, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t1dnmhBYQq0/AAAAAAAAAAI/AAAAAAAAAGY/filPXl0MTEU/photo.jpg?sz=128", "display_name": "Ankit Chauhan", "link": "https://stackoverflow.com/users/8354437/ankit-chauhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1545389830, "creation_date": 1543332593, "question_id": 53502967, "link": "https://stackoverflow.com/questions/53502967/perl-filename-naming-convention", "title": "Perl Filename Naming Convention", "body": "<p>What is the naming convention used to name a file with .pl extension(a file with perl code).\nI can't seem to find this anywhere.\nThanks in advance.</p>\n"}, {"tags": ["regex", "string", "perl"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1543316135, "post_id": 53497966, "comment_id": 93865341, "body": "<code>$original=~s&#47;^([^\\-]+\\-\\d+)(.+)$&#47;$1&#47;g;</code>"}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1543316679, "post_id": 53497966, "comment_id": 93865651, "body": "@ssr1012: That modifies the <code>$original</code>?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1543316844, "post_id": 53497966, "comment_id": 93865745, "body": "<code>($mynew = $original)=~s&#47;^([^\\-]+\\-\\d+)(.+)$&#47;$1&#47;g; print $mynew;</code>"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1543317283, "post_id": 53497966, "comment_id": 93865985, "body": "This will not modify the original values"}], "answers": [{"comments": [{"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1543316747, "post_id": 53498266, "comment_id": 93865678, "body": "How does that capture the last part only?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1543316888, "post_id": 53498266, "comment_id": 93865773, "body": "What&#39;s the point in declaring an extra <code>$re</code> variable outside of the loop?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1543317064, "post_id": 53498266, "comment_id": 93865870, "body": "Your code doesn&#39;t work for <code>&quot;3-4-5\\n&quot;</code>. It produces <code>&quot;3-4\\n&quot;</code> instead of <code>&quot;3-4&quot;</code>."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1543317096, "post_id": 53498266, "comment_id": 93865883, "body": "@melpomene: That&#39;s just a habit of mine."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1543317259, "post_id": 53498266, "comment_id": 93865976, "body": "@melpomene: That wasn&#39;t said in OP. But to fixed replace <code>$</code> with <code>\\R?</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1543317397, "post_id": 53498266, "comment_id": 93866053, "body": "@Toto Then it will turn <code>&quot;3-4-\\r\\n56&quot;</code> into <code>&quot;3-456&quot;</code>."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1543317659, "post_id": 53498266, "comment_id": 93866195, "body": "@melpomene: Then, use <code>&#47;s</code> flag."}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 5, "last_activity_date": 1543317005, "last_edit_date": 1543317005, "creation_date": 1543316678, "answer_id": 53498266, "question_id": 53497966, "link": "https://stackoverflow.com/questions/53497966/keep-the-first-2-parts-of-the-string-having-a-separator/53498266#53498266", "title": "Keep the first 2 parts of the string having a separator", "body": "<pre><code>use Modern::Perl;\n\nmy $re = qr/-\\d+\\K.*$/;\nwhile(&lt;DATA&gt;) {\n    chomp;\n    s/$re//;\n    say;\n}\n__DATA__\n10-9-1\n10-9\n</code></pre>\n\n<p>For just a string:</p>\n\n<pre><code>my $original = '10-9-1';\n(my $final = $original) =~ s/-\\d+\\K.*$//;\nsay $final;\n</code></pre>\n\n<p><strong>Explantion:</strong></p>\n\n<pre><code>s/\n    -       # find the first dash in the string\n    \\d+     # 1 or more digits\n    \\K      # forget all we have seen until this posiiton\n    .*      # rest of the line\n    $       # end of line\n//\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1543317176, "post_id": 53498391, "comment_id": 93865931, "body": "Does this modify <code>$original</code>?"}, {"owner": {"reputation": 111, "user_id": 9951985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07eccf76753ce6f9ee4cb85b137b54e4?s=128&d=identicon&r=PG&f=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/9951985/arun"}, "reply_to_user": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1543317299, "post_id": 53498391, "comment_id": 93865992, "body": "Nope. It&#39;ll update <code>$final_string</code> string with the matched regex string and will leave the original intact"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1543317732, "post_id": 53498391, "comment_id": 93866229, "body": "Note: that will put whatever happened to be in <code>$1</code> previously into <code>$final_string</code> if the pattern doesn&#39;t match."}], "tags": [], "owner": {"reputation": 111, "user_id": 9951985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07eccf76753ce6f9ee4cb85b137b54e4?s=128&d=identicon&r=PG&f=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/9951985/arun"}, "is_accepted": false, "score": 2, "last_activity_date": 1543317123, "creation_date": 1543317123, "answer_id": 53498391, "question_id": 53497966, "link": "https://stackoverflow.com/questions/53497966/keep-the-first-2-parts-of-the-string-having-a-separator/53498391#53498391", "title": "Keep the first 2 parts of the string having a separator", "body": "<pre><code>$original =~ m/^([^\\-]+\\-[^\\-]+)/ or warn \"Unable to match regex in string: $original\";\nmy $final_string = $1;\n</code></pre>\n\n<p>Think this will answer your query. Its not limited by any particular string - like the text after the hyphen should be a digit or anything. It'll warn you if its not matched too.<br><br>\nThis is assuming the <code>$original</code> variable has only one instance to be matched (inferred from the code in the question).</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1543317551, "creation_date": 1543317551, "answer_id": 53498509, "question_id": 53497966, "link": "https://stackoverflow.com/questions/53497966/keep-the-first-2-parts-of-the-string-having-a-separator/53498509#53498509", "title": "Keep the first 2 parts of the string having a separator", "body": "<p>It's easier to use a regex match here.</p>\n\n<pre><code>my ($final_string) = $original =~ /^([^-]*-[^-]*)/;\n</code></pre>\n\n<p>If you want to do the change in place, a substitution works great.</p>\n\n<pre><code>$original =~ s/^[^-]*-[^-]*\\K.*//s;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 0, "creation_date": 1543332607, "post_id": 53500865, "comment_id": 93875226, "body": "I can get this code working ... but not Dave Cross&#39;. Any ideas? while (&lt;FIN&gt;){ chomp; @_ = split(/-/); say join &#39;-&#39;, $_[0], $_[1]; }"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 1, "creation_date": 1543332752, "post_id": 53500865, "comment_id": 93875317, "body": "@MichaelG.: That seems to be a more complex version of my code. Not sure why you&#39;ve split it into two statements. Seems unnecessary to me. Also, please don&#39;t use <code>@_</code> for anything other than its actual meaning (subroutine parameters)."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 1, "creation_date": 1543332828, "post_id": 53500865, "comment_id": 93875353, "body": "@MichaelG.: <i>I can get this code working</i> - You&#39;ll need to give us more information. What unexpected behaviour are you seeing?"}, {"owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 0, "creation_date": 1543333466, "post_id": 53500865, "comment_id": 93875780, "body": "I&#39;m in no position to disagree. I couldn&#39;t get this to compile (split /-/)[0, 1]. I will post my unauthorised version below."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 1, "creation_date": 1543334682, "post_id": 53500865, "comment_id": 93876644, "body": "I&#39;ve added the <code>use feature</code> line which should solve any compilation problems."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1543334649, "last_edit_date": 1543334649, "creation_date": 1543325445, "answer_id": 53500865, "question_id": 53497966, "link": "https://stackoverflow.com/questions/53497966/keep-the-first-2-parts-of-the-string-having-a-separator/53500865#53500865", "title": "Keep the first 2 parts of the string having a separator", "body": "<p>The regex solutions you've got are probably the best approach, but it's also possible to do it with <code>split()</code> and <code>join()</code>.</p>\n\n<pre><code># You need this to use 'say()'\nuse feature 'say';\n\nwhile (&lt;DATA&gt;) {\n  chomp;\n\n  say join '-', (split /-/)[0, 1];\n}\n\n__DATA__\n10-9-1\n10-9\n</code></pre>\n\n<p>The <code>(split /-/)[0, 1]</code> takes the list returned from <code>split()</code> and gives you the first two elements of the list.</p>\n"}], "owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1543334649, "creation_date": 1543315725, "question_id": 53497966, "link": "https://stackoverflow.com/questions/53497966/keep-the-first-2-parts-of-the-string-having-a-separator", "title": "Keep the first 2 parts of the string having a separator", "body": "<p>Is there a more succinct/perlish way for the following:</p>\n\n<pre><code>my @components = split /-/, $original;\nmy $final_string = $components[0].\"-\".$components[1];  \n</code></pre>\n\n<p>Input is a string with at most 2 <code>-</code> and the last is optional. I always want to keep the first part. I.e. <code>10-9-1</code> should become <code>10-9</code> and <code>10-9</code> as input should remain <code>10-9</code></p>\n"}, {"tags": ["perl", "anyevent"], "comments": [{"owner": {"reputation": 11, "user_id": 9805424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sIqVOe0RtJA/AAAAAAAAAAI/AAAAAAAAAGw/dhrzi3bNCss/photo.jpg?sz=128", "display_name": "Denis Trifanov", "link": "https://stackoverflow.com/users/9805424/denis-trifanov"}, "edited": false, "score": 0, "creation_date": 1543314263, "post_id": 53497107, "comment_id": 93864226, "body": "I noticed through wireshar. When you send without a proxy, the TLSv1.2 protocol is used. When using a TLSv1 proxy."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1543321128, "post_id": 53497107, "comment_id": 93868168, "body": "This is most likely a problem with your TLS library and your proxy. You will need to post the version of the TLS library, the version and name of your proxy, and maybe run the SSL connection setup in the most verbose mode possible there."}, {"owner": {"reputation": 11, "user_id": 9805424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sIqVOe0RtJA/AAAAAAAAAAI/AAAAAAAAAGw/dhrzi3bNCss/photo.jpg?sz=128", "display_name": "Denis Trifanov", "link": "https://stackoverflow.com/users/9805424/denis-trifanov"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1543321478, "post_id": 53497107, "comment_id": 93868385, "body": "@Corion Hello, the LWP library works well.  require LWP::UserAgent;  my $ua = LWP::UserAgent-&gt;new; $ua-&gt;timeout(10); $ua-&gt;proxy(&#39;https&#39;, &#39;<a href=\"http://XXX:XXX@XXX:8000&#39;\" rel=\"nofollow noreferrer\">XXX:XXX@XXX:8000&#39;</a>);  my $response = $ua-&gt;get(&#39;<a href=\"https://randomup.ru&#39;\" rel=\"nofollow noreferrer\">randomup.ru&#39;</a>);  if ($response-&gt;is_success) {     print $response-&gt;decoded_content;  # or whatever } else {     die $response-&gt;status_line; }"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1543321742, "post_id": 53497107, "comment_id": 93868549, "body": "For LWP, you have <code>https</code> in your proxy configuration. For AnyEvent, you have <code>http</code> in your proxy configuration. Which one is it?"}, {"owner": {"reputation": 11, "user_id": 9805424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sIqVOe0RtJA/AAAAAAAAAAI/AAAAAAAAAGw/dhrzi3bNCss/photo.jpg?sz=128", "display_name": "Denis Trifanov", "link": "https://stackoverflow.com/users/9805424/denis-trifanov"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1543321798, "post_id": 53497107, "comment_id": 93868578, "body": "@Corion the proxy is exactly working, because it is currently used in another program"}, {"owner": {"reputation": 11, "user_id": 9805424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sIqVOe0RtJA/AAAAAAAAAAI/AAAAAAAAAGw/dhrzi3bNCss/photo.jpg?sz=128", "display_name": "Denis Trifanov", "link": "https://stackoverflow.com/users/9805424/denis-trifanov"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1543322548, "post_id": 53497107, "comment_id": 93869023, "body": "@Corion  LWP without https, does not use a proxy for this scheme http, I do not know why. Judging by the wireshark, it immediately sends requests directly. Anyevent via https also fails to configure."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1543322657, "post_id": 53497107, "comment_id": 93869086, "body": "Please edit your question, add the working LWP code and then edit whether you are actually using a proxy or not. Your comments are confusing. If LWP does not use a proxy, why do you want AnyEvent to use a proxy?"}, {"owner": {"reputation": 11, "user_id": 9805424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sIqVOe0RtJA/AAAAAAAAAAI/AAAAAAAAAGw/dhrzi3bNCss/photo.jpg?sz=128", "display_name": "Denis Trifanov", "link": "https://stackoverflow.com/users/9805424/denis-trifanov"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1543322875, "post_id": 53497107, "comment_id": 93869217, "body": "@Corion I&#39;m not saying that LWP does not use a proxy. I say he ignores them if you choose http. The code LWP is working, but https."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1543323370, "post_id": 53497107, "comment_id": 93869464, "body": "If you have working code, please try to make your non-working code as similar to the working code as possible. Whatever remains as the difference is then likely the cause of the error. I don&#39;t know what works and what fails for you, so please <a href=\"https://stackoverflow.com/posts/53497107/edit\">edit</a> your question and add what works and what fails for you."}, {"owner": {"reputation": 11, "user_id": 9805424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sIqVOe0RtJA/AAAAAAAAAAI/AAAAAAAAAGw/dhrzi3bNCss/photo.jpg?sz=128", "display_name": "Denis Trifanov", "link": "https://stackoverflow.com/users/9805424/denis-trifanov"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1543325412, "post_id": 53497107, "comment_id": 93870758, "body": "@Corion, Done.."}, {"owner": {"reputation": 11, "user_id": 9805424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sIqVOe0RtJA/AAAAAAAAAAI/AAAAAAAAAGw/dhrzi3bNCss/photo.jpg?sz=128", "display_name": "Denis Trifanov", "link": "https://stackoverflow.com/users/9805424/denis-trifanov"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1543327007, "post_id": 53497107, "comment_id": 93871784, "body": "@Corion Maybe you know how to configure https on anyevent? Maybe then everything will work."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1543328892, "post_id": 53497107, "comment_id": 93872909, "body": "From looking at the source code of <code>AnyEvent::HTTP</code>, the error code 596 occurs if ` $hdl-&gt;starttls (&quot;connect&quot;)` fails (for example). So maybe you can debug AnyEvent::HTTP / AnyEvent::TLS there and reduce your problem from HTTP(s)+PROXY to TLS+PROXY or CONNECT through proxy"}], "owner": {"reputation": 11, "user_id": 9805424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sIqVOe0RtJA/AAAAAAAAAAI/AAAAAAAAAGw/dhrzi3bNCss/photo.jpg?sz=128", "display_name": "Denis Trifanov", "link": "https://stackoverflow.com/users/9805424/denis-trifanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1543327690, "creation_date": 1543312892, "last_edit_date": 1543327690, "question_id": 53497107, "link": "https://stackoverflow.com/questions/53497107/perl-error-when-requesting-proxy-to-https-site-anyevent-status-596", "title": "Perl Error when requesting proxy to https site. AnyEvent status 596", "body": "<p>when requesting through a proxy that supports https to https site. The error 'Reason' => 'ssl23_get_server_hello comes: unknown protocol', 'Status' => 596,</p>\n\n<p>I use the AnyEvent library, I suspect that the problem with the connect request, but I cannot solve it at all, I will be very grateful for the hint.</p>\n\n<pre><code>use strict;\nuse utf8;\nuse Data::Dumper;\n\nuse AnyEvent::HTTP;\nuse MIME::Base64;\nuse AnyEvent::Connector;\n\n\nmy $cookies = {};\nmy $done = AnyEvent-&gt;condvar;\n\nmy $request_watcher = http_request(\n    get =&gt; 'https://randomup.ru',\n    (\n        keepalive  =&gt; 1,\n        persistent =&gt; 1,\n        recurse    =&gt; 0,\n        cookie_jar =&gt; $cookies,\n        timeout    =&gt; 10,\n        headers    =&gt; {\n            'user-agent'      =&gt; 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3445.2 Safari/537.36',\n            'accept-encoding' =&gt; 'gzip',\n            'Accept-Language'=&gt; 'en-us,en;q=0.5',\n            'Accept-Charset'=&gt; 'ISO-8859-1,utf-8;q=0.7,*;q=0.7',\n            'Proxy-Authorization' =&gt; 'Basic ' . encode_base64('XXX' . ':' . 'XXX'),\n        },\n    ),\n    on_header =&gt; sub {\n        print STDERR Dumper @_;\n\n        return 1;\n    },\n    proxy =&gt; ['XX.XX.XX.XX', 8000, 'http'],\n    sub {\n        print STDERR Dumper @_;\n        #$done-&gt;send;\n\n    }\n);\n$done-&gt;recv();\n</code></pre>\n\n<p>suspect that the tcp_connect method is also needed, but I don\u2019t understand how to configure it.</p>\n\n<p>So proxy works for LWP</p>\n\n<pre><code>require LWP::UserAgent;\n\nmy $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;timeout(10);\n$ua-&gt;proxy(['https', 'http'], 'http://XXX:NChD7r@XXX.XXX.38.67:8000');\n# $ua-&gt;proxy(['https'], 'https://proxy:8080'); # Fails\n# $ua-&gt;env_proxy; # This also fails.\n\nmy $response = $ua-&gt;get('https://randomup.ru');\n\nif ($response-&gt;is_success) {\n    print $response-&gt;decoded_content;  # or whatever\n}\nelse {\n    die $response-&gt;status_line;\n}\n</code></pre>\n\n<p>Unfortunately, I can not write a full proxy, because it is paid. But if without him absolutely nothing, then I can write.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 9951985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07eccf76753ce6f9ee4cb85b137b54e4?s=128&d=identicon&r=PG&f=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/9951985/arun"}, "edited": false, "score": 0, "creation_date": 1543316404, "post_id": 53496069, "comment_id": 93865496, "body": "Yup! Tested it out in a 32bit perl and it works fine. Thanks! Can you explain what&#39;s happening here?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 111, "user_id": 9951985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07eccf76753ce6f9ee4cb85b137b54e4?s=128&d=identicon&r=PG&f=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/9951985/arun"}, "edited": false, "score": 0, "creation_date": 1543316868, "post_id": 53496069, "comment_id": 93865766, "body": "@Arun, What don&#39;t you understand?"}, {"owner": {"reputation": 111, "user_id": 9951985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07eccf76753ce6f9ee4cb85b137b54e4?s=128&d=identicon&r=PG&f=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/9951985/arun"}, "edited": false, "score": 0, "creation_date": 1543316934, "post_id": 53496069, "comment_id": 93865793, "body": "What does ~0 &lt;= 0xFFFF_FFFF mean?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 111, "user_id": 9951985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07eccf76753ce6f9ee4cb85b137b54e4?s=128&d=identicon&r=PG&f=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/9951985/arun"}, "edited": false, "score": 0, "creation_date": 1543316982, "post_id": 53496069, "comment_id": 93865822, "body": "@Arun, Did you check <a href=\"http://perldoc.perl.org/perlop.html\" rel=\"nofollow noreferrer\">perlop</a>? <code>~</code> beforms bitwise negation, so <code>~0</code> returns <code>0xFFFF_FFFF</code> for 32-bit integers, and <code>0xFFFF_FFFF_FFFF_FFFF</code> for 64-bit integers."}, {"owner": {"reputation": 111, "user_id": 9951985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07eccf76753ce6f9ee4cb85b137b54e4?s=128&d=identicon&r=PG&f=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/9951985/arun"}, "edited": false, "score": 0, "creation_date": 1543317240, "post_id": 53496069, "comment_id": 93865967, "body": "ooh... its a nice intuitive way to write code! I got confused by the underscore in the hex value ... I&#39;ve never used hex values in this way before. But got the ~ operation. Thanks again!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 111, "user_id": 9951985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07eccf76753ce6f9ee4cb85b137b54e4?s=128&d=identicon&r=PG&f=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/9951985/arun"}, "edited": false, "score": 1, "creation_date": 1543317359, "post_id": 53496069, "comment_id": 93866025, "body": "You know how commas are often used in large numbers for readability (e.g. 1,234,567)? Perl allows <code>_</code> to be used in numeric literals for the same reason."}, {"owner": {"reputation": 111, "user_id": 9951985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07eccf76753ce6f9ee4cb85b137b54e4?s=128&d=identicon&r=PG&f=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/9951985/arun"}, "edited": false, "score": 0, "creation_date": 1543317405, "post_id": 53496069, "comment_id": 93866056, "body": "yeah ... got it now. :)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 10, "last_activity_date": 1543315483, "last_edit_date": 1543315483, "creation_date": 1543309585, "answer_id": 53496069, "question_id": 53495832, "link": "https://stackoverflow.com/questions/53495832/perl-how-to-make-64-bit-perl-compiler-requirement-mandatory-to-run-the-program/53496069#53496069", "title": "Perl: How to make 64 bit perl compiler requirement mandatory to run the program", "body": "<p>Despite all the talk about compilers, it sounds like you actually want to check that Perl's integers are (at least) 64 bits in size. For that, you could use the following:</p>\n\n<pre><code>use Config qw( %Config );\n\nBEGIN { die(\"64-bit ints required.\\n\") if $Config{ivsize} &lt; 8; }\n</code></pre>\n\n<p>or</p>\n\n<pre><code>BEGIN { die(\"64-bit ints required.\\n\") if length(pack('j', 0)) &lt; 8; }\n</code></pre>\n\n<p>or</p>\n\n<pre><code>BEGIN { die(\"64-bit ints required.\\n\") if ~0 &lt;= 0xFFFF_FFFF; }\n</code></pre>\n\n<p>I placed the check in a <code>BEGIN</code> block so you don't have any problems if you have large constants in your program.</p>\n"}], "owner": {"reputation": 111, "user_id": 9951985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07eccf76753ce6f9ee4cb85b137b54e4?s=128&d=identicon&r=PG&f=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/9951985/arun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 53496069, "answer_count": 1, "score": 2, "last_activity_date": 1543315483, "creation_date": 1543308790, "question_id": 53495832, "link": "https://stackoverflow.com/questions/53495832/perl-how-to-make-64-bit-perl-compiler-requirement-mandatory-to-run-the-program", "title": "Perl: How to make 64 bit perl compiler requirement mandatory to run the program", "body": "<p><br><br>\nI'm interested to know if there is a way to force a program to execute only in a x64 bit perl compiler. If the program runs in a 32 bit compiler, it should throw an error and exit.<br><br>\nSomething similar to <code>require 5.10.0</code>.<br><br>\nI have a program that has a lot of 64 bit integer processing to do. All of them are in string format and <code>hex \"0xXXXXXXXXXXXXXXXX\"</code> does not get processed by a 32 bit compiler (Heard somewhere only upto 53bits are supported). I do know that we can use <code>Math::BigInt</code>, but I'm looking to remove use of libraries since the script will be running in other systems that may not have this library.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 1, "last_activity_date": 1543305521, "last_edit_date": 1543305521, "creation_date": 1543302389, "answer_id": 53494384, "question_id": 53492715, "link": "https://stackoverflow.com/questions/53492715/i-want-to-write-multiple-files-from-one-file-without-using-array-to-remove-compl/53494384#53494384", "title": "I want to write multiple files from one file without using array to remove complexity", "body": "<p>As I observed from your code You can try this</p>\n\n<pre><code>  use warnings;\n  use strict;\n  open (my $fh,\"&lt;\",\"today.txt\") or die \"Error opening $!\";\n\n  my $count = 1;\n  while(my $line = &lt;$fh&gt;)\n  {\n     open my $wh,'&gt;',\"e$count.txt\" or die \"Error creating $!\";\n     print $wh $line;\n     for(1..4){\n        if(my $v = scalar &lt;$fh&gt;){\n           print $wh  $v ;\n        }\n        else{\n           last ;\n        }\n     }\n     $count++;\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1546239742, "last_edit_date": 1546239742, "creation_date": 1543305099, "answer_id": 53495007, "question_id": 53492715, "link": "https://stackoverflow.com/questions/53492715/i-want-to-write-multiple-files-from-one-file-without-using-array-to-remove-compl/53495007#53495007", "title": "I want to write multiple files from one file without using array to remove complexity", "body": "<p>Store lines in a small buffer, and open a file every fifth line and write the buffer to it </p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $infile = shift || 'e:/today.txt';\n\nopen my $fh_in, '&lt;', $infile or die \"Can't open $infile: $!\";\n\nmy ($fh_out, @buf);\n\nwhile (&lt;$fh_in&gt;) {\n    push @buf, $_; \n    if ($. % 5 == 0) {\n        my $file = 'e' . (int $./5) . '.txt';\n        open $fh_out, '&gt;', $file  or do {\n            warn \"Can't open $file: $!\";\n            next;\n        };\n        print $fh_out $_ for @buf;\n        @buf = (); \n    }\n}\n\n# Write what's left over, if any, after the last batch of five\nif (@buf) {\n    my $file = 'e' . ( int($./5)+1 ) . '.txt';\n    open $fh_out, '&gt;', $file or die \"Can't open $file: $!\";\n    print $fh_out $_ for @buf;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10709540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58278d8b700addd2cef91a165d1f8687?s=128&d=identicon&r=PG&f=1", "display_name": "vishal", "link": "https://stackoverflow.com/users/10709540/vishal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1546239742, "creation_date": 1543292504, "last_edit_date": 1543292948, "question_id": 53492715, "link": "https://stackoverflow.com/questions/53492715/i-want-to-write-multiple-files-from-one-file-without-using-array-to-remove-compl", "title": "I want to write multiple files from one file without using array to remove complexity", "body": "<p>I want to write multiple files from one file (getting latest data every time) without using array to remove complexity. I already tried it using array but when data is high than it will slow down the process.</p>\n\n<p>Kindly give some hint to me how I will remove the complexity of the program.</p>\n\n<p>Input: read a text file from a directory.</p>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>File1.pl - 1 2 3 4 5 6\nFile2.pl - 6 7 8 9 10\nFile3.pl -11 12 13 14 15\nFile4.pl -16 17 18 19 20\n</code></pre>\n\n<p>I do this using array:</p>\n\n<pre><code>use feature 'state';\nopen (DATA,\"&lt;\",\"e:/today.txt\");\n@array=&lt;DATA&gt;;\n$sizeofarray=scalar @array;\n\nprint \"Total no. of lines in file is :$sizeofarray\";\n$count=1;\nwhile($count&lt;=$sizeofarray)\n{\n    open($fh,'&gt;',\"E:/e$count.txt\");\n    print $fh \"@array[$count-1..($count+3)]\\n\";\n    $count+=5;\n}\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1543310845, "post_id": 53489042, "comment_id": 93862237, "body": "Of note, <code>decode(&#39;cp1047&#39;, &quot;\\xF5\\xF2&quot;)</code> produces to <code>&quot;52&quot;</code>."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 7, "last_activity_date": 1543310632, "last_edit_date": 1543310632, "creation_date": 1543266272, "answer_id": 53489042, "question_id": 53488900, "link": "https://stackoverflow.com/questions/53488900/can-someone-explain-this-loop-to-me/53489042#53489042", "title": "Can someone explain this loop to me?", "body": "<p><code>read (FILE,$_,4)</code> : read 4 bytes from FILE input stream and load into the variable <code>$_</code></p>\n\n<p><code>$rec_len = unpack(\"N\",$_)</code>:  interpret the first 4 bytes of the variable <code>$_</code> as an unsigned 32-bit integer in big-endian order, assign to the variable <code>$rec_len</code></p>\n\n<p><code>read (FILE,$_,$rec_len)</code>: read <code>$rec_len</code> bytes from FILE stream into variable <code>$_</code></p>\n\n<p><code>substr($_,0,2)</code>: the first two characters of the variable <code>$_</code></p>\n\n<p><code>\"\\xF5\\xF2\"</code>: a two-character string consisting of the bytes 245 and 242</p>\n\n<p><code>$_ = substr($_,0,117)</code>: set <code>$_</code> to the first 117 characters of <code>$_</code></p>\n\n<p><code>use Encode;print decode ('cp1047', $_)</code>: interpret the contents of <code>$_</code> with \"code page 1047\", i.e., <a href=\"https://en.wikipedia.org/wiki/EBCDIC_1047\" rel=\"nofollow noreferrer\">EBCDIC</a> and output to standard output</p>\n"}, {"comments": [{"owner": {"reputation": 780, "user_id": 5261088, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/8256e8a248d8bcde285d3b97f77e36b0?s=128&d=identicon&r=PG&f=1", "display_name": "MickeyThreeSheds", "link": "https://stackoverflow.com/users/5261088/mickeythreesheds"}, "edited": false, "score": 0, "creation_date": 1543268433, "post_id": 53489061, "comment_id": 93848915, "body": "Wait, it loops over it in increments of four bytes at a time? I don&#39;t think that is doable in java! Uh oh! I may be stuck with perl!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 780, "user_id": 5261088, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/8256e8a248d8bcde285d3b97f77e36b0?s=128&d=identicon&r=PG&f=1", "display_name": "MickeyThreeSheds", "link": "https://stackoverflow.com/users/5261088/mickeythreesheds"}, "edited": false, "score": 0, "creation_date": 1543269065, "post_id": 53489061, "comment_id": 93849214, "body": "@MickeyThreeSheds Read more closely -- once it&#39;s read 4b it then reads more, what moves the file pointer, so it moves over more than 4b in each iteration.  As for &quot;<i>stuck with Perl</i>&quot; -- if Java can&#39;t do (as you say), you&#39;re getting <i>more</i> for your dollars :))  Or, as you now know what the program is doing adapt your Java version as desired."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1543269558, "post_id": 53489061, "comment_id": 93849414, "body": "I doubt Java can&#39;t read 4 bytes from a stream (see e.g. <code>DataInputStream.readFully</code>)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 780, "user_id": 5261088, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/8256e8a248d8bcde285d3b97f77e36b0?s=128&d=identicon&r=PG&f=1", "display_name": "MickeyThreeSheds", "link": "https://stackoverflow.com/users/5261088/mickeythreesheds"}, "edited": false, "score": 0, "creation_date": 1543269617, "post_id": 53489061, "comment_id": 93849438, "body": "@MickeyThreeSheds  The <code>int read(byte[] b)</code> from <code>io.FileInputStream</code> reads up to <code>b.length</code> bytes, for example."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1543281974, "post_id": 53489061, "comment_id": 93853052, "body": "Also see <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/DataInput.html#readInt()\" rel=\"nofollow noreferrer\"><code>readInt in java.io.DataInputStream</code></a>, which also performs the <code>unpack(&quot;N&quot;,...)</code> step."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1543310840, "post_id": 53489061, "comment_id": 93862235, "body": "Of note, <code>decode(&#39;cp1047&#39;, &quot;\\xF5\\xF2&quot;)</code> produces to <code>&quot;52&quot;</code>."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1543266374, "creation_date": 1543266374, "answer_id": 53489061, "question_id": 53488900, "link": "https://stackoverflow.com/questions/53488900/can-someone-explain-this-loop-to-me/53489061#53489061", "title": "Can someone explain this loop to me?", "body": "<p><code>-w</code> is the old way of enabling <a href=\"http://p3rl.org/warnings\" rel=\"nofollow noreferrer\">warnings</a>.</p>\n\n<p><a href=\"http://p3rl.org/my\" rel=\"nofollow noreferrer\">my</a> declares a lexically scoped variable.</p>\n\n<p><a href=\"http://perldoc.pl/functions/open\" rel=\"nofollow noreferrer\">open</a> with <code>&lt;</code> opens a file for reading, the filename is taken from the <code>@ARGV</code> array, i.e. the program's parameters. <code>FILE</code> is the file handle associated with the file.</p>\n\n<p><a href=\"http://p3rl.org/read\" rel=\"nofollow noreferrer\">read</a> reads four bytes into the <code>$_</code> variable. <a href=\"http://p3rl.org/unpack\" rel=\"nofollow noreferrer\">unpack</a> interprets it as an unsigned 32-bit long (so the following condition can fail only when it's 0).</p>\n\n<p>The next read reads that many bytes to <code>$_</code> again. <a href=\"http://p3rl.org/substr\" rel=\"nofollow noreferrer\">substr</a> extracts a substring, and if the first two bytes there are \"\\xf5\\xf2\", it shortens the string to the first 117 bytes. It then converts the string to the code page 1047.</p>\n"}], "owner": {"reputation": 780, "user_id": 5261088, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/8256e8a248d8bcde285d3b97f77e36b0?s=128&d=identicon&r=PG&f=1", "display_name": "MickeyThreeSheds", "link": "https://stackoverflow.com/users/5261088/mickeythreesheds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 1, "accepted_answer_id": 53489061, "answer_count": 2, "score": -1, "last_activity_date": 1544469387, "creation_date": 1543265613, "last_edit_date": 1544469387, "question_id": 53488900, "link": "https://stackoverflow.com/questions/53488900/can-someone-explain-this-loop-to-me", "title": "Can someone explain this loop to me?", "body": "<p>I have the following Perl code. I Know what the end result is: if I run it and pass in an x9.37 file, it will spit out each field of text. That's great, but I am trying to port this to another language, and I can't read Perl at all. If someone could turn this into some form of pseudocode (I don't need working Java - I can write that part) I just need someone to explain what is going on in the Perl below!</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse Encode;\n\nmy $tiff_flag = 0;\nmy $count = 0;\n\nopen(FILE,'&lt;',$ARGV[0]) or die 'Error opening input file';\nbinmode(FILE) or die 'Error setting binary mode on input file';\n\nwhile (read (FILE,$_,4)) {\n  my $rec_len = unpack(\"N\",$_);\n  die \"Bad record length: $rec_len\" unless ($rec_len &gt; 0);\n  read (FILE,$_,$rec_len);\n  if (substr($_,0,2) eq \"\\xF5\\xF2\") {\n    $_ = substr($_,0,117);\n  }\n  print decode ('cp1047', $_) . \"\\n\";\n}\nclose FILE;\n</code></pre>\n"}, {"tags": ["regex", "linux", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1543264393, "post_id": 53488562, "comment_id": 93847068, "body": "What have you tried? How did it fail?"}, {"owner": {"reputation": 119, "user_id": 5618631, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/GDCZq.jpg?s=128&g=1", "display_name": "Prayag", "link": "https://stackoverflow.com/users/5618631/prayag"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1543264464, "post_id": 53488562, "comment_id": 93847102, "body": "<code>awk &#39;&#47;&quot;Cause: Unspecified&quot;&#47;{gsub(&quot;Probable Cause:&quot;,&quot;Specific Event MOC&quot;,$1)};{print $0}&#39;</code>. it gives me same output"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543264606, "post_id": 53488562, "comment_id": 93847162, "body": "@Prayag  The phrase to use for replacement is presumably not always <code>Specific Event ...</code>; that&#39;s just this example. The replacement is found three lines down from <code>Probable Cause...</code>"}, {"owner": {"reputation": 119, "user_id": 5618631, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/GDCZq.jpg?s=128&g=1", "display_name": "Prayag", "link": "https://stackoverflow.com/users/5618631/prayag"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543264762, "post_id": 53488562, "comment_id": 93847237, "body": "@zdim the <code>Specific Event </code> will always be three line down below the <code>probable cause.</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543264887, "post_id": 53488562, "comment_id": 93847295, "body": "@Prayag  I didn&#39;t realize the comment that I responded to was from the person who asked the question!  Since in the comment you were showing what you had tried please &quot;edit&quot; the question and add that code to it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543264999, "post_id": 53488562, "comment_id": 93847359, "body": "@Prayag  As for the code: I take it from the question that there is a particular &quot;reason&quot; found three lines down, that you want to put instead of <code>Probable Cause...</code>.  That reason is <i>not</i> always going to be exactly what it is in this example, correct?  The code you tried always puts the same <code>Specific Event MOC</code>, since that is hard coded.  You&#39;d need to scan further down and fetch the actual data in each input file, then go back and replace it. Etc."}, {"owner": {"reputation": 119, "user_id": 5618631, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/GDCZq.jpg?s=128&g=1", "display_name": "Prayag", "link": "https://stackoverflow.com/users/5618631/prayag"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543265129, "post_id": 53488562, "comment_id": 93847425, "body": "@zdim i am not assuming but i am much sure that the <code>Specific Event </code> will always be three line down below the <code>probable cause.</code> and yes its not about the line ..if i may want to replace <code>Probable Cause...</code> with <code>Specific Problem</code> then also i can able to do so."}, {"owner": {"reputation": 119, "user_id": 5618631, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/GDCZq.jpg?s=128&g=1", "display_name": "Prayag", "link": "https://stackoverflow.com/users/5618631/prayag"}, "edited": false, "score": 0, "creation_date": 1543265198, "post_id": 53488562, "comment_id": 93847459, "body": "the above lines are fixed.3rd line <code>Specific Event</code> and 5th line <code>Specific Problem:</code> after <code>Probable Cause</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543265322, "post_id": 53488562, "comment_id": 93847513, "body": "@Prayag  That is not making sense.  Are you saying that you simply want to replace the words <code>Probable Cause</code> with words <code>Specific Problem MOC</code>?  Then it doesn&#39;t matter on which line <code>Specific Problem</code> is.  If this is not the case then please re-read my comments above."}, {"owner": {"reputation": 119, "user_id": 5618631, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/GDCZq.jpg?s=128&g=1", "display_name": "Prayag", "link": "https://stackoverflow.com/users/5618631/prayag"}, "edited": false, "score": 0, "creation_date": 1543265339, "post_id": 53488562, "comment_id": 93847521, "body": "in  the simpler terms i can say i have 4 line <code>AA BB CC DD </code> verticaclly, i need to interchange<code>BB with </code>DD` which is 2 lines below."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543265441, "post_id": 53488562, "comment_id": 93847571, "body": "@Prayag Ah, I see now from your data what you meant. So are these lines always exactly as shown, for any input? So you literally only need to swap two such specific lines?"}, {"owner": {"reputation": 119, "user_id": 5618631, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/GDCZq.jpg?s=128&g=1", "display_name": "Prayag", "link": "https://stackoverflow.com/users/5618631/prayag"}, "edited": false, "score": 1, "creation_date": 1543265682, "post_id": 53488562, "comment_id": 93847683, "body": "yes. but not the contents after <code>:..</code>. just the string <code>Probable Cause</code> with <code>Specific Event MOC</code> with each other."}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 5618631, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/GDCZq.jpg?s=128&g=1", "display_name": "Prayag", "link": "https://stackoverflow.com/users/5618631/prayag"}, "edited": false, "score": 0, "creation_date": 1543266081, "post_id": 53488970, "comment_id": 93847885, "body": "but i guess there will be two string of <code>Probable Cause..</code> will be displayed out which is not matching with my final output as shown in my question"}, {"owner": {"reputation": 119, "user_id": 5618631, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/GDCZq.jpg?s=128&g=1", "display_name": "Prayag", "link": "https://stackoverflow.com/users/5618631/prayag"}, "edited": false, "score": 1, "creation_date": 1543266575, "post_id": 53488970, "comment_id": 93848087, "body": "thanks Anubhava for the support . and also thanks to all for helping me out.is is possible to explain what exactly it is done by awk which you provided and what is the changes if i need to swap after a string is matched, like if   <code>Unspecified reason</code> is found do the swapping in that line."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 119, "user_id": 5618631, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/GDCZq.jpg?s=128&g=1", "display_name": "Prayag", "link": "https://stackoverflow.com/users/5618631/prayag"}, "edited": false, "score": 0, "creation_date": 1543267121, "post_id": 53488970, "comment_id": 93848321, "body": "I have modified my <code>awk</code> to make it more efficient and added detailed explanation."}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 1, "last_activity_date": 1543267094, "last_edit_date": 1543267094, "creation_date": 1543265920, "answer_id": 53488970, "question_id": 53488562, "link": "https://stackoverflow.com/questions/53488562/replace-with-string-present-in-nth-line-after-a-match-in-a-line/53488970#53488970", "title": "replace with string present in Nth Line after a match in a line", "body": "<p>Here is a 2 pass <code>awk</code> solution:</p>\n\n<pre><code>awk 'BEGIN{FS=OFS=\":\"}\nFNR == NR {\n   r[FNR]=$1\n   next\n}\n/^Probable Cause:/ {\n   $1 = r[FNR+3]\n   n=FNR\n}\nFNR == n+3 &amp;&amp; /^Specific Event / {\n   $1 = r[FNR-3]\n} 1' file file\n</code></pre>\n\n<p></p>\n\n<pre><code>Serial : blah blah blah\nA-TYPE: blah blah blah\nO-type: blah blah blah\ninstance: blah blah blah\nfault: blah blah blah\nsev: blah blah blah\nSpecific Event MOC: Unspecified reason\nack: blah blah blah\ntime: blah blah blah\nProbable Cause: blah blah blah\ncause: blah blah blah\nSpecific Problem: blah blah blah\n</code></pre>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n<li><code>BEGIN</code> block sets input and output field separators as <code>:</code></li>\n<li><code>FNR == NR</code>: While processing file 1st time </li>\n<li><code>r[FNR]=$1</code>: Store first columns by key as their record no</li>\n<li><code>next</code>: Move to next record</li>\n<li>Now awk will be processing file 2nd time</li>\n<li><code>/^Probable Cause:/</code>: When we find this text in a record</li>\n<li><code>$1 = r[FNR+3]</code>: Set 1st column as 1st column of 3rd record ahead from current</li>\n<li><code>n=FNR</code>: Store current record in variable <code>n</code></li>\n<li><code>FNR == n+3 &amp;&amp; /^Specific Event /</code>: When current record is <code>n+3</code> and we get line starting with <code>Specific Event</code></li>\n<li><code>$1 = r[FNR-3]</code>: Set 1st column as 1st column of 3rd previous record from current</li>\n</ul>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 1, "last_activity_date": 1554726578, "creation_date": 1554726578, "answer_id": 55573545, "question_id": 53488562, "link": "https://stackoverflow.com/questions/53488562/replace-with-string-present-in-nth-line-after-a-match-in-a-line/55573545#55573545", "title": "replace with string present in Nth Line after a match in a line", "body": "<p>your data in 'd', by gnu sed;</p>\n\n<pre><code>sed -E '/^Probable Cause:/{N;N;N;s/([^:]+)(:.+\\n.+\\n.+\\n)([^:]+):(.+)/\\3\\2\\1/}' d\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 5618631, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/GDCZq.jpg?s=128&g=1", "display_name": "Prayag", "link": "https://stackoverflow.com/users/5618631/prayag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 53488970, "answer_count": 2, "score": 1, "last_activity_date": 1554726578, "creation_date": 1543264122, "question_id": 53488562, "link": "https://stackoverflow.com/questions/53488562/replace-with-string-present-in-nth-line-after-a-match-in-a-line", "title": "replace with string present in Nth Line after a match in a line", "body": "<p>I have the script which is formatted as below.</p>\n\n<p>here in my example i require to search for \"<code>Probable Cause:Unspecified</code>\" and once found i need to replace the line with 4th line below.</p>\n\n<p>Actual output is :</p>\n\n<pre><code>Serial : blah blah blah\nA-TYPE: blah blah blah\nO-type: blah blah blah\ninstance: blah blah blah\nfault: blah blah blah\nsev: blah blah blah\nProbable Cause: Unspecified reason\nack: blah blah blah\ntime: blah blah blah\nSpecific Event MOC: blah blah blah\ncause: blah blah blah\nSpecific Problem: blah blah blah\n</code></pre>\n\n<p>and once the string \"Probable Cause: Unspecified reason\" if found <code>Probable Cause</code> should be replaced with <code>Specific Event MOC</code></p>\n\n<p>final output required:</p>\n\n<pre><code>Serial : blah blah blah\nA-TYPE: blah blah blah\nO-type: blah blah blah\ninstance: blah blah blah\nfault: blah blah blah\nsev: blah blah blah\nSpecific Event MOC: Unspecified reason\nack: blah blah blah\ntime: blah blah blah\nProbable Cause: blah blah blah\ncause: blah blah blah\nSpecific Problem: blah blah blah\n</code></pre>\n\n<p>please help</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1543264823, "post_id": 53487242, "comment_id": 93847265, "body": "Depending on what you mean by title, there&#39;s the <code>setCaption()</code> method..."}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1543269753, "post_id": 53487242, "comment_id": 93849503, "body": "<code>HTML::Table</code> does not build a complete HTML file. To build a complete HTML object, you need something like <code>HTML::DOM</code>, and the output of HTML::Table object would be an element in the DOM."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1543311650, "post_id": 53487242, "comment_id": 93862691, "body": "As an aside, the <a href=\"https://metacpan.org/pod/HTML::Table\" rel=\"nofollow noreferrer\">documentation for HTML::Table</a> uses &quot;indirect object notation&quot; to create its objects - which is presumably where you&#39;ve copied it from. That&#39;s not a recommended approach (and hasn&#39;t been for a long time). You should use <code>my $table = HTML::Table-&gt;new(...)</code> instead."}], "answers": [{"tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 1, "last_activity_date": 1543258417, "creation_date": 1543258417, "answer_id": 53487341, "question_id": 53487242, "link": "https://stackoverflow.com/questions/53487242/how-to-add-title-to-a-html-file-using-perl-htmltable/53487341#53487341", "title": "How to add title to a html file using perl HTML::Table", "body": "<p>There's no way to do that with that module. <a href=\"https://metacpan.org/pod/HTML::Table\" rel=\"nofollow noreferrer\">HTML::Table</a> literally only produces HTML <code>&lt;table&gt;</code> elements. It's not a general-purpose tool.</p>\n\n<p>The easy approach will be to <code>print \"&lt;title&gt;My Title&lt;/title&gt;\\n\";</code> before printing the table. There's no reason to get another module involved.</p>\n"}], "owner": {"reputation": 21, "user_id": 10606339, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0Aq1zovmsqE/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC60tjQA2z0TMFT78DKuySAJq1krA/mo/photo.jpg?sz=128", "display_name": "Satish Sajjanar", "link": "https://stackoverflow.com/users/10606339/satish-sajjanar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543258417, "creation_date": 1543257954, "question_id": 53487242, "link": "https://stackoverflow.com/questions/53487242/how-to-add-title-to-a-html-file-using-perl-htmltable", "title": "How to add title to a html file using perl HTML::Table", "body": "<p>I have created a html table using HTML::Table module, now I want to add a title to it. Please suggest me how to add title to the table without using CGI or any other modules.</p>\n\n<pre><code>#!/apps/perl/5.14.2/bin/perl\nuse strict;\nuse feature \"say\";\nuse HTML::Table;\nuse lib \"/apps/perl/modules-1205/lib\";\n\nmy $table= new HTML::Table( -cols       =&gt;  18,\n                            -align      =&gt;  'left',\n                            -border     =&gt;  1,\n                            -width      =&gt;  '50%',\n                            -spacing    =&gt;  1,\n                            -padding    =&gt;  1,\n                            -bgcolor    =&gt; '#DFF7FE',\n                          );\n\n$table-&gt;addSectionRow('thead', 0,'Block Name','Owner','Handoff','Testpoints','Type','SA-Cov','SA-Cov-TP','SA-Cov-Diff','SA-Patt','SA-Patt-TP','SA-Patt-Diff','TFT-Cov','TFT-Cov-TP','TFT-Cov-Diff','TFT-Patt','TFT-Patt-TP','TFT-Patt-Diff','Path');\n\n$table-&gt;setSectionStyle('thead', 0, 'background-color: #FFFEEC');\n$table-&gt;setSectionRCellsHead('thead', 0, 1);\n\nopen my $HTML,'&gt;' ,'Testpoint.html' or die $!;\nprint $HTML \"$table\\n\";\n</code></pre>\n"}, {"tags": ["perl", "hashtable"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10707417, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-glmDPk1yrWs/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gHqHmjt0wTpsEEaCUZQ0iTAxZ2qw/mo/photo.jpg?sz=128", "display_name": "chandler hall", "link": "https://stackoverflow.com/users/10707417/chandler-hall"}, "edited": false, "score": 0, "creation_date": 1543258456, "post_id": 53487158, "comment_id": 93844374, "body": "I&#39;m supposed to be able to record, ignore, and report any entries with incorrect data like the 5x9"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 21, "user_id": 10707417, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-glmDPk1yrWs/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gHqHmjt0wTpsEEaCUZQ0iTAxZ2qw/mo/photo.jpg?sz=128", "display_name": "chandler hall", "link": "https://stackoverflow.com/users/10707417/chandler-hall"}, "edited": false, "score": 0, "creation_date": 1543261410, "post_id": 53487158, "comment_id": 93845667, "body": "Feel free to add validation before populating the hash."}, {"owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 0, "creation_date": 1543262495, "post_id": 53487158, "comment_id": 93846163, "body": "I thnk 5x9 is a typo. Its probably 59"}, {"owner": {"reputation": 21, "user_id": 10707417, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-glmDPk1yrWs/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gHqHmjt0wTpsEEaCUZQ0iTAxZ2qw/mo/photo.jpg?sz=128", "display_name": "chandler hall", "link": "https://stackoverflow.com/users/10707417/chandler-hall"}, "edited": false, "score": 0, "creation_date": 1543263005, "post_id": 53487158, "comment_id": 93846422, "body": "It is meant to be there so that you can test catching bad input data.  I need to catch any invalid grade data and report it after computing and reporting all the good data"}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1543270088, "post_id": 53487158, "comment_id": 93849630, "body": "you can use the <code>looks_like_number</code> function from the core <code>Scalar::Util</code> module to catch non-numeric strings."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1543257622, "creation_date": 1543257622, "answer_id": 53487158, "question_id": 53487041, "link": "https://stackoverflow.com/questions/53487041/perl-generating-an-array-of-hashes-from-a-file/53487158#53487158", "title": "Perl: Generating an Array of hashes from a file", "body": "<pre><code>push @Aoh, { split / / };\n</code></pre>\n\n<p>Creates the following hash from the first line:</p>\n\n<pre><code>{ chipper =&gt; 'jones',\n  29      =&gt; 80,\n  70      =&gt; undef,\n}\n</code></pre>\n\n<p>That's not what you wanted, right?</p>\n\n<p>I'd use a hash of numbers instead of the array of hashes. You can use \"lastname, firstname\" directly as the hash key and you can store the averages directly as the values:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse List::Util qw{ sum };\n\nmy %average;\n\nwhile (&lt;&gt;) {\n    my ($name, $surname, @grades) = split;\n    $average{\"$surname, $name\"} = sum(@grades) / @grades;\n}\n\nfor my $student (sort { $average{$a} &lt;=&gt; $average{$b} } keys %average) {\n    print $student, ' ', $average{$student}, \"\\n\";\n}\n</code></pre>\n\n<p>Note that I'm getting a warning:</p>\n\n<blockquote>\n  <p>Argument \"5x9\" isn't numeric in subroutine entry at ./1.pl line 11, &lt;> line 3.</p>\n</blockquote>\n\n<p>How should one treat the <code>5x9</code> grade?</p>\n"}], "owner": {"reputation": 21, "user_id": 10707417, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-glmDPk1yrWs/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gHqHmjt0wTpsEEaCUZQ0iTAxZ2qw/mo/photo.jpg?sz=128", "display_name": "chandler hall", "link": "https://stackoverflow.com/users/10707417/chandler-hall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1543257622, "creation_date": 1543257079, "question_id": 53487041, "link": "https://stackoverflow.com/questions/53487041/perl-generating-an-array-of-hashes-from-a-file", "title": "Perl: Generating an Array of hashes from a file", "body": "<p>I'm trying to create an array of hashes that contains student names as the keys and multiple grades as the values for each student so that I can compute the average for each student, sort the averages in descending order, and print the \"lastname, firstname: grade average\" of each student in the sorted order.<br>\nThe issue i'm having is with the generation of the array of hashes which I'm 90% sure the problem lies in the split on line 10 but I can't seem to find the solution myself.</p>\n\n<p>students.txt:</p>\n\n<pre><code>chipper jones 29 80 70\nhank aaron 99 85 81 75\nbeth allen 64 84 71 5x9 38 68 53\nandruw jones 100 100 100 100 100\nty cobb 75 75 100\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>#!/usr/bin/perl\n#Program 5\n\nmy @Aoh;\n\nopen (FILEIN, \"$ARGV[0]\");\n\nwhile(&lt;FILEIN&gt;) {\n    chomp;\n    push @Aoh, { split / / };\n\n    for $i (0 .. $#Aoh) {\n        print \"{ \";\n        for $role (keys %{ $Aoh[$i] }) {\n            print \" $role $Aoh[$i]{$role} \";\n        }\n    print \"}\\n\";\n    }\n}\n</code></pre>\n\n<p>output I'm getting:</p>\n\n<pre><code>0 is { chipper=jones 70= 29=80 }\n1 is { 81=75 hank=aaron 99=85 }\n2 is { 38=68 53= beth=allen 64=84 71=5x9 }\n3 is { 100= andruw=jones }\n4 is { ty=cobb 75=75 100= }\n</code></pre>\n"}, {"tags": ["perl", "subroutine"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543254592, "post_id": 53485829, "comment_id": 93842610, "body": "See the beginning (&quot;Description&quot;) in <a href=\"https://perldoc.perl.org/perlsub.html\" rel=\"nofollow noreferrer\">perlsub</a>, and your favorite introductory book."}], "answers": [{"tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 2, "last_activity_date": 1543259831, "last_edit_date": 1543259831, "creation_date": 1543255680, "answer_id": 53486753, "question_id": 53485829, "link": "https://stackoverflow.com/questions/53485829/perl-sub-routine-to-get-the-square-of-a-number/53486753#53486753", "title": "Perl Sub routine to get the square of a number", "body": "<p>Your subroutine expects a number as first argument. You access the argument when you do :</p>\n\n<pre><code>my $number = shift;\n</code></pre>\n\n<p>Which is actually roughly equivalent to :</p>\n\n<pre><code>my ($number) = @_;\n</code></pre>\n\n<p>So as you can see, @_ is a special variable that represents the list of arguments that were passed to the subroutine.</p>\n\n<p>The problem in your code is that you do not pass any argument to your sub. This :</p>\n\n<pre><code>my $result = square();\n</code></pre>\n\n<p>Should be written as :</p>\n\n<pre><code>my $result = square($number);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11684, "user_id": 1990570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B1hso.png?s=128&g=1", "display_name": "tobyink", "link": "https://stackoverflow.com/users/1990570/tobyink"}, "edited": false, "score": 0, "creation_date": 1543266601, "post_id": 53487864, "comment_id": 93848101, "body": "The <code>die</code> statement is the last statement in a block, so it doesn&#39;t need a semicolon to terminate it."}, {"owner": {"reputation": 35588, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 11684, "user_id": 1990570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B1hso.png?s=128&g=1", "display_name": "tobyink", "link": "https://stackoverflow.com/users/1990570/tobyink"}, "edited": false, "score": 0, "creation_date": 1543266703, "post_id": 53487864, "comment_id": 93848134, "body": "True. I&#39;ll remove that."}], "tags": [], "owner": {"reputation": 35588, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 2, "last_activity_date": 1543266747, "last_edit_date": 1543266747, "creation_date": 1543260943, "answer_id": 53487864, "question_id": 53485829, "link": "https://stackoverflow.com/questions/53485829/perl-sub-routine-to-get-the-square-of-a-number/53487864#53487864", "title": "Perl Sub routine to get the square of a number", "body": "<p>You are not passing <code>$number</code> to your sub. Try this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict ;\nuse warnings ;\n\nmy $number = $ARGV[0] ;\n\ndie \"I need a number to multiply\" unless(defined $number);\n\nsub square {\n    my $number = shift ;\n    print \"$number\\n\";\n    return $number * $number;\n}\n\nmy $result = square($number);\nprint \"$result\\n\";\n</code></pre>\n"}], "owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1543266747, "creation_date": 1543251672, "question_id": 53485829, "link": "https://stackoverflow.com/questions/53485829/perl-sub-routine-to-get-the-square-of-a-number", "title": "Perl Sub routine to get the square of a number", "body": "<p>I am trying to write a subroutine to demonstrate getting a subroutine of a number as a function in Perl. I have no idea how to use the @_ operator in perl  </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict ;\nuse warnings ;\nmy $number = $ARGV[0] ;\nif (not defined $number) {\n        die \" I need a number to multiply\" }\n\n    sub square {\n        my $number = shift ;\n        print \"$number\\n\"\n        return $number * $number ;\n}\n\nmy $result = square() ;\nprint \"$result\";\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1543249866, "post_id": 53485089, "comment_id": 93840337, "body": "We&#39;ll need some sample input data and the expected output that matches that data."}, {"owner": {"reputation": 49, "user_id": 8802831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cb28b8b09d0b36a9a1d2395b056662?s=128&d=identicon&r=PG&f=1", "display_name": "ebk", "link": "https://stackoverflow.com/users/8802831/ebk"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1543251014, "post_id": 53485089, "comment_id": 93840947, "body": "Oh right, File A 201843,12345,30"}, {"owner": {"reputation": 49, "user_id": 8802831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cb28b8b09d0b36a9a1d2395b056662?s=128&d=identicon&r=PG&f=1", "display_name": "ebk", "link": "https://stackoverflow.com/users/8802831/ebk"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1543251120, "post_id": 53485089, "comment_id": 93841019, "body": "File B 201843,12345,447,4,0,4 201843,12345,450,4,0,4 201843,12345,451,2,0,2 201843,12345,455,4,0,4 201843,12345,334,0,1,1 201843,12345,364,0,1,1 201843,12345,71,0,2,2 201843,12345,260,0,2,2 201843,12345,321,0,2,2 201843,12345,328,0,2,2 201843,12345,371,0,2,2 201843,12345,385,0,2,2 201843,12345,426,0,2,2 201843,12345,444,0,2,2 201843,12345,31,4,6,10 201843,12345,360,2,87,99 201843,12345,373,4,95,99 201843,12345,472,4,95,99 201843,12345,475,4,95,99 201843,12345,430,0,99,99 201843,12345,453,0,99,99 201843,12345,463,0,99,99 201843,12345,482,0,99,99 201843,12345,484,0,99,99"}, {"owner": {"reputation": 49, "user_id": 8802831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cb28b8b09d0b36a9a1d2395b056662?s=128&d=identicon&r=PG&f=1", "display_name": "ebk", "link": "https://stackoverflow.com/users/8802831/ebk"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1543251244, "post_id": 53485089, "comment_id": 93841086, "body": "File Result 201843,12345,447,4,0,4 201843,12345,450,4,0,4 201843,12345,451,2,0,2 201843,12345,455,4,0,4 201843,12345,334,1,0,1 201843,12345,364,1,0,1 201843,12345,71,2,0,2 201843,12345,260,2,0,2 201843,12345,321,2,0,2 201843,12345,328,2,0,2 201843,12345,371,2,0,2 201843,12345,385,2,0,2 201843,12345,426,2,0,2 201843,12345,444,2,0,2 201843,12345,31,10,0,10 201843,12345,360,3,86,99 201843,12345,373,5,94,99 201843,12345,472,5,94,99 201843,12345,475,5,94,99 201843,12345,430,1,98,99 201843,12345,453,1,98,99"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1543251486, "post_id": 53485089, "comment_id": 93841228, "body": "Please <a href=\"https://stackoverflow.com/posts/53485089/edit\">edit your question</a> to add this information. Comments on StackOverflow are unformatted."}, {"owner": {"reputation": 49, "user_id": 8802831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cb28b8b09d0b36a9a1d2395b056662?s=128&d=identicon&r=PG&f=1", "display_name": "ebk", "link": "https://stackoverflow.com/users/8802831/ebk"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1543251706, "post_id": 53485089, "comment_id": 93841341, "body": "I have done it."}, {"owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "edited": false, "score": 0, "creation_date": 1543255305, "post_id": 53485089, "comment_id": 93842946, "body": "The question is still lacking clarity.  You mentioned files A and B, and a &quot;third file&quot; which I&#39;m guessing is just the terminal output from your print statement that you plan to redirect.  In that case, you can call it &quot;output&quot; or &quot;STDOUT&quot;.  Also your print statement has text labels for values whereas your &quot;third file&quot; doesn&#39;t.   You need to give a minimal and complete answer: a handful of lines for file A, B, and your intended output."}, {"owner": {"reputation": 49, "user_id": 8802831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cb28b8b09d0b36a9a1d2395b056662?s=128&d=identicon&r=PG&f=1", "display_name": "ebk", "link": "https://stackoverflow.com/users/8802831/ebk"}, "edited": false, "score": 0, "creation_date": 1543256380, "post_id": 53485089, "comment_id": 93843393, "body": "The result is basically the same file of second file the difference is the increment of value_inputted that have to reach the value_max or value_total_to_put is zero."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1543265552, "post_id": 53485089, "comment_id": 93847628, "body": "What do you think <code>@$line[0]</code> does? Because I strongly suspect you mean <code>$line-&gt;[0]</code>. Do you have <code>use strict</code> and <code>use warnings</code> in your code? Adding those and fixing all the problems they uncover would be a good start."}, {"owner": {"reputation": 49, "user_id": 8802831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cb28b8b09d0b36a9a1d2395b056662?s=128&d=identicon&r=PG&f=1", "display_name": "ebk", "link": "https://stackoverflow.com/users/8802831/ebk"}, "edited": false, "score": 0, "creation_date": 1543271804, "post_id": 53485089, "comment_id": 93850308, "body": "@$line[0] and @$line[1] are the col1 and col2 from each files. I use this way to match both files and I am using use strict and use warnings in my code.  This is only a piece of my code."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1543306347, "post_id": 53485089, "comment_id": 93859933, "body": "<i>@$line[0] and @$line[1] are the col1 and col2 from each files</i> Yes, but my point is that this is a really non-standard way to write those expressions. More people would understand your code if you wrote them as <code>$line-&gt;[0]</code> and <code>$line-&gt;[1]</code>."}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1543534631, "post_id": 53485089, "comment_id": 93964898, "body": "@ebk, is my below answer helpful ? Please let us know if you have somehow found a way to solve the issue"}, {"owner": {"reputation": 49, "user_id": 8802831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cb28b8b09d0b36a9a1d2395b056662?s=128&d=identicon&r=PG&f=1", "display_name": "ebk", "link": "https://stackoverflow.com/users/8802831/ebk"}, "edited": false, "score": 0, "creation_date": 1543860498, "post_id": 53485089, "comment_id": 94061200, "body": "Actually, it was not what I was expecting, so I did it thinking in another way. I&#39;ll put it below your answer."}], "answers": [{"tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 0, "last_activity_date": 1543365243, "creation_date": 1543365243, "answer_id": 53510372, "question_id": 53485089, "link": "https://stackoverflow.com/questions/53485089/loop-recursive-through-two-files-in-perl/53510372#53510372", "title": "Loop recursive through two files in perl", "body": "<p>As explained by @Dave Cross, your code is quite hard to read (and misses <code>use strict</code>and <code>use warnings</code>), and your explanation of what you are trying to achieve is quite unclear...</p>\n\n<p>One thing that caught my eye however, is that you start a loop with this statement...</p>\n\n<pre><code>while ($value_total_to_put &gt; 0){\n</code></pre>\n\n<p>... but at the very end of that same block you do :</p>\n\n<pre><code>    last if $value_total_to_put &gt; 0;\n}\n</code></pre>\n\n<p>This will effectively cause Perl to exit the loop after the first iteration, no matter the value of the <code>$value_total_to_put</code> variable. This is probably not what you want. Hence, as far as I understand, you should start your investigation by removing that <code>last</code> statement.</p>\n"}], "owner": {"reputation": 49, "user_id": 8802831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cb28b8b09d0b36a9a1d2395b056662?s=128&d=identicon&r=PG&f=1", "display_name": "ebk", "link": "https://stackoverflow.com/users/8802831/ebk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1543365243, "creation_date": 1543248843, "last_edit_date": 1543251655, "question_id": 53485089, "link": "https://stackoverflow.com/questions/53485089/loop-recursive-through-two-files-in-perl", "title": "Loop recursive through two files in perl", "body": "<p>Hi guys I have an issue to solve,</p>\n\n<p>I have 2 files.</p>\n\n<p>File A\ncol1,col2, value_total_to_put</p>\n\n<pre><code>File A 201843,12345,30\n</code></pre>\n\n<p>File B\ncol1,col2,col3, value_inputted, missing_value, value_max</p>\n\n<pre><code>201843,12345,447,4,0,4\n201843,12345,448,0,0,4\n201843,12345,449,0,0,2\n201843,12345,450,4,0,4\n201843,12345,451,2,0,2\n201843,12345,455,4,0,4\n201843,12345,457,0,0,4\n201843,12345,899,10,0,10\n201843,12345,334,0,1,1\n201843,12345,364,0,1,1\n201843,12345,71,0,2,2\n201843,12345,260,0,2,2\n201843,12345,321,0,2,2\n201843,12345,328,0,2,2\n201843,12345,371,0,2,2\n201843,12345,385,0,2,2\n201843,12345,426,0,2,2\n201843,12345,444,0,2,2\n201843,12345,31,4,6,10\n201843,12345,360,2,87,99\n201843,12345,373,4,95,99\n201843,12345,472,4,95,99\n201843,12345,475,4,95,99\n201843,12345,430,0,99,99\n201843,12345,453,0,99,99\n201843,12345,463,0,99,99\n201843,12345,482,0,99,99\n201843,12345,484,0,99,99\n</code></pre>\n\n<p>My keys are col1 and col2 from both files and I am doing this way below and my loop is wrong because when I reach the EOF from File B my loop is stopped.\nWhat I want is match File A and B with $col1 and $col2 and while the value_total_to_put is > 0 withdraw 1 in each loop and in value_inputted from File B when value_inputted is less than value_max. For withdraw from File A missing_value might be > 0.\nFor the result I will print when value_inputted is equal to value_max in other words the last value until reach value_max or value_total_to_put is 0.</p>\n\n<pre><code>while ( &lt;FA&gt; ){\n        chomp;\n        my($col1,$col2, $value_total_to_put) = split \",\";\n        push @A, [$col1,$col2, $value_total_to_put];\n}\n\nmy @B;\nwhile ( &lt;FB&gt; ){\n        chomp;\n        my($col1,$col2,$col3, $value_inputted, $missing_value, $value_max) = split \",\";\n        push @B, [$col1,$col2,$col3, $value_inputted, $missing_value, $value_max];\n}\n\n\nforeach my $line (@A){\n        my $idxl = @$line[0].\",\".@$line[1];\n        my $value_total_to_put = @$line[2];\n        while ($value_total_to_put &gt; 0){\n                foreach my $row ( @B ){\n                if ( $idxr eq $idxl ){\n                        my $idxr = @$row[0].\",\".@$row[1];\n                        my $value_inputted = @$row[3];\n                        my $value_max = @$row[5];\n                        my $missing_value = @$row[4];\n                        if ( ($value_inputted eq 0) and ($missing_value eq 0)){\n                                #do_nothing\n                        } elsif($value_inputted == $value_max){\n                                #do_nothing\n                            print join(\",\", $idxr, @$row[2],\"Value_inputted: \".$value_inputted, \"Missing_value: \".$missing_value, \"Value_max:\".$value_max, \"Total: \".$value_total_to_put).\"\\n\";\n                        }else{\n                            $value_inputted++;\n                            $missing_value--;\n                            $value_total_to_put--;\n                        }\n                }\n                }\n\n        last if $value_total_to_put &gt; 0;\n        }\n}\n</code></pre>\n\n<p>The third file will be this way:</p>\n\n<pre><code>201843,12345,447,4,0,4\n201843,12345,450,4,0,4\n201843,12345,451,2,0,2\n201843,12345,455,4,0,4\n201843,12345,899,10,0,10\n201843,12345,334,1,0,1\n201843,12345,364,1,0,1\n201843,12345,71,2,0,2\n201843,12345,260,2,0,2\n201843,12345,321,2,0,2\n201843,12345,328,2,0,2\n201843,12345,371,2,0,2\n201843,12345,385,2,0,2\n201843,12345,426,2,0,2\n201843,12345,444,2,0,2\n201843,12345,31,10,0,10\n201843,12345,360,3,86,99\n201843,12345,373,5,94,99\n201843,12345,472,5,94,99\n201843,12345,475,5,94,99\n201843,12345,430,1,98,99\n201843,12345,453,1,98,99\n</code></pre>\n"}, {"tags": ["perl", "substitution"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1543245971, "post_id": 53483665, "comment_id": 93838148, "body": "What should happen for the string <code>it&quot;&quot;s &quot;simple&quot;</code> ? What do you mean by &quot;duplicate&quot; ? What should happen for the string <code>mississippi</code> ? Should it become <code>misisipi</code> ?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1543246363, "post_id": 53483665, "comment_id": 93838383, "body": "... also, what should happen for <code>it&#39;&#39;&#39;s simple</code> ?"}, {"owner": {"reputation": 362, "user_id": 1534242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71b5ad16294473030981d30e20b2d6bb?s=128&d=identicon&r=PG", "display_name": "maloo", "link": "https://stackoverflow.com/users/1534242/maloo"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1543246845, "post_id": 53483665, "comment_id": 93838640, "body": "@Corion the &#39; character is being used as an escape character but also to quote the string... This is from an xlsx formatted document (the actual xml) - worksheet names My actual example has one less &#39; but it seems Microsoft both quote and escape using the &#39; char. don&#39;t ask me why!!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1543246915, "post_id": 53483665, "comment_id": 93838672, "body": "If this is CSV, you should be using Text::CSV, setting the quote char and the escape char to <code>&#39;</code>."}, {"owner": {"reputation": 362, "user_id": 1534242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71b5ad16294473030981d30e20b2d6bb?s=128&d=identicon&r=PG", "display_name": "maloo", "link": "https://stackoverflow.com/users/1534242/maloo"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1543247174, "post_id": 53483665, "comment_id": 93838813, "body": "@ikegami Unfortunately its not. Text::CSV is great though (I&#39;m using it to create a csv)"}], "answers": [{"comments": [{"owner": {"reputation": 362, "user_id": 1534242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71b5ad16294473030981d30e20b2d6bb?s=128&d=identicon&r=PG", "display_name": "maloo", "link": "https://stackoverflow.com/users/1534242/maloo"}, "edited": false, "score": 0, "creation_date": 1543246273, "post_id": 53484258, "comment_id": 93838328, "body": "Thanks Dave! That&#39;s definitely simple - It&#39;s quite amazing what you can achieve with regex!"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1543245784, "creation_date": 1543245784, "answer_id": 53484258, "question_id": 53483665, "link": "https://stackoverflow.com/questions/53483665/perl-delete-a-character-from-a-string-unless-it-is-a-duplicate/53484258#53484258", "title": "Perl delete a character from a string unless it is a duplicate", "body": "<p>Use a negative look-ahead assertion.</p>\n\n<pre><code>#!/use/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\n$_ = \"'it''s simple'\";\n\nsay;\n\ns/'(?!')//g;\n\nsay;\n</code></pre>\n\n<p><code>'(?!')</code> means \"a single quote that isn't followed immediately by another single quote\".</p>\n\n<p>Output:</p>\n\n<pre><code>'it''s simple'\nit's simple\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 362, "user_id": 1534242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71b5ad16294473030981d30e20b2d6bb?s=128&d=identicon&r=PG", "display_name": "maloo", "link": "https://stackoverflow.com/users/1534242/maloo"}, "edited": false, "score": 0, "creation_date": 1543247863, "post_id": 53484342, "comment_id": 93839258, "body": "Thanks @Silvar. I&#39;ve updated my question to mention that there will never be more than two chars in a row, but this will probably be useful for others!"}], "tags": [], "owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "is_accepted": false, "score": 2, "last_activity_date": 1543246074, "creation_date": 1543246074, "answer_id": 53484342, "question_id": 53483665, "link": "https://stackoverflow.com/questions/53483665/perl-delete-a-character-from-a-string-unless-it-is-a-duplicate/53484342#53484342", "title": "Perl delete a character from a string unless it is a duplicate", "body": "<pre><code>use warnings;\nuse strict;\n\nmy $text = q!'it''s 'simple'!;\n$text =~ s/'('?)/$1/g;\nprint \"$text\\n\";\n</code></pre>\n\n<p>So in the regex <code>'('?)</code>, it will match - and remove - the first <code>'</code> and if followed by another, will capture it and place it in the result.</p>\n\n<p>This version will handle each one or two apostrophe group separately (because OP used the term \"duplicate\" instead of \"multiple\"). If you want to replace any 2+ apostrophe sequence with a single one, use the regex <code>'('?)'*</code> instead.</p>\n"}], "owner": {"reputation": 362, "user_id": 1534242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71b5ad16294473030981d30e20b2d6bb?s=128&d=identicon&r=PG", "display_name": "maloo", "link": "https://stackoverflow.com/users/1534242/maloo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 53484258, "answer_count": 2, "score": -1, "last_activity_date": 1543247777, "creation_date": 1543243837, "last_edit_date": 1543247777, "question_id": 53483665, "link": "https://stackoverflow.com/questions/53483665/perl-delete-a-character-from-a-string-unless-it-is-a-duplicate", "title": "Perl delete a character from a string unless it is a duplicate", "body": "<p>What is the cleanest/simplest way to remove a particular character from a string <strong>unless</strong> it is repeated once.</p>\n\n<p>For example given the following string:</p>\n\n<pre><code>'it''s 'simple'\n</code></pre>\n\n<p>I expect:</p>\n\n<pre><code>it's simple\n</code></pre>\n\n<p>For my usage there shall never be more than two ' characters in a row.</p>\n"}, {"tags": ["perl", "sorting", "arrayref"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1543237838, "post_id": 53481803, "comment_id": 93833182, "body": "Define what you mean by &quot;it doesn&#39;t work&quot;; how doesn&#39;t it work? What output to do you get and what output are you expecting?"}, {"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1543238380, "post_id": 53481803, "comment_id": 93833500, "body": "I expect: <code>&#39;Ende Monatswechsel P-Konten&#39; =&gt; [                                          &#39;14.02.2018 04:28:11&#39;,                                          &#39;17.02.2018 05:17:39&#39;,                                          &#39;22.02.2018 03:39:20&#39;,                                          &#39;23.02.2018 03:17:17&#39;,                                   ]</code>"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1543238779, "post_id": 53481803, "comment_id": 93833789, "body": "The usual approach is to split up the string and compare the parts. The better approach is to force your upstream system to output the date as <code>YYYY-mm-dd HH:MM:SS</code>. Then you can use string comparisons."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1543332623, "post_id": 53481803, "comment_id": 93875232, "body": "@Unsal: Ok, now I&#39;m completely confused. Your original post strongly implied that you wanted to sort an array that was stored in a hash. So that&#39;s what my code did. Now you&#39;ve posted code that builds up the array inside the hash (and, as far as I can see, builds it in the correct order). So, I really don&#39;t know what you&#39;re asking."}, {"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1543350756, "post_id": 53481803, "comment_id": 93885184, "body": "@Dave: sorry for not having made it precise enough. Yes it is an arrayref and what you see is just a piece from the output. From first glance it looks like it is sorted already but I have like &gt;100 values where dates are unsorted in that arrayref."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1543357397, "post_id": 53481803, "comment_id": 93888109, "body": "@Unsal: Ok, the easiest option is probably to create your hash of arrays in the same way as you currently do and then go and sort the arrays afterwards. The code in my answer will do that (see the version at the end of your answer which tries to use your data structures)."}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1543311033, "post_id": 53482455, "comment_id": 93862357, "body": "Hi Dave, thanks for the answer. I am not sure how schwartzian transform should work here, because i have fix length of date strings."}, {"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1543315034, "post_id": 53482455, "comment_id": 93864727, "body": "Btw your suggestion did not work it returns: <code>$VAR1 = [           &#39;17.02.2018 05:17:39&#39;,           &#39;23.02.2018 03:17:17&#39;,           &#39;14.02.2018 04:28:11&#39;,           &#39;22.02.2018 03:39:20&#39;         ];</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1543316144, "post_id": 53482455, "comment_id": 93865347, "body": "@Unsal: Doesn&#39;t look like you&#39;re running my actual code. My code returns an array, but you&#39;re dumping an array reference."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1543325067, "post_id": 53482455, "comment_id": 93870531, "body": "@Unsal: My code takes an array reference (<code>$data</code>) as input and returns an array (<code>@sorted</code>). Edit your question to add the current state of your code and I&#39;ll take a look."}, {"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1543327337, "post_id": 53482455, "comment_id": 93871991, "body": "In my Code I push my timestamps into a hash (%results) like this: <code>push @{$results{$action}}, $timestamp;</code> but I am not able to use your code with my arrayref."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1543328680, "post_id": 53482455, "comment_id": 93872775, "body": "@Unsal: As I said before &quot;Edit your question to add the current state of your code and I&#39;ll take a look&quot;. Exchanging brief snippets in comments really isn&#39;t helpful."}, {"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1543332002, "post_id": 53482455, "comment_id": 93874866, "body": "I have edited my question and put the code snippet in there."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1543329019, "last_edit_date": 1543329019, "creation_date": 1543239854, "answer_id": 53482455, "question_id": 53481803, "link": "https://stackoverflow.com/questions/53481803/perl-sort-multiple-arryrefs-of-date-time-strings/53482455#53482455", "title": "perl sort multiple arryrefs of date time strings", "body": "<p>Something like this would work:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nuse Data::Dumper;\n\nmy $data = [\n  '17.02.2018 05:17:39',\n  '14.02.2018 04:28:11',\n  '23.02.2018 03:17:17',\n  '22.02.2018 03:39:20',\n];\n\nmy @sorted = sort {\n  my @a = split /[\\. ]/, $a;\n  my @b = split /[\\. ]/, $b;\n  return (\n    $a[2] &lt;=&gt; $b[2] or  # year\n    $a[1] &lt;=&gt; $b[1] or  # month\n    $a[0] &lt;=&gt; $b[0] or  # day of month\n    $a[3] cmp $b[3]     # time\n  );\n} @$data;\n\nsay Dumper @sorted;\n</code></pre>\n\n<p>I'm splitting each value into chunks and then sorting them from largest chunk to smallest. Note that as the time is a string, not a number I use <code>cmp</code> instead of <code>&lt;=&gt;</code>.</p>\n\n<p>This is slightly inefficient, as I'm re-splitting each data item several times. If that's a problem, then you could look at something like a Schwartzian Transform.</p>\n\n<p>But the best solution to this would be to get a sortable timestamp in the first place. If your dates were <code>YYYY.MM.DD HH:MM:SS</code>, then you could just do a simple string sort.</p>\n\n<p><strong>Update:</strong> My output is</p>\n\n<pre><code>$ perl sortdate\n$VAR1 = '14.02.2018 04:28:11';\n$VAR2 = '17.02.2018 05:17:39';\n$VAR3 = '22.02.2018 03:39:20';\n$VAR4 = '23.02.2018 03:17:17';\n</code></pre>\n\n<p><strong>Update 2:</strong> I've edited my code to make it more like your example. Hope this helps.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nuse Data::Dumper;\n\nmy %results = (\n  'Ende Monatswechsel P-Konten' =&gt; [\n    '17.02.2018 05:17:39',\n    '14.02.2018 04:28:11',\n    '23.02.2018 03:17:17',\n    '22.02.2018 03:39:20',\n  ]\n);\n\nforeach my $k (keys %results) {\n  my @sorted = sort {\n    my @a = split /[\\. ]/, $a;\n    my @b = split /[\\. ]/, $b;\n    return (\n      $a[2] &lt;=&gt; $b[2] or  # year\n      $a[1] &lt;=&gt; $b[1] or  # month\n      $a[0] &lt;=&gt; $b[0] or  # day of month\n      $a[3] &lt;=&gt; $b[3]     # time\n    );\n  } @{ $results{$k} };\n\n  $results{$k} = \\@sorted;\n}\n\nsay Dumper \\%results;\n</code></pre>\n\n<p>And the output...</p>\n\n<pre><code>$VAR1 = {\n          'Ende Monatswechsel P-Konten' =&gt; [\n                                             '14.02.2018 04:28:11',\n                                             '17.02.2018 05:17:39',\n                                             '22.02.2018 03:39:20',\n                                             '23.02.2018 03:17:17'\n                                           ]\n        };\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543388761, "post_id": 53512041, "comment_id": 93896783, "body": "If it&#39;s really just a few elements this is great but for lists of any greater length I&#39;d suggest to actually use the Schwartzian transform, since <code>Time::Piece</code> isn&#39;t that cheap.  It&#39;s still going to be expensive but incomparably less so."}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543411358, "post_id": 53512041, "comment_id": 93909452, "body": "Fair point. Personally I would choose brevity and readability over optimization unless speed is critical."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543430960, "post_id": 53512041, "comment_id": 93921170, "body": "Agreed.  I just wanted to note that <code>Time::Piece</code> is a little expensive. (It came as a surprise to me; once I had to drop it and move to manual parsing as it was adding too much overhead. But that code had <i>a lot</i> to process.)"}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543434638, "post_id": 53512041, "comment_id": 93922946, "body": "I am surprised too because it&#39;s a core module, I assumed it was a fast C implementation, but thanks for the insight. Then again, a feature of the Schwartzian transform is efficiency (due to  comparing only what it needs to before short-circuiting), so perhaps it&#39;s not that surprising."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543436089, "post_id": 53512041, "comment_id": 93923613, "body": "Sorry, I may have not stated that clearly:  I found the module to be too slow (for long, long lists in time-hungry code), without the transform; there was no sorting, just <code>Time::Piece</code> was taking longer than I  expected.  (Thus I mentioned the transform here, since with sorting <code>TP-&gt;strptime</code> runs for <i>every</i> comparison; with the transform it runs once for each list element and the cached objects are then just used in comparisons.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543604646, "post_id": 53512041, "comment_id": 93992596, "body": "To add: I am pretty sure that <code>Time::Piece</code>&#39;s code is fast, as you say -- the problem is that <code>strptime</code> runs a constructor; so a full object is built every time.  I think that <i>that</i> is what kills the efficiency, and what made it unusable for me in long loops. (The fact that <code>strptime</code> is a <i>class method</i> also adds to trouble, since in the method resolution process first all instance methods are searched and only then class methods.)  I couldn&#39;t find a way to &quot;set&quot; an existing object without running <code>strptime</code> (so to avoid the constructor)."}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543616548, "post_id": 53512041, "comment_id": 93997236, "body": "Why can&#39;t you do <code>$t = Time::Piece-&gt;new; $t-&gt;strptime($_,&quot;%Y-%M-%d&quot;) for @dates</code>?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1543617856, "post_id": 53512041, "comment_id": 93997627, "body": "Indeed, can do that (so it&#39;s a dual-purpose method) ... can&#39;t recall how exactly it went; perhaps it was just still slow and I&#39;m wrong with blaming the constructor now, or perhaps I didn&#39;t think of trying this (since docs only mention class-method invocation). Will look/test again, for when it comes up the next time. Thanks!"}], "tags": [], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "is_accepted": false, "score": 1, "last_activity_date": 1543411057, "last_edit_date": 1543411057, "creation_date": 1543378536, "answer_id": 53512041, "question_id": 53481803, "link": "https://stackoverflow.com/questions/53481803/perl-sort-multiple-arryrefs-of-date-time-strings/53512041#53512041", "title": "perl sort multiple arryrefs of date time strings", "body": "<p>Splitting the strings and comparing the parts is appropriate for sorting many types of \"multipart\" values, however since you are dealing with datetimes, you can use the core module <code>Time::Piece</code> to turn the strings into datetime objects which can be compared using the <code>&lt;=&gt;</code> operator.</p>\n\n<p><code>Time::Piece</code> provides the <code>strptime</code> method, which parses a date string into a <code>Time::Piece</code> object using a format string. <code>Time::Piece</code> objects can be compared using numerical comparison operators. </p>\n\n<pre><code>use v5.10;\nuse strict\nuse warnings;\nuse Time::Piece;\n\nmy @vals = (\n    '17.02.2018 05:17:39',\n    '14.02.2018 04:28:11',\n    '23.02.2018 03:17:17',\n    '22.02.2018 03:39:20',\n);\n\nsay for sort {dt($a) &lt;=&gt; dt($b)} @vals;\n\n###\n\nsub dt {\n    my $str = shift;\n    return Time::Piece-&gt;strptime($str,'%e.%m.%Y %H:%M:%S') \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "is_accepted": false, "score": 0, "last_activity_date": 1543415875, "creation_date": 1543415875, "answer_id": 53521904, "question_id": 53481803, "link": "https://stackoverflow.com/questions/53481803/perl-sort-multiple-arryrefs-of-date-time-strings/53521904#53521904", "title": "perl sort multiple arryrefs of date time strings", "body": "<p>I actually used Dave's approach now (since I don't have the module Time::Piece installed) slightly different but it works now, not sure though about the efficency:</p>\n\n<pre><code>my @array;\nmy @sorted;\nmy %aref_n;\n\nfor my $key ( keys %results ) {\n    for my $i (0..$#{ $results{$key} }) {\n            push @array, $results{$key}[$i];\n    }\n\n    @sorted = sort {\n            my @a = split /[\\. ]/, $a;\n            my @b = split /[\\. ]/, $b;\n            return (\n                    $a[2] &lt;=&gt; $b[2] or\n                    $a[1] &lt;=&gt; $b[1] or\n                    $a[0] &lt;=&gt; $b[0] or\n                    $a[3] cmp $b[3]\n                    );\n            } @array;\n\n    $aref_n{$key} = [ @sorted ];\n    @array=();\n</code></pre>\n\n<p>}</p>\n"}], "owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1543415875, "creation_date": 1543237634, "last_edit_date": 1543332436, "question_id": 53481803, "link": "https://stackoverflow.com/questions/53481803/perl-sort-multiple-arryrefs-of-date-time-strings", "title": "perl sort multiple arryrefs of date time strings", "body": "<p>I want to sort an arrayref %results (Time-strings, from old to new), it has multiple keys but I just posted one key to show how it looks like:</p>\n\n<pre><code>'Ende Monatswechsel P-Konten' =&gt; [\n                                         '17.02.2018 05:17:39',\n                                         '14.02.2018 04:28:11',\n                                         '23.02.2018 03:17:17',\n                                         '22.02.2018 03:39:20',\n                                  ]\n</code></pre>\n\n<p>I am expecting:</p>\n\n<pre><code>    'Ende Monatswechsel P-Konten' =&gt; [\n                                         '14.02.2018 04:28:11',\n                                         '17.02.2018 05:17:39',\n                                         '22.02.2018 03:39:20',\n                                         '23.02.2018 03:17:17',\n                                  ]\n</code></pre>\n\n<p>Does any know how to do this?\nI tried: </p>\n\n<p><code>my $columns = map [ $_, sort{$a &lt;=&gt; $b} @{ $results{$_} } ], keys %results;</code></p>\n\n<p>but it doesn't work.\nThanks in advance.</p>\n\n<p>My code looks like this:</p>\n\n<pre><code>while(my $line=&lt;F&gt;) {\n    #- Info: 19.02.2018 00:01:01 --- Start Tageswechsel-CoBa ---\n    #- Info: 27.11.2018 04:16:42 --- Ende Tageswechsel-CoBa ---\n            if ($line=~ /(\\d\\d\\.\\d\\d\\.\\d\\d\\d\\d \\d\\d:\\d\\d:\\d\\d) --- (.+? Tageswechsel-CoBa) -.*\\s*$/)\n            {\n                    ($timestamp, $action) = ($1,$2);\n            }\n            if ( !defined $filter{$action}{$timestamp} ) {\n                    push @{$results{$action}}, $timestamp;\n                    $filter{$action}{$timestamp} = 1;\n            }\n}\n</code></pre>\n\n<p><code>print Dumper(\\%results)</code> outputs:</p>\n\n<pre><code>'Start Tageswechsel-CoBa' =&gt; [\n                                '17.02.2018 05:12:13',\n                                '20.02.2018 04:23:16',\n                                '22.02.2018 03:12:46',\n                                '23.02.2018 03:34:28',\n                                '27.02.2018 03:41:25',\n                                '02.03.2018 03:32:26',\n            ],\n'Ende Tageswechsel-CoBa' =&gt; [\n                                    '17.02.2018 05:20:01',\n                                    '19.02.2018 06:01:02',\n                                    '20.02.2018 04:29:44',\n                                    '22.02.2018 03:19:04',\n                                    '23.02.2018 03:40:52',\n                                    '26.02.2018 06:01:26',\n            ]\n            };\n</code></pre>\n"}, {"tags": ["regex", "perl", "zip", "compression"], "comments": [{"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1543228602, "post_id": 53478763, "comment_id": 93828360, "body": "Seems like you are working on Windows. Can you try this :       <code>zip \\@files  =&gt; &quot;$zip&quot;, FilterName =&gt; sub{ s|\\Q$cwd\\\\|| }  or die &quot;zip failed: $ZipError\\n&quot;;</code>"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1543234900, "post_id": 53478763, "comment_id": 93831595, "body": "Have you looked at the results of your substitution(s)? <code>s&lt;.*[&#47;\\\\]&gt;&lt;&gt;</code> leaves you with no folder structure at all, because it greedily gobbles up everything up to the last backslash. Maybe you want to just remove <code>length $cwd</code> characters from the start of <code>$File::Find::name</code>? Please edit your post and show us concrete input filenames, output filenames you get, output files you want and the resulting zip structure you want."}, {"owner": {"reputation": 415, "user_id": 2049083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc7fa8b5486247f7015f252df619282e?s=128&d=identicon&r=PG", "display_name": "MicrobicTiger", "link": "https://stackoverflow.com/users/2049083/microbictiger"}, "reply_to_user": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1543263032, "post_id": 53478763, "comment_id": 93846437, "body": "@GMB is this different from the method used in the first part of my code? The <code>s|\\Q$cwd\\\\||</code> substitution removes the working directory however it leaves behind a pair of // which translate to an initial folder folder &#39;invisible&#39; to windows explorer. I can view them with 7zip or similar, however, the systems this will be run on need them to be visible in windows."}, {"owner": {"reputation": 415, "user_id": 2049083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc7fa8b5486247f7015f252df619282e?s=128&d=identicon&r=PG", "display_name": "MicrobicTiger", "link": "https://stackoverflow.com/users/2049083/microbictiger"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1543263124, "post_id": 53478763, "comment_id": 93846497, "body": "@Corion, I realised that this was greedily removing the entire path. I attempted the length $cwd method with substring <code>zip \\@files  =&gt; &quot;$zip&quot;, FilterName =&gt; sub{ substr($_, 0, length($cwd))}  or die &quot;zip failed: $ZipError\\n&quot;;</code>. Unfortunately this gives me the same result as <code>s|\\Q$cwd\\\\||</code>.  I will try to find a way to present the result."}], "answers": [{"comments": [{"owner": {"reputation": 415, "user_id": 2049083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc7fa8b5486247f7015f252df619282e?s=128&d=identicon&r=PG", "display_name": "MicrobicTiger", "link": "https://stackoverflow.com/users/2049083/microbictiger"}, "edited": false, "score": 0, "creation_date": 1543266574, "post_id": 53483779, "comment_id": 93848085, "body": "Hi @clamp, Please can you present your results of the final zip file? This is the code I provided which doesn&#39;t produce a workable result in windows with an additional print statement."}], "tags": [], "owner": {"reputation": 1934, "user_id": 10667839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ee13d3681ace95a1c13693db607f72?s=128&d=identicon&r=PG&f=1", "display_name": "clamp", "link": "https://stackoverflow.com/users/10667839/clamp"}, "is_accepted": false, "score": 0, "last_activity_date": 1543269162, "last_edit_date": 1543269162, "creation_date": 1543244158, "answer_id": 53483779, "question_id": 53478763, "link": "https://stackoverflow.com/questions/53478763/perl-zipping-a-folder-without-the-working-directory-file-path/53483779#53483779", "title": "perl Zipping a folder without the working directory file path", "body": "<p>This works for me:</p>\n\n<pre><code>use Cwd;\nuse warnings;\nuse strict;\nuse File::Find;\nuse IO::Compress::Zip qw(:all);\nuse Data::Dumper;\n\nmy $cwd = getcwd();\n$cwd =~ s/[\\\\]/\\//g;\n\nprint $cwd, \"\\n\";\nmy $zipdir  = $cwd . \"/source_folder\";\nmy $zip = \"source_folder.zip\";\n\nmy @files = ();\n\nsub process_file {\n    next if (($_ eq '.') || ($_ eq '..'));\n    if (-d &amp;&amp; $_ eq 'fp') {\n        $File::Find::prune = 1;\n        return;\n    }\n    push @files, $File::Find::name if -f;\n}\nfind(\\&amp;process_file, $cwd . \"/source_folder\");\nprint Dumper \\@files;\nzip \\@files  =&gt; \"$zip\", FilterName =&gt; sub{ s|\\Q$cwd/|| }  or die \"zip failed: $ZipError\\n\";\n</code></pre>\n\n<p>I changed the path seperator to '/' in your call to find() and also stripped it in the FilterName sub.\nconsole:</p>\n\n<pre><code>C:\\Users\\chris\\Desktop\\devel\\experimente&gt;mkdir source_folder\nC:\\Users\\chris\\Desktop\\devel\\experimente&gt;echo 1 &gt; source_folder/test1.txt\nC:\\Users\\chris\\Desktop\\devel\\experimente&gt;echo 1 &gt; source_folder/test2.txt\nC:\\Users\\chris\\Desktop\\devel\\experimente&gt;perl perlzip.pl\nC:/Users/chris/Desktop/devel/experimente\nExiting subroutine via next at perlzip.pl line 19.\n$VAR1 = [\n      'C:/Users/chris/Desktop/devel/experimente/source_folder/test1.txt',\n      'C:/Users/chris/Desktop/devel/experimente/source_folder/test2.txt'\n    ];\n\nC:\\Users\\chris\\Desktop\\devel\\experimente&gt;tar -tf source_folder.zip\nsource_folder/test1.txt\nsource_folder/test2.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 415, "user_id": 2049083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc7fa8b5486247f7015f252df619282e?s=128&d=identicon&r=PG", "display_name": "MicrobicTiger", "link": "https://stackoverflow.com/users/2049083/microbictiger"}, "edited": false, "score": 0, "creation_date": 1543272884, "post_id": 53489837, "comment_id": 93850719, "body": "Sorted! Thank you!"}, {"owner": {"reputation": 415, "user_id": 2049083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc7fa8b5486247f7015f252df619282e?s=128&d=identicon&r=PG", "display_name": "MicrobicTiger", "link": "https://stackoverflow.com/users/2049083/microbictiger"}, "edited": false, "score": 0, "creation_date": 1544997600, "post_id": 53489837, "comment_id": 94462349, "body": "So, I have the compressing working, but I have an issue with 2 files which report as corrupted when they are extracted. The files are .xlsx and .pdf files. Is there a particular setting I should apply to prevent this?"}, {"owner": {"reputation": 1323, "user_id": 2030808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iRrvi.png?s=128&g=1", "display_name": "pmqs", "link": "https://stackoverflow.com/users/2030808/pmqs"}, "reply_to_user": {"reputation": 415, "user_id": 2049083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc7fa8b5486247f7015f252df619282e?s=128&d=identicon&r=PG", "display_name": "MicrobicTiger", "link": "https://stackoverflow.com/users/2049083/microbictiger"}, "edited": false, "score": 1, "creation_date": 1545401799, "post_id": 53489837, "comment_id": 94618980, "body": "Try adding <i>binmode =&gt;1</i> to the zip line. So becomes <i>zip \\@files  =&gt; &quot;$zip&quot;, BinModeIn =&gt; 1, FilterName =&gt; sub{ s|\\Q$cwd|| }</i>"}, {"owner": {"reputation": 415, "user_id": 2049083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc7fa8b5486247f7015f252df619282e?s=128&d=identicon&r=PG", "display_name": "MicrobicTiger", "link": "https://stackoverflow.com/users/2049083/microbictiger"}, "edited": false, "score": 0, "creation_date": 1557296404, "post_id": 53489837, "comment_id": 98711857, "body": "Thank you, and apologies for the super delayed response. I just updated the code with this extra argument and it works perfectly."}], "tags": [], "owner": {"reputation": 1323, "user_id": 2030808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iRrvi.png?s=128&g=1", "display_name": "pmqs", "link": "https://stackoverflow.com/users/2030808/pmqs"}, "is_accepted": true, "score": 1, "last_activity_date": 1545477405, "last_edit_date": 1545477405, "creation_date": 1543269954, "answer_id": 53489837, "question_id": 53478763, "link": "https://stackoverflow.com/questions/53478763/perl-zipping-a-folder-without-the-working-directory-file-path/53489837#53489837", "title": "perl Zipping a folder without the working directory file path", "body": "<p>There are two issues with your script.</p>\n\n<p>First, you are mixing Windows and Linux/Unix paths in the script. Let me illustrate </p>\n\n<p>I've created a subdirectory called <strong>source_folder</strong> to match your script</p>\n\n<pre><code> $ dir source_folder\n Volume in drive C has no label.\n Volume Serial Number is 7CF0-B66E\n\n Directory of C:\\Scratch\\source_folder\n\n26/11/2018  19:48    &lt;DIR&gt;          .\n26/11/2018  19:48    &lt;DIR&gt;          ..\n26/11/2018  17:27               840 try.pl\n01/06/2018  13:02             6,653 url\n               2 File(s)          7,493 bytes\n</code></pre>\n\n<p>When I run your script unmodified I get an <em>apparently</em> empty zip file when I view it in Windows explorer. But, if I use a command-line unzip, I see that source_folder.zip isn't empty, but it has non-standard filenames that are part Windows and part Linux/Unix.</p>\n\n<pre><code>$ unzip -l source_folder.zip\nArchive:  source_folder.zip\n  Length      Date    Time    Name\n---------  ---------- -----   ----\n      840  2018-11-26 17:27   \\source_folder/try.pl\n     6651  2018-06-01 13:02   \\source_folder/url\n---------                     -------\n     7491                     2 files\n</code></pre>\n\n<p>The mix-and-match of windows &amp; Unix paths is created in this line of your script</p>\n\n<pre><code>find(\\&amp;process_file, $cwd . \"\\\\source_folder\");\n</code></pre>\n\n<p>You are concatenating a Unix-style path in <strong>$cwd</strong> with a windows part \"\\source_folder\".</p>\n\n<p>Change the line to use a forward slash, rather than a backslash to get a consistent Unix-style path.</p>\n\n<pre><code>find(\\&amp;process_file, $cwd . \"/source_folder\");\n</code></pre>\n\n<p>The second problem is this line</p>\n\n<pre><code>zip \\@files  =&gt; \"$zip\", \n        FilterName =&gt; sub{ s|\\Q$cwd|| },\n        BinmodeIn =&gt;1\n   or die \"zip failed: $ZipError\\n\";\n</code></pre>\n\n<p>The substitute, <code>s|\\Q$cwd||</code>,  needs an extra \"/\", like this  <code>s|\\Q$cwd/||</code> to  make sure that the path added to the zip archive is a relative path. So the line becomes</p>\n\n<pre><code>zip \\@files  =&gt; \"$zip\", FilterName =&gt; sub{ s|\\Q$cwd/|| }  or die \"zip failed: $ZipError\\n\";\n</code></pre>\n\n<p>Once those two changes are made I can view the zip file in Explorer and get unix-style relative paths in when I use the command-line unzip</p>\n\n<pre><code>$ unzip -l source_folder.zip\nArchive:  source_folder.zip\n  Length      Date    Time    Name\n---------  ---------- -----   ----\n      840  2018-11-26 17:27   source_folder/try.pl\n     6651  2018-06-01 13:02   source_folder/url\n---------                     -------\n     7491                     2 files\n</code></pre>\n"}], "owner": {"reputation": 415, "user_id": 2049083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc7fa8b5486247f7015f252df619282e?s=128&d=identicon&r=PG", "display_name": "MicrobicTiger", "link": "https://stackoverflow.com/users/2049083/microbictiger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 530, "favorite_count": 0, "accepted_answer_id": 53489837, "answer_count": 2, "score": 0, "last_activity_date": 1545477405, "creation_date": 1543226749, "last_edit_date": 1543268284, "question_id": 53478763, "link": "https://stackoverflow.com/questions/53478763/perl-zipping-a-folder-without-the-working-directory-file-path", "title": "perl Zipping a folder without the working directory file path", "body": "<p>I am trying to compress a folder containing files and subfolders (with files) into a single zip. I'm limited to the core perl modules so I'm trying to work with IO::Compress::Zip. I want to remove the working directory file path but seem to end up with a blank first folder before my zipped folder, like there is a trailing \"/\" I haven't been able to get rid of. </p>\n\n<pre><code>use Cwd;\nuse warnings;\nuse strict;\nuse File::Find;\nuse IO::Compress::Zip qw(:all);\n\nmy $cwd = getcwd();\n   $cwd =~ s/[\\\\]/\\//g;\n\nprint $cwd, \"\\n\";\nmy $zipdir  = $cwd . \"\\\\source_folder\";\nmy $zip = \"source_folder.zip\";\n\nmy @files = ();\n\nsub process_file {\n    next if (($_ eq '.') || ($_ eq '..'));\n    if (-d &amp;&amp; $_ eq 'fp'){\n        $File::Find::prune = 1;\n        return;\n    }\n    push @files, $File::Find::name if -f;\n}\nfind(\\&amp;process_file, $cwd . \"\\\\source_folder\");\n\nzip \\@files  =&gt; \"$zip\", FilterName =&gt; sub{ s|\\Q$cwd|| }  or die \"zip failed: $ZipError\\n\";\n</code></pre>\n\n<p>I have also attempted using the option \"CanonicalName => 1, \" which appears to leave the filepath except the drive letter (C:). \nSubstitution with </p>\n\n<pre><code>s[^$dir/][]\n</code></pre>\n\n<p>did nothing and </p>\n\n<pre><code>s&lt;.*[/\\\\]&gt;&lt;&gt;\n</code></pre>\n\n<p>left me with no folder structure at all.</p>\n\n<p>What am I missing?</p>\n\n<p><strong>UPDATE</strong>\n<a href=\"https://i.stack.imgur.com/XH3hq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XH3hq.png\" alt=\"Resultant Zip contents (blurred to protect the innocent) in 7Zip\"></a></p>\n\n<p>The Red level is unexpected and is what is not required, win explorer is not able to see beyond this level.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1543223063, "post_id": 53476889, "comment_id": 93825365, "body": "Note that <code>$a</code> and <code>$b</code> are special package variables when using <code>sort</code>, see <a href=\"https://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\">perlvar</a>. For this reason it is probably best to avoid using them for other purposes."}], "answers": [{"tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 3, "last_activity_date": 1543220548, "creation_date": 1543220548, "answer_id": 53477099, "question_id": 53476889, "link": "https://stackoverflow.com/questions/53476889/using-three-options-as-arguments/53477099#53477099", "title": "Using three options as arguments", "body": "<p>Because of the way Perl converts operator types to match the operand you can change the <code>if</code> statement to. </p>\n\n<pre><code>if((defined($a) + defined($b) + defined($c)) &gt; 1) {\n    abort(\"Please use only one of the flags: a, b or c\");\n}\n</code></pre>\n\n<p>Your <code>unless</code> statement can be extended like this</p>\n\n<pre><code>unless (defined($a) || defined($b) || defined($c) ) {\n    abort(1,\"Please use a, b or c\");\n}\n</code></pre>\n\n<p>However <code>unless</code> statements can get difficult to parse if you have more than one operand so take the opportunity to rewrite it to</p>\n\n<pre><code>if (! (defined($a) || defined($b) || defined($c) ) ) {\n    abort(1,\"Please use a, b or c\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 7, "last_activity_date": 1543226348, "last_edit_date": 1543226348, "creation_date": 1543220737, "answer_id": 53477144, "question_id": 53476889, "link": "https://stackoverflow.com/questions/53476889/using-three-options-as-arguments/53477144#53477144", "title": "Using three options as arguments", "body": "<p>So you need to ensure that one and only one option is defined.</p>\n\n<p>You can first count how many options are defined, using grep :</p>\n\n<pre><code>my $count_defined_options = grep { defined } $a, $b, $c;\n</code></pre>\n\n<p>Then you can check the value of $count_defined_options :</p>\n\n<ul>\n<li><p>0 : abort because no option given </p></li>\n<li><p>2 or more : abort because too many options given </p></li>\n</ul>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 53477099, "answer_count": 2, "score": 1, "last_activity_date": 1543226348, "creation_date": 1543219599, "last_edit_date": 1543220969, "question_id": 53476889, "link": "https://stackoverflow.com/questions/53476889/using-three-options-as-arguments", "title": "Using three options as arguments", "body": "<p>I was wondering what is the best way to check options with the following conditions:</p>\n\n<ul>\n<li>Only one of the options can be used.</li>\n<li>At least one of the options must be used.</li>\n</ul>\n\n<p>If we speak about two options then it is easy (example in Perl):</p>\n\n<pre><code>if(defined($a) &amp;&amp; defined($b)) {\n    abort(\"Please use only one of the flags: a or b\");\n}\n\nunless(defined($a) || defined($b)) {\n    abort(1,\"Please use a or b\");\n}\n</code></pre>\n\n<p>But for three options, it will be a little bit messy (too many ifs).\nIs there any clean way to do so? If possible without using some extra operators like <code>xor</code> (only <code>if-else-unless</code>).</p>\n"}, {"tags": ["perl", "mojolicious", "mojolicious-lite"], "answers": [{"tags": [], "owner": {"reputation": 499, "user_id": 10068025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wfKdy.jpg?s=128&g=1", "display_name": "Zarul Zakuan", "link": "https://stackoverflow.com/users/10068025/zarul-zakuan"}, "is_accepted": true, "score": 0, "last_activity_date": 1543221653, "creation_date": 1543221653, "answer_id": 53477346, "question_id": 53476150, "link": "https://stackoverflow.com/questions/53476150/mojolicious-redirect-to-different-path-under-under-with-userinfo/53477346#53477346", "title": "Mojolicious redirect to different path under &#39;under&#39; with userinfo", "body": "<p>Joel had answered this actually..</p>\n\n<p><a href=\"https://github.com/mojolicious/mojo/wiki/Upgrading#mojourl-authority-and-userinfo\" rel=\"nofollow noreferrer\">https://github.com/mojolicious/mojo/wiki/Upgrading#mojourl-authority-and-userinfo</a>\n<a href=\"https://github.com/mojolicious/mojo/issues/1006\" rel=\"nofollow noreferrer\">https://github.com/mojolicious/mojo/issues/1006</a></p>\n"}], "owner": {"reputation": 499, "user_id": 10068025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wfKdy.jpg?s=128&g=1", "display_name": "Zarul Zakuan", "link": "https://stackoverflow.com/users/10068025/zarul-zakuan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 53477346, "answer_count": 1, "score": 2, "last_activity_date": 1543221653, "creation_date": 1543215958, "question_id": 53476150, "link": "https://stackoverflow.com/questions/53476150/mojolicious-redirect-to-different-path-under-under-with-userinfo", "title": "Mojolicious redirect to different path under &#39;under&#39; with userinfo", "body": "<p>I have two routes</p>\n\n<p>One under 'under' which does the authentication from 'userinfo' and another one which is meant for public</p>\n\n<pre><code>post '/public' =&gt; sub {\n    my $c = shift;\n    my $submitter = $c-&gt;param('submitter');\n    my $password = $c-&gt;param('password');\n\n    my $url = Mojo::URL-&gt;new('/v1/time')-&gt;userinfo(\"$submitter:$password\");\n\n    $c-&gt;redirect_to( $url );\n};\n\nunder(sub {\n    my $c = shift;\n    $c-&gt;app-&gt;log-&gt;debug( Dumper($c-&gt;req-&gt;url) );\n    my ($un, $pw) = split ':', $c-&gt;req-&gt;url-&gt;to_abs-&gt;userinfo;\n    # do authentication here\n    # .....  \n});\n\nany ['GET', 'POST'] =&gt; '/v1/time' =&gt; sub {\n    shift-&gt;render(json =&gt; { now =&gt; scalar(localtime) });\n};\n</code></pre>\n\n<p>Why I can't seem to pass the userinfo data to the new url?</p>\n\n<p>Result from Data::Dumper is</p>\n\n<pre><code>bless( {\n                 'base' =&gt; bless( {\n                                    'scheme' =&gt; 'http',\n                                    'port' =&gt; 'xxxxx',\n                                    'host' =&gt; 'xxxxxxxxx.corpnet2.com'\n                                  }, 'Mojo::URL' ),\n                 'query' =&gt; bless( {\n                                     'pairs' =&gt; []\n                                   }, 'Mojo::Parameters' ),\n                 'path' =&gt; bless( {\n                                    'charset' =&gt; 'UTF-8',\n                                    'path' =&gt; '/v1/time'\n                                  }, 'Mojo::Path' )\n               }, 'Mojo::URL' );\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 2292, "user_id": 4502035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38a1b21c3e83f9d10aaa56c93f6150a?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/4502035/andreas"}, "edited": false, "score": 1, "creation_date": 1543211897, "post_id": 53475390, "comment_id": 93821053, "body": "The question doesn&#39;t appear to include any attempt at all to solve the problem. StackOverflow expects you to <a href=\"https://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users\">try to solve your own problem first</a>, as your attempts help us to better understand what you want. Please edit the question to show what you&#39;ve tried, and show a specific roadblock you&#39;re running into with <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. For more information, please see <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask</a>."}], "answers": [{"tags": [], "owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1543212315, "creation_date": 1543212315, "answer_id": 53475532, "question_id": 53475390, "link": "https://stackoverflow.com/questions/53475390/i-would-like-to-use-regex-to-insert-specific-characters-in-a-regex-expression/53475532#53475532", "title": "I would like to use regex to insert specific characters in a regex expression?", "body": "<p>You can use this command,</p>\n\n<pre><code>echo TABLE|perl -pe 's/\\w/$&amp;%/g'\n</code></pre>\n\n<p>This outputs <code>T%A%B%L%E%</code></p>\n\n<p>OR (in case your data is contained in a file)</p>\n\n<pre><code>perl -pe 's/\\w/$&amp;%/g' test.pl\n</code></pre>\n\n<p>You may replace <code>\\w</code> with <code>[a-zA-Z]</code> if you just want to replace with alphabets as <code>\\w</code> matchs alphabets numbers and underscore.</p>\n"}, {"comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1546338003, "post_id": 53475544, "comment_id": 94826725, "body": "which version of Perl supports <code>&#47;r</code>?. It is throwing error for 5.10.1 RHEL"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1546339723, "post_id": 53475544, "comment_id": 94827008, "body": "@stack0114106 Supported since 5.14.0.  See &quot;<i>Non-destructive substitution</i>&quot; in  <a href=\"https://perldoc.perl.org/perl5140delta.html\" rel=\"nofollow noreferrer\">perl5140delta</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1546340163, "post_id": 53475544, "comment_id": 94827071, "body": "@stack0114106 Yes, and it&#39;s just the right thing for some purposes.  (One example that comes to mind: using <code>s&#47;&#47;&#47;</code> in <code>map</code>, where you want the changed string in the return list and thus had to type the lone <code>$_</code> after it, since <code>s&#47;&#47;&#47;</code> alone returns the number of subs -- now with <code>&#47;r</code> it nicely returns the changed string.)"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1546340428, "post_id": 53475544, "comment_id": 94827112, "body": "yeah.. good to know.. I&#39;ll apply them.. I have only 5.10 in office workstation, will try this in my PC"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1546342450, "post_id": 53475544, "comment_id": 94827509, "body": "did you try any other different solution using Perl for questions/53706983?.. Almost awk folks flood their answers for unix/shell/linux problems.. only few write Perl solutions.. so I&#39;m not able to compare my solutions.."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1546342715, "post_id": 53475544, "comment_id": 94827578, "body": "one such example is questions/53945896 where I wrote a lengthy one liner.. but Nahuel Fouilleul commented with a short and elegant answer.. that was a good learning from Nahuel.."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1546371857, "post_id": 53475544, "comment_id": 94833901, "body": "@stack0114106 People do use <code>awk</code>, it is a good tool for certain types of problems. Sometimes questions specifically ask for it, too. Also, in many problems a few tools can be used (nearly) equally well."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1546373285, "post_id": 53475544, "comment_id": 94834166, "body": "@stack0114106 Your answer in 53706983 is a good approach; one has to accumulate those values. It is also nice how you do that. The only thing I see is that it can be cleaned up some, for readability.  As for the 53945896, Nahuel spotted that the number can be divided repeatedly by ten, so the solution came out short and clean (also because of properties of shell that were handy for that problem).  Your approach is good as well (and a nice idea), to do the same by counting characters, but in that case there happen to be simpler ways."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1546409943, "post_id": 53475544, "comment_id": 94840754, "body": "@stack0114106 Correction of my statement about 53706983 -- I don&#39;t actually see anything to &quot;clean up&quot; (other than cosmetics, to make it easier to read here, like spaces and layout)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 4, "last_activity_date": 1543363071, "last_edit_date": 1543363071, "creation_date": 1543212391, "answer_id": 53475544, "question_id": 53475390, "link": "https://stackoverflow.com/questions/53475390/i-would-like-to-use-regex-to-insert-specific-characters-in-a-regex-expression/53475544#53475544", "title": "I would like to use regex to insert specific characters in a regex expression?", "body": "<p>Break the string into characters then join them with what you want in between; also append that</p>\n\n<pre><code>my $res = ( join '%', split //, $string ) . '%';\n</code></pre>\n\n<p>A simple-minded way with regex</p>\n\n<pre><code>$string =~ s/(.)/$1%/g;\n</code></pre>\n\n<p>where with <code>/r</code> modifier you can preserve <code>$string</code> and return the changed string instead</p>\n\n<pre><code>my $res = $string =~ s/(.)/$1%/gr;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 0, "last_activity_date": 1543219096, "last_edit_date": 1543219096, "creation_date": 1543217978, "answer_id": 53476580, "question_id": 53475390, "link": "https://stackoverflow.com/questions/53475390/i-would-like-to-use-regex-to-insert-specific-characters-in-a-regex-expression/53476580#53476580", "title": "I would like to use regex to insert specific characters in a regex expression?", "body": "<p>You can use look-behind also</p>\n\n<pre><code>my $s = \"table\";\n\n$s=~s/(?&lt;=.)/%/g;\n\nprint $s;\n</code></pre>\n\n<p>If your version >5.14 you can use \\K</p>\n\n<pre><code>$s=~s/.\\K/%/g;\n</code></pre>\n"}], "owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 2, "accepted_answer_id": 53475544, "answer_count": 3, "score": -1, "last_activity_date": 1543363071, "creation_date": 1543211472, "question_id": 53475390, "link": "https://stackoverflow.com/questions/53475390/i-would-like-to-use-regex-to-insert-specific-characters-in-a-regex-expression", "title": "I would like to use regex to insert specific characters in a regex expression?", "body": "<p>I'd like to be able to use regex in Perl to insert characters into words.</p>\n\n<p>So that the word \"TABLE\" would become \"T%A%B%L%E%\"</p>\n\n<p>Can I ask for the syntax for such a feat?</p>\n\n<p>Many thanks</p>\n"}, {"tags": ["xml", "perl", "fetch"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1543224103, "post_id": 53475364, "comment_id": 93825911, "body": "I&#39;ve fixed some of the indentation in your code. You&#39;re welcome, but please consider doing it yourself in the future. Good indentation is one of the most useful tools for understanding code. If you&#39;re asking lots of people to read and understand your code, it&#39;s useful to make that as easy as possible for them."}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1543240128, "post_id": 53475364, "comment_id": 93834646, "body": "I don&#39;t know a lot about XML::Smart, but it seems to me like the functionalities it provides are quite limited and will not properly fit your use case. You will definitely need more than one loop to achieve what you want.  Would it be possible for you to use a &quot;state-of-the-art&quot; XML parser such as XML::LibXML ? If yes, then I could suggest a solution."}, {"owner": {"reputation": 13, "user_id": 10224387, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-42dASwgDrtA/AAAAAAAAAAI/AAAAAAAAFwU/fZ3lbVSbNa4/photo.jpg?sz=128", "display_name": "Vrushali Dharne", "link": "https://stackoverflow.com/users/10224387/vrushali-dharne"}, "edited": false, "score": 0, "creation_date": 1543380251, "post_id": 53475364, "comment_id": 93893828, "body": "Thanks a lot Dave  for indentation :)"}, {"owner": {"reputation": 13, "user_id": 10224387, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-42dASwgDrtA/AAAAAAAAAAI/AAAAAAAAFwU/fZ3lbVSbNa4/photo.jpg?sz=128", "display_name": "Vrushali Dharne", "link": "https://stackoverflow.com/users/10224387/vrushali-dharne"}, "edited": false, "score": 0, "creation_date": 1543380286, "post_id": 53475364, "comment_id": 93893841, "body": "Sure i can try different module to achieve the results ..can you suggest how it can be achieved"}], "answers": [{"tags": [], "owner": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "is_accepted": false, "score": 0, "last_activity_date": 1543499375, "creation_date": 1543499375, "answer_id": 53540532, "question_id": 53475364, "link": "https://stackoverflow.com/questions/53475364/unable-to-fetch-values-from-xml-file-using-perl/53540532#53540532", "title": "Unable to Fetch values from XML file using perl", "body": "<p>Always use strict and warnings pragmas! Just example of XML::LibXML:</p>\n\n<pre><code>#!/usr/bin/env perl                                                                                                                                                                            \n\nuse strict;\nuse warnings;\n\nuse XML::LibXML;\n\nmy $xml_string = join '', &lt;DATA&gt;;\n\nmy $dom = XML::LibXML-&gt;load_xml(string =&gt; $xml_string);\n\n\nforeach my $build_node ($dom-&gt;findnodes('//Release[@number=\"1810\"]/Build')) {\n  print $build_node-&gt;to_literal;\n}\n\n__DATA__\n...place your xml here\n</code></pre>\n\n<p><a href=\"http://grantm.github.io/perl-libxml-by-example/\" rel=\"nofollow noreferrer\">Nice tutorial for XML::LibXML</a></p>\n"}], "owner": {"reputation": 13, "user_id": 10224387, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-42dASwgDrtA/AAAAAAAAAAI/AAAAAAAAFwU/fZ3lbVSbNa4/photo.jpg?sz=128", "display_name": "Vrushali Dharne", "link": "https://stackoverflow.com/users/10224387/vrushali-dharne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543499375, "creation_date": 1543211291, "last_edit_date": 1543224006, "question_id": 53475364, "link": "https://stackoverflow.com/questions/53475364/unable-to-fetch-values-from-xml-file-using-perl", "title": "Unable to Fetch values from XML file using perl", "body": "<p>Below is the xml file:</p>\n\n<pre><code>&lt;Build_details&gt;\n  &lt;Release number=\"1902\"&gt;\n    &lt;Build number=\"220\"&gt;\n      &lt;OMS&gt;\n        &lt;Build_path&gt;ST_OMS_V19021_B220&lt;/Build_path&gt;\n        &lt;Pc_version&gt;8042.18.01&lt;/Pc_version&gt;\n      &lt;/OMS&gt;\n      &lt;OMNI&gt;\n        &lt;Build_path&gt;ST_OMNI_V19021_B220&lt;/Build_path&gt;\n      &lt;/OMNI&gt;\n    &lt;/Build&gt;\n  &lt;/Release&gt;\n  &lt;Release number=\"1810\"&gt;\n    &lt;Build number=\"340\"&gt;\n      &lt;OMS&gt;\n        &lt;Build_path&gt;ST_OMS_V1810_B340&lt;/Build_path&gt;\n        &lt;Pc_version&gt;8041.30.01&lt;/Pc_version&gt;\n      &lt;/OMS&gt;\n      &lt;OMNI&gt;\n        &lt;Build_path&gt;ST_OMNI_V1810_B340&lt;/Build_path&gt;\n      &lt;/OMNI&gt;\n    &lt;/Build&gt;\n  &lt;/Release&gt;\n  &lt;Release number=\"1810\"&gt;\n    &lt;Build number=\"300\"&gt;\n      &lt;OMS&gt;\n        &lt;Build_path&gt;ST_OMS_V18102_B300&lt;/Build_path&gt;\n        &lt;Pc_version&gt;8041.30.01&lt;/Pc_version&gt;\n      &lt;/OMS&gt;\n      &lt;OMNI&gt;\n        &lt;Build_path&gt;ST_OMNI_V18102_B300&lt;/Build_path&gt;\n      &lt;/OMNI&gt;\n    &lt;/Build&gt;\n  &lt;/Release&gt;\n&lt;/Build_details&gt;\n</code></pre>\n\n<p>I am unable to fetch values for same release number with other build number. Suppose I want to fetch details for release 1810 build 300 it throws empty value. Seems perl script written by me is only working for first occurrence value.</p>\n\n<p>Below is my script written:</p>\n\n<pre><code>#!/appl/OMS/perl/bin/perl\n=comments\nPerl wrapper for parsing the central repository\nxml to fetch relevant data of each release\n\nHelp Usage : ./parseenv.pl allrel -- to list all versions\\\n./parseenv.pl &lt;relno&gt; &lt;buildno&gt; &lt;oms/pc/omni&gt;\nex - ./parseenv.pl 1810 300 oms\nDate=20180910\n=cut\n\nuse XML::Smart;\nuse File::Path qw(make_path remove_tree);\n\n$FILE=\"/appl/OMS/Build_Details/build_details.xml\";\n\n$xml = XML::Smart-&gt;new($FILE) || die (\"Could not open XML file\");\nmy $relno=$ARGV[0];\nmy $build=$ARGV[1];\n\nif ( $ARGV[0] =~ \"allrel\" ) {\n    my @release=$xml-&gt;{Build_details}-&gt;{Release}('[@]','number');\n    foreach $i (@release) {\n        print \"$i\\n\";\n    }\n}\n\nif ($ARGV[1] =~ \"build\") {\n    my @build=$xml-&gt;{Build_details}-&gt;{Release}-&gt;('number','eq',\"$relno\")-&gt;{Build}('[@]','number');\n    foreach $i (@build) {\n        print \"$i\\n\";\n    }\n}\n\nif ($ARGV[2] =~ \"oms\") {\n    my @oms=$xml-&gt;{Build_details}-&gt;{Release}-&gt;('number','eq',\"$relno\")-&gt;{Build}('number','eq',\"$build\")-&gt;{OMS}-&gt;{Build_path};\n    print \"@oms\\n\";\n\n}\nelsif ($ARGV[2] =~ \"pc\") {\n    my @pc=$xml-&gt;{Build_details}-&gt;{Release}-&gt;('number','eq',\"$relno\")-&gt;{Build}('number','eq',\"$build\")-&gt;{OMS}-&gt;{Pc_version};\n    print \"@pc\\n\";\n\n}\nelsif ($ARGV[2] =~ \"omni\") {\n    my @omni=$xml-&gt;{Build_details}-&gt;{Release}-&gt;('number','eq',\"$relno\")-&gt;{Build}('number','eq',\"$build\")-&gt;{OMNI}-&gt;{Build_path};\n    print \"@omni\\n\";\n\n}\nelse {\n    print \"Please enter 3rd argument\"\n}\n</code></pre>\n\n<p>Output Details:</p>\n\n<p>Works fine for first occurance</p>\n\n<pre><code>$  ./parsebuilddetails.pl 1810 340 pc\n8041.30.01\n</code></pre>\n\n<p>Not works for another occurance:</p>\n\n<pre><code>$ ./parsebuilddetails.pl 1810 300 pc\n</code></pre>\n\n<p>How can i modify perl script to make it work for all values of build number. It seems i will have to add a loop. But i am not able to understand how it will iterate. Please help :)</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "edited": false, "score": 0, "creation_date": 1543211100, "post_id": 53475140, "comment_id": 93820845, "body": "Thanks, but what&#39;s the &quot;r&quot; in the <code>&#47;gir</code> required for?  Seems to work the same without it."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "edited": false, "score": 1, "creation_date": 1543211532, "post_id": 53475140, "comment_id": 93820948, "body": "No, it doesn&#39;t. Without the <code>&#47;r</code> modifier, the substitution is performed on <code>$string1</code> and the value 3 is assigned to <code>$string2</code>."}, {"owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "edited": false, "score": 0, "creation_date": 1543211739, "post_id": 53475140, "comment_id": 93821001, "body": "I realize I am new at this, but <code>$string1 = ($string2 =~ s&#47;[aeiouy]&#47;&#47;gi);</code> works just the same as <code>$string1 = ($string2 =~ s&#47;[aeiouy]&#47;&#47;gir);</code>  I can find no difference."}, {"owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "edited": false, "score": 0, "creation_date": 1543213338, "post_id": 53475140, "comment_id": 93821485, "body": "what does the <code>&#47;r</code> stand for?"}, {"owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 0, "creation_date": 1543217709, "post_id": 53475140, "comment_id": 93823036, "body": "Follow the link on <code>&#47;r</code> in mob&#39;s answer... :-)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1543223679, "post_id": 53475140, "comment_id": 93825695, "body": "<code>\\r</code> stands for &quot;return substitution and leave original string untouched&quot;."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 1, "last_activity_date": 1543209808, "creation_date": 1543209808, "answer_id": 53475140, "question_id": 53475092, "link": "https://stackoverflow.com/questions/53475092/can-i-get-the-results-from-a-regex-into-a-new-string/53475140#53475140", "title": "Can I get the results from a regex into a new string?", "body": "<p>A way, if you have Perl 5.14 or better, is with the <a href=\"https://metacpan.org/pod/perlop#s/PATTERN/REPLACEMENT/msixpodualngcer\" rel=\"nofollow noreferrer\"><code>/r</code> modifier</a>.</p>\n\n<pre><code>$string1 = \"cat toy\";\n$string2 = ($string1 =~ s/[aeiouy]//gir);\nprint $string1;       # \"cat toy\", unchanged\nprint $string2;       # \"ct t\",    with modifications\n</code></pre>\n\n<p>It works with the transliteration operator, too</p>\n\n<pre><code>$string1 = \"cat toy\";\n$string2 = ($string1 =~ tr/aeiouy/123456/r);\nprint $string1;       # \"cat toy\"\nprint $string2;       # \"c1t t46\"\n</code></pre>\n"}], "owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 53475140, "answer_count": 1, "score": 0, "last_activity_date": 1543209808, "creation_date": 1543209301, "question_id": 53475092, "link": "https://stackoverflow.com/questions/53475092/can-i-get-the-results-from-a-regex-into-a-new-string", "title": "Can I get the results from a regex into a new string?", "body": "<p>I already know how to use regex to modify a string, i.e. </p>\n\n<pre><code>$string1 =~ s/[aeiouy]//gi;\n</code></pre>\n\n<p>But what's the syntax to keep the original string?  i.e.</p>\n\n<pre><code>$string2 = $string1 = s/[aeiouy]//gi;\n</code></pre>\n\n<p>So that $string1 is the before and $string2 is the after.</p>\n\n<p>Am sure there is a way, thanks for your help</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1543221797, "post_id": 53475057, "comment_id": 93824753, "body": "Do you need something like <a href=\"https://regex101.com/r/gJjGHN/1\" rel=\"nofollow noreferrer\">this</a>?"}, {"owner": {"reputation": 85, "user_id": 8509666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NIaNJ.png?s=128&g=1", "display_name": "gukwon", "link": "https://stackoverflow.com/users/8509666/gukwon"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1543226797, "post_id": 53475057, "comment_id": 93827319, "body": "@Wiktor Stribi\u017cew: what a perfect solution...!! but it&#39;s absolutely difficult.. can you explain more detail? thank you."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1543228659, "post_id": 53475057, "comment_id": 93828386, "body": "Added with a demo and explanations."}], "answers": [{"comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 85, "user_id": 8509666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NIaNJ.png?s=128&g=1", "display_name": "gukwon", "link": "https://stackoverflow.com/users/8509666/gukwon"}, "edited": false, "score": 0, "creation_date": 1543246335, "post_id": 53479286, "comment_id": 93838361, "body": "@user8509666 Please also consider upvoting if my answer proved helpful to you (see <a href=\"http://meta.stackexchange.com/questions/173399/how-to-upvote-on-stack-overflow\">How to upvote on Stack Overflow?</a>) as you are entitled to the upvoting privilege after reaching 15 rep points. Note you may upvote all the answers that turned out helpful."}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1543228646, "creation_date": 1543228646, "answer_id": 53479286, "question_id": 53475057, "link": "https://stackoverflow.com/questions/53475057/regular-expressions-find-substring-in-sentence/53479286#53479286", "title": "Regular expressions: find substring in sentence", "body": "<p>You may use</p>\n\n<pre><code>my $rx = qr/(?x)                 # enable formatting whitespace/comments\n    (?(DEFINE)                   # Start DEFINE block\n      (?&lt;start&gt;a|the|this|which) # Match start delimiters\n    )                            # End DEFINE block\n    (?&lt;res&gt;                      # Group res holding the match\n      \\b(?&amp;start)\\s+chart\\b      # Match start delims, 1+ whitespace, chart\n      (*SKIP)(*F)                # and skip the match\n      |                          # or\n      \\b(?:(?&amp;start)\\s+)?        # Optional start delim and 1+ whitespace\n      \\w+\\s+chart\\b              # 1+ word chars, 1+ whitespace, char, word boundary\n      [^.]*                      # 0+ chars other than dot\n    )                            # End of res group\n/;\n</code></pre>\n\n<p>See the <a href=\"https://regex101.com/r/gJjGHN/2\" rel=\"nofollow noreferrer\">regex demo</a>.</p>\n\n<p>See the Perl demo online:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $rx = qr/(?x)                 # enable formatting whitespace/comments\n    (?(DEFINE)                   # Start DEFINE block\n      (?&lt;start&gt;a|the|this|which) # Match start delimiters\n    )                            # End DEFINE block\n    (?&lt;res&gt;                      # Group res holding the match\n      \\b(?&amp;start)\\s+chart\\b      # Match start delims, 1+ whitespace, chart\n      (*SKIP)(*F)                # and skip the match\n      |                          # or\n      \\b(?:(?&amp;start)\\s+)?        # Optional start delim and 1+ whitespace\n      \\w+\\s+chart\\b              # 1+ word chars, 1+ whitespace, char, word boundary\n      [^.]*                      # 0+ chars other than dot\n    )                            # End of res group\n/;\nwhile (&lt;DATA&gt;) {\n    if (/$rx/) {\n        print \"$+{res}\\n\";\n    }\n}\n\n__DATA__\nthis chart.\nthis line chart.\nthis bar chart.\n21684564523 this chart.\n556465465456 this a line chart.\na chart.\na line chart.\nwhich chart.\nall this chart.\na chart.\n123123 this chart..\n123123 which chart.\nall this line chart.\na line chart.\nthe 3d line chart will show area in 3d.\nline chart.\narea chart.\nthe chart.\n1221513513 line chart.\n1234125135 the chart.\n123123 this bar chart.\nudcvhi2ry32 the this line chart is useful.\ntwl chart.\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>this line chart\nthis bar chart\na line chart\na line chart\nthis line chart\na line chart\nline chart will show area in 3d\nline chart\narea chart\nline chart\nthis bar chart\nthis line chart is useful\ntwl chart\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 8509666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NIaNJ.png?s=128&g=1", "display_name": "gukwon", "link": "https://stackoverflow.com/users/8509666/gukwon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 2, "accepted_answer_id": 53479286, "answer_count": 1, "score": 1, "last_activity_date": 1543228646, "creation_date": 1543208959, "question_id": 53475057, "link": "https://stackoverflow.com/questions/53475057/regular-expressions-find-substring-in-sentence", "title": "Regular expressions: find substring in sentence", "body": "<p>I have many sentences:</p>\n\n<pre><code> 1) the 3d line chart will show area in 3d.\n 2) udcv123hi2ry32 the this line chart is useful.\n 3) this chart.\n 4) a chart.\n 5) a line chart.\n 6) this bar chart\n 7) ...\n</code></pre>\n\n<p>And I have conditions</p>\n\n<pre><code> 1) substrings start by 'a' or 'the' or 'this' or '[chart name]'\n 2) '[chart name] chart' is ok but 'this chart', 'a chart' are not accepted.\n    (e.g. bar chart, line chart, this line chart, a area chart: OK,\n     this chart, a chart: not accepted)\n 3) substrings end by '.(dot)'\n</code></pre>\n\n<p>consequently, i need to find substrings that meet condition.</p>\n\n<p>In this case the string: </p>\n\n<pre><code>\"this line chart is very useful.\", \n\"area chart is very useful.\" are exactly what I want to receive.\n</code></pre>\n\n<p>I try to this via regular expression like this(<a href=\"https://regex101.com/r/aX5htr/2\" rel=\"nofollow noreferrer\">https://regex101.com/r/aX5htr/2</a>):</p>\n\n<pre><code>(a|the|this)* *((?!\\bthis chart\\b|\\bwhich chart\\b|\\ba chart\\b|\\bthe chart\\b|\\bthat chart\\b|\\d+).+ chart) .+\\.\n</code></pre>\n\n<p>but not matched...</p>\n\n<p>how to solve this situations??</p>\n"}, {"tags": ["mysql", "json", "apache", "perl", "session"], "comments": [{"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1543237510, "post_id": 53475054, "comment_id": 93832994, "body": "Let&#39;s try and narrow down the issue. If you store a simple scalar value instead of a json data structure, do you meet the same issue or you are able to then retrieve the data ?"}, {"owner": {"reputation": 11, "user_id": 10704490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fdaff3d789841472f9f4446138fe965?s=128&d=identicon&r=PG&f=1", "display_name": "Kay", "link": "https://stackoverflow.com/users/10704490/kay"}, "reply_to_user": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1543258020, "post_id": 53475054, "comment_id": 93844153, "body": "@GMB yes, if I say <code>$session{apirecords} = &quot;hello&quot;;</code> it does store &quot;hello&quot; as an entry. When I change it to  <code>$session{apirecords} = &quot;$content&quot;;</code> it doesn&#39;t store the encoded json held by $content"}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1543261845, "post_id": 53475054, "comment_id": 93845885, "body": "Allright, then what happens if you store a simple hash reference, like $session{api_records} = { hello =&gt; &quot;world&quot; }; Are you able to recover it afterwards ? Also, can you show us what the JSON data looks like before you store it, using Data::Dumper for example ?"}, {"owner": {"reputation": 11, "user_id": 10704490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fdaff3d789841472f9f4446138fe965?s=128&d=identicon&r=PG&f=1", "display_name": "Kay", "link": "https://stackoverflow.com/users/10704490/kay"}, "reply_to_user": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1543273624, "post_id": 53475054, "comment_id": 93850975, "body": "Okay so, I tried <code>$session{apirecords} = { hello =&gt; &quot;world&quot; };</code> and then I tried to retrieve it using <code>%helloOb = %{$session{apirecords}}; print $helloOb{hello};</code> The result was: <code>world</code>  , which means it worked! The JSON looks like: <a href=\"https://jsonblob.com/feed3bba-f1cd-11e8-9450-2904e8ecf943\" rel=\"nofollow noreferrer\">jsonblob.com/feed3bba-f1cd-11e8-9450-2904e8ecf943</a>"}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1543273882, "post_id": 53475054, "comment_id": 93851057, "body": "OK thanks.That&#39;s quite a big JSON object. What is the type and size of the database field where you try to store it ? Maybe you JSON just can&#39;t fit in the storage"}, {"owner": {"reputation": 11, "user_id": 10704490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fdaff3d789841472f9f4446138fe965?s=128&d=identicon&r=PG&f=1", "display_name": "Kay", "link": "https://stackoverflow.com/users/10704490/kay"}, "reply_to_user": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1543274076, "post_id": 53475054, "comment_id": 93851120, "body": "You know what? you might be absolutely right there. I&#39;m provided with a MariaDB  instance, the type of the field is blob! I&#39;m not 100% sure of the size. Is there another way I can store a JSON object this big for session management?"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 10704490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fdaff3d789841472f9f4446138fe965?s=128&d=identicon&r=PG&f=1", "display_name": "Kay", "link": "https://stackoverflow.com/users/10704490/kay"}, "is_accepted": true, "score": 0, "last_activity_date": 1543594045, "creation_date": 1543594045, "answer_id": 53561048, "question_id": 53475054, "link": "https://stackoverflow.com/questions/53475054/store-a-complex-hash-in-apachesessionsmysql-session/53561048#53561048", "title": "Store a complex hash in Apache::Sessions:MySQL session", "body": "<p>As pointed out by GMB. The blob size(64 KB) wasn't big enough for the JSON object. \nThe solution is to change <code>blob</code> datatype to <code>mediumblob</code> .</p>\n"}], "owner": {"reputation": 11, "user_id": 10704490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fdaff3d789841472f9f4446138fe965?s=128&d=identicon&r=PG&f=1", "display_name": "Kay", "link": "https://stackoverflow.com/users/10704490/kay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 53561048, "answer_count": 1, "score": 1, "last_activity_date": 1543594045, "creation_date": 1543208905, "last_edit_date": 1543272873, "question_id": 53475054, "link": "https://stackoverflow.com/questions/53475054/store-a-complex-hash-in-apachesessionsmysql-session", "title": "Store a complex hash in Apache::Sessions:MySQL session", "body": "<p>So, I'm trying to store a decoded JSON object into a tied apache session. This is my code:</p>\n\n<pre><code>    $url=\"https://apilink\";\n\n    $content = get($url);\n    die \"Can't Get $url\" if (! defined $content);\n\n    $jsonOb = decode_json($content);\n    %aprecords = %$jsonOb;\n\n    #Push the jsonOb in the session\n    $session{apirecords} = \\%aprecords ;\n</code></pre>\n\n<p><code>$session{apirecords}</code> does not store the <code>%aprecords</code> reference. Although, when I substitute the statement to <code>$session{apirecords} = \\%jsonOb ;</code> , it stores <code>apirecords</code> in the sessions table but the reference to %jsonOb has no values in it.</p>\n\n<p>PS:\nI have tried the following and none of them seem to work:\n1) <code>$session{apirecords} = \\%$jsonOb ;</code>\n2) <code>$session{apirecords} = { %aprecords } ;</code></p>\n\n<p>JSON object is perfectly well structured. </p>\n\n<p>Code for tying a session:</p>\n\n<pre><code>  tie %session, \"Apache::Session::MySQL\", $sessionID, \n   {\n    Handle =&gt; $dbObject,\n    LockHandle =&gt; $dbObject,\n    TableName =&gt; 'sessions',\n    };\n\n  #If a session ID doesn't exist, create a new session and get new session ID\n  if (!defined ($sessionID)){\n     $sessionID = $session{_session_id};\n     $session{count}=0;\n}\n</code></pre>\n\n<p>A helping hand would be much much appreciated!</p>\n\n<p>JSON Sample: <a href=\"https://jsonblob.com/feed3bba-f1cd-11e8-9450-2904e8ecf943\" rel=\"nofollow noreferrer\">https://jsonblob.com/feed3bba-f1cd-11e8-9450-2904e8ecf943</a> </p>\n"}, {"tags": ["perl", "grep"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1543206309, "post_id": 53474632, "comment_id": 93819878, "body": "Backticks act as double-quoted strings. You need to escape <code>\\ </code>"}], "answers": [{"tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 0, "last_activity_date": 1543224633, "creation_date": 1543224633, "answer_id": 53478125, "question_id": 53474632, "link": "https://stackoverflow.com/questions/53474632/i-have-a-working-grep-command-that-works-on-the-command-line-but-doesnt-inside/53478125#53478125", "title": "I have a working grep command that works on the command line, but doesn&#39;t inside my perl script", "body": "<p>As commented by @ikegami, you need to espace the backslash within the backtick operator, else Perl will try to interpolate it :</p>\n\n<pre><code>my @var = `grep -o '\"[^\"]\\\\+\"' input.scs | sed 's/\"//g'`;\n</code></pre>\n\n<p>However, instead of using external commands you could do that with a Perl on-liner like :</p>\n\n<pre><code>perl -ne 'print \"$1\\n\" while (m/\"([^\"]+)\"/g)' input.scs\n</code></pre>\n\n<p>This will return the same output, ie the list of all matches, with double quotes removed.</p>\n\n<p>Or if you want to edit the file in-place :</p>\n\n<pre><code>perl -pe 's/\"([^\"]+)\"/$1/g' input.scs\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10170449, "user_type": "registered", "profile_image": "https://graph.facebook.com/2544178898929487/picture?type=large", "display_name": "Alan Saldanha", "link": "https://stackoverflow.com/users/10170449/alan-saldanha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543224633, "creation_date": 1543204939, "question_id": 53474632, "link": "https://stackoverflow.com/questions/53474632/i-have-a-working-grep-command-that-works-on-the-command-line-but-doesnt-inside", "title": "I have a working grep command that works on the command line, but doesn&#39;t inside my perl script", "body": "<p>I think it is probably due to escape characters.\nAlso the script and the file that is being accessed (input.scs), are in the same directory.</p>\n\n<pre><code>my @var=`grep -o '\"[^\"]\\+\"' ./input.scs | sed 's/\"//g'`;\nprint \"-D @var\\n\";\n</code></pre>\n\n<p>The output is returning empty when it actually should generate multiple lines.\nThe grep command searches for data within quotes and prints the data.</p>\n"}, {"tags": ["excel", "perl", "csv", "win32ole"], "answers": [{"tags": [], "owner": {"reputation": 415, "user_id": 2049083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc7fa8b5486247f7015f252df619282e?s=128&d=identicon&r=PG", "display_name": "MicrobicTiger", "link": "https://stackoverflow.com/users/2049083/microbictiger"}, "is_accepted": false, "score": 0, "last_activity_date": 1544411991, "creation_date": 1544411991, "answer_id": 53699059, "question_id": 53473627, "link": "https://stackoverflow.com/questions/53473627/perl-copy-data-from-csv-to-excel-workbook/53699059#53699059", "title": "Perl Copy data from csv to excel workbook", "body": "<p>I fixed this by editiing my last 6 lines of code</p>\n\n<p>I made the selection on the source sheet</p>\n\n<pre><code>my $range = \"A1:CZ\".$last_row;\n$res_sheet-&gt;range($range)-&gt;copy();\n</code></pre>\n\n<p>and removed the selection before pasting my data</p>\n\n<pre><code>my $ResReport = $Book_In -&gt; Worksheets(\"ModelReserveReport\");\n$ResReport-&gt;paste();\n$csv_in-&gt;Close();\n</code></pre>\n\n<p>The copy/paste now works.</p>\n"}], "owner": {"reputation": 415, "user_id": 2049083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc7fa8b5486247f7015f252df619282e?s=128&d=identicon&r=PG", "display_name": "MicrobicTiger", "link": "https://stackoverflow.com/users/2049083/microbictiger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 257, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544411991, "creation_date": 1543194840, "last_edit_date": 1543195737, "question_id": 53473627, "link": "https://stackoverflow.com/questions/53473627/perl-copy-data-from-csv-to-excel-workbook", "title": "Perl Copy data from csv to excel workbook", "body": "<p>I am trying to open a csv file and copy the data from within it to paste it into a tab in an already constructed excel (2016) workbook.</p>\n\n<p>my problem appears to be accessing the csv file properly. \nHere is my code</p>\n\n<pre><code>use utf8;\nuse Cwd;\nuse warnings;\nuse strict;\nuse Win32::OLE;\nuse Win32::OLE qw(in with);\nuse Win32::OLE::Const \"Microsoft Office .* Object Library\"; \n\nmy $Excel  = Win32::OLE-&gt;GetActiveObject('Excel.Application') || Win32::OLE-&gt;new('Excel.Application', 'Quit');\n$Excel-&gt;{Visible} = 0;\n$Excel-&gt;{DisplayAlerts}=0;\n\nmy $XLSX_LOG_IN = \"book1.xlsx\";\nmy $Book_In = $Excel-&gt;Workbooks-&gt;Open(\"$XLSX_LOG_IN\") or die \"Excel Logfile Workbook not opened - Ensure file 'book1.xlsx' is in the working directory\\n\";\n\nmy $csv_in = $Excel-&gt;Workbooks-&gt;Open(\"$csv\") or die \"Excel Logfile Workbook not opened - Ensure file \\\"$csv\\\" is in the working directory\\n\";\nmy @s_ins = in $csv_in-&gt;worksheets;\nmy $s_in = $s_ins[0];\nmy $name = $csv_in-&gt;Worksheets($s_in)-&gt;{Name};\nprint \"$s_in - sheet I'm trying to open\\n\";\nprint \"$name - sheet I'm trying to open\\n\";\nmy $res_sheet = $csv_in -&gt; Worksheets(\"$name\");\nmy $last_row = $res_sheet -&gt; UsedRange -&gt; Find({What =&gt; \"*\", SearchDirection =&gt; 2, SearchOrder =&gt; 1})    -&gt; {Row};\nmy $last_col = $res_sheet -&gt; UsedRange -&gt; Find({What =&gt; \"*\", SearchDirection =&gt; 2, SearchOrder =&gt; 2}) -&gt; {Column};\n\nmy $range = \"A1:\".$last_col.$last_row;\n$res_sheet-&gt;range($range)-&gt;copy();\n\nmy $ResReport = $Book_In -&gt; Worksheets(\"ModelReserveReport\");\n$ResReport-&gt;range('A1')-&gt;Select();\n$ResReport-&gt;paste();\n$csv_in-&gt;Close();\n</code></pre>\n\n<p>I keep getting the following error\nWin32::OLE(0.1712) error 0x8002000b: \"Invalid index\" </p>\n\n<p>I think I am either not pointing excel to the right name of the worksheet or I have the method for finding the last row and column wrong but I'm struggling to work out how to fix either.\nCan anyone spot my mistake?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1543197552, "post_id": 53473582, "comment_id": 93818137, "body": "<code>s&#47;by: \\K[a-z]+&#47;$foo&#47;i</code>"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1543250404, "post_id": 53473582, "comment_id": 93840629, "body": "a-z is not &quot;whatever characters&quot;.  which did you actually want?"}, {"owner": {"reputation": 898, "user_id": 160272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/813f535246722b7bf02aacc9ce818de8?s=128&d=identicon&r=PG", "display_name": "showaltb", "link": "https://stackoverflow.com/users/160272/showaltb"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1543257581, "post_id": 53473582, "comment_id": 93843945, "body": "@ikegami, wow, I&#39;ve been using Perl for 20 years and I&#39;ve never learned <code>\\K</code>. That&#39;s awesome."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 898, "user_id": 160272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/813f535246722b7bf02aacc9ce818de8?s=128&d=identicon&r=PG", "display_name": "showaltb", "link": "https://stackoverflow.com/users/160272/showaltb"}, "edited": false, "score": 1, "creation_date": 1543257844, "post_id": 53473582, "comment_id": 93844067, "body": "@showaltb, It was introduced in 5.10, IIRC. <code>s&#47;by: \\K[a-z]+&#47;$foo&#47;i</code> is more efficient than <code>s&#47;(by: )[a-z]+&#47;$1$foo&#47;i</code>. Note that <code>s&#47;by: [a-z]+&#47;by: $foo&#47;i</code> isn&#39;t equivalent to them because of <code>&#47;i</code>."}, {"owner": {"reputation": 302, "user_id": 7478708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249a64e62b70766b75477d4caf9796e5?s=128&d=identicon&r=PG&f=1", "display_name": "Boschko", "link": "https://stackoverflow.com/users/7478708/boschko"}, "edited": false, "score": 0, "creation_date": 1543258071, "post_id": 53473582, "comment_id": 93844186, "body": "<code>s&#47;by:\\K.*([a-z])*&#47;\\u\\L$1 \\E\\u$foo&#47;ig;</code>  was my solution which accomplished the warranted substitution"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1543315618, "post_id": 53473582, "comment_id": 93865073, "body": "@Boschko, That doesn&#39;t do what the question asks at all."}, {"owner": {"reputation": 302, "user_id": 7478708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249a64e62b70766b75477d4caf9796e5?s=128&d=identicon&r=PG&f=1", "display_name": "Boschko", "link": "https://stackoverflow.com/users/7478708/boschko"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1543360547, "post_id": 53473582, "comment_id": 93889246, "body": "@ikegami <code>s&#47;by:\\K.*([a-z])*&#47;$foo&#47;ig;</code> does"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1543385380, "post_id": 53473582, "comment_id": 93895363, "body": "That&#39;s a pretty awful version of what I previously posted. <code>(...)*</code> makes no sense."}, {"owner": {"reputation": 302, "user_id": 7478708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249a64e62b70766b75477d4caf9796e5?s=128&d=identicon&r=PG&f=1", "display_name": "Boschko", "link": "https://stackoverflow.com/users/7478708/boschko"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1543433259, "post_id": 53473582, "comment_id": 93922280, "body": "@ikegami if it works it works, youve been a huge help thanks a lot &lt;3"}], "answers": [{"comments": [{"owner": {"reputation": 302, "user_id": 7478708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249a64e62b70766b75477d4caf9796e5?s=128&d=identicon&r=PG&f=1", "display_name": "Boschko", "link": "https://stackoverflow.com/users/7478708/boschko"}, "edited": false, "score": 0, "creation_date": 1543201330, "post_id": 53473714, "comment_id": 93818893, "body": "how would i make it so i doesn&#39;t carry the content over from line underneath?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 302, "user_id": 7478708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249a64e62b70766b75477d4caf9796e5?s=128&d=identicon&r=PG&f=1", "display_name": "Boschko", "link": "https://stackoverflow.com/users/7478708/boschko"}, "edited": false, "score": 1, "creation_date": 1543207208, "post_id": 53473714, "comment_id": 93820028, "body": "@Boschko what do you mean?  show your complete perl command in your question"}, {"owner": {"reputation": 302, "user_id": 7478708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249a64e62b70766b75477d4caf9796e5?s=128&d=identicon&r=PG&f=1", "display_name": "Boschko", "link": "https://stackoverflow.com/users/7478708/boschko"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1543241439, "post_id": 53473714, "comment_id": 93835522, "body": "@ysth right now the only command that works is <code>s&#47;by: *\\K[a-z].*&#47;$nameLowercase&#47;ig;</code> but i also need to  only make the first letter of the user\u2019s name upper case.                    your command would somehow append the following line of the document which Im reading from to the end of my string its a mess man, im a mess"}, {"owner": {"reputation": 302, "user_id": 7478708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249a64e62b70766b75477d4caf9796e5?s=128&d=identicon&r=PG&f=1", "display_name": "Boschko", "link": "https://stackoverflow.com/users/7478708/boschko"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1543247517, "post_id": 53473714, "comment_id": 93839043, "body": "@ysth this is my exact question  If you find the pattern, starts with the string \u201cby: \u201d followed by any characters , then replace whatever characters comes after  \u201cby: \u201d with the user name that was provided from user input($foo).  Make only the first letter of the user\u2019s name upper case."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 302, "user_id": 7478708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249a64e62b70766b75477d4caf9796e5?s=128&d=identicon&r=PG&f=1", "display_name": "Boschko", "link": "https://stackoverflow.com/users/7478708/boschko"}, "edited": false, "score": 1, "creation_date": 1543250361, "post_id": 53473714, "comment_id": 93840602, "body": "@Boschko if it is appending the next line you are doing something strange.  you <i>must</i> show your entire perl command if you want help with that"}], "tags": [], "owner": {"reputation": 898, "user_id": 160272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/813f535246722b7bf02aacc9ce818de8?s=128&d=identicon&r=PG", "display_name": "showaltb", "link": "https://stackoverflow.com/users/160272/showaltb"}, "is_accepted": true, "score": 1, "last_activity_date": 1543195911, "creation_date": 1543195911, "answer_id": 53473714, "question_id": 53473582, "link": "https://stackoverflow.com/questions/53473582/perl-how-to-substitute-the-content-after-pattern-closed/53473714#53473714", "title": "Perl: How to substitute the content after pattern CLOSED", "body": "<p>Some problems with your substitution:</p>\n\n<ol>\n<li>You say you want to match <code>by:</code> (space after colon), but your regex will never match the space.</li>\n<li>The pattern <code>[a-z]+</code> means to match one or more occurrences of letters <code>a</code> to <code>z</code>. But you said you want to match \"any characters\". That might be zero characters, and it might contain non-letters.</li>\n<li>You've replaced the match with <code>$foo</code>, but have lost <code>by:</code>. The entire matched string is replaced with the replacement.</li>\n<li>No need to escape <code>:</code> in your pattern.</li>\n<li>You're capturing the entire match in parentheses, but not using that anywhere.</li>\n</ol>\n\n<p>I'm assuming you're processing the file line-by line. You want \"starts with the string <code>by:</code> followed by any characters\". This is the regex:</p>\n\n<pre><code>/^by: .*/\n</code></pre>\n\n<p><code>^</code> matches beginning of line. Then <code>by:</code> matches exactly those characters. <code>.</code> matches any character except for a newline, and <code>*</code> means zero-or more of the preceding item. So <code>.*</code> matches all the rest of the characters on the line.</p>\n\n<p>\"replace whatever characters that come after <code>by:</code> with an existing string <code>$foo</code>. I assume you mean the contents of the variable <code>$foo</code> and not the literal characters <code>$foo</code>. This is:</p>\n\n<pre><code>s/^by: .*/by: $foo/;\n</code></pre>\n\n<p>Since we matched <code>by:</code>, I repeated it in the replacement string because you want to preserve it. <code>$foo</code> will be interpolated in the replacement string.</p>\n\n<p>Another way to write this would be:</p>\n\n<pre><code>s/^(by: ).*/$1$foo/\n</code></pre>\n\n<p>Here we've captured the text <code>by:</code> in the first set of parentheses. That text will be available in the <code>$1</code> variable, so we can interpolate that into the replacement string.</p>\n"}], "owner": {"reputation": 302, "user_id": 7478708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249a64e62b70766b75477d4caf9796e5?s=128&d=identicon&r=PG&f=1", "display_name": "Boschko", "link": "https://stackoverflow.com/users/7478708/boschko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 53473714, "answer_count": 1, "score": 0, "last_activity_date": 1543257972, "creation_date": 1543194315, "last_edit_date": 1543257972, "question_id": 53473582, "link": "https://stackoverflow.com/questions/53473582/perl-how-to-substitute-the-content-after-pattern-closed", "title": "Perl: How to substitute the content after pattern CLOSED", "body": "<p>So I cant use $' variable </p>\n\n<p>But i need to find the pattern that in a file that starts with the string \u201cby: \u201d followed by any characters , then replace whatever characters comes after \u201cby: \u201d with an existing string $foo </p>\n\n<p>im using $^I and a while loop since i need to update multiple fields in a file.</p>\n\n<p>I was thinking something along the lines of [s///] </p>\n\n<pre><code>s/(by\\:[a-z]+)/$foo/i\n</code></pre>\n\n<p>I need help. Yes this is an assignment question but im 5 hours and ive lost many brain cells in the process </p>\n"}, {"tags": ["file", "perl"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 2, "creation_date": 1543170775, "post_id": 53470540, "comment_id": 93811777, "body": "It would be an understatement to call <code>perl -e &#39;system(&quot;sed ...</code> an anti-pattern"}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1543179904, "post_id": 53470540, "comment_id": 93814509, "body": "you say you want to remove all new lines, then replace all instances of ^M with \\n. Doesnt this make the real requirement to just remove ^M?"}, {"owner": {"reputation": 1622, "user_id": 2452206, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ea274ba295cafbb288fd3baca7fa28a1?s=128&d=identicon&r=PG&f=1", "display_name": "lanes", "link": "https://stackoverflow.com/users/2452206/lanes"}, "edited": false, "score": 0, "creation_date": 1543217063, "post_id": 53470540, "comment_id": 93822761, "body": "No, if I yust remove the ^M I got four lines but what I want in the end is three lines:     <code>one     twothree     four</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1622, "user_id": 2452206, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ea274ba295cafbb288fd3baca7fa28a1?s=128&d=identicon&r=PG&f=1", "display_name": "lanes", "link": "https://stackoverflow.com/users/2452206/lanes"}, "edited": false, "score": 0, "creation_date": 1543174751, "post_id": 53470603, "comment_id": 93812967, "body": "I solved my second task with <code>path($file)-&gt;edit_lines(sub { s&#47;^M&#47;\\n&#47;g });</code>. But why do I not need the <code>g</code> in your substitution?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 1622, "user_id": 2452206, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ea274ba295cafbb288fd3baca7fa28a1?s=128&d=identicon&r=PG&f=1", "display_name": "lanes", "link": "https://stackoverflow.com/users/2452206/lanes"}, "edited": false, "score": 1, "creation_date": 1543177805, "post_id": 53470603, "comment_id": 93813885, "body": "The <code>&#47;g</code> modifier makes the substitution run for every match instead of just the first one. Since edit_lines runs for every line, you don&#39;t need <code>&#47;g</code> if you only need it to run once per line. After you remove the newlines though, you only have one line, so you&#39;ll need <code>&#47;g</code> to affect multiple instances on that line."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 4, "last_activity_date": 1543170658, "creation_date": 1543170658, "answer_id": 53470603, "question_id": 53470540, "link": "https://stackoverflow.com/questions/53470540/how-to-remove-all-newlines-from-file-within-a-perl-script/53470603#53470603", "title": "How to remove all newlines from file within a perl script?", "body": "<p>If you're already using Perl it's unnecessary to use sed. Perl has an <code>-i</code> switch which makes this sort of thing easy.</p>\n\n<pre><code>perl -pi -e's/\\n//' test.txt\n</code></pre>\n\n<p>Alternatively <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> provides a functional equivalent to <code>-i</code>.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Path::Tiny;\nmy $file = shift; # get filename from argument\npath($file)-&gt;edit_lines(sub { s/\\n// });\n</code></pre>\n\n<p>In both cases the substitution will be performed for each line, which should be fine because the line contains its trailing newline. You can perform it on the whole file at once by passing <code>-0777</code> to the oneliner, or using <code>-&gt;edit</code> instead of <code>-&gt;edit_lines</code>, then you would want to use <code>s/\\n//g</code> to replace multiple occurrences.</p>\n"}], "owner": {"reputation": 1622, "user_id": 2452206, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ea274ba295cafbb288fd3baca7fa28a1?s=128&d=identicon&r=PG&f=1", "display_name": "lanes", "link": "https://stackoverflow.com/users/2452206/lanes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 53470603, "answer_count": 1, "score": 0, "last_activity_date": 1543170658, "creation_date": 1543170264, "question_id": 53470540, "link": "https://stackoverflow.com/questions/53470540/how-to-remove-all-newlines-from-file-within-a-perl-script", "title": "How to remove all newlines from file within a perl script?", "body": "<p>I have a file that when viewed with <code>vi</code> with <code>:set list</code> that looks like the following:</p>\n\n<pre><code>one^M$\ntwo$\nthree$^M\nfour$\n</code></pre>\n\n<p>I want to remove all the newlines (<code>$</code>) in the file from within a perl script. So the file should look like this:</p>\n\n<pre><code>one^Mtwothree^Mfour\n</code></pre>\n\n<p>After that I want to replace the CR (<code>^M</code>) with newlines (<code>\\n</code>) but that is another story...</p>\n\n<p>I tried the following code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy $file = \"test.txt\";\nsystem(\"sed -i ':a;N;$!ba;s/\\n//g' $file\");\nexit 0;\n</code></pre>\n\n<p>I know it's ugly to use <code>system</code> but I am punished with this error:</p>\n\n<pre><code>sed: -e expression #1, char 10: unterminated `s' command\n</code></pre>\n\n<p>Does anyone know an elegant way to achive my goal?</p>\n"}, {"tags": ["perl", "dbi"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1543167563, "post_id": 53469797, "comment_id": 93810796, "body": "Have you tried just calling <code>$dbh-&gt;state</code>? Many DBI attributes and methods are cached in the database handle after a statement is run."}, {"owner": {"reputation": 215, "user_id": 1822539, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/41468e9f41ad89dbfcef30308bf521c6?s=128&d=identicon&r=PG", "display_name": "nick", "link": "https://stackoverflow.com/users/1822539/nick"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1543167644, "post_id": 53469797, "comment_id": 93810827, "body": "Yes, you are right @Grinnz . Thanks!"}], "owner": {"reputation": 215, "user_id": 1822539, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/41468e9f41ad89dbfcef30308bf521c6?s=128&d=identicon&r=PG", "display_name": "nick", "link": "https://stackoverflow.com/users/1822539/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543165390, "creation_date": 1543165390, "question_id": 53469797, "link": "https://stackoverflow.com/questions/53469797/dbdbi-how-can-i-get-sqlstate-of-do-subroutine", "title": "DB::DBI How can I get SQLSTATE of do() subroutine?", "body": "<p>I want to get SQLSTATE after calling do subroutine of DBI.\nWith a statement handler, I can use $handler->state;\nWith \"do\", as it wrap statement hanlder, I can't use that way. \nIs there any way I can get sqlstate of do without changing to use prepare then execute?</p>\n"}, {"tags": ["perl", "perlop"], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1543167104, "post_id": 53468840, "comment_id": 93810654, "body": "Two things that make this ambiguity even more fun: Spaces between sigils and variable names are allowed, so <code>rand * 100</code> still does not avoid this issue; and it happens with <code>rand &#47; 100</code> too just resulting in a parse error once the parser realizes there&#39;s no closing <code>&#47;</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1543197631, "last_edit_date": 1543197631, "creation_date": 1543158598, "answer_id": 53468840, "question_id": 53468764, "link": "https://stackoverflow.com/questions/53468764/what-is-precedence-in-this-expression/53468840#53468840", "title": "What is precedence in this expression?", "body": "<p><code>rand</code> has two syntax:</p>\n\n<ul>\n<li><code>rand</code></li>\n<li><code>rand EXPR</code></li>\n</ul>\n\n<p>If what follows <code>rand</code> can be the start of an expression (<code>EXPR</code>), Perl assumes you are using the latter form.</p>\n\n<p><code>*</code> can start an <code>EXPR</code>, so <code>rand*...</code> is parsed as <code>rand EXPR</code>. This means that <code>rand*100</code> is equivalent to <code>rand(*100)</code>.</p>\n\n<pre><code>$ perl -MO=Deparse,-p -wle'print(rand*100)'\nBEGIN { $^W = 1; }\nBEGIN { $/ = \"\\n\"; $\\ = \"\\n\"; }\nprint(rand(*100));\n-e syntax OK\n\n$ perl -wle'print(rand*100)'\nArgument \"*main::100\" isn't numeric in rand at -e line 1.\n0.57355563536203\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 0, "creation_date": 1543160201, "post_id": 53468858, "comment_id": 93808625, "body": "What an honour ... I&#39;ve actually got your &quot;Data Munging with Perl&quot; on my bookshelf directly above me. Metaphoric in more ways than one ;-)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1543158724, "creation_date": 1543158724, "answer_id": 53468858, "question_id": 53468764, "link": "https://stackoverflow.com/questions/53468764/what-is-precedence-in-this-expression/53468858#53468858", "title": "What is precedence in this expression?", "body": "<p>You can always use <a href=\"https://metacpan.org/pod/B::Deparse\" rel=\"nofollow noreferrer\">B::Deparse</a> to see how Perl is parsing an expression.</p>\n\n<pre><code>$ perl -MO=Deparse -e'print(100*rand)'\nprint 100 * (rand);\n-e syntax OK\n$ perl -MO=Deparse -e'print(rand*100)'\nprint rand *100;\n-e syntax OK\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1543167246, "post_id": 53468919, "comment_id": 93810704, "body": "The number is not <code>*100</code> but the numification of the variable <code>*100</code>, which is at that point an undefined glob."}], "tags": [], "owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "is_accepted": false, "score": 0, "last_activity_date": 1543159125, "creation_date": 1543159125, "answer_id": 53468919, "question_id": 53468764, "link": "https://stackoverflow.com/questions/53468764/what-is-precedence-in-this-expression/53468919#53468919", "title": "What is precedence in this expression?", "body": "<p>The problem is not about presidence, it is about syntax. The presence of the glob \"*\", which renders the number unworkable.</p>\n\n<pre><code>print rand 100;\n</code></pre>\n\n<p>= 0 - 100</p>\n\n<pre><code>print (rand(100)); \n</code></pre>\n\n<p>... gives the same result.</p>\n\n<pre><code>print rand *100\n</code></pre>\n\n<p>... is ignored</p>\n\n<p>Essentially you have created a number \"*100\". \"i100\" is an interesting number however, but I'm not sure how it is randomised :-) </p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 53468840, "answer_count": 3, "score": 1, "last_activity_date": 1543197631, "creation_date": 1543157984, "question_id": 53468764, "link": "https://stackoverflow.com/questions/53468764/what-is-precedence-in-this-expression", "title": "What is precedence in this expression?", "body": "<p>When I run this program:</p>\n\n<pre><code>print(rand*100)\n</code></pre>\n\n<p>I get values from <code>[0,1)</code> range.</p>\n\n<p>But for this:</p>\n\n<pre><code>print(100*rand)\n</code></pre>\n\n<p>I get values from <code>[0,100)</code> range.</p>\n\n<p>What is precedence here? and why first expression does not return values from <code>[0,100)</code> range?</p>\n"}, {"tags": ["arrays", "regex", "string", "perl"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1543143950, "creation_date": 1543143950, "answer_id": 53466835, "question_id": 53466759, "link": "https://stackoverflow.com/questions/53466759/how-to-get-all-individual-matches-from-a-regex-in-perl/53466835#53466835", "title": "how to get all individual matches from a regex in perl?", "body": "<p>If you start with a hash, just use <a href=\"http://p3rl.org/keys\" rel=\"nofollow noreferrer\">keys</a> and <a href=\"http://p3rl.org/values\" rel=\"nofollow noreferrer\">values</a> to extract the first names and last names. To extract the names from a string, just add capture groups and <code>/g</code> to find all the matches:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nmy %names = qw (hanibal lecter Harry Potter INDIANA JONES Sarah connor scarlet O'Hara JAMES Bond);\n\nsay join ' ', 'First names:', keys %names;\nsay join ' ', 'Last names:', values %names;\n\nmy $scalar_string = \"hanibal lecter Harry Potter INDIANA JONES Sarah connor scarlet O'Hara JAMES Bond\";\n\nmy (@first_names, @last_names);\nwhile ($scalar_string =~ /([\\w']+) ([\\w']+)/g) {\n    push @first_names, $1;\n    push @last_names, $2;\n}\nsay join ' ', 'First names:', @first_names;\nsay join ' ', 'Last names:', @last_names;\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 10690484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea2f3b349f09d335afad326d1355f86a?s=128&d=identicon&r=PG&f=1", "display_name": "Nutiu Radu", "link": "https://stackoverflow.com/users/10690484/nutiu-radu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 1, "accepted_answer_id": 53466835, "answer_count": 1, "score": 1, "last_activity_date": 1543143950, "creation_date": 1543143328, "last_edit_date": 1543143663, "question_id": 53466759, "link": "https://stackoverflow.com/questions/53466759/how-to-get-all-individual-matches-from-a-regex-in-perl", "title": "how to get all individual matches from a regex in perl?", "body": "<p>I have this:</p>\n\n<pre><code>my %names = qw (hanibal lecter Harry Potter INDIANA JONES Sarah connor scarlet O'Hara JAMES Bond);\n</code></pre>\n\n<p>or this:</p>\n\n<pre><code>my $scalar_string = \"hanibal lecter Harry Potter INDIANA JONES Sarah connor scarlet O'Hara JAMES Bond\";\n</code></pre>\n\n<p>How to get all first and last name use <code>/[\\w']+\\ [\\w']+/</code>?</p>\n"}, {"tags": ["perl", "http"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10700670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caa9f63fd5c83fa7b2c6d7167526ab13?s=128&d=identicon&r=PG&f=1", "display_name": "Biopac", "link": "https://stackoverflow.com/users/10700670/biopac"}, "edited": false, "score": 0, "creation_date": 1543162417, "post_id": 53464717, "comment_id": 93809274, "body": "I am using my proper ID. Can you tell me where the query string is invalid?"}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 1, "last_activity_date": 1543121545, "last_edit_date": 1543121545, "creation_date": 1543121052, "answer_id": 53464717, "question_id": 53463740, "link": "https://stackoverflow.com/questions/53463740/usps-http-post-request/53464717#53464717", "title": "USPS HTTP Post Request", "body": "<p>To start, you have an invalid query string. Compare what you are doing to the <a href=\"https://www.usps.com/business/web-tools-apis/address-information-api.htm\" rel=\"nofollow noreferrer\">USPS WebTools example</a> and remove what they don't show. Be sure that you are setting your USERID properly (and not using 'xxxxxxx'); an environment variable is handy there.</p>\n\n<p>Or, you can try using the <a href=\"https://github.com/CPAN-Adoptable-Modules/business-us-usps-webtools\" rel=\"nofollow noreferrer\">Business::USPS::WebTools</a> module from GitHub. It implements the Zip Code Lookup.</p>\n"}, {"tags": [], "owner": {"reputation": 24, "user_id": 2019431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192210311f1e3bbed6d114ff2796e484?s=128&d=identicon&r=PG", "display_name": "supernickman", "link": "https://stackoverflow.com/users/2019431/supernickman"}, "is_accepted": true, "score": 0, "last_activity_date": 1543193706, "creation_date": 1543193706, "answer_id": 53473532, "question_id": 53463740, "link": "https://stackoverflow.com/questions/53463740/usps-http-post-request/53473532#53473532", "title": "USPS HTTP Post Request", "body": "<p>Change your query XML to: </p>\n\n<pre><code>$queryString = qq~\n&lt;AddressValidateRequest USERID=\"xxxxxxxxxxx\"&gt;\n&lt;Revision&gt;1&lt;/Revision&gt;\n  &lt;Address ID=\"0\"&gt;\n    &lt;Address1&gt;&lt;/Address1&gt;\n    &lt;Address2&gt;$saddress&lt;/Address2&gt;\n    &lt;City&gt;$scity&lt;/City&gt;\n    &lt;State&gt;$sstate&lt;/State&gt;\n    &lt;Zip5&gt;$szip&lt;/Zip5&gt;\n    &lt;Zip4&gt;&lt;/Zip4&gt;\n  &lt;/Address&gt;\n&lt;/AddressValidateRequest&gt;\n~;\n</code></pre>\n\n<p>Then build the request as a GET instead of a POST:</p>\n\n<pre><code>$userAgent = new LWP::UserAgent;\n$userAgent-&gt;agent( 'USPS' );\n$url = \"https://secure.shippingapis.com/ShippingAPI.dll?API=Verify&amp;XML=$queryString\";\n\n$request = new HTTP::Request( 'GET',  $url );\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10700670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caa9f63fd5c83fa7b2c6d7167526ab13?s=128&d=identicon&r=PG&f=1", "display_name": "Biopac", "link": "https://stackoverflow.com/users/10700670/biopac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 53473532, "answer_count": 2, "score": 1, "last_activity_date": 1543193706, "creation_date": 1543106927, "question_id": 53463740, "link": "https://stackoverflow.com/questions/53463740/usps-http-post-request", "title": "USPS HTTP Post Request", "body": "<p>Here is the error message I am receiving when I try to run the following Perl code. Any ideas what causing this? It appears it does not like the API=Verify, but it was the only name for the API which returns a 9 digit zip code I could find.</p>\n\n<p>80040B1AAPI Authorization failure. is not a valid API name for this \nprotocol.USPSCOM::DoAuth  </p>\n\n<pre><code># Perl subroutine for POST Request\n#########\nsub FindTracking() {\n$saddress=\"60 Passional Way\";\n$scity=\"Burnsville\";\n$szip=\"27690\";\n$sstate=\"NC\";\nprint \"start of tracking...&lt;br&gt;\";\n\n$queryString = qq~\n&lt;?xml version=\"1.0\"?&gt;\nhttps://secure.shippingapis.com/ShippingAPI.dll?API=Verify&amp;XML=        \n&lt;AddressValidateRequest USERID=\"xxxxxxx\"&gt;\n&lt;Revision&gt;1&lt;/Revision&gt;\n&lt;Address ID=\"0\"&gt;\n&lt;Address1&gt;&lt;/Address1&gt;\n&lt;Address2&gt;$saddress&lt;/Address2&gt;\n&lt;City&gt;$scity&lt;/City&gt;\n&lt;State&gt;$sstate&lt;/State&gt;\n&lt;Zip5&gt;$szip&lt;/Zip5&gt;\n&lt;Zip4&gt;&lt;/Zip4&gt;\n&lt;/Address&gt;\n&lt;/AddressValidateRequest&gt;\n&lt;?xml version=\"1.0\"?&gt;\n&lt;AddressValidateResponse&gt;&lt;Address ID=\"0\"&gt;\n&lt;Address2&gt;&lt;/Address2&gt;&lt;City&gt;&lt;/City&gt;&lt;State&gt;&lt;/State&gt;&lt;Zip5&gt;&lt;/Zip5&gt;\n&lt;Zip4&gt;&lt;/Zip4&gt;&lt;/Address&gt;&lt;/AddressValidateResponse&gt;\n&lt;Error&gt;\n&lt;Number&gt;&lt;/Number&gt;\n&lt;Source&gt;&lt;/Source&gt;\n&lt;Description&gt;&lt;/Description&gt;\n&lt;HelpFile&gt;&lt;/HelpFile&gt;\n&lt;HelpContext&gt;&lt;/HelpContext&gt;\n&lt;/Error&gt;\n~;\n\n# Instantiate the user agent and set our agent string\n$userAgent = new LWP::UserAgent;\n$userAgent-&gt;agent( 'USPS' );\n$queryString =~ s/ /\\%20/ig;\n$request = new HTTP::Request( 'POST',      \n'https://secure.shippingapis.com/ShippingAPI.dll' );\n\n# Set the content type\n$request-&gt;content_type( 'text/xml' );\n\n# Set the query string\n$request-&gt;content( $queryString );\n\n# Make the request\n$response = $userAgent-&gt;request( $request );\nprint $response-&gt;content();\n# Check the status of the request\nif ( $response-&gt;is_success ) {\n    $content = $$response{ \"_content\" };\n  $TrackingNumber = \"\";\n  ($success) = $content =~ /\\&lt;AddressValidateRequest\\&gt;(.*)\\    \n &lt;\\/AddressValidateRequest\\&gt;/;\n  print \"&lt;br&gt;&lt;br&gt;==&gt;some $content&lt;br&gt;\";\n  if ($success eq \"Success\") {\n    ($TrackingNumber)= $content =~ /\\&lt;Zip4\\&gt;(.*)\\&lt;\\/Zip4\\&gt;/;\n   print \"here with $TrackingNumber&lt;br&gt;\";\n   }\n\n}\nelse {\n  print \"&lt;br&gt;&lt;br&gt;here with resp=$response&lt;br&gt;req=$request &lt;br&gt;cont     \n$content\";\n}\n}\n</code></pre>\n"}, {"tags": ["perl", "csv", "filepath"], "comments": [{"owner": {"reputation": 33, "user_id": 10671968, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EVVMF5LQ8Gk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gsvLtUlUR9BuMpETmOwqz9nSnBLw/mo/photo.jpg?sz=128", "display_name": "Joshua McBride", "link": "https://stackoverflow.com/users/10671968/joshua-mcbride"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1543086764, "post_id": 53461251, "comment_id": 93794401, "body": "Thanks! how can I extract the filename from the path and use this as the name that it is saved as after manipulation?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 1, "creation_date": 1543092969, "post_id": 53461251, "comment_id": 93795957, "body": "@toolic, Don&#39;t use glob in scalar context like that! Use <code>my ($filepath_in) = glob &#39;C:\\delete_csv_files\\files_new\\*&#39;;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 1, "last_activity_date": 1543142493, "creation_date": 1543142493, "answer_id": 53466670, "question_id": 53461251, "link": "https://stackoverflow.com/questions/53461251/perl-select-filepath-for-csv-file-inside-folder/53466670#53466670", "title": "Perl: Select Filepath for csv file inside folder", "body": "<p>As suggested by toolic and commented by ikegami, you can use <code>glob</code>.</p>\n\n<pre><code>my ($filepath_in) = glob 'C:\\delete_csv_files\\files_new\\*';\n</code></pre>\n\n<p>Then you can use a regex to generate the name of the output file, like :</p>\n\n<pre><code>(my $filepath_out = $filepath_in) =~  s!\\\\files_new\\\\!\\\\files_processed\\\\!;\n</code></pre>\n\n<p>This will give you a file with the same name, in directory <code>files_processed</code>.</p>\n\n<p>If you want to force the name of the ouput file to <code>output.csv</code> like in your code snippet, then use this regex instead :</p>\n\n<pre><code>(my $filepath_out = $filepath_in) =~  s!\\\\files_new\\\\.*$!\\\\files_processed\\\\output.csv!;\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10671968, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EVVMF5LQ8Gk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gsvLtUlUR9BuMpETmOwqz9nSnBLw/mo/photo.jpg?sz=128", "display_name": "Joshua McBride", "link": "https://stackoverflow.com/users/10671968/joshua-mcbride"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1543142493, "creation_date": 1543084642, "question_id": 53461251, "link": "https://stackoverflow.com/questions/53461251/perl-select-filepath-for-csv-file-inside-folder", "title": "Perl: Select Filepath for csv file inside folder", "body": "<p>I have a Perl Script which does some data manipulation with a selected CSV file. In the past, I have renamed the CSV file to match the one specified inside my script. </p>\n\n<p>I now want to change it so that the sole file in a folder is selected, but the csv file is not always named the same. There will only ever be a single file in the folder.</p>\n\n<p>I currently use this method;</p>\n\n<pre><code>my $filepath_in = 'C:\\delete_csv_files\\files_new\\input.csv';\nmy $filepath_out = 'C:\\delete_csv_files\\files_processed\\output.csv';\n\nopen my $in,  '&lt;:encoding(utf8)', $filepath_in or die;\nopen my $out, '&gt;:encoding(utf8)', $filepath_out or die;\n</code></pre>\n\n<p>I also want the file to retain its original name after its been processed.</p>\n\n<p>Can anyone give me any pointers?</p>\n"}, {"tags": ["perl", "mime-types", "sendmail"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1543029656, "post_id": 53453265, "comment_id": 93782222, "body": "You could just use <a href=\"https://metacpan.org/pod/Email::Sender::Manual::QuickStart\" rel=\"nofollow noreferrer\">Email::Sender::Simple</a>. It&#39;s designed to work with Email::MIME and it defaults to using sendmail."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1543044807, "post_id": 53453312, "comment_id": 93784354, "body": "Re &quot;<i>you need to specify a SMTP session</i>&quot;, The question asked how to use <code>sendmail</code>, not SMTP."}], "tags": [], "owner": {"reputation": 720, "user_id": 10696884, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TZLhm3qAv5U/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gTJ8AUH3mkzlYyEQgF0K4AqDVXLw/mo/photo.jpg?sz=128", "display_name": "Thomas Lang", "link": "https://stackoverflow.com/users/10696884/thomas-lang"}, "is_accepted": false, "score": 0, "last_activity_date": 1543010128, "creation_date": 1543010128, "answer_id": 53453312, "question_id": 53453265, "link": "https://stackoverflow.com/questions/53453265/how-to-use-emailmime-with-sendmail/53453312#53453312", "title": "How to use Email::Mime with sendmail", "body": "<p>First of all, if your E-Mail server requires authentication (which most do of course), you need to specify  a SMTP session:</p>\n\n<pre><code>$transport = EMail::Sender::Transport::SMTP::Persistent-&gt;new({\n  # host, port, ssl, etc\n})\n</code></pre>\n\n<p>Furthermore, I think you don't actually need to create the content as an own MIME-content.\nI did use something similar to this in my own work:</p>\n\n<pre><code>$email = Email::MIME-&gt;Create(\n  header_str =&gt; [ ... ],\n  body_str =&gt; $message,\n  attributes =&gt; {\n    charset =&gt; 'UTF-8',\n    encoding =&gt; 'base64',\n    content_type =&gt; 'text/html',\n  }\n)\n</code></pre>\n\n<p>After sending your mail via <code>sendmail($email, { transport =&gt; $transport })</code>, you need to close the session through <code>$transport-&gt;disconnect</code>.</p>\n\n<p>For your application you might to adapt several things like the actual sending protocol (if different from SMTP) or the attributes hash contents.</p>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 2, "last_activity_date": 1543011323, "creation_date": 1543011323, "answer_id": 53453436, "question_id": 53453265, "link": "https://stackoverflow.com/questions/53453265/how-to-use-emailmime-with-sendmail/53453436#53453436", "title": "How to use Email::Mime with sendmail", "body": "<pre><code>print MAIL $email;\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>print MAIL $email-&gt;as_string;\n</code></pre>\n"}], "owner": {"reputation": 747, "user_id": 590222, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fba5be60a41679337637cdfba23bb4b1?s=128&d=identicon&r=PG", "display_name": "justrajdeep", "link": "https://stackoverflow.com/users/590222/justrajdeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 483, "favorite_count": 0, "accepted_answer_id": 53453436, "answer_count": 2, "score": 2, "last_activity_date": 1543011323, "creation_date": 1543009703, "question_id": 53453265, "link": "https://stackoverflow.com/questions/53453265/how-to-use-emailmime-with-sendmail", "title": "How to use Email::Mime with sendmail", "body": "<p>I am trying to send HTML email using a script. I will have to use native unix things and <code>Email::Mime</code> since those are the only thing I found installed in the box i am stuck with. I am creating a <code>Email::Mime</code> message and sending it to sendmail.</p>\n\n<p>But i keep getting Error: <strong>No recipient addresses found in header</strong>\nI have seen other RUBY scripts using <code>sendmail</code> so that works for this box.</p>\n\n<p>Can someone help me with what I might be doing wrong in the below snippet?</p>\n\n<pre><code>sub send_mail(){\n\nuse MIME::QuotedPrint;\nuse HTML::Entities;\nuse IO::All;\nuse Email::MIME;\n\n# multipart message\nmy @parts = (\n    Email::MIME-&gt;create(\n        attributes =&gt; {\n            content_type =&gt; \"text/html\",\n            disposition  =&gt; \"attachment\",\n            encoding     =&gt; \"quoted-printable\",\n            charset      =&gt; \"US-ASCII\",\n        },\n        body_str =&gt; \"Hello there!\",\n    ),\n);\n\nmy $email = Email::MIME-&gt;create(\n    header_str =&gt; [\n        To =&gt; 'abc@xxx.com',\n        From =&gt; 'abc@xxx.com',\n        Subject =&gt; \"Test Email\",\n    ],\n    parts      =&gt; [@parts],\n);\n\n# die $email-&gt;as_string;\n# die YAML::XS::Dump(\\%mail);\n\nopen(MAIL, \"|/usr/sbin/sendmail -t\");\n\nprint MAIL $email;\n\nclose (MAIL);\n\n}\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl", "xpath", "xml-libxml"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1542986828, "post_id": 53449260, "comment_id": 93771234, "body": "Default namespace only exists in the syntax. In the DOM model, each element belongs to a namespace, and there&#39;s no way to detect whether it&#39;s the default one or not - in fact, a document with a default namespace and a document with the same name space explicitly mentioned at each element are semantically equivalent. Why do you need it?"}, {"owner": {"reputation": 362, "user_id": 1534242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71b5ad16294473030981d30e20b2d6bb?s=128&d=identicon&r=PG", "display_name": "maloo", "link": "https://stackoverflow.com/users/1534242/maloo"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1542987060, "post_id": 53449260, "comment_id": 93771341, "body": "Arh ok, I&#39;ll add a bit more context to the question..."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1542988762, "post_id": 53449260, "comment_id": 93772116, "body": "What does <code>findnodes(&#39;&#47;&#47;*[local-name()=&quot;f&quot;]&#39;)</code> return? Are there any <code>f</code>s in other namespaces you don&#39;t want?"}, {"owner": {"reputation": 362, "user_id": 1534242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71b5ad16294473030981d30e20b2d6bb?s=128&d=identicon&r=PG", "display_name": "maloo", "link": "https://stackoverflow.com/users/1534242/maloo"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1542989568, "post_id": 53449260, "comment_id": 93772416, "body": "Thanks @choroba - It doesn&#39;t matter for my use case if I do pick up extra elements (even if they are garbage) as I&#39;m processing these further later down the track. Anyway using that XPath syntax worked for me - feel free to stick it in as an answer:)"}], "answers": [{"comments": [{"owner": {"reputation": 362, "user_id": 1534242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71b5ad16294473030981d30e20b2d6bb?s=128&d=identicon&r=PG", "display_name": "maloo", "link": "https://stackoverflow.com/users/1534242/maloo"}, "edited": false, "score": 0, "creation_date": 1542990135, "post_id": 53449985, "comment_id": 93772682, "body": "Thanks choroda - I can see why this isn&#39;t the ideal solution, but in my use case I&#39;m just searching to see how many times a particular function in excel spreadsheets is used (and will only need to be run once...)"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1542989896, "creation_date": 1542989896, "answer_id": 53449985, "question_id": 53449260, "link": "https://stackoverflow.com/questions/53449260/perl-libxml-search-the-default-namespace-using-findnodes/53449985#53449985", "title": "Perl libXML search the default namespace using findnodes", "body": "<p>You can ignore the namespaces completely with <code>local-name()</code>:</p>\n\n<pre><code>...-&gt;findnodes('//*[local-name()=\"f\"]')\n</code></pre>\n\n<p>Note that in general, it's not the best idea. E.g., if the syntax of the formulas depended on the version and you needed to normalize them, you would search for formulas in each namespace separately and run different conversions based on the namespace.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1543206231, "last_edit_date": 1543206231, "creation_date": 1543003352, "answer_id": 53452374, "question_id": 53449260, "link": "https://stackoverflow.com/questions/53449260/perl-libxml-search-the-default-namespace-using-findnodes/53452374#53452374", "title": "Perl libXML search the default namespace using findnodes", "body": "<p>There's no such thing as <em>the</em> default namespace. The default can be different from tag to tag. You're actually asking for the namespace of the root element.  You'd want to do this to support a few \"similar enough\" formats, and it's done as follows:</p>\n\n<pre><code>use XML::LibXML               qw( );\nuse XML::LibXML::XPathContext qw( );\n\nmy $doc = XML::LibXML-&gt;new-&gt;parse_string($xml);\n\nmy $root_ns = $doc-&gt;documentElement-&gt;namespaceURI;\n\nmy $xpc = XML::LibXML::XPathContext-&gt;new();\n$xpc-&gt;registerNs( xl =&gt; $root_ns );\n\n$xpc-&gt;findnodes('//xl:f', $doc)\n</code></pre>\n\n<p>But you didn't present any reason not to use the known namespace. You should simply use the following:</p>\n\n<pre><code>use XML::LibXML               qw( );\nuse XML::LibXML::XPathContext qw( );\n\nmy $doc = XML::LibXML-&gt;new-&gt;parse_string($xml);\n\nmy $xpc = XML::LibXML::XPathContext-&gt;new();\n$xpc-&gt;registerNs( xl =&gt; 'http://schemas.openxmlformats.org/spreadsheetml/2006/main' );\n\n$xpc-&gt;findnodes('//xl:f', $doc)\n</code></pre>\n"}], "owner": {"reputation": 362, "user_id": 1534242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71b5ad16294473030981d30e20b2d6bb?s=128&d=identicon&r=PG", "display_name": "maloo", "link": "https://stackoverflow.com/users/1534242/maloo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 53449985, "answer_count": 2, "score": 1, "last_activity_date": 1543206231, "creation_date": 1542986633, "last_edit_date": 1542989885, "question_id": 53449260, "link": "https://stackoverflow.com/questions/53449260/perl-libxml-search-the-default-namespace-using-findnodes", "title": "Perl libXML search the default namespace using findnodes", "body": "<p>Given a XML file with multiple namespaces defined, what is the simplest way to search the DOM for elements just in the default namespace using an XPath query?</p>\n\n<p>As the title suggests this is using Perl and libXML.</p>\n\n<p>Furthermore, is it possible to do this without hardcoding the namespace (if using XPathContext to define the namespace is it possible to query the default namespace of the file)</p>\n\n<p><strong>What I'm trying to achieve:</strong><br>\nI'm searching many xlsx spreadsheet documents of different ages for certain formulas and processing these. \nI was homing to just use a simple <code>findnodes(//f)</code> to gather all formulas in each sheet.\nAll of the sheets have multiple namespaces defined but most elements don't seem to have a fully qualified namespace. For example:</p>\n\n<pre><code>&lt;worksheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\" xmlns:xdr=\"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing\" xmlns:x14=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main\" xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\" mc:Ignorable=\"x14ac\" xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\"&gt;\n&lt;sheetData&gt;\n    &lt;row r=\"1\"&gt;\n        &lt;c r=\"A1\"&gt;\n            &lt;f&gt;SUM(1+2)&lt;/f&gt;\n            &lt;v&gt;3&lt;/v&gt;\n        &lt;/c&gt;\n        &lt;c r=\"A2\"&gt;\n            &lt;f&gt;SUM(4+5)&lt;/f&gt;\n            &lt;v&gt;9&lt;/v&gt;\n        &lt;/c&gt;\n...\n&lt;controls&gt;\n    &lt;mc:AlternateContent xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\"&gt;\n        &lt;mc:Choice Requires=\"x14\"&gt;\n            &lt;control shapeId=\"1\" r:id=\"rId4\" name=\"blah\"&gt;\n...\n</code></pre>\n\n<p>As I mentioned above I only care about the formulas ie: in the example above \"SUM(1+2)\" and \"SUM(4+5)\".</p>\n\n<p>How can I extract just this data out?<br>\nThe solution doesn't have to be pretty but it does have to always work (I'm not sure if the namespaces change much.)</p>\n\n<p>I could just pipe everything through grep/sed, but was hoping properly parsing it wouldn't be too hard...</p>\n"}, {"tags": ["linux", "bash", "perl", "awk"], "comments": [{"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 3, "creation_date": 1542976978, "post_id": 53444499, "comment_id": 93766650, "body": "This might be interesting for you: The dhcp server supports a management protocol call <a href=\"https://linux.die.net/man/3/omapi\" rel=\"nofollow noreferrer\">omapi</a>. If enabled, you can manage certain types of objects (like leases) while the dhcp server is running. There is a command line client called <a href=\"https://linux.die.net/man/1/omshell\" rel=\"nofollow noreferrer\">omshell</a> which can be used."}], "answers": [{"comments": [{"owner": {"reputation": 22388, "user_id": 256439, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/c4b17df9c9b2f33a96eb84f92054f708?s=128&d=identicon&r=PG", "display_name": "Sandra Schlichting", "link": "https://stackoverflow.com/users/256439/sandra-schlichting"}, "edited": false, "score": 0, "creation_date": 1542971267, "post_id": 53444866, "comment_id": 93763819, "body": "The <code>-0175</code> is really cool! However it doesn&#39;t print anything for me, when I try your version."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 22388, "user_id": 256439, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/c4b17df9c9b2f33a96eb84f92054f708?s=128&d=identicon&r=PG", "display_name": "Sandra Schlichting", "link": "https://stackoverflow.com/users/256439/sandra-schlichting"}, "edited": false, "score": 0, "creation_date": 1542979414, "post_id": 53444866, "comment_id": 93767867, "body": "@SandraSchlichting: Hmm... I&#39;m using a newer Perl (5.26.1) but I can&#39;t see anything in my code that would be affected by that."}, {"owner": {"reputation": 22388, "user_id": 256439, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/c4b17df9c9b2f33a96eb84f92054f708?s=128&d=identicon&r=PG", "display_name": "Sandra Schlichting", "link": "https://stackoverflow.com/users/256439/sandra-schlichting"}, "edited": false, "score": 0, "creation_date": 1542980287, "post_id": 53444866, "comment_id": 93768269, "body": "Just tested with 5.26.2 and doesn&#39;t work there either. Could it be an encoding issue? <code>file</code> says it is just &quot;ASCII text&quot;."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1542974800, "last_edit_date": 1542974800, "creation_date": 1542968663, "answer_id": 53444866, "question_id": 53444499, "link": "https://stackoverflow.com/questions/53444499/how-to-delete-leases-from-dhcpd-conf/53444866#53444866", "title": "How to delete leases from dhcpd.conf?", "body": "<blockquote>\n  <p>Can anyone see what I am doing wrong?</p>\n</blockquote>\n\n<p>Two things.</p>\n\n<p>Firstly, you're reading in the whole file in one go (with <code>-0777</code>), which means you lose the ability to easily print a single stanza from your file. Better to use <code>-0175</code> which is octal for \"}\". That way, your code is executed once for each stanza in the input file.</p>\n\n<p>But it still doesn't work. That's because of your regex - <code>/lease $ip \\{.*?\\}/</code>. That dot, by default, matches any character <em>except a newline</em>. And as your '{' and '}' characters are always on different lines, that is never going to match.</p>\n\n<p>You could add <code>/s</code> to the end of the match operator to change the meaning of <code>.</code> to match a newline as well. But I think it's easier to just truncate the regex to only match what's important to you - <code>/lease $ip \\{/</code>. Actually, I'd add a <code>^</code> to the start, just to be really sure.</p>\n\n<p>So, finally, we end up with this:</p>\n\n<pre><code>$ ip=\"192.168.234.5\"; perl -0175snle 'print if /^lease $ip \\{/' -- -ip=$ip dhcpd.leases\nlease 192.168.234.5 {\n  starts 3 2018/11/21 18:53:11;\n  ends 3 2018/11/21 18:54:11;\n  tstp 3 2018/11/21 18:54:11;\n  cltt 3 2018/11/21 18:53:11;\n  binding state free;\n  hardware ethernet 14:99:e2:04:52:5c;\n  uid \"\\001\\024\\231\\342\\004R\\\\\";\n}\n</code></pre>\n\n<p>Which seems to work :-)</p>\n"}, {"comments": [{"owner": {"reputation": 1243, "user_id": 10558306, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VFaXl.png?s=128&g=1", "display_name": "Kubator", "link": "https://stackoverflow.com/users/10558306/kubator"}, "reply_to_user": {"reputation": 22388, "user_id": 256439, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/c4b17df9c9b2f33a96eb84f92054f708?s=128&d=identicon&r=PG", "display_name": "Sandra Schlichting", "link": "https://stackoverflow.com/users/256439/sandra-schlichting"}, "edited": false, "score": 1, "creation_date": 1542974211, "post_id": 53445040, "comment_id": 93765356, "body": "I added solution with passing bash variable into answer."}], "tags": [], "owner": {"reputation": 1243, "user_id": 10558306, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VFaXl.png?s=128&g=1", "display_name": "Kubator", "link": "https://stackoverflow.com/users/10558306/kubator"}, "is_accepted": false, "score": 2, "last_activity_date": 1542974475, "last_edit_date": 1542974475, "creation_date": 1542969329, "answer_id": 53445040, "question_id": 53444499, "link": "https://stackoverflow.com/questions/53444499/how-to-delete-leases-from-dhcpd-conf/53445040#53445040", "title": "How to delete leases from dhcpd.conf?", "body": "<p>In case You wanna AWK solution:</p>\n\n<pre><code>awk '/^lease/ { rem=0; } /^lease 192\\.168\\.234\\.2/ { rem=1; } !rem' dhcpd.leases\n</code></pre>\n\n<p>Solution with passing BASH variable containing IP address to AWK:</p>\n\n<pre><code>awk '/^lease/ { rem=0; } /^lease '${var//./\\\\.}'/ { rem=1; } !rem' dhcpd.leases\n</code></pre>\n\n<p>As You see above in addition You have to escape each occurrence of dot (that's done by bash variable substitution <code>${var//./\\\\.}</code> ), similar You did in PERL, because is part of regexp.</p>\n\n<p>Test:</p>\n\n<pre><code>$ var='192.168.234.2'\n$ awk '/^lease/ { rem=0; } /^lease '${var//./\\\\.}'/ { rem=1; } !rem' dhcpd.leases\nlease 192.168.234.5 {\n  starts 3 2018/11/21 18:53:11;\n  ends 3 2018/11/21 18:54:11;\n  tstp 3 2018/11/21 18:54:11;\n  cltt 3 2018/11/21 18:53:11;\n  binding state free;\n  hardware ethernet 14:99:e2:04:52:5c;\n  uid \"\\001\\024\\231\\342\\004R\\\\\";\n}\nlease 192.168.234.13 {\n  starts 3 2018/11/21 21:38:16;\n  ends 3 2018/11/21 21:38:27;\n  tstp 3 2018/11/21 21:38:27;\n  cltt 3 2018/11/21 21:38:16;\n  binding state free;\n  hardware ethernet 00:e0:6f:11:7f:59;\n  uid \"\\001\\000\\340o\\021\\177Y\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1542981608, "post_id": 53445258, "comment_id": 93768910, "body": "Or, perhaps, a bit shorted, <code>print if &#47;^lease (?!$ip )&#47; .. &#47;\\}&#47;</code>"}, {"owner": {"reputation": 14947, "user_id": 900078, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/83stK.jpg?s=128&g=1", "display_name": "pynexj", "link": "https://stackoverflow.com/users/900078/pynexj"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1543022559, "post_id": 53445258, "comment_id": 93781319, "body": "@Dada - im not a heavy perl user and never know it has a <code>..</code> operator. cool!"}, {"owner": {"reputation": 22388, "user_id": 256439, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/c4b17df9c9b2f33a96eb84f92054f708?s=128&d=identicon&r=PG", "display_name": "Sandra Schlichting", "link": "https://stackoverflow.com/users/256439/sandra-schlichting"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1543056682, "post_id": 53445258, "comment_id": 93786698, "body": "@Dada What does <code>(?!$ip )</code> mean?"}, {"owner": {"reputation": 14947, "user_id": 900078, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/83stK.jpg?s=128&g=1", "display_name": "pynexj", "link": "https://stackoverflow.com/users/900078/pynexj"}, "edited": false, "score": 1, "creation_date": 1543062814, "post_id": 53445258, "comment_id": 93788050, "body": "see <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a> doc: <code>(?!pattern)</code> - A zero-width negative lookahead assertion. For example <code>&#47;foo(?!bar)&#47;</code> matches any occurrence of <code>foo</code> that isn&#39;t followed by <code>bar</code>."}], "tags": [], "owner": {"reputation": 14947, "user_id": 900078, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/83stK.jpg?s=128&g=1", "display_name": "pynexj", "link": "https://stackoverflow.com/users/900078/pynexj"}, "is_accepted": true, "score": 3, "last_activity_date": 1542970211, "creation_date": 1542970211, "answer_id": 53445258, "question_id": 53444499, "link": "https://stackoverflow.com/questions/53444499/how-to-delete-leases-from-dhcpd-conf/53445258#53445258", "title": "How to delete leases from dhcpd.conf?", "body": "<p>Based on @Kubator's <a href=\"https://stackoverflow.com/a/53445040/900078\">awk answer</a>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code># perl -lnse '$f = 0 if /^lease/; $f = 1 if /^lease $ip [{]/; print if not $f;' \\\n       -- -ip=192.168.234.2 leases\nlease 192.168.234.5 {\n  starts 3 2018/11/21 18:53:11;\n  ends 3 2018/11/21 18:54:11;\n  tstp 3 2018/11/21 18:54:11;\n  cltt 3 2018/11/21 18:53:11;\n  binding state free;\n  hardware ethernet 14:99:e2:04:52:5c;\n  uid \"\\001\\024\\231\\342\\004R\\\\\";\n}\nlease 192.168.234.13 {\n  starts 3 2018/11/21 21:38:16;\n  ends 3 2018/11/21 21:38:27;\n  tstp 3 2018/11/21 21:38:27;\n  cltt 3 2018/11/21 21:38:16;\n  binding state free;\n  hardware ethernet 00:e0:6f:11:7f:59;\n  uid \"\\001\\000\\340o\\021\\177Y\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "is_accepted": false, "score": 1, "last_activity_date": 1542980370, "last_edit_date": 1542980370, "creation_date": 1542976316, "answer_id": 53446782, "question_id": 53444499, "link": "https://stackoverflow.com/questions/53444499/how-to-delete-leases-from-dhcpd-conf/53446782#53446782", "title": "How to delete leases from dhcpd.conf?", "body": "<p><code>gawk</code> comes with multi character record delimiters:</p>\n\n<pre><code>gawk -v ip=\"${ip}\" 'BEGIN{RS=ORS=\"}\\n\"} $0 !~ ip' dhcp.leases\n</code></pre>\n\n<p>We split the input file into records delimited by <code>}\\n</code>. It is safe to do so because the input file is auto-generated by the dhcp server and guaranteed to be free of newlines and other garbage.</p>\n\n<p>Having that, we can just print those records which do not match the ip.</p>\n\n<hr>\n\n<p>PS: If you are willing to accept an additional empty newline, which doesn't hurt and only happens in case the first record gets deleted, you can use a portable POSIX <code>awk</code> command:</p>\n\n<pre><code>awk -v ip=\"${ip}\" 'BEGIN{RS=ORS=\"}\"} $0 !~ ip' dhcp.leases\n</code></pre>\n\n<p>Note: POSIX defines <code>RS</code> as a single char.</p>\n"}, {"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1543006187, "last_edit_date": 1543006187, "creation_date": 1543005820, "answer_id": 53452746, "question_id": 53444499, "link": "https://stackoverflow.com/questions/53444499/how-to-delete-leases-from-dhcpd-conf/53452746#53452746", "title": "How to delete leases from dhcpd.conf?", "body": "<p>Your data has a regular structure. In such cases I always use the <code>...</code> (range) operator:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $ip    = \"192.168.234.13\";\nmy $regex = qr,^lease \\Q${ip}\\E \\{$,;\nwhile (&lt;DATA&gt;) {\n    if (/$regex/.../^\\}/) {\n    # inside lease\n    print \"MATCHED $_\";\n    } else {\n    print \"OTHER   $_\";\n    }\n}\n\n__DATA__\nlease 192.168.234.5 {\n  starts 3 2018/11/21 18:53:11;\n  ends 3 2018/11/21 18:54:11;\n  tstp 3 2018/11/21 18:54:11;\n  cltt 3 2018/11/21 18:53:11;\n  binding state free;\n  hardware ethernet 14:99:e2:04:52:5c;\n  uid \"\\001\\024\\231\\342\\004R\\\\\";\n}\nlease 192.168.234.13 {\n  starts 3 2018/11/21 21:38:16;\n  ends 3 2018/11/21 21:38:27;\n  tstp 3 2018/11/21 21:38:27;\n  cltt 3 2018/11/21 21:38:16;\n  binding state free;\n  hardware ethernet 00:e0:6f:11:7f:59;\n  uid \"\\001\\000\\340o\\021\\177Y\";\n}\n</code></pre>\n\n<p>Example output:</p>\n\n<pre><code>OTHER   lease 192.168.234.5 {\nOTHER     starts 3 2018/11/21 18:53:11;\nOTHER     ends 3 2018/11/21 18:54:11;\nOTHER     tstp 3 2018/11/21 18:54:11;\nOTHER     cltt 3 2018/11/21 18:53:11;\nOTHER     binding state free;\nOTHER     hardware ethernet 14:99:e2:04:52:5c;\nOTHER     uid \"\\001\\024\\231\\342\\004R\\\\\";\nOTHER   }\nMATCHED lease 192.168.234.13 {\nMATCHED   starts 3 2018/11/21 21:38:16;\nMATCHED   ends 3 2018/11/21 21:38:27;\nMATCHED   tstp 3 2018/11/21 21:38:27;\nMATCHED   cltt 3 2018/11/21 21:38:16;\nMATCHED   binding state free;\nMATCHED   hardware ethernet 00:e0:6f:11:7f:59;\nMATCHED   uid \"\\001\\000\\340o\\021\\177Y\";\nMATCHED }\n</code></pre>\n\n<p>or as a one-liner:</p>\n\n<pre><code>perl -ne 'if (/^lease 192\\.168\\.234\\.13 \\{$/.../^\\}/) { print }'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1543093763, "creation_date": 1543093763, "answer_id": 53462379, "question_id": 53444499, "link": "https://stackoverflow.com/questions/53444499/how-to-delete-leases-from-dhcpd-conf/53462379#53462379", "title": "How to delete leases from dhcpd.conf?", "body": "<p>Problems:</p>\n\n<ul>\n<li>You are printing all or nothing. Instead, use <code>s///</code> to remove the unwanted parts, then print unconditionally (say by using <code>-p</code> instead of <code>-n</code>).</li>\n<li><code>.</code> won't match line feeds. This is fixed by using <code>/s</code>.</li>\n<li><code>-l</code> doesn't make sense with <code>-0777</code> (but it doesn't hurt either).</li>\n</ul>\n\n<p>Fixed:</p>\n\n<pre><code>perl -0777spe's/^lease \\Q$ip\\E \\{.*?^\\}\\n//sm' -- -ip=$ip dhcpd.leases\n</code></pre>\n\n<p>Additions changes:</p>\n\n<ul>\n<li>Added a couple of <code>/^/m</code> to limit where things can match to speed things up and to stop if from malfunctioning if <code>}</code> is found elsewhere.</li>\n<li>Removed the line feed that followed the <code>}</code>.</li>\n<li>Added <code>\\Q\\E</code> around <code>$ip</code> to ensure the value matches literally.</li>\n</ul>\n"}], "owner": {"reputation": 22388, "user_id": 256439, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/c4b17df9c9b2f33a96eb84f92054f708?s=128&d=identicon&r=PG", "display_name": "Sandra Schlichting", "link": "https://stackoverflow.com/users/256439/sandra-schlichting"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1267, "favorite_count": 0, "accepted_answer_id": 53445258, "answer_count": 6, "score": 1, "last_activity_date": 1543093763, "creation_date": 1542967403, "last_edit_date": 1542979283, "question_id": 53444499, "link": "https://stackoverflow.com/questions/53444499/how-to-delete-leases-from-dhcpd-conf", "title": "How to delete leases from dhcpd.conf?", "body": "<p>I would like to delete leases from <code>dhcpd.conf</code> where I give the ip address to be deleted from a Bash variable. A <code>dhcpd.conf</code> example is at the button.</p>\n\n<p>However I can't even get it to print a lease I want to delete</p>\n\n<pre><code>ip=\"192.168.234.5\"; perl -0777snle 'print if /lease $ip \\{.*?\\}/' -- -ip=$ip dhcpd.leases \n</code></pre>\n\n<p>Using Perl 5.16.3</p>\n\n<p><strong>Question</strong></p>\n\n<p>Can anyone see what I am doing wrong?</p>\n\n<pre><code>lease 192.168.234.5 {\n  starts 3 2018/11/21 18:53:11;\n  ends 3 2018/11/21 18:54:11;\n  tstp 3 2018/11/21 18:54:11;\n  cltt 3 2018/11/21 18:53:11;\n  binding state free;\n  hardware ethernet 14:99:e2:04:52:5c;\n  uid \"\\001\\024\\231\\342\\004R\\\\\";\n}\nlease 192.168.234.2 {\n  starts 3 2018/11/21 20:42:48;\n  ends 3 2018/11/21 20:52:48;\n  tstp 3 2018/11/21 20:52:48;\n  cltt 3 2018/11/21 20:42:48;\n  binding state free;\n  hardware ethernet 00:21:5e:90:13:fb;\n  set MacAddress = \"00:21:5E:90:13:FB\";\n  set output = \"192.168.234.2,00:21:5E:90:13:FB,(host-decl-name n/a),5E9013FB,(dhcp-client-identifier n/a),(vendor-class-identifier n/a),(agent.remote n/a),(agent.circuit n/a)\";\n}\nlease 192.168.234.13 {\n  starts 3 2018/11/21 21:38:16;\n  ends 3 2018/11/21 21:38:27;\n  tstp 3 2018/11/21 21:38:27;\n  cltt 3 2018/11/21 21:38:16;\n  binding state free;\n  hardware ethernet 00:e0:6f:11:7f:59;\n  uid \"\\001\\000\\340o\\021\\177Y\";\n}\n</code></pre>\n"}, {"tags": ["regex", "string", "perl", "pcre"], "comments": [{"owner": {"reputation": 9344, "user_id": 5781745, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/lStUs.jpg?s=128&g=1", "display_name": "K.D\u1d00\u1d20\u026as", "link": "https://stackoverflow.com/users/5781745/k-d%e1%b4%80%e1%b4%a0%c9%aas"}, "edited": false, "score": 0, "creation_date": 1542952598, "post_id": 53441280, "comment_id": 93755515, "body": "So you are wanting to match string that only have the domain, with no forward slash at the end?"}, {"owner": {"reputation": 2522, "user_id": 7496039, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/W7LzR.jpg?s=128&g=1", "display_name": "Andreas Hunter", "link": "https://stackoverflow.com/users/7496039/andreas-hunter"}, "reply_to_user": {"reputation": 9344, "user_id": 5781745, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/lStUs.jpg?s=128&g=1", "display_name": "K.D\u1d00\u1d20\u026as", "link": "https://stackoverflow.com/users/5781745/k-d%e1%b4%80%e1%b4%a0%c9%aas"}, "edited": false, "score": 0, "creation_date": 1542952675, "post_id": 53441280, "comment_id": 93755540, "body": "@K.D\u1d00\u1d20\u026as Only domain name with or without slash"}, {"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1542952766, "post_id": 53441280, "comment_id": 93755567, "body": "Can you more clearly show which of the above 6 URLs should match, and then explain why that is the case?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1542952824, "post_id": 53441280, "comment_id": 93755589, "body": "And is this for Perl or PCRE? You&#39;ve tagged both, but they are different things"}, {"owner": {"reputation": 9344, "user_id": 5781745, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/lStUs.jpg?s=128&g=1", "display_name": "K.D\u1d00\u1d20\u026as", "link": "https://stackoverflow.com/users/5781745/k-d%e1%b4%80%e1%b4%a0%c9%aas"}, "edited": false, "score": 0, "creation_date": 1542952910, "post_id": 53441280, "comment_id": 93755611, "body": "If I understand you correctly, this should work <code>^(?:https?:\\&#47;\\&#47;)?(?:www\\.)?facebook\\.com\\&#47;?$</code>"}, {"owner": {"reputation": 2522, "user_id": 7496039, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/W7LzR.jpg?s=128&g=1", "display_name": "Andreas Hunter", "link": "https://stackoverflow.com/users/7496039/andreas-hunter"}, "reply_to_user": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1542952991, "post_id": 53441280, "comment_id": 93755633, "body": "@TimBiegeleisen The above 6 URLs should not match. I only need a domain with or without slash."}], "answers": [{"tags": [], "owner": {"reputation": 9344, "user_id": 5781745, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/lStUs.jpg?s=128&g=1", "display_name": "K.D\u1d00\u1d20\u026as", "link": "https://stackoverflow.com/users/5781745/k-d%e1%b4%80%e1%b4%a0%c9%aas"}, "is_accepted": true, "score": 1, "last_activity_date": 1542953214, "last_edit_date": 1542953214, "creation_date": 1542953021, "answer_id": 53441364, "question_id": 53441280, "link": "https://stackoverflow.com/questions/53441280/how-to-ignore-all-after-domain-zone-except-symbol/53441364#53441364", "title": "How to ignore all after domain zone except symbol &quot;/&quot;", "body": "<p>You are only wanting to match strings that contain the domain only, then you can use something like this:</p>\n\n<pre><code>^(?:https?:\\/\\/)?(?:www\\.)?facebook\\.com\\/?$\n</code></pre>\n\n<p>This will match regardless if it has the protocol (<code>http(s):\\/\\/</code>) and regardless if it contains <code>www.</code>.</p>\n\n<h2><a href=\"https://regex101.com/r/5kNnEu/1/\" rel=\"nofollow noreferrer\">See it live</a></h2>\n\n<p>Breaking down the regular expression, <code>^(?:https?:\\/\\/)?(?:www\\.)?facebook\\.com\\/?$</code></p>\n\n<ul>\n<li><code>^</code> start of string</li>\n<li><code>(?:https?:\\/\\/)?</code> a non-capturing group that will match the protocol <code>https?:\\/\\/</code>, zero or one time <code>?</code> (optional)</li>\n<li><code>(?:www\\.)?</code> non-capturing group that will match on <code>www.</code>, zero or one time <code>?</code> (optional)</li>\n<li><code>facebook\\.com</code> will match the domain</li>\n<li><code>\\/?</code> will match an optional <code>?</code> forward slash <code>\\/</code></li>\n<li><code>$</code> <strong>end of string</strong> <sub>(emphasis added)</sub> - this is what allows this to work with your requirements as this will not allow anything to match after the optional forward slash in the prior bullet.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 2, "last_activity_date": 1543003688, "creation_date": 1543003688, "answer_id": 53452429, "question_id": 53441280, "link": "https://stackoverflow.com/questions/53441280/how-to-ignore-all-after-domain-zone-except-symbol/53452429#53452429", "title": "How to ignore all after domain zone except symbol &quot;/&quot;", "body": "<p>Since this is tagged Perl, a Perl answer is to use a URI-parsing module such as <a href=\"http://metacpan.org/pod/URI\" rel=\"nofollow noreferrer\">URI</a> or <a href=\"http://metacpan.org/pod/Mojo::URL\" rel=\"nofollow noreferrer\">Mojo::URL</a>.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Mojo::URL;\nwhile (my $input = &lt;&lt;&gt;&gt;) { # or whatever way the input comes in\n  chomp $input;\n  my $url = Mojo::URL-&gt;new($input);\n  next unless !defined $url-&gt;scheme or $url-&gt;scheme eq 'http' or $url-&gt;scheme eq 'https';\n  next unless defined $url-&gt;host and ($url-&gt;host eq 'facebook.com' or $url-&gt;host eq 'www.facebook.com');\n  next if length $url-&gt;path and $url-&gt;path ne '/';\n  print \"$input\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 2522, "user_id": 7496039, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/W7LzR.jpg?s=128&g=1", "display_name": "Andreas Hunter", "link": "https://stackoverflow.com/users/7496039/andreas-hunter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 53441364, "answer_count": 2, "score": 1, "last_activity_date": 1543003688, "creation_date": 1542952420, "question_id": 53441280, "link": "https://stackoverflow.com/questions/53441280/how-to-ignore-all-after-domain-zone-except-symbol", "title": "How to ignore all after domain zone except symbol &quot;/&quot;", "body": "<p>I have regex for match domain with username:</p>\n\n<pre><code>/(?:https:\\/\\/)?(?:http:\\/\\/)?(?:www\\.)?(?:facebook)\\.com\\/(\\w+(?:\\.\\w+)*)$/\n</code></pre>\n\n<p>This regex match example URLs:</p>\n\n<pre><code>facebook.com/username\nwww.facebook.com/username\nhttp://facebook.com/username\nhttp://www.facebook.com/username\nhttps://facebook.com/username\nhttps://www.facebook.com/username\n</code></pre>\n\n<p>How change this regex for match only URLs with domain zone and non required symbol <code>/</code>:</p>\n\n<pre><code>facebook.com\nfacebook.com/\n.....................\nhttps://facebook.com/\nhttps://www.facebook.com\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 159, "user_id": 5054721, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-iwHEupbxgnY/AAAAAAAAAAI/AAAAAAAAABQ/sOm1sDuAsy0/photo.jpg?sz=128", "display_name": "James Cobban", "link": "https://stackoverflow.com/users/5054721/james-cobban"}, "is_accepted": false, "score": 2, "last_activity_date": 1542939396, "creation_date": 1542939396, "answer_id": 53439907, "question_id": 53439876, "link": "https://stackoverflow.com/questions/53439876/how-do-i-get-perl-to-replace-strtolowervalue-with-strtolowersubstrvalue-0/53439907#53439907", "title": "How do I get perl to replace strtolower($value) with strtolower(substr($value, 0, 2))", "body": "<p>I have obviously been spending too much time using VIM.  The problem with my code was that I needed to escape the round brackets so they were not interpreted as a subpattern.</p>\n\n<pre><code>    $line       =~ s/strtolower\\(.value\\)/strtolower(substr(\\$value,0,2))/;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "is_accepted": false, "score": 0, "last_activity_date": 1543123464, "creation_date": 1543123464, "answer_id": 53464891, "question_id": 53439876, "link": "https://stackoverflow.com/questions/53439876/how-do-i-get-perl-to-replace-strtolowervalue-with-strtolowersubstrvalue-0/53464891#53464891", "title": "How do I get perl to replace strtolower($value) with strtolower(substr($value, 0, 2))", "body": "<p>Just want to show some hacks, maybe it will be interesting for you:</p>\n\n<pre><code>s'strtolower\\(\\K\\$value'substr($value,0,2)'\n</code></pre>\n\n<p>We can quote substitution with whatever we want:</p>\n\n<pre><code>s/foo/bar/;\ns'foo'bar';\ns(foo)(bar);\n</code></pre>\n\n<p>If we choose single quotes, variables will not be interpolated, but we still have to escape dollar sign in pattern side, because it will be treated as \"end of line\" by re engine.</p>\n\n<p><code>\\K</code> Keep the stuff left of the <code>\\K</code></p>\n\n<p>more information in <code>perldoc perlre</code></p>\n"}], "owner": {"reputation": 159, "user_id": 5054721, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-iwHEupbxgnY/AAAAAAAAAAI/AAAAAAAAABQ/sOm1sDuAsy0/photo.jpg?sz=128", "display_name": "James Cobban", "link": "https://stackoverflow.com/users/5054721/james-cobban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1543123464, "creation_date": 1542938958, "question_id": 53439876, "link": "https://stackoverflow.com/questions/53439876/how-do-i-get-perl-to-replace-strtolowervalue-with-strtolowersubstrvalue-0", "title": "How do I get perl to replace strtolower($value) with strtolower(substr($value, 0, 2))", "body": "<p>I have several hundred PHP scripts that expect a language field to contain an ISO 639-1 2-character identifier. for example \"en\", which I now want to modify to support language codes qualified by country code, for example \"fr-CA\".  In each of these scripts there is the following code:</p>\n\n<pre><code>    case 'lang':\n    {       // language code\n        if (strlen($value) == 2)\n            $lang   = strtolower($value);\n        break;\n    }       // language code\n</code></pre>\n\n<p>which I want to modify to:</p>\n\n<pre><code>    case 'lang':\n    {       // language code\n        if (strlen($value) &gt;= 2)\n            $lang   = strtolower(substr($value,0,2));\n        break;\n    }       // language code\n</code></pre>\n\n<p>So I wrote a perl script to run over the entire directory tree and modify all of the matching scripts. For testing I have set the script up to create all of the modified scripts in a new directory structure:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nuse File::Find;\nuse File::Slurp;\n\nmy @content;\nfind( \\&amp;wanted, '/home/jcobban/public_html/');\n\nexit;\n\nsub wanted {\n    if (-f)\n    {\n        print \"wanted: \",  $File::Find::name, \"\\n\";\n        my $odir    = '/home/jcobban/testlang' . substr($File::Find::dir, 25);\n        if ((substr $odir, -1) ne \"/\"){\n            $odir   = \"$odir/\";\n        }\n        if (! -d $odir){\n            mkdir $odir;\n        }\n        print \"odir '$odir'\\n\";\n        my @lines   = read_file($File::Find::name);\n        my $caselang    = 0;\n        my $updated = 0;\n        foreach my $line (@lines){\n            if ($line =~ /\\bcase\\b/)\n            {\n                $caselang   = $line =~ /\\blang\\b/i;\n            }\n\n            if ($line =~ /\\bbreak\\b/)\n            {\n                $caselang   = 0;\n            }\n\n            if ($caselang)\n            {\n                print \"old $line\\n\";\n                $line       =~ s/ == 2/ &gt;= 2/;\n                $line       =~ s/strtolower(.value)/strtolower(substr(\\$value,0,2))/;\n                $updated    = 1;\n                print \"new $line\\n\";\n            }\n        }\n\n        if ($updated)\n        {\n            # my $newfile   = $File::Find::dir . \"/\" . $_;\n            my $newfile     = $odir . $_;\n            print \"alter \\$lang to support ll-CC $newfile\\n\";\n            write_file($newfile, @lines);\n        }\n        else\n        {\n            print \"did not find lang support in $_\\n\";\n        }\n\n    }\n    return;\n}\n</code></pre>\n\n<p>The first match replace works, to change the == to >=, but the second match replace does not modify any lines and I do not understand well.  I thought maybe there was a problem with matching to \"\\$\" so I replaced it with \".\" but still no lines are changed.  I applied the same command to other regex engines and they all worked.  The output for a typical file is:</p>\n\n<pre><code>wanted: /home/jcobban/public_html/videoTutorials.php\nodir '/home/jcobban/testlang/'\nold         case 'lang':\nnew         case 'lang':\nold         {\nnew         {\nold             if (strlen($value) == 2)\nnew             if (strlen($value) &gt;= 2)\nold                 $lang       = strtolower($value);\nnew                 $lang       = strtolower($value);\nalter $lang to support ll-CC /home/jcobban/testlang/videoTutorials.php\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 1053, "user_id": 7885081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CZvVb.png?s=128&g=1", "display_name": "Jose Fernando Lopez Fernandez", "link": "https://stackoverflow.com/users/7885081/jose-fernando-lopez-fernandez"}, "edited": false, "score": 0, "creation_date": 1542919151, "post_id": 53437628, "comment_id": 93749154, "body": "Wow, I cannot believe I missed that. Thanks a lot, I appreciate it"}], "tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": true, "score": 3, "last_activity_date": 1542918255, "creation_date": 1542918255, "answer_id": 53437628, "question_id": 53437406, "link": "https://stackoverflow.com/questions/53437406/perl-passing-function-as-an-argument-undefined-sub-reference/53437628#53437628", "title": "Perl Passing Function as an Argument - Undefined Sub Reference", "body": "<p>The SolveTowerOfHanoiProblem function expects a code ref as last (fifth) argument, but you are not passing it when you invoke it in your \u00ab\u00a0else\u00a0\u00bb block :</p>\n\n<pre><code>SolveTowerOfHanoiProblem($n - 1, $start, $extra, $end);\n</code></pre>\n\n<p>Should be written as :</p>\n\n<pre><code>SolveTowerOfHanoiProblem($n - 1, $start, $extra, $end, $moveDisk);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1053, "user_id": 7885081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CZvVb.png?s=128&g=1", "display_name": "Jose Fernando Lopez Fernandez", "link": "https://stackoverflow.com/users/7885081/jose-fernando-lopez-fernandez"}, "edited": false, "score": 0, "creation_date": 1543033629, "post_id": 53441102, "comment_id": 93782753, "body": "Wow, I hadn&#39;t come across nested subroutines like this, thanks for the heads up"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1053, "user_id": 7885081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CZvVb.png?s=128&g=1", "display_name": "Jose Fernando Lopez Fernandez", "link": "https://stackoverflow.com/users/7885081/jose-fernando-lopez-fernandez"}, "edited": false, "score": 1, "creation_date": 1543033790, "post_id": 53441102, "comment_id": 93782775, "body": "Just don&#39;t nest named subs"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1543039362, "last_edit_date": 1543039362, "creation_date": 1542951155, "answer_id": 53441102, "question_id": 53437406, "link": "https://stackoverflow.com/questions/53437406/perl-passing-function-as-an-argument-undefined-sub-reference/53441102#53441102", "title": "Perl Passing Function as an Argument - Undefined Sub Reference", "body": "<p>You are passing the code ref to the original call to <code>SolveTowerOfHanoiProblem</code>, but not to the recursive calls.</p>\n\n<p>You could simply pass the code ref.</p>\n\n<pre><code>SolveTowerOfHanoiProblem($n - 1, ..., $moveDisk);\n</code></pre>\n\n<p>Or could remove the need to pass the same value over and over again.</p>\n\n<pre><code>sub SolveTowerOfHanoiProblem {\n    my $moveDisk = pop;\n\n    local *helper = sub {\n        my ($n, $start, $end, $extra) = @_;\n\n        if ($n == 1) {\n            $moveDisk-&gt;($n, $start, $end);\n        } else {\n            helper($n - 1, $start, $extra, $end);\n            $moveDisk-&gt;($n, $start, $end);\n            helper($n - 1, $extra, $end, $start);\n        }\n    };\n\n    helper(@_);\n}\n</code></pre>\n\n<p>Same, but using a feature introduced in Perl 5.16:</p>\n\n<pre><code>use feature qw( current_sub );\n\nsub SolveTowerOfHanoiProblem {\n    my $moveDisk = pop;\n\n    sub {\n        my ($n, $start, $end, $extra) = @_;\n\n        if ($n == 1) {\n            $moveDisk-&gt;($n, $start, $end);\n        } else {\n            __SUB__-&gt;($n - 1, $start, $extra, $end);\n            $moveDisk-&gt;($n, $start, $end);\n            __SUB__-&gt;($n - 1, $extra, $end, $start);\n        }\n    }-&gt;(@_);\n}\n</code></pre>\n"}], "owner": {"reputation": 1053, "user_id": 7885081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CZvVb.png?s=128&g=1", "display_name": "Jose Fernando Lopez Fernandez", "link": "https://stackoverflow.com/users/7885081/jose-fernando-lopez-fernandez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 53437628, "answer_count": 2, "score": 0, "last_activity_date": 1543039362, "creation_date": 1542916857, "question_id": 53437406, "link": "https://stackoverflow.com/questions/53437406/perl-passing-function-as-an-argument-undefined-sub-reference", "title": "Perl Passing Function as an Argument - Undefined Sub Reference", "body": "<p>I'm reading the book \"Higher Order Perl\" by Mark Jason Dominus and I'm stuck on one of the first examples. It revolves around solving the Tower of Hanoi problem recursively, which my program does fine. The problem is, the book develops the example by refactoring the code, where rather than simply printing what the solution is doing, the solution function takes another parameter. This is a function that in my case simply does the same thing.</p>\n\n<p>The problem is, I have defined my auxiliary function and I've attempted to pass it by reference, and then call it from the main function, but I am getting the following error.</p>\n\n<blockquote>\n  <p>Can't use an undefined value as a subroutine reference at main.pl line 86.</p>\n</blockquote>\n\n<p>This version does not take a function as an argument and correctly solves the problem.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse utf8;\nuse v5.26;\n\nuse strict;\nuse warnings;\n\nsub SolveTowerOfHanoiProblem0 {\n    my ($n, $start, $end, $extra) = @_;\n\n    if ($n == 1) {\n        say \"Move disk #$n from $start to $end.\";\n    } else {\n        SolveTowerOfHanoiProblem0($n - 1, $start, $extra, $end);\n\n        say \"Move disk #$n from $start to $end.\";\n\n        SolveTowerOfHanoiProblem0($n - 1, $extra, $end, $start);\n    }\n}\n\nSolveTowerOfHanoiProblem0(3, 'A', 'C', 'B');\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Move disk #1 from A to C.\nMove disk #2 from A to B.\nMove disk #1 from C to B.\nMove disk #3 from A to C.\nMove disk #1 from B to A.\nMove disk #2 from B to C.\nMove disk #1 from A to C.\n</code></pre>\n\n<p>I want to refactor the code to have the line that outputs what is happening in each step to be independent of the solution code, so for the time being I wrote another function that simply does the same thing, but is passed as an argument by the caller:</p>\n\n<pre><code>sub SolveTowerOfHanoiProblem {\n    my ($n, $start, $end, $extra, $moveDisk) = @_;\n\n    if ($n == 1) {\n        $moveDisk-&gt;($n, $start, $end);\n    } else {\n        SolveTowerOfHanoiProblem($n - 1, $start, $extra, $end);\n\n        $moveDisk-&gt;($n, $start, $end);\n\n        SolveTowerOfHanoiProblem($n - 1, $extra, $end, $start);\n    }\n}\n\nsub PrintInstruction {\n    my ($disk, $start, $end) = @_;\n\n    say \"Move disk #$disk from $start to $end.\";\n}\n\n\nSolveTowerOfHanoiProblem(8, 'A', 'C', 'B', \\&amp;PrintInstruction);\n</code></pre>\n\n<p>I am getting the following runtime error: <code>Can't use an undefined value as a subroutine reference at main.pl line 86</code>. This is where I call the passed-in function for the first time.</p>\n\n<p>Line 86:</p>\n\n<pre><code>if ($n == 1) {\n        $moveDisk-&gt;($n, $start, $end); # &lt;---- Here, Line 86\n    } else {\n        SolveTowerOfHanoiProblem($n - 1, $start, $extra, $end);\n\n        $moveDisk-&gt;($n, $start, $end);\n</code></pre>\n\n<p>I don't understand why the sub reference would be undefined. I've defined the function I'm referencing, and from what I've found so far (<a href=\"https://www.perlmonks.org/?node_id=1036152\" rel=\"nofollow noreferrer\">PerlMonks - Call subroutine by reference ?</a>) I seem to be calling the function correctly.</p>\n\n<p>I've looked at <a href=\"https://stackoverflow.com/questions/2585273/how-can-i-take-a-reference-to-a-perl-subroutine\">this question</a> as well, but my <code>PrintInstruction</code> function isn't defined in a module, it's defined locally, so if I understand correctly I don't need the <code>$</code> symbol in the reference.</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["regex", "perl", "regex-group"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1542906710, "post_id": 53435437, "comment_id": 93745049, "body": "Your regex syntax is completely wrong. This can&#39;t work. Your named capture groups are wrong. It should be <code>(&lt;?name&gt;[a-z]+)</code>, not <code>[(&lt;?name&gt;)[a-z]+</code>"}, {"owner": {"reputation": 13, "user_id": 3938300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c71337aee6b162f587725acf6727244?s=128&d=identicon&r=PG&f=1", "display_name": "Ramesh Rajan", "link": "https://stackoverflow.com/users/3938300/ramesh-rajan"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1542907533, "post_id": 53435437, "comment_id": 93745380, "body": "&quot;[ ]&quot; were added as i copied from an online parser. but the intent was (&lt;?cpature-group&gt;[a-z]+)"}, {"owner": {"reputation": 8567, "user_id": 188691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b008c9884164fc36f772c8aa2a87bd4?s=128&d=identicon&r=PG", "display_name": "Tim", "link": "https://stackoverflow.com/users/188691/tim"}, "edited": false, "score": 0, "creation_date": 1542915214, "post_id": 53435437, "comment_id": 93748016, "body": "What happens when the day of the month has only a single digit?"}], "answers": [{"tags": [], "owner": {"reputation": 8567, "user_id": 188691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b008c9884164fc36f772c8aa2a87bd4?s=128&d=identicon&r=PG", "display_name": "Tim", "link": "https://stackoverflow.com/users/188691/tim"}, "is_accepted": true, "score": 0, "last_activity_date": 1542916437, "last_edit_date": 1542916437, "creation_date": 1542916067, "answer_id": 53437284, "question_id": 53435437, "link": "https://stackoverflow.com/questions/53435437/parsing-a-syslog-using-regex/53437284#53437284", "title": "Parsing a syslog using Regex", "body": "<p>Here's my revisions, with comments. In general, you might be better off making fewer assumptions about what the fields are going to contain. Here I'm using <code>\\S</code> which is \"anything except whitespace\". Furthermore, <code>\\s+</code> will match some whitespace, whether that's just one character or more.</p>\n\n<pre><code>(&lt;?month&gt;\\S+)                    #\n\\s+                              # added + because single digit dates might have additional spaces\n(&lt;?date&gt;[0-9]{1,2})              # changed {2}? to {1,2} because you might have one or two digits\n\\s+                              #\n(&lt;?time&gt;[0-9]+:[0-9]+:[0-9]+)    #   \n\\s+                              #\n(&lt;?hostname&gt;\\S+)                 # anything which isn't whitespace\n\\s+                              #\n(&lt;?daemon&gt;\\S+)                   # just in case your daemon has a digit or lower case in its name\n(&lt;?pid&gt;\\[[0-9]+\\])               #\n:                                #\n\\s+                              #\n\\((&lt;?user&gt;\\S+)\\)                 # your username might have digits in it; don't capture the brackets\n\\s+                              #\nCMD                              #\n\\s+                              #\n\\((&lt;?command&gt;.*)\\)               # capture the command, not the brackets\n\\s*                              # in case of trailing space\n$                                # match end of string\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 3938300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c71337aee6b162f587725acf6727244?s=128&d=identicon&r=PG&f=1", "display_name": "Ramesh Rajan", "link": "https://stackoverflow.com/users/3938300/ramesh-rajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2060, "favorite_count": 0, "accepted_answer_id": 53437284, "answer_count": 1, "score": -1, "last_activity_date": 1542951066, "creation_date": 1542905717, "last_edit_date": 1542951066, "question_id": 53435437, "link": "https://stackoverflow.com/questions/53435437/parsing-a-syslog-using-regex", "title": "Parsing a syslog using Regex", "body": "<p>I am writing a Regex to parse a syslog entry. I am having challenges to able parse the entry until i hit \"CMD\". I would like all that appears after CMD to be grouped under (). Also, can you please provide suggestions to improve the regex</p>\n\n<p>Here is my syslog entry:</p>\n\n<blockquote>\n  <p>Nov 21 23:17:01 ubuntu-xenial CRON[10299]: (root) CMD (   cd / &amp;&amp; run-parts --report /etc/cron.hourly)</p>\n</blockquote>\n\n<pre><code>(&lt;?month&gt;[A-z]{3})\\s(&lt;?date&gt;[0-9]{2}?)\\s(&lt;?time&gt;[0-9]+:[0-9]+:[0-9]+)\\s(&lt;?hostname&gt;[a-z]+-[a-z]+)\\s(&lt;?daemon&gt;[A-Z]+)(&lt;?pid&gt;\\[[0-9]+\\]):\\s(&lt;?user&gt;\\([a-z]+\\))\n</code></pre>\n"}, {"tags": ["perl", "date"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 2742088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf1fe5d8954c457cad6aafd3621f7cf?s=128&d=identicon&r=PG&f=1", "display_name": "Kareem Hamed", "link": "https://stackoverflow.com/users/2742088/kareem-hamed"}, "edited": false, "score": 0, "creation_date": 1542973114, "post_id": 53438259, "comment_id": 93764760, "body": "Thanks fort the feedback, the output really matches for the result but it returns many trues along with each file name, i need only one true if there&#39;s one file match and one false if no file matches"}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "reply_to_user": {"reputation": 21, "user_id": 2742088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf1fe5d8954c457cad6aafd3621f7cf?s=128&d=identicon&r=PG&f=1", "display_name": "Kareem Hamed", "link": "https://stackoverflow.com/users/2742088/kareem-hamed"}, "edited": false, "score": 0, "creation_date": 1543053178, "post_id": 53438259, "comment_id": 93785972, "body": "@Kareem ok I edited the answer to produce the desired output"}], "tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 1, "last_activity_date": 1543053096, "last_edit_date": 1543053096, "creation_date": 1542922813, "answer_id": 53438259, "question_id": 53434758, "link": "https://stackoverflow.com/questions/53434758/match-for-todays-date-doesnt-match-correctly/53438259#53438259", "title": "Match for today&#39;s date doesn&#39;t match correctly", "body": "<p>As commented by toolic, when you are already removing non-matching files here :</p>\n\n<pre><code>@files = grep (/$datestring/,readdir(DIR));\n</code></pre>\n\n<p>Hence your <code>for</code> loop will never see non-matching files.</p>\n\n<p>Here are a few other comments on your code :</p>\n\n<ul>\n<li><p>always <code>use strict</code> and <code>use warnings</code> (there are several variables in your code snippet which are not properly declared)</p></li>\n<li><p>always check the return code of system calls such as <code>opendir</code></p></li>\n<li><p>you can use the smartmatch operator in boolean context instead of assigning to the <code>$count</code> variable</p></li>\n<li><p>you don't need to use parentheses around argument to the built-in <code>print</code> function</p></li>\n</ul>\n\n<p>Here is a cleaner version of your code :</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\nuse POSIX qw(strftime);\n\nmy $datestring = strftime \"%Y%m%d\", localtime;\nopendir(DIR, 'C:\\Perl') or die \"cannot open dir : $!\";\nmy @files = readdir(DIR);\nclosedir(DIR);\n\nforeach my $file (@files) {\n    if ($file =~ /$datestring/) {\n        print \"TRUE\\n\";\n    } else {\n        print \"FALSE\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "is_accepted": false, "score": 1, "last_activity_date": 1542996136, "creation_date": 1542996136, "answer_id": 53451195, "question_id": 53434758, "link": "https://stackoverflow.com/questions/53434758/match-for-todays-date-doesnt-match-correctly/53451195#53451195", "title": "Match for today&#39;s date doesn&#39;t match correctly", "body": "<p>You can use <code>@files</code> in scalar context to tell if <code>grep</code> returned any matches from <code>readdir</code>. In scalar context, <code>@files</code> is the number of elements in the array. </p>\n\n<pre><code>@files = grep (/$datestring/,readdir(DIR));\n# this is more commonly written\n#   @files = grep {/$datestring/} readdir(DIR);   \n\nprint @files &gt; 0 ? \"TRUE\" : \"FALSE\";\n# or\nprint scalar(@files).\" files matched $datestring\";\n</code></pre>\n\n<p>See also <a href=\"https://perldoc.perl.org/List/Util.html\" rel=\"nofollow noreferrer\">List::Util</a>.</p>\n\n<pre><code>use v5.10;    \nuse List::Util qw&lt;all any none&gt;;\n###\n@files = readdir(DIR);\nsay 'all match' if all {/$datestring/} @files;\nsay 'at least one match' if any {/$datestring/} @files;\nsay 'no matches' if none {/$datestring/} @files;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 2742088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf1fe5d8954c457cad6aafd3621f7cf?s=128&d=identicon&r=PG&f=1", "display_name": "Kareem Hamed", "link": "https://stackoverflow.com/users/2742088/kareem-hamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1543053096, "creation_date": 1542903006, "last_edit_date": 1542903572, "question_id": 53434758, "link": "https://stackoverflow.com/questions/53434758/match-for-todays-date-doesnt-match-correctly", "title": "Match for today&#39;s date doesn&#39;t match correctly", "body": "<p>i'm writing a basic Perl script to check if there're files in certain directories their names contain today's date, the script works fine when there are files in the directory and returns TRUE, but doesn't return FALSE when no files withe the given criteria exist</p>\n\n<p>the script is as below:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse POSIX qw(strftime);\nmy $datestring = strftime \"%Y%m%d\", localtime;\nopendir(DIR, 'C:\\Perl');\n@files = grep (/$datestring/,readdir(DIR));\nclosedir(DIR);\nforeach $file (@files) {\n    my $count = () = $file =~ /$datestring/;\n    if ($count &gt; 0) {\n        print (\"TRUE\");\n    }\n    else \n    {\n        print (\"FALSE\");\n    }\n}\n</code></pre>\n\n<p>the files names are like</p>\n\n<pre><code>export_opportunities_20181111-040005_20181124-040010.csv\nexport_opportunities_20181111-040005_20181122-040010.csv\n</code></pre>\n"}, {"tags": ["arrays", "perl", "foreach", "grep"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1542901530, "post_id": 53434323, "comment_id": 93742468, "body": "<code>foreach</code> and <code>grep</code> both clobber <code>$_</code>. And if you re-assign <code>@big</code> on every iteration, your code probably isn&#39;t doing what you want anyway!"}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1542906280, "post_id": 53434323, "comment_id": 93744849, "body": "@MattJacob why not? it deletes one element at every iteration over <code>@del</code> (or more, if more elements are matching). it might not be the fastest solution, but it&#39;s correct"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 1, "creation_date": 1542909912, "post_id": 53434323, "comment_id": 93746269, "body": "@tinita Oops, you&#39;re right. That&#39;s what I get for browsing SO and trying to cook for Thanksgiving at the same time."}], "answers": [{"comments": [{"owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "edited": false, "score": 0, "creation_date": 1542968491, "post_id": 53434574, "comment_id": 93762469, "body": "Thanks! If I had a look at the foreach or grep docs I would have avoid to use <code>$_</code>. The advantage to put the question on SO is that you suggest to do this task in another way. What do you mean with <i>build a single pattern for</i>? Is that a regular expression which match all elements of <code>@del</code>? For exampe, <code>$del = &#39;2|4&#39;</code> and then: <code>@big = grep { ! &#47;$del&#47; } @big;</code>. This is a good idea and so simple. It is embarassing not to get it myself. Interesting would be how to cope if putting in a pattern is not possible."}], "tags": [], "owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "is_accepted": true, "score": 2, "last_activity_date": 1542902227, "creation_date": 1542902227, "answer_id": 53434574, "question_id": 53434323, "link": "https://stackoverflow.com/questions/53434323/perl-grep-in-foreach-does-not-work-with-but-was-with-variable/53434574#53434574", "title": "Perl - grep in foreach does not work with $_ but was with variable", "body": "<p>As @MattJacob points out, there are two conflicting uses for <code>$_</code>:</p>\n\n<pre><code>foreach (@del) {...}\n</code></pre>\n\n<p>This implicitly uses <code>$_</code> as the loop variable. From the <a href=\"http://perldoc.perl.org/perlsyn.html#Foreach-Loops\" rel=\"nofollow noreferrer\">foreach</a> docs:</p>\n\n<blockquote>\n  <p>The foreach keyword is actually a synonym for the for keyword, so you can use either. If VAR is omitted, $_ is set to each value. </p>\n</blockquote>\n\n<p>Your <code>grep</code> command also uses <code>$_</code>, <strong>always</strong>, as part of its processing. So if you had a value in <code>$_</code> as part of your <code>foreach</code>, and it was replaced in the <code>grep</code> ...?</p>\n\n<p>From the <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\">grep</a> docs:</p>\n\n<blockquote>\n  <p>Evaluates the BLOCK or EXPR for each element of LIST (locally setting $_ to each element) </p>\n</blockquote>\n\n<p>Please do check the grep docs, since there is an explicit warning about modifying a list that you are iterating over. If you are trying to iteratively shrink the list, you might consider some alternative ways to process it. (For example, could you build a single pattern for <code>grep</code> that would combine all the values in your <code>@del</code> list, and just process the <code>@big</code> list one time? This might be quicker, too.)</p>\n"}], "owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 53434574, "answer_count": 1, "score": 0, "last_activity_date": 1542902227, "creation_date": 1542901280, "question_id": 53434323, "link": "https://stackoverflow.com/questions/53434323/perl-grep-in-foreach-does-not-work-with-but-was-with-variable", "title": "Perl - grep in foreach does not work with $_ but was with variable", "body": "<p>I want to delete some defined elements from a array. I already have a solution with <code>grep</code> and one element: <code>@big = grep { ! /3/ } @big</code>. In case of several elements I want to put them in an array and using foreach. <code>@big</code> is the array from which I want delete elements from <code>@del</code>:</p>\n\n<pre><code>perl -e \"@big = (1,2,3,4,5); @del = (2,4); \n      foreach $i (@del) {@big = grep { ! /$i/ } @big; print \\\"@big\\n\\\"}\"\n</code></pre>\n\n<p>Here is the output:</p>\n\n<pre><code>1 3 4 5\n1 3 5\n</code></pre>\n\n<p>This works fine for me. If I want to use default variable <code>$_</code> it does not work:</p>\n\n<pre><code>perl -e \"@big = (1,2,3,4,5); @del = (2,4); \n      foreach (@del) {@big = grep { ! /$_/ } @big; print \\\"@big\\n\\\"}\"\n</code></pre>\n\n<p>This gives no output. Any idea what happens?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1542900908, "post_id": 53434203, "comment_id": 93742145, "body": "What does <i>Funx</i> stand for? It&#39;s a good idea to use descriptive names for things. Also, why is <code>use strict</code> commented out?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1542901469, "post_id": 53434203, "comment_id": 93742441, "body": "Export a function that returns a hash? Or just export a hash directly?"}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 1, "creation_date": 1542901560, "post_id": 53434203, "comment_id": 93742484, "body": "My 2 cents: call the package <code>Err</code>, and don&#39;t export. Then you can use <code>return $Err::OPENFAIL;</code> which is, IMO, clearer anyway."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1543003110, "post_id": 53435542, "comment_id": 93777172, "body": "Please don&#39;t seriously suggest source filters for anything more than trivial oneliners..."}], "tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": false, "score": 1, "last_activity_date": 1542906200, "creation_date": 1542906200, "answer_id": 53435542, "question_id": 53434203, "link": "https://stackoverflow.com/questions/53434203/can-i-condense-my-export-routine-in-my-perl-package/53435542#53435542", "title": "Can I condense my export routine in my Perl package?", "body": "<p>You can use <a href=\"https://perldoc.perl.org/perlfilter.html\" rel=\"nofollow noreferrer\">source filter</a> to add some custom preprocessing.</p>\n\n<p>Example:</p>\n\n<pre><code>package MyExport;\n\nuse Filter::Util::Call;\n\nsub import {\n    my ($type) = @_;\n    my ($ref) = [];\n    filter_add(bless $ref);\n}\n\nsub filter {\n    my ($self) = @_;\n    my ($status);\n\n    if (($status = filter_read()) &gt; 0) {\n        s/^(.*)\\s+export\\s+(\\S+)(.*)$/push \\@EXPORT, '$2'; $1 $2 $3/;\n    }\n\n    $status;\n}\n\n1;\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>...\nuse MyExport;\nuse Exporter;\nour @ISA    = 'Exporter';\nour @EXPORT;\n...\nour export $SUCCESS = 0;\n...\n</code></pre>\n\n<p>Note that this implementation may be buggy. Basically <code>s/^(.*)\\s+export\\s+(\\S+)(.*)$/push \\@EXPORT, '$2'; $1 $2 $3/;</code> regexp turns lines like</p>\n\n<pre><code>our export $SUCCESS = 0;\n</code></pre>\n\n<p>into</p>\n\n<pre><code>push @EXPORT, '$SUCCESS'; our $SUCCESS = 0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1542952344, "last_edit_date": 1542952344, "creation_date": 1542951753, "answer_id": 53441184, "question_id": 53434203, "link": "https://stackoverflow.com/questions/53434203/can-i-condense-my-export-routine-in-my-perl-package/53441184#53441184", "title": "Can I condense my export routine in my Perl package?", "body": "<p>If you used constants instead of variables,</p>\n\n<pre><code>package Funx;\n\nuse strict;\nuse warnings;\n\nuse constant qw( );\nuse Exporter qw( import );\n\nBEGIN {\n    my %error_codes = (\n        FUNX_SUCCESS      =&gt;   0,\n        FUNX_NOFILE       =&gt;   1,\n        FUNX_COPYFAIL     =&gt;   2,\n        FUNX_SOXFAIL      =&gt;   3,\n        FUNX_CURLFAIL     =&gt;   4,\n        FUNX_OPENFAIL     =&gt;   5,\n        FUNX_APPRUNNING   =&gt;   6,\n        FUNX_RAWDBEXIISTS =&gt;   7,\n        FUNX_DBCREATEERR  =&gt;   8,\n        FUNX_DBCONNECTERR =&gt;   9,\n        FUNX_TMPFILEERR   =&gt;  10,\n        FUNX_DBWRITEERR   =&gt;  11,\n        FUNX_INVALIDUSER  =&gt;  12,\n        FUNX_DBLOCKERR    =&gt;  13,\n        FUNX_DBUNLOCKERR  =&gt;  14,\n        FUNX_WERR         =&gt; 100,\n    );\n\n    constant-&gt;import(\\%error_codes);\n\n    my @syms = keys(%error_codes);\n    our @EXPORT_OK = \\@syms;\n    our %EXPORT_TAGS = ( ALL =&gt; \\@syms, ERROR_CODES =&gt; \\@syms );\n}\n</code></pre>\n\n<p>On top of addressing the issue you raised, the above </p>\n\n<ul>\n<li>Fixes the polluting of the user's namespace. Don't dump a bunch of symbols into other namespaces by default!</li>\n<li>Fixes the poor names that could conflict with other modules. You think you're the only module that has a code for <code>SUCCESS</code>?</li>\n<li>Fixes the polluting of your module's <code>@ISA</code>. Funx is not a subclass of Exporter.</li>\n</ul>\n\n<p>Usage:</p>\n\n<pre><code>use Funx;                                 # Imports nothing.\nuse Funx qw( );                           # Imports nothing.\nuse Funx qw( :ERROR_CODES );              # Imports error codes.\nuse Funx qw( :ALL );                      # Imports error codes.\nuse Funx qw( FUNX_SUCCESS FUNX_NOFILE );  # Imports specific error codes.\n</code></pre>\n"}], "owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1542952344, "creation_date": 1542900816, "last_edit_date": 1542900855, "question_id": 53434203, "link": "https://stackoverflow.com/questions/53434203/can-i-condense-my-export-routine-in-my-perl-package", "title": "Can I condense my export routine in my Perl package?", "body": "<p>My current Perl package export feels long (snippet below).  And yes, it's better to type all that just once in one place so my many Perl scripts can accesss it all with just:</p>\n\n<pre><code>use Funx;  \n</code></pre>\n\n<p>Still I was just hoping there would be an easy way to export everything with less typing.</p>\n\n<pre><code>package Funx;\n#use strict;\nuse warnings;\nuse DBI;\n\nuse Exporter;\nour @ISA    = 'Exporter';\nour @EXPORT = qw(pdone dbstart dbstop dbc dbcdata numnums $SUCCESS $NOFILE \n$COPYFAIL $SOXFAIL $CURLFAIL $OPENFAIL $APPRUNNING $RAWDBEXIISTS $DBCREATEERR $DBCONNECTERR $TMPFILEERR $DBWRITEERR $INVALIDUSER $DBLOCKERR $DBUNLOCKERR WERR);\n\nour $SUCCESS        =   0;\nour $NOFILE         =   1;\nour $COPYFAIL       =   2;\nour $SOXFAIL        =   3;\nour $CURLFAIL       =   4;\nour $OPENFAIL       =   5;\nour $APPRUNNING     =   6;\nour $RAWDBEXIISTS   =   7;\nour $DBCREATEERR    =   8;\nour $DBCONNECTERR   =   9;\nour $TMPFILEERR     =   10;\nour $DBWRITEERR     =   11;\nour $INVALIDUSER    =   12;\nour $DBLOCKERR      =   13;\nour $DBUNLOCKERR    =   14;\nuse constant WERR =&gt; 100;  \n</code></pre>\n"}, {"tags": ["regex", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1542896818, "post_id": 53432910, "comment_id": 93739839, "body": "Probably perl solution will be simpler: <code>perl -0pe &#39;s&#47;##.*?##\\R*&#47;&#47;gs&#39; file &gt; newfile</code> (<a href=\"https://ideone.com/sCncMA\" rel=\"nofollow noreferrer\">demo</a>)."}, {"owner": {"reputation": 1711, "user_id": 1016408, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/17131f006d6538837a453a7002dd9d56?s=128&d=identicon&r=PG&f=1", "display_name": "bukowski", "link": "https://stackoverflow.com/users/1016408/bukowski"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1542898278, "post_id": 53432910, "comment_id": 93740652, "body": "@WiktorStribi\u017cew hey your solution works the best - post your answer &amp; I&#39;ll accept it. Thanks!"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1542898556, "post_id": 53432910, "comment_id": 93740803, "body": "<a href=\"https://stackoverflow.com/a/53433537/3832970\">Posted with explanation</a>."}], "answers": [{"tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 1, "last_activity_date": 1542896821, "creation_date": 1542896821, "answer_id": 53433082, "question_id": 53432910, "link": "https://stackoverflow.com/questions/53432910/remove-everything-between-specified-characters-including-multi-lines/53433082#53433082", "title": "Remove everything between specified characters including multi lines", "body": "<p>It should be very easy task for <code>awk</code>(in case you are ok with it). Could you please try following, will add explanation shortly too.</p>\n\n<pre><code>awk '/^##.*##$/{next} /^##$/{flag=\"\";next} /^##/ &amp;&amp; !/##$/{flag=1} flag{next} 1' Input_file\n</code></pre>\n\n<p>Adding a non-one liner form of solution too now.</p>\n\n<pre><code>awk '\n/^##.*##$/{\n  next\n}\n/^##$/{\n  flag=\"\"\n  next\n}\n/^##/ &amp;&amp; !/##$/{\n  flag=1\n}\nflag{\n  next\n}\n1\n'   Input_file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2087, "user_id": 6010343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D3z4z.jpg?s=128&g=1", "display_name": "Jay jargot", "link": "https://stackoverflow.com/users/6010343/jay-jargot"}, "is_accepted": false, "score": 1, "last_activity_date": 1542903967, "last_edit_date": 1542903967, "creation_date": 1542897099, "answer_id": 53433165, "question_id": 53432910, "link": "https://stackoverflow.com/questions/53432910/remove-everything-between-specified-characters-including-multi-lines/53433165#53433165", "title": "Remove everything between specified characters including multi lines", "body": "<p>Give a try to this:</p>\n\n<pre><code>sed -n '/^##/ { :1 ; /##$/ { d } ; n ; b 1 } ; p' myfile\n</code></pre>\n\n<p>Wise men read this excellent tutorial: <a href=\"http://www.grymoire.com/Unix/Sed.html#uh-51\" rel=\"nofollow noreferrer\">Sed - An Introduction and Tutorial by Bruce Barnett</a></p>\n\n<p>The test:</p>\n\n<pre><code>sed -n '/^##/ { :1 ; /##$/ { d } ; n ; b 1 } ; p' myfile\n\nhello world\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1542898425, "creation_date": 1542898425, "answer_id": 53433537, "question_id": 53432910, "link": "https://stackoverflow.com/questions/53432910/remove-everything-between-specified-characters-including-multi-lines/53433537#53433537", "title": "Remove everything between specified characters including multi lines", "body": "<p>You may use <code>perl</code> to achieve what you want:</p>\n\n<pre><code>perl -0pe 's/##.*?##\\R*//gs' file &gt; newfile\n</code></pre>\n\n<p>See the <a href=\"https://ideone.com/sCncMA\" rel=\"nofollow noreferrer\">online demo</a></p>\n\n<p>The <code>0</code> argument makes it possible to find matches across lines. </p>\n\n<p>The pattern matches</p>\n\n<ul>\n<li><code>##</code> - two <code>#</code> symbols</li>\n<li><code>.*?</code> - any 0+ chars (even line break chars due to the <code>s</code> modifier) as few as possible</li>\n<li><code>##</code> - two <code>#</code> symbols</li>\n<li><code>\\R*</code> - any 0+ line break sequences.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 0, "last_activity_date": 1542963121, "last_edit_date": 1542963121, "creation_date": 1542962570, "answer_id": 53443215, "question_id": 53432910, "link": "https://stackoverflow.com/questions/53432910/remove-everything-between-specified-characters-including-multi-lines/53443215#53443215", "title": "Remove everything between specified characters including multi lines", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed -z 's/##[^#]*\\(#[^#][^#]*\\)*##\\n\\?//g' file\n</code></pre>\n\n<p>The <code>-z</code> option allows the whole of the file to be slurped into sed's pattern space. The regexp match is in three parts. The first part matches <code>##</code> followed by zero or more non-<code>#</code>'s. The second part matches a zero or more group of characters consisting of a single <code>#</code> followed by a non-<code>#</code> followed by zero or more non-<code>#</code>'s. The third part matches <code>##</code> and a possible newline. This regexp removes such matches globally throughout the file.</p>\n\n<p>This can by shortened slightly by using the <code>-r</code> option to sweeten the final offering to:</p>\n\n<pre><code>sed -rz 's/##[^#]*(#[^#]+)*##\\n?//g' file\n</code></pre>\n\n<p>If the version of sed does not offer either options, then another solution is:</p>\n\n<pre><code>sed 'H;$!d;x;s/.//;s/##[^#]*\\(#[^#][^#]*\\)*##\\n\\?//g' file\n</code></pre>\n\n<p>It should by noted, that in the example above, all <code>##</code>'s either start or end at the beginning or end of a line and so the solution below might also fit the bill:</p>\n\n<pre><code>sed 's/^##/,/##$/d' file \n</code></pre>\n"}], "owner": {"reputation": 1711, "user_id": 1016408, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/17131f006d6538837a453a7002dd9d56?s=128&d=identicon&r=PG&f=1", "display_name": "bukowski", "link": "https://stackoverflow.com/users/1016408/bukowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 53433537, "answer_count": 4, "score": 2, "last_activity_date": 1554732698, "creation_date": 1542896200, "last_edit_date": 1542901633, "question_id": 53432910, "link": "https://stackoverflow.com/questions/53432910/remove-everything-between-specified-characters-including-multi-lines", "title": "Remove everything between specified characters including multi lines", "body": "<p>I have a file with contents like so:</p>\n\n<pre><code>## this must go ##\n## also\n this\n must go\n##\nhello world\n##and this one\ntoo##\n</code></pre>\n\n<p>I want to remove all between <strong>##</strong>, including multi lines, so I am left  just with <code>hello world</code></p>\n\n<p>This removes only part that is on one line:</p>\n\n<pre><code>sed -i.bak 's/##.*##//g' myfile\n</code></pre>\n\n<p>How to remove multi line stuff too?</p>\n\n<p>P.S Im on MAC</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 5, "last_activity_date": 1542884176, "last_edit_date": 1542884176, "creation_date": 1542883223, "answer_id": 53429092, "question_id": 53428977, "link": "https://stackoverflow.com/questions/53428977/array-in-another-array-perl/53429092#53429092", "title": "Array in another array perl", "body": "<p>Arrays are flattened in list context, so your @structure contains the elements of @ana followed by the elements of @dana, etc. Use array references to nest arrays:</p>\n\n<pre><code>my @structure = (\\@ana, \\@dana, \\@mihai, \\@daniel);\nmy $movie = $structure[3][3];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1542884773, "creation_date": 1542884773, "answer_id": 53429579, "question_id": 53428977, "link": "https://stackoverflow.com/questions/53428977/array-in-another-array-perl/53429579#53429579", "title": "Array in another array perl", "body": "<p>To back up choroba's answer, you can get more information about about building complex data structures in Perl from <a href=\"https://metacpan.org/pod/perllol\" rel=\"nofollow noreferrer\">perldoc perllol</a> and <a href=\"https://metacpan.org/pod/perldsc\" rel=\"nofollow noreferrer\">perldoc perldsc</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "is_accepted": false, "score": 1, "last_activity_date": 1543073402, "last_edit_date": 1543073402, "creation_date": 1543071268, "answer_id": 53459386, "question_id": 53428977, "link": "https://stackoverflow.com/questions/53428977/array-in-another-array-perl/53459386#53459386", "title": "Array in another array perl", "body": "<p>There are no multidimensional arrays in Perl. You can emulate such behavior with array of array references.</p>\n\n<pre><code>@foo = ('one','two');                                                                                                                                                                          \n@bar = ('three', 'four');\n# equivalent of @baz = ('one','two','three', 'four');\n@baz = (@foo, @bar);\n\n# you need to store array references in @baz:\n@baz = (\\@foo, \\@bar);\n# Perl have a shortcut for such situations (take reference of all list elements):\n# @baz = \\(@foo, @bar);\n\n# so, we have array ref as elements of @baz;\n\nprint \"First element: $baz[0]\\n\";\nprint \"Second element: $baz[1]\\n\";\n\n# references must be dereferenced with dereferencing arrow\n\nprint \"$baz[0]-&gt;[0]\\n\";\n# -1 is a shortcut for last array element\nprint \"$baz[1]-&gt;[-1]\\n\";\n\n# but Perl knows that we can nest arrays ONLY as reference,\n# so dereferencing arrow can be omitted\n\nprint \"$baz[1][0]\\n\";\n</code></pre>\n\n<p>Lists are ephemeral, and exists only where they defined. You can't store list itself, but values of list can be stored, that's why lists can't be nested.\n(1,2,(3,4)) is just ugly equivalent of (1,2,3,4)</p>\n\n<p>But you can take a slice of a list this way:</p>\n\n<pre><code>print(\n    join( \" \", ('garbage', 'apple', 'pear', 'garbage' )[1..2] ), \"\\n\"\n);\n</code></pre>\n\n<p>This syntax have no sense if @structure defined as array of scalar values: </p>\n\n<pre><code>    my @structure = (@ana,@dana,@mihai,@daniel);\n    @{$structure[3]}[2];\n</code></pre>\n\n<p>You are trying to dereference string. Always use stict and warnings pragmas in your code and you will be free of such errors:</p>\n\n<pre><code># just try to execute this code\nuse strict;\nuse warnings;\nmy @ana = (\"Godfather\", \"Dirty Dancing\", \"Lord of the Rings\", \"Seven\", \"Titanic\");\nmy @structure = (@ana);                                                                                                                                                                        \n\nprint @{$structure[0]}, \"\\n\";\n</code></pre>\n\n<p>Correct usage: </p>\n\n<pre><code>use strict;\nuse warnings;\nmy @ana = (\"Godfather\\n\", \"Dirty Dancing\\n\", \"Lord of the Rings\\n\", \"Seven\\n\", \"Titanic\\n\");\nmy @structure = (\\@ana);\n\n# dereference array at index 0, get all it's elements\nprint @{$structure[0]};\nprint \"\\n\";\n\n# silly, one element slice, better use $structure[0][1];\nprint @{$structure[0]}[1];\n\nprint \"\\n\";\n# more sense\nprint @{$structure[0]}[2..3];\n</code></pre>\n\n<p>You can read more here:</p>\n\n<pre><code>perldoc perlref\nperldoc perllol\n</code></pre>\n\n<p>Documentation for Perl is the best documentation I ever see, take a look and have fun!</p>\n"}], "owner": {"reputation": 125, "user_id": 10690484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea2f3b349f09d335afad326d1355f86a?s=128&d=identicon&r=PG&f=1", "display_name": "Nutiu Radu", "link": "https://stackoverflow.com/users/10690484/nutiu-radu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 53429092, "answer_count": 3, "score": 0, "last_activity_date": 1543073402, "creation_date": 1542882860, "last_edit_date": 1542883087, "question_id": 53428977, "link": "https://stackoverflow.com/questions/53428977/array-in-another-array-perl", "title": "Array in another array perl", "body": "<pre><code>my @ana = (\"Godfather\", \"Dirty Dancing\", \"Lord of the Rings\", \"Seven\", \"Titanic\");\nmy @dana = (\"American Pie\", \"Harry Potter\", \"Bruce Almighty\", \"Jaws 1\", \"Solaris\");\nmy @mihai = (\"Fight Club\", \"Gladiator\", \"Troy\", \"Eternal Sunshine of the Spotless Mind\", \"Lord of the Rings\");\nmy @daniel = (\"Independence Day\", \"Finding Nemo\", \"Gladiator\", \"Godfather\", \"Schindler\u2019s List\");\n\nmy @structure = (@ana,@dana,@mihai,@daniel);\n</code></pre>\n\n<p>how to get a single movie from @structure?</p>\n\n<pre><code>my $subarray = @{$structure[3]}[3];\n</code></pre>\n\n<p>this line dont work, and i need more information about this syntax</p>\n"}, {"tags": ["perl", "makefile"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 387439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da16dffbdcc3a4c1120a1df467703825?s=128&d=identicon&r=PG", "display_name": "Subu", "link": "https://stackoverflow.com/users/387439/subu"}, "edited": false, "score": 0, "creation_date": 1542890067, "post_id": 53430152, "comment_id": 93736053, "body": "Thank you, that makes sense."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 2, "last_activity_date": 1542886683, "creation_date": 1542886683, "answer_id": 53430152, "question_id": 53426123, "link": "https://stackoverflow.com/questions/53426123/how-do-i-specify-tapharnessjunit-in-the-perl-makefile/53430152#53430152", "title": "How do I specify TAP::Harness::Junit in the perl makefile?", "body": "<p>The <code>Makefile.PL</code> is primarily intended to make your modules cpan-installable. For example, <code>make test</code> would be run during module installation to verify that it works correctly on the target system. For that purpose, changing the formatter (and adding an extra dependency) is not helpful.</p>\n\n<p>The <code>Makefile.PL</code> is not necessarily the place for your personal development workflow or for any Continuous Integration scripts. E.g. if you want to generate JUnit test reports on a Jenkins server, you might want to put the <code>prove --formatter TAP::Formatter::JUnit *.t</code> command into a Jenkinsfile. If you prefer writing Makefiles, you could use a separate Makefile for your personal development scipts, though you'd have to use <code>make -f MyMakefile test</code> to invoke it.</p>\n"}], "owner": {"reputation": 33, "user_id": 387439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da16dffbdcc3a4c1120a1df467703825?s=128&d=identicon&r=PG", "display_name": "Subu", "link": "https://stackoverflow.com/users/387439/subu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 53430152, "answer_count": 1, "score": 0, "last_activity_date": 1542886683, "creation_date": 1542872924, "last_edit_date": 1542873207, "question_id": 53426123, "link": "https://stackoverflow.com/questions/53426123/how-do-i-specify-tapharnessjunit-in-the-perl-makefile", "title": "How do I specify TAP::Harness::Junit in the perl makefile?", "body": "<p>I have a Makefile.PL using MakeMaker for my perl module like this : </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings FATAL =&gt; 'all';\n\nuse 5.008;\n\nuse ExtUtils::MakeMaker;\n\nWriteMakefile\n(\n    NAME          =&gt; 'MyModule',\n    AUTHOR        =&gt; 'Subu',\n    LICENSE       =&gt; 'perl',\n    PREREQ_PM     =&gt; {\n        'File::Basename' =&gt; '0',\n    },\n    TEST_REQUIRES =&gt; {\n        'Test::More'       =&gt; '0.47',\n        'Test::MockModule' =&gt; 'v0.170.0',\n        'Test::MockObject' =&gt; '1.20180705',\n        'Devel::Cover'     =&gt; '1.31',\n        'Test::File'       =&gt; '1.443'\n    },\n    BUILD_REQUIRES =&gt; {\n        'Log::Log4perl'  =&gt; '1.49',\n        'JSON::Parse'    =&gt; '0.55',\n        'Time::Piece'    =&gt; '1.33',\n        'Text::CSV'      =&gt; '1.97'\n    },\n    EXE_FILES =&gt; [\n        'src/main/perl/MyModule/main.pl'\n    ],\n\n    test =&gt; {TESTS =&gt; 'src/test/perl/MyModule/*/*.t \nsrc/test/perl/MyModule/*/*/*.t'}\n\n);\n</code></pre>\n\n<p>I'm able to run tests using </p>\n\n<pre><code>perl Makefile.PL\nmake \nmake test\n</code></pre>\n\n<p>However, I would like to have the output formatted using the TAP::Harness::Junit. How do I specify that in the makefile ? </p>\n\n<p>I know I can run the tests with prove</p>\n\n<pre><code>prove --formatter TAP::Formatter::JUnit *.t\n</code></pre>\n\n<p>But I wanted to know if there is a way I can plug that into my makefile. </p>\n"}, {"tags": ["linux", "shell", "perl", "awk"], "comments": [{"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 0, "creation_date": 1542873560, "post_id": 53425965, "comment_id": 93726651, "body": "This is not at all clear, please keep your question simple with small and simple input and expected output and let us know then."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 7839296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HUMy3.png?s=128&g=1", "display_name": "Amz", "link": "https://stackoverflow.com/users/7839296/amz"}, "edited": false, "score": 1, "creation_date": 1542875492, "post_id": 53426562, "comment_id": 93727596, "body": "Hi oguzismall, this works perfectly like I want. Thanks a lot pal, couldn&#39;t done without you."}], "tags": [], "owner": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "is_accepted": true, "score": 1, "last_activity_date": 1557506879, "last_edit_date": 1557506879, "creation_date": 1542874822, "answer_id": 53426562, "question_id": 53425965, "link": "https://stackoverflow.com/questions/53425965/how-to-sort-multiple-range-of-value-based-on-the-increasing-value-of-multiple-di/53426562#53426562", "title": "How to sort multiple range of value based on the increasing value of multiple different column?", "body": "<pre><code>$6 != col6 {\n    printf fmt, min2, max2, min7, max7\n    fmt = $1 \" \" $4 \" \" $5 \" %d-%d \" $6 \" %d %d\\n\"\n\n    min2 = max2 = $2\n    min7 = max7 = $7\n\n    col6 = $6\n}\n{\n    if ($2 &lt; min2)\n        min2 = $2\n    else if ($2 &gt; max2)\n        max2 = $2\n\n    if ($7 &lt; min7)\n        min7 = $7\n    else if ($7 &gt; max7)\n        max7 = $7\n}\nEND {\n    printf fmt, min2, max2, min7, max7\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 7839296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HUMy3.png?s=128&g=1", "display_name": "Amz", "link": "https://stackoverflow.com/users/7839296/amz"}, "edited": false, "score": 0, "creation_date": 1542876015, "post_id": 53426578, "comment_id": 93727856, "body": "This works very well too, it is simple and easy to understand, unfortunately I didn&#39;t use sqlite in my project. Thanks Shawn :)"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "edited": false, "score": 1, "creation_date": 1542879058, "post_id": 53426578, "comment_id": 93729561, "body": "@oguzismail Lately I&#39;ve really been getting into using sqlite in shell scripts for working with data that&#39;s easily loaded into a table. A surprising number of things that get complex or ugly in other languages or tools can be trivial to do in SQL. It&#39;s like <code>join(1)</code> on steroids."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 3, "last_activity_date": 1542874868, "creation_date": 1542874868, "answer_id": 53426578, "question_id": 53425965, "link": "https://stackoverflow.com/questions/53425965/how-to-sort-multiple-range-of-value-based-on-the-increasing-value-of-multiple-di/53426578#53426578", "title": "How to sort multiple range of value based on the increasing value of multiple different column?", "body": "<p>Rows of columnar data you want to group by and find things like the min and max of columns screams database. So... scripting sqlite3:</p>\n\n\n\n<pre><code>#!/bin/sh\nsqlite3 -batch -noheader -list -separator ' ' &lt;&lt;EOF\nCREATE TABLE data(c1 INTEGER, c2 INTEGER, c3 INTEGER, c4 INTEGER\n                , c5 INTEGER, c6 INTEGER, c7 INTEGER);\n.import \"$1\" data\nSELECT c1, c4, c5, min(c2) || '-' || max(c2), c6, min(c7), max(c7)\nFROM data GROUP BY c6 ORDER BY c6;\nEOF\n</code></pre>\n\n<p>With your sample input:</p>\n\n<pre><code>$ ./doit.sh input.txt\n1 2183 2006 5-67 6001 6132 6235\n1 2183 2006 68-117 6004 6156 6235\n1 2183 2006 118-184 6007 6120 6239\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 7839296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HUMy3.png?s=128&g=1", "display_name": "Amz", "link": "https://stackoverflow.com/users/7839296/amz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 4, "closed_date": 1542890234, "accepted_answer_id": 53426562, "answer_count": 2, "score": -1, "last_activity_date": 1557506879, "creation_date": 1542872196, "last_edit_date": 1542872693, "question_id": 53425965, "link": "https://stackoverflow.com/questions/53425965/how-to-sort-multiple-range-of-value-based-on-the-increasing-value-of-multiple-di", "closed_reason": "Needs more focus", "title": "How to sort multiple range of value based on the increasing value of multiple different column?", "body": "<p>I have a problem in sorting some value from input.txt file, and I still didn't have any idea how to solve it.</p>\n\n<p>Input File (input.txt):</p>\n\n<pre><code>1 5 1 2183 2006 6001 6132\n1 6 1 2183 2006 6001 6133\n1 7 1 2183 2006 6001 6134\n...\n1 65 1 2183 2006 6001 6227\n1 66 1 2183 2006 6001 6234\n1 67 1 2183 2006 6001 6235\n1 68 1 2183 2006 6004 6156\n1 69 1 2183 2006 6004 6157\n1 70 1 2183 2006 6004 6158\n...\n1 115 1 2183 2006 6004 6227\n1 116 1 2183 2006 6004 6234\n1 117 1 2183 2006 6004 6235\n1 118 1 2183 2006 6007 6120\n1 119 1 2183 2006 6007 6146\n1 120 1 2183 2006 6007 6147\n...\n1 182 1 2183 2006 6007 6237\n1 183 1 2183 2006 6007 6238\n1 184 1 2183 2006 6007 6239\n</code></pre>\n\n<p>Desired Output File (output.txt):</p>\n\n<pre><code>1 2183 2006 5-67 6001 6132 6235\n1 2183 2006 68-117 6004 6156 6235\n1 2183 2006 118-184 6007 6120 6239\n</code></pre>\n\n<p>There are 7 columns/fields in input file. Column 1,3,4,5 should be constant value. While column 2 and column 6 changes are depending on column 7. Column 6 has increment value of 3, and column 7 changes are vary and only change on the last 3 digits; example 6<strong>132</strong>, 6<strong>133</strong>, 6<strong>134</strong>.</p>\n\n<p>The trick is on output column 4, how do I sort and unseq it based on changes of input column 6 and 7?</p>\n\n<blockquote>\n  <p>Let assume if:</p>\n  \n  <p>input column 6 (6001) and input column 7 (6132) reached the last\n  value before the next input column 6 (6004) and input column 7 (6235)</p>\n  \n  <p>then, the final output column 4 should have value 5-67, output column\n  5 should have the same value 6001, output column 6 should have the\n  first input column 7 and the output column 7 (6132) should have the\n  last input column 7 (6235).</p>\n</blockquote>\n\n<pre><code>Example 1st batch:\n\nInput:\n1 5 1 2183 2006 6001 6132\n1 6 1 2183 2006 6001 6133\n1 7 1 2183 2006 6001 6134\n...\n1 65 1 2183 2006 6001 6227\n1 66 1 2183 2006 6001 6234\n1 67 1 2183 2006 6001 6235\n\nDesired Output:\n1 2183 2006 5-67 6001 6132 6235\n\n\nExample 2nd batch:\nInput:\n1 68 1 2183 2006 6004 6156\n1 69 1 2183 2006 6004 6157\n1 70 1 2183 2006 6004 6158\n...\n1 115 1 2183 2006 6004 6227\n1 116 1 2183 2006 6004 6234\n1 117 1 2183 2006 6004 6235\n\nDesired Output:\n1 2183 2006 68-117 6004 6156 6235\n\n\nExample 3rd batch:\n\nInput:\n1 118 1 2183 2006 6007 6120\n1 119 1 2183 2006 6007 6146\n1 120 1 2183 2006 6007 6147\n...\n1 181 1 2183 2006 6007 6236\n1 182 1 2183 2006 6007 6237\n1 183 1 2183 2006 6007 6238\n1 184 1 2183 2006 6007 6239\n\nDesired Output:\n1 2183 2006 118-184 6007 6120 6239\n</code></pre>\n\n<p>When the desired output compiled, it should become like the following:</p>\n\n<pre><code>1 2183 2006 5-67 6001 6132 6235\n1 2183 2006 68-117 6004 6156 6235\n1 2183 2006 118-184 6007 6120 6239\n</code></pre>\n\n<p>Could you please advise on this?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1542866640, "post_id": 53424299, "comment_id": 93723713, "body": "1) Can&#39;t export lexical variables. Starting by making them constants (see constant.pm). 2) Exporter allows you to specify default exports. Alternatively, it allows you to create tags the represent a group of exports. 3) Those names could easily conflict with other symbols if imported."}], "answers": [{"comments": [{"owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "edited": false, "score": 0, "creation_date": 1542873576, "post_id": 53425050, "comment_id": 93726656, "body": "Thanks.  For now I can live with the risk of reassignment because I&#39;m the only one using my code."}, {"owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "edited": false, "score": 0, "creation_date": 1542873924, "post_id": 53425050, "comment_id": 93726826, "body": "Maybe I should switch my long list of return values to constants?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1542879513, "post_id": 53425050, "comment_id": 93729823, "body": "Your <code>say($SUCCESS)</code> in the <code>main</code> package only works because <code>our</code> has a lexical effect and <code>package</code> doesn&#39;t create a new lexical scope. If (as would be more normal) <code>package Funx</code> and <code>package main</code> were in different files, then his code wouldn&#39;t work. You should probably add something about using <a href=\"https://metacpan.org/pod/Exporter\" rel=\"nofollow noreferrer\">Exporter</a> to work round that."}], "tags": [], "owner": {"reputation": 1058, "user_id": 2438650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c2b3926bd8282c899903b32a6f002b?s=128&d=identicon&r=PG", "display_name": "lod", "link": "https://stackoverflow.com/users/2438650/lod"}, "is_accepted": true, "score": 2, "last_activity_date": 1542868169, "creation_date": 1542868169, "answer_id": 53425050, "question_id": 53424299, "link": "https://stackoverflow.com/questions/53424299/how-can-i-make-a-perl-package-for-scalars/53425050#53425050", "title": "How can I make a Perl package for scalars?", "body": "<p>Prefacing this by saying that it is a bad idea, imagine if someone sets a different value to <code>$SUCCESS</code> anywhere in the code base. Using <code>$Funx::SUCCESS</code> is a much better way to go, it also provides context as to what is the success of.</p>\n\n<p><code>our()</code> makes a variable visible across all scopes, including across packages.</p>\n\n<pre><code>package Funx;\nour($SUCCESS, $NOFILE, $COPYFAIL, $APPRUNNING);\n$SUCCESS         =   0;\n$NOFILE      =   1;\n$COPYFAIL        =   2;\n$APPRUNNING      =   3;\n\npackage main;\nsay($SUCCESS, $Funx::SUCCESS); # both work\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 1, "last_activity_date": 1542901949, "creation_date": 1542901949, "answer_id": 53434511, "question_id": 53424299, "link": "https://stackoverflow.com/questions/53424299/how-can-i-make-a-perl-package-for-scalars/53434511#53434511", "title": "How can I make a Perl package for scalars?", "body": "<p>Here's an example of a module that exports constants.</p>\n\n<pre><code>package RPi::Const;\n\nuse strict;\nuse warnings;\n\nour $VERSION = '1.04';\n\nrequire Exporter;\nuse base qw( Exporter );\nour @EXPORT_OK = ();\nour %EXPORT_TAGS = ( all =&gt; \\@EXPORT_OK );\n\nuse constant {\n    RPI_MODE_WPI =&gt; 0,\n    RPI_MODE_GPIO =&gt; 1,\n    RPI_MODE_GPIO_SYS =&gt; 2,\n    RPI_MODE_PHYS =&gt; 3,\n    RPI_MODE_UNINIT =&gt; -1,\n};\n\n{ # mode\n\n    my @const = qw(\n        RPI_MODE_WPI\n        RPI_MODE_GPIO\n        RPI_MODE_GPIO_SYS\n        RPI_MODE_PHYS\n        RPI_MODE_UNINIT\n    );\n\n    push @EXPORT_OK, @const;\n    $EXPORT_TAGS{mode} = \\@const;\n}\n\nuse constant {\n    MCP23017_IODIRA     =&gt; 0x00,\n    MCP23017_IODIRB     =&gt; 0x01,\n    MCP23017_IPOLA      =&gt; 0x02,\n    MCP23017_IPOLB      =&gt; 0x03,\n    MCP23017_GPINTENA   =&gt; 0x04,\n    MCP23017_GPINTENB   =&gt; 0x05,\n    MCP23017_DEFVALA    =&gt; 0x06,\n    MCP23017_DEFVALB    =&gt; 0x07,\n    MCP23017_INTCONA    =&gt; 0x08,\n    MCP23017_INTCONB    =&gt; 0x09,\n    MCP23017_IOCONA     =&gt; 0x0A,\n    MCP23017_IOCONB     =&gt; 0x0B,\n    MCP23017_GPPUA      =&gt; 0x0C,\n    MCP23017_GPPUB      =&gt; 0x0D,\n    MCP23017_INTFA      =&gt; 0x0E,\n    MCP23017_INTFB      =&gt; 0x0F,\n    MCP23017_INTCAPA    =&gt; 0x10,\n    MCP23017_INTCAPB    =&gt; 0x11,\n    MCP23017_GPIOA      =&gt; 0x12,\n    MCP23017_GPIOB      =&gt; 0x13,\n    MCP23017_OLATA      =&gt; 0x14,\n    MCP23017_OLATB      =&gt; 0x15,\n\n    MCP23017_INPUT      =&gt; 1,\n    MCP23017_OUTPUT     =&gt; 0,\n};\n\n{ # MCP23017 GPIO Expander Registers\n\n    my @const = qw(\n        MCP23017_IODIRA\n        MCP23017_IODIRB\n        MCP23017_IPOLA\n        MCP23017_IPOLB\n        MCP23017_GPINTENA\n        MCP23017_GPINTENB\n        MCP23017_DEFVALA\n        MCP23017_DEFVALB\n        MCP23017_INTCONA\n        MCP23017_INTCONB\n        MCP23017_IOCONA\n        MCP23017_IOCONB\n        MCP23017_GPPUA\n        MCP23017_GPPUB\n        MCP23017_INTFA\n        MCP23017_INTFB\n        MCP23017_INTCAPA\n        MCP23017_INTCAPB\n        MCP23017_GPIOA\n        MCP23017_GPIOB\n        MCP23017_OLATA\n        MCP23017_OLATB\n        MCP23017_INPUT\n        MCP23017_OUTPUT\n    );\n\n    push @EXPORT_OK, @const;\n    $EXPORT_TAGS{mcp23017_registers} = \\@const;\n}\n\n1;\n__END__\n</code></pre>\n\n<p>In your calling scripts, you can import each bundle (tag), or by using the <code>:all</code> tag, you can import all the separate groups:</p>\n\n<pre><code>use RPi::Const qw(:mcp23017_registers); # single grouping\n</code></pre>\n\n<p>...or</p>\n\n<pre><code>use RPi::Const qw(:all); # all groupings\n</code></pre>\n\n<p>Then you can use any of the imported constants:</p>\n\n<pre><code>sub mode {\n    my ($self, $pin, $mode) = @_;\n\n    if (! defined $mode){\n        my $reg = $pin &gt; 7 ? MCP23017_IODIRB : MCP23017_IODIRA;\n        my $bit = _pinBit($pin);\n        return getRegisterBit($self-&gt;_fd, $reg, $bit);\n    }\n\n    _check_mode($mode);\n\n    pinMode($self-&gt;_fd, $pin, $mode);\n}\n</code></pre>\n"}], "owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 53425050, "answer_count": 2, "score": 0, "last_activity_date": 1542901949, "creation_date": 1542863886, "question_id": 53424299, "link": "https://stackoverflow.com/questions/53424299/how-can-i-make-a-perl-package-for-scalars", "title": "How can I make a Perl package for scalars?", "body": "<p>I already use a Perl package (Funx.pm) for reusable code.  But I'd like it to include a bunch of scalars as return values, i.e.</p>\n\n<pre><code>my $SUCCESS         =   0;\nmy $NOFILE      =   1;\nmy $COPYFAIL        =   2;\nmy $APPRUNNING      =   3;\n...and on and on....\n</code></pre>\n\n<p>Is there a way to do so and be able to just use the variables without have to import each one nor having to use Funx:: when using them?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1542858697, "post_id": 53423543, "comment_id": 93721565, "body": "What have you tried so far? You didn&#39;t include any code, so it&#39;s impossible to know. Also, take a look at <a href=\"https://perldoc.pl/functions/exit\" rel=\"nofollow noreferrer\"><code>exit</code></a>."}, {"owner": {"reputation": 6964, "user_id": 1424739, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/19d3c927744b5ad3b94afbf88e1c3844?s=128&d=identicon&r=PG", "display_name": "user1424739", "link": "https://stackoverflow.com/users/1424739/user1424739"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1542859486, "post_id": 53423543, "comment_id": 93721755, "body": "I don\u2019t know what to try. I want the program to fail instead of just giving a warning. This must be done with some kind of configuration of Perl at the beginning of a script. Exit won\u2019t work."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1542859550, "post_id": 53423543, "comment_id": 93721766, "body": "Please <a href=\"https://stackoverflow.com/posts/53423543/edit\">edit</a> your question and include the code you&#39;re claiming isn&#39;t working."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 6, "creation_date": 1542860046, "post_id": 53423543, "comment_id": 93721887, "body": "<a href=\"http://perldoc.perl.org/warnings.html#Fatal-Warnings\" rel=\"nofollow noreferrer\">perldoc.perl.org/warnings.html#Fatal-Warnings</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1542867002, "post_id": 53423543, "comment_id": 93723850, "body": "The link from @Shawn seems to be what you want.  But also see <a href=\"https://metacpan.org/pod/Carp::Always\" rel=\"nofollow noreferrer\">Carp::Always</a>"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1542879241, "creation_date": 1542879241, "answer_id": 53427784, "question_id": 53423543, "link": "https://stackoverflow.com/questions/53423543/how-to-make-perl-exit-with-an-error-code-upon-use-of-uninitialized-value/53427784#53427784", "title": "How to make perl exit with an error code upon use of uninitialized-value?", "body": "<p>Something like this perhaps:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse warnings FATAL =&gt; qw[uninitialized];\nuse feature 'say';\n\nmy $foo;\n\nsay \"Foo is $foo\";\nsay \"Don't get here\"; \n</code></pre>\n\n<p>Comment out the <code>FATAL</code> line to see the standard behaviour.</p>\n"}, {"tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 1, "last_activity_date": 1542920236, "creation_date": 1542920236, "answer_id": 53437897, "question_id": 53423543, "link": "https://stackoverflow.com/questions/53423543/how-to-make-perl-exit-with-an-error-code-upon-use-of-uninitialized-value/53437897#53437897", "title": "How to make perl exit with an error code upon use of uninitialized-value?", "body": "<p>Dave's answer sure is the best pick for the described use case.</p>\n\n<p>Here is another solution, that demonstrates the use of the warning signal handler (see <a href=\"http://perldoc.perl.org/functions/warn.html\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/functions/warn.html</a>).</p>\n\n<p>The benefit of using a signal handler is flexibility : you can trap any kind of warning, analyze it and then implement any behavior you like. In the given use case this is an overkill, it but can be useful in more complex cases.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature \"say\";\n\nlocal $SIG{__WARN__} = sub {\n    if ($_[0] =~ /^Use of uninitialized value/) {\n        die $_[0]; \n    } else { \n        warn $_[0] ;\n    }\n};\n\nmy $foo;\nsay \"Foo is $foo\";\nsay \"Dont get here\";\n</code></pre>\n"}], "owner": {"reputation": 6964, "user_id": 1424739, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/19d3c927744b5ad3b94afbf88e1c3844?s=128&d=identicon&r=PG", "display_name": "user1424739", "link": "https://stackoverflow.com/users/1424739/user1424739"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1542920236, "creation_date": 1542857964, "question_id": 53423543, "link": "https://stackoverflow.com/questions/53423543/how-to-make-perl-exit-with-an-error-code-upon-use-of-uninitialized-value", "title": "How to make perl exit with an error code upon use of uninitialized-value?", "body": "<p>I don't see how to make perl fail upon use of uninitialized-value. Is there a way to make this the default behavior? Thanks.</p>\n\n<p><a href=\"https://perlmaven.com/use-of-uninitialized-value\" rel=\"nofollow noreferrer\">https://perlmaven.com/use-of-uninitialized-value</a></p>\n"}]