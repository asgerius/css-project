[{"tags": ["perl", "api", "rest", "curl", "put"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461821873, "post_id": 36902712, "comment_id": 61375570, "body": "It would be better to use <code>LWP</code> instead if shelling out to curl. And it is hard to tell what may be wrong as the correct code depends on the instructure.com API"}], "answers": [{"comments": [{"owner": {"reputation": 1469, "user_id": 4663377, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/bd20d0f6d0dc5f26cce14ea1287164d7?s=128&d=identicon&r=PG&f=1", "display_name": "Ajinkya", "link": "https://stackoverflow.com/users/4663377/ajinkya"}, "edited": false, "score": 0, "creation_date": 1461951325, "post_id": 36906727, "comment_id": 61447383, "body": "Thank you,will you please elaborate on line: &quot; my ($method, $args) = @_;&quot; .Will you please tell what is the method and what is the argument you are trying to pass in your code ."}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "reply_to_user": {"reputation": 1469, "user_id": 4663377, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/bd20d0f6d0dc5f26cce14ea1287164d7?s=128&d=identicon&r=PG&f=1", "display_name": "Ajinkya", "link": "https://stackoverflow.com/users/4663377/ajinkya"}, "edited": false, "score": 0, "creation_date": 1461952516, "post_id": 36906727, "comment_id": 61448036, "body": "Added a comment to the answer. <code>$method</code> is the HTTP method and <code>$args</code> are the arguments (if any)."}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 0, "last_activity_date": 1461952481, "last_edit_date": 1461952481, "creation_date": 1461824385, "answer_id": 36906727, "question_id": 36902712, "link": "https://stackoverflow.com/questions/36902712/how-to-use-put-instruction-using-curl-in-canvas-rest-api/36906727#36906727", "title": "How to use PUT instruction using curl in Canvas rest api", "body": "<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n</code></pre>\n\n<p><code>use warnings</code> shows more problems than plain <code>use strict</code>; Always good to use them together.</p>\n\n<pre><code>use JSON::Parse 'parse_json';\nuse LWP::UserAgent;\nuse Data::Dumper; # just for output\n\nmy $url = 'https://canvas.instructure.com/api/v1/courses/10300000000000133';\nmy $auth = 'xxx';\n\nmy $ua = LWP::UserAgent-&gt;new;\n</code></pre>\n\n<p>see <a href=\"http://search.cpan.org/perldoc?LWP::UserAgent\" rel=\"nofollow\">http://search.cpan.org/perldoc?LWP::UserAgent</a> for the manual.</p>\n\n<p>Add the auth header to all upcoming requests once:</p>\n\n<pre><code>$ua-&gt;default_headers-&gt;header('Authorization' =&gt; \"Bearer $auth\");\n</code></pre>\n\n<p>Create a sub calling your API. This sub could merge everything common to all API requests and add error handling:</p>\n\n<pre><code>sub api {\n    my ($method, $args) = @_;\n</code></pre>\n\n<p><code>@_</code> holds the arguments passed when calling the sub. <code>$method</code> will get the first argument: <code>GET</code>, <code>POST</code>, <code>PUT</code> or any other valid HTTP method, <code>$args</code> should contain the arguments to send.</p>\n\n<p>Create a request object:</p>\n\n<pre><code>    my $req = HTTP::Request-&gt;new($method, $url);\n    $req-&gt;content($args)\n        if $args;\n</code></pre>\n\n<p>Run the request, actually call the API:</p>\n\n<pre><code>    my $result = $ua-&gt;request($req);\n</code></pre>\n\n<p>Parse the result and return a Perl data structure if the request was successful (HTTP status code 200):</p>\n\n<pre><code>    return parse_json($result-&gt;decoded_content)\n        if $result-&gt;is_success;\n</code></pre>\n\n<p>Otherwise report errors. Using <a href=\"http://perldoc.perl.org/functions/die.html\" rel=\"nofollow\"><code>die</code></a> might be better depending on your script:</p>\n\n<pre><code>    print \"Error calling $method with \".\n        ($req-&gt;content // 'no body').\":\\n\".\n        $result-&gt;as_string;\n}\n</code></pre>\n\n<p>Issue a GET request without any arguments and show the Perl structure returned:</p>\n\n<pre><code>print Dumper(api('GET'));\n</code></pre>\n\n<p>Issue a PUT request with arguments:</p>\n\n<pre><code>print Dumper(\n    api('PUT' =&gt; 'end_at=2017-05-28T04:00:00Z');\n);\n</code></pre>\n\n<p>This script has few differences compared to your CURL approach above:</p>\n\n<ul>\n<li>It does error handling</li>\n<li>It doesn't depend on external tools</li>\n</ul>\n\n<p>In case your REST API replies with a HTTP status code 500 or 404, your script would just ignore that and treat the request as successful. This script would dump the full HTTP response. You might want to act on different HTTP codes by reading <code>$result-&gt;code</code>.</p>\n\n<p>If you don't get an error, but still nothing happens: Try to comment the <code>return parse_json(...) if $result-&gt;success</code> out to see the full HTTP response. Maybe you get a hint from a header value or see something in the body.</p>\n\n<p>The <a href=\"https://canvas.instructure.com/doc/api/index.html\" rel=\"nofollow\">Canvas API documentation</a> states:</p>\n\n<blockquote>\n  <p>POST and PUT requests may also optionally be sent in JSON format\n  format.</p>\n</blockquote>\n\n<p>You might want to switch to the <a href=\"http://search.cpan.org/perldoc?JSON\" rel=\"nofollow\">JSON module</a> which could do <code>from_json</code> and <code>to_json</code> at the same time.</p>\n\n<p>I didn't find any information about their error handing in the API documentation. If in doubt, try generating an error (like using an invalid ID or querying a GET API with invalid arguments) to get an idea on how their errors look like.</p>\n\n<p>Try another write (PUT) action to see if your problem is related to your sample.</p>\n"}], "owner": {"reputation": 1469, "user_id": 4663377, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/bd20d0f6d0dc5f26cce14ea1287164d7?s=128&d=identicon&r=PG&f=1", "display_name": "Ajinkya", "link": "https://stackoverflow.com/users/4663377/ajinkya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 864, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461952481, "creation_date": 1461800103, "last_edit_date": 1461824451, "question_id": 36902712, "link": "https://stackoverflow.com/questions/36902712/how-to-use-put-instruction-using-curl-in-canvas-rest-api", "title": "How to use PUT instruction using curl in Canvas rest api", "body": "<p>I have the following code to get the data drom Canvas REST API this data contains information like start date of course and end date of the coursse.I have to change end_date of this course .I use GET to to get the information as shown in Program :</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse JSON::Parse 'parse_json';\n\nmy $auth = \"xxx\";\nmy $curl = \"curl -H 'Authorization: Bearer $auth'\";\n\n#system(\"curl -H 'Authorization: Bearer $auth'https://canvas.instructure.com/api/v1/courses\");\n#system(\"curl -H 'Authorization: Bearer $auth' https://canvas.instructure.com/api/v1/accounts/$accountid/analytics/current/grades\");\n\n\nsystem(\"$curl https://canvas.instructure.com/api/v1/courses/10300000000000133\");\n\n    my $json = '[\"golden\", \"fleece\"]';\n    my $perl = parse_json ($json);\n</code></pre>\n\n<p>The output of program is:</p>\n\n<pre><code>{\"id\":10300000000000133,\"name\":\"DOV DEV\",\"account_id\":10300000000000001,\"start_at\":\"2014-07-01T13:31:00Z\",\"grading_standard_id\":null,\"is_public\":true,\"course_code\":\"DOV DEV\",\"default_view\":\"feed\",\"enrollment_term_id\":10300000000000001,\"end_at\":\"2016-05-28T04:00:00Z\",\"public_syllabus\":false,\"storage_quota_mb\":15000,\"is_public_to_auth_users\":false,\"hide_final_grades\":false,\"apply_assignment_group_weights\":false,\"calendar\":{\"ics\":\"https://canvas.instructure.com/feeds/calendars/course_Jo1suCoQU3XhYMBJNm3Ziu2POTG4GL6DjzHJ7PM4.ics\"},\"sis_course_id\":null,\"integration_id\":null,\"enrollments\":[{\"type\":\"teacher\",\"role\":\"TeacherEnrollment\",\"role_id\":822,\"user_id\":10300000000020171,\"enrollment_state\":\"active\"}],\"workflow_state\":\"available\",\"restrict_enrollments_to_course_dates\":false}host-155-246-165-53:~ ajinkyabobade$ \n</code></pre>\n\n<p>After getting the information as shown above I am using the -X PUT command to change the end_date .The code including PUT is as follows </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse JSON::Parse 'parse_json';\n\nmy $auth = \"xxx\";\n#my $accountid = \"10300000000000133\";\nmy $curl = \"curl -H 'Authorization: Bearer $auth'\";\n#system(\"curl -H 'Authorization: Bearer $auth'   https://canvas.instructure.com/api/v1/courses\");\n#system(\"curl -H 'Authorization: Bearer $auth' https://canvas.instructure.com/api/v1/accounts/$accountid/analytics/current/grades\");\n\n\nsystem(\"$curl https://canvas.instructure.com/api/v1/courses/10300000000000133 -X PUT -d 'end_at=2017-05-28T04:00:00Z' \");\n\nmy $json = '[\"golden\", \"fleece\"]';\nmy $perl = parse_json ($json);\n</code></pre>\n\n<p>The end_date is not changing using this code also I am getting the following output, Please help</p>\n\n<pre><code>{\"id\":10300000000000133,\"name\":\"DOV DEV\",\"account_id\":10300000000000001,\"start_at\":\"2014-07-01T13:31:00Z\",\"grading_standard_id\":null,\"is_public\":true,\"course_code\":\"DOV DEV\",\"default_view\":\"feed\",\"enrollment_term_id\":10300000000000001,\"end_at\":\"2016-05-28T04:00:00Z\",\"public_syllabus\":false,\"storage_quota_mb\":15000,\"is_public_to_auth_users\":false,\"hide_final_grades\":false,\"apply_assignment_group_weights\":false,\"calendar\":{\"ics\":\"https://canvas.instructure.com/feeds/calendars/course_Jo1suCoQU3XhYMBJNm3Ziu2POTG4GL6DjzHJ7PM4.ics\"},\"sis_course_id\":null,\"integration_id\":null,\"workflow_state\":\"available\",\"restrict_enrollments_to_course_dates\":false}host-155-246-165-53:~ ajinkyabobade$ \n</code></pre>\n"}, {"tags": ["macos", "perl", "ubuntu", "locallib"], "answers": [{"comments": [{"owner": {"reputation": 8720, "user_id": 3846213, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/5PGh1.jpg?s=128&g=1", "display_name": "Eli Korvigo", "link": "https://stackoverflow.com/users/3846213/eli-korvigo"}, "edited": false, "score": 0, "creation_date": 1461851927, "post_id": 36915917, "comment_id": 61395834, "body": "I&#39;m not a perl guy \u2013 I just wanted to hide perl dependencies from the users. This works, thank you."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1461849506, "last_edit_date": 1592644375, "creation_date": 1461849506, "answer_id": 36915917, "question_id": 36902540, "link": "https://stackoverflow.com/questions/36902540/specify-location-for-the-local-perl-library/36915917#36915917", "title": "Specify location for the local perl library", "body": "<p>From the docs,</p>\n<blockquote>\n<p>[If you installed local::lib into] a directory other than default, you also need to give that as import parameter to the call of the local::lib module like this way:</p>\n<pre><code>echo 'eval &quot;$(perl -I$HOME/foo/lib/perl5 -Mlocal::lib=$HOME/foo)&quot;' &gt;&gt;~/.bashrc\n</code></pre>\n</blockquote>\n<p>So you need</p>\n<pre><code>echo 'eval &quot;$(perl -I$HOME/.perl5/lib/perl5 -Mlocal::lib=$HOME/.perl5)&quot;' &gt;&gt;~/.bashrc\n</code></pre>\n"}], "owner": {"reputation": 8720, "user_id": 3846213, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/5PGh1.jpg?s=128&g=1", "display_name": "Eli Korvigo", "link": "https://stackoverflow.com/users/3846213/eli-korvigo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 36915917, "answer_count": 1, "score": 0, "last_activity_date": 1461849506, "creation_date": 1461798897, "question_id": 36902540, "link": "https://stackoverflow.com/questions/36902540/specify-location-for-the-local-perl-library", "title": "Specify location for the local perl library", "body": "<p>Basically, I tried this on Ubuntu and OS X:</p>\n\n<pre><code>export PERL_LOCAL_LIB_ROOT=~/.perl5\nwget -O- http://cpanmin.us | perl - -l ~/.perl5 App::cpanminus local::lib\neval `perl -I ~/.perl5/lib/perl5 -Mlocal::lib`\n</code></pre>\n\n<p>Yet the third line insists on creating and installing all the stuff in <code>~/perl5</code> rather than <code>~/.perl5</code>. How can I overcome this behaviour?</p>\n"}, {"tags": ["php", "regex", "perl"], "comments": [{"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 1, "creation_date": 1461797263, "post_id": 36902202, "comment_id": 61368616, "body": "Have you tried to print the query inside the php script, does it print correctly ? Did you realize that you&#39;re missing a double-quote? <code>passthru(&quot;perl -w search.pl &#39;query&#39;HERE); </code>"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 2683054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85e96a214507fa47dee44283f124a208?s=128&d=identicon&r=PG&f=1", "display_name": "Newbie2Bootstrap", "link": "https://stackoverflow.com/users/2683054/newbie2bootstrap"}, "edited": false, "score": 0, "creation_date": 1461808175, "post_id": 36902343, "comment_id": 61371520, "body": "1) User enter in the text box as whole text query like &#39;%key%&#39; or query like &#39;%door%&#39;  2) in php  $query = $_POST[&#39;textarea&#39;]; $query_pass = escapeshellarg(&quot;&#39;$query&#39;&quot;);  3) sorry about the typo ( i already have  at the end&quot;) I have passthru(&quot;perl -w search.pl query_pass&quot;);  4) when i capture perl output it looks like this print &quot;query: $ARGV[0]\\n&quot;;  &#39;query like &amp;#39;%key%&amp;#39; or query like &amp;#39;%door%&amp;#39;&#39;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 19, "user_id": 2683054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85e96a214507fa47dee44283f124a208?s=128&d=identicon&r=PG&f=1", "display_name": "Newbie2Bootstrap", "link": "https://stackoverflow.com/users/2683054/newbie2bootstrap"}, "edited": false, "score": 1, "creation_date": 1461856398, "post_id": 36902343, "comment_id": 61399385, "body": "@Newbie2Bootstrap, If there&#39;s a problem with your question, edit your question rather than posting (an equally bad) fix in the comments. Also, post the code you actually ran rather than making stuff up. Twice."}], "tags": [], "owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "is_accepted": false, "score": 0, "last_activity_date": 1461797635, "creation_date": 1461797635, "answer_id": 36902343, "question_id": 36902202, "link": "https://stackoverflow.com/questions/36902202/how-to-pass-special-char-to-perl-script/36902343#36902343", "title": "How to pass special char to perl script?", "body": "<p>You're missing the closing <strong>double-quote</strong> on the <code>passthru</code> command.<br>\nI guess you need <a href=\"http://php.net/manual/en/function.escapeshellarg.php\" rel=\"nofollow\">escapeshellarg()</a>, i.e.:</p>\n\n<pre><code>$query = escapeshellarg(\"'%key%'\");\nshell_exec(\"perl -w search.pl '$query' \");\n</code></pre>\n\n<hr>\n\n<pre><code>escapeshellarg()\n</code></pre>\n\n<blockquote>\n  <p>escapeshellarg() adds single quotes around a string and quotes/escapes\n  any existing single quotes allowing you to pass a string directly to a\n  shell function and having it be treated as a single safe argument.\n  This function should be used to escape individual arguments to shell\n  functions coming from user input. The shell functions include exec(),\n  system() and the backtick operator.</p>\n</blockquote>\n"}], "owner": {"reputation": 19, "user_id": 2683054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85e96a214507fa47dee44283f124a208?s=128&d=identicon&r=PG&f=1", "display_name": "Newbie2Bootstrap", "link": "https://stackoverflow.com/users/2683054/newbie2bootstrap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461797635, "creation_date": 1461796828, "last_edit_date": 1461797175, "question_id": 36902202, "link": "https://stackoverflow.com/questions/36902202/how-to-pass-special-char-to-perl-script", "title": "How to pass special char to perl script?", "body": "<p>1) In php user enter: query like <code>'%key%'</code> or query like <code>'%door%'</code></p>\n\n<p>2) I am calling perl script as </p>\n\n<pre><code>ob_start();\npassthru(\"perl -w search.pl 'query');\n</code></pre>\n\n<p>3) In the perl if i print</p>\n\n<pre><code>print \"query: $ARGV[0]\\n\"; \n</code></pre>\n\n<p>4) It prints as \nquery like <code>^m'%key%'^M</code> or query like <code>^m'%door%'^M</code> </p>\n\n<p>Any suggestions to print as user entered value.</p>\n"}, {"tags": ["perl", "null", "file-handling"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "reply_to_user": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "edited": false, "score": 0, "creation_date": 1461790608, "post_id": 36900609, "comment_id": 61365630, "body": "@eballes it defaults to &#39;&lt;&#39;, so I don&#39;t believe that is the problem. Though for readability/maintainability you should always specify it"}, {"owner": {"reputation": 347, "user_id": 4326515, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2ea648e2af03a3f5535a7a42564f8c0c?s=128&d=identicon&r=PG&f=1", "display_name": "noc_coder", "link": "https://stackoverflow.com/users/4326515/noc-coder"}, "edited": false, "score": 0, "creation_date": 1461790634, "post_id": 36900609, "comment_id": 61365643, "body": "&#39;&lt;:encoding(UTF-8)&#39; This thing?"}, {"owner": {"reputation": 347, "user_id": 4326515, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2ea648e2af03a3f5535a7a42564f8c0c?s=128&d=identicon&r=PG&f=1", "display_name": "noc_coder", "link": "https://stackoverflow.com/users/4326515/noc-coder"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1461790894, "post_id": 36900609, "comment_id": 61365764, "body": "I tried it, it didnt help."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1461790917, "post_id": 36900609, "comment_id": 61365783, "body": "You&#39;re sure the files are open? <a href=\"http://perldoc.perl.org/functions/eof.html\" rel=\"nofollow noreferrer\"><code>eof</code></a> returns 0 if the files are closed."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1461791195, "post_id": 36900609, "comment_id": 61365940, "body": "<code>$i + 3</code> should really be <code>@md5files - $i - 1</code>, but that isn&#39;t the problem you are trying to solve. Also you should enable <code>use strict;</code> and <code>use warnings;</code> if you aren&#39;t already using them"}, {"owner": {"reputation": 347, "user_id": 4326515, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2ea648e2af03a3f5535a7a42564f8c0c?s=128&d=identicon&r=PG&f=1", "display_name": "noc_coder", "link": "https://stackoverflow.com/users/4326515/noc-coder"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1461791255, "post_id": 36900609, "comment_id": 61365966, "body": "Yes they are. I changed this: if   ( eof $fh1 ), to this: if (tell($fh1) == -1)... It went into the else and printed this: &quot;Use of uninitialized value in concatenation (.) or string at mulftptest line 53&quot;"}, {"owner": {"reputation": 93, "user_id": 1032741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b33eea5d1c433277df0cde355960b7b3?s=128&d=identicon&r=PG", "display_name": "dim255", "link": "https://stackoverflow.com/users/1032741/dim255"}, "edited": false, "score": 0, "creation_date": 1461796163, "post_id": 36900609, "comment_id": 61368189, "body": "Do you run pl script from &#39;md5sum&#39; dir?"}, {"owner": {"reputation": 347, "user_id": 4326515, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2ea648e2af03a3f5535a7a42564f8c0c?s=128&d=identicon&r=PG&f=1", "display_name": "noc_coder", "link": "https://stackoverflow.com/users/4326515/noc-coder"}, "edited": false, "score": 0, "creation_date": 1461809266, "post_id": 36900609, "comment_id": 61371786, "body": "No, I run it from the directory the script is in."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461812637, "post_id": 36900609, "comment_id": 61372678, "body": "Note that they&#39;re file <i>handles</i> file handlers are something completely different"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461813623, "post_id": 36900609, "comment_id": 61372959, "body": "Which is line 53 of your program? It&#39;s suspicious that you have shown only thirty or so lines, so there is a lot more to your real code. Would you post all of it, please?"}, {"owner": {"reputation": 347, "user_id": 4326515, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2ea648e2af03a3f5535a7a42564f8c0c?s=128&d=identicon&r=PG&f=1", "display_name": "noc_coder", "link": "https://stackoverflow.com/users/4326515/noc-coder"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461813850, "post_id": 36900609, "comment_id": 61373037, "body": "@Borodin the rest is not shown because it is commented out. Also, what do you mean abut your first comment specifically? Line 53 would be line 24 here."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461814217, "post_id": 36900609, "comment_id": 61373132, "body": "I just mean that you are using the wrong term. <i>filehandlers</i> is wrong, and you mean <i>file handles</i>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461851986, "post_id": 36900609, "comment_id": 61395886, "body": "Do you realise that you have a rogue file <code>SAM4_27-04 2016_11:19:06.md5</code> that has a space between the month and the year instead of an underscore?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 1, "creation_date": 1461852365, "post_id": 36900609, "comment_id": 61396160, "body": "@HunterMcMillen: That&#39;s wrong. The OP means to pair up files according to their first four characters. The values returned by <code>readdir</code> are probably delivered in lexical order of their names, so they should be accessed as <code>$md5files[$i]</code> and <code>$md5files[$i+1]</code> while the loop increments <code>$i</code> by two. Your suggestion expects the second file of each pair to be ordered backwards, like <code>SAM4_1</code>, <code>SAM5_1</code>, <code>SAM6_1</code>, <code>SAM6_2</code>, <code>SAM5_2</code>, <code>SAM4_2</code>; while the OP&#39;s code works for <code>SAM4_1</code>, <code>SAM5_1</code>, <code>SAM6_1</code>, <code>SAM4_2</code>, <code>SAM5_2</code>, <code>SAM6_2</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1461852387, "post_id": 36900609, "comment_id": 61396183, "body": "@HunterMcMillen: Neither assumption is proper, and the names should be accumulated into a hash of prefixes before being processed"}], "answers": [{"comments": [{"owner": {"reputation": 347, "user_id": 4326515, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2ea648e2af03a3f5535a7a42564f8c0c?s=128&d=identicon&r=PG&f=1", "display_name": "noc_coder", "link": "https://stackoverflow.com/users/4326515/noc-coder"}, "edited": false, "score": 0, "creation_date": 1461814470, "post_id": 36904724, "comment_id": 61373217, "body": "Would tell return 0 at the start only in this case? I thought tell was useful for this sort of purpose."}, {"owner": {"reputation": 347, "user_id": 4326515, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2ea648e2af03a3f5535a7a42564f8c0c?s=128&d=identicon&r=PG&f=1", "display_name": "noc_coder", "link": "https://stackoverflow.com/users/4326515/noc-coder"}, "edited": false, "score": 0, "creation_date": 1461814571, "post_id": 36904724, "comment_id": 61373252, "body": "Something is telling me that this is right.. Let me verify it in this morning and then I will bring this answer into acceptance. Thanks."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 347, "user_id": 4326515, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2ea648e2af03a3f5535a7a42564f8c0c?s=128&d=identicon&r=PG&f=1", "display_name": "noc_coder", "link": "https://stackoverflow.com/users/4326515/noc-coder"}, "edited": false, "score": 0, "creation_date": 1461814639, "post_id": 36904724, "comment_id": 61373275, "body": "@noc_coder: <code>tell</code> returns the number of bytes read so far from the file. Immediately after you open the file you have read zero bytes, so <code>tell</code> will return zero whether or not there is anything more to read"}, {"owner": {"reputation": 347, "user_id": 4326515, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2ea648e2af03a3f5535a7a42564f8c0c?s=128&d=identicon&r=PG&f=1", "display_name": "noc_coder", "link": "https://stackoverflow.com/users/4326515/noc-coder"}, "edited": false, "score": 0, "creation_date": 1461945182, "post_id": 36904724, "comment_id": 61444199, "body": "This was it! Thanks so much for the help!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1461814507, "last_edit_date": 1461814507, "creation_date": 1461814089, "answer_id": 36904724, "question_id": 36900609, "link": "https://stackoverflow.com/questions/36900609/why-is-my-filehandler-empty-perl/36904724#36904724", "title": "Why is my filehandler empty?? PERL", "body": "<p>The main problem is that <code>readdir</code> returns only the file names, without any path information</p>\n\n<p>That means you are opening <code>SAM5_27-04-2016_11:21:20.md5</code> in the current working directory, and not in the <code>md5sum</code> directory. Ordinarily your open calls would have failed, but it seems that you have spurious empty files with the same names in your script directory</p>\n\n<p>If you write your open calls like this instead then it should work for you</p>\n\n<pre><code>open my $fh1, '&lt;', \"$md5dir/$file1\" or die \"Fail to open file $file1: $!\";\n</code></pre>\n\n<p>And don't use <code>tell</code> for this purpose. It will return zero at the start whether the file is empty or not. You really want <code>-s $fh1</code> which returns the size of the file in bytes, and can be used on the file name or the open file handle</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1467569267, "last_edit_date": 1467569267, "creation_date": 1461859338, "answer_id": 36919898, "question_id": 36900609, "link": "https://stackoverflow.com/questions/36900609/why-is-my-filehandler-empty-perl/36919898#36919898", "title": "Why is my filehandler empty?? PERL", "body": "<p>My best guess is that you need something like this. I'm pretty sure you have a directory of files that contain MD5 checksums and want to compare them</p>\n\n<p>I've made this more straightforward in these ways</p>\n\n<ul>\n<li><p>I have <a href=\"https://metacpan.org/pod/autodie\" rel=\"nofollow\"><code>use autodie</code></a> at the top of the program. That is a pragma that checks most Perl IO operations, and saves you verifying whether every <code>open</code> call succeeded. It was introduced into core perl for v5.10.1 and is reliable</p></li>\n<li><p>I've added a <code>use constant</code> for the path to the directory of MD5 files</p></li>\n<li><p>I use <code>glob</code> instead of <code>opendir</code> / <code>readdir</code> to find all files in the <code>md5sum</code> directory that end with <code>.md5</code>. <code>glob</code> will never return the pseudo-directories <code>.</code> and <code>..</code>, but there is always a chance that <code>xx.md5</code> may be a directory if someone has been weird. You might want to add a check</p></li>\n</ul>\n\n<p>There's a loop to build a hash that relates every \"prefix\" (a prefix being all characters in the filename before the first underscore) to every file with that prefix</p>\n\n<p>That hash is checked to make sure that there are exactly to files in the directory for every prefix. That seemed to be in keeping with the original checks</p>\n\n<p>Now that there is a hash that relates every prefix to two files, the problem seems to be solved. My code displays every prefix together with the names of its two files and the MD5 string that they contain\n<br/></p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse autodie;\n\nuse constant MD5_DIR =&gt; '...plib/test/md5sum';    #IN YOUR PROG, IS THE FULL PATH\nchdir MD5_DIR;\n\nmy %files;\n\n# Build a hash of files collected by prefix\n#\nfor my $file ( glob '*.md5' ) {\n    next unless my ($prefix) = $file =~ / ^ ( [^_]+ ) /x;\n    push @{ $files{$prefix} }, $file;\n}\n\n\n# Check that there are exactly two files with each prefix\n#\n{\n    my $errors;\n\n    while ( my ($prefix, $files) = each %files ) {\n\n        my $n = @$files;\n\n        if ( @$files != 2 ) {\n            warn qq{$n files fouhd for prefix \"${prefix}_\"\\n};\n            ++$errors;\n        }\n    }\n\n    die \"Dying because errors found in source directory\" if $errors;\n}\n\n# Display every pair of files by prefix\n#\nwhile ( my ($prefix, $files) = each %files ) {\n\n    my ($file1, $file2) = sort @$files;\n\n    print \"Prefix: $prefix\\n\";\n\n    for my $file ( sort @$files ) {\n        open my $fh, '&lt;', $file;\n        my $md5 = &lt;$fh&gt;;\n        $md5 =~ s/\\s+\\z//;\n        print \"    File: $file\\n\";\n        print \"        MD5: $md5\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 347, "user_id": 4326515, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2ea648e2af03a3f5535a7a42564f8c0c?s=128&d=identicon&r=PG&f=1", "display_name": "noc_coder", "link": "https://stackoverflow.com/users/4326515/noc-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 36904724, "answer_count": 2, "score": 0, "last_activity_date": 1467569267, "creation_date": 1461790205, "last_edit_date": 1461792434, "question_id": 36900609, "link": "https://stackoverflow.com/questions/36900609/why-is-my-filehandler-empty-perl", "title": "Why is my filehandler empty?? PERL", "body": "<p>I am completely new to Perl and I have a section of code that is giving me back a empty filehandler. </p>\n\n<pre><code>my $md5dir = \"...plib/test/md5sum\";    #IN MY PROG, IS THE FULL PATH\nopendir( DIR, $md5dir ) or die \"Can't open directory $md5dir: $!\";\nmy @md5files = grep !/^\\.\\.?$/, readdir(DIR);\nclosedir(DIR);\n\nif (  scalar @md5files &lt; 1\n   || scalar @md5files &gt; 8\n   || ( scalar @md5files % 2 != 0 ) )\n{\n   print \"Incorrect amount of files in directory. Aborting.\\n\";\n   exit 1;\n}\nelse {\n   for ( my $i = 0; ( $i &lt; scalar @md5files / 2 ); $i++ ) {\n      my $file1 = $md5files[$i];\n      open( my $fh1, $file1 ) or die \"Fail to open file $file1 $!\";\n      my $file2 = $md5files[ $i + 3 ];\n      open( my $fh2, $file2 ) or die \"Fail to open file $file2 $!\";\n      print \"2.\", $file1, \" \", $file2, \"\\n\";\n      my $first1 = substr( $file1, 0, 4 );\n      my $first2 = substr( $file2, 0, 4 );\n      if ( ( $first1 cmp $first2 ) == 0 ) {\n         if   ( eof $fh1 ) { print \"No lines\\n\"; }\n         else              { my $line1 = &lt;$fh1&gt;; print \"$line1\\n\"; }\n         if   ( eof $fh2 ) { print \"No lines2\\n\"; }\n         else              { my $line2 = &lt;$fh2&gt;; print \"$line2\\n\"; }\n         close $fh1;\n         close $fh2;\n      }\n   }    # for\n}    # else\n</code></pre>\n\n<p>The output is such: </p>\n\n<pre><code>2.SAM5_27-04-2016_11:21:20.md5 SAM5_27-04-2016_11:20:11.md5\nNo lines\nNo lines2\n2.SAM6_27-04-2016_11:18:25.md5 SAM6_25-04-2016_10:38:38.md5\nNo lines\nNo lines2\n2.SAM4_27-04-2016_11:19:06.md5 SAM4_27-04-2016_11:17:22.md5\nNo lines\nNo lines2\n</code></pre>\n\n<p>In the directory for md5sum:</p>\n\n<pre><code>:md5sum&gt;ls -la\ntotal 16\ndrwxrwxr-x   2 ateam    ateam       4096 Apr 27 11:24 ./\ndrwxrwxr-x   4 ateam    ateam       4096 Apr 27 11:24 ../\n-rw-rw-r--   1 ateam    ateam         63 Apr 27 11:17 SAM4_27-04-2016_11:17:22.md5\n-rw-rw-r--   1 ateam    ateam         63 Apr 27 11:19 SAM4_27-04 2016_11:19:06.md5\n-rw-rw-r--   1 ateam    ateam         63 Apr 27 11:20 SAM5_27-04-2016_11:20:11.md5\n-rw-rw-r--   1 ateam    ateam          0 Apr 27 11:21 SAM5_27-04-2016_11:21:20.md5\n-rw-rw-r--   1 ateam    ateam         63 Apr 25 10:38 SAM6_25-04-2016_10:38:38.md5\n-rw-rw-r--   1 ateam    ateam         63 Apr 27 11:18 SAM6_27-04-2016_11:18:25.md5\n</code></pre>\n\n<p>Can someone explain why the filehandlers are coming up empty? I verified the printing of the files. They all print just fine into the array and the file handlers are opening... What else could be wrong since the files are not empty??? (well all except that one... )</p>\n\n<p>Just for a look into the file... in case that would matter. \nOpening the first file I get: </p>\n\n<pre><code>03c0cf2ab0da62832bfc6970d4505746  SAM4_27-04-2016_11:17:22.csv\n</code></pre>\n\n<p>EDIT::: \nI made a slight adjustment to the file: </p>\n\n<pre><code>if (($first1 cmp $first2) == 0) {\n            if (tell($fh1) == -1){ print \"No lines\\n\";}\n            else {my $line1= &lt;$fh1&gt;;  print \"$line1\\n\"; }\n            if (eof $fh2){ print \"No lines2\\n\";}\n            else { my $line2= &lt;$fh2&gt;; print \"$line2\\n\"; }\n            close $fh1;                     close $fh2;\n}\n</code></pre>\n\n<p>And got this output instead:</p>\n\n<pre><code>2.SAM5_27-04-2016_11:21:20.md5 SAM5_27-04-2016_11:20:11.md5\nUse of uninitialized value in concatenation (.) or string at mulftptest line 53.\n\nNo lines2\n2.SAM6_27-04-2016_11:18:25.md5 SAM6_25-04-2016_10:38:38.md5\nUse of uninitialized value in concatenation (.) or string at mulftptest line 53.\n\nNo lines2\n2.SAM4_27-04-2016_11:19:06.md5 SAM4_27-04-2016_11:17:22.md5\nUse of uninitialized value in concatenation (.) or string at mulftptest line 53.\n\nNo lines2\n</code></pre>\n\n<p>Essentially, I understand that this is telling me that I'm attempting to use a \"empty\" variable. However, I do not see why its empty. </p>\n"}, {"tags": ["perl", "vim"], "answers": [{"comments": [{"owner": {"reputation": 1474, "user_id": 751910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4d4ee1e65bd8c86f66c43eecfe42a3e6?s=128&d=identicon&r=PG", "display_name": "alexk", "link": "https://stackoverflow.com/users/751910/alexk"}, "edited": false, "score": 0, "creation_date": 1461795312, "post_id": 36901070, "comment_id": 61367840, "body": "Thanks. Placing this file <a href=\"https://raw.githubusercontent.com/vim-perl/vim-perl/master/syntax/perl.vim\" rel=\"nofollow noreferrer\">raw.githubusercontent.com/vim-perl/vim-perl/master/syntax/&hellip;</a> in my ~/.vim/syntax folder and adding the line you said in ~/.vimrc fixed my problem!"}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 3, "last_activity_date": 1461794463, "last_edit_date": 1461794463, "creation_date": 1461791870, "answer_id": 36901070, "question_id": 36900578, "link": "https://stackoverflow.com/questions/36900578/correct-syntax-highlighting-on-subroutine-signatures-in-vim/36901070#36901070", "title": "Correct syntax-highlighting on Subroutine Signatures in vim", "body": "<p>Preliminary support for signature highlighting was <a href=\"https://github.com/vim-perl/vim-perl/pull/151\" rel=\"nofollow\">added</a> in February, 2014, with <a href=\"https://github.com/vim-perl/vim-perl/issues/166\" rel=\"nofollow\">another tweak</a> in July, 2014. The Perl syntax file that came with my Vim 7.4 install says it was last changed in 2013, so you'll probably need to update.</p>\n\n<p>Install the latest version of <a href=\"https://github.com/vim-perl/vim-perl/tree/master\" rel=\"nofollow\">vim-perl</a> and add the following to your .vimrc:</p>\n\n<pre><code>let perl_sub_signatures = 1\n</code></pre>\n"}], "owner": {"reputation": 1474, "user_id": 751910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4d4ee1e65bd8c86f66c43eecfe42a3e6?s=128&d=identicon&r=PG", "display_name": "alexk", "link": "https://stackoverflow.com/users/751910/alexk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 0, "accepted_answer_id": 36901070, "answer_count": 1, "score": 2, "last_activity_date": 1461794463, "creation_date": 1461790077, "question_id": 36900578, "link": "https://stackoverflow.com/questions/36900578/correct-syntax-highlighting-on-subroutine-signatures-in-vim", "title": "Correct syntax-highlighting on Subroutine Signatures in vim", "body": "<p>I have perl 5.22 (with subroutine signatures) and vim 7.4.1689. (These come standard on Ubuntu 16.04)</p>\n\n<p>When I type subroutine signatures in the definition of a subroutine, I get the signature in red background, as if I typed something wrong that won't get accepted by perl.</p>\n\n<p>perl runs my code fine, however.</p>\n\n<p>How do I fix vim to accept the signature and not highlight it as an error?</p>\n\n<pre><code>sub sum($s, $t) {\n    print $s+$t, \"\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "web-services", "wcf", "soap", "lwp-useragent"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1461848868, "post_id": 36899336, "comment_id": 61393241, "body": "Doing SOAP by hand with just LWP is very hard work. Why don&#39;t you use <a href=\"https://metacpan.org/pod/distribution/XML-Compile-WSDL11/lib/XML/Compile/WSDL11.pod\" rel=\"nofollow noreferrer\">XML::Compile::WSDL</a> or <a href=\"http://p3rl.org/SOAP::Lite\" rel=\"nofollow noreferrer\">SOAP::Lite</a> instead?"}, {"owner": {"reputation": 11, "user_id": 6262903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1d40462104a26ca9a799bb89cee4073?s=128&d=identicon&r=PG&f=1", "display_name": "Baltazar Zamudio", "link": "https://stackoverflow.com/users/6262903/baltazar-zamudio"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462304721, "post_id": 36899336, "comment_id": 61578227, "body": "I had several issues installing XML::Compile::WSDL.  I tried SOAP::Lite but the vendor web services are very customized and I had a tough time getting it to work properly with SOAP::Lite.  It is easier to provide the full XML code, submit it and parse it with LWP."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6262903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1d40462104a26ca9a799bb89cee4073?s=128&d=identicon&r=PG&f=1", "display_name": "Baltazar Zamudio", "link": "https://stackoverflow.com/users/6262903/baltazar-zamudio"}, "is_accepted": false, "score": 0, "last_activity_date": 1462305043, "creation_date": 1462305043, "answer_id": 37013167, "question_id": 36899336, "link": "https://stackoverflow.com/questions/36899336/perl-wcf-web-service-call-fails/37013167#37013167", "title": "PERL WCF Web Service Call Fails", "body": "<p>I found out the issue.  </p>\n\n<p>There are two URLs for the report web service.  One to execute the report and a different one to retrieve the report.  I modified the LWP::UserAgent->new(agent => '') and the HTTP::Request->new(POST => '') to both point to <a href=\"https://service.com/services/BIStreamingService\" rel=\"nofollow\">https://service.com/services/BIStreamingService</a> when retrieving the report and now it works.</p>\n\n<p>Thank you!</p>\n"}], "owner": {"reputation": 11, "user_id": 6262903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1d40462104a26ca9a799bb89cee4073?s=128&d=identicon&r=PG&f=1", "display_name": "Baltazar Zamudio", "link": "https://stackoverflow.com/users/6262903/baltazar-zamudio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462305043, "creation_date": 1461785734, "last_edit_date": 1461786515, "question_id": 36899336, "link": "https://stackoverflow.com/questions/36899336/perl-wcf-web-service-call-fails", "title": "PERL WCF Web Service Call Fails", "body": "<p>I am making web service calls using PERL to one of our vendor provided web services.  The web services use SOAP 1.2 and WSHttpBinding.  </p>\n\n<p>I am able to make calls successfully to most of the calls in the web service, except for the RetrieveReport call.  The RetrieveReport call is supposed to stream a file.  However I am getting the response below.</p>\n\n<p>An example to call the RetrieveReport was provided using C# code mentioning to use the following binding.  However I have no clue how to do this in PERL.  If anyone can provide any assistance, I thank you in advance.</p>\n\n<p><strong>C# App Config Binding</strong></p>\n\n<pre><code>&lt;binding name=\"WSHttpBinding_IBIStreamService\" closeTimeout=\"00:02:00\"\n                    openTimeout=\"00:02:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:10:00\"\n                    bypassProxyOnLocal=\"false\" transactionFlow=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n                    maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"2147483647\"\n                    messageEncoding=\"Text\" textEncoding=\"utf-8\" useDefaultWebProxy=\"true\"\n                    allowCookies=\"false\"&gt;\n                    &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n                        maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n                    &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\"\n                        enabled=\"false\" /&gt;\n                    &lt;security mode=\"None\"&gt;\n                        &lt;transport clientCredentialType=\"Windows\" proxyCredentialType=\"None\"\n                            realm=\"\" /&gt;\n                        &lt;message clientCredentialType=\"Windows\" negotiateServiceCredential=\"true\" /&gt;\n                    &lt;/security&gt;\n                &lt;/binding&gt;\n</code></pre>\n\n<p><strong>PERL Code</strong></p>\n\n<pre><code>my $reportKey = 'report_key';\nmy $reportUri = 'report_uri';\n\nmy $xml = new XML::Simple;\nmy $userAgent = LWP::UserAgent-&gt;new(agent =&gt; 'https://service.com/services/BIDataService');\n\nmy $message = &lt;&lt;'.';\n&lt;s:Envelope xmlns:s=\"http://www.w3.org/2003/05/soap-envelope\" xmlns:a=\"http://www.w3.org/2005/08/addressing\"&gt;\n  &lt;s:Header&gt;\n  &lt;a:Action s:mustUnderstand=\"1\"&gt;http://service.com/dataservices/bistream/2/IBIStreamService/RetrieveReport&lt;/a:Action&gt; \n  &lt;h:ReportKey xmlns:h=\"http://service.com/dataservices/bistream/2\" xmlns=\"http://service.com/dataservices/bistream/2\"&gt;[ReportKey]&lt;/h:ReportKey&gt;\n  &lt;a:To s:mustUnderstand=\"1\"&gt;[ReportRetrievalUri]&lt;/a:To&gt; \n  &lt;/s:Header&gt;\n  &lt;s:Body xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"&gt;\n  &lt;RetrieveReportRequest xmlns=\"http://service.com/dataservices/bistream/2\" /&gt; \n  &lt;/s:Body&gt;\n  &lt;/s:Envelope&gt;\n.\n\n# Replace the dynamic values\n$message =~ s/\\[ReportKey\\]/$reportKey/g;\n$message =~ s/\\[ReportRetrievalUri\\]/$reportUri/g;\n\nmy $request = HTTP::Request-&gt;new(POST =&gt; $uri);\n\n$request-&gt;header(SOAPAction =&gt; '\"http://service.com/dataservices/bistream/2/IBIStreamService/RetrieveReport\"');\n$request-&gt;content($message);\n$request-&gt;content_type(\"application/soap+xml; charset=utf-8\");\n\nprint \"-- CONTENT --\\n\\n\";\nprint $request-&gt;content . \"\\n\\n\";\n\nmy $response = $userAgent-&gt;request($request);\n\nif ($response-&gt;is_success) {\n    print \"--SUCCESS--\\n\" . $response-&gt;decoded_content . \"\\n\";\n} else {\n    print \"--FAILURE--\\n\" . $response-&gt;status_line, \"\\n\";\n    print $response-&gt;error_as_HTML;\n}\n</code></pre>\n\n<p><strong>Response From Vendor</strong></p>\n\n<pre><code>&lt;s:Envelope xmlns:s=\"http://www.w3.org/2003/05/soap-envelope\" xmlns:a=\"http://www.w3.org/2005/08/addressing\"&gt;\n    &lt;s:Header&gt;\n        &lt;a:Action s:mustUnderstand=\"1\"&gt;http://www.w3.org/2005/08/addressing/fault&lt;/a:Action&gt;\n    &lt;/s:Header&gt;\n    &lt;s:Body&gt;\n        &lt;s:Fault&gt;\n            &lt;s:Code&gt;\n                &lt;s:Value&gt;s:Sender&lt;/s:Value&gt;\n                &lt;s:Subcode&gt;\n                    &lt;s:Value&gt;a:ActionNotSupported&lt;/s:Value&gt;\n                &lt;/s:Subcode&gt;\n            &lt;/s:Code&gt;\n            &lt;s:Reason&gt;\n                &lt;s:Text xml:lang=\"en-US\"&gt;The message with Action \\'http://service.com/dataservices/bistream/2/IBIStreamService/RetrieveReport\\' cannot be processed at the receiver, due to a ContractFilter mismatch at the EndpointDispatcher. This may be because of either a contract mismatch (mismatched Actions between sender and receiver) or a binding/security mismatch between the sender and the receiver.  Check that sender and receiver have the same contract and the same binding (including security requirements, e.g. Message, Transport, None).&lt;/s:Text&gt;\n            &lt;/s:Reason&gt;\n        &lt;/s:Fault&gt;\n    &lt;/s:Body&gt;\n&lt;/s:Envelope&gt;\n</code></pre>\n\n<p><strong>WSDL Source</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;wsdl:definitions name=\"BIStreamService\" targetNamespace=\"http://tempuri.org/\" xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\" xmlns:soap=\"http://schemas.xmlsoap.org/wsdl/soap/\" xmlns:soap12=\"http://schemas.xmlsoap.org/wsdl/soap12/\" xmlns:tns=\"http://tempuri.org/\" xmlns:wsa=\"http://schemas.xmlsoap.org/ws/2004/08/addressing\" xmlns:wsx=\"http://schemas.xmlsoap.org/ws/2004/09/mex\" xmlns:wsap=\"http://schemas.xmlsoap.org/ws/2004/08/addressing/policy\" xmlns:wsaw=\"http://www.w3.org/2006/05/addressing/wsdl\" xmlns:msc=\"http://schemas.microsoft.com/ws/2005/12/wsdl/contract\" xmlns:i0=\"http://service.com/dataservices/bistream/2\" xmlns:wsp=\"http://schemas.xmlsoap.org/ws/2004/09/policy\" xmlns:wsa10=\"http://www.w3.org/2005/08/addressing\" xmlns:wsam=\"http://www.w3.org/2007/05/addressing/metadata\"&gt;\n    &lt;wsp:Policy wsu:Id=\"WSHttpBinding_IBIStreamService_policy\"&gt;\n        &lt;wsp:ExactlyOne&gt;\n            &lt;wsp:All&gt;\n                &lt;wsaw:UsingAddressing/&gt;\n            &lt;/wsp:All&gt;\n        &lt;/wsp:ExactlyOne&gt;\n    &lt;/wsp:Policy&gt;\n    &lt;wsdl:import namespace=\"http://service.com/dataservices/bistream/2\" location=\"https://service.com/services/BIStreamingService?wsdl=wsdl0\"/&gt;\n    &lt;wsdl:types/&gt;\n    &lt;wsdl:binding name=\"WSHttpBinding_IBIStreamService\" type=\"i0:IBIStreamService\"&gt;\n        &lt;wsp:PolicyReference URI=\"#WSHttpBinding_IBIStreamService_policy\"/&gt;\n        &lt;soap12:binding transport=\"http://schemas.xmlsoap.org/soap/http\"/&gt;\n        &lt;wsdl:operation name=\"RetrieveReport\"&gt;\n            &lt;soap12:operation soapAction=\"http://service.com/dataservices/bistream/2/IBIStreamService/RetrieveReport\" style=\"document\"/&gt;\n            &lt;wsdl:input name=\"RetrieveReportRequest\"&gt;\n                &lt;soap12:header message=\"i0:RetrieveReportRequest_Headers\" part=\"ReportKey\" use=\"literal\"/&gt;\n                &lt;soap12:body use=\"literal\"/&gt;\n            &lt;/wsdl:input&gt;\n            &lt;wsdl:output name=\"StreamReportResponse\"&gt;\n                &lt;soap12:header message=\"i0:StreamReportResponse_Headers\" part=\"Status\" use=\"literal\"/&gt;\n                &lt;soap12:header message=\"i0:StreamReportResponse_Headers\" part=\"StatusMessage\" use=\"literal\"/&gt;\n                &lt;soap12:body use=\"literal\"/&gt;\n            &lt;/wsdl:output&gt;\n        &lt;/wsdl:operation&gt;\n    &lt;/wsdl:binding&gt;\n    &lt;wsdl:binding name=\"BasicHttpBinding_IBIStreamService\" type=\"i0:IBIStreamService\"&gt;\n        &lt;soap:binding transport=\"http://schemas.xmlsoap.org/soap/http\"/&gt;\n        &lt;wsdl:operation name=\"RetrieveReport\"&gt;\n            &lt;soap:operation soapAction=\"http://service.com/dataservices/bistream/2/IBIStreamService/RetrieveReport\" style=\"document\"/&gt;\n            &lt;wsdl:input name=\"RetrieveReportRequest\"&gt;\n                &lt;soap:header message=\"i0:RetrieveReportRequest_Headers\" part=\"ReportKey\" use=\"literal\"/&gt;\n                &lt;soap:body use=\"literal\"/&gt;\n            &lt;/wsdl:input&gt;\n            &lt;wsdl:output name=\"StreamReportResponse\"&gt;\n                &lt;soap:header message=\"i0:StreamReportResponse_Headers\" part=\"Status\" use=\"literal\"/&gt;\n                &lt;soap:header message=\"i0:StreamReportResponse_Headers\" part=\"StatusMessage\" use=\"literal\"/&gt;\n                &lt;soap:body use=\"literal\"/&gt;\n            &lt;/wsdl:output&gt;\n        &lt;/wsdl:operation&gt;\n    &lt;/wsdl:binding&gt;\n    &lt;wsdl:service name=\"BIStreamService\"&gt;\n        &lt;wsdl:port name=\"WSHttpBinding_IBIStreamService\" binding=\"tns:WSHttpBinding_IBIStreamService\"&gt;\n            &lt;soap12:address location=\"https://service.com/services/BIStreamingService\"/&gt;\n            &lt;wsa10:EndpointReference&gt;\n                &lt;wsa10:Address&gt;https://service.com/services/BIStreamingService&lt;/wsa10:Address&gt;\n            &lt;/wsa10:EndpointReference&gt;\n        &lt;/wsdl:port&gt;\n        &lt;wsdl:port name=\"BasicHttpBinding_IBIStreamService\" binding=\"tns:BasicHttpBinding_IBIStreamService\"&gt;\n            &lt;soap:address location=\"https://service.com/services/BIStreamingService\"/&gt;\n        &lt;/wsdl:port&gt;\n    &lt;/wsdl:service&gt;\n&lt;/wsdl:definitions&gt;\n</code></pre>\n"}, {"tags": ["regex", "perl", "mismatch"], "comments": [{"owner": {"reputation": 10272, "user_id": 1996394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bb7cf5d8bf03c5335a0ece8f6673541d?s=128&d=identicon&r=PG", "display_name": "rock321987", "link": "https://stackoverflow.com/users/1996394/rock321987"}, "edited": false, "score": 3, "creation_date": 1461785051, "post_id": 36899093, "comment_id": 61362302, "body": "you need edit distance and not regex for this task"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1461786469, "post_id": 36899093, "comment_id": 61363182, "body": "this question was closed as a duplicate of <a href=\"https://stackoverflow.com/questions/4155840/fuzzy-regular-expressions\" title=\"fuzzy regular expressions\">stackoverflow.com/questions/4155840/fuzzy-regular-expression&zwnj;&#8203;s</a>, but that question doesn&#39;t deal with searching in a larger string."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1461786583, "post_id": 36899093, "comment_id": 61363247, "body": "are mismatches just changed characters, not added/deleted/swapped ones?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1461786636, "post_id": 36899093, "comment_id": 61363283, "body": "how long are the strings you are actually looking for?"}, {"owner": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "edited": false, "score": 0, "creation_date": 1461788338, "post_id": 36899093, "comment_id": 61364319, "body": "searching for a string (around 20 characters) if present in another string (1000 characters), check for partial string if present- just one or two positions anywhere in 20 character string&#39;s position (no deletion, addition, exact 20 characters)"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1463778291, "post_id": 36900848, "comment_id": 62226996, "body": "Not quite. <code>MTCH</code> would match, but the OP mentioned in a comment that only substitutions are allowed, not insertions or deletions. I think your solution can be fixed by using <code>use re::engine::TRE        max_cost =&gt; 2,        max_ins  =&gt; 0,        max_del  =&gt; 0;</code> instead or <code>use re::engine::TRE max_cost =&gt; 2;</code>."}, {"owner": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1464144135, "post_id": 36900848, "comment_id": 62358749, "body": "@ikegami I tried <code>use re::engine::TRE max_cost =&gt; 2, max_ins =&gt; 0, max_del =&gt; 0;</code> but <code>MTCH</code> matched too"}, {"owner": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "reply_to_user": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "edited": false, "score": 0, "creation_date": 1482651933, "post_id": 36900848, "comment_id": 69842543, "body": "@SSh Seems like a bug. This works: <code>use re::engine::TRE max_cost =&gt; 2, cost_ins =&gt; -1, cost_del =&gt; -1;</code>"}], "tags": [], "owner": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "is_accepted": false, "score": 2, "last_activity_date": 1461796255, "last_edit_date": 1461796255, "creation_date": 1461791039, "answer_id": 36900848, "question_id": 36899093, "link": "https://stackoverflow.com/questions/36899093/perl-mismatch-string-search/36900848#36900848", "title": "perl mismatch string search", "body": "<p>As far as I know there is only one convenient solution using a special REGEX engine: <a href=\"https://metacpan.org/pod/re::engine::TRE\" rel=\"nofollow\">https://metacpan.org/pod/re::engine::TRE</a>. </p>\n\n<p>Here the solution for your example:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse re::engine::TRE max_cost =&gt; 2;\n\nmy $find = \"MATCH\";\nmy $search = \"stringisMATTHhere\";\n\nif ($search =~ /\\($find\\)/) {\n    print $1,\"\\n\";\n}\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>$ perl fuzzy_re.pl \nMATTH\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 0, "last_activity_date": 1461895517, "last_edit_date": 1461895517, "creation_date": 1461791152, "answer_id": 36900884, "question_id": 36899093, "link": "https://stackoverflow.com/questions/36899093/perl-mismatch-string-search/36900884#36900884", "title": "perl mismatch string search", "body": "<p>I got re-interested in this so I thought I'd try something with a little more<br>\nvariability in a controlled way.</p>\n\n<p>Features:<br>\n- Can set a min/max mismatch range for individual find's.<br>\n- Can set a flag to exclude/include space 0x20 or less in the mismatch count.<br>\n- Automatically escape meta-chars in find's.</p>\n\n<p>That's it.<br>\n<em>Good Luck!!</em>   </p>\n\n<hr>\n\n<p>Regex:  </p>\n\n<pre><code> (?s)\n (?{ $cnt = 0; $lcnt = 0 })\n (?:\n      (?&gt;\n           (??{ $aryinput[$lcnt++] })\n        |  (?&amp;getexpr) \n      )\n ){$len}\n (??{ $cnt &gt;= $mincnt &amp;&amp; $cnt &lt;= $maxcnt ? '' : '(?!)' })\n\n (?(DEFINE)\n      (?&lt;getexpr&gt;\n           (??{ ++$cnt &lt;= $maxcnt ? \n                 ( $visible_only ? \n                      ( $aryinput[$lcnt-1] le ' '  ?\n                           '(?!)'\n                        :  '[^\\x{0}-\\x{20}]'\n                      )\n                   :  '.'\n                 )\n              :  '(?!)'\n           })\n      )\n )\n</code></pre>\n\n<p>Perl code:  </p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $target = \n   \"\n   one mismatch: MSTCH, AATCH, MACCH, etc. and two mismatches: ATTCH, MGGCH,\n   MA1CH T23S  \n   M.1CH T23S  \n   MAT1 H2T3IS\n   0M[T2CH  THaS\n   0M[T2CH THaS\n   MA1CH    THIS\n   MATCH    THIS\n   MATCHT1IS\n   MA1CH THIS\n   MAT1H THIb\n   MATCH THIS\n   MArCH THIS\n   AATCH THIS\n   [()+?.*{}|]\n   [()X?.*{}|]\n   [()+?.SS}|]\n   \";\n\nmy @aryinput = ();\nmy ($rx, $find, $visible_only, $len, $cnt, $mincnt, $maxcnt, $lcnt) = ('', '',0,0,0,0,0,0);\n\nmy @TestRuns = (\n    { find =&gt; 'MATCH THIS', visible =&gt; 1, min =&gt; 0, max =&gt; 3 },\n    { find =&gt; 'MATCH', visible =&gt; 1, min =&gt; 0, max =&gt; 3 },\n    { find =&gt; 'MATCH THIS', visible =&gt; 0, min =&gt; 0, max =&gt; 3 },\n    { find =&gt; 'MATCH', visible =&gt; 0, min =&gt; 2, max =&gt; 3 },\n    { find =&gt; 'MATCH', visible =&gt; 0, min =&gt; 1, max =&gt; 1 },\n    { find =&gt; '[()+?.*{}|]', visible =&gt; 1, min =&gt; 1, max =&gt; 3 },\n  );\n\nfor ( @TestRuns )\n{\n   GetParms( $_ );\n   SetFindArray( $find );\n\n   print \"\\nFind($len), \", ($visible_only ? \"not counting control char\" : \"counting any char\"), \", minmax($mincnt,$maxcnt):\\n'$find'\\n\";\n   while( $target =~ /$rx/g )\n   {\n       print \"    cnt($cnt) : '$&amp;'\\n\";\n   }\n}\n\n# ==================================  \n# ================================== \n\nsub GetParms\n{\n   my ($href) = @_;\n   ( $find, $visible_only, $mincnt, $maxcnt ) = \n   ( $$href{find}, $$href{visible}, $$href{min}, $$href{max} );\n}\nsub SetFindArray\n{\n    my ($inp) = @_;\n    @aryinput = ();\n    @aryinput = map {  s/([\\\\().?*+{}|\\[\\]])/\\\\$1/; $_  } split '', $inp;\n    $len = @aryinput;\n    $rx = qr/(?s)(?{ $cnt = 0; $lcnt = 0 })(?s)(?:(?&gt;(??{ $aryinput[$lcnt++] })|(?&amp;getexpr))){$len}(??{ $cnt &gt;= $mincnt &amp;&amp; $cnt &lt;= $maxcnt ? '' : '(?!)' })(?(DEFINE)(?&lt;getexpr&gt;(??{ ++$cnt &lt;= $maxcnt ? \n                     ( $visible_only ? \n                          ( $aryinput[$lcnt-1] le ' '  ?\n                               '(?!)'\n                            :  '[^\\x{0}-\\x{20}]'\n                          )\n                       :  '.'\n                     )\n                  :  '(?!)'\n               })))/;\n}\n</code></pre>\n\n<p>Output:  </p>\n\n<pre><code>Find(10), not counting control char, minmax(0,3):\n'MATCH THIS'\n    cnt(3) : 'MA1CH T23S'\n    cnt(1) : 'MA1CH THIS'\n    cnt(2) : 'MAT1H THIb'\n    cnt(0) : 'MATCH THIS'\n    cnt(1) : 'MArCH THIS'\n    cnt(1) : 'AATCH THIS'\n\nFind(5), not counting control char, minmax(0,3):\n'MATCH'\n    cnt(1) : 'MSTCH'\n    cnt(1) : 'AATCH'\n    cnt(1) : 'MACCH'\n    cnt(2) : 'ATTCH'\n    cnt(2) : 'MGGCH'\n    cnt(1) : 'MA1CH'\n    cnt(2) : 'M.1CH'\n    cnt(3) : 'M[T2C'\n    cnt(3) : 'M[T2C'\n    cnt(1) : 'MA1CH'\n    cnt(0) : 'MATCH'\n    cnt(0) : 'MATCH'\n    cnt(1) : 'MA1CH'\n    cnt(1) : 'MAT1H'\n    cnt(0) : 'MATCH'\n    cnt(1) : 'MArCH'\n    cnt(1) : 'AATCH'\n\nFind(10), counting any char, minmax(0,3):\n'MATCH THIS'\n    cnt(3) : 'MA1CH T23S'\n    cnt(2) : 'MA1CH     THIS'\n    cnt(1) : 'MATCH     THIS'\n    cnt(1) : 'MA1CH THIS'\n    cnt(2) : 'MAT1H THIb'\n    cnt(0) : 'MATCH THIS'\n    cnt(1) : 'MArCH THIS'\n    cnt(1) : 'AATCH THIS'\n\nFind(5), counting any char, minmax(2,3):\n'MATCH'\n    cnt(3) : ' ATTC'\n    cnt(2) : 'MGGCH'\n    cnt(2) : 'M.1CH'\n    cnt(2) : 'MAT1 '\n    cnt(3) : 'M[T2C'\n    cnt(3) : 'M[T2C'\n\nFind(5), counting any char, minmax(1,1):\n'MATCH'\n    cnt(1) : 'MSTCH'\n    cnt(1) : 'AATCH'\n    cnt(1) : 'MACCH'\n    cnt(1) : 'MA1CH'\n    cnt(1) : 'MA1CH'\n    cnt(1) : 'MA1CH'\n    cnt(1) : 'MAT1H'\n    cnt(1) : 'MArCH'\n    cnt(1) : 'AATCH'\n\nFind(11), not counting control char, minmax(1,3):\n'[()+?.*{}|]'\n    cnt(1) : '[()X?.*{}|]'\n    cnt(2) : '[()+?.SS}|]'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "edited": false, "score": 0, "creation_date": 1461793217, "post_id": 36900892, "comment_id": 61366903, "body": "Using a dot <code>.</code> instead of <code>\\w</code> would be more general, depending on the requirements."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "edited": false, "score": 0, "creation_date": 1461793446, "post_id": 36900892, "comment_id": 61367023, "body": "Probably want to use <code>&#47;s</code> with <code>.</code>, but again, depends on the requirements."}, {"owner": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "edited": false, "score": 0, "creation_date": 1463711978, "post_id": 36900892, "comment_id": 62191633, "body": "@ikegami : this works great for two mismatches. How do I modify the code for only one mismatch. I was not able to modify. Thanks"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1463777756, "last_edit_date": 1463777756, "creation_date": 1461791191, "answer_id": 36900892, "question_id": 36899093, "link": "https://stackoverflow.com/questions/36899093/perl-mismatch-string-search/36900892#36900892", "title": "perl mismatch string search", "body": "<p>So you want to do</p>\n\n<pre><code>/\n   ..TCH | .A.CH | .AT.H | .ATC. |\n   M..CH | M.T.H | M.TC. | \n   MA..H | MA.C. |\n   MAT..\n/x\n</code></pre>\n\n<p>or</p>\n\n<pre><code>/\n   \\w\\wTCH | \\wA\\wCH | \\wAT\\wH | \\wATC\\w |\n   M\\w\\wCH | M\\wT\\wH | M\\wTC\\w | \n   MA\\w\\wH | MA\\wC\\w |\n   MAT\\w\\w\n/x\n</code></pre>\n\n<p>Easy enough:</p>\n\n<pre><code>my @subpats;\nfor my $i (0..length($find)-1) {\n   for my $j ($i+1..length($find)-1) {\n      my $subpat = join('',\n         substr($find, 0, $i),\n         '.',  # or '\\\\w'\n         substr($find, $i+1, $j-$i-1),\n         '.',  # or '\\\\w'\n         substr($find, $j+1),\n      );\n      push @subpats, $subpat;\n   }\n}\n\nmy $pat = join('|', @subpats);\n\n$search =~ /$pat/\n</code></pre>\n\n<p>Perl 5.10+ trie-based alternations should optimize the common leading prefixes into something efficient. Saves us the trouble of generating <code>(?:.\u2026|M\u2026)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "is_accepted": false, "score": 2, "last_activity_date": 1461795962, "last_edit_date": 1461795962, "creation_date": 1461795365, "answer_id": 36901913, "question_id": 36899093, "link": "https://stackoverflow.com/questions/36899093/perl-mismatch-string-search/36901913#36901913", "title": "perl mismatch string search", "body": "<p>If the searched string should have the same length (i.e. only mismatches allowed) as stated in a later comment, you can use Hamming distance, which is very fast:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $find = \"MATCH\";\nmy $search = \"stringisMATTHhere\";\n\nmy $max_distance = 2;\n\nfor my $offset (0..length($search)-length($find)) {\n  my $hd = hd($find,substr($search,$offset,length($find)));\n  if ($hd &lt;= $max_distance) {\n    print substr($search,$offset,length($find)),\"\\n\";\n  }\n}\n\n# assumes byte mode\nsub hd {\n  return ($_[0] ^ $_[1]) =~ tr/\\001-\\255//;\n}\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1108, "favorite_count": 0, "accepted_answer_id": 36900892, "answer_count": 4, "score": 0, "last_activity_date": 1463777756, "creation_date": 1461784990, "last_edit_date": 1461785138, "question_id": 36899093, "link": "https://stackoverflow.com/questions/36899093/perl-mismatch-string-search", "title": "perl mismatch string search", "body": "<p>How to find if a string is present with one or two mismatch in another string?</p>\n\n<pre><code>my $find = \"MATCH\";\nmy $search = \"stringisMATTHhere\";\n\n# $search has one mismatch: MATTH\n# for exact match, this one seems working\nif   ($search =~ /$find/){\n       print \"String found\";\n     }\nelse {\n       print \"String not found\";\n     }\n</code></pre>\n\n<p>How can I solve this issue with one mismatch: MSTCH, AATCH, MACCH, etc. and two mismatches: ATTCH, MGGCH, etc</p>\n"}, {"tags": ["perl", "asynchronous", "anyevent"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 6250812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb991df4bc026bd841c1c8a7c56ada30?s=128&d=identicon&r=PG&f=1", "display_name": "alan", "link": "https://stackoverflow.com/users/6250812/alan"}, "edited": false, "score": 0, "creation_date": 1461790640, "post_id": 36899413, "comment_id": 61365645, "body": "I&#39;m getting a lot of &quot;callback function is not set&quot;. It seems that it shows when there&#39;s a domain in URL Host. Im not getting this error if I use a IP. Also, if I put f.e. <code>print &quot;got it!&quot;;</code> where the <code># process $easy</code> is, the page content is automatically printed."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 91, "user_id": 6250812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb991df4bc026bd841c1c8a7c56ada30?s=128&d=identicon&r=PG&f=1", "display_name": "alan", "link": "https://stackoverflow.com/users/6250812/alan"}, "edited": false, "score": 0, "creation_date": 1461793174, "post_id": 36899413, "comment_id": 61366881, "body": "Fixed it so the content is stored in $easy rather than printed. I don&#39;t get the callback error you get?? [Try it with the change. It might be related]"}, {"owner": {"reputation": 91, "user_id": 6250812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb991df4bc026bd841c1c8a7c56ada30?s=128&d=identicon&r=PG&f=1", "display_name": "alan", "link": "https://stackoverflow.com/users/6250812/alan"}, "edited": false, "score": 0, "creation_date": 1461825254, "post_id": 36899413, "comment_id": 61377119, "body": "Thanks for help. Unfortunatelly I still get &quot;callback function is not set&quot;. Actually 4 times, then Your <code>printf</code>. I dont know where it comes from."}, {"owner": {"reputation": 91, "user_id": 6250812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb991df4bc026bd841c1c8a7c56ada30?s=128&d=identicon&r=PG&f=1", "display_name": "alan", "link": "https://stackoverflow.com/users/6250812/alan"}, "edited": false, "score": 0, "creation_date": 1461825451, "post_id": 36899413, "comment_id": 61377205, "body": "<a href=\"https://metacpan.org/changes/release/SYP/LWP-Protocol-Net-Curl-0.016\" rel=\"nofollow noreferrer\">metacpan.org/changes/release/SYP/LWP-Protocol-Net-Curl-0.016</a> - <code>minor fix: &quot;callback function is not set&quot; warning when libcurl has the    AsynchDNS feature</code> - same author."}, {"owner": {"reputation": 91, "user_id": 6250812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb991df4bc026bd841c1c8a7c56ada30?s=128&d=identicon&r=PG&f=1", "display_name": "alan", "link": "https://stackoverflow.com/users/6250812/alan"}, "edited": false, "score": 1, "creation_date": 1461866933, "post_id": 36899413, "comment_id": 61406238, "body": "Recompiling curl without <code>--enable-ares</code> helped and now I dont get &quot;&quot;callback function is not set&quot;."}, {"owner": {"reputation": 91, "user_id": 6250812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb991df4bc026bd841c1c8a7c56ada30?s=128&d=identicon&r=PG&f=1", "display_name": "alan", "link": "https://stackoverflow.com/users/6250812/alan"}, "edited": false, "score": 0, "creation_date": 1461914863, "post_id": 36899413, "comment_id": 61423983, "body": "I updated my &quot;question&quot; post with final script. If I may ask, please take a look ;)."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1461792703, "last_edit_date": 1461792703, "creation_date": 1461785992, "answer_id": 36899413, "question_id": 36898569, "link": "https://stackoverflow.com/questions/36898569/understanding-async-in-perl-on-specific-example/36899413#36899413", "title": "Understanding async in perl on specific example", "body": "<p>Net::Curl is a rather good library that's extremely fast. Furthermore, it can handle parallel requests too! I'd recommend using this instead of AnyEvent.</p>\n\n<pre><code>use Net::Curl::Easy  qw( :constants );\nuse Net::Curl::Multi qw( );\n\nsub make_request {\n    my ( $url ) = @_;\n    my $easy = Net::Curl::Easy-&gt;new();\n    $easy-&gt;{url} = $url;\n    $easy-&gt;setopt( CURLOPT_URL,        $url );\n    $easy-&gt;setopt( CURLOPT_HEADERDATA, \\$easy-&gt;{head} );\n    $easy-&gt;setopt( CURLOPT_FILE,       \\$easy-&gt;{body} );\n    return $easy;\n}\n\nmy $max_running = 10;\nmy @urls = ( 'http://www.google.com/' );\n\nmy $multi = Net::Curl::Multi-&gt;new();\nmy $running = 0;\nwhile (1) {\n    while ( @urls &amp;&amp; $running &lt; $max_running ) {\n       my $easy = make_request( shift( @urls ) );\n       $multi-&gt;add_handle( $easy );\n       ++$running;\n    }\n\n    last if !$running;\n\n    my ( $r, $w, $e ) = $multi-&gt;fdset();\n    my $timeout = $multi-&gt;timeout();\n    select( $r, $w, $e, $timeout / 1000 )\n        if $timeout &gt; 0;\n\n    $running = $multi-&gt;perform();\n    while ( my ( $msg, $easy, $result ) = $multi-&gt;info_read() ) {\n        $multi-&gt;remove_handle( $easy );\n        printf( \"%s getting %s\\n\", $easy-&gt;getinfo( CURLINFO_RESPONSE_CODE ), $easy-&gt;{url} );\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 6250812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb991df4bc026bd841c1c8a7c56ada30?s=128&d=identicon&r=PG&f=1", "display_name": "alan", "link": "https://stackoverflow.com/users/6250812/alan"}, "edited": false, "score": 1, "creation_date": 1461867573, "post_id": 36912345, "comment_id": 61406568, "body": "Although Your idea is great and meet all my requirements, Ikegami&#39;s solution is much more understandable and readable for me. Thanks for Your input. Its great to see many ways to achieve same goal."}], "tags": [], "owner": {"reputation": 5025, "user_id": 1818793, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/03f7024d42a75186c77303cee666a857?s=128&d=identicon&r=PG", "display_name": "creaktive", "link": "https://stackoverflow.com/users/1818793/creaktive"}, "is_accepted": false, "score": 2, "last_activity_date": 1461840302, "creation_date": 1461840302, "answer_id": 36912345, "question_id": 36898569, "link": "https://stackoverflow.com/questions/36898569/understanding-async-in-perl-on-specific-example/36912345#36912345", "title": "Understanding async in perl on specific example", "body": "<p>This does exactly what you want, in an asynchronous fashion, and it does that by wrapping <code>Net::Curl</code> in a safe fashion:</p>\n\n<pre><code>#!/usr/bin/env perl\n\npackage MyDownloader;\nuse strict;\nuse warnings qw(all);\n\nuse Moo;\n\nextends 'YADA::Worker';\n\nhas '+use_stats'=&gt; (default =&gt; sub { 1 });\nhas '+retry'    =&gt; (default =&gt; sub { 10 });\n\nafter init =&gt; sub {\n    my ($self) = @_;\n\n    $self-&gt;setopt(\n        encoding            =&gt; '',\n        verbose             =&gt; 1,\n    );\n};\n\nafter finish =&gt; sub {\n    my ($self, $result) = @_;\n\n    if ($self-&gt;has_error) {\n        print \"ERROR: $result\\n\";\n    } else {\n        # do the interesting stuff here\n        printf \"Finished downloading %s: %d bytes\\n\", $self-&gt;final_url, length ${$self-&gt;data};\n    }\n};\n\naround has_error =&gt; sub {\n    my $orig = shift;\n    my $self = shift;\n\n    return 1 if $self-&gt;$orig(@_);\n    return 1 if $self-&gt;getinfo('response_code') =~ m{^5[0-9]{2}$}x;\n};\n\n1;\n\npackage main;\nuse strict;\nuse warnings qw(all);\n\nuse Carp;\n\nuse YADA;\n\nmy $q = YADA-&gt;new(\n    max     =&gt; 8,\n    timeout =&gt; 30,\n);\n\nopen(my $fh, '&lt;', 'file_with_urls_per_line.txt')\n    or croak \"can't open queue: $!\";\nwhile (my $url = &lt;$fh&gt;) {\n    chomp $url;\n\n    $q-&gt;append(sub {\n        MyDownloader-&gt;new($url)\n    });\n}\nclose $fh;\n$q-&gt;wait;\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 6250812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb991df4bc026bd841c1c8a7c56ada30?s=128&d=identicon&r=PG&f=1", "display_name": "alan", "link": "https://stackoverflow.com/users/6250812/alan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 862, "favorite_count": 2, "accepted_answer_id": 36899413, "answer_count": 2, "score": 5, "last_activity_date": 1461876524, "creation_date": 1461783362, "last_edit_date": 1461876524, "question_id": 36898569, "link": "https://stackoverflow.com/questions/36898569/understanding-async-in-perl-on-specific-example", "title": "Understanding async in perl on specific example", "body": "<p>I have to write a script that get some URLs in parallel and do some work. In the past I have always used <code>Parallel::ForkManager</code> for such things, but now I wanted to learn something new and try asynchronous programming with <code>AnyEvent</code> (and <code>AnyEvent::HTTP</code> or <code>AnyEvent::Curl::Multi</code>) ... but I'm having problem understanding AnyEvent and writing a script that should:</p>\n\n<ul>\n<li>open a file (every line is a seperate URL)</li>\n<li>(from now in parallel, but with a limit for f.e. 10 concurrent requests)</li>\n<li>read file line after line (I dont want to load whole file to memory - it might be big)</li>\n<li>make a HTTP request for that URL</li>\n<li>read response</li>\n<li>updates MySQL record accordingly</li>\n<li>(next file line)</li>\n</ul>\n\n<p>I have read many manuals, tutorials, but its still hard for me to understand differences between blocking and non-blocking code. I have found similar script at <a href=\"http://perlmaven.com/fetching-several-web-pages-in-parallel-using-anyevent\" rel=\"nofollow\">http://perlmaven.com/fetching-several-web-pages-in-parallel-using-anyevent</a>, where Mr. Szabo explains the basics, but I still cant understand how to implement something like:</p>\n\n<pre><code>...\nopen my $fh, \"&lt;\", $file;\nwhile ( my $line = &lt;$fh&gt; )\n{\n# http request, read response, update MySQL\n}\nclose $fh\n...\n</code></pre>\n\n<p>... and add a concurrency limit in this case.</p>\n\n<p>I would be very grateful for help ;)</p>\n\n<h1>UPDATE</h1>\n\n<p>Following Ikegami's advice I gave <code>Net::Curl::Multi</code> a try. I'm very pleased with results. After years of using <code>Parallel::ForkManager</code> just for concurrent grabbing thousands of URLs, <code>Net::Curl::Multi</code> seems to be awesome.\nHere is my code with <code>while</code> loop on filehandle. It seems to work as it should, but considering it's my first time writing something like this I would like to ask more experienced Perl users to take a look and tell me if there are some potential bugs, something I missed, etc.\nAlso, if I may ask: as I don't fully understand how <code>Net::Curl::Multi</code>'s concurrency works, please tell me whether I should expect any problems with putting MySQL UPDATE command (via <code>DBI</code>) inside <code>RESPONSE</code> loop (besides higher server load obviously - I expect final script to run with about 50 concurrent <code>N::C::M</code> workers, maybe more).</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse Net::Curl::Easy  qw( :constants );\nuse Net::Curl::Multi qw( );\n\nsub make_request {\n    my ( $url ) = @_;\n    my $easy = Net::Curl::Easy-&gt;new();\n    $easy-&gt;{url} = $url;\n    $easy-&gt;setopt( CURLOPT_URL,        $url );\n    $easy-&gt;setopt( CURLOPT_HEADERDATA, \\$easy-&gt;{head} );\n    $easy-&gt;setopt( CURLOPT_FILE,       \\$easy-&gt;{body} );\n    return $easy;\n}\n\nmy $maxWorkers = 10;\n\nmy $multi = Net::Curl::Multi-&gt;new();\nmy $workers = 0;\n\nmy $i = 1;\nopen my $fh, \"&lt;\", \"urls.txt\";\nLINE: while ( my $url = &lt;$fh&gt; )\n{\n    chomp( $url );\n    $url .= \"?$i\";\n    print \"($i) $url\\n\";\n    my $easy = make_request( $url );\n    $multi-&gt;add_handle( $easy );\n    $workers++;\n\n    my $running = 0;\n    do {\n        my ($r, $w, $e) = $multi-&gt;fdset();\n        my $timeout = $multi-&gt;timeout();\n        select $r, $w, $e, $timeout / 1000\n        if $timeout &gt; 0;\n\n        $running = $multi-&gt;perform();\n        RESPONSE: while ( my ( $msg, $easy, $result ) = $multi-&gt;info_read() ) {\n            $multi-&gt;remove_handle( $easy );\n            $workers--;\n            printf( \"%s getting %s\\n\", $easy-&gt;getinfo( CURLINFO_RESPONSE_CODE ), $easy-&gt;{url} );\n        }\n\n        # dont max CPU while waiting\n        select( undef, undef, undef, 0.01 );\n    } while ( $workers == $maxWorkers || ( eof &amp;&amp; $running ) );\n    $i++;\n}\nclose $fh;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1461782664, "post_id": 36898249, "comment_id": 61360777, "body": "That is correct. I don&#39;t know what the <code>strf</code> function is, but that is where to check if you are looking for the place that the year gets converted to 2016."}, {"owner": {"reputation": 11, "user_id": 3907874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b850fd1774f0fe49144505e4aab44590?s=128&d=identicon&r=PG&f=1", "display_name": "ball123", "link": "https://stackoverflow.com/users/3907874/ball123"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1461782931, "post_id": 36898249, "comment_id": 61360940, "body": "Hi, function is strftime. However without using this function it should display year as 116 right? But it was displaying 2016 only."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 4, "creation_date": 1461782932, "post_id": 36898249, "comment_id": 61360942, "body": "What you&#39;ve shown isn&#39;t valid Perl code. Please show the actual code you&#39;re using. Also, <code>seconds=180+(60*24*60);</code> is one day and 180 seconds, not 180 days."}, {"owner": {"reputation": 11, "user_id": 3907874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b850fd1774f0fe49144505e4aab44590?s=128&d=identicon&r=PG&f=1", "display_name": "ball123", "link": "https://stackoverflow.com/users/3907874/ball123"}, "edited": false, "score": 0, "creation_date": 1461783094, "post_id": 36898249, "comment_id": 61361059, "body": "Yes it should be $date=(180*24*60*60) + $today_date"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1461783135, "post_id": 36898249, "comment_id": 61361089, "body": "<code>perl -MTime::Local -E &#39;@y=localtime(timelocal(0,0,0,28,3,2016)+180*86400);say &quot;@y&quot;&#39;</code>. Result: <code>0 0 0 25 9 116 2 298 1</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 3907874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b850fd1774f0fe49144505e4aab44590?s=128&d=identicon&r=PG&f=1", "display_name": "ball123", "link": "https://stackoverflow.com/users/3907874/ball123"}, "edited": false, "score": 0, "creation_date": 1461784062, "post_id": 36898631, "comment_id": 61361655, "body": "Can you please explain &quot;You start by calling timelocal from the module Time::Local which takes the number of years since 1900 as input, but pass 2016 as year value. In the end, you pass this date back to localtime which is exactly the opposite function.&quot;                                                                         Why its not printing 116 instead of 2016..this is what my doubt"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1461784533, "post_id": 36898631, "comment_id": 61361941, "body": "<a href=\"https://metacpan.org/pod/Time::Local#Year-Value-Interpretation\" rel=\"nofollow noreferrer\">The year input in <code>timelocal</code> is DWIM.</a>, so it doesn&#39;t always treat the year argument as years since 1900."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1461784534, "post_id": 36898631, "comment_id": 61361942, "body": "@Sebastian <a href=\"https://metacpan.org/pod/Time::Local#Year-Value-Interpretation\" rel=\"nofollow noreferrer\"><code>timelocal</code> treats year values &gt; 999 as the actual year, not as the offset from 1900.</a>"}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 0, "creation_date": 1461784649, "post_id": 36898631, "comment_id": 61362031, "body": "Sorry, never used it this way."}, {"owner": {"reputation": 11, "user_id": 3907874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b850fd1774f0fe49144505e4aab44590?s=128&d=identicon&r=PG&f=1", "display_name": "ball123", "link": "https://stackoverflow.com/users/3907874/ball123"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1461785225, "post_id": 36898631, "comment_id": 61362411, "body": "@mob and @ ThisSuitIsBlackNot..according to you whatever year 2016 i am passing to timelocal function is correct right?.[I know for month we need to decrease it by 1.]"}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": -2, "last_activity_date": 1461784083, "last_edit_date": 1461784083, "creation_date": 1461783509, "answer_id": 36898631, "question_id": 36898249, "link": "https://stackoverflow.com/questions/36898249/understanding-issue-with-year-got-from-localtime-in-perl/36898631#36898631", "title": "understanding issue with year got from localtime in perl", "body": "<p>Your sourcecode is wrong, you're missing the <code>$</code> signs in front of the variable names.</p>\n\n<p>You start by calling <code>timelocal</code> from the module <a href=\"http://search.cpan.org/perldoc?Time::Local\" rel=\"nofollow\">Time::Local</a> which takes the number of years since 1900 as input, but pass 2016 as year value. In the end, you pass this date back to <code>localtime</code> which is exactly the opposite function.</p>\n\n<p>Try this:</p>\n\n<pre><code>print time;\nprint join(\" \",localtime(time));\n\n1461783061\n1 51 20 27 3 116 3 117 1\n</code></pre>\n\n<p>You get:</p>\n\n<ul>\n<li>Second 1</li>\n<li>Minute 51</li>\n<li>Hour 20</li>\n<li>Day 27</li>\n<li>Zero-based month 3 which is April</li>\n<li>1900-based year 116 which is 2016</li>\n</ul>\n\n<p>My default usage of <code>localtime</code> is:</p>\n\n<pre><code>my @now = localtime(time);\n# Convert zero-based-month to calendar month\n++$now[4];\n# Convert 1900-based-year to calendar year\n$now[5] += 1900;\n</code></pre>\n\n<p>If all you need is a date calculation, try <a href=\"http://search.cpan.org/perldoc?Date::Calc\" rel=\"nofollow\">Date::Calc</a></p>\n\n<pre><code>use Date::Calc qw(Today Add_Delta_Days);\n\nprint join '-', Today();\nprint join '-', Add_Delta_Days(Today(),1);\n\n2016-4-27\n2016-4-28\n</code></pre>\n\n<p>or <a href=\"http://search.cpan.org/perldoc?DateTime\" rel=\"nofollow\">DateTime</a>:</p>\n\n<pre><code>use DateTime;\n\nprint DateTime-&gt;now-&gt;add(days =&gt; 1, seconds =&gt; 180);\n\n2016-04-28T19:00:12\n</code></pre>\n\n<p><code>DateTime</code>'s <code>strftime</code> method or <code>formatter</code> option will give you any output you want.</p>\n"}], "owner": {"reputation": 11, "user_id": 3907874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b850fd1774f0fe49144505e4aab44590?s=128&d=identicon&r=PG&f=1", "display_name": "ball123", "link": "https://stackoverflow.com/users/3907874/ball123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 441, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1461916929, "creation_date": 1461782397, "last_edit_date": 1461901464, "question_id": 36898249, "link": "https://stackoverflow.com/questions/36898249/understanding-issue-with-year-got-from-localtime-in-perl", "title": "understanding issue with year got from localtime in perl", "body": "<p>I have seen many blogs saying the <code>localtime</code> function returns years from 1900.\nBut for me when I add 180 days to the current date and print it using <code>localtime</code> it's showing the proper year as 2016 instead of 116.</p>\n\n<p>Example:</p>\n\n<pre><code>$today_date=timelocal(0,0,0,27,03,2016);\n$seconds=180*60*24*60;\n$date=today_date+seconds;\n$new_date=localtime(date);\nprint strftime(\"%d-%m-%Y\",$new_date);\n\nOutput:\n24-10-2016\n</code></pre>\n\n<p>When I give input as 116 instead of 2016 as year to timelocal It still gives the output as 2016.How is this possible?</p>\n"}, {"tags": ["c++", "c", "perl", "macros", "profiling"], "comments": [{"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 1, "creation_date": 1461965976, "post_id": 36896140, "comment_id": 61454297, "body": "Sympathies. Even if you find what you want, unless the program is really simple, you will get probably get a file of many Mb, mostly containing low-level stuff that doesn&#39;t tell you much. When I want to know how something works I use two methods. 1) Step Into/Over, which you looked down on, but don&#39;t. 2) Let it rip, and then hit &quot;pause&quot; or Ctrl-C to <a href=\"http://stackoverflow.com/a/378024/23771\"><i>stop it at random</i></a>. Do it a few times, each time looking at who is calling whom and why. This quickly gets you an understanding of how it spends the bulk of its time."}, {"owner": {"reputation": 950, "user_id": 4317408, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5f7519c4f04b57198ce87f657da139df?s=128&d=identicon&r=PG&f=1", "display_name": "cross", "link": "https://stackoverflow.com/users/4317408/cross"}, "reply_to_user": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 0, "creation_date": 1461966451, "post_id": 36896140, "comment_id": 61454480, "body": "iron mike, you&#39;re probably right. The amount of time I spent figuring out how this could work, I could have stepped into millions of functions :/... one option would be to compile with <code>-finstruction-functions</code> flag only the files which I want to see. that would ignore the lower level stuff..."}, {"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 0, "creation_date": 1461966632, "post_id": 36896140, "comment_id": 61454542, "body": "I&#39;m flattered, I guess :) But really, try it. Don&#39;t expect instant results. What you want to know will gradually dawn on you. I&#39;ve done it several times. If there were a better way, I and others would have found it."}, {"owner": {"reputation": 891, "user_id": 3896299, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3660fe434b2c13e0d54e35643b3b32b?s=128&d=identicon&r=PG&f=1", "display_name": "Garland", "link": "https://stackoverflow.com/users/3896299/garland"}, "edited": false, "score": 0, "creation_date": 1461968846, "post_id": 36896140, "comment_id": 61455367, "body": "I use Boost Log and created a wrapper for it:  <a href=\"http://www.boost.org/doc/libs/1_60_0/libs/log/doc/html/index.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_60_0/libs/log/doc/html/index.html</a>. I created &quot;TraceIn&quot; (for function entry), &quot;TraceOut&quot; (for function exit), and other Severity Levels like &quot;Verbose&quot;, &quot;Info&quot;, &quot;Warning&quot;, and &quot;Error&quot;.  For each log entry, there are timestamp, thread ID, level, and function name added."}, {"owner": {"reputation": 950, "user_id": 4317408, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5f7519c4f04b57198ce87f657da139df?s=128&d=identicon&r=PG&f=1", "display_name": "cross", "link": "https://stackoverflow.com/users/4317408/cross"}, "reply_to_user": {"reputation": 891, "user_id": 3896299, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3660fe434b2c13e0d54e35643b3b32b?s=128&d=identicon&r=PG&f=1", "display_name": "Garland", "link": "https://stackoverflow.com/users/3896299/garland"}, "edited": false, "score": 0, "creation_date": 1461969350, "post_id": 36896140, "comment_id": 61455535, "body": "@gxy can you submit an answer with your solution?"}, {"owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "edited": false, "score": 0, "creation_date": 1462077020, "post_id": 36896140, "comment_id": 61482638, "body": "@cross Can you be more specific with your question. The etrace utility as is works for me. The simulator you want to trace, are you compiling it because for this to work you need to be and if you&#39;re compiling it whats stoping you adding this?"}, {"owner": {"reputation": 950, "user_id": 4317408, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5f7519c4f04b57198ce87f657da139df?s=128&d=identicon&r=PG&f=1", "display_name": "cross", "link": "https://stackoverflow.com/users/4317408/cross"}, "reply_to_user": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "edited": false, "score": 0, "creation_date": 1462099186, "post_id": 36896140, "comment_id": 61487066, "body": "@Harry wrote an update..."}, {"owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "edited": false, "score": 0, "creation_date": 1462108105, "post_id": 36896140, "comment_id": 61489665, "body": "Can you provide a sample C++ source file with a relevant Makefile that would produce minimal example of the binary that <code>etrace.pl</code> has trouble analyzing?"}, {"owner": {"reputation": 950, "user_id": 4317408, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5f7519c4f04b57198ce87f657da139df?s=128&d=identicon&r=PG&f=1", "display_name": "cross", "link": "https://stackoverflow.com/users/4317408/cross"}, "edited": false, "score": 0, "creation_date": 1462127352, "post_id": 36896140, "comment_id": 61496271, "body": "I would, but that is unfeasible as it is a complete simulation framework. But you can find all you asked here: <a href=\"https://github.com/sommer/veins\" rel=\"nofollow noreferrer\">github.com/sommer/veins</a>"}, {"owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "edited": false, "score": 0, "creation_date": 1462129560, "post_id": 36896140, "comment_id": 61497056, "body": "@Cross, do you want this to work on Mac or Linux."}, {"owner": {"reputation": 950, "user_id": 4317408, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5f7519c4f04b57198ce87f657da139df?s=128&d=identicon&r=PG&f=1", "display_name": "cross", "link": "https://stackoverflow.com/users/4317408/cross"}, "reply_to_user": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "edited": false, "score": 0, "creation_date": 1462130571, "post_id": 36896140, "comment_id": 61497366, "body": "@Harry linux would suffice atm"}, {"owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "edited": false, "score": 0, "creation_date": 1462130831, "post_id": 36896140, "comment_id": 61497456, "body": "Then I think you&#39;re all set with the Perl changes I gave."}], "answers": [{"comments": [{"owner": {"reputation": 950, "user_id": 4317408, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5f7519c4f04b57198ce87f657da139df?s=128&d=identicon&r=PG&f=1", "display_name": "cross", "link": "https://stackoverflow.com/users/4317408/cross"}, "edited": false, "score": 0, "creation_date": 1462138758, "post_id": 36969008, "comment_id": 61500091, "body": "your solution sounds reasonable, and I am certain it would work in most cases... but in the case of this big project I get questions marks from the perl script. See the update."}, {"owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "reply_to_user": {"reputation": 950, "user_id": 4317408, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5f7519c4f04b57198ce87f657da139df?s=128&d=identicon&r=PG&f=1", "display_name": "cross", "link": "https://stackoverflow.com/users/4317408/cross"}, "edited": false, "score": 2, "creation_date": 1462139435, "post_id": 36969008, "comment_id": 61500304, "body": "It&#39;s using dynamic libraries and is unable to resolve the symbols or the address offsets are wrong. You keep changing the question ie it&#39;s a moving target, if I answer your next question there&#39;ll be another question and another for the next several days. You need to understand how etrace works and get it working using both the static and dynamic methods using the crumble program. At the moment it sounds like you&#39;re trying to add something you don&#39;t understand to a program you don&#39;t understand in order to understand it."}, {"owner": {"reputation": 950, "user_id": 4317408, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5f7519c4f04b57198ce87f657da139df?s=128&d=identicon&r=PG&f=1", "display_name": "cross", "link": "https://stackoverflow.com/users/4317408/cross"}, "edited": false, "score": 0, "creation_date": 1462139855, "post_id": 36969008, "comment_id": 61500453, "body": "I agree completely with what you say... <code>note to self and others:</code> probably spending couple of hours understanding how the tool works saves much more time on trying to patch things here and there... but since the questions has got some attention it would be helpful to bring it to some conclusion"}, {"owner": {"reputation": 950, "user_id": 4317408, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5f7519c4f04b57198ce87f657da139df?s=128&d=identicon&r=PG&f=1", "display_name": "cross", "link": "https://stackoverflow.com/users/4317408/cross"}, "edited": false, "score": 0, "creation_date": 1462483070, "post_id": 36969008, "comment_id": 61667822, "body": "I accepted your answer for your efforts to solve the question. However (if you find fit) you might want to extend it to provide a definite solution."}, {"owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "reply_to_user": {"reputation": 950, "user_id": 4317408, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5f7519c4f04b57198ce87f657da139df?s=128&d=identicon&r=PG&f=1", "display_name": "cross", "link": "https://stackoverflow.com/users/4317408/cross"}, "edited": false, "score": 0, "creation_date": 1462483435, "post_id": 36969008, "comment_id": 61667959, "body": "My solution worked on Linux and I also had it working on the Mac with some tweaking for underscores etc. I&#39;m not sure what else I could do."}], "tags": [], "owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "is_accepted": true, "score": 4, "last_activity_date": 1462483626, "last_edit_date": 1462483626, "creation_date": 1462120076, "answer_id": 36969008, "question_id": 36896140, "link": "https://stackoverflow.com/questions/36896140/how-to-use-etrace-with-a-dynamic-library-for-chronological-traceing-of-function/36969008#36969008", "title": "How to use etrace with a dynamic library for chronological traceing of function calls in C++?", "body": "<h2>Fixing the Perl Script</h2>\n\n<blockquote>\n  <p>Hexadecimal number > 0xffffffff non-portable\"</p>\n</blockquote>\n\n<p>This is a warning from <code>hex</code> because it's detecting a possibly non-portable value (something > 32bits). </p>\n\n<p>At the very top of the script, add this:</p>\n\n<pre><code>use bigint qw/hex oct/;\n</code></pre>\n\n<p>When this tool was written, I suspect the people were on 32-bit machines. You can compile the program using 32-bit with the flag <code>-m32</code>, but if you change the perl script as mentioned above you won't need to. </p>\n\n<p>Note, if you're on a Mac, you can't use <code>mknod</code> the way it's used in the script to create a pipe; you need to use <code>mkfifo</code> with no arguments instead. </p>\n\n<p>On Linux, adding the <code>bigint</code> fix above works. You then need to run both commands from the same directory, I did this using <code>example2</code>:</p>\n\n<pre><code>../src/etrace.pl crumble\n# Switch to a different terminal\n./crumble\n</code></pre>\n\n<p>and I get this on the Mac and Linux</p>\n\n<pre><code>\\-- main\n|   \\-- Crumble_make_apple_crumble\n|   |   \\-- Crumble_buy_stuff\n|   |   |   \\-- Crumble_buy\n|   |   |   \\-- Crumble_buy\n|   |   |   \\-- Crumble_buy\n|   |   |   \\-- Crumble_buy\n|   |   |   \\-- Crumble_buy\n|   |   \\-- Crumble_prepare_apples\n|   |   |   \\-- Crumble_skin_and_dice\n|   |   \\-- Crumble_mix\n|   |   \\-- Crumble_finalize\n|   |   |   \\-- Crumble_put\n|   |   |   \\-- Crumble_put\n|   |   \\-- Crumble_cook\n|   |   |   \\-- Crumble_put\n|   |   |   \\-- Crumble_bake\n</code></pre>\n\n<h2>About the Dynamic Library...</h2>\n\n<p>When you load a dynamic library, the address in the object file is not the address that will be used when running. What etrace does is take a function name from a header you specify. For example, in the case of <code>example2</code>, this would be the following:</p>\n\n<pre><code>#include \"crumble.h\"\n#define PTRACE_REFERENCE_FUNCTION Crumble_buy\n</code></pre>\n\n<p>You would then edit the makefile to make sure that the header file can be found:</p>\n\n<pre><code>CFLAGS = -g -finstrument-functions -I.\n</code></pre>\n\n<p>Note the addition of the include <code>-I.</code>. The address of the symbol from the header (in our case, <code>Crumble_buy</code>) is used to calculate the offset between the object file and the actual address; this allows the program to calculate the correct address to find the symbol.</p>\n\n<p>If you look at the output of <code>nm</code>, you get something like the following: </p>\n\n<pre><code>0000000100000960 T _Crumble_bake\n00000001000005b0 T _Crumble_buy\n0000000100000640 T _Crumble_buy_stuff\n00000001000009f0 T _Crumble_cook\n</code></pre>\n\n<p>The addresses on the left are relative, that is, at runtime, these addresses actually change. The etrace.pl program is storing these in a hash like this:</p>\n\n<pre><code>$VAR1 = {\n          '4294969696' =&gt; '_Crumble_bake',\n          '4294969424' =&gt; '_Crumble_put',\n          '4294970096' =&gt; '_main',\n          '4294969264' =&gt; '_Crumble_mix',\n          '4294970704' =&gt; '_gnu_ptrace_close',\n          '4294967296' =&gt; '__mh_execute_header',\n          '4294968752' =&gt; '_Crumble_buy',\n          '4294968896' =&gt; '_Crumble_buy_stuff',\n          '4294969952' =&gt; '_Crumble_make_apple_crumble',\n          '4294969184' =&gt; '_Crumble_prepare_apples',\n          '4294971512' =&gt; '___GNU_PTRACE_FILE__',\n          '4294971504' =&gt; '_gnu_ptrace.first',\n          '4294970208' =&gt; '_gnu_ptrace',\n          '4294970656' =&gt; '___cyg_profile_func_exit',\n          '4294970608' =&gt; '___cyg_profile_func_enter',\n          '4294969552' =&gt; '_Crumble_finalize',\n          '4294971508' =&gt; '_gnu_ptrace.active',\n          '4294969840' =&gt; '_Crumble_cook',\n          '4294969088' =&gt; '_Crumble_skin_and_dice',\n          '4294970352' =&gt; '_gnu_ptrace_init'\n        };\n</code></pre>\n\n<p>Note the leading underscore because this is on a Mac using clang. At runtime, these addresses are not correct, but their relative offsets are. If you can work out what the offset is, you can adjust the addresses you get at runtime to find the actual symbol. The code that does this follows:</p>\n\n<pre><code> if ($offsetLine =~ m/^$REFERENCE_OFFSET\\s+($SYMBOL_NAME)\\s+($HEX_NUMBER)$/) {\n    # This is a dynamic library; need to calculate the load offset\n    my $offsetSymbol  = \"_$1\";\n    my $offsetAddress = hex $2; \n\n    my %offsetTable = reverse %SYMBOLTABLE;\n\n    print Dumper(\\%offsetTable);\n    $baseAddress = $offsetTable{$offsetSymbol} - $offsetAddress;\n    #print(\"offsetSymbol == $offsetSymbol\\n\");\n    #print(\"offsetAddress == $offsetAddress\\n\");\n    #print(\"baseoffsetAddress == $offsetAddress\\n\");\n    $offsetLine = &lt;CALL_DATA&gt;;\n  } else {\n    # This is static\n    $baseAddress = 0;\n  }\n</code></pre>\n\n<p>This is what the line <code>#define PTRACE_REFERENCE_FUNCTION Crumble_buy</code> is for. The <code>C</code> code in ptrace is using that MACRO, and if defined, outputting the address of that function as the first thing. It then calculates the offset, and for all subsequent addresses, adjusts them by this amount, looking up the correct symbol in the hash.</p>\n"}], "owner": {"reputation": 950, "user_id": 4317408, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5f7519c4f04b57198ce87f657da139df?s=128&d=identicon&r=PG&f=1", "display_name": "cross", "link": "https://stackoverflow.com/users/4317408/cross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1187, "favorite_count": 1, "accepted_answer_id": 36969008, "answer_count": 1, "score": 15, "last_activity_date": 1577750632, "creation_date": 1461776088, "last_edit_date": 1577750632, "question_id": 36896140, "link": "https://stackoverflow.com/questions/36896140/how-to-use-etrace-with-a-dynamic-library-for-chronological-traceing-of-function", "title": "How to use etrace with a dynamic library for chronological traceing of function calls in C++?", "body": "<p><strong>Background:</strong></p>\n\n<p>I have one big simulation tool, and I need to understand its logical behavior. In order to do that, the most of help I would get if I have the chronological order of function calls, for a minimal working example.</p>\n\n<p>I found many tools online, like <a href=\"http://www.logix.cz/michal/devel/CygProfiler/\" rel=\"nofollow noreferrer\">CygProfiler</a> and <a href=\"https://github.com/elcritch/etrace\" rel=\"nofollow noreferrer\">etrace</a>. I became so miserable on finding a solution that I started to follow the craziest solution of using \"step into\" with the debugger. Which is a good option if you have a small program but not a complete simulation tool.</p>\n\n<hr>\n\n<p><strong>Problem:</strong></p>\n\n<p>One of the problems I face is that the above-mentioned solutions are originally meant for <code>C</code> and they generate a static file (<code>*.o</code>) when compiled. On the other hand the simulation tool generates a shared library (<code>.so</code>). I don't have much knowledge on lower level stuff so I seem to fail when I try linking them.</p>\n\n<p>I looked specifically at the <code>etrace</code> <a href=\"https://github.com/elcritch/etrace/blob/master/README\" rel=\"nofollow noreferrer\">documentation</a>, and it says:</p>\n\n<blockquote>\n  <p>To see how to modify ptrace.c to work with a dynamic library, look at\n  the example2 directory. The sources there also create a stand-alone\n  executable, but the PTRACE_REFERENCE_FUNCTION macro is defined just as\n  it would be for a dynamic library.</p>\n</blockquote>\n\n<p>If you look at the repo there is no difference between the files in <code>example</code> and <code>example2</code> folders. Only there is an extra <code>.h</code> file in <code>example2</code>.</p>\n\n<p>On the other hand, if you look at <code>src/ptrace.c</code> there it says:</p>\n\n<blockquote>\n  <p>When using ptrace on a dynamic library, you must set the\n    PTRACE_REFERENCE_FUNCTION macro to be the name of a function in the\n    library. The address of this function when loaded will be the first\n    line output to the trace file and will permit the translation of the\n    other entry and exit pointers to their symbolic names. You may set\n    the macro PTRACE_INCLUDE with any #include directives needed for\n    that function to be accesible to this source file.</p>\n</blockquote>\n\n<p>a little below there is the commented code:</p>\n\n<pre><code>/* When using ptrace on a dynamic library, the following must be defined:\n#include \"any files needed for PTRACE_REFERENCE_FUNCTION\"\n#define PTRACE_REFERENCE_FUNCTION functionName\n`*/\n</code></pre>\n\n<hr>\n\n<p><strong>Question:</strong></p>\n\n<p>In essence the question is the following: How to use <code>etrace</code> with a dynamic library?</p>\n\n<p>Do I need to #include any files?</p>\n\n<blockquote>\n  <p>To trace a stand-alone program, there is no need to #include any\n  additional file. Just link your code against ptrace.c and use the\n  -finstrument-functions option as a compile option for gcc. This should do it.</p>\n</blockquote>\n\n<p>How do I link a C++ code which is built via makefiles against <code>ptrace.c</code></p>\n\n<p><strong>Final Note:</strong> I would appreciate if someone bears with my ignorance and provides a step-by-step solution to my question.</p>\n\n<hr>\n\n<p><strong>Update 1:</strong></p>\n\n<p>I managed to add the libraries related to etrace to the simulation tool, and it executes fine. </p>\n\n<p>However, (probably because the scripts are too old, or are not meant for use with C++) I get the following error when using the <a href=\"https://github.com/elcritch/etrace/blob/master/src/etrace.pl\" rel=\"nofollow noreferrer\">perl script</a> provided by default by <code>etrace</code></p>\n\n<blockquote>\n<pre><code>Hexadecimal number &gt; 0xffffffff non-portable\"\n</code></pre>\n</blockquote>\n\n<p>Probably this changes a bit the nature of this question, turning it more to a perl related issue at this point. </p>\n\n<p>If this problem is solved, I hope <code>etrace</code> will work with a complicated project and I will provide the details</p>\n\n<hr>\n\n<p><strong>Update 2:</strong></p>\n\n<p>I took the suggestions from @Harry, and I believe that would work in most projects. However in my case I get the following from the perl script:</p>\n\n<pre><code>Use of uninitialized value within %SYMBOLTABLE in list assignment at etrace2.pl line 99, &lt;CALL_DATA&gt; line 1.\n\n\\-- ???\n|   \\-- ???\n\\-- ???\n|   \\-- ???\n|   |   \\-- ???\n\\-- ???\n|   \\-- ???\n\\-- ???\n|   \\-- ???\n\\-- ???\n|   \\-- ???\n\\-- ???\n|   \\-- ???\n\\-- ???\n|   \\-- ???\n</code></pre>\n\n<p>Due to autegenerated makefiles I used the <a href=\"https://stackoverflow.com/a/36959597/4317408\">LD_PRELOAD</a> to load the shared library for etrace.so which I got as follows:</p>\n\n<pre><code>gcc -g -finstrument-functions -shared -fPIC ptrace.c -o etrace.so -I &lt;path-to-etrace&gt;\n</code></pre>\n\n<p>I created the dummy etrace.h inside the tool:</p>\n\n<pre><code>#ifndef __ETRACE_H_\n#define __ETRACE_H_\n\n#include &lt;stdio.h&gt;\n\nvoid Crumble_buy(char * what, int quantity, char * unit);\n\n\nvoid Crumble_buy(char * what, int quantity, char * unit)\n{\n    printf(\"buy %d %s of %s\\n\", quantity, unit, what);\n}\n\n#endif\n</code></pre>\n\n<p>and used <code>Crumble_buy</code> for the <code>#define</code> and the <code>etrace.h</code> for the <code>#include</code>.</p>\n"}, {"tags": ["perl", "pdf", "perl-module"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1461763895, "post_id": 36891223, "comment_id": 61346996, "body": "Is there an example PDF file on line that you can link to?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1461785022, "post_id": 36891223, "comment_id": 61362276, "body": "<code>pdftohtml</code> from Poppler. No need to lose your sanity."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4631116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acf7b71442946d51eebb7c08a6ced8fb?s=128&d=identicon&r=PG&f=1", "display_name": "Priya Samy", "link": "https://stackoverflow.com/users/4631116/priya-samy"}, "edited": false, "score": 0, "creation_date": 1462163711, "post_id": 36940681, "comment_id": 61505450, "body": "i used CAM::PDF -J Atwal . But i am not getting the proper output in stdout. the output is something like:   \u2193 \u25c4 \u2191 \u25c4 &#167; \u25c4 U \u21a8 \u2190 \u25ac &#167; &#167;  0 X \u2665 6 \\ V W H P \u2665 , 3  &#182; \u203c \u25c4 &#182; &#167; \u25c4 &#167; \u203c \u221f \u25c4 &#167; \u25ac \u2192  0 X \u2665 6 \\ V W H P \u2665 6 H U L D O \u2665 \u2660  \u203c &#167; \u203c &#167; \u25ba &#182; \u2191 &#182; \u203c \u25ba \u203c \u203c \u203c \u203c \u25ba \u203c \u203c \u25ac &#39;  0 X \u2665 6 \\ V W H P \u2665 8 V H U  D G P L Q   &#39; H Q L D O \u25ba R I \u25ba 6 H U Y L F H \u2665 \u2642 &#39; R 6 \u2640 \u2665 5 H V X O   $ Y D L O D E L O L W \\  &#167; \u203c \u2665 P L Q X W H V \u2665 &#182; \u2665 V H F R Q G  &#182; &#167; &#182; \u2665 P L O O L V H F R Q G V  &#182;  5 H F R Y H U H G \u2665 Z L W K L Q \u2665 &#182; \u2665 P L Q X W H  \u2665  ( [ H F X W L Y H \u2665 6 X P P D U \\ \u2665 5 H S R U W \u2194 \u2665  $ 5 3 B \u25ac \u25ac &#182; \u2191 B &#39; R 6"}, {"owner": {"reputation": 162, "user_id": 3539775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/892a66074a0512f0fcf3018bb03d9a3d?s=128&d=identicon&r=PG", "display_name": "J Singh", "link": "https://stackoverflow.com/users/3539775/j-singh"}, "reply_to_user": {"reputation": 31, "user_id": 4631116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acf7b71442946d51eebb7c08a6ced8fb?s=128&d=identicon&r=PG&f=1", "display_name": "Priya Samy", "link": "https://stackoverflow.com/users/4631116/priya-samy"}, "edited": false, "score": 0, "creation_date": 1462164720, "post_id": 36940681, "comment_id": 61505673, "body": "hope you are not trying to print images on stdout ;). Try saving the image content to a file and then open the file in an image explorer."}, {"owner": {"reputation": 31, "user_id": 4631116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acf7b71442946d51eebb7c08a6ced8fb?s=128&d=identicon&r=PG&f=1", "display_name": "Priya Samy", "link": "https://stackoverflow.com/users/4631116/priya-samy"}, "edited": false, "score": 0, "creation_date": 1462279699, "post_id": 36940681, "comment_id": 61561585, "body": "this is not image but text. even then it is printing like this."}], "tags": [], "owner": {"reputation": 162, "user_id": 3539775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/892a66074a0512f0fcf3018bb03d9a3d?s=128&d=identicon&r=PG", "display_name": "J Singh", "link": "https://stackoverflow.com/users/3539775/j-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1461939395, "creation_date": 1461939395, "answer_id": 36940681, "question_id": 36891223, "link": "https://stackoverflow.com/questions/36891223/extract-images-texts-from-pdf-using-perl/36940681#36940681", "title": "Extract images/texts from PDF using Perl", "body": "<p>Use <a href=\"http://search.cpan.org/~cdolan/CAM-PDF-1.60/lib/CAM/PDF.pm\" rel=\"nofollow\">CAM::PDF</a>. It has some methods that will help you extract images or other elements:</p>\n\n<pre><code>$doc-&gt;getProperty($pagenum, $propertyname)\nEach PDF page contains a list of resources that it uses (images, fonts, etc). getPropertyNames() returns an array of the names of those resources. getProperty() returns a node representing a named property (most likely a reference node).\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17, "user_id": 6289013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OiQ54.jpg?s=128&g=1", "display_name": "selva kumar", "link": "https://stackoverflow.com/users/6289013/selva-kumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1464114161, "creation_date": 1464114161, "answer_id": 37421128, "question_id": 36891223, "link": "https://stackoverflow.com/questions/36891223/extract-images-texts-from-pdf-using-perl/37421128#37421128", "title": "Extract images/texts from PDF using Perl", "body": "<p>@priya..i tried this module which is working fine for PDF text extraction..</p>\n\n<pre><code>use strict;\nuse warnings;\nuse PDF::OCR::Thorough;\n\n\nmy $filename = \"pdf.pdf\";\n\nmy $pdf = PDF::OCR::Thorough-&gt;new($filename);\nmy $text = $pdf-&gt;get_text();\nprint \"$text\";\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4631116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acf7b71442946d51eebb7c08a6ced8fb?s=128&d=identicon&r=PG&f=1", "display_name": "Priya Samy", "link": "https://stackoverflow.com/users/4631116/priya-samy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 782, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1464114161, "creation_date": 1461763612, "last_edit_date": 1461763977, "question_id": 36891223, "link": "https://stackoverflow.com/questions/36891223/extract-images-texts-from-pdf-using-perl", "title": "Extract images/texts from PDF using Perl", "body": "<p>I am trying to extract texts/images/tables from a PDF file using Perl.</p>\n\n<p>I tried using <a href=\"https://metacpan.org/pod/CAM::PDF\" rel=\"nofollow\"><code>CAM::PDF</code></a> which is not extracting in text but as some other format.</p>\n\n<p>Is there a method to extract texts/images/tables from a PDF using Perl modules?</p>\n"}, {"tags": ["json", "perl"], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1461766222, "post_id": 36891094, "comment_id": 61348892, "body": "This is backwards. <code>decode_json</code> expects a UTF-8 string (octets) but the input contains a &quot;wide character&quot;. <code>encode_utf8</code> converts a string that is not UTF-8 encoded into a string that is. (Well, it can also convert a string that is already UTF-8 encoded into one that is doubly encoded)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1461770215, "post_id": 36891094, "comment_id": 61352175, "body": "The code is right, but both sentences of the explanation are backwards."}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1461821596, "post_id": 36891094, "comment_id": 61375469, "body": "Thanks @ikegami corrected. I didn&#39;t noticed it before."}], "tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": true, "score": 1, "last_activity_date": 1461821480, "last_edit_date": 1461821480, "creation_date": 1461763265, "answer_id": 36891094, "question_id": 36890703, "link": "https://stackoverflow.com/questions/36890703/decode-json-error-getting-error-because-of-encoding-issue/36891094#36891094", "title": "decode_json error getting error because of encoding issue", "body": "<p>The error says that string you are trying to process is not an <a href=\"https://en.wikipedia.org/wiki/UTF-8\" rel=\"nofollow\"><code>UTF-8</code></a> or faulty UTF-8 string. So, you need to convert it to UTF-8 string using <code>encode_utf8</code> before decoding it to json.</p>\n\n<pre><code>use JSON;\nuse Data::Dumper;\nuse Encode qw( encode decode encode_utf8 decode_utf8);\n\nmy $arr_features_json = '[{\"family\":\"1\",\"id\":107000,\"unit\":\"\",\"parent_id\":\"0\",\"cast\":\"2\",\"search_values_range\":\"1,2,3,4,5,6,7,8,9,10,11,12\",\"category_id\":\"29\",\"type\":\"2\",\"position\":\"3\",\"name\":\"N\u00famero de habitaciones\",\"code\":\"numberofrooms\",\"locales\":\"4\",\"flags\":\"1\"}]';\nmy $arr_features = decode_json( encode_utf8($arr_features_json) );\n\nprint Dumper($arr_features);\n</code></pre>\n\n<p>Probably you should check a this <a href=\"http://www.effectiveperlprogramming.com/2011/08/know-the-difference-between-character-strings-and-utf-8-strings/\" rel=\"nofollow\"><code>article</code></a> to know difference between <code>UTF-8</code> strings and <code>character strings</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1461764978, "creation_date": 1461764978, "answer_id": 36891808, "question_id": 36890703, "link": "https://stackoverflow.com/questions/36890703/decode-json-error-getting-error-because-of-encoding-issue/36891808#36891808", "title": "decode_json error getting error because of encoding issue", "body": "<p><code>decode_json</code> expects UTF-8, but the string you have isn't encoded using UTF-8. <code>decode</code> the string if it's not already, then use <code>from_json</code> instead of <code>decode_json</code>.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature qw( say );\n\nuse utf8;                             # Perl code is encoded using UTF-8.\nuse open ':std', ':encoding(UTF-8)';  # Terminal provides/expects UTF-8.\n\nuse JSON qw( from_json );\n\nmy $features_json = '\n  [\n    {\n      \"family\": \"1\",\n      \"id\": 107000,\n      \"unit\": \"\",\n      \"parent_id\": \"0\",\n      \"cast\": \"2\",\n      \"search_values_range\": \"1,2,3,4,5,6,7,8,9,10,11,12\",\n      \"category_id\": \"29\",\n      \"type\": \"2\",\n      \"position\": \"3\",\n      \"name\": \"N\u00famero de habitaciones\",\n      \"code\": \"numberofrooms\",\n      \"locales\": \"4\",\n      \"flags\": \"1\"\n    }\n  ]\n';\n\nmy $features = from_json( $features_json );\n\nsay $features-&gt;[0]{name};\n</code></pre>\n"}], "owner": {"reputation": 669, "user_id": 5709891, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d02aec741e53d5f3f97de2c9e317342a?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/5709891/ganesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 540, "favorite_count": 0, "accepted_answer_id": 36891094, "answer_count": 2, "score": 0, "last_activity_date": 1461821480, "creation_date": 1461762255, "last_edit_date": 1461764405, "question_id": 36890703, "link": "https://stackoverflow.com/questions/36890703/decode-json-error-getting-error-because-of-encoding-issue", "title": "decode_json error getting error because of encoding issue", "body": "<p>I'm getting an error executing the following code:</p>\n\n<pre><code>use JSON;\nuse Encode qw( encode decode encode_utf8 decode_utf8);\nmy $arr_features_json = '[{\"family\":\"1\",\"id\":107000,\"unit\":\"\",\"parent_id\":\"0\",\"cast\":\"2\",\"search_values_range\":\"1,2,3,4,5,6,7,8,9,10,11,12\",\"category_id\":\"29\",\"type\":\"2\",\"position\":\"3\",\"name\":\"N\u00famero de habitaciones\",\"code\":\"numberofrooms\",\"locales\":\"4\",\"flags\":\"1\"}]';\n$arr_features_json = decode_json( $arr_features_json );\n</code></pre>\n\n<p>The following is the error I get:</p>\n\n<blockquote>\n  <p>malformed UTF-8 character in JSON string, at character offset 169 (before \"\\x{fffd} de habitaci...\") at test.pl line 13.</p>\n</blockquote>\n\n<p><code>decode_json</code> is issuing the error because of the <code>\u00fa</code> character in the json, so I want to convert this character to <code>\\u00fa</code>. How can I do that?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 1, "last_activity_date": 1461762660, "last_edit_date": 1461762660, "creation_date": 1461762346, "answer_id": 36890738, "question_id": 36890644, "link": "https://stackoverflow.com/questions/36890644/perl-how-to-create-variables-when-looping-through-variables/36890738#36890738", "title": "Perl - How to create variables when looping through @_ variables", "body": "<p>If it's really a hash and that's all you're sending in, you can simply do:</p>\n\n<pre><code>my %hash = @_;\n</code></pre>\n\n<p>...because a hash is simply a list of key, value pairs.</p>\n\n<p>If you're sending in a single hash reference:</p>\n\n<pre><code>my $href = shift;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1461772248, "post_id": 36891011, "comment_id": 61353725, "body": "I totally missed that you asked to create variables like $IP and $username. I&#39;ve updated my answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1461772235, "last_edit_date": 1461772235, "creation_date": 1461763068, "answer_id": 36891011, "question_id": 36890644, "link": "https://stackoverflow.com/questions/36890644/perl-how-to-create-variables-when-looping-through-variables/36891011#36891011", "title": "Perl - How to create variables when looping through @_ variables", "body": "<p>Generally speaking, <code>keys</code> should have the following form, where <code>%something</code> is the hash whose keys you want:</p>\n\n<pre><code>keys( %something )\n      ^\n      |\n</code></pre>\n\n<p><code>@_</code> contains a reference to a hash, so you could use the following:</p>\n\n<pre><code>keys( %{ $_[0] } )\n</code></pre>\n\n<p>Instead, we could give it a name:</p>\n\n<pre><code>my ($hash) = @_;\n\nfor my $key ( keys( %$hash ) ) {\n   my $val = $hash-&gt;{$key};\n   ...\n}\n</code></pre>\n\n<p>That said, it sounds like you actually want the following:</p>\n\n<pre><code>my ($hash) = @_;\n\nmy $IP       = $hash-&gt;{IP};\nmy $username = $hash-&gt;{username};\n\n...\n</code></pre>\n\n<p>If the number of references in <code>@_</code> is variable the last two snippets become</p>\n\n<pre><code>for my $hash ( @_ ) {\n   for my $key ( keys( %$hash ) ) {\n      my $val = $hash-&gt;{$key};\n      ...\n   }\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>for my $hash ( @_ ) {\n   my $IP       = $hash-&gt;{IP};\n   my $username = $hash-&gt;{username};\n   ...\n}\n</code></pre>\n"}], "owner": {"reputation": 9140, "user_id": 1007727, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cb37f072befac0347afe7b51050e23e?s=128&d=identicon&r=PG", "display_name": "Deano", "link": "https://stackoverflow.com/users/1007727/deano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 36891011, "answer_count": 2, "score": 1, "last_activity_date": 1461772235, "creation_date": 1461762102, "question_id": 36890644, "link": "https://stackoverflow.com/questions/36890644/perl-how-to-create-variables-when-looping-through-variables", "title": "Perl - How to create variables when looping through @_ variables", "body": "<p>I'm passing the following hash to a subroutine </p>\n\n<pre><code>$VAR1 = {\n          'password' =&gt; 'abc123',\n          'IP' =&gt; '172.18.18.122',\n          'port' =&gt; '8080',\n          'username' =&gt; 'sensor1'\n        };\n</code></pre>\n\n<p>and I'm getting these results when I do user Dumper with <code>@_</code> variable </p>\n\n<pre><code>print Dumper(@_);\n</code></pre>\n\n<p>How can I loop through value pairs and create variables $IP,$username ..etc</p>\n\n<p>I have created </p>\n\n<pre><code>my $variables;\nforeach my $key ( keys @_) {\n        my $key = @_-&gt;{$key}\\n\";\n   }\n</code></pre>\n\n<p>but I always get an error. </p>\n\n<pre><code>Type of arg 1 to keys must be hash (not array dereference) at     /perl/modules/Sentinel/Api.pm line 17, near \"@_) \"\nCompilation failed in require at agent line 9.\nBEGIN failed--compilation aborted at agent line 9.\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3603, "user_id": 336311, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b80acec0b0e222abeb0e43768c1e665d?s=128&d=identicon&r=PG", "display_name": "BurninLeo", "link": "https://stackoverflow.com/users/336311/burninleo"}, "edited": false, "score": 0, "creation_date": 1461760052, "post_id": 36889690, "comment_id": 61343867, "body": "Please consider to format the input/desired output as code, so it&#39;s easier to read. Which part of your code shoud perform the desired action?"}, {"owner": {"reputation": 35, "user_id": 2335865, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b62795d7ab7938d0421bcc48fbfbbdc3?s=128&d=identicon&r=PG", "display_name": "Video retrieval", "link": "https://stackoverflow.com/users/2335865/video-retrieval"}, "reply_to_user": {"reputation": 3603, "user_id": 336311, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b80acec0b0e222abeb0e43768c1e665d?s=128&d=identicon&r=PG", "display_name": "BurninLeo", "link": "https://stackoverflow.com/users/336311/burninleo"}, "edited": false, "score": 0, "creation_date": 1461761179, "post_id": 36889690, "comment_id": 61344753, "body": "Tha part of removing CRLf and replacing it by |"}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1461764184, "post_id": 36889690, "comment_id": 61347235, "body": "I guess you could use these regex on whole file rather than using it line by line. <code>s&#47;-&#47;&#47;g;</code> <code>s&#47;\\n&#47; | &#47;g;</code> Let me know if this solves your problem."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 2335865, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b62795d7ab7938d0421bcc48fbfbbdc3?s=128&d=identicon&r=PG", "display_name": "Video retrieval", "link": "https://stackoverflow.com/users/2335865/video-retrieval"}, "edited": false, "score": 0, "creation_date": 1461768572, "post_id": 36891805, "comment_id": 61350895, "body": "Ok thanks a lot. I will test this. I have a last question: How can I remove the date from the output name: WLS-rin-a-1-GAHSTL-PROD-RAB_efluid-stateless_260416.log --&gt;  WLS-rin-a-1-GAHSTL-PROD-RAB_efluid-stateless.log"}], "tags": [], "owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "is_accepted": false, "score": 0, "last_activity_date": 1461764976, "creation_date": 1461764976, "answer_id": 36891805, "question_id": 36889690, "link": "https://stackoverflow.com/questions/36889690/perl-code-modifie-logs/36891805#36891805", "title": "Perl code modifie logs", "body": "<p>Remove bunch of if-statements and change your forloop as following:</p>\n\n<pre><code>my $buf = q{};\nmy $last = q{};\nmy $sep_count = 0;\nmy $line_number = 0;\nforeach my $line (@lines) {\n    # remove CRLF, chomp only eliminate LF\n    $line =~ s/\\R+//;\n\n    $line_number++;\n\n    if ($line =~ /^-+$/) {\n        # if the line is a separator\n        $sep_count++;\n\n        if ($sep_count &amp; 1) {\n            # begin sep ($sep_count is an odd number)\n            $buf = $last;\n        }\n        else {\n            # end sep ($sep_count is an even number)\n            print {$outputFile} \"$buf\\n\";\n        }\n    }\n    else {\n        if ($sep_count &amp; 1) {\n            $buf .= ' | ' . $line;\n        }\n        else {\n            # flush $last except for the first line\n            print {$outputFile} \"$last\\n\" if $line_number != 1;\n        }\n\n        # keep last line (INFO...) to concat\n        $last = $line;\n    }\n}\n\nprint {$outputFile} \"$last\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 2335865, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b62795d7ab7938d0421bcc48fbfbbdc3?s=128&d=identicon&r=PG", "display_name": "Video retrieval", "link": "https://stackoverflow.com/users/2335865/video-retrieval"}, "edited": false, "score": 0, "creation_date": 1461768906, "post_id": 36892427, "comment_id": 61351162, "body": "Ok thanks a lot. I will test this. I have a last question: How can I remove the date from the output name: WLS-rin-a-1-GAHSTL-PROD-RAB_efluid-stateless_260416.log --&gt; WLS-rin-a-1-GAHSTL-PROD-RAB_efluid-stateless.log"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 35, "user_id": 2335865, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b62795d7ab7938d0421bcc48fbfbbdc3?s=128&d=identicon&r=PG", "display_name": "Video retrieval", "link": "https://stackoverflow.com/users/2335865/video-retrieval"}, "edited": false, "score": 0, "creation_date": 1461772369, "post_id": 36892427, "comment_id": 61353816, "body": "That must be posted as a new question. But please think whether you really need help. It&#39;s really trivial in Perl, and if you don&#39;t make some effort to find a solution yourself then your question will be slated. Your own code has <code>$output_file_name =~ s&#47;_[0-9]{6}&#47;&#47;</code>, which works well enough for this string, but it&#39;s very non-specific and you may find that it makes changes that you don&#39;t expect. If you try harder yourself then you will get much better help"}, {"owner": {"reputation": 35, "user_id": 2335865, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b62795d7ab7938d0421bcc48fbfbbdc3?s=128&d=identicon&r=PG", "display_name": "Video retrieval", "link": "https://stackoverflow.com/users/2335865/video-retrieval"}, "edited": false, "score": 0, "creation_date": 1461834319, "post_id": 36892427, "comment_id": 61382576, "body": "This doesn&#39;t work for me and thank you for your advice I&#39;m really beginning in perl and I think I&#39;m doing my best."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 35, "user_id": 2335865, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b62795d7ab7938d0421bcc48fbfbbdc3?s=128&d=identicon&r=PG", "display_name": "Video retrieval", "link": "https://stackoverflow.com/users/2335865/video-retrieval"}, "edited": false, "score": 0, "creation_date": 1461834964, "post_id": 36892427, "comment_id": 61383048, "body": "@Videoretrieval: I can&#39;t guess what you may be doing wrong. If I run this <code>my $s = &#39;WLS-rin-a-1-GAHSTL-PROD-RAB_efluid-stateless_260416.log&#39;; $s =~ s&#47;_[0-9]{6}&#47;&#47;; print &quot;$s\\n&quot;;</code> then the output is <code>WLS-rin-a-1-GAHSTL-PROD-RAB_efluid-stateless.log</code> as you required"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1461766421, "creation_date": 1461766421, "answer_id": 36892427, "question_id": 36889690, "link": "https://stackoverflow.com/questions/36889690/perl-code-modifie-logs/36892427#36892427", "title": "Perl code modifie logs", "body": "<p>Your list of strings are just values that must appear in a line of the input file for it to be included in the output. There is no need to store lines in different variables according to which criterion it matched</p>\n\n<p>This program appears to do what you need. It builds a regular expression from the list of strings so that they can all be tested in a single match. The lines to be printed are accumulated in array <code>@output</code> and printed to the output file when the whole input file has been processed</p>\n\n<p>Note that I've used <code>rel2abs</code> to append a file name to a directory. It takes account of several cases that simple string concatenation doesn't allow for, as well as making the code clearer</p>\n\n<p>I haven't been able to test this except to make sure that it compiles</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse File::Basename;\nuse Time::Piece;\nuse File::Spec::Functions 'rel2abs';\n\nif ( @ARGV != 2 ) {\n    die \"\\nUsage: Modif_Log.pl input_dir output_dir\\n\";\n}\n\nmy ( $input_dir, $output_dir ) = @ARGV;\n\nmy $today = localtime-&gt;strftime('%d%m');\n\nmy @liste = glob rel2abs( '*.log*', $input_dir );\n\nmy @wanted = (\n    qr/Inbound/i,\n    qr/Outbound/i,\n    qr/^ID:/,\n    qr/^Response-Code:/,\n    qr/^Encoding :/,\n    qr/^Http-Method:/,\n    qr/^Content-Type:/,\n    qr/^Headers:/,\n    qr/^Payload:/,\n    qr/^Address:/,\n);\n\nmy $wanted = join '|', @wanted;\n$wanted = qr/(?:$wanted)/;\n\nfor my $input_file ( @liste ) {\n\n    unless ( -M $input_file &lt; 1 and $input_file =~ $today ) {\n        warn qq{\"$input_file\" is older than one day\\n};\n        next;\n    }\n\n    warn qq{Processing \"$input_file\"\\n};\n\n    open my $in_fh, '&lt;', $input_file die qq{Unable to open \"$input_file\" for input: $!};\n\n    my @output;\n\n    while ( &lt;$fh&gt; ) {\n        next unless /$wanted/;\n        chomp;\n        push @output, $_;\n    }\n\n    my $output_file_name = basename($input_file);\n    $output_file_name =~ s/_[0-9]{6}//;\n    my $output_file = rel2abs($output_file_name, $output_dir);\n\n    open my $out_fh, '&gt;', $output_file\n            or die qq{Unable to open \"$output_file\" for output: $!};\n\n    print $out_fh join(' | ', @output), \"\\n\";\n\n    warn qq{Finished Processing \"$input_file\"\\n};\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 2335865, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b62795d7ab7938d0421bcc48fbfbbdc3?s=128&d=identicon&r=PG", "display_name": "Video retrieval", "link": "https://stackoverflow.com/users/2335865/video-retrieval"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1461766421, "creation_date": 1461759686, "last_edit_date": 1461762664, "question_id": 36889690, "link": "https://stackoverflow.com/questions/36889690/perl-code-modifie-logs", "title": "Perl code modifie logs", "body": "<p>I want to program a perl script to change logs format. I want to remove --- from logs. Then separate the CRLF by |.</p>\n\n<p>basically I want to obtain this result :</p>\n\n<pre><code>INFO|[ACTIVE] ExecuteThread: '0' for queue: 'weblogic.kernel.Default (self-tuning)'|JB173F3N|17/02/15 14:32:03:930|Inbound Message | ID: 5 Response-Code: 200 | Encoding: UTF-8 | Content-Type: application/soap+xml; charset=utf-8 | Headers: {connection=[close], Content-Length=[650], content-type=[application/soap+xml; charset=utf-8], Date=[Tue, 17 Feb 2015 13:32:03 GMT], Server=[Apache], X-Powered-By=[Servlet/2.5 JSP/2.1]} | Payload: &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt; | &lt;soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\"&gt;&lt;soap:Header/&gt;&lt;soap:Body&gt;&lt;con:Reponse xmlns:con=\"http://www.erdfdistribution.fr/linky/types/smc/consultation\"&gt;&lt;con:IdPRM&gt;19136758109411&lt;/con:IdPRM&gt;&lt;con:CR&gt;&lt;dico:Statut xmlns:dico=\"http://www.erdfdistribution.fr/linky/types/dico\"&gt;Rejet&lt;/dico:Statut&gt;&lt;dico:HorEmission xmlns:dico=\"http://www.erdfdistribution.fr/linky/types/dico\"&gt;2015-02-17T14:32:03.887+01:00&lt;/dico:HorEmission&gt;&lt;dico:Detail xmlns:dico=\"http://www.erdfdistribution.fr/linky/types/dico\"&gt;&lt;dico:Code&gt;REJ016&lt;/dico:Code&gt;&lt;/dico:Detail&gt;&lt;/con:CR&gt;&lt;/con:Reponse&gt;&lt;/soap:Body&gt;&lt;/soap:Envelope&gt;\n</code></pre>\n\n<p>Instead of this One:</p>\n\n<pre><code>INFO|[ACTIVE] ExecuteThread: '0' for queue: 'weblogic.kernel.Default (self-tuning)'|JB173F3N|17/02/15 14:32:03:930|Inbound Message\n----------------------------\nID: 5\nResponse-Code: 200\nEncoding: UTF-8\nContent-Type: application/soap+xml; charset=utf-8\nHeaders: {connection=[close], Content-Length=[650], content-type=[application/soap+xml; charset=utf-8], Date=[Tue, 17 Feb 2015 13:32:03 GMT], Server=[Apache], X-Powered-By=[Servlet/2.5 JSP/2.1]}\nPayload: &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\"&gt;&lt;soap:Header/&gt;&lt;soap:Body&gt;&lt;con:Reponse xmlns:con=\"http://www.erdfdistribution.fr/linky/types/smc/consultation\"&gt;&lt;con:IdPRM&gt;19136758109411&lt;/con:IdPRM&gt;&lt;con:CR&gt;&lt;dico:Statut xmlns:dico=\"http://www.erdfdistribution.fr/linky/types/dico\"&gt;Rejet&lt;/dico:Statut&gt;&lt;dico:HorEmission xmlns:dico=\"http://www.erdfdistribution.fr/linky/types/dico\"&gt;2015-02-17T14:32:03.887+01:00&lt;/dico:HorEmission&gt;&lt;dico:Detail xmlns:dico=\"http://www.erdfdistribution.fr/linky/types/dico\"&gt;&lt;dico:Code&gt;REJ016&lt;/dico:Code&gt;&lt;/dico:Detail&gt;&lt;/con:CR&gt;&lt;/con:Reponse&gt;&lt;/soap:Body&gt;&lt;/soap:Envelope&gt;\n--------------------------------------\n</code></pre>\n\n<p>My code doesnt do this, it makes something like clustering in the same line :(</p>\n\n<p>This is my code :</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse File::Basename;\nuse Time::Piece;\n\n my $num_args = $#ARGV + 1;\nif ($num_args != 2) {\n    print \"\\nUsage: Modif_Log.pl inputDirectory outputDirectory\\n\";\nexit;\n}\n\nmy $inputDirectory=$ARGV[0];\nmy $outputDirectory=$ARGV[1];\n\nmy @liste = glob($inputDirectory.\"*.log*\");\n\nmy $today = localtime-&gt;strftime('%d%m');\n\nforeach my $s (@liste){\nmy $inbound =\"\";\nmy $outbound =\"\";\nmy $id =\"\";\nmy $encoding =\"\";\nmy $httpMethod =\"\";\nmy $contentType =\"\";\nmy $headers =\"\";\nmy $payload =\"\";\nmy $responseCode =\"\";\nmy $theAdress =\"\";\nmy $others =\"\";\n\n\nopen ( FILE, $inputDirectory.basename($s) ) || die \"can't open file!\";\nif (-M $inputDirectory.basename($s) &lt; 1 &amp;&amp; $s =~ $today) {\n    print \"Processing \".$s.\"\\n\";\n    my @lines = &lt;FILE&gt;;\n    close (FILE);\n    my $outputFileName = basename($s);\n     $outputFileName =~ s/_[0-9]{6}//;\n    open(my $outputFile, '&gt;', $outputDirectory.$outputFileName) or die           \"can't     open file!\";\n    foreach my $line (@lines) {\n        chomp($line);\n        if ($line =~ /Inbound/i) { $inbound .= $line.\"|\"; }\n        elsif ($line =~ /Outbound/i) { $outbound .= $line.\"|\"; }\n        elsif ($line =~ /^ID:/) { $id .= $line.\"|\"; }\n        elsif ($line =~ /^Encoding :/) { $encoding .= $line.\"|\"; }\n        elsif ($line =~ /^Http-Method:/) { $httpMethod .= $line.\"|\"; }\n        elsif ($line =~ /^Content-Type:/) { $contentType .= $line.\"|\"; }\n        elsif ($line =~ /^Headers:/) { $headers .= $line.\"|\"; }\n        elsif ($line =~ /^Payload:/) { $payload .= $line.\"|\"; } \n        elsif ($line =~ /^Response-Code:/) { $responseCode .= $line.\"|\"; }  \n        elsif ($line =~ /^Address:/) { $theAdress .= $line.\"|\"; }   \n        elsif ($line !~ /--/) { $others .= $line.\"|\"; } \n        else { ; }\n    }\n\n    if ($inbound ne \"\") { print $outputFile $inbound.\"\\n\"; }\n    if ($outbound ne \"\") { print $outputFile $outbound.\"\\n\"; }\n    if ($id ne \"\") { print $outputFile $id.\"\\n\"; }\n    if ($encoding ne \"\") { print $outputFile $encoding.\"\\n\"; }\n    if ($httpMethod ne \"\") { print $outputFile $httpMethod.\"\\n\"; }\n    if ($contentType ne \"\") { print $outputFile $contentType.\"\\n\"; }\n    if ($headers ne \"\") { print $outputFile $headers.\"\\n\"; }\n    if ($payload ne \"\") { print $outputFile $payload.\"\\n\"; }\n    if ($responseCode ne \"\") { print $outputFile $responseCode.\"\\n\"; }\n    if ($theAdress ne \"\") { print $outputFile $theAdress.\"\\n\"; }\n    if ($others ne \"\") { print $outputFile $others.\"\\n\"; }\n    close $outputFile;\n    print \"Finished Processing \".$s.\"\\n\";\n   } else {\n    print $s.\" is older than one day\\n\";\n   }\n}\n</code></pre>\n\n<p>Can you please help me ? Perl is turning me creasy</p>\n"}, {"tags": ["perl", "ssh", "scp", "openssh"], "comments": [{"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 1, "creation_date": 1461826678, "post_id": 36888957, "comment_id": 61377916, "body": "Enable debugging <code>$Net::OpenSSH::debug=-1</code> and attach here the output. It will show us the commands the module is running under the hood."}], "answers": [{"comments": [{"owner": {"reputation": 1779, "user_id": 2214576, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ca0629dcdb8d4d3747c78674e90d5203?s=128&d=identicon&r=PG", "display_name": "Randomly Named User", "link": "https://stackoverflow.com/users/2214576/randomly-named-user"}, "edited": false, "score": 2, "creation_date": 1461822768, "post_id": 36892076, "comment_id": 61375936, "body": "Tried it, it&#39;s not the problem."}], "tags": [], "owner": {"reputation": 2565, "user_id": 4593127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d661b3425b0e9cd38ee220844e1b8659?s=128&d=identicon&r=PG&f=1", "display_name": "gaganso", "link": "https://stackoverflow.com/users/4593127/gaganso"}, "is_accepted": false, "score": 2, "last_activity_date": 1461765621, "creation_date": 1461765621, "answer_id": 36892076, "question_id": 36888957, "link": "https://stackoverflow.com/questions/36888957/perl-permission-denied-with-scp-put-of-netopenssh/36892076#36892076", "title": "Perl: Permission Denied with scp_put of Net::OpenSSH", "body": "<p>If the remote host key has changed, there would be permission issues. Remove the RSA key of remote machine by running the following command - \n \"ssh-keygen -f \"/.ssh/known_hosts\" -R \" and try again.</p>\n"}], "owner": {"reputation": 1779, "user_id": 2214576, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ca0629dcdb8d4d3747c78674e90d5203?s=128&d=identicon&r=PG", "display_name": "Randomly Named User", "link": "https://stackoverflow.com/users/2214576/randomly-named-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 601, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1461765621, "creation_date": 1461757843, "question_id": 36888957, "link": "https://stackoverflow.com/questions/36888957/perl-permission-denied-with-scp-put-of-netopenssh", "title": "Perl: Permission Denied with scp_put of Net::OpenSSH", "body": "<p>I'm trying to SCP a file into a remote machine using <code>Net::OpenSSH</code>'s <code>scp_put</code> function. Every time I run, I get the following error:</p>\n\n<pre><code>scp failed: scp failed: child exited with code 1 at copy_certs.pl line 32.\n</code></pre>\n\n<p>This is the code snippet where I attempt this operation:</p>\n\n<pre><code>use Net::SSH::Perl;\nuse Exporter;\nuse Net::OpenSSH;\n\nmy $user = \"hello\";\nmy $pass = \"hello\";\nmy $remote_path = \"/hello_folder/ssl\";\n\n$host=\"10.221.33.4\";\nmy $ssh = Net::OpenSSH-&gt;new($host, user =&gt; $user, password =&gt; $pass, master_opts =&gt; [-o =&gt; \"StrictHostKeyChecking=no\"]);    \n$key_file = \"certs/mykey.key\";\n$ssh-&gt;scp_put($key_file, $remote_path)\n                or die \"scp failed: \" . $ssh-&gt;error;\n</code></pre>\n\n<p>When I perform this operation manually, I don't have any permission issues. Where am I going wrong?</p>\n"}, {"tags": ["perl", "centos"], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1461754481, "creation_date": 1461754481, "answer_id": 36887747, "question_id": 36887244, "link": "https://stackoverflow.com/questions/36887244/cant-locate-object-method-ssl-opts-via-package-lwpuseragent/36887747#36887747", "title": "Can&#39;t locate object method &quot;ssl_opts&quot; via package &quot;LWP::UserAgent&quot;", "body": "<p>Looks like the <code>ssl_opts</code> method was added in <a href=\"https://metacpan.org/changes/distribution/libwww-perl#L255\" rel=\"nofollow\">libwww version 6.00</a>. And the <a href=\"http://mirror.centos.org/centos/6/os/x86_64/Packages/\" rel=\"nofollow\">Centos 6 package</a> is called perl-libwww-perl-5.833. So, the version of LWP::UserAgent that you have is too old to include that method.</p>\n"}], "owner": {"reputation": 31, "user_id": 6260914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5909db2b0702ce9fed0d790f817b7c73?s=128&d=identicon&r=PG&f=1", "display_name": "dev disoza", "link": "https://stackoverflow.com/users/6260914/dev-disoza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1579, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1462102449, "creation_date": 1461753038, "last_edit_date": 1462102449, "question_id": 36887244, "link": "https://stackoverflow.com/questions/36887244/cant-locate-object-method-ssl-opts-via-package-lwpuseragent", "title": "Can&#39;t locate object method &quot;ssl_opts&quot; via package &quot;LWP::UserAgent&quot;", "body": "<p>All related modules are installed and also checked dependencies ..already installed everything even though given below error :</p>\n\n<blockquote>\n  <p>Can't locate object method \"ssl_opts\" via package \"LWP::UserAgent\" on centos 6</p>\n</blockquote>\n\n<p>Can anyone help me? </p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 6, "last_activity_date": 1461761936, "last_edit_date": 1461761936, "creation_date": 1461753429, "answer_id": 36887385, "question_id": 36887201, "link": "https://stackoverflow.com/questions/36887201/what-does-the-dollar-character-in-the-brackets-of-a-perl-subroutine-mean/36887385#36887385", "title": "What does the dollar character in the brackets of a Perl subroutine mean?", "body": "<p>The <code>($)</code> is called a <em>subroutine prototype</em>.</p>\n\n<p>See the PerlSub man page for more information: <a href=\"http://perldoc.perl.org/perlsub.html#Prototypes\" rel=\"nofollow\">http://perldoc.perl.org/perlsub.html#Prototypes</a></p>\n\n<p>Prototyping isn't very common nowadays. <a href=\"http://search.cpan.org/perldoc?Perl::Critic::Policy::Subroutines::ProhibitSubroutinePrototypes\" rel=\"nofollow\">Best Practice is not using it</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 1, "creation_date": 1461761273, "post_id": 36887386, "comment_id": 61344838, "body": "Perhaps better stated as &quot;... will only accept a single parameter, which will be evaluated in scalar context.&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1461761827, "post_id": 36887386, "comment_id": 61345289, "body": "@Neil Slater, No, it doesn&#39;t mean that. <code>@a=&#39;one_scalar_value&#39;; do_it(@a)</code> would normally pass a single scalar value, but the prototype breaks this. That particular prototype means &quot;The first (and only) item of the argument list is to be evaluated in scalar context&quot;."}], "tags": [], "owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "is_accepted": true, "score": 7, "last_activity_date": 1461766080, "last_edit_date": 1461766080, "creation_date": 1461753434, "answer_id": 36887386, "question_id": 36887201, "link": "https://stackoverflow.com/questions/36887201/what-does-the-dollar-character-in-the-brackets-of-a-perl-subroutine-mean/36887386#36887386", "title": "What does the dollar character in the brackets of a Perl subroutine mean?", "body": "<p>It is a <a href=\"http://perldoc.perl.org/perlsub.html#Prototypes\" rel=\"nofollow\">subroutine prototype</a>.</p>\n\n<p>The single <code>$</code> means that the sub will only accept a single scalar value, and will interpret other types using scalar context. For instance, if you pass an array as the param e.g. <code>do_it(@array)</code>, Perl will not expand <code>@array</code> into a list, but instead pass in the length of the array to the subroutine body.</p>\n\n<p>This is sometimes useful as Perl can give an error message when the subroutine is called incorrectly. Also, Perl's interpreter can use the prototypes to disambiguate method calls. I have seen the <code>&amp;</code> symbol (for code block prototype) used quite neatly to write native-looking routines that call to anonymous code.</p>\n\n<p>However, it only works in some situations - e.g. it doesn't work very well in OO Perl. Hence its use is a bit patchy. Perl Best Practices recommends against using them. </p>\n"}], "owner": {"reputation": 5282, "user_id": 1003815, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a2de7b72452cde6ac37a07e506d68149?s=128&d=identicon&r=PG", "display_name": "RTF", "link": "https://stackoverflow.com/users/1003815/rtf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 802, "favorite_count": 0, "accepted_answer_id": 36887386, "answer_count": 2, "score": 5, "last_activity_date": 1461766080, "creation_date": 1461752943, "question_id": 36887201, "link": "https://stackoverflow.com/questions/36887201/what-does-the-dollar-character-in-the-brackets-of-a-perl-subroutine-mean", "title": "What does the dollar character in the brackets of a Perl subroutine mean?", "body": "<p>I've inherited some Perl code and occasionally I see subroutines defined like this:</p>\n\n<pre><code>sub do_it($) {\n    ...\n}\n</code></pre>\n\n<p>I can't find the docs that explain this. What does the dollar symbol in brackets mean?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1461752368, "post_id": 36886556, "comment_id": 61338245, "body": "Please include an example input file, and the desired output. You can <a href=\"https://stackoverflow.com/posts/36886556/edit\">edit</a> your question."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1461752558, "post_id": 36886556, "comment_id": 61338378, "body": "Also, please <code>use strict</code> and <code>use warnings</code>. There are several syntax problems in your code. Math operators are not interpolated in strings. Your <code>print</code> statement doesn&#39;t do what you think it does."}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 81, "user_id": 6081887, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-wZD3YTSqC5Q/AAAAAAAAAAI/AAAAAAAAAIw/OYcItnJXZek/photo.jpg?sz=128", "display_name": "Sumathi Gokul", "link": "https://stackoverflow.com/users/6081887/sumathi-gokul"}, "edited": false, "score": 1, "creation_date": 1461764484, "post_id": 36888562, "comment_id": 61347494, "body": "When you say &quot;I tried the same thing&quot;, what <b>exactly</b> did you do?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 81, "user_id": 6081887, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-wZD3YTSqC5Q/AAAAAAAAAAI/AAAAAAAAAIw/OYcItnJXZek/photo.jpg?sz=128", "display_name": "Sumathi Gokul", "link": "https://stackoverflow.com/users/6081887/sumathi-gokul"}, "edited": false, "score": 0, "creation_date": 1461822783, "post_id": 36888562, "comment_id": 61375941, "body": "My code works. If your code doesn&#39;t work, then you must have changed my code in some way. Without knowing what those changes are, there&#39;s no way I can help you any more."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 81, "user_id": 6081887, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-wZD3YTSqC5Q/AAAAAAAAAAI/AAAAAAAAAIw/OYcItnJXZek/photo.jpg?sz=128", "display_name": "Sumathi Gokul", "link": "https://stackoverflow.com/users/6081887/sumathi-gokul"}, "edited": false, "score": 0, "creation_date": 1461822854, "post_id": 36888562, "comment_id": 61375971, "body": "Did you notice that you need the three-dot version of the flip-flop operator?"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1461756784, "creation_date": 1461756784, "answer_id": 36888562, "question_id": 36886556, "link": "https://stackoverflow.com/questions/36886556/perl-script-to-print-lines-between-empty-lines/36888562#36888562", "title": "Perl script to print lines between empty lines", "body": "<p>Use a <a href=\"http://perlhacks.com/2014/01/dots-perl/\" rel=\"nofollow\">flip-flop operator</a>.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nwhile (&lt;DATA&gt;) {\n  # Turn flip-flop on at the first empty line\n  # And then off at the next empty line\n  if (/^$/ ... /^$/) {\n    # Ignore the two empty lines\n    next unless /\\S/;\n    print;\n  }\n}\n\n__DATA__\nwire enable,GSMC_G8,mkf_g,un1_G11_0, GND_net_1, VCC, G8, G16, Q_RNIUQAA,        CK_c, reset_c, \n    G0_c, G1_c, G17_c, G2_c, G3_c, G17_c_i, GND_1, VCC_0;\n\nINBUF G3_pad (.PAD(G3), .Y(G3_c));\ndff_0_1 DFF_1 (.G17_c(G17_c), .reset_c(reset_c), .CK_c(CK_c), \n    .G0_c(G0_c), .G8(G8));\nGND GND_i_0 (.Y(GND_1));\nNOR2 G3_pad_RNIUUQF (.A(G8), .B(G3_c), .Y(G16));\nINV G17_pad_RNO (.A(G17_c), .Y(G17_c_i));\nVCC VCC_i (.Y(VCC));\nCLKBUF CK_pad (.PAD(CK), .Y(CK_c));\n\nendmodule\n</code></pre>\n\n<p>I've used the <code>DATA</code> filehandle here to make it easy to demonstrate what's happening. It's easy to swap that out for another filehandle.</p>\n"}], "owner": {"reputation": 81, "user_id": 6081887, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-wZD3YTSqC5Q/AAAAAAAAAAI/AAAAAAAAAIw/OYcItnJXZek/photo.jpg?sz=128", "display_name": "Sumathi Gokul", "link": "https://stackoverflow.com/users/6081887/sumathi-gokul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1461756784, "creation_date": 1461751338, "last_edit_date": 1495541259, "question_id": 36886556, "link": "https://stackoverflow.com/questions/36886556/perl-script-to-print-lines-between-empty-lines", "title": "Perl script to print lines between empty lines", "body": "<p>i read a similar question at (<a href=\"https://stackoverflow.com/questions/1546985/how-can-i-print-all-the-lines-between-the-previous-and-next-empty-lines-when-a-m\">How can I print all the lines between the previous and next empty lines when a match is found?</a>)! and tried to print all lines between empty lines, but it is not printing so. Here is the script i tried, kindly correct it to work for my requirement.</p>\n\n<pre><code>my @file = &lt;IN&gt;;\nfor (0 .. $#file) {\nif ($file[$_] =~ /Match/){\n    my $start = $_;\n    while ($start &gt;= 0 &amp;&amp; $file[$start] !~ /^$/) {\n        $start--; # $start points to first empty line\n    }\n    my $end = $_;\n    while ($end &lt;= $#file &amp;&amp; $file[$end] !~ /^$/) {\n        $end++; # $end points to next empty line\n    }\n print OUT \"\\n@file[$start+1..$end-1]\"; #it should print between two empty lines right??\n}\n}\n</code></pre>\n\n<p>Input File: </p>\n\n<pre><code>wire enable,GSMC_G8,mkf_g,un1_G11_0, GND_net_1, VCC, G8, G16, Q_RNIUQAA,        CK_c, reset_c, \n    G0_c, G1_c, G17_c, G2_c, G3_c, G17_c_i, GND_1, VCC_0;\n\nINBUF G3_pad (.PAD(G3), .Y(G3_c));\ndff_0_1 DFF_1 (.G17_c(G17_c), .reset_c(reset_c), .CK_c(CK_c), \n    .G0_c(G0_c), .G8(G8));\nGND GND_i_0 (.Y(GND_1));\nNOR2 G3_pad_RNIUUQF (.A(G8), .B(G3_c), .Y(G16));\nINV G17_pad_RNO (.A(G17_c), .Y(G17_c_i));\nVCC VCC_i (.Y(VCC));\nCLKBUF CK_pad (.PAD(CK), .Y(CK_c));\n\nendmodule\n</code></pre>\n\n<p>Output file required:</p>\n\n<pre><code>INBUF G3_pad (.PAD(G3), .Y(G3_c));\ndff_0_1 DFF_1 (.G17_c(G17_c), .reset_c(reset_c), .CK_c(CK_c), \n    .G0_c(G0_c), .G8(G8));\nGND GND_i_0 (.Y(GND_1));\nNOR2 G3_pad_RNIUUQF (.A(G8), .B(G3_c), .Y(G16));\nINV G17_pad_RNO (.A(G17_c), .Y(G17_c_i));\nVCC VCC_i (.Y(VCC));\nCLKBUF CK_pad (.PAD(CK), .Y(CK_c));\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1461745777, "post_id": 36884270, "comment_id": 61333598, "body": "Why is the variable that holds the filehandle called <code>$directory</code>? That&#39;s pretty ambiguous in an IT context. Use meaningful names for your variables!"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1461745844, "post_id": 36884363, "comment_id": 61333639, "body": "Actually <code>chomp</code> removes whatever is in <code>$&#47;</code>."}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 3, "last_activity_date": 1461745795, "creation_date": 1461745795, "answer_id": 36884363, "question_id": 36884270, "link": "https://stackoverflow.com/questions/36884270/how-to-execute-a-command-for-every-line-in-file/36884363#36884363", "title": "How to execute a command for every line in file?", "body": "<pre><code>open my $directory_fh, '&lt;', abc.txt or die \"Error $! opening abc.txt\";\nwhile (&lt;$directory_fh&gt;) {\n    chomp; # Remove final \\n if any\n    print $_; # Do whatevery you want here\n}\nclose $directory_fh;\n</code></pre>\n\n<p>I prefer to suffix all filehandles with <em>_fh</em> to make them more obvious.</p>\n\n<p><code>while (&lt;fh&gt;)</code> loops though all lines of the file.</p>\n\n<p>You might need/want to remove a final <code>\\r</code> if the file might have Windows/MS-DOS format.</p>\n"}, {"comments": [{"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 0, "creation_date": 1461746065, "post_id": 36884383, "comment_id": 61333775, "body": "The <code>for</code> solution loads the whole file contents into memory which could get very huge, <code>while</code> loads only a single line (in blocks of Perl&#39;s buffer size)."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 0, "creation_date": 1461746834, "post_id": 36884383, "comment_id": 61334276, "body": "Correct. I&#39;ve updated the answer as per your input. Thanks."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 2, "last_activity_date": 1461746670, "last_edit_date": 1461746670, "creation_date": 1461745846, "answer_id": 36884383, "question_id": 36884270, "link": "https://stackoverflow.com/questions/36884270/how-to-execute-a-command-for-every-line-in-file/36884383#36884383", "title": "How to execute a command for every line in file?", "body": "<blockquote>\n  <p>create a loop to run a command on all the lines of file abc.txt</p>\n</blockquote>\n\n<pre><code>foreach my $line (@lines){\n        #assugming $cmd contains the command you want to execute\n        my $output = `$cmd $line`;\n        print \"Executed $cmd on $line, output: $output\\n\";\n}\n</code></pre>\n\n<p>Edit: As per Sebastian's feedback</p>\n\n<pre><code>my $i = 0;\nwhile ($i &lt;= $#lines){\n        my $output = `$cmd $lines[$i]`;\n        print \"Executed $cmd on $lines[$i], output: $output\\n\";\n}\n</code></pre>\n\n<p>OR if you are ok with destroying array then:</p>\n\n<pre><code>while (@lines){\n        my $line = shift @lines;\n        my $output = `$cmd $line`;\n        print \"Executed $cmd on $line, output: $output\\n\";\n}\n</code></pre>\n\n<p>If you wanted safe code that didn't refer to the array twice, you could use splice in a list assignment.</p>\n\n<pre><code>while (my ($line) = splice(@array, 0, 1)) {\n        my $output = `$cmd $line`;\n        print \"Executed $cmd on $line, output: $output\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6260268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1TKx.jpg?s=128&g=1", "display_name": "Mike Froetscher", "link": "https://stackoverflow.com/users/6260268/mike-froetscher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1461746670, "creation_date": 1461745496, "last_edit_date": 1461745693, "question_id": 36884270, "link": "https://stackoverflow.com/questions/36884270/how-to-execute-a-command-for-every-line-in-file", "title": "How to execute a command for every line in file?", "body": "<pre><code>open my $directory, '&lt;', abc.txt \n\nchomp(my @values = &lt;$directory&gt;);\n</code></pre>\n\n<p>There is a file named <code>abc.txt</code> with the following contents:</p>\n\n<pre><code>abcde\nabc\nbckl\ndrfg\nefgt\neghui\nwebnmferg\n</code></pre>\n\n<p>With the above lines, I am sending contents of file <code>abc.txt</code> into an array </p>\n\n<p>Intention is to create a loop to run a command on all the lines of file <code>abc.txt</code></p>\n\n<p>Any suggestions for creating the loop?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 4, "creation_date": 1461746472, "post_id": 36882022, "comment_id": 61334041, "body": "<code>printf = print sprintf</code> ;)"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1461773377, "post_id": 36882022, "comment_id": 61354635, "body": "@el.pescado. &lt;pedant&gt;Not quite. <code>perl -e &#39;@t=(&quot;%s\\n&quot;,&quot;foo&quot;);print sprintf @t;printf @t</code>&lt;/pedant&gt;"}, {"owner": {"reputation": 970, "user_id": 6380992, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iTzJ5.jpg?s=128&g=1", "display_name": "Seshadri R", "link": "https://stackoverflow.com/users/6380992/seshadri-r"}, "edited": false, "score": 0, "creation_date": 1498113144, "post_id": 36882022, "comment_id": 76366856, "body": "How did this question get a score of 11, while it is blantantly clear that there was absolutely no research or even reading effort investment?"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1461745605, "post_id": 36882148, "comment_id": 61333477, "body": "And maybe you should also add <code>say</code>."}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": true, "score": 17, "last_activity_date": 1462885588, "last_edit_date": 1462885588, "creation_date": 1461739070, "answer_id": 36882148, "question_id": 36882022, "link": "https://stackoverflow.com/questions/36882022/difference-between-printf-print-and-sprintf-in-perl/36882148#36882148", "title": "Difference between printf, print, and sprintf in Perl?", "body": "<p><strong>Short:</strong></p>\n\n<p>See the manuals:</p>\n\n<ul>\n<li><a href=\"http://perldoc.perl.org/functions/print.html\" rel=\"noreferrer\">http://perldoc.perl.org/functions/print.html</a></li>\n<li><a href=\"http://perldoc.perl.org/functions/printf.html\" rel=\"noreferrer\">http://perldoc.perl.org/functions/printf.html</a></li>\n<li><a href=\"http://perldoc.perl.org/functions/sprintf.html\" rel=\"noreferrer\">http://perldoc.perl.org/functions/sprintf.html</a></li>\n</ul>\n\n<p><strong>Long:</strong></p>\n\n<p><code>print</code> is the default output function. It does no formatting but may append a line break if Perl is called with <code>-l</code>:</p>\n\n<pre><code>print $foo;\nprint \"Hello $world\";\nprint $filehandle $something;\n</code></pre>\n\n<p><code>sprintf</code> is a formatter and doesn't do any printing at all:</p>\n\n<pre><code>$result = sprintf('The %s is %d', 'answer', 42);\n</code></pre>\n\n<p><code>printf</code> is the same as <code>sprintf</code>, but actually prints the result:</p>\n\n<pre><code>printf 'This is question %d on %s', 36882022, 'StackOverflow';\n</code></pre>\n\n<p>See the <a href=\"http://perldoc.perl.org/functions/sprintf.html\" rel=\"noreferrer\"><code>sprintf</code> documentation</a> for more details on valid placeholders/format strings.</p>\n\n<p>Since 5.10, Perl also supports <a href=\"http://perldoc.perl.org/functions/say.html\" rel=\"noreferrer\"><code>say</code></a> which is basically a <code>print</code> plus an additional <code>\\n</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 3075, "user_id": 2271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac4dfa3a456dd4a6c1e77cb976de9b1?s=128&d=identicon&r=PG", "display_name": "Dave Ross", "link": "https://stackoverflow.com/users/2271/dave-ross"}, "is_accepted": false, "score": 3, "last_activity_date": 1461739259, "creation_date": 1461739259, "answer_id": 36882209, "question_id": 36882022, "link": "https://stackoverflow.com/questions/36882022/difference-between-printf-print-and-sprintf-in-perl/36882209#36882209", "title": "Difference between printf, print, and sprintf in Perl?", "body": "<p><code>print</code> just outputs.</p>\n\n<p><code>printf</code> takes a formatting string like \"%3f\" and uses it to format the output.</p>\n\n<p><code>sprintf</code> is the same as printf except it doesn't actually output anything. It returns a formatted string.</p>\n"}, {"tags": [], "owner": {"reputation": 695, "user_id": 2060441, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e093d389dd8919b616a4835e4adcf22f?s=128&d=identicon&r=PG", "display_name": "Nick P", "link": "https://stackoverflow.com/users/2060441/nick-p"}, "is_accepted": false, "score": 3, "last_activity_date": 1461740782, "creation_date": 1461740782, "answer_id": 36882697, "question_id": 36882022, "link": "https://stackoverflow.com/questions/36882022/difference-between-printf-print-and-sprintf-in-perl/36882697#36882697", "title": "Difference between printf, print, and sprintf in Perl?", "body": "<p>The others covered the main points, but one other important little fact is that you can pass a list to <code>print</code>, just like <code>die</code>. It can be convenient sometimes and is apparently more efficient than concatenation if you are starting with a list.</p>\n\n<p>e.g.</p>\n\n<pre><code>sub log_with_timestamp {\n  my $timestamp = get_timestamp();\n  print $timestamp, ' ', @_, \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 694, "user_id": 3916803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/orEp7.jpg?s=128&g=1", "display_name": "parthi", "link": "https://stackoverflow.com/users/3916803/parthi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9801, "favorite_count": 5, "accepted_answer_id": 36882148, "answer_count": 3, "score": 15, "last_activity_date": 1465865068, "creation_date": 1461738698, "last_edit_date": 1465865068, "question_id": 36882022, "link": "https://stackoverflow.com/questions/36882022/difference-between-printf-print-and-sprintf-in-perl", "title": "Difference between printf, print, and sprintf in Perl?", "body": "<p>What is the specific usage of <code>print</code>, <code>printf</code>, and <code>sprintf</code> in Perl?</p>\n\n<p>All three keywords are used for printing purposes, but can someone differentiate it briefly?</p>\n"}, {"tags": ["html", "perl", "unicode", "escaping"], "comments": [{"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 0, "creation_date": 1461739269, "post_id": 36881837, "comment_id": 61329585, "body": "Where does escapeHTML come from? Are you using a module, probably with <code>use Some::Module;</code> at the top of your script? The second line has a syntax error: **$**escapeHTML($string) is not valid, probably the $ should be removed."}, {"owner": {"reputation": 439, "user_id": 1508110, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e2127ba244a85402f7be871e4f16da65?s=128&d=identicon&r=PG", "display_name": "Steven Tang Ti Khoon", "link": "https://stackoverflow.com/users/1508110/steven-tang-ti-khoon"}, "reply_to_user": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 1, "creation_date": 1461740981, "post_id": 36881837, "comment_id": 61330577, "body": "sorry i&#39;ve already ammended my question and yes its from use CGI qw(escapeHTML); i&#39;m a little new to perl and getting use to the syntax. sorry"}, {"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "edited": false, "score": 1, "creation_date": 1461744747, "post_id": 36881837, "comment_id": 61332891, "body": "if you want to use unicode strings in you source, you need to <code>use utf8;</code>. If all your input/outputs  are in utf8, you should probably also <code>use utf8::all</code>, which will open all of your file handles in utf8. Otherwise, for legacy reasons, some utf8 strings risk being output as latin1."}, {"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 0, "creation_date": 1461775195, "post_id": 36881837, "comment_id": 61355927, "body": "<code>utf8::all</code> is remarkably convenient and 95% good ideas.  I prefer the <a href=\"http://perldoc.perl.org/perlunicook.html#!1e-0%3a-Standard-preamble\" rel=\"nofollow noreferrer\">Standard Preamble from the Perl Unicode Cookbook</a> as it sets my code free of the <a href=\"http://cpanratings.perl.org/dist/utf8-all\" rel=\"nofollow noreferrer\">WTF 5%</a>."}], "answers": [{"comments": [{"owner": {"reputation": 439, "user_id": 1508110, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e2127ba244a85402f7be871e4f16da65?s=128&d=identicon&r=PG", "display_name": "Steven Tang Ti Khoon", "link": "https://stackoverflow.com/users/1508110/steven-tang-ti-khoon"}, "edited": false, "score": 1, "creation_date": 1461832096, "post_id": 36883666, "comment_id": 61381127, "body": "Hi thanks for the answer and i think i know whats the issue here. I actually referred to  this page <a href=\"http://perldoc.perl.org/CGI.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/CGI.html</a> and there is a section on escapeHTML which states &quot;In addition, the hexadecimal 0x8b and 0x9b characters, which some browsers incorrectly interpret as the left and right angle-bracket characters, are replaced by their numeric character entities (&quot;&amp;#8249&quot; and &quot;&amp;#8250;&quot;)&quot;. So i guess that is why only some characters were affected by this."}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": true, "score": 1, "last_activity_date": 1461743702, "creation_date": 1461743702, "answer_id": 36883666, "question_id": 36881837, "link": "https://stackoverflow.com/questions/36881837/htmlescape-converting-some-unicode-characters/36883666#36883666", "title": "htmlescape converting some unicode characters", "body": "<p>The preferred way of HTML encoding is <a href=\"http://search.cpan.org/perldoc?HTML::Entities\" rel=\"nofollow\">HTML::Entities</a></p>\n\n<p>Encode only default unsafe chars:</p>\n\n<pre><code>$encoded = encode_entities($string);\n</code></pre>\n\n<p>Encode &lt; and >, but no &amp; and others:</p>\n\n<pre><code>$encoded = encode_entities($string,'&lt;&gt;');\n</code></pre>\n\n<p>Encode non-plain ASCII:</p>\n\n<pre><code>$encoded = encode_entities($input, '^\\n\\x20-\\x25\\x27-\\x7e');\n</code></pre>\n\n<p><code>escapeHTML()</code> is not part of the <a href=\"http://search.cpan.org/perldoc?CGI\" rel=\"nofollow\">CGI documentation</a>, I assume that it isn't build for being used from outside the CGI module. It's using HTML::Entities itself if you look at the CGI source:</p>\n\n<pre><code>$ENCODE_ENTITIES     = q{&amp;&lt;&gt;\"'};\nsub escapeHTML {\n     require HTML::Entities;\n     # hack to work around  earlier hacks\n     push @_,$_[0] if @_==1 &amp;&amp; $_[0] eq 'CGI';\n     my ($self,$toencode,$newlinestoo) = CGI::self_or_default(@_);\n     return undef unless defined($toencode);\n     my $encode_entities = $ENCODE_ENTITIES;\n     $encode_entities .= \"\\012\\015\" if ( $encode_entities &amp;&amp; $newlinestoo );\n     return HTML::Entities::encode_entities($toencode,$encode_entities);\n}\n</code></pre>\n\n<p>Seeing this sourcecode, I wonder why it does any Unicode encoding at all.</p>\n"}], "owner": {"reputation": 439, "user_id": 1508110, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e2127ba244a85402f7be871e4f16da65?s=128&d=identicon&r=PG", "display_name": "Steven Tang Ti Khoon", "link": "https://stackoverflow.com/users/1508110/steven-tang-ti-khoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "accepted_answer_id": 36883666, "answer_count": 1, "score": 1, "last_activity_date": 1461743702, "creation_date": 1461738116, "last_edit_date": 1461740903, "question_id": 36881837, "link": "https://stackoverflow.com/questions/36881837/htmlescape-converting-some-unicode-characters", "title": "htmlescape converting some unicode characters", "body": "<p>I have an issue here where  i am using perl to input some characters through an input textbox and save into database. All the values will go through a function to run escapeHTML before saving into the database. Problem is this escapeHTML function is converting some of my Chinese characters to HTML code as well which is shown in Example 2 and 3. I'm just wondering why is escapeHTML only impacting some unicode characters and not all ?? </p>\n\n<p>Hope someone can help me with this. </p>\n\n<p>Thanks </p>\n\n<pre><code>use CGI qw(escapeHTML);\n\n$string = \"\u6cf0\u56fd\";\n$string = escapeHTML($string);\n\n$string2 = \"\u0645\u0631\u062d\u0628\u0627 \u0628\u0627\u0644\u0639\u0627\u0644\u0645\";\n$string2 = escapeHTML($string2);\n\nexample 1: \n$VAR1 = 'Dump out string \u0645\u0631\u062d\u0628\u0627 \u0628\u0627\u0644\u0639\u0627\u0644\u0645';\n$VAR1 = 'Dump out after escapeHTML string \u0645\u0631\u062d\u0628\u0627 \u0628\u0627\u0644\u0639\u0627\u0644\u0645';\n\nExample 2: \n$VAR1 = 'Dump out string \u6cf0\u56fd';\n$VAR1 = 'Dump out after escapeHTML string \u6cf0\u2592&amp;#8250;\u2592';\n\nExample 3:\n$VAR1 = 'Dump out string \u6cf0\u56fd - &lt;font&gt;TEST&lt;/font&gt;';\n$VAR1 = 'Dump out after escapeHTML string \u6cf0\u2592&amp;#8250;\u2592 - &amp;lt;font&amp;gt;TEST&amp;lt;/font&amp;gt;';\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2878, "user_id": 600360, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/t4VHw.jpg?s=128&g=1", "display_name": "Mort", "link": "https://stackoverflow.com/users/600360/mort"}, "edited": false, "score": 0, "creation_date": 1461721060, "post_id": 36878487, "comment_id": 61323582, "body": "What have you done to debug your program?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1461725896, "post_id": 36878487, "comment_id": 61324854, "body": "<code>use warnings;</code> is even more important than strict"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6190405, "user_type": "registered", "profile_image": "https://graph.facebook.com/974908749251609/picture?type=large", "display_name": "Joel Chavarria", "link": "https://stackoverflow.com/users/6190405/joel-chavarria"}, "edited": false, "score": 0, "creation_date": 1461778616, "post_id": 36879322, "comment_id": 61358176, "body": "This helps a ton thank you so much. This is my first programming class and its been killing me all semester. I&#39;ll keep looking at the code and editing to get rid of some of the extra bugs."}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 2, "last_activity_date": 1461783504, "last_edit_date": 1461783504, "creation_date": 1461724900, "answer_id": 36879322, "question_id": 36878487, "link": "https://stackoverflow.com/questions/36878487/perl-sequence-alignment-score-calculation-error/36879322#36879322", "title": "Perl sequence alignment score calculation error", "body": "<p>Unfortunately, the number of simple perl bugs, not to mention some algorithm ones are too numerous to list. Just study and compare the code below.</p>\n\n<p>Here's the cleaned up code. It may still have some bugs, but at least it prints non-zero [please pardon the gratuitous style cleanup]:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\n\nmy $sum = 0;\nmy @seq;\nmy $seqString;\nmy $seqShuf;\nmy $line;\n\nopen(FILE, \"test_seq.txt\") or\n    die(\"unable to open file -- $!\\n\");\n\nwhile ($line = &lt;FILE&gt;) {\n    chomp($line);\n    push(@seq,split(//,$line));\n}\n\nclose(FILE);\n\nmy @shufSeq = shuffle_string(@seq);\n#print \"Original sequence is:\\n\";\n#print \"$seqString\\n\";\n#print \"Mutated Sequence is:\\n\";\n#print \"$seqShuf\\n\";\n\nmy %test = (\nAA =&gt; 0,\n    AG =&gt; -1,\n    AT =&gt; -2,\n    AC =&gt; -2,\n    GA =&gt; -1,\n    GG =&gt; 0,\n    GT =&gt; -2,\n    GC =&gt; -2,\n    TA =&gt; -2,\n    TG =&gt; -2,\n    TT =&gt; 0,\n    TC =&gt; -1,\n    CA =&gt; -2,\n    CG =&gt; -2,\n    CT =&gt; -1,\n    CC =&gt; 0\n);\n\nmy @base_pairs = make_base_pairs(\\@seq, \\@shufSeq);\nforeach my $bp (@base_pairs)\n{\n    ###printf(\"DEBUG bp='%s'\\n\",$bp);\n    $sum += $test{$bp};\n}\n\nprint(\"base_pairs: \",join(\" \",@base_pairs),\"\\n\");\nprint \"The score is \", $sum, \"\\n\";\n\n# Shuffles original sequence\nsub shuffle_string\n{\n    my (@string) = @_;\n    my $length = @string;\n\n    for (my $i = 0; $i &lt; $length-1; $i++) {\n        my $j = random_int ($i, $length-1);\n\n        my $tmp = $string[$i];\n        $string[$i] = $string[$j];\n        $string[$j] = $tmp;\n    }\n\n    @string;\n}\n\n# created random int between two parameters\nsub random_int\n{\n    my($par1,$par2) = @_;\n    my $num = (1+$par1) +  int(rand($par2 - $par1));\n    $num;\n}\n\n# aligns base pairs based on index location\nsub make_base_pairs\n{\n    my($orig,$shuf) = @_;\n    my $idx = 0;\n    my @bps;\n\n    foreach my $base (@$orig) {\n        push(@bps,$base . $shuf-&gt;[$idx]);\n        $idx++;\n    }\n\n    return @bps;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE:</strong></p>\n\n<blockquote>\n  <p>This helps a ton thank you so much. This is my first programming class and its been killing me all semester. I'll keep looking at the code and editing to get rid of some of the extra bugs.</p>\n</blockquote>\n\n<p>Below are some additional notes that may help with the understanding of the mechanics of the changes I made.</p>\n\n<p>Now that the program is basically working, you can check to see if your randomization and shuffle code are algorithmically adequate (i.e. sufficiently random and the shuffle works).</p>\n\n<p>For example, I think the last element of the shuffle will <em>always</em> be the last element of the original, because the <code>i</code> loop is <code>&lt; $length-1</code> instead of <code>&lt; $length</code>. I tried to fix this by looping one more, but got an out-of-bounds on the array.</p>\n\n<hr>\n\n<p><strong>File I/O:</strong></p>\n\n<p>The code to read in file data and split on single characters is pretty idiomatic.</p>\n\n<p>In your code, the <code>@seq = &lt;FILE&gt;</code> would only give you an array of one with the text of the last line [because the first line was pulled by the <code>$line = &lt;FILE&gt;</code>].</p>\n\n<p>Looping on the <code>chomp</code> value is not the best criterion for the loop. It [maybe, sort of] works, but I've never done it that way.</p>\n\n<p>The <code>next if</code> would do nothing because it would operate on <code>$_</code> and not <code>$line</code> [and why have it at all?].</p>\n\n<p>So, at the end, <code>@seq</code> would have a single element that was the last line [<em>without</em> a newline strip], instead of all characters of the file split into one character per <code>@seq</code> element.</p>\n\n<p>Since <code>@seq</code> still had a newline, that's probably why you had a second <code>chomp</code> later</p>\n\n<hr>\n\n<p><strong>Shuffle:</strong></p>\n\n<p>The main change to <code>shuffle_seq</code> is to operate by indexing into an array instead of using <code>substr</code> to swap within a scalar. In your code, you did a <code>join</code> on <code>@seq</code> just to call <code>shuffle_seq</code> and then did a <code>split</code> on the result. By having <code>shuffle_seq</code> work on arrays, things are simpler.</p>\n\n<hr>\n\n<p><strong>Syntax:</strong></p>\n\n<p>I've never seen <code>(my $par1, my $par2) = @_;</code> syntax before [it might be valid--I didn't check]. I just use <code>my($par1,$par2) = @_;</code></p>\n\n<hr>\n\n<p><strong>make_base_pair:</strong></p>\n\n<p>In your <code>make_base_pairs</code>, <em>all</em> elements of <em>both</em> <code>@seq</code> and <code>@shufSeq</code> would end up in make_base_pair's <code>@orig</code> and its <code>@shuf</code> would be empty.</p>\n\n<p>I changed the sequence to <code>make_base_pair(\\@seq,\\@shufSeq)</code> [with a corresponding change inside the function]. This passes a scalar <em>reference</em> to each array, rather than passing the array values.</p>\n\n<p>Note that with references, inside the function, the syntax to access changes to <code>@$orig</code> and <code>$shuf-&gt;[$idx]</code></p>\n\n<p>With these changes, the algorithmic results are more likely to be correct.</p>\n\n<p>Without them, <code>make_base_pairs</code> would still operate, but it had one final bug that was the show stopper:</p>\n\n<p>Your <code>push</code> would add <em>two</em> elements on each loop: <code>X,\"\"</code> [remember that <code>@shuf</code> was empty]. So, the end result was an array of single char elements [or empty] and <em>not</em> array elements that were <em>two</em> characters as you desired.</p>\n\n<p>My change to the push: <code>push(@bps,$base . $shuf-&gt;[$idx]);</code> uses perl's string <em>concatenation</em> operator: <code>.</code> to concatenate <code>base</code> and <code>shuf</code> [which are a single character each] to produce two character output elements.</p>\n\n<p>The main bug was that <code>make_base_pairs</code> was returning an array that had <em>no</em> two character elements, so the loop to sum them could <em>never</em> produce non-zero.</p>\n"}], "owner": {"reputation": 11, "user_id": 6190405, "user_type": "registered", "profile_image": "https://graph.facebook.com/974908749251609/picture?type=large", "display_name": "Joel Chavarria", "link": "https://stackoverflow.com/users/6190405/joel-chavarria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1461783504, "creation_date": 1461718870, "last_edit_date": 1461721724, "question_id": 36878487, "link": "https://stackoverflow.com/questions/36878487/perl-sequence-alignment-score-calculation-error", "title": "Perl sequence alignment score calculation error", "body": "<p>Hello I'm writing this program for my Bioinformatics class, where I get a sequence from a text file and then mutate the sequence. After that I'm suppose to do a comparison to make a score by comparing the base pairs. I have all the code written, but I do not understand why I keep getting the score of 0. I'm assuming that the part of my code that deals with this is wrong because I initialized the <code>$sum = 0;</code> I was wondering if I could get some help to fix this issue so that my code works properly. Here is the sequence I'm using. </p>\n\n<pre><code>AGGGCACCTCTCAGTTCTCATTCTAACACCACATAATTTTTATTTGTATTATTCAGATTTTTCATGAACTTTTCCACAT\nAGAATGAAGTTGACATTGTTATTTCTCAGGGTCTCGGTTCACCAGTATTTGACAAACTTGAAGCTGAACTAGCTAAAGC\n</code></pre>\n\n<p>&nbsp;</p>\n\n<pre><code>use strict;\n\nmy $sum = 0;\nmy @seq;\nmy $seqString;\nmy $seqShuf;\nmy $line;\n\nunless(open FILE, \"test_seq.txt\")\n{\n    print \"Cannot open file!\";\n    exit; \n}\n\nwhile (chomp($line = &lt;FILE&gt;))\n{\n    next if (/^&gt;/);\n    @seq = &lt;FILE&gt;;\n}\n\n$seqString = join(\"\",@seq);\nchomp($seqShuf = shuffle_string($seqString));\n$seqShuf =~ s/\\s+//g;\n#print \"Original sequence is:\\n\";\n#print \"$seqString\\n\";\n#print \"Mutated Sequence is:\\n\";\n#print \"$seqShuf\\n\";\n\nmy @shufSeq = split(\"\", $seqShuf, length($seqShuf));\n\nmy %test = (\n            AA =&gt; 0,\n            AG =&gt; -1,\n            AT =&gt; -2,\n            AC =&gt; -2,\n            GA =&gt; -1,\n            GG =&gt; 0,\n            GT =&gt; -2,\n            GC =&gt; -2,\n            TA =&gt; -2,\n            TG =&gt; -2,\n            TT =&gt; 0,\n            TC =&gt; -1,\n            CA =&gt; -2,\n            CG =&gt; -2,\n            CT =&gt; -1,\n            CC =&gt; 0\n            );\n\nmy @base_pairs = make_base_pairs(@seq, @shufSeq);\nforeach my $bp (@base_pairs)\n{\n    $sum += $test{$bp};\n}\n\nprint \"@base_pairs\\n\";\nprint \"The score is \", $sum, \"\\n\";\n\n# Shuffles original sequence\nsub shuffle_string\n{\n    my ($string) = @_;\n    my $length = length $string;\n    for (my $i = 0; $i &lt; $length-1; $i++)\n    {\n        my $j = random_int ($i, $length-1);\n        my $tmp = substr($string, $i, 1);\n        substr($string, $i, 1) = substr($string, $j, 1);\n        substr($string, $j, 1) = $tmp;\n    }\n    return $string;\n}\n\n# created random int between two parameters\nsub random_int\n{\n    (my $par1, my $par2) = @_;\n    my $num = (1+$par1) +  int(rand($par2 - $par1));\n}\n\n# aligns base pairs based on index location\nsub make_base_pairs\n{\n    (my @orig, my @shuf) = @_;\n    my $idx = 0;\n    my @bps;\n    foreach my $base (@orig)\n    {\n        push @bps, $base , $shuf[$idx];\n        $idx++;\n    }\n    return @bps;\n}\n</code></pre>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1461738436, "post_id": 36877450, "comment_id": 61329140, "body": "Where are you calling your subroutine?"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4530658, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-onHFkcu8mHM/AAAAAAAAAAI/AAAAAAAAADQ/J9Vjm-Kqp3g/photo.jpg?sz=128", "display_name": "Landon Wiggs", "link": "https://stackoverflow.com/users/4530658/landon-wiggs"}, "edited": false, "score": 0, "creation_date": 1461766317, "post_id": 36882624, "comment_id": 61348969, "body": "Wow, thank you. That is extremely helpful and I appreciate it!"}], "tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": false, "score": 4, "last_activity_date": 1461821896, "last_edit_date": 1461821896, "creation_date": 1461740540, "answer_id": 36882624, "question_id": 36877450, "link": "https://stackoverflow.com/questions/36877450/add-each-column-to-array-not-just-whole-line-perl/36882624#36882624", "title": "add each column to array, not just whole line - PERL", "body": "<p>So, you want to add all values inside an array. Easy, But In your code, you are adding strings of values instead of value itself.</p>\n\n<p>With <code>push @array, $_;</code> you are creating an array of lines in the file <code>score</code>.</p>\n\n<p>Try:</p>\n\n<pre><code>print Dumper(\\@array);\n</code></pre>\n\n<p>You will see output like this:</p>\n\n<pre><code>$VAR1 = [\n          '50 71 55 93 115',\n          '45 76 49 88 102',\n          '59 78 53 96 145',\n          '33 65 39 82 100',\n          '54 77 56 98 158'\n        ];\n</code></pre>\n\n<p>So when you are adding the values, it adds all elements of array:</p>\n\n<pre><code>'50 71 55 93 115' + '59 78 53 96 145' + '33 65 39 82 100' ......and so on\n</code></pre>\n\n<p>The moment you put <code>+</code> with string it is treated as numeric and by default, <code>perl</code> adds first character in the string to the first character in the other string. If the first character is not a number, It is treated as <code>0</code>.\nYou should check <a href=\"http://perldoc.perl.org/perlop.html#DESCRIPTION\" rel=\"nofollow\"><code>perlop</code></a> for more info.</p>\n\n<p>The solution for this problem is to separate the numbers from every line, treat each of them individually and store them inside the array. This can be done simply using:</p>\n\n<pre><code>push @array, split;\n</code></pre>\n\n<p>Now when you try: </p>\n\n<pre><code>print Dumper(\\@array);\n</code></pre>\n\n<p>It will be like this:</p>\n\n<pre><code>$VAR1 = [\n          '50',\n          '71',\n          '55',\n          '93',\n          '115',\n          '45',\n          '76',\n          '49',\n          '88',\n          '102',\n          '59',\n          '78',\n          '53',\n          '96',\n          '145',\n          '33',\n          '65',\n          '39',\n          '82',\n          '100',\n          '54',\n          '77',\n          '56',\n          '98',\n          '158'\n        ];\n</code></pre>\n\n<p>After this just call your subroutine using:</p>\n\n<pre><code>my $total_sum = sum(@array);\nprint $total_sum,\"\\n\";\n</code></pre>\n\n<p>and define your subroutine as:</p>\n\n<pre><code>sub sum {\n    my @nums = @_;\n    my  $total_sum = 0;\n    $total_sum += $_ foreach(@nums);\n    return $total_sum;\n}\n</code></pre>\n\n<p>The output will be <strong><code>1937</code></strong> as expected.</p>\n"}], "owner": {"reputation": 25, "user_id": 4530658, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-onHFkcu8mHM/AAAAAAAAAAI/AAAAAAAAADQ/J9Vjm-Kqp3g/photo.jpg?sz=128", "display_name": "Landon Wiggs", "link": "https://stackoverflow.com/users/4530658/landon-wiggs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461821896, "creation_date": 1461712522, "last_edit_date": 1461716352, "question_id": 36877450, "link": "https://stackoverflow.com/questions/36877450/add-each-column-to-array-not-just-whole-line-perl", "title": "add each column to array, not just whole line - PERL", "body": "<p>I am writing a perl script and currently working on a subroutine to sum all values of an array. Currently, my code only reads in each line and stores the entire line into each array element. I need each individual number stored in it's own element. </p>\n\n<p>Here's a sample of my data: </p>\n\n<pre><code>50 71 55 93 115\n45 76 49 88 102\n59 78 53 96 145\n33 65 39 82 100\n54 77 56 98 158\n</code></pre>\n\n<p>Here's my code: </p>\n\n<pre><code>my @array;\n\n #bring in each line and store into array called 'array'\n open(my $fh, \"&lt;\", \"score\")\n     or die \"Failed to open file: $!\\n\";\n while(&lt;$fh&gt;) { \n     chomp; \n     push @array, $_;\n } \n close $fh;\n</code></pre>\n\n<p>When I call my subroutine to sum the values of the array, my result is 241. That is the sum of each of the first numbers in each line. </p>\n\n<p>Any help or suggestions? </p>\n"}, {"tags": ["php", "perl"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1461707700, "post_id": 36876418, "comment_id": 61319598, "body": "What is the error message? I&#39;m wondering if some of your environment variables get clobbered when exec&#39;ing via PHP."}, {"owner": {"reputation": 107, "user_id": 654681, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3b038e83cf81b745af4ed8848025d3bf?s=128&d=identicon&r=PG", "display_name": "jmg0880", "link": "https://stackoverflow.com/users/654681/jmg0880"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1461707957, "post_id": 36876418, "comment_id": 61319703, "body": "@stevieb - Actually that is what also confuses me about this, there are no errors!  No php, lighttpd, or perl errors when running it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461708038, "post_id": 36876418, "comment_id": 61319734, "body": "@jmg0880: So how have you established that <i>&quot;the script fails when it reaches the Net::Ping portion of the script and dies&quot;</i> and how have you isolated <i>&quot;Perl Script Area of Failure&quot;</i>?"}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1461708051, "post_id": 36876418, "comment_id": 61319737, "body": "don&#39;t use shell_exec. it doesn&#39;t give access to the exec&#39;d programs exit code, so there&#39;s NO way to tell between a program that failed, and one that simply has no output. use <code>exec()</code> instead, and add in the two extra parameters for exit code and output."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557846"}, "edited": false, "score": 0, "creation_date": 1461708283, "post_id": 36876418, "comment_id": 61319846, "body": "all that pearl could simply be rewritten in php, mixing languages like this is never a good idea"}, {"owner": {"reputation": 107, "user_id": 654681, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3b038e83cf81b745af4ed8848025d3bf?s=128&d=identicon&r=PG", "display_name": "jmg0880", "link": "https://stackoverflow.com/users/654681/jmg0880"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461708447, "post_id": 36876418, "comment_id": 61319905, "body": "@Borodin - essentially when the script is executed via php, the return value I am getting is &quot;checking local database for unreachable hosts&quot;, and if i dump the data in $result, I get the output of result.  If I try to get output past the Net::Ping statement, it fails."}, {"owner": {"reputation": 107, "user_id": 654681, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3b038e83cf81b745af4ed8848025d3bf?s=128&d=identicon&r=PG", "display_name": "jmg0880", "link": "https://stackoverflow.com/users/654681/jmg0880"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1461708617, "post_id": 36876418, "comment_id": 61320002, "body": "@MarcB - funny thing is, I am getting a return value of &quot;checking local database for unreachable hosts&quot;, but the script then dies as if it completed.  I also just tried to use exec and getting similar results.   <code>exec(&#39;&#47;usr&#47;bin&#47;perl &#47;var&#47;www&#47;htdocs&#47;scripts&#47;lsp_script.pl &#39; . $device_id, $output);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1465304356, "creation_date": 1465304356, "answer_id": 37680115, "question_id": 36876418, "link": "https://stackoverflow.com/questions/36876418/perl-script-does-not-fully-run-when-executed-via-php/37680115#37680115", "title": "perl script does not fully run when executed via php", "body": "<p>It turns out to be a permissions issue when the php script tries to run Net::Ping(\"icmp\") and required root privileges.</p>\n\n<pre><code>-sh-4.1$ php check_lsps.php \nicmp ping requires root privilege at /var/www/htdocs/scripts/lsp_script.pl line 54.\nArray\n(\n    [0] =&gt; Checking local databse for unreachable hosts:\n)\n</code></pre>\n\n<p>This was fixed by editing the original exec() command in the php script to:</p>\n\n<pre><code>exec('sudo /usr/bin/perl /var/www/htdocs/scripts/lsp_script.pl ' . $device_id, $output);\n</code></pre>\n\n<p>- jmg0880</p>\n"}], "owner": {"reputation": 107, "user_id": 654681, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3b038e83cf81b745af4ed8848025d3bf?s=128&d=identicon&r=PG", "display_name": "jmg0880", "link": "https://stackoverflow.com/users/654681/jmg0880"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465304356, "creation_date": 1461707431, "last_edit_date": 1461710572, "question_id": 36876418, "link": "https://stackoverflow.com/questions/36876418/perl-script-does-not-fully-run-when-executed-via-php", "title": "perl script does not fully run when executed via php", "body": "<p>I am pulling my hair out trying to figure out why executing my perl script through the command line works great, but when I try to execute it through php, it runs the script, but fails at certain points.</p>\n\n<pre><code>OS: CentOS release 6.6 (Final)\nPHP Version: 5.3.3\nPerl Version: 5.10.1\nlighttpd Version: 1.4.39\n\nweb server type: lighttpd\nwebpage location: /var/www/htdocs/\nscripts location: /var/www/htdocs/scripts/\njquery location: /var/www/htdocs/js/\n</code></pre>\n\n<p>JQUERY to call php script:</p>\n\n<pre><code>$.ajax({\n    url: \"scripts/check_lsps.php\",\n    type: \"POST\",\n    data: 'id='+device_id,\n    dataType: 'text',\n    success: function(data)\n    {\n        console.log(data);\n    },\n    error: function(jqXHR, textStatus, errorThrown)\n    {\n        alert(textStatus, errorThrown);\n    }\n});\n</code></pre>\n\n<p>PHP Script:</p>\n\n<pre><code>&lt;?php\n    $device_id = $_POST['id'];\n    $output = shell_exec('/usr/bin/perl /var/www/htdocs/scripts/lsp_script.pl ' . $device_id);\n    echo ($output);\n?&gt;\n</code></pre>\n\n<p>Perl Script Area of Failure:</p>\n\n<pre><code>sub main {\n    my %lsp_list = ();  \n    #look for any unreachable hosts in local database\n    ping_devices();\n}\n\n\nsub ping_devices {\n    print \"Checking local databse for unreachable hosts:\\n\";\n    my ($result) = database_queries('localhost','juniper_lsps','','',qq(select device_id, device_name from juniper_lsps.devices));\n    if (scalar(@$result) &gt; 0) {\n        for my $host (@$result) {\n            my $p = Net::Ping-&gt;new(\"icmp\"); **&lt;-SCRIPT FAILS HERE** \n            unless ($p-&gt;ping($host-&gt;{device_name}, 1)) {\n                print \"Deleting all data related to $host-&gt;{device_name}, device is unreachable\\n\";\n                database_queries('localhost','juniper_lsps','','',qq(delete from juniper_lsps.devices where device_name = '$host-&gt;{device_name}'));\n                database_queries('localhost','juniper_lsps','','',qq(delete from juniper_lsps.lsps where device_id = '$host-&gt;{device_id}'));\n                database_queries('localhost','juniper_lsps','','',qq(delete from juniper_lsps.lsp_paths where device_id = '$host-&gt;{device_id}'));\n                print \"Deleting of data completed.\\n\";\n            }\n            print \"Completed checking local database for unreachable hosts\\n\";\n        }\n    }\n    else {\n        print \"There are currently no downed lsps recorded.\\n\";\n        print \"Completed checking local database for unreachable hosts\\n\";\n    }\n\n}\n</code></pre>\n\n<p>When I execute the script by clicking on a button on my web page, I am able to return the result of @$result (perl script in the ping_devices function), but the script fails when it reaches the Net::Ping portion of the script and dies.</p>\n\n<p>It works perfectly fine via the command line, but dies short when executing it via php.</p>\n\n<p>Maybe something I am missing with php settings, but I have absolutely no clue.</p>\n\n<p>I can provide more details if needed.  </p>\n\n<p><strong>EDIT: Sorry about this.</strong></p>\n\n<p>It turns out to be a permissions issue when the php script tries to run Net::Ping(\"icmp\") and required root privileges.</p>\n\n<pre><code>-sh-4.1$ php check_lsps.php \nicmp ping requires root privilege at /var/www/htdocs/scripts/lsp_script.pl line 54.\nArray\n(\n    [0] =&gt; Checking local databse for unreachable hosts:\n)\n</code></pre>\n\n<p>This was fixed by editing the original exec() command in the php script to:</p>\n\n<pre><code>exec('sudo /usr/bin/perl /var/www/htdocs/scripts/lsp_script.pl ' . $device_id, $output);\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "is_accepted": true, "score": 1, "last_activity_date": 1461707451, "creation_date": 1461707451, "answer_id": 36876422, "question_id": 36876272, "link": "https://stackoverflow.com/questions/36876272/perl-multiline-pattern-match-using-grep/36876422#36876422", "title": "Perl multiline pattern match using grep", "body": "<p>The problem is that you loaded the file into an array of file's lines, so <code>Copyright (c) 2010 by Bill Shakespeare</code> and <code>All rights reserved.</code> end up in separate array elements. You then try to match your multi-line copyright string on the elements of this array, which fails.</p>\n\n<p>To fix this, you can try loading the file into a scalar and use regex match on that scalar. You also need to escape any parentheses that you want to match:</p>\n\n<pre><code>my $fileContent = `cat $filename`;\n...\nif ($fileContent =~ /Copyright \\(c\\) \\d+ by Bill Shakespeare\\nAll rights reserved./)\n{\n    ...\n}\n</code></pre>\n\n<p>I would also advice you to use Perl's <code>open</code> function and <code>&lt;&gt;</code> operator to load the contents of a file to a variable.</p>\n"}], "owner": {"reputation": 2315, "user_id": 2748513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a57ccf0bf2588656bdef02373a0aaa71?s=128&d=identicon&r=PG&f=1", "display_name": "rodee", "link": "https://stackoverflow.com/users/2748513/rodee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 36876422, "answer_count": 1, "score": 0, "last_activity_date": 1461707451, "creation_date": 1461706791, "question_id": 36876272, "link": "https://stackoverflow.com/questions/36876272/perl-multiline-pattern-match-using-grep", "title": "Perl multiline pattern match using grep", "body": "<p>Here is my script to check if copyright exists in a file.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse List::Util 'first';\n\nmy $filename=\"sample.txt\"; # this file name will be passed-in to the script.\nmy @fileContent=`cat $filename`;\nmy $copyrightFound = first { /copyright .* Shakespeare/i } @fileContent;\nif (!$copyrightFound) {\n   print \"\\nERROR: Copyright missing\\n\";\n   exit;\n}\n#copyright Found\nprint @fileContent;\nif (grep /Copyright (c) \\d+ by Bill Shakespeare\\nAll rights reserved./,@fileContent ) {\n  print \"\\nCopyright is good\\n\";\n} else {\n  print \"\\nCopyright needs to be fixed\\n\";\n}\n</code></pre>\n\n<p>prints:</p>\n\n<pre><code>$ perl copyrightCheck.pl \nCopyright (c) 2010 by Bill Shakespeare\nAll rights reserved.\n\n\nCopyright needs to be fixed\n</code></pre>\n\n<p>but the copyright is good, is there a better way to check this? or whats wrong with my grep command? also <code>All rights reserved.</code> can appear in the same line or next line, can I use <code>\\n*</code> to check the same? </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 3, "creation_date": 1461705142, "post_id": 36875598, "comment_id": 61318419, "body": "What is the result you&#39;re getting and what were you expecting? It&#39;s worth noting that <code>true</code> and <code>false</code> are not Perl keywords. <code>1</code> and <code>0</code> are commonly used. Also your code should almost certainly be in single rather than double quotes - the shell will try to replace <code>$t</code> before running your code. The Bash shell will also be confused by the <code>!</code> in a double-quoted string."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1461748771, "post_id": 36875598, "comment_id": 61335564, "body": "When asking a question like this, it&#39;s usually helpful to explain what you think is strange in the output. Any Perl programmer looking at your examples would think the behaviour is completely expected. If you tell us what you find unexpected then we can debug your misunderstanding."}], "answers": [{"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 4, "last_activity_date": 1461705654, "last_edit_date": 1592644375, "creation_date": 1461705018, "answer_id": 36875829, "question_id": 36875598, "link": "https://stackoverflow.com/questions/36875598/strange-perl-issue-with-logical-operators/36875829#36875829", "title": "strange perl issue with logical operators", "body": "<p>From <a href=\"http://perldoc.perl.org/perlsyn.html#Truth-and-Falsehood\" rel=\"nofollow noreferrer\">perlsyn</a>:</p>\n<blockquote>\n<p><strong>Truth and Falsehood</strong></p>\n<p>The number 0, the strings '0' and &quot;&quot; , the empty list <code>()</code>, and <code>undef</code> are all false in a boolean context. All other values are true. Negation of a true value by <code>!</code> or <code>not</code> returns a special false value.</p>\n</blockquote>\n<p><code>$t=false</code> sets <code>$t</code> to the string <code>false</code> when <code>strict 'subs'</code> is disabled. The string <code>false</code> is truthy when used in a boolean context.</p>\n<p>Therefore:</p>\n<pre><code>$t=false # truthy\n!$t      # falsy\n$t=true  # truthy\n!$t      # falsy\n</code></pre>\n<p>Perl doesn't have special keywords for true and false; it's common to use 1 for true and 0 for false.</p>\n"}], "owner": {"reputation": 9619, "user_id": 534617, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7cd10a43f8fab06f82c32ace961f9fa0?s=128&d=identicon&r=PG", "display_name": "Qiang Li", "link": "https://stackoverflow.com/users/534617/qiang-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "closed_date": 1461707074, "accepted_answer_id": 36875829, "answer_count": 1, "score": 1, "last_activity_date": 1461705654, "creation_date": 1461704238, "question_id": 36875598, "link": "https://stackoverflow.com/questions/36875598/strange-perl-issue-with-logical-operators", "closed_reason": "Duplicate", "title": "strange perl issue with logical operators", "body": "<p>Am doing this on mac, perl version is</p>\n\n<pre><code>This is perl 5, version 16, subversion 3 (v5.16.3) built for darwin-thread-multi-2level\n\n$ perl -e \"$t=false;while(!($t)){print 1}\"\n$ perl -e \"$t=true;while(!($t)){print 1}\"\n$ perl -e \"$t=true;while(not($t)){print 1}\"\n$ perl -e \"$t=false;while(not($t)){print 1}\"\n$\n</code></pre>\n\n<p>Why would this result? Anything I have missed?</p>\n"}, {"tags": ["bash", "perl", "awk", "sed"], "answers": [{"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": 6, "last_activity_date": 1461703449, "creation_date": 1461703449, "answer_id": 36875362, "question_id": 36875310, "link": "https://stackoverflow.com/questions/36875310/bash-insert-space-in-last-but-one-position-of-each-line/36875362#36875362", "title": "bash insert space in last but one position of each line", "body": "<pre><code>$ sed 's/.$/ &amp;/' file\n1234 5\n2345 6\n3456 7\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1371, "user_id": 5056806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfa01ad122fc89b571651ffbbc34ce37?s=128&d=identicon&r=PG&f=1", "display_name": "Claes Wikner", "link": "https://stackoverflow.com/users/5056806/claes-wikner"}, "is_accepted": false, "score": 0, "last_activity_date": 1461798315, "creation_date": 1461798315, "answer_id": 36902450, "question_id": 36875310, "link": "https://stackoverflow.com/questions/36875310/bash-insert-space-in-last-but-one-position-of-each-line/36902450#36902450", "title": "bash insert space in last but one position of each line", "body": "<pre><code>gawk -v FIELDWIDTHS='4 1' '{$1=$1}1' file\n1234 5\n2345 6\n3456 7\n</code></pre>\n"}], "owner": {"reputation": 7292, "user_id": 1268941, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d27dc0d604e075ad3281aeb013a419c7?s=128&d=identicon&r=PG&f=1", "display_name": "brucezepplin", "link": "https://stackoverflow.com/users/1268941/brucezepplin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 36875362, "answer_count": 2, "score": 0, "last_activity_date": 1461798315, "creation_date": 1461703287, "question_id": 36875310, "link": "https://stackoverflow.com/questions/36875310/bash-insert-space-in-last-but-one-position-of-each-line", "title": "bash insert space in last but one position of each line", "body": "<p>using the <code>$</code> regex I can get last position of each line. but if I have the following:</p>\n\n<pre><code>12345\n23456\n34567\n</code></pre>\n\n<p>I need to add a space so it becomes</p>\n\n<pre><code>1234 5\n2345 6\n3456 7 \n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["excel", "perl", "csv"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1461694665, "post_id": 36872660, "comment_id": 61312128, "body": "to trim leading zeros you can do <code>s&#47;^0+&#47;&#47;</code> I am not sure what you are asking for"}, {"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1461694822, "post_id": 36872660, "comment_id": 61312221, "body": "I want to trim the zero only when the field begins with &quot;0.&quot; - if it begins with anything else - even &quot;00&quot;, I do not want to trim it.  Only want to trim it if it begins with a zero followed by a decimal."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1461694960, "post_id": 36872660, "comment_id": 61312326, "body": "Ok then try <code>s&#47;0\\.&#47;.&#47;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "edited": false, "score": 0, "creation_date": 1461695373, "post_id": 36872865, "comment_id": 61312601, "body": "And this will work ONLY when there&#39;s a dot after that first zero, not in anything beginning with &quot;00&quot;, &quot;01&quot;, &quot;02&quot; etc?"}, {"owner": {"reputation": 3944, "user_id": 5671993, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/h7hZj.jpg?s=128&g=1", "display_name": "Vikhram", "link": "https://stackoverflow.com/users/5671993/vikhram"}, "reply_to_user": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "edited": false, "score": 0, "creation_date": 1461695640, "post_id": 36872865, "comment_id": 61312774, "body": "@BigRedEO Correct. I have explained the regex a bit more"}], "tags": [], "owner": {"reputation": 3944, "user_id": 5671993, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/h7hZj.jpg?s=128&g=1", "display_name": "Vikhram", "link": "https://stackoverflow.com/users/5671993/vikhram"}, "is_accepted": true, "score": 4, "last_activity_date": 1461695620, "last_edit_date": 1461695620, "creation_date": 1461694972, "answer_id": 36872865, "question_id": 36872660, "link": "https://stackoverflow.com/questions/36872660/perl-trim-leading-zero-on-field-with-text-and-numbers/36872865#36872865", "title": "Perl - trim leading zero on field with text and numbers", "body": "<blockquote>\n  <p>I need to trim that leading zero - only in the cases where the field\n  begins with \"0.\"</p>\n</blockquote>\n\n<p>You can use regular expressions to substitute the leading <code>0.</code> with just a <code>.</code>, in-effect removing the zero.</p>\n\n<pre><code>my @data;\n# Read the lines one by one.\nwhile($line = &lt;$FH&gt;) {\n\n    # split the fields on the comma.\n    chomp($line);\n    my @fields = split(/,/, $line);\n\n    # Remove leading zero on ProductNumber Field\n    $fields[17] =~ s/^\\s*0\\././;\n</code></pre>\n\n<p>Let me explain the regular expression a bit</p>\n\n<pre><code>^    - Match the start of the string\n\\s*  - Match zero or more spaces\n0\\.  - Match the number zero followed by a dot character\n</code></pre>\n"}], "owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1981, "favorite_count": 0, "accepted_answer_id": 36872865, "answer_count": 1, "score": 0, "last_activity_date": 1461695620, "creation_date": 1461694324, "question_id": 36872660, "link": "https://stackoverflow.com/questions/36872660/perl-trim-leading-zero-on-field-with-text-and-numbers", "title": "Perl - trim leading zero on field with text and numbers", "body": "<p>I'm parsing through a large .CSV file and have run into an issue because of Excel and Microsoft's infinite helpfulness - the .CSV file was opened in Excel to clear up a lot of problems before it even got to me, but now I have a field where a leading zero has been added.  Excel doesn't work (at least that I've found) because this particular field is ProductNumber and can have any combination of letters and numbers.  The problem comes in because some of the product numbers begin with a dot, i.e. - .12345678.  Sometimes the dot comes later - 12.345678, sometimes no dot - 123456789, and sometimes letters and/or letters and numbers mixed - ABCDEFGHI or A12D34G56.</p>\n\n<p>In every case, the field needs to be 9 characters or less.  But Excel through in a \"helpful\" leading zero for any ProductNumber beginning with a dot(decimal) - so I have 0.12345678, turning it into a 10 character ProductNumber.  I need to trim that leading zero - only in the cases where the field begins with \"0.\" There are lots of product numbers that begin with \"10.\", \"20.\" etc.  Don't want to touch those.  </p>\n\n<p>So, is there a way for me to do this using a scalar variable as I parse through?</p>\n\n<p>So, say my file has </p>\n\n<pre><code>0.12345678\n10.123456\nA12B34C56\nABCDEFGHI\n</code></pre>\n\n<p>and I have something like this to start - </p>\n\n<pre><code>my $filename = 'test.csv';\n\nopen my $FH, $filename\n  or die \"Could not read from $filename &lt;$!&gt;, program halting.\";\n\n# Read the header line.\nchomp(my $line = &lt;$FH&gt;);\nmy @fields = split(/,/, $line);\nprint Dumper(@fields), $/;\n\nmy @data;\n# Read the lines one by one.\nwhile($line = &lt;$FH&gt;) {\n\n# split the fields on the comma.\n    chomp($line);\n    my @fields = split(/,/, $line);\n\n# Remove leading zero on ProductNumber Field\n    $_ =                      for $fields[17];\n</code></pre>\n"}, {"tags": ["c#", "perl", "visual-studio-2015", "telegram"], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 6203211, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh5.googleusercontent.com/-BAnr6IrfXsc/AAAAAAAAAAI/AAAAAAAAABc/KIscZVQyX9k/photo.jpg?sz=128", "display_name": "Meyssam Toluie", "link": "https://stackoverflow.com/users/6203211/meyssam-toluie"}, "edited": false, "score": 0, "creation_date": 1461693179, "post_id": 36871633, "comment_id": 61311196, "body": "Is it enouph to copy the perl.exe to &quot;D:\\TBuild\\Libraries\\openssl&quot; directory?"}, {"owner": {"reputation": 246, "user_id": 5862042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7903471cc9f3b8c841e95c7b5a6f4173?s=128&d=identicon&r=PG", "display_name": "Kai van Lopik", "link": "https://stackoverflow.com/users/5862042/kai-van-lopik"}, "reply_to_user": {"reputation": 161, "user_id": 6203211, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh5.googleusercontent.com/-BAnr6IrfXsc/AAAAAAAAAAI/AAAAAAAAABc/KIscZVQyX9k/photo.jpg?sz=128", "display_name": "Meyssam Toluie", "link": "https://stackoverflow.com/users/6203211/meyssam-toluie"}, "edited": false, "score": 0, "creation_date": 1461698086, "post_id": 36871633, "comment_id": 61314239, "body": "Maybe, but probably not. The installer ensures that things are set up so they&#39;ll work. It probably makes no guarantees that things will keep working when you copy a single file elsewhere."}], "tags": [], "owner": {"reputation": 246, "user_id": 5862042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7903471cc9f3b8c841e95c7b5a6f4173?s=128&d=identicon&r=PG", "display_name": "Kai van Lopik", "link": "https://stackoverflow.com/users/5862042/kai-van-lopik"}, "is_accepted": true, "score": 1, "last_activity_date": 1461691141, "creation_date": 1461691141, "answer_id": 36871633, "question_id": 36871091, "link": "https://stackoverflow.com/questions/36871091/perl-configure-vc-win32-perfix-e-tbuild-libraries-openssl-release/36871633#36871633", "title": "perl Configure VC-WIN32 --perfix=E:\\TBuild\\Libraries\\openssl\\Release", "body": "<p>The error is issued by your command interpreter because it cannot find the Perl executable. Locate the perl.exe from your Strawberry Perl distribution and specify a full path to it, e.g. <code>\"c:\\Program Files\\strawberry\\bin\\perl.exe\" Configure VC-WIN32 --prefix=D:\\TBuild\\Libraries\\openssl\\Release</code>. Note that your exact path is likely to differ from my sample; I haven't checked where Strawberry drops its files.</p>\n"}], "owner": {"reputation": 161, "user_id": 6203211, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh5.googleusercontent.com/-BAnr6IrfXsc/AAAAAAAAAAI/AAAAAAAAABc/KIscZVQyX9k/photo.jpg?sz=128", "display_name": "Meyssam Toluie", "link": "https://stackoverflow.com/users/6203211/meyssam-toluie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 36871633, "answer_count": 1, "score": 0, "last_activity_date": 1461691141, "creation_date": 1461689479, "question_id": 36871091, "link": "https://stackoverflow.com/questions/36871091/perl-configure-vc-win32-perfix-e-tbuild-libraries-openssl-release", "title": "perl Configure VC-WIN32 --perfix=E:\\TBuild\\Libraries\\openssl\\Release", "body": "<p>First of all the tools I've installed are:</p>\n\n<p>1) Windows 10 Pro Enterprise Version 10.0.10240 Build 10240</p>\n\n<p>2) Visual Studio Enterprise 2015</p>\n\n<p>3) Windows SDK 10</p>\n\n<p>4) strawberry perl 5.22.1.3</p>\n\n<p>Recently I tried to create a telegram project using Telegram APIs. After some googling I download the source from <a href=\"https://github.com/telegramdesktop/tdesktop\" rel=\"nofollow\">github</a> and followed the <a href=\"https://github.com/telegramdesktop/tdesktop/blob/master/doc/building-msvc.md\" rel=\"nofollow\">Build instructions for Visual Studio 2015</a>. \nThe three first commands executed successfully but not the forth one and the below error occurs:\nThe command I mentioned is:</p>\n\n<blockquote>\n  <p>perl Configure VC-WIN32 --prefix=D:\\TBuild\\Libraries\\openssl\\Release</p>\n</blockquote>\n\n<p>The error:</p>\n\n<blockquote>\n  <p>'perl' is not recognized as an internal or external command, operable\n  program or batch file.</p>\n</blockquote>\n\n<p>I found that, the Release Folder does not exists. My first question is that do I need to build the openssl project first? If yes so how? Do I need to install extra tools for that command?</p>\n\n<p>Second question is do I need to install anything for other instruction?</p>\n"}, {"tags": ["perl", "file", "utf-8", "seek"], "comments": [{"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1461689341, "post_id": 36870782, "comment_id": 61309012, "body": "Add the following test just after <code>open</code> in both scripts: <code>print join(&quot;+&quot;,PerlIO::get_layers($f)),&quot;\\n&quot;;</code>"}, {"owner": {"reputation": 35370, "user_id": 180275, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/4GALY.jpg?s=128&g=1", "display_name": "Ren&#233; Nyffenegger", "link": "https://stackoverflow.com/users/180275/ren%c3%a9-nyffenegger"}, "reply_to_user": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1461689757, "post_id": 36870782, "comment_id": 61309265, "body": "Please see my amended question"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1461690322, "post_id": 36870782, "comment_id": 61309584, "body": "It&#39;s related to the :crlf layer. Workaround: <code>open (my $f, &#39;&lt;&#39;, &#39;utf8.txt&#39;); binmode($f); binmode($f, &#39;:encoding(UTF-8)&#39;); </code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1461691248, "post_id": 36870782, "comment_id": 61310126, "body": "(That disables the :crlf layer, but you indicated it wasn&#39;t needed.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1461716970, "post_id": 36870782, "comment_id": 61322544, "body": "It helps to have the correct input file when trying to reproduce someone&#39;s output. (I have no problems reproducing the problem.)"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1461698532, "last_edit_date": 1461698532, "creation_date": 1461694666, "answer_id": 36872783, "question_id": 36870782, "link": "https://stackoverflow.com/questions/36870782/why-does-opening-a-file-in-utf-8-mode-change-the-behaviour-of-seek/36872783#36872783", "title": "Why does opening a file in utf 8 mode change the behaviour of seek?", "body": "<p>For those looking for a <strong>TL;DR</strong>, <em><code>seek</code> and <code>tell</code> work in bytes. <code>seek</code> should always be okay if it uses values returned by <code>tell</code></em></p>\n\n<p><BR/></p>\n\n<hr>\n\n<p>The documentation for Perl's <a href=\"http://perldoc.perl.org/functions/seek.html\" rel=\"nofollow\"><code>seek</code></a> operator is rather clumsy but it has this</p>\n\n<blockquote>\n  <p><strong>seek FILEHANDLE,POSITION,WHENCE</strong></p>\n  \n  <p>The values for WHENCE are 0 to set the new position in bytes to POSITION ...</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>Note the <em>in bytes</em>: even if the filehandle has been set to operate on characters (for example by using the <code>:encoding(utf8)</code> open layer), tell() will return byte offsets, not character offsets (because implementing that would render seek() and tell() rather slow).</p>\n</blockquote>\n\n<p>While this alludes to the problem it isn't stated explicitly</p>\n\n<p><code>seek</code> and <code>tell</code> use and return <em>byte offsets</em> within the file, <em>regardless of any other PerlIO layer</em>. That means they work on similar terms to <a href=\"http://perldoc.perl.org/functions/sysread.html\" rel=\"nofollow\"><code>sysread</code></a> which is independent of Perl's streaming IO, although <code>seek</code> and <code>tell</code> respect Perl's buffering whereas <code>sysread</code> does not</p>\n\n<p>It isn't just <code>:utf8</code> or <code>:encoding</code> layers that confuse what units you may expect: the Windows <code>:crlf</code> layer also has an effect because it converts CR LF pairs to LF before streaming input and after output. That clearly causes a discrepancy for every line of text, but as far as I can tell this isn't mentioned in Perl's documentation; Linux and OSX being the pushy ugly sisters of pretty much every other Perl platform</p>\n\n<p>Let's look at your code. I've run this code (it's identical to the code in your question, I promise) on my Windows 10 and Windows 7 systems, and even booted a VM with Windows 98 to try the same thing</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use warnings;\nuse strict;\n\nopen (my $f, '&lt;', 'utf8.txt');\nprint join(\"+\",PerlIO::get_layers($f)),\"\\n\";\n&lt;$f&gt;;\nseek($f, -4, 1);\nmy $xyz = &lt;$f&gt;;\nprint \"$xyz&lt;\";\n</code></pre>\n\n<p>All of them output this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>unix+crlf\naz\n</code></pre>\n\n<p>which is what I expected, and not what you say you get. This is central since we're talking about single-byte offsets</p>\n\n<p>Your file contains this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>foo bar baz\\r\\none two three\n</code></pre>\n\n<p>The first read takes us to 13 characters from the start. Perl has read foo <code>bar baz\\r\\n</code> and removed the CR, handing <code>foo bar baz\\n</code> to the program, which it discards. Fine</p>\n\n<p>Now you <code>seek($f, -4, 1)</code></p>\n\n<p>That third parameter 1 is <code>SEEK_CUR</code>, which means you want to move the current read pointer <em>relative to the current position</em>.</p>\n\n<p><strong>Please</strong></p>\n\n<p>Please don't use magic numbers. Perl is pretty much exposing the underlying <a href=\"http://www.gnu.org/software/libc/manual/html_node/File-Positioning.html\" rel=\"nofollow\"><em>C file library</em></a> to you here and you need to be responsible with it. Passing 1 as the third parameter is arcane and irresponsible. No one who reads your code will know what you have written</p>\n\n<p>Do this</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use Fcntl ':seek'\n</code></pre>\n\n<p>and then you can write more intelligible code like this. At least people can google <code>SEEK_CUR</code> whereas trying the same with <code>1</code> would be worse than fruitless</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>seek($f, -4, SEEK_CUR)\n</code></pre>\n\n<p>as it gives the rest of us a chance to understand your code</p>\n\n<p>So you're seeking to 13 bytes, add -4 which is 9. That's just after the <code>b</code> of <code>baz</code>, and so I get <code>az</code></p>\n\n<p>That's what all my runs of your code produced on all of those different Windows machines. I have to think that the problem is with your code control and not with Perl, except for the issue with CRLF</p>\n\n<p>I hope that this explained some anomalies for you, but please check your code and your results.</p>\n"}], "owner": {"reputation": 35370, "user_id": 180275, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/4GALY.jpg?s=128&g=1", "display_name": "Ren&#233; Nyffenegger", "link": "https://stackoverflow.com/users/180275/ren%c3%a9-nyffenegger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1461698532, "creation_date": 1461688502, "last_edit_date": 1461695734, "question_id": 36870782, "link": "https://stackoverflow.com/questions/36870782/why-does-opening-a-file-in-utf-8-mode-change-the-behaviour-of-seek", "title": "Why does opening a file in utf 8 mode change the behaviour of seek?", "body": "<p>Here's a simple text file with no special characters, called <code>utf-8.txt</code> with the following content.</p>\n\n<pre><code>foo bar baz\none two three\n</code></pre>\n\n<p>The new line is following the unix convention (one byte), so that the entire size of the file is 26 = 11 + 1 + 13 + 1. (11 = <code>foo bar baz</code>, 13 = <code>one two three</code>.</p>\n\n<p>If I read the file with the following perl script</p>\n\n<pre><code>use warnings;\nuse strict;\n\nopen (my $f, '&lt;', 'utf8.txt');\n&lt;$f&gt;;\nseek($f, -4, 1);\nmy $xyz = &lt;$f&gt;;\nprint \"$xyz&lt;\";\n</code></pre>\n\n<p>it prints</p>\n\n<pre><code>baz\n&lt;\n</code></pre>\n\n<p>This is expected, since the <code>seek</code> command goes back four characters, the new line and the three belonging to <code>baz</code>.</p>\n\n<p>If I now change the <code>open</code> statement to</p>\n\n<pre><code>open (my $f, '&lt;:encoding(UTF-8)', 'utf8.txt');\n</code></pre>\n\n<p>the output changes to</p>\n\n<pre><code> baz\n&lt;\n</code></pre>\n\n<p>that is, the <code>seek</code> command goes back five characters (or it goes back four characters but skips the new line).</p>\n\n<p>Is this behaviour expected? Is there a flag or somthing to turn this behaviour off?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>As per <em>Andrzej A. Filip</em> suggestion, when I add <code>print join(\"+\",PerlIO::get_layers($f)),\"\\n\";</code> just after the <code>open</code> statement, it prints in the \"normal\" open case: <code>unix+crlf</code> and in the <code>open...encoding</code> case: <code>unix+crlf+encoding(utf-8-strict)+utf8</code>.</p>\n"}, {"tags": ["perl", "ftp"], "comments": [{"owner": {"reputation": 2878, "user_id": 600360, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/t4VHw.jpg?s=128&g=1", "display_name": "Mort", "link": "https://stackoverflow.com/users/600360/mort"}, "edited": false, "score": 0, "creation_date": 1461688505, "post_id": 36870570, "comment_id": 61308506, "body": "What have you done to try to solve the problem yourself? Have you looked at the Net::FTP documentation, perhaps searching for &quot;timeout&quot;? <a href=\"http://search.cpan.org/~shay/libnet-3.08/lib/Net/FTP.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~shay/libnet-3.08/lib/Net/FTP.pm</a>"}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 1, "creation_date": 1461688773, "post_id": 36870570, "comment_id": 61308662, "body": "if you look at the documentation for the word timeout the first thing you see is <code>Timeout - Set a timeout value in seconds (defaults to 120)</code> so if file is taking longer than 120 seconds to download then you need to change the timeout value before starting the ftp"}, {"owner": {"reputation": 163, "user_id": 6177912, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6d407bf5bf7671f8108f071de4f22520?s=128&d=identicon&r=PG&f=1", "display_name": "sara", "link": "https://stackoverflow.com/users/6177912/sara"}, "reply_to_user": {"reputation": 2878, "user_id": 600360, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/t4VHw.jpg?s=128&g=1", "display_name": "Mort", "link": "https://stackoverflow.com/users/600360/mort"}, "edited": false, "score": 0, "creation_date": 1461689130, "post_id": 36870570, "comment_id": 61308874, "body": "@Mort I open ftp.pm in my computer and look for timout variable it written as: &#39;Timeout   =&gt; $ftp-&gt;timeout&#39; I want to know how to change it &quot;the syntax? and what is the suggested value. I don&#39;t want to play in something I don&#39;t understand."}, {"owner": {"reputation": 163, "user_id": 6177912, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6d407bf5bf7671f8108f071de4f22520?s=128&d=identicon&r=PG&f=1", "display_name": "sara", "link": "https://stackoverflow.com/users/6177912/sara"}, "reply_to_user": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1461689146, "post_id": 36870570, "comment_id": 61308896, "body": "@Chris Doyle I open ftp.pm in my computer and look for timout variable it written as: &#39;Timeout =&gt; $ftp-&gt;timeout&#39; I want to know how to change it &quot;the syntax? and what is the suggested value. I don&#39;t want to play in something I don&#39;t understand."}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 2, "creation_date": 1461689227, "post_id": 36870570, "comment_id": 61308939, "body": "you set it as part of the creating of the ftp object. i would suggest you show your code if you want people to help, you should not be changing the ftp.pm module its self. the module allows you to specify a timeout value from your own code"}, {"owner": {"reputation": 163, "user_id": 6177912, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6d407bf5bf7671f8108f071de4f22520?s=128&d=identicon&r=PG&f=1", "display_name": "sara", "link": "https://stackoverflow.com/users/6177912/sara"}, "reply_to_user": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1461689347, "post_id": 36870570, "comment_id": 61309019, "body": "@Chris Doyle my code is in php and it just call perl file"}, {"owner": {"reputation": 163, "user_id": 6177912, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6d407bf5bf7671f8108f071de4f22520?s=128&d=identicon&r=PG&f=1", "display_name": "sara", "link": "https://stackoverflow.com/users/6177912/sara"}, "reply_to_user": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1461689502, "post_id": 36870570, "comment_id": 61309109, "body": "@Chris Doyle I see it. I see in the called perl file, there is: my $opt_timeout = 120; Oooooh. I did not wrote the perl file. I use it from some source. thanks a lot. I can change it now. what do you suggest a value? I want a very higher one."}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 1, "creation_date": 1461689542, "post_id": 36870570, "comment_id": 61309129, "body": "then show how you call it. there will have to be some line of perl code that loads the FTP module. Normally in perl code it would be something like <code>my $ftp = Net::FTP-&gt;new(&quot;localhost&quot;, Timeout =&gt; 600);</code> here i have set timeout as 600 which will now overwrite the default 120, so you can change timeout value by passing it as an argument to the object when you create it"}], "answers": [{"tags": [], "owner": {"reputation": 950, "user_id": 4602706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b64888d22d66dba1cf962631eb7fa62?s=128&d=identicon&r=PG", "display_name": "Marco Vargas", "link": "https://stackoverflow.com/users/4602706/marco-vargas"}, "is_accepted": false, "score": 0, "last_activity_date": 1479327995, "last_edit_date": 1479327995, "creation_date": 1479322037, "answer_id": 40639946, "question_id": 36870570, "link": "https://stackoverflow.com/questions/36870570/perl-timeout-when-downloading-file-from-ftp/40639946#40639946", "title": "perl timeout when downloading file from ftp", "body": "<p>You can increase the timeout, but it is important that if the timeout is reached again and your server/client are out of sync, it might throw the same error you got the first time, again.</p>\n\n<p>It seems that the issue is due a lack of error handling in your Perl Script instead.</p>\n\n<p>Surely you have something like this at your perl script:</p>\n\n<pre><code>my $ftp = Net::FTP-&gt;new( $myhost, Timeout =&gt; 10, Debug =&gt; 1 );\n...\n$ftp-&gt;get($myfile) or print \"Got an error\";\n$ftp-&gt;quit();\n</code></pre>\n\n<blockquote>\n  <p>Please notice this is out of <strong>.../perl/lib/Net/FTP.pm</strong>, since the\n  FTP.pm is the third party module (<code>Kind of library</code>) you are using to\n  reach the ftp, I suggest you to not touch it to avoid portability\n  issues later  on.</p>\n</blockquote>\n\n<p>Normally the timeout is reached inside the FTP.pm and it goes to the <em>or print \"Got an error\"</em> condition, but there are some cases, that the Server/Client just get out of sync and the FTP.pm just throws an unhandled exception.</p>\n\n<p>This exception will <strong>NOT</strong> go to the <em>or print \"Got an error\"</em> condition, therefore you need to catch it and handle it as any other languages.</p>\n\n<p>Here you can use <a href=\"http://www.perlmonks.org/?node=eval\" rel=\"nofollow noreferrer\">eval</a> to wrap it up the code, catch the exception and handle it as you need.</p>\n\n<p>For example:</p>\n\n<pre><code>my $ftp = Net::FTP-&gt;new( $myhost, Timeout =&gt; 10, Debug =&gt; 1 );\n...\neval {$ftp-&gt;get($myfile) or print(\"Can't get file $myfile\") };\nif ($@ =~ /Timeout/) {\n    print \"Got a timeout Issue: $@\";\n}\n\n$ftp-&gt;quit();\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 6177912, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6d407bf5bf7671f8108f071de4f22520?s=128&d=identicon&r=PG&f=1", "display_name": "sara", "link": "https://stackoverflow.com/users/6177912/sara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1133, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1479327995, "creation_date": 1461687838, "last_edit_date": 1461690033, "question_id": 36870570, "link": "https://stackoverflow.com/questions/36870570/perl-timeout-when-downloading-file-from-ftp", "title": "perl timeout when downloading file from ftp", "body": "<p>I try to download huge file which takes a lot of time downloading from ftp link using perl.\nI got:</p>\n\n<pre><code>Timeout at C:/Strawberry/perl/lib/Net/FTP.pm\n</code></pre>\n\n<p>what does this means and how to solve it?</p>\n\n<p>Thanks</p>\n\n<p><strong>Solution:</strong>\nThanks @Chris Doyle \nI change the timeout value in my perl file <code>\"not ftp.pm file\"</code>\nThanks</p>\n"}, {"tags": ["perl", "sqlite", "dbi", "create-table"], "comments": [{"owner": {"reputation": 1462, "user_id": 5469991, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-EhCmF1jHGMk/AAAAAAAAAAI/AAAAAAAACgs/arVjyog6MGo/photo.jpg?sz=128", "display_name": "piyushj", "link": "https://stackoverflow.com/users/5469991/piyushj"}, "edited": false, "score": 0, "creation_date": 1461683992, "post_id": 36868874, "comment_id": 61305484, "body": "use FOREIGN KEY(customer_id) REFERENCES customer(id)"}, {"owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "reply_to_user": {"reputation": 1462, "user_id": 5469991, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-EhCmF1jHGMk/AAAAAAAAAAI/AAAAAAAACgs/arVjyog6MGo/photo.jpg?sz=128", "display_name": "piyushj", "link": "https://stackoverflow.com/users/5469991/piyushj"}, "edited": false, "score": 0, "creation_date": 1461684992, "post_id": 36868874, "comment_id": 61306244, "body": "I have tried with that syntax too, same error. Thanks!"}, {"owner": {"reputation": 1462, "user_id": 5469991, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-EhCmF1jHGMk/AAAAAAAAAAI/AAAAAAAACgs/arVjyog6MGo/photo.jpg?sz=128", "display_name": "piyushj", "link": "https://stackoverflow.com/users/5469991/piyushj"}, "edited": false, "score": 2, "creation_date": 1461685528, "post_id": 36868874, "comment_id": 61306588, "body": "i can see you used table name as transaction, but its a keyword in sqllite, please use some other name for table"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1461690761, "post_id": 36868874, "comment_id": 61309847, "body": "It would have helped a lot if you had removed the <code>for</code> loop. The error occurs only in the creation of the <code>transaction</code> table. Please don&#39;t write code by passing your program around the internet until someone fixes it for you"}], "answers": [{"comments": [{"owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "edited": false, "score": 0, "creation_date": 1461685876, "post_id": 36869755, "comment_id": 61306816, "body": "Man that totally answers my question! Thank you very much! I really appreciate it."}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 5, "last_activity_date": 1461697992, "last_edit_date": 1592644375, "creation_date": 1461685500, "answer_id": 36869755, "question_id": 36868874, "link": "https://stackoverflow.com/questions/36868874/why-do-i-get-dbdsqlitedb-do-failed-near-transaction-syntax-error-when/36869755#36869755", "title": "Why do I get &#39;DBD::SQLite::db do failed: near &quot;transaction&quot;: syntax error&#39; when I try to create a SQLite table with a foreign key constraint?", "body": "<p><code>transaction</code> is a <a href=\"https://www.sqlite.org/lang_keywords.html\" rel=\"nofollow noreferrer\">SQLite keyword</a>, so you have to quote it if you want to use it as an identifier (although it's probably better to just pick a different name for your table).</p>\n<p>Your foreign key constraint is also a little off. You need to specify a column definition for <code>customer_id</code> <em>in addition to</em> the constraint, and begin the constraint definition with <code>FOREIGN KEY</code>.</p>\n<p>Your query should look like this:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE IF NOT EXISTS &quot;transaction&quot; (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    customer_id INTEGER,\n    FOREIGN KEY (customer_id) REFERENCES customer(id)\n)\n</code></pre>\n<p>Also, foreign key constraints are only enforced if you <a href=\"https://metacpan.org/pod/DBD::SQLite#Foreign-Keys\" rel=\"nofollow noreferrer\">explicitly enable them</a>:</p>\n<blockquote>\n<p>SQLite has long been able to parse a schema with foreign keys, but the constraints has not been enforced. Now you can issue a <code>foreign_keys</code> pragma to enable this feature and enforce the constraints, preferably as soon as you connect to a database and you're not in a transaction:</p>\n<pre><code>$dbh-&gt;do(&quot;PRAGMA foreign_keys = ON&quot;);\n</code></pre>\n<p>And you can explicitly disable the feature whenever you like by turning the pragma off:</p>\n<pre><code>$dbh-&gt;do(&quot;PRAGMA foreign_keys = OFF&quot;);\n</code></pre>\n<p>As of this writing, this feature is disabled by default by the SQLite team, and by us, to secure backward compatibility, as this feature may break your applications, and actually broke some for us. If you have used a schema with foreign key constraints but haven't cared them much and supposed they're always ignored for SQLite, be prepared, and please do extensive testing to ensure that your applications will continue to work when the foreign keys support is enabled by default.</p>\n</blockquote>\n<p>All together:</p>\n<pre><code>use strict;\nuse warnings 'all';\n\nuse DBI;\n\nmy $dbh = DBI-&gt;connect('dbi:SQLite:dbname=foo.sqlite', '', '', {\n    RaiseError =&gt; 1,\n    PrintError =&gt; 0,\n});\n\n$dbh-&gt;do('PRAGMA foreign_keys = ON');\n\nmy @ddl = (\n    'CREATE TABLE IF NOT EXISTS customer (\n        id INTEGER PRIMARY KEY UNIQUE,\n        id_1 INTEGER,\n        id_2 INTEGER,\n        name TEXT\n    )',\n    'CREATE TABLE IF NOT EXISTS &quot;transaction&quot; (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        customer_id INTEGER,\n        FOREIGN KEY (customer_id) REFERENCES customer(id)\n    )'\n);\n\nfor my $sql (@ddl) {\n    $dbh-&gt;do($sql);\n}\n</code></pre>\n"}], "owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1240, "favorite_count": 0, "accepted_answer_id": 36869755, "answer_count": 1, "score": 0, "last_activity_date": 1461697992, "creation_date": 1461683333, "last_edit_date": 1461686111, "question_id": 36868874, "link": "https://stackoverflow.com/questions/36868874/why-do-i-get-dbdsqlitedb-do-failed-near-transaction-syntax-error-when", "title": "Why do I get &#39;DBD::SQLite::db do failed: near &quot;transaction&quot;: syntax error&#39; when I try to create a SQLite table with a foreign key constraint?", "body": "<p>I'm trying to create a database with two tables: customer and transaction (one customer can do many transactions, one transaction can only be done by one customer). I'm using the following Perl code:</p>\n\n<pre><code>my $dbh = DBI-&gt;connect(\"dbi:SQLite:dbname=$RealBin/active.db\",\"\",\"\")\n    or die $DBI::errstr;\n\nmy @ddl = (\n    \"CREATE TABLE IF NOT EXISTS customer (\n      id INTEGER PRIMARY KEY UNIQUE,\n      id_1 INTEGER,\n      id_2 INTEGER,\n      name TEXT\n    )\",\n    \"CREATE TABLE IF NOT EXISTS transaction (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      customer_id INTEGER REFERENCES customer(id),\n    )\"\n);\n\nfor my $sql (@ddl){\n  $dbh-&gt;do($sql);\n}\n</code></pre>\n\n<p>When I run my script, I'm getting the following error:</p>\n\n<pre><code>DBD::SQLite::db do failed: near \"transaction\": syntax error at\n    t/oneToMany.t line 28 (#1)\nDBD::SQLite::db do failed: near \"transaction\": syntax error at t/oneToMany.t line 28.\nDBD::SQLite::db do failed: near \"transaction\": syntax error at\n    t/oneToMany.t line 38 (#1)\n</code></pre>\n\n<p>The line number 28 is this one:</p>\n\n<pre><code>$dbh-&gt;do($sql);\n</code></pre>\n\n<p>Can you please tell me what I'm doing wrong?</p>\n"}, {"tags": ["perl", "rest", "https", "jira"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 6257069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c95927e9d4d62822dcf6fb93fc733dd0?s=128&d=identicon&r=PG&f=1", "display_name": "Alpes Maritimes", "link": "https://stackoverflow.com/users/6257069/alpes-maritimes"}, "edited": false, "score": 0, "creation_date": 1461685953, "post_id": 36869245, "comment_id": 61306864, "body": "Thank you for your reply. I don&#39;t know if there is a self signed certificate on the server (server is managed by IT team). When I open the URL in my browser, my JIRA dashboard is displayed. curl command displays :  curl: (60) SSL certificate problem: self signed certificate in certificate chain More details here: <a href=\"http://curl.haxx.se/docs/sslcerts.html\" rel=\"nofollow noreferrer\">curl.haxx.se/docs/sslcerts.html</a>"}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "reply_to_user": {"reputation": 91, "user_id": 6257069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c95927e9d4d62822dcf6fb93fc733dd0?s=128&d=identicon&r=PG&f=1", "display_name": "Alpes Maritimes", "link": "https://stackoverflow.com/users/6257069/alpes-maritimes"}, "edited": false, "score": 0, "creation_date": 1461705676, "post_id": 36869245, "comment_id": 61318662, "body": "You found your problem :) Probably not solvable in JIRA::Client::Automated."}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 0, "last_activity_date": 1461684192, "creation_date": 1461684192, "answer_id": 36869245, "question_id": 36868754, "link": "https://stackoverflow.com/questions/36868754/unable-to-connect-to-jira-over-https-server-using-the-perl-jiraclientautomat/36869245#36869245", "title": "Unable to connect to JIRA over HTTPS server using the Perl JIRA::Client::Automated", "body": "<p>The error doesn't look like a JIRA::Client::Automated error. It's generated by LWP::UserAgent and usually means exactly what is shown.</p>\n\n<p>Do you have a self signed certificate on your server?</p>\n\n<p>Did you try to open that URL in in your browser? <a href=\"https://myserver.com:443\" rel=\"nofollow\">https://myserver.com:443</a> (exactly as you provide it to the module).</p>\n\n<p>Try using curl <strong>from your webserver</strong>:\n<code>curl -vvv https://myserver.com/jira/rest/api/latest/issue/DCS-51191</code></p>\n\n<p>Maybe it's just a missing <em>www.</em> prefix in your server URL?</p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 6257069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c95927e9d4d62822dcf6fb93fc733dd0?s=128&d=identicon&r=PG&f=1", "display_name": "Alpes Maritimes", "link": "https://stackoverflow.com/users/6257069/alpes-maritimes"}, "is_accepted": false, "score": 1, "last_activity_date": 1461687882, "creation_date": 1461687882, "answer_id": 36870587, "question_id": 36868754, "link": "https://stackoverflow.com/questions/36868754/unable-to-connect-to-jira-over-https-server-using-the-perl-jiraclientautomat/36870587#36870587", "title": "Unable to connect to JIRA over HTTPS server using the Perl JIRA::Client::Automated", "body": "<p>It seems that there is a self signed certificate on JIRA server. To bypass, I added following code:</p>\n\n<p>my $jira_ua = $jira->ua();\n$jira_ua->ssl_opts( verify_hostname => 0 );</p>\n"}], "owner": {"reputation": 91, "user_id": 6257069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c95927e9d4d62822dcf6fb93fc733dd0?s=128&d=identicon&r=PG&f=1", "display_name": "Alpes Maritimes", "link": "https://stackoverflow.com/users/6257069/alpes-maritimes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 846, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1461688572, "creation_date": 1461682967, "last_edit_date": 1461688572, "question_id": 36868754, "link": "https://stackoverflow.com/questions/36868754/unable-to-connect-to-jira-over-https-server-using-the-perl-jiraclientautomat", "title": "Unable to connect to JIRA over HTTPS server using the Perl JIRA::Client::Automated", "body": "<p>I do not use a proxy. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>use JIRA::Client::Automated;\nmy $jira = JIRA::Client::Automated-&gt;new(https://myserver.com, \"user\", \"password\");\n</code></pre>\n\n<p>And the error response is:</p>\n\n<blockquote>\n  <p>Unable to GET /jira/rest/api/latest/issue/DCS-51191: 500 Can't connect\n  to myserver.com:443 Can't connect to myserver.com:443</p>\n  \n  <p>Bad file descriptor at\n  C:/Users/Fred/applis_portables/Strawberry_Perl/perl/vendor/lib/LWP/Protocol/http.pm\n  line 47.</p>\n  \n  <p>at createPage2.pl line 16.</p>\n</blockquote>\n\n<p>Thank you for your help.</p>\n"}, {"tags": ["perl", "csv", "unix", "sendmail", "solaris-10"], "comments": [{"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1461677574, "post_id": 36866145, "comment_id": 61300048, "body": "Can you send the header and content-type of those emails?"}, {"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 0, "creation_date": 1461677673, "post_id": 36866145, "comment_id": 61300117, "body": "There are many perl modules which allow you to send emails with attachments, but this question is pretty broad."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1461680024, "post_id": 36866145, "comment_id": 61302072, "body": "<a href=\"http://stackoverflow.com/a/17381/223226\">stackoverflow.com/a/17381/223226</a>"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1461683199, "creation_date": 1461683199, "answer_id": 36868820, "question_id": 36866145, "link": "https://stackoverflow.com/questions/36866145/solaris10-send-a-email-with-csv-attached/36868820#36868820", "title": "Solaris10 Send a email with .csv attached", "body": "<p>Saying \"if i can avoid to use Perl modules then it would be better\" isn't the same as saying \"I can't use any Perl modules\", so here is the currently recommended way to do this. It uses the <a href=\"https://metacpan.org/pod/Email::Stuffer\" rel=\"nofollow\">Email::Stuffer</a> module.</p>\n\n<pre><code>use Email::Stuffer;\n\nEmail::Stuffer-&gt;from('someone@somedomain')\n              -&gt;to('someone.else@someotherdomain')\n              -&gt;text_body(\"Here's the data\")\n              -&gt;attach_file('test/test.csv')\n              -&gt;attach_file('test/test1.csv')\n              -&gt;send;\n</code></pre>\n\n<p>The documentation also includes an example of doing the same thing using the older, Email::MIME to demonstrate how much simple it is with the newer module.</p>\n\n<p>If you're not using CPAN, then you're not using most of the power of Perl. Setting up the ability to easily install and use CPAN modules will make your life far more enjoyable.</p>\n"}], "owner": {"reputation": 31, "user_id": 3833690, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003171361809/picture?type=large", "display_name": "MyoungSoo Gang", "link": "https://stackoverflow.com/users/3833690/myoungsoo-gang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461683199, "creation_date": 1461676741, "question_id": 36866145, "link": "https://stackoverflow.com/questions/36866145/solaris10-send-a-email-with-csv-attached", "title": "Solaris10 Send a email with .csv attached", "body": "<p>i am trying to send a email with multiple .csv files from Solaris10 to someone</p>\n\n<p>i have two questions now</p>\n\n<ol>\n<li>i did source codes below</li>\n</ol>\n\n<p>(uuencode test/test.csv test/test.csv; uuencode test/test1.csv test/test1.csv) | mailx -s test \"someone@gmail.com cc:someone@naver.com\"</p>\n\n<p>with this command, Although i could send a email with .csv files</p>\n\n<p>when i receive that email from Gmail, there was no problem</p>\n\n<p>but on other Emails (outlook...) there were no files attached and were changed to some weird texts and involved into email context.</p>\n\n<p>Could you please explain what is happening here and the solution?</p>\n\n<ol start=\"2\">\n<li>if there is another option, please tell me ( i can only use Perl, as my company allow me to use only Perl, in addition, if i can avoid to use Perl modules then it would be better) </li>\n</ol>\n\n<p>thank you guys</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 415, "user_id": 4253297, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6J-AItPnOBc/AAAAAAAAAAI/AAAAAAAAADI/HK2hnN_tfxA/photo.jpg?sz=128", "display_name": "realmaniek", "link": "https://stackoverflow.com/users/4253297/realmaniek"}, "edited": false, "score": 0, "creation_date": 1461675251, "post_id": 36865480, "comment_id": 61298184, "body": "This is a bad question for stackoverflow. Its unclear"}, {"owner": {"reputation": 1, "user_id": 6182614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ftzw.png?s=128&g=1", "display_name": "Musa Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6182614/musa-y%c4%b1ld%c4%b1r%c4%b1m"}, "reply_to_user": {"reputation": 415, "user_id": 4253297, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6J-AItPnOBc/AAAAAAAAAAI/AAAAAAAAADI/HK2hnN_tfxA/photo.jpg?sz=128", "display_name": "realmaniek", "link": "https://stackoverflow.com/users/4253297/realmaniek"}, "edited": false, "score": 0, "creation_date": 1461675429, "post_id": 36865480, "comment_id": 61298339, "body": "@realmaniek     like include (&quot;functions.php&quot;); \u0130f you had wrote to php template, You&#39;d call the file. I want to it in perl I hope \u0131 made myself clear"}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 1, "creation_date": 1461675693, "post_id": 36865480, "comment_id": 61298551, "body": "Probably you should give a look at <a href=\"http://perldoc.perl.org/functions/use.html\" rel=\"nofollow noreferrer\"><code>use</code></a> and <a href=\"http://perldoc.perl.org/functions/require.html\" rel=\"nofollow noreferrer\"><code>require</code></a>"}, {"owner": {"reputation": 1, "user_id": 6182614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ftzw.png?s=128&g=1", "display_name": "Musa Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6182614/musa-y%c4%b1ld%c4%b1r%c4%b1m"}, "reply_to_user": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1461675877, "post_id": 36865480, "comment_id": 61298709, "body": "@AruneshSingh I looked \u0131t and \u0131 Looked at many issues but I couldnt..."}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 1, "creation_date": 1461676071, "post_id": 36865480, "comment_id": 61298855, "body": "Please add samples of your sourcecode and what you tried to archive the requested result."}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 1, "creation_date": 1461676094, "post_id": 36865480, "comment_id": 61298877, "body": "@MusaY\u0131ld\u0131r\u0131m , First make your question more clear show some homework, add some code snippets and be specific what you want. Refer <a href=\"http://stackoverflow.com/help/how-to-ask\"><code>How to ask</code></a>"}, {"owner": {"reputation": 1, "user_id": 6182614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ftzw.png?s=128&g=1", "display_name": "Musa Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6182614/musa-y%c4%b1ld%c4%b1r%c4%b1m"}, "reply_to_user": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1461676682, "post_id": 36865480, "comment_id": 61299326, "body": "@AruneshSingh I did I wish I&#39;d  tell to mysel."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461680118, "post_id": 36865480, "comment_id": 61302163, "body": "You should also avoid using <code>system</code> instead of learning how to make Perl do something so simple itself. In this case your call should be <code>unlink for &lt;&#47;file_location&#47;*.&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 1, "creation_date": 1461677440, "post_id": 36866341, "comment_id": 61299936, "body": "Also, at least please have a look at <a href=\"http://www.perlmonks.org/?node_id=102347\" rel=\"nofollow noreferrer\"><code>Module Tutorial</code></a>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1461679539, "post_id": 36866341, "comment_id": 61301662, "body": "I don&#39;t think you should post something that&#39;s <b><i>not &quot;Best Practice&quot;</i></b> just because the OP seems to be familiar with the way PHP works. Every language is different, and it&#39;s often clear when people are writing, for instance, C or PHP programs in Perl. While new concepts must be based on something, it&#39;s wrong to encourage people to write as if they were using a more familiar language, especially when that results in bad-practice code"}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 0, "creation_date": 1461681704, "post_id": 36866341, "comment_id": 61303644, "body": "It&#39;s easier than creating a module, fully functional and Perl is TIMTOWTDY. Using <code>require</code> to load a library file is not uncommon, that&#39;s why I included it. But I&#39;ll move it down."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1461697068, "post_id": 36866341, "comment_id": 61313621, "body": "@Sebastian: It&#39;s all fine as long as those who copy your code know what it does and why it works. That almost never happens. People who ask how to create a library are looking for a formula. They will adopt the first thing they read that works and put it into their code, and copy it into hundreds of other programs without question. When your helpful suggestion doesn&#39;t work it could be causing a drought in a poor uncivilised location. Please don&#39;t be so blas&#233;: missing semicolons can kill people. All because it&#39;s &quot;easier&quot;"}, {"owner": {"reputation": 1, "user_id": 6182614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ftzw.png?s=128&g=1", "display_name": "Musa Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6182614/musa-y%c4%b1ld%c4%b1r%c4%b1m"}, "edited": false, "score": 0, "creation_date": 1461711114, "post_id": 36866341, "comment_id": 61320867, "body": "@Sebastian Thanks for everything, I did by the way I cant delete to package main because I m using in my project..."}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "reply_to_user": {"reputation": 1, "user_id": 6182614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ftzw.png?s=128&g=1", "display_name": "Musa Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6182614/musa-y%c4%b1ld%c4%b1r%c4%b1m"}, "edited": false, "score": 0, "creation_date": 1461734495, "post_id": 36866341, "comment_id": 61327344, "body": "@Musa Y\u0131ld\u0131r\u0131m: &quot;package main&quot; is default. No matter if you explicit write it or not - it&#39;s there. Try to remove it an you&#39;ll notice that everything will still be functioning as before."}, {"owner": {"reputation": 1, "user_id": 6182614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ftzw.png?s=128&g=1", "display_name": "Musa Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6182614/musa-y%c4%b1ld%c4%b1r%c4%b1m"}, "edited": false, "score": 0, "creation_date": 1461754762, "post_id": 36866341, "comment_id": 61339921, "body": "@Sebastian I Tried and yes It worked you&#39;re right thanks again :)"}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 4, "last_activity_date": 1461681790, "last_edit_date": 1461681790, "creation_date": 1461677187, "answer_id": 36866341, "question_id": 36865480, "link": "https://stackoverflow.com/questions/36865480/how-to-add-a-library-from-another-perl-file/36866341#36866341", "title": "How to add a library from another perl file?", "body": "<p>Remove that <code>package main;</code> - it's not needed.</p>\n\n<p><strong>Best practice way (but not the easiest one):</strong></p>\n\n<p>Create a new directory <em>MyApp</em> (replace by some unique name for your application) and place a file <em>Global.pm</em> into this directory:</p>\n\n<pre><code>package MyApp::Global; # Same name as Directory/File.pm!\nuse strict;\nuse warnings;\n\nuse Exporter;\nuse Term::ANSIColor qw(:constants);\n\nour @ISA       = ('Exporter');\nour @EXPORT_OK = qw(myfunction);\n\nsub myfunction {\n    print RED, \" Deleting...\", RESET;\n    system(\"rm \u2013f /file_location/*.\");\n    print \"deleted.\\n\";  \n}\n\n1; # Important!\n</code></pre>\n\n<p>Insert into both files (function.pl and the newone.pl) right after the use lines:</p>\n\n<pre><code>use MyApp::Global qw(myfunction);\n</code></pre>\n\n<p><strong>Basic way (PHP-like: Easier, but not \"Best Practice\"):</strong></p>\n\n<p>Create a file <em>global.pl</em> (or any other name):</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Term::ANSIColor qw(:constants);\n\nsub myfunction {\n    print RED, \" Deleting...\", RESET;\n    system(\"rm \u2013f /file_location/*.\");\n    print \"deleted.\\n\";  \n}\n\n1; # Important!\n</code></pre>\n\n<p>Insert into both files (function.pl and the newone.pl) right after the <code>use</code> lines:</p>\n\n<pre><code>require 'global.pl';\n</code></pre>\n\n<p>See also:</p>\n\n<ul>\n<li><a href=\"http://search.cpan.org/perldoc?Exporter\" rel=\"nofollow\">http://search.cpan.org/perldoc?Exporter</a></li>\n<li><a href=\"http://www.perlmonks.org/?node_id=102347\" rel=\"nofollow\">http://www.perlmonks.org/?node_id=102347</a> (Thanks @Arunesh Singh)</li>\n<li><a href=\"http://perldoc.perl.org/perlmod.html\" rel=\"nofollow\">http://perldoc.perl.org/perlmod.html</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6182614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ftzw.png?s=128&g=1", "display_name": "Musa Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6182614/musa-y%c4%b1ld%c4%b1r%c4%b1m"}, "edited": false, "score": 0, "creation_date": 1461679798, "post_id": 36866943, "comment_id": 61301872, "body": "@Borodin   I did but I got the error message like: Undefined subroutine &amp;main::my_function called at ./program.pl line 8."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 6182614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ftzw.png?s=128&g=1", "display_name": "Musa Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6182614/musa-y%c4%b1ld%c4%b1r%c4%b1m"}, "edited": false, "score": 0, "creation_date": 1461679904, "post_id": 36866943, "comment_id": 61301961, "body": "@MusaY\u0131ld\u0131r\u0131m: If you copy my code exactly you will find that it works. You must be running something slightly different"}, {"owner": {"reputation": 1, "user_id": 6182614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ftzw.png?s=128&g=1", "display_name": "Musa Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6182614/musa-y%c4%b1ld%c4%b1r%c4%b1m"}, "edited": false, "score": 0, "creation_date": 1461680177, "post_id": 36866943, "comment_id": 61302222, "body": "@Borodin okay \u0131 got it, How do I do if a remote file,?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 6182614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ftzw.png?s=128&g=1", "display_name": "Musa Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6182614/musa-y%c4%b1ld%c4%b1r%c4%b1m"}, "edited": false, "score": 0, "creation_date": 1461680265, "post_id": 36866943, "comment_id": 61302306, "body": "@MusaY\u0131ld\u0131r\u0131m: That is a different question. It&#39;s unclear exactly <i>what</i> file is remote, and you should listen to the advice posted in comments beneath your question about making some effort to find the solution yourself. It sounds like the real problem is that you don&#39;t know how to write code, and Stack Overflow can&#39;t help you with that"}, {"owner": {"reputation": 1, "user_id": 6182614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ftzw.png?s=128&g=1", "display_name": "Musa Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6182614/musa-y%c4%b1ld%c4%b1r%c4%b1m"}, "edited": false, "score": 0, "creation_date": 1461754822, "post_id": 36866943, "comment_id": 61339957, "body": "I did, how can \u0131 get if it remote file? Can I explain in this subject ?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1461679635, "last_edit_date": 1461679635, "creation_date": 1461678624, "answer_id": 36866943, "question_id": 36865480, "link": "https://stackoverflow.com/questions/36865480/how-to-add-a-library-from-another-perl-file/36866943#36866943", "title": "How to add a library from another perl file?", "body": "<p>If you just want a container for a number of utility subroutines then you should create a <em>library module</em> using <a href=\"https://metacpan.org/pod/Exporter\" rel=\"nofollow\"><code>Exporter</code></a></p>\n\n<p>Name your package and your module file something other than <code>main</code>, which is the default package used by your main program. In the code below I have written module file <code>Functions.pm</code> which contains <code>package Functions</code>. The names <em>must</em> match</p>\n\n<h3>Functions.pm</h3>\n\n<pre><code>package Functions;\n\nuse strict;\nuse warnings;\n\nuse Exporter 'import';\nour @EXPORT_OK = qw/ my_function /;\n\nuse Term::ANSIColor qw(:constants); \n\n\nsub my_function {\n    print RED, \" Deleting...\", RESET;\n    system(\"rm \u2013f /file_location/*.\");\n    print \"deleted.\\n\";      \n}\n\n1;\n</code></pre>\n\n<h3>program.pl</h3>\n\n<pre><code>#!/usr/bin/perl    \n\nuse strict;\nuse warnings 'all';\n\nuse Functions qw/ my_function /;\n\nmy_function();\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6182614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ftzw.png?s=128&g=1", "display_name": "Musa Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6182614/musa-y%c4%b1ld%c4%b1r%c4%b1m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 2, "accepted_answer_id": 36866943, "answer_count": 2, "score": 0, "last_activity_date": 1461681790, "creation_date": 1461674973, "last_edit_date": 1461678130, "question_id": 36865480, "link": "https://stackoverflow.com/questions/36865480/how-to-add-a-library-from-another-perl-file", "title": "How to add a library from another perl file?", "body": "<p>I want to import a library into my perl script. Below is my attempt: </p>\n\n<p><strong>function.pl</strong></p>\n\n<pre><code>#!/usr/bin/perl\npackage main; \nuse strict;\nuse warnings;\nuse 5.005;\nuse Term::ANSIColor qw(:constants); \nuse LWP::Simple;    \nuse diagnostics;\nuse File::Spec;\nuse Getopt::Long;\nuse File::Basename;\nuse Cwd 'abs_path';\n\nsub myfunction {\n    print RED, \" Deleting...\", RESET;\n    system(\"rm \u2013f /file_location/*.\");\n    print \"deleted.\\n\";      \n}\n</code></pre>\n\n<p>I want to import function.pl in this new perl script.</p>\n\n<pre><code>#!/usr/bin/perl    \npackage main; \n\nmyfunction;\nmyfunciton2;\n</code></pre>\n"}, {"tags": ["perl", "reference", "perl-data-structures"], "comments": [{"owner": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "edited": false, "score": 3, "creation_date": 1461675072, "post_id": 36865379, "comment_id": 61298042, "body": "Just as a side note.... you are accessing $hash as an array, not as a hash (<code>$hash-&gt;{$a} = $localref</code> would be the correct thing to do)"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 3, "creation_date": 1461675127, "post_id": 36865379, "comment_id": 61298087, "body": "Your code does not contain any global hashes, or any other global variables."}], "answers": [{"comments": [{"owner": {"reputation": 1731, "user_id": 852052, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/eb9db177fd5cf088f1c7c4b2cea6871e?s=128&d=identicon&r=PG", "display_name": "PMat", "link": "https://stackoverflow.com/users/852052/pmat"}, "edited": false, "score": 0, "creation_date": 1461675312, "post_id": 36865520, "comment_id": 61298234, "body": "yes its a array ref in the above example, i mean in a generic way, in case of a reference. That what i expected, but $localref is a local memory, how does that work"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 1731, "user_id": 852052, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/eb9db177fd5cf088f1c7c4b2cea6871e?s=128&d=identicon&r=PG", "display_name": "PMat", "link": "https://stackoverflow.com/users/852052/pmat"}, "edited": false, "score": 1, "creation_date": 1461676231, "post_id": 36865520, "comment_id": 61298987, "body": "Because inserting a local (ie. lexical) item into an item of a larger scope as a reference means that the inner variable won&#39;t go out of scope until the item in the larger scope does. In your case, the scope is global, so the inner <code>$localref</code> doesn&#39;t go out of scope until the program exits."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 2, "last_activity_date": 1461676148, "last_edit_date": 1461676148, "creation_date": 1461675067, "answer_id": 36865520, "question_id": 36865379, "link": "https://stackoverflow.com/questions/36865379/global-perl-hash-reference-asignment/36865520#36865520", "title": "Global perl hash reference asignment", "body": "<p><code>$hash</code> is actually an array ref, not a hash ref, and no, the element (<code>$localref</code>) you're assigning to the aref is not a copy, because it itself is a reference. To make it a copy, you have to dereference before inserting: <code>%{ $array-&gt;[$a] } = %$localref;</code></p>\n"}, {"comments": [{"owner": {"reputation": 1731, "user_id": 852052, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/eb9db177fd5cf088f1c7c4b2cea6871e?s=128&d=identicon&r=PG", "display_name": "PMat", "link": "https://stackoverflow.com/users/852052/pmat"}, "edited": false, "score": 0, "creation_date": 1461676413, "post_id": 36865818, "comment_id": 61299128, "body": "thank you Sebastian, i tried to print the references, they are the same references. So memory is not freed unless it has last all references, even though it was created in a  different scope."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 1731, "user_id": 852052, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/eb9db177fd5cf088f1c7c4b2cea6871e?s=128&d=identicon&r=PG", "display_name": "PMat", "link": "https://stackoverflow.com/users/852052/pmat"}, "edited": false, "score": 0, "creation_date": 1461676491, "post_id": 36865818, "comment_id": 61299190, "body": "That&#39;s correct @newguy. This is called <code>REFCNT</code> or reference count. Once the <code>REFCNT</code> drops to 0, the item is released."}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 0, "creation_date": 1461676516, "post_id": 36865818, "comment_id": 61299203, "body": "Yes. A reference variable (like $localref or the $array) is just like a business card holding the address. Throwing it away doesn&#39;t bring down the house at this address, you just don&#39;t know it&#39;s location any longer - but other people (business cards) may still do."}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": true, "score": 1, "last_activity_date": 1461675879, "creation_date": 1461675879, "answer_id": 36865818, "question_id": 36865379, "link": "https://stackoverflow.com/questions/36865379/global-perl-hash-reference-asignment/36865818#36865818", "title": "Global perl hash reference asignment", "body": "<p>I assume this should be the global hashref:</p>\n\n<pre><code>my $hash; \n</code></pre>\n\n<p>The loop goes trough 1 to 10 creating a local scope hash reference $localref:</p>\n\n<pre><code>foreach $a (1..10) {\n    my $localref = {\"test\"=&gt; 1};\n</code></pre>\n\n<p>$localref is now a pointer to the memory address of a hashref containing <code>{test =&gt; 1}</code>. Try to add a <code>print</code> command to see it:</p>\n\n<pre><code>    print $localref;\n</code></pre>\n\n<p>You'll notice that the memory address shown changes for each loop run.</p>\n\n<pre><code>    $hash-&gt;[$a] = $localref; # does this result in copy?\n}\n</code></pre>\n\n<p><code>$hash-&gt;[$a]</code> is using a variable called <em>$hash</em> as an ArrayRef. You should consider renaming it.</p>\n\n<p>Try showing the contents of your \"global\" $hash after the loop:</p>\n\n<pre><code>for (1..10) {\n    print $_.\"\\t\".$hash-&gt;[$_];\n}\n</code></pre>\n\n<p>You'll see all your references still alive.</p>\n\n<p>Use Data::Dumper to show the contents:</p>\n\n<pre><code>use Data::Dumper;\nprint Dumper($hash);\n</code></pre>\n\n<p>Final conclusion:</p>\n\n<p>The memory location storing your HashRefs always stays the same, the contents are never copied, but the reference (address information) is copied. Two references to the same location exist for a short moment between <code>$hash-&gt;[$a] = $localref;</code> and <code>}</code>.</p>\n\n<p>PS: The memory used by <code>{\"test\"=&gt; 1}</code> will be freed as soon as no reference to it exists any longer.</p>\n"}], "owner": {"reputation": 1731, "user_id": 852052, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/eb9db177fd5cf088f1c7c4b2cea6871e?s=128&d=identicon&r=PG", "display_name": "PMat", "link": "https://stackoverflow.com/users/852052/pmat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 36865818, "answer_count": 2, "score": 2, "last_activity_date": 1461680672, "creation_date": 1461674743, "last_edit_date": 1461680672, "question_id": 36865379, "link": "https://stackoverflow.com/questions/36865379/global-perl-hash-reference-asignment", "title": "Global perl hash reference asignment", "body": "<p>I have a global perl hash, to which i am assign the value from my local reference, I am not sure if that does a copy to the global hash or uses the same reference, but that should be a local memory to the block.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy $hash; \nforeach $a (1..10) {\n    my $localref = {\"test\"=&gt; 1};\n    $hash-&gt;[$a] = $localref; # does this result in copy?\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1461673468, "post_id": 36864649, "comment_id": 61296731, "body": "<code>map {$_-&gt;{_id} } grep { $_-&gt;{enabled} } @$data1</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": true, "score": 4, "last_activity_date": 1461673574, "last_edit_date": 1461673574, "creation_date": 1461673256, "answer_id": 36864792, "question_id": 36864649, "link": "https://stackoverflow.com/questions/36864649/perl-loop-through-hash/36864792#36864792", "title": "Perl loop through hash", "body": "<p>Here <code>$data1</code> is array reference, so you should dereference it using <code>@ {..}</code>. Probably you want something like this: </p>\n\n<pre><code>my @sites;\n\nforeach my $x( @ { $data1 } ) { \n  push( @sites, $x -&gt; {_id} ) if( $x -&gt; {enabled} ); # $x is hash reference\n}\n\n# now @sites contain all your sites from API response for which enabled is set to 1.\n</code></pre>\n"}], "owner": {"reputation": 9140, "user_id": 1007727, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cb37f072befac0347afe7b51050e23e?s=128&d=identicon&r=PG", "display_name": "Deano", "link": "https://stackoverflow.com/users/1007727/deano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 36864792, "answer_count": 1, "score": 0, "last_activity_date": 1461674080, "creation_date": 1461672837, "last_edit_date": 1461674080, "question_id": 36864649, "link": "https://stackoverflow.com/questions/36864649/perl-loop-through-hash", "title": "Perl loop through hash", "body": "<p>I'm trying to parse an API response, and create an array</p>\n\n<pre><code> my $data1 = $value-&gt;{_embedded}-&gt;{'rh:coll'};\n print(Dumper($data1));\n</code></pre>\n\n<p>output: </p>\n\n<pre><code>$VAR1 = [\n            {\n              '_etag' =&gt; {\n                           '$oid' =&gt; '571e0eb10fdcb17d700e586b'\n                         },\n              '_id' =&gt; 'example.com',\n              'server_id' =&gt; '1',\n              'enabled' =&gt; '1'\n            },\n            {\n              '_etag' =&gt; {\n                           '$oid' =&gt; '571e0eb90fdcb17d700e586c'\n                         },\n              '_id' =&gt; 'example10.com',\n              'server_id' =&gt; '1',\n              'enabled' =&gt; '1'\n            }\n          ];\n</code></pre>\n\n<p>I'm able to parse values using </p>\n\n<pre><code>print $value-&gt;{_embedded}-&gt;{'rh:coll'}-&gt;[0]-&gt;{_id} . \"\\t\\n\";\nprint $value-&gt;{_embedded}-&gt;{'rh:coll'}-&gt;[1]-&gt;{_id} . \"\\t\\n\";\n</code></pre>\n\n<p>output </p>\n\n<pre><code>example.com\nexample10.com\n</code></pre>\n\n<p>How can I create an array out of website names <strong>if</strong> enabled is set to <strong>1</strong>? </p>\n\n<p>I have tried looping thought this </p>\n\n<pre><code>foreach my $x (%$data1) {\n        print $x-&gt;{_id};\n }\n</code></pre>\n"}, {"tags": ["python", "perl", "web-services", "soap"], "answers": [{"comments": [{"owner": {"reputation": 269, "user_id": 1662898, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9d3842820b8f1d390575be946c81067b?s=128&d=identicon&r=PG", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/1662898/abhishek"}, "edited": false, "score": 0, "creation_date": 1461740033, "post_id": 36865499, "comment_id": 61330012, "body": "I will have a look at SOAP::Simple and come back later. Btw, I tried the exact code mentioned in the link in my question. Is it absolutely necessary to write the hard code here?"}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 1, "last_activity_date": 1461675015, "creation_date": 1461675015, "answer_id": 36865499, "question_id": 36864355, "link": "https://stackoverflow.com/questions/36864355/soap-webservice-python-server-and-perl-client/36865499#36865499", "title": "SOAP webservice: Python server and perl client", "body": "<p>Yes, it is possible, but it's SOAP. See the notice from <a href=\"http://search.cpan.org/perldoc?SOAP::Simple\" rel=\"nofollow\">SOAP::Simple</a>:</p>\n\n<p><em>Let's face it. SOAP is painfull. It's a dumb idea, the only reason you should ever consider using SOAP is if someone holds a gun to your head or pay you a lot of money for it.</em></p>\n\n<p>If you want to build an API and have both server and client under your control: Try to avoid SOAP whenever possible. Consider switching to a JSON or basic HTTP API.</p>\n\n<p>If you want to keep SOAP, I suggest to try <a href=\"http://search.cpan.org/perldoc?SOAP::Simple\" rel=\"nofollow\">SOAP::Simple</a>, it might work better than SOAP::Lite. There's also the <a href=\"http://search.cpan.org/perldoc?SOAP\" rel=\"nofollow\">SOAP</a> module, but it's probably too heavy for your usage case.</p>\n\n<p>PS: You might want to include more details (e.g. code you tried) in your question to get a more specific answer.</p>\n"}], "owner": {"reputation": 269, "user_id": 1662898, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9d3842820b8f1d390575be946c81067b?s=128&d=identicon&r=PG", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/1662898/abhishek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1461764635, "creation_date": 1461672081, "last_edit_date": 1461764635, "question_id": 36864355, "link": "https://stackoverflow.com/questions/36864355/soap-webservice-python-server-and-perl-client", "title": "SOAP webservice: Python server and perl client", "body": "<p>I have created a SOAP service (using spyne). I have used python on the server side. I have a python client that works perfectly fine. But, I want to reuse the output obtained from the server in a perl script (cannot use python).\nOne possible way would be to call the python client from within perl and capture STDOUT.\nBut, it would be nice if I could write a simple perl client to get the results. I wrote a simple perl client for SOAP following <a href=\"http://www.iban-bic.com/soap_perl.html?&amp;L=0\" rel=\"nofollow\">this</a>, but my code did not print anything.</p>\n\n<pre><code>my $soap = SOAP::Lite-&gt;new();\nmy $service = $soap -&gt; service($URL);\nprint Dumper($service -&gt; serverFunction($arg1,$arg2));\n</code></pre>\n\n<p><a href=\"http://www.perlmonks.org/?node_id=182618\" rel=\"nofollow\">Here</a> I found a discussion about perl server and python client.</p>\n\n<p>So, is it possible to have a python server and perl client?</p>\n"}, {"tags": ["python", "r", "perl", "levenshtein-distance", "stringdist"], "comments": [{"owner": {"reputation": 9494, "user_id": 3949008, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SeDAC.png?s=128&g=1", "display_name": "Gopala", "link": "https://stackoverflow.com/users/3949008/gopala"}, "edited": false, "score": 0, "creation_date": 1461673178, "post_id": 36863750, "comment_id": 61296496, "body": "100000 * 100000 is 10GB. Not sure what your goal is. Why would you want to compute <code>stringdist</code> on such large strings?"}, {"owner": {"reputation": 9494, "user_id": 3949008, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SeDAC.png?s=128&g=1", "display_name": "Gopala", "link": "https://stackoverflow.com/users/3949008/gopala"}, "edited": false, "score": 0, "creation_date": 1461673419, "post_id": 36863750, "comment_id": 61296683, "body": "For example, <code>method=JW</code> on the same two strings in <code>stringdist</code> produces a result. Algorithm is different, not needing square amount of memory."}, {"owner": {"reputation": 9494, "user_id": 3949008, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SeDAC.png?s=128&g=1", "display_name": "Gopala", "link": "https://stackoverflow.com/users/3949008/gopala"}, "edited": false, "score": 0, "creation_date": 1461675054, "post_id": 36863750, "comment_id": 61298025, "body": "As for your other problem of vectorized approach <code>stringdist</code> is taking, that is a very good thing for most use cases. If you really want it not to treat those two inputs as vectors, you can use <code>stringdist(paste(a.vec, collapse = &#39;&#39;), paste(b.vec, collapse = &#39;&#39;), method = &quot;lv&quot;)</code>"}, {"owner": {"reputation": 9494, "user_id": 3949008, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SeDAC.png?s=128&g=1", "display_name": "Gopala", "link": "https://stackoverflow.com/users/3949008/gopala"}, "edited": false, "score": 0, "creation_date": 1461675105, "post_id": 36863750, "comment_id": 61298069, "body": "This may help: <a href=\"http://stackoverflow.com/questions/4057513/levenshtein-distance-algorithm-better-than-onm\" title=\"levenshtein distance algorithm better than onm\">stackoverflow.com/questions/4057513/&hellip;</a>"}, {"owner": {"reputation": 5856, "user_id": 1616488, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aCLot.jpg?s=128&g=1", "display_name": "Wakan Tanka", "link": "https://stackoverflow.com/users/1616488/wakan-tanka"}, "reply_to_user": {"reputation": 9494, "user_id": 3949008, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SeDAC.png?s=128&g=1", "display_name": "Gopala", "link": "https://stackoverflow.com/users/3949008/gopala"}, "edited": false, "score": 0, "creation_date": 1461675417, "post_id": 36863750, "comment_id": 61298329, "body": "@Gopala I can e.g. prefix all elements with zeros and get e.g. <code>007</code> and <code>455</code> but the problem is that it even more increases already large strings so I would like to avoid this and use vectors instead."}, {"owner": {"reputation": 5856, "user_id": 1616488, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aCLot.jpg?s=128&g=1", "display_name": "Wakan Tanka", "link": "https://stackoverflow.com/users/1616488/wakan-tanka"}, "reply_to_user": {"reputation": 9494, "user_id": 3949008, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SeDAC.png?s=128&g=1", "display_name": "Gopala", "link": "https://stackoverflow.com/users/3949008/gopala"}, "edited": false, "score": 0, "creation_date": 1461675525, "post_id": 36863750, "comment_id": 61298416, "body": "@Gopala mentioned link looks similar to what I&#39;ve posted but I need working implementation and I do not have enough time resources to develop/debug/test it myself, so I would rather use something mature."}, {"owner": {"reputation": 9494, "user_id": 3949008, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SeDAC.png?s=128&g=1", "display_name": "Gopala", "link": "https://stackoverflow.com/users/3949008/gopala"}, "edited": false, "score": 0, "creation_date": 1461675771, "post_id": 36863750, "comment_id": 61298620, "body": "I found the solution for you! :) Try <code>levenshteinDist</code> from the <code>RecordLinkage</code> package in R. It is using the memory efficient version. You still need to use <code>paste</code> to convert your vectors to strings to feed it."}, {"owner": {"reputation": 4877, "user_id": 6656269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/02256532337188eeb3934ead38f2735b?s=128&d=identicon&r=PG&f=1", "display_name": "Scarabee", "link": "https://stackoverflow.com/users/6656269/scarabee"}, "edited": false, "score": 0, "creation_date": 1491409761, "post_id": 36863750, "comment_id": 73543689, "body": "About your 2nb problem: a possible workaround is to map your vectors to strings of Unicode characters: <a href=\"http://stackoverflow.com/questions/43232409/levenstein-edit-distance-for-arbitrary-sequences\" title=\"levenstein edit distance for arbitrary sequences\">stackoverflow.com/questions/43232409/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5856, "user_id": 1616488, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aCLot.jpg?s=128&g=1", "display_name": "Wakan Tanka", "link": "https://stackoverflow.com/users/1616488/wakan-tanka"}, "edited": false, "score": 0, "creation_date": 1461676692, "post_id": 36865831, "comment_id": 61299336, "body": "thank you, I&#39;ve up voted, but I still need vectors. May I ask how did you find the package?"}, {"owner": {"reputation": 9494, "user_id": 3949008, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SeDAC.png?s=128&g=1", "display_name": "Gopala", "link": "https://stackoverflow.com/users/3949008/gopala"}, "reply_to_user": {"reputation": 5856, "user_id": 1616488, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aCLot.jpg?s=128&g=1", "display_name": "Wakan Tanka", "link": "https://stackoverflow.com/users/1616488/wakan-tanka"}, "edited": false, "score": 0, "creation_date": 1461676892, "post_id": 36865831, "comment_id": 61299488, "body": "I used it in the past for record linking and had forgotten. So, reloaded and tried. Will edit to add the vector aspect. Hope that meets your needs."}, {"owner": {"reputation": 5856, "user_id": 1616488, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aCLot.jpg?s=128&g=1", "display_name": "Wakan Tanka", "link": "https://stackoverflow.com/users/1616488/wakan-tanka"}, "edited": false, "score": 0, "creation_date": 1461788578, "post_id": 36865831, "comment_id": 61364472, "body": "It is not working in all cases. Check my question here: <a href=\"http://cs.stackexchange.com/questions/56612/levenshtein-distance-cabable-working-with-large-vectors-not-strings\" title=\"levenshtein distance cabable working with large vectors not strings\">cs.stackexchange.com/questions/56612/&hellip;</a>"}], "tags": [], "owner": {"reputation": 9494, "user_id": 3949008, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SeDAC.png?s=128&g=1", "display_name": "Gopala", "link": "https://stackoverflow.com/users/3949008/gopala"}, "is_accepted": false, "score": 1, "last_activity_date": 1461677013, "last_edit_date": 1461677013, "creation_date": 1461675896, "answer_id": 36865831, "question_id": 36863750, "link": "https://stackoverflow.com/questions/36863750/levenshtein-implementation-capable-working-with-large-strings-and-vectors/36865831#36865831", "title": "Levenshtein implementation capable working with large strings and vectors", "body": "<p>Here is a solution to memory problem:</p>\n\n<pre><code>library(RecordLinkage)\n\nset.seed(1)\na.str &lt;- paste(sample(0:9, 100000, replace = T), collapse=\"\")\nset.seed(2)\nb.str &lt;- paste(sample(0:9, 100000, replace = T), collapse=\"\")\nlevenshteinDist(a.str, b.str)\n[1] 73969\n</code></pre>\n\n<p>Still need to convert vectors to strings by using <code>paste</code> as that is not automatically assumed by the package. Most use cases want a vectorized operation.</p>\n\n<p>See below for a way to get them to be treated as strings instead:</p>\n\n<pre><code>a.vec &lt;- c(1, 2, 3, 4, 5, 666)\nb.vec &lt;- c(1, 2, 4, 3, 6, 777)\nlevenshteinDist(paste(a.vec, collapse = ''), paste(b.vec, collapse = ''))\n[1] 5\n</code></pre>\n"}], "owner": {"reputation": 5856, "user_id": 1616488, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aCLot.jpg?s=128&g=1", "display_name": "Wakan Tanka", "link": "https://stackoverflow.com/users/1616488/wakan-tanka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 836, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1461677013, "creation_date": 1461670425, "last_edit_date": 1461675611, "question_id": 36863750, "link": "https://stackoverflow.com/questions/36863750/levenshtein-implementation-capable-working-with-large-strings-and-vectors", "title": "Levenshtein implementation capable working with large strings and vectors", "body": "<p>There is <a href=\"https://cran.r-project.org/web/packages/stringdist/index.html\" rel=\"nofollow\">package</a> named <code>stringdist</code> in R which contains functions for computing Levenshtein string distance. I have two problems with this package:</p>\n\n<p><strong>1st</strong> It does not works with large strings e.g.:</p>\n\n<pre><code>set.seed(1)\na.str &lt;- paste(sample(0:9, 100000, replace = T), collapse=\"\")\n\nset.seed(2)\nb.str &lt;- paste(sample(0:9, 100000, replace = T), collapse=\"\")\n\nstringdist(a.str, b.str, method = \"lv\")\n# THE LAST COMMAND RESTARTS R SESSION\n</code></pre>\n\n<p><strong>2nd</strong> Distances in vectors are computed per vector element's characters rather than per whole vector:</p>\n\n<pre><code>a.vec &lt;- c(1, 2, 3, 4, 5, 666)\nb.vec &lt;- c(1, 2, 4, 3, 6, 777)\nstringdist(a.vec, b.vec, method = \"lv\")\n# [1] 0 0 1 1 1 3\n</code></pre>\n\n<p>I would like to have the result from last command 4: because 4 substitutions are needed (4 vector elements on corresponding positions are different). In this case I can fetch values which are non 0 and count them e.g.: <code>r &lt;- stringdist(a.vec, b.vec, method = \"lv\"); length(r[r!=0])</code>. But it does not works in following example:</p>\n\n<pre><code>a.vec &lt;- c(1, 2, 3)\nb.vec &lt;- c(1, 2, 2, 3)\nstringdist(a.vec, b.vec, method = \"lv\")\n# [1] 0 0 1 1\n# Warning message:\n# In stringdist(a.vec, b.vec, method = \"lv\") :\n#   longer object length is not a multiple of shorter object length\n</code></pre>\n\n<p>I would like to have the result from last command 1 (insert 2 at 1st position in 1st vector).</p>\n\n<p><strong>PS</strong> There is also built in implementation but it also does not works with large strings (and to be honest I have no idea how it is working with vectors because I do not understand it's output):</p>\n\n<pre><code>adist(a.str,b.str, counts = T)\n# Error in adist(a.str, b.str, counts = T) : \n#   'Calloc' could not allocate memory (1410265409 of 8 bytes)\n</code></pre>\n\n<p>Is there any implementation (preferably in python, perl or R) which fulfills my requirements? Thank you very much.</p>\n\n<p><strong>PPS</strong> I have multiple files where each line contain numbers from 1 ~ 500 (this is why I need to treat e.g. 347 as one element and not as string composed of 3,4,7 because 3,4,7 are another separate numbers). Those files has ~ 250000 lines. And I want to know how similar those files are to each other. I guess that 10k*10k size is the problem. But <a href=\"http://www.codeproject.com/Articles/13525/Fast-memory-efficient-Levenshtein-algorithm\" rel=\"nofollow\">here</a> is mentioned Levenshtein algorithm which uses only 2*10k size (if both strings are 10k long). I guess the trick is that it only computes the result and forget HOW the result was computed, but this is OK for me. Hamming distance is not sufficient for me because I need to take into account insertions, deletions, substitutions, in Hamming those two strings <code>1234567890</code> <code>0123456789</code> is completely different but in Levenshtein they are similar.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1461669815, "post_id": 36863299, "comment_id": 61294083, "body": "Could you please share test string!!"}, {"owner": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "edited": false, "score": 0, "creation_date": 1461671539, "post_id": 36863299, "comment_id": 61295303, "body": "When you use <code>close</code> such way a maximum of one iteration of <code>while</code>-loop can occur"}, {"owner": {"reputation": 39, "user_id": 5047700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09413769ab2397b2b743bd49d18f09b3?s=128&d=identicon&r=PG&f=1", "display_name": "STJ", "link": "https://stackoverflow.com/users/5047700/stj"}, "reply_to_user": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "edited": false, "score": 0, "creation_date": 1461673340, "post_id": 36863299, "comment_id": 61296619, "body": "@red0ct Got it.  Will use close outside while loop. Thanks for pointing it out."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461680896, "post_id": 36863299, "comment_id": 61302924, "body": "What makes you think you can&#39;t install CPAN modules?"}, {"owner": {"reputation": 39, "user_id": 5047700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09413769ab2397b2b743bd49d18f09b3?s=128&d=identicon&r=PG&f=1", "display_name": "STJ", "link": "https://stackoverflow.com/users/5047700/stj"}, "edited": false, "score": 0, "creation_date": 1461754174, "post_id": 36863299, "comment_id": 61339504, "body": "Moreover I would say I am not allowed to. :)"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 5047700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09413769ab2397b2b743bd49d18f09b3?s=128&d=identicon&r=PG&f=1", "display_name": "STJ", "link": "https://stackoverflow.com/users/5047700/stj"}, "edited": false, "score": 0, "creation_date": 1461673431, "post_id": 36863639, "comment_id": 61296695, "body": "Would it be not time and resource consuming??"}, {"owner": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "reply_to_user": {"reputation": 39, "user_id": 5047700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09413769ab2397b2b743bd49d18f09b3?s=128&d=identicon&r=PG&f=1", "display_name": "STJ", "link": "https://stackoverflow.com/users/5047700/stj"}, "edited": false, "score": 0, "creation_date": 1461674661, "post_id": 36863639, "comment_id": 61297676, "body": "@STJ It depends on your input data. You can start with the <a href=\"http://perldoc.perl.org/Benchmark.html\" rel=\"nofollow noreferrer\"><code>Benchmark</code></a> module to measure how much time it takes for different input, if you want"}, {"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1461677282, "post_id": 36863639, "comment_id": 61299802, "body": "Yes, this could be slow for large enough files. In that case it would be better to read chunks from the end and reassemble broken lines."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 39, "user_id": 5047700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09413769ab2397b2b743bd49d18f09b3?s=128&d=identicon&r=PG&f=1", "display_name": "STJ", "link": "https://stackoverflow.com/users/5047700/stj"}, "edited": false, "score": 0, "creation_date": 1461680863, "post_id": 36863639, "comment_id": 61302893, "body": "@STJ: You must <i>never</i> try a more complex approach until you are certain that the simplest way will not work for you. You should already have tried this"}], "tags": [], "owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1461670131, "creation_date": 1461670131, "answer_id": 36863639, "question_id": 36863299, "link": "https://stackoverflow.com/questions/36863299/how-do-i-read-the-last-line-of-a-file-which-contain-specific-pattern-with-a-bare/36863639#36863639", "title": "How do I read the last line of a file which contain specific pattern with a bare Perl on Windows?", "body": "<p>Read file as usual, test each line with your pattern and save full line each time it matches. When file is finished, print out what you saved - it will be last match.</p>\n\n<pre><code>open my $fh, '&lt;', $slogfile;\nmy $last_match;\nwhile (&lt;$fh&gt;) {\n    if (m/^(\\d\\d) (\\w{3}) (\\d{4}) (\\d\\d):(\\d\\d):(\\d\\d) --/) { $last_match = $_ }\n} \nprint OUTLOG $last_match;\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 5047700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09413769ab2397b2b743bd49d18f09b3?s=128&d=identicon&r=PG&f=1", "display_name": "STJ", "link": "https://stackoverflow.com/users/5047700/stj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 36863639, "answer_count": 1, "score": 0, "last_activity_date": 1461680735, "creation_date": 1461669231, "last_edit_date": 1461680735, "question_id": 36863299, "link": "https://stackoverflow.com/questions/36863299/how-do-i-read-the-last-line-of-a-file-which-contain-specific-pattern-with-a-bare", "title": "How do I read the last line of a file which contain specific pattern with a bare Perl on Windows?", "body": "<p>I need to read a file to the end and get the last line that contains a specific regex pattern. I don't have the <a href=\"https://metacpan.org/pod/File:ReadBackwards\" rel=\"nofollow\"><code>File:ReadBackwards</code></a> module. </p>\n\n<p>I tried the code below but found that I do not have <a href=\"https://metacpan.org/pod/PerlIO::reverse\" rel=\"nofollow\"><code>PerlIO::reverse</code></a> installed either.</p>\n\n<p>I can't install modules. Kindly suggest code to achieve this.</p>\n\n<p>Ultimately I want the line of the file which begins with the pattern</p>\n\n<pre><code>(\\d\\d) (\\w{3}) (\\d{4}) (\\d\\d):(\\d\\d):(\\d\\d) --\n</code></pre>\n\n<p>This is what I tried</p>\n\n<pre><code>open my $rev, '&lt;:reverse', '$slogfile';\n\nwhile ($line = &lt;$rev&gt;) { # do to contents reversely     \n    print OUTLOG $line if $line =~ m/^(\\d\\d) (\\w{3}) (\\d{4}) (\\d\\d):(\\d\\d):(\\d\\d) --/;\n    close($rev);\n} \n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1461673508, "post_id": 36862187, "comment_id": 61296764, "body": "Also, they shouldn&#39;t be using an if/elsif/else at all. The sentence could contain all three forms."}], "tags": [], "owner": {"reputation": 7536, "user_id": 1691146, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RW9zE.jpg?s=128&g=1", "display_name": "RobEarl", "link": "https://stackoverflow.com/users/1691146/robearl"}, "is_accepted": false, "score": 2, "last_activity_date": 1461666318, "creation_date": 1461666318, "answer_id": 36862187, "question_id": 36861769, "link": "https://stackoverflow.com/questions/36861769/why-is-this-perl-regex-not-working/36862187#36862187", "title": "Why is this perl regex not working?", "body": "<p>The <code>\\Q</code> makes the rest of the regex match literally <code>[dlr]y+V3SG</code>. Moving it enables the character class to function properly:</p>\n\n<pre><code>s/[dlr]\\Qy+V3SG/ies/g\n</code></pre>\n\n<p>or just escape the <code>+</code>:</p>\n\n<pre><code>s/[dlr]y\\+V3SG/ies/g\n</code></pre>\n\n<p>After this change, you get, e.g:</p>\n\n<pre><code>He stuies hard.\n</code></pre>\n\n<p>To make sure the first letter is retained, you can use a capture or <code>\\K</code> (since 5.10):</p>\n\n<pre><code>s/[dlr]\\K\\Qy+V3SG/ies/g\n</code></pre>\n\n<p>For the second regex, you're using the wrong brackets:</p>\n\n<pre><code>s/(s|x|sh|ch|o)\\Q+V3SG/$1es/g\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1461673482, "last_edit_date": 1461673482, "creation_date": 1461666810, "answer_id": 36862389, "question_id": 36861769, "link": "https://stackoverflow.com/questions/36861769/why-is-this-perl-regex-not-working/36862389#36862389", "title": "Why is this perl regex not working?", "body": "<p>You should keep <code>\\Q</code> just before the literal. You are placing it before whole regex, so the whole regex is considered as literal and is not interpreted.</p>\n\n<p>Second thing you should use <code>\\K</code> wisely to substitute. Put it just after the part you don't want to substitute. for eg: <code>s/[dlr]\\Ky\\Q+V3SG/ies/g</code> makes <code>study</code> <code>studies</code> and it will not remove <code>d</code> or <code>l</code> or <code>r</code> from result.</p>\n\n<p>Third thing <code>[s|x|sh|ch|o]</code> will not do what you think. It will match any character in <code>s,x,h,|,c,o</code>. The correct one should be <code>(?:s|x|sh|ch|o)</code>.<code>(?:...)</code> is for non capturing group.</p>\n\n<p>Finally, that shouldn't be an if/elsif/else at all. The sentence could contain all three forms.</p>\n\n<p>Overall: It gives us: </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @input = (\"He walk+V3SG very fast.\", \"He study+V3SG hard.\",\"He crush+V3SG hard.\");\n\nforeach (@input){\n    if (m/\\Q+V3SG/){\n        s/[dlr]\\Ky\\Q+V3SG/ies/g;\n        s/(?:s|x|sh|ch|o)\\K\\Q+V3SG/es/g;\n        s/\\Q+V3SG/s/g;\n    }\n}\n\nforeach my $sent(@input){\n    print $sent;\n    print \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 6255615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d36ce63eab558609401f5e9847853d9?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6255615/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 703, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1461673482, "creation_date": 1461665293, "question_id": 36861769, "link": "https://stackoverflow.com/questions/36861769/why-is-this-perl-regex-not-working", "title": "Why is this perl regex not working?", "body": "<p>I have this array.</p>\n\n<pre><code>my @input = (\"He walk+V3SG very fast.\", \"He study+V3SG hard.\");\n</code></pre>\n\n<p>and I want to substitute 'walk+V3SG' and 'study+V3SG' to 'walks' and 'studies'.</p>\n\n<p>Below is the script I wrote. I thought this should work but for some reason it is not working.</p>\n\n<pre><code>    foreach my $sent(@input){\n    if ($sent =~ m/\\Q+V3SG/){\n        if ($sent =~ m/\\Q[dlr]y+V3SG/){\n            $sent =~ s/\\Q[dlr]y+V3SG/ies/g;\n        }\n        if ($sent =~ m/\\Q[s|x|sh|ch|o]+V3SG/){\n            $sent =~ s/\\Q[s|x|sh|ch|o]+V3SG/es/g;\n        }\n        else {$sent =~ s/\\Q+V3SG/s/g}\n    }\n}\n\nforeach my $sent(@input){\n    print $sent;\n    print \"\\n\";\n}\n</code></pre>\n\n<p>Can anyone tell me what is wrong with the script?</p>\n"}, {"tags": ["perl", "hash", "dereference"], "comments": [{"owner": {"reputation": 2227, "user_id": 3942186, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/OnOyW.jpg?s=128&g=1", "display_name": "Emna Ayadi", "link": "https://stackoverflow.com/users/3942186/emna-ayadi"}, "edited": false, "score": 0, "creation_date": 1461664651, "post_id": 36861408, "comment_id": 61290355, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/18135451/what-is-the-difference-between-var-var-and-var-in-the-bash-shell\">What is the difference between ${var}, &quot;$var&quot;, and &quot;${var}&quot; in the Bash shell?</a>"}, {"owner": {"reputation": 15560, "user_id": 709439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/19b5c7e6c2772d88adcbd928daddc170?s=128&d=identicon&r=PG", "display_name": "MarcoS", "link": "https://stackoverflow.com/users/709439/marcos"}, "reply_to_user": {"reputation": 2227, "user_id": 3942186, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/OnOyW.jpg?s=128&g=1", "display_name": "Emna Ayadi", "link": "https://stackoverflow.com/users/3942186/emna-ayadi"}, "edited": false, "score": 2, "creation_date": 1461664785, "post_id": 36861408, "comment_id": 61290453, "body": "@Emna: OP language is <i>Perl</i>..."}, {"owner": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "edited": false, "score": 3, "creation_date": 1461664821, "post_id": 36861408, "comment_id": 61290484, "body": "Use <code>use strict</code> on your code."}, {"owner": {"reputation": 2227, "user_id": 3942186, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/OnOyW.jpg?s=128&g=1", "display_name": "Emna Ayadi", "link": "https://stackoverflow.com/users/3942186/emna-ayadi"}, "reply_to_user": {"reputation": 15560, "user_id": 709439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/19b5c7e6c2772d88adcbd928daddc170?s=128&d=identicon&r=PG", "display_name": "MarcoS", "link": "https://stackoverflow.com/users/709439/marcos"}, "edited": false, "score": 0, "creation_date": 1461664824, "post_id": 36861408, "comment_id": 61290487, "body": "@MarcoS : Ok Sorry"}], "answers": [{"comments": [{"owner": {"reputation": 838, "user_id": 3387187, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c6d98c9908e03db52244b881d074c8e9?s=128&d=identicon&r=PG&f=1", "display_name": "stenlytw", "link": "https://stackoverflow.com/users/3387187/stenlytw"}, "edited": false, "score": 0, "creation_date": 1461665058, "post_id": 36861549, "comment_id": 61290671, "body": "Yes I usually use strict in my code. It&#39;s just for testing purpose. :D. Thanks for your answer. :)"}, {"owner": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "reply_to_user": {"reputation": 838, "user_id": 3387187, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c6d98c9908e03db52244b881d074c8e9?s=128&d=identicon&r=PG&f=1", "display_name": "stenlytw", "link": "https://stackoverflow.com/users/3387187/stenlytw"}, "edited": false, "score": 2, "creation_date": 1461665454, "post_id": 36861549, "comment_id": 61291019, "body": "@bounces, even in testing you must use it! The error when using strict in your source is quite different: <code>Global symbol &quot;$HoH&quot; requires explicit package name</code> and that would have given you the answer to your question."}, {"owner": {"reputation": 838, "user_id": 3387187, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c6d98c9908e03db52244b881d074c8e9?s=128&d=identicon&r=PG&f=1", "display_name": "stenlytw", "link": "https://stackoverflow.com/users/3387187/stenlytw"}, "reply_to_user": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "edited": false, "score": 0, "creation_date": 1461665635, "post_id": 36861549, "comment_id": 61291145, "body": "@eballes But there&#39;s still an error <code>each on reference is experimental</code> with use strict."}, {"owner": {"reputation": 15560, "user_id": 709439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/19b5c7e6c2772d88adcbd928daddc170?s=128&d=identicon&r=PG", "display_name": "MarcoS", "link": "https://stackoverflow.com/users/709439/marcos"}, "reply_to_user": {"reputation": 838, "user_id": 3387187, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c6d98c9908e03db52244b881d074c8e9?s=128&d=identicon&r=PG&f=1", "display_name": "stenlytw", "link": "https://stackoverflow.com/users/3387187/stenlytw"}, "edited": false, "score": 1, "creation_date": 1461672923, "post_id": 36861549, "comment_id": 61296291, "body": "@bounces: <code>keys on reference</code> is expertimental <i>before</i> perl 1.14: if you can&#39;t upgrade, you can shut up that warning with the line <code>no warnings &#39;experimental&#39;;</code> just before the <code>each</code>..."}, {"owner": {"reputation": 838, "user_id": 3387187, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c6d98c9908e03db52244b881d074c8e9?s=128&d=identicon&r=PG&f=1", "display_name": "stenlytw", "link": "https://stackoverflow.com/users/3387187/stenlytw"}, "edited": false, "score": 0, "creation_date": 1461676860, "post_id": 36861549, "comment_id": 61299465, "body": "@MarcoS I&#39;m using Perl 5.22. Btw did you mean before perl 5.14?"}, {"owner": {"reputation": 15560, "user_id": 709439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/19b5c7e6c2772d88adcbd928daddc170?s=128&d=identicon&r=PG", "display_name": "MarcoS", "link": "https://stackoverflow.com/users/709439/marcos"}, "edited": false, "score": 0, "creation_date": 1461677203, "post_id": 36861549, "comment_id": 61299737, "body": "Yes, sorry, 5.14... :-("}, {"owner": {"reputation": 15560, "user_id": 709439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/19b5c7e6c2772d88adcbd928daddc170?s=128&d=identicon&r=PG", "display_name": "MarcoS", "link": "https://stackoverflow.com/users/709439/marcos"}, "edited": false, "score": 0, "creation_date": 1461677286, "post_id": 36861549, "comment_id": 61299805, "body": "But, if you&#39;re using 5.22, and get that warning, my comment is wrong, sorry... Did you try the &quot;no warning experimental&#39;&quot; pragma, nonetheless?"}, {"owner": {"reputation": 838, "user_id": 3387187, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c6d98c9908e03db52244b881d074c8e9?s=128&d=identicon&r=PG&f=1", "display_name": "stenlytw", "link": "https://stackoverflow.com/users/3387187/stenlytw"}, "edited": false, "score": 0, "creation_date": 1461677591, "post_id": 36861549, "comment_id": 61300062, "body": "Yes I tried it. The <code>each on reference is experimental</code> message disappear if I add <code>no warnings &#39;experimental&#39;;</code>"}], "tags": [], "owner": {"reputation": 15560, "user_id": 709439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/19b5c7e6c2772d88adcbd928daddc170?s=128&d=identicon&r=PG", "display_name": "MarcoS", "link": "https://stackoverflow.com/users/709439/marcos"}, "is_accepted": true, "score": 7, "last_activity_date": 1461664740, "creation_date": 1461664740, "answer_id": 36861549, "question_id": 36861408, "link": "https://stackoverflow.com/questions/36861408/perl-var-vs-var/36861549#36861549", "title": "Perl %{$var} vs %$var", "body": "<p>With <code>%$HoH{$i}</code> you make a hash reference of $HoH, while with <code>%{$HoH{$i}}</code> you make a hash reference of <code>$HoH{$i}</code>, which is what you want... And, <code>use strict</code> on your code :-)</p>\n"}, {"tags": [], "owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "is_accepted": false, "score": 2, "last_activity_date": 1461665544, "creation_date": 1461665544, "answer_id": 36861864, "question_id": 36861408, "link": "https://stackoverflow.com/questions/36861408/perl-var-vs-var/36861864#36861864", "title": "Perl %{$var} vs %$var", "body": "<p>Its due to the different precedence levels of resolving the hash vs subscripting the hash.  It works with the second version - <code>%{ $HoH{$i} }</code> - because you are unambiguously stating that the value returned by the lookup of <code>$HoH{$i}</code> is itself, a hashref. </p>\n\n<p>Whereas <code>%$HoH{$i}</code> is interpreted as <code>%{ $HoH }{$i}</code> - ie.  the subscripting is happening after the expression <code>$HoH</code> is interpreted as a hashref - which it isn't.  <code>%HoH</code> is a hash but <code>$HoH</code> is not used - i.e. it's undefined.</p>\n"}], "owner": {"reputation": 838, "user_id": 3387187, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c6d98c9908e03db52244b881d074c8e9?s=128&d=identicon&r=PG&f=1", "display_name": "stenlytw", "link": "https://stackoverflow.com/users/3387187/stenlytw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 913, "favorite_count": 0, "accepted_answer_id": 36861549, "answer_count": 2, "score": 3, "last_activity_date": 1461665544, "creation_date": 1461664457, "question_id": 36861408, "link": "https://stackoverflow.com/questions/36861408/perl-var-vs-var", "title": "Perl %{$var} vs %$var", "body": "<p>What's the difference between <code>%{$var}</code> and <code>%$var</code>? I tried this code but there's error:</p>\n\n<blockquote>\n  <p>each on reference is experimental at test.pl line 21. Type of argument\n  to each on reference must be unblessed hashref or arrayref at test.pl\n  line 21.</p>\n</blockquote>\n\n<pre><code>use feature 'say';\n\n%HoH = (\n    1 =&gt; {\n        husband   =&gt; \"fred\",\n        pal       =&gt; \"barney\",\n    },\n    2 =&gt; {\n        husband   =&gt; \"george\",\n        wife      =&gt; \"jane\",\n        \"his boy\" =&gt; \"elroy\",\n    },\n    3 =&gt; {\n        husband   =&gt; \"homer\",\n        wife      =&gt; \"marge\",\n        kid       =&gt; \"bart\",\n    },\n);\n\nfor ($i = 1; $i &lt;= 3; $i++) {\n    while ( ($family, $roles) = each %$HoH{$i} ) {\n        say \"$family: $roles\";\n    }\n}\n</code></pre>\n\n<p>But this code works fine:</p>\n\n<pre><code>use feature 'say';\n\n%HoH = (\n    1 =&gt; {\n        husband   =&gt; \"fred\",\n        pal       =&gt; \"barney\",\n    },\n    2 =&gt; {\n        husband   =&gt; \"george\",\n        wife      =&gt; \"jane\",\n        \"his boy\" =&gt; \"elroy\",\n    },\n    3 =&gt; {\n        husband   =&gt; \"homer\",\n        wife      =&gt; \"marge\",\n        kid       =&gt; \"bart\",\n    },\n);\n\nfor ($i = 1; $i &lt;= 3; $i++) {\n    while ( ($family, $roles) = each %{$HoH{$i}} ) {\n        say \"$family: $roles\";\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "shell"], "comments": [{"owner": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "edited": false, "score": 2, "creation_date": 1461655717, "post_id": 36857882, "comment_id": 61284180, "body": "Try with a print before the backticks. You are not printing the output of the command."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1461657894, "post_id": 36857882, "comment_id": 61285606, "body": "What is your expected behavior?"}, {"owner": {"reputation": 6317, "user_id": 2849157, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/81de56159f8a6f58c78e3e7d88d7fbe5?s=128&d=identicon&r=PG&f=1", "display_name": "roger", "link": "https://stackoverflow.com/users/2849157/roger"}, "reply_to_user": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1461658487, "post_id": 36857882, "comment_id": 61285983, "body": "@el.pescado I use this command in osx, I do not need <code>print</code>, I will get the output"}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1461660100, "post_id": 36857882, "comment_id": 61287037, "body": "Where would you like output to go?"}], "answers": [{"tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": false, "score": 3, "last_activity_date": 1461656290, "creation_date": 1461656290, "answer_id": 36858317, "question_id": 36857882, "link": "https://stackoverflow.com/questions/36857882/ubuntu-perl-can-not-get-shell-output/36858317#36858317", "title": "ubuntu perl can not get shell output?", "body": "<p><a href=\"http://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow\"><code>Backticks(``) or qx</code></a> runs a command and returns the <code>STDOUT</code>. So, you just need a variable to capture <code>STDOUT</code>. <code>STDERR</code> is untouched.</p>\n\n<pre><code>#!/usr/bin/env perl\nmy $stdout = `tar zvcf /tmp/js.tgz -C /home/cuidehe/js .`;\n\nprint \"$stdout\";\n</code></pre>\n\n<p><strong>Or,</strong></p>\n\n<p>You can use <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow\"><code>system</code></a>.It runs a command and returns its exit status(<code>STDOUT</code> and <code>STDERR</code> are untouched).</p>\n\n<pre><code>my $exit_status = system('tar zvcf /tmp/js.tgz -C /home/cuidehe/js .');\nprint \"Exit Status: $exit_status\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 1, "creation_date": 1461656999, "post_id": 36858522, "comment_id": 61285021, "body": "For completeness: <code>my @output = qx{tar ...};</code>"}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "reply_to_user": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 0, "creation_date": 1461657186, "post_id": 36858522, "comment_id": 61285154, "body": "Thanks. Added it to the answer."}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 3, "last_activity_date": 1461657160, "last_edit_date": 1461657160, "creation_date": 1461656888, "answer_id": 36858522, "question_id": 36857882, "link": "https://stackoverflow.com/questions/36857882/ubuntu-perl-can-not-get-shell-output/36858522#36858522", "title": "ubuntu perl can not get shell output?", "body": "<p>You need to specify a target for the command output within Perl:</p>\n\n<pre><code>my $output = `tar zvcf /tmp/js.tgz -C /home/cuidehe/js .`;\nprint $output;\n</code></pre>\n\n<p>All output lines end up in $output.\nNaming the variable $STDOUT isn't good, because it's a reserved keyword in Perl.</p>\n\n<p>The command will likely produce more than one line of output. Using <code>open</code> might be better:</p>\n\n<pre><code>open my $fh,'-|','tar zvcf /tmp/js.tgz -C /home/cuidehe/js .'\n    or die 'Error launching tar';\nwhile (&lt;$fh&gt;) {\n    chomp; # Remove the trailing \\n from the input line\n    print \"Got line: $_\\n\"; # Do whatever you want here.\n}\nclose $fh;\n</code></pre>\n\n<p>You may also capture STDERR using</p>\n\n<pre><code>open my $fh,'-|','tar zvcf /tmp/js.tgz -C /home/cuidehe/js . 2&gt;&amp;1'\n    or die 'Error launching tar';\n</code></pre>\n\n<p>This will redirect any error to STDERR and you get both (files and errors) to the same <code>$fh</code>.</p>\n\n<p><a href=\"http://search.cpan.org/perldoc?IPC::Open3\" rel=\"nofollow\">IPC::Open3</a> could capture both (STDOUT and STDERR) to different filehandles.</p>\n\n<p>Update (thanks to @Dummy00001):</p>\n\n<pre><code>my @output = `tar zvcf /tmp/js.tgz -C /home/cuidehe/js .`;\n</code></pre>\n\n<p>will return each line of the tar-output as one array item.</p>\n"}], "owner": {"reputation": 6317, "user_id": 2849157, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/81de56159f8a6f58c78e3e7d88d7fbe5?s=128&d=identicon&r=PG&f=1", "display_name": "roger", "link": "https://stackoverflow.com/users/2849157/roger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1461657160, "creation_date": 1461655100, "question_id": 36857882, "link": "https://stackoverflow.com/questions/36857882/ubuntu-perl-can-not-get-shell-output", "title": "ubuntu perl can not get shell output?", "body": "<p>I run command in perl script like this:</p>\n\n<pre><code>#!/usr/bin/env perl\n`tar zvcf /tmp/js.tgz -C /home/cuidehe/js .`;\n</code></pre>\n\n<p>I got <code>/tmp/js.tgz</code>, but I can not get the verbose output?</p>\n"}, {"tags": ["javascript", "perl"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 5462683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-1Wx7lkBR4t8/AAAAAAAAAAI/AAAAAAAAFIo/ntksApZlMyw/photo.jpg?sz=128", "display_name": "Markus", "link": "https://stackoverflow.com/users/5462683/markus"}, "edited": false, "score": 0, "creation_date": 1461655801, "post_id": 36857802, "comment_id": 61284233, "body": "Thank you. <code>var Counter = function(){}</code> is working, but for <code>var Counter_2=function(){}</code> isn&#39;t working. Why is that a problem?"}, {"owner": {"reputation": 49, "user_id": 5462683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-1Wx7lkBR4t8/AAAAAAAAAAI/AAAAAAAAFIo/ntksApZlMyw/photo.jpg?sz=128", "display_name": "Markus", "link": "https://stackoverflow.com/users/5462683/markus"}, "edited": false, "score": 0, "creation_date": 1461662532, "post_id": 36857802, "comment_id": 61288790, "body": "I found something code.   <code>var Time = 60; var Counter = function(){ \tif (Time &gt; 0) { \t\tTime --; \t\tdocument.getElementById(&#39;counter&#39;).innerHTML = Time; \t} \telse { \t\twindow.location.reload(true); \t} } var myVar = window.setInterval(&quot;Counter()&quot;, 1000);</code>  <code>var Time_2 = 10; window.onload = function(){ \tif (Time_2 &gt; 0) { \t\tTime_2 --; \t\tdocument.getElementById(&#39;a_reload&#39;).innerHTML = Time_2; \t\tsetTimeout(&#39;window.onload()&#39;, 1000); \t} \telse{ \t\twindow.history.back(-1); \t} } window.onload = Counter_2;</code>  That&#39;s very much better. But thank you very much."}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": true, "score": 0, "last_activity_date": 1461654860, "creation_date": 1461654860, "answer_id": 36857802, "question_id": 36857674, "link": "https://stackoverflow.com/questions/36857674/window-onload-isnt-working-for-counter-page/36857802#36857802", "title": "window.onload isn&#39;t working for counter page", "body": "<pre><code>var Counter = function (){\n</code></pre>\n\n<p>should solve your problem. Currently you're assigning a reference (<em>zaehler</em>) before creating it. Would be</p>\n\n<pre><code>my $Counter = $zaehler;\nmy $zaehler = sub {\n...\n</code></pre>\n\n<p>in Perl.</p>\n"}], "owner": {"reputation": 49, "user_id": 5462683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-1Wx7lkBR4t8/AAAAAAAAAAI/AAAAAAAAFIo/ntksApZlMyw/photo.jpg?sz=128", "display_name": "Markus", "link": "https://stackoverflow.com/users/5462683/markus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 36857802, "answer_count": 1, "score": 0, "last_activity_date": 1461654860, "creation_date": 1461654483, "question_id": 36857674, "link": "https://stackoverflow.com/questions/36857674/window-onload-isnt-working-for-counter-page", "title": "window.onload isn&#39;t working for counter page", "body": "<p>I'm not understand! Why this code isn't working? window.onload can't double function. How should I this code just?</p>\n\n<p>Perl is alright. But Javascript is per wrong. I need help for Javascript.</p>\n\n<p><strong>Perl:</strong></p>\n\n<pre><code>print $lqcgi-&gt;td({ -class =&gt; 'navItemText', -align =&gt; 'left'}, '&lt;script&gt; document.write(\"refresh in &lt;strong&gt;&lt;span id=\\\"counter\\\"&gt;&lt;/span&gt;&lt;/strong&gt; seconds\")&lt;/script&gt;&lt;/td&gt;&lt;/tr&gt;' )\n\nprint \"&lt;script&gt;document.write('&lt;p&gt;&lt;small&gt;You will be redirected to main page in &lt;strong&gt;&lt;span id=\\\"a_reload\\\"&gt;&lt;/span&gt;&lt;/strong&gt; sec.&lt;/small&gt;&lt;/p&gt;')&lt;/script&gt;\";\n</code></pre>\n\n<p><strong>Javascript:</strong></p>\n\n<pre><code>   var Time = 60;\n    var Counter = zaehler;\n    function zaehler(){\n        if (Time &gt; 0) {\n            Time --;\n            document.getElementById('counter').innerHTML = Time;\n            setTimeout(\"zaehler()\",1000);\n        }\n        else {\n            window.location.reload(true);\n        }\n    }\n    window.onload = Counter;\n\n    function a_confirm(){\n        var x = confirm(\"Are you sure to Confirmation?\");\n        if (x == true){\n            return true;\n        }\n        else{\n            return false;\n        }\n    }\n\n    var Time_2 = 5;\n    var Counter_2 = c_reload\n    function c_reload(){\n        if (Time_2 &gt; 0) {\n            Time_2 --;\n            document.getElementById('a_reload').innerHTML = Time_2;\n            setTimeout(\"c_reload()\", 1000);\n        }\n        else{\n            window.history.back(-1);\n        }\n    }\n    window.onload = Counter_2;\n</code></pre>\n"}, {"tags": ["python", "perl"], "comments": [{"owner": {"reputation": 13, "user_id": 4608656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0aacfee4f246c3910507c01325504e4c?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy", "link": "https://stackoverflow.com/users/4608656/paddy"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1461649278, "post_id": 36855923, "comment_id": 61280439, "body": "I compared current value and previous value. my next task is want to compare current value with next three value."}, {"owner": {"reputation": 1600, "user_id": 47104, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/B6YAc.png?s=128&g=1", "display_name": "Itai Bar-Haim", "link": "https://stackoverflow.com/users/47104/itai-bar-haim"}, "edited": false, "score": 0, "creation_date": 1461650324, "post_id": 36855923, "comment_id": 61280916, "body": "I don&#39;t understand the algorithm you are aiming for. Please elaborate on that so we can help you find a solution."}, {"owner": {"reputation": 13, "user_id": 4608656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0aacfee4f246c3910507c01325504e4c?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy", "link": "https://stackoverflow.com/users/4608656/paddy"}, "reply_to_user": {"reputation": 1600, "user_id": 47104, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/B6YAc.png?s=128&g=1", "display_name": "Itai Bar-Haim", "link": "https://stackoverflow.com/users/47104/itai-bar-haim"}, "edited": false, "score": 0, "creation_date": 1461662715, "post_id": 36855923, "comment_id": 61288929, "body": "I am newbie to perl let me guide anybody"}, {"owner": {"reputation": 1600, "user_id": 47104, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/B6YAc.png?s=128&g=1", "display_name": "Itai Bar-Haim", "link": "https://stackoverflow.com/users/47104/itai-bar-haim"}, "edited": false, "score": 0, "creation_date": 1461669250, "post_id": 36855923, "comment_id": 61293712, "body": "so given a different array of values, like 1,3,4,7,8,8,9,9 and the current value is 7, then you&#39;ll want to see 7-4, 8-7, 8-7, 9-7, 9-7?"}, {"owner": {"reputation": 13, "user_id": 4608656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0aacfee4f246c3910507c01325504e4c?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy", "link": "https://stackoverflow.com/users/4608656/paddy"}, "reply_to_user": {"reputation": 1600, "user_id": 47104, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/B6YAc.png?s=128&g=1", "display_name": "Itai Bar-Haim", "link": "https://stackoverflow.com/users/47104/itai-bar-haim"}, "edited": false, "score": 0, "creation_date": 1461734771, "post_id": 36855923, "comment_id": 61327474, "body": "yes, thats the logic."}, {"owner": {"reputation": 1600, "user_id": 47104, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/B6YAc.png?s=128&g=1", "display_name": "Itai Bar-Haim", "link": "https://stackoverflow.com/users/47104/itai-bar-haim"}, "edited": false, "score": 0, "creation_date": 1461736783, "post_id": 36855923, "comment_id": 61328307, "body": "So share your script or pseudo-code, and we&#39;ll go over it. Sound pretty simple to me."}, {"owner": {"reputation": 13, "user_id": 4608656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0aacfee4f246c3910507c01325504e4c?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy", "link": "https://stackoverflow.com/users/4608656/paddy"}, "reply_to_user": {"reputation": 1600, "user_id": 47104, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/B6YAc.png?s=128&g=1", "display_name": "Itai Bar-Haim", "link": "https://stackoverflow.com/users/47104/itai-bar-haim"}, "edited": false, "score": 0, "creation_date": 1461737879, "post_id": 36855923, "comment_id": 61328845, "body": "ok wait.. i ll share my code with you."}, {"owner": {"reputation": 13, "user_id": 4608656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0aacfee4f246c3910507c01325504e4c?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy", "link": "https://stackoverflow.com/users/4608656/paddy"}, "reply_to_user": {"reputation": 1600, "user_id": 47104, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/B6YAc.png?s=128&g=1", "display_name": "Itai Bar-Haim", "link": "https://stackoverflow.com/users/47104/itai-bar-haim"}, "edited": false, "score": 0, "creation_date": 1461750054, "post_id": 36855923, "comment_id": 61336535, "body": "sub func {    my @arr = (1,3,4,7,8,8,9,9);   my@arr1;   foreach my $i (0..$#arr)    {             push (@arr1,$arr[$i]);     if ($current_value =~ 7)        {             my $brk= (scalar @arr1) -1;          for (my $counter = (scalar @arr1); $counter &gt;= $brk ;$counter--)            {                                     if($arr1[$counter] &lt; $current_value)             {                 print $current_value - $arr1[$counter];             }           else           {             next;           }         }                 }       else       {         next;               }       }   }"}, {"owner": {"reputation": 13, "user_id": 4608656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0aacfee4f246c3910507c01325504e4c?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy", "link": "https://stackoverflow.com/users/4608656/paddy"}, "reply_to_user": {"reputation": 1600, "user_id": 47104, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/B6YAc.png?s=128&g=1", "display_name": "Itai Bar-Haim", "link": "https://stackoverflow.com/users/47104/itai-bar-haim"}, "edited": false, "score": 0, "creation_date": 1461750239, "post_id": 36855923, "comment_id": 61336672, "body": "This is my sudo code i have done subtraction of previous value from current value, I want to see i.e. 8-7,8-7,9-7 etc."}, {"owner": {"reputation": 1600, "user_id": 47104, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/B6YAc.png?s=128&g=1", "display_name": "Itai Bar-Haim", "link": "https://stackoverflow.com/users/47104/itai-bar-haim"}, "edited": false, "score": 0, "creation_date": 1461751651, "post_id": 36855923, "comment_id": 61337733, "body": "I&#39;ll go over it when I have some time. Please edit the main post with the algorithm you wrote here in the comments."}, {"owner": {"reputation": 13, "user_id": 4608656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0aacfee4f246c3910507c01325504e4c?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy", "link": "https://stackoverflow.com/users/4608656/paddy"}, "reply_to_user": {"reputation": 1600, "user_id": 47104, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/B6YAc.png?s=128&g=1", "display_name": "Itai Bar-Haim", "link": "https://stackoverflow.com/users/47104/itai-bar-haim"}, "edited": false, "score": 0, "creation_date": 1461752211, "post_id": 36855923, "comment_id": 61338133, "body": "I ll post algorithm.. thank you."}, {"owner": {"reputation": 1600, "user_id": 47104, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/B6YAc.png?s=128&g=1", "display_name": "Itai Bar-Haim", "link": "https://stackoverflow.com/users/47104/itai-bar-haim"}, "edited": false, "score": 0, "creation_date": 1461754516, "post_id": 36855923, "comment_id": 61339746, "body": "I&#39;d split the problem to several steps: (1) Find the value index. If given an index you can skip this step. (2) Compute the subtraction with the value or values below it. (3) Compute the subtraction with the value or values above it."}, {"owner": {"reputation": 13, "user_id": 4608656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0aacfee4f246c3910507c01325504e4c?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy", "link": "https://stackoverflow.com/users/4608656/paddy"}, "reply_to_user": {"reputation": 1600, "user_id": 47104, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/B6YAc.png?s=128&g=1", "display_name": "Itai Bar-Haim", "link": "https://stackoverflow.com/users/47104/itai-bar-haim"}, "edited": false, "score": 0, "creation_date": 1461755554, "post_id": 36855923, "comment_id": 61340449, "body": "yup I know. And Be sure with out any dependency of perl package. we have to develope this logic"}, {"owner": {"reputation": 1600, "user_id": 47104, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/B6YAc.png?s=128&g=1", "display_name": "Itai Bar-Haim", "link": "https://stackoverflow.com/users/47104/itai-bar-haim"}, "edited": false, "score": 0, "creation_date": 1461756980, "post_id": 36855923, "comment_id": 61341446, "body": "It&#39;s as simple as it gets, no dependencies needed. First step: find the index, You can write a simple <code>for</code> loop for that, or just provide the index. Second step: compute the subtraction value with the value at the previous index: <code>print $value - $arr[$index-1]</code>. Third step: loop from <code>$index + 1</code> (let&#39;s call it <code>$i</code>) to the end of the array and in each step do <code>print  $arr[$i] - $value</code>"}, {"owner": {"reputation": 13, "user_id": 4608656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0aacfee4f246c3910507c01325504e4c?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy", "link": "https://stackoverflow.com/users/4608656/paddy"}, "reply_to_user": {"reputation": 1600, "user_id": 47104, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/B6YAc.png?s=128&g=1", "display_name": "Itai Bar-Haim", "link": "https://stackoverflow.com/users/47104/itai-bar-haim"}, "edited": false, "score": 0, "creation_date": 1461759961, "post_id": 36855923, "comment_id": 61343793, "body": "ok i ll do it. and if i want to compute substraction above value(s) that must be same ,i.e. 8-7,8-7,8-7 how can i do it?"}, {"owner": {"reputation": 1600, "user_id": 47104, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/B6YAc.png?s=128&g=1", "display_name": "Itai Bar-Haim", "link": "https://stackoverflow.com/users/47104/itai-bar-haim"}, "edited": false, "score": 0, "creation_date": 1461760072, "post_id": 36855923, "comment_id": 61343883, "body": "again, you don&#39;t care about the values. only about the indices."}, {"owner": {"reputation": 13, "user_id": 4608656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0aacfee4f246c3910507c01325504e4c?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy", "link": "https://stackoverflow.com/users/4608656/paddy"}, "reply_to_user": {"reputation": 1600, "user_id": 47104, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/B6YAc.png?s=128&g=1", "display_name": "Itai Bar-Haim", "link": "https://stackoverflow.com/users/47104/itai-bar-haim"}, "edited": false, "score": 0, "creation_date": 1461761358, "post_id": 36855923, "comment_id": 61344913, "body": "ohk.. cool... got it.. thank you.."}, {"owner": {"reputation": 1600, "user_id": 47104, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/B6YAc.png?s=128&g=1", "display_name": "Itai Bar-Haim", "link": "https://stackoverflow.com/users/47104/itai-bar-haim"}, "edited": false, "score": 0, "creation_date": 1461761799, "post_id": 36855923, "comment_id": 61345259, "body": "you&#39;re welcome. please vote the comment or comments that helped you  most."}, {"owner": {"reputation": 1600, "user_id": 47104, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/B6YAc.png?s=128&g=1", "display_name": "Itai Bar-Haim", "link": "https://stackoverflow.com/users/47104/itai-bar-haim"}, "edited": false, "score": 0, "creation_date": 1461762039, "post_id": 36855923, "comment_id": 61345449, "body": "I copied the main comment I thought was the best answer to an answer post, so you can accept it if you want."}], "answers": [{"tags": [], "owner": {"reputation": 1600, "user_id": 47104, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/B6YAc.png?s=128&g=1", "display_name": "Itai Bar-Haim", "link": "https://stackoverflow.com/users/47104/itai-bar-haim"}, "is_accepted": true, "score": 0, "last_activity_date": 1461761980, "creation_date": 1461761980, "answer_id": 36890595, "question_id": 36855923, "link": "https://stackoverflow.com/questions/36855923/compare-and-subtract-current-value-from-next-3-value/36890595#36890595", "title": "compare and subtract current value from next 3 value", "body": "<p>I'd split the problem to several steps: </p>\n\n<ol>\n<li>Find the value index. If given an index you can skip this step. </li>\n<li>Compute the subtraction with the value or values below it. </li>\n<li>Compute the subtraction with the value or values above it.</li>\n</ol>\n\n<p>Note that you should only base your run on indices, not values.</p>\n"}], "owner": {"reputation": 13, "user_id": 4608656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0aacfee4f246c3910507c01325504e4c?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy", "link": "https://stackoverflow.com/users/4608656/paddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 36890595, "answer_count": 1, "score": -7, "last_activity_date": 1461762435, "creation_date": 1461648382, "last_edit_date": 1461762435, "question_id": 36855923, "link": "https://stackoverflow.com/questions/36855923/compare-and-subtract-current-value-from-next-3-value", "title": "compare and subtract current value from next 3 value", "body": "<p>Given array of values, for example <strong>1, 3, 4, 7, 8, 8, 9, 9</strong>, and the current value is <strong>7</strong>, I want to see result of <strong>7-4, 8-7, 8-7, 9-7, 9-7</strong>.</p>\n\n<p>The pseudo code is below. I tried but i am stuck:</p>\n\n<pre><code>sub func\n{ \n    my @arr = (1,3,4,7,8,8,9,9);\n    my @arr1;\n    foreach my $i (0..$#arr) \n    {        \n        push (@arr1,$arr[$i]);\n        if ($current_value =~ 7) \n        {  \n            my $brk= (scalar @arr1) -1;\n            for (my $counter = (scalar @arr1); $counter &gt;= $brk ;$counter--) \n            {                        \n                if($arr1[$counter] &lt; $current_value)\n                {\n                    print $current_value - $arr1[$counter];\n                }\n                else\n                {\n                    next;\n                }\n            }          \n        }\n        else\n        {\n            next;        \n        }    \n    }  \n}\n</code></pre>\n"}, {"tags": ["perl", "shell"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1461640089, "post_id": 36854527, "comment_id": 61277773, "body": "Why not run it as a one-line command instead of a multi-line command.  Perl handles long strings fine.  In any case, you need to double up the backslashes since Perl strips them."}, {"owner": {"reputation": 6317, "user_id": 2849157, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/81de56159f8a6f58c78e3e7d88d7fbe5?s=128&d=identicon&r=PG&f=1", "display_name": "roger", "link": "https://stackoverflow.com/users/2849157/roger"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1461640216, "post_id": 36854527, "comment_id": 61277798, "body": "@JonathanLeffler yes, you are right, I handle this in one line ok, but I still try  to do this because one line are to long, sometimes, it is not readable."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1461640608, "post_id": 36854527, "comment_id": 61277908, "body": "You can always build the one long line by concatenating multiple shorter strings, which doesn&#39;t have the readability problems.  But it is also valid to make the request."}], "answers": [{"comments": [{"owner": {"reputation": 2880, "user_id": 1540600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iv9jm.jpg?s=128&g=1", "display_name": "sferencik", "link": "https://stackoverflow.com/users/1540600/sferencik"}, "edited": false, "score": 0, "creation_date": 1461654253, "post_id": 36854822, "comment_id": 61283285, "body": "So Perl, when running <code>qx&#47;&#47;</code>, behaves somewhat shell-like (according to the &quot;perlop&quot; perldoc), but not quite?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2880, "user_id": 1540600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iv9jm.jpg?s=128&g=1", "display_name": "sferencik", "link": "https://stackoverflow.com/users/1540600/sferencik"}, "edited": false, "score": 0, "creation_date": 1461677656, "post_id": 36854822, "comment_id": 61300098, "body": "@sferencik: It&#39;s not that straightforward, but <code>qx&#47;&#47;</code> behaves the same way as <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">system</a> which, like much of Perl, is designed to <i>do what you mean</i>. Essentially, Perl will start a shell process to execute the command if it finds any <i>shell metacharacters</i> in the string, like wildcard file expansion, input and output redirection, pipes etc. <a href=\"http://faculty.salina.k-state.edu/tim/unix_sg/shell/metachar.html\" rel=\"nofollow noreferrer\">There&#39;s a list here</a>. Otherwise it will start the program directly as the shell would do itself"}, {"owner": {"reputation": 2880, "user_id": 1540600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iv9jm.jpg?s=128&g=1", "display_name": "sferencik", "link": "https://stackoverflow.com/users/1540600/sferencik"}, "edited": false, "score": 0, "creation_date": 1461801949, "post_id": 36854822, "comment_id": 61369956, "body": "Thanks, makes sense. So if Borodin had had a redirect in that multi-line <code>qx&#47;&#47;</code> statement, it would have worked, correct?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2880, "user_id": 1540600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iv9jm.jpg?s=128&g=1", "display_name": "sferencik", "link": "https://stackoverflow.com/users/1540600/sferencik"}, "edited": false, "score": 0, "creation_date": 1461811441, "post_id": 36854822, "comment_id": 61372367, "body": "@sferencik:  No. There are already wildcarded file names in there so it will be passed to the shell anyway. As I said in my update, the problem is that backslash followed by newline in a Perl double-quoted string is the same as just a newline: the backslash is removed so the shell never sees it. Backslash on its own is another shell metacharacter, so if you use single quotes or escape the backslash to stop it from being eaten then it would be passed to the shell and work fine. Getting metacharacters through multiple different languages with different rules is always awkward like this"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 9, "last_activity_date": 1461690095, "last_edit_date": 1592644375, "creation_date": 1461641719, "answer_id": 36854822, "question_id": 36854527, "link": "https://stackoverflow.com/questions/36854527/how-to-execute-multiline-shell-command-in-perl/36854822#36854822", "title": "how to execute multiline shell command in perl?", "body": "<h3>Update</h3>\n<p>I apologise. My original diagnosis was wrong</p>\n<p>It is hard to clearly express in a post like this the contents of strings that contain Perl escape characters. If anything below is unclear to you then please write a comment to say so. I hope I haven't made things unnecessarily complicated</p>\n<p>My original solution below is still valid, and will give you better control over the contents of the command, but my reasons for why the OP's code doesn't work for them were wrong, and the truth offers other resolutions</p>\n<p>The problem is that the contents of backticks (or <code>qx/.../</code>) are evaluated as a <em>double-quoted string</em>, which means that Perl variables and escape sequences like <code>\\t</code> and <code>\\x20</code> are expanded before the string is executed. One of the consequences of this is that a backslash is deleted if it is followed by a literal newline, leaving just the newline</p>\n<p>That means that a statement like this</p>\n<pre><code>my $output = `ls \\\n-l`;\n</code></pre>\n<p>will be preprocessed to <code>&quot;ls \\n-l&quot;</code> and will no longer contain the backslash that is needed to signal to the shell that the newline should be removed (or indeed to get the command passed to the shell in the first place)</p>\n<p>Apart from manipulating the command string directly as I described in my original post below, there are two solutions to this. The first is to escape the backslash itself by doubling it up, like this</p>\n<pre><code>my $output = `ls \\\\\n-l`;\n</code></pre>\n<p>which will prevent it from being removed by Perl. That will pass the backslash-newline sequence to the shell, which will remove it as normal</p>\n<p>The other is to use <code>qx'...'</code> instead of backticks together with single-quote delimiters, which will prevent the contents from being processed as a double-quoted string</p>\n<pre><code>my $output = qx'ls \\\n-l';\n</code></pre>\n<p>This will work fine unless you have used Perl variables in the string that you want to be interpolated</p>\n<br/>\n<hr />\n<h3>Original post</h3>\n<p>The problem is that the shell removes newlines preceded by backslashes from the command string before executing it. Without that step the command is invalid</p>\n<p>So you must do the same thing yourself in Perl, and to do that you must put the command in a temporary variable</p>\n<pre><code>use strict;\nuse warnings 'all';\n\nmy $cmd = &lt;&lt;'END';\ntar --exclude=&quot;*/node_modules&quot; \\\n--exclude=&quot;*/vendor&quot; \\\n--exclude='.git' \\\n-zvcf /tmp/robot.tgz .\nEND\n\n$cmd =~ s/\\\\\\n//g;\n\nmy $output = `$cmd`;\n</code></pre>\n<p>There is no need for the backslashes of course; you can simply use newlines and remove those before executing the command</p>\n<p>Or you may prefer to wrap the operations in a subroutine, like this</p>\n<pre><code>use strict;\nuse warnings 'all';\n\nmy $output = do_command(&lt;&lt;'END');\ntar --exclude=&quot;*/node_modules&quot; \\\n--exclude=&quot;*/vendor&quot; \\\n--exclude='.git' \\\n-zvcf /tmp/robot.tgz .\nEND\n\nsub do_command {\n    my ($cmd) = @_;\n    $cmd =~ s/\\\\\\n//g;\n    `$cmd`;\n}\n</code></pre>\n"}], "owner": {"reputation": 6317, "user_id": 2849157, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/81de56159f8a6f58c78e3e7d88d7fbe5?s=128&d=identicon&r=PG&f=1", "display_name": "roger", "link": "https://stackoverflow.com/users/2849157/roger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2614, "favorite_count": 0, "accepted_answer_id": 36854822, "answer_count": 1, "score": 1, "last_activity_date": 1461690095, "creation_date": 1461639758, "question_id": 36854527, "link": "https://stackoverflow.com/questions/36854527/how-to-execute-multiline-shell-command-in-perl", "title": "how to execute multiline shell command in perl?", "body": "<p>I want to run shell command as follow in perl:</p>\n\n<pre><code>tar --exclude=\"*/node_modules\" \\\n--exclude=\"*/vendor\" \\\n--exclude='.git' \\\n-zvcf /tmp/robot.tgz .\n</code></pre>\n\n<p>But it seems perl can not excute this:</p>\n\n<pre><code>`tar --exclude=\"cv/node_modules\" \\\n--exclude=\"*/vendor\" \\\n--exclude='.git' \\\n-zvcf /tmp/robot.tgz .`;\n</code></pre>\n\n<p>Here is the error:</p>\n\n<pre><code>tar: Must specify one of -c, -r, -t, -u, -x\nsh: line 1: --exclude=*/vendor: No such file or directory\nsh: line 2: --exclude=.git: command not found\nsh: line 3: -zvcf: command not found\n</code></pre>\n\n<p>it seems perl treat each line as one command.</p>\n"}, {"tags": ["regex", "perl", "loops", "fsm"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1461628741, "post_id": 36853046, "comment_id": 61275101, "body": "You could change it to <code>(?&lt;A&gt;^|(?=.)(?&amp;B)a)(?&lt;B&gt;(?=.)(?&amp;A)b)</code> but then you&#39;d get a complexity message. Its a circular loop with no ending."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1461629273, "post_id": 36853046, "comment_id": 61275232, "body": "A calls B calls A calls B without ever matching anything."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 1, "creation_date": 1461629664, "post_id": 36853046, "comment_id": 61275324, "body": "Otherwise known as <i>infinite recursion</i>. You could change it to <code>(?&lt;A&gt;a(?&amp;B))(?&lt;B&gt;b(?&amp;A))</code> but it will never match <code>abab</code> because it needs to find more <code>ababab</code> to continue working."}], "answers": [{"comments": [{"owner": {"reputation": 27303, "user_id": 1003123, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ef598363853c3081cc13585afbe81d0f?s=128&d=identicon&r=PG", "display_name": "enrico.bacis", "link": "https://stackoverflow.com/users/1003123/enrico-bacis"}, "edited": false, "score": 0, "creation_date": 1461743389, "post_id": 36863663, "comment_id": 61332063, "body": "The tip on avoiding left recursion was the way to go. I devised a way based on yours and I&#39;ll explain it in a post here"}], "tags": [], "owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "is_accepted": false, "score": 1, "last_activity_date": 1461672560, "last_edit_date": 1461672560, "creation_date": 1461670210, "answer_id": 36863663, "question_id": 36853046, "link": "https://stackoverflow.com/questions/36853046/create-loops-with-perl-regex-patterns/36863663#36863663", "title": "Create loops with perl regex patterns", "body": "<p>The following regex matches <code>^(ba)*$</code></p>\n\n<pre><code>/^($|(?&lt;B&gt;(?:$|b(?&amp;A)))(?&lt;A&gt;a(?&amp;B))?)/\n</code></pre>\n\n<p><strong><em>Explanation</em></strong></p>\n\n<p>One of the challenges with mutual recursion (next to avoid left recursion) in regexen is that there is no separation between <em>declaration</em> and <em>use</em> of a named pattern. Therefore, assuming you have <code>n</code> consecutive named patterns in your regex, you must make sure that upon exit in the <code>k</code>th named pattern, the named patterns <code>(k+1),...,n</code> do not need to match any more.</p>\n\n<p>This is accomplished in the present case by marking the definitional occurrence of <code>A</code> as optional.</p>\n\n<p>Further points to note:</p>\n\n<ul>\n<li><p>Breaking recursion:<br/>\nWhen trying to match <code>B</code>, the alternative of being at the end of the input string terminates recursion.</p></li>\n<li><p>Outermost alternative:<br/>\nAllows for matching the empty string</p></li>\n</ul>\n\n<p><strong><em>Alternative</em></strong></p>\n\n<p>Given that a particular string <code>xyz</code> will never occur in the input, a separation between declaration and use of a named pattern can be simulated.:</p>\n\n<ul>\n<li>Write out the definitions of all named patterns sequentially at the beginning of the regex</li>\n<li>Prefix that sequence with the unmatchable string</li>\n<li>Mark this construction as optional.</li>\n<li>Use the named pattern as needed afterwards</li>\n</ul>\n\n<p>Due to <code>xyz</code> the 'declarations' will never match, however, for the remainder of the regex all names have been defined.</p>\n\n<p>For <code>^(ba)*$</code>:</p>\n\n<pre><code>/^(xyz(?&lt;B&gt;(?:$|b(?&amp;A)))(?&lt;A&gt;a(?&amp;B)))?(?&amp;B)/\n</code></pre>\n"}], "owner": {"reputation": 27303, "user_id": 1003123, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ef598363853c3081cc13585afbe81d0f?s=128&d=identicon&r=PG", "display_name": "enrico.bacis", "link": "https://stackoverflow.com/users/1003123/enrico-bacis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1461672560, "creation_date": 1461628024, "question_id": 36853046, "link": "https://stackoverflow.com/questions/36853046/create-loops-with-perl-regex-patterns", "title": "Create loops with perl regex patterns", "body": "<p>Is it possible to create loops in perl regex patterns like so:</p>\n\n<pre><code>(?&lt;A&gt;^|(?&amp;B)a)(?&lt;B&gt;(?&amp;A)b)\n</code></pre>\n\n<p>Regex101 is not accepting it. I undertand that I could just write:</p>\n\n<pre><code>(ba)?\n</code></pre>\n\n<p>but I would like to understand if I would be able to create patterns and then use them (I'm trying to easily convert a quite complex FSM into a regex without losing sanity).</p>\n"}, {"tags": ["regex", "perl", "split"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1461621890, "post_id": 36851693, "comment_id": 61272767, "body": "You mean you want to re-combine <code>@processed_words</code> with the original delimiters?"}], "answers": [{"comments": [{"owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "reply_to_user": {"reputation": 18319, "user_id": 472485, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eaad078400b012b1e37fa6f11dd5c089?s=128&d=identicon&r=PG", "display_name": "Jean", "link": "https://stackoverflow.com/users/472485/jean"}, "edited": false, "score": 0, "creation_date": 1461622969, "post_id": 36851743, "comment_id": 61273193, "body": "In that case, this is a dupe of: <a href=\"http://stackoverflow.com/questions/14907772/split-but-keep-delimiter\" title=\"split but keep delimiter\">stackoverflow.com/questions/14907772/split-but-keep-delimite&zwnj;&#8203;r</a>"}], "tags": [], "owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1461621124, "creation_date": 1461621124, "answer_id": 36851743, "question_id": 36851693, "link": "https://stackoverflow.com/questions/36851693/capture-in-split/36851743#36851743", "title": "Capture in split", "body": "<p>Not quite sure what you mean by \"compose $string back after splitting\", but maybe something like:</p>\n\n<pre><code>my $composed = join(\" \", map { process_word($_) } @words);\n</code></pre>\n\n<p>...would do the trick?</p>\n"}, {"tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": false, "score": 1, "last_activity_date": 1461622952, "last_edit_date": 1461622952, "creation_date": 1461622640, "answer_id": 36852095, "question_id": 36851693, "link": "https://stackoverflow.com/questions/36851693/capture-in-split/36852095#36852095", "title": "Capture in split", "body": "<p>You need to use a capture group around your delimiter to keep the delimiter in the result array. Then use a for loop and check if the index is odd or even, example <em>(that splits on non-word characters and makes word characters uppercase)</em>: </p>\n\n<pre><code>echo 'a\"b@c%d.e^f$g' | perl -ne '@a=split(/(\\W+)/);for($i=0;$i&lt;@a;++$i){ print $i%2 ? @a[$i] : uc@a[$i];}'\n</code></pre>\n\n<p>(Where <code>$i%2</code> checks if the index <code>$i</code> is odd or even).</p>\n"}, {"tags": [], "owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1461622832, "creation_date": 1461622832, "answer_id": 36852136, "question_id": 36851693, "link": "https://stackoverflow.com/questions/36851693/capture-in-split/36852136#36852136", "title": "Capture in split", "body": "<p>If you put the delimiters in the regexp in a capture group, then <code>split</code> will include the delimiters in its result -- it will alternate between words and delimiters. You can then push the unprocessed delimiters and the processed words onto the result array.</p>\n\n<pre><code>my @words =split(/([~,;#&amp;=\\.\\s\\|\\(\\)\\+\\-\\?\\:]+)/,$string);\nmy @processed_words = ();\nforeach (@words)  {\n    if (/[~,;#&amp;=\\.\\s\\|\\(\\)\\+\\-\\?\\:]/) { // delimiter, just copy it\n        push(@processed_words, $_)\n    } else { // process the word\n        push(@processed_words,process_word($_));\n}\n</code></pre>\n"}], "owner": {"reputation": 18319, "user_id": 472485, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eaad078400b012b1e37fa6f11dd5c089?s=128&d=identicon&r=PG", "display_name": "Jean", "link": "https://stackoverflow.com/users/472485/jean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1461855080, "accepted_answer_id": 36852136, "answer_count": 3, "score": -1, "last_activity_date": 1461622952, "creation_date": 1461620933, "last_edit_date": 1461621192, "question_id": 36851693, "link": "https://stackoverflow.com/questions/36851693/capture-in-split", "closed_reason": "Duplicate", "title": "Capture in split", "body": "<p>I do this:</p>\n\n<pre><code>my @words =split(/[~,;#&amp;=\\.\\s\\|\\(\\)\\+\\-\\?\\:]+/,$string);\nmy @processed_words = ();\nforeach (@words)  {push(@processed_words,process_word($_));}\n</code></pre>\n\n<p>Could someone suggest an easy way to compose <code>$string</code> back after processing while keeping the unprocessed parts intact?\nOr is <code>split</code> not the way to go here?</p>\n"}, {"tags": ["perl", "pdl"], "answers": [{"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1461625694, "post_id": 36851859, "comment_id": 61274157, "body": "This answer would be better if it&#39;s used <code>isa</code> to respect inheritance rather than <code>reftype</code>."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1461626126, "post_id": 36851859, "comment_id": 61274323, "body": "Yes, I should have said <code>blessed</code>. I didn&#39;t even know <code>blessed</code> returned the type."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1461627933, "post_id": 36851859, "comment_id": 61274869, "body": "@Schwern Thanks, fixed. Now I feel like my answer is just a rip-off of yours :-/"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1461628282, "post_id": 36851859, "comment_id": 61274971, "body": "I&#39;m fine with saying the same thing two different ways."}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 3, "last_activity_date": 1461628326, "last_edit_date": 1461628326, "creation_date": 1461621588, "answer_id": 36851859, "question_id": 36851474, "link": "https://stackoverflow.com/questions/36851474/how-can-i-check-if-a-perl-variable-is-in-pdl-format-i-e-is-a-piddle/36851859#36851859", "title": "How can I check if a Perl variable is in PDL format (i.e. is a piddle)?", "body": "<p>You can use <a href=\"http://perldoc.perl.org/Scalar/Util.html\" rel=\"nofollow\">Scalar::Util</a> to find out if a variable is:</p>\n\n<ul>\n<li>an object (using the <code>blessed</code> function)</li>\n<li>a reference, and if so, what type of reference (using the <code>reftype</code> function)</li>\n</ul>\n\n<p>You can use the <a href=\"http://perldoc.perl.org/UNIVERSAL.html#$obj-%3Eisa%28-TYPE-%29\" rel=\"nofollow\"><code>isa</code></a> method to find out whether an object is an instance of a particular class or inherits from that class.</p>\n\n<p>Piddles are simply PDL objects, i.e. things that have been blessed into the <code>PDL</code> class, so</p>\n\n<pre><code>$foo-&gt;isa('PDL')\n</code></pre>\n\n<p>will return true if <code>$foo</code> is a piddle.</p>\n\n<p>All together:</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse 5.010;\n\nuse PDL;\nuse Scalar::Util qw(blessed reftype);\n\nmy $scalar   = 19;\nmy $arrayref = [ qw(foo bar) ];\nmy $hashref  = { baz =&gt; 'qux' };\nmy $piddle   = pdl [ 1..10 ];\n\nforeach my $item ($scalar, $arrayref, $hashref, $piddle) {\n    my $reftype;\n\n    if ( defined(blessed($item)) ) {\n        say 'piddle' if $item-&gt;isa('PDL');\n    }\n    elsif ( defined($reftype = reftype($item)) ) {\n        say $reftype;\n    }\n    else {\n        say 'Not a reference';\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Not a reference\nARRAY\nHASH\npiddle\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 3, "last_activity_date": 1461627161, "last_edit_date": 1461627161, "creation_date": 1461626050, "answer_id": 36852711, "question_id": 36851474, "link": "https://stackoverflow.com/questions/36851474/how-can-i-check-if-a-perl-variable-is-in-pdl-format-i-e-is-a-piddle/36852711#36852711", "title": "How can I check if a Perl variable is in PDL format (i.e. is a piddle)?", "body": "<p>The typical way to check if something is of a certain class is with <a href=\"http://perldoc.perl.org/UNIVERSAL.html#DESCRIPTION\" rel=\"nofollow\"><code>isa</code></a>.</p>\n\n<pre><code>if( $thing-&gt;isa(\"PDL\") ) { ... }\n</code></pre>\n\n<p>This respects <a href=\"https://metacpan.org/pod/distribution/PDL/Basic/Pod/Objects.pod#Inheritance\" rel=\"nofollow\">inheritance</a>. So long as <code>$thing</code> is a subclass of PDL (or says it is) the above will work. This protects you both against custom subclasses and changes to PDL itself. Below is an example.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse v5.10;\n\npackage MyPDL;\nour @ISA = qw(PDL);\n\npackage main;\n\nuse PDL;\nuse Scalar::Util qw(blessed);\n\nmy $stuff = pdl [1..10];\n\nsay blessed $stuff;                                   # PDL\nsay \"\\$stuff is a PDL thing\" if $stuff-&gt;isa(\"PDL\");   # true\n\nmy $bar = MyPDL-&gt;new([1..10]);\nsay blessed $bar;                                     # MyPDL\nsay \"\\$bar is a PDL thing\" if $bar-&gt;isa(\"PDL\");       # true\n</code></pre>\n\n<p>However, method calls don't work on non-references and unblessed references; you'll get an error if you try. You can work around this in two ways. First is to use <a href=\"http://perldoc.perl.org/functions/eval.html\" rel=\"nofollow\"><code>eval BLOCK</code></a> to trap the error, like <code>try</code> in another language.</p>\n\n<pre><code>if( eval { $thing-&gt;isa(\"PDL\") } ) { ... }\n</code></pre>\n\n<p>If <code>$thing</code> is not an object, <code>eval</code> will trap the error and return false. If <code>$thing</code> is an object, it will call <code>isa</code> on it and return the result.</p>\n\n<p>The downside is this will trap <em>any</em> error, including an error from <code>isa</code>. Rare, but it happens. To avoid that, use <a href=\"https://metacpan.org/pod/Scalar::Util#blessed\" rel=\"nofollow\">Scalar::Util's blessed()</a> to first determine if <code>$thing</code> is an object.</p>\n\n<pre><code>use Scalar::Util qw(blessed):\n\nif( blessed $thing &amp;&amp; $thing-&gt;isa(\"PDL\") ) { ... }\n</code></pre>\n"}], "owner": {"reputation": 3991, "user_id": 291877, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fed330de1d82c824dce22767d56a5fb5?s=128&d=identicon&r=PG", "display_name": "Zhang18", "link": "https://stackoverflow.com/users/291877/zhang18"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 36852711, "answer_count": 2, "score": 1, "last_activity_date": 1461628326, "creation_date": 1461620033, "last_edit_date": 1461622693, "question_id": 36851474, "link": "https://stackoverflow.com/questions/36851474/how-can-i-check-if-a-perl-variable-is-in-pdl-format-i-e-is-a-piddle", "title": "How can I check if a Perl variable is in PDL format (i.e. is a piddle)?", "body": "<p>I'm using <a href=\"https://metacpan.org/pod/PDL\" rel=\"nofollow\">PDL</a>. If I am given variable <code>$foo</code> that can be a hash reference, an array reference, a scalar, or a piddle (which can be empty or null), how can I tell if it's a piddle?</p>\n"}, {"tags": ["perl", "yaml"], "answers": [{"comments": [{"owner": {"reputation": 24671, "user_id": 3421, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9ecd2f59de5e03ba481723637fc74fad?s=128&d=identicon&r=PG", "display_name": "Jack M.", "link": "https://stackoverflow.com/users/3421/jack-m"}, "edited": false, "score": 0, "creation_date": 1461618829, "post_id": 36850986, "comment_id": 61271322, "body": "So basically I&#39;d have to fork one of these modules and patch in code for parsing aliases (which appear to be part of YAML 1.2?  Can&#39;t say I&#39;m that familiar with reading language specs)."}, {"owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "edited": false, "score": 3, "creation_date": 1461619385, "post_id": 36850986, "comment_id": 61271607, "body": "There are Perl workarounds, for example: <a href=\"http://www.perlmonks.org/?node_id=813443\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=813443</a>"}, {"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1461619410, "post_id": 36850986, "comment_id": 61271620, "body": "If you do start with YAML::XS which is based on libyaml. Alternatively you can preprocess the file with a parser that supports merge by reading the file in and writing it back out. Except from my ruamel.yaml parser for Python that preserves the merge on roundtrip, all other parsers will &quot;unmerge&quot; the mapping and then you can read it into Perl with any of those libraries."}, {"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "reply_to_user": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "edited": false, "score": 0, "creation_date": 1461619518, "post_id": 36850986, "comment_id": 61271676, "body": "@bart Can I extend my answer with that, or do you want to post that yourself as an answer?"}, {"owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "edited": false, "score": 0, "creation_date": 1461619588, "post_id": 36850986, "comment_id": 61271714, "body": "@Anthon sure, you can extend your answer ;)"}], "tags": [], "owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "is_accepted": true, "score": 2, "last_activity_date": 1461667842, "last_edit_date": 1461667842, "creation_date": 1461618082, "answer_id": 36850986, "question_id": 36850512, "link": "https://stackoverflow.com/questions/36850512/aliases-resolved-incorrectly-in-yaml-modules/36850986#36850986", "title": "Aliases resolved incorrectly in YAML modules?", "body": "<p>That YAML and YAML::Syck do not support the <a href=\"http://yaml.org/type/merge.html\" rel=\"nofollow\">merge key language-independent type</a> is logical, as these parsers implement YAML 1.0 and that extension was proposed for YAML 1.1.</p>\n\n<p>The extension is not part of the YAML 1.1 specification, and e.g. libyaml, on which YAML::XS is based, does not support it on its own. Ruby, Python and JavaScrip YAML parsers, implement the merge on top of the libyaml library, something that YAML::XS doesn't seem to do.</p>\n\n<p>As @bart commented, there are some workarounds by traversing the tree after loading: <a href=\"http://www.perlmonks.org/?node_id=813443\" rel=\"nofollow\">http://www.perlmonks.org/?node_id=813443</a></p>\n"}], "owner": {"reputation": 24671, "user_id": 3421, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9ecd2f59de5e03ba481723637fc74fad?s=128&d=identicon&r=PG", "display_name": "Jack M.", "link": "https://stackoverflow.com/users/3421/jack-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 36850986, "answer_count": 1, "score": 2, "last_activity_date": 1461667842, "creation_date": 1461616335, "question_id": 36850512, "link": "https://stackoverflow.com/questions/36850512/aliases-resolved-incorrectly-in-yaml-modules", "title": "Aliases resolved incorrectly in YAML modules?", "body": "<p>I'm trying to load a \"simple\" YAML file using Perl:</p>\n\n<pre><code>foo: &amp;baz\n  dog: cat\n  cat: rat\nbar:\n  &lt;&lt;: *baz\n  rat: cheese\n</code></pre>\n\n<p>Using <a href=\"https://metacpan.org/pod/distribution/YAML/lib/YAML.pod\" rel=\"nofollow\">YAML</a>, <a href=\"https://metacpan.org/pod/distribution/YAML-LibYAML/lib/YAML/XS.pod\" rel=\"nofollow\">YAML::XS</a>, or <a href=\"https://metacpan.org/pod/YAML::Syck\" rel=\"nofollow\">YAML::Syck</a> I'm getting unexpected output from a <a href=\"https://gist.github.com/anonymous/ddb2b11dcc5cb0a92ee0f60b652b8d99\" rel=\"nofollow\">test script</a>:</p>\n\n<pre><code>{\n  'foo' =&gt; {\n    'cat' =&gt; 'rat',\n    'dog' =&gt; 'cat'\n  },\n  'bar' =&gt; {\n    'rat' =&gt; 'cheese',\n    '&lt;&lt;' =&gt; $VAR1-&gt;{'foo'}\n  }\n}\n</code></pre>\n\n<p>In this case, <code>{bar}-&gt;{dog}</code> is <code>undef</code>.  Running the same input through <a href=\"http://www.yamllint.com/\" rel=\"nofollow\">YAML Lint</a> (or even <a href=\"https://gist.github.com/exegete46/706daabf8e36577d6e25d52502311f88\" rel=\"nofollow\">Ruby's YAML module</a>), it outputs as expected.  </p>\n\n<p>How can I get Perl to parse and output the correct format?</p>\n"}, {"tags": ["perl", "operators", "comma", "scalar-context"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1461614313, "post_id": 36849635, "comment_id": 61268800, "body": "I would guess it&#39;s a typo and should be <code>(pop(@_), pop(@_))[-1]</code> or something like that. <a href=\"http://computer-programming-forum.com/53-perl/0aa44266bcb822b5.htm\" rel=\"nofollow noreferrer\">You&#39;re not the first to be confused by this.</a>"}, {"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 1, "creation_date": 1461614492, "post_id": 36849635, "comment_id": 61268897, "body": "As the discussion at hand is about slices, I imagine they are describing <code>(foo, bar)[0]</code> as the &quot;reverse comma operator&quot;.  The choice of <code>pop()</code> in assembling the list is, at best, unfortunate."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1461614907, "post_id": 36849635, "comment_id": 61269158, "body": "@ThisSuitIsBlackNot: if the subscript is -1, it&#39;s the same result as the non-reverse comma operator that keeps the right hand side. With the subscript 0, it keeps the left hand side."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1461615179, "post_id": 36849635, "comment_id": 61269318, "body": "@briandfoy &quot;it keeps the left hand side&quot; Which is the <i>last</i> element of <code>@_</code>."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1461615240, "post_id": 36849635, "comment_id": 61269357, "body": "@ThisSuitIsBlackNot: It doesn&#39;t matter what @_ is. Whatever expression is on the left if the one that&#39;s kept."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1461615422, "post_id": 36849635, "comment_id": 61269455, "body": "@briandfoy I&#39;m aware of that. The example is misleading because it implies that calling a function <code>sub reverse_comma { return (pop(@_), pop(@_))[0] }</code> with two arguments will return the left argument, while in reality, it returns the right argument."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1461616829, "post_id": 36849635, "comment_id": 61270267, "body": "I don&#39;t think it implies that at all. It says it acts like a reverse comma operator. You created the rest of the context in a section of one liners that mostly talking about slices."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 1, "creation_date": 1461617756, "post_id": 36849635, "comment_id": 61270765, "body": "@briandfoy The use of <code>return</code> and <code>@_</code> implies (strongly, since <code>return</code> can only be used in subroutines, <code>eval</code>, and <code>do FILE</code>) that it&#39;s the body of a function. It&#39;s not a huge leap to try out the implied function, and then be confused when it returns exactly the same result as the comma operator. It would be much better if the example were simply <code>(&#39;foo&#39;, &#39;bar&#39;)[0]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1461614627, "post_id": 36849961, "comment_id": 61268969, "body": "Wow, its not every day you get to speak directly to the author! :) What exactly would a &quot;reverse comma operator&quot; be then?  How is the code  in the example <code>return (pop(@foo), pop(@foo))[0];</code> supposed to be used to work as expected?"}, {"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 0, "creation_date": 1461614725, "post_id": 36849961, "comment_id": 61269035, "body": "Just opened my copy of 4th edition and see the example on lines 15 &amp; 16."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1461614854, "post_id": 36849961, "comment_id": 61269127, "body": "The slice keeps the left side, but since the left <code>pop</code> was evaluated first, you&#39;re returning the last element of <code>@_</code>."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1461615394, "post_id": 36849961, "comment_id": 61269440, "body": "Okay after the last thing you added that clarifies things a little.  So it is <i>supposed to</i> act the same as the regular comma operator then?  I guess just the fact that the example calls it a &quot;reverse comma operator&quot; when it isn&#39;t actually doing the <i>reverse</i> of what the comma operator does is what is really confusing."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1461677845, "post_id": 36849961, "comment_id": 61300259, "body": "One question though?  Why wrap it in an anonymous subroutine?  That just seems over complicated. <code>my $scalar = (pop(@foo), pop(@foo))[0]</code> does in fact evaluate both <code>pop</code>s and still returns the result of the first <code>pop</code>."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1461678113, "post_id": 36849961, "comment_id": 61300473, "body": "I merely wanted to preserve the <code>return</code> since it&#39;s in the book."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 5, "last_activity_date": 1461621535, "last_edit_date": 1461621535, "creation_date": 1461614388, "answer_id": 36849961, "question_id": 36849635, "link": "https://stackoverflow.com/questions/36849635/perl-reverse-comma-operator-example-from-the-book-programming-perl-4th-editi/36849961#36849961", "title": "Perl &quot;reverse comma operator&quot; (Example from the book Programming Perl, 4th Edition)", "body": "<p>It's a cute and clever example, but thinking too hard about it distracts from its purpose. That section of the book is showing off list slices. Anything beyond slicing a list, no matter what is in the list, is not germane to the purpose of the examples.</p>\n\n<hr>\n\n<p>You're only on page 82 of a very big book (we literally couldn't fit any more pages in because we were at the limit of the binding method), so there's not much we could throw at you. Among the other list slices examples, there this clever one that I wouldn't use in real code. That's the curse of contrived examples though.</p>\n\n<p>But let's say there were a reverse comma operator. It would have to evaluate both side of the comma. Many answers go right for \"just return the first thing\". That's not the feature though. You have to visit every expression even though you keep one of them.</p>\n\n<p>Consider this much much advanced version with a series of anonymous subroutines that I immediately dereference, each of which prints something then returns a result:</p>\n\n<pre><code>use v5.10;\n\nmy $scalar = (\n    sub { say \"First\"; 35 } -&gt; (),\n    sub { say \"wantarray is \", 0+wantarray } -&gt; (),\n    sub { say \"Second\"; 27 } -&gt; (),\n    sub { say \"Third\"; 137 } -&gt; ()\n    );\n</code></pre>\n\n<p>The parens are there only for precedence since the assignment operator binds more tightly than the comma operator. There's no list here, even though it looks like there is one.</p>\n\n<p>The output shows that Perl evaluated each even though it kept on the last one:</p>\n\n<pre><code>First\nwantarray is 0\nSecond\nThird\nScalar is [137]\n</code></pre>\n\n<p>The poorly-named <a href=\"http://perldoc.perl.org/functions/wantarray.html\" rel=\"nofollow\">wantarray</a> built-in returns false, noting that the subroutine thinks it is in scalar context.</p>\n\n<p>Now, suppose that you wanted to flip that around so it still evaluates every expression but keeps the first one. You can use a literal list access:</p>\n\n<pre><code>my $scalar = (\n    sub { say \"First\"; 35 } -&gt; (),\n    sub { say \"wantarray is \", 0+wantarray } -&gt; (),\n    sub { say \"Second\"; 27 } -&gt; (),\n    sub { say \"Third\"; 137 } -&gt; ()\n    )[0];\n</code></pre>\n\n<p>With the addition on the subscription, the righthand side is now a list and I pull out the first item. Notice that the second subroutine thinks it is in list context now. I get the result of the first subroutine:</p>\n\n<pre><code>First\nwantarray is 1\nSecond\nThird\nScalar is [35]\n</code></pre>\n\n<p>But, let's put this in a subroutine. I still need to call each subroutine even though I won't use the results of the other ones:</p>\n\n<pre><code>my $scalar = reverse_comma(\n    sub { say \"First\"; 35 },\n    sub { say \"wantarray is \", 0+wantarray },\n    sub { say \"Second\"; 27 },\n    sub { say \"Third\"; 137 }\n    );\n\nsay \"Scalar is [$scalar]\";\n\nsub reverse_comma { ( map { $_-&gt;() } @_ )[0] }\n</code></pre>\n\n<p>Or, would I use the results of the other ones? What if I did something slightly different. I'll add a side effect of setting <code>$last</code> to the evaluated expression:</p>\n\n<pre><code>use v5.10;\n\nmy $last;\n\nmy $scalar = reverse_comma(\n    sub { say \"First\"; 35 },\n    sub { say \"wantarray is \", 0+wantarray },\n    sub { say \"Second\"; 27 },\n    sub { say \"Third\"; 137 }\n    );\n\nsay \"Scalar is [$scalar]\";\nsay \"Last is [$last]\";\n\nsub reverse_comma { ( map { $last = $_-&gt;() } @_ )[0] }\n</code></pre>\n\n<p>Now I see the feature that makes the scalar comma interesting. It evaluates all the expressions, and some of them might have side effects:</p>\n\n<pre><code>First\nwantarray is 0\nSecond\nThird\nScalar is [35]\nLast is [137]\n</code></pre>\n\n<p>It's not a huge secret that tchrist is handy with shell scripts. The Perl to csh converter was basically his inbox (or comp.lang.perl). You'll see some shell like idioms popping up in his examples. Something like that trick to swap two numerical values with one statement:</p>\n\n<pre><code>use v5.10;\n\nmy $x = 17;\nmy $y = 137;\n\nsay \"x =&gt; $x, y =&gt; $y\";\n\n$x = (\n    $x = $x + $y,\n    $y = $x - $y,\n    $x - $y,\n    );\n\nsay \"x =&gt; $x, y =&gt; $y\";\n</code></pre>\n\n<p>The side effects are important there.</p>\n\n<p>So, back to the Camel, we have an example of where the thing that has the side effect is the <a href=\"http://perldoc.perl.org/functions/pop.html\" rel=\"nofollow\">pop</a> array operator:</p>\n\n<pre><code>use v5.10;\n\nmy @foo = qw( g h j k );\n\nsay \"list: @foo\";\n\nmy $scalar = sub { return ( pop(@foo), pop(@foo) )[0] }-&gt;();\n\nsay \"list: @foo\";\n</code></pre>\n\n<p>This shows off that each expression on either side of all the commas are evaluated. I threw in the subroutine wrapper since we didn't show a complete example:</p>\n\n<pre><code>list: g h j k\nlist: g h\n</code></pre>\n\n<p>But, none of this was the point of that section, which was indexing into a list literal. The point of the example was not to return a different result than the other examples or Perl features. It was to return the same thing assuming the comma operator acted differently. The section is about list slices and is showing off list slices, so the stuff in the list wasn't the important part.</p>\n"}, {"tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 8, "last_activity_date": 1461620640, "last_edit_date": 1461620640, "creation_date": 1461614479, "answer_id": 36849987, "question_id": 36849635, "link": "https://stackoverflow.com/questions/36849635/perl-reverse-comma-operator-example-from-the-book-programming-perl-4th-editi/36849987#36849987", "title": "Perl &quot;reverse comma operator&quot; (Example from the book Programming Perl, 4th Edition)", "body": "<p>It's a bad example, and should be forgotten.</p>\n\n<p>What it's demonstrating is simple:</p>\n\n<ul>\n<li><p>Normally, if you have a sequence of expressions separated by commas in scalar context, that can be interpreted an instance of the comma operator, which evaluates to the last thing in the sequence.</p></li>\n<li><p>However, if you put that sequence in parentheses and stick <code>[0]</code> at the end, it turns that sequence into a list and takes its first element, e.g.</p>\n\n<pre><code>my $x = (1, 2, 3)[0];\n</code></pre>\n\n<p>For some reason, the book calls this the \"reverse comma operator\". This is a misnomer; it's just a list that's having its first element taken.</p></li>\n</ul>\n\n<p>The book is confusing matters <em>further</em> by using the <code>pop</code> function twice in the arguments. These are evaluated from left to right, so the first <code>pop</code> evaluates to <code>\"three\"</code> and the second one to <code>\"two\"</code>.</p>\n\n<p>In any case: Don't ever use either the comma or \"reverse comma\" operators in real code. Both are likely to prove confusing to future readers.</p>\n"}, {"comments": [{"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1461618373, "post_id": 36850621, "comment_id": 61271081, "body": "This misses the important point that the comma operator evaluates all expressions. To keep that, you&#39;d have to go through all of the arguments then return the first one. But, it&#39;s not even close to the point of the example. It was just a list slice example."}, {"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "reply_to_user": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 2, "creation_date": 1461622490, "post_id": 36850621, "comment_id": 61273014, "body": "@briandfoy, huh?  Perl 5 doesn&#39;t have lazy evaluation.  The expressions got evaluated when they were placed into <code>@_</code>.  The sub doesn&#39;t need to do anything."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1461622623, "post_id": 36850621, "comment_id": 61273072, "body": "I think your example, by using simple scalar values, obscures the point of a scalar comma example with functions."}], "tags": [], "owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "is_accepted": false, "score": 2, "last_activity_date": 1461617679, "last_edit_date": 1461617679, "creation_date": 1461616697, "answer_id": 36850621, "question_id": 36849635, "link": "https://stackoverflow.com/questions/36849635/perl-reverse-comma-operator-example-from-the-book-programming-perl-4th-editi/36850621#36850621", "title": "Perl &quot;reverse comma operator&quot; (Example from the book Programming Perl, 4th Edition)", "body": "<p>Let's make the examples more similar.</p>\n\n<p>The comma operator:</p>\n\n<pre><code>$scalar = (\"one\", \"two\", \"three\");\n# $scalar now contains \"three\"\n</code></pre>\n\n<p>The reverse comma operator:</p>\n\n<pre><code>$scalar = (\"one\", \"two\", \"three\")[0];\n# $scalar now contains \"one\"\n</code></pre>\n\n<p>It's a \"reverse comma\" because <code>$scalar</code> gets the result of the first expression, where the normal comma operator gives the last expression.  (If you know anything about Lisp, it's like the difference between <code>progn</code> and <code>prog1</code>.)</p>\n\n<p>An implementation of the \"reverse comma operator\" as a subroutine would look something like this:</p>\n\n<pre><code>sub reverse_comma {\n    return shift @_;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1461636542, "last_edit_date": 1461636542, "creation_date": 1461635546, "answer_id": 36854009, "question_id": 36849635, "link": "https://stackoverflow.com/questions/36849635/perl-reverse-comma-operator-example-from-the-book-programming-perl-4th-editi/36854009#36854009", "title": "Perl &quot;reverse comma operator&quot; (Example from the book Programming Perl, 4th Edition)", "body": "<p>An ordinary comma will evaluate its operands and then return the value of the right-hand operand</p>\n\n<pre><code>my $v = $a, $b\n</code></pre>\n\n<p>sets <code>$v</code> to the value of <code>$b</code></p>\n\n<p>For the purpose of demonstrating list slices, the Camel is proposing some code that behaves like the comma operator but instead evaluates its operands and then return the value of the <em>left-hand</em> operand</p>\n\n<p>Something like that can be done with a list slice, like this</p>\n\n<pre><code>my $v = ($a, $b)[0]\n</code></pre>\n\n<p>which sets <code>$v</code> to the value of <code>$a</code></p>\n\n<p>That's all there is to it really. The book isn't trying to suggest that there should be a <em>reverse comma</em> subroutine, it is simply considering the problem of evaluating two expressions in order and returning the first. The order of evaluation is relevant only when the two expressions have side effects, which is why the example in the book uses <code>pop</code>, which changes the array as well as returning a value</p>\n\n<p>The imaginary problem is this</p>\n\n<blockquote>\n  <p>Suppose I want a subroutine to remove the last two elements of an array, and then return the value of what used to be the last element</p>\n</blockquote>\n\n<p>Ordinarily that would require a temporary variable, like this</p>\n\n<pre><code>my $last = pop @foo;\npop @foo;\nreturn $last;\n</code></pre>\n\n<p>But <em>as an example of a list slice</em> the code suggests that this would also work</p>\n\n<pre><code># A \"reverse comma operator\".\nreturn (pop(@foo), pop(@foo))[0];\n</code></pre>\n\n<p>Please understand that this <em>isn't</em> a recommendation. There are a few ways to do this. Another single-statement way is</p>\n\n<pre><code>return scalar splice @foo, -2;\n</code></pre>\n\n<p>but that doesn't use a list slice, which is the topic of that section of the book. In reality I doubt if the book's authors would propose anything other than the simple solution with the temporary variable. It is purely an example of what a list slice can do</p>\n\n<p>I hope that helps</p>\n"}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 1, "accepted_answer_id": 36849987, "answer_count": 4, "score": 4, "last_activity_date": 1461676042, "creation_date": 1461613287, "last_edit_date": 1461638761, "question_id": 36849635, "link": "https://stackoverflow.com/questions/36849635/perl-reverse-comma-operator-example-from-the-book-programming-perl-4th-editi", "title": "Perl &quot;reverse comma operator&quot; (Example from the book Programming Perl, 4th Edition)", "body": "<p>I'm reading \"<a href=\"http://shop.oreilly.com/product/9780596004927.do\" rel=\"nofollow\">Programming Perl</a>\" and ran into a strange example that does not seem to make sense.  The book describes how the comma operator in Perl will return only the last result when used in a scalar context.</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code># After this statement, $stuff = \"three\"\n$stuff = (\"one\", \"two\", \"three\");\n</code></pre>\n\n<p>The book then gives this example of a \"reverse comma operator\" a few pages later (page 82)</p>\n\n<pre><code># A \"reverse comma operator\".\nreturn (pop(@foo), pop(@foo))[0];\n</code></pre>\n\n<p>However to me this doesn't seem to be reverse at all..?</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code># After this statement, $stuff = \"three\"\n$stuff = reverse_comma(\"one\", \"two\", \"three\");\n\n# Implementation of the \"reverse comma operator\"\nsub reverse_comma {\n    return (pop(@_), pop(@_))[0];\n}\n</code></pre>\n\n<p>How is this in any way reverse of the normal comma operator? The results are the same, not reversed!</p>\n\n<p><em>Here is a <a href=\"https://library.oreilly.com/book/9780596004927/programming-perl/92.xhtml?ref=toc\" rel=\"nofollow\">link</a> to the exact page. The example is near the bottom.</em></p>\n"}, {"tags": ["json", "perl"], "answers": [{"comments": [{"owner": {"reputation": 8726, "user_id": 597305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2ad05a19a937275934237503fc77d887?s=128&d=identicon&r=PG", "display_name": "Bill Ruppert", "link": "https://stackoverflow.com/users/597305/bill-ruppert"}, "edited": false, "score": 1, "creation_date": 1461610661, "post_id": 36848253, "comment_id": 61266620, "body": "You can drop all of those arrows after the first one, as in print $vsConfig-&gt;{_embedded}{&#39;rh:doc&#39;}[0]{enabled}"}, {"owner": {"reputation": 23906, "user_id": 459233, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/23bfb69cb2c8a6a028d2376b12db4a73?s=128&d=identicon&r=PG", "display_name": "Tudor Constantin", "link": "https://stackoverflow.com/users/459233/tudor-constantin"}, "reply_to_user": {"reputation": 8726, "user_id": 597305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2ad05a19a937275934237503fc77d887?s=128&d=identicon&r=PG", "display_name": "Bill Ruppert", "link": "https://stackoverflow.com/users/597305/bill-ruppert"}, "edited": false, "score": 0, "creation_date": 1461611433, "post_id": 36848253, "comment_id": 61267056, "body": "I know, I use the arrows as a personal preference - they give me the impression that the code is more readable"}, {"owner": {"reputation": 9140, "user_id": 1007727, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cb37f072befac0347afe7b51050e23e?s=128&d=identicon&r=PG", "display_name": "Deano", "link": "https://stackoverflow.com/users/1007727/deano"}, "edited": false, "score": 0, "creation_date": 1461616927, "post_id": 36848253, "comment_id": 61270328, "body": "Thanks for your help, I just want to know why you had to specify {0}?"}, {"owner": {"reputation": 8726, "user_id": 597305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2ad05a19a937275934237503fc77d887?s=128&d=identicon&r=PG", "display_name": "Bill Ruppert", "link": "https://stackoverflow.com/users/597305/bill-ruppert"}, "reply_to_user": {"reputation": 9140, "user_id": 1007727, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cb37f072befac0347afe7b51050e23e?s=128&d=identicon&r=PG", "display_name": "Deano", "link": "https://stackoverflow.com/users/1007727/deano"}, "edited": false, "score": 1, "creation_date": 1461619822, "post_id": 36848253, "comment_id": 61271836, "body": "@Deano Actually, it is [0], rh:doc is an array with one element.  You might want to loop through that array if you expect more than one element."}], "tags": [], "owner": {"reputation": 23906, "user_id": 459233, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/23bfb69cb2c8a6a028d2376b12db4a73?s=128&d=identicon&r=PG", "display_name": "Tudor Constantin", "link": "https://stackoverflow.com/users/459233/tudor-constantin"}, "is_accepted": true, "score": 4, "last_activity_date": 1461611684, "last_edit_date": 1461611684, "creation_date": 1461608591, "answer_id": 36848253, "question_id": 36848219, "link": "https://stackoverflow.com/questions/36848219/perl-json-how-to-get-value-of-key/36848253#36848253", "title": "Perl JSON how to get value of key", "body": "<p>Assuming that <code>$vsConfig</code> is a hash ref obtained after the json was decoded:</p>\n\n<pre><code>print $vsConfig-&gt;{_embedded}-&gt;{'rh:doc'}-&gt;[0]-&gt;{enabled}\n</code></pre>\n\n<p>The whole code, including the part that decodes the json:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse JSON qw/decode_json/;\n\nmy $json = q|\n{  \n   \"_id\":\"sensor1\",\n   \"_returned\":1,\n   \"_embedded\":{  \n      \"rh:doc\":[  \n         {  \n            \"_id\":{  },\n            \"enabled\":\"true\"\n         }\n      ]\n   }\n}\n|;\n\nmy $vsConfig = decode_json( $json );\n\nprint $vsConfig-&gt;{_embedded}-&gt;{'rh:doc'}-&gt;[0]-&gt;{enabled};\n</code></pre>\n"}], "owner": {"reputation": 9140, "user_id": 1007727, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cb37f072befac0347afe7b51050e23e?s=128&d=identicon&r=PG", "display_name": "Deano", "link": "https://stackoverflow.com/users/1007727/deano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1038, "favorite_count": 1, "accepted_answer_id": 36848253, "answer_count": 1, "score": 2, "last_activity_date": 1461616957, "creation_date": 1461608436, "last_edit_date": 1461616957, "question_id": 36848219, "link": "https://stackoverflow.com/questions/36848219/perl-json-how-to-get-value-of-key", "title": "Perl JSON how to get value of key", "body": "<p>I have the following json output and i'm trying to get the value of enabled </p>\n\n<pre><code>{  \n   \"_id\":\"sensor1\",\n   \"_returned\":1,\n   \"_embedded\":{  \n      \"rh:doc\":[  \n         {  \n            \"_id\":{  },\n            \"enabled\":\"true\"\n         }\n      ]\n   }\n}\n</code></pre>\n\n<p>I have tried the following</p>\n\n<pre><code>foreach my $x ( @{$vsConfig}) {\n    print $x;\n}\n</code></pre>\n\n<p>I'm not sure why its not returning anything, isn't it a hash reference? </p>\n\n<p>Thanks </p>\n"}, {"tags": ["arrays", "json", "perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1461602819, "post_id": 36846147, "comment_id": 61262065, "body": "You should check out the <a href=\"https://metacpan.org/pod/JSON::XS\" rel=\"nofollow noreferrer\">JSON::XS</a> module. There are plenty of examples that describe exactly what you&#39;re trying to do. <code>my $aref = decode_json($str); print &quot;$_-&gt;{id}: $_-&gt;{name}\\n&quot; for @$aref;</code>"}, {"owner": {"reputation": 53, "user_id": 6252422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7199950dfa94b1031a9ed4e778933729?s=128&d=identicon&r=PG&f=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6252422/emma"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1461603664, "post_id": 36846147, "comment_id": 61262533, "body": "can you tell me that how can i print the values in view files?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1461604106, "post_id": 36846147, "comment_id": 61262754, "body": "I don&#39;t understand what you&#39;re asking."}, {"owner": {"reputation": 53, "user_id": 6252422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7199950dfa94b1031a9ed4e778933729?s=128&d=identicon&r=PG&f=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6252422/emma"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1461604383, "post_id": 36846147, "comment_id": 61262923, "body": "i mean if i pass the above array of hashes into view file (.tt) file then how can i use /get the values to display that in field"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1461604487, "post_id": 36846147, "comment_id": 61262990, "body": "You&#39;ll need to <a href=\"https://stackoverflow.com/posts/36846147/edit\">edit</a> your question to include some code."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1461608688, "creation_date": 1461608688, "answer_id": 36848280, "question_id": 36846147, "link": "https://stackoverflow.com/questions/36846147/decode-list-of-json-objects-to-array-of-hashes-in-perl/36848280#36848280", "title": "decode list of JSON objects to array of hashes in perl", "body": "<pre><code>use JSON::XS qw( decode_json );\n\nmy $data = decode_json($json);\n\n$template-&gt;process(..., { data =&gt; $data }, ...)\n   or die(...);\n</code></pre>\n\n<p>Template:</p>\n\n<pre><code>[% FOREACH rec IN data %]\n   [% rec.id %]: [% rec.name %]\n[% END %]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 0, "last_activity_date": 1461650696, "creation_date": 1461650696, "answer_id": 36856472, "question_id": 36846147, "link": "https://stackoverflow.com/questions/36846147/decode-list-of-json-objects-to-array-of-hashes-in-perl/36856472#36856472", "title": "decode list of JSON objects to array of hashes in perl", "body": "<pre><code>use JSON qw(from_json);\n\n# The JSON module likes to die on errors\nmy $json_data = eval { return from_json($json); };\ndie \"$@ while reading JSON\" if $@; # Replace by your error handling\ndie \"JSON top level is no array\" unless ref($json_data) eq 'ARRAY'; # Replace by your error handling\n\nfor my $hashref (@{$json_data}) {\n    print $hashref-&gt;{name}.\"\\n\";\n    print $hashref-&gt;{id}.\"\\n\";\n}\n</code></pre>\n\n<p>The error handling is obviously optional depending on your usage case. One-time or manual scripts may just die while production-level scripts should have a proper error handling.</p>\n\n<p>The <a href=\"http://search.cpan.org/perldoc?JSON\" rel=\"nofollow\">JSON</a> module is a wrapper for <a href=\"http://search.cpan.org/perldoc?JSON::PP\" rel=\"nofollow\">JSON::PP</a> and <a href=\"http://search.cpan.org/perldoc?JSON::XS\" rel=\"nofollow\">JSON::XS</a>. It selects the module available on the local system. JSON::XS is faster, but might not be installed. JSON::PP is pure Perl (no external C/C++ libraries) and part of the Perl core.</p>\n\n<p>The <code>for</code> line <a href=\"http://perldoc.perl.org/perlref.html#Making-References\" rel=\"nofollow\">dereferences the <em>Array-reference</em></a> representing your top level JSON array. Each item should be a <em>Hash-reference</em>. Follow the links for more information on each topic.</p>\n"}, {"tags": [], "owner": {"reputation": 139, "user_id": 4689109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/57465452d55d6c7a7bc58830a7c46fac?s=128&d=identicon&r=PG&f=1", "display_name": "Shaista", "link": "https://stackoverflow.com/users/4689109/shaista"}, "is_accepted": true, "score": 0, "last_activity_date": 1462204553, "creation_date": 1462204553, "answer_id": 36986604, "question_id": 36846147, "link": "https://stackoverflow.com/questions/36846147/decode-list-of-json-objects-to-array-of-hashes-in-perl/36986604#36986604", "title": "decode list of JSON objects to array of hashes in perl", "body": "<p>you can simply do like</p>\n\n<pre><code>use JSON qw(encode_json decode_json);\n\nmy $JSON = [{   \"name\" : \"Theodor Nelson\",\n        \"id\": \"_333301\",\n        \"address\": \"Hello_world },\n        {   \"name\": \"Morton Heilig\",\n        \"id\": \"_13204\",\n        \"address\": \"Welcome\"}]\n\nmy $decoded = decode_json $JSON;\n\nreturn template 'yourtemplate', {\n    options =&gt;  $decoded,\n        ..,\n        ..}\n</code></pre>\n\n<p>and in view file you can access it as <code>option.id</code> and <code>option.name</code> or <code>option.address</code> or whatever is required in FOREACH loop.</p>\n"}], "owner": {"reputation": 53, "user_id": 6252422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7199950dfa94b1031a9ed4e778933729?s=128&d=identicon&r=PG&f=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6252422/emma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4297, "favorite_count": 0, "accepted_answer_id": 36986604, "answer_count": 3, "score": 3, "last_activity_date": 1462204553, "creation_date": 1461601892, "question_id": 36846147, "link": "https://stackoverflow.com/questions/36846147/decode-list-of-json-objects-to-array-of-hashes-in-perl", "title": "decode list of JSON objects to array of hashes in perl", "body": "<p>I'm a newbie to Perl,I want to parse the following JSON into array of hashes,(map method will be preferred)</p>\n\n<pre><code>[\n    {   \"name\" : \"Theodor Nelson\",\n        \"id\": \"_333301\",\n        \"address\": \"Hello_world\"\n    },\n    {   \"name\": \"Morton Heilig\",\n        \"id\": \"_13204\",\n        \"address\": \"Welcome\"\n     }\n    ]\n</code></pre>\n\n<p>then wants to print only \"</p>\n\n<blockquote>\n  <p>name</p>\n</blockquote>\n\n<p>and </p>\n\n<blockquote>\n  <p>id</p>\n</blockquote>\n\n<p>'s values in foreach loop. \nany kind of help will be appreciated.</p>\n"}, {"tags": ["html", "perl", "tomcat7", "cgi"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 1, "creation_date": 1461600758, "post_id": 36845758, "comment_id": 61260901, "body": "The problem is with the server, not the Perl. It is sending the script as a static file instead of executing it."}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1461601280, "post_id": 36845758, "comment_id": 61261170, "body": "Is Perl installed? Does the Tomcat path include the Perl executable?"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1461603287, "post_id": 36845758, "comment_id": 61262308, "body": "Is your filepath correct?  Looks like it should be <code>&#47;cgi-bin&#47;cgi</code> with no extension relative to web root dir."}, {"owner": {"reputation": 49, "user_id": 6242418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d8172afb998e3a1bb9c374095cc7e4?s=128&d=identicon&r=PG&f=1", "display_name": "NewLearner", "link": "https://stackoverflow.com/users/6242418/newlearner"}, "edited": false, "score": 0, "creation_date": 1461688133, "post_id": 36845758, "comment_id": 61308279, "body": "Thanks Jim. After adding this post I got to know that perl installed at given location was wrong so I used the right installation of it. Instead #!/usr/local/bin/perl now it is #!/usr/bin/perl but still I&#39;m getting the same issues.  About path I&#39;m using the following URL http://&lt;server_name&gt;:&lt;server_port&gt;/cgi-bin/&lt;script.cgi&gt;  Anything wrong in it?"}, {"owner": {"reputation": 49, "user_id": 6242418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d8172afb998e3a1bb9c374095cc7e4?s=128&d=identicon&r=PG&f=1", "display_name": "NewLearner", "link": "https://stackoverflow.com/users/6242418/newlearner"}, "edited": false, "score": 0, "creation_date": 1462303998, "post_id": 36845758, "comment_id": 61577812, "body": "This issue solved now. Apache tomcat is not supporting it.  So I used IHS which is supporting it."}], "owner": {"reputation": 49, "user_id": 6242418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d8172afb998e3a1bb9c374095cc7e4?s=128&d=identicon&r=PG&f=1", "display_name": "NewLearner", "link": "https://stackoverflow.com/users/6242418/newlearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 302, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1461600665, "creation_date": 1461600665, "question_id": 36845758, "link": "https://stackoverflow.com/questions/36845758/cgi-perl-script-is-printing-the-script-and-htmlalong-with-content-type-text-h", "title": "CGI Perl script is printing the Script and HTML(along with &#39;content-type: text/html&#39;) string to the browser rather than rendering it. How to fix?", "body": "<p>I'm using Apache Tomcat version Version apache-tomcat-7.0.65</p>\n\n<p>My script contents are:-</p>\n\n<pre><code>#!/usr/local/bin/perl\nprint \"Content-type:text/html\\r\\n\\r\\n\";\nprint &lt;&lt;within_html;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;TESTING&lt;/title&gt;\n&lt;/head&gt;\n&lt;body bgcolor='#FFE4C4'&gt;\n&lt;h2&gt;HELLO WORLD&lt;/h2&gt;\n&lt;/body&gt;\n&lt;/html&gt;\nwithin_html\n</code></pre>\n\n<p>But I'm getting the output as follows:-</p>\n\n<pre><code>#!/usr/local/bin/perl print \"Content-type:text/html\\r\\n\\r\\n\"; print &lt;  \nHELLO WORLD\nwithin_html \n</code></pre>\n\n<p>I've enabled the servlet in web.xml as follows:-</p>\n\n<pre><code>&lt;servlet&gt;\n    &lt;servlet-name&gt;cgi&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.apache.catalina.servlets.CGIServlet&lt;/servlet-class&gt;\n    &lt;init-param&gt;\n      &lt;param-name&gt;debug&lt;/param-name&gt;\n      &lt;param-value&gt;0&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;init-param&gt;\n      &lt;param-name&gt;cgiPathPrefix&lt;/param-name&gt;\n      &lt;param-value&gt;WEB-INF/cgi&lt;/param-value&gt;\n    &lt;/init-param&gt;\n     &lt;load-on-startup&gt;5&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n\n&lt;!-- The mapping for the CGI Gateway servlet --&gt;\n&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;cgi&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/cgi-bin/*&lt;/url-pattern&gt;\n</code></pre>\n\n<p>I did add the following to context.xml as well</p>\n\n<pre><code>&lt;Context privileged=\"true\"&gt;\n</code></pre>\n\n<p>Please help me in fixing the HTML output Thanks a lot for help in advance.</p>\n"}, {"tags": ["perl", "utc"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1461601676, "post_id": 36845631, "comment_id": 61261400, "body": "The DST change happens at 2:00 a.m. Eastern time, not 2:00 a.m. UTC. The critical seconds are 2015-03-08 01:59:59 EST (UTC-05:00) == 2015-03-08 06:59:59 UTC followed by 2015-03-08 03:00:00 EDT (UTC-04:00) == 2015-03-08 07:00:00 UTC. Also, <code>localtime</code> uses the timezone you&#39;re currently in, which is not necessarily the timezone you <i>were</i> in."}, {"owner": {"reputation": 305, "user_id": 1226579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc2b48995cb9af6ff5215d099adc0ad?s=128&d=identicon&r=PG", "display_name": "kchinger", "link": "https://stackoverflow.com/users/1226579/kchinger"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1461601797, "post_id": 36845631, "comment_id": 61261469, "body": "@ThisSuitIsBlackNot Right, I understand why it&#39;s wrong, I just don&#39;t know how to fix it. And the second part isn&#39;t a concern here, the data is all generated in the eastern time zone, but a good point for a more general solution."}], "answers": [{"comments": [{"owner": {"reputation": 305, "user_id": 1226579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc2b48995cb9af6ff5215d099adc0ad?s=128&d=identicon&r=PG", "display_name": "kchinger", "link": "https://stackoverflow.com/users/1226579/kchinger"}, "edited": false, "score": 0, "creation_date": 1461604110, "post_id": 36846712, "comment_id": 61262756, "body": "Awesome, that worked. It was using the seconds since epoch as a sort of universal translation that I wasn&#39;t thinking about."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1461604145, "last_edit_date": 1461604145, "creation_date": 1461603625, "answer_id": 36846712, "question_id": 36845631, "link": "https://stackoverflow.com/questions/36845631/converting-historical-timestamps-from-utc-to-local/36846712#36846712", "title": "Converting Historical Timestamps from UTC to Local", "body": "<p><code>$utc_ts</code> isn't a local time.</p>\n\n<pre><code>my $local_tp = localtime-&gt;strptime( $utc_ts, '%Y-%m-%d %H:%M:%S' );\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>my $utc_tp = Time::Piece-&gt;strptime( $utc_ts, '%Y-%m-%d %H:%M:%S' );\n</code></pre>\n\n<hr>\n\n<p>Then there's the issue of converting to localtime.</p>\n\n<pre><code>$local_tp = $local_tp + $local_tp-&gt;tzoffset();\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>my $local_tp = localtime($utc_tp-&gt;epoch);\n</code></pre>\n\n<hr>\n\n<p>All together:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse POSIX qw( );\nuse Time::Piece;\n\nsub utc_to_local {\n    my ($utc_ts) = @_;\n    my $utc_tp = Time::Piece-&gt;strptime( $utc_ts, '%Y-%m-%d %H:%M:%S' );\n    my $local_tp = localtime($utc_tp-&gt;epoch);\n    return $local_tp-&gt;strftime('%Y-%m-%d %H:%M:%S');\n}\n\nsub local_to_utc {\n    my ($local_ts) = @_;\n    my $local_tp = Time::Piece-&gt;strptime( $local_ts, '%Y-%m-%d %H:%M:%S' );\n    my $utc_tp = gmtime($local_tp-&gt;epoch);\n    return $utc_tp-&gt;strftime('%Y-%m-%d %H:%M:%S');\n}\n\n{\n    $ENV{TZ} = 'America/Toronto';\n    POSIX::tzset();\n\n    # DST not in effect\n    my $utc = '2015-03-08 06:59:00.000';\n    my $local = utc_to_local(substr($utc, 0, -4));\n    print \"DST not in effect: utc($utc) = local($local)\\n\";\n\n    # DST not in effect\n    $utc = '2015-03-08 07:00:00.000';\n    $local = utc_to_local(substr($utc, 0, -4));\n    print \"DST not in effect: utc($utc) = local($local)\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>DST not in effect: utc(2015-03-08 06:59:00.000) = local(2015-03-08 01:59:00)\nDST not in effect: utc(2015-03-08 07:00:00.000) = local(2015-03-08 03:00:00)\n</code></pre>\n"}], "owner": {"reputation": 305, "user_id": 1226579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc2b48995cb9af6ff5215d099adc0ad?s=128&d=identicon&r=PG", "display_name": "kchinger", "link": "https://stackoverflow.com/users/1226579/kchinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 414, "favorite_count": 0, "accepted_answer_id": 36846712, "answer_count": 1, "score": 1, "last_activity_date": 1461604145, "creation_date": 1461600237, "question_id": 36845631, "link": "https://stackoverflow.com/questions/36845631/converting-historical-timestamps-from-utc-to-local", "title": "Converting Historical Timestamps from UTC to Local", "body": "<p>I have a file with timestamps that are in the past and are all in UTC. I need to convert these to Eastern Time. I've gotten close, but it messes up around the daylight savings changeover.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Time::Piece;\n\n#DST not in effect\nmy $utc = '2015-03-08 01:59:00.000';\nmy $local = utc_to_local($utc);\nprint \"DST not in effect: utc($utc) = local($local)\\n\";\n\n#DST not in effect\n$utc = '2015-03-08 02:00:00.000';\n$local = utc_to_local($utc);\nprint \"DST not in effect: utc($utc) = local($local)\\n\";\n\n\nsub utc_to_local\n{\n    my $utc_ts = $_[0]; #this has ms on right side, we want left 19 characters\n    $utc_ts = substr $utc_ts, 0, 19;\n    my $local_tp = localtime-&gt;strptime( $utc_ts, '%Y-%m-%d %H:%M:%S' );\n    $local_tp = $local_tp + $local_tp-&gt;tzoffset();\n\n    return $local_tp-&gt;strftime('%Y-%m-%d %H:%M:%S');\n}\n</code></pre>\n\n<p>As you can see, if I try 1:59 AM UTC on 3/8 and 2 AM UTC on 3/8, it thinks the change has occurred, but 2 AM UTC is only 3/7 at 9 PM. Away from the daylight savings changeover it does -5 and -4 offsets correctly. </p>\n\n<pre><code>DST not in effect: utc(2015-03-08 01:59:00.000) = local(2015-03-07 20:59:00)\nDST not in effect: utc(2015-03-08 02:00:00.000) = local(2015-03-07 22:00:00)\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1461598459, "post_id": 36844782, "comment_id": 61259452, "body": "<code>$self</code> is <code>this</code>, but perl unlike java requires explicit assignment."}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1461598438, "post_id": 36844837, "comment_id": 61259427, "body": "It might help to explain that <code>setFirstName</code> is a method and <code>$self</code> is the object invoking the method."}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 2, "last_activity_date": 1461597969, "creation_date": 1461597969, "answer_id": 36844837, "question_id": 36844782, "link": "https://stackoverflow.com/questions/36844782/perl-what-is-my-self-firstname/36844837#36844837", "title": "Perl : what is my ($self, $firstName)", "body": "<p><code>my ( $self, $firstName ) =</code> defines two variables and assigns them values from the <em>list</em> on the right hand side of the assignment operator.</p>\n\n<p><code>$self-&gt;{_firstName} =</code> treats the value of <code>$self</code> as a hashref and assigns a value to the <code>_firstName</code> key of the hash that it references.</p>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1461598738, "creation_date": 1461598738, "answer_id": 36845119, "question_id": 36844782, "link": "https://stackoverflow.com/questions/36844782/perl-what-is-my-self-firstname/36845119#36845119", "title": "Perl : what is my ($self, $firstName)", "body": "<p>This is a common way to define an accessor (getter and setter at the same time). Its name is a bit misleading, as it's not a setter only.</p>\n\n<p>It corresponds to something like</p>\n\n<pre><code>class Whatever {\n\n    private String firstName;\n\n    public String setFirstName (String newName) {\n        firstName = newName;\n        return firstName;\n    }\n\n    public String setFirstName () {\n        return firstName;\n    }\n\n}\n</code></pre>\n\n<p>To set the firstname, use</p>\n\n<pre><code>$object-&gt;setFirstName(\"name\");\n</code></pre>\n\n<p>To get it, use no arguments:</p>\n\n<pre><code>my $name = $object-&gt;setFirstName;\n</code></pre>\n"}], "owner": {"reputation": 784, "user_id": 4832134, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ad7a1c7bef47a40b0e8ed5c1deb2d200?s=128&d=identicon&r=PG&f=1", "display_name": "John Rambo", "link": "https://stackoverflow.com/users/4832134/john-rambo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 36844837, "answer_count": 2, "score": 0, "last_activity_date": 1461598738, "creation_date": 1461597816, "question_id": 36844782, "link": "https://stackoverflow.com/questions/36844782/perl-what-is-my-self-firstname", "title": "Perl : what is my ($self, $firstName)", "body": "<p>I am new to Perl language. </p>\n\n<p>Can anyone explain the following subroutine, what is the difference between <code>my ($self, $firstName)</code> and <code>$self-&gt;{_firstName}</code>, it would be helpful if you can explain by relating it with Java:</p>\n\n<pre><code>sub setFirstName {\n    my ( $self, $firstName ) = @_;\n    $self-&gt;{_firstName} = $firstName if defined($firstName);\n    return $self-&gt;{_firstName};\n}\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6260663, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-g0488QkDwJk/AAAAAAAAAAI/AAAAAAAAA5E/lhhMREJH3jc/photo.jpg?sz=128", "display_name": "paul cleetus", "link": "https://stackoverflow.com/users/6260663/paul-cleetus"}, "is_accepted": false, "score": 0, "last_activity_date": 1461749555, "creation_date": 1461749555, "answer_id": 36885792, "question_id": 36844590, "link": "https://stackoverflow.com/questions/36844590/using-driver-send-modifier-call-with-perl-seleniumremotedrive-package/36885792#36885792", "title": "using $driver-&gt;send_modifier() call with Perl Selenium::Remote::Drive package", "body": "<p>I am also facing issues with <em>send_modifier</em>, but a work around that i use for now is as follows.</p>\n\n<pre><code>use Selenium::Remote::WDKeys;\n....\nmy $element = $driver-&gt;find_element_by_id('id_of_element_to_receive_alt_x');\n$element-&gt;send_keys(KEYS-&gt;{'alt'}, 'x');\n</code></pre>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 1, "user_id": 6252036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6af04e93c1440d8d0128400410a32a9?s=128&d=identicon&r=PG&f=1", "display_name": "eibbor", "link": "https://stackoverflow.com/users/6252036/eibbor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461749555, "creation_date": 1461597292, "question_id": 36844590, "link": "https://stackoverflow.com/questions/36844590/using-driver-send-modifier-call-with-perl-seleniumremotedrive-package", "title": "using $driver-&gt;send_modifier() call with Perl Selenium::Remote::Drive package", "body": "<p>Has anyone had any luck using $driver->send_modifier()  call with Perl Selenium::Remote::Drive package? </p>\n\n<p>I am trying to perform an operation with the \"ALT + $key\", example: Alt + x  </p>\n"}, {"tags": ["perl", "hashmap", "perl-data-structures"], "comments": [{"owner": {"reputation": 41196, "user_id": 887539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5baef9617bdee6db2f534c118bcbccee?s=128&d=identicon&r=PG", "display_name": "andlrc", "link": "https://stackoverflow.com/users/887539/andlrc"}, "edited": false, "score": 0, "creation_date": 1461594333, "post_id": 36842752, "comment_id": 61256378, "body": "I&#39;m not sure completely what you are asking about, but just want to say that you can use <code>{...}</code> which will return a reference to a hash: <code>$outer{&quot;key&quot;} = { &quot;inner&quot;: &quot;hash&quot; }</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1461595944, "post_id": 36842752, "comment_id": 61257627, "body": "You&#39;re using two reference to the same hash. Create a new hash (using <code>my</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 2878, "user_id": 600360, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/t4VHw.jpg?s=128&g=1", "display_name": "Mort", "link": "https://stackoverflow.com/users/600360/mort"}, "is_accepted": true, "score": 0, "last_activity_date": 1461598010, "last_edit_date": 1461598010, "creation_date": 1461597566, "answer_id": 36844690, "question_id": 36842752, "link": "https://stackoverflow.com/questions/36842752/hash-reference-reuse-inner-hash-to-store-and-retrieve-next-values/36844690#36844690", "title": "Hash reference - Reuse inner hash to store and retrieve next values", "body": "<p>You may be new to perl, but you understand the concept of <em>pointers</em> don't you? The code <code>$outerHash{\"Master1\"} = \\%innerHash1;</code> means that \"<code>$outerHash{\"Master1\"}</code> is assigned a <em>pointer to</em> <code>%innerHash1</code>\". So what you're observing is correct and expected.</p>\n\n<p>If you want to keep recreating %innerHash and adding it to %outerHash, you will need to do one of two things:</p>\n\n<ul>\n<li>Assign by value. <code>$outerHash{\"Master1\"} = {}; %{$outerHash{\"Master1\"}} = %innerHash1;</code></li>\n<li>Only add %innerHash to %outerHash once per loop. Since %innerHash is redeclared within the loop, not outside of it, it goes out of scope every loop, but its contents will be kept in outerHash due to perl's reference counting. Depending on your perspective, this could be considered \"trying to be too clever and potentially dangerous\", but I think it's fine.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1461868287, "creation_date": 1461868287, "answer_id": 36922774, "question_id": 36842752, "link": "https://stackoverflow.com/questions/36842752/hash-reference-reuse-inner-hash-to-store-and-retrieve-next-values/36922774#36922774", "title": "Hash reference - Reuse inner hash to store and retrieve next values", "body": "<p>The \"right\" way, at least in my opinion, is by never declaring any intermediary \"innerhashes\" at all.  Just use references directly:</p>\n\n<pre><code>my %outerHash;\n$outerHash{Master1} = { key1 =&gt; 'value1', key2 =&gt; 'value2', key3 =&gt; 'value3'};\n$outerHash{Master2} = { key4 =&gt; 'value4', key5 =&gt; 'value5', key6 =&gt; 'value6'};\n$outerHash{Master3} = { key7 =&gt; 'value7', key8 =&gt; 'value8', key9 =&gt; 'value9'};\n\n# or....\nmy %outerHash2;\n$outerHash2{Master1}{key1} = 'value1';\n$outerHash2{Master1}{key2} = 'value2';\n$outerHash2{Master1}{key3} = 'value3';\n$outerHash2{Master2}{key4} = 'value4';\n$outerHash2{Master2}{key5} = 'value5';\n$outerHash2{Master2}{key6} = 'value6';\n$outerHash2{Master3}{key7} = 'value7';\n$outerHash2{Master3}{key8} = 'value8';\n$outerHash2{Master3}{key9} = 'value9';\n\n# or...\nmy %outerHash3 = (\n    Master1 =&gt; {\n        key1 =&gt; 'value1',\n        key2 =&gt; 'value2',\n        key3 =&gt; 'value3'\n    }\n    Master2 =&gt; {\n        key4 =&gt; 'value4',\n        key5 =&gt; 'value5',\n        key6 =&gt; 'value6'\n    }\n    Master3 =&gt; {\n        key7 =&gt; 'value7',\n        key8 =&gt; 'value8',\n        key9 =&gt; 'value9'\n    }\n);\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 2688673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29c1a880a69fce086310204481723faf?s=128&d=identicon&r=PG&f=1", "display_name": "user2688673", "link": "https://stackoverflow.com/users/2688673/user2688673"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 36844690, "answer_count": 2, "score": 0, "last_activity_date": 1461868287, "creation_date": 1461592708, "last_edit_date": 1461593151, "question_id": 36842752, "link": "https://stackoverflow.com/questions/36842752/hash-reference-reuse-inner-hash-to-store-and-retrieve-next-values", "title": "Hash reference - Reuse inner hash to store and retrieve next values", "body": "<p>I am new to Perl programming and have to work on Hash of Hashes. I am trying to reuse <code>innerHash</code> variables to be dynamic in nature. And I expect the inner items to be stored in <code>outerHash</code> how ever many I have added. Below is my test program snippet.</p>\n\n<pre><code>use warnings;\nsub testHash {  \n  my %outerHash = ();\n\n  my %innerHash1 = ();\n  my %innerHash2 = ();\n\n  $innerHash1{\"key1\"} = \"value1\";\n  $innerHash1{\"key2\"} = \"value2\";\n  $innerHash1{\"key3\"} = \"value3\";\n  $outerHash{\"Master1\"} = \\%innerHash1;\n\n  $innerHash2{\"key4\"} = \"value4\";\n  $innerHash2{\"key5\"} = \"value5\";\n  $innerHash2{\"key6\"} = \"value6\";\n  $outerHash{\"Master2\"} = \\%innerHash2;\n\n  #delete $innerHash1{$_};\n  %innerHash1 = ();\n  #undef %innerHash1;\n\n  $innerHash1{\"key7\"} = \"value7\";\n  $innerHash1{\"key8\"} = \"value8\";\n  $innerHash1{\"key9\"} = \"value9\";\n  $outerHash{\"Master3\"} = \\%innerHash1;\n\n  foreach $outerItem (keys %outerHash){\n    print \"\\n$outerItem: \";\n    foreach $innerItem (keys %{$outerHash{$outerItem}}){\n        print \"\\t $innerItem = $outerHash{$outerItem}{$innerItem}\";\n    }\n    print \"\\n-------------------------------------------------------\";\n  }\n  print \"\\n\";\n}\n\ntestHash;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Master3:     key8 = value8   key7 = value7   key9 = value9\n-----------------------------------------------------------------\nMaster2:     key5 = value5   key6 = value6   key4 = value4\n-----------------------------------------------------------------\nMaster1:     key8 = value8   key7 = value7   key9 = value9\n-----------------------------------------------------------------\n</code></pre>\n\n<p>I understand it's taking the newer reference of <code>innerHash1</code> while printing the items. What is the right way to have all the right elements in <code>outerHash</code>? In a real programming scenario I cannot declare <em>n</em> variables in advance.</p>\n"}, {"tags": ["perl", "content-type", "mime"], "comments": [{"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1461595128, "post_id": 36842468, "comment_id": 61257019, "body": "Is there a specific reason you need your Content-Type to fit on a single line? The format you&#39;re getting is normal for emails."}, {"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1461595260, "post_id": 36842468, "comment_id": 61257129, "body": "I agree but I seems some partners have a problem with it."}, {"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1461667044, "post_id": 36842468, "comment_id": 61292132, "body": "No other ideas than add a $mime =~ s/\\n / /g; ??"}], "answers": [{"tags": [], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "is_accepted": true, "score": 0, "last_activity_date": 1461689214, "creation_date": 1461689214, "answer_id": 36871004, "question_id": 36842468, "link": "https://stackoverflow.com/questions/36842468/perl-mimeentity-avoid-multiline-content-type/36871004#36871004", "title": "Perl MIME::Entity: Avoid multiline content-type", "body": "<p>Got info from developer. It is not possible. So I think the substitution above is the best way.</p>\n"}], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 36871004, "answer_count": 1, "score": 0, "last_activity_date": 1461689214, "creation_date": 1461592016, "question_id": 36842468, "link": "https://stackoverflow.com/questions/36842468/perl-mimeentity-avoid-multiline-content-type", "title": "Perl MIME::Entity: Avoid multiline content-type", "body": "<p>If I am using MIME::Entity and set a custom content-type, then it is multiline.</p>\n\n<pre><code>my $mime = MIME::Entity-&gt;build (Type =&gt; \"multipart/related; myid=\\\"max123\\\"; type=\\\"xml\\\";\",    \"X-Mailer\" =&gt; \"\");\n</code></pre>\n\n<p>produces</p>\n\n<pre><code>...\nContent-Length: 1111\nContent-Type: multipart/related;\n myid=\"max123\"; type=\"xml\";\n boundary=\"----------=_1461591465-23266-0\"\nContent-Transfer-Encoding: binary\n....\n</code></pre>\n\n<p>Can I make the content-type a oneliner in an easy way??</p>\n\n<p>What I would like:</p>\n\n<pre><code>Content-Length: 1111\nContent-Type: multipart/related; myid=\"max123\"; type=\"xml\"; boundary=\"----------=_1461591465-23266-0\"\nContent-Transfer-Encoding: binary\n</code></pre>\n\n<p>I am looking for an standard way (a parameter or setting) that I did not find.\nMy last resort is change the code or alter the string.</p>\n\n<p>Thanks,\nChris</p>\n"}, {"tags": ["python", "string", "perl", "file", "lowercase"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1461591134, "post_id": 36840612, "comment_id": 61253921, "body": "The Perl program basically streams, yes. If you run it without params, the loop will wait for input from the command line until you end the program or send <code>EOF</code>."}, {"owner": {"reputation": 41196, "user_id": 887539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5baef9617bdee6db2f534c118bcbccee?s=128&d=identicon&r=PG", "display_name": "andlrc", "link": "https://stackoverflow.com/users/887539/andlrc"}, "edited": false, "score": 1, "creation_date": 1461594546, "post_id": 36840612, "comment_id": 61256545, "body": "@alvas Python have <code>for line in sys.stdin:</code> which afaik will act the same as <code>while($line = &lt;STDIN&gt;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 2, "last_activity_date": 1461591368, "creation_date": 1461591368, "answer_id": 36842200, "question_id": 36840612, "link": "https://stackoverflow.com/questions/36840612/lowercasing-script-in-python-vs-perl/36842200#36842200", "title": "Lowercasing script in Python vs Perl", "body": "<p><em>Is the Perl lowercase.perl different from the Python lowercase.py?</em></p>\n\n<p>The Python file takes filenames for input and output. The Perl file does streaming (e.g. may be used in <code>some_command | your_perl_script.pl | some_other command</code>).</p>\n\n<p><em>Does it stream the input and lowercase it as it outputs? Or does it read the whole file like the Python's lowercase.py?</em></p>\n\n<pre><code>while(&lt;STDIN&gt;) {\n</code></pre>\n\n<p>walks through your input line by line. As long as your input contains \\n (default line break, may be changed by <a href=\"http://perldoc.perl.org/perlvar.html#%24INPUT_RECORD_SEPARATOR\" rel=\"nofollow\">setting $/</a>). This is streaming.</p>\n\n<p><em>Instead of reading in a whole file, is there a way to stream the input into Python and output the lowered case byte by byte or char by char?</em></p>\n\n<p>Probably yes, but I don't know Python :(</p>\n"}, {"tags": [], "owner": {"reputation": 333, "user_id": 4599315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f835cccc9b30da2c288d1f273d2ee48?s=128&d=identicon&r=PG&f=1", "display_name": "jason", "link": "https://stackoverflow.com/users/4599315/jason"}, "is_accepted": false, "score": 1, "last_activity_date": 1461593382, "last_edit_date": 1495540027, "creation_date": 1461593382, "answer_id": 36843040, "question_id": 36840612, "link": "https://stackoverflow.com/questions/36840612/lowercasing-script-in-python-vs-perl/36843040#36843040", "title": "Lowercasing script in Python vs Perl", "body": "<p>In the example the only difference is how the data is accessed. One is by opening a file (the python version) the other is by <a href=\"https://en.wikipedia.org/wiki/Pipeline_%28Unix%29\" rel=\"nofollow noreferrer\">piping</a> i/o to the program (perl version). Either language can access the data by either method.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/4429966/how-to-make-a-python-script-pipeable-in-bash\">Examples working</a> with stdin/stdout in python: </p>\n"}, {"tags": [], "owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "is_accepted": false, "score": 3, "last_activity_date": 1461981115, "creation_date": 1461981115, "answer_id": 36949863, "question_id": 36840612, "link": "https://stackoverflow.com/questions/36840612/lowercasing-script-in-python-vs-perl/36949863#36949863", "title": "Lowercasing script in Python vs Perl", "body": "<p>Slightly off topic (depending on your definition of \"Perl\") but maybe of interest...</p>\n\n<pre><code>perl6 -e  ' .lc.say for \"infile.txt\".IO.lines ' &gt; lowered.txt\n</code></pre>\n\n<p>This neither processes \"byte by byte\" nor \"whole file\" but \"line by line\". <code>.lines</code> creates a lazy list so you will not use a ton of memory if your file is large.  The file is presumed to be text (meaning you get <code>Str</code>'s rather than <code>Buf</code>'s of bytes when you read) and the encoding defaults to \"Unicode\" - meaning <code>open</code> will try to figure out what UTF is used and if it can't it will presume <code>UTF-8</code>. Details <a href=\"https://doc.perl6.org/routine/open#Encoding_options\" rel=\"nofollow\">here</a>. </p>\n\n<p>By default line endings are <code>chomp</code>'ed as you read and put back on by <code>say</code> - if the processing requirements prohibit that, you can pass the boolean, named parameter <code>:chomp</code> to <code>.lines</code> (and use <code>.print</code> rather than <code>.say</code>) ;</p>\n\n<pre><code>$ perl6 -e  ' .lc.print for \"infile.txt\".IO.lines(:!chomp) ' &gt; lowered.txt\n</code></pre>\n\n<p>You can avoid the IO redirection and do it all in perl6 but this <em>will</em> read the whole file in as one <code>Str</code>;</p>\n\n<pre><code>$ perl6 -e  ' \"lowered.txt\".IO.spurt: \"infile.txt\".IO.slurp.lc '\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 4485964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa7bccd56d0bf7241a4706601d23542c?s=128&d=identicon&r=PG", "display_name": "Denis Shatov", "link": "https://stackoverflow.com/users/4485964/denis-shatov"}, "is_accepted": false, "score": 7, "last_activity_date": 1462208139, "creation_date": 1462208139, "answer_id": 36987626, "question_id": 36840612, "link": "https://stackoverflow.com/questions/36840612/lowercasing-script-in-python-vs-perl/36987626#36987626", "title": "Lowercasing script in Python vs Perl", "body": "<p>Python 3.x equivalent for your Perl code may look as follows:</p>\n\n<pre><code>#!/usr/bin/env python3.4\nimport sys\n\nfor line in sys.stdin:\n    print(line[:-1].lower(), file=sys.stdout)\n</code></pre>\n\n<p>It reads stdin line-by-line and could be used in shell pipeline</p>\n"}, {"tags": [], "owner": {"reputation": 536, "user_id": 4739229, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-b1EdfH3K1UQ/AAAAAAAAAAI/AAAAAAAAABM/ZK3DsBP-ELI/photo.jpg?sz=128", "display_name": "Mike Bessonov", "link": "https://stackoverflow.com/users/4739229/mike-bessonov"}, "is_accepted": false, "score": 0, "last_activity_date": 1462316828, "creation_date": 1462316828, "answer_id": 37015848, "question_id": 36840612, "link": "https://stackoverflow.com/questions/36840612/lowercasing-script-in-python-vs-perl/37015848#37015848", "title": "Lowercasing script in Python vs Perl", "body": "<p>The Python program will attempt to read the whole input file. The call of <code>read()</code> without an argument will read till EOF, see <a href=\"https://docs.python.org/2/library/io.html#io.BufferedIOBase\" rel=\"nofollow\">the io module documentation</a>.</p>\n\n<p>There is a small bug as well, <code>fout</code> should be opened in the <code>\"w\"</code> mode.</p>\n\n<p>As mentioned by @denis-shatov, it is possible to write a Python script equivalent to the Perl one.</p>\n"}, {"comments": [{"owner": {"reputation": 93695, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1462502645, "post_id": 37016012, "comment_id": 61673174, "body": "Thank you for going way out to explain the differences and give examples!!"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1506656139, "last_edit_date": 1506656139, "creation_date": 1462317902, "answer_id": 37016012, "question_id": 36840612, "link": "https://stackoverflow.com/questions/36840612/lowercasing-script-in-python-vs-perl/37016012#37016012", "title": "Lowercasing script in Python vs Perl", "body": "<p>There seem to be two interleaved issues here and I address that first. For how to make both Perl and Python use either invocation with a <em>very</em> similar behavior see the second part of the post.</p>\n\n<p><strong>Short:</strong> They differ in <em>how</em> they do I/O but both work line-by-line, and Python code is easily changed to allow the same command-line invocation as Perl code. Also, both can be written so to allow input either from file or from standard input stream.</p>\n\n<hr>\n\n<p>(1) &nbsp; Both of your solutions are \"streaming,\" in the sense that they both process input line-by-line. Perl code reads from <code>STDIN</code> while Python code gets data from a file, but they both get a line at a time. In that sense they are comparable in efficiency for large files.</p>\n\n<p>A standard way to both read and write files line-by-line in Python is </p>\n\n<pre><code>with open('infile', 'r') as fin, open('outfile', 'w') as fout:\n    fout.write(fin.read().lower())\n</code></pre>\n\n<p>See, for example, these SO posts on <a href=\"https://stackoverflow.com/questions/16669428/process-very-large-20gb-text-file-line-by-line\">processing a very large file</a> and <a href=\"https://stackoverflow.com/questions/16604826/python-read-write-text-file\">read-and-write files</a>.  The way your read the file seems idiomatic for line-by-line processing, see for example SO posts on <a href=\"https://stackoverflow.com/questions/8009882/how-to-read-large-file-line-by-line-in-python\">reading large-file line-by-line</a>, on <a href=\"https://stackoverflow.com/questions/18343504/preferred-file-line-by-line-read-idiom-in-python\">idiomatic line-by-line reading</a> and another one on <a href=\"https://stackoverflow.com/questions/11555468/how-should-i-read-a-file-line-by-line-in-python\">line-by-line reading</a>.</p>\n\n<p>Change the first open here to your <code>io.open</code> to directly take the first argument from the command line as the file name, and add modes as needed.</p>\n\n<p>(2) &nbsp; The command line with both input and output redirection that you show is a shell feature</p>\n\n<pre><code>./program &lt; input &gt; output\n</code></pre>\n\n<p>The <code>program</code> is fed lines through the standard input stream (file descriptor 0). They are provided from the file <code>input</code> by the shell via its <code>&lt;</code>  <em>redirection</em>. From <a href=\"https://www.gnu.org/software/bash/manual/html_node/Redirections.html\" rel=\"nofollow noreferrer\">gnu bash manual</a> (see 3.6.1), where \"<em>word</em>\" stands for our \"<em>input</em>\"</p>\n\n<blockquote>\n  <p>Redirection of input causes the file whose name results from the expansion of word to be opened for reading on file descriptor n, or the standard input (file descriptor 0) if n is not specified. </p>\n</blockquote>\n\n<p>Any program can be written to do that, ie. act as a <em>filter</em>. &nbsp;For Python you can use</p>\n\n<pre><code>import sys   \nfor line in sys.stdin:\n    print line.lower()\n</code></pre>\n\n<p>See for example a post on <a href=\"https://stackoverflow.com/questions/1589994/how-do-i-write-a-unix-filter-in-python\">writing filters</a>. Now you can invoke it as <code>script.py &lt; input</code> in a shell. </p>\n\n<p>The code <code>print</code>s to standard output, which can then be redirected by shell using <code>&gt;</code>.  Then you get the same invocation as for the Perl script.</p>\n\n<p>I take it that the standard output redirection <code>&gt;</code> is clear in both cases.</p>\n\n<hr>\n\n<p>Finally, you can bring both to a nearly identical behavior, and allowing either invocation, in this way.</p>\n\n<p>In Perl, there is the following idiom </p>\n\n<pre><code>while (my $line = &lt;&gt;) {\n    # process $line\n}\n</code></pre>\n\n<p>The <em>diamond operator</em> <code>&lt;&gt;</code> either takes line by line from all files submitted on the command line (which are found in <code>@ARGV</code>), or it gets its lines from <code>STDIN</code> (if data is somehow piped into the script). From <a href=\"http://perldoc.perl.org/perlop.html#I%2fO-Operators\" rel=\"nofollow noreferrer\">I/O Operators in perlop</a></p>\n\n<blockquote>\n  <p>The null filehandle <code>&lt;&gt;</code> is special: it can be used to emulate the behavior of sed and awk, and any other Unix filter program that takes a list of filenames, doing the same to each line of input from all of them. Input from <code>&lt;&gt;</code> comes either from standard input, or from each file listed on the command line. Here's how it works: the first time <code>&lt;&gt;</code> is evaluated, the <code>@ARGV</code> array is checked, and if it is empty, <code>$ARGV[0]</code> is set to <code>\"-\"</code> , which when opened gives you standard input. The <code>@ARGV</code> array is then processed as a list of filenames.</p>\n</blockquote>\n\n<p>In Python you get practically the same behavior by</p>\n\n<pre><code>import fileinput\nfor line in fileinput.input():\n    # process line\n</code></pre>\n\n<p>This also goes through lines of files named  in <code>sys.argv</code>, defaulting to <code>sys.stdin</code> if list is empty.  From <a href=\"https://docs.python.org/2/library/fileinput.html\" rel=\"nofollow noreferrer\">fileinput</a> documentation</p>\n\n<blockquote>\n  <p>This iterates over the lines of all files listed in <code>sys.argv[1:]</code>, defaulting to <code>sys.stdin</code> if the list is empty. If a filename is <code>'-'</code>, it is also replaced by <code>sys.stdin</code>. To specify an alternative list of filenames, pass it as the first argument to <code>input()</code>. A single file name is also allowed.</p>\n</blockquote>\n\n<p>In both cases, if there are command-line arguments other than file names more need be done.</p>\n\n<p>With this you can use both Perl and Python scripts in either way</p>\n\n<pre><code>lowercase &lt; input &gt; output\nlowercase input   &gt; output\n</code></pre>\n\n<p>Or, for that matter, as <code>cat input | lowercase &gt; output</code>.</p>\n\n<hr>\n\n<p>All methods here read input and write output line-by-line. This may be further optimized (buffered) by the interpreter, the system, and shell's redirections. It is possible to change that so to read and/or write in smaller chunks but that would be extremely inefficient and noticeably slow down programs.</p>\n"}, {"tags": [], "owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "is_accepted": false, "score": 1, "last_activity_date": 1462395216, "creation_date": 1462395216, "answer_id": 37037814, "question_id": 36840612, "link": "https://stackoverflow.com/questions/36840612/lowercasing-script-in-python-vs-perl/37037814#37037814", "title": "Lowercasing script in Python vs Perl", "body": "<p>I see two questions here:</p>\n\n<ol>\n<li>how to lowercase text without reading in an entire file: <strong>Read it line by line</strong></li>\n<li>how to handle commandline arguments and default to stdin if none: <strong>Use <code>fileinput</code>.</strong></li>\n</ol>\n\n<p>Here's how:</p>\n\n<p>To lowercase text, just use <code>fin.readline()</code> or just iterate the file object (which reads one line at a time):</p>\n\n<pre><code>for line in fin:\n    ...\n</code></pre>\n\n<p>To handle filenames specified on the command line, with <code>stdin</code> if none, use <code>fileinput</code>. If you'll just be sending everything to <code>stdout</code>, this will be enough:</p>\n\n<pre><code>for line in fileinput.input():\n    print(line.lower(), end=\"\")\n</code></pre>\n\n<p>But if you want to lowercase a large corpus and store the result to disk, it's likely that you'll want to output each file separately. That's a little bit more work, since <code>fileinput</code> won't automatically redirect your output.  Here's one way: </p>\n\n<pre><code>currentname = None\nfor line in fileinput.input():\n    if fileinput.isfirstline():\n        if currentname and currentname != \"&lt;stdin&gt;\":  # clean up after previous file\n            fout.close()\n\n        currentname = fileinput.filename()        # Set up for new file\n        if currentname == \"&lt;stdin&gt;\":\n            fout = sys.stdout\n        else:\n            fout = open(currenttname+\"-low\", \"w\"\n    fout.write(line.lower())\n</code></pre>\n\n<p>)</p>\n\n<p>I wrote out each file <code>&lt;name&gt;</code> to <code>&lt;name&gt;-low</code>, but you can of course substitute any other approach (e.g., use the same name for output but in a different directory).</p>\n"}], "owner": {"reputation": 93695, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 563, "favorite_count": 1, "accepted_answer_id": 37016012, "answer_count": 7, "score": 11, "last_activity_date": 1506656139, "creation_date": 1461587365, "last_edit_date": 1461589717, "question_id": 36840612, "link": "https://stackoverflow.com/questions/36840612/lowercasing-script-in-python-vs-perl", "title": "Lowercasing script in Python vs Perl", "body": "<p>In Perl, to lowercase a textfile, I could do the following <a href=\"https://github.com/moses-smt/mosesdecoder/blob/master/scripts/tokenizer/lowercase.perl\"><code>lowercase.perl</code></a>:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\n\nbinmode(STDIN, \":utf8\");\nbinmode(STDOUT, \":utf8\");\n\nwhile(&lt;STDIN&gt;) {\n  print lc($_);\n}\n</code></pre>\n\n<p>And on the command line: <code>perl lowercase.perl &lt; infile.txt &gt; lowered.txt</code></p>\n\n<p>In <code>Python</code>, I could do with <code>lowercase.py</code>:</p>\n\n<pre><code>#!/usr/bin/env python\nimport io\nimport sys\n\nwith io.open(sys.argv[1], 'r', 'utf8') as fin:\n    with io.open(sys.argv[2], 'r', 'utf8') as fout:\n        fout.write(fin.read().lower())\n</code></pre>\n\n<p>And on the command line: <code>python lowercase.py infile.txt lowered.txt</code></p>\n\n<p><strong>Is the Perl <code>lowercase.perl</code> different from the Python <code>lowercase.py</code>?</strong> </p>\n\n<p><strong>Does it stream the input and lowercase it as it outputs? Or does it read the whole file like the Python's <code>lowercase.py</code>?</strong></p>\n\n<p><strong>Instead of reading in a whole file, is there a way to stream the input into Python and output the lowered case byte by byte or char by char?</strong></p>\n\n<p>Is there a way to control the command-line syntax such that it follows the Perl STDIN and STDOUT? E.g. <code>python lowercase.py &lt; infile.txt &gt; lowered.txt</code>?</p>\n"}, {"tags": ["perl", "unit-testing"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1461586475, "post_id": 36840048, "comment_id": 61250269, "body": "Please clarify what the problem is. Are you asking how to structure the unit test to avoid code duplication? You are talking about <code>process</code>, which from your previous questions I believe is a method. Why would that go into the unit test?"}, {"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1461586918, "post_id": 36840048, "comment_id": 61250559, "body": "No sorry, I just want to know how I can set up my test so that instead of being able to test one error, I can use a for loop or the like to run the tests on multiple errors. I didn&#39;t mean to bring the word process into it. I just thought that I should create a list with <code>data = [input =&gt; UNABLE_TO_PING_SWITCH_ERROR, output =&gt; &quot;Could not ping switch 192.192.0.0 in 30 seconds];</code> Would it be possible to do something like that for each error, put into an array of data and loop through it"}, {"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1461586968, "post_id": 36840048, "comment_id": 61250585, "body": "Do you get what I&#39;m trying to do? Maybe I&#39;m going the wrong way about it?"}, {"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1461588168, "post_id": 36840048, "comment_id": 61251490, "body": "oh really. Why do the constants make it tricky?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1461588198, "post_id": 36840048, "comment_id": 61251517, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/110151/discussion-between-simbabque-and-paul-russell\">continue this discussion in chat</a>."}, {"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1461675800, "post_id": 36840048, "comment_id": 61298647, "body": "@simbabque I have a question/ bad news for myself regarding the help you gave me."}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1462557362, "post_id": 36873603, "comment_id": 61702007, "body": "could we open a discussion whenever you&#39;re free? I have a few questions on the code. My funtionality test works fine, but my correctness test gives a few errors."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 1, "creation_date": 1462557415, "post_id": 36873603, "comment_id": 61702038, "body": "@PaulRussell go into the old one"}, {"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1462796627, "post_id": 36873603, "comment_id": 61772448, "body": "I&#39;ll be online most of the time for the next few days. Thanks"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1461697369, "last_edit_date": 1495539848, "creation_date": 1461697369, "answer_id": 36873603, "question_id": 36840048, "link": "https://stackoverflow.com/questions/36840048/how-would-i-modify-this-code-so-that-i-can-use-it-to-iterate-and-test-through-a/36873603#36873603", "title": "How would I modify this code so that I can use it to iterate and test through a list of errors?", "body": "<p>After a long discussion in chat, I propose the following approach to do unit testing, as well as a light restructuring of the actual code to make things a bit easier.</p>\n\n<p><strong>Changes I made</strong></p>\n\n<p>I have restructured the way the code creates the error message from a template to not use <a href=\"http://p3rl.org/Template\" rel=\"nofollow noreferrer\">Template</a>, as it was clear from <a href=\"https://stackoverflow.com/q/36771368/1331451\">your previous question</a> that it is a bit overkill. </p>\n\n<p>It now uses <a href=\"http://perldoc.perl.org/functions/sprintf.html\" rel=\"nofollow noreferrer\"><code>sprintf</code></a> with a simple pattern like <code>Timeout after %s seconds</code>. I used <code>%s</code> throughout my examples on purpose as there is never any type checking in those, but it could of course be added. The arguments for this message are passed to the constructor as a list of key/value pairs starting from the 2nd argument.</p>\n\n<pre><code>my $e = Error-&gt;new(CONSTANT, foo =&gt; 'bar');\n</code></pre>\n\n<p><strong>The example ErrorLibrary</strong></p>\n\n<p>The first argument <code>CONSTANT</code> still comes from your Error library. I have included the following simplified examples.</p>\n\n<pre><code>package ErrorList;\nuse strict;\nuse warnings;\nuse parent 'Exporter';\nuse constant {\n    ERROR_WIFI_CABLE_TOO_SHORT =&gt; {\n        category  =&gt; 'Layer 1',\n        template  =&gt; 'A WiFi cable of %s meters is too short.',\n        context   =&gt; [qw(length)],\n        fatal     =&gt; 1,\n        wiki_page =&gt; 'http://example.org',\n    },\n    ERROR_CABLE_HAS_WRONG_COLOR =&gt; {\n        category  =&gt; 'Layer 1',\n        template  =&gt; 'You cannot connect to %s using a %s cable.',\n        context   =&gt; [qw(router color)],\n        fatal     =&gt; 1,\n        wiki_page =&gt; 'http://example.org',\n    },\n    ERROR_I_AM_A_TEAPOT =&gt; {\n        category  =&gt; 'Layer 3',\n        template  =&gt; 'The device at %s is a teapot.',\n        context   =&gt; [qw(ip)],\n        fatal     =&gt; 0,\n        wiki_page =&gt; 'http://example.org',\n    },\n};\n\nour @EXPORT = qw(\n    ERROR_WIFI_CABLE_TOO_SHORT\n    ERROR_CABLE_HAS_WRONG_COLOR\n    ERROR_I_AM_A_TEAPOT\n);\n\nour @EXPORT_OK = qw(ERROR_WIFI_CABLE_TOO_SHORT);\n</code></pre>\n\n<p>The <em>context</em> is an array reference with a list of keys that are expected at construction.</p>\n\n<p><strong>The refactored (simplified) Error class</strong></p>\n\n<p>This class includes POD to explain what it does. The important methods are the constructor, <code>message</code> and <code>stringify</code>. </p>\n\n<pre><code>package Error;\nuse strict;\nuse warnings;\n\n=head1 NAME\n\nError - A handy error class\n\n=head1 SYNOPSIS\n\nuse Error;\nuse ErrorList 'ERROR_WIFI_CABLE_TOO_SHORT';\n\n    my $e = Error-&gt;new(\n        ERROR_WIFI_CABLE_TOO_SHORT,\n        timeout   =&gt; 30,\n        switch_ip =&gt; '127.0.0.1'\n    );\n    die $e-&gt;stringify;\n\n=head1 DESCRIPTION\n\nThis class can create objects from a template and stringify them into a\nlog-compatible pattern. It makes sense to use it together\nwith L&lt;ErrorList&gt;.\n\n\n=head1 METHODS\n\n=head2 new($error, %args)\n\nThe constructor takes the error definition and a list of key/value pairs\nwith context information as its arguments.\n\n...\n\n=cut\n\nsub new {\n    my ( $class, $error, %args ) = @_;\n\n    # initialize with the error data\n    my $self = $error;\n\n    # check required arguments...\n    foreach my $key ( @{ $self-&gt;{context} } ) {\n        die \"$key is required\" unless exists $args{$key};\n\n        # ... and take the ones we need\n        $self-&gt;{args}-&gt;{$key} = $args{$key};    # this could have a setter\n    }\n\n    return bless $self, $class;\n}\n\n=head2 category\n\nThis is the accessor for the category.\n\n=cut\n\nsub category {\n    return $_[0]-&gt;{category};\n}\n\n=head2 template\n\nThis is the accessor for the template.\n\n=cut\n\nsub template {\n    return $_[0]-&gt;{template};\n}\n\n=head2 fatal\n\nThis is the accessor for whether the error is fatal.\n\n=cut\n\nsub is_fatal {\n    return $_[0]-&gt;{fatal};\n}\n\n=head2 wiki_page\n\nThis is the accessor for the wiki_page.\n\n=cut\n\nsub wiki_page {\n    return $_[0]-&gt;{wiki_page};\n}\n\n=head2 context\n\nThis is the accessor for the context. The context is an array ref\nof hash key names that are required as context arguments at construction.\n\n=cut\n\nsub context {\n    return $_[0]-&gt;{context};\n}\n\n=head2 category\n\nThis is the accessor for the args. The args are a hash ref of context\narguments that are passed in as a list at construction.\n\n=cut\n\nsub args {\n    return $_[0]-&gt;{args};\n}\n\n=head2 message\n\nBuilds the message string from the template.\n\n=cut\n\nsub message {\n    my ($self) = @_;\n\n    return sprintf $self-&gt;template,\n        map { $self-&gt;args-&gt;{$_} } @{ $self-&gt;context };\n}\n\n=head2 stringify\n\nStringifies the error to a log message, including the message,\ncategory and wiki_page.\n\n=cut\n\nsub stringify {\n    my ($self) = @_;\n\n    return sprintf qq{%s : %s\\nMore info: %s}, $self-&gt;category,\n        $self-&gt;message, $self-&gt;wiki_page;\n}\n\n=head1 AUTHOR\n\nsimbabque (some guy on StackOverflow)\n\n=cut\n</code></pre>\n\n<p><strong>The actual unit tests</strong></p>\n\n<p>Now to test this, it is important to distinguish between behavior and data. The <em>behavior</em> includes all the accessors that are defined in the code, as well the more interesting subs like <code>new</code>, <code>message</code> and <code>stringify</code>.</p>\n\n<p>The first part of the test file I created for this example includes these. It creates a fake error structure <code>$example_error</code> and uses it to check that the constructor can deal with the right parameters, missing or excess parameter, that the accessors return the right stuff, and that <code>message</code> and <code>stringify</code> both create the correct content. </p>\n\n<p>Remember that those tests are mainly a safety net when changing the code (especially after a few months). If you accidentally change something in the wrong place, the tests will fail.</p>\n\n<pre><code>package main;    # something like 01_foo.t\nuse strict;\nuse warnings;\nuse Test::More;\nuse Test::Exception;\nuse LWP::Simple 'head';\n\nsubtest 'Functionality of Error' =&gt; sub {\n    my $example_error = {\n        category  =&gt; 'Connection Error',\n        template  =&gt; 'Could not ping switch %s in %s seconds.',\n        context   =&gt; [qw(switch_ip timeout)],\n        fatal     =&gt; 1,\n        wiki_page =&gt; 'http://example.org',\n    };\n\n    # happy case\n    {\n        my $e = Error-&gt;new(\n            $example_error,\n            timeout   =&gt; 30,\n            switch_ip =&gt; '127.0.0.1'\n        );\n        isa_ok $e, 'Error';\n\n        can_ok $e, 'category';\n        is $e-&gt;category, 'Connection Error',\n            q{... and it returns the correct value};\n\n        can_ok $e, 'template';\n        is $e-&gt;template, 'Could not ping switch %s in %s seconds.',\n            q{... and it returns the correct values};\n\n        can_ok $e, 'context';\n        is_deeply $e-&gt;context, [ 'switch_ip', 'timeout' ],\n            q{... and it returns the correct values};\n\n        can_ok $e, 'is_fatal';\n        ok $e-&gt;is_fatal, q{... and it returns the correct values};\n\n        can_ok $e, 'message';\n        is $e-&gt;message, 'Could not ping switch 127.0.0.1 in 30 seconds.',\n            q{... and the message is correct};\n\n        can_ok $e, 'stringify';\n        is $e-&gt;stringify,\n            \"Connection Error : Could not ping switch 127.0.0.1 in 30 seconds.\\n\"\n            . \"More info: http://example.org\",\n            q{... and stringify contains the right message};\n    }\n\n    # not enough arguments\n    throws_ok( sub { Error-&gt;new( $example_error, timeout =&gt; 1 ) },\n        qr/switch_ip/, q{Creating without switch_ip dies} );\n\n    # too many arguments\n    lives_ok(\n        sub {\n            Error-&gt;new(\n                $example_error,\n                timeout   =&gt; 1,\n                switch_ip =&gt; 2,\n                foo       =&gt; 3\n            );\n        },\n        q{Creating with too many arguments lives}\n    );\n\n};\n</code></pre>\n\n<p>There are some specific test cases missing. In case you use a metric tool like <a href=\"http://p3rl.org/Devel::Cover\" rel=\"nofollow noreferrer\">Devel::Cover</a> it is worth noting that full coverage does not mean all the possible cases are covered.</p>\n\n<p><strong>Tests for your error data quality</strong></p>\n\n<p>Now the second part that is worth covering in this example is the correctness of the error templates in ErrorLibrary. Someone might accidentally mix up something later, or there might be a new placeholder added to a message, but not to the context array.</p>\n\n<p>The following test code would ideally be placed in its own file and only be run when you are done working on a feature, but for illustration purposes this just continues after the above code block, hence the two first-level <code>subtest</code>s.</p>\n\n<p>The main part of your question was about the list of test cases. I consider this to be very important. You want your test code to be clean, easy to read and even easier to maintain. Test often doubles as documentation, and nothing is more annoying then changing code, and then trying to figure out how the tests work so you can update them. So always remember this:</p>\n\n<h1>Tests are production code too!</h1>\n\n<p>Now let's take a look at the tests for the errors.</p>\n\n<pre><code>subtest 'Correctness of ErrorList' =&gt; sub {\n\n    # these test cases contain all the errors from ErrorList\n    my @test_cases = (\n        {\n            name =&gt; 'ERROR_WIFI_CABLE_TOO_SHORT',\n            args =&gt; {\n                length =&gt; 2,\n            },\n            message =&gt; 'A WiFi cable of 2 meters is too short.',\n        },\n        {\n            name =&gt; 'ERROR_CABLE_HAS_WRONG_COLOR',\n            args =&gt; {\n                router =&gt; 'foo',\n                color  =&gt; 'red',\n            },\n            message =&gt; 'You cannot connect to foo using a red cable.',\n        },\n        {\n            name =&gt; 'ERROR_I_AM_A_TEAPOT',\n            args =&gt; {\n                ip =&gt; '127.0.0.1',\n            },\n            message =&gt; 'The device at 127.0.0.1 is a teapot.',\n        },\n    );\n\n    # use_ok 'ErrorList'; # only use this line if you have files!\n    ErrorList-&gt;import;    # because we don't have a file ErrorList.pm\n                          # in the file system\n    pass 'ErrorList used correctly';    # remove if you have files\n\n    foreach my $t (@test_cases) {\n        subtest $t-&gt;{name} =&gt; sub {\n\n            # because we need to use a variable to get to a constant\n            no strict 'refs';\n\n            # create the Error object from the test data\n            # will also fail if the name was not exported by ErrorList\n            my $e;\n            lives_ok(\n                sub { $e = Error-&gt;new( &amp;{ $t-&gt;{name} }, %{ $t-&gt;{args} } ) },\n                q{Error can be created} );\n\n            # and see if it has the right values\n            is $e-&gt;message, $t-&gt;{message},\n                q{... and the error message is correct};\n\n            # use LWP::Simple to check if the wiki page link is not broken\n            ok head( $e-&gt;wiki_page ), q{... and the wiki page is reachable};\n        };\n    }\n};\n\ndone_testing;\n</code></pre>\n\n<p>It basically has an array of test cases, with one case for each of the possible error constants that get exported by ErrorLibrary. It has the name, which is used to load the right error and to identify the test case in the TAP output, the required arguments to run the test, and the expected final output. I only included <em>message</em> to keep it short.</p>\n\n<p>In case an error template name gets modified in ErrorLibrary (or removed) without changing the text, the <code>lives_ok</code> around the object instantiation will fail because that name was not exported. That's a nice plus.</p>\n\n<p>It will not, however, catch if a new error has been added without a test case. An approach for that would be to look at the symbol table in the <code>main</code> namespace, but that's a bit too advanced for the scope of this answer.</p>\n\n<p>What it also does is use <a href=\"http://p3rl.org/LWP::Simple\" rel=\"nofollow noreferrer\">LWP::Simple</a> to do a <code>HEAD</code> HTTP request to each wiki URL to see if those are reachable. That also has the nice benefit that if you run it when making a build it acts a bit like a monitoring tool.</p>\n\n<p><strong>Bringing it all together</strong></p>\n\n<p>Finally, here is the TAP output, when run without <code>prove</code>.</p>\n\n<pre><code>    # Subtest: Functionality of Error\n    ok 1 - An object of class 'Error' isa 'Error'\n    ok 2 - Error-&gt;can('category')\n    ok 3 - ... and it returns the correct value\n    ok 4 - Error-&gt;can('template')\n    ok 5 - ... and it returns the correct values\n    ok 6 - Error-&gt;can('context')\n    ok 7 - ... and it returns the correct values\n    ok 8 - Error-&gt;can('is_fatal')\n    ok 9 - ... and it returns the correct values\n    ok 10 - Error-&gt;can('message')\n    ok 11 - ... and the message is correct\n    ok 12 - Error-&gt;can('stringify')\n    ok 13 - ... and stringify contains the right message\n    ok 14 - Creating without switch_ip dies\n    ok 15 - Creating with too many arguments lives\n    1..15\nok 1 - Functionality of Error\n    # Subtest: Correctness of ErrorList\n    ok 1 - ErrorList used correctly\n        # Subtest: ERROR_WIFI_CABLE_TOO_SHORT\n        ok 1 - Error can be created\n        ok 2 - ... and the error message is correct\n        ok 3 - ... and the wiki page is reachable\n        1..3\n    ok 2 - ERROR_WIFI_CABLE_TOO_SHORT\n        # Subtest: ERROR_CABLE_HAS_WRONG_COLOR\n        ok 1 - Error can be created\n        ok 2 - ... and the error message is correct\n        ok 3 - ... and the wiki page is reachable\n        1..3\n    ok 3 - ERROR_CABLE_HAS_WRONG_COLOR\n        # Subtest: ERROR_I_AM_A_TEAPOT\n        ok 1 - Error can be created\n        ok 2 - ... and the error message is correct\n        ok 3 - ... and the wiki page is reachable\n        1..3\n    ok 4 - ERROR_I_AM_A_TEAPOT\n    1..4\nok 2 - Correctness of ErrorList\n1..2\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 36873603, "answer_count": 1, "score": 0, "last_activity_date": 1461697369, "creation_date": 1461585829, "last_edit_date": 1461586460, "question_id": 36840048, "link": "https://stackoverflow.com/questions/36840048/how-would-i-modify-this-code-so-that-i-can-use-it-to-iterate-and-test-through-a", "title": "How would I modify this code so that I can use it to iterate and test through a list of errors?", "body": "<p>This is just an example of one of the tests I run on an error. I want to edit this so that I can loop through a list of errors. Would I put these errors in to a hash and create a for loop to iterate through them. I'm not sure exactly how it's done.\nI will display the test and the error library below. Just need a small example to get me going.</p>\n\n<p>Test file:</p>\n\n<pre><code>use lib('./t/lib/');\nuse Test::More tests =&gt; 3;\nuse ASC::Builder:Error;\n#########################################################################################################\n##############  test for new() method in Error.pm - Test Case: HASH  ####################################\n#########################################################################################################\n\n\n\n# error hash\nmy $error_hash = UNABLE_TO_PING_SWITCH_ERROR;\n\n# error hash is passed into new and an error object is outputted\nmy $error_in = ASC::Builder::Error-&gt;new($error_hash);\n\n# checks to see if the output object from new is an Error object\nisa_ok($error_in, 'ASC::Builder::Error');\n\n# checking that object can call the message() method\ncan_ok( $error_in, 'message');\n\n\n# checks to see if the output message matches the message contained in the error hash(correct)\nis($error_in-&gt;message(),( $error_hash-&gt;{message} ), 'Returns correct error message');\n</code></pre>\n\n<p>ErrorLibrary.pm</p>\n\n<pre><code>package ASC::Builder::ErrorLibrary;\n\nuse strict;\nuse warnings;\nuse parent 'Exporter';\n\n# list of export error messages\nour @EXPORT_OK = qw/\n\nINCORRECT_CABLING_ERROR\nUPDATE_IMAGE_ERROR\nUNABLE_TO_PING_SWITCH_ERROR\n/;  \n\n# error message list\n\nuse constant {\n    # wiki link included as a variable in this example\n    INCORRECT_CABLING_ERROR =&gt; {\n        code =&gt; \"INCORRECT_CABLING_ERROR\",\n        errorNum =&gt; 561,\n        category =&gt; 'Cabling Error',\n        message =&gt; \"ToR cabling is not correct at T1.The uplinks must be cabled to exactly one t1 device group\",\n        tt =&gt; { template =&gt; 'disabled'},\n        fatal =&gt; 1,\n        wiki_page =&gt;'http://w.server-build.com/index.phpBuilder/ErrorCodes/INCORRECT_CABLING_ERROR',\n    },\n\n    UPDATE_IMAGE_ERROR =&gt; {\n        code =&gt; \"UPDATE_IMAGE_ERROR\",\n        errorNum =&gt; 556,\n        category =&gt; 'Switch Error',\n        message =&gt; \"Cannot determine switch model\",\n        tt =&gt; { template =&gt; 'disabled'},\n        fatal =&gt; 1,\n        wiki_page =&gt;'http://www.server-build.com/index.php/NetMgmt/Builder/ErrorCodes/UPDATE_IMAGE_ERROR',\n    },\n\n    UNABLE_TO_PING_SWITCH_ERROR =&gt; {\n        code =&gt; \"UNABLE_TO_PING_SWITCH_ERROR\",\n        errorNum =&gt; 727,\n        category =&gt; 'Switch Error',\n        message =&gt; \"Could not ping switch [% switch_ip %] in [% timeout %] seconds.\",\n        tt =&gt; {template =&gt; 'disabled'},\n        fatal =&gt; 1,\n        wiki_page =&gt; 'http://www.server-build.com/index.php/Builder/ErrorCodes/UNABLE_TO_PING_SWITCH_ERROR',\n    },\n\n    UNKNOWN_CLIENT_CERT_ID_ERROR =&gt; {\n        code =&gt; \"UNKNOWN_CLIENT_CERT_ID_ERROR\",\n        errorNum =&gt; 681,\n        category =&gt; 'Services Error',\n        message =&gt; \"Unknown client certificate id: [% cert_id %]\",\n        tt =&gt; { template =&gt; 'disabled'},\n        fatal =&gt; 1,\n        wiki_page =&gt;'http://www.server-build.com/index.php/Builder/ErrorCodes/UNKNOWN_CLIENT_CERT_ID_ERROR',\n    },\n\n\n# add errors to this library    \n};\n\n\n1;\n</code></pre>\n\n<p>I'm just not sure how to create my list. should I create of a list of with input , process and outputs to test against. I'm a bit confused.</p>\n"}, {"tags": ["xml", "perl", "xml-simple"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462574138, "post_id": 36840003, "comment_id": 61709441, "body": "There&#39;s a reason <code>XML::Simple</code> is <a href=\"http://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\">discouraged</a>. Stick with <code>XML::Twig</code> <code>XML::LibXML</code>."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1461594775, "post_id": 36841041, "comment_id": 61256736, "body": "Have you seen the massive antipathy towards <code>XML::Simple</code>? I&#39;m surprised you haven&#39;t been flooded with answers that tell you to look at <a href=\"https://metacpan.org/pod/XML::Simple\" rel=\"nofollow noreferrer\">the module&#39;s documentation</a> which says <i>&quot;You really don&#39;t want to use this module in new code&quot;</i>. Please try <a href=\"https://metacpan.org/pod/XML::Twig\" rel=\"nofollow noreferrer\">XML::Twig</a> or <a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow noreferrer\">XML::LibXML</a> and save yourself some tears"}, {"owner": {"reputation": 115, "user_id": 1196666, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bef201ddb928b0762cb776cc38ad8f53?s=128&d=identicon&r=PG", "display_name": "Streuner", "link": "https://stackoverflow.com/users/1196666/streuner"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461594989, "post_id": 36841041, "comment_id": 61256913, "body": "In my typical projects I use XML::LibXML by myself. In this case I just adopted the project from a colleague ;) I was wondering if there are any other solutions to achieve this and as I mentioned in my questions, I&#39;m not forced to use XML::Simple."}], "tags": [], "owner": {"reputation": 115, "user_id": 1196666, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bef201ddb928b0762cb776cc38ad8f53?s=128&d=identicon&r=PG", "display_name": "Streuner", "link": "https://stackoverflow.com/users/1196666/streuner"}, "is_accepted": true, "score": 0, "last_activity_date": 1461588412, "creation_date": 1461588412, "answer_id": 36841041, "question_id": 36840003, "link": "https://stackoverflow.com/questions/36840003/perl-xmlsimple-suppressempty-for-xsinil-elements-without-content/36841041#36841041", "title": "Perl XML::Simple: SuppressEmpty for xsi:nil-Elements without content?", "body": "<p>Well I found a solution for my problem by myself, but this only works for my specific case, because I don't have any attributes I need. If so, you can change the line</p>\n\n<pre><code>my $xmlHash = XMLin($xmlIn, SuppressEmpty =&gt; '');\n</code></pre>\n\n<p>to</p>\n\n<pre><code>my $xmlHash = XMLin($xmlIn, NoAttr =&gt; 1, SuppressEmpty =&gt; '');\n</code></pre>\n\n<p>This will cut off all the attributes and return an empty string like a regular empty Element.</p>\n\n<p>As mentioned before, this will only work if you don't need any attributes from the xml. If you do need them, this won't work.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1462574397, "last_edit_date": 1495535632, "creation_date": 1462574397, "answer_id": 37082419, "question_id": 36840003, "link": "https://stackoverflow.com/questions/36840003/perl-xmlsimple-suppressempty-for-xsinil-elements-without-content/37082419#37082419", "title": "Perl XML::Simple: SuppressEmpty for xsi:nil-Elements without content?", "body": "<p>In <code>XML::Twig</code>:</p>\n\n<pre><code>use XML::Twig;\nmy $xmlIn =\n  '&lt;MyXml&gt;&lt;SomeNumber&gt;123&lt;/SomeNumber&gt;&lt;EmptyOne/&gt;&lt;NullableElement xsi:nil=\"true\"&gt;&lt;/NullableElement&gt;&lt;/MyXml&gt;';\n\nprint XML::Twig-&gt;parse($xmlIn)-&gt;get_xpath( '//NullableElement', 0 )-&gt;text, \"\\n\";\n</code></pre>\n\n<p><code>XML::Simple</code>: <a href=\"https://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\">Why is XML::Simple &quot;Discouraged&quot;?</a></p>\n\n<p>It just isn't worth using, as it's a road to brittle code. </p>\n"}], "owner": {"reputation": 115, "user_id": 1196666, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bef201ddb928b0762cb776cc38ad8f53?s=128&d=identicon&r=PG", "display_name": "Streuner", "link": "https://stackoverflow.com/users/1196666/streuner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 1, "accepted_answer_id": 36841041, "answer_count": 2, "score": -1, "last_activity_date": 1462574397, "creation_date": 1461585723, "question_id": 36840003, "link": "https://stackoverflow.com/questions/36840003/perl-xmlsimple-suppressempty-for-xsinil-elements-without-content", "title": "Perl XML::Simple: SuppressEmpty for xsi:nil-Elements without content?", "body": "<p>I'm struggling with XML::Simple in Perl and nullable Elements. </p>\n\n<p>So this is my example-XML:</p>\n\n<pre><code>&lt;MyXml&gt;\n    &lt;SomeNumber&gt;123&lt;/SomeNumber&gt;\n    &lt;EmptyOne/&gt;\n    &lt;NullableElement xsi:nil=\"true\"&gt;&lt;/NullableElement&gt;\n&lt;/MyXml&gt;\n</code></pre>\n\n<p>If I read this with <em>XMLin</em> and <em>SuppressEmpty => 1</em> I'll get an empty string for the <strong>EmptyOne</strong>, but a Hash with <em>xsi:nil=\"true\"</em> for the <strong>NullableElement</strong>. My questions is, how can I tell the XMLin to ignore the xsi:nil-Content and just give me an empty string or undef? Is this even possible with XML::Simple or should I switch to Lib::XML?</p>\n\n<p>Here some code to see the result:</p>\n\n<pre><code>use XML::Simple;\nuse Data::Dumper;\n\nmy $xmlIn = '&lt;MyXml&gt;&lt;SomeNumber&gt;123&lt;/SomeNumber&gt;&lt;EmptyOne/&gt;&lt;NullableElement xsi:nil=\"true\"&gt;&lt;/NullableElement&gt;&lt;/MyXml&gt;';\nmy $xmlHash = XMLin($xmlIn, SuppressEmpty =&gt; '');\n\nprint Dumper($xmlHash);\n</code></pre>\n"}, {"tags": ["perl", "filesystems"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1461582566, "post_id": 36838487, "comment_id": 61247630, "body": "You can also check if a string <code>$x</code> has a prefix <code>$y</code>, using <code>$x =~ &#47;^\\Q$y&#47;</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1461583777, "post_id": 36838487, "comment_id": 61248458, "body": "The <a href=\"http://perldoc.perl.org/functions/index.html\" rel=\"nofollow noreferrer\"><code>index</code></a> function might be handy also."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1461584431, "post_id": 36838487, "comment_id": 61248956, "body": "<a href=\"http://stackoverflow.com/questions/7283274/check-whether-a-string-contains-a-substring\" title=\"check whether a string contains a substring\">stackoverflow.com/questions/7283274/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1461585711, "creation_date": 1461585711, "answer_id": 36839997, "question_id": 36838487, "link": "https://stackoverflow.com/questions/36838487/how-to-check-if-a-path-is-a-subpath-of-an-other-in-perl/36839997#36839997", "title": "How to check if a path is a subpath of an other in perl?", "body": "<p>Well I've hacked this, but I'm not very proud of it and I hope someone comes up with something better. I've searched the CPAN but am surprised to have found nothing relevant</p>\n\n<p>My idea was to use the <code>abs2rel</code> function from <a href=\"https://metacpan.org/pod/File::Spec::Functions\" rel=\"nofollow\"><code>File::Spec::Functions</code></a>. That's fine, except that it tries too hard for this purpose and will return <code>../..</code> for <code>abs2rel('/usr', '/usr/a/b')</code>. It will also return the first value unchanged on systems that use volumes in the path</p>\n\n<p>This just wraps <code>abs2rel</code> inside a function <code>is_within</code> which rejects both of those cases, but otherwise returns the relative path (a true value) intact. That means that <code>is within('/usr', '/usr')</code> will return <code>.</code>, which is true, but you can test it for that specific case if you think a directory shouldn't contain itself</p>\n\n<p><strong><em>Note</em></strong> that this doesn't check whether the paths are to directories, nor does it check whether the paths even exist</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse File::Spec::Functions qw/ abs2rel  file_name_is_absolute  updir /;\n\nmy @pairs = (\n    [qw{ /usr      /usr/bin } ],\n    [qw{ /usr/etc  /usr/bin } ],\n    [qw{ /var      /usr/bin } ],\n    [qw{ /usr/bin  /usr/bin } ],\n);\n\nfor ( @pairs ) {\n    my ($path, $subpath) = @$_;\n    my $within = is_within($subpath, $path);\n    printf qq{\"%s\" is %swithin \"%s\"  (%s)\\n},\n            $subpath,\n            ($within ? '' : 'not '),\n            $path,\n            $within // 'undef';\n}\n\n\nsub is_within {\n    my ($path, $container) = @_;\n\n    my $a2r = abs2rel($path, $container);\n\n    return if file_name_is_absolute($a2r) or index($a2r, updir) == 0;\n\n    $a2r;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>\"/usr/bin\" is within \"/usr\"  (bin)\n\"/usr/bin\" is not within \"/usr/etc\"  (undef)\n\"/usr/bin\" is not within \"/var\"  (undef)\n\"/usr/bin\" is within \"/usr/bin\"  (.)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1461612990, "creation_date": 1461612990, "answer_id": 36849552, "question_id": 36838487, "link": "https://stackoverflow.com/questions/36838487/how-to-check-if-a-path-is-a-subpath-of-an-other-in-perl/36849552#36849552", "title": "How to check if a path is a subpath of an other in perl?", "body": "<p>File::Spec and its replacement Path::Class don't touch the file system, so they don't handle case differences, and they don't down handle short vs long forms.</p>\n\n<pre><code>use Path::Class qw( dir file );\nuse Win32       qw( );\n\nsub subsumes {\n   my $dir  = dir(Win32::GetLongPathName($_[0]));\n   my $file = file(Win32::GetLongPathName($_[1]));\n   return $dir-&gt;subsumes($file);\n}\n</code></pre>\n"}], "owner": {"reputation": 393, "user_id": 2671052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vEUAs.png?s=128&g=1", "display_name": "Mayra Delgado", "link": "https://stackoverflow.com/users/2671052/mayra-delgado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 612, "favorite_count": 0, "accepted_answer_id": 36839997, "answer_count": 2, "score": 2, "last_activity_date": 1461612990, "creation_date": 1461581494, "last_edit_date": 1461584494, "question_id": 36838487, "link": "https://stackoverflow.com/questions/36838487/how-to-check-if-a-path-is-a-subpath-of-an-other-in-perl", "title": "How to check if a path is a subpath of an other in perl?", "body": "<p>there are some answers to this problem in other languages. I'm new to perl and I'm doing this (is more comparing strings than using filesystem-functions):</p>\n\n<pre><code>use File::Spec;\n\nsub has_common_prefix {\n  my ($path, $subpath) = @_;\n  $path = uc (File::Spec-&gt;canonpath($path)).\"\\\\\";\n  $subpath = uc (File::Spec-&gt;canonpath($subpath));\n\n  if ( substr($subpath, 0, length($path)) eq $path ) return 1;\n  return 0;\n};\n\nhas_common_prefix('c:\\\\/abCD/EFgh', 'C:\\abcd\\\\efgh/ijk.txt');\n</code></pre>\n\n<p>I want to know if there are better ways to do this, well more \"perlisch\" :-)</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["linux", "perl", "memory"], "comments": [{"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 2, "creation_date": 1461580669, "post_id": 36837868, "comment_id": 61246414, "body": "Why are you recreating <code>qr&#47;&#47;</code> on each line? It&#39;s entire point is to cache compiled regexp. Try <code>state $re_cache = {}; my $re = ($re_cache{$sep} &#47;&#47;= qr&#47;(?:^|$sep)(?:&quot;([^&quot;]*)&quot;|([^$sep]*))&#47;);</code>"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1461580845, "post_id": 36837868, "comment_id": 61246532, "body": "@OlegV.Volkov Could you explain what your command does please?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 1, "creation_date": 1461583092, "post_id": 36837868, "comment_id": 61247950, "body": "<a href=\"http://perldoc.perl.org/functions/state.html\" rel=\"nofollow noreferrer\"><code>state</code></a> makes a variable lexically persistent. It will always stay around for the current scope, a bit like a singleton. @Oleg&#39;s code creates a cache that stores the precompiled regex per possible separator."}, {"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 1, "creation_date": 1461583134, "post_id": 36837868, "comment_id": 61247975, "body": "It saves compiled regexp in a persistent hash with <code>$sep</code> as key, so you won&#39;t recompile regexp with any given separator more than once. <code>state</code> is perl 5.10+ feature for variables that mainain their value between leaving their scope. <code>&#47;&#47;=</code> is &quot;defined or&quot; so value will be either retrieved from hash if it is already there or intialized."}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1461583842, "post_id": 36837868, "comment_id": 61248511, "body": "@OlegV.Volkov and simbabque thanks for the explanation."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1461586234, "post_id": 36837868, "comment_id": 61250106, "body": "The <a href=\"https://metacpan.org/pod/threads\" rel=\"nofollow noreferrer\">documentation for <code>threads</code></a>  says this <i>&quot;The use of interpreter-based threads in perl is officially discouraged&quot;</i>. There is no explicit mention of memory leak problems, but I wouldn&#39;t rule it out. I recommend that you take a look at <code>fork</code> instead, specifically the nicely-wrapped <a href=\"https://metacpan.org/pod/Parallel::ForkManager\" rel=\"nofollow noreferrer\">Parallel::ForkManager</a> module"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461587010, "post_id": 36837868, "comment_id": 61250609, "body": "Your <code>csvsplit</code> should really be implemented using <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a>. It&#39;s an established module that has repeatedly been shown to handle all corner cases properly"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461587086, "post_id": 36837868, "comment_id": 61250668, "body": "@Borodin Yeah i read that, but I though i should probably be okay. If i remember correctly, it says it&#39;s because it uses heavy threads, but as i only instantiate them once i thought it would be okay. I hadn&#39;t thought about fork though, so thanks, I&#39;ll have a look."}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461587185, "post_id": 36837868, "comment_id": 61250751, "body": "@Borodin I am unable to use Text::CSV as i cannot use CPAN. For most modules i just FTP up the file, but Text::CSV used compiled code and i could not find the source."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461589554, "post_id": 36837868, "comment_id": 61252638, "body": "@123: Many people believe that they are unable to install modules from CPAN and I have never been able to fathom why that might be. Every module is available as a simple download, and <a href=\"http://cpansearch.perl.org/src/MAKAMAKA/Text-CSV-1.33/\" rel=\"nofollow noreferrer\"><code>Text::CSV</code> is here</a> and you can download it as a tar.gz <a href=\"http://search.cpan.org/CPAN/authors/id/M/MA/MAKAMAKA/Text-CSV-1.33.tar.gz\" rel=\"nofollow noreferrer\">here</a>. Every CPAN module is installed in the same simple way, which is described in <a href=\"http://perldoc.perl.org/perlmodinstall.html\" rel=\"nofollow noreferrer\">perldoc perlmodinstall</a>. <code>Text::CSV</code> is a pure-Perl module and doesn&#39;t require a C compiler"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461596304, "post_id": 36837868, "comment_id": 61257892, "body": "@Borodin Thats what i normally do. The Text::CSV i found definitely had a dependency on some compiled code though. Maybe there are different versions..."}], "answers": [{"comments": [{"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1461583715, "post_id": 36839054, "comment_id": 61248412, "body": "Please show an example of how i should use pending. Thanks for the answer. I will try it out and see if it improves the memory usage. Would the fact that i am getting output not mean that the queue was always being reduced to 0 though? Also would limiting the size of the queue mean that i would lose data ?"}], "tags": [], "owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "is_accepted": false, "score": 2, "last_activity_date": 1461583075, "creation_date": 1461583075, "answer_id": 36839054, "question_id": 36837868, "link": "https://stackoverflow.com/questions/36837868/what-is-causing-memory-to-continuously-rise-perl/36839054#36839054", "title": "What is causing memory to continuously rise perl?", "body": "<p>The reason is probably that the size of your <code>Thread::Queue</code> is unlimited. If the producer thread is faster than the consumer thread, your queue will continue to grow. So you should simply <a href=\"https://metacpan.org/pod/Thread::Queue#limit\" rel=\"nofollow\">limit the size of your queue</a>. For example, to set a limit of 1,000 queue items:</p>\n\n<pre><code>$logq-&gt;limit = 1000;\n</code></pre>\n\n<p>(The way you use the <code>pending</code> method is wrong by the way. You should only terminate if the return value is undefined.)</p>\n"}], "owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1461583075, "creation_date": 1461579841, "last_edit_date": 1592644375, "question_id": 36837868, "link": "https://stackoverflow.com/questions/36837868/what-is-causing-memory-to-continuously-rise-perl", "title": "What is causing memory to continuously rise perl?", "body": "<h3>Problem</h3>\n<p>I have created a simple perl script to read log files and process the data asynchronously.</p>\n<p>The problem i am facing is that the script appears to continuously use more memory the longer it runs. This seems to be affected by the amount of data it processes. The problem I have is that i am unable to identify what exactly is using all this memory, and whether it is a leak or something is just holding onto it.</p>\n<hr />\n<h3>Question</h3>\n<p>How can i modify the below script so that it no longer continuously consumes memory ?</p>\n<hr />\n<h3>Code</h3>\n<pre class=\"lang-perl prettyprint-override\"><code>#Multithreaded to read multiple log files at the same time.\n\nuse strict;\nuse warnings;\n\nuse threads;\nuse Thread::Queue;\nuse threads::shared;\n\nmy $logq = Thread::Queue-&gt;new();\nmy %Servers :shared;\nmy %servername :shared;\n\nsub csvsplit {\n        my $line = shift;\n        my $sep = (shift or ',');\n\n        return () unless $line;\n\n        my @cells;\n        my $re = qr/(?:^|$sep)(?:&quot;([^&quot;]*)&quot;|([^$sep]*))/;\n\n        while($line =~ /$re/g) {\n                my $value = defined $1 ? $1 : $2;\n                push @cells, (defined $value ? $value : '');\n        }\n\n        return @cells;\n}\n\n\nsub process_data\n{\n        while(sleep(1)){\n\n                if ($logq-&gt;pending())\n                {\n                        my %sites;\n                        my %returns;\n                        while($logq-&gt;pending() &gt; 0){\n                                my $data = $logq-&gt;dequeue();\n                                my @fields = csvsplit($data);\n                                $returns{$fields[$#fields - 1]}++;\n                                $sites{$fields[$#fields]}++;\n                        }\n                print &quot;counter:$_, value=\\&quot;$sites{$_}\\&quot; /&gt;\\n&quot; for (keys%sites);\n                print &quot;counter:$_, value=\\&quot;$returns{$_}\\&quot; /&gt;\\n&quot; for (keys%returns);\n                \n                }\n        }\n\n}\n\nsub read_file\n{\n        my $myFile=$_[0];\n        open(my $logfile,'&lt;',$myFile) || die &quot;error&quot;;\n        my $Inode=(stat($logfile))[1];\n        my $fileSize=(stat($logfile))[7];\n        seek $logfile, 0, 2;\n        for (;;) {\n                while (&lt;$logfile&gt;) {\n                        chomp( $_ );\n                        $logq-&gt;enqueue( $_ );\n                }\n                sleep 5;\n                if($Inode != (stat($myFile))[1] || (stat($myFile))[7] &lt; $fileSize){\n                        close($logfile);\n                        while (! -e $myFile){\n                                sleep 2;\n                        }\n                        open($logfile,'&lt;',$myFile) || die &quot;error&quot;;\n                        $Inode=(stat($logfile))[1];\n                        $fileSize=(stat($logfile))[7];\n                }\n                seek $logfile, 0, 1;\n        }\n\n}\n\n\nmy $thr1 = threads-&gt;create(\\&amp;read_file,&quot;log&quot;);\nmy $thr4 = threads-&gt;create(\\&amp;process_data);\n$thr1-&gt;join();\n$thr4-&gt;join();\n</code></pre>\n<hr />\n<h3>Obeservations and relevant info</h3>\n<p>The memory only seems to increase when the program has data to process, if i just leave it, it maintains the current memory usage.</p>\n<p>Memory only appears to increase for larger throughput and increase about half a Mb per 5 seconds for around 2000 lines in the same time.</p>\n<p>I have not included the csv as i do not think it is relevant. If you do and want me to add it please give a valid reason.</p>\n<hr />\n<h3>Specs</h3>\n<pre><code>GNU bash, version 3.2.57(1)-release (s390x-ibm-linux-gnu)\nperl, v5.10.0\n</code></pre>\n<hr />\n<p>I have looked through other questions but cannot find much of relevance. If this is a duplicate or the relevant info is in another question, feel free to mark as a dupe and ill check it out.</p>\n<p>Any more info needed just ask.</p>\n"}, {"tags": ["xml", "perl", "xml-libxml"], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1461581756, "last_edit_date": 1461581756, "creation_date": 1461580975, "answer_id": 36838290, "question_id": 36837679, "link": "https://stackoverflow.com/questions/36837679/return-values-of-two-tags-which-has-same-name-in-an-array/36838290#36838290", "title": "Return values of two tags which has same name, in an array", "body": "<p>I'm unclear why you think you had to involve <code>XML::LibXML::XPathContext</code> as there are no namespaces in the XML data that you show</p>\n\n<p>Your call</p>\n\n<pre><code>my @item = $Xpath-&gt;findnodes('/CONFIG/item');\n</code></pre>\n\n<p>returns a single <code>XML::LibXML::Element</code> object in array <code>@items</code> because there is only one <code>/CONFIG/item</code> node. But then your call</p>\n\n<pre><code>my $phone = $item[0]-&gt;findvalue('/CONFIG/item/phone');\n</code></pre>\n\n<p>ignores the context of that node because you have specified an absolute XPath expression. It rescans the document looking for all <code>/CONFIG/item/phone</code> elements and concatenates their text values, giving <code>1234578876543321</code> as you have seen</p>\n\n<p>I have found <code>find</code> and <code>findvalue</code> to be badly-implemented in this Perl module, and always rely on <code>findnodes</code>, which makes things very simple</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse XML::LibXML;\n\nmy $dom = XML::LibXML-&gt;load_xml(location =&gt; 'CONFIG.xml');\n\nprint $_-&gt;textContent, \"\\n\" for $dom-&gt;findnodes('/CONFIG/item/phone');\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>1234578\n876543321\n</code></pre>\n\n<p>If you need those values in an array, then just use <code>map</code></p>\n\n<pre><code>my @phones = map { $_-&gt;textContent } $dom-&gt;findnodes('/CONFIG/item/phone');\n</code></pre>\n"}], "owner": {"reputation": 516, "user_id": 2224218, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f7db38a8b0010381be6cde932b0f8b7b?s=128&d=identicon&r=PG", "display_name": "Subhash", "link": "https://stackoverflow.com/users/2224218/subhash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 591, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1461581972, "creation_date": 1461579291, "last_edit_date": 1461581972, "question_id": 36837679, "link": "https://stackoverflow.com/questions/36837679/return-values-of-two-tags-which-has-same-name-in-an-array", "title": "Return values of two tags which has same name, in an array", "body": "<p>My XML:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;CONFIG&gt;\n  &lt;item&gt;\n    &lt;phone&gt;1234578&lt;/phone&gt;\n    &lt;phone&gt;876543321&lt;/phone&gt;\n   &lt;/item&gt;\n&lt;/CONFIG&gt;  \n</code></pre>\n\n<p>I need to get both the numbers in an array with 2 elements.</p>\n\n<p>My Perl code:</p>\n\n<pre><code>my $xmlDoc = XML::LibXML-&gt;new-&gt;parse_file($config_file);\n$Xpath = XML::LibXML::XPathContext-&gt;new($xmlDoc);\n\nmy @item = $Xpath-&gt;findnodes('/CONFIG/item');\nmy $phone = $item[0]-&gt;findvalue('/CONFIG/item/phone');\nprint $phone\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>1234578876543321\n</code></pre>\n\n<p><code>$phone</code> contains a single string with both the numbers concatenated as a single entity</p>\n\n<p>I even tried with returning to array context, it still returns one element with both numbers concatenated</p>\n\n<p>Can you please help me get these two phone numbers separately?</p>\n"}, {"tags": ["java", "perl", "ssh"], "comments": [{"owner": {"reputation": 240678, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1461572857, "post_id": 36835328, "comment_id": 61241343, "body": "Does the ssh command run when you enter it directly (without Tomcat)? Do you get any error messages? Is passwordless SSH set up for the Tomcat user? Does the script in <code>&#47;var&#47;www</code> also exist on the server you ssh into?"}, {"owner": {"reputation": 63, "user_id": 3490447, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ffb8fef16da108a588c5d7f96c2bbe2?s=128&d=identicon&r=PG&f=1", "display_name": "Guille", "link": "https://stackoverflow.com/users/3490447/guille"}, "reply_to_user": {"reputation": 240678, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1461573656, "post_id": 36835328, "comment_id": 61241819, "body": "When I run using shell Linux, it runs perfect. Returns 0 if I run with &quot;A&quot; argument, or 192 when I run with other"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 3490447, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ffb8fef16da108a588c5d7f96c2bbe2?s=128&d=identicon&r=PG&f=1", "display_name": "Guille", "link": "https://stackoverflow.com/users/3490447/guille"}, "edited": false, "score": 1, "creation_date": 1461574478, "post_id": 36835424, "comment_id": 61242367, "body": "... I&#39;m just a ( <a href=\"http://i2.kym-cdn.com/entries/icons/original/000/010/277/069.jpg\" rel=\"nofollow noreferrer\">i2.kym-cdn.com/entries/icons/original/000/010/277/069.jpg</a> ). I just created a rsa for developer user, but no for tomcat user (who execute the .class files...)  Now, after creating RSA for tomcat user, works like a charm"}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": true, "score": 1, "last_activity_date": 1461572901, "creation_date": 1461572901, "answer_id": 36835424, "question_id": 36835328, "link": "https://stackoverflow.com/questions/36835328/execute-perl-script-from-java-tomcat-returns-ever-255-exit-code/36835424#36835424", "title": "Execute Perl script from Java tomcat returns ever 255 exit code", "body": "<p>Did you try the SSH call from the Tomcat server as the tomcat user, e.g.</p>\n\n<pre><code>ssh root@myserver.com '/usr/bin/perl /var/www/testPerl.pl A'\n</code></pre>\n\n<p>Try adding <em>-v</em> as ssh argument and capture the output to see if the ssh connection is working. Maybe you're missing RSAAuthentication (key-based instead of password-based) or something else doesn't work as it should.</p>\n\n<p>Try returning some value from Perl for debugging:</p>\n\n<pre><code>print \"I'm running (STDOUT)\\n\";\nprint STDERR \"I'm running (STDERR)\\n\";\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 3490447, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ffb8fef16da108a588c5d7f96c2bbe2?s=128&d=identicon&r=PG&f=1", "display_name": "Guille", "link": "https://stackoverflow.com/users/3490447/guille"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 706, "favorite_count": 0, "accepted_answer_id": 36835424, "answer_count": 1, "score": 0, "last_activity_date": 1461572901, "creation_date": 1461572542, "question_id": 36835328, "link": "https://stackoverflow.com/questions/36835328/execute-perl-script-from-java-tomcat-returns-ever-255-exit-code", "title": "Execute Perl script from Java tomcat returns ever 255 exit code", "body": "<p>I have a problem, I'm trying to execute a PERL script allocated on another server. If I execute the command in Linux Shell, the script run correctly. If I execute the script allocating the perl script in the same server of apache Tomcat, runs ok, but when I try to execute the script through ssh by Tomcat, always end with error code 255.</p>\n\n<p>Perl Script:</p>\n\n<pre><code>#!/usr/bin/perl\nmy $sleeptime = 10;\nsleep($sleeptime);\n\nmy $argumento=$ARGV[0];\nif ( $argumento eq \"A\" ) {\n    exit 0;\n} else {\n    exit 192;\n}\n</code></pre>\n\n<p>Now, this is the code in Java file</p>\n\n<pre><code>String command = \"ssh root@myserver.com '/usr/bin/perl /var/www/testPerl.pl A'\";\nprocess = Runtime.getRuntime().exec(command);\nprocess.waitFor();  \nif ( process.exitValue() == 0 ) {\n    System.out.println(\"Show icon ok\");\n} else {\n    System.out.println(\"Show error\");\n}\n</code></pre>\n\n<p>If I change command variable to</p>\n\n<pre><code>String command = \"/usr/bin/perl /var/www/testPerl.pl A\";\n</code></pre>\n\n<p>The return code is ok ( 0 or 192 )</p>\n\n<p>Is mandatory to execute remotely, so I can't copy the real PERL to tomcat directory. I did localy just for test.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1461568193, "post_id": 36834024, "comment_id": 61238677, "body": "What do you mean by calling these script? You could include this using use  $file in foreach loop, and call subroutines of these files."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1461568265, "post_id": 36834024, "comment_id": 61238718, "body": "Use <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">system</a>"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1461569782, "post_id": 36834024, "comment_id": 61239638, "body": "There&#39;s a <code>=</code> missing after <code>my @Scripts</code>."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1461569837, "post_id": 36834024, "comment_id": 61239669, "body": "Also, why do you need the values (&quot;This is script number...&quot;)?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 0, "creation_date": 1461574982, "post_id": 36834024, "comment_id": 61242681, "body": "@Sebastian: Please don&#39;t edit posts to include assumptions of your own. We don&#39;t really know what the OP means at this point"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1461575094, "post_id": 36834024, "comment_id": 61242750, "body": "That code looks like a hash literal being assigned to an array. It will assign six string elements to the array <code>@Scripts</code>. Although it&#39;s valid Perl, it&#39;s probably not what you meant, and it&#39;s really hard to tell what you <i>did</i> mean. Please help us out"}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461575720, "post_id": 36834024, "comment_id": 61243162, "body": "@Borodin: He said <i>I have a list of perl scripts as sample_1.pl , sample_2.pl &amp; sample_3.pl. stored in an array as</i>, that&#39;s why I did the edit. The missing &quot;=&quot; should be added anyway."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 0, "creation_date": 1461594144, "post_id": 36834024, "comment_id": 61256212, "body": "@Sebastian: No, the <code>=</code> should not be added anyway. You have no idea what the real code contains, if there even is any. It&#39;s fine to add <i>insignificant white space</i> to code, but never to rewrite its meaning"}], "answers": [{"tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": false, "score": 2, "last_activity_date": 1461568702, "creation_date": 1461568702, "answer_id": 36834207, "question_id": 36834024, "link": "https://stackoverflow.com/questions/36834024/calling-perl-scripts-from-a-perl-script-given-the-scripts-are-in-an-array/36834207#36834207", "title": "Calling Perl Scripts from a Perl script given the scripts are in an array", "body": "<pre><code>my @scripts = (\"print 'Hello, omg'\", \"print 42\");\neval $_ for @scripts\n</code></pre>\n\n<p>If you intend to do use them many times in a single script run, you'd better store compiled versions rather than source codes:</p>\n\n<pre><code>my @scripts = map eval \"sub { $_ }\", \"print 'Hello, omg'\", \"print 42\";\n$_-&gt;() for @scripts\n</code></pre>\n\n<p>It will be order of magnitude faster.</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461594445, "post_id": 36837662, "comment_id": 61256477, "body": "I&#39;m not sure how this helps. From the question I think it&#39;s far more likely that the OP intended <code>system $_ for map &quot;$_.pl&quot;, keys %Scripts</code>. Either way, you have jumped in with a speculative answer when more information is required, presumably in the hope of farming points. I wish people wouldn&#39;t do that"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1461600692, "post_id": 36837662, "comment_id": 61260877, "body": "My answer certainly wasn&#39;t posted for the purpose of collecting points. I have plenty of points, I really don&#39;t need any more. I think my answer was worth posting for two reasons - firstly it&#39;s important to clear up the confusion between arrays and hashes and secondly, it demonstrates the use of <code>system()</code> which is going to be at the heart of any answer to this question. It&#39;s true that we need more details of the contents of the array (or hash) in order to give a truly accurate answer, but I think mine is pretty close given the information that we currently have. Sorry that you don&#39;t agree."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1461579243, "creation_date": 1461579243, "answer_id": 36837662, "question_id": 36834024, "link": "https://stackoverflow.com/questions/36834024/calling-perl-scripts-from-a-perl-script-given-the-scripts-are-in-an-array/36837662#36837662", "title": "Calling Perl Scripts from a Perl script given the scripts are in an array", "body": "<p>Firstly, it's not clear whether you want to store your commands in an array or a hash. The two data structures are different in Perl. In your code, you store the commands in an array (<code>@Scripts</code>) but you initialise that array using a very hash-like syntax (<code>(key =&gt; value, ...)</code>). Your syntax will work, but it doesn't do what (I think!) you want to do. You also end up with your keys in the array, and it's hard to skip them.</p>\n\n<p>If you want to store your commands in an array, then do something like this:</p>\n\n<pre><code>my @Scripts = (\n  \"This is script number 1 \",\n  \"This is script number 2 \",\n  \"This is script number 3 \"\n);\n\nsystem($_) for @Scripts;\n</code></pre>\n\n<p>If you want to store them in a hash for some reason, then store them in a has and use a hash function to get the values you want.</p>\n\n<pre><code>my %Scripts = ( # %, not @ for a hash\n  sample_1 =&gt; \"This is script number 1 \",\n  sample_2 =&gt; \"This is script number 2 \",\n  sample_3 =&gt; \"This is script number 3 \"\n);\n\nsystem($_) for values %Scripts;\n</code></pre>\n\n<p>But note that hashes are un-ordered, so you won't be able to control the order in which your commands are executed.</p>\n"}], "owner": {"reputation": 1, "user_id": 3725394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb3df1c7cffcabe0baaa3e6d0a7ca41?s=128&d=identicon&r=PG&f=1", "display_name": "Nishant", "link": "https://stackoverflow.com/users/3725394/nishant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1461579243, "creation_date": 1461568089, "last_edit_date": 1461574936, "question_id": 36834024, "link": "https://stackoverflow.com/questions/36834024/calling-perl-scripts-from-a-perl-script-given-the-scripts-are-in-an-array", "title": "Calling Perl Scripts from a Perl script given the scripts are in an array", "body": "<p>I have a list of perl scripts as sample_1.pl , sample_2.pl &amp; sample_3.pl. stored in an array as </p>\n\n<pre><code>my @Scripts (\n     sample_1 =&gt; \"This is script number 1 \",\n     sample_2 =&gt; \"This is script number 2 \",\n     sample_3 =&gt; \"This is script number 3 \"\n)\n</code></pre>\n\n<p>Now how do I call these scripts using foreach loop</p>\n"}, {"tags": ["regex", "perl", "unicode"], "comments": [{"owner": {"reputation": 4663, "user_id": 3967089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d00715119003023d62918dcc603ca7?s=128&d=identicon&r=PG&f=1", "display_name": "Calle Dybedahl", "link": "https://stackoverflow.com/users/3967089/calle-dybedahl"}, "edited": false, "score": 6, "creation_date": 1461570163, "post_id": 36832662, "comment_id": 61239861, "body": "Which exact Perl version are you using? The perldelta manpage mentions several bugfixes for \\b{sb} in 5.22.1, and when I run your test code with that version I get sentence boundaries reported at positions 0, 10, 27, 41, 56 and 70."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "reply_to_user": {"reputation": 4663, "user_id": 3967089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d00715119003023d62918dcc603ca7?s=128&d=identicon&r=PG&f=1", "display_name": "Calle Dybedahl", "link": "https://stackoverflow.com/users/3967089/calle-dybedahl"}, "edited": false, "score": 0, "creation_date": 1461594829, "post_id": 36832662, "comment_id": 61256770, "body": "@Calle Dybedahl: Make that comment an answer. I had some problems compiling Perls 5.22.1, and the RCs for 5.24 last night."}], "answers": [{"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 4, "last_activity_date": 1461599585, "last_edit_date": 1461599585, "creation_date": 1461597274, "answer_id": 36844578, "question_id": 36832662, "link": "https://stackoverflow.com/questions/36832662/why-doesnt-perl-v5-22-find-all-the-sentence-boundaries/36844578#36844578", "title": "Why doesn&#39;t Perl v5.22 find all the sentence boundaries?", "body": "<p>Calle Dybedahl's comment gets it right (and when they turn it into an answer I'll accept that). This was a broken feature in v5.22.0, and as far as I can tell, untested. I had an issue compiling stuff the latest perls last night and ended the day with the question.</p>\n\n<p>The perl5.22.1 <em>perldelta</em> does not mention the particular changes (and \"mention\" might be too strong since it merely alludes to possible things that were wrong without enumerating them). It mentions as incompatible change with 5.20.0 (a cut and paste error?), a \"single\" exception, then more than one issue. The reference to \"sane\" made me think that all of the changes were related to the panic issue in the next subsection. The mention of \"several bugs\" with only one rt.perl.org reference made me think those bugs were related to the panic issue.</p>\n\n<blockquote>\n  <p>=head1 Incompatible Changes</p>\n  \n  <p>There are no changes intentionally incompatible with 5.20.0 other than the\n  following single exception, which we deemed to be a sensible change to make in\n  order to get the new C&lt;\\b{wb}> and (in particular) C&lt;\\b{sb}> features sane\n  before people decided they're worthless because of bugs in their Perl 5.22.0\n  implementation and avoided them in the future.\n  If any others exist, they are bugs, and we request that you submit a report.\n  See L below.</p>\n  \n  <p>=head2 Bounds Checking Constructs</p>\n  \n  <p>Several bugs, including a segmentation fault, have been fixed with the bounds\n  checking constructs (introduced in Perl 5.22) C&lt;\\b{gcb}>, C&lt;\\b{sb}>, C&lt;\\b{wb}>,\n  C&lt;\\B{gcb}>, C&lt;\\B{sb}>, and C&lt;\\B{wb}>.  All the C&lt;\\B{}> ones now match an empty\n  string; none of the C&lt;\\b{}> ones do.\n  L&lt;[perl #126319]|<a href=\"https://rt.perl.org/Ticket/Display.html?id=126319\" rel=\"nofollow\">https://rt.perl.org/Ticket/Display.html?id=126319</a>></p>\n</blockquote>\n\n<p>Additionally, <em>perlrebackslash</em>, where the new boundaries are documented, doesn't mention that they don't work in v5.22.0.</p>\n\n<p>I disregarded a possible fix because of incongruities in the <em>perldelta</em> and the prior experience I've had that new features aren't adequately (or even at all) tested in the perl source. I prematurely cut off that line of investigation and could have saved myself a couple of hours. It's certainly my fault for not getting the code running on the latest binaries, but I had become fixated on the idea that I was doing something wrong and that my code was the problem. Despite my numerous past experiences to the contrary, I wasn't entertaining thoughts (other than an update to the UCD) that <em>perl</em> was wrong.</p>\n\n<p>Now that I'm at a different machine and have a working perl-5.22.1, I see that my program works as expected in the point release. The <em>perldelta</em> could have been much better here.</p>\n"}, {"tags": [], "owner": {"reputation": 428, "user_id": 1626653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/36RNP.jpg?s=128&g=1", "display_name": "khw", "link": "https://stackoverflow.com/users/1626653/khw"}, "is_accepted": false, "score": 1, "last_activity_date": 1462407765, "creation_date": 1462407765, "answer_id": 37040301, "question_id": 36832662, "link": "https://stackoverflow.com/questions/36832662/why-doesnt-perl-v5-22-find-all-the-sentence-boundaries/37040301#37040301", "title": "Why doesn&#39;t Perl v5.22 find all the sentence boundaries?", "body": "<p>I am principally to blame for this situation, but there were others involved, so I will use the plural first person in places below.</p>\n\n<p>First, it is a typo that the perldelta for 5.22.1 says 5.20.0 when it means 5.22.0.  It mentions just the one issue, because in our minds they were just one thing, the Unicode break boundaries.</p>\n\n<p>These were added late in 5.22, and we did not realize that there were problems until after 5.22 had shipped.  And when problems started showing up, some of them proved to be bugs in the Unicode-specified algorithm, and we presumed all were such.</p>\n\n<p>But everything was tested, and I thought, extensively enough.  Recent Unicode releases have included publishing tests for various features, and 5.22.0 passed all those tests.  You can find them in lib/unicore/TestProp.pl, which is run every time 'make test' is done, exec'd by t/re/uniprops.t.  The ones in question here are called by Test_SB() (over 500) and Test_WB() (almost 1500), and each test consists of several sub-tests.  These were more tests than I would have come up with myself.</p>\n\n<p>Independently, someone reported the segfault early in the 5.23 development process.  In investigating that, I saw, through code reading, that there were other issues in the code just shipped.  The interactions are complex and not easily summarized, so the perldelta did not even try.   Both these boundary conditions require tracking the context in which boundaries may occur, often doing look-ahead and/or look-behind.  When the code is parsing through the target string, it saves the current context for the next iteration, where it will be the look-behind context, and won't have to be recalculated.  This was broken, and the context wasn't always getting saved properly.  This is why the Unicode-furnished tests all passed.  They were for short inputs, where the context breakage didn't matter.  When this had all been fixed, I was pleasantly surprised that \\b{sb} was giving results that were more what a human expected.</p>\n\n<p>The Unicode bugs are scheduled to be fixed in the next version of UAX #29, and I think we made the right decision in making \\b{wb} and \\b{sb} work in 5.22.1.</p>\n"}], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 36844578, "answer_count": 2, "score": 13, "last_activity_date": 1465346977, "creation_date": 1461562361, "last_edit_date": 1465346977, "question_id": 36832662, "link": "https://stackoverflow.com/questions/36832662/why-doesnt-perl-v5-22-find-all-the-sentence-boundaries", "title": "Why doesn&#39;t Perl v5.22 find all the sentence boundaries?", "body": "<p>This is fixed in Perl 5.22.1. I write about it in <a href=\"http://www.effectiveperlprogramming.com/2016/06/perl-v5-22-adds-fancy-unicode-word-boundaries/\" rel=\"nofollow\">Perl v5.22 adds fancy Unicode word boundaries</a>.</p>\n\n<hr />\n\n<p>Perl v5.22 added the Unicode assertions from <a href=\"http://unicode.org/reports/tr29/#SB3\" rel=\"nofollow\">TR #29</a>. I've been playing with the sentence boundary assertion, but it only seems to find the start and end of text:</p>\n\n<pre><code>use v5.22;\n\n$_ = \"See Spot. (Spot is a dog.) See Spot run. Run Spot, run!\\x{2029}New paragraph.\";\n\nwhile( m/\\b{sb}/g ) {\n    say \"Sentence boundary at \", pos;\n    }\n</code></pre>\n\n<p>The output notes sentence boundaries at the start and end of text, but not after the full stops, the sentence terminators, or the parens:</p>\n\n<pre><code>Sentence boundary at 0\nSentence boundary at 70\n</code></pre>\n\n<p>The <a href=\"http://unicode.org/cldr/utility/breaks.jsp\" rel=\"nofollow\">Unicode breaks tester</a> shows them mostly I expect them based on <a href=\"http://unicode.org/reports/tr29/#SB3\" rel=\"nofollow\">TR #29</a>.</p>\n\n<p>I couldn't find any non-trivial tests in the perl source for this feature. I'm digesting technical report to create appropriate test cases, but so far this looks like another untested and broken feature.</p>\n"}, {"tags": ["perl", "catalyst"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1461569111, "post_id": 36832614, "comment_id": 61239217, "body": "Do you mean globally for one Controller, or for the whole application?"}, {"owner": {"reputation": 41, "user_id": 5830664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y6yCS.png?s=128&g=1", "display_name": "asarch", "link": "https://stackoverflow.com/users/5830664/asarch"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462239080, "post_id": 36832614, "comment_id": 61542351, "body": "For the whole application."}], "answers": [{"tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 4, "last_activity_date": 1461563682, "creation_date": 1461563682, "answer_id": 36832968, "question_id": 36832614, "link": "https://stackoverflow.com/questions/36832614/how-do-you-change-globally-the-default-content-type-in-catalyst/36832968#36832968", "title": "How do you change globally the default content type in Catalyst?", "body": "<p>I'd do</p>\n\n<pre><code>$c-&gt;response-&gt;headers-&gt;content_type('text/plain');\n</code></pre>\n\n<p>in <em>YourApp/Controller/Root.pm sub auto</em>.</p>\n\n<p>This should run before any other controller (method) and should give a reasonable default value.</p>\n"}], "owner": {"reputation": 41, "user_id": 5830664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y6yCS.png?s=128&g=1", "display_name": "asarch", "link": "https://stackoverflow.com/users/5830664/asarch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1461568168, "creation_date": 1461562107, "last_edit_date": 1461568168, "question_id": 36832614, "link": "https://stackoverflow.com/questions/36832614/how-do-you-change-globally-the-default-content-type-in-catalyst", "title": "How do you change globally the default content type in Catalyst?", "body": "<p>I've tried with:</p>\n\n<ul>\n<li>MyApp/lib/MyApp.pm</li>\n</ul>\n\n<pre>__PACKAGE__->config(\n    ...,\n    content_type => 'application/xhtml+xml'\n);\n</pre>\n\n<p>and even with:</p>\n\n<ul>\n<li>MyApp/lib/MyApp/View/HTML.pm</li>\n</ul>\n\n<pre>\n__PACKAGE__->config(\n    ...,\n    content_type => 'application/xhtml+xml',\n);\n</pre>\n"}, {"tags": ["xml", "perl", "cdata"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1461529452, "post_id": 36828251, "comment_id": 61228076, "body": "What is your expected output from that example XML?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1461529549, "post_id": 36828251, "comment_id": 61228117, "body": "<a href=\"https://metacpan.org/pod/XML::Bare#Parsing-Limitations-Features\" rel=\"nofollow noreferrer\">XML::Bare says that it will strip</a> unneeded CDATA..."}, {"owner": {"reputation": 51, "user_id": 6102813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/934cd313f2cbac0f47d14a9e4e3bad71?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/6102813/lucas"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1461530045, "post_id": 36828251, "comment_id": 61228290, "body": "I would basically want an xml parsed without cdata"}, {"owner": {"reputation": 51, "user_id": 6102813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/934cd313f2cbac0f47d14a9e4e3bad71?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/6102813/lucas"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1461530066, "post_id": 36828251, "comment_id": 61228301, "body": "like this for example: <code>&lt;msg t=&#39;sys&#39;&gt;&lt;body action=&#39;login&#39; r=&#39;0&#39;&gt;&lt;login z=&#39;w1&#39;&gt;&lt;nick&gt;Test&lt;&#47;nick&gt;&lt;pword&gt;4c24a5558542bf35cca54d8749c78&zwnj;&#8203;de6&lt;&#47;pword&gt;&lt;&#47;login&gt;&lt;&zwnj;&#8203;&#47;body&gt;&lt;&#47;msg&gt;</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1461530637, "post_id": 36828251, "comment_id": 61228511, "body": "And how is that better than with cdata? If the data contained characters that need escaping the file will not be valid. How is that going to help stop sql injection? Maybe you should instead consider the way you treat incoming data in general."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1461533607, "post_id": 36828251, "comment_id": 61229526, "body": "Re &quot;<i>I&#39;d like to strip off the cdata tags to prevent an sql injection in my server</i>&quot;, what??? One has nothing to do with the other."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1461533945, "post_id": 36828251, "comment_id": 61229662, "body": "Are you trying to strip CDATA tags when writing XML? Or do you just want them to be transparent when reading the XML. The latter should be the default for all parsers!!! It definitely is for XML::LibXML."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461577546, "post_id": 36828251, "comment_id": 61244307, "body": "It&#39;s far from clear what the <i>SimpleXML</i> <code>LIBXML_NOCDATA</code> actually does. <a href=\"http://php.net/manual/en/libxml.constants.php\" rel=\"nofollow noreferrer\">The documentation</a> says just <i>&quot;Merge CDATA as text nodes&quot;</i>, and I hope that it would encode markup characters as character entities at the same time, but that isn&#39;t assured. The <i>only difference</i> between a CDATA node and an ordinary text node is that the contents may include markup characters. In effect it temporarily changes the markup to just <code>]]&gt;</code> which marks the end of the CDATA section. Anything you can express wihin a CDATA node may be written in an ordinary text node"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 6102813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/934cd313f2cbac0f47d14a9e4e3bad71?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/6102813/lucas"}, "edited": false, "score": 0, "creation_date": 1461530498, "post_id": 36828575, "comment_id": 61228460, "body": "What I want to do is to remove the cdata tags but conserve the values in it like the xml I posted in the comments above"}, {"owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "reply_to_user": {"reputation": 51, "user_id": 6102813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/934cd313f2cbac0f47d14a9e4e3bad71?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/6102813/lucas"}, "edited": false, "score": 0, "creation_date": 1461530926, "post_id": 36828575, "comment_id": 61228628, "body": "I&#39;ve updated the script to meet your requirements @Lucas"}], "tags": [], "owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "is_accepted": false, "score": 1, "last_activity_date": 1461530881, "last_edit_date": 1461530881, "creation_date": 1461529767, "answer_id": 36828575, "question_id": 36828251, "link": "https://stackoverflow.com/questions/36828251/stripping-cdata-tags-xml-perl/36828575#36828575", "title": "Stripping CData Tags XML Perl", "body": "<p>You can try using <code>HTML::Parser</code> like this:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse HTML::Parser;\n\nmy $xml = &lt;&lt;XML;\n&lt;msg t='sys'&gt;&lt;body action='login' r='0'&gt;&lt;login z='w1'&gt;&lt;nick&gt;&lt;![CDATA[Test]]&gt;&lt;/nick&gt;&lt;pword&gt;&lt;![CDATA[4c24a5558542bf35cca54d8749c78de6]]&gt;&lt;/pword&gt;&lt;/login&gt;&lt;/body&gt;&lt;/msg&gt;\nXML\n\nmy $parsed_xml;\n\nHTML::Parser-&gt;new(default_h =&gt; [ sub { $parsed_xml .= shift }, 'text' ],\n    xml_mode =&gt; 1,\n    marked_sections =&gt; 1,\n  )-&gt;parse($xml) or die $!;\n\nprint $parsed_xml;\n</code></pre>\n\n<p><code>marked_sections</code> parameter causes the parser to return the contents of <code>CDATA</code> section as <code>text</code>, which then is concatenated to the <code>$parsed_xml</code> variable.</p>\n"}, {"tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": true, "score": 2, "last_activity_date": 1461531710, "last_edit_date": 1461531710, "creation_date": 1461531022, "answer_id": 36828756, "question_id": 36828251, "link": "https://stackoverflow.com/questions/36828251/stripping-cdata-tags-xml-perl/36828756#36828756", "title": "Stripping CData Tags XML Perl", "body": "<p>For example the following:</p>\n\n<pre><code>use 5.014;\nuse warnings;\nuse XML::LibXML;\n\n#the input xml\nmy $str = q{&lt;msg t='sys'&gt;&lt;body action='login' r='0'&gt;&lt;login z='w1'&gt;&lt;nick&gt;&lt;![CDATA[Test]]&gt;&lt;/nick&gt;&lt;pword&gt;&lt;![CDATA[4c24a5558542bf35cca54d8749c78de6]]&gt;&lt;/pword&gt;&lt;/login&gt;&lt;/body&gt;&lt;/msg&gt;};\n\n#the parsing\nmy $dom = XML::LibXML-&gt;load_xml(\n    string =&gt; $str,\n    no_cdata =&gt; 1,  #strip CDATA\n);\n\n#nice-print the parsed xml\nsay $dom-&gt;toString(2);\n\n#print the \"nick\" and pword\nsay \"the nick  is ==\", $dom-&gt;find( '//nick' )-&gt;string_value, \"==\";\nsay \"the pword is ==\", $dom-&gt;find( '//pword' )-&gt;string_value, \"==\";\n</code></pre>\n\n<p>prints the original XML without the CDATA, such as:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;msg t=\"sys\"&gt;\n  &lt;body action=\"login\" r=\"0\"&gt;\n    &lt;login z=\"w1\"&gt;\n      &lt;nick&gt;Test&lt;/nick&gt;\n      &lt;pword&gt;4c24a5558542bf35cca54d8749c78de6&lt;/pword&gt;\n    &lt;/login&gt;\n  &lt;/body&gt;\n&lt;/msg&gt;\n\nthe nick  is ==Test==\nthe pword is ==4c24a5558542bf35cca54d8749c78de6==\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 6102813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/934cd313f2cbac0f47d14a9e4e3bad71?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/6102813/lucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "accepted_answer_id": 36828756, "answer_count": 2, "score": 1, "last_activity_date": 1461531710, "creation_date": 1461528035, "question_id": 36828251, "link": "https://stackoverflow.com/questions/36828251/stripping-cdata-tags-xml-perl", "title": "Stripping CData Tags XML Perl", "body": "<p>In PHP you could simply strip off CDATA tags in XML by doing the following:</p>\n\n<pre><code>simplexml_load_string($string, 'SimpleXMLElement', LIBXML_NOCDATA);\n</code></pre>\n\n<p>I was wondering how could I do this in Perl using <code>XML::Bare</code> or any other module?</p>\n\n<p>My client tends to send an xml like this:</p>\n\n<pre><code>&lt;msg t='sys'&gt;&lt;body action='login' r='0'&gt;&lt;login z='w1'&gt;&lt;nick&gt;&lt;![CDATA[Test]]&gt;&lt;/nick&gt;&lt;pword&gt;&lt;![CDATA[4c24a5558542bf35cca54d8749c78de6]]&gt;&lt;/pword&gt;&lt;/login&gt;&lt;/body&gt;&lt;/msg&gt;\n</code></pre>\n\n<p>Using XML::Bare I would parse it like this:</p>\n\n<pre><code>$string = \"&lt;msg t='sys'&gt;&lt;body action='login' r='0'&gt;&lt;login z='w1'&gt;&lt;nick&gt;&lt;![CDATA[Test]]&gt;&lt;/nick&gt;&lt;pword&gt;&lt;![CDATA[4c24a5558542bf35cca54d8749c78de6]]&gt;&lt;/pword&gt;&lt;/login&gt;&lt;/body&gt;&lt;/msg&gt;\";\n$strXML = XML::Bare-&gt;new('text' =&gt; $string)-&gt;parse;\nsay $strXML-&gt;{msg}-&gt;{body}-&gt;{login}-&gt;{nick}-&gt;{value};\n</code></pre>\n\n<p>and it works but I'd like to strip off the cdata tags to prevent an sql injection in my server. Does anyone know how I can go about doing this? I've searched all over the web for a solution and haven't been able to find one.</p>\n"}, {"tags": ["perl", "text", "speech", "sgml"], "comments": [{"owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "edited": false, "score": 0, "creation_date": 1461524267, "post_id": 36827515, "comment_id": 61225996, "body": "Please post sample <code>.sgm</code> file and what it should look like after conversion to <code>.txt</code>"}, {"owner": {"reputation": 528, "user_id": 5056599, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3SIf1.png?s=128&g=1", "display_name": "lucasrodesg", "link": "https://stackoverflow.com/users/5056599/lucasrodesg"}, "reply_to_user": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "edited": false, "score": 0, "creation_date": 1461524792, "post_id": 36827515, "comment_id": 61226188, "body": "I have edited the post @bart"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461576616, "post_id": 36827515, "comment_id": 61243705, "body": "Is <i>perplexity</i> really a measurement of something? I want to be involved!"}, {"owner": {"reputation": 528, "user_id": 5056599, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3SIf1.png?s=128&g=1", "display_name": "lucasrodesg", "link": "https://stackoverflow.com/users/5056599/lucasrodesg"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461754471, "post_id": 36827515, "comment_id": 61339718, "body": "Hi @Borodin, yes <i>perplexity</i> is a widely used measure to evaluate a Language Model (LM). A LM is obtained by analyzing a huge training text.To evaluate it, you apply the LM to several test texts. To quantify how good/accurate is the generated LM you compute the perplexity of each test. The lower is the perplexity the better is your LM. If, for instance, you use the Bibble as the training corpus and WhatsApp Group logs as test corpus, the perplexity will be high since the nature of the training and the test corpus is quite different. Refer to &quot;Natural Language Modeling&quot; for more info :-)"}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 7234531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea04ec389dfd88d2737a57310547ccda?s=128&d=identicon&r=PG&f=1", "display_name": "brch", "link": "https://stackoverflow.com/users/7234531/brch"}, "edited": false, "score": 0, "creation_date": 1616531026, "post_id": 36827553, "comment_id": 118031007, "body": "Note that this method will remove newline separators."}], "tags": [], "owner": {"reputation": 528, "user_id": 5056599, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3SIf1.png?s=128&g=1", "display_name": "lucasrodesg", "link": "https://stackoverflow.com/users/5056599/lucasrodesg"}, "is_accepted": false, "score": 1, "last_activity_date": 1461525307, "last_edit_date": 1461525307, "creation_date": 1461524363, "answer_id": 36827553, "question_id": 36827515, "link": "https://stackoverflow.com/questions/36827515/convert-sgm-to-txt/36827553#36827553", "title": "Convert .sgm to .txt", "body": "<p>Ok, I have found a solution:</p>\n\n<p>rename the file from \"file.sgm\" to \"file.html\". Then open the html file with a text editor and add on the top the line <code>&lt;meta charset=\"utf-8\"&gt;</code>, so that all the characters can be correctly displayed. Finally, open this file with a web browser and copy the content into a new text file. </p>\n"}, {"tags": [], "owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "is_accepted": true, "score": 6, "last_activity_date": 1461525837, "creation_date": 1461525837, "answer_id": 36827805, "question_id": 36827515, "link": "https://stackoverflow.com/questions/36827515/convert-sgm-to-txt/36827805#36827805", "title": "Convert .sgm to .txt", "body": "<p>You can try using this script to strip the SGML tags from the file:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse HTML::Parser;\n\nmy $file = $ARGV[0];\n\nHTML::Parser-&gt;new(default_h =&gt; [\"\"],\n    text_h =&gt; [ sub { print shift }, 'text' ]\n  )-&gt;parse_file($file) or die \"Failed to parse $file: $!\";\n</code></pre>\n\n<p>Use it as follows:</p>\n\n<pre><code>./strip_sgml.pl file.sgm &gt; file.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 7234531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea04ec389dfd88d2737a57310547ccda?s=128&d=identicon&r=PG&f=1", "display_name": "brch", "link": "https://stackoverflow.com/users/7234531/brch"}, "is_accepted": false, "score": 0, "last_activity_date": 1616530937, "creation_date": 1616530937, "answer_id": 66770766, "question_id": 36827515, "link": "https://stackoverflow.com/questions/36827515/convert-sgm-to-txt/66770766#66770766", "title": "Convert .sgm to .txt", "body": "<p>For a python solution, the answer here from user Hugo will remove all tags from the document (<a href=\"https://stackoverflow.com/questions/16206380/python-beautifulsoup-how-to-remove-all-tags-from-an-element\">Python/BeautifulSoup - how to remove all tags from an element?</a>).</p>\n<p>TLDR  Use the get_text() function from Beautiful Soup.</p>\n"}], "owner": {"reputation": 528, "user_id": 5056599, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3SIf1.png?s=128&g=1", "display_name": "lucasrodesg", "link": "https://stackoverflow.com/users/5056599/lucasrodesg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1390, "favorite_count": 0, "accepted_answer_id": 36827805, "answer_count": 3, "score": 2, "last_activity_date": 1616530937, "creation_date": 1461524168, "last_edit_date": 1461524530, "question_id": 36827515, "link": "https://stackoverflow.com/questions/36827515/convert-sgm-to-txt", "title": "Convert .sgm to .txt", "body": "<p>I have some files in .sgm format and I have to evaluate them (apply a language model and obtain the perplexity of the text). </p>\n\n<p>The main problem is that I need these files in plain format, i.e. in txt format. However I have been searching into the internet for an online convert or for somekind of script doing this and could not find.</p>\n\n<p>Besides this, a teacher of mine sent me this command in perl:</p>\n\n<pre><code>perl -n 'print $1.\"\\n\" if /&lt;seg[^&gt;]+&gt;\\s*(.*\\S)\\s*&lt;.seg&gt;/i;\u2019 &lt; file.sgm &gt; file\n</code></pre>\n\n<p>I have never worked using perl and have, honestly, no idea of it. I think I have perl installed:</p>\n\n<pre><code>$ perl -v\n\nThis is perl 5, version 18, subversion 2 (v5.18.2) built for darwin-thread-multi-2level\n(with 2 registered patches, see perl -V for more detail)\n\nCopyright 1987-2013, Larry Wall\n\nPerl may be copied only under the terms of either the Artistic License or the\nGNU General Public License, which may be found in the Perl 5 source kit.\n\nComplete documentation for Perl, including FAQ lists, should be found on\nthis system using \"man perl\" or \"perldoc perl\".  If you have access to the\nInternet, point your browser at http://www.perl.org/, the Perl Home Page.\n</code></pre>\n\n<p>By the way, I am using Mac OS X.</p>\n\n<p>Sample .sgm file:</p>\n\n<pre><code>&lt;srcset setid=\"newsdiscusstest2015\" srclang=\"any\"&gt;\n&lt;doc sysid=\"ref\" docid=\"39-Guardian\" genre=\"newsdiscuss\" origlang=\"en\"&gt;\n&lt;p&gt;\n&lt;seg id=\"1\"&gt;This is perfectly illustrated by the UKIP numbties banning people with HIV.&lt;/seg&gt;\n&lt;seg id=\"2\"&gt;You mean Nigel Farage saying the NHS should not be used to pay for people coming to the UK as health tourists, and saying yes when the interviewer specifically asked if, with the aforementioned in mind, people with HIV were included in not being welcome.&lt;/seg&gt;\n&lt;seg id=\"3\"&gt;You raise a straw man and then knock it down with thinly veiled homophobia.&lt;/seg&gt;\n</code></pre>\n\n<p>Otuput .txt file:</p>\n\n<blockquote>\n  <p>  <p> This is perfectly illustrated by the UKIP numbties banning\n  people with HIV. You mean Nigel Farage saying the\n  NHS should not be used to pay for people coming to the UK as health\n  tourists, and saying yes when the interviewer specifically asked if,\n  with the aforementioned in mind, people with HIV were included in not\n  being welcome. You raise a straw man and then knock\n  it down with thinly veiled homophobia.</p>\n</blockquote>\n"}, {"tags": ["php", "perl", "debugging"], "comments": [{"owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "edited": false, "score": 0, "creation_date": 1461514815, "post_id": 36825690, "comment_id": 61222422, "body": "Can you change the source of the Perl script to add some debugging code?"}, {"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "reply_to_user": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "edited": false, "score": 0, "creation_date": 1461515920, "post_id": 36825690, "comment_id": 61222814, "body": "@bart I can do that, indeed. What would I write?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1461517593, "post_id": 36825690, "comment_id": 61223455, "body": "Can you run the Perl program yourself without the php inbetween? Do you know what goes in and what is supposed to come out? Do you have shell access?"}, {"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1461517716, "post_id": 36825690, "comment_id": 61223500, "body": "@simbabque No, I can only run the file from the PHP file, via the server. I do not have shell access. (Otherwise I would simply run the script from shell.)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "edited": false, "score": 0, "creation_date": 1461518227, "post_id": 36825690, "comment_id": 61223704, "body": "So the debugger is not an option. The <a href=\"http://stackoverflow.com/a/36826392/1331451\">answer by bart</a> is a good start, but it&#39;s also important to know what the program is supposed to do. I take it you can&#39;t install any modules either since you don&#39;t have shell access. Combine @bart&#39;s solution with a bunch of <code>warn</code> statements, possibly using Data::Dumper, and you should be able to find the problem."}], "answers": [{"comments": [{"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "edited": false, "score": 0, "creation_date": 1461518886, "post_id": 36826392, "comment_id": 61223955, "body": "Would that tmp directory be relative to the Perl file itself (so a sister of that script), to the PHP file, or to the main PHP file? Because on first glance I cannot find it."}, {"owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "reply_to_user": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "edited": false, "score": 0, "creation_date": 1461519041, "post_id": 36826392, "comment_id": 61224035, "body": "The path specified as the <code>open</code> argument is absolute, so you should have a file in <code>&#47;tmp</code>. If there is no file, then it means there were no warnings or the script did not die. You can test if the warnings are logged correctly, by using <code>warn &quot;debug test&quot;;</code> right after the <code>$SIG...</code> lines."}], "tags": [], "owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "is_accepted": true, "score": 2, "last_activity_date": 1461518107, "creation_date": 1461518107, "answer_id": 36826392, "question_id": 36825690, "link": "https://stackoverflow.com/questions/36825690/how-to-debug-perl-that-is-called-from-php-file/36826392#36826392", "title": "How to debug Perl that is called from PHP file", "body": "<p>You can add following code at the top of your Perl script:</p>\n\n<pre><code>sub debug_log\n{\n    open my $log_fh, \"&gt;&gt;\", \"/tmp/debug.log\";\n    print $log_fh $_[0];\n    warn $_[0];\n    close $log_fh;\n}\n\n$SIG{__WARN__} = \\&amp;debug_log;\n$SIG{__DIE__} = \\&amp;debug_log;\n</code></pre>\n\n<p>This way all the warnings and <code>die</code> messages should end up in <code>/tmp/debug.log</code>.</p>\n"}], "owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 36826392, "answer_count": 1, "score": 1, "last_activity_date": 1461518107, "creation_date": 1461514428, "question_id": 36825690, "link": "https://stackoverflow.com/questions/36825690/how-to-debug-perl-that-is-called-from-php-file", "title": "How to debug Perl that is called from PHP file", "body": "<p>I am currently working from home (on a Sunday!) and I am trying to figure out why my Perl script is returning NULL to PHP from where it is called. However, I don't see how I can debug the Perl script itself. The PHP file returns a warning that I am trying to do an array operation on a non-array object (because the expected array is actually NULL returned by PHP). The logs of the webserver have only logged this warning as well - no Perl errors.</p>\n\n<p>Is there a place where specific 'external' logs are stored on a server? Or, is there a better way to debug a Perl file that is been run from a PHP file that is required in a main PHP file? Debugging isn't necessary (I don't need a <em>debug mode</em>) but I'd like to see the errors or warnings at least.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 1, "creation_date": 1461502190, "post_id": 36823284, "comment_id": 61217977, "body": "Can you share the link or source where did you find it, I have seen first time <code>-s</code> using like this."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1461502223, "post_id": 36823284, "comment_id": 61217986, "body": "All I could find this:  <code>-s</code> enables rudimentary switch parsing for switches on the command line after the program name but before any filename arguments (or before an argument of --). Any switch found there is removed from @ARGV and sets the corresponding variable in the Perl program. The following program prints &quot;1&quot; if the program is invoked with a -xyz switch, and &quot;abc&quot; if it is invoked with -xyz=abc.   <code>#!&#47;usr&#47;bin&#47;perl -s</code>   <code>if ($xyz) { print &quot;$xyz\\n&quot; }</code>"}, {"owner": {"reputation": 1268, "user_id": 3402772, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000733159561/picture?type=large", "display_name": "SibiCoder", "link": "https://stackoverflow.com/users/3402772/sibicoder"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1461502345, "post_id": 36823284, "comment_id": 61218027, "body": "I found this in O&#39;Reilly perl cookbook PDF and used in my program. It is available in section 5.2 &quot;Testing for the presence of a key in a hash&quot;"}, {"owner": {"reputation": 2878, "user_id": 600360, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/t4VHw.jpg?s=128&g=1", "display_name": "Mort", "link": "https://stackoverflow.com/users/600360/mort"}, "edited": false, "score": 1, "creation_date": 1461535555, "post_id": 36823284, "comment_id": 61230061, "body": "You completely misunderstood the example and took the wrong parts of the code and used them incorrectly to make your code above that makes no sense. The book even has an explanation of its code &quot;Take, for instance, a program to look up file sizes given a list of files as input. &quot;"}, {"owner": {"reputation": 1268, "user_id": 3402772, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000733159561/picture?type=large", "display_name": "SibiCoder", "link": "https://stackoverflow.com/users/3402772/sibicoder"}, "edited": false, "score": 0, "creation_date": 1461560202, "post_id": 36823284, "comment_id": 61235288, "body": "I thought I am undefining the value by using -s. It sounded like s (substitute) and - (nothing), such that replacing the string with undefined value. Now I understood. Thanks :)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 2, "creation_date": 1461578702, "post_id": 36823284, "comment_id": 61245122, "body": "@AbhiNickz: The definition f0r <code>-s</code> that you&#39;re quoting is from <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">perlrun</a>. It&#39;s a command line option. The code from the original post is clearly not using it as a command line option. The correct definition for this usage is <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1461593397, "post_id": 36823284, "comment_id": 61255605, "body": "By the way, when <code>-s</code> returns undef, it does not necessarily indicate the file is does not exist."}], "answers": [{"tags": [], "owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "is_accepted": false, "score": 4, "last_activity_date": 1461502309, "creation_date": 1461502309, "answer_id": 36823349, "question_id": 36823284, "link": "https://stackoverflow.com/questions/36823284/what-is-the-meaning-of-s-in-perl-and-how-does-it-work/36823349#36823349", "title": "what is the meaning of -s in Perl and how does it work?", "body": "<p><code>-s</code> is one of many file tests available in Perl. This particular test returns file size in bytes, so it can be used to check if file is empty or not.</p>\n\n<p>In your sample code the test returned <code>undef</code>, as it could not find file named <code>hello world</code>.</p>\n\n<p>You can read more about file tests in Perl here: <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"nofollow\">http://perldoc.perl.org/functions/-X.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 9, "last_activity_date": 1461502729, "last_edit_date": 1461502729, "creation_date": 1461502320, "answer_id": 36823351, "question_id": 36823284, "link": "https://stackoverflow.com/questions/36823284/what-is-the-meaning-of-s-in-perl-and-how-does-it-work/36823351#36823351", "title": "what is the meaning of -s in Perl and how does it work?", "body": "<p>The <code>-s</code> file test operator accepts either a file name string or a valid opened file handle, and returns the size of the file in bytes. If the file doesn't exist (I presume you have no file called <code>hello world</code>) then it returns <code>undef</code></p>\n\n<p>It is documented in <a href=\"http://perldoc.perl.org/functions/-X.html\">perldoc -f -X</a></p>\n\n<p>There is also a perl command-line switch <code>-s</code> which is unrelated. It is documented in <a href=\"http://perldoc.perl.org/perlrun.html#Command-Switches\">perldoc perlrun</a>. That is the documentation that you have found, but it is irrelevant to using <code>-s</code> within a Perl program</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 0, "last_activity_date": 1461593339, "last_edit_date": 1461593339, "creation_date": 1461517521, "answer_id": 36826270, "question_id": 36823284, "link": "https://stackoverflow.com/questions/36823284/what-is-the-meaning-of-s-in-perl-and-how-does-it-work/36826270#36826270", "title": "what is the meaning of -s in Perl and how does it work?", "body": "<p><code>-s</code> is an oddly named function documented in <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"nofollow\"><code>-X</code></a>. But despite the dash in its name, <code>-s</code> is just like any other function.</p>\n\n<p><code>-s</code> returns the size of the file provided as an argument. On error, it returns <code>undef</code> and sets <code>$!</code>.</p>\n\n<p>To find out what error you are getting, check if the size is undefined.</p>\n\n<pre><code>defined( my $size = -s $qfn )\n   or die(\"Can't stat \\\"$qfn\\\": $!\\n\");\n</code></pre>\n\n<p>In this case, it's surely because <code>hello world</code> isn't a path to a file.</p>\n"}], "owner": {"reputation": 1268, "user_id": 3402772, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000733159561/picture?type=large", "display_name": "SibiCoder", "link": "https://stackoverflow.com/users/3402772/sibicoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 754, "favorite_count": 0, "accepted_answer_id": 36826270, "answer_count": 3, "score": 0, "last_activity_date": 1461593339, "creation_date": 1461501968, "question_id": 36823284, "link": "https://stackoverflow.com/questions/36823284/what-is-the-meaning-of-s-in-perl-and-how-does-it-work", "title": "what is the meaning of -s in Perl and how does it work?", "body": "<p>I have a perl program like</p>\n\n<pre><code>  $var= \"hello world\";\n  $var = -s $var;\n  print $var;\n</code></pre>\n\n<p>When we print the value of $var, it shows a error like</p>\n\n<pre><code>     Use of uninitialized value $var in print at line 3.\n</code></pre>\n\n<p>Can anyone explain how this works. What is the -s does? Is it a function? I couldn't find snyhing about it in perldoc.</p>\n"}, {"tags": ["perl", "file", "subdirectory", "readdir"], "answers": [{"comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1461501846, "post_id": 36823076, "comment_id": 61217856, "body": "I think We should use CPAN modules first rather than writing our own code because It is already optimized and if does solve the problem."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461502147, "post_id": 36823076, "comment_id": 61217962, "body": "That&#39;s pretty much irrelevant. You may think the OP should be using Python instead but that doesn&#39;t make a Python solution useful.You haven&#39;t helped the OP to understand what is wrong with his own code, and your solution recurses when a non-recursive solution is required. Your output doesn&#39;t even look anything like what the original code produces, and you have an unused array and some messy commented-out sections in your answer. This is a poor solution"}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1461502447, "post_id": 36823076, "comment_id": 61218061, "body": "Yes, That&#39;s is true and you have given answer that solves his problem but you also used another Core CPAN Module. I have just given another way."}], "tags": [], "owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "is_accepted": false, "score": 1, "last_activity_date": 1461500793, "creation_date": 1461500793, "answer_id": 36823076, "question_id": 36822986, "link": "https://stackoverflow.com/questions/36822986/print-files-and-subdirectories-of-given-directory/36823076#36823076", "title": "Print files and subdirectories of given directory", "body": "<p>Use this CPAN Module to get all files and subdirectories recursively.     </p>\n\n<pre><code>    use File::Find;        \n\n    find(\\&amp;getFile, $dir);\n    my @fileList;\n\n    sub getFile{\n        print $File::Find::name.\"\\n\";\n        # Below lines will print only file name. \n        #if ($File::Find::name =~ /.*\\/(.*)/ &amp;&amp; $1 =~ /\\./){\n            #push @fileList, $File::Find::name.\"\\n\";\n        }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1349, "user_id": 3623150, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3T4cu.jpg?s=128&g=1", "display_name": "bob_saginowski", "link": "https://stackoverflow.com/users/3623150/bob-saginowski"}, "edited": false, "score": 0, "creation_date": 1461502035, "post_id": 36823114, "comment_id": 61217915, "body": "Thank you for the solutions given. The first one solved my problem :)"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 5, "last_activity_date": 1461501822, "last_edit_date": 1461501822, "creation_date": 1461501030, "answer_id": 36823114, "question_id": 36822986, "link": "https://stackoverflow.com/questions/36822986/print-files-and-subdirectories-of-given-directory/36823114#36823114", "title": "Print files and subdirectories of given directory", "body": "<p><code>readdir</code> returns only the node name without any path information. The file test operators will look in the current working directory if no path is specified, and because the current directory isn't <code>$currNode-&gt;rootDirectory</code> they won't be found</p>\n\n<p>I suggest you use <code>rel2abs</code> from the <a href=\"https://metacpan.org/pod/File::Spec::Functions\" rel=\"nofollow\"><code>File::Spec::Functions</code></a> core module to combine the node name with the path. You can use string concatenation, but the library function takes care of corner cases like whether the directory ends with a slash</p>\n\n<p>It's also worth pointing out that Perl identifiers are most often in <code>snake_case</code>, and people familiar with the language would thank you for not using capital letters. They should especially be avoided for the first character of an identifier, as names like that are reserved for globals like package names</p>\n\n<p>I think your subroutine should look like this</p>\n\n<pre><code>use File::Spec::Functions 'rel2abs';\n\nsub do_search {\n    my ($curr_node) = @_;\n    my $dir         = $curr_node-&gt;rootDirectory;\n\n    opendir my $dh, $dir or die qq{Unable to open directory \"$dir\": $!};\n\n    while ( my $node = readdir $dh ) {\n        next if $node eq '.' or $node eq '..';\n\n        my $fullname = rel2abs($node, $dir);\n\n        print \"File:     $node\\n\" if -f $fullname;\n        print \"Directory $node\\n\" if -d $fullname;\n   }\n}\n</code></pre>\n\n<p>An alternative method is to set the current working directory to the directory being read. That way there is no need to manipulate file paths, but you would need to save and restore the original working directory before and after changing it</p>\n\n<p>The <a href=\"https://metacpan.org/pod/Cwd\" rel=\"nofollow\"><code>Cwd</code></a> core module provides <code>getcwd</code> and your code would look like this</p>\n\n<pre><code>use Cwd 'getcwd';\n\nsub do_search {\n    my ($curr_node) = @_;\n\n    my $cwd = getcwd;\n    chdir $curr_node-&gt;rootDirectory or die $!;\n\n    opendir my $dh, '.' or die $!;\n\n    while ( my $node = readdir $dh ) {\n        next if $node eq '.' or $node eq '..';\n\n        print \"File: \\n\" if -f $node;\n        print \"Directory $node\\n\" if -d $node;\n   }\n\n   chdir $cwd or die $!;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 1, "last_activity_date": 1461519484, "creation_date": 1461519484, "answer_id": 36826650, "question_id": 36822986, "link": "https://stackoverflow.com/questions/36822986/print-files-and-subdirectories-of-given-directory/36826650#36826650", "title": "Print files and subdirectories of given directory", "body": "<p>Already answered, but sometimes is handy not to care with the implementation details and you could use some CPAN modules for hiding such details.</p>\n\n<p>One of them is the wonderful <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow\">Path::Tiny</a> module.</p>\n\n<p>Your code could be as:</p>\n\n<pre><code>use 5.014;         #strict + feature 'say' + ...\nuse warnings;\nuse Path::Tiny;\n\ndo_search($_) for @ARGV;\n\nsub do_search {\n        my $curr_node = path(shift);\n        for my $node ($curr_node-&gt;children) {\n                say \"Directory  : $node\" if -d $node;\n                say \"Plain File : $node\" if -f $node;\n        }\n}\n</code></pre>\n\n<p>The <code>children</code> method excludes the <code>.</code> and the <code>..</code> automatically.</p>\n\n<p>You also need understand that the <code>-f</code> test is true only for the real <code>files</code>. So, the above code excludes for example <code>symlinks</code> (whose points to real files), or <code>FIFO</code> files, and so on... Such \"files\" could be usually opened and read as plain files, therefore somethimes instead of the <code>-f</code> is handy to use the <code>-e &amp;&amp; ! -d</code> test (e.g. exists, but not an directory).</p>\n\n<p>The <code>Path::Tiny</code> has some methods for this, e.g. you could write</p>\n\n<pre><code>        for my $node ($curr_node-&gt;children) {\n                print \"Directory  : $node\\n\" if $node-&gt;is_dir;\n                print \"File       : $node\\n\" if $node-&gt;is_file;\n        }\n</code></pre>\n\n<p>the <code>is_file</code> method is usually DWIM - e.g. does the: <code>-e &amp;&amp; ! -d</code>.</p>\n\n<p>Using the <code>Path::Tiny</code> you could also easily extend your function to walk the whole tree using the <code>iterator</code> method:</p>\n\n<pre><code>use 5.014;\nuse warnings;\nuse Path::Tiny;\n\ndo_search($_) for @ARGV;\n\nsub do_search {\n\n    #maybe you need some error-checking here for the existence of the argument or like...\n\n    my $iterator = path(shift)-&gt;iterator({recurse =&gt; 1});\n    while( my $node = $iterator-&gt;() ) {\n        say \"Directory  : \", $node-&gt;absolute if $node-&gt;is_dir;\n        say \"File       : \", $node-&gt;absolute if $node-&gt;is_file;\n    }\n}\n</code></pre>\n\n<p>The above prints the type for all files and directories recursive down from the given argument...</p>\n\n<p>And so on... the <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow\">Path::Tiny</a> is really worth to have installed.</p>\n"}], "owner": {"reputation": 1349, "user_id": 3623150, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3T4cu.jpg?s=128&g=1", "display_name": "bob_saginowski", "link": "https://stackoverflow.com/users/3623150/bob-saginowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 0, "accepted_answer_id": 36823114, "answer_count": 3, "score": 1, "last_activity_date": 1461519484, "creation_date": 1461500263, "question_id": 36822986, "link": "https://stackoverflow.com/questions/36822986/print-files-and-subdirectories-of-given-directory", "title": "Print files and subdirectories of given directory", "body": "<p>I am trying to get all files and directories from a given directory but I can't specify what is the type (file/ directory). Nothing is being printed. What I am doing wrong and how to solve it. Here is the code:</p>\n\n<pre><code>sub DoSearch {\n    my $currNode = shift;\n    my $currentDir = opendir (my $dirHandler, $currNode-&gt;rootDirectory) or die $!;\n\n    while (my $node = readdir($dirHandler)) {\n        if ($node eq '.' or $node eq '..') {\n            next;\n        }\n\n        print \"File: \" . $node . \"\\n\" if -f $node;\n        print \"Directory \" . $node . \"\\n\" if -d $node;\n   }\n\n   closedir($dirHandler);\n}\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 36931, "user_id": 225757, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e7140b12949e4652885f6bb02b435f42?s=128&d=identicon&r=PG", "display_name": "Roland Illig", "link": "https://stackoverflow.com/users/225757/roland-illig"}, "is_accepted": false, "score": 3, "last_activity_date": 1461533287, "last_edit_date": 1461533287, "creation_date": 1461497451, "answer_id": 36822520, "question_id": 36822443, "link": "https://stackoverflow.com/questions/36822443/in-perl-source-code-where-can-i-find-the-implementation-of-the-sort-routine/36822520#36822520", "title": "In Perl source code, where can I find the implementation of the sort routine?", "body": "<p>I went to <a href=\"https://github.com/Perl/perl5/search?q=sort\" rel=\"nofollow\">https://github.com/Perl/perl5/search?q=sort</a>.</p>\n\n<p>The first search hit was <code>sort.pm</code>, which looked like a good hint. Since that module does not define the search itself, I looked there for keywords that would help me along the way. I chose <code>_quicksort</code> and <code>_mergesort</code>.</p>\n\n<p><a href=\"https://github.com/Perl/perl5/search?q=_quicksort\" rel=\"nofollow\">https://github.com/Perl/perl5/search?q=_quicksort</a> didn\u2019t show any relevant results, so I tried just <code>quicksort</code>.</p>\n\n<p>That gave me <code>pp_sort.c</code>, and there you go. Almost 2000 lines full of sorting.</p>\n"}, {"comments": [{"owner": {"reputation": 755, "user_id": 1049393, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9bf546583b8db16192abf838d41149af?s=128&d=identicon&r=PG", "display_name": "coderodde", "link": "https://stackoverflow.com/users/1049393/coderodde"}, "edited": false, "score": 0, "creation_date": 1461499729, "post_id": 36822893, "comment_id": 61217213, "body": "Thanks! Will take a look."}], "tags": [], "owner": {"reputation": 4663, "user_id": 3967089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d00715119003023d62918dcc603ca7?s=128&d=identicon&r=PG&f=1", "display_name": "Calle Dybedahl", "link": "https://stackoverflow.com/users/3967089/calle-dybedahl"}, "is_accepted": false, "score": 4, "last_activity_date": 1461499658, "creation_date": 1461499658, "answer_id": 36822893, "question_id": 36822443, "link": "https://stackoverflow.com/questions/36822443/in-perl-source-code-where-can-i-find-the-implementation-of-the-sort-routine/36822893#36822893", "title": "In Perl source code, where can I find the implementation of the sort routine?", "body": "<p>If you're planning on modifying Perl's internals, you need to know a considerable amount about how Perl works internally. Start by reading the <code>perlhack</code> manpage, and follow its pointers to several more (quite long!) manual pages.</p>\n"}, {"comments": [{"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 1, "creation_date": 1461539728, "post_id": 36826000, "comment_id": 61231036, "body": "<i>Teach a man how to sort, and they&#39;ll sort themselves out - Apocryphal</i>"}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 6, "last_activity_date": 1461520978, "last_edit_date": 1461520978, "creation_date": 1461516191, "answer_id": 36826000, "question_id": 36822443, "link": "https://stackoverflow.com/questions/36822443/in-perl-source-code-where-can-i-find-the-implementation-of-the-sort-routine/36826000#36826000", "title": "In Perl source code, where can I find the implementation of the sort routine?", "body": "<p>You can find out the opcodes generated by your code using B::Concise:</p>\n\n<pre><code>$ perl -MO=Concise -e'sort'\n5  &lt;@&gt; leave[1 ref] vKP/REFC -&gt;(end)\n1     &lt;0&gt; enter -&gt;2\n2     &lt;;&gt; nextstate(main 1 -e:1) v:{ -&gt;3\n4     &lt;@&gt; sort vK -&gt;5\n3        &lt;0&gt; pushmark s -&gt;4\n-e syntax OK\n</code></pre>\n\n<p>The name of the opcode for the <code>sort</code> operator is <code>sort</code>. (This is obviously most useful when the name of the opcode isn't the same as the name of the operator; for example, the opcode for the scalar assignment operator <code>=</code> is <code>sassign</code>.)</p>\n\n<p>The opcodes are implemented in various .c files at the top level of the Perl source directory. The definition of opcode <code>foo</code> usually* looks like this:</p>\n\n<pre><code>PP(pp_foo) {\n    // implementation\n}\n</code></pre>\n\n<p>So:</p>\n\n<pre><code>grep pp_sort /path/to/perl/source/*.c\n</code></pre>\n\n<p>In this case, the <code>sort</code> opcode actually lives in its own file: <a href=\"https://github.com/Perl/perl5/blob/cc93400aa5a8d556c56c28a8de644bd178d050d4/pp_sort.c\" rel=\"nofollow\"><code>pp_sort.c</code></a>.</p>\n\n<hr>\n\n<p>* There are a few exceptions. For example, the <code>keys</code> opcode is actually implemented in <code>Perl_do_kv</code>, as indicated by this line in opcode.h:</p>\n\n<pre><code>#define Perl_pp_keys Perl_do_kv\n</code></pre>\n\n<p>If you can't find <code>pp_foo</code> for a given opcode, check opcode.h.</p>\n"}], "owner": {"reputation": 755, "user_id": 1049393, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9bf546583b8db16192abf838d41149af?s=128&d=identicon&r=PG", "display_name": "coderodde", "link": "https://stackoverflow.com/users/1049393/coderodde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 1, "accepted_answer_id": 36826000, "answer_count": 3, "score": 1, "last_activity_date": 1487553996, "creation_date": 1461496936, "last_edit_date": 1487553996, "question_id": 36822443, "link": "https://stackoverflow.com/questions/36822443/in-perl-source-code-where-can-i-find-the-implementation-of-the-sort-routine", "title": "In Perl source code, where can I find the implementation of the sort routine?", "body": "<p>I would like to experiment with Perl by modifying the actual sort routine.\nI did <code>grep</code> over the source trying to find some files with name patterns mentioning <strong><code>sort</code></strong>, yet did not find anything relevant.</p>\n\n<p>Could anyone of you tell in what file the sort implementation resides?</p>\n"}, {"tags": ["regex", "perl", "regex-greedy"], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1461496576, "creation_date": 1461496576, "answer_id": 36822374, "question_id": 36822146, "link": "https://stackoverflow.com/questions/36822146/perl-regex-returns-numbers-and-no-string/36822374#36822374", "title": "perl regex returns numbers and no string", "body": "<p>This line</p>\n\n<pre><code>my ($cleanlines) = $shorten =~ s/\\n//g;\n</code></pre>\n\n<p>deletes all the newline characters in <code>$shorten</code> and stores the number of changes made in <code>$cleanlines</code></p>\n\n<p>If you want to delete empty lines from <code>$shorten</code> then you must write this instead</p>\n\n<pre><code>(my $cleanlines = $shorten) =~ s/^\\s*\\n//gm;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461498046, "post_id": 36822440, "comment_id": 61216683, "body": "That won&#39;t remove lines that are empty except for spaces or tabs, but it may be all that&#39;s required"}], "tags": [], "owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "is_accepted": false, "score": 0, "last_activity_date": 1461496922, "creation_date": 1461496922, "answer_id": 36822440, "question_id": 36822146, "link": "https://stackoverflow.com/questions/36822146/perl-regex-returns-numbers-and-no-string/36822440#36822440", "title": "perl regex returns numbers and no string", "body": "<p><code>my ($shorten) = $origin =~ /word to match\\s*(.*)$/s;</code> worked because you used capturing parentheses in your regex, and whatever was matched by <code>(*.)</code> ended up in <code>$shorten</code>.</p>\n\n<p>To remove blank lines from your string, you can use this simple regex:</p>\n\n<pre><code>$shorten =~ s/\\n+\\n/g;\n</code></pre>\n\n<p>The substitution will be performed on the <code>$shorten</code> variable. If you want to keep <code>$shorten</code> unchanged and have the cleaned up lines in a new variable, then simply copy the contents of <code>$shorten</code> to a new variable and perform the substitution on it:</p>\n\n<pre><code>my $cleanlines = $shorten;\n$cleanlines =~ s/\\n+/\\n/g;\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 6241491, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207806262861421/picture?type=large", "display_name": "Michael Morris", "link": "https://stackoverflow.com/users/6241491/michael-morris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1461496922, "creation_date": 1461495119, "last_edit_date": 1461495555, "question_id": 36822146, "link": "https://stackoverflow.com/questions/36822146/perl-regex-returns-numbers-and-no-string", "title": "perl regex returns numbers and no string", "body": "<p>Im trying to remove all the empty lines from a string. My string is a paragraph that has a lot of random empty lines and I am trying to clean it up.</p>\n\n<p>eg:</p>\n\n<pre><code>this is an example\n\nlots of empty\n\nlines\n\nin the paragraph\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>this is an example\nlots of empty\nlines \nin the paragraph\n</code></pre>\n\n<p>The code i am currently using only returns random digits.. its as if its doing a word count or something. </p>\n\n<p>e.g </p>\n\n<pre><code>output = 567\n</code></pre>\n\n<p>or </p>\n\n<pre><code>output = 221\n</code></pre>\n\n<p>thats all it returns, no words, no paragraph</p>\n\n<p>my code looks like this</p>\n\n<p>It was first suppose to match and then print all the words after the match\nand then I wanted to remove all the empty lines to clean up the output</p>\n\n<pre><code> my ($shorten) = $origin =~ /word to match\\s*(.*)$/s;\n\n my ($cleanlines) = $shorten =~ s/\\n//g;\n</code></pre>\n\n<p>the $shorten part works perfectly, but $cleanlines part doesnt work.</p>\n"}, {"tags": ["windows", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461496689, "post_id": 36819214, "comment_id": 61216273, "body": "Those are strange file names: Windows file names almost always have a file type Are you sure they&#39;re not <code>file(1).txt</code>, <code>file(2).txt</code>, <code>file(3).txt</code> etc. or something similar?"}], "answers": [{"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1461473900, "post_id": 36819369, "comment_id": 61211055, "body": "For keep the original data, use non destructive modifier. <a href=\"http://stackoverflow.com/questions/22836/how-do-i-perform-a-perl-substitution-on-a-string-while-keeping-the-original\">See here</a>"}, {"owner": {"reputation": 305, "user_id": 1226579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc2b48995cb9af6ff5215d099adc0ad?s=128&d=identicon&r=PG", "display_name": "kchinger", "link": "https://stackoverflow.com/users/1226579/kchinger"}, "edited": false, "score": 3, "creation_date": 1461474255, "post_id": 36819369, "comment_id": 61211123, "body": "I would probably do $f =~ s/&#40;(\\d+)&#41;/_$1/g; instead. Does it in one line."}, {"owner": {"reputation": 27, "user_id": 6246388, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-P1jHdVZ20z4/AAAAAAAAAAI/AAAAAAAAAX8/VW-IdtcHx8A/photo.jpg?sz=128", "display_name": "Krom", "link": "https://stackoverflow.com/users/6246388/krom"}, "edited": false, "score": 0, "creation_date": 1461533606, "post_id": 36819369, "comment_id": 61229525, "body": "Ya im not sure who down voted. Thanks for the input everyone, I will be studying this closely until I can read it better. BTW this is not an assignment, but my own personal interest/use."}, {"owner": {"reputation": 27, "user_id": 6246388, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-P1jHdVZ20z4/AAAAAAAAAAI/AAAAAAAAAX8/VW-IdtcHx8A/photo.jpg?sz=128", "display_name": "Krom", "link": "https://stackoverflow.com/users/6246388/krom"}, "edited": false, "score": 0, "creation_date": 1461534774, "post_id": 36819369, "comment_id": 61229875, "body": "$f =~ s/((\\d+))/_$1/g;# So this line I believe says: substitute any digit of one or more in parenthesis with an underscore and the capture variable $1 which is the number in the parenthesis. and the g allows for global matching, which im not sure exactly why we need at at this moment."}, {"owner": {"reputation": 27, "user_id": 6246388, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-P1jHdVZ20z4/AAAAAAAAAAI/AAAAAAAAAX8/VW-IdtcHx8A/photo.jpg?sz=128", "display_name": "Krom", "link": "https://stackoverflow.com/users/6246388/krom"}, "edited": false, "score": 0, "creation_date": 1461536963, "post_id": 36819369, "comment_id": 61230386, "body": "Also I am testing this out and the testfile(1) turns into testfile(_1) but this doesnt make since because of the double parenthesis in the regular expression. I took a pair of the parenthesis away and it seemed to make no difference do I need to use &#40;(d+)&#41; or something?  edit: I cant put \\&#39;s behind my parenthesis in my comments here"}, {"owner": {"reputation": 305, "user_id": 1226579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc2b48995cb9af6ff5215d099adc0ad?s=128&d=identicon&r=PG", "display_name": "kchinger", "link": "https://stackoverflow.com/users/1226579/kchinger"}, "edited": false, "score": 0, "creation_date": 1461538989, "post_id": 36819369, "comment_id": 61230880, "body": "@stackoverfloweth In what way? You even copied it and told him to try it."}, {"owner": {"reputation": 156, "user_id": 6162709, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/lEQOC.png?s=128&g=1", "display_name": "stackoverfloweth", "link": "https://stackoverflow.com/users/6162709/stackoverfloweth"}, "reply_to_user": {"reputation": 305, "user_id": 1226579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc2b48995cb9af6ff5215d099adc0ad?s=128&d=identicon&r=PG", "display_name": "kchinger", "link": "https://stackoverflow.com/users/1226579/kchinger"}, "edited": false, "score": 0, "creation_date": 1461544260, "post_id": 36819369, "comment_id": 61232026, "body": "@kchinger, did you escape the &quot;(&quot; by using <code>\\(</code> because you have <code>&#47;((\\d+))&#47;</code> when it should be <code>&#47;\\((\\d+)\\)&#47;</code>."}, {"owner": {"reputation": 305, "user_id": 1226579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc2b48995cb9af6ff5215d099adc0ad?s=128&d=identicon&r=PG", "display_name": "kchinger", "link": "https://stackoverflow.com/users/1226579/kchinger"}, "edited": false, "score": 0, "creation_date": 1461551418, "post_id": 36819369, "comment_id": 61233306, "body": "@stackoverfloweth Oops, copied it wrong. I&#39;ll edit it. It was right in my notepad++ when I tested it but I typed it wrong here instead of copying I guess."}], "tags": [], "owner": {"reputation": 156, "user_id": 6162709, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/lEQOC.png?s=128&g=1", "display_name": "stackoverfloweth", "link": "https://stackoverflow.com/users/6162709/stackoverfloweth"}, "is_accepted": true, "score": 0, "last_activity_date": 1461538532, "last_edit_date": 1461538532, "creation_date": 1461473175, "answer_id": 36819369, "question_id": 36819214, "link": "https://stackoverflow.com/questions/36819214/using-perl-to-rename-files-in-windows/36819369#36819369", "title": "Using Perl to rename files in windows", "body": "<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $dir =       'folder';\nmy @dir =       ();\n\nopendir(DIR, $dir);\n@dir    =       readdir(DIR);\nclosedir(DIR);\n\nforeach my $file (@dir) {\n    my $f=$file;\n    $f =~ s/\\(/_/;\n    $f =~ s/\\)//;\n    rename \"$dir/$file\", \"$dir/$f\";\n}\n</code></pre>\n\n<p>The <code>\\(</code> in <code>s/\\(/_/</code> is matching the \"(\" in the filename <code>file(1)</code> and replacing with \"_\", so <code>$f =~ s/\\(/_/;</code> makes <code>$f</code> become <code>file_1)</code>. The <code>\\)</code> in <code>s/\\)//</code> is matching the \")\" in the filename <code>file_1)</code> and replacing with \"\" (nothing), so <code>$f =~ s/\\)//;</code> makes <code>$f</code> become <code>file_1</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 1, "last_activity_date": 1461548142, "last_edit_date": 1461548142, "creation_date": 1461473473, "answer_id": 36819389, "question_id": 36819214, "link": "https://stackoverflow.com/questions/36819214/using-perl-to-rename-files-in-windows/36819389#36819389", "title": "Using Perl to rename files in windows", "body": "<p>Your question is <strong>Where to start?</strong> So start the perl from <a href=\"http://www.tutorialspoint.com/perl/\" rel=\"nofollow\">Here</a></p>\n\n<p>For file rename take a look at <a href=\"http://perldoc.perl.org/functions/rename.html\" rel=\"nofollow\">Here</a>.</p>\n\n<p>For  open the directory and for read , look at <a href=\"http://perldoc.perl.org/functions/readdir.html\" rel=\"nofollow\">here</a>.</p>\n\n<p>And then also look at here for <a href=\"http://perldoc.perl.org/functions/glob.html\" rel=\"nofollow\">glob</a>.</p>\n"}], "owner": {"reputation": 27, "user_id": 6246388, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-P1jHdVZ20z4/AAAAAAAAAAI/AAAAAAAAAX8/VW-IdtcHx8A/photo.jpg?sz=128", "display_name": "Krom", "link": "https://stackoverflow.com/users/6246388/krom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 926, "favorite_count": 0, "accepted_answer_id": 36819369, "answer_count": 2, "score": -2, "last_activity_date": 1461548142, "creation_date": 1461471212, "last_edit_date": 1461474308, "question_id": 36819214, "link": "https://stackoverflow.com/questions/36819214/using-perl-to-rename-files-in-windows", "title": "Using Perl to rename files in windows", "body": "<p>My program needs to rename files that end like this </p>\n\n<p>file(1)\nfile(2)\nfile(3)</p>\n\n<p>I want them to be renamed to this</p>\n\n<p>file_1\nfile_2\nfile_3</p>\n\n<p>I attempted this in c++ but that does not seem efficient. I think Perl would be great for it but do not know where to start even.</p>\n"}, {"tags": ["perl", "http-headers", "cgi", "shopify", "webhooks"], "comments": [{"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 1, "creation_date": 1461477462, "post_id": 36818814, "comment_id": 61211724, "body": "Which webserver or framework do you use?"}, {"owner": {"reputation": 770, "user_id": 1108056, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/db29ab9496d7cf1beed295ebdd1e5677?s=128&d=identicon&r=PG", "display_name": "AnotherParker", "link": "https://stackoverflow.com/users/1108056/anotherparker"}, "reply_to_user": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 0, "creation_date": 1461478080, "post_id": 36818814, "comment_id": 61211822, "body": "Just plain Perl on Apache, no framework."}, {"owner": {"reputation": 770, "user_id": 1108056, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/db29ab9496d7cf1beed295ebdd1e5677?s=128&d=identicon&r=PG", "display_name": "AnotherParker", "link": "https://stackoverflow.com/users/1108056/anotherparker"}, "reply_to_user": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 0, "creation_date": 1525195406, "post_id": 36818814, "comment_id": 87259391, "body": "Can the people downvoting me please explain why they thought my question was ill-posed, and explain how it could be improved?"}], "answers": [{"comments": [{"owner": {"reputation": 770, "user_id": 1108056, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/db29ab9496d7cf1beed295ebdd1e5677?s=128&d=identicon&r=PG", "display_name": "AnotherParker", "link": "https://stackoverflow.com/users/1108056/anotherparker"}, "edited": false, "score": 0, "creation_date": 1461546649, "post_id": 36821655, "comment_id": 61232448, "body": "Thanks, this is very helpful. Local requests seem to work."}, {"owner": {"reputation": 770, "user_id": 1108056, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/db29ab9496d7cf1beed295ebdd1e5677?s=128&d=identicon&r=PG", "display_name": "AnotherParker", "link": "https://stackoverflow.com/users/1108056/anotherparker"}, "edited": false, "score": 0, "creation_date": 1461550673, "post_id": 36821655, "comment_id": 61233171, "body": "Not sure what it was, but this helped me track it down. Perhaps an underscore/hyphen issue."}, {"owner": {"reputation": 770, "user_id": 1108056, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/db29ab9496d7cf1beed295ebdd1e5677?s=128&d=identicon&r=PG", "display_name": "AnotherParker", "link": "https://stackoverflow.com/users/1108056/anotherparker"}, "edited": false, "score": 1, "creation_date": 1461550688, "post_id": 36821655, "comment_id": 61233179, "body": "Also I&#39;d use text/plain instead of text/html as the Content-type."}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1461561587, "post_id": 36821655, "comment_id": 61235708, "body": "Thanks @ikegami for the corrections. Wrote the answer on via Smartphone and obviously got some typos. :("}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": true, "score": 2, "last_activity_date": 1461561610, "last_edit_date": 1461561610, "creation_date": 1461491839, "answer_id": 36821655, "question_id": 36818814, "link": "https://stackoverflow.com/questions/36818814/my-cgi-script-not-receiving-custom-headers/36821655#36821655", "title": "My CGI script not receiving custom headers", "body": "<p>Plain apache sets environment variables for HTTP headers. Try it without any wrapper first. You might also try <code>printenv.cgi</code>:</p>\n\n<pre><code>#!/usr/bin/perl\nuse Data::Dumper;\n\nprint \"Content-type: text/plain\\r\\n\\r\\n\".Dumper(\\%ENV);\n</code></pre>\n\n<p>Call printenv or your script manually to check if the caller might cause the problem:</p>\n\n<pre><code>curl -H \"Foo: Bar\" http://localhost/cgi-bin/printenv.cgi\n</code></pre>\n\n<p>You might also want to dump to a file if your script is being called as API.</p>\n\n<p>See also <a href=\"http://httpd.apache.org/docs/current/howto/cgi.html\" rel=\"nofollow\">http://httpd.apache.org/docs/current/howto/cgi.html</a></p>\n"}], "owner": {"reputation": 770, "user_id": 1108056, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/db29ab9496d7cf1beed295ebdd1e5677?s=128&d=identicon&r=PG", "display_name": "AnotherParker", "link": "https://stackoverflow.com/users/1108056/anotherparker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 860, "favorite_count": 0, "accepted_answer_id": 36821655, "answer_count": 1, "score": 0, "last_activity_date": 1461561610, "creation_date": 1461466755, "last_edit_date": 1461478064, "question_id": 36818814, "link": "https://stackoverflow.com/questions/36818814/my-cgi-script-not-receiving-custom-headers", "title": "My CGI script not receiving custom headers", "body": "<p>I'm writing a CGI script (Perl on Apache, no other framework) that's supposed to be a webhook endpoint. The technical details are it's supposed to receive events from a Shopify store, but that's semi-irrelevant. Shopify tells me that in order to verify that the webhook came from them, I need to calculate the HMAC using a secret key they provide, and make sure it matches the value in the <code>X-SHOPIFY-HMAC-SHA256</code> header. I've used requestb.in to look at the webhook as it's sent, and I can verify that the http client they're using is sending the X-header.</p>\n\n<p>However, when my CGI script runs, I only get the bog-standard headers. X-SHOPIFY-HMAC-SHA256 is neither found in Perl CGI module <code>http()</code> nor in the <code>%ENV</code> environment variables. (I read <a href=\"https://stackoverflow.com/questions/4007007/how-do-i-access-the-http-header-of-request-in-a-cgi-script\">How do I access the HTTP Header of request in a CGI script?</a> and <a href=\"https://stackoverflow.com/questions/4949276/how-to-fetch-http-headers-in-perl-when-using-cgi\">How to fetch HTTP headers in perl when using CGI</a>)</p>\n\n<p>I'm using cgiwrap to get my script additional privileges, but that shouldn't stop me from seeing the headers right?</p>\n"}, {"tags": ["macos", "perl", "darwin", "dss"], "comments": [{"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1461565682, "post_id": 36817310, "comment_id": 61237312, "body": "Darwin Streaming Server is functionally obsolete. There have been no new releases since 2007! I&#39;d avoid using it for any new projects."}, {"owner": {"reputation": 47, "user_id": 4378538, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/082071757248ab892f00eafb2c7d362e?s=128&d=identicon&r=PG&f=1", "display_name": "venito", "link": "https://stackoverflow.com/users/4378538/venito"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1461621283, "post_id": 36817310, "comment_id": 61272502, "body": "You are right, I still needed to try because I haven&#39;t found many options for what I need (an open source server able to stream mp4 over RTSP). If I wanted to use it i&#39;d need to adapt some stuff (and dedicate some time to learn Perl) so I guess I&#39;ll keep looking."}], "answers": [{"tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": true, "score": 0, "last_activity_date": 1461562986, "creation_date": 1461562986, "answer_id": 36832806, "question_id": 36817310, "link": "https://stackoverflow.com/questions/36817310/darwin-streaming-server-install-problems-os-x/36832806#36832806", "title": "Darwin Streaming Server install problems os x", "body": "<p>Looks like <code>$messages{\"en\"}</code> is a <strong><a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow\">HashRef</a></strong>: A pointer to some memory address holding a key-value-store. You could even print the associated memory address:</p>\n\n<pre><code>perl -le 'my $hashref = {}; print $hashref;'\nHASH(0x1548e78)\n</code></pre>\n\n<p>0x1548e78 is the address, but it's only valid within the same running process. Re-run the sample command and you'll get different addresses each time.</p>\n\n<p><em>HASH(0x1548e78)</em> is also just a human-readable representation of the real stored value. Setting <code>$hashref2=\"HASH(0x1548e78)\";</code> won't create a real reference, just a copy of the human-readable string.</p>\n\n<p>You could easily proof this theory using <code>print $ENV{\"QTSSADMINSERVER_EN_MESSAGEHASH\"}</code> in both script.</p>\n\n<p><a href=\"http://search.cpan.org/perldoc?Data::Dumper\" rel=\"nofollow\">Data::Dumper</a> is typically used to show the contents of the referenced hash (memory location):</p>\n\n<pre><code>use Data::Dumper;\nprint Dumper($messages{\"en\"});\n# or \nprint Dumper($ENV{\"QTSSADMINSERVER_EN_MESSAGEHASH\"});\n</code></pre>\n\n<p>This will also show if the pointer/reference could be dereferenced in both scripts.</p>\n\n<p>The solution for your problem is probably passing the value instead of the HashRef:</p>\n\n<pre><code>$ENV{\"QTSSADMINSERVER_EN_SUN\"} = $messages{\"en\"}-&gt;{SunStr};\n</code></pre>\n\n<p>Best Practice is using a -> between both keys. The \" or ' quotes for the key also <a href=\"http://perldoc.perl.org/perlref.html#Not-so-symbolic-references\" rel=\"nofollow\">optional if the key is a plain word</a>.</p>\n\n<p>But passing everything through environment variables feels wrong. They might not be able to hold references on OSX (I don't know). You might want to extract the string storage to a include file and load it via <em><a href=\"http://perldoc.perl.org/functions/require.html\" rel=\"nofollow\">require</a></em>.</p>\n\n<p>See <a href=\"http://www.perlmaven.com/\" rel=\"nofollow\">http://www.perlmaven.com/</a> or <a href=\"http://learn.perl.org\" rel=\"nofollow\">http://learn.perl.org</a> for more about Perl.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7568113, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/668d2518e5c3c07c55d947091e78a891?s=128&d=identicon&r=PG", "display_name": "guangbin", "link": "https://stackoverflow.com/users/7568113/guangbin"}, "is_accepted": false, "score": 0, "last_activity_date": 1487153698, "creation_date": 1487153698, "answer_id": 42246424, "question_id": 36817310, "link": "https://stackoverflow.com/questions/36817310/darwin-streaming-server-install-problems-os-x/42246424#42246424", "title": "Darwin Streaming Server install problems os x", "body": "<p>fix code:</p>\n\n<pre><code>$$ENV{\"QTSSADMINSERVER_EN_MESSAGEHASH\"} = $messages{\"en\"};\n\nsub GetMessageHash\n{\n   return $$ENV{\"QTSSADMINSERVER_EN_MESSAGEHASH\"};\n}\n</code></pre>\n\n<p>ref:\n<a href=\"https://github.com/guangbin79/dss6.0.3-linux-patch\" rel=\"nofollow noreferrer\">https://github.com/guangbin79/dss6.0.3-linux-patch</a></p>\n"}], "owner": {"reputation": 47, "user_id": 4378538, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/082071757248ab892f00eafb2c7d362e?s=128&d=identicon&r=PG&f=1", "display_name": "venito", "link": "https://stackoverflow.com/users/4378538/venito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 36832806, "answer_count": 2, "score": 1, "last_activity_date": 1487153698, "creation_date": 1461451559, "last_edit_date": 1495540394, "question_id": 36817310, "link": "https://stackoverflow.com/questions/36817310/darwin-streaming-server-install-problems-os-x", "title": "Darwin Streaming Server install problems os x", "body": "<p>My problem is the same as the one mentioned in <a href=\"https://stackoverflow.com/questions/30993243/dssdarwin-streaming-server-install-failed-on-os-x10-10/31041950#31041950\">this</a> answer. I've been trying to understand the code and this is what I learned:</p>\n\n<p>It is failing in the file <em>parse_xml.cgi</em>, tries to get messages (<code>return $message{$name}</code>) from a file named <em>messages</em> (located in the html_en directory).\nThe $messages value comes from the method <code>GetMessageHash</code> in file <em>adminprotocol-lib.pl</em>:</p>\n\n<pre><code>sub GetMessageHash\n{\n   return $ENV{\"QTSSADMINSERVER_EN_MESSAGEHASH\"}\n}\n</code></pre>\n\n<p>The <code>$ENV{\"QTSSADMINSERVER_EN_MESSAGEHASH\"}</code> is set in the file <em>streamingadminserver.pl</em>:</p>\n\n<pre><code>$ENV{\"QTSSADMINSERVER_EN_MESSAGEHASH\"} = $messages{\"en\"}\n</code></pre>\n\n<p>I dont know anything about Perl so I have no idea of what the problem can be, for what I saw <code>$messages{\"en\"}</code> has the correct value (if I do <code>print($messages{\"en\"}{'SunStr'}</code> I get the value \"Sun\")). </p>\n\n<p>However, if I try   to do <code>print($ENV{\"QTSSADMINSERVER_EN_MESSAGEHASH\"}{'SunStr'}</code> I get nothing. Seems like <code>$ENV{\"QTSSADMINSERVER_EN_MESSAGEHASH\"}</code> is not set</p>\n\n<p>I tried this simple example and it worked fine:</p>\n\n<pre><code>$ENV{\"HELLO\"} = \"hello\";\nprint($ENV{\"HELLO\"});\n</code></pre>\n\n<p>and it works fine, prints \"hello\".</p>\n\n<p>Any idea of what the problem can be?</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1461441614, "post_id": 36815223, "comment_id": 61203988, "body": "Why can&#39;t you use a loop in perl? It&#39;s a basic tool. In this context, what do you mean by &quot;I need it to be a variable&quot; as one does not preclude the other?  I&#39;ve been doing perl for 20+, but I&#39;m having some difficulty understanding your intent, desire, and problem constraints. Otherwise, an answer would be quite simple. Several different methods, in fact."}], "answers": [{"comments": [{"owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "edited": false, "score": 0, "creation_date": 1461443524, "post_id": 36815468, "comment_id": 61204661, "body": "downvoter, pls comment to allow for an improvement of the answer or give a reason to remove it altogether"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1461458579, "post_id": 36815468, "comment_id": 61208460, "body": "Why do you put all the data content in the <code>$s_raw</code> scalar (with <code>{ local $&#47; = undef; $s_raw = &lt;DATA&gt;; }</code>) for after using it with a filehandler? What a crazy idea! You can obtain the same result reading the data content line by line writing: <code>while (&lt;DATA&gt; &amp;&amp; $n_lines &lt; 10) {</code>"}, {"owner": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 2, "creation_date": 1461484146, "post_id": 36815468, "comment_id": 61213067, "body": "@Casimir, that&#39;s for emulating the context of the question: <i>Im trying to show the first ten lines of a large string</i>  - Unfortunately it seems this has not been understood...  this answer is far better than the one accepted."}, {"owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1461489870, "post_id": 36815468, "comment_id": 61214369, "body": "@CasimiretHippolyte The wrapper code is indeed for setup purposes of the demo script only and does not belong to the actual solution between &#39;start&#39;/&#39;end&#39; comments. Thanks for pointing out that this remains unclear."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1482169855, "post_id": 36815468, "comment_id": 69655577, "body": "Perl allows trailing commas so you don&#39;t have to use the wacky SQL idiom with leading commas :)"}], "tags": [], "owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "is_accepted": false, "score": 1, "last_activity_date": 1461490055, "last_edit_date": 1461490055, "creation_date": 1461439987, "answer_id": 36815468, "question_id": 36815223, "link": "https://stackoverflow.com/questions/36815223/how-can-i-make-perl-print-first-ten-lines-of-a-string/36815468#36815468", "title": "How can I make Perl print first ten lines of a string?", "body": "<p>Try the following solution between <code>&gt;&gt;&gt;&gt; START...</code> and <code>&lt;&lt;&lt;&lt; END...</code> comments (The remainder is wrapper code to turn it into a standalone script for demo/testing purposes). After the solution section, <code>$s_start</code> will contain the first 10 lines of <code>$s_raw</code>:</p>\n\n<pre><code>#!/usr/bin/perl\n#\nuse warnings;\n\nmy (\n      $n_lines\n    , $s_raw\n    , $s_start\n    , $s_thisline\n);\n\n{ local $/ = undef; $s_raw = &lt;DATA&gt;; }\n\n#&gt;&gt;&gt;&gt; START of core code section\n$n_lines = 0;\nopen $fh_raw, \"&lt;\", \\$s_raw;\nwhile ( ($n_lines &lt; 10) &amp;&amp; ($s_thisline = &lt;$fh_raw&gt;) ) {\n    $s_start .= $s_thisline;\n    $n_lines++;\n}\nclose $fh_raw;\n#&lt;&lt;&lt;&lt; END of core code section\n\nprint $s_start;\nexit(0);\n\n__DATA__\nThis is a test\nwith lots of lines\nand\na bit\nrepetitive in nature\nhowever\nit \nserves the purpose\nof demonstrating\nthe\ncode above\n...(arbitrarily more stuff) ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "edited": false, "score": 0, "creation_date": 1461484494, "post_id": 36816196, "comment_id": 61213156, "body": "@collapsar&#39;s answer is more efficient since he&#39;s just reading the 10 first lines of the variable, although syntactically more complex since he&#39;s using the concept of linking a scalar variable to a file handler. Here instead, you are duplicating the <code>$string</code> content in a splitted array just to discard it afterwards."}, {"owner": {"reputation": 32, "user_id": 1946387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e04f0a7914c103b0ff513e6d82a530b1?s=128&d=identicon&r=PG", "display_name": "atom12", "link": "https://stackoverflow.com/users/1946387/atom12"}, "reply_to_user": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "edited": false, "score": 0, "creation_date": 1516000998, "post_id": 36816196, "comment_id": 83499481, "body": "Efficient but hard to read and buggy to maintain.  I&#39;d still much rather put this into implementation and take the clarity of action."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 1, "creation_date": 1516018399, "post_id": 36816196, "comment_id": 83508367, "body": "Well, until you have a files that&#39;s several gigabytes you&#39;d say that."}], "tags": [], "owner": {"reputation": 32, "user_id": 1946387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e04f0a7914c103b0ff513e6d82a530b1?s=128&d=identicon&r=PG", "display_name": "atom12", "link": "https://stackoverflow.com/users/1946387/atom12"}, "is_accepted": true, "score": -1, "last_activity_date": 1461444301, "creation_date": 1461444301, "answer_id": 36816196, "question_id": 36815223, "link": "https://stackoverflow.com/questions/36815223/how-can-i-make-perl-print-first-ten-lines-of-a-string/36816196#36816196", "title": "How can I make Perl print first ten lines of a string?", "body": "<p>If you want to do this in the code, split the paragraph into a list, use an array slice to get the first 10 elements and join them back together again by adding the newlines back.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\n\nmy $string = \"line1\nline2\nline3\nline4\nline5\nline6\nline7\nline8\nline9\nline10\nline11\nline12\";\n\n#  turn the lines into a list by splitting on newline\nmy @lines = split \"\\n\", $string;\n\n#  take an array slice of the first 10 list items and join them into a string\n#  delimited by a newline\nmy $first_ten = join \"\\n\", @lines[0 .. 9];\n\n#  print your 10 lines\nprint $first_ten;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 2, "last_activity_date": 1482247166, "last_edit_date": 1482247166, "creation_date": 1482169864, "answer_id": 41228299, "question_id": 36815223, "link": "https://stackoverflow.com/questions/36815223/how-can-i-make-perl-print-first-ten-lines-of-a-string/41228299#41228299", "title": "How can I make Perl print first ten lines of a string?", "body": "<p>Perl allows you to open a filehandle on a string. You can then use filehandle idioms to \"read\" the string.</p>\n\n<pre><code>my $string = &lt;&lt;\"HERE\";\nThis is the first line\nThis is the second line\n3rd\n4th\n5th\n6th\nseventh\none plus seventh\neighth\ntenth minus one\ntenth\nshould not go this far\nway to far\nokay stop now, srsly\nThis is the last line\nHERE\n\n\nopen my $fh, '&lt;:utf8', \\ $string or die;\nwhile( 0 .. 10 ) {\n    print { STDOUT } scalar &lt;$fh&gt;;\n    }\nclose $fh;\n</code></pre>\n\n<p>In this example, instead of a filename I give <code>open</code> a reference to a scalar. Now I have a filehandle on that scalar.</p>\n\n<p>In the <code>while</code>, I use the flip-flop operator. It looks like the range operator, but in boolean context it's different. It is true when the first condition is true, and stays true until the second condition is true. That is, it turns on, stays on, then turns off.</p>\n\n<p>When you use number literals with the flip flop, it looks at the line number for the currently read filehandle (in this case $fh). So, we turn it on when the line number is 0 and turn it off when the line number is 10. That means that the loop doesn't execute when the line number is 10 because the condition is now false. But, that's okay because that's actually line 11.</p>\n\n<p>Or, you can do that with a counting <code>for</code> loop:</p>\n\n<pre><code>open my $fh, '&lt;:utf8', \\ $string or die;\nfor( my $i = 0; $i &lt;= 10; $i++ ) {\n    print { STDOUT } scalar &lt;$fh&gt;;\n    }\nclose $fh;\n</code></pre>\n\n<p>In both examples I use <code>scalar &lt;$fh&gt;</code> to get the next line because I used it inline with the <code>print</code>, a list context operator. I don't want all the lines. I surround the output handle in braces to set it apart from the rest of what's going on.</p>\n\n<p>But, you're asking about it being in a bash script it looks like. Anything you can do in a \"normal\" perl program you can do in the argument to <code>-e</code>:</p>\n\n<pre><code>perl -e 'open my $fh, q(&lt;:utf8), \\ $ARGV[0] or die;\n    for( my $i = 0; $i &lt;= 10; $i++ ) {\n        print { STDOUT } scalar &lt;$fh&gt;;\n        }\n    close $fh;' string_arg\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 6241491, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207806262861421/picture?type=large", "display_name": "Michael Morris", "link": "https://stackoverflow.com/users/6241491/michael-morris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1528, "favorite_count": 0, "accepted_answer_id": 36816196, "answer_count": 3, "score": -1, "last_activity_date": 1484280728, "creation_date": 1461438569, "last_edit_date": 1484280728, "question_id": 36815223, "link": "https://stackoverflow.com/questions/36815223/how-can-i-make-perl-print-first-ten-lines-of-a-string", "title": "How can I make Perl print first ten lines of a string?", "body": "<p>I'm trying to show the first ten lines of a large string (first 10 lines of a paragraph). I've tried to use: </p>\n\n<pre><code> $lines = head-10 $string\n</code></pre>\n\n<p>I saw some examples that use <code>while</code> loops but my script can't facilicate that, I need it to be a variable.</p>\n\n<p>Next I tried to use:</p>\n\n<pre><code> $string = perl -pe'$.&gt;10&amp;&amp;last'\n</code></pre>\n\n<p>which gave me the desired result by typing</p>\n\n<pre><code>String= \"$(string | head -n10)\"\n</code></pre>\n"}, {"tags": ["perl", "pattern-matching"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1461431872, "post_id": 36813902, "comment_id": 61200663, "body": "You don&#39;t need 5.10 to use Regexp::Assemble. In fact, Regexp::Assemble&#39;s main use and the one you are interested (optimizing alternations) became useless in 5.10 (since it became builtin)."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1461431949, "post_id": 36813902, "comment_id": 61200691, "body": "@ikegami You are referring to the <code>~~</code> operator, right? Unfortunately my script must also run with 5.8.8 under AIX with <i>no</i> extras installed. :-("}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1461432411, "post_id": 36813902, "comment_id": 61200873, "body": "No, <code>~~</code> is experimental and likely to change. It should not be used. // R::A basically does <code>my $re = join &#39;|&#39;, @regex_patterns;</code>, but optimizes the output in a way that&#39;s not needed in 5.10+ // That&#39;s not true. You installed a script. You can therefore install R::A."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1461436081, "post_id": 36813902, "comment_id": 61202206, "body": "I also found <code>~~</code> suspicious and am glad to hear that R::A seems superfluous for my case. // Technically true, but some &quot;code from the internet&quot; would have to be ack&#39;ed by people from ITSec departments. It&#39;s not that easy."}], "answers": [{"tags": [], "owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "is_accepted": false, "score": 1, "last_activity_date": 1461431950, "creation_date": 1461431950, "answer_id": 36814005, "question_id": 36813902, "link": "https://stackoverflow.com/questions/36813902/multiple-patterns-with-or-determine-all-matches/36814005#36814005", "title": "Multiple patterns with &quot;|&quot; (&quot;or&quot;): determine all matches?", "body": "<p>Do you care about the position of the match? If not, then you should use \"non-capturing parenthes\": <code>(?:..)</code> combined with a global match flag <code>/g</code>:</p>\n\n<pre><code>@matches = ( 'sjd one skj two sjf' =~ /(?:\\bone\\b)|(?:\\btwo\\b)|(?:\\bthree\\b)/g );\n</code></pre>\n\n<p>This produces:</p>\n\n<pre><code>$VAR1 = [\n          'one',\n          'two'\n        ];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 563, "user_id": 463328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a0e41e870dca839723fcdbbf345dee4?s=128&d=identicon&r=PG", "display_name": "Adam Carr", "link": "https://stackoverflow.com/users/463328/adam-carr"}, "edited": false, "score": 0, "creation_date": 1461432079, "post_id": 36814018, "comment_id": 61200748, "body": "I would suggest that this best way if you don&#39;t care what match has triggered the capture.   For example I want to capture a line in the log file if this pattern is matched."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 563, "user_id": 463328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a0e41e870dca839723fcdbbf345dee4?s=128&d=identicon&r=PG", "display_name": "Adam Carr", "link": "https://stackoverflow.com/users/463328/adam-carr"}, "edited": false, "score": 0, "creation_date": 1461432269, "post_id": 36814018, "comment_id": 61200813, "body": "Updated my answer."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1461432311, "post_id": 36814018, "comment_id": 61200828, "body": "I think I have to amend my question: actually I <i>do</i> care which match triggered the capture because the line then need further processing (depending on which one matched)."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1461432329, "last_edit_date": 1461432329, "creation_date": 1461432012, "answer_id": 36814018, "question_id": 36813902, "link": "https://stackoverflow.com/questions/36813902/multiple-patterns-with-or-determine-all-matches/36814018#36814018", "title": "Multiple patterns with &quot;|&quot; (&quot;or&quot;): determine all matches?", "body": "<p>The following finds all the matches, but the output isn't what you requested:</p>\n\n<pre><code>my @matches = /\\b(one|two|three)\\b/g;\n</code></pre>\n\n<p>The following does exactly what you want:</p>\n\n<pre><code>my @matches;\n($matches[0]) = /\\b(one)\\b/;\n($matches[1]) = /\\b(two)\\b/;\n($matches[2]) = /\\b(three)\\b/;\n</code></pre>\n\n<p>The following does it all in one match:</p>\n\n<pre><code>my @matches = /\n   ^\n   (?= .* /\\b(one)\\b )\n   (?= .* /\\b(two)\\b )\n       .* /\\b(three)\\b\n/xs;\n</code></pre>\n"}], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 36814018, "answer_count": 2, "score": 0, "last_activity_date": 1461436813, "creation_date": 1461431363, "last_edit_date": 1495541762, "question_id": 36813902, "link": "https://stackoverflow.com/questions/36813902/multiple-patterns-with-or-determine-all-matches", "title": "Multiple patterns with &quot;|&quot; (&quot;or&quot;): determine all matches?", "body": "<p>I'm parsing logfiles and want to match a line against multiple patterns at once. I know I could benefit from <a href=\"http://search.cpan.org/perldoc/Regexp::Assemble\" rel=\"nofollow noreferrer\">Regexp::Assemble</a> as proposed in the answers to <a href=\"https://stackoverflow.com/q/1478083/5830574\">this question</a>. Unfortunately I cannot use it (because it would need deploying on dozens of production machines running Perl from 5.8.8 to 5.18.0 and both AIX and SLES11/12).</p>\n\n<p>So I think I will have to stick with the <code>|</code>. I tried the following code: </p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Data::Printer;\nmy @matches;\n\n@matches = ( 'sjd one skj two sjf' =~ /(\\bone\\b)|(\\btwo\\b)|(\\bthree\\b)/ );\np @matches;\n</code></pre>\n\n<p>gives</p>\n\n<blockquote>\n<pre><code>[\n    [0] \"one\",\n    [1] undef,\n    [2] undef\n]\n</code></pre>\n</blockquote>\n\n<pre><code>@matches = ( 'sjd onnne skj two sjf' =~ /(\\bo.+e\\b)|(\\btwo\\b)|(\\bthree\\b)/ );\np @matches;\n</code></pre>\n\n<p>gives</p>\n\n<blockquote>\n<pre><code>[\n    [0] \"onnne\",\n    [1] undef,\n    [2] undef\n]\n</code></pre>\n</blockquote>\n\n<pre><code>@matches = ( 'sjd ONE skj two sjf' =~ /(\\bone\\b)|(\\btwo\\b)|(\\bthree\\b)/ );\np @matches;\n</code></pre>\n\n<p>gives</p>\n\n<blockquote>\n<pre><code>[\n    [0] undef,\n    [1] \"two\",\n    [2] undef\n]\n</code></pre>\n</blockquote>\n\n<pre><code>@matches = ( 'sjd ONE skj TWO sjf' =~ /(\\bone\\b)|(\\btwo\\b)|(\\bthree\\b)/ );\np @matches;\n</code></pre>\n\n<p>gives</p>\n\n<blockquote>\n<pre><code>[]\n</code></pre>\n</blockquote>\n\n<p>From this I can tell whether there was a match or not. <code>@matches</code> is falsy for no match or contains the match at the corresponding position.\nBut in the first two cases there are actually <em>two</em> matches. Is there a way to make the code output both matches in the first case, like:</p>\n\n<pre><code>@matches = ( 'sjd one skj two sjf' =~ /(\\bone\\b)|(\\btwo\\b)|(\\bthree\\b)/ );\np @matches;\n</code></pre>\n\n<blockquote>\n<pre><code>[\n    [0] \"one\",\n    [1] \"two\",\n    [2] undef\n]\n</code></pre>\n</blockquote>\n\n<p>I.e. so that <code>@matches</code> contains <em>all</em> matches, not just the first one?\nOr do I have to loop through my patterns with an if/else cascade or something?</p>\n\n<h3>Update</h3>\n\n<p>Re-reading my question and your comments I realized that my question wasn't clear. Sorry for that.<br>\nActually I <em>do</em> care which of the patterns matched and also the result of that match, i.e. for the line</p>\n\n<pre><code>$line = 'xxx two xxx one xxx';\n</code></pre>\n\n<p>and the patterns <code>/one/</code>, <code>/t.o/</code>, <code>/three/</code> I want to know that the pattern <code>/one/</code> matches <code>\"one\"</code> and the pattern <code>/t.o/</code> matches <code>\"two\"</code>. And that at best in one single step.</p>\n"}, {"tags": ["perl", "file", "logging", "printing"], "comments": [{"owner": {"reputation": 713, "user_id": 734598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce678494043d536df4555cc33338f41e?s=128&d=identicon&r=PG", "display_name": "sigmalha", "link": "https://stackoverflow.com/users/734598/sigmalha"}, "edited": false, "score": 2, "creation_date": 1461431727, "post_id": 36813717, "comment_id": 61200610, "body": "put the print part in the if brace ."}, {"owner": {"reputation": 301, "user_id": 3689165, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/1633692693/picture?type=large", "display_name": "firepro20", "link": "https://stackoverflow.com/users/3689165/firepro20"}, "reply_to_user": {"reputation": 713, "user_id": 734598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce678494043d536df4555cc33338f41e?s=128&d=identicon&r=PG", "display_name": "sigmalha", "link": "https://stackoverflow.com/users/734598/sigmalha"}, "edited": false, "score": 0, "creation_date": 1461435385, "post_id": 36813717, "comment_id": 61201941, "body": "@sigmalha yes that solved it thankyou"}], "answers": [{"tags": [], "owner": {"reputation": 301, "user_id": 3689165, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/1633692693/picture?type=large", "display_name": "firepro20", "link": "https://stackoverflow.com/users/3689165/firepro20"}, "is_accepted": false, "score": -1, "last_activity_date": 1461435535, "creation_date": 1461435535, "answer_id": 36814688, "question_id": 36813717, "link": "https://stackoverflow.com/questions/36813717/duplicate-data-when-extracting-logfile-using-perl/36814688#36814688", "title": "Duplicate data when extracting logfile using perl", "body": "<p>As correctly identified by @sigmalha the print part was incorrectly misplaced</p>\n"}], "owner": {"reputation": 301, "user_id": 3689165, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/1633692693/picture?type=large", "display_name": "firepro20", "link": "https://stackoverflow.com/users/3689165/firepro20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461435535, "creation_date": 1461430522, "question_id": 36813717, "link": "https://stackoverflow.com/questions/36813717/duplicate-data-when-extracting-logfile-using-perl", "title": "Duplicate data when extracting logfile using perl", "body": "<p>This is the contents of logfile I have</p>\n\n<pre><code>2016-04-22 14:19:44+0000 [cowrie.ssh.transport.HoneyPotSSHFactory] New connection: 185.103.252.14:47122 (172.17.0.2:2222) [session: 799f0f37]\n2016-04-22 14:19:45+0000 [SSHService ssh-userauth on HoneyPotTransport,15,185.103.252.14] login attempt [admin/1234] succeeded\n2016-04-22 14:19:51+0000 [cowrie.ssh.transport.HoneyPotSSHFactory] New connection: 185.103.252.14:43500 (172.17.0.2:2222) [session: 687010b3]\n2016-04-22 14:19:52+0000 [SSHService ssh-userauth on HoneyPotTransport,16,185.103.252.14] login attempt [admin/12345] failed\n2016-04-22 14:55:45+0000 [cowrie.ssh.transport.HoneyPotSSHFactory] New connection: 203.160.130.217:60302 (172.17.0.2:2222) [session: d3f90a34]\n2016-04-22 14:55:45+0000 [cowrie.ssh.transport.HoneyPotSSHFactory] New connection: 203.160.130.217:60304 (172.17.0.2:2222) [session: 636c7144]\n2016-04-22 14:55:45+0000 [cowrie.ssh.transport.HoneyPotSSHFactory] New connection: 203.160.130.217:60303 (172.17.0.2:2222) [session: d5956265]\n2016-04-22 14:56:01+0000 [SSHService ssh-userauth on HoneyPotTransport,17,203.160.130.217] login attempt [root/password] succeeded\n2016-04-22 14:56:01+0000 [SSHService ssh-userauth on HoneyPotTransport,18,203.160.130.217] login attempt [root/123456] succeeded\n2016-04-22 14:56:02+0000 [SSHService ssh-userauth on HoneyPotTransport,19,203.160.130.217] login attempt [root/123456] succeeded\n</code></pre>\n\n<p>Using Perl script, I want to output the source IP and source port when there is a line with \"New connection\". This is the script I have so far:</p>\n\n<pre><code>sub cowrieExtractor(){\n\n        open(FILE2, $cowrie) or die \"Can't open '$cowrie': $!\";\n       #        print FILE2 \"SourceIP,SourcePort\\n\";\n\n        open(LOG2, $path2) or die \"Can't open '$path2': $!\";\n        #while(my $lines = &lt;LOG2&gt;){\n\n        #my @x = split /[\\s:()]+/,$lines;\n        #print FILE2 join \"\\n\", @x;\n\n        #my ($ip, $port) = (split /[\\s:()]+/,$lines)[9,10];\n\n        #print FILE2 join \",\",($ip, $port);\n        #print FILE2 \"\\n\";\n\n        #we need to out the Source IP, Source Port from New Connection &amp; user/pass from login attempt #use pattern matching if\n\n        #}\n        #To output user and password of login attempt, set $ip variable to the contents of array at that x position of new\n        #connection to match the ip of the login attempt\n        $ip = \"\";\n        $port = \"\";\n\n        while(my $lines = &lt;LOG2&gt;){\n\n                if($lines =~ /New connection/){\n\n                ($ip, $port) = (split /[\\[\\]\\s:()]+/, $lines)[7,8];\n\n                }\n                #elsif($lines =~ /login attempt/){#and the ip of the new connection\n\n                #my($usr, $pass, $status) = (split /[\\s:\\[\\]\\/]+/, $lines)[,-1]\n\n#while(my $lines = &lt;LOG2&gt;){\n\n        #my @x = split /[\\s:()]+/,$lines;\n        #print FILE2 join \"\\n\", @x;\n\n        #my ($ip, $port) = (split /[\\s:()]+/,$lines)[9,10];\n\n        #print FILE2 join \",\",($ip, $port);\n        #print FILE2 \"\\n\";\n\n        #we need to out the Source IP, Source Port from New Connection &amp; user/pass from login attempt #use pattern matching if\n\n        #}\n        #To output user and password of login attempt, set $ip variable to the contents of array at that x position of new\n        #connection to match the ip of the login attempt\n        $ip = \"\";\n        $port = \"\";\n\n        while(my $lines = &lt;LOG2&gt;){\n\n                if($lines =~ /New connection/){\n\n                ($ip, $port) = (split /[\\[\\]\\s:()]+/, $lines)[7,8];\n\n                }\n                #elsif($lines =~ /login attempt/){#and the ip of the new connection\n\n                #my($usr, $pass, $status) = (split /[\\s:\\[\\]\\/]+/, $lines)[,-1]\n\n                #}\n\n        print FILE2 join \",\",($ip, $port);\n        print FILE2 \"\\n\";\n\n        }\n\n\n\n}\n</code></pre>\n\n<p>And this is the output in a csv file:</p>\n\n<pre><code>185.103.252.14,47122\n185.103.252.14,47122\n185.103.252.14,43500\n185.103.252.14,43500\n203.160.130.217,60302\n203.160.130.217,60304\n203.160.130.217,60303\n203.160.130.217,60303\n203.160.130.217,60303\n203.160.130.217,60303\n</code></pre>\n\n<p>I have some logic somewhere or syntax incorrect. Thanks for the help</p>\n"}, {"tags": ["perl", "zlib"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 1411502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1b07bf62f2b7055ecafe1ad5f156946d?s=128&d=identicon&r=PG", "display_name": "FGV", "link": "https://stackoverflow.com/users/1411502/fgv"}, "edited": false, "score": 0, "creation_date": 1461571026, "post_id": 36814434, "comment_id": 61240341, "body": "I thought of that, but it would be nicer/easier to have it all on one command.  As for the &quot;wT&quot; option, I thought Zlib would use the C zlib library and in its manual it says:  The mode parameter is as in fopen (&quot;rb&quot; or &quot;wb&quot;) but can also include a compression level (&quot;wb9&quot;) or a strategy [...] &#39;T&#39; will request transparent writing or appending with no compression and not using the gzip format."}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "reply_to_user": {"reputation": 87, "user_id": 1411502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1b07bf62f2b7055ecafe1ad5f156946d?s=128&d=identicon&r=PG", "display_name": "FGV", "link": "https://stackoverflow.com/users/1411502/fgv"}, "edited": false, "score": 0, "creation_date": 1461571233, "post_id": 36814434, "comment_id": 61240455, "body": "IO::ZLib-&gt;new creates compressed files. Piping the content through an extra module without any reason doesn&#39;t make sense, even if it would be able to output plain text."}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 1, "last_activity_date": 1461434378, "creation_date": 1461434378, "answer_id": 36814434, "question_id": 36812795, "link": "https://stackoverflow.com/questions/36812795/perl-iozlib-print-plain-text-file/36814434#36814434", "title": "perl IO::zlib print plain text file", "body": "<p>Why using IO::Zlib for uncompressed files at all?</p>\n\n<pre><code>my $fh;\nif (substr($out_file, -3) eq '.gz') {\n    $fh = IO::ZLib-&gt;new($out_file) or die \"Error opening $out_file: $!\";\n} else {\n    open $fh, '&gt;', $out_file or die \"Error opening $out_file: $!\";\n}\n</code></pre>\n\n<p>i didn't find any <em>wT</em> mode in <a href=\"http://search.cpan.org/~tomhughes/IO-Zlib-1.10/Zlib.pm\" rel=\"nofollow\">http://search.cpan.org/~tomhughes/IO-Zlib-1.10/Zlib.pm</a> or <a href=\"http://search.cpan.org/~pmqs/IO-Compress-2.069/lib/Compress/Zlib.pm\" rel=\"nofollow\">http://search.cpan.org/~pmqs/IO-Compress-2.069/lib/Compress/Zlib.pm</a></p>\n\n<p>PS: It's always good to include the filename and system error ($!) in a file-open related error message.</p>\n"}], "owner": {"reputation": 87, "user_id": 1411502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1b07bf62f2b7055ecafe1ad5f156946d?s=128&d=identicon&r=PG", "display_name": "FGV", "link": "https://stackoverflow.com/users/1411502/fgv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 326, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1461434378, "creation_date": 1461425793, "question_id": 36812795, "link": "https://stackoverflow.com/questions/36812795/perl-iozlib-print-plain-text-file", "title": "perl IO::zlib print plain text file", "body": "<p>I've a perl script that I'd like for the user to be able to choose whether the output is in Gzip or plain text file. I'm using perl <code>IO::zlib</code> and the idea would be to check the output file name and, if it has a <code>.gz</code> extension use Gzip, otherwise just print in plain text. I'm using a command like:</p>\n\n<p><code>my $EXCL = new IO::Zlib;</code></p>\n\n<p><code>$EXCL-&gt;open($out_file, (substr($out_file, -3) eq '.gz' ? \"wb9\" : \"wT\")) || die(\"ERROR: cannot open EXCL file!\") if($out_file);</code></p>\n\n<p>but the output file is always compressed!\nAm I doing something wrong?</p>\n\n<p>thanks,</p>\n"}, {"tags": ["linux", "bash", "perl", "scripting"], "comments": [{"owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "edited": false, "score": 0, "creation_date": 1461434167, "post_id": 36812068, "comment_id": 61201546, "body": "First get clear what your checks are. Then decide the tool. Will <code>grep</code> for the sections and comparing with a list of sections be ok, or should you make a small progam with <code>awk</code> of <code>perl</code>."}, {"owner": {"reputation": 67, "user_id": 6244648, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/jk6Ia.png?s=128&g=1", "display_name": "rdm_", "link": "https://stackoverflow.com/users/6244648/rdm"}, "reply_to_user": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "edited": false, "score": 0, "creation_date": 1461467046, "post_id": 36812068, "comment_id": 61209988, "body": "thanks @walter but <b>grep</b> wont help because i have to check at <i>start</i> that <b>sect1</b> is contained within a square bracket and is present in the list of permitted section names, after that is validated, i need to check that the <i>files</i> defined for that <b>sect1</b> exists and at last check <b>sect1</b> has been <i>terminated</i> properly using <i>sect1_ends</i> within square brackets. Then keep track of <b>sect1</b> syntax is <i>valid or not</i> and proceed to <b>sect2</b> even if it is <i>invalid</i> and at last i need to <i>print all the invalid sytax sections</i> for the user to correct."}, {"owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "edited": false, "score": 0, "creation_date": 1461530647, "post_id": 36812068, "comment_id": 61228515, "body": "Try with something like <code>while read -r linel do ... done &lt; inputfile</code> with things in your loop like <code>inSection=&quot;sect1&quot;</code> and <code>if [ -f &quot;${inSection}file1&quot; ]</code>"}, {"owner": {"reputation": 67, "user_id": 6244648, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/jk6Ia.png?s=128&g=1", "display_name": "rdm_", "link": "https://stackoverflow.com/users/6244648/rdm"}, "reply_to_user": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "edited": false, "score": 0, "creation_date": 1461586338, "post_id": 36812068, "comment_id": 61250174, "body": "many thanks @walter i have started working by reading line by line with <code>while</code> and based on the content im deciding what should be done but still the keeping track of invalid <code>sect</code> and continuing through other parts is little complex."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 6244648, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/jk6Ia.png?s=128&g=1", "display_name": "rdm_", "link": "https://stackoverflow.com/users/6244648/rdm"}, "edited": false, "score": 1, "creation_date": 1461585815, "post_id": 36832913, "comment_id": 61249842, "body": "Thanks @sebastian that solves capturing lines starting and ending with square brackets which will help in capturing <code>[sect]</code> and <code>[sect_ends]</code> but im not sure how the logic should flow through.As suggested by @walter i have started working with a <code>while</code> loop that reads line by line, decides if its a valid <code>sect start</code>and then go through all following lines till <code>sect_ends</code> and validate if <code>sect_ends</code> corresponds to <code>sect start</code>"}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 0, "last_activity_date": 1461563465, "creation_date": 1461563465, "answer_id": 36832913, "question_id": 36812068, "link": "https://stackoverflow.com/questions/36812068/syntax-checking-for-config-files/36832913#36832913", "title": "syntax checking for config files", "body": "<p>Your solution looks good, but <a href=\"http://perldoc.perl.org/perlrun.html#-n\" rel=\"nofollow\">-n reads lines from standard input</a> (STDIN). You need to feed your config file into STDIN to pass it to your script:</p>\n\n<pre><code>perl -lne 'print $1 while (/^\\[(.*?)\\]$/g)' &lt;config.ini\n</code></pre>\n\n<p>Alternate option would be using <a href=\"http://perldoc.perl.org/perlrun.html#-p\" rel=\"nofollow\">-p</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 6244648, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/jk6Ia.png?s=128&g=1", "display_name": "rdm_", "link": "https://stackoverflow.com/users/6244648/rdm"}, "edited": false, "score": 0, "creation_date": 1461779836, "post_id": 36850813, "comment_id": 61358980, "body": "wow that logic worked like a charm, i have improvised it to include more of my requirements.Thanks a ton."}, {"owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "reply_to_user": {"reputation": 67, "user_id": 6244648, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/jk6Ia.png?s=128&g=1", "display_name": "rdm_", "link": "https://stackoverflow.com/users/6244648/rdm"}, "edited": false, "score": 0, "creation_date": 1461788492, "post_id": 36850813, "comment_id": 61364419, "body": "I am happy this works out. You can accept the answer and put the ton on your bank account."}], "tags": [], "owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "is_accepted": true, "score": 1, "last_activity_date": 1461617422, "creation_date": 1461617422, "answer_id": 36850813, "question_id": 36812068, "link": "https://stackoverflow.com/questions/36812068/syntax-checking-for-config-files/36850813#36850813", "title": "syntax checking for config files", "body": "<p>I am happy to see you have tried. Try again with this prototype:</p>\n\n<pre><code>while read -r line; do\n   if [ ${#line} -eq 0 ]; then\n      continue # ignore empty lines\n   fi\n   if [[ \"${line}\" = \\[*\\] ]]; then\n      echo \"Line with [...]\"\n      if [ -n \"${inSection}\" ]; then\n         if [ \"${line}\" = \"${inSection/]/_ends]}\" ]; then\n            echo \"End of section\"\n            unset inSection\n         else\n            echo \"Invalid endtag ${line} while processing ${inSection}\"\n            exit 1\n         fi\n      else\n         echo \"Start of new section ${line}\"\n         inSection=\"${line}\"\n      fi\n   else\n      if [ -f \"${line}\" ]; then\n         echo \"OK file ${line}\"\n      else\n         echo \"NOK file ${line}\"\n      fi\n   fi\ndone &lt; inputfile\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 6244648, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/jk6Ia.png?s=128&g=1", "display_name": "rdm_", "link": "https://stackoverflow.com/users/6244648/rdm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 36850813, "answer_count": 2, "score": 0, "last_activity_date": 1461780949, "creation_date": 1461421689, "last_edit_date": 1461424948, "question_id": 36812068, "link": "https://stackoverflow.com/questions/36812068/syntax-checking-for-config-files", "title": "syntax checking for config files", "body": "<p>I have a requirement to check the syntax of some config files.</p>\n\n<p>The format of the config is as below:</p>\n\n<pre><code>[sect1]\nsect1file1\nsect1file2\n[sect1_ends]\n\n[sect2]\nsect2file1\nsect2file2\n[sect2_ends]\n</code></pre>\n\n<p>My requirement is to check the for start of <code>sect1</code> which is inside square brackets <code>[sect1]</code>, then check that the files <code>sect1file1</code> and <code>sect1file2</code> exist, then check for the end of <code>sect1</code> by reading <code>sect1_ends</code> inside square braces <code>[sect1_ends]</code>. Then repeat the same for <code>sect2</code>, and so on.</p>\n\n<p>There is already a set of section names which are permitted. My objective is to check whether the section names are in the list, and whether the syntax is without any error.</p>\n\n<p>I tried using </p>\n\n<pre><code> perl -lne 'print $1 while (/^\\[(.*?)\\]$/g)' &lt;config filename&gt;\n</code></pre>\n\n<p>but I'm not sure how to check and go through the file.</p>\n"}, {"tags": ["perl", "ubuntu"], "comments": [{"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 1, "creation_date": 1461424413, "post_id": 36810920, "comment_id": 61197880, "body": "Can you show a minimal but complete program that demonstrates the problem?"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1461415760, "creation_date": 1461415760, "answer_id": 36811034, "question_id": 36810920, "link": "https://stackoverflow.com/questions/36810920/can-perl-regex-only-deal-with-limited-text/36811034#36811034", "title": "Can perl regex only deal with limited text?", "body": "<p><em>\"It just doesnt respond at all\"</em> isn't very clear. A dot <code>.</code> in a regex pattern will ordinarily match any character except for a newline</p>\n\n<p>Probably your input data is spread across multiple lines?</p>\n\n<p>You can use the <code>/s</code> modifier to alter dot to match anything at all, but in that circumstance a pattern like <code>/hello\\s*(.+)$/s</code> will match <em>all of the rest of the file</em> after <code>hello</code></p>\n\n<p>You should explain what you're trying to achieve; then we could help better</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1461416301, "post_id": 36811051, "comment_id": 61195175, "body": "You should really explain what your code actually does. The OP is far from clear about what they want, and throwing in a guess without asking doesn&#39;t usually help a lot. Also, no one mentioned response times and so they&#39;re irrelevant. A very ordinary hard disk drive will read 100MB in a second, so unless the data is massive (the OP said &quot;hundreds of words&quot;, so about 10KB maximum) the read time is insignificant"}, {"owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461416656, "post_id": 36811051, "comment_id": 61195301, "body": "@Borodin, I&#39;ve added brief explanation"}], "tags": [], "owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "is_accepted": false, "score": -1, "last_activity_date": 1461416578, "last_edit_date": 1461416578, "creation_date": 1461415836, "answer_id": 36811051, "question_id": 36810920, "link": "https://stackoverflow.com/questions/36810920/can-perl-regex-only-deal-with-limited-text/36811051#36811051", "title": "Can perl regex only deal with limited text?", "body": "<p>You can try following approach:</p>\n\n<pre><code>my $output;\n\nwhile (my $line = &lt;$fh&gt;)\n{\n    if ($output)\n    {\n        $output .= $line;\n        next;\n    }\n\n    if ($line =~ /hello\\s*(.+)/)\n    {\n        $output = $1;\n    }\n}\n</code></pre>\n\n<p>I've tested it on a 150k+ line text file and it finished in less than a second.</p>\n\n<p>Basic logic here is that we go through all the lines in a file opened under <code>$fh</code> filehandle and look for a match. If match is found in a line, then we save the matched part of a line into the <code>$output</code> variable. For subsequent lines we do not perform any matching, instead we concatenate them into the <code>$output</code> variable. </p>\n\n<p>After all lines have been processed, the <code>$output</code> variable contains the line that matched our search string as well as all the lines that followed.</p>\n"}], "owner": {"reputation": 47, "user_id": 5103952, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/10f8944baa9ad1347c73c1e033e31127?s=128&d=identicon&r=PG&f=1", "display_name": "smiikr", "link": "https://stackoverflow.com/users/5103952/smiikr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 36811034, "answer_count": 2, "score": -3, "last_activity_date": 1461425406, "creation_date": 1461415067, "last_edit_date": 1461425406, "question_id": 36810920, "link": "https://stackoverflow.com/questions/36810920/can-perl-regex-only-deal-with-limited-text", "title": "Can perl regex only deal with limited text?", "body": "<p>I have been trying to match a string and output all the text after the match. </p>\n\n<p>e.g: I attempt to print everything after the word \"hello\"</p>\n\n<pre><code>$string = \"hello its a good day\"\n\noutput: its a good day.\n</code></pre>\n\n<p>the following code has worked very efficiently:</p>\n\n<pre><code>my ($extract) = $string =~ /hello\\s*(.+)$/;\n</code></pre>\n\n<p>The issue comes when I try use a large amount of text such as when the string is a file with hundreds of words (like a pragraph with multiple lines) and I want to only use the text after a certain word just like above. It just doesnt respond at all.</p>\n\n<p>example</p>\n\n<pre><code>Dear sally, how is your day, I heard things are getting better\netc etc\n\nhow is everyone\n\nsometimes. not alwyas etc etc etc etc\n\nkind regards\n</code></pre>\n\n<p>So then I want to capture everything after \"Dear sally\".</p>\n\n<p>the output would be:</p>\n\n<pre><code>, how is your day, I heard things are getting better\netc etc\n\nhow is everyone\n\nsometimes. not alwyas etc etc etc etc\n\nkind regards\n</code></pre>\n\n<p>I tried to use the split command instead but it just outputs numbers.</p>\n"}, {"tags": ["linux", "perl", "cgi", "kill"], "comments": [{"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1461410939, "post_id": 36810178, "comment_id": 61193271, "body": "Is the other process running with the same userid? Only root can send signals to a different user&#39;s process."}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1461410962, "post_id": 36810178, "comment_id": 61193282, "body": "Try including <code>$!</code> in the error message, so you see the reason for the error."}, {"owner": {"reputation": 1517, "user_id": 3420919, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/163b2d7861ae2b7fe5d25e0b86debb11?s=128&d=identicon&r=PG&f=1", "display_name": "RootPhoenix", "link": "https://stackoverflow.com/users/3420919/rootphoenix"}, "reply_to_user": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1461411043, "post_id": 36810178, "comment_id": 61193308, "body": "@Barmar How do I check the userid of the cgi perl script. and the other process."}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1461411110, "post_id": 36810178, "comment_id": 61193333, "body": "I assumed you would know if you&#39;re running both programs from the same account. But you can use <code>ps -l</code> to see the userids."}], "answers": [{"tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": true, "score": 3, "last_activity_date": 1461412582, "creation_date": 1461412582, "answer_id": 36810487, "question_id": 36810178, "link": "https://stackoverflow.com/questions/36810178/cannot-send-signal-to-another-process-in-perl/36810487#36810487", "title": "Cannot send signal to another process in perl", "body": "<p>You should extend your error message by $!:</p>\n\n<pre><code>my $pid = `pidof xyz`;\nkill 12, $pid or die \"could not kill $pid: $!\";\n</code></pre>\n\n<p>$! contains the last system call error: <a href=\"http://perldoc.perl.org/perlvar.html#%24ERRNO\" rel=\"nofollow\">http://perldoc.perl.org/perlvar.html#%24ERRNO</a></p>\n\n<p>You should also check if any PID has been found:</p>\n\n<pre><code>my $pid = `pidof xyz`;\ndie 'No PID found for xyz!' unless $pid;\nkill 12, $pid or die \"could not kill $pid: $!\";\n</code></pre>\n\n<p>A uid mismatch (as mentioned in the comments to your post) might be the reason. You could use <em>ps</em> to check:</p>\n\n<pre><code>my $pid = `pidof xyz`;\ndie 'No PID found for xyz!' unless $pid;\nsystem \"ps u $$ $pid\";\nkill 12, $pid or die \"could not kill $pid: $!\";\n</code></pre>\n\n<p>The output should look like this:</p>\n\n<pre><code>USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot         1  0.0  0.0 185388  5960 ?        Ss   08:31   0:01 /sbin/init splash\nsome      3159  0.0  0.0  27296  8836 pts/11   Ss   08:33   0:00 bash\n</code></pre>\n\n<p>The value of the <em>USER</em> column should be the same for both processes (the Perl process and the process being killed), otherwise you're not allowed to send any signal (except if your script runs as root, which isn't recommended).</p>\n"}], "owner": {"reputation": 1517, "user_id": 3420919, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/163b2d7861ae2b7fe5d25e0b86debb11?s=128&d=identicon&r=PG&f=1", "display_name": "RootPhoenix", "link": "https://stackoverflow.com/users/3420919/rootphoenix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 36810487, "answer_count": 1, "score": 1, "last_activity_date": 1461412582, "creation_date": 1461410694, "last_edit_date": 1461411011, "question_id": 36810178, "link": "https://stackoverflow.com/questions/36810178/cannot-send-signal-to-another-process-in-perl", "title": "Cannot send signal to another process in perl", "body": "<p>I have to send a sigusr2 signal number 12 to a process named xyz in a cgi perl script. I do the following:</p>\n\n<pre><code>my $pid = `pidof xyz`;\n\nkill 12, $pid or die \"could not kill: $pid\";\n</code></pre>\n\n<p>It dies when I press the button on which this command run.</p>\n\n<p>How can I send signal to a process named \"xyz\" in a cgi perl script.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "is_accepted": true, "score": 9, "last_activity_date": 1461407999, "creation_date": 1461407999, "answer_id": 36809704, "question_id": 36809605, "link": "https://stackoverflow.com/questions/36809605/perl-ref-does-not-print-the-hash-type/36809704#36809704", "title": "Perl ref() does not print the &#39;HASH&#39; type", "body": "<p>First of all, you should put <code>use strict;</code> and <code>use warnings;</code> at the top of your script (and do that for all the future Perl code as well). After doing so, you will see the following:</p>\n\n<pre><code>Global symbol \"%prices\" requires explicit package name at ./a.pl line 4.\nGlobal symbol \"%prices\" requires explicit package name at ./a.pl line 5.\nGlobal symbol \"%prices\" requires explicit package name at ./a.pl line 6.\nGlobal symbol \"$prices\" requires explicit package name at ./a.pl line 7.\nExecution of ./a.pl aborted due to compilation errors.\n</code></pre>\n\n<p>What it means is that you tried to use to separate variables: a <code>%prices</code> hash and a <code>$prices</code> scalar.</p>\n\n<p>After fixing variable declaration using <code>my %prices;</code>, you can get a reference to your <code>%prices</code> hash as follows:</p>\n\n<pre><code>my $prices_ref = \\%prices;\nprint ref($prices_ref);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 6511973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03030ce3cf2e310eda5bdc2d40554b24?s=128&d=identicon&r=PG&f=1", "display_name": "Stanislaw Romanski", "link": "https://stackoverflow.com/users/6511973/stanislaw-romanski"}, "is_accepted": false, "score": 0, "last_activity_date": 1501089512, "last_edit_date": 1501089512, "creation_date": 1501087575, "answer_id": 45332975, "question_id": 36809605, "link": "https://stackoverflow.com/questions/36809605/perl-ref-does-not-print-the-hash-type/45332975#45332975", "title": "Perl ref() does not print the &#39;HASH&#39; type", "body": "<p>From formal standpoint, the answer may be shorter:</p>\n\n<ol>\n<li>ref($prices) would return 1 if $prices value were a reference to another variable or false otherwise.</li>\n<li>ref($prices) is the first use of an undeclared variable $prices (previous lines refer to another undeclared variable - hash %prices).</li>\n<li>The value of $prices is undef and ref($prices) is an empty string.</li>\n<li><p>Probably, your idea was to write</p>\n\n<p><code>$prices-&gt;{'pizza'} = 12.00;\n$prices-&gt;{'coke'} = 1.25;\n$prices-&gt;{'sandwich'} = 3.00;\nprint ref($prices);</code></p></li>\n</ol>\n"}], "owner": {"reputation": 17540, "user_id": 579689, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/19a02ae5278db026442c8272ec458949?s=128&d=identicon&r=PG", "display_name": "Talespin_Kit", "link": "https://stackoverflow.com/users/579689/talespin-kit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 36809704, "answer_count": 2, "score": 0, "last_activity_date": 1501089512, "creation_date": 1461407401, "question_id": 36809605, "link": "https://stackoverflow.com/questions/36809605/perl-ref-does-not-print-the-hash-type", "title": "Perl ref() does not print the &#39;HASH&#39; type", "body": "<p>The following code does not print the 'HASH' type. What is wrong with this code ?</p>\n\n<pre><code>#! /usr/bin/perl\n$prices{'pizza'} = 12.00;\n$prices{'coke'} = 1.25;\n$prices{'sandwich'} = 3.00;\nprint ref($prices);\n</code></pre>\n"}, {"tags": ["bash", "perl", "shell", "ssh"], "comments": [{"owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "edited": false, "score": 0, "creation_date": 1461385573, "post_id": 36806520, "comment_id": 61186809, "body": "What happens when you simply type &quot;ssh expert@x.x.x.x&quot; at the shell prompt?"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 1, "creation_date": 1461387643, "post_id": 36806520, "comment_id": 61187142, "body": "You&#39;re not giving the <code>ssh</code> a target command, you&#39;ll get a shell prompt. So, what you want is <code>my @id = `ssh expert@... date`;</code> (e.g.)"}, {"owner": {"reputation": 1559, "user_id": 5553202, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/n9E6O.jpg?s=128&g=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5553202/sravan"}, "edited": false, "score": 0, "creation_date": 1461387916, "post_id": 36806520, "comment_id": 61187197, "body": "am able to login to remote while I simply use ssh in shell prompt"}], "answers": [{"tags": [], "owner": {"reputation": 162, "user_id": 3539775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/892a66074a0512f0fcf3018bb03d9a3d?s=128&d=identicon&r=PG", "display_name": "J Singh", "link": "https://stackoverflow.com/users/3539775/j-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1461389135, "creation_date": 1461389135, "answer_id": 36807006, "question_id": 36806520, "link": "https://stackoverflow.com/questions/36806520/ssh-perl-script-not-running/36807006#36807006", "title": "ssh perl script not running", "body": "<p>I would advice against using system ssh command inside perl code for below reasons:</p>\n\n<ol>\n<li>It makes parsing output difficult</li>\n<li>Error handling becomes difficult</li>\n<li>Less programming flexibility</li>\n</ol>\n\n<p>Rather, use a CPAN library, e.g. Net::SSH::Perl for firing SSH commands from Perl code.</p>\n\n<p>Its simple to open a shell using this module as described below:</p>\n\n<pre><code>$ssh-&gt;shell\n\nOpens up an interactive shell on the remote machine and connects it to your STDIN. This is most effective when used with a pseudo tty; otherwise you won't get a command line prompt, and it won't look much like a shell. For this reason--unless you've specifically declined one--a pty will be requested from the remote machine, even if you haven't set the use_pty argument to new (described above).\n\nThis is really only useful in an interactive program.\n\nIn addition, you'll probably want to set your terminal to raw input before calling this method. This lets Net::SSH::Perl process each character and send it off to the remote machine, as you type it.\n\nTo do so, use Term::ReadKey in your program:\n\n    use Term::ReadKey;\n    ReadMode('raw');\n    $ssh-&gt;shell;\n    ReadMode('restore');\n</code></pre>\n\n<p>Below is a quick example that demonstrates how easy it would be to use the same module to fire and parse command output:</p>\n\n<pre><code>  use Net::SSH::Perl;\n    my $ssh = Net::SSH::Perl-&gt;new($host);\n    $ssh-&gt;login($user, $pass);\n    my($stdout, $stderr, $exit) = $ssh-&gt;cmd($cmd);\n</code></pre>\n\n<p>Link to Net::SSH::Perl cpan documentation: <a href=\"http://search.cpan.org/~schwigon/Net-SSH-Perl-1.42/lib/Net/SSH/Perl.pm\" rel=\"nofollow\">http://search.cpan.org/~schwigon/Net-SSH-Perl-1.42/lib/Net/SSH/Perl.pm</a></p>\n\n<p>Another module which I prefer to use is Net::OpenSSH: <a href=\"http://search.cpan.org/~salva/Net-OpenSSH-0.70/lib/Net/OpenSSH.pm\" rel=\"nofollow\">http://search.cpan.org/~salva/Net-OpenSSH-0.70/lib/Net/OpenSSH.pm</a></p>\n\n<pre><code>use Net::OpenSSH;\n\n  my $ssh = Net::OpenSSH-&gt;new($host);\n  $ssh-&gt;error and\n    die \"Couldn't establish SSH connection: \". $ssh-&gt;error;\n\n  $ssh-&gt;system(\"ls /tmp\") or\n    die \"remote command failed: \" . $ssh-&gt;error;\n\n  my @ls = $ssh-&gt;capture(\"ls\");\n  $ssh-&gt;error and\n    die \"remote ls command failed: \" . $ssh-&gt;error;\n\n  my ($out, $err) = $ssh-&gt;capture2(\"find /root\");\n  $ssh-&gt;error and\n    die \"remote find command failed: \" . $ssh-&gt;error;\n\n  my ($rin, $pid) = $ssh-&gt;pipe_in(\"cat &gt;/tmp/foo\") or\n    die \"pipe_in method failed: \" . $ssh-&gt;error;\n\n  print $rin \"hello\\n\";\n  close $rin;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461575329, "post_id": 36809357, "comment_id": 61242906, "body": "Thought: why is it <i>talk to</i> and <i>listen to</i> instead of <i>talk to</i> and <i>listen from</i>? Ah English we love you"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1461575236, "last_edit_date": 1461575236, "creation_date": 1461405957, "answer_id": 36809357, "question_id": 36806520, "link": "https://stackoverflow.com/questions/36806520/ssh-perl-script-not-running/36809357#36809357", "title": "ssh perl script not running", "body": "<p>That is what you have asked your program to do. This line</p>\n\n<pre><code>`ssh expert\\@x.x.x.x`\n</code></pre>\n\n<ul>\n<li>Starts a new subprocess running ssh with the given parameters</li>\n<li>Exits that subprocess and returns any text output from ssh</li>\n</ul>\n\n<p>You presumably need to interact with the remote system once you have connected, so you either need the <em>perl</em> process to connect to the remote system, or you need to be able to listen and talk to the subprocess that hash connected before it exits</p>\n\n<p>The first is by far the simplest solution. If you use the <a href=\"https://metacpan.org/pod/Net::OpenSSH\" rel=\"nofollow\"><code>Net::OpenSSH</code></a> module and read its documentation then you will see that you can open a connection by creating an object. You can then send commands and retrieve the output using that object's <code>capture</code> method</p>\n"}], "owner": {"reputation": 1559, "user_id": 5553202, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/n9E6O.jpg?s=128&g=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5553202/sravan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 711, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1461575236, "creation_date": 1461384445, "last_edit_date": 1461388406, "question_id": 36806520, "link": "https://stackoverflow.com/questions/36806520/ssh-perl-script-not-running", "title": "ssh perl script not running", "body": "<p>I am trying to write a script that will ssh to a remote machine in perl.</p>\n\n<p>I'm not sure what's wrong but when I run the script, it prompts me for the root password and ends up with blank output after I give the password.</p>\n\n<p>Here's my script:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @id=`ssh expert\\@x.x.x.x`;\nprint\"@id\";\n</code></pre>\n"}, {"tags": ["json", "perl", "http", "get", "mojolicious"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1461361398, "post_id": 36803541, "comment_id": 61181447, "body": "You might be interested in <a href=\"http://www.martin-evans.me.uk/node/169\" rel=\"nofollow noreferrer\">martin-evans.me.uk/node/169</a> regarding the speed."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1461402319, "post_id": 36803541, "comment_id": 61190635, "body": "<code>Mojo::UserAgent</code> objects support <i>only</i> the <code>http</code> scheme. You would be better off using <code>LWP::UserAgent</code> instead, which transparently supports <code>http</code>, <code>https</code>, <code>ftp</code>, <code>file</code>, <code>mailto</code> and others"}], "answers": [{"comments": [{"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 1, "creation_date": 1461424439, "post_id": 36803576, "comment_id": 61197891, "body": "Note that File::Slurp has severe problems <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=83126\" rel=\"nofollow noreferrer\">rt.cpan.org/Public/Bug/Display.html?id=83126</a>"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1461361352, "last_edit_date": 1461361352, "creation_date": 1461360434, "answer_id": 36803576, "question_id": 36803541, "link": "https://stackoverflow.com/questions/36803541/fetching-json-in-perl/36803576#36803576", "title": "Fetching JSON in Perl", "body": "<p>User Agents are mainly for downloading files through http. They are usually not expected to handle filesystem URIs. You need to <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow\"><code>open</code></a> and <a href=\"http://perldoc.perl.org/perlopentut.html\" rel=\"nofollow\">read the file</a> yourself, or use a module like <a href=\"http://p3rl.org/File::Slurp\" rel=\"nofollow\">File::Slurp</a> that does it for you.</p>\n\n<p>It could look something like this.</p>\n\n<pre><code>use File::Slurp 'read_file';\n\nmethod getContent(\\@arrURLS) {\n    my %arrInfo;\n    my $resUserAgent = Mojo::UserAgent-&gt;new;\n    foreach my $strURL (@arrURLS) {\n        if (substr($strURL, 0, 4) eq 'file') {\n            $arrInfo{basename($strURL, '.json')} = read_file($strURL);\n        } else {\n            $resUserAgent-&gt;get($strURL =&gt; sub {\n                my($resUserAgent, $tx) = @_;\n                if ($tx-&gt;success) {\n                    my $strName = basename($strURL, '.json');\n                    my $arrData = $tx-&gt;res-&gt;body;\n                    $arrInfo{$strName} = $arrData;\n                }\n                Mojo::IOLoop-&gt;stop;\n            });\n            Mojo::IOLoop-&gt;start;\n        }\n    }\n    return \\%arrInfo;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1461361445, "post_id": 36803743, "comment_id": 61181462, "body": "I like the Path::Tiny approach and have never used it. But I would not recommend using Mechanize for a simple downloading task in production, unless you want to click a bunch of stuff before downloading."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1461361699, "post_id": 36803743, "comment_id": 61181565, "body": "I prefer Web::Scraper, but I use Mechanize very heavily in the Test:: flavour."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461405436, "post_id": 36803743, "comment_id": 61191505, "body": "@jm666: <i>&quot;On the other side, you need learn one thing for most of your needs&quot;</i> Yes, but the downside is that you <i>have</i> only learned one thing. It is useful to understand <i>LWP</i> because it will do far more than the naive <code>WWW::Mechanize</code> interface implies, and <a href=\"https://metacpan.org/pod/HTTP::Tiny\" rel=\"nofollow noreferrer\">HTTP::Tiny</a> is very useful for a different set of problems. If you always throw a nuke at either a planet or a soldier then you aren&#39;t using your armoury well"}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 2, "last_activity_date": 1461424459, "last_edit_date": 1461424459, "creation_date": 1461361286, "answer_id": 36803743, "question_id": 36803541, "link": "https://stackoverflow.com/questions/36803541/fetching-json-in-perl/36803743#36803743", "title": "Fetching JSON in Perl", "body": "<p>Myself using <a href=\"https://metacpan.org/pod/WWW::Mechanize\" rel=\"nofollow\">WWW::Mechanize</a> for all such tasks. From the doc:</p>\n\n<blockquote>\n  <p>WWW::Mechanize is a proper subclass of LWP::UserAgent and you can also\n  use any of LWP::UserAgent's methods.</p>\n</blockquote>\n\n<p>what means you can feed it with <code>file://</code> type URLs too.</p>\n\n<p>For example, the following one-liner dumps your <code>passwd</code> file.</p>\n\n<pre><code>perl -MWWW::Mechanize -E 'say WWW::Mechanize-&gt;new-&gt;get(\"file://etc/passwd\")-&gt;content'\n</code></pre>\n\n<p>or an example without any error handling...</p>\n\n<pre><code>use 5.014;\nuse warnings;\nuse WWW::Mechanize;\nmy $mech = WWW::Mechanize-&gt;new;\n$mech-&gt;get('file://some/path');\nsay $mech-&gt;content;\n</code></pre>\n\n<p>Anyway, probably is better to use for local files some <code>file-based</code> utility, myself using for all file-things the <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow\">Path::Tiny</a> module, which has (not limited only) an method for file slurping, such:</p>\n\n<pre><code>use Path::Tiny;\nmy $content = path('/some/path')-&gt;slurp;\n</code></pre>\n\n<p>or just plain perl:</p>\n\n<pre><code>open my $fh, '&lt;', '/some/file' or die \"...\";\nmy $content = do { local $/; &lt;$fh&gt; };\nclose $fh;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1461405057, "last_edit_date": 1592644375, "creation_date": 1461404349, "answer_id": 36809090, "question_id": 36803541, "link": "https://stackoverflow.com/questions/36803541/fetching-json-in-perl/36809090#36809090", "title": "Fetching JSON in Perl", "body": "<p>It's important always to say what additional modules you're using. I think your code uses <a href=\"https://metacpan.org/pod/Method::Signatures\" rel=\"nofollow noreferrer\"><code>Method::Signatures</code></a>, and I've tested the code below only to check that it compiles with that module in place</p>\n<p><em>Mojolicious</em> is an excellent tool for its purpose, but it is focused on HTTP URLs. <a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow noreferrer\"><code>LWP::UserAgent</code></a> is much more general-purpose, and the <a href=\"https://metacpan.org/pod/LWP\" rel=\"nofollow noreferrer\">documentation for <code>LWP</code></a> says this</p>\n<blockquote>\n<p>Provides an object oriented model of HTTP-style communication. Within this framework we currently support access to http, https, gopher, ftp, news, file, and mailto resources</p>\n</blockquote>\n<p>Your method becomes something like this. It's untested</p>\n<pre><code>method get_content(\\@urls) {\n\n    my %info;\n\n    my $ua = LWP::UserAgent-&gt;new;\n \n    for my $url (@urls) {\n\n        my $res = $ua-&gt;get($url);\n        die $res-&gt;status_line unless $res-&gt;is_success;\n\n        my $name     = basename($url) . '.json';\n        my $data     = $res-&gt;decoded_content;\n        $info{$name} = $data;\n    }\n\n    \\%info;\n}\n</code></pre>\n<br/>\n<hr />\n<p>I would also encourage you to drop Hungarian notation in the context of Perl code, as the language already has its sigils that denote the data type</p>\n<p><code>@arrURLS</code> duplicates the information that this <code>arrURLS</code> is an array, while <code>%arrInfo</code> is just wrong as this <code>arrInfo</code> is a <em>hash</em>. <code>$arrData</code> is actually a <em>scalar</em>, although perhaps some indicator that it is also a <em>reference</em> may help, and <code>$arrURLS[0]</code> is also a <em>scalar</em> (hence the dollar)</p>\n<p>There is also nothing to stop you using <code>$arrURLS</code> (which is a completely separate variable from <code>@arrURLS</code>)</p>\n"}], "owner": {"reputation": 51, "user_id": 6102813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/934cd313f2cbac0f47d14a9e4e3bad71?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/6102813/lucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "accepted_answer_id": 36803576, "answer_count": 3, "score": 3, "last_activity_date": 1461424459, "creation_date": 1461360231, "question_id": 36803541, "link": "https://stackoverflow.com/questions/36803541/fetching-json-in-perl", "title": "Fetching JSON in Perl", "body": "<p>I've been working building an emulator in Perl and one of the issues I'm facing is parsing JSON files located in the computer. When I try fetching them from my server, they work fine...</p>\n\n<pre><code>    method getContent(\\@arrURLS) {\n    my %arrInfo;\n    my $resUserAgent = Mojo::UserAgent-&gt;new;\n    foreach my $strURL (@arrURLS) {\n        $resUserAgent-&gt;get($strURL =&gt; sub {\n            my($resUserAgent, $tx) = @_;\n            if ($tx-&gt;success) {\n                my $strName = basename($strURL, '.json');\n                my $arrData = $tx-&gt;res-&gt;body;\n                $arrInfo{$strName} = $arrData;\n            }\n            Mojo::IOLoop-&gt;stop;\n        });\n        Mojo::IOLoop-&gt;start;\n    }\n    return \\%arrInfo;\n}\n</code></pre>\n\n<p>Let's assume <code>@arrURLS</code> is:</p>\n\n<pre><code>my @arrURLS = (\"file:///C:/Users/Test/Desktop/JSONS/first.json\", \"file:///C:/Users/Test/Desktop/JSONS/second.json\");\n</code></pre>\n\n<p>The above url's are the one's that aren't working, however if I change that to:</p>\n\n<pre><code>my @arrURLS = (\"http://127.0.0.1/test/json/first.json\", \"http://127.0.0.1/test/json/second.json\");\n</code></pre>\n\n<p>it works.</p>\n\n<p>Also I would like to use something better than <code>Mojo::UserAgent</code> because it seems a bit slow, when I was using <code>Coro</code> with <code>LWP::Simple</code> it was much faster but unfortunately <code>Coro</code> is broken in Perl 5.22...</p>\n"}, {"tags": ["perl", "time", "format"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1461354346, "post_id": 36802087, "comment_id": 61178329, "body": "pad out to 6 digits (<code>85323</code> -&gt; <code>085323</code>), split on every 2nd char: <code>[08,53,23]</code>, recombine with <code>:</code> -&gt; <code>08:53:23</code>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1461354953, "post_id": 36802087, "comment_id": 61178642, "body": "You should really be storing times in your database as the appropriate <a href=\"http://dev.mysql.com/doc/refman/5.7/en/date-and-time-types.html\" rel=\"nofollow noreferrer\">temporal type</a> instead of VARCHAR. That will allow you to do validation (e.g. reject values like <code>00:00:60</code>) and date/time math (e.g. 12:00:00 - 11:59:59 = 00:00:01 instead of 4041), among other things."}, {"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "edited": false, "score": 0, "creation_date": 1461355412, "post_id": 36802087, "comment_id": 61178873, "body": "I think it should be changed to a TIME type myself, but TPTB are saying to stick with VARCHAR since several other various programs (which I have nothing to do with) are going to be using this data.  So I may not even need to change it to the proper TIME format after all.  Am awaiting confirmation on this"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1461356642, "post_id": 36802087, "comment_id": 61179441, "body": "@BigRedEO: How would midnight be represented?"}], "answers": [{"comments": [{"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "edited": false, "score": 0, "creation_date": 1461354937, "post_id": 36802129, "comment_id": 61178633, "body": "Added this to my script in my WHILE statement as  <code>$_ = s&#47;(\\d{1,2})(\\d{2})(\\d{2})&#47;$1:$2:$3&#47; for $fields[15,26];</code> and although it didn&#39;t throw an error, it also did not format.  Am I missing something here?"}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 0, "creation_date": 1461355371, "post_id": 36802129, "comment_id": 61178853, "body": "The more source you show in the original question, the better answers you&#39;ll get. Try: <code>$fields[15] =~ s&#47;...; $fields[26] =~ s&#47;...;</code>"}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 1, "last_activity_date": 1461354286, "creation_date": 1461354286, "answer_id": 36802129, "question_id": 36802087, "link": "https://stackoverflow.com/questions/36802087/perl-format-number-to-time/36802129#36802129", "title": "Perl format number to time?", "body": "<p>Try:</p>\n\n<pre><code>s/(\\d{1,2})(\\d{2})(\\d{2})/$1:$2:$3/;\n</code></pre>\n\n<p>No need to use a module :)</p>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 1, "last_activity_date": 1461355353, "creation_date": 1461355353, "answer_id": 36802403, "question_id": 36802087, "link": "https://stackoverflow.com/questions/36802087/perl-format-number-to-time/36802403#36802403", "title": "Perl format number to time?", "body": "<pre><code>$ perl -wle 'print join(\":\", unpack(\"(A2)*\", sprintf(\"%06d\", $ARGV[0])))' 85323\n08:53:23\n\n$ perl -wle 'print join(\":\", unpack(\"(A2)*\", sprintf(\"%06d\", $ARGV[0])))' 163211\n16:32:11\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": false, "score": 0, "last_activity_date": 1461422533, "creation_date": 1461422533, "answer_id": 36812222, "question_id": 36802087, "link": "https://stackoverflow.com/questions/36802087/perl-format-number-to-time/36812222#36812222", "title": "Perl format number to time?", "body": "<p>The other Regex solution provided does not account for adding the leading zero.</p>\n\n<p>This will work fine if you have a newer perl that supports the <code>/r</code> return option on <code>s///</code> substitutions</p>\n\n<pre><code>$_ = sprintf('%06s', $_) =~ s/(..)(..)$/:$1:$2/r;\n</code></pre>\n\n<p>Replace <code>$_</code> with your variable name.</p>\n\n<p>Alternatively, if your perl does not have the <code>/r</code> option, this will do the same thing...</p>\n\n<pre><code>( $t = sprintf('%06s', $t) ) =~ s/(..)(..)$/:$1:$2/;\n</code></pre>\n\n<p>Of course you could achieve the same thing with <code>Time::Piece</code> but for this particular task I assure you it's slower ( and more verbose )</p>\n\n<pre><code>$_ = Time::Piece-&gt;strptime(sprintf('%06s', $_), '%H%M%S')-&gt;hms;\n</code></pre>\n"}], "owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1461422533, "creation_date": 1461354148, "question_id": 36802087, "link": "https://stackoverflow.com/questions/36802087/perl-format-number-to-time", "title": "Perl format number to time?", "body": "<p>I have two fields in a .CSV file I'm parsing through that are supposed to represent time.  Currently, they are either 5 or 6 digit numbers (i.e. 85323 would be 8:53:23, or 163211 would be 16:32:11).  I need to throw the colons (:) in there.  Would something like </p>\n\n<pre><code>strptime-&gt;strftime \n</code></pre>\n\n<p>using </p>\n\n<pre><code>Time::Piece \n</code></pre>\n\n<p>work for something like that?  Or maybe not since they're currently treated as a VARCHAR to load into a MySQL table and should probably be changed to a TIME type instead.</p>\n"}, {"tags": ["regex", "perl", "unix", "awk", "sed"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1461350940, "post_id": 36800839, "comment_id": 61176511, "body": "Is the control-M (CR) followed by a newline (LF)?  It looks like it.  So you want lines terminated with just newline (not CR + LF) to replace the newline with space, and the lines ending CR LF to end with just LF.  Is that correct?  If so, it&#39;s a pity but you can&#39;t use <code>tr</code> (it would add leading spaces to lines after the CR LF endings)."}, {"owner": {"reputation": 53, "user_id": 5706576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nboqm.jpg?s=128&g=1", "display_name": "Shaan", "link": "https://stackoverflow.com/users/5706576/shaan"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1461351193, "post_id": 36800839, "comment_id": 61176639, "body": "yes! I tried tr and it added leading space. but your answer was still pretty good with that! I don&#39;t have leading space in data! so I can omit first space chars with &#39;&#39; {null} !!"}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 2, "last_activity_date": 1461349659, "creation_date": 1461349659, "answer_id": 36800943, "question_id": 36800839, "link": "https://stackoverflow.com/questions/36800839/unix-file-handling-removal-of-junk-chars/36800943#36800943", "title": "Unix file handling removal of Junk chars", "body": "<p><code>^M</code> is usually not the actual characters <code>^</code> and <code>M</code>. <code>^</code> indicates a special character and <code>M</code> means it's the 13th ASCII character (M is the 13th letter). <code>^M</code> indicates the carriage return character. Looking at an <a href=\"http://ascii-code.com/\" rel=\"nofollow\">ASCII table</a> can help. Such unprintable ASCII characters are referred to as \"control characters\".</p>\n\n<p>This usually means the file has two character Windows-style newlines, ASCII 13 and ASCII 10. Most languages represent this as <code>\\r\\n</code>.</p>\n\n<p>To replace <code>^M</code> you can use <code>\\r</code> or <code>\\015</code> (the 15th ASCII character <em>in base 8</em> which is 13 in decimal).</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 5706576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nboqm.jpg?s=128&g=1", "display_name": "Shaan", "link": "https://stackoverflow.com/users/5706576/shaan"}, "edited": false, "score": 0, "creation_date": 1461351372, "post_id": 36801216, "comment_id": 61176719, "body": "sorry but it gave an output with all files in one line!"}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 53, "user_id": 5706576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nboqm.jpg?s=128&g=1", "display_name": "Shaan", "link": "https://stackoverflow.com/users/5706576/shaan"}, "edited": false, "score": 0, "creation_date": 1461351632, "post_id": 36801216, "comment_id": 61176865, "body": "I&#39;ve shown the output I&#39;m getting in my answer. Can you output of <code>cat -vte file</code> in your question?"}, {"owner": {"reputation": 53, "user_id": 5706576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nboqm.jpg?s=128&g=1", "display_name": "Shaan", "link": "https://stackoverflow.com/users/5706576/shaan"}, "edited": false, "score": 0, "creation_date": 1461352192, "post_id": 36801216, "comment_id": 61177144, "body": "ohk, when I tried in cygwin it didn&#39;t work, but works fine in unix!! thanks a lot!"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 2, "creation_date": 1461352343, "post_id": 36801216, "comment_id": 61177236, "body": "On cygwin you need to stop the low level C primitives from stripping the control-Ms before your awk script gets to see them. To stop that from happening you need to put gawk into binary mode: <code>awk -v BINMODE=3 -v RS=&#39;\\r\\n*&#39; &#39;{gsub(&#47;\\n&#47;, &quot; &quot;)} 1&#39; file</code>. See <a href=\"http://www.gnu.org/software/gawk/manual/gawk.html#PC-Using\" rel=\"nofollow noreferrer\">gnu.org/software/gawk/manual/gawk.html#PC-Using</a> for details if you care."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1461354681, "post_id": 36801216, "comment_id": 61178509, "body": "Thanks @EdMorton. I didn&#39;t know about this anomaly of cygwin awk"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1461354726, "post_id": 36801216, "comment_id": 61178533, "body": "I like to think of it as just one more anomaly of Windows :-). It doesn&#39;t just affect cygwin and/or awk, it affects other platforms/tools that run on Windows too."}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 2, "last_activity_date": 1461350622, "creation_date": 1461350622, "answer_id": 36801216, "question_id": 36800839, "link": "https://stackoverflow.com/questions/36800839/unix-file-handling-removal-of-junk-chars/36801216#36801216", "title": "Unix file handling removal of Junk chars", "body": "<p>Using <code>gnu-awk</code> you can do:</p>\n\n<pre><code>awk -v RS='\\r\\n*' '{gsub(/\\n/, \" \")} 1' file\n\nabc def\nghi jkl mno\npqr\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5706576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nboqm.jpg?s=128&g=1", "display_name": "Shaan", "link": "https://stackoverflow.com/users/5706576/shaan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 36801216, "answer_count": 2, "score": 3, "last_activity_date": 1461350683, "creation_date": 1461349268, "last_edit_date": 1461350683, "question_id": 36800839, "link": "https://stackoverflow.com/questions/36800839/unix-file-handling-removal-of-junk-chars", "title": "Unix file handling removal of Junk chars", "body": "<p>Input file:</p>\n\n<pre><code>abc\ndef^M\nghi\njkl\nmno^M\npqr^M\n</code></pre>\n\n<p>Desired output:</p>\n\n<pre><code>abc def\nghi jkl mno\npqr\n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>sed 's/^[\\^M]$/ /g' file.txt &gt; output.txt\n</code></pre>\n\n<p>ie. all lines shall be segregated with space until ^M [ctrl -m] character.</p>\n"}, {"tags": ["perl", "unpack"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1461348577, "post_id": 36800380, "comment_id": 61175260, "body": "where is <code>@body</code> coming from? you need to supply a link as an example input, and code that actually works so we can test. do you have <code>use strict;</code> and <code>use warnings;</code> enabled?"}, {"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "edited": false, "score": 0, "creation_date": 1461348646, "post_id": 36800380, "comment_id": 61175303, "body": "It&#39;s really unclear what you&#39;re trying to do.  Anyway, there is no &quot;string pointer&quot; related to <code>unpack</code>.  (Maybe you&#39;re thinking about <code>pos</code>, which is only used with regular expressions.)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1461349271, "post_id": 36800380, "comment_id": 61175630, "body": "If you&#39;re trying to parse JSON, you should use a <a href=\"https://metacpan.org/pod/JSON\" rel=\"nofollow noreferrer\">proper JSON parser</a>. If that&#39;s not what you&#39;re trying to do, you should <a href=\"https://stackoverflow.com/posts/36800380/edit\">edit</a> your question to clarify, it&#39;s pretty unclear right now."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461349472, "post_id": 36800380, "comment_id": 61175751, "body": "Do you know Perl at all? Where has <code>$body</code> come from?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461350028, "post_id": 36800380, "comment_id": 61176024, "body": "@MaxLybbert: I agree. But unless you feel completely confident in your diagnosis (when you should simply post a solution) your comments should elicit more information. What more do you need to know to correct the OP&#39;s code?"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1461349540, "post_id": 36800696, "comment_id": 61175786, "body": "This is not an answer to your question"}], "tags": [], "owner": {"reputation": 1, "user_id": 4216389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2b7c63d716a18889b7f72e20cddec3b?s=128&d=identicon&r=PG&f=1", "display_name": "jnconnolly1962", "link": "https://stackoverflow.com/users/4216389/jnconnolly1962"}, "is_accepted": false, "score": -2, "last_activity_date": 1461349229, "last_edit_date": 1461349229, "creation_date": 1461348735, "answer_id": 36800696, "question_id": 36800380, "link": "https://stackoverflow.com/questions/36800380/how-do-i-use-perls-unpack/36800696#36800696", "title": "How do I use Perl&#39;s unpack?", "body": "<p>Here's how I solved the problem:</p>\n\n<pre><code>my $n = 80;    # $n is group size.\nmy @groups = unpack \"a$n\" x (length( $body ) /$n ), $body;\n\n# print @groups;\nforeach $line (@groups) {\n    print '\"'.$line.'\"' ;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1461349423, "creation_date": 1461349423, "answer_id": 36800876, "question_id": 36800380, "link": "https://stackoverflow.com/questions/36800380/how-do-i-use-perls-unpack/36800876#36800876", "title": "How do I use Perl&#39;s unpack?", "body": "<p>It's really hard to understand your circumstance, but from your own \"answer\" it looks like you need this</p>\n\n<pre><code>my @groups = unpack '(a80)*', $body;\n</code></pre>\n\n<p>From your <em>question</em> it looks like this may be better</p>\n\n<pre><code>my @groups = unpack '(A80)*', $body;\n</code></pre>\n\n<p>But you really need to describe where <code>$body</code> came from, and what results you expect</p>\n"}], "owner": {"reputation": 1, "user_id": 4216389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2b7c63d716a18889b7f72e20cddec3b?s=128&d=identicon&r=PG&f=1", "display_name": "jnconnolly1962", "link": "https://stackoverflow.com/users/4216389/jnconnolly1962"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1461350123, "creation_date": 1461347630, "last_edit_date": 1461350123, "question_id": 36800380, "link": "https://stackoverflow.com/questions/36800380/how-do-i-use-perls-unpack", "title": "How do I use Perl&#39;s unpack?", "body": "<p>I have an JSON Body of an http post that has to be split into 80 character double quoted strings - but - whenever I use unpack to read the first 80 characters, the string pointer in the source string (which is not CR/LF delimited at the end of each line yet) never changes - e.g. the loop below keeps reading the same string over and over - I'm assuming that unpack is expecting a CR/LF to be pre-existing? What do I do if it isn't?</p>\n\n<pre><code>@row =unpack 'A80', $body;\nforeach $line (@body)\n{\n    @row =unpack 'A80', $body;\n    print '\"'.$line.'\"' ;\n}\n</code></pre>\n"}, {"tags": ["python", "regex", "perl", "shell", "vim"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1461344974, "post_id": 36799641, "comment_id": 61173392, "body": "Does your current code fail, or are you just looking for a code review?"}, {"owner": {"reputation": 4989, "user_id": 1685095, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/5f06068bb9b4c00f12582ccc0ba64c4a?s=128&d=identicon&r=PG", "display_name": "user1685095", "link": "https://stackoverflow.com/users/1685095/user1685095"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1461345049, "post_id": 36799641, "comment_id": 61173440, "body": "It doesn&#39;t fail, it plainly doesn&#39;t do what I want"}, {"owner": {"reputation": 4989, "user_id": 1685095, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/5f06068bb9b4c00f12582ccc0ba64c4a?s=128&d=identicon&r=PG", "display_name": "user1685095", "link": "https://stackoverflow.com/users/1685095/user1685095"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1461345147, "post_id": 36799641, "comment_id": 61173489, "body": "@ThisSuitIsBlackNot first of all I don&#39;t know how to remove indentation of the first line from all lines. Than I don&#39;t know how to store it while doing so."}, {"owner": {"reputation": 4989, "user_id": 1685095, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/5f06068bb9b4c00f12582ccc0ba64c4a?s=128&d=identicon&r=PG", "display_name": "user1685095", "link": "https://stackoverflow.com/users/1685095/user1685095"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1461345176, "post_id": 36799641, "comment_id": 61173503, "body": "@ThisSuitIsBlackNot another problem is I don&#39;t know how to get the string that was input of the script."}, {"owner": {"reputation": 434, "user_id": 4682789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBdW9.png?s=128&g=1", "display_name": "AllenMoh", "link": "https://stackoverflow.com/users/4682789/allenmoh"}, "edited": false, "score": 0, "creation_date": 1461345205, "post_id": 36799641, "comment_id": 61173517, "body": "have you tried using the escape sequence tab instead? \\t in a string is equivalent to a tab"}, {"owner": {"reputation": 4989, "user_id": 1685095, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/5f06068bb9b4c00f12582ccc0ba64c4a?s=128&d=identicon&r=PG", "display_name": "user1685095", "link": "https://stackoverflow.com/users/1685095/user1685095"}, "reply_to_user": {"reputation": 434, "user_id": 4682789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBdW9.png?s=128&g=1", "display_name": "AllenMoh", "link": "https://stackoverflow.com/users/4682789/allenmoh"}, "edited": false, "score": 0, "creation_date": 1461345314, "post_id": 36799641, "comment_id": 61173563, "body": "@AllenMoh what? How does this relate to my problem?"}, {"owner": {"reputation": 4989, "user_id": 1685095, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/5f06068bb9b4c00f12582ccc0ba64c4a?s=128&d=identicon&r=PG", "display_name": "user1685095", "link": "https://stackoverflow.com/users/1685095/user1685095"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461347123, "post_id": 36799641, "comment_id": 61174501, "body": "@Borodin It wouldn&#39;t survive incorrectly formatted code. It probably tries to parse the code internally or something."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461348540, "post_id": 36799641, "comment_id": 61175241, "body": "@user1685095: I&#39;m sorry if that was overly brusque. I also don&#39;t know yapf. Initial leading spaces don&#39;t invalidate Python code unless it includes a later statement that is indented less than any preceding line. I don&#39;t see why a formatter would reject input that didn&#39;t start with a non-space"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461349064, "post_id": 36799641, "comment_id": 61175525, "body": "@user1685095: I always try to find a better solution rather than write code that works around a problem with other software. If I was required to use yapf then I would write a <i>buffer</i> layer that presented a non-broken API. That may be a new module or just a subroutine"}, {"owner": {"reputation": 91778, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 0, "creation_date": 1461349431, "post_id": 36799641, "comment_id": 61175723, "body": "FWIW, I largely agree with Borodin. I was surprised to find that yapf doesn&#39;t at least have a flag to ignore leading whitespace itself."}], "answers": [{"comments": [{"owner": {"reputation": 4989, "user_id": 1685095, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/5f06068bb9b4c00f12582ccc0ba64c4a?s=128&d=identicon&r=PG", "display_name": "user1685095", "link": "https://stackoverflow.com/users/1685095/user1685095"}, "edited": false, "score": 0, "creation_date": 1461349562, "post_id": 36800785, "comment_id": 61175802, "body": "Could you help also with how I should get the multiline string passed to script?"}, {"owner": {"reputation": 3886, "user_id": 5741681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2d7159467a096cf7569ff7d9197b78?s=128&d=identicon&r=PG&f=1", "display_name": "Quinn", "link": "https://stackoverflow.com/users/5741681/quinn"}, "edited": false, "score": 0, "creation_date": 1461349772, "post_id": 36800785, "comment_id": 61175899, "body": "To pass to script, you could specify the multiline string as the first argument; then process it as <code>sys.argv[1]</code>. <code>dedent</code> and <code>indent</code> are available in version 3.4."}, {"owner": {"reputation": 91778, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "reply_to_user": {"reputation": 3886, "user_id": 5741681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2d7159467a096cf7569ff7d9197b78?s=128&d=identicon&r=PG&f=1", "display_name": "Quinn", "link": "https://stackoverflow.com/users/5741681/quinn"}, "edited": false, "score": 0, "creation_date": 1461350621, "post_id": 36800785, "comment_id": 61176360, "body": "@ccf, the <code>textwrap</code> module <a href=\"https://docs.python.org/2/library/textwrap.html#module-textwrap\" rel=\"nofollow noreferrer\">seems to have been introduced in Python 2.3</a> and as far as I can tell it has always included <code>dedent</code> (though version 2.5 fixed an important bug with it). I&#39;m interested to learn that the <code>indent</code> function <a href=\"https://docs.python.org/3/library/textwrap.html#textwrap.indent\" rel=\"nofollow noreferrer\">wasn&#39;t introduced until Python 3.3</a>. Thanks for that!"}, {"owner": {"reputation": 3886, "user_id": 5741681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2d7159467a096cf7569ff7d9197b78?s=128&d=identicon&r=PG&f=1", "display_name": "Quinn", "link": "https://stackoverflow.com/users/5741681/quinn"}, "edited": false, "score": 0, "creation_date": 1461351028, "post_id": 36800785, "comment_id": 61176551, "body": "&#39;cause I tried it with my python 2.7, but got ImportError."}, {"owner": {"reputation": 91778, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "reply_to_user": {"reputation": 3886, "user_id": 5741681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2d7159467a096cf7569ff7d9197b78?s=128&d=identicon&r=PG&f=1", "display_name": "Quinn", "link": "https://stackoverflow.com/users/5741681/quinn"}, "edited": false, "score": 0, "creation_date": 1461351258, "post_id": 36800785, "comment_id": 61176661, "body": "@ccf, you should be able to <code>import textwrap</code> or <code>from textwrap import dedent</code> but not <code>from textwrap import indent</code> in Python 2.7."}], "tags": [], "owner": {"reputation": 91778, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "is_accepted": false, "score": 2, "last_activity_date": 1461351742, "last_edit_date": 1461351742, "creation_date": 1461349099, "answer_id": 36800785, "question_id": 36799641, "link": "https://stackoverflow.com/questions/36799641/how-to-remove-whitespaces-from-multiline-string-pass-it-to-another-program-and-t/36800785#36800785", "title": "How to remove whitespaces from multiline string pass it to another program and then add back whitespaces?", "body": "<p>Since you seem to be familiar with Python already I would recommend using its <a href=\"https://docs.python.org/3/library/textwrap.html#module-textwrap\" rel=\"nofollow\"><code>textwrap</code></a> module, which contains <code>dedent</code> and (in version 3.3 and later) <code>indent</code> functions that can do most of the job for you:</p>\n\n<pre><code>import re\nfrom textwrap import dedent, indent\n\nwhitespace = re.compile('\\s+')\n\ntest_string = '''    while True:\n        pass'''\n\nleading_whitespace = whitespace.match(test_string)\n\ndedented_text = dedent(test_string)\n\n# Do whatever you want with dedented_text\n\nindented_text = indent(dedented_text, leading_whitespace.group(0))\n</code></pre>\n"}], "owner": {"reputation": 4989, "user_id": 1685095, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/5f06068bb9b4c00f12582ccc0ba64c4a?s=128&d=identicon&r=PG", "display_name": "user1685095", "link": "https://stackoverflow.com/users/1685095/user1685095"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 697, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1461351742, "creation_date": 1461344837, "last_edit_date": 1592644375, "question_id": 36799641, "link": "https://stackoverflow.com/questions/36799641/how-to-remove-whitespaces-from-multiline-string-pass-it-to-another-program-and-t", "title": "How to remove whitespaces from multiline string pass it to another program and then add back whitespaces?", "body": "<h3>Summary</h3>\n<p>I need to detect indentation level of the first line in multiline string passed to a script. Store it. Remove this indent from other lines. Pass the multiline string with removed indent level to another program (that I've figured how to do) add back indent to all lines in multiline string and print it to stdout (that I also know how to do).</p>\n<hr />\n<p>To be specific I have a problem with vim and Python formatter YAPF.\nThe way yapf works is that if python file is incorrect formatting would result in error.</p>\n<p>So imagine this</p>\n<pre><code>def f():\n   # imagine some very very long lines here that we want to reformat\n</code></pre>\n<p>If I would select this imagined lines in vim and then press <code>gq</code> (I've <code>set formatprg=yapf</code>) vim would substitute this lines with a traceback of yapf which is no good of course. But If I would select the whole function it would do the job perfectly.</p>\n<p>You can test this with</p>\n<pre><code>echo '   fooo = 1' | yapf\n</code></pre>\n<p>This would result in <code>IndentationError</code>\nWhile <code>echo 'fooo = 1' | yapf</code> would work</p>\n<p>So what I think is a very nice workaround is to remove indentation store the indent level of the first line, pass string without indentation to yapf somehow and then add indent to the result. The problem with this is I'd like this to be a one liner or close to that so that it could be stored directly in my vimrc. So python isn't a good match for that because I would need at least to import re package etc.</p>\n<p>So I thought about perl.</p>\n<p>The only problem is that I don't know perl much.</p>\n<p>So for now my experiment looks like this</p>\n<pre><code>$a = &quot;    foo = 1\\n    bar = '1'&quot;;\nmy ($indent, $text) = $a =~ m/^(\\s+)(.*)$/m;\n$command = &quot;echo &quot; . $text;\n$out = `$command`;\nprint &quot;$out\\n&quot;;\nprint &quot;$text\\n&quot;;\n</code></pre>\n<p>I will be glad for any help. Maybe there is more easy way to do this, I don't know.</p>\n"}, {"tags": ["perl", "unit-testing", "oop", "mocking", "moo"], "comments": [{"owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1461336797, "post_id": 36796716, "comment_id": 61168308, "body": "Thanks for the fast response! I&#39;m working in the example. But, can you explain a little bit more about your first comment?"}, {"owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1461336947, "post_id": 36796716, "comment_id": 61168414, "body": "If I don&#39;t have to choose, both! hahahaha It will be awesome for me if you can provide me an example of using Test:MockModule but in this way, I mean mocking an object that access to the DB in the constructor. Thank you very much!!!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1461337683, "post_id": 36796716, "comment_id": 61168967, "body": "You can post to <a href=\"https://codereview.stackexchange.com\">Code Review</a> if you want a full analysis. But for now, if you want the Customer to get stuff from some database, I&#39;d make the <code>$dbh</code> a property with <code>has</code>. That way you can simply pass it a different <code>$dbh</code> in your tests and don&#39;t need to care about mocking. If you have several classes that need a dbh, turn it into a Moo::Role. But pay attention that sqlite might not support all features of Postgres, so there are some pitfalls with the whole sqlite approach. It&#39;s probably safer to use DBIx::Class and let it worry about that stuff."}, {"owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1461342442, "post_id": 36796716, "comment_id": 61171982, "body": "What are you seeing wrong? or as a bad practice? Please let me know your opinion!! Thanks."}, {"owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1461342624, "post_id": 36796716, "comment_id": 61172097, "body": "I don&#39;t have the reputation! What else can I do?"}, {"owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1461342872, "post_id": 36796716, "comment_id": 61172216, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/109935/discussion-between-ccalderon911217-and-simbabque\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "edited": false, "score": 0, "creation_date": 1461339742, "post_id": 36797268, "comment_id": 61170409, "body": "I&#39;m getting the same error as the beginning... Can&#39;t locate object method &quot;execute&quot; via package &quot;DBI::db&quot;."}, {"owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "edited": false, "score": 0, "creation_date": 1461339934, "post_id": 36797268, "comment_id": 61170520, "body": "No worries! Thank you very much!"}, {"owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "edited": false, "score": 0, "creation_date": 1461340154, "post_id": 36797268, "comment_id": 61170659, "body": "Where should I put it? I&#39;m pretty sure that&#39;s the error! Wow man you&#39;re great!"}, {"owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "edited": false, "score": 0, "creation_date": 1461340222, "post_id": 36797268, "comment_id": 61170695, "body": "Yes yes, the code is working. I just run it and it returns the expected values."}, {"owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "edited": false, "score": 0, "creation_date": 1461340900, "post_id": 36797268, "comment_id": 61171103, "body": "You&#39;re right, the thing is that I&#39;m using a handler who does have the execute method. Trying to fix it... I&#39;ll let you know."}, {"owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "edited": false, "score": 0, "creation_date": 1461341825, "post_id": 36797268, "comment_id": 61171619, "body": "Thank you very much man! I forgot about the handler! Now is working with Sub::Override! I&#39;m gonna test it later with Test::MockModule. Which one would you recommend?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "edited": false, "score": 0, "creation_date": 1461342125, "post_id": 36797268, "comment_id": 61171803, "body": "@cc I would go with Sub::Override in this scenario because it has the lighter footprint and is easier to use. For a single sub, I would always pick Sub::Override."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1461344426, "post_id": 36797268, "comment_id": 61173096, "body": "@simbabque: Please would you tidy this comment thread? I got to flagging the fourth as <i>obsolete</i> and tired of it"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1461340138, "last_edit_date": 1461340138, "creation_date": 1461337335, "answer_id": 36797268, "question_id": 36796716, "link": "https://stackoverflow.com/questions/36796716/perl-testmockmodule-with-db-acces/36797268#36797268", "title": "perl Test::MockModule with DB acces", "body": "<p>The reason you are getting that error is that your production code is calling <code>execute</code> on the <em>database handle</em>, and not on a <em>statement handle</em>. You have to <code>prepare</code> the query before you can <code>execute</code> it.</p>\n\n<pre><code>my $sth = $db2-&gt;prepare($query);\nmy $ref = $sth-&gt;execute($fmuser);\n</code></pre>\n\n<p>Using conventional names like <code>$dbh</code>, <code>$sth</code> and <code>$res</code> for your DBI variables would have helped to spot that easier.</p>\n\n<hr>\n\n<p>Test::MockModule is not the right tool for what you are doing. It's useful if you want to mock dependencies in other modules, or possibly only parts of those. </p>\n\n<p>But right now you have an internal dependency. What you want to do is <em>dependency injection</em>, but your code is not prepared for that, so you need to find a different way.</p>\n\n<p>I would recommend using <a href=\"https://metacpan.org/pod/Sub::Override\" rel=\"nofollow\">Sub::Override</a> for this job. It's fairly simple. It overrides a sub in a lexical scope. That's all you really need here.</p>\n\n<pre><code>use Sub::Override;\n\nmy $sub = Sub::Override-&gt;new('frobnicate' =&gt; sub { return 'foo' });\n</code></pre>\n\n<p>So if you use that, your code would look something like the following. Note that I cleaned up some lines into one for the second test-case.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Test::More;\nuse Sub::Override;    # this line is new\n\nuse DBI;\nuse FindBin qw/$RealBin/;\n\n#                                                          typo here\nmy $dbh = DBI-&gt;connect( \"dbi:SQLite:dbname=$RealBin/test-customer.db\", \"\", \"\" )\n    or die $DBI::errstr;\n$dbh-&gt;do(&lt;&lt;'EOSQL');\nCREATE TABLE IF NOT EXISTS table (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    field1 INTEGER,\n    field2 INTEGER,\n    field3 TEXT,\n    field4 INTEGER,\n    field5 INTEGER\n)\nEOSQL\n\n$dbh-&gt;do(&lt;&lt;'EOSQL');\n        INSERT INTO table (field1,field2,field3,field4,field5) VALUES\n        (?,?,?,?,?), undef, undef, 92, 'XXXXXXXX@XXXXXXXXX', 1, 1 );\nEOSQL\n\n{\n    # this makes $customer-&gt;get_db_handler temporarily return \n    # our $dbh from outside\n    my $sub = Sub::Override-&gt;new( 'Customer::get_db_handler' =&gt; sub {\n        return $dbh \n    });\n\n    my $customer = Customer-&gt;new( id =&gt; 92, type =&gt; 'other' );\n\n    # this test-case is pretty useless        \n    ok defined $customer, 'Customer is defined';    \n\n    is scalar @{ $customer-&gt;emails }, 1, \n        '... and the emails were fetched form the DB';\n}\n\nEND {\n    unlink \"$RealBin/test-customer.db\";\n}\n</code></pre>\n"}], "owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "accepted_answer_id": 36797268, "answer_count": 1, "score": 2, "last_activity_date": 1461340138, "creation_date": 1461335866, "question_id": 36796716, "link": "https://stackoverflow.com/questions/36796716/perl-testmockmodule-with-db-acces", "title": "perl Test::MockModule with DB acces", "body": "<p>I'm starting in the unit testing world in Perl. Here is my question: I have a class in Perl (I'm using Moo BTW) and this class has 3 attributes (I'm going to put the code bellow). One of these attributes is an array, and it is generated automatically in the constructor. To generate the array, I need to access to a DB and execute one query.</p>\n\n<pre><code>package Customer;\nuse 5.010;\nuse Data::Dumper;\nuse Moo;\nuse TT::SQL;\n\nhas id =&gt; (\n  is=&gt;'ro',\n  required=&gt;1,\n);\n\nhas type =&gt; (\n  is=&gt;'ro',\n);\n\nhas emails =&gt; (\n  is=&gt;'rw',\n  default =&gt; sub {\n     my ($self) = @_;\n     return $self-&gt;getEmails();\n  },\n  lazy=&gt; 1,\n);\n\nsub getEmails\n{               \n                my $self=shift;\n                #obtaining the DB handler\n                my $db2 = $self-&gt;get_db_handler();\n                my $fmuser=$self-&gt;id;\n                my $type=$self-&gt;type;\n                my $query;\n                #checking the customer type to perform the query\n                if ($type eq \"tshop\")\n                {\n                $query=\"SELECT email from XXXXXXX WHERE XXXXX=? and XXXXXXXX=1 and XXXXXXX =1'\";\n                }\n                else\n                {\n                $query=\"SELECT email from XXXXXXXX WHERE XXXXX=? and XXXXXXXX=1 and XXXXXXX =1\";\n                }\n                my $ref = $db2-&gt;execute($query,$fmuser);\n                my @emails;\n                #retrieving emails\n                while ( my $row = $ref-&gt;fetchrow_hashref  ) {\n                       @emails=(@emails,\"$row-&gt;{email}\\n\");\n                  }\n                return \\@emails;\n}\n\nsub get_db_handler\n{\n        my $user = \"XXXXXXX\";\n    my $password = 'XXXXXXX';\n    my $host = \"XXXXX\";\n    my $driver = \"Pg\";\n    my $timezone = \"America/New_York\";\n\n    my $dsn = \"DBI:$driver:database=fm;host=$host\";\n    my $db = DBI-&gt;connect($dsn,$user,$password) or die(\"Cannot connect to the DB !!\");\n    return $db;\n\n}\n\n1;\n</code></pre>\n\n<p>Now I want to run unit tests to check the behavior of the previous class. Until now, i'm using Test::MockModule as next:</p>\n\n<pre><code>use diagnostics; # this gives you more debugging information\nuse warnings;    # this warns you of bad practices\nuse strict;      # this prevents silly errors\nuse Moo;\nuse Data::Dumper;\nuse Test::More tests =&gt; 2; # for the is() and isnt() functions\nuse Customer;\nuse FindBin qw/$RealBin/;\nuse Test::Deep;\nuse Test::MockModule;\nuse DBI;\nmy $dbh = DBI-&gt;connect(\"dbi:SQLite:dbname=$RealBin/test-cutomer.db\",\"\",\"\") or die $DBI::errstr;\n$dbh-&gt;do(\"\nCREATE TABLE IF NOT EXISTS table (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    field1 INTEGER,\n    field2 INTEGER,\n    field3 TEXT,\n    field4 INTEGER,\n    field5 INTEGER\n)\n\");\n\n$dbh-&gt;do('\n        INSERT INTO table (field1,field2,field3,field4,field5) VALUES \n        (?,?,?,?,?)',undef,undef,92,'XXXXXXXX@XXXXXXXXX',1,1\n);\n\nEND {\n    unlink \"$RealBin/test-customer.db\";\n}\n\n{\n\nmy $mock = Test::MockModule-&gt;new(\"Customer\");\n$mock-&gt;mock(\"get_db_handler\", sub { return $dbh });\n\nmy $customer=Customer-&gt;new(id=&gt;92,type=&gt;'other');\n\nok(defined $customer);\nmy $e=$customer-&gt;emails;\nmy @emails=@$e;\nmy $length=@emails;\nis($length,1, 'the emails are OK');\n}\n</code></pre>\n\n<p>I want to mock the get_db_handler method to retrieve the test-customer.db  handler and to run the queries over this local DB.\nSo far, I'm getting the following error:</p>\n\n<pre><code>1..2\nok 1\nCan't locate object method \"execute\" via package \"DBI::db\" at Customer.pm line\n    46 (#1)\n    (F) You called a method correctly, and it correctly indicated a package\n    functioning as a class, but that package doesn't define that particular\n    method, nor does any of its base classes.  See perlobj.\n\nUncaught exception from user code:\n    Can't locate object method \"execute\" via package \"DBI::db\" at Customer.pm line 46.\n at Customer.pm line 46\n    Customer::getEmails('Customer=HASH(0x11359c8)') called at Customer.pm line 23\n    Customer::__ANON__('Customer=HASH(0x11359c8)') called at (eval 23) line 18\n    Customer::emails('Customer=HASH(0x11359c8)') called at t/stc.t line 66\n# Looks like you planned 2 tests but ran 1.\n# Looks like your test exited with 2 just after 1.\n</code></pre>\n\n<p>The script is running OK, I mean, there is no problem with the code. The problem is with the <strong>test</strong>. Could you please take a look at this? I'll appreciate it a lot. Thanks in advance.</p>\n"}, {"tags": ["perl", "pdf"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1461341804, "post_id": 36796448, "comment_id": 61171611, "body": "@simbabque: I didn&#39;t think PDF documents had tabs stops but couldn&#39;t find anything on the subject. Do you know anything about this? How are strings containing horizontal tabs rendered by PDF?"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1461335221, "creation_date": 1461335221, "answer_id": 36796448, "question_id": 36795257, "link": "https://stackoverflow.com/questions/36795257/indentation-misplaced-while-creating-pdf-using-perl-module-pdfapi2/36796448#36796448", "title": "Indentation misplaced while creating PDF using perl module PDF::API2", "body": "<p>That happens because <em>Arial</em> is not a <a href=\"https://en.wikipedia.org/wiki/Monospaced_font\" rel=\"nofollow\">mono-spaced font</a>. The characters all have different widths. Especially a blank space is usually not very wide. If you want the spacing to stay intact, you need to use a mono-spaced <a href=\"https://metacpan.org/pod/PDF::API2::Resource::Font::CoreFont\" rel=\"nofollow\">font</a>, such as <code>Courier</code>.</p>\n\n<pre><code>$fnt = $pdf-&gt;corefont('Courier',-encoding =&gt; 'latin1');\n</code></pre>\n\n<p>That fact is also why PDF::API2 <a href=\"https://metacpan.org/pod/PDF::API2::Content#width-txt-advancewidth-string-text_state\" rel=\"nofollow\">includes a method <code>advancewidth</code></a> in its PDF::API2::Content class. You can use that to check if a block of text is too wide to fit into a line, and manually wrap it if needed. Of course for your table, that doesn't help.</p>\n\n<hr>\n\n<p>An alternative to the mono-spaced font might be to use <a href=\"https://metacpan.org/pod/PDF::Table\" rel=\"nofollow\">PDF::Table</a>, which can create tables inside a PDF::API2 document.</p>\n"}], "owner": {"reputation": 63, "user_id": 5305236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6a8e379d94224ab91d98bb67ccfb7f7?s=128&d=identicon&r=PG&f=1", "display_name": "D.Karthikeyan", "link": "https://stackoverflow.com/users/5305236/d-karthikeyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 36796448, "answer_count": 1, "score": 1, "last_activity_date": 1461335248, "creation_date": 1461331846, "last_edit_date": 1461335248, "question_id": 36795257, "link": "https://stackoverflow.com/questions/36795257/indentation-misplaced-while-creating-pdf-using-perl-module-pdfapi2", "title": "Indentation misplaced while creating PDF using perl module PDF::API2", "body": "<p>I have data in an array and I can write the data into a pdf format using PDF::API2 .But the problem is during the writing process the Indentation(spaces) is not exactly same as in the array</p>\n\n<p>In array format:</p>\n\n<pre><code> ATOM      1  N   MET A   0      24.277   8.374  -9.854  1.00 38.41           N   0.174\n\n ATOM     38  OE2 GLU A   4      37.711  19.692 -12.684  1.00 28.70           O   0.150\n</code></pre>\n\n<p>In PDF format:</p>\n\n<pre><code> ATOM  1 N MET A 0 24.277 8.374-9.8541.0038.41    N 0.174\n\n ATOM 38 OE2  GLU A 4 37.71119.692-12.684  1.00 28.70    O 0.150 \n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>my $pdf  = PDF::API2-&gt;new(-file =&gt; \"/home/httpd/cgi-bin/new.pdf\");\n$pdf-&gt;mediabox(\"A4\");\nmy $page = $pdf-&gt;page;\nmy $fnt = $pdf-&gt;corefont('Arial',-encoding =&gt; 'latin1');\nmy $txt = $page-&gt;text;\n$txt-&gt;textstart;\n$txt-&gt;font($fnt, 8); \n$txt-&gt;translate(100,800);\n$j1=0;\nfor($i=0;$i&lt;=scalar(@ar_velz);$i++) #Data input to write in PDF\n{\n$txt-&gt;lead(10);\n$txt-&gt;section(\"$ar_velz[$i]\", 500, 800);    #writing each array index \nif($j1 == 75)                   #To create a page for every 75 lines \n{\n$page = $pdf-&gt;page;\n$fnt = $pdf-&gt;corefont('Arial',-encoding =&gt; 'latin1');\n$txt = $page-&gt;text;\n$txt-&gt;textstart;\n$txt-&gt;font($fnt, 8); \n$txt-&gt;lead(10);\n$txt-&gt;translate(100,800);\n$j1=0;\n}\n$j1++;\n}\n$txt-&gt;textend;\n$pdf-&gt;save;\n$pdf-&gt;end( );\n\n}\n</code></pre>\n"}, {"tags": ["excel", "image", "perl"], "answers": [{"tags": [], "owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "is_accepted": false, "score": 0, "last_activity_date": 1461343970, "last_edit_date": 1495535290, "creation_date": 1461343970, "answer_id": 36799405, "question_id": 36794929, "link": "https://stackoverflow.com/questions/36794929/read-content-of-an-image-in-excel-file-with-perl/36799405#36799405", "title": "Read content of an image in Excel file - with Perl", "body": "<p>This may not be of much help but take a look at a post right here on stackoverflow.com and credited to user Sire Hugolin:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/34792918/perl-spreadsheetparsexlsx-how-to-get-images-from-excel-file\">Perl Spreadsheet::ParseXLSX how to get images from Excel file?</a></p>\n\n<p>Granted, it is not Perl but sounds like a similar situation you are facing.</p>\n"}], "owner": {"reputation": 68, "user_id": 5850890, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pmQPR.jpg?s=128&g=1", "display_name": "JMa", "link": "https://stackoverflow.com/users/5850890/jma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 325, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1461343970, "creation_date": 1461331042, "question_id": 36794929, "link": "https://stackoverflow.com/questions/36794929/read-content-of-an-image-in-excel-file-with-perl", "title": "Read content of an image in Excel file - with Perl", "body": "<p>I have XLSX/XLSM file that contains embedded images. I use Spreadsheet::XLSX to extract textual values - so far, so good. However, it looks like there is no easy way how to get image from Excel sheet in Perl. (Yes, I have searched a bit.) My code will run on Linux server - I\u00b4d like to avoid installing Win32::OLE, if possible.</p>\n\n<p>My first idea was to convert XLSX->ODS, open the woorkbook as zip and get image files from there. Problem: I don\u00b4t know how to map images and the <em>content.xml</em> file yet. (Possible solution: Name images according to cell coordinates &amp; sheet? - Not possible for me now.)</p>\n\n<p>I will appreciate any help with this.   </p>\n"}, {"tags": ["perl", "xml-libxml"], "comments": [{"owner": {"reputation": 6715, "user_id": 70945, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4ef069c6258d4b4d35c4b3b39425376b?s=128&d=identicon&r=PG&f=1", "display_name": "weismat", "link": "https://stackoverflow.com/users/70945/weismat"}, "edited": false, "score": 0, "creation_date": 1461328565, "post_id": 36793878, "comment_id": 61162308, "body": "Did you use the Strawberry CPAN client and do you have the output of the compile?"}, {"owner": {"reputation": 33, "user_id": 6240626, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lV9tFXWG394/AAAAAAAAAAI/AAAAAAAAAcs/YibcaoddADE/photo.jpg?sz=128", "display_name": "Dom Glennon", "link": "https://stackoverflow.com/users/6240626/dom-glennon"}, "reply_to_user": {"reputation": 6715, "user_id": 70945, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4ef069c6258d4b4d35c4b3b39425376b?s=128&d=identicon&r=PG&f=1", "display_name": "weismat", "link": "https://stackoverflow.com/users/70945/weismat"}, "edited": false, "score": 0, "creation_date": 1461329804, "post_id": 36793878, "comment_id": 61163259, "body": "Yes, I used the Strawberry CPAN client - by &#39;output of the compile&#39;, do you mean what is sent to the command line, or is an output stored in a file somewhere?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1461329832, "post_id": 36793878, "comment_id": 61163277, "body": "He&#39;s referring to the output the command sent to the console."}, {"owner": {"reputation": 33, "user_id": 6240626, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lV9tFXWG394/AAAAAAAAAAI/AAAAAAAAAcs/YibcaoddADE/photo.jpg?sz=128", "display_name": "Dom Glennon", "link": "https://stackoverflow.com/users/6240626/dom-glennon"}, "edited": false, "score": 0, "creation_date": 1461330218, "post_id": 36793878, "comment_id": 61163558, "body": "Thanks - then I didn&#39;t record it, no. If I try to install it again, I just get the message that it&#39;s up to date (2.0124)."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1461339398, "post_id": 36793878, "comment_id": 61170194, "body": "@DomGlennon There should be a build log, something like <code>C:\\strawberry\\cpan\\build\\XML-LibXML-2.0124</code>"}, {"owner": {"reputation": 33, "user_id": 6240626, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lV9tFXWG394/AAAAAAAAAAI/AAAAAAAAAcs/YibcaoddADE/photo.jpg?sz=128", "display_name": "Dom Glennon", "link": "https://stackoverflow.com/users/6240626/dom-glennon"}, "edited": false, "score": 0, "creation_date": 1461343362, "post_id": 36793878, "comment_id": 61172511, "body": "I&#39;ve uninstalled Strawberry and reinstalled, but I get the same result. This is what I get from CPAN when installing LibXML:<code>Fetching with LWP: http:&#47;&#47;cpan.strawberryperl.com&#47;authors&#47;01mailrc.txt.gz Fetching with LWP: http:&#47;&#47;cpan.strawberryperl.com&#47;modules&#47;02packages.details.tx&zwnj;&#8203;t.gz Fetching with LWP: http:&#47;&#47;cpan.strawberryperl.com&#47;modules&#47;03modlist.data.gz Creating database file ... Done! XML::LibXML is up to date (2.0124).</code>"}, {"owner": {"reputation": 33, "user_id": 6240626, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lV9tFXWG394/AAAAAAAAAAI/AAAAAAAAAcs/YibcaoddADE/photo.jpg?sz=128", "display_name": "Dom Glennon", "link": "https://stackoverflow.com/users/6240626/dom-glennon"}, "edited": false, "score": 0, "creation_date": 1461343459, "post_id": 36793878, "comment_id": 61172567, "body": "There is a build folder, but it&#39;s empty."}, {"owner": {"reputation": 33, "user_id": 6240626, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lV9tFXWG394/AAAAAAAAAAI/AAAAAAAAAcs/YibcaoddADE/photo.jpg?sz=128", "display_name": "Dom Glennon", "link": "https://stackoverflow.com/users/6240626/dom-glennon"}, "edited": false, "score": 0, "creation_date": 1462460086, "post_id": 36793878, "comment_id": 61654565, "body": "An update to this: I&#39;ve discovered that I can run scripts using LibXML from the hard drive, but not on the network. I don&#39;t know if that sheds any more light on what the problem might be?"}], "owner": {"reputation": 33, "user_id": 6240626, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lV9tFXWG394/AAAAAAAAAAI/AAAAAAAAAcs/YibcaoddADE/photo.jpg?sz=128", "display_name": "Dom Glennon", "link": "https://stackoverflow.com/users/6240626/dom-glennon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 776, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1461343195, "creation_date": 1461328160, "last_edit_date": 1495535288, "question_id": 36793878, "link": "https://stackoverflow.com/questions/36793878/cant-run-xmllibxml-on-strawberry-perl-invalid-path-in-dynaloader-pm", "title": "Can&#39;t run XML::LibXML on Strawberry Perl - invalid path in Dynaloader.pm", "body": "<p>I've just installed Strawberry Perl on a new computer, and installed XML::LibXML through cpan (I think it was already installed). When I try to run a script calling LibXML, I get the following error message:</p>\n\n<blockquote>\n  <p>Can't load 'C:\\Strawberry\\perl\\vendor\\lib/auto/XML/LibXML/LibXML.xs.dll' for module XML::LibXML: load_file:The specified path is invalid at C:/strawberry/perl/lib/DynaLoader.pm line 193.   at C:\\Strawberry\\perl\\vendor\\lib/XML/LibXML.pm line 156. BEGIN failed--compilation aborted at C:\\Strawberry\\perl\\vendor\\lib/XML/LibXML.pm  line 156.</p>\n</blockquote>\n\n<p>This is similar to <a href=\"https://stackoverflow.com/questions/11468141/cant-load-c-strawberry-perl-site-lib-auto-xml-libxml-libxml-dll-for-module-x?newreg=a50a146fc7284999b6d4935909571ccb\">this Stack Overflow question</a>, but the error is slightly different, and I've tried all the advice given in that post but still get the message.</p>\n\n<ul>\n<li>LibXML.xs.dll is in the path given above</li>\n<li>C:\\strawberry\\c\\bin is in the path</li>\n<li>I've created the perl5lib system variable, and set it to C:\\Strawberry\\perl\\vendor\\lib (C:\\Strawberry\\perl\\site\\lib was empty)</li>\n<li>libxml2-2___.dll is in c:\\strawberry\\c\\bin</li>\n</ul>\n\n<p>Any other suggestions?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 4, "creation_date": 1461327803, "post_id": 36793736, "comment_id": 61161804, "body": "&quot;I think that it is not good&quot; \u2014 Why do you think that? Does it not behave as you expect? Or does it work and you just want a <a href=\"http://codereview.stackexchange.com/help/on-topic\">code review</a>?"}, {"owner": {"reputation": 35, "user_id": 2335865, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b62795d7ab7938d0421bcc48fbfbbdc3?s=128&d=identicon&r=PG", "display_name": "Video retrieval", "link": "https://stackoverflow.com/users/2335865/video-retrieval"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1461328086, "post_id": 36793736, "comment_id": 61162009, "body": "I think that it prints | everywhere in the line and not replacing CRLF by |"}, {"owner": {"reputation": 35, "user_id": 2335865, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b62795d7ab7938d0421bcc48fbfbbdc3?s=128&d=identicon&r=PG", "display_name": "Video retrieval", "link": "https://stackoverflow.com/users/2335865/video-retrieval"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1461328098, "post_id": 36793736, "comment_id": 61162015, "body": "Thank you for the answer :)"}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1461328485, "post_id": 36793736, "comment_id": 61162254, "body": "CR LF is a space character, so why not <code>elsif ($line =~ &#47;^ID:&#47;){ $line =~  s&#47;\\s+\\z&#47;|&#47; }</code>"}, {"owner": {"reputation": 35, "user_id": 2335865, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b62795d7ab7938d0421bcc48fbfbbdc3?s=128&d=identicon&r=PG", "display_name": "Video retrieval", "link": "https://stackoverflow.com/users/2335865/video-retrieval"}, "edited": false, "score": 0, "creation_date": 1461329381, "post_id": 36793736, "comment_id": 61162950, "body": "Thank you, did you tested what you suggest because it doesn&#39;t work for me :("}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1461329754, "post_id": 36793736, "comment_id": 61163218, "body": "@Videoretrieval Yes, It should work. Here is simple test <code>perl -e &#39;$s = &quot;ID:anytext\\r&quot;; if($s =~ &#47;^ID:&#47;){$s =~ s&#47;\\s+\\z&#47;|&#47;;} print $s&#39;</code>. Run it yourself."}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1461329852, "post_id": 36793945, "comment_id": 61163298, "body": "&quot;<code>\\n</code> is <code>LF</code> only. <code>CRLF</code> is <code>\\r\\n</code>.&quot; Actually the meanings of those sequences change depending on what platform you&#39;re using. See <a href=\"http://perldoc.perl.org/perlport.html\" rel=\"nofollow noreferrer\">perlport</a> for details."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1461331783, "post_id": 36793945, "comment_id": 61164775, "body": "@DaveCross: You&#39;re right. I&#39;ve added the reference in the answer."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1461332927, "post_id": 36793945, "comment_id": 61165615, "body": "Looks like that table should be updated. The &quot;Mac&quot; column refers to Mac OS - and no-one uses that any more."}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 2, "last_activity_date": 1461331784, "last_edit_date": 1461331784, "creation_date": 1461328295, "answer_id": 36793945, "question_id": 36793736, "link": "https://stackoverflow.com/questions/36793736/replacing-cr-lf-in-perl-with/36793945#36793945", "title": "replacing CR LF in perl with &quot;|&quot;", "body": "<p>Depending on platform, <code>\\n</code> has diffrent meanings. From <a href=\"http://perldoc.perl.org/perlport.html\" rel=\"nofollow\">perlport</a>:</p>\n\n<pre><code>    LF  eq  \\012  eq  \\x0A  eq  \\cJ  eq  chr(10)  eq  ASCII 10\n    CR  eq  \\015  eq  \\x0D  eq  \\cM  eq  chr(13)  eq  ASCII 13\n             | Unix | DOS  | Mac  |\n        ---------------------------\n        \\n   |  LF  |  LF  |  CR  |\n        \\r   |  CR  |  CR  |  LF  |\n        \\n * |  LF  | CRLF |  CR  |\n        \\r * |  CR  |  CR  |  LF  |\n        ---------------------------\n        * text-mode STDIO\n</code></pre>\n\n<p>You could do:</p>\n\n<pre><code>elsif ($line =~ /^(ID\\b.*)\\R/) { print $outputFile \"$1|\" }\n</code></pre>\n\n<p><code>\\R</code> stands for any kind of linebreak.</p>\n"}], "owner": {"reputation": 35, "user_id": 2335865, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b62795d7ab7938d0421bcc48fbfbbdc3?s=128&d=identicon&r=PG", "display_name": "Video retrieval", "link": "https://stackoverflow.com/users/2335865/video-retrieval"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461331784, "creation_date": 1461327680, "last_edit_date": 1461328208, "question_id": 36793736, "link": "https://stackoverflow.com/questions/36793736/replacing-cr-lf-in-perl-with", "title": "replacing CR LF in perl with &quot;|&quot;", "body": "<p>Using Perl, I want to replace CRLF by <code>|</code> in the end of a line beginning with <code>\"ID\"</code>.</p>\n\n<p>So, to be more explicit: If a line begins with <code>\"ID\"</code>, I replace CRLF in the end of this sentence by <code>|</code>.</p>\n\n<p>This is what I have done:</p>\n\n<pre><code>    elsif ($line =~ /^ID:\\n/) { print $outputFile $line.\"|\"; }\n</code></pre>\n\n<p>I think that it is not good ..</p>\n"}, {"tags": ["perl", "exception", "tcp", "exception-handling", "eval"], "comments": [{"owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "edited": false, "score": 1, "creation_date": 1461340507, "post_id": 36792589, "comment_id": 61170844, "body": "What are you getting for your value of $@ in each case (for the &#39;if&#39;&#39;)?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1461341776, "post_id": 36792589, "comment_id": 61171588, "body": "What happens after the third message? Does it continue reporting success indefinitely, or does it eventually throw an exception? I think <a href=\"http://stackoverflow.com/q/11436013/176646\">this</a> might be related."}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 2, "creation_date": 1461353830, "post_id": 36792589, "comment_id": 61178062, "body": "Perfectly working for me. Did you try strace to get more information about what&#39;s happening?"}, {"owner": {"reputation": 4314, "user_id": 2943174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9bdaa3d8d699e6e24285d201a1c12c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vernon Grubb", "link": "https://stackoverflow.com/users/2943174/gary-vernon-grubb"}, "reply_to_user": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "edited": false, "score": 0, "creation_date": 1461490572, "post_id": 36792589, "comment_id": 61214557, "body": "@tale in case of both success &amp; fail $@ is empty when I try to print it."}, {"owner": {"reputation": 4314, "user_id": 2943174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9bdaa3d8d699e6e24285d201a1c12c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vernon Grubb", "link": "https://stackoverflow.com/users/2943174/gary-vernon-grubb"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1461490822, "post_id": 36792589, "comment_id": 61214616, "body": "@This After the third message the script just dies with return code 141."}, {"owner": {"reputation": 4314, "user_id": 2943174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9bdaa3d8d699e6e24285d201a1c12c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vernon Grubb", "link": "https://stackoverflow.com/users/2943174/gary-vernon-grubb"}, "reply_to_user": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 0, "creation_date": 1461490834, "post_id": 36792589, "comment_id": 61214618, "body": "@Sebas I will update the strace info in the question above. It is getting killed by SIGPIPE. I don&#39;t know what that means. Thank you all for your comments, please let me know if you can help further based on the new info I posted."}], "answers": [{"comments": [{"owner": {"reputation": 4314, "user_id": 2943174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9bdaa3d8d699e6e24285d201a1c12c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vernon Grubb", "link": "https://stackoverflow.com/users/2943174/gary-vernon-grubb"}, "edited": false, "score": 1, "creation_date": 1461493551, "post_id": 36821676, "comment_id": 61215379, "body": "Thank you. Was able to handle the error more efficiently when I added the above line to my script. However the script still waits for command 4 to notice the broken pipe. How do I make it more sensitive to fail at command 3?"}], "tags": [], "owner": {"reputation": 23906, "user_id": 459233, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/23bfb69cb2c8a6a028d2376b12db4a73?s=128&d=identicon&r=PG", "display_name": "Tudor Constantin", "link": "https://stackoverflow.com/users/459233/tudor-constantin"}, "is_accepted": false, "score": 1, "last_activity_date": 1461491919, "last_edit_date": 1495541260, "creation_date": 1461491919, "answer_id": 36821676, "question_id": 36792589, "link": "https://stackoverflow.com/questions/36792589/using-perl-module-logsyslogfast-unable-to-catch-exception/36821676#36821676", "title": "Using perl module Log::Syslog::Fast - Unable to catch exception", "body": "<p>You might want to trap SIGPIPE like this:</p>\n\n<pre><code>$SIG{PIPE} = \"IGNORE\";\n</code></pre>\n\n<p>From the <a href=\"http://perldoc.perl.org/perlipc.html\" rel=\"nofollow noreferrer\">perlipc</a>:</p>\n\n<p><em>If you're writing to a pipe, you should also trap SIGPIPE. Otherwise, think of what happens when you start up a pipe to a command that doesn't exist: the open() will in all likelihood succeed (it only reflects the fork()'s success), but then your output will fail--spectacularly. Perl can't know whether the command worked, because your command is actually running in a separate process whose exec() might have failed. Therefore, while readers of bogus commands return just a quick EOF, writers to bogus commands will get hit with a signal, which they'd best be prepared to handle.</em> </p>\n\n<p>Also, have a look at <a href=\"https://stackoverflow.com/a/18963142/459233\">this behavior</a> in a C program when writing to a broken socket.</p>\n"}, {"comments": [{"owner": {"reputation": 4314, "user_id": 2943174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9bdaa3d8d699e6e24285d201a1c12c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vernon Grubb", "link": "https://stackoverflow.com/users/2943174/gary-vernon-grubb"}, "edited": false, "score": 0, "creation_date": 1461493566, "post_id": 36821702, "comment_id": 61215384, "body": "Thank you. Was able to handle the error more efficiently when I added the above line to my script. However the script still waits for command 4 to notice the broken pipe. How do I make it more sensitive to fail at command 3?"}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": true, "score": 1, "last_activity_date": 1461492072, "creation_date": 1461492072, "answer_id": 36821702, "question_id": 36792589, "link": "https://stackoverflow.com/questions/36792589/using-perl-module-logsyslogfast-unable-to-catch-exception/36821702#36821702", "title": "Using perl module Log::Syslog::Fast - Unable to catch exception", "body": "<p>Try adding a line</p>\n\n<pre><code>$SIG{PIPE} = sub {\ndie \"SIGPIPE\";\n};\n</code></pre>\n\n<p>before anything is being sent.</p>\n\n<p>You might also want to try \"print\" instead of die.</p>\n"}, {"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 1, "last_activity_date": 1461514268, "last_edit_date": 1495542233, "creation_date": 1461514268, "answer_id": 36825665, "question_id": 36792589, "link": "https://stackoverflow.com/questions/36792589/using-perl-module-logsyslogfast-unable-to-catch-exception/36825665#36825665", "title": "Using perl module Log::Syslog::Fast - Unable to catch exception", "body": "<blockquote>\n  <p>I want the script to fail here when it tries to send the third message but it does not.</p>\n</blockquote>\n\n<p><strong>TL;DR</strong> You can't do this because of the way the TCP protocol works.</p>\n\n<p>The client and server communicate via a socket. When the client writes to the socket, it's actually writing to a buffer; there's no indication whether the message is actually delivered.</p>\n\n<p>The client can only know that the connection is closed after some data is actually sent to the server, so the first write to the buffer will succeed.</p>\n\n<p>Here's what's happening:</p>\n\n<ol>\n<li><p>When you shut down the server, it sends a TCP <code>FIN</code> packet. A <code>FIN</code> indicates that one side of the connection is done sending data, but can still receive; it doesn't indicate that the connection is closed.</p></li>\n<li><p>The client writes your third log message to the socket buffer successfully, so no exception is thrown.</p></li>\n<li><p>The server sends a TCP <code>RST</code> packet to indicate that it's no longer listening.</p></li>\n<li><p>Because of the <code>RST</code>, the OS now knows that the server's end of the TCP connection is closed. When the client tries to write to the socket buffer, the process is signaled with <code>SIGPIPE</code> and the write returns <code>EPIPE</code>.</p></li>\n</ol>\n\n<hr>\n\n<blockquote>\n  <p>The script finally dies while trying to send the fourth message. Unfortunately the eval is not catching the exception.</p>\n</blockquote>\n\n<p>You're not handling <code>SIGPIPE</code> so your program dies when it's signaled. Add the following near the top of your script to ignore <code>SIGPIPE</code>:</p>\n\n<pre><code>$SIG{PIPE} = 'IGNORE';\n</code></pre>\n\n<p>Now you can handle the exception raised by the <code>send</code> method however you like.</p>\n\n<hr>\n\n<p>Further reading:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/15406097/176646\">Writing on a TCP socket closed by the peer</a></li>\n<li><a href=\"https://stackoverflow.com/q/11436013/176646\">Writing to a closed, local TCP socket not failing</a></li>\n<li><a href=\"https://stackoverflow.com/q/26665624/176646\">write on closed socket doesn't generate sigpipe immediatly</a></li>\n<li><a href=\"http://www.lemoda.net/c/unix-sockets/unix-socket-faq.txt\" rel=\"nofollow noreferrer\">Programming UNIX Sockets in C - Frequently Asked Questions</a> section 2.22, \"When will my application receive SIGPIPE?\"</li>\n</ul>\n"}], "owner": {"reputation": 4314, "user_id": 2943174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9bdaa3d8d699e6e24285d201a1c12c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vernon Grubb", "link": "https://stackoverflow.com/users/2943174/gary-vernon-grubb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 36821702, "answer_count": 3, "score": 3, "last_activity_date": 1461514268, "creation_date": 1461324328, "last_edit_date": 1461491242, "question_id": 36792589, "link": "https://stackoverflow.com/questions/36792589/using-perl-module-logsyslogfast-unable-to-catch-exception", "title": "Using perl module Log::Syslog::Fast - Unable to catch exception", "body": "<p>I am using Log::Syslog::Fast to forward logs to a syslog server. I was testing the script to see how it would react if the syslog server suddenly crashed. </p>\n\n<p>To test I created a file with test messages, started the script &amp; then shutdown the syslog server after 2 messages were received at the syslog server.</p>\n\n<p>The script sent the third message &amp; then dies. The termination is not being caught by <code>eval</code> &amp; '<code>use warnings 'FATAL' =&gt; 'all';</code>' does not help.</p>\n\n<p>Could someone please help me catch the exception &amp; close down the script more gracefully?</p>\n\n<p>What needs to happen here is - After the Command2 is sent, the script should catch the exception &amp; display:</p>\n\n<pre><code>Fail: Command3\n</code></pre>\n\n<p><strong>Code extract:</strong></p>\n\n<pre><code>$logger = Log::Syslog::Fast-&gt;new(LOG_TCP,$server, 514, 13, 6, \"test_machine\", \"Syslog\");\n$logger-&gt;set_pid(0);\n\nforeach $line(&lt;SPOOL&gt;)\n{\n        ($machine,$time,$message)=(split '\\|',$line);\n        eval{\n                $logger-&gt;set_sender($machine);\n                $logger-&gt;send($message,$time);\n        };\n        if($@)\n        {\n                print \"\\nFail: $message\\n\";\n                exit;\n        }\n        else\n        {\n                print \"\\nSuccess: $message\\n\";\n        }\n        sleep 5;\n}\n</code></pre>\n\n<p><strong>Input File:</strong></p>\n\n<pre><code>test_machine1|1461201306|Command1\ntest_machine1|1461201311|Command2\ntest_machine1|1461203214|Command3\ntest_machine1|1461203219|Command4\ntest_machine2|1461204005|Command5\ntest_machine2|1461204006|Command6\ntest_machine2|1461204149|Command7\ntest_machine3|1461204154|Command8\ntest_machine3|1461206936|Command9\ntest_machine3|1461206942|Command10\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>Success: Command1\n\nSuccess: Command2\n\nSuccess: Command3\n</code></pre>\n\n<p><strong>Strace Output:</strong></p>\n\n<pre><code>read(4, \"test_machine1|1461201306|Command\"..., 4096) = 341\nread(4, \"\", 4096)                       = 0\nstat(\"/etc/localtime\", {st_mode=S_IFREG|0644, st_size=3519, ...}) = 0\nstat(\"/etc/localtime\", {st_mode=S_IFREG|0644, st_size=3519, ...}) = 0\nsendto(3, \"&lt;110&gt;Apr 20 21:15:06 test_machin\"..., 59, 0, NULL, 0) = 59\nwrite(1, \"Success Command1\\n\\n\\n\", 19Success Command1\n\n\n)  = 19\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigaction(SIGCHLD, NULL, {SIG_DFL, [], 0}, 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nnanosleep({5, 0}, 0x7ffc707478f0)       = 0\nstat(\"/etc/localtime\", {st_mode=S_IFREG|0644, st_size=3519, ...}) = 0\nstat(\"/etc/localtime\", {st_mode=S_IFREG|0644, st_size=3519, ...}) = 0\nsendto(3, \"&lt;110&gt;Apr 20 21:15:11 test_machin\"..., 59, 0, NULL, 0) = 59\nwrite(1, \"Success Command2\\n\\n\\n\", 19Success Command2\n\n\n)  = 19\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigaction(SIGCHLD, NULL, {SIG_DFL, [], 0}, 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nnanosleep({5, 0}, 0x7ffc707478f0)       = 0\nstat(\"/etc/localtime\", {st_mode=S_IFREG|0644, st_size=3519, ...}) = 0\nstat(\"/etc/localtime\", {st_mode=S_IFREG|0644, st_size=3519, ...}) = 0\nsendto(3, \"&lt;110&gt;Apr 20 21:46:54 test_machin\"..., 59, 0, NULL, 0) = 59\n</code></pre>\n\n<p><em>I want the script to fail here when it tries to send the third message but it does not.</em></p>\n\n<pre><code>write(1, \"Success Command3\\n\\n\\n\", 19Success Command3\n\n\n)  = 19\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigaction(SIGCHLD, NULL, {SIG_DFL, [], 0}, 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nnanosleep({5, 0}, 0x7ffc707478f0)       = 0\nstat(\"/etc/localtime\", {st_mode=S_IFREG|0644, st_size=3519, ...}) = 0\nstat(\"/etc/localtime\", {st_mode=S_IFREG|0644, st_size=3519, ...}) = 0\nsendto(3, \"&lt;110&gt;Apr 20 21:46:59 test_machin\"..., 59, 0, NULL, 0) = -1 EPIPE (Broken pipe)\n--- SIGPIPE {si_signo=SIGPIPE, si_code=SI_USER, si_pid=26037, si_uid=3179} ---\n+++ killed by SIGPIPE +++\n</code></pre>\n\n<p><em>The script finally dies while trying to send the fourth message. Unfortunately the eval is not catching the exception.</em></p>\n"}, {"tags": ["xml", "perl", "xml-twig"], "comments": [{"owner": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "edited": false, "score": 2, "creation_date": 1461313959, "post_id": 36788661, "comment_id": 61152535, "body": "According to the perldoc <code>descendants</code> will give you a list, not an object. Probably you need to go through the list printing the indiviual &#39;twigs&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "edited": false, "score": 0, "creation_date": 1461314777, "post_id": 36789058, "comment_id": 61153082, "body": "But I know a priori that there will only be one <code>sentence</code> element per root. So why can&#39;t I just access that one item from a list? But you are right that I should use sprint I guess, I&#39;ll look into it. EDIT; no, I really needed <code>text</code>."}, {"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "reply_to_user": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "edited": false, "score": 2, "creation_date": 1461315021, "post_id": 36789058, "comment_id": 61153220, "body": "if you know there is only 1 sentence, or if you are only interested in the first one, then use either <code>$root-&gt;first_descendant( &#39;sentence&#39;)</code> or even <code>$twig-&gt;first_elt( &#39;sentence&#39;)</code>"}, {"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "edited": false, "score": 0, "creation_date": 1461315278, "post_id": 36789058, "comment_id": 61153394, "body": "Cool! (I deleted my answer so I can accept yours.) Question: when trying to use <code>first_elt</code> on <code>$root</code>  I get <i>Can&#39;t locate object method &quot;first_elt&quot; via package &quot;XML::Twig::Elt&quot;</i>. But when using it on twig it works. How&#39;s that?"}, {"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "reply_to_user": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "edited": false, "score": 0, "creation_date": 1461315754, "post_id": 36789058, "comment_id": 61153720, "body": "sorry, I realized I made a mistake and edited my comment... after you read it apparently. The method on an element (<code>XML::Twig::Elt</code>) is <code>first_descendant</code>, not <code>first_elt</code>."}], "tags": [], "owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "is_accepted": true, "score": 3, "last_activity_date": 1461314821, "last_edit_date": 1461314821, "creation_date": 1461314612, "answer_id": 36789058, "question_id": 36788661, "link": "https://stackoverflow.com/questions/36788661/printing-content-of-xml-in-twig/36789058#36789058", "title": "Printing content of XML in Twig", "body": "<p>This is not jQuery ;--( You have to iterate through the list of descendants.</p>\n\n<p>Plus you can't use <code>print</code> to collect data in a variable, you use <code>print</code> to... print! Use <code>sprint</code> instead:</p>\n\n<pre><code>$sentence= join '', map { $_-&gt;sprint } $root-&gt;descendants('sentence');\n</code></pre>\n\n<p>If what you want is the text of the elements, and the contents of all <code>sentence</code> elements is pure text, you could also use <code>$sentence= $root-&gt;findvalue( '//sentence')</code></p>\n\n<p>Also, use <code>$root-&gt;att( 'id')</code>, or <code>$root-&gt;id</code> since <code>$root-&gt;{att}-&gt;{id}</code> is not part of the official API, and could potentially change in the future.</p>\n"}], "owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 517, "favorite_count": 0, "accepted_answer_id": 36789058, "answer_count": 1, "score": 4, "last_activity_date": 1461314821, "creation_date": 1461313449, "question_id": 36788661, "link": "https://stackoverflow.com/questions/36788661/printing-content-of-xml-in-twig", "title": "Printing content of XML in Twig", "body": "<p>I am trying to print some basic logs in Perl but I get stuck on a very simple issue: I cannot print the contents of XML tags.</p>\n\n<pre><code>my $twig=XML::Twig-&gt;new(pretty_print =&gt; \"nice\");\n$twig-&gt;parse($xml);\nmy $root = $twig-&gt;root;\n\nmy @desc=$root-&gt;descendants_or_self('node');\nmy $nrofdesc=@desc;\n\nmy $sentence = $root-&gt;descendants('sentence')-&gt;print;\nmy $sentenceid = $root-&gt;{att}-&gt;{id};\n\nif ($nrofdesc &gt; $maxdescendants) {\n  print \"$sentence\\t$nrofdesc\\t$sentenceid\\n\";\n}\n</code></pre>\n\n<p>I tried tthe code above but I receive the error </p>\n\n<blockquote>\n  <p>Can't call method \"print\" without a package or object reference at\n  file.pl line 35,  line 15.</p>\n</blockquote>\n\n<p>Which is this line:</p>\n\n<pre><code>my $sentence = $root-&gt;descendants('sentence')-&gt;print;\n</code></pre>\n\n<p>I also tried <code>text</code> as is often proposed, but I get the same error. What am I missing here?</p>\n"}]