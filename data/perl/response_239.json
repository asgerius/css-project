[{"tags": ["perl"], "comments": [{"owner": {"reputation": 2410, "user_id": 8217112, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FB7l5icjoDo/AAAAAAAAAAI/AAAAAAAACPA/jgQiuzBBY3c/photo.jpg?sz=128", "display_name": "noah", "link": "https://stackoverflow.com/users/8217112/noah"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1565217889, "post_id": 57403033, "comment_id": 101287743, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/197641/discussion-between-noah-and-sfr\">continue this discussion in chat</a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1565291532, "post_id": 57403033, "comment_id": 101317976, "body": "The <code>END</code> blocks shouldn&#39;t be inside other expressions (or any of the other special block should, for that matter);  they&#39;re listed nicely at the beginning or end of a program.  <i>Inside</i> you can do what you need, so <code>END { if (defined $cleanup) { for my $name (@arr) { remove_tree( &quot;&#47;dir&#47;..&#47;$name&#47;..&quot;) } } }</code>.  Or <code>remove_tree(&#47;..&#47;$_&#47;..&#47;) for @arr</code>, but I wouldn&#39;t worry about saving a line of code in an <code>END</code> block"}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1565293708, "post_id": 57403033, "comment_id": 101318827, "body": "@zdim It worked! Thanks so much. This is my first time using an END block so it all makes sense now."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1565293990, "post_id": 57403033, "comment_id": 101318921, "body": "Great :)  They <i>can</i> be overused (or abused), but are very useful when used in good taste.  I&#39;ll find examples of other substantial use and post links."}], "answers": [{"comments": [{"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1565219977, "post_id": 57403260, "comment_id": 101288144, "body": "i tried to insert the end block in my &quot;if defined&quot; statement but it didn&#39;t work."}, {"owner": {"reputation": 2410, "user_id": 8217112, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FB7l5icjoDo/AAAAAAAAAAI/AAAAAAAACPA/jgQiuzBBY3c/photo.jpg?sz=128", "display_name": "noah", "link": "https://stackoverflow.com/users/8217112/noah"}, "edited": false, "score": 0, "creation_date": 1565222425, "post_id": 57403260, "comment_id": 101288638, "body": "other way around. END blocks just make whatever is inside run at the end"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1565230203, "post_id": 57403260, "comment_id": 101290035, "body": "@sfr  One thing I can readily find -- see <a href=\"https://stackoverflow.com/a/37724112/4653379\">this post</a> for more discussion and some examples.  (Correction for the above comment: the &quot;<i>phase</i>&quot; associated with the term &quot;runtime&quot; is called <code>RUN</code>.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1565230505, "post_id": 57403260, "comment_id": 101290077, "body": "@sfr Ah, I see what you mean -- you do <code>END { remove_tree(...) if $cleanup }</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1565253750, "post_id": 57403260, "comment_id": 101297559, "body": "@sfr Edited with comments"}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1565287521, "post_id": 57403260, "comment_id": 101316333, "body": "So this does work if I do specify the path exactly. I have elements of an array that fills in part of my path. So I get the warning that uninitialized value $arr in concatenation or string at line..... and it doesn&#39;t do the remove. I will update my post to show the specifics."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 8, "last_activity_date": 1566285352, "last_edit_date": 1566285352, "creation_date": 1565219240, "answer_id": 57403260, "question_id": 57403033, "link": "https://stackoverflow.com/questions/57403033/perl-how-to-remove-a-directory-after-program-finishes/57403260#57403260", "title": "Perl How to remove a directory after program finishes", "body": "<p>That kind of work is one of the main uses of <a href=\"https://perldoc.perl.org/perlmod.html#BEGIN%2c-UNITCHECK%2c-CHECK%2c-INIT-and-END\" rel=\"nofollow noreferrer\">END blocks</a></p>\n\n<pre><code>use File::Path;\n...\n\nEND {\n    remove_tree( ... ) if defined $cleanup;\n};\n</code></pre>\n\n<p>This special code block</p>\n\n<blockquote>\n  <p>is executed as late as possible, that is, after perl has finished running the program and just before the interpreter is being exited, even if it is exiting as a result of a <code>die()</code> function.  (But not if it's morphing into another program via <code>exec</code>, or being blown out of the water by a signal--you have to trap that yourself (if you can).)</p>\n</blockquote>\n\n<p>The <code>END</code> blocks also run on <code>exit</code>, and a parent's <code>END</code> block runs in a child process <em>as well</em>. They can be suppressed by using <a href=\"https://perldoc.perl.org/POSIX.html#FUNCTIONS\" rel=\"nofollow noreferrer\">POSIX</a>::<code>_exit(status)</code> instead of <code>exit</code>.</p>\n\n<p>Note that this is a special phase in the program lifetime and some things may not work the same. For example, signal handlers are gone as <code>RUN</code> phase ended (can be reinstalled in the first <code>END</code> block). However, you can work with the filesystem and clean up files etc.</p>\n"}, {"tags": [], "owner": {"reputation": 2279, "user_id": 13563, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VoEyi.jpg?s=128&g=1", "display_name": "jimtut", "link": "https://stackoverflow.com/users/13563/jimtut"}, "is_accepted": false, "score": 2, "last_activity_date": 1565281072, "creation_date": 1565281072, "answer_id": 57416884, "question_id": 57403033, "link": "https://stackoverflow.com/questions/57403033/perl-how-to-remove-a-directory-after-program-finishes/57416884#57416884", "title": "Perl How to remove a directory after program finishes", "body": "<p>If the directory to be used is temporary (created by the code, and then cleaned up at the end), just use <a href=\"https://perldoc.perl.org/File/Temp.html\" rel=\"nofollow noreferrer\">File::Temp</a> with the \"cleanup\" option.</p>\n\n<pre><code>use File::Temp;\n$dir = tempdir( CLEANUP =&gt; 1 );\n</code></pre>\n"}], "owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 57403260, "answer_count": 2, "score": 1, "last_activity_date": 1566285352, "creation_date": 1565217101, "last_edit_date": 1565287710, "question_id": 57403033, "link": "https://stackoverflow.com/questions/57403033/perl-how-to-remove-a-directory-after-program-finishes", "title": "Perl How to remove a directory after program finishes", "body": "<p>I want to allow users to pass a cleanup argument through the command line (such as --clean) to remove a directory containing no longer needed files. When I try to do a remove_tree, it does during the program run. How can I get it so it does it once the entire run is complete and then removes the directory that I no longer need?</p>\n\n<p>So I have <code>/$cleanup</code> in my getOptions. </p>\n\n<pre><code>if (defined $cleanup){\nremove_tree(\"my path here\");\n}\n</code></pre>\n\n<p>It is not a question of HOW to remove directories, but how to remove them only upon user option through command line. </p>\n\n<p>EDIT:\nI tried with the END block.</p>\n\n<p>Here is how my code looks. </p>\n\n<pre><code>@arr = (John, Daniel, Mary); #there is path for each one of them generated\nforeach my $arr (@array){\n......\nEND{\nremove_tree(\"/mydir/names/$array/outputfiles\") if defined $cleanup;\n};\n}\n</code></pre>\n\n<p>I do this because I want it done for each name but it doesn't work. If I do it like this, it does work but I'd rather have one line instead of three. </p>\n\n<pre><code>@arr = (John, Daniel, Mary); #there is path for each one of them generated\nforeach my $arr (@array){\n......\nEND{\nremove_tree(\"/mydir/names/John/outputfiles\") if defined $cleanup;\n};\n}\n</code></pre>\n"}, {"tags": ["perl", "mojo-dom"], "comments": [{"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "edited": false, "score": 0, "creation_date": 1565240544, "post_id": 57402020, "comment_id": 101291993, "body": "could you post a bit more HTML, like the parent elements."}], "answers": [{"tags": [], "owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "is_accepted": false, "score": 2, "last_activity_date": 1565241000, "creation_date": 1565241000, "answer_id": 57405531, "question_id": 57402020, "link": "https://stackoverflow.com/questions/57402020/using-mojodom-to-extract-untagged-text-after-heading/57405531#57405531", "title": "Using Mojo::DOM to extract untagged text after heading", "body": "<p>Try this code, I have just added a parent element:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Mojo::DOM;\n\n\nmy $html = q{&lt;div class=\"container\"&gt;&lt;h2&gt;Description&lt;/h2&gt;This text is the description&lt;div class=\"footer\"&gt;[&lt;a href=\"/contrib/rev/1597/2795/\"&gt;Edit description&lt;/a&gt;\n&lt;/div&gt;&lt;/div&gt;};\n\nmy $dom = Mojo::DOM-&gt;new($html);\n\nprint $dom-&gt;at('div.container')-&gt;text();\n</code></pre>\n\n<p>Alternatively, using your HTML snippet, the following can be done:</p>\n\n<pre><code>print $dom-&gt;text();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1567571891, "last_edit_date": 1567571891, "creation_date": 1565248422, "answer_id": 57407105, "question_id": 57402020, "link": "https://stackoverflow.com/questions/57402020/using-mojodom-to-extract-untagged-text-after-heading/57407105#57407105", "title": "Using Mojo::DOM to extract untagged text after heading", "body": "<p>One can go through <em>all</em> nodes, what also catches those which aren't inside an HTML element (tag). Then use the fact that you need the node that follows the <code>h2</code> tag. </p>\n\n<p>More precisely, it follows the text-node which is the child of the (identifiable) <code>h2</code> tag-node.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Mojo::DOM;\n\nmy $html = q(&lt;h2&gt;Description&lt;/h2&gt; This text is the description &lt;p&gt;More...&lt;/p&gt;);\n\nmy $dom = Mojo::DOM-&gt;new($html);\n\nmy $is_next = 0;\n\nforeach my $node ($dom-&gt;descendant_nodes-&gt;each) { \n    my $par = $node-&gt;parent;\n    if ($node-&gt;type eq 'text' and $par-&gt;type eq 'tag' and $par-&gt;tag eq 'h2') { \n        $is_next = 1;\n    }   \n    elsif ($is_next) {\n        say $node;       #--&gt;   This text is the description\n        $is_next = 0;\n    }   \n}\n</code></pre>\n\n<p>More criteria for exactly which <code>h2</code> nodes are of interest can be added (unless it's really all such nodes), by interrogating either the previous text-node (text of the <code>h2</code> tag) or its parent (the tag).</p>\n\n<p>The node itself should likely be checked as well, for example to see whether it's indeed just loose text and not actually a next tag.</p>\n\n<p>I've tested with far more complex HTML; the above is a near-minimal testable markup.</p>\n\n<hr>\n\n<p>In this simple example just <code>$dom-&gt;text</code> catches the needed text. However, that won't be the case in more complex fragments where the sought text doesn't come after the very first element.</p>\n"}], "owner": {"reputation": 53, "user_id": 11433859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2237cb2bc506f36181939fcd44317c00?s=128&d=identicon&r=PG&f=1", "display_name": "Werdle Sneng", "link": "https://stackoverflow.com/users/11433859/werdle-sneng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 57407105, "answer_count": 2, "score": 3, "last_activity_date": 1567571891, "creation_date": 1565210399, "question_id": 57402020, "link": "https://stackoverflow.com/questions/57402020/using-mojodom-to-extract-untagged-text-after-heading", "title": "Using Mojo::DOM to extract untagged text after heading", "body": "<p>I'm trying to extract some text without tags from a HTML file using Mojo::DOM (I'm new at this). In particular, the description text after the H2 heading (there are other headings in the file).</p>\n\n<pre><code>&lt;h2&gt;Description&lt;/h2&gt;This text is the description&lt;div class=\"footer\"&gt;[&lt;a href=\"/contrib/rev/1597/2795/\"&gt;Edit description&lt;/a&gt;\n</code></pre>\n\n<p>I've been able to find the heading, but don't know how to access the text after is, since I have not tag to jump to...</p>\n\n<pre><code>my $dom = Mojo::DOM-&gt;new( $htmlfile );\nmy $desc = $dom\n    -&gt;find('h2')\n    -&gt;grep(sub { $_-&gt;all_text =~ /Description/ })\n    -&gt;first;\n</code></pre>\n\n<p>Can anyone recommend to me a way how to grab the \"This text is the description\" string?</p>\n"}, {"tags": ["string", "perl", "whitespace", "trailing"], "answers": [{"tags": [], "owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "is_accepted": true, "score": 9, "last_activity_date": 1565205922, "last_edit_date": 1565205922, "creation_date": 1565199469, "answer_id": 57399677, "question_id": 57399593, "link": "https://stackoverflow.com/questions/57399593/how-can-i-make-split-t-string-detect-empty-values-when-string-ends-with/57399677#57399677", "title": "How can I make split(/\\t/, $STRING) detect empty values when $STRING ends with &quot;\\t\\t&quot;?", "body": "<p>Change the <code>split</code> line by adding <code>-1</code> as a parameter:</p>\n\n<pre><code>my @F = split(/\\t/, $STRING, -1);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>value1  value2              \n6\nDone \n</code></pre>\n\n<p>Per <a href=\"https://perldoc.pl/functions/split\" rel=\"noreferrer\"><code>perldoc split</code></a>, the parameters to <code>split</code> are <code>PATTERN, EXPR, LIMIT</code>.  In your current situation, \"LIMIT is omitted so \"trailing empty fields are stripped.\"</p>\n\n<p>By adding the <code>-1</code> value for <code>LIMIT</code>:</p>\n\n<blockquote>\n  <p>If LIMIT is negative, it is treated as if it were instead arbitrarily large; as many fields as possible are produced.</p>\n</blockquote>\n\n<p>So a negative final argument prevents <code>split</code> from discarding trailing fields.</p>\n"}], "owner": {"reputation": 142, "user_id": 6222945, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-OBwc8M20qJc/AAAAAAAAAAI/AAAAAAAAAD8/rLkjkEFFTpM/photo.jpg?sz=128", "display_name": "ahmedhelali100", "link": "https://stackoverflow.com/users/6222945/ahmedhelali100"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 57399677, "answer_count": 1, "score": 3, "last_activity_date": 1565205922, "creation_date": 1565199104, "last_edit_date": 1565199575, "question_id": 57399593, "link": "https://stackoverflow.com/questions/57399593/how-can-i-make-split-t-string-detect-empty-values-when-string-ends-with", "title": "How can I make split(/\\t/, $STRING) detect empty values when $STRING ends with &quot;\\t\\t&quot;?", "body": "<p>How can I  make <code>split(/\\t/, $STRING)</code> detect empty items when <code>$STRING</code> ends with <code>\"\\t\\t\"</code>?</p>\n\n<p>Using Perl script, I am trying to split strings based on  as a separator between items then count and use these items. But, when the strings end with a combination s, the script doesn't count empty items.</p>\n\n<p>Example:</p>\n\n<p><code>string=\"value1\\tvalue2\\t\\t\\t\\t\"</code> (value1, value2 and 4 empty items)</p>\n\n<p>but it counts 2 items (value1, value2):</p>\n\n<pre><code>$STRING=\"value1\\tvalue2\\t\\t\\t\\t\";\nprint $STRING.\"\\n\";\nmy @F = split(/\\t/, $STRING);\nprint scalar(@F).\"\\n\";\n\n# The number of items must match the number of header name\nif( scalar(@F) == 6 )\n            {\n                    print  \"Done \\n\";\n            }\n</code></pre>\n\n<p>the code prints:</p>\n\n<pre><code>value1  value2      \n2\n</code></pre>\n\n<p>while what is expected is:</p>\n\n<pre><code>value1  value2  \n6\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 11, "user_id": 11870645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9289706740e6a3b5fca947c0d4883c70?s=128&d=identicon&r=PG&f=1", "display_name": "Scott Smith", "link": "https://stackoverflow.com/users/11870645/scott-smith"}, "reply_to_user": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1565189341, "post_id": 57396433, "comment_id": 101275870, "body": "I&#39;m making this worse..  if I call it from the command line as &#39;perl -pe filter.pl input_file.txt&#39; I get &quot;Unknown regexp modifier &quot;/t&quot; at -e line 1, at end of line Execution of -e aborted due to compilation errors.&quot;"}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1565211070, "post_id": 57396433, "comment_id": 101285812, "body": "Consider changing each <code>\\r</code> to <code>\\r?</code> to make the <code>\\r</code> optional.  Then the regex should match lines that end with <code>CR + LF</code> as well as lines that end with just <code>LF</code>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 7, "last_activity_date": 1565283105, "last_edit_date": 1565283105, "creation_date": 1565189846, "answer_id": 57397246, "question_id": 57396433, "link": "https://stackoverflow.com/questions/57396433/passing-text-file-to-perl-script-on-commandline/57397246#57397246", "title": "Passing Text File to Perl Script on Commandline", "body": "<p>You want the following:</p>\n\n<pre><code>./filter.pl input_file.txt\n</code></pre>\n\n<p>The shebang line will make the above equivalent to the following:</p>\n\n<pre><code>/usr/bin/perl -p ./filter.pl input_file.txt\n</code></pre>\n\n<p><code>-e</code> is used to pass code as a parameter instead of passing a path to a script, so it shouldn't be used here.</p>\n\n<hr>\n\n<p>Note that</p>\n\n<pre><code>$_ = '' if /^[0]*\\r$/ || /^\\d{3}\\r$/ || /^\\d{4}\\r$/ || /^\\d{5}\\r$/ || /^\\d{6}\\r$/;\n</code></pre>\n\n<p>simplifies to</p>\n\n<pre><code>$_ = '' if /^(?:0*|\\d{3,6})\\r$/;\n</code></pre>\n\n<hr>\n\n<p>Note that the script will only work on a non-Windows build of Perl with an input file with Windows line endings. Odd. Are you sure you want those <code>\\r</code>?</p>\n"}], "owner": {"reputation": 11, "user_id": 11870645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9289706740e6a3b5fca947c0d4883c70?s=128&d=identicon&r=PG&f=1", "display_name": "Scott Smith", "link": "https://stackoverflow.com/users/11870645/scott-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565283105, "creation_date": 1565187162, "question_id": 57396433, "link": "https://stackoverflow.com/questions/57396433/passing-text-file-to-perl-script-on-commandline", "title": "Passing Text File to Perl Script on Commandline", "body": "<p>Years ago I made a simple script to remove some errant data from a simple text file.  Recently I started to see it back in the data and wasn't sure why.  The Perl script hasn't changed in 5 years, and the data input looks identical to me.</p>\n\n<p>I tried testing from the commandline and it does not appear to be replacing/removing the lines as it has before.  I thought perhaps it was a CRLF issue, but that doesn't appear to be the case either.</p>\n\n<p>The script is simply:</p>\n\n<pre><code>#!/usr/bin/perl -p\n\n$_ = '' if \n\n# Any number of zeros \n/^[0]*\\r$/ || \n# Three digits\n/^\\d{3}\\r$/ ||\n# Four digits \n/^\\d{4}\\r$/ ||\n# Five digits \n/^\\d{5}\\r$/ ||\n# Six digits \n/^\\d{6}\\r$/;\n</code></pre>\n\n<p>if I call it from the command line,</p>\n\n<pre><code>perl -e filter.pl input_file.txt\n</code></pre>\n\n<p>I get exactly the input file, no substitutions.  The only thing that is different is that the perl script runs inside of a bigger bash script.</p>\n\n<p>Where am I off track?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 12879, "user_id": 1214214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mE5HL.png?s=128&g=1", "display_name": "TheMeaningfulEngineer", "link": "https://stackoverflow.com/users/1214214/themeaningfulengineer"}, "edited": false, "score": 0, "creation_date": 1565170106, "post_id": 57391061, "comment_id": 101264520, "body": "I have posted the question following all the suggested best practices for regex related questions. Please provide info for the down votes."}, {"owner": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "edited": false, "score": 0, "creation_date": 1565170397, "post_id": 57391061, "comment_id": 101264668, "body": "Actually, I upvoted because of the clarity. But I guess the reason might be <i>not enough attempts to resolve your own problem</i>, or <a href=\"https://idownvotedbecau.se/noresearch\" rel=\"nofollow noreferrer\">no research</a>."}], "answers": [{"comments": [{"owner": {"reputation": 12879, "user_id": 1214214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mE5HL.png?s=128&g=1", "display_name": "TheMeaningfulEngineer", "link": "https://stackoverflow.com/users/1214214/themeaningfulengineer"}, "edited": false, "score": 0, "creation_date": 1565170605, "post_id": 57391131, "comment_id": 101264783, "body": "Do <code>(?:^.+\\n)*</code> and <code>(?:^.+$)*</code> mean the same?"}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 12879, "user_id": 1214214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mE5HL.png?s=128&g=1", "display_name": "TheMeaningfulEngineer", "link": "https://stackoverflow.com/users/1214214/themeaningfulengineer"}, "edited": false, "score": 0, "creation_date": 1565170680, "post_id": 57391131, "comment_id": 101264826, "body": "<code>$</code> is zero width assertion like <code>^</code> so it won&#39;t match a newline."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 12879, "user_id": 1214214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mE5HL.png?s=128&g=1", "display_name": "TheMeaningfulEngineer", "link": "https://stackoverflow.com/users/1214214/themeaningfulengineer"}, "edited": false, "score": 0, "creation_date": 1565170853, "post_id": 57391131, "comment_id": 101264915, "body": "I have updated it further. Using <code>\\R</code> is more portable than using <code>\\n</code> to match any newline"}, {"owner": {"reputation": 127, "user_id": 10994280, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ddtM6OR942U/AAAAAAAAAAI/AAAAAAAAAZE/H2lAB3lF_sA/photo.jpg?sz=128", "display_name": "Ramireddy Samar", "link": "https://stackoverflow.com/users/10994280/ramireddy-samar"}, "edited": false, "score": 0, "creation_date": 1565172140, "post_id": 57391131, "comment_id": 101265600, "body": "@anubhava I don&#39;t think it&#39;s better to use <code>\\R</code>. I have seen that most of the flavors like &#39;js&#39;,&#39;python&#39; aren&#39;t using this, instead, they use <code>\\n</code>"}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 127, "user_id": 10994280, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ddtM6OR942U/AAAAAAAAAAI/AAAAAAAAAZE/H2lAB3lF_sA/photo.jpg?sz=128", "display_name": "Ramireddy Samar", "link": "https://stackoverflow.com/users/10994280/ramireddy-samar"}, "edited": false, "score": 1, "creation_date": 1565172243, "post_id": 57391131, "comment_id": 101265659, "body": "@RamireddySamar: Since question is for perl regex hence <code>\\R</code> was suggested. If it was for JS/Python etc then it would have been <code>[\\r\\n]+</code> to match all kind of newlines."}, {"owner": {"reputation": 127, "user_id": 10994280, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ddtM6OR942U/AAAAAAAAAAI/AAAAAAAAAZE/H2lAB3lF_sA/photo.jpg?sz=128", "display_name": "Ramireddy Samar", "link": "https://stackoverflow.com/users/10994280/ramireddy-samar"}, "edited": false, "score": 0, "creation_date": 1565172443, "post_id": 57391131, "comment_id": 101265779, "body": "@anubhava: What do you mean by <b>Portable</b>?, I didn&#39;t get you."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1565172514, "post_id": 57391131, "comment_id": 101265823, "body": "By portability, I mean different OS with their different editors. Windows uses <code>\\r\\n</code>, Unix uses <code>\\n</code> and OSX used to have <code>\\r</code> as line break"}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 2, "last_activity_date": 1565170606, "last_edit_date": 1565170606, "creation_date": 1565170030, "answer_id": 57391131, "question_id": 57391061, "link": "https://stackoverflow.com/questions/57391061/match-a-block-of-text-enclosed-by-newlines-that-contains-a-pattern/57391131#57391131", "title": "Match a block of text enclosed by newlines that contains a pattern", "body": "<p>You may use this regex:</p>\n\n<pre><code>^(?:.+\\R)*^.*?BOB.*\\R(?:^.+\\R)*\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/VXfacC/9\" rel=\"nofollow noreferrer\">Updated RegEx Demo</a></p>\n\n<p><strong>RegEx Details:</strong></p>\n\n<ul>\n<li><code>^</code>: Match start</li>\n<li><code>(?:.+\\R)*</code>: Match 0 or more lines with at least 1 character</li>\n<li><code>^.*?BOB.*\\R</code>: Match a line with <code>BOB</code> somewhere</li>\n<li><code>(?:^.+\\R)*</code>: Match 0 or more lines with at least 1 character</li>\n</ul>\n\n<p><img src=\"https://i.stack.imgur.com/ouMIk.png\" alt=\"regexp img\"></p>\n\n<hr>\n\n<p>If you are fine with lookahead then you may also use this regex:</p>\n\n<pre><code>^(?=(?:.+\\R)*.*?BOB)(?:.+\\R)+\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/VXfacC/7\" rel=\"nofollow noreferrer\">RegEx Demo 2</a></p>\n"}], "owner": {"reputation": 12879, "user_id": 1214214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mE5HL.png?s=128&g=1", "display_name": "TheMeaningfulEngineer", "link": "https://stackoverflow.com/users/1214214/themeaningfulengineer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 57391131, "answer_count": 1, "score": 1, "last_activity_date": 1565170606, "creation_date": 1565169788, "question_id": 57391061, "link": "https://stackoverflow.com/questions/57391061/match-a-block-of-text-enclosed-by-newlines-that-contains-a-pattern", "title": "Match a block of text enclosed by newlines that contains a pattern", "body": "<p>Given the text:</p>\n\n<pre><code>\n\ntext text \ntexttexttext text BOB\ntext\n\n\ntext\ntexttt text\ntext\n\n\ntext text text \ntBOBext\ntexttexttext text\ntext \ntext\n\n\ntext text text \ntext\ntexttexttext text\ntext\n\n\n</code></pre>\n\n<p>What would be the reggex that would match:</p>\n\n<pre><code>\ntext text \ntexttexttext text BOB\ntext\n\n</code></pre>\n\n<p>and</p>\n\n<pre><code>\ntext text text \ntBOBext\ntexttexttext text\ntext \ntext\n\n</code></pre>\n\n<p>Am taking it step by step first trying to identify a pattern for matching any block of text surrounded by a newline on both sides. Am hoping to add the <code>BOB</code> filter after that.</p>\n\n<p>I'm currently at <code>^\\n(\\n|.)*?^$</code>.  It doesn't match the ending newline, and also has matches on empty lines without any text.</p>\n\n<p><a href=\"https://regex101.com/r/VXfacC/3\" rel=\"nofollow noreferrer\">Reggex editor with this example</a></p>\n"}, {"tags": ["perl", "dynamic", "package", "compile-time"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1565138231, "post_id": 57385262, "comment_id": 101254863, "body": "<code>eval($code)</code> You could use a template to generate <code>$code</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1565141468, "post_id": 57385262, "comment_id": 101255384, "body": "Or <code>require($package_file)</code> (or <code>require Package::Name;</code>), if you build the package at runtime (and dump it to the file <code>$package_file</code>)"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1565159290, "post_id": 57385262, "comment_id": 101259240, "body": "If you want a nice and complete but heavy API: <a href=\"http://p3rl.org/Moose::Meta::Class\" rel=\"nofollow noreferrer\">Moose::Meta::Class-&gt;create</a>"}, {"owner": {"reputation": 1208, "user_id": 10879061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd339757af5995ab15d4f5759b270fc2?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Lambden", "link": "https://stackoverflow.com/users/10879061/rob-lambden"}, "edited": false, "score": 1, "creation_date": 1565164970, "post_id": 57385262, "comment_id": 101261768, "body": "eval will execute your code so it will certainly do what you want ... but remember if your code is wrong you&#39;re in for a significant debug journey.  If you have a working template and only change a few parameters and include known working methods then you&#39;re minimising the possible headaches that come with a dynamic code approach.  This approach can also be used for code encryption - you read in an encrypted file, decrypt it and eval it.  (Which is only useful if you can protect the decryption process)."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1565204936, "post_id": 57385262, "comment_id": 101283386, "body": "So, I was hoping for some sort of magic, and you all have provided it.  1) generate the dynamic code, 2) decide whether or not it persists on disk, 3) execute it, and all of this to avoid the clean, but slow (in this case) Moose.  First one to write it up gets the points. :)"}], "answers": [{"comments": [{"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1565204544, "post_id": 57398951, "comment_id": 101283215, "body": "Generally, this is true.  This particularly odd case is millions of mathematical transformations, and comparing them to each other.  If run-time speed considerations weren&#39;t a factor, I&#39;d use a crisp, clean <code>compute(&quot;Xma&quot;,[0..1000])</code> sort of affair.  The profiling suggests that the lookups of the hashes become a problem on the hardware I&#39;m using.  But mostly, it was curiosity.  If/when speed becomes a super big deal, I&#39;ll probably switch to <code>C</code>.  If that isn&#39;t fast enough, I&#39;ll give up, because it hasn&#39;t been long enough since I&#39;ve written in <code>ForTran</code> that I&#39;ve forgotten the scars it leaves."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1565205149, "post_id": 57398951, "comment_id": 101283465, "body": "Someone clever once wrote that &quot;It is not possible to both understand and appreciate the Intel CPU.&quot;, so assembler is right out."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1565212238, "post_id": 57398951, "comment_id": 101286175, "body": "I upvoted the post from @ojosilva, because it&#39;s all true, and my comments may not have reflected that.  It added value."}], "tags": [], "owner": {"reputation": 1724, "user_id": 636790, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e9a0d07422c625c68ecfec71b48313f7?s=128&d=identicon&r=PG", "display_name": "ojosilva", "link": "https://stackoverflow.com/users/636790/ojosilva"}, "is_accepted": false, "score": 3, "last_activity_date": 1565196115, "creation_date": 1565196115, "answer_id": 57398951, "question_id": 57385262, "link": "https://stackoverflow.com/questions/57385262/how-do-i-create-packages-dynamically-in-perl/57398951#57398951", "title": "How do I create packages dynamically in perl?", "body": "<p>I hate to be the one to say it but variable code (?!) is quite the <strong>anti-pattern</strong> and a big red flag for most use cases I can think of, except for the obvious code generating tools or transpilers.</p>\n\n<p>It is much preferable to just create a single class or class hierarchy then deal with whatever differences from within that class using non-meta programming.</p>\n\n<p>In fact, that's the idea of OOP in general. You create objects which are instances or copies from a \"template\" which is your class:</p>\n\n<pre><code>  package MyClass {\n       sub new {\n           my ( $class, %args ) = @_;\n           bless { name =&gt; sprintf('%s%d', $args{basename}, $args{len}) }, $class;\n       }\n  }\n\n  my $obj = MyClass-&gt;new( basename =&gt; 'Xma', len =&gt; 7 );\n  printf \"New class is %s\\n\", $obj-&gt;{ name };\n</code></pre>\n\n<p>If you really really need to create packages/classes dynamically, the most sane approach I can think of is to create classes dynamically that inherit from one or more base classes.</p>\n\n<pre><code>package MyClass {  \n    sub new {\n        my ( $class, %args ) = @_;\n        bless \\%args, $class;\n    }\n\n    sub foo {\n        my $self = shift;\n        return \"instance of $self\";\n    }\n}\n\nsub build_class {\n    my ( %args ) = @_;\n\n    my $classname = sprintf( '%s::%s%d', $args{ parent }, $args{ basename }, $args{ len } );\n    @{ \"${classname}::ISA\" } = ( $args{ parent } );\n\n    return $classname;\n}\n\nmy $classname = build_class( parent =&gt; 'MyClass', basename =&gt; 'Xma', len =&gt; 7 );\nmy $obj = $classname-&gt;new();\n\nprintf \"New class is %s\\n\", ref $obj;  # is MyClass::Xma7\nprintf \"Object is an %s\\n\", $obj-&gt;foo; # a MyClass::Xma7=HASH(...) object instance\n</code></pre>\n\n<p>For more meta-programming power for your OOP, look into <code>Moose::Meta::Class</code> or <code>Class::MOP</code>:</p>\n\n<pre><code>use Class::MOP;\n\nmy $basename = 'Xma';\nmy $len = 7;\nmy $classname = \"MyClass::${basename}${len}\";\n\nClass::MOP::Class-&gt;create(\n    $classname,\n    attributes =&gt; [\n        Class::MOP::Attribute-&gt;new( 'foo', is =&gt; 'rw', isa =&gt; 'Str' )\n    ],\n    methods =&gt; {}\n);\n\n$classname-&gt;new( foo =&gt; 'bar' );\n</code></pre>\n\n<p>On the other hand, if you really need to have variable code within your packages and/or you don't need/want to load all packages in memory at runtime everytime your program runs, I would say you can use <strong>a set of file templates and some template language</strong> of your choice to output your new packages to files (ie. \"MyClass/Xma7.pm\", \"MyClass/Xma8.pm\") then load them using <code>use MyClasses::Xma7;</code> just like with any other package. The advantage here is that your code will much easier to debug and test given the error proneness of meta-programming.</p>\n"}], "owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1565196115, "creation_date": 1565134872, "question_id": 57385262, "link": "https://stackoverflow.com/questions/57385262/how-do-i-create-packages-dynamically-in-perl", "title": "How do I create packages dynamically in perl?", "body": "<p>I've got a situation which would be helped if I could create packages dynamically.  The following code won't run, but illustrates the spirit of what I want to do.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy $basename    = \"Xma\";\nmy $len     = 7;\nmy $newClass    = sprintf(\"%s%d\", $basename, $len);\n\nprintf(\"New class is %s\\n\", $newClass);\n\npackage $newClass {\n    # Early modules.\n    our @enum; BEGIN { @enum = qw( I_VAL I_SLOPE ); }\n\n    use parent qw(Exporter);\n    use enum::fields @enum;\n    our @EXPORT = (@enum);\n\n    our $classLen = $len;\n    our $classBasename = $basename;\n\n    sub new {\n    my $invocant = shift;\n    my $self = bless ([], ref $invocant || $invocant);\n    return($self);\n    }\n}\n\n1;\n</code></pre>\n\n<p>I've included the \"extra\" stuff in my new class to illustrate that the new class is a complex one and it's going to be in an inheritance chain.</p>\n\n<p>I know I can do simple packages with something like:</p>\n\n<pre><code>*{ \"${class}::new\" } = sub { return bless { }, $class };\n</code></pre>\n\n<p>But my new classes/packages are going to be pretty big, so I was hoping for something a little easier to maintain.</p>\n\n<p>The curious among you might be asking, \"Why?\"  Curiosity is a big one.  I need to process process as much stuff as I can at load/compile time, and am trying to avoid several million runtime lookups.  I need to change <code>$basename</code> and <code>$len</code> frequently, but only at compile time.  And the big one: curiosity. </p>\n"}, {"tags": ["perl", "types", "moo"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1565128273, "post_id": 57384116, "comment_id": 101252923, "body": "What&#39;s your end goal here? House numerous types of objects?"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1565132663, "post_id": 57384611, "comment_id": 101253935, "body": "Your check can throw an exception. It should be <code>if(defined(blessed($Other)) &amp;&amp; $Other-&gt;isa(&#39;MyCore&#39;))</code>. <code>blessed</code> is provided by Scalar::Util"}], "tags": [], "owner": {"reputation": 1208, "user_id": 10879061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd339757af5995ab15d4f5759b270fc2?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Lambden", "link": "https://stackoverflow.com/users/10879061/rob-lambden"}, "is_accepted": true, "score": 2, "last_activity_date": 1565129152, "creation_date": 1565129152, "answer_id": 57384611, "question_id": 57384116, "link": "https://stackoverflow.com/questions/57384116/how-do-i-check-if-an-object-is-valid-when-pushed-to-an-arrayof-member-in-my-pe/57384611#57384611", "title": "How do I check if an object is valid when pushed to an ArrayOf[] member in my perl Moo class?", "body": "<p>This answer ignores Moo as you you can achieve what you have asked without using it.  This does not prevent you using it if you want to, but it's not needed to do what you are asking.</p>\n\n<p>Perl itself is effectively duck-typed but <em>does</em> support bless which blesses a hash reference into a class, allowing you to attach methods to it.</p>\n\n<p>In the same way that in any object oriented system classes can inherit from each other in perl you can say that any class <strong>isa</strong> another class.  Then your code can simply check if it has been passed a hash reference that's blessed as that class.</p>\n\n<p>So if I understand your question correctly, you can ensure that you only add classes of the relevant type (blessed appropriately) to your array by ensuring that your class hierarchy stipulates the correct isa relationships and checking for that.</p>\n\n<p>So if you define a base type that is the type you want to check for you can have all of your other types declare that they are that:</p>\n\n<p>Possible example declaration in your base :</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>package MyCore;\n\nsub new\n{\nmy ($Class, $obj);\n\n  $Class=shift;\n  $obj= { Key =&gt; 'Value' };\n  bless($obj, $Class);\n  return($obj);\n}\n</code></pre>\n\n<p>possible declartion in a derived type:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use MyCore;\n\npackage MyDerived;\n@MyDerived::ISA=('MyCore');\n\nsub new()\n{\nmy ($Class, $Obj);\n\n  $Class=shift;\n  $Obj=MyCore::new();\n  $Obj-&gt;{NewKey}='NewValue';\n  bless($Obj, $Class);\n}\n</code></pre>\n\n<p>Then when you are adding to an array:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub connect()\n{\n  my ($Self, $Other);\n  $Self=shift;\n  $Other=($#_&gt;=0)?shift:undef;\n\n  if(defined($Other) &amp;&amp; $Other-&gt;isa('MyCore'))\n  {\n    push(@{$Self-&gt;{Connected}}, $Other);\n  }\n}\n</code></pre>\n\n<p>We use this approach in a high volume webserver built on mod_perl and it is simple and easy to relate to for users of other object oriented environments.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1565133225, "creation_date": 1565133225, "answer_id": 57385102, "question_id": 57384116, "link": "https://stackoverflow.com/questions/57384116/how-do-i-check-if-an-object-is-valid-when-pushed-to-an-arrayof-member-in-my-pe/57385102#57385102", "title": "How do I check if an object is valid when pushed to an ArrayOf[] member in my perl Moo class?", "body": "<p>This performs the same check:</p>\n\n<pre><code>use Type::Tiny::Class qw( );\n\nmy $MyClass_type = Type::Tiny::Class-&gt;new( class =&gt; 'MyClass' );\n\nsub connect {\n    my ( $self, $other ) = @_;\n\n    $MyClass_type-&gt;check($other)\n       or die \"Validation error\";\n\n    push @{ $self-&gt;connected }, $other;\n}\n</code></pre>\n\n<p>Looks like you you can also  use</p>\n\n<pre><code>if ( my $error = $MyClass_type-&gt;validate($other, '$other') ) {\n   die($error);\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>if ( my $errors = $MyClass_type-&gt;validate_explain($other, '$other') ) {\n   die(join(\"\\n\", @$errors));\n}\n</code></pre>\n\n<p><code>-&gt;validate</code> is probably the best option.</p>\n\n<p>Untested.</p>\n"}, {"tags": [], "owner": {"reputation": 11684, "user_id": 1990570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B1hso.png?s=128&g=1", "display_name": "tobyink", "link": "https://stackoverflow.com/users/1990570/tobyink"}, "is_accepted": false, "score": 3, "last_activity_date": 1598875757, "creation_date": 1598875757, "answer_id": 63670547, "question_id": 57384116, "link": "https://stackoverflow.com/questions/57384116/how-do-i-check-if-an-object-is-valid-when-pushed-to-an-arrayof-member-in-my-pe/63670547#63670547", "title": "How do I check if an object is valid when pushed to an ArrayOf[] member in my perl Moo class?", "body": "<p>An answer for an old question because I've been unable to log in to StackExchange for quite a while...</p>\n<pre><code>package MyClass;\nuse Moo;\nuse Types::Standard qw( ArrayRef InstanceOf );\nuse Sub::HandlesVia;\n\nhas connected =&gt; (\n    is =&gt; 'ro',\n    isa =&gt; ArrayRef[InstanceOf['MyClass']],\n    default =&gt; sub { [] },\n    handles_via =&gt; 'Array',\n    handles =&gt; {\n      'connect' =&gt; 'push',\n    }\n);\n</code></pre>\n<p>Sub::HandlesVia will automatically take care of the type check for you.</p>\n"}], "owner": {"reputation": 600, "user_id": 5725780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FKaUq.png?s=128&g=1", "display_name": "pipe", "link": "https://stackoverflow.com/users/5725780/pipe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 57384611, "answer_count": 3, "score": 2, "last_activity_date": 1598875757, "creation_date": 1565126210, "question_id": 57384116, "link": "https://stackoverflow.com/questions/57384116/how-do-i-check-if-an-object-is-valid-when-pushed-to-an-arrayof-member-in-my-pe", "title": "How do I check if an object is valid when pushed to an ArrayOf[] member in my perl Moo class?", "body": "<p>I have created a Moo class containing an array of objects which is checked against a type using <a href=\"https://metacpan.org/pod/Types::Standard\" rel=\"nofollow noreferrer\">Types::Standard</a> and I want to verify that I'm placing the right objects into that array without hard-coding too much. Here is an example of what I have right now:</p>\n\n<pre class=\"lang-pl prettyprint-override\"><code>package MyClass;\nuse Moo;\nuse Types::Standard qw( ArrayRef InstanceOf );\n\n# Initially empty array of objects\nhas connected =&gt; (\n    is =&gt; 'ro',\n    isa =&gt; ArrayRef[InstanceOf['MyClass']],\n    default =&gt; sub { [] }\n);\n\n# Add an object to our internal list\nsub connect {\n    my ( $self, $other ) = @_;\n    # TODO: Check if \"$other\" is actually an InstanceOf['MyClass']\n    # without doing \"$self-&gt;connected( $self-&gt;connected )\"\n    push @{$self-&gt;connected}, $other;\n}\n</code></pre>\n\n<p>In <em>connect()</em> I add objects to my internal array but if I understand correctly, the object is never checked against <code>InstanceOf['MyClass']</code> since I don't actually <em>set</em> the array reference again.</p>\n\n<p>What would be a good way to perform this validation on each <em>new</em> object? I briefly thought about doing <code>$self-&gt;connected( $self-&gt;connected )</code> after having pushed a new item but that would have to verify <em>every</em> object.</p>\n\n<p>Ideally I would not even want to know exactly what's in the ArrayRef, only that it is something that has to be checked. I took a look at _type_parameter_ in the documentation for <a href=\"https://metacpan.org/pod/Type::Tiny#Type-relationship-introspection-methods\" rel=\"nofollow noreferrer\">Type::Tiny</a> but I couldn't quite figure out how to use it in my code.</p>\n"}, {"tags": ["shell", "perl", "base64"], "comments": [{"owner": {"reputation": 287, "user_id": 372429, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/416c63cb7f6e15b4a11680121dff3e84?s=128&d=identicon&r=PG", "display_name": "archcutbank", "link": "https://stackoverflow.com/users/372429/archcutbank"}, "edited": false, "score": 0, "creation_date": 1565125169, "post_id": 57383827, "comment_id": 101251967, "body": "What is odd is if I use this method: perl -MMIME::Base64=encode_base64 -e &#39;print encode_base64 join&quot;&quot;,&lt;&gt;&#39; test.txt  and put changeit in the test.txt file it returns the same as the Redhat base64 command."}, {"owner": {"reputation": 287, "user_id": 372429, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/416c63cb7f6e15b4a11680121dff3e84?s=128&d=identicon&r=PG", "display_name": "archcutbank", "link": "https://stackoverflow.com/users/372429/archcutbank"}, "edited": false, "score": 0, "creation_date": 1565125885, "post_id": 57383827, "comment_id": 101252205, "body": "If I put either in decode_base64 they both come back with changeit.  It is just that what will decode it is not going to be perl, so I am not sure it will decode as expected."}], "answers": [{"comments": [{"owner": {"reputation": 287, "user_id": 372429, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/416c63cb7f6e15b4a11680121dff3e84?s=128&d=identicon&r=PG", "display_name": "archcutbank", "link": "https://stackoverflow.com/users/372429/archcutbank"}, "edited": false, "score": 0, "creation_date": 1565183088, "post_id": 57384165, "comment_id": 101271905, "body": "Gez, I wonder which I should use then?  Do I do your second encode_base64 that tacks on the newline so it matches echo without the use of -n or just what I had.  I wonder how the decoding will work.  It is for kubernetes by the way.  I guess I will just have to test and see if it falls over or not with one way or the other."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 4, "last_activity_date": 1565126457, "creation_date": 1565126457, "answer_id": 57384165, "question_id": 57383827, "link": "https://stackoverflow.com/questions/57383827/perl-encode-base64-versus-redhat-base64-command/57384165#57384165", "title": "perl encode_base64 versus Redhat base64 command", "body": "<p>It's the same as the difference between</p>\n\n<pre><code>my $encode = encode_base64(\"changeit\",\"\"); # Y2hhbmdlaXQ=\n</code></pre>\n\n<p>and</p>\n\n<pre><code>my $encode = encode_base64(\"changeit\\n\",\"\"); # Y2hhbmdlaXQK\n</code></pre>\n\n<p>Try </p>\n\n<pre><code>echo -n \"changeit\" | base64\n</code></pre>\n\n<p>for a fair comparison with Perl.</p>\n"}], "owner": {"reputation": 287, "user_id": 372429, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/416c63cb7f6e15b4a11680121dff3e84?s=128&d=identicon&r=PG", "display_name": "archcutbank", "link": "https://stackoverflow.com/users/372429/archcutbank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565126457, "creation_date": 1565124650, "question_id": 57383827, "link": "https://stackoverflow.com/questions/57383827/perl-encode-base64-versus-redhat-base64-command", "title": "perl encode_base64 versus Redhat base64 command", "body": "<p>I can't seem to figure out why there is a difference:</p>\n\n<pre><code>-bash-4.1$ echo \"changeit\" | base64\nY2hhbmdlaXQK\n\nVersus perl:\nuse MIME::Base64 qw(encode_base64);\nmy $encode = encode_base64(\"changeit\",\"\");\nprint \"encode: $encode\\n\";\n\nPerl outputs:\nencode: Y2hhbmdlaXQ=\n\nWhy are they different?\n</code></pre>\n"}, {"tags": ["oracle", "perl", "dbi", "perldb"], "comments": [{"owner": {"reputation": 1208, "user_id": 10879061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd339757af5995ab15d4f5759b270fc2?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Lambden", "link": "https://stackoverflow.com/users/10879061/rob-lambden"}, "edited": false, "score": 1, "creation_date": 1565130221, "post_id": 57380782, "comment_id": 101253474, "body": "I believe this is a possible duplicate. Take a look at <a href=\"https://stackoverflow.com/questions/1232950/perl-dbi-run-sql-script-with-multiple-statements\">this question</a>."}], "owner": {"reputation": 93, "user_id": 11675236, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ezb6-QD_NSo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfjcnBNUiFWnTbpqByAenfHCsQY8A/mo/photo.jpg?sz=128", "display_name": "mashro3ak", "link": "https://stackoverflow.com/users/11675236/mashro3ak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1565110926, "creation_date": 1565110581, "last_edit_date": 1565110926, "question_id": 57380782, "link": "https://stackoverflow.com/questions/57380782/running-oracle-producer-with-perl", "title": "running oracle producer with perl", "body": "<p>I used to run normal queries with Perl like (select &amp; insert &amp; update &amp; delete ) with skipping insert semicolon at the end of the query and its working with me, but currently I have to run oracle prouder but as you know the producre sometimes contains N number of the semicolon, any idea about this ?</p>\n\n<pre><code>$dbh = DBI-&gt;connect($dsh,$login,$password,{ RaiseError =&gt; 1, AutoCommit =&gt; 0} ) or die \"Database connection not made: $DBI::errstr\";\nunless($dbh){\nwarn \"Unable to connect to Oracle ($DBI::errstr)\\nTests skiped.\\n\";\nprint \"1..0\\n\";\nexit 0;}\n$dbh-&gt;do(\"ALTER SESSION SET NLS_NUMERIC_CHARACTERS = '.,'\");\nprint  localtime() .\"............ Database connected sucessfully .............\\n\\n\";\n$sth2 = $dbh-&gt;prepare(\" \nDECLARE\n   CURSOR coid_to_patch\n   IS\n        SELECT SIM.CO_ID,\n               PADV.SNCODE,\n               PADV.ADV_CHARGE,\n               SIM.BEFORE_TAX_AMT,\n               PADV.ADV_CHARGE_END_DATE,\n               PADV.ADV_CHARGE + SIM.BEFORE_TAX_AMT NEW_ADV_CHRG,\n               CA.CUSTOMER_ID,\n               NVL (CU.CUSTOMER_ID_HIGH, CA.CUSTOMER_ID) CALCULATED_CUSTID,\n               TMB1.TMCODE,\n               TMB1.VSCODE,\n               SIM.MARKET_CODE\n          FROM sysadm.SIMULATION_FROM_BSCS_EBLON SIM,\n               PROFILE_SERVICE_ADV_CHARGE PADV,\n               CUSTOMER_ALL CU,\n               CONTRACT_ALL CA,\n               MPULKTMB TMB1\n         WHERE     SIM.CO_ID = PADV.CO_ID\n               AND SIM.CO_STATUS &lt;&gt; 'a'\n               AND PADV.ADV_CHARGE &gt; 0\n               AND SIM.CO_ID = CA.CO_ID\n               AND CA.CUSTOMER_ID = CU.CUSTOMER_ID\n               AND CA.TMCODE = TMB1.TMCODE\n               AND TMB1.VSCODE = (SELECT MAX (VSCODE)\n                FROM MPULKTMB TMB2\n                 WHERE TMB2.TMCODE = TMB1.TMCODE)\n               AND PADV.SNCODE = TMB1.SNCODE\n               AND TMB1.INTERVAL = 12\n               AND (PADV.ADV_CHARGE + SIM.BEFORE_TAX_AMT) &gt;= 0\n      ORDER BY 6 ASC;\nBEGIN\n   FOR cur IN coid_to_patch\n   LOOP\n      UPDATE PROFILE_SERVICE_ADV_CHARGE\n         SET ADV_CHARGE = CUR.NEW_ADV_CHRG,\n             ADV_CHARGE_ITEM_PRICE = CUR.NEW_ADV_CHRG\n       WHERE CO_ID = CUR.CO_ID AND SNCODE = CUR.SNCODE AND ADV_CHARGE &gt; 0;\n\n      COMMIT;\n      dbms_output.put_line (\n            'Refund terminated for CoId: '\n         || CUR.CO_ID\n         || ' on Sncode : '\n         || CUR.SNCODE);\n   END LOOP;\nEND;\n\")or die \"Couldn't prepare statement: \" . $dbh-&gt;errstr;\n$sth2-&gt;execute() or die \"SQL Error: $DBI::errstr\\n\";\n$sth2-&gt;finish;\nprint localtime() .\"..........Closed..........\\n\\n\";\n$dbh-&gt;commit;\n$dbh-&gt;disconnect;\nexit;\n</code></pre>\n"}, {"tags": ["perl", "moose"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1565113559, "post_id": 57379633, "comment_id": 101247286, "body": "It seems <code>Moose</code> does not use <code>Carp::confess</code>. Looks like it simply calls <code>die</code>, see <a href=\"https://metacpan.org/release/Moose/source/lib/Moose/Util.pm#L48\" rel=\"nofollow noreferrer\"><code>Moose::Util</code> line #48</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1565114403, "post_id": 57379633, "comment_id": 101247652, "body": "The exception string is built using <code>Devel::StackTrace</code>, see <a href=\"https://metacpan.org/source/ETHER/Moose-2.2011/lib/Moose/Exception.pm#L31\" rel=\"nofollow noreferrer\"><code>Moose::Exception::_build_trace</code></a>"}, {"owner": {"reputation": 1724, "user_id": 636790, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e9a0d07422c625c68ecfec71b48313f7?s=128&d=identicon&r=PG", "display_name": "ojosilva", "link": "https://stackoverflow.com/users/636790/ojosilva"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1565116704, "post_id": 57379633, "comment_id": 101248578, "body": "ok, just saw that. Even though <code>use Moose qw(confess)</code> exports <code>Carp::confess</code> for your peruse, Moose itself uses <code>Devel::StackTrace</code>. Go figure..."}], "owner": {"reputation": 1724, "user_id": 636790, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e9a0d07422c625c68ecfec71b48313f7?s=128&d=identicon&r=PG", "display_name": "ojosilva", "link": "https://stackoverflow.com/users/636790/ojosilva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1565106080, "creation_date": 1565106080, "question_id": 57379633, "link": "https://stackoverflow.com/questions/57379633/how-to-prevent-control-moose-use-of-confess", "title": "How to prevent/control Moose use of confess", "body": "<p>Moose uses <code>Carp::confess</code> profusely. According to the <a href=\"https://metacpan.org/pod/Carp\" rel=\"nofollow noreferrer\">Carp module documentation</a> you can tell Carp to reduce the amount of cruft being printed out or which packages to skip as \"internals\" among other useful global options. But apparently Moose totally ignores Carp's global settings.</p>\n\n<p>For instance, here the global <code>$Carp::MaxArgNums = -1</code> should tell Carp to hide the function arguments with an ellipsis <code>...</code>.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Carp;\n$Carp::MaxArgNums = -1;\n\npackage Foo {\n    use Moose;\n    has bar =&gt; qw(is rw required 1);\n}\n\npackage Quz {\n    sub main {\n        Carp::cluck('just warning');\n        Foo-&gt;new({},{});\n    }\n}\n\nQuz-&gt;main({},{});\n</code></pre>\n\n<p>It works for the plain <code>cluck</code> warning but not for the Moose <code>confess</code>.</p>\n\n<pre><code>just warning at moose-carp.pl line 14.\n    Quz::main(...) called at moose-carp.pl line 19\nAttribute (bar) is required at /Users/rod/perl5/perlbrew/perls/perl-5.26.1/lib/site_perl/5.26.1/darwin-2level/Moose/Object.pm line 24\n    Moose::Object::new('Foo', 'HASH(0x7f882d885060)', 'HASH(0x7f882d648288)') called at moose-carp.pl line 15\n    Quz::main('Quz', 'HASH(0x7f882d003280)', 'HASH(0x7f882d00bc18)') called at moose-carp.pl line 19\n</code></pre>\n\n<p>The same applies to the rest of Carp's global options. How can I prevent or control Moose use of <code>Carp::confess</code>?</p>\n"}, {"tags": ["regex", "perl", "expression"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1565110036, "post_id": 57376219, "comment_id": 101245743, "body": "I would highly discourage using source filters in real code.  Reconsider trying to implement a macro and think about other ways to solve your underlying problem."}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1565243315, "post_id": 57376219, "comment_id": 101292774, "body": "@yst Interesting concept: If you need A to implement B, you are saying don&#39;t implement A, but implement B. Concretely: I&#39;m trying to implement macros using source filters. From your comment I get the impression that macros do already exist, but you are not concrete. I don&#39;t understand the down-votes, because I&#39;ve searched for answers intensively before asking this question."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1565285417, "post_id": 57376219, "comment_id": 101315462, "body": "ah, I was assuming you were trying to implement macros to solve some particular problem.  if you are just trying to implement macros for the sake of implementing macros, go for it.  but they would suffer the same drawbacks as the source filters they depend on."}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1565688649, "post_id": 57376219, "comment_id": 101421630, "body": "The basic problem is that of delayed evaluation: You want to put some expression inside <code>{</code> <code>}</code> to evaluate it when actually needed while still having access to all the variables referenced (a <i>closure</i>). For this kind of code translation you need to match a Perl expression."}], "answers": [{"comments": [{"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1565097180, "post_id": 57376450, "comment_id": 101238183, "body": "OK, I had the Core abilities in mind. Also that &quot;regular expressions&quot; seems to be &quot;code type&quot; (i.e. not real regular expressions, I guess). I couldn&#39;t see how they look from the documentation."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 0, "last_activity_date": 1565096063, "last_edit_date": 1565096063, "creation_date": 1565095705, "answer_id": 57376450, "question_id": 57376219, "link": "https://stackoverflow.com/questions/57376219/a-regular-expression-to-match-a-perl-expression/57376450#57376450", "title": "A regular expression to match a Perl expression?", "body": "<p>See <a href=\"http://p3rl.org/PPR#(?&amp;PerlExpression)\" rel=\"nofollow noreferrer\"><code>(?&amp;PerlExpression)</code> in <code>PPR</code></a> and <a href=\"http://p3rl.org/PPI::Statement::Expression\" rel=\"nofollow noreferrer\"><code>PPI::Statement::Expression</code></a> from <code>PPI</code>.</p>\n"}], "owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1565096063, "creation_date": 1565094910, "question_id": 57376219, "link": "https://stackoverflow.com/questions/57376219/a-regular-expression-to-match-a-perl-expression", "title": "A regular expression to match a Perl expression?", "body": "<p>Trying to mangle Perl source code (trying to implement a macro), I wonder (I doubt it) whether there exists a <em>Perl regular expression</em> to <strong>match one Perl expression</strong> (or <em>one function parameter</em>, if you prefer that view of things).\nThe expression may be arbitrary complex, even using multiple lines.</p>\n\n<p>AFAIK things like \"balanced parentheses\" are impossible to do with pure regular expressions. Unfortunately all the source filters (like <code>Filter::Simple</code>) seem to be based on regular expressions.</p>\n"}, {"tags": ["python", "perl", "awk"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "is_accepted": true, "score": 1, "last_activity_date": 1565088462, "last_edit_date": 1565088462, "creation_date": 1565088107, "answer_id": 57374220, "question_id": 57373894, "link": "https://stackoverflow.com/questions/57373894/comparing-the-1st-column-of-n-files-if-match-found-print-the-1st-file-and-2nd-c/57374220#57374220", "title": "Comparing the 1st column of N files, if match found print the 1st file and 2nd column of remaining files", "body": "<p>If first column in all your files consist of unique values this should do the trick:</p>\n\n<pre><code>$ awk '{a[$1]=a[$1]</code><b>\"\\t\"</b><code>$2} ++n[$1]==</code><b>3</b><code>{print $1 a[$1]}' file1 file2 file3\ngreat   see     2       9\nsee     apple   3       8\ntree    bee     4       7</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 1, "last_activity_date": 1565091381, "creation_date": 1565091381, "answer_id": 57375167, "question_id": 57373894, "link": "https://stackoverflow.com/questions/57373894/comparing-the-1st-column-of-n-files-if-match-found-print-the-1st-file-and-2nd-c/57375167#57375167", "title": "Comparing the 1st column of N files, if match found print the 1st file and 2nd column of remaining files", "body": "<p>Using <a href=\"http://man7.org/linux/man-pages/man1/join.1.html\" rel=\"nofollow noreferrer\">join</a>:</p>\n\n<pre><code>$ join &lt;(sort file1) &lt;(sort file2) | join - &lt;(sort file3)\ngreat see 2 9\nsee apple 3 8\ntree bee 4 7\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 2, "last_activity_date": 1565094921, "last_edit_date": 1565094921, "creation_date": 1565093295, "answer_id": 57375745, "question_id": 57373894, "link": "https://stackoverflow.com/questions/57373894/comparing-the-1st-column-of-n-files-if-match-found-print-the-1st-file-and-2nd-c/57375745#57375745", "title": "Comparing the 1st column of N files, if match found print the 1st file and 2nd column of remaining files", "body": "<p>Could you please try following(this will take care of sequence of 1st field too in which sequence they are occurring they will come in output).</p>\n\n<pre><code>awk '\n!c[$1]++{\n  d[++count]=$1\n}\n{\n  a[$1]++\n  b[$1]=(b[$1]?b[$1] OFS:\"\")$NF\n}\nEND{\n  for(i=1;i&lt;=count;i++){\n    if(a[d[i]]==3){\n       print d[i],b[d[i]]\n    }\n  }\n}\n'  file1 file2 file3  | column -t\n</code></pre>\n"}], "owner": {"reputation": 1200, "user_id": 11742141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/229fb31ba10e8dc02b2acd2e3b41a918?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Saroch", "link": "https://stackoverflow.com/users/11742141/ravi-saroch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 57374220, "answer_count": 3, "score": 1, "last_activity_date": 1565094921, "creation_date": 1565086962, "question_id": 57373894, "link": "https://stackoverflow.com/questions/57373894/comparing-the-1st-column-of-n-files-if-match-found-print-the-1st-file-and-2nd-c", "title": "Comparing the 1st column of N files, if match found print the 1st file and 2nd column of remaining files", "body": "<p>I have a numbers of files each having two columns and want to compare the files with 1st column. if match found in all files, print the 1st file and 2nd column of remaining files.</p>\n\n<p>Input Example </p>\n\n<h1>File 1</h1>\n\n<pre><code> apple    tree\n great    see\n see      apple\n tree     bee\n make     change\n</code></pre>\n\n<h1>File 2</h1>\n\n<pre><code>great    2\nsee      3\ntree     4\nmake     5\n</code></pre>\n\n<h1>File 3</h1>\n\n<pre><code>apple    10  \ngreat    9\nsee      8\ntree     7\n</code></pre>\n\n<p>Expected Output</p>\n\n<pre><code> great    see     2     9\n see      apple   3     8\n tree     bee     4     7\n</code></pre>\n\n<p>I am able to do only with two files. using</p>\n\n<pre><code> awk  'FNR==NR {a[$1]=$0; next}; $1 in a {print a[$1]}' file1 file2\n</code></pre>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1565084177, "post_id": 57372954, "comment_id": 101230957, "body": "<b>Tie::File is never the answer.</b> For a file such as the one you presented, Tie::File will acutally use up <i>more</i> memory then reading the entire file into memory. Considering the alternative is to read a single line at a time using <code>while (&lt;&gt;)</code>, all it&#39;s doing is making your program 30x slower for nothing!"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1565084345, "post_id": 57372954, "comment_id": 101231040, "body": "Can you describe, without anything about <i>how</i> to obtain it, <i>what</i> you want the results to be? Is it just the lines in fileb that don&#39;t appear in filea?"}, {"owner": {"reputation": 39, "user_id": 7599957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e3ff64516d406e396eef0aceb77ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Lloyd", "link": "https://stackoverflow.com/users/7599957/lloyd"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1565085098, "post_id": 57372954, "comment_id": 101231451, "body": "Hi, @Shawn - in a word yes. I want to count how many lines of FileB don&#39;t appear in FileA. As FileA is so large I only want to focus on the regions of FileB and see what in FileB is different from FileA at those sites in FileA... I have many thousands of small files like FileB and need to rapidly check them all for differences against FileA at their corresponding lines."}, {"owner": {"reputation": 39, "user_id": 7599957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e3ff64516d406e396eef0aceb77ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Lloyd", "link": "https://stackoverflow.com/users/7599957/lloyd"}, "edited": false, "score": 0, "creation_date": 1565085479, "post_id": 57372954, "comment_id": 101231682, "body": "HI ikegami, I just ran it and I get &quot;Fail: 5 B&quot; to my screen."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1565085827, "post_id": 57372954, "comment_id": 101231897, "body": "My first inclination is to just use <code>comm -13 fileA fileB</code> instead of writing a custom program."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1565085902, "post_id": 57372954, "comment_id": 101231942, "body": "@Shawn What the OP didn&#39;t say in their comment is that there should only be output for ids in the smaller file."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1565086192, "post_id": 57372954, "comment_id": 101232087, "body": "Sorry, I was wrong (though it prints <code>Fail: 5 A</code> rather than <code>Fail: 5 B</code>). Comments deleted."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1565086606, "post_id": 57372954, "comment_id": 101232287, "body": "Are the values always exactly one character long? If so, there&#39;s a way to make this amazingly fast without complicated code"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1565086717, "post_id": 57372954, "comment_id": 101232350, "body": "@ikegami Yes... that&#39;s what the <code>-13</code> does for <code>comm</code>."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1565086835, "post_id": 57372954, "comment_id": 101232403, "body": "@Lloyd Do you care about knowing in <i>which</i> of these thousands of FileB&#39;s a mismatch happens in, or only that there is a mismatch at all?"}, {"owner": {"reputation": 39, "user_id": 7599957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e3ff64516d406e396eef0aceb77ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Lloyd", "link": "https://stackoverflow.com/users/7599957/lloyd"}, "edited": false, "score": 0, "creation_date": 1565087020, "post_id": 57372954, "comment_id": 101232487, "body": "in the second column? yes."}, {"owner": {"reputation": 39, "user_id": 7599957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e3ff64516d406e396eef0aceb77ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Lloyd", "link": "https://stackoverflow.com/users/7599957/lloyd"}, "edited": false, "score": 0, "creation_date": 1565087083, "post_id": 57372954, "comment_id": 101232525, "body": "I care if there is a mismatch, and how many mismatches per FileB. if there is 1, 2, ... 20 etc. ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1565087321, "post_id": 57372954, "comment_id": 101232629, "body": "Cool, <code>comm -13</code> does indeed do the trick."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1565087810, "post_id": 57372954, "comment_id": 101232868, "body": "Though <code>comm</code> requires its input files to be sorted <i>lexicographically</i>, not <i>numerically</i> like these seem to be. So much for that idea. You can always resort the files, I suppose."}, {"owner": {"reputation": 39, "user_id": 7599957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e3ff64516d406e396eef0aceb77ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Lloyd", "link": "https://stackoverflow.com/users/7599957/lloyd"}, "edited": false, "score": 0, "creation_date": 1565088779, "post_id": 57372954, "comment_id": 101233346, "body": "ok, brilliant. I am clearly over complicating things! I&#39;ll have a look at comm and take it from there. Thanks for the advice/ comments."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 7599957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e3ff64516d406e396eef0aceb77ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Lloyd", "link": "https://stackoverflow.com/users/7599957/lloyd"}, "edited": false, "score": 0, "creation_date": 1565085229, "post_id": 57373368, "comment_id": 101231525, "body": "Hi, ikegami I shall test this now - a binary search on a specific block is probably what I need to do but being a noob I have no clue. Would you be able to link me to any reference material?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 39, "user_id": 7599957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e3ff64516d406e396eef0aceb77ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Lloyd", "link": "https://stackoverflow.com/users/7599957/lloyd"}, "edited": false, "score": 0, "creation_date": 1565085259, "post_id": 57373368, "comment_id": 101231544, "body": "Why? How fast do you need it to be?"}, {"owner": {"reputation": 39, "user_id": 7599957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e3ff64516d406e396eef0aceb77ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Lloyd", "link": "https://stackoverflow.com/users/7599957/lloyd"}, "edited": false, "score": 0, "creation_date": 1565085277, "post_id": 57373368, "comment_id": 101231550, "body": "Also would you mind commenting with # what each little bit does - just briefly if possible!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 39, "user_id": 7599957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e3ff64516d406e396eef0aceb77ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Lloyd", "link": "https://stackoverflow.com/users/7599957/lloyd"}, "edited": false, "score": 0, "creation_date": 1565085467, "post_id": 57373368, "comment_id": 101231672, "body": "There are two key lines: 1) <code>$lookup{$id} = $val;</code>, which stores the value in the hash, keyed by id. 2) and the <code>print if ...</code>, which prints the message if the id was in the smaller file (<code>exists($lookup{$id})</code>) and if the value is different in both files (<code>$val ne $lookup{$id}</code>)"}, {"owner": {"reputation": 39, "user_id": 7599957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e3ff64516d406e396eef0aceb77ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Lloyd", "link": "https://stackoverflow.com/users/7599957/lloyd"}, "edited": false, "score": 0, "creation_date": 1565085575, "post_id": 57373368, "comment_id": 101231734, "body": "I have 1000s of files like FileB so the quicker the better for the entire fileset. E.g. if it takes 5 minutes for one FileB then I&#39;ll have to think about rewriting it again."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 39, "user_id": 7599957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e3ff64516d406e396eef0aceb77ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Lloyd", "link": "https://stackoverflow.com/users/7599957/lloyd"}, "edited": false, "score": 0, "creation_date": 1565085584, "post_id": 57373368, "comment_id": 101231742, "body": "The binary search algorithm is described on Wikipedia. To move around the file, one would use <code>seek</code>. To find the next id in the file, read a line and discard it (since you might have seeked into the middle of one), then read a line to get the id."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 39, "user_id": 7599957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e3ff64516d406e396eef0aceb77ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Lloyd", "link": "https://stackoverflow.com/users/7599957/lloyd"}, "edited": false, "score": 0, "creation_date": 1565085836, "post_id": 57373368, "comment_id": 101231907, "body": "It took 1 minute 30 seconds to generate the 250000000 records on my relatively slow shared web host. The solution I posted should take about the same time."}, {"owner": {"reputation": 39, "user_id": 7599957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e3ff64516d406e396eef0aceb77ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Lloyd", "link": "https://stackoverflow.com/users/7599957/lloyd"}, "edited": false, "score": 0, "creation_date": 1565088760, "post_id": 57373368, "comment_id": 101233331, "body": "Hi ikegami - this is still running... but based on the comments above I&#39;m going to try and do what I want with comm first and take it from there. Thanks for the help!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 39, "user_id": 7599957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e3ff64516d406e396eef0aceb77ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Lloyd", "link": "https://stackoverflow.com/users/7599957/lloyd"}, "edited": false, "score": 0, "creation_date": 1565089294, "post_id": 57373368, "comment_id": 101233607, "body": "Added to my answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1565089285, "last_edit_date": 1565089285, "creation_date": 1565085122, "answer_id": 57373368, "question_id": 57372954, "link": "https://stackoverflow.com/questions/57372954/how-to-read-part-of-a-file-into-perl-array-and-query-a-second-file-best-practic/57373368#57373368", "title": "How to read part of a file into perl array and query a second file (best practice)", "body": "<pre><code>my $qfn1 = './file1';\nmy $qfn2 = './file2';\n\nmy %lookup;\n{\n   open(my $fh, '&lt;', $qfn2)\n      or die(\"Can't open \\\"$qfn2\\\": $!\\n\");\n\n   while (&lt;$fh&gt;) {\n      chomp;\n      my ($id, $val) = split /\\t/;\n      $lookup{$id} = $val;\n   }\n}\n\n{\n   open(my $fh, '&lt;', $qfn1)\n      or die(\"Can't open \\\"$qfn1\\\": $!\\n\");\n\n   while (&lt;$fh&gt;) {\n      chomp;\n      my ($id, $val) = split /\\t/;\n      print \"Fail: $id\\t$val\\t$lookup{$id}\\n\"\n         if exists($lookup{$id})\n         &amp;&amp; $val ne $lookup{$id};\n   }\n}\n</code></pre>\n\n<p>Ways to speed this up:</p>\n\n<ul>\n<li>Stop reading once you've found the largest id from the smaller file.</li>\n<li>Perform a binary search on the larger file to find the right block. This is a lot more complicated.</li>\n</ul>\n\n<hr>\n\n<p>Because the following is true, we know exactly where the block of interest is located in the larger file:</p>\n\n<ul>\n<li>The numbers in both files are sorted.</li>\n<li>There are no gaps in the numbers in the second file.</li>\n<li>The value is always exactly one character.</li>\n</ul>\n\n<p>As such, the following efficient solution presents itself:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw( say );\n\nuse Fcntl qw( SEEK_SET );\n\nsub offset {\n   my ($id) = @_;\n   --$id;\n   my $offset = $id * ( length($id)+3 );\n   for my $i (1..length($id)-1) {\n      $offset -= ( 10**$i - 1 ) ;\n   }\n   return $offset;\n}\n\nmy $qfn1 = './file1';\nmy $qfn2 = './file2';\n\n{\n   open(my $fh1, '&lt;', $qfn1)\n      or die(\"Can't open \\\"$qfn1\\\": $!\\n\");\n   open(my $fh2, '&lt;', $qfn2)\n      or die(\"Can't open \\\"$qfn2\\\": $!\\n\");\n\n   my $line2 = &lt;$fh2&gt;;\n   if (defined($line2)) {\n      seek($fh1, offset(( $line2 =~ /^([^\\t]*)/ )[0]), SEEK_SET)\n         or die $!;\n\n      while (defined($line2)) {\n         defined( my $line1 = &lt;$fh1&gt; )\n            or die \"Premature EOF\";\n\n         if ($line1 ne $line2) {\n            chomp($line1);  my ($id1, $val1) = split(/\\t/, $line1);\n            chomp($line2);  my ($id2, $val2) = split(/\\t/, $line2);\n            die \"Id mismatch\" if $id1 ne $id2;\n            say join \"\\t\", $id1, $val1, $val2;\n         }\n\n         $line2 = &lt;$fh2&gt;;\n      }\n   }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 0, "last_activity_date": 1565089976, "creation_date": 1565089976, "answer_id": 57374730, "question_id": 57372954, "link": "https://stackoverflow.com/questions/57372954/how-to-read-part-of-a-file-into-perl-array-and-query-a-second-file-best-practic/57374730#57374730", "title": "How to read part of a file into perl array and query a second file (best practice)", "body": "<p>You want the count of records in FileB that aren't in FileA. First, a few non-perl approaches:</p>\n\n<p>Using the <a href=\"http://man7.org/linux/man-pages/man1/comm.1.html\" rel=\"nofollow noreferrer\">comm</a> utility, which finds lines in common or not in common between two files. This is complicated slightly by it requiring that its input be sorted in lexicographic order, not numeric like your files come in.</p>\n\n<pre><code># Sort the big FileA once and re-use\nsort FileA &gt; FileA.sorted \n# Print all lines of FileB that don't appear in FileA\ncomm -13 FileA.sorted &lt;(sort FileB) \n# Print the total number of these lines\ncomm -13 FileA.sorted &lt;(sort FileB) | wc -l\n</code></pre>\n\n<p>Or an <code>awk</code> version that prints the number of mismatches that is slightly optimized for numerically sorted files:</p>\n\n<pre><code>awk 'NR == 1 { max = $1; b[$1] = $2; next }\n     FNR == NR { if ($1 &gt; max) max = $1; b[$1] = $2; next }\n     $1 &gt; max { exit }\n     $1 in b &amp;&amp; b[$1] != $2 { count++ }\n     END { print count }' FileB FileA # Note order of arguments\n</code></pre>\n\n<p>this translates into the equivalent but more verbose perl:</p>\n\n<pre><code>#!/usr/bin/env perl\n# Usage: perl foo.pl FileA FileB\n\nuse warnings;\nuse strict;\nuse autodie;\n\nmy $max;\nmy %b;\nopen my $fileb, \"&lt;\", $ARGV[1];\nwhile (&lt;$fileb&gt;) {\n    my ($k, $v) = split;\n    $b{$k} = $v;\n    if ($. &gt; 1) {\n        $max = $k if $k &gt; $max;\n    } else {\n        $max = $k;\n    }\n}\n\nmy $count = 0;\nopen my $filea, \"&lt;\", $ARGV[0];\nwhile (&lt;$filea&gt;) {\n    my ($k, $v) = split;\n    last if $k &gt; $max;\n    $count++ if exists $b{$k} &amp;&amp; $b{$k} ne $v;\n}\nprint \"$count\\n\";\n</code></pre>\n\n<p>The next step would be a version that takes multiple different FileB arguments and only uses one pass over FileA to check them all: </p>\n\n<pre><code>#!/usr/bin/env perl\n# Usage: perl foo.pl FileA FileB ...\n\nuse warnings;\nuse strict;\nuse autodie;\n\nmy $fileaname = shift;    \nmy $max;\nmy %b;\nmy %filebcounts;\nfor my $filebname (@ARGV) {\n    $filebcounts{$filebname} = 0;\n    open my $fileb, \"&lt;\", $filebname;\n    while (&lt;$fileb&gt;) {\n        my ($k, $v) = split;\n        push @{$b{$k}}, [ $filebname, $v ];\n        if (defined $max) {\n            $max = $k if $k &gt; $max;\n        } else {\n            $max = $k;\n        }\n    }\n}\n\nmy $count = 0;\nopen my $filea, \"&lt;\", $fileaname;\nwhile (&lt;$filea&gt;) {\n    my ($k, $v) = split;\n    last if $k &gt; $max;\n    if (exists $b{$k}) {\n        for my $fileb (@{$b{$k}}) {\n            $filebcounts{$$fileb[0]}++ if $$fileb[1] ne $v;\n        }\n    }\n}\n\nfor my $fileb (sort keys %filebcounts) {\n    print \"$fileb: $filebcounts{$fileb}\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 7599957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e3ff64516d406e396eef0aceb77ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Lloyd", "link": "https://stackoverflow.com/users/7599957/lloyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 57373368, "answer_count": 2, "score": 0, "last_activity_date": 1565089976, "creation_date": 1565083708, "question_id": 57372954, "link": "https://stackoverflow.com/questions/57372954/how-to-read-part-of-a-file-into-perl-array-and-query-a-second-file-best-practic", "title": "How to read part of a file into perl array and query a second file (best practice)", "body": "<p>I am wanting to query a large file (FileA) based on the information in a second smaller file (FileB), and output the differences between the 2 files based on what is present in the smaller file (FileB). </p>\n\n<p>To do this, I thought an array for each file would be best, converting each line of each array to a hash, and comparing the hashes - outputting what in FileB does not match with FileA. </p>\n\n<p>FileA &amp; FileB are both tab delimited, both contain 2 columns where the first column contains a unique number, and the second is a letter. FileA has 250,000,000 rows compared to 150 in FileB and both are sorted smallest to largest based on $1.</p>\n\n<p>Based on the information present in FileB$1 I am able to know where to start/end the FileA array from/to. With this I was then trying to load the corresponding rows of FileA into an array and compare only those rows with array of FileB. </p>\n\n<p>So far I have used perl to load 2 separate \"fake\" files into an array and compare the differences. This was with this code and example filesets:</p>\n\n<pre><code>open my $handle1, '&lt;', './file1';\nchomp(my @array1 = &lt;$handle1&gt;);\nclose $handle1;\n\nopen my $handle2, '&lt;', './file2';\nchomp(my @array2 = &lt;$handle2&gt;);\nclose $handle2;\n\nmy %hash;\nfor my $key (@array2) {\n    $hash{$key}++;\n}\n\nfor my $key (@array1) {\n    print \"Fail: $key\\n\" unless $hash{$key};\n}\n</code></pre>\n\n<p>file1</p>\n\n<pre><code>1   A\n2   A\n3   A\n4   A\n5   A\n6   A\n7   A\n8   A\n9   A\n</code></pre>\n\n<p>file2</p>\n\n<pre><code>1   A\n2   A\n3   A\n4   A\n5   B\n6   A\n7   A\n8   A\n9   A\n</code></pre>\n\n<p>**In this example where both files have the same number of lines I get the expected output \n<code>\"Fail: 5 B\"</code></p>\n\n<p>When file lengths do not match however, I get different results... so this was my reasoning for wanting to match the length of both files in my real example outlined above. </p>\n\n<p>Based on the above perl array code working I then tried to apply this to my actual dataset, limiting the FileA array to the position detailed in FileB$1[1] and FileB$1[N] (where [N] is the last value in FileB$1</p>\n\n<p>This is my code, after doing some searching on the internet I found Tie::File, which to my understanding only loads defined lines of a file into an array rather than loading the whole file. In this example I have not yet figured out how to take the the first/ last value of FileB$1 so I have explicitly stated it. Also, I ask it to print so I can see the correct lines have been found in FileA but this can be turned off once up and running. </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Tie::File;\ntie my @array, 'Tie::File', 'FileA' or die $!;\nmy $l = 11999;  # explicit statement\nwhile (defined( my $line = $array[$l] )) {\n    print \"&lt;$line&gt;\\n\";\n    last if $line =~ '12150'; #explicit statement\n} continue { $l++ }\n\nopen my $handle2, '&lt;', './FileB';\nchomp(my @array2 = &lt;$handle2&gt;);\nclose $handle2;\n\nmy %hash;\nfor my $key (@array2) {\n    $hash{$key}++;\n}\n\nfor my $key (@array) {\n    print \"Fail: $key\\n\" unless $hash{$key};\n}\n</code></pre>\n\n<p>With FileA and FileB looking like this:</p>\n\n<p>FileA</p>\n\n<pre><code>1 A\n2 A\n...\n250000000 A\n</code></pre>\n\n<p>FileB</p>\n\n<pre><code>12000 C\n12001 C\n12002 E\n12003 F\n12004 E\n...\n12150 C\n</code></pre>\n\n<p>FileA array</p>\n\n<pre><code>12000 C\n12001 C\n12002 G\n12003 G\n12004 G\n...\n12150 C\n</code></pre>\n\n<p>I would want to the FileA array to start at line 11999 (this line corresponds to FileA$1 = 12000, and based on my current code end when the line read into the array contains 12150.</p>\n\n<p>Then read in FileB to an array, compare and output the differences. At the moment it takes ~ 3 minutes to load in the desired 150 lines of FileA but then the comparison of the 2 arrays never ends. By this I don't mean I don't get an output to screen, rather I am not sure the two arrays are being compared correctly and the script continues to run - this is unlike the 9 line \"fake\" files used above (less than a second)</p>\n\n<p>Desired output would be as follows as FileB is different to FileA at these rows.</p>\n\n<pre><code>Fail: 12002 E\nFail: 12003 F\nFail: 12004 E\n</code></pre>\n"}, {"tags": ["perl", "hash", "path", "store"], "comments": [{"owner": {"reputation": 624, "user_id": 10023107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GLme.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10023107/chris"}, "edited": false, "score": 0, "creation_date": 1565082103, "post_id": 57372173, "comment_id": 101229819, "body": "you could use a config file where you define your &quot;paths&quot;. in your getter/setter/other related functions you could just refer to the config-file-keys. So whenever your JSON keys are changing, you just need to make the change in the config file instead of in all functions."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1565091402, "post_id": 57372173, "comment_id": 101234721, "body": "There are ways (e.g. <a href=\"https://stackoverflow.com/q/31554916/589924\">this</a>), but is the extra run-time expense worth saving from having to change two places instead of one?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1565091434, "post_id": 57372173, "comment_id": 101234739, "body": "You could avoid an additional run-time expense by generating the getter and setter."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1565302987, "post_id": 57372173, "comment_id": 101321864, "body": "You need to talk to someone within the organization about standardizing an API. It&#39;s easy to transpose things like this for one-off, but if it&#39;s always a guessing game, the job isn&#39;t worth it imho."}], "answers": [{"comments": [{"owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "edited": false, "score": 0, "creation_date": 1565297775, "post_id": 57382226, "comment_id": 101320361, "body": "I just updated the question as I think i did not explain properly what I wanted to do. I appreciate you taking time to write the answer which helps me learn more for sure, but I think it does not answer the question I wanted to ask. Thanks."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 1, "last_activity_date": 1565118608, "last_edit_date": 1565118608, "creation_date": 1565117152, "answer_id": 57382226, "question_id": 57372173, "link": "https://stackoverflow.com/questions/57372173/how-can-i-store-hash-paths-to-reuse-them-in-perl/57382226#57382226", "title": "How can I store hash paths to reuse them in perl?", "body": "<p><code>ikegami</code>, in the comments was specifying about auto-generating your subs. Here's an example of that, which provides you both a single place to change your paths, as well as being rather expedient in its operation. I've also reduced your set/get methods to a single combined sub that does both operations:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse constant {\n    PATH1 =&gt; '/home/steveb/PATH1',\n    PATH2 =&gt; '/home/steveb/PATH2',\n};\n\nBEGIN {\n    for my $elem (qw(a b y z)){\n        my $sub_name = \"element_$elem\";\n\n        no strict 'refs';\n\n        *$sub_name = sub {\n            my ($hash_ref, $value) = @_;\n            $hash_ref-&gt;{PATH1}{PATH2}{$elem} = $value if defined $value;\n            return $hash_ref-&gt;{PATH1}{PATH2}{$elem};\n        }\n    }\n}\n\nmy $href = {};\n\nelement_a($href, 'aaa');\nelement_b($href, 'bbb');\nelement_y($href, 'yyy');\nelement_z($href, 'zzz');\n\nprint element_a($href) . \"\\n\";\nprint element_b($href) . \"\\n\";\nprint element_y($href) . \"\\n\";\nprint element_z($href) . \"\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>aaa\nbbb\nyyy\nzzz\n</code></pre>\n\n<p>What that does, is set two constant values (<code>PATH1</code> and <code>PATH2</code>) to the values you want. This happens at compile time. Next, within the <code>BEGIN</code> block, we dynamically create subroutines based on a text string (\"element_\") with an appended element to the end of that name. We then assign that as a typeglob within the <a href=\"https://perldoc.perl.org/perlmod.html#Symbol-Tables\" rel=\"nofollow noreferrer\">symbol table</a> with an anonymous subroutine with the functionality we want. This also happens at compile time. Each entry in the <code>for my $elem...</code> line will get a <code>element_X()</code> sub created.</p>\n\n<p>If your paths change, you only have to change it in the <code>use constant</code> block.</p>\n\n<p>Now, you appear to be using an object, so why not just dump the data within there, instead of having an arbitrary hashref being passed around? Here's an example. Note that I'm <code>use 5.10.0;</code>-ing, so that I can use the <code>//=</code> defined-or operator (as well as the <code>say</code> feature):</p>\n\n<p>Package:</p>\n\n<pre><code>package Blah;\n\nuse warnings;\nuse strict;\nuse 5.10.0;\n\nuse constant {\n    PATH1 =&gt; '/home/steveb/path1',\n    PATH2 =&gt; '/home/steveb/path2',\n};\n\nBEGIN {\n    for my $elem (qw(a b y z)){\n        my $sub_name = \"element_$elem\";\n\n        no strict 'refs';\n\n        *$sub_name = sub {\n            my ($self, $value) = @_;\n            return $self-&gt;{PATH1}{PATH2}{$elem} //= $value;\n        }\n    }\n}\n\nsub new {return bless {}, shift};\n\n1;\n</code></pre>\n\n<p>Script example:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse 5.10.0;\n\nuse Blah;\n\nmy $blah = Blah-&gt;new;\n\n$blah-&gt;element_a('a');\n$blah-&gt;element_b('b');\n$blah-&gt;element_y('y');\n$blah-&gt;element_z('z');\n\nsay $blah-&gt;element_a;\nsay $blah-&gt;element_b;\nsay $blah-&gt;element_y;\nsay $blah-&gt;element_z;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>a\nb\ny\nz\n</code></pre>\n\n<p>Note: Using the symbol table directly can be rather dangerous if not used with extreme care. It is trivial to overwrite things that you didn't mean to, which can cause all manner of small or large grief. That's why the <code>no strict 'refs'</code> is in use. I scoped it to the smallest block possible, and have (implicitly) ensured that there are no other <code>element_*</code> symtab (symbol table) entries in existence. <code>strict</code> catches possible violations like this, which is why we always recommend it at all times, and only disable it in as small a scope as possible, only the parts required to 'break the rules' and only when the disabling of it is absolutely required.</p>\n"}], "owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565297679, "creation_date": 1565081097, "last_edit_date": 1565297679, "question_id": 57372173, "link": "https://stackoverflow.com/questions/57372173/how-can-i-store-hash-paths-to-reuse-them-in-perl", "title": "How can I store hash paths to reuse them in perl?", "body": "<p>Lets say I have a huge amount of elements nested in an hash (from a JSON). And I want to have getters and setters for them. For example:</p>\n\n<pre><code>sub set_element_x{\n\n    my ($self, $hash_ref, $value) = @_;\n\n    $hash_ref-&gt;{'path1'}-&gt;{'path2'}-&gt;{'x'} = $value;\n\n    return;\n}\n\nsub get_element_x{\n\n    my ($self, $hash_ref, $value) = @_;\n\n    return $hash_ref-&gt;{'path1'}-&gt;{'path2'}-&gt;{'x'};\n}\n</code></pre>\n\n<p>Is there a standard way of handling this paths so that you only have to change them once in case something changes in the JSON structure?</p>\n\n<p>I want to add some more information because I think I did not explain my self properly.</p>\n\n<p>I want to be able to store in a common place this piece of code to access a value inside the JSON:</p>\n\n<pre><code>-&gt;{'path1'}-&gt;{'path2'}-&gt;{'x'}\n</code></pre>\n\n<p>Which in the future may change to:</p>\n\n<pre><code>-&gt;{'path1_1'}-&gt;{'path2_1'}-&gt;{'path3_1'}-&gt;{'x_1'}\n</code></pre>\n\n<p>PD: If I use the piece of code provided by @stevieb 's answer I'm not able to save the structure that I want. Adding this two lines:</p>\n\n<pre><code>print Dumper($href) . \"\\n\";\nprint to_json($href) . \"\\n\";\n</code></pre>\n\n<p>Yields to:</p>\n\n<pre><code>$VAR1 = {\n          'PATH1' =&gt; {\n                       'PATH2' =&gt; {\n                                    'a' =&gt; 'aaa',\n                                    'b' =&gt; 'bbb',\n                                    'y' =&gt; 'yyy',\n                                    'z' =&gt; 'zzz'\n                                  }\n                     }\n        };\n{\"PATH1\":{\"PATH2\":{\"a\":\"aaa\",\"b\":\"bbb\",\"y\":\"yyy\",\"z\":\"zzz\"}}}\n</code></pre>\n\n<p>So to sum up. I want to be able to store the hash path of a complex structure with a number of keys which is not fixed.</p>\n"}, {"tags": ["python", "perl"], "answers": [{"comments": [{"owner": {"reputation": 2679, "user_id": 1812322, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ab68ec41682314f87def370d3ddbac1f?s=128&d=identicon&r=PG", "display_name": "Bonifacio2", "link": "https://stackoverflow.com/users/1812322/bonifacio2"}, "edited": false, "score": 1, "creation_date": 1565089788, "post_id": 57371008, "comment_id": 101233897, "body": "Your answer would be way better if you included some explanation in it."}], "tags": [], "owner": {"reputation": 1702, "user_id": 4450090, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/97a7f283269dd5bfff5a9a673edfce2f?s=128&d=identicon&r=PG&f=1", "display_name": "darkman", "link": "https://stackoverflow.com/users/4450090/darkman"}, "is_accepted": false, "score": 1, "last_activity_date": 1565092604, "last_edit_date": 1565092604, "creation_date": 1565076672, "answer_id": 57371008, "question_id": 57370843, "link": "https://stackoverflow.com/questions/57370843/how-to-find-the-divisors-of-a-numberother-than-itself-whose-sum-is-equal-to-t/57371008#57371008", "title": "how to find the divisors of a number(other than itself), whose sum is equal to the number itself", "body": "<pre><code>from itertools import combinations\n\n\nvar_in = 20\nvar_div = [1,2,4,5,10,20]\n\n# filter out values that are larger or equal to var_in value\nll = [x for x in var_div if x &lt; var_in]\n\n# create combinations without repetitions starting from 2 elements up to number of elements that equal to lenght of the list\n# check sum of such created elements and return combination results which sum equal to 20\nres = set([x for x in sum([list(combinations(ll, r)) for r in range(1, len(ll))], []) if sum(x) == 20])\n\n\"\"\"\nsum(ll, []) &lt;- flattens nested list\n\"\"\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 1, "last_activity_date": 1565099334, "creation_date": 1565099334, "answer_id": 57377599, "question_id": 57370843, "link": "https://stackoverflow.com/questions/57370843/how-to-find-the-divisors-of-a-numberother-than-itself-whose-sum-is-equal-to-t/57377599#57377599", "title": "how to find the divisors of a number(other than itself), whose sum is equal to the number itself", "body": "<pre class=\"lang-perl prettyprint-override\"><code>use Math::Prime::Util::GMP qw(divisors);\nuse Algorithm::Combinatorics qw(subsets);\nuse List::Util qw(sum0);\nmy $input = 20;\nmy @results = grep { $input == sum0 @$_ } subsets [\n    grep { $_ != $input } divisors $input\n];\n__END__\n(\n    [1, 4, 5, 10]\n)\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 5738019, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bf0416a1e9cbb5090c064b17a7b67977?s=128&d=identicon&r=PG&f=1", "display_name": "s.patra", "link": "https://stackoverflow.com/users/5738019/s-patra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "closed_date": 1566235226, "answer_count": 2, "score": -3, "last_activity_date": 1565099334, "creation_date": 1565076046, "question_id": 57370843, "link": "https://stackoverflow.com/questions/57370843/how-to-find-the-divisors-of-a-numberother-than-itself-whose-sum-is-equal-to-t", "closed_reason": "Needs more focus", "title": "how to find the divisors of a number(other than itself), whose sum is equal to the number itself", "body": "<p>Let's say input number is 20. The divisors are 1,2,4,5,10,20. From the list will remove 20. From the remaining , need to find out the numbers whose sum is equal to 20. The output list should contain [1,4,5,10].</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1565052522, "post_id": 57367472, "comment_id": 101221058, "body": "Look into bioperl, which has good support for reading fasta format files."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1565052598, "post_id": 57367472, "comment_id": 101221072, "body": "Also please provide a sample ids.txt file to go along with that olds.txt one."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1565125097, "post_id": 57367472, "comment_id": 101251937, "body": "(1) Read <code>ids.txt</code> and make each &quot;ID&quot; (what follows <code>&gt;</code>?) is a key in a hash (2) Read from <code>old.txt</code> in blocks, and in each block extract <code>&gt;...</code> line itself and the rest; If ID (from <code>&gt;</code> line) is in your hash with IDS then write the rest of the block for its value.  (3) Dump compiled data to a file.  If that&#39;s too much data to build up in memory, you can write each component (key+value) as it&#39;s found, and delete it from the hash.   That way you&#39;d never have more than all keys + one pop of full data for a key"}], "answers": [{"tags": [], "owner": {"reputation": 1724, "user_id": 636790, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e9a0d07422c625c68ecfec71b48313f7?s=128&d=identicon&r=PG", "display_name": "ojosilva", "link": "https://stackoverflow.com/users/636790/ojosilva"}, "is_accepted": false, "score": 0, "last_activity_date": 1565200789, "creation_date": 1565200789, "answer_id": 57399959, "question_id": 57367472, "link": "https://stackoverflow.com/questions/57367472/how-to-use-perl-to-find-items-from-one-file-and-copy-contents-to-new-file/57399959#57399959", "title": "How to use perl to find items from one file and copy contents to new file", "body": "<p>Your Perl script works, <strong>the problem is the <code>ids.txt</code> file</strong>. It should look something like this:</p>\n\n<pre><code>OLDTEXT_123149\nOLDTEXT_888888\nOLDTEXT_777777\nOLDTEXT_666666\n...\n</code></pre>\n\n<p>Instead of what you described to be the <code>ids.txt</code> file contents (lines that start with <code>&gt;</code> and have random text after the ID ie <code>&gt;OLDTEXT_123149 etc etc etc</code></p>\n\n<p>Now, cryptic one-liners have given Perl a bad name, so I'm posting a slightly improved version that is <strong>not</strong> modern Perl and strict as it should be, but at least it's more readable, maintains some coherence with your snippet (so that you can understand what it did a little better) <strong>and supports your current <code>ids.txt</code> file format</strong> that has lines in the <code>&gt;[ID] [additional random text]</code> format:</p>\n\n<pre><code># remember, we're looping line by line through\n# each of the @ARGV files ids.txt and old.txt\n\nif ( ( $id ) = /^&gt;(\\S+)/ ) {\n    # a line that starts with &gt;\n    # lets look at the %ids hash to check if we've seen it in ids.txt\n\n    $is_a_match = $ids{ $id };\n}\n\nif( @ARGV ) { \n    # is this the ids.txt file? Then save the ID for later retrieval\n\n    $ids{ $id } = 1;\n}\nelsif( $is_a_match ) {\n    # ok, we're in old.txt and there has been a match\n    # now print this line from old.txt\n    # this is going to print until the next ID comes along\n\n    print;\n}\n</code></pre>\n\n<p>Save the above to a file, ie. <code>fasta.pl</code> and run it like this:</p>\n\n<pre><code>perl -n fasta.pl ids.txt old.txt &gt; new.txt\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11794574, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Hb6p02DtRns/AAAAAAAAAAI/AAAAAAAAADY/2g8rxmfth4Q/photo.jpg?sz=128", "display_name": "Victor Reyes", "link": "https://stackoverflow.com/users/11794574/victor-reyes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565200789, "creation_date": 1565051223, "last_edit_date": 1565051955, "question_id": 57367472, "link": "https://stackoverflow.com/questions/57367472/how-to-use-perl-to-find-items-from-one-file-and-copy-contents-to-new-file", "title": "How to use perl to find items from one file and copy contents to new file", "body": "<p>I have been working with a piece of code that a co-worker mentioned worked for him to take a list of text from one file, use the long string from that one file and find said string in another file. When the string is found, it would be copied to a new text file along with its associated data. </p>\n\n<p>There are three files I'm working with:\n<code>ids.txt</code> has a list of IDs. Each string is prefaced with a <code>'&gt;'</code> and contains plain English text and numbers afterwards.</p>\n\n<p>old.txt has a list of these IDs and is in the following (fasta) format:</p>\n\n<pre><code>&gt;OLDTEXT_123149 The name of something I need\nASDFISOJTREJASIJAFDSPOJASDFJADPO\nAASDFRHSEHGSDGEGRDGSAGSDFGSDFGSD\nASGSDRTGSEDBGDFGSRGREGDFGSDRGDSD\nAARTERTERTERYE\n\n&gt;OLDTEXT_1232439 The name of something else I need\nASDFISOJTREJASIJAFDSPOJASDFJADPO\nAASDFRHSEHGSDGEGRDGSAGSDFGSDFGSD\nASGSDRTGSEDBGDFGSRGREGDFGSDRGDSD\nAARTERTERTERYE \n</code></pre>\n\n<p>What I am trying to do is use the IDs as a way to cross reference the <code>old.txt</code>, and take the header and associated data and place it into a new file</p>\n\n<p>I have almost no experience with perl, so I am not sure that I know what the code snippet means. I have tried</p>\n\n<pre><code>perl -ne 'if(/^&gt;(\\S+)/){$c=$i{$1}}$c?print:chomp;\n    $i{$_}=1 if @ARGV' ids.txt old.txt &gt; new.txt\n</code></pre>\n\n<p>Is this the best way to match a header from one text document to another one and then import it to a third document? If it isn't, what would be the best way? If it is, what am I doing wrong with this snippet of code?</p>\n"}, {"tags": ["strawberry-perl", "perl", "cpanm"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1565793586, "last_edit_date": 1565793586, "creation_date": 1565058358, "answer_id": 57368130, "question_id": 57367335, "link": "https://stackoverflow.com/questions/57367335/perl-how-to-deal-with-a-duplicated-modules-installation/57368130#57368130", "title": "Perl: How to deal with a duplicated modules installation?", "body": "<p>Everything is working as expected.</p>\n\n<hr>\n\n<p>There are three sets of installation locations: core, vendor and site.</p>\n\n<p>The vendor directories are usually used by the package managers of linux distros, but it appears that Strawberry Perl includes a number of non-core modules in its distribution (including Mojolicious) and it places these in the vendor directories. <strong>This is proper.</strong><sup>[1]</sup></p>\n\n<p>The site directories are used for user-installed modules. So your upgraded Mojolicious was installed into the site directories. <strong>This is proper.</strong></p>\n\n<p>(More on the differences <a href=\"https://stackoverflow.com/a/54470382/589924\">here</a>.)</p>\n\n<p>This is not a problem because the site directories are placed before the vendor directories in <code>@INC</code>, so the user-installed version of a module is found before the vendor-installed version.</p>\n\n<hr>\n\n<ol>\n<li>Using the site directories would probably also have been fine since Strawberry Perl doesn't provide a way of managing the distributions it bundles. But using the vendor directories is sure to be safe.</li>\n</ol>\n"}], "owner": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 1, "accepted_answer_id": 57368130, "answer_count": 1, "score": 2, "last_activity_date": 1565793586, "creation_date": 1565049640, "last_edit_date": 1565051802, "question_id": 57367335, "link": "https://stackoverflow.com/questions/57367335/perl-how-to-deal-with-a-duplicated-modules-installation", "title": "Perl: How to deal with a duplicated modules installation?", "body": "<p>I'm new with Perl and stumbled on a doubled modules installation.</p>\n\n<p>I made a fresh installation of <a href=\"http://strawberryperl.com\" rel=\"nofollow noreferrer\">Strawbery Perl</a> on <code>Windows 10</code>. After that, I tried to update all modules at once by using a command proposed in this <a href=\"https://stackoverflow.com/questions/3727795/how-do-i-update-all-my-cpan-modules-to-their-latest-versions\">answer</a>; :</p>\n\n<pre><code>cpan-outdated -p | cpanm\n</code></pre>\n\n<p>Unfortunately, it appeared that probably the updates were installed on another location:</p>\n\n<pre><code>whichpm -a Mojolicious\nC:\\Strawberry\\perl\\site\\lib\\Mojolicious.pm\nC:\\Strawberry\\perl\\vendor\\lib\\Mojolicious.pm\n\n\nwhichpm -v Mojolicious\nwhichpm: WARNING: DUPLICATE module files found for 'Mojolicious':\n  C:\\Strawberry\\perl\\vendor\\lib\\Mojolicious.pm\nMojolicious     8.22    (non-core)      C:\\Strawberry\\perl\\site\\lib\\Mojolicious.pm\n</code></pre>\n\n<p>How to deal whit that case?</p>\n\n<p>How to prevent such cases in further updates?</p>\n\n<pre><code>perl -wE \"say for @INC\"\n\nC:/Strawberry/perl/site/lib/MSWin32-x64-multi-thread\nC:/Strawberry/perl/site/lib\nC:/Strawberry/perl/vendor/lib\nC:/Strawberry/perl/lib\n</code></pre>\n"}, {"tags": ["strawberry-perl", "perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1565041543, "post_id": 57365995, "comment_id": 101219059, "body": "You do have Perl&#39;s <code>grep</code> installed: <code>perl -e &quot;print sort grep&#47;^Mojo&#47;,qx(cpan -l)&quot;</code>"}, {"owner": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1565045641, "post_id": 57365995, "comment_id": 101219946, "body": "@mob, you are right. I meant <code>grep</code> command in the console."}, {"owner": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1565046284, "post_id": 57365995, "comment_id": 101220056, "body": "It looks like the problem is that there are two versions of each module installed. <code>cpan -l</code> show sth eversion string as <code>undef</code> on some reason."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1565047122, "post_id": 57365995, "comment_id": 101220191, "body": "Print exact file locations for each to see what that doubling is about?"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "edited": false, "score": 0, "creation_date": 1565047759, "post_id": 57366916, "comment_id": 101220305, "body": "@MiroslavPopov Yeah, regex is useful; can be really clean and easy to write. (And it can be overly complex and powerful as well.)  That said, the good old <code>index</code> seems undervalued in Perl -- even though there are indeed usually other, easier-to-code ways in such a rich language. But  I wouldn&#39;t be surprised if what you did was much faster than starting a regex engine (but I don&#39;t know that, it should be benchmarked).  That would of course only matter if it&#39;s done a lot, but these kinds of checks often are."}, {"owner": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "edited": false, "score": 0, "creation_date": 1565047985, "post_id": 57366916, "comment_id": 101220340, "body": "Found duplicated installations. Checked via <code>whichpm</code>:      <code>C:\\Users\\info\\OneDrive\\Documents&gt;whichpm -a Mojolicious</code>     <code>C:\\Strawberry\\perl\\site\\lib\\Mojolicious.pm</code>     <code>C:\\Strawberry\\perl\\vendor\\lib\\Mojolicious.pm</code>      <code>C:\\Users\\info\\OneDrive\\Documents&gt;whichpm -v Mojolicious</code> <code>whichpm: WARNING: DUPLICATE module files found for &#39;Mojolicious&#39;:</code>     <code>C:\\Strawberry\\perl\\vendor\\lib\\Mojolicious.pm Mojolicious     8.22    (non-core)      C:\\Strawberry\\perl\\site\\lib\\Mojolicious.pm</code>"}, {"owner": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "edited": false, "score": 0, "creation_date": 1565048755, "post_id": 57366916, "comment_id": 101220466, "body": "can I change the question to &quot;how to deal with duplicated modules installation? Is it allowed in SO?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "edited": false, "score": 1, "creation_date": 1565054488, "post_id": 57366916, "comment_id": 101221390, "body": "@MiroslavPopov  (Short answer: Your question and you can change it any way you like; however, it is not a good idea to actually <i>change</i> it, its substance. Once people have seen it, and specially once there are answers, then it&#39;s baked.   The edit is great -- you updated meaningfully and didn&#39;t change the question.)  It is common to see things differently after pondering over it and seeing comments and answers; it&#39;s a part of the process, articulating our questions better.  Normal stuff, and it&#39;s that way with SO as well -- and then you ask another question."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "edited": false, "score": 0, "creation_date": 1565054678, "post_id": 57366916, "comment_id": 101221420, "body": "@MiroslavPopov  &quot;<i>Found duplicated installations</i>&quot;  --- great!  And good that you looked, because that doesn&#39;t seem right, and good that you ask (new question) about it. Also of general interest I think, as I suspect it happens often."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1565117374, "last_edit_date": 1565117374, "creation_date": 1565045397, "answer_id": 57366916, "question_id": 57365995, "link": "https://stackoverflow.com/questions/57365995/how-to-print-filtered-output-list-of-an-external-command-in-perl/57366916#57366916", "title": "How to print filtered output list of an external command in Perl?", "body": "<p>Not sure what <code>cpan</code> does and its man page is sprawling for me. Could it be listing modules from two Perl versions? Or there are indeed two versions of modules installed?</p>\n\n<p>Here is another option, with core <a href=\"https://perldoc.perl.org/ExtUtils/Installed.html\" rel=\"nofollow noreferrer\">ExtUtils::Installed</a></p>\n\n<pre><code>perl -MExtUtils::Installed -MList::Util=max -wE'\n    $obj = ExtUtils::Installed-&gt;new; \n    @mods = sort $obj-&gt;modules; \n    $max_len = max map { length } @mods; \n    printf(\"%-${max_len}s -- %s\\n\", $_, $obj-&gt;version($_)) for @mods'\n</code></pre>\n\n<p>This prints all of them.  To see just the ones starting with <code>Mojo</code> change the last line to</p>\n\n<pre><code>/^Mojo/ and printf(\"%-${max_len}s -- %s\\n\", $_, $obj-&gt;version($_)) for @mods'\n</code></pre>\n\n<p>The <code>/^Mojo/</code> is a regex that tests <code>$_</code> (by default) for whether it starts with (<code>^</code> anchor) the literal string <code>Mojo</code>. This is I think clearer than using <code>index</code>, and is idiomatic (more readily understood).</p>\n\n<p>But <a href=\"https://perldoc.perl.org/functions/printf.html\" rel=\"nofollow noreferrer\">printf</a> has for the field width the length of the longest module name, found before filtering, which is likely too wide for the filtered list.  So for nicer output you can first filter with <a href=\"https://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\">grep</a></p>\n\n<pre><code>my @mods_filtered = sort grep { /^Mojo/ } $obj-&gt;modules; \nmy $max_len = max map { length } @mods_filtered; \nprintf(\"%-${max_len}s -- %s\\n\", $_, $obj-&gt;version($_)) for @mods_filtered;\n</code></pre>\n\n<p>All this should be in a small utility script; the one-liner above is for copy-paste testing.</p>\n\n<p>See documentation for details on what this module does.</p>\n\n<p>Also see <a href=\"https://stackoverflow.com/a/21198713/4653379\">this post</a>, with code for another option -- to search for files directly.</p>\n"}], "owner": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 57366916, "answer_count": 1, "score": 1, "last_activity_date": 1565117374, "creation_date": 1565038537, "last_edit_date": 1565048994, "question_id": 57365995, "link": "https://stackoverflow.com/questions/57365995/how-to-print-filtered-output-list-of-an-external-command-in-perl", "title": "How to print filtered output list of an external command in Perl?", "body": "<p>I'm learning Perl. As an exersize, I try to print all installed Mojolicious modules. I'm using Strawberry Perl and don't have <code>grep</code> installed.</p>\n\n<p>My naive try is:</p>\n\n<pre><code>perl -wE \"for (sort `cpan -l`) { chomp; say if index($_, 'Mojo') == 0; };\"\n</code></pre>\n\n<p>I found out that <code>cpan -l</code> returns a list. I expected a string, but never mind. I <code>sort</code> the returned list, <code>chomp</code> each record and <code>say</code> the ones that start with 'Mojo'.</p>\n\n<p>It rather works, but prints each line twice:</p>\n\n<pre><code>Mojolicious::Sessions   undef\nMojolicious::Sessions   undef\nMojolicious::Static     undef\nMojolicious::Static     undef\nMojolicious::Types      undef\nMojolicious::Types      undef\nMojolicious::Validator  undef\nMojolicious::Validator  undef\nMojolicious::Validator::Validation      undef\nMojolicious::Validator::Validation      undef\n</code></pre>\n\n<p>What it is wrong that prints each record twice?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>I run the code under Cent OS. It looks like it works fine but have two versions of the libs installed. </p>\n\n<pre><code>perl -we 'for (sort `cpan -l`) { chomp; print $_, \"\\n\" if index($_, \"JSON\") == 0; };'\n\nJSON::PP        4.02\nJSON::PP        4.04\nJSON::PP::Boolean       4.02\nJSON::PP::Boolean       4.04\n</code></pre>\n\n<p><strong>Edit 2:</strong></p>\n\n<p>As recommended by @zdim, I checked the file paths of the installed modules. It appeared that there are doubled installations:</p>\n\n<pre><code>whichpm -a Mojolicious\nC:\\Strawberry\\perl\\site\\lib\\Mojolicious.pm\nC:\\Strawberry\\perl\\vendor\\lib\\Mojolicious.pm\n\n\nwhichpm -v Mojolicious\nwhichpm: WARNING: DUPLICATE module files found for 'Mojolicious':\n  C:\\Strawberry\\perl\\vendor\\lib\\Mojolicious.pm\nMojolicious     8.22    (non-core)      C:\\Strawberry\\perl\\site\\lib\\Mojolicious.pm\n</code></pre>\n\n<p>It looks like the question was wrong.</p>\n\n<p>A possible reason for the duplicated installation can be inproper modules update. After installing Strawbery I used the following command:</p>\n\n<pre><code>cpan-outdated -p | cpanm\n</code></pre>\n\n<p>Thank you guys for the help. It looks like it was the wrong question. I accept the given answer and will open a new 'better' question.</p>\n"}, {"tags": ["perl", "sorting", "file-handling"], "comments": [{"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1565039876, "post_id": 57365932, "comment_id": 101218620, "body": "@mosvy welp, that did the trick. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 6542621, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xEGv20ZXIIU/AAAAAAAAAAI/AAAAAAAAGjM/daifWf1TNic/photo.jpg?sz=128", "display_name": "Adi Nistor", "link": "https://stackoverflow.com/users/6542621/adi-nistor"}, "is_accepted": false, "score": 0, "last_activity_date": 1565040592, "creation_date": 1565040592, "answer_id": 57366311, "question_id": 57365932, "link": "https://stackoverflow.com/questions/57365932/sorting-with-filehandle-perl/57366311#57366311", "title": "Sorting with filehandle perl", "body": "<p>Easy is to read everything in an array. Sort the array. Then parse the array and process it however you want.</p>\n\n<p>One easy-to-write solution for file reading is to use File::Slurper:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse File::Slurper 'read_lines';\nmy $file1 = \"a.a\";\nmy $file2 = \"b.b\";\n\nunless ( -f $file1 ) {die \"Missing file: $file1\\n\";}\n\n# Read all lines in an array\nmy @lines = read_lines($file1);\n# Sort the array\nmy @sorted_lines = sort(@lines);\n\n\nunless (open FILE2, '&gt;'. $file2) {die \"Couldn't open file\\n\";}\n# Parse the sorted array\nforeach my $line (@sorted_lines)\n{\n    # prcoess each line however you want\n    print FILE2 substr($line, 0, -1).\"\\n\";\n}\n\nclose FILE2;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2349, "user_id": 6794384, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153707640356246/picture?type=large", "display_name": "drclaw", "link": "https://stackoverflow.com/users/6794384/drclaw"}, "is_accepted": true, "score": 2, "last_activity_date": 1565049188, "last_edit_date": 1565049188, "creation_date": 1565041655, "answer_id": 57366467, "question_id": 57365932, "link": "https://stackoverflow.com/questions/57365932/sorting-with-filehandle-perl/57366467#57366467", "title": "Sorting with filehandle perl", "body": "<p>You could directly sort the output of <code>&lt;&gt;</code> in array context to remove a loop and make it a lot easier to read in my opinion.</p>\n\n<p>If you are sorting lines, there is no need to chomp the end of line. If you leave it there then it cleans up the <code>print</code> statement by removing the manual newline character.</p>\n\n<p>Also if you you lexical variables (eg <code>my $input</code>) instead of file handle (eg 'INPUT') for the <code>open</code> function, the file descriptors are automatically closed at the end of the scope. </p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen my $input, \"&lt;\", \"input.txt\";\nopen my $output, \"&gt;\", \"output.txt\";\n\nmy @lines=sort &lt;$input&gt;;    #Use array context to read all lines in file\n\n\nfor (@lines) {\n    print $output  $_;\n}\n</code></pre>\n"}], "owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 57366467, "answer_count": 2, "score": 0, "last_activity_date": 1565049188, "creation_date": 1565038201, "last_edit_date": 1565041947, "question_id": 57365932, "link": "https://stackoverflow.com/questions/57365932/sorting-with-filehandle-perl", "title": "Sorting with filehandle perl", "body": "<p>I want to sort content by line for my output file. </p>\n\n<p>I have this code </p>\n\n<pre><code>unless (open FILE1, '&lt;'. $file1) {die \"Couldn't open file\\n\";}\nunless (open FILE2, '&gt;'. $file2) {die \"Couldn't open file\\n\";}\n\nwhile (my $line = &lt;FILE1&gt;){\nchomp $line;\nprint FILE2 sort (substr($line, 0, -1)).\"\\n\";\n\n}\n\nclose FILE1;\nclose FILE2;\n\n</code></pre>\n\n<p>I would like to sort the lines in alphabetical order but it's not working. Without sort, I get desired output unsorted. How can I fix this so each line in my file output is sorted without having to do <code>$sort -o $file $file</code>.</p>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "edited": false, "score": 0, "creation_date": 1565053549, "post_id": 57365880, "comment_id": 101221232, "body": "Your logic seems sound, and is pretty clearly mimicked on the example at <a href=\"https://www.perlmonks.org/?node_id=153259\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=153259</a> so I would investigate if the node&#39;s name has any non-obvious whitespace in it. Do <code>print &quot;X&quot;, $node-&gt;name, &quot;X&quot;;</code> and <code>print &quot;X&quot;, $_[0]-&gt;{search_item}, &quot;X&quot;;</code> print exactly the same thing, or are there whitespace differences?"}, {"owner": {"reputation": 27, "user_id": 10655438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d375500432d3bf0dcfb77090322919e5?s=128&d=identicon&r=PG&f=1", "display_name": "hn77", "link": "https://stackoverflow.com/users/10655438/hn77"}, "reply_to_user": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "edited": false, "score": 0, "creation_date": 1565057094, "post_id": 57365880, "comment_id": 101221764, "body": "Yeap I did that from before and it had no whitespaces. However, I found the problem, I did not return 1 which allowed the traversing to continue. Thanks."}], "owner": {"reputation": 27, "user_id": 10655438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d375500432d3bf0dcfb77090322919e5?s=128&d=identicon&r=PG&f=1", "display_name": "hn77", "link": "https://stackoverflow.com/users/10655438/hn77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565037936, "creation_date": 1565037936, "question_id": 57365880, "link": "https://stackoverflow.com/questions/57365880/problem-using-walkdown-method-in-treedagnode-module", "title": "Problem using Walkdown Method in Tree::DAGNode Module", "body": "<p>I am trying to use walkdown the walkdown method in CPAN's Tree::DAG_Node module to search for something.\nAssuming the thing that I am searching for is the string \"instance1\". How can I search for it in my tree?</p>\n\n<p>Here is what I did, \nAssuming I already have a tree data structure (contents not suitable for public distribution) and it works. I tried creating a subroutine to search for a specific string passed in as the subroutine's argument which then gets passed down into the walkdown method of my tree. \nTo simplify things, lets say it then compares each node's name with the string and SHOULD print out the name of the node. However in this case it doesn't print out the supposed node name. \nI have tried checking what both lhs and rhs of the if comparison block is registering and they do print the correct things. I am not sure why my program flow isn't entering the if block.</p>\n\n<pre><code>sub search {\n    $root-&gt;walk_down({\n        callback =&gt; sub {\n            my $node = shift;\n            if ($node-&gt;name eq $_[0]-&gt;{search_item}){\n                print $node-&gt;name, \"\\n\" ;\n            }\n        },\n        _depth =&gt; 0,\n        search_item =&gt; $_[0]\n    })\n}\n\nsub main {\nsearch(\"instance1\");\n}\n</code></pre>\n"}, {"tags": ["apache", "perl", "mod-perl2"], "answers": [{"tags": [], "owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "is_accepted": false, "score": 0, "last_activity_date": 1565173214, "last_edit_date": 1565173214, "creation_date": 1565031559, "answer_id": 57364621, "question_id": 57363252, "link": "https://stackoverflow.com/questions/57363252/how-to-get-my-vhost-in-code-executed-by-perpostconfigrequire/57364621#57364621", "title": "How to get &quot;my&quot; VHOST in code executed by PerPostConfigRequire?", "body": "<p>The only thing which came into my mind is using environment variables per VHOST like in the following example. <code>PerlSetVar</code> doesn'T work because it's per request only and not available during startup of the web server.</p>\n\n<pre><code>PerlSetEnv SOME_ID \"0c8c1236-86de-4483-9d4b-999e2cfd17c1\"\nPerlPostConfigRequire \"Some.pm\"\n</code></pre>\n\n<p>Each VHOST gets it's own ID and that environment variable seems to be uniquely available during execution of the configured package:</p>\n\n<pre><code>[Mon Aug 05 20:50:32.181559 2019] [:warn] [pid 17736:tid 704] [...]: 0c8c1236-86de-4483-9d4b-999e2cfd17c1: 1\n[Mon Aug 05 20:50:32.836195 2019] [:warn] [pid 17736:tid 704] [...]: 9dc691d6-794a-4095-852e-e596cabf43d5: 1\n[Mon Aug 05 20:50:34.180453 2019] [:warn] [pid 17736:tid 704] [...]: 0c8c1236-86de-4483-9d4b-999e2cfd17c1: 2\n[Mon Aug 05 20:50:34.830098 2019] [:warn] [pid 17736:tid 704] [...]: 9dc691d6-794a-4095-852e-e596cabf43d5: 2\n</code></pre>\n\n<p>The logging code:</p>\n\n<pre><code>my $server = Apache2::ServerUtil-&gt;server();\n   $server-&gt;warn(__PACKAGE__ . \": $ENV{'SOME_ID'}: \" . Apache2::ServerUtil::restart_count());\n</code></pre>\n\n<p>With that in mind, one can get all VHOSTs and search for the ID they define. It's important to note that <code>lookup</code> is not of much help here, it doesn't seem to support searching for <code>PerlSetEnv</code> directly, but one needs to implement that on hash refs returned for the VHOSTs manually:</p>\n\n<pre><code>my $confTree  = Apache2::Directive::conftree();\nmy @vhosts    = $confTree-&gt;lookup('VirtualHost');\n</code></pre>\n\n<p>Each result is a hash ref containing keys and values like the following:</p>\n\n<pre><code>$VAR1 = {\\n          'PerlSetEnv' =&gt; 'AMS_MOD_PERL_PRE_LOADING_ID \"9dc691d6-794a-4095-852e-e596cabf43d5\"',\\n[...]\n\n'PerlSetEnv' =&gt; [\\n  '\"AMS_MOD_PERL_PRE_LOADING_ID\" \"9dc691d6-794a-4095-852e-e596cabf43d5\"',\\n '\"murks\" \"test\"'\\n ],\n</code></pre>\n\n<p>The structure of the hash ref depends on the actual config, so it might contain additional child hash refs I guess. Any better ideas welcome...</p>\n"}], "owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565173214, "creation_date": 1565025301, "question_id": 57363252, "link": "https://stackoverflow.com/questions/57363252/how-to-get-my-vhost-in-code-executed-by-perpostconfigrequire", "title": "How to get &quot;my&quot; VHOST in code executed by PerPostConfigRequire?", "body": "<p>I'm hosting multiple instances of the same web app in different versions using the same instance of HTTPd and one <code>VHOST</code> per instance/version of web app currently. I would like to use mod_perl's <code>PostConfigRequire</code> to implement a handler pre-loading all those instances during server startup instead of relying on mod_perl's registry-facilities per request, as is done currently. The latter <a href=\"http://mail-archives.apache.org/mod_mbox/perl-modperl/201907.mbox/%3C1116164701.20190731193313%40am-soft.de%3E\" rel=\"nofollow noreferrer\">breaks</a> in case of too many concurrent requests and according to some tests, that problem doesn't occur anymore in case things get pre-loaded.</p>\n\n<p>Because of the different versions of my web app, I need to use <code>PerlOptions +Parent</code> to provide each <code>VHOST</code> with its individual Perl interpreter pool. Additionally I can easily configure <code>PerlPostConfigRequire</code> per <code>VHOST</code>, but pre-loading needs to take into account which <code>VHOST</code> that handler is currently executed in. Within that handler I need to only load those files associated with some concrete <code>VHOST</code>.</p>\n\n<p>The problem is that I'm having trouble how to find the <code>VHOST</code> currently executing that handler. In that past I have implemented something similar per request by looking at the currently requested URL and comparing that to <code>VHOST</code> configs, but I don't have a request now. <code>Apache2::ServerUtil-&gt;server()</code> is not providing my <code>VHOST</code>, but it's available at all e.g. using <code>Apache2::Directive::conftree()-&gt;lookup('VirtualHost')</code>. Only that I don't know which one is the one containing <code>PerlPostConfigRequire</code> currently executed. I'm pretty sure that <code>PerlPostConfigRequire</code> really gets executed per <code>VHOST</code>, because I get debugging output scaling with the number of <code>VHOST</code>s configured as well.</p>\n\n<p>Any ideas? Thanks!</p>\n"}, {"tags": ["perl", "docker"], "answers": [{"comments": [{"owner": {"reputation": 227, "user_id": 659866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d5046ac21efd615df4e7cbcd87f72d2?s=128&d=identicon&r=PG", "display_name": "Doug Donohoe", "link": "https://stackoverflow.com/users/659866/doug-donohoe"}, "edited": false, "score": 0, "creation_date": 1565024337, "post_id": 57362341, "comment_id": 101212527, "body": "amon, thanks for the answer - I hadn&#39;t considered that <code>perl</code> was integral to the distro.  I&#39;ve inherited this, so I&#39;ll be cleaning up the shebang hardcoding.  Is there a convenient way to map an <code>apt-get</code> package to a <code>cpan</code> one?  E.g., <code>liburi-escape-xs-perl</code>?"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 227, "user_id": 659866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d5046ac21efd615df4e7cbcd87f72d2?s=128&d=identicon&r=PG", "display_name": "Doug Donohoe", "link": "https://stackoverflow.com/users/659866/doug-donohoe"}, "edited": false, "score": 1, "creation_date": 1565033230, "post_id": 57362341, "comment_id": 101216180, "body": "@DougDonohoe With the Debian/Ubuntu naming conventions, an APT package <code>libfoo-bar-perl</code> contains the CPAN module <code>Foo::Bar</code>. You can&#39;t translate this programmatically because capitalization might differ, but you can easily look up the exact name on MetaCPAN."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 6, "last_activity_date": 1565021371, "creation_date": 1565021371, "answer_id": 57362341, "question_id": 57361953, "link": "https://stackoverflow.com/questions/57361953/why-do-official-perl-docker-images-have-two-version-of-perl/57362341#57362341", "title": "Why do official perl docker images have two version of perl?", "body": "<p>Perl is an essential part of many Linux distributions, and has to come pre-installed. The system perl that is used by the operating system is usually installed as <code>/usr/bin/perl</code>. Modules for it are managed through the package manager (e.g. <code>apt</code>) and not via <code>cpan</code>/<code>cpanm</code>. If you were to install modules for the system perl yourself, this might conflict with modules expected by the operating system. Worse, installing the wrong module version could break parts of the OS. Similarly, replacing the system perl is a bad idea. That's why those Docker images install the different perl alongside.</p>\n\n<p>For your apps, you should avoid the system perl. If you want to install extra modules for use with the system perl, consider using local::lib. In some cases you might install dependencies such as C libraries or external tools via apt, but you wouldn't use apt-provided Perl modules.</p>\n\n<p>Unless you are targeting a specific operating system, do not hardcode the <code>#!/usr/bin/perl</code> shebang. Instead, prefer <code>#!/usr/bin/env perl</code> so that the script will use the perl that is first in the PATH. Alternatively, use wrapper scripts to explicitly invoke the correct perl installation. For example:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>#!/bin/sh\nexec /usr/local/bin/perl -I/path/to/extra/modules /path/to/my/script \"$@\"\n</code></pre>\n\n<p>Note that you cannot share modules between different versions of Perl. During installation of XS modules they are compiled for a specific version, and will fail to load with a different Perl version. For your local perl, just install dependencies via <code>cpanm</code> and ignore modules that were installed for the system perl.</p>\n"}], "owner": {"reputation": 227, "user_id": 659866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d5046ac21efd615df4e7cbcd87f72d2?s=128&d=identicon&r=PG", "display_name": "Doug Donohoe", "link": "https://stackoverflow.com/users/659866/doug-donohoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 1, "accepted_answer_id": 57362341, "answer_count": 1, "score": 3, "last_activity_date": 1565021371, "creation_date": 1565019856, "question_id": 57361953, "link": "https://stackoverflow.com/questions/57361953/why-do-official-perl-docker-images-have-two-version-of-perl", "title": "Why do official perl docker images have two version of perl?", "body": "<p>I'm working on a legacy product which uses the Docker <code>perl:5.10-threaded</code> image and ran into an issue trying to debug things when I discovered there are two version of perl - one in <code>/usr/local/bin/perl</code> and one in <code>/usr/bin/perl</code>.  In this particular image, they are actually different versions</p>\n\n<ul>\n<li><code>/usr/local/bin/perl</code> -> 5.10.1</li>\n<li><code>/usr/bin/perl</code> -> 5.20.2</li>\n</ul>\n\n<p>The issue it was causing is that each has a different <code>@INC</code> path.</p>\n\n<pre><code>$ /usr/local/bin/perl -V \n    [snip]\n    /usr/local/lib/perl5/5.10.1/x86_64-linux-thread-multi\n    /usr/local/lib/perl5/5.10.1\n    /usr/local/lib/perl5/site_perl/5.10.1/x86_64-linux-thread-multi\n    /usr/local/lib/perl5/site_perl/5.10.1\n</code></pre>\n\n<pre><code>$ /usr/bin/perl -V\n    [snip]\n    /etc/perl\n    /usr/local/lib/x86_64-linux-gnu/perl/5.20.2\n    /usr/local/share/perl/5.20.2\n    /usr/lib/x86_64-linux-gnu/perl5/5.20\n    /usr/share/perl5\n    /usr/lib/x86_64-linux-gnu/perl/5.20\n    /usr/share/perl/5.20\n    /usr/local/lib/site_perl\n    .\n</code></pre>\n\n<p>The latest versions, like <code>perl:5.30-threaded</code> also have two versions and different <code>@INC</code> paths as well.</p>\n\n<ul>\n<li><code>/usr/local/bin/perl</code> -> 5.30.0</li>\n<li><code>/usr/bin/perl</code> -> 5.28.1</li>\n</ul>\n\n<p>It turns out my legacy app uses <code>#!/usr/bin/perl</code>, which was very confusing to me when <code>perl foo.pl</code> didn't work the same as <code>foo.pl</code> (it complained about missing libraries).</p>\n\n<p>To add a bit more color, this legacy app also installs a bunch of <code>perl</code> libraries via <code>apt-get</code>.  E.g.,</p>\n\n<pre><code>libcpanel-json-xs-perl libxml-libxml-perl libcgi-pm-perl \nlibtie-ixhash-perl\nlibswitch-perl libmime-lite-perl liblist-moreutils-perl\nlibdate-calc-perl libnet-sftp-foreign-perl\nlibxml-libxslt-perl liburi-escape-xs-perl\nlibdatetime-perl\n</code></pre>\n\n<p>These seem to install things accessible by <code>/usr/bin/perl</code>, which is perhaps why the app uses it in the shebang lines.</p>\n\n<p>The other thing this app does is install some <code>cpanm</code> items and then copy them over, so they are accessible to <code>/usr/bin/perl</code></p>\n\n<pre><code>RUN cpanm XML::XML2JSON\nRUN cpanm JSON                       \n\nRUN cp /usr/local/lib/perl5/site_perl/5.10.1/XML/XML2JSON.pm /usr/lib/x86_64-linux-gnu/perl5/5.20/XML\nRUN cp /usr/local/lib/perl5/site_perl/5.10.1/JSON.pm /usr/lib/x86_64-linux-gnu/perl5/5.20\n</code></pre>\n\n<p>This seems like a hack to me, but I'm new to perl development, so who knows?</p>\n\n<p>All this leads up to my questions:</p>\n\n<ul>\n<li>why are there two version of <code>perl</code> in the Docker images?</li>\n<li>are <code>apt-get</code> and <code>cpanm</code> incompatible with each other?</li>\n<li>is there a better way to install these perl libs?</li>\n</ul>\n"}, {"tags": ["perl", "awk", "sed", "markdown"], "comments": [{"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 4, "creation_date": 1565020177, "post_id": 57361769, "comment_id": 101210695, "body": "Welcome to SO, we do encourage people on SO to post their efforts which they have put in order to solve their own problems, so kindly add them in code tags and let us know then."}], "answers": [{"comments": [{"owner": {"reputation": 2336, "user_id": 7389264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160900497f0373247800b2ad89798e32?s=128&d=identicon&r=PG&f=1", "display_name": "jirassimok", "link": "https://stackoverflow.com/users/7389264/jirassimok"}, "reply_to_user": {"reputation": 13, "user_id": 6747235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/721b2a6e98db1a73a3b01bc1afba5065?s=128&d=identicon&r=PG", "display_name": "harryln", "link": "https://stackoverflow.com/users/6747235/harryln"}, "edited": false, "score": 0, "creation_date": 1565023504, "post_id": 57362219, "comment_id": 101212160, "body": "It worked on my (relatively simple) test file. I added a shell script version to my answer; does that work?"}, {"owner": {"reputation": 13, "user_id": 6747235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/721b2a6e98db1a73a3b01bc1afba5065?s=128&d=identicon&r=PG", "display_name": "harryln", "link": "https://stackoverflow.com/users/6747235/harryln"}, "edited": false, "score": 0, "creation_date": 1565024251, "post_id": 57362219, "comment_id": 101212496, "body": "It is strange that it does not work on <code>cygwin</code>. But it indeed works under Linux.  Many thanks again."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1565027602, "post_id": 57362219, "comment_id": 101213855, "body": "That script is portable to any awk. If it didn&#39;t work for you on cygwin then either you copy/pasted wrong or your input file is different. Since all you said was <code>it does not work</code> (the worst possible statement of any problem as it provides no information towards identifying and fixing the problem) it&#39;s impossible to guess further at what the issue might be."}, {"owner": {"reputation": 13, "user_id": 6747235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/721b2a6e98db1a73a3b01bc1afba5065?s=128&d=identicon&r=PG", "display_name": "harryln", "link": "https://stackoverflow.com/users/6747235/harryln"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1565035125, "post_id": 57362219, "comment_id": 101216936, "body": "@jirassimok and @Ed Morton: @jiassimok&#39;s code works fine for <code>Linux</code>, <code>git-bah</code> and <code>msys2</code>. I have no idea why it does not for <code>cygwin</code>. Maybe my installation of <code>cygwin</code> has problem. Anyway thank you both for your kind answer."}], "tags": [], "owner": {"reputation": 2336, "user_id": 7389264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160900497f0373247800b2ad89798e32?s=128&d=identicon&r=PG&f=1", "display_name": "jirassimok", "link": "https://stackoverflow.com/users/7389264/jirassimok"}, "is_accepted": false, "score": 2, "last_activity_date": 1565023080, "last_edit_date": 1565023080, "creation_date": 1565020880, "answer_id": 57362219, "question_id": 57361769, "link": "https://stackoverflow.com/questions/57361769/how-to-change-markdown-fenced-block-language/57362219#57362219", "title": "How to change markdown fenced block language", "body": "<p>If every code fence in your file starts and ends with <code>```</code> alone on a line, <code>awk</code> seems like a reasonable tool for this.</p>\n\n<p>The following Awk script will append the <code>lang</code> variable to every other line that contains only <code>```</code> (use <code>awk -v lang=LANGUAGE</code> to set the variable easily).</p>\n\n<pre><code>{\n  if ($0 ~ /^```$/) {  # match lines containing only ```\n    fences += 1; # count lines\n    print $0 (fences % 2 ? lang : \"\"); # add lang to even lines\n  } else {\n    print $0;\n  }\n}\n</code></pre>\n\n<p>Here it is inlined for use on the command line:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>awk -v lang=\"$LANGUAGE\" \\\n  '{if($0~/^```$/){c++;print $0(c%2?lang:\"\")}else{print $0}}' \\\n  \"$FILE\"\n</code></pre>\n\n<p>With a little effort, you should be able to adapt this script to skip over existing language tags and deal with things like indented code blocks, if you need those features.</p>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": true, "score": 2, "last_activity_date": 1565023963, "creation_date": 1565023963, "answer_id": 57362928, "question_id": 57361769, "link": "https://stackoverflow.com/questions/57361769/how-to-change-markdown-fenced-block-language/57362928#57362928", "title": "How to change markdown fenced block language", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed '/^```/{s//&amp;bash/;:a;n;//!ba}' file\n</code></pre>\n\n<p>Look for <code>```</code> and append <code>bash</code> then continue reading/printing the file until a further occurrence of <code>```</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 1, "last_activity_date": 1565029081, "creation_date": 1565029081, "answer_id": 57364076, "question_id": 57361769, "link": "https://stackoverflow.com/questions/57361769/how-to-change-markdown-fenced-block-language/57364076#57364076", "title": "How to change markdown fenced block language", "body": "<pre><code>$ awk '/```/ &amp;&amp; (++c)%2{$0=$0\"bash\"} 1' file\n```bash\nls -l\n...\n```\n</code></pre>\n\n<p>Change:</p>\n\n<pre><code>/```/\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>/'''/\n</code></pre>\n\n<p>if appropriate.</p>\n"}], "owner": {"reputation": 13, "user_id": 6747235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/721b2a6e98db1a73a3b01bc1afba5065?s=128&d=identicon&r=PG", "display_name": "harryln", "link": "https://stackoverflow.com/users/6747235/harryln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 57362928, "answer_count": 3, "score": 0, "last_activity_date": 1565035728, "creation_date": 1565019181, "last_edit_date": 1565035728, "question_id": 57361769, "link": "https://stackoverflow.com/questions/57361769/how-to-change-markdown-fenced-block-language", "title": "How to change markdown fenced block language", "body": "<p>I have a lot of code blocks without any language indication in a markdown file, something like:</p>\n\n<pre><code>```\nls -l\n#any other code goes here ...\n```\n</code></pre>\n\n<p>Would any one tell me how to use <code>sed</code>, or <code>awk</code> or <code>perl</code> to append the block indication, for example, <code>bash</code>:</p>\n\n<pre><code>```bash\nls -l\n#any other code goes here ...\n```\n</code></pre>\n\n<p>Many thanks.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 3, "last_activity_date": 1565012586, "creation_date": 1565012586, "answer_id": 57360195, "question_id": 57360194, "link": "https://stackoverflow.com/questions/57360194/perl-print-interpretation/57360195#57360195", "title": "Perl print interpretation", "body": "<p>The <code>stat</code> function returns status of the file given as argument, the 9th element is the last mmodify time.</p>\n\n<p>This script prints the last modify time and the value provided in the first argument.</p>\n\n<p>It's impossible to say more without knowing all the arguments.</p>\n"}, {"tags": [], "owner": {"reputation": 10915, "user_id": 49849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/584233a4e657924299359539579b006a?s=128&d=identicon&r=PG&f=1", "display_name": "user1686", "link": "https://stackoverflow.com/users/49849/user1686"}, "is_accepted": false, "score": 3, "last_activity_date": 1565012684, "creation_date": 1565012684, "answer_id": 57360196, "question_id": 57360194, "link": "https://stackoverflow.com/questions/57360194/perl-print-interpretation/57360196#57360196", "title": "Perl print interpretation", "body": "\n\n<p>It prints the file's modification time (in Unix seconds).</p>\n\n<p>The <code>@ARGV</code> array contains all command-line arguments, where <code>$ARGV[0]</code> is the first one, <code>$ARGV[1]</code> is second, and so on. (Note difference from e.g. C or Python, where item 0 is the script's own name.)</p>\n\n<p><code>stat($filename)</code> returns a list containing all fields that you would expect from the C stat() function. Its 9th element is the file's modification time. (See <code>perldoc -f stat</code>.)</p>\n\n<p>So <code>(stat($ARGV[1]))[9]</code> gets you the mtime of the file specified as the script's second parameter. (The extra parens are necessary to cope with Perl's syntax, which doesn't allow <code>func()[]</code> for some reason.)</p>\n\n<p><code>printf</code> works exactly like C printf() or Bash printf, and each <code>%s</code> is expanded to the corresponding parameter; so it prints the mtime in Unix seconds, space, and then the script's first parameter.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ./yourscript.pl Hello! myfile.txt\n1565012664 Hello!\n\n$ date -d @1565012664\nMon Aug  5 16:44:24 EEST 2019\n</code></pre>\n"}], "migrated_from": {"other_site": {"markdown_extensions": ["Prettify"], "launch_date": 1250553600, "open_beta_date": 1247529600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon@2.png", "twitter_account": "super_user", "favicon_url": "https://cdn.sstatic.net/Sites/superuser/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon.png", "audience": "computer enthusiasts and power users", "site_url": "https://superuser.com", "api_site_parameter": "superuser", "logo_url": "https://cdn.sstatic.net/Sites/superuser/Img/logo.png", "name": "Super User", "site_type": "main_site"}, "on_date": 1565013703, "question_id": 1467852}, "owner": {"reputation": 11, "user_id": 9126323, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ce-NBw7SP9I/AAAAAAAAAAI/AAAAAAAACHE/2qfSq3ybzcY/photo.jpg?sz=128", "display_name": "Ravi Kiran", "link": "https://stackoverflow.com/users/9126323/ravi-kiran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1565013703, "creation_date": 1565012101, "question_id": 57360194, "link": "https://stackoverflow.com/questions/57360194/perl-print-interpretation", "title": "Perl print interpretation", "body": "<p>I'm going through one of the legacy scripts in our env and found below perl command embedded into a shell script. </p>\n\n<pre><code>#!/usr/bin/perl\nprintf \"%s %s\\\\n\", (stat($ARGV[1]))[9], $ARGV[0];\n</code></pre>\n\n<p>I have no knowledge of Perl.\nCan someone help me understand what the author is trying to do here?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1565005940, "post_id": 57357893, "comment_id": 101202840, "body": "I cannot see where <code>@inner_array</code> gets set except the initial empty array. And what&#39;s <code>@inner_list</code>? Anyway you&#39;d have to work with array refs rather than arrays. Please <a href=\"https://stackoverflow.com/posts/57357893/edit\">edit</a> your post and add a sample for the file your program should consume."}, {"owner": {"reputation": 41, "user_id": 4120501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02c042b38b67af82df7b13555d7b772f?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph", "link": "https://stackoverflow.com/users/4120501/joseph"}, "reply_to_user": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1565080303, "post_id": 57357893, "comment_id": 101228851, "body": "Thank you @stickybit . The problem was solved when I used array ref"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 4120501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02c042b38b67af82df7b13555d7b772f?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph", "link": "https://stackoverflow.com/users/4120501/joseph"}, "edited": false, "score": 1, "creation_date": 1565080379, "post_id": 57358236, "comment_id": 101228889, "body": "Thank you @mkHun. I could solve it by using array ref rather than arrays"}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 1, "last_activity_date": 1565007202, "last_edit_date": 1565007202, "creation_date": 1565006602, "answer_id": 57358236, "question_id": 57357893, "link": "https://stackoverflow.com/questions/57357893/how-to-create-a-perl-hash-with-values-as-list-of-lists/57358236#57358236", "title": "How to create a Perl hash with values as list of lists", "body": "<p>I am not providing answer for your question instead I am giving the reason for your output. This is because of \"implicit scalar conversion\" it stores the array length. for example,</p>\n\n<pre><code>my @ar = qw(1 2 3 4);\nmy $x = @ar;\n# output 4 (total length of array)\n</code></pre>\n\n<p>Use the reference to holds the data in your hash, as follow</p>\n\n<pre><code>use Data::Dumper;\n\nmy %hash;\n\nmy @array = (1,2,3,1);\n\n@{$hash{\"key\"}} = @array;\n\n\nprint Dumper \\%hash;\n</code></pre>\n\n<p>Then you have to understand the array flatten in Perl, Let's consider</p>\n\n<pre><code>@ar = ((1,2,3),(4,5,6),(3,4,5));\nprint $ar[0];\n# output is 1 not (1,2,3) this is because array flatten\n</code></pre>\n\n<p>If you want to access the data as array format again you have to store it as reference </p>\n\n<pre><code>my @ar = ( [1,3,4] , [5,4,2] );\n\nprint @{$ar[0]};\n#1,3,4 \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1565007246, "creation_date": 1565007246, "answer_id": 57358392, "question_id": 57357893, "link": "https://stackoverflow.com/questions/57357893/how-to-create-a-perl-hash-with-values-as-list-of-lists/57358392#57358392", "title": "How to create a Perl hash with values as list of lists", "body": "<p><code>((A, B, C), (1, 2, 3), (Q, R, F))</code> is equivalent to <code>(A, B, C, 1, 2, 3, Q, R, F)</code>, lists are flattened in Perl. Hash values must be scalars, you need to use an array reference:</p>\n\n<pre><code>my %hash = ( key =&gt; [ [ 'A', 'B', 'C' ], [ 1, 2, 3 ], [ 'Q', 'R', 'F' ] ] ...\n</code></pre>\n\n<p>Note the square brackets for array references.</p>\n\n<p>Also note the round parenthesis at the beginning: using <code>{</code> creates a hash reference, which you probably don't want to assign to a hash. It would've created a hash of a single key like <code>HASH(0x5653cc6cc1e0)</code> with undefined value.\nUsing <a href=\"http://p3rl.org/warnings\" rel=\"nofollow noreferrer\">warnings</a> should tell you so:</p>\n\n<pre><code>$ perl -MData::Dumper -wE 'my %h = {x=&gt;1}; say Dumper \\%h'\nReference found where even-sized list expected at -e line 1.\n$VAR1 = {\n          'HASH(0x557d282e41e0)' =&gt; undef\n        };\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4120501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02c042b38b67af82df7b13555d7b772f?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph", "link": "https://stackoverflow.com/users/4120501/joseph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 577, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1598210517, "creation_date": 1565005297, "last_edit_date": 1598210517, "question_id": 57357893, "link": "https://stackoverflow.com/questions/57357893/how-to-create-a-perl-hash-with-values-as-list-of-lists", "title": "How to create a Perl hash with values as list of lists", "body": "<p>I am trying to create a hash from the raw data read from a file.\nThe values for each hash element will be a list of lists. These inner lists are parsed from the file and need to be kept as a key =&gt; ((list 1), (list 2), ......, (list n)) in hash for further processing.</p>\n<p>Final data that is expected in the hash will be something like:</p>\n<pre><code>%hash = {\n    'key 1' =&gt; ((A, B, C), (1, 2, 3), (Q, R, F)),\n    'key 2' =&gt; ((X, Y, Z), (P, Q, R)),\n    'key 3' =&gt; ((1.0, M, N), (R, S, T), (4, 7, 9)),\n      ......,\n    'key n' =&gt; ((5, M, 8), (J, K, L), (1, 3, 4))\n}\n</code></pre>\n<p>I wanted to keep them as a hash for easier lookup and to catch the duplicate keys</p>\n<pre><code>my %hash;\nmy @array = ();\nmy @inner_array = ();\n\nopen (my $FH, '&lt;', $input_file) or die &quot;Could not open : $!\\n&quot;;\n\nwhile (my $line = &lt;$FH&gt;) {\n    chomp $line;\n\n    ## Lines making up $key and @inner_array\n    ## e.g. $key = 'key 1' and\n    ## @inner_array = (A, B, C)\n    ## @inner_array = (1, 2, 3)\n\n    if (exists $hash{$key}) {         # We have seen this key before    \n        @array = $hash{$key};         # Get the existing array \n        push(@array, @inner_array);   # Append new inner list \n        $hash{$key} = @array;         # Replace the original list\n\n    } else {                  # Seeing the key for the first time\n        @array = ();                  # Create empty list\n        push (@array, @inner_list);   # Append new inner list \n        $hash{$key} = @array;         # Replace the original list\n    }\n}\n\nclose $FH;\n\nprint dumper %hash;\n</code></pre>\n<p>when executed on a sample file of 10 lines, I am getting the output like below:</p>\n<pre><code>$VAR1 = {\n       'key 1' =&gt; 2,\n       'key 2' =&gt; 2,\n       'key 3' =&gt; 2\n    };\n</code></pre>\n<p>Rather than seeing an array of arrays, I am getting scalar value 2 as the value of each hash element. Please suggest what am I doing wrong.</p>\n"}, {"tags": ["csv", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1564980789, "post_id": 57352269, "comment_id": 101192426, "body": "What exactly do you mean by &quot;table format&quot;?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1564998153, "post_id": 57352269, "comment_id": 101198894, "body": "Actual sample data that is representative of your actual data would help. Are there spaces in your column? How are columns separated? Hard to tell from just a bunch of dots."}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1565024660, "post_id": 57352269, "comment_id": 101212675, "body": "@Shawn Sorry about that! Was trying to keep it simple so I could take the idea and then apply it to my work on a larger scale. The columns are separated by spaces. printf is used with &quot;%-*s %*s %*s\\n&quot;,"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1565025238, "post_id": 57352269, "comment_id": 101212936, "body": "@sfr Can the fields contain spaces?"}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1565025980, "post_id": 57352269, "comment_id": 101213226, "body": "@melpomene The answer below correcting my choice of words. What I meant is &quot;fixed-width record format&quot;. Yes, they can contain spaces if there is supposed to be a blank field in one of the columns"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1565026113, "post_id": 57352269, "comment_id": 101213284, "body": "What do you mean by &quot;a blank field in one of the columns&quot;?"}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1565026230, "post_id": 57352269, "comment_id": 101213333, "body": "@melpomene For example, assume I have an entry for David along with his age, but I don&#39;t have his weight, I will leave a blank entry for his weight."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1565026270, "post_id": 57352269, "comment_id": 101213350, "body": "That&#39;s not what I was asking. Please show actual sample data that we can work with."}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1565026393, "post_id": 57352269, "comment_id": 101213392, "body": "@melpomene I&#39;m not able to disclose actual sample data from the scripts I&#39;m working with so I am trying my best to come up with solutions based off answers and comments. I understand it&#39;s quite vague and confusing without actual data. :/"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1565026445, "post_id": 57352269, "comment_id": 101213406, "body": "So create equivalent sample input. Change letters to other letters, numbers to other numbers, etc."}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1565026746, "post_id": 57352269, "comment_id": 101213518, "body": "@melpomene I just updated my example and that&#39;s essentially just how my data looks."}], "answers": [{"comments": [{"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1565025911, "post_id": 57355919, "comment_id": 101213201, "body": "Yes, thank you for the correction :) I&#39;m not able to use say which I&#39;m assuming might be due to my version of perl. I tried it with print but that entirely mixes up the output. i wonder if that is due to me using print or because using defined column widths."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 2, "last_activity_date": 1564998078, "creation_date": 1564998078, "answer_id": 57355919, "question_id": 57352269, "link": "https://stackoverflow.com/questions/57352269/converting-a-table-text-file-to-csv-in-perl/57355919#57355919", "title": "Converting a table text file to csv in Perl", "body": "<p>I assume you mean fixed-width record format.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie;\nuse Text::CSV_XS qw();\nopen my $in, '&lt;', 'so-57352269.txt';\nopen my $out, '&gt;:encoding(UTF-8)', 'table.csv';\nmy @column_widths = (6, 5, 6);\nmy $csv = Text::CSV_XS-&gt;new({binary =&gt; 1, auto_diag =&gt; 1});\nwhile (my $line = $in-&gt;getline) {\n    chomp $line;\n    my $pack_format = join '', map { \"a$_\" } @column_widths;\n    my @record = unpack $pack_format, $line;\n    $csv-&gt;say($out, \\@record);\n}\n</code></pre>\n"}], "owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565026740, "creation_date": 1564979909, "last_edit_date": 1565026740, "question_id": 57352269, "link": "https://stackoverflow.com/questions/57352269/converting-a-table-text-file-to-csv-in-perl", "title": "Converting a table text file to csv in Perl", "body": "<p>I have a file that contains a list of things in fixed-width record format such as... </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Name        Lastyear Weight      Thisyear Weight\nAlice       130                  135\nBob         170                  165\nChris       190                  210\nDaniel      195                  185 \nEric        150                  170\n</code></pre>\n\n<p>I want to convert this into a csv file. I know that I can make use of Text::CVS_XS to this but I'm just having a hard time wrapping my head around it. I've seen lots of exaxmples of text to cvs but none where the text is already in a table format. Does that mean, I will have to change it from table format and add commas in between? Or does Text::CVS do that for me?</p>\n\n<pre><code>open my $file1, '&lt;', $a or die $!;\n\nchomp $file1;\nmy $csv = Text::CSV_XS-&gt;new ({ binary =&gt; 1, auto_diag =&gt; 1 });\n\nwhile(&lt;$file1&gt;){\n#table to csv code \n}\n\n$csv-&gt;eol (\"\\r\\n\");\n    open $fh, \"&gt;:encoding(utf8)\", \"table.csv\" or die \"Couldn't open 'table.csv': $!\";\n\n    $csv-&gt;print ($fh, $_);\n    close $fh;\n    close $file1;\n\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1564969617, "post_id": 57351361, "comment_id": 101190676, "body": "are you having problems reading the files once you find them?  or not finding all the files?  show some example files and data and what output you are trying to get?"}, {"owner": {"reputation": 5, "user_id": 11281193, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UNJRYcPwTK8/AAAAAAAAAAI/AAAAAAAAA_0/pnDFNcyzLUI/photo.jpg?sz=128", "display_name": "Dream Member", "link": "https://stackoverflow.com/users/11281193/dream-member"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1564969879, "post_id": 57351361, "comment_id": 101190719, "body": "my problem is reading the contents of each individual file... I found the file and it has list it (only the name of the files not the content)."}, {"owner": {"reputation": 624, "user_id": 10023107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GLme.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10023107/chris"}, "edited": false, "score": 0, "creation_date": 1564987109, "post_id": 57351361, "comment_id": 101194031, "body": "actually you aren&#39;t doing anything with the files in this dir. please let us know what you want to do."}, {"owner": {"reputation": 5, "user_id": 11281193, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UNJRYcPwTK8/AAAAAAAAAAI/AAAAAAAAA_0/pnDFNcyzLUI/photo.jpg?sz=128", "display_name": "Dream Member", "link": "https://stackoverflow.com/users/11281193/dream-member"}, "edited": false, "score": 0, "creation_date": 1564988154, "post_id": 57351361, "comment_id": 101194448, "body": "the problem is that i want to read the contents of each individual files in a directory. So far the one i have done is listing out the file that is inside the directory."}, {"owner": {"reputation": 624, "user_id": 10023107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GLme.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10023107/chris"}, "edited": false, "score": 0, "creation_date": 1564997700, "post_id": 57351361, "comment_id": 101198685, "body": "@DreamMember first you should change the variable Name in your while-loop <code>my $DIR</code> into <code>my $file</code>, because it shows you each file, not the dir (additionally you already declared <code>my $DIR</code> some lines above). in your while-block, where you already print each file, you can just proceed with your logic for each file. just use a filehandle: <a href=\"https://perldoc.perl.org/FileHandle.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/FileHandle.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1565021672, "post_id": 57356096, "comment_id": 101211337, "body": "(need full path to open file as <code>readdir</code> returns only the entryname, or chdir)"}, {"owner": {"reputation": 5, "user_id": 11281193, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UNJRYcPwTK8/AAAAAAAAAAI/AAAAAAAAA_0/pnDFNcyzLUI/photo.jpg?sz=128", "display_name": "Dream Member", "link": "https://stackoverflow.com/users/11281193/dream-member"}, "edited": false, "score": 0, "creation_date": 1565055997, "post_id": 57356096, "comment_id": 101221615, "body": "the script u given to me doesnt have any problem whatsoever... but when i try to run the script.. it seems that the output doesnt appear .. is it because my files cant be read by line ?? since my file is a log extension and the content of the files are  top (showing the cpu information)"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1565095834, "post_id": 57356096, "comment_id": 101237329, "body": "There is no output. You asked how to <b>read</b> files, which this program does."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 1, "last_activity_date": 1565029179, "last_edit_date": 1565029179, "creation_date": 1564998614, "answer_id": 57356096, "question_id": 57351361, "link": "https://stackoverflow.com/questions/57351361/how-to-read-every-single-file-in-a-directory-using-foreach-perl/57356096#57356096", "title": "How to read every single file in a directory using foreach perl", "body": "<p>Assuming you have files that can be read line-by-line, as the directory name indicates log files:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie;\n\nmy $DIR = '/home/aimanhalim/LOG';\nchdir $DIR;\nopendir my $dh, $DIR;\nwhile (my $entry = readdir $dh) {\n    next if $entry =~ /^[.]/; # skip the '.' and '..' entries and hidden files\n    if (-f $entry) { # skip entries that are not files\n        open my $fh, '&lt;', $entry;\n        while (my $line = $fh-&gt;getline) {\n            # do something with the content\n        }\n    }\n}\n</code></pre>\n\n<p>If you want to read directories recursively, perhaps switch over to <a href=\"http://Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a>.</p>\n"}], "owner": {"reputation": 5, "user_id": 11281193, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UNJRYcPwTK8/AAAAAAAAAAI/AAAAAAAAA_0/pnDFNcyzLUI/photo.jpg?sz=128", "display_name": "Dream Member", "link": "https://stackoverflow.com/users/11281193/dream-member"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 57356096, "answer_count": 1, "score": -1, "last_activity_date": 1565029179, "creation_date": 1564969294, "question_id": 57351361, "link": "https://stackoverflow.com/questions/57351361/how-to-read-every-single-file-in-a-directory-using-foreach-perl", "title": "How to read every single file in a directory using foreach perl", "body": "<p>im trying to make a script on reading all of the files inside a directory but it seems i cant.... the only thing i can is to list the names of the file inside the directory.So is there a way for me to list it ?\n(Kinda new to perl and linux :U)</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\n#locate directories\n\nmy $DIR = \"/home/aimanhalim/LOG\";\nopendir(DIR, $DIR) or die $!;\n\n#open Directory and read all the file.\n\nwhile (my $DIR = readdir(DIR)) {print \"$DIR\\n\";}\n\n\nexit;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 435, "user_id": 3491475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1ab64737e1a40a96079c5cc185738d5?s=128&d=identicon&r=PG", "display_name": "Dougie", "link": "https://stackoverflow.com/users/3491475/dougie"}, "edited": false, "score": 0, "creation_date": 1564953627, "post_id": 57350267, "comment_id": 101188337, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/10161963/perl-regular-expression-to-match-an-ip-address\">Perl regular expression to match an IP address</a>"}, {"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1564953795, "post_id": 57350267, "comment_id": 101188358, "body": "OP can use a regex to solve the problem, but that wouldn&#39;t explain much about what&#39;s going wrong in this snippet, which is the real question, I would imagine."}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1564954013, "creation_date": 1564954013, "answer_id": 57350322, "question_id": 57350267, "link": "https://stackoverflow.com/questions/57350267/perl-verifying-user-input/57350322#57350322", "title": "Perl: Verifying user input", "body": "<p>Always start your Perl programs with</p>\n\n<pre><code>use strict;\nuse warnings;\n</code></pre>\n\n<p>The first argument to <a href=\"https://perldoc.pl/functions/split\" rel=\"nofollow noreferrer\"><code>split</code></a> is a regex. You can give it a string, but that will just interpret the contents of the string as a regex at runtime.</p>\n\n<p><code>.</code> is special in a regex, matching any character. You have to escape it:</p>\n\n<pre><code>my @parts = split /\\./, $ARGV[0];\n</code></pre>\n\n<p>Don't use variables called <code>$a</code> or <code>$b</code>; those are a bit special and used internally by <a href=\"https://perldoc.pl/functions/sort\" rel=\"nofollow noreferrer\"><code>sort</code></a>.</p>\n\n<p><code>!=</code> compares two numbers. You can't use it to see if an element is part of a list.</p>\n\n<p>You need to do something like</p>\n\n<pre><code>for my $n (@parts) {\n    if ($n &lt;= 255) {\n        print \"ok\\n\";\n    } else {\n        print \"not ok\\n\";\n    }\n}\n</code></pre>\n\n<p>If you have already validated that <code>$n</code> consists of digits only, it cannot be negative.</p>\n"}], "owner": {"reputation": 15, "user_id": 11881497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712a2257a1df0fb90dccea580af0e4fc?s=128&d=identicon&r=PG&f=1", "display_name": "Nevg", "link": "https://stackoverflow.com/users/11881497/nevg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 57350322, "answer_count": 1, "score": 1, "last_activity_date": 1564954013, "creation_date": 1564953412, "question_id": 57350267, "link": "https://stackoverflow.com/questions/57350267/perl-verifying-user-input", "title": "Perl: Verifying user input", "body": "<p>I'm trying to make a program where I need to verify if the user input is the first 2 segments of an IP, I already have the part to verify if the pattern is 000.000 but I'm having problems with verifying if the digits are under 256. Even the when I try to print the @abc array it is blank.</p>\n\n<pre><code>@abc = split(\".\", $ARGV[0]);\n\nforeach $a (@abc){\n    if $a != [0 .. 256] {\n        print \"not an ip class\"\n    }\n    else {\n        print \"it's an ip class\"\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "lsf"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1564953323, "post_id": 57350061, "comment_id": 101188283, "body": "Are you running your Perl code with <code>sh</code>? If so, why? On the other hand, that third line doesn&#39;t look like Perl. What is going on?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564953474, "post_id": 57350061, "comment_id": 101188311, "body": "Or do you mean to run <code>bsub</code> out of a Perl script, attempted with &quot;<i>So for automating...</i>&quot; ?"}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 4, "last_activity_date": 1564955327, "last_edit_date": 1564955327, "creation_date": 1564953612, "answer_id": 57350293, "question_id": 57350061, "link": "https://stackoverflow.com/questions/57350061/how-to-automate-the-lsf-waiting-based-on-job-name-in-perl/57350293#57350293", "title": "How to automate the LSF waiting based on job name in perl", "body": "<p>If you want to generate the <code>done(...)&amp;&amp;done(...)</code> string dynamically, you can use</p>\n\n<pre><code>my $count = 7;\nmy $done_all = join '&amp;&amp;', map \"done(t$_)\", 1 .. $count;\n</code></pre>\n\n<p>That is, for each number in the range 1 .. 7, produce a string <code>\"done(t$_)\"</code>, which gives a list <code>\"done(t1)\", \"done(t2)\", ... \"done(t7)\"</code>. The elements of this list are then <a href=\"https://perldoc.pl/functions/join\" rel=\"nofollow noreferrer\"><code>join</code>'d</a> together with a separator of <code>&amp;&amp;</code>, producing <code>\"done(t1)&amp;&amp;done(t2)&amp;&amp;...&amp;&amp;done(t7)\"</code>.</p>\n\n<p>To run an external command, you can use <a href=\"https://perldoc.pl/functions/system\" rel=\"nofollow noreferrer\"><code>system</code></a>. Passing a list to <code>system</code> avoids going through the shell, which avoids all kinds of nasty quoting issues:</p>\n\n<pre><code>system('bsub', '-E', 'xyz', '-n', '1', '-q', 'queueType', '-J', 't3', '-w', $done_all, 'sleep', '30');\n# or alternatively:\nsystem(qw(bsub -E xyz -n 1 -q queueType -J t3 -w), $done_all, qw(sleep 30));\n</code></pre>\n\n<p>Your code tries to pass Perl code to <code>bsub</code>, but that won't work. You have to generate the command string beforehand and pass the result to <code>bsub</code>.</p>\n"}], "owner": {"reputation": 49, "user_id": 9519125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc28b0e771629ada54ca1c90f756069?s=128&d=identicon&r=PG&f=1", "display_name": "Heyya", "link": "https://stackoverflow.com/users/9519125/heyya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 57350293, "answer_count": 1, "score": 2, "last_activity_date": 1564955327, "creation_date": 1564950964, "last_edit_date": 1564954430, "question_id": 57350061, "link": "https://stackoverflow.com/questions/57350061/how-to-automate-the-lsf-waiting-based-on-job-name-in-perl", "title": "How to automate the LSF waiting based on job name in perl", "body": "<p>I have a perl code where I am submitting few jobs at once in parallel via LSF bsub command and once all these jobs finish want to submit a final job. </p>\n\n<p>For example I have these three bsub commands where first two bsub commands submits jobs t1 and t2 and third command checks whether t1 and t2 are finished or not and wait on them with -w argument. </p>\n\n<pre><code>   system(\" bsub -E \"xyz\" -n 1 -q queueType -J t1 sleep 30\")\n    system(\"bsub -E \"xyz\" -n 1 -q queueType -J t2 sleep 30\")\n    system(\"bsub -E \"xyz\" -n 1 -q queueType -J t3 -w \"done(t1)&amp;&amp;done(t2)\" sleep 30\")\n</code></pre>\n\n<p>So for automating -w argument I have this </p>\n\n<pre><code>    my $count=2;\n    my $i; \n   system(\" bsub -E \"xyz\" -n 1 -q queueType -J t3 \\\"foreach my $i (0..$count) {print \" done(t_$i)&amp;&amp;\";}\\\" sleep 30 \")\n</code></pre>\n\n<p>I get this error: </p>\n\n<pre><code>sh: -c: line 0: syntax error near unexpected token `('\nsh: -c: line 0: `bsub -E \"/pkg/ice/sysadmin/bin/linux-pre-exec\" -n 1 -q short -J t3 -w \"foreach  (0..7) {print \\\"done(t)&amp;&amp;\\\";}\" sleep 30'\n</code></pre>\n\n<p>EDIT: Yes I am using system command to submit these jobs from perl </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 2, "creation_date": 1564944699, "post_id": 57349353, "comment_id": 101186471, "body": "The dot is a special character in regex for any character you have to escape it with backslash."}, {"owner": {"reputation": 1686, "user_id": 3551483, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/I4c4V.png?s=128&g=1", "display_name": "Fang", "link": "https://stackoverflow.com/users/3551483/fang"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 1, "creation_date": 1564944980, "post_id": 57349353, "comment_id": 101186527, "body": "@Jens is correct. There&#39;s a site at Perlmonks which shows you the proper Regex: <a href=\"https://www.perlmonks.org/?node_id=1148750\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=1148750</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1564945044, "post_id": 57349353, "comment_id": 101186544, "body": "I think you also need to anchor the regex to the beginning of the string and to the end of the string"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 11881497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712a2257a1df0fb90dccea580af0e4fc?s=128&d=identicon&r=PG&f=1", "display_name": "Nevg", "link": "https://stackoverflow.com/users/11881497/nevg"}, "edited": false, "score": 0, "creation_date": 1564948037, "post_id": 57349494, "comment_id": 101187212, "body": "Thank you! And yes, I meant user_input."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 15, "user_id": 11881497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712a2257a1df0fb90dccea580af0e4fc?s=128&d=identicon&r=PG&f=1", "display_name": "Nevg", "link": "https://stackoverflow.com/users/11881497/nevg"}, "edited": false, "score": 1, "creation_date": 1564948107, "post_id": 57349494, "comment_id": 101187228, "body": "@Nevg If this answer solved your problem, consider <a href=\"https://stackoverflow.com/help/someone-answers\">marking it as accepted</a>."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 2, "last_activity_date": 1564945818, "creation_date": 1564945818, "answer_id": 57349494, "question_id": 57349353, "link": "https://stackoverflow.com/questions/57349353/verifying-user-input-in-perl/57349494#57349494", "title": "Verifying user input in perl", "body": "<p><code>$user input</code> is a syntax error. Did you mean <code>$user_input</code>?</p>\n\n<p><code>.</code> is a special character in regexes, matching any character (except <code>\"\\n\"</code> (unless you use <code>/s</code>)). It needs to be escaped as <code>\\.</code> to match literally.</p>\n\n<p>Your regex is not anchored, so it will match any substring of the input.</p>\n\n<p>There's no need to put parens around <code>\\d</code>.</p>\n\n<p>The whole thing can be simplified a lot:</p>\n\n<pre><code>if ($user_input =~ /\\A\\d{1,3}\\.\\d{1,3}\\z/a) {\n    print \"it works\\n\";\n}\n</code></pre>\n\n<ul>\n<li><code>\\A</code> matches the beginning of the string.</li>\n<li><code>\\d</code> matches a digit; the <code>/a</code> flag ensures it only matches ASCII digits (<code>0-9</code>).</li>\n<li><code>{1,3}</code> means \"between 1 and 3 of the previous thing\".</li>\n<li><code>\\.</code> matches a literal dot.</li>\n<li><code>\\z</code> matches the end of the string.</li>\n</ul>\n\n<p>(If <code>$user_input</code> is the result of a <a href=\"https://perldoc.pl/functions/readline\" rel=\"nofollow noreferrer\"><code>readline</code></a> operation, don't forget to <a href=\"https://perldoc.pl/functions/chomp\" rel=\"nofollow noreferrer\"><code>chomp</code></a> it beforehand.)</p>\n"}], "owner": {"reputation": 15, "user_id": 11881497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712a2257a1df0fb90dccea580af0e4fc?s=128&d=identicon&r=PG&f=1", "display_name": "Nevg", "link": "https://stackoverflow.com/users/11881497/nevg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 57349494, "answer_count": 1, "score": 0, "last_activity_date": 1564945818, "creation_date": 1564944570, "question_id": 57349353, "link": "https://stackoverflow.com/questions/57349353/verifying-user-input-in-perl", "title": "Verifying user input in perl", "body": "<p>I'm trying to make a program and I need to verify if the user input should be the first 2 segments of an ip (something like 00.000 or 000.000 etc, where 0 could be any digit) but the program says that the input is correct even if it is 213.1532.</p>\n\n<pre><code>if ($user input =~ m/(\\d){3}.(\\d){3}|(\\d){2}.(\\d){2}|(\\d).(\\d)|(\\d){3}.(\\d){2}|(\\d){3}.(\\d)|(\\d){2}.(\\d){3}|(\\d).(\\d){3}|(\\d){2}.(\\d)|(\\d).(\\d){2}/) {\n    print \"it works\"\n}\n</code></pre>\n"}, {"tags": ["arrays", "perl", "sorting"], "comments": [{"owner": {"reputation": 41, "user_id": 6201481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a93576e639500adf3bb7414804ce42?s=128&d=identicon&r=PG&f=1", "display_name": "user6201481", "link": "https://stackoverflow.com/users/6201481/user6201481"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564931267, "post_id": 57346910, "comment_id": 101183066, "body": "Thank Ikegami for the sharing"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1565004025, "post_id": 57346910, "comment_id": 101201908, "body": "You can accept the answers which is sorted out your issues."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 6201481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a93576e639500adf3bb7414804ce42?s=128&d=identicon&r=PG&f=1", "display_name": "user6201481", "link": "https://stackoverflow.com/users/6201481/user6201481"}, "edited": false, "score": 1, "creation_date": 1564931235, "post_id": 57347270, "comment_id": 101183055, "body": "Hi Shawn, Tried the 1st option and it&#39;s work. Thanks for the sharing :)"}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 4, "last_activity_date": 1564928662, "last_edit_date": 1564928662, "creation_date": 1564927889, "answer_id": 57347270, "question_id": 57346910, "link": "https://stackoverflow.com/questions/57346910/why-perl-sort-function-cannot-arrange-arrays-element-in-my-expected-incremental/57347270#57347270", "title": "Why Perl Sort function cannot arrange array&#39;s element in my expected incremental manner?", "body": "<p>Sounds like a good case for a <a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"nofollow noreferrer\">Schwartzian transform</a>.</p>\n\n<p>If the prefix is always going to be the same and it's just the numbers after the underscore that differ:</p>\n\n<pre><code>my @array = (\"BE_10\", \"BE_110\", \"BE_111\", \"BE_23\", \"BE_34\", \"BE_220\", \"BE_335\");\n\nmy @array_sort = map { $_-&gt;[0] }\n                 sort { $a-&gt;[1] &lt;=&gt; $b-&gt;[1] }\n                 map { [ $_, (split /_/, $_)[1] ] } @array;\n\nprint \"array_sort = @array_sort\\n\";\n</code></pre>\n\n<p>And if it might be different:</p>\n\n<pre><code>my @array = (\"BE_10\", \"BE_110\", \"BE_111\", \"BE_23\", \"CE_34\", \"BE_220\", \"CE_335\");\n\nmy @array_sort = map { $_-&gt;[0] }\n                 sort { $a-&gt;[1] cmp $b-&gt;[1] || $a-&gt;[2] &lt;=&gt; $b-&gt;[2] }\n                 map { [ $_, split(/_/, $_) ] } @array;\n\nprint \"array_sort = @array_sort\\n\";\n</code></pre>\n\n<hr>\n\n<p>Basic idea is that you decompose the original array into a list of array refs holding the original element and the transformed bit(s) you want to sort on, do the sort, and then extract the original elements in the new sorted order.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 7, "last_activity_date": 1564932850, "creation_date": 1564932850, "answer_id": 57347891, "question_id": 57346910, "link": "https://stackoverflow.com/questions/57346910/why-perl-sort-function-cannot-arrange-arrays-element-in-my-expected-incremental/57347891#57347891", "title": "Why Perl Sort function cannot arrange array&#39;s element in my expected incremental manner?", "body": "<p>Always use <code>use strict; use warnings;</code>. It would have found your problem, which is that all your strings have the numerical value of zero. Since all strings are numerically identical, the sort function you provided always returns zero. Because of this, and because Perl used a stable sort, the order of the strings remained unchanged.</p>\n\n<p>You wish to perform a \"natural sort\", and there are modules such as <a href=\"http://search.cpan.org/perldoc?Sort::Key::Natural\" rel=\"noreferrer\">Sort::Key::Natural</a> that will do that.</p>\n\n<pre><code>use Sort::Key::Natural qw( natsort );\n\nmy @sorted = natsort @unsorted;\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 6201481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a93576e639500adf3bb7414804ce42?s=128&d=identicon&r=PG&f=1", "display_name": "user6201481", "link": "https://stackoverflow.com/users/6201481/user6201481"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1565008148, "creation_date": 1564924822, "last_edit_date": 1565008148, "question_id": 57346910, "link": "https://stackoverflow.com/questions/57346910/why-perl-sort-function-cannot-arrange-arrays-element-in-my-expected-incremental", "title": "Why Perl Sort function cannot arrange array&#39;s element in my expected incremental manner?", "body": "<p>Perl Sort function unable to arrange array elements in my expected incremental manner</p>\n\n<p><code>@array_sort = sort { $a &lt;=&gt; $b } @array</code></p>\n\n<pre><code>@array = (\"BE_10\", \"BE_110\", \"BE_111\", \"BE_23\", \"BE_34\", \"BE_220\", \"BE_335\");\n@array_sort = sort { $a &lt;=&gt; $b } @array;\nprint \"array_sort = @array_sort\\n\";\n</code></pre>\n\n<blockquote>\n  <p>Expected result: \n  array_sort = <code>BE_10 BE_23 BE_34 BE_110 BE_111 BE_220 BE_335</code></p>\n  \n  <p>Actual result:\n  array_sort = <code>BE_10 BE_110 BE_111 BE_23 BE_34 BE_220 BE_335</code></p>\n</blockquote>\n"}, {"tags": ["python", "bash", "perl"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1564914999, "post_id": 57345815, "comment_id": 101179498, "body": "You can use <code>join</code> for this: <a href=\"https://linux.die.net/man/1/join\" rel=\"nofollow noreferrer\">linux.die.net/man/1/join</a>"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11567526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4fa6b12d8d7f46eddfe8276d7c30e2?s=128&d=identicon&r=PG&f=1", "display_name": "Hause Mica", "link": "https://stackoverflow.com/users/11567526/hause-mica"}, "edited": false, "score": 0, "creation_date": 1564915756, "post_id": 57345874, "comment_id": 101179657, "body": "output from first is, :onek :twok :three :one"}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "reply_to_user": {"reputation": 31, "user_id": 11567526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4fa6b12d8d7f46eddfe8276d7c30e2?s=128&d=identicon&r=PG&f=1", "display_name": "Hause Mica", "link": "https://stackoverflow.com/users/11567526/hause-mica"}, "edited": false, "score": 1, "creation_date": 1564916023, "post_id": 57345874, "comment_id": 101179728, "body": "I suggest first: <code>dos2unix first.txt</code>"}], "tags": [], "owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "is_accepted": false, "score": 2, "last_activity_date": 1564915170, "creation_date": 1564915170, "answer_id": 57345874, "question_id": 57345815, "link": "https://stackoverflow.com/questions/57345815/how-do-i-combine-2-files/57345874#57345874", "title": "how do I combine 2 files", "body": "<p>With two while loops:</p>\n\n<pre><code>while read -r first; do while read -r second; do echo \"$first:$second\"; done &lt;second.txt; done &lt;first.txt\n</code></pre>\n\n<p>Or with indent:</p>\n\n<pre><code>while read -r first; do \n  while read -r second; do\n    echo \"$first:$second\"\n  done &lt;second.txt\ndone &lt;first.txt\n</code></pre>\n\n<p>Output:</p>\n\n<pre>\nBlack:one\nBlack:two\nBlack:three\nBlack:four\nBlue:one\nBlue:two\nBlue:three\nBlue:four\nBrown:one\nBrown:two\nBrown:three\nBrown:four\nOrange:one\nOrange:two\nOrange:three\nOrange:four\nRed:one\nRed:two\nRed:three\nRed:four\n</pre>\n\n<hr>\n\n<p>See: <code>man bash</code></p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 11567526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4fa6b12d8d7f46eddfe8276d7c30e2?s=128&d=identicon&r=PG&f=1", "display_name": "Hause Mica", "link": "https://stackoverflow.com/users/11567526/hause-mica"}, "edited": false, "score": 0, "creation_date": 1564915702, "post_id": 57345913, "comment_id": 101179642, "body": "hi Jainil Patel, output is Black :one  Black :two .... etc..."}, {"owner": {"reputation": 1013, "user_id": 11597215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Yxrbc74AuN8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reF3AJT4Z8LqAUdvD4qzRjp99CMCw/mo/photo.jpg?sz=128", "display_name": "Jainil Patel", "link": "https://stackoverflow.com/users/11597215/jainil-patel"}, "reply_to_user": {"reputation": 31, "user_id": 11567526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4fa6b12d8d7f46eddfe8276d7c30e2?s=128&d=identicon&r=PG&f=1", "display_name": "Hause Mica", "link": "https://stackoverflow.com/users/11567526/hause-mica"}, "edited": false, "score": 0, "creation_date": 1564915946, "post_id": 57345913, "comment_id": 101179701, "body": "is it now working fine?"}, {"owner": {"reputation": 31, "user_id": 11567526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4fa6b12d8d7f46eddfe8276d7c30e2?s=128&d=identicon&r=PG&f=1", "display_name": "Hause Mica", "link": "https://stackoverflow.com/users/11567526/hause-mica"}, "edited": false, "score": 0, "creation_date": 1564915968, "post_id": 57345913, "comment_id": 101179707, "body": "that is much better, it would fit, can you tell me that it will be saved to a file?"}, {"owner": {"reputation": 1013, "user_id": 11597215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Yxrbc74AuN8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reF3AJT4Z8LqAUdvD4qzRjp99CMCw/mo/photo.jpg?sz=128", "display_name": "Jainil Patel", "link": "https://stackoverflow.com/users/11597215/jainil-patel"}, "reply_to_user": {"reputation": 31, "user_id": 11567526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4fa6b12d8d7f46eddfe8276d7c30e2?s=128&d=identicon&r=PG&f=1", "display_name": "Hause Mica", "link": "https://stackoverflow.com/users/11567526/hause-mica"}, "edited": false, "score": 0, "creation_date": 1564915994, "post_id": 57345913, "comment_id": 101179716, "body": "yeah sure......."}, {"owner": {"reputation": 31, "user_id": 11567526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4fa6b12d8d7f46eddfe8276d7c30e2?s=128&d=identicon&r=PG&f=1", "display_name": "Hause Mica", "link": "https://stackoverflow.com/users/11567526/hause-mica"}, "edited": false, "score": 0, "creation_date": 1564916265, "post_id": 57345913, "comment_id": 101179800, "body": "nice, working perfekt, big thx Jainil Patel"}], "tags": [], "owner": {"reputation": 1013, "user_id": 11597215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Yxrbc74AuN8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reF3AJT4Z8LqAUdvD4qzRjp99CMCw/mo/photo.jpg?sz=128", "display_name": "Jainil Patel", "link": "https://stackoverflow.com/users/11597215/jainil-patel"}, "is_accepted": true, "score": 0, "last_activity_date": 1564916176, "last_edit_date": 1564916176, "creation_date": 1564915582, "answer_id": 57345913, "question_id": 57345815, "link": "https://stackoverflow.com/questions/57345815/how-do-i-combine-2-files/57345913#57345913", "title": "how do I combine 2 files", "body": "<pre><code>f=open(\"first.txt\")\ns=open(\"second.txt\")\n\nfor i in f:\n    for j in s:\n        print(i+\":\"+j)\n    s.seek(0)\n</code></pre>\n\n<p>in python..</p>\n\n<p>try now:</p>\n\n<pre><code>f=open(\"first.txt\")\ns=open(\"second.txt\")\n\nfor i in f:\n    for j in s:\n        print(i.replace(\"\\n\",\"\")+\":\"+j.replace(\"\\n\",\"\"))\n    s.seek(0)\n</code></pre>\n\n<p>for saving in text format:</p>\n\n<pre><code>f=open(\"first.txt\")\ns=open(\"second.txt\")\nk=open(\"third.txt\",'w')\n\nfor i in f:\n    for j in s:\n        k.write(i.replace(\"\\n\",\"\")+\":\"+j.replace(\"\\n\",\"\"))\n        k.write(\"\\n\")\n    s.seek(0)\n\nk.close()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 185, "user_id": 4508807, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QbUQXCAOsXU/AAAAAAAAAAI/AAAAAAAAADk/A-Akc0EdtB4/photo.jpg?sz=128", "display_name": "Bill-G", "link": "https://stackoverflow.com/users/4508807/bill-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1564915756, "creation_date": 1564915756, "answer_id": 57345934, "question_id": 57345815, "link": "https://stackoverflow.com/questions/57345815/how-do-i-combine-2-files/57345934#57345934", "title": "how do I combine 2 files", "body": "<pre><code>for first in $(cat first.txt)\ndo \n    for two in $(cat two.txt)\n    do \n        echo \"$first:$two\"\n    done\ndone\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Black:one\nBlack:two\nBlack:three\nBlack:four\nBlue:one\nBlue:two\nBlue:three\nBlue:four\nBrown:one\nBrown:two\nBrown:three\nBrown:four\nOrange:one\nOrange:two\nOrange:three\nOrange:four\nRed:one\nRed:two\nRed:three\nRed:four\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": false, "score": 2, "last_activity_date": 1564918388, "last_edit_date": 1564918388, "creation_date": 1564917772, "answer_id": 57346130, "question_id": 57345815, "link": "https://stackoverflow.com/questions/57345815/how-do-i-combine-2-files/57346130#57346130", "title": "how do I combine 2 files", "body": "<p>Simplest is with <strong>GNU Parallel</strong> (which is a Perl script):</p>\n\n<pre><code>parallel echo {1}:{2} :::: first.txt :::: two.txt\n</code></pre>\n\n<p>If you want the output kept in order, use:</p>\n\n<pre><code>parallel -k ...\n</code></pre>\n\n<p>If you want the output in <code>result.txt</code>:</p>\n\n<pre><code>parallel ... &gt; result.txt\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11567526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4fa6b12d8d7f46eddfe8276d7c30e2?s=128&d=identicon&r=PG&f=1", "display_name": "Hause Mica", "link": "https://stackoverflow.com/users/11567526/hause-mica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "closed_date": 1564994004, "accepted_answer_id": 57345913, "answer_count": 4, "score": 0, "last_activity_date": 1564918388, "creation_date": 1564914764, "question_id": 57345815, "link": "https://stackoverflow.com/questions/57345815/how-do-i-combine-2-files", "closed_reason": "Needs more focus", "title": "how do I combine 2 files", "body": "<p>Unfortunately, I found nothing useful or a clue how I should solve it.</p>\n\n<p>I want to save all combinations between both files in one file</p>\n\n<p>first.txt</p>\n\n<pre><code>Black\nBlue\nBrown\nOrange\nRed\n</code></pre>\n\n<p>two.txt</p>\n\n<pre><code>one\ntwo\nthree\nfour\n</code></pre>\n\n<p>I want in the output file this:</p>\n\n<pre><code> Black:one\n Black:two\n Black:three\n Black:four\n Blue:one\n Blue:two\n Blue:three\n Blue:four\n Brown:one\n Brown:two\n Brown:three\n Brown:four\n Orange:one\n Orange:two\n Orange:three\n Orange\n Red:one\n Red:two\n Red:three\n Red:four\n</code></pre>\n\n<p>Unfortunately, I found nothing useful or a clue how I should solve it.</p>\n\n<p>I hope you can help me, it should run under debian</p>\n\n<p>Regards</p>\n"}, {"tags": ["arrays", "perl", "file-handling"], "answers": [{"comments": [{"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1564900062, "post_id": 57344121, "comment_id": 101176697, "body": "Thank you! The actual file doesn&#39;t contain the headers (name, age, gpa). Is there anyway to identify the column by its position? Because if I were to add in new names and info, the top of the list will vary and I don&#39;t want to have to go in to manually change it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 1, "creation_date": 1564908810, "post_id": 57344121, "comment_id": 101178348, "body": "I&#39;m not sure what you mean. The code I posted is identifying the columns by position (as opposed to by name, which you just said isn&#39;t available anyway)."}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1564949064, "post_id": 57344121, "comment_id": 101187439, "body": "I got a bit confused and now I see that you do a printf to actually write out the column name. The code works great, as expected!! :)"}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1564951335, "post_id": 57344121, "comment_id": 101187919, "body": "Question about this. I&#39;m having a bit of trouble understand why max is used here with map length? Is that just telling it to attribute the column name to the top of the column  in the output?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 1, "creation_date": 1564967400, "post_id": 57344121, "comment_id": 101190329, "body": "We need to know how large to make the columns. <code>max map length, &quot;Name&quot;, keys %students</code> gets the keys (the names), finds the length of each one and of the string <code>Name</code> by passing them to <code>map length,</code>, then passes these lengths to <code>max</code> to find the largest one."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1564897262, "creation_date": 1564897262, "answer_id": 57344121, "question_id": 57343869, "link": "https://stackoverflow.com/questions/57343869/file-containing-columns-from-different-files-perl/57344121#57344121", "title": "File containing columns from different files Perl", "body": "<pre><code>use List::Util qw( max );\n\nmy %students;\n\n{\n    open(my $fh, '&lt;', $qfn1)\n       or die(\"Can't open \\\"$qfn1\\\": $!\\n\");\n    while (&lt;$fh&gt;) {\n        my ($name, $age) = split;\n        $students{$name}{age} = $age;\n    }\n}\n\n{\n    open(my $fh, '&lt;', $qfn2)\n       or die(\"Can't open \\\"$qfn2\\\": $!\\n\");\n    while (&lt;$fh&gt;) {\n        my ($name, $gpa) = split;\n        $students{$name}{gpa} = $gpa;\n    }\n}\n\nmy $max_name_len = max map length, \"Name\", keys %students;\nmy $max_age_len  = max map length, \"Age\", grep defined, map $_-&gt;{age}, values %students;\nmy $max_gpa_len  = max map length, \"GPA\", grep defined, map $_-&gt;{gpa}, values %students;\n\nprintf(\"%-*s %-*s %-*s\\n\",\n    $max_name_len, \"Name\",\n    $max_age_len,  \"Age\",\n    $max_gpa_len,  \"GPA\",\n);\n\nfor my $name (sort keys %students) {\n    my $student = $students{$name};\n    my $age = $student-&gt;{age};\n    my $gpa = $student-&gt;{gpa};\n    printf(\"%-*s %*s %*s\\n\",\n        $max_name_len, $name,\n        $max_age_len,  $age // \"\",\n        $max_gpa_len,  $gpa // \"\",\n    );\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1564899533, "post_id": 57344260, "comment_id": 101176618, "body": "I use csh and I don&#39;t think that join is recognized (as far as I&#39;m aware)."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1564902358, "post_id": 57344260, "comment_id": 101177155, "body": "@sfr It&#39;s a posix utility (the <code>--header</code> option is a gnu extension though... But I see you said in a different comment that the header lines aren&#39;t in your real data so it&#39;s not even needed. Standard <code>join</code> will work fine.)"}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 1, "last_activity_date": 1564899065, "creation_date": 1564899065, "answer_id": 57344260, "question_id": 57343869, "link": "https://stackoverflow.com/questions/57343869/file-containing-columns-from-different-files-perl/57344260#57344260", "title": "File containing columns from different files Perl", "body": "<p>Much as I like perl... non-perl shell one-liner:</p>\n\n<pre><code>$ join --header -t $'\\t' file1.txt file2.txt\nName    Age     GPA\nBob     22      3.0\nCarl    19      3.5\nDaniel  29\nFrank   31      2.6\nZach    22      2.9\n</code></pre>\n\n<p>(Does require bash, zsh, or another shell that understands <code>$'\\t'</code> literals, as well as GNU join. Also assumes the files are sorted like your example.)</p>\n"}], "owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 57344121, "answer_count": 2, "score": 0, "last_activity_date": 1564899065, "creation_date": 1564893869, "last_edit_date": 1564897564, "question_id": 57343869, "link": "https://stackoverflow.com/questions/57343869/file-containing-columns-from-different-files-perl", "title": "File containing columns from different files Perl", "body": "<p>I want to combine multiple columns from 2 files. </p>\n\n<p>First File ex:</p>\n\n<pre><code>Name   Age\nBob    22\nCarl   19\nDaniel 29\nFrank  31\nZach   22\n</code></pre>\n\n<p>Second File ex: (THERE IS NO GPA VALUE FOR DANIEL SO WE LEAVE IT EMPTY)</p>\n\n<pre><code>Name   GPA\nBob    3.0\nCarl   3.5\nDaniel\nFrank  2.6\nZach   2.9\n</code></pre>\n\n<p>I want to ouput something that looks like</p>\n\n<pre><code>Name   Age    GPA\nBob    22     3.0\nCarl   19     3.5\nDaniel 29\nFrank  31     2.6\nZach   22     2.9\n</code></pre>\n\n<p>Since the names are the same, I can use the first column of either file. </p>\n\n<p>Here is the code I have so far, but it's not outputting anything.</p>\n\n<pre><code>unless (open COL1, '&lt;'. $file1) {die \"Couldn't open '$file1'\\n\";}\nunless (open COL2, '&lt;'. $file2) {die \"Couldn't open '$file2'\\n\";}\n\nmy %feature;\nmy @files = (scalar &lt;COL1&gt;, scalar &lt;COL2&gt;);\n\nfor my $file (@files) {\n    open my $infh, '&lt;', $file or die $!;\n    while (&lt;$infh&gt;) {\n        chomp;\n        my ($feature, $value) = split /\\s+/, $_;\n        push @{$feature{$feature}}, $value;\n    }\n}\nclose COL1;\nclose COL2;\nforeach my $k (keys %feature) {\n    print \"$k @{$feature{$k}}\\n\";\n}\n\n</code></pre>\n\n<p>How can I fix this so that it takes the first and second column from the first file and appends the second column from the second file onto it? (I want it in the order of Name, Age, GPA).</p>\n"}, {"tags": ["csv", "perl", "export-to-csv"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1564881796, "post_id": 57343091, "comment_id": 101174433, "body": "<code>my @a = [ ];</code> should be <code>my @a = ( );</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1564882503, "post_id": 57343091, "comment_id": 101174487, "body": "<code>[ ]</code> creates an array and a reference to it, and returns the reference (a scalar). You are assigning a single scalar to your array."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1564882615, "post_id": 57343091, "comment_id": 101174501, "body": "Tip: You should always use <code>-&gt;binary(1)</code>, and <code>while (&lt;$storesFile&gt;) {     if ($storeCsv-&gt;parse($_)) { ... }}}         my @storeInfo = $storeCsv-&gt;fields();</code> should be <code>while ( my $storeInfo = $storeCsv-&gt;getline($storesFile) ) { ... }</code>"}, {"owner": {"reputation": 201, "user_id": 10090133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omfbo.png?s=128&g=1", "display_name": "Marisa", "link": "https://stackoverflow.com/users/10090133/marisa"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564953267, "post_id": 57343091, "comment_id": 101188273, "body": "It was my arrays. That was tripping me up. I&#39;ve got it working. Thanks!"}], "owner": {"reputation": 201, "user_id": 10090133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omfbo.png?s=128&g=1", "display_name": "Marisa", "link": "https://stackoverflow.com/users/10090133/marisa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1564880505, "creation_date": 1564880505, "question_id": 57343091, "link": "https://stackoverflow.com/questions/57343091/perl-writing-strings-scalar-values-to-csv-with-textcsv", "title": "Perl - Writing Strings/Scalar Values to CSV with Text::CSV", "body": "<p>I am trying to write connection success/failure to a CSV file pulled from multiple databases so I can verify my eval works and that a failed connection doesn't make the script stop. There's a CSV file that has the database hostname and schema to use, which I loop through. I can read the file in without any trouble but I'm having some trouble writing specific values to the file as a sort of 'formatting' to display the data and to test the DBI connection.</p>\n\n<p>Initially, I tried just using multiple print statements but that didn't work. I tried converting the strings and scalars into an array ref like Perl reported. When I created the arrays and put in an array ref, I didn't have any errors but I only got the reference. But I need the text printed out.</p>\n\n<p>The code I'm using is below and there's a few commented lines of what I was trying before, which didn't work. The eval is there for writing if a connection to a database fails and which location it was.</p>\n\n<p>I know I'm doing something incorrectly, otherwise it would be working. However, I don't know exactly where I'm going wrong.</p>\n\n<pre><code># Instantiate Report Data CSV\nmy $reportCsv = Text::CSV-&gt;new();\n$reportCsv-&gt;eol (\"\\n\");\n$reportCsv-&gt;sep_char (\",\");\n$reportCsv-&gt;quote_char (\"\\\"\");\n$reportCsv-&gt;always_quote (1);\n$reportCsv-&gt;escape_char (\"\\\\\");\n$reportCsv-&gt;strict (1);\n\n# Open stores.csv for processing\nopen my $storesFile, \"&lt;:encoding(utf8)\", \"stores.csv\" or $logger-&gt;logdie(\"Failed to open stores.csv.\");\nopen my $reportOutput, \"&gt;:encoding(utf8)\", \"report.csv\" or $logger-&gt;logdie(\"Failed to generate CSV.\");\n\n# Read the file and dump to another CSV\nwhile (&lt;$storesFile&gt;) {\n    if ($storeCsv-&gt;parse($_)) {\n        my @storeInfo = $storeCsv-&gt;fields();\n        my @successArray = [$storeInfo[0], \"\\n\", \"---------------\\n\", \"Connected to $storeInfo[2] at $storeInfo[1].\\n\\n\"];\n        my @failureArray = [$storeInfo[0], \"\\n\", \"---------------\\n\", \"Failed to connect to store database.\\n\\n\"];\n        #print \"$storeInfo[0], $storeInfo[1], $storeInfo[2]\\n\";\n        eval {\n            my $storeConnection = DBI-&gt;connect(\"DBI:mysql:database=$storeInfo[2];host=$storeInfo[1];port=3306\", \"username\", \"password\", { RaiseError =&gt; 1, PrintError =&gt; 1 }) or $logger-&gt;error(\"Failed to connect to database.\");\n        };\n        if ($@) {\n            $reportCsv-&gt;print($reportOutput, \\@failureArray);\n            #$reportCsv-&gt;print($reportOutput, \"\\n\");\n            #$reportCsv-&gt;print($reportOutput, \"---------------\\n\");\n            #$reportCsv-&gt;print($reportOutput, \"Failed to connect to store database.\\n\\n\");\n        }\n        $reportCsv-&gt;print($reportOutput, \\@successArray);\n        #$reportCsv-&gt;print($reportOutput, \"\\n\");\n        #$reportCsv-&gt;print($reportOutput, \"---------------\\n\");\n        #$reportCsv-&gt;print($reportOutput, \"Connected to $storeInfo[2] at $storeInfo[1].\\n\\n\");\n    } else {\n        my $inputError = $storeCsv-&gt;error_input;\n        print \"Failed to parse line: $inputError\" or $logger-&gt;error($inputError);\n    }\n}\n</code></pre>\n"}, {"tags": ["arrays", "perl", "file-handling"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564881208, "post_id": 57342579, "comment_id": 101174369, "body": "Also see <a href=\"https://stackoverflow.com/a/56710382/4653379\">this post</a> (process files by-lines-in-parallel)"}], "answers": [{"comments": [{"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1564874667, "post_id": 57342628, "comment_id": 101173680, "body": "There&#39;s a small issue with this. It prints everything together. Not in the same column format as in the original file. I tried without the chomp and that prints it as a column but the alignment is strange. How do I get it to print as two columns."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1564873428, "last_edit_date": 1564873428, "creation_date": 1564873091, "answer_id": 57342628, "question_id": 57342579, "link": "https://stackoverflow.com/questions/57342579/perl-nested-foreach-loop-on-an-array-of-filehandles/57342628#57342628", "title": "Perl nested foreach loop on an array of filehandles", "body": "<p>You assigned a single element to the array <code>@line</code>, an array reference to the contents of the two files.</p>\n\n<pre><code>my @line = [&lt;COL1&gt;, &lt;COL2&gt;];\n</code></pre>\n\n<p>You probably wanted</p>\n\n<pre><code>my @line = (scalar &lt;COL1&gt;, scalar &lt;COL2&gt;);\n</code></pre>\n\n<p>i.e. assign one line from the first handle, and one line from the second handle.</p>\n\n<p>The full program would look like</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nopen my $in1, '&lt;', shift or die $!;\nopen my $in2, '&lt;', shift or die $!;\n\nuntil (eof $in1 || eof $in2) {\n    my @lines = (scalar &lt;$in1&gt;, scalar &lt;$in2&gt;);\n    chomp @lines;\n    my @columns;\n    for my $line (@lines) {\n        push @columns, (split /\\t/, $line)[1];\n    }\n    say join \"\\t\", @columns;\n}\n</code></pre>\n\n<p>The body of the loop can be shortened by using <a href=\"http://p3rl.org/map\" rel=\"nofollow noreferrer\">map</a> instead of a for loop:</p>\n\n<pre><code>chomp( my @lines = (scalar &lt;$in1&gt;, scalar &lt;$in2&gt;) );\nsay join \"\\t\", map +(split /\\t/, $_)[1], @lines;\n</code></pre>\n"}], "owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564873428, "creation_date": 1564872324, "question_id": 57342579, "link": "https://stackoverflow.com/questions/57342579/perl-nested-foreach-loop-on-an-array-of-filehandles", "title": "Perl nested foreach loop on an array of filehandles", "body": "<p>I want to print out the second column of two files. Eventually I'm going to print it into another file but right now I just want to output it to the terminal. I tried doing this by making an array of the two files. Here is my code, but it returns nothing. </p>\n\n<pre><code>unless (open COL1, '&lt;'. $file1) {die \"Couldn't open '$file1'\\n\";}\nunless (open COL2, '&lt;'. $file2) {die \"Couldn't open '$file2'\\n\";}\nwhile (!eof(COL1) and !eof(COL2)) {\n    my @line = [&lt;COL1&gt;, &lt;COL2&gt;];\n    #my $line2 = &lt;COL2&gt;;\n    foreach my $line (@line) {\n            foreach my $row ($line){\n    my @column2 = split( /\\t/, $row);\n    print $column2[1];\n}\n  }\n}\n  close COL1;\n    close COL2;\n\n</code></pre>\n\n<p>If I do the inner for loop for only a single file it works fine. Here is my code for a single file:</p>\n\n<pre><code>unless (open COL1, $file1) {die \"\\nUnable to open '$spare_f2;\\n\";}\nforeach my $row (&lt;COL1&gt;) {\n    my @column2 = split( /\\t/, $row);\n    print $column2[1];\n}\nclose COL1;\n\n</code></pre>\n\n<p>A dirty fix would be to just copy paste the same code and do it for the second file, but I would like to have it working with an array so a single foreach loop can handle them both.</p>\n"}, {"tags": ["arrays", "list", "scalar", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1564811670, "post_id": 57335742, "comment_id": 101160919, "body": "Re &quot;<i>I expected scalar to return the list in a scalar context, it&#39;s length.</i>&quot;, A list in scalar context evaluates to its last item (which is also evaluated in scalar context). In other words, <code>a,b,c</code> in scalar context is comparable to <code>do { a; b; c; }</code>."}, {"owner": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564815533, "post_id": 57335742, "comment_id": 101161500, "body": "@ikegami, I made this example in order to find when the brackets form a list and when they are used for sorting out precedence. However, from your comment, I see something. <code>my $foo = 2 * (3 + 1);</code>. Do the brackets make a list of a single element <code>(4)</code> and return its last element in a scalar context - <code>4</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1564815647, "post_id": 57335742, "comment_id": 101161523, "body": "Parens don&#39;t create lists; they merely change precedence. There is no list operator, and there&#39;s nothing evaluated in list context (except may the assignment depending on surrounding code)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1564815916, "post_id": 57335742, "comment_id": 101161579, "body": "I reverted the changes you made to the question because you removed the list from your question about the length of lists."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1564816160, "post_id": 57335742, "comment_id": 101161628, "body": "I think you might be conflating two different definitions of &quot;list&quot;. An instance of the comma operator (e.g. <code>&quot;a&quot;, &quot;b&quot;</code>, but not <code>qw( a b )</code>) could be called a list, and one says that an operator evaluates to a list and a sub returns a list as a shorthand for &quot;0 or more scalars&quot; (e.g. <code>&quot;a&quot;, &quot;b&quot;</code> evaluates to a list in your second snippet, but not the first.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564816295, "post_id": 57335742, "comment_id": 101161652, "body": "Re &quot;<i>return the list in a scalar context,</i>&quot;, This is impossible. A list (i.e. 0 or more scalars) can&#39;t be returned in scalar context; only exactly one scalar can be returned in scalar context."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564812040, "post_id": 57335765, "comment_id": 101160978, "body": "@ikegami &quot;<i>The reason the length is returned...</i>&quot;  --- sure, but I find it that the explanation of scalar assignment doesn&#39;t do justice to this context-flip (of <code>=()=</code>), whereby the list on RHS does get its &quot;list treatment&quot; while we still assign the scalar (to LHS of course).  Don&#39;t know how to express that clearly."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564812258, "post_id": 57335765, "comment_id": 101161017, "body": "@ikegami  Yes, that&#39;s better, simple and correct.  Thank you for the edit :)"}, {"owner": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "edited": false, "score": 0, "creation_date": 1564813255, "post_id": 57335765, "comment_id": 101161150, "body": "Thanks for mentioning <code>-w</code>. I did not notice it raises a warning."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "edited": false, "score": 1, "creation_date": 1564815125, "post_id": 57335765, "comment_id": 101161427, "body": "@MiroslavPopov Yes, extremely useful that <code>-w</code> is. I&#39;d say that we want that in one-liners just as bad (as in production programs), since they&#39;re mostly used precisely to try things out. For me it&#39;s in the fingers -- I don&#39;t think, my one-liners <i>always</i> have that <code>w</code> flag."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1564820300, "last_edit_date": 1564820300, "creation_date": 1564810883, "answer_id": 57335765, "question_id": 57335742, "link": "https://stackoverflow.com/questions/57335742/perl-length-of-an-anonymous-list/57335765#57335765", "title": "Perl: Length of an anonymous list", "body": "<p>One way</p>\n\n<pre><code>perl -wE'$len = () = qw(a b c); say $len'   #--&gt; 3\n</code></pre>\n\n<p>The <a href=\"https://metacpan.org/pod/distribution/perlsecret/lib/perlsecret.pod#Goatse\" rel=\"nofollow noreferrer\"><code>=()=</code> \"operator\"</a> is a play on <a href=\"https://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">context</a>. It forces list context on its right side and assigns the length of the list. See <a href=\"https://stackoverflow.com/a/54564429/4653379\">this post</a> about list vs scalar assignments and <a href=\"https://stackoverflow.com/questions/21037846/why-does-the-goatse-operator-work\">this page</a> for thoughts on all this.</p>\n\n<hr>\n\n<p>In your honest attempt <code>scalar</code> imposes the scalar context on its operand -- or here an <em>expression</em>, which is thus evaluated by the <a href=\"https://perldoc.perl.org/perlop.html#Comma-Operator\" rel=\"nofollow noreferrer\">comma operator</a>, whereby one after another term is discarded, until the last one which is returned.  </p>\n\n<p>You'd get to know about that with warnings on, as it would emit</p>\n\n<blockquote>\n  <p>Useless use of a constant (\"a\") in void context at -e line 1</p>\n</blockquote>\n\n<p>Warnings can always be enabled in one-liners as well, with <code>-w</code> flag.  I recommend that.</p>\n"}, {"comments": [{"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1564820250, "post_id": 57336399, "comment_id": 101162397, "body": "what is the benefit of that goatse-thing? (in this case). It doesn&#39;t seem to be more efficient than <code>perl -le &#39;sub lcount(@) { @_&#47;1 }; print lcount qw(foo bar baz)&#39;</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1564820504, "post_id": 57336399, "comment_id": 101162436, "body": "@mosvy It avoids having to write an unnecessary sub. And technically, it is more efficient (fewer ops, and avoids one of the most expensive ones, the sub call)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1564820554, "post_id": 57336399, "comment_id": 101162445, "body": "@mosvy  &quot;<i>doesn&#39;t seem to</i>&quot; -- Did you benchmark it? That would trade a simple list-flattening of sorts (<code>() = f()</code> throws away all elements due to apparent assignment to an empty list) for a sub-call with prototype and all.  Not to mention coding simplicity?"}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564820592, "post_id": 57336399, "comment_id": 101162455, "body": "@zdim I didn&#39;t benchmarked, I did <code>perl -MO=Terse</code>d it. Where&#39;s the sub call?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1564820891, "post_id": 57336399, "comment_id": 101162504, "body": "@mosvy The second instance of <code>lcount</code> is a sub call."}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1564821004, "post_id": 57336399, "comment_id": 101162525, "body": "right, still not clear how much more efficient it is."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564821017, "post_id": 57336399, "comment_id": 101162527, "body": "@zdim, The prototype doesn&#39;t matter. It has no rub-time effect"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1564821158, "post_id": 57336399, "comment_id": 101162564, "body": "@mosvy, Not much. The only reason I mentioned efficiency is to correct your false claim.  The code you posted is virtually a superset of the code I posted, so it will necessarily be slower. You claimed otherwise."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 6, "last_activity_date": 1564821502, "last_edit_date": 1564821502, "creation_date": 1564817810, "answer_id": 57336399, "question_id": 57335742, "link": "https://stackoverflow.com/questions/57335742/perl-length-of-an-anonymous-list/57336399#57336399", "title": "Perl: Length of an anonymous list", "body": "<p>First, let's clear up a misconception.</p>\n\n<p>You appear to believe that some operators evaluate to some kind of data structure called a list regardless of context, and that this list returns its length when coerced into scalar context.</p>\n\n<p>All of that is incorrect.</p>\n\n<p>An operator must evaluate to exactly one scalar in scalar context, and a sub must return exactly one scalar in scalar context. In list context, operators can evaluate to any number of scalars, and subs can return any number of scalars. So when we say an operator evaluates to a list, and when we say a sub returns a list, we aren't referring to some data structure; we are simply using \"list\" as a shorthand for \"zero or more scalars\".</p>\n\n<p>Since there's no such thing as a list data structure, it can't be coerced into a scalar. Context isn't a coercion; context is something operators check to determine to what they evaluate in the first place. They literally let context determine their behaviour and what they return. It's up to each operator to decide what they return in scalar and list context, <a href=\"https://www.perlmonks.org/?node_id=347416\" rel=\"nofollow noreferrer\">and there's a lot of variance</a>.</p>\n\n<p>As you've noted,</p>\n\n<ul>\n<li>The <code>@a</code> operator in scalar context evaluates to a single scalar: the length of the array.</li>\n<li>The comma operator in scalar context evaluates to a single scalar: the same value as its last operand.</li>\n<li>The <code>qw</code> operator in scalar context evaluates to a single scalar: the last value it would normally return.</li>\n</ul>\n\n<hr>\n\n<p>On to your question.</p>\n\n<p>To determine to how many scalars an operator would evaluate when evaluated in list context, we need to evaluate the operator in list context. An operator always evaluates to a single scalar in scalar context, so your attempts to impose a scalar context are ill-founded (unless the operator happens to evaluate to the length of what it would have returned in list context, as is the case for <code>@a</code>, but not for many other operators).</p>\n\n<p>The solution is to use</p>\n\n<pre><code>my $n = () = f();\n</code></pre>\n\n<p>The <a href=\"https://stackoverflow.com/a/54564429/4653379\">explanation</a> is complicated.</p>\n"}], "owner": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 1, "accepted_answer_id": 57335765, "answer_count": 2, "score": 2, "last_activity_date": 1564821502, "creation_date": 1564810611, "last_edit_date": 1564816494, "question_id": 57335742, "link": "https://stackoverflow.com/questions/57335742/perl-length-of-an-anonymous-list", "title": "Perl: Length of an anonymous list", "body": "<p>How to get the length of an anonymous list?</p>\n\n<pre><code>perl -E 'say scalar (\"a\", \"b\");' # =&gt; b\n</code></pre>\n\n<p>I expected <code>scalar</code> to return the list in a scalar context - its length.</p>\n\n<p>Why it returns the second (last) element?</p>\n\n<p>It works for an array:</p>\n\n<pre><code>perl -E 'my @lst = (\"a\", \"b\"); say scalar @lst;' # =&gt; 2\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 3, "creation_date": 1564793177, "post_id": 57334637, "comment_id": 101158993, "body": "Is <code>&#47;mnt&#47;drawings</code> the same on both systems? Can you run with <code>ls -lR</code> and show us at least the first 10 lines?"}, {"owner": {"reputation": 159, "user_id": 5439206, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh6.googleusercontent.com/-Xxoy9BqNLGk/AAAAAAAAAAI/AAAAAAAAAVw/RFR0wnTY7SI/photo.jpg?sz=128", "display_name": "Barry Ralphs", "link": "https://stackoverflow.com/users/5439206/barry-ralphs"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1564859612, "post_id": 57334637, "comment_id": 101171029, "body": "@Schwern, I&#39;ve added more info to the original post. Yes, I can see all the files with <code>ls -lR</code>"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1564860822, "post_id": 57334637, "comment_id": 101171313, "body": "Is this a network file system? That might be confusing File::Find. Try using the latest version of Perl you can. What versions of Perl are you using on both machines?"}], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 5439206, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh6.googleusercontent.com/-Xxoy9BqNLGk/AAAAAAAAAAI/AAAAAAAAAVw/RFR0wnTY7SI/photo.jpg?sz=128", "display_name": "Barry Ralphs", "link": "https://stackoverflow.com/users/5439206/barry-ralphs"}, "edited": false, "score": 0, "creation_date": 1565024326, "post_id": 57341581, "comment_id": 101212523, "body": "Thanks @Schwern the <code>local $File::Find::dont_use_nlink = 1;</code> worked."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 2, "last_activity_date": 1564861230, "creation_date": 1564861230, "answer_id": 57341581, "question_id": 57334637, "link": "https://stackoverflow.com/questions/57334637/perl-filefind-isnt-running-recursively/57341581#57341581", "title": "Perl File::Find isn&#39;t running recursively", "body": "<p>I think I've found the bug. <a href=\"https://rt.perl.org/Public/Bug/Display.html?id=133673\" rel=\"nofollow noreferrer\">Perlbug 133673</a>.</p>\n\n<blockquote>\n  <p>I looked at the code in Find.pm and I see that it automatically avoids\n  using the number of links to a directory when <code>stat</code> on the directory\n  returns less than 2 for nlink. Unfortunately, it appears that directories on the NAS return 2 as the number of links for all directories.</p>\n</blockquote>\n\n<p>That's what your network filesystem is doing.</p>\n\n<p><a href=\"https://github.com/Perl/perl5/commit/f75dfdbdb9d52b3024db9a0eb27405c2175af144\" rel=\"nofollow noreferrer\">The fix</a> is in Perl 5.30.0. You can upgrade, or you can set <code>local $File::Find::dont_use_nlink = 1;</code> to ignore the filesystem nlink.</p>\n"}], "owner": {"reputation": 159, "user_id": 5439206, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh6.googleusercontent.com/-Xxoy9BqNLGk/AAAAAAAAAAI/AAAAAAAAAVw/RFR0wnTY7SI/photo.jpg?sz=128", "display_name": "Barry Ralphs", "link": "https://stackoverflow.com/users/5439206/barry-ralphs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 57341581, "answer_count": 1, "score": 1, "last_activity_date": 1564861230, "creation_date": 1564791572, "last_edit_date": 1564859530, "question_id": 57334637, "link": "https://stackoverflow.com/questions/57334637/perl-filefind-isnt-running-recursively", "title": "Perl File::Find isn&#39;t running recursively", "body": "<p>I have this basic Perl script that should traverse my directory tree recursively.</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse File::Find;\nmy $dir = '/mnt/drawings';\n\nfind(\\&amp;process_file, $dir);\n\nsub process_file\n{\n    print(\"$File::Find::name\\n\");\n}\n</code></pre>\n\n<p>But when I run it on my CentOS system it only prints the first level under '/mnt/drawings' around 20 directory. But when I run the same script on my FreeBSD system, it prints every file tens of thousands...</p>\n\n<p>What am I missing on my CentOS system?</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Both systems are mounting the same data on FreeNAS.\nIf I run <code>ls -lR</code> I can see all the files:\nHere's the first few folders:</p>\n\n<pre><code>drwxr-xr-x. 2 root root   0 Mar 25  2011 2008dwgs\ndrwxr-xr-x. 2 root root   0 Nov 19  2015 2009dwgs\ndrwxr-xr-x. 2 root root   0 Oct 21  2016 2010dwgs\ndrwxr-xr-x. 2 root root   0 Jun 16  2014 2011dwgs\ndrwxr-xr-x. 2 root root   0 May 14 17:58 2012dwgs\ndrwxr-xr-x. 2 root root   0 Nov 29  2016 2013dwgs\ndrwxr-xr-x. 2 root root   0 Aug  8  2018 2014dwgs\ndrwxr-xr-x. 2 root root   0 Apr  1 18:11 2015dwgs\ndrwxr-xr-x. 2 root root   0 Jul 28 21:55 2016dwgs\ndrwxr-xr-x. 2 root root   0 Jun 17 12:39 2017dwgs\ndrwxr-xr-x. 2 root root   0 Jun 11 10:27 2018dwgs\ndrwxr-xr-x. 2 root root   0 Jul 26 15:40 2019dwgs\n</code></pre>\n\n<p>And here it is inside the 2008dwgs folder:</p>\n\n<pre><code>./2008dwgs:\ntotal 0\ndrwxr-xr-x. 2 root root 0 May 20  2014 08002-01\ndrwxr-xr-x. 2 root root 0 Apr  9  2011 08003\ndrwxr-xr-x. 2 root root 0 May 28  2013 08008\ndrwxr-xr-x. 2 root root 0 Nov 10  2014 08009\ndrwxr-xr-x. 2 root root 0 Jan 23  2008 08011\n</code></pre>\n\n<p>And inside the 08002-01 folder:</p>\n\n<pre><code>./2008dwgs/08002-01:\ntotal 0\ndrwxr-xr-x. 2 root root 0 May 20  2014 ArchDwgs\ndrwxr-xr-x. 2 root root 0 Aug 28  2014 BASES\ndrwxr-xr-x. 2 root root 0 May 20  2014 FinalPDF\ndrwxr-xr-x. 2 root root 0 Oct 13  2009 Fonts\ndrwxr-xr-x. 2 root root 0 Aug 27  2014 issued\ndrwxr-xr-x. 2 root root 0 May 19  2011 NPS Reference\ndrwxr-xr-x. 2 root root 0 Oct 13  2009 Pen Settings\ndrwxr-xr-x. 2 root root 0 Aug 27  2014 Received\ndrwxr-xr-x. 2 root root 0 Dec  8  2009 SketchUp\ndrwxr-xr-x. 2 root root 0 Jun 24 03:05 Struct\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1564768294, "post_id": 57331320, "comment_id": 101152627, "body": "The problem is if I don&#39;t add in the or die, the program just hangs. I figured that adding that would be good to show me at which point it is hanging. I removed it now and ran it again. Process hangs."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1564768832, "post_id": 57331320, "comment_id": 101152813, "body": "@sfr Then I&#39;d run the script under <code>strace</code> to see what&#39;s going on."}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1564768981, "post_id": 57331320, "comment_id": 101152861, "body": "I tried your suggestions but process is hanging :/ I did try strace yesterday but I couldn&#39;t really make sense of the output when it was hanging, so I that&#39;s when I tried the die option."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1564769063, "post_id": 57331320, "comment_id": 101152887, "body": "Step 1 is cutting all the system/shell/mkdir intermediate parts and just calling <code>make_path</code>. As for step 2: If you can post the strace log somewhere, I can take a look."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1564769250, "post_id": 57331320, "comment_id": 101152963, "body": "@sfr ... Wait, what evidence do you have that it&#39;s hanging at the <code>mkdir</code> step? If it&#39;s creating the directory and reaching the <code>die</code> call, that means <code>mkdir</code> is <i>not</i> the problem. It must be hanging somewhere later on."}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1564769372, "post_id": 57331320, "comment_id": 101153004, "body": "The next step is another mkdir for another dir that was written the same way. It&#39;s making the first dir, dying, returning the error at the line, and then fails to make the dir in the next line."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1564769453, "post_id": 57331320, "comment_id": 101153028, "body": "@sfr Well, I&#39;ve answered the question for the code you posted here. If you need help debugging the hang, I&#39;d suggest you post a separate question (with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)."}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1564771542, "post_id": 57331320, "comment_id": 101153811, "body": "Thanks a lot for your help!"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 4, "last_activity_date": 1564768807, "last_edit_date": 1564768807, "creation_date": 1564768129, "answer_id": 57331320, "question_id": 57331291, "link": "https://stackoverflow.com/questions/57331291/how-can-i-resolve-a-no-such-file-or-directory-in-perl/57331320#57331320", "title": "How can I resolve a &quot;no such file or directory&quot; in perl?", "body": "<p>The problem is the <code>... or die</code> you added.</p>\n\n<p><a href=\"https://perldoc.pl/functions/system\" rel=\"nofollow noreferrer\"><code>system</code></a> returns <code>0</code> on success (which is false in boolean context), so your code will only <code>die</code> if <code>mkdir</code> succeeds.</p>\n\n<p>Also, <code>$!</code> doesn't contain a meaningful status code if <code>system</code> reports a non-zero exit status. The whole <code>No such file or directory</code> message is a red herring.</p>\n\n<p>Better:</p>\n\n<pre><code>system(...) == 0\n    or die \"mkdir -p $somepath returned $?\";\n</code></pre>\n\n<p>Calling <code>system</code> with a single argument goes through the shell, which can cause problems if <code>$somepath</code> contains e.g. spaces, <code>*</code>, or other special characters.</p>\n\n<p>Better:</p>\n\n<pre><code>system('mkdir', '-p', '--', $somepath) == 0\n    or die \"mkdir -p $somepath returned $?\";\n</code></pre>\n\n<p>There is no point in checking <code>-e $somepath</code> beforehand; <code>mkdir -p</code> takes care of that for you.</p>\n\n<p>Finally, you don't need to run a separate program just to create a directory hierarchy:</p>\n\n<pre><code>use File::Path qw(make_path);\nmake_path($somepath);\n</code></pre>\n"}], "owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564773385, "creation_date": 1564767951, "last_edit_date": 1564773385, "question_id": 57331291, "link": "https://stackoverflow.com/questions/57331291/how-can-i-resolve-a-no-such-file-or-directory-in-perl", "title": "How can I resolve a &quot;no such file or directory&quot; in perl?", "body": "<p>I've been working on a script for the last 2 weeks that has been running just fine. Suddenly yesterday, it stopped working.</p>\n\n<p>I was using the code <code>mkdir -p $somepath</code>. It started hanging so I inserted an \"or die\". Then I figured that this error might be due to me not checking if it already exists so I changed the code to <br>\n<code>unless (-e $somepath) {system (\"mkdir -p $somepath\") or die \"Couldn't make $somepath: $!\"\n};</code></p>\n\n<p>NOTE: I have also done this using perl mkdir without system but I tried everything since nothing was working. </p>\n\n<p>Here's the strange part. It actually IS creating the directory and then dying with the error <br>\n<code>Couldn't make \"insert path here\": No such file or directory</code></p>\n\n<p>So it seems like it is doing the mkdir, checking that it does exist, and then dies. I don't know why it started doing this because I hadn't changed a single thing to my script and it was working fine yesterday. Please let me know if I've forgotten to include any information.</p>\n\n<p>Edit: I figured out my issue. It has absolutely nothing to do with any of the mkdirs. For some reason it was coming from enabling an option that allows a user to supply a path instead of having a direct path in the code. The dirty fix was to disable the feature for now. So the problem was occurring even before I got to the mkdir lines. </p>\n"}, {"tags": ["perl", "aix"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1564766943, "post_id": 57331065, "comment_id": 101152134, "body": "Do you mean you&#39;re trying to create a binary distribution for perl? What OS?"}, {"owner": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1564770606, "post_id": 57331065, "comment_id": 101153445, "body": "Yes, binary distribution for AIX."}], "answers": [{"comments": [{"owner": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "edited": false, "score": 0, "creation_date": 1565381101, "post_id": 57331911, "comment_id": 101350549, "body": "This works in general, but I must say, it is not as &#39;clean&#39; as I expected. I have to additionally specify either PERL5LIB=$PERL_HOME/lib, or &#39;use lib ... &#39; in the code. Otherwise it gives me error (even if &#39;perl&#39; is available via PATH): Can&#39;t locate Config.pm in @INC (you may need to install the Config module) (@INC contains: ../lib/site_perl/5.30.0/aix-thread-multi-64all ../lib/site_perl/5.30.0 ../lib/5.30.0/aix-thread-multi-64all ../lib/5.30.0)."}, {"owner": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "edited": false, "score": 0, "creation_date": 1565381300, "post_id": 57331911, "comment_id": 101350621, "body": "..., so, it is not really &quot; located via the path of the perl executable&quot;. Maybe I am missing something?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "edited": false, "score": 0, "creation_date": 1565672801, "post_id": 57331911, "comment_id": 101415146, "body": "@AndyH I just verified it Works For Me\u2122.  <code>@INC contains: ..&#47;lib&#47;site_perl&#47;...</code> is unexpected, it should say <code>@INC contains: &#47;path&#47;to&#47;your&#47;perl&#47;lib&#47;site_perl&#47;...</code>. Maybe you have environment variables interfering? Check with <code>perl -V</code>."}, {"owner": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "edited": false, "score": 0, "creation_date": 1565882027, "post_id": 57331911, "comment_id": 101491923, "body": "That was output from <code>perl -V</code>"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "edited": false, "score": 0, "creation_date": 1565888991, "post_id": 57331911, "comment_id": 101495043, "body": "@AndyH That&#39;s only part of it. <code>perl -V</code> has a lot more relevant information like what&#39;s in <code>%ENV</code> and what your compile flags were."}, {"owner": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "edited": false, "score": 0, "creation_date": 1565897223, "post_id": 57331911, "comment_id": 101498297, "body": "Yes, when it knows where to find .pm modules. In my case it&#39;s this (sorry, can&#39;t insert new lines): perl -V Can&#39;t locate Config.pm in @INC (you may need to install the Config module) (@INC contains: /G/01/bin/ppm ../lib/site_perl/5.30.0/aix-thread-multi-64all ../lib/site_perl/5.30.0 ../lib/5.30.0/aix-thread-multi-64all ../lib/5.30.0). BEGIN failed--compilation aborted."}, {"owner": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "edited": false, "score": 0, "creation_date": 1565897578, "post_id": 57331911, "comment_id": 101498408, "body": "Also, when I use full path to perl binary (e.g. <code>$full_path&#47;perl -V</code>) - it works fine, and INC contains proper paths."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "edited": false, "score": 0, "creation_date": 1565917568, "post_id": 57331911, "comment_id": 101503373, "body": "@AndyH I&#39;m sorry, without seeing the full output of <code>perl -V</code>, particularly the environment variables and compile options which may be affecting <code>@INC</code>, I can&#39;t help you."}, {"owner": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "edited": false, "score": 0, "creation_date": 1565963322, "post_id": 57331911, "comment_id": 101518074, "body": "I&#39;ve added <code>perl -V</code> output in the original post. It shows it like this only when I cd to perl bin directory. If I am not in perl bin directory, but specify full path to perl executable it will show full path in those @INC entries. Otherwise I get error. As you can see %ENV section is missing, so there is no PERL-specific variables."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "edited": false, "score": 0, "creation_date": 1566013638, "post_id": 57331911, "comment_id": 101531758, "body": "@AndyH Your problem might be <code>-Dprefix=&#47;G&#47;01&#47;perl&#47;5_30_0</code>. Try using <code>-Dinstallprefix=&#47;G&#47;01&#47;perl&#47;5_30_0</code>. Or leave it out and do the manual configuration."}, {"owner": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "edited": false, "score": 0, "creation_date": 1566079375, "post_id": 57331911, "comment_id": 101544657, "body": "Tried without -Dprefix option, used <code>make install DESTDIR=$perl_inst_dir</code> instead. Same thing. What settings did you use to make it work?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "edited": false, "score": 0, "creation_date": 1566089675, "post_id": 57331911, "comment_id": 101546016, "body": "@AndyH I gave it <code>-Duserelocatableinc</code> and answered the questions manually taking the defaults except for the <code>installprefix</code>. If you check <code>config.sh</code> in your source tree, all your install paths should start with <code>...&#47;</code>. <a href=\"https://gist.github.com/schwern/5c9d4603c0aabc81bfb3db5cf162e70d\" rel=\"nofollow noreferrer\">Here&#39;s my config.sh</a>. You said it works with <code>&#47;full&#47;path&#47;to&#47;perl</code>, I wonder if Perl is having an issue getting the cwd without using a library. Otherwise try <a href=\"https://perldoc.perl.org/perlbug.html\" rel=\"nofollow noreferrer\">reporting a <code>perlbug</code></a>."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 4, "last_activity_date": 1564771272, "last_edit_date": 1592644375, "creation_date": 1564771272, "answer_id": 57331911, "question_id": 57331065, "link": "https://stackoverflow.com/questions/57331065/is-it-possible-to-change-perl-installation-directory/57331911#57331911", "title": "Is it possible to change Perl installation directory", "body": "<p>Normally there's numerous hard coded paths in a Perl installation. What you're looking for is <a href=\"https://github.com/Perl/perl5/blob/v5.30.0/INSTALL#L879\" rel=\"nofollow noreferrer\">&quot;Relocatable @INC&quot;</a>.</p>\n<blockquote>\n<p>To create a relocatable perl tree, use the following command line:</p>\n<pre><code>sh Configure -Duserelocatableinc\n</code></pre>\n<p>Then the paths in @INC (and everything else in %Config) can be\noptionally located via the path of the perl executable.</p>\n</blockquote>\n<p>Also be sure to read <a href=\"https://github.com/Perl/perl5/blob/v5.30.0/README.aix\" rel=\"nofollow noreferrer\">README.aix</a> for special AIX instructions.</p>\n"}], "owner": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 57331911, "answer_count": 1, "score": 0, "last_activity_date": 1565971662, "creation_date": 1564766773, "last_edit_date": 1565971662, "question_id": 57331065, "link": "https://stackoverflow.com/questions/57331065/is-it-possible-to-change-perl-installation-directory", "title": "Is it possible to change Perl installation directory", "body": "<p>Trying to build Perl distribution from sources. Installation directory needs to be specified before the build, as a parameter to Configure utility (e.g. /usr/local/myperl). As far as I understand, if I wanted to install that Perl distribution on another host, it must be put into the same directory (/usr/local/myperl). Is there a way to make it location-independent? I would like to be able to unpack it to any directory (specified by the host owner), set up necessary environment variables (PATH, etc.), so that it would work.</p>\n\n<p><strong>Edit:</strong> Created Perl 5.30.0 distribution using -Duserelocatableinc option.\nBelow is <code>perl -V</code> output:</p>\n\n<pre><code>Summary of my perl5 (revision 5 version 30 subversion 0) configuration:\n\n  Platform:\n    osname=aix\n    osvers=7.1.0.0\n    archname=aix-thread-multi-64all\n    uname='aix sss040 1 7 00fb05a44c00 '\n    config_args='-desr -Dcc=gcc -maix64 -Duserelocatableinc -Dusethreads -Duse64bitall -Dprefix=/G/01/perl/5_30_0 -Aldflags=-L/usr/lib64 -L/opt/freeware/lib64 -L/opt/pware64/lib'\n    hint=recommended\n    useposix=true\n    d_sigaction=define\n    useithreads=define\n    usemultiplicity=define\n    use64bitint=define\n    use64bitall=define\n    uselongdouble=undef\n    usemymalloc=n\n    default_inc_excludes_dot=define\n    bincompat5005=undef\n  Compiler:\n    cc='gcc -maix64 -maix64'\n    ccflags ='-D_THREAD_SAFE -D_ALL_SOURCE -D_ANSI_C_SOURCE -D_POSIX_SOURCE -DUSE_NATIVE_DLOPEN -DNEED_PTHREAD_INIT -fwrapv -fno-strict-aliasing -pipe -maix64 -DUSE_64_BIT_ALL -D_FORTIFY_SOURCE=2'\n    optimize='-O'\n    cppflags='-D_THREAD_SAFE -D_ALL_SOURCE -D_ANSI_C_SOURCE -D_POSIX_SOURCE -DUSE_NATIVE_DLOPEN -DNEED_PTHREAD_INIT -fwrapv -fno-strict-aliasing -pipe'\n    ccversion=''\n    gccversion='6.3.0'\n    gccosandvers=''\n    intsize=4\n    longsize=8\n    ptrsize=8\n    doublesize=8\n    byteorder=87654321\n    doublekind=4\n    d_longlong=define\n    longlongsize=8\n    d_longdbl=define\n    longdblsize=8\n    longdblkind=0\n    ivtype='long'\n    ivsize=8\n    nvtype='double'\n    nvsize=8\n    Off_t='off_t'\n    lseeksize=8\n    alignbytes=8\n    prototype=define\n  Linker and Libraries:\n    ld='gcc -maix64 -maix64'\n    ldflags =' -Wl,-brtl -Wl,-bdynamic -L/usr/lib64 -L/opt/freeware/lib64 -L/opt/pware64/lib -Wl,-b64'\n    libpth=/opt/freeware/lib /opt/freeware/lib/gcc/powerpc-ibm-aix7.1.0.0/6.3.0/include-fixed /usr/lib /lib /usr/ccs/lib /usr/lib64\n    libs=-lpthread -lbind -lnsl -lgdbm -ldbm -ldl -lld -lm -lcrypt -lpthreads -lc\n    perllibs=-lpthread -lbind -lnsl -ldl -lld -lm -lcrypt -lpthreads -lc\n    libc=\n    so=a\n    useshrplib=false\n    libperl=libperl.a\n    gnulibc_version=''\n  Dynamic Linking:\n    dlsrc=dl_aix.xs\n    dlext=so\n    d_dlsymun=undef\n    ccdlflags='-Xlinker -bE:.../../lib/5.30.0/aix-thread-multi-64all/CORE/perl.exp'\n    cccdlflags=' '\n    lddlflags='  -Wl,-b64 -Wl,-bhalt:4 -Wl,-G -Wl,-bI:$(PERL_INC)/perl.exp -Wl,-bE:$(BASEEXT).exp -Wl,-bnoentry -lpthreads -lc -lm -L/usr/lib64 -L/opt/freeware/lib64 -L/opt/pware64/lib'\n\n\nCharacteristics of this binary (from libperl):\n  Compile-time options:\n    HAS_TIMES\n    MULTIPLICITY\n    PERLIO_LAYERS\n    PERL_COPY_ON_WRITE\n    PERL_DONT_CREATE_GVSV\n    PERL_IMPLICIT_CONTEXT\n    PERL_MALLOC_WRAP\n    PERL_OP_PARENT\n    PERL_PRESERVE_IVUV\n    USE_64_BIT_ALL\n    USE_64_BIT_INT\n    USE_ITHREADS\n    USE_LARGE_FILES\n    USE_LOCALE\n    USE_LOCALE_COLLATE\n    USE_LOCALE_CTYPE\n    USE_LOCALE_NUMERIC\n    USE_LOCALE_TIME\n    USE_PERLIO\n    USE_PERL_ATOF\n    USE_REENTRANT_API\n    USE_THREAD_SAFE_LOCALE\n  Built under aix\n  Compiled at Aug 16 2019 08:41:27\n  @INC:\n    ../lib/site_perl/5.30.0/aix-thread-multi-64all\n    ../lib/site_perl/5.30.0\n    ../lib/5.30.0/aix-thread-multi-64all\n    ../lib/5.30.0\n</code></pre>\n"}, {"tags": ["perl", "readline"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1564764447, "post_id": 57329459, "comment_id": 101151123, "body": "The <code>addhistory()</code> calls <code>add_history()</code> in <code>libreadline.so</code> which has the history as a static variable in the file <a href=\"http://git.savannah.gnu.org/cgit/readline.git/tree/history.c#n74\" rel=\"nofollow noreferrer\"><code>history.c</code></a>. This means that this function does not support multiple histories for a given process. But two different processes will have different histories (since the static variables are separate)."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1564765012, "post_id": 57329459, "comment_id": 101151362, "body": "Note: the above was for backend package <code>Term::ReadLine::Gnu</code>, I have not checked the other backends"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1564765431, "post_id": 57329459, "comment_id": 101151533, "body": "In <code>Term::ReadLine::Gnu</code> there are functions <code>clear_history()</code> and <code>SetHistory()</code>. Maybe these can be used to simulate two separate histories?"}], "answers": [{"comments": [{"owner": {"reputation": 1309, "user_id": 2631304, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7744c67c172e28b0fb042efbd00405c6?s=128&d=identicon&r=PG", "display_name": "steven smith", "link": "https://stackoverflow.com/users/2631304/steven-smith"}, "edited": false, "score": 0, "creation_date": 1565130734, "post_id": 57330885, "comment_id": 101253595, "body": "Thank you.  I am embarrsed to admit I missed the gnu readline docs.  Also you don&#39;t seem to need to do the clear history."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1564765888, "creation_date": 1564765888, "answer_id": 57330885, "question_id": 57329459, "link": "https://stackoverflow.com/questions/57329459/perl-termreadline-for-multiple-terminal-history/57330885#57330885", "title": "Perl Term::Readline for multiple terminal history", "body": "<p>For the backend <a href=\"https://metacpan.org/pod/Term::ReadLine::Gnu#History-Functions\" rel=\"nofollow noreferrer\"><code>Term::ReadLine::Gnu</code></a> you can use <code>clear_history()</code> and <code>SetHistory()</code> to emulate two separate histories. For example:</p>\n\n<pre><code>my @hist1;\nmy @hist2;\nwhile (1) {\n    $term_1-&gt;clear_history();\n    $term_1-&gt;SetHistory(@hist1);\n    $_ = $term_1-&gt;readline(sprintf(\"T 1:%2d &gt; \", $i_1++));\n    push @hist1, $_ if /\\S/;\n    print $OUT_1 \"\\\"$_\\\"\\n\";\n    exit() if $_ eq 'q';\n    $term_2-&gt;clear_history();\n    $term_2-&gt;SetHistory(@hist2);\n    $_ = $term_2-&gt;readline(sprintf(\"T 2:%2d &gt; \", $i_2++));\n    push @hist2, $_ if /\\S/;\n    print $OUT_2 \"\\\"$_\\\"\\n\";\n    exit() if $_ eq 'q';\n}\n</code></pre>\n"}], "owner": {"reputation": 1309, "user_id": 2631304, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7744c67c172e28b0fb042efbd00405c6?s=128&d=identicon&r=PG", "display_name": "steven smith", "link": "https://stackoverflow.com/users/2631304/steven-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 57330885, "answer_count": 1, "score": 1, "last_activity_date": 1564765888, "creation_date": 1564759525, "last_edit_date": 1564761665, "question_id": 57329459, "link": "https://stackoverflow.com/questions/57329459/perl-termreadline-for-multiple-terminal-history", "title": "Perl Term::Readline for multiple terminal history", "body": "<p>I would like to use Term::ReadLine for two streams with separate historys.  Is this possible?  When I use the code below with two separate 'terminals' the history gets mixed together and when I look at the Attribs hash returned by $term _1->Attribs and $term_2->Attribs, the debugger says they use the same memory location.  The add_history function called in both cases is the same Gnu XS function and it doesn't take an option for a buffer as far as I can tell.<br/><br/>Is this possible?</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\nuse utf8;\nbinmode(STDIN, 'utf8');\nbinmode(STDOUT, 'utf8');\n# turn off underline on prompt.\n$ENV{\"PERL_RL\"} = \"o=0\";\n\nuse Term::ReadLine;\n\nmy $term_1 = Term::ReadLine-&gt;new('term 1');\n$term_1-&gt;enableUTF8();\nmy $OUT_1 = $term_1-&gt;OUT || \\*STDOUT;\n\nmy $term_2 = Term::ReadLine-&gt;new('term 2');\n$term_2-&gt;enableUTF8();\nmy $OUT_2 = $term_2-&gt;OUT || \\*STDOUT;\n\n# my $attrs =  $term_1-&gt;Attribs();\n# for my $key (sort keys %{$attrs}) {\n#     printf(\"%15s : %s\\n\", $key, $attrs-&gt;{$key});\n# }\nmy $i_1 = 1;\nmy $i_2 = 1;\nwhile (1) {\n    $_ = $term_1-&gt;readline(sprintf(\"T 1:%2d &gt; \", $i_1++));\n    $term_1-&gt;addhistory($_) if /\\S/;\n    print $OUT_1 \"\\\"$_\\\"\\n\";\n    exit() if $_ eq 'q';\n\n    $_ = $term_2-&gt;readline(sprintf(\"T 2:%2d &gt; \", $i_2++));\n    $term_2-&gt;addhistory($_) if /\\S/;\n    print $OUT_2 \"\\\"$_\\\"\\n\";\n    exit() if $_ eq 'q';\n}\n</code></pre>\n\n<p>I'm on Ubuntu 16.04 with perl 5, version 26.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "binary", "unpack"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1564756722, "post_id": 57327606, "comment_id": 101147377, "body": "Why are you seeking 18? it seems like it should be 20 according to the data you give: 0x0 + 15 byte str + 0x0 + 2 byte + 0x0 = 20"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1564757124, "post_id": 57327606, "comment_id": 101147621, "body": "I think the problem is that <code>unpack</code> needs a string to unpack from, it cannot read directly from the file. So you need to read the file into a string first, but that might not be very efficient compared to what you have"}, {"owner": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1564757770, "post_id": 57327606, "comment_id": 101147955, "body": "apologies, it&#39;s actually a 12-byte string and the number may be 3 bytes. +3 nulls is 18. I miscounted. But the real issue is in the array following it. I&#39;ve adjusted the post."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564765497, "post_id": 57327606, "comment_id": 101151554, "body": "Once you get to &quot;<i>variable-length string</i>&quot; items can switch to <code>readline</code> (aka <code>&lt;&gt;</code>) since they all end with newline.  There is no reason to not be able to mix <code>read</code> and <code>&lt;&gt;</code>, I think (just not <code>sysread</code>, which is unbuffered)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564765602, "post_id": 57327606, "comment_id": 101151599, "body": "I don&#39;t understand what the problem is with &quot;<i>variable length arrays</i>&quot; ... that you don&#39;t know how many &quot;<i>variable length strings</i>&quot; there are? Once you switch to <code>readline</code> ou can test every line you read for a 7-byte string ending with null; by description it seems that no &quot;item&quot; can be like that."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564766038, "post_id": 57327606, "comment_id": 101151774, "body": "Or: set <code>local $&#47;</code> to the nul, then read four such &quot;lines&quot; (discard -- user ID -- discard -- number of items to follow); Then change <code>$&#47;</code> back to newline, and using the last one just read (number of items) read that many lines (items).  Repeat?"}], "answers": [{"comments": [{"owner": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 0, "creation_date": 1564822135, "post_id": 57331330, "comment_id": 101162736, "body": "will be able to test when I return to the office on Monday, but one remark is that the number of items number is actually in binary. Is is enough to simply readline it and then unpack?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 1, "creation_date": 1564823178, "post_id": 57331330, "comment_id": 101162939, "body": "@bluppfisk Ah, right -- it should be fine. (And you want to open in <code>&lt;raw</code>, as you do.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 0, "creation_date": 1564823334, "post_id": 57331330, "comment_id": 101162970, "body": "@bluppfisk If the layout of your real data differs significantly post some, so that I can test"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 0, "creation_date": 1564986627, "post_id": 57331330, "comment_id": 101193872, "body": "@bluppfisk Updated, but this may need tweaks -- let me know how it goes"}, {"owner": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 0, "creation_date": 1565003668, "post_id": 57331330, "comment_id": 101201717, "body": "got this to work too with minor changes (needed to read another NULL before continuing the while loop) but ikegami&#39;s solution is marginally faster. Thanks for showing me these options, though, always happy to learn more."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 4, "last_activity_date": 1569821145, "last_edit_date": 1569821145, "creation_date": 1564768184, "answer_id": 57331330, "question_id": 57327606, "link": "https://stackoverflow.com/questions/57327606/unpacking-an-unknown-serialised-format-with-variable-length/57331330#57331330", "title": "unpacking an unknown serialised format with variable length", "body": "<p>Here are two ways to reduce the number of hard-coded specifics, based on data description; one reads by those null bytes (then changes back to newlines), the other <code>unpack</code>s lines with nuls.</p>\n\n<p>Set <a href=\"https://perldoc.perl.org/perlvar.html#Variables-related-to-filehandles\" rel=\"nofollow noreferrer\"><code>$/</code> variable</a> to the null byte, and read first 4 (four) such \"lines.\"  You get your user ID there, and then the last such \"line\" read is the number of items that follows. Restore <code>$/</code> to newline and read that list, using normal <a href=\"https://perldoc.perl.org/functions/readline.html\" rel=\"nofollow noreferrer\"><code>readline</code></a> (aka <a href=\"https://perldoc.perl.org/perlop.html#I%2fO-Operators\" rel=\"nofollow noreferrer\"><code>&lt;&gt;</code></a>).  Repeat, if this pattern indeed repeats.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $file = shift or die \"Usage: $0 file\\n\";  # a_file_with_nuls.txt    \nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\"; \n\nmy ($user_id, $num_items);\nwhile (not eof $fh) {    \n    READ_BY_NUL: { \n        my $num_of_nul_lines = 4;\n        local $/ = \"\\x00\"; \n        my $line;\n        for my $i (1..$num_of_nul_lines) { \n            $line = readline $fh;\n            chop $line;\n            if ($i == 2) {\n                $user_id = $line;\n            }\n        }   \n        $num_items = $line;  # last nul-terminated \"line\"\n    }        \n    say \"Got: user-id = |$user_id|, and number-of-items = |$num_items|\";    \n\n    my @items;\n    for (1..$num_items) {\n        my $line = readline $fh;\n        chomp $line;\n        push @items, $line;\n    }    \n    say for @items;\n};\n</code></pre>\n\n<p>Since <code>$/</code> is set using <a href=\"https://perldoc.perl.org/functions/local.html\" rel=\"nofollow noreferrer\">local</a> in <code>READ_BY_NUL</code> block, its previous value is restored out of the block.</p>\n\n<p>The output is as expected, but please add checks. Also, one can imagine errors on which it would make sense to recover (for example: actual number of items falls short of the given number).  </p>\n\n<p>The whole thing is in a <code>while</code> with a manual check (and termination) using <a href=\"https://perldoc.perl.org/functions/eof.html\" rel=\"nofollow noreferrer\">eof</a>, per assumption that the pattern <em>four-nuls + number-of-lines</em> indeed repeats (a little unclear from the question).</p>\n\n<p>I test with a file made by</p>\n\n<pre><code>perl -wE'say \"toss\\x00user-id\\x00this-too\\x003\\x00item-1\\nitem2\\nitem 3\"' \n    &gt; a_file_with_nuls.txt\n</code></pre>\n\n<p>which is then appended multiple times to give us something for that <code>while</code> loop.</p>\n\n<p>Finally, make that read <code>&lt;:raw</code> on systems which need it and <code>unpack</code> as needed. See below.</p>\n\n<hr>\n\n<p>As stated in the question, (some?) data is binary so what is read above need be <code>upack</code>-ed. That also means that there may be problems with reading up to null bytes -- how was that data written in the first place? It is possible for unfilled parts of those fixed-width fields to be filled exactly <em>with nuls</em>.</p>\n\n<p>Another option altogether is to simply read lines, and <a href=\"https://perldoc.perl.org/functions/unpack.html\" rel=\"nofollow noreferrer\">unpack</a> the first one (and then <code>unpack</code> one line every time after the given number of lines, specified as \"items,\" has been read).</p>\n\n<pre><code>open my $fh, '&lt;:raw', $file or die \"Can't open $file: $!\"; \n\nmy @items;\nmy $block_lines = 1;\n\nwhile (my $line = &lt;$fh&gt;) { \n    chomp $line;\n    if ( $. % $block_lines == 0 ) {\n        my ($uid, $num_items) = unpack \"x8 A7x x13 i3x\", $line;\n        say \"User-id: $uid, read $num_items lines for items\";\n        $block_lines += 1 + $num_items;\n    }   \n    else {\n        push @items, $line;\n    }\n}\nsay for @items;\n</code></pre>\n\n<p>Here the number of bytes to skip (<code>x8</code> and <code>x13</code>) includes the zero.</p>\n\n<p>This assumes that the number of \"items\" (lines) to read in every \"block\" may be different, and adds them up as it goes (plus the line with nuls, for total running <code>$block_lines</code>) so to able to check when it is again at a line with nuls (<code>$. % $block_lines == 0</code>)</p>\n\n<p>It makes a few other (reasonable) assumptions for things which aren't specified. This has been checked only lightly, with some made up data.</p>\n"}, {"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1564780333, "post_id": 57332776, "comment_id": 101156800, "body": "Interesting approach. So the second approach will not consume as much memory as the first approach if the file is large, but the speed will be approximately the same I guess?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1564781006, "post_id": 57332776, "comment_id": 101156993, "body": "@H&#229;kon H&#230;gland, If the size of the records are usually less than the buffer size, then it should be comparable in speed (because the loops effectively collapse into &quot;if&quot; statements). You can make it use less memory by extracting a field at a time rather than a record at a time, but that&#39;s probably not needed. /// Note that a bad file (such as a large file without any NULs) could end up being loaded entirely into memory, but that&#39;s easy to avoid by throwing an error in <code>&amp;$reader</code> if the buffer gets too large."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1564781257, "post_id": 57332776, "comment_id": 101157057, "body": "Yes, that seems reasonable. But something else: In the second snippet I should <code>$file</code> be replaced by <code>$buf</code> ?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1564781747, "post_id": 57332776, "comment_id": 101157166, "body": "Thanks! I am still not able to see how it will work at the boundary between the blocks. Let&#39;s say a record does not end exactly at the buffer boundary. Then the inner <code>while</code> will fail, and next <code>reader-&gt;()</code> is called, which overwrites the whole buffer. Won&#39;t that record then be lost?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1564781793, "post_id": 57332776, "comment_id": 101157180, "body": "@H&#229;kon H&#230;gland, <code>&amp;$reader</code> doesn&#39;t overwrite; it appends. (Note the fourth arg of <code>read</code>.)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1564781960, "post_id": 57332776, "comment_id": 101157224, "body": "Of course, I totally missed that <code>length($buf)</code> is the offset in the call to <code>read</code>."}, {"owner": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 0, "creation_date": 1564822445, "post_id": 57332776, "comment_id": 101162790, "body": "interesting use of Perl. I am clearly showing my PHP beginnings :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564867680, "post_id": 57332776, "comment_id": 101172694, "body": "I would use the same approach in PHP."}, {"owner": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 0, "creation_date": 1565003500, "post_id": 57332776, "comment_id": 101201627, "body": "This was the fastest method (on average about 0.01s faster) with a 1024 byte buffer. Oddly, I had to change the regex to <code>s&#47;^([^\\0]*)\\0([^\\0]*)\\0([^\\0]*)\\0([^\\0]*)\\0([^\\0]*)\\0([^\\0]*&zwnj;&#8203;)\\0&#47;&#47;)</code> (uid, dn, n_groups, expires, groups -- capture groups not necessary). Even after correcting for the bit of data I had overlooked (expires), this is still one more field than there actually is in the binary format. Maybe the asterisk doesn&#39;t quite behave as expected with binary? With a plus (+) I wasn&#39;t getting matches."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1564781420, "last_edit_date": 1564781420, "creation_date": 1564776007, "answer_id": 57332776, "question_id": 57327606, "link": "https://stackoverflow.com/questions/57327606/unpacking-an-unknown-serialised-format-with-variable-length/57332776#57332776", "title": "unpacking an unknown serialised format with variable length", "body": "<p>You have no idea how much to read, so reading in the whole file at once will get you the best speed results.</p>\n\n<pre><code>{\n   my $file = do { local $/; &lt;&gt; };\n\n   $file =~ s/^.{8}//s\n      or die(\"Bad data\");\n\n   while (length($file)) {\n      $file =~ s/^([^\\0]*)\\0[^\\0]*\\0[^\\0]*\\0([^\\0]*)\\0//\n         or die(\"Bad data\");\n\n      my $user_id = $1;\n      my @items = split(/\\n/, $2, -1);\n      ...\n   }\n}\n</code></pre>\n\n<p>By using a buffer, you can get most of the benefits of reading in the whole file at once without actually reading the whole file in at once, but it will make the code more complicated.</p>\n\n<pre><code>{\n   my $buf = '';\n   my $not_eof = 1;\n\n   my $reader = sub {\n      $not_eof &amp;&amp;= read(\\*ARGV, $buf, 1024*1024, length($buf));\n      die($!) if !defined($not_eof);\n      return $not_eof;\n   };\n\n   while ($buf !~ s/^.{8}//s) {\n      $reader-&gt;()\n         or die(\"Bad data\");\n   }      \n\n   while (length($buf) || $reader-&gt;()) {\n      my $user_id;\n      my @items;\n      while (1) {\n         if ($buf =~ s/^([^\\0]*)\\0[^\\0]*\\0[^\\0]*\\0([^\\0]*)\\0//) {\n            $user_id = $1;\n            @items = split(/\\n/, $2, -1);\n            last;\n         }\n\n         $reader-&gt;()\n            or die(\"Bad data\");\n      }\n\n      ...\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 1, "accepted_answer_id": 57332776, "answer_count": 2, "score": 3, "last_activity_date": 1569821145, "creation_date": 1564752923, "last_edit_date": 1564757798, "question_id": 57327606, "link": "https://stackoverflow.com/questions/57327606/unpacking-an-unknown-serialised-format-with-variable-length", "title": "unpacking an unknown serialised format with variable length", "body": "<p>I'm using Perl (5.8.8, don't ask) and I'm looking at a serialised binary file that I want to parse and snaffle information from.</p>\n\n<p>The format is as follows:</p>\n\n<ul>\n<li>7 bytes whose meaning I do not know (DB DB 00 00 7A 03 00)</li>\n<li>null (0x00)</li>\n<li>7-byte string with user id</li>\n<li>null (0x00)</li>\n<li>12-byte string to be discarded</li>\n<li>null (0x00)</li>\n<li>3-byte number specifying number of items to follow</li>\n<li>null (0x00)</li>\n<li>variable-length string for first item</li>\n<li>newline (0x0a)</li>\n<li>variable-length string for second item</li>\n<li>newline (0x0a)</li>\n<li>etc ...</li>\n<li>null (0x00)</li>\n<li>7-byte string with user id</li>\n<li>etc ...</li>\n</ul>\n\n<p>My current code somewhat naively skips the first 8 bytes, then reads byte per byte until it hits a null and then does very specific parsing. </p>\n\n<pre><code>sub readGroupsFile {\n    my %index;\n\n    open (my $fh, \"&lt;:raw\", \"groupsfile\");\n    seek($fh, 8, 0);\n    while (read($fh, my $userID, 7)) {\n        $index{$userID} = ();\n        seek($fh, 18, 1);\n        my $groups = \"\";\n        while (read($fh, my $byte, 1)) {\n            last if (ord($byte) == 0);\n            $groups .= $byte;\n        }\n        my @grouplist = split(\"\\n\", $groups);\n        $index{$userID} = \\@grouplist;\n    }\n    close($fh);\n\n    return \\%index;\n}\n</code></pre>\n\n<p>Good news? It works.</p>\n\n<p>However, I think it's not very elegant, and wonder if I can use the 2-byte number that specifies the amount of items to follow to my advantage to speed up the parsing. I have no idea why else it would be there.</p>\n\n<p>I think <code>unpack()</code> and its templates may provide an answer, but I can't figure out how it can work with variable-length arrays of strings with their own variable lengths.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1564743496, "post_id": 57324506, "comment_id": 101140224, "body": "<code>sep_char =&gt; &#39;;&#39;</code> Should be <code>sep_char =&gt; &#39;,&#39;</code>  (based on your sample file)?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1564744502, "post_id": 57324506, "comment_id": 101140732, "body": "<i>&quot;now i want to sort this file as: .s.no,s2,s4,s5,s1,s0,name&quot;</i>. What is <code>s4</code> and <code>s0</code>? There is no column headers in the original csv with name <code>s4</code> and <code>s0</code>."}], "answers": [{"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 2, "last_activity_date": 1564743621, "creation_date": 1564743621, "answer_id": 57325169, "question_id": 57324506, "link": "https://stackoverflow.com/questions/57324506/sorting-csv-file-column-value-based-on-column-headers/57325169#57325169", "title": "Sorting CSV file column value based on column headers", "body": "<p>The handy <a href=\"https://metacpan.org/pod/Text::AutoCSV\" rel=\"nofollow noreferrer\">Text::AutoCSV</a> module lets you rearrange the column order as a one-liner:</p>\n\n<pre><code>$ perl -MText::AutoCSV -e 'Text::AutoCSV-&gt;new(in_file=&gt;\"in.csv\",out_file=&gt;\"out.csv\",out_fields=&gt;[\"SNO\",\"NAME\",\"S1\",\"S2\",\"S3\",\"S5\"])-&gt;write()'\n$ cat out.csv\ns.no,name,s1,s2,s3,s5\n1,aaaa,66,55,77,99\n2,bbbb,55,99,88,77\n3,cccc,66,88,77,44\n4,dddd,99,88,66,55\n</code></pre>\n\n<p>I'm not sure what your actual desired order of fields is because you have two and both of them include columns that aren't in the sample input file (It has two s2 columns; is one of them supposed to be s4?), but you should get the idea. Column names have to be all caps with special characters like . removed, but the actual names are used for the output.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 6457185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d996813062924ee8e06d81f6567b18?s=128&d=identicon&r=PG&f=1", "display_name": "Shanmugam E", "link": "https://stackoverflow.com/users/6457185/shanmugam-e"}, "edited": false, "score": 0, "creation_date": 1565004117, "post_id": 57325234, "comment_id": 101201952, "body": "Hi daxim, it giving only the single row of headers only, but i need respective header column values also, like S1,S2,S3,S4,S5 and it&#39;s whole column values that&#39;s next row, 2nd row values 66,55,77,99, then 3rd row values bbbb,55,99,88,77, like that all row values also should exchange"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 31, "user_id": 6457185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d996813062924ee8e06d81f6567b18?s=128&d=identicon&r=PG&f=1", "display_name": "Shanmugam E", "link": "https://stackoverflow.com/users/6457185/shanmugam-e"}, "edited": false, "score": 0, "creation_date": 1565011336, "post_id": 57325234, "comment_id": 101205873, "body": "@ShanmugamE, did you actually run the code? It does reorder the values. The hashref slice in the last line of code is responsible."}, {"owner": {"reputation": 31, "user_id": 6457185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d996813062924ee8e06d81f6567b18?s=128&d=identicon&r=PG&f=1", "display_name": "Shanmugam E", "link": "https://stackoverflow.com/users/6457185/shanmugam-e"}, "edited": false, "score": 0, "creation_date": 1565019802, "post_id": 57325234, "comment_id": 101210524, "body": "while (my $row = $csv_in-&gt;getline_hr($in)) {  15     $csv_out-&gt;say($out, [$row-&gt;@{@headers}]);  16     } while am running this code am getting following error. &quot;Array found where operator expected at solution.pl line 15, at end of line \t(Missing operator before ?) syntax error at solution.pl line 15, near &quot;-&gt;@&quot; Execution of solution.pl aborted due to compilation errors.&quot; so removed @ at 15 line,  $csv_out-&gt;say($out, [@headers]);  14 while (my $row = $csv_in-&gt;getline_hr($in)) {  15     $csv_out-&gt;say($out, [$row-&gt;{@headers}]);  16     } ~"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 31, "user_id": 6457185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d996813062924ee8e06d81f6567b18?s=128&d=identicon&r=PG&f=1", "display_name": "Shanmugam E", "link": "https://stackoverflow.com/users/6457185/shanmugam-e"}, "edited": false, "score": 0, "creation_date": 1565029039, "post_id": 57325234, "comment_id": 101214380, "body": "You can either upgrade your Perl (it&#39;s already so old it&#39;s unsupported), or change the hashref slice syntax to <code>@{$row}{@headers}</code>"}, {"owner": {"reputation": 31, "user_id": 6457185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d996813062924ee8e06d81f6567b18?s=128&d=identicon&r=PG&f=1", "display_name": "Shanmugam E", "link": "https://stackoverflow.com/users/6457185/shanmugam-e"}, "edited": false, "score": 0, "creation_date": 1565069052, "post_id": 57325234, "comment_id": 101224158, "body": "Hi daxm, if i add like below, while (my $row = $csv_in-&gt;getline_hr($in)) {  15     $csv_out-&gt;say($out, [@{$row}{@headers}]);  16     } am getting output file as simply empty rows with comma separation, it&#39;s not giving values S.NO,NAME,S1,S2,S3,S4,S5 ,,,,,, ,,,,,, ,,,,,, ,,,,,,"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 31, "user_id": 6457185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d996813062924ee8e06d81f6567b18?s=128&d=identicon&r=PG&f=1", "display_name": "Shanmugam E", "link": "https://stackoverflow.com/users/6457185/shanmugam-e"}, "edited": false, "score": 2, "creation_date": 1565095963, "post_id": 57325234, "comment_id": 101237413, "body": "You changed the capitalisation of the column names. You had lower-case column names in the first version of the question."}, {"owner": {"reputation": 31, "user_id": 6457185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d996813062924ee8e06d81f6567b18?s=128&d=identicon&r=PG&f=1", "display_name": "Shanmugam E", "link": "https://stackoverflow.com/users/6457185/shanmugam-e"}, "edited": false, "score": 0, "creation_date": 1565109534, "post_id": 57325234, "comment_id": 101245529, "body": "Oh yes, thank you, but if i want sort upper case headers like &quot;NAME&quot;, or mixing letters like &quot;Name&quot; means how i can use this script, what to change in it to work for mixing letters or upper case or lower case letters means,"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 31, "user_id": 6457185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d996813062924ee8e06d81f6567b18?s=128&d=identicon&r=PG&f=1", "display_name": "Shanmugam E", "link": "https://stackoverflow.com/users/6457185/shanmugam-e"}, "edited": false, "score": 0, "creation_date": 1565152496, "post_id": 57325234, "comment_id": 101257337, "body": "Change line 6 where the header names (and output order) are defined. If that&#39;s not what you mean, then you need to <a href=\"https://stackoverflow.com/questions/ask\">open a new question</a>."}, {"owner": {"reputation": 31, "user_id": 6457185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d996813062924ee8e06d81f6567b18?s=128&d=identicon&r=PG&f=1", "display_name": "Shanmugam E", "link": "https://stackoverflow.com/users/6457185/shanmugam-e"}, "edited": false, "score": 0, "creation_date": 1565157987, "post_id": 57325234, "comment_id": 101258740, "body": "Ok, and another one issue am getting following error, &quot;# CSV_PP ERROR: 1012 - INI - the header contains an empty field @ rec 1 pos 0  INI - the header contains an empty field&quot; when my CSV file column headers are like s5,s4,s.no,s2,s3,s1, - that&#39;s when last s1 completes with &quot;,&quot; it&#39;s throwing this error, why? how to fix that please."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 31, "user_id": 6457185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d996813062924ee8e06d81f6567b18?s=128&d=identicon&r=PG&f=1", "display_name": "Shanmugam E", "link": "https://stackoverflow.com/users/6457185/shanmugam-e"}, "edited": false, "score": 2, "creation_date": 1565158987, "post_id": 57325234, "comment_id": 101259120, "body": "Remove the last comma after s1. It&#39;s not fair that you keep changing the input."}, {"owner": {"reputation": 31, "user_id": 6457185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d996813062924ee8e06d81f6567b18?s=128&d=identicon&r=PG&f=1", "display_name": "Shanmugam E", "link": "https://stackoverflow.com/users/6457185/shanmugam-e"}, "edited": false, "score": 0, "creation_date": 1565162883, "post_id": 57325234, "comment_id": 101260819, "body": "sorry for inconvenient, actually based on excel sheet am generating this input csv file, so while parsing data from excel to csv, that comma operator getting place at end of the row line, by default, initially i didn&#39;t mention it sorry, so input csv file values ends with &quot;,&quot; only like s1, how to solve this?"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 3, "last_activity_date": 1564743834, "creation_date": 1564743834, "answer_id": 57325234, "question_id": 57324506, "link": "https://stackoverflow.com/questions/57324506/sorting-csv-file-column-value-based-on-column-headers/57325234#57325234", "title": "Sorting CSV file column value based on column headers", "body": "<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse autodie;\nuse Text::CSV qw();\nmy @headers = qw(s.no name s1 s2 s3 s4 s5);\nmy $csv_in = Text::CSV-&gt;new({binary =&gt; 1, auto_diag =&gt; 1});\nmy $csv_out = Text::CSV-&gt;new({binary =&gt; 1, auto_diag =&gt; 1});\nopen my $in, '&lt;:encoding(UTF-8)', 'a1.csv';\nopen my $out, '&gt;:encoding(UTF-8)', 'output1.csv';\n$csv_in-&gt;header($in);\n$csv_out-&gt;say($out, [@headers]);\nwhile (my $row = $csv_in-&gt;getline_hr($in)) {\n    $csv_out-&gt;say($out, [$row-&gt;@{@headers}]);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 80989, "user_id": 466862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=128&d=identicon&r=PG", "display_name": "Mark Rotteveel", "link": "https://stackoverflow.com/users/466862/mark-rotteveel"}, "edited": false, "score": 1, "creation_date": 1566584570, "post_id": 57623373, "comment_id": 101716297, "body": "Please don&#39;t post only code as answer, but include an explanation what this code does and how it solves the problem of the question. Answers with an explanation are generally of higher quality and more likely to attract upvotes."}], "tags": [], "owner": {"reputation": 81, "user_id": 10748937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6299e62261af6bf8135ff9290b0da7da?s=128&d=identicon&r=PG", "display_name": "Tux", "link": "https://stackoverflow.com/users/10748937/tux"}, "is_accepted": false, "score": 0, "last_activity_date": 1566552390, "creation_date": 1566552390, "answer_id": 57623373, "question_id": 57324506, "link": "https://stackoverflow.com/questions/57324506/sorting-csv-file-column-value-based-on-column-headers/57623373#57623373", "title": "Sorting CSV file column value based on column headers", "body": "<pre><code>my $eix = \"001\"; $csv_in-&gt;header ($in, munge_column_names =&gt; sub { s/^$/\"E\".$eix++/er/; });\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6457185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d996813062924ee8e06d81f6567b18?s=128&d=identicon&r=PG&f=1", "display_name": "Shanmugam E", "link": "https://stackoverflow.com/users/6457185/shanmugam-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1566552390, "creation_date": 1564741151, "last_edit_date": 1564983846, "question_id": 57324506, "link": "https://stackoverflow.com/questions/57324506/sorting-csv-file-column-value-based-on-column-headers", "title": "Sorting CSV file column value based on column headers", "body": "<p>Hi am newbie fir perl scripting, i need a help implement a logic for sorting CSV file header based column values,.</p>\n\n<p>Example:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>S.NO,NAME,S2,S5,S3,S4,S1\n1,aaaa,88,99,77,55,66\n2,bbbb,66,77,88,99,55\n3,cccc,55,44,77,88,66\n4,dddd,77,55,66,88,99\n</code></pre>\n\n<p>now i want to sort this file as below..</p>\n\n<p>s.no,s2,s4,s5,s1,s0,name => that's how i want is as i defined order of headers like s.no,name,s1,s2,s3,s4,s5 and it's respective whole columns values also should change based on header exchange, how to do it perl this one...?</p>\n\n<p>That's the required output is like following bellow,</p>\n\n<p>S.NO,NAME,S1,S2,S3,S4,S5\n1,aaaaaaa,66,88,77,55,99\n2,bbbbbbb,55,66,88,77,99\n3,ccccccc,66,55,77,88,44\n4,ddddddd,99,77,66,88,55</p>\n\n<p>or what the order i want in column headers, like below.</p>\n\n<p>S.NO,NAME,S5,S4,S3,S2,S1 -> like as per my requirement i need to re-order my columns header and it's respective columns value also..</p>\n\n<pre><code>#!/usr/bin/perl\n\n\nuse strict;\nuse warnings;\n\nuse Text::CSV;\nmy $file = 'a1.csv';\n\nmy $size = 3;\n\nmy @files;\n\nmy $csv = Text::CSV-&gt;new ({ binary =&gt; 1, auto_diag =&gt; 1, sep_char =&gt; ';' });\nopen my $in, \"&lt;:encoding(utf8)\", $file or die \"$file: $!\";\nwhile (my $row = $csv-&gt;getline($in)) {\n    if (not @files) {\n        my $file_counter = int @$row / $size;\n        $file_counter++ if @$row % $size;\n        for my $i (1 .. $file_counter) {\n            my $outfile = \"output$i.csv\";\n            open my $out, \"&gt;:encoding(utf8)\", $outfile or die \"$outfile: $!\";\n            push @files, $out;\n        }\n    }\n\n    my @fields = @$row;\n    foreach my $i (0 .. $#files) {\n        my $from = $i*$size;\n        my $to   = $i*$size+$size-1;\n\n        $to      = $to &lt;= $#fields ? $to : $#fields;\n        my @data = @fields[$from .. $to];\n\n        $csv-&gt;print($files[$i], \\@data);\n        print {$files[$i]} \"\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": ["xml", "linux", "perl", "twig"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1564739107, "post_id": 57323154, "comment_id": 101138123, "body": "<code>Get_Tag_Info(@_\\@Data)</code> Syntax error? And you have not defined <code>@Data</code>?"}, {"owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1564991869, "post_id": 57323154, "comment_id": 101196021, "body": "Have now edited post (thanks H&#229;kon)...Apologies, have now looked at duplicate question which does indeed answer mine (thanks to simbabque)"}], "owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "closed_date": 1564739028, "answer_count": 0, "score": 1, "last_activity_date": 1564991697, "creation_date": 1564736453, "last_edit_date": 1564991697, "question_id": 57323154, "link": "https://stackoverflow.com/questions/57323154/stop-scanning-xml-file-after-first-match-found-with-twig-handler", "closed_reason": "Duplicate", "title": "Stop scanning XML file after first match found with Twig handler", "body": "<p>I have been using the perl module XML::Twig for a while now. I use the module to load entire XML files into memory before scanning them and also twig handlers. I have a verge large XML file (usually 100s of Megabytes in size) stored in a zip archive. The file in question contains a single tag that I need to find. I use Twig handlers to find the tag and extract one of its attributes. The tag resides at the top of the XML file.</p>\n\n<p>The problem I have is that the time to find the tag and its associated attribute value can take a few minutes. This is because the handler scans the entire file. Is there a way to stop the handler after the match has been found (will always only be one) and not have to continue scanning the file? Here is the code I use:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Archive::Zip qw(:ERROR_CODES :CONSTANTS);\nuse XML::Twig;\nuse Data::Dumper;\nmy $File_To_Analyse='ZipFile1.zip';\nmy $start_Z=time;\nmy $zip = Archive::Zip-&gt;new();\n$zip-&gt;read($File_To_Analyse);\nmy $XML_File = $zip-&gt;contents('XML_File.xml');\nmy $duration_Z = time - $start_Z;\nmy $duration_Split_Z=CalcTimeHMS($duration_Z);\nprint \"Total Time for ZIP part:\" . $duration_Split_Z . \"\\n\";\n#\n#\n#\n#\nmy @Data=(-1);\nmy $start_T=time;\nmy $t1= XML::Twig-&gt;new(twig_roots =&gt; \n                      {'tagToLookFor' =&gt; \n                       sub {Get_Tag_Info(@_,\\@Data);}})-&gt;parse($XML_File);\n#\nmy $duration_T = time - $start_T;\nmy $duration_Split_T=CalcTimeHMS($duration_T);\nprint \"Total Time for TWIG part:\" . $duration_Split_T . \"\\n\";\nprint Dumper \\@Data;\n#\n#\n#\nsub Get_Tag_Info{\n    my( $t, $elt, $Data)= @_;\n    my $Accession = $elt-&gt;att('attname');\n    if(defined $Accession){\n        print \"Res:\" . $Accession . \"\\n\";\n        $Data[0]=$Accession;\n    }\n    $elt-&gt;purge;\n}\n</code></pre>\n\n<p>I put the timings in to see that loading the zipfile part was not taking too long. This takes a couple of seconds on my system. the \"Res\" print statement follows a couple of seconds afterwards and then the program terminates after a further 2 minutes. This tells me that the majority of the time is taken to scan the file after I have found my match. Can I stop this?</p>\n"}, {"tags": ["regex", "perl", "unicode"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1564721724, "post_id": 57319113, "comment_id": 101131019, "body": "That script does output <code>&#39;w\u01d2&#39;</code>. It&#39;s a two-wrongs happen to make a right kind of situation that&#39;s remedied by the changes mentioned by Shawn"}], "answers": [{"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 3, "last_activity_date": 1564712839, "creation_date": 1564712839, "answer_id": 57319174, "question_id": 57319113, "link": "https://stackoverflow.com/questions/57319113/how-to-use-unicode-in-perl-regexp/57319174#57319174", "title": "How to use unicode in perl regexp", "body": "<p>If you have UTF-8 text directly in a perl script, you need to tell perl that with the <a href=\"https://perldoc.pl/utf8\" rel=\"nofollow noreferrer\"><code>utf8</code> pragma</a>:</p>\n\n<pre><code>use utf8;\nuse open qw/:std :encoding(UTF-8)/; # Tell perl that STDOUT etc. should be UTF-8 encoded\nuse strict;\nuse warnings;\nmy $str = \"wo3\";\n$str =~ s/wo3/w\u01d2/g;\nprint(\"'$str'\\n\");\n</code></pre>\n\n<p>Running it:</p>\n\n<pre><code>$ perl foo.pl\n'w\u01d2'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564777362, "post_id": 57321557, "comment_id": 101155945, "body": "ug, Both modules produce UTF-8 rather than decoded text :( Worse, Lingua::Han::PinYin suffers from The Unicode Bug (as you can tell by removing <code>-Mutf8</code>)."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 3, "last_activity_date": 1564729998, "creation_date": 1564729998, "answer_id": 57321557, "question_id": 57319113, "link": "https://stackoverflow.com/questions/57319113/how-to-use-unicode-in-perl-regexp/57321557#57321557", "title": "How to use unicode in perl regexp", "body": "<p>Use modules to save yourself tedious work.</p>\n\n<pre><code>\u203a perl -mCEDict::Pinyin -E'\n    say CEDict::Pinyin-&gt;new(\"wo3\")-&gt;diacritic\n'\nw\u01d2\n\n\u203a perl -Mutf8 -mLingua::Han::PinYin -E'\n    say Lingua::Han::PinYin\n        -&gt;new(unicode =&gt; 1)\n        -&gt;han2pinyin(\"\u6211\")\n'\nw\u01d2\n</code></pre>\n\n<p><a href=\"http://p3rl.org/CEDict::Pinyin\" rel=\"nofollow noreferrer\">CEDict::Pinyin</a>, <a href=\"http://p3rl.org/Lingua::Han::PinYin\" rel=\"nofollow noreferrer\">Lingua::Han::PinYin</a></p>\n"}], "owner": {"reputation": 3412, "user_id": 1738579, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/914e641280c707f2ac0f6c58e112674d?s=128&d=identicon&r=PG", "display_name": "John Deighan", "link": "https://stackoverflow.com/users/1738579/john-deighan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1564729998, "creation_date": 1564712198, "question_id": 57319113, "link": "https://stackoverflow.com/questions/57319113/how-to-use-unicode-in-perl-regexp", "title": "How to use unicode in perl regexp", "body": "<p>Is it possible to get the correct output from this script?</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $str = \"wo3\";\n$str =~ s/wo3/w\u01d2/g;\nprint(\"'$str'\\n\");\n</code></pre>\n\n<p>I expect to see 'w\u01d2', not 'wo'</p>\n"}, {"tags": ["perl", "perlbrew"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564679029, "post_id": 57313730, "comment_id": 101119743, "body": "Very curious. I get the same on perlbrew managed v5.29.2 (which otherwise works as expected)"}], "answers": [{"comments": [{"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 0, "creation_date": 1564679581, "post_id": 57313862, "comment_id": 101119974, "body": "so how should I alter my script so I can <code>use autodie &#39;:all&#39;</code>?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 0, "creation_date": 1564680039, "post_id": 57313862, "comment_id": 101120156, "body": "Add <code>use IPC::System::Simple</code> and install it for all the perls you need to run the script in."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564680550, "post_id": 57313862, "comment_id": 101120372, "body": "(don&#39;t need <code>use IPC::System::Simple;</code> in order for <code>autodie</code> to work with <code>:all</code>, just that the module is on the system)"}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 0, "creation_date": 1564680592, "post_id": 57313862, "comment_id": 101120392, "body": "<code>cpanm</code> says that ` IPC::System::Simple` is already installed, but perlbrew cannot find it :("}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 0, "creation_date": 1564687298, "post_id": 57313862, "comment_id": 101123270, "body": "@con, Re &quot;<i><code>cpanm</code> says that ` IPC::System::Simple` is already installed</i>&quot;, You are presumably using the wrong <code>cpanm</code>. You need to use the one installed by the <code>perl</code> for which you want to install modules. You probably didn&#39;t install one with the <code>perl</code> in question, and it&#39;s picking up another one in your path. Why complicate things by using <code>cpanm</code>? Just use <code>cpan IPC::System::Simple</code>."}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564688338, "post_id": 57313862, "comment_id": 101123660, "body": "@ikegami unfortunately installing installing with <code>cpanm</code> still gives the same error :( even when I do the installation inside the perlbrew shell :( it&#39;s all up to date with version 1.25"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 0, "creation_date": 1564690174, "post_id": 57313862, "comment_id": 101124318, "body": "@con I&#39;ve had similar trouble due to <code>local::lib</code> (and/or <code>PERL5LIB</code>)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1564690442, "post_id": 57313862, "comment_id": 101124419, "body": "Please provide the output of <code>which cpan; head -1 &quot;$( which cpan )&quot;; which perl; perl -le&#39;print &quot;$_=$ENV{$_}&quot; for sort grep &#47;^PERL&#47;, keys %ENV;&#39;</code>"}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564754115, "post_id": 57313862, "comment_id": 101145788, "body": "@ikegami in normal shell <code>&#47;usr&#47;bin&#47;cpan #!&#47;usr&#47;bin&#47;perl &#47;usr&#47;bin&#47;perl</code> &amp; perlbrew <code>&#47;home&#47;con&#47;perl5&#47;perlbrew&#47;perls&#47;perl-5.30.0&#47;bin&#47;cpan #!&#47;home&#47;con&#47;perl5&#47;perlbrew&#47;perls&#47;perl-5.30.0&#47;bin&#47;perl &#47;home&#47;con&#47;perl5&#47;perlbrew&#47;perls&#47;perl-5.30.0&#47;bin&#47;perl PERL5LIB= PERLBREW_LIB= PERLBREW_MANPATH=&#47;home&#47;con&#47;perl5&#47;perlbrew&#47;perls&#47;perl-5.30.0&#47;&zwnj;&#8203;man PERLBREW_PATH=&#47;home&#47;con&#47;perl5&#47;perlbrew&#47;bin:&#47;home&#47;con&#47;perl5&#47;p&zwnj;&#8203;erlbrew&#47;perls&#47;perl-5&zwnj;&#8203;.30.0&#47;bin PERLBREW_PERL=perl-5.30.0 PERLBREW_ROOT=&#47;home&#47;con&#47;perl5&#47;perlbrew PERLBREW_SKIP_INIT=1 PERLBREW_VERSION=0.86 PERL_LOCAL_LIB_ROOT=</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1564775256, "post_id": 57313862, "comment_id": 101155178, "body": "One more: <code>&#47;home&#47;con&#47;perl5&#47;perlbrew&#47;perls&#47;perl-5.30.0&#47;bin&#47;perl -e&#39;use IPC::System::Simple&#39;; &#47;home&#47;con&#47;perl5&#47;perlbrew&#47;perls&#47;perl-5.30.0&#47;bin&#47;cpan IPC::System::Simple; &#47;home&#47;con&#47;perl5&#47;perlbrew&#47;perls&#47;perl-5.30.0&#47;bin&#47;perl -e&#39;use IPC::System::Simple&#39;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564775297, "post_id": 57313862, "comment_id": 101155189, "body": "(I do have two things for you to change, but I&#39;ll wait for this answer first)"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1564679162, "creation_date": 1564679162, "answer_id": 57313862, "question_id": 57313730, "link": "https://stackoverflow.com/questions/57313730/perlbrew-cannot-run-simple-scripts-ipcsystemsimple-required-for-fatalised-au/57313862#57313862", "title": "Perlbrew cannot run simple scripts IPC::System::Simple required for Fatalised/autodying system()", "body": "<p>I'm getting exactly the same error on a non-perlbrew Perl. It seems <a href=\"http://p3rl.org/autodie\" rel=\"nofollow noreferrer\">autodie</a> requires <a href=\"http://p3rl.org/IPC::System::Simple\" rel=\"nofollow noreferrer\">IPC::System::Simple</a> when running under fatal warnings or with <code>:all</code>, but it doesn't require it during installation.</p>\n\n<p>See also <a href=\"https://bugzilla.redhat.com/show_bug.cgi?id=1183231\" rel=\"nofollow noreferrer\">https://bugzilla.redhat.com/show_bug.cgi?id=1183231</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1591086663, "last_edit_date": 1591086663, "creation_date": 1564679172, "answer_id": 57313866, "question_id": 57313730, "link": "https://stackoverflow.com/questions/57313730/perlbrew-cannot-run-simple-scripts-ipcsystemsimple-required-for-fatalised-au/57313866#57313866", "title": "Perlbrew cannot run simple scripts IPC::System::Simple required for Fatalised/autodying system()", "body": "<p>From <a href=\"https://perldoc.perl.org/autodie.html\" rel=\"nofollow noreferrer\">autodie</a> we see that it's documented behavior</p>\n\n<blockquote>\n  <p>If <code>system</code> is specified as an argument to <code>autodie</code>, then it uses\n     <code>IPC::System::Simple</code> to do the heavy lifting. See the description of that\n     module for more information.</p>\n</blockquote>\n\n<p>So one does need <a href=\"https://metacpan.org/pod/IPC::System::Simple\" rel=\"nofollow noreferrer\">IPC::System::Simple</a> installed for <code>:all</code> tag (which implies <code>system</code>).</p>\n\n<p>It strikes me as curious that a core functionality requires a non-core module, and quietly too (doesn't complain at installation).</p>\n"}, {"tags": [], "owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "is_accepted": true, "score": 0, "last_activity_date": 1565017917, "creation_date": 1565017917, "answer_id": 57361451, "question_id": 57313730, "link": "https://stackoverflow.com/questions/57313730/perlbrew-cannot-run-simple-scripts-ipcsystemsimple-required-for-fatalised-au/57361451#57361451", "title": "Perlbrew cannot run simple scripts IPC::System::Simple required for Fatalised/autodying system()", "body": "<p>The solution, according to @ikegami, and that worked for me: <code>/home/con/perl5/perlbrew/perls/perl-5.30.0/bin/perl -e'use IPC::System::Simple'; /home/con/perl5/perlbrew/perls/perl-5.30.0/bin/cpan IPC::System::Simple; /home/con/perl5/perlbrew/perls/perl-5.30.0/bin/perl -e'use IPC::System::Simple'</code></p>\n\n<p>of course, for anyone in the future, this will be slightly different for you, as your directories may be set differently, and username isn't <code>con</code></p>\n"}], "owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 57361451, "answer_count": 3, "score": 2, "last_activity_date": 1591086663, "creation_date": 1564678558, "question_id": 57313730, "link": "https://stackoverflow.com/questions/57313730/perlbrew-cannot-run-simple-scripts-ipcsystemsimple-required-for-fatalised-au", "title": "Perlbrew cannot run simple scripts IPC::System::Simple required for Fatalised/autodying system()", "body": "<p>I am a new perlbrew user, as I wish to upgrade to perl 5.30.0 on Ubuntu.</p>\n\n<p>I have done</p>\n\n<pre><code>perlbrew init\nperlbrew install perl-5.30.0\nperlbrew switch perl-5.30.0\n</code></pre>\n\n<p>so I try to run this test script:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings FATAL =&gt; 'all';\nuse feature 'say';\nuse autodie ':all';\n</code></pre>\n\n<p>but this gives the long error </p>\n\n<pre><code>IPC::System::Simple required for Fatalised/autodying system() at /home/con/Scripts/say.pl line 6.\n    main::BEGIN() called at /home/con/Scripts/say.pl line 6\n    eval {...} called at /home/con/Scripts/say.pl line 6\nBEGIN failed--compilation aborted at /home/con/Scripts/say.pl line 6.\nCommand exited with non-zero status 2\n</code></pre>\n\n<p>I thought that libraries (especially standard ones) were supposed to be loaded automatically via perlbrew? How can I get this simple script to run?</p>\n"}, {"tags": ["string", "perl", "block"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1564665648, "post_id": 57309911, "comment_id": 101112252, "body": "I would recommend using <a href=\"https://metacpan.org/pod/Regexp::Grammars\" rel=\"nofollow noreferrer\">Regexp::Grammars</a>"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1564666599, "post_id": 57309911, "comment_id": 101112835, "body": "Wait, your code mentions JSON. Is the data actually JSON? If so, there are libraries you can use."}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1564668799, "post_id": 57310498, "comment_id": 101114272, "body": "Hi Dave, thanks for the hints I&#39;d prefer the 1st way...but any idea on how to remove and print to the exact same file that I am reading from ? Thanks and regards"}, {"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1564669393, "post_id": 57310498, "comment_id": 101114668, "body": "actually your code just prints the whole file but i wanted to have everything from string 1 down to the last closing brace removed...so it should just print everything from string 2 onwards...."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1564671585, "post_id": 57310498, "comment_id": 101115981, "body": "<i>actually your code just prints the whole file</i> It only does that if you call it with a string that isn&#39;t the name of a block in the file. How did you call it? <i>i wanted to have everything from string 1 down to the last closing brace removed</i> That&#39;s exactly what it does if you call it correctly."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1564673033, "post_id": 57310498, "comment_id": 101116785, "body": "@Unsal: <i>any idea on how to remove and print to the exact same file that I am reading from ?</i> Yes. See my latest update."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1564735880, "post_id": 57310498, "comment_id": 101136421, "body": "@Unsal: How are you calling it?"}, {"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1564740512, "post_id": 57310498, "comment_id": 101138805, "body": "like this: ./script_name [match] [&#39;data&#39;]"}, {"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1564740770, "post_id": 57310498, "comment_id": 101138933, "body": "actually this solves my problem, it may not be the cleanest way but it works:"}, {"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1565189013, "post_id": 57310498, "comment_id": 101275690, "body": "HI Dave, one question: What if I wanted to remove more than 2 string blocks? Any hint on that? I tried to wrap it into a foreach loop but it will not work like that..."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1565697117, "post_id": 57310498, "comment_id": 101426126, "body": "@Unsal: My code as it currently is will remove multiple blocks that match the same search criteria. If you want to add a new requirement to your question, then the best approach is to ask a new question. My answer answers the question that you asked."}, {"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1565870223, "post_id": 57310498, "comment_id": 101486165, "body": "thanks dave, i actually solved the problem using a lexical in my while loop"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1608469132, "last_edit_date": 1608469132, "creation_date": 1564667111, "answer_id": 57310498, "question_id": 57309911, "link": "https://stackoverflow.com/questions/57309911/perl-remove-string-block-from-file-and-save-to-file/57310498#57310498", "title": "perl remove string block from file and save to file", "body": "<p>You code mentions JSON, but your data isn't JSON. If it is JSON and you've just transcribed it badly, then please use <a href=\"https://metacpan.org/pod/JSON\" rel=\"nofollow noreferrer\">a JSON library</a>.</p>\n<p>But if your data isn't JSON, then something like this will do the trick.</p>\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $match = shift or die &quot;I need a string to match\\n&quot;;\n\nwhile (&lt;DATA&gt;) {\n  # If this is the start of a block we want to remove...\n  if (/^\\s*$match\\s+{/) {\n    # Set $braces to 1 (or 0 if the block closes on this line)\n    my $braces = /}/ ? 0 : 1;\n    # While $braces is non-zero\n    while ($braces) {\n      # Read the next line of the file\n      $_ = &lt;DATA&gt;;\n      # Increment or decrement $braces as appropriate\n      $braces-- if /}/;\n      $braces++ if /{/;\n    }\n  } else {\n    # Otherwise, just print the line\n    print;\n  }\n}\n\n__DATA__\nstring 1 {\n    abc { session 1 }\n    fairPrice {\n            ID LU0432618274456\n            Source 4\n            service xyz\n    }\n}\nstring 2 {\n    abc { session 23 }\n    fairPrice {\n            ID LU036524565456171\n            Source 4\n            service tzu \n    }\n}\n</code></pre>\n<p>Currently, this just prints the output to the console. And I use the <code>DATA</code> filehandle for easier testing. Switching to use real filehandles is left as an exercise for the reader :-)</p>\n<p><strong>Update:</strong> I decided that I didn't like all the incrementing and decrementing of <code>$braces</code> using regex matches. So here's another (improved?) version that uses <code>y/.../.../</code> to count the occurrences of opening and closing braces in the line. It's possible that this version might be slightly less readable (the syntax highlighter certainly thinks so).</p>\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $match = shift or die &quot;I need a string to match\\n&quot;;\n\nwhile (&lt;DATA&gt;) {\n  if (/^\\s*$match\\s+{/) {\n    my $braces = y/{// - y/}//;\n    while ($braces) {\n      $_ = &lt;DATA&gt;;\n      $braces -= y/}//;\n      $braces += y/{//;\n    }\n  } else {\n    print;\n  }\n}\n\n__DATA__\nstring 1 {\n    abc { session 1 }\n    fairPrice {\n            ID LU0432618274456\n            Source 4\n            service xyz\n    }\n}\nstring 2 {\n    abc { session 23 }\n    fairPrice {\n            ID LU036524565456171\n            Source 4\n            service tzu \n    }\n}\n</code></pre>\n<p><strong>Update 2:</strong> Ok, I originally said that dealing with real filehandles would be left as an exercise for the reader. But here's a version that does that.</p>\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $match = shift or die &quot;I need a string to match\\n&quot;;\n\nopen my $fh, '+&lt;', 'data' or die $!;\n\n# Read all the data from the file\nmy @data = &lt;$fh&gt;;\n\n# Empty the file\nseek $fh, 0, 0;\ntruncate $fh, 0;\n\nmy $x = 0;\nwhile ($x &lt;= $#data) {\n  $_ = $data[$x++];\n  if (/^\\s*$match\\s+{/) {\n    my $braces = y/{// - y/}//;\n    while ($braces) {\n      $_ = $data[$x++];\n      $braces -= y/}//;\n      $braces += y/{//;\n    }\n  } else {\n    print $fh $_;\n  }\n}\n</code></pre>\n<p>Currently, I've hard-coded the filename to be <code>data</code>. I hope it's obvious how to fix that.</p>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1564667682, "creation_date": 1564667682, "answer_id": 57310690, "question_id": 57309911, "link": "https://stackoverflow.com/questions/57309911/perl-remove-string-block-from-file-and-save-to-file/57310690#57310690", "title": "perl remove string block from file and save to file", "body": "<p>Here is an example using <a href=\"https://metacpan.org/pod/Regexp::Grammars\" rel=\"nofollow noreferrer\"><code>Regexp::Grammars</code></a>:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\nuse Data::Printer;\nuse Regexp::Grammars;\n{\n    my ($block_name, $block_num) = @ARGV;\n    my $parser = qr!\n        &lt;nocontext:&gt; \n        &lt;blocks&gt;\n        &lt;rule: blocks&gt; &lt;[block]&gt;+ \n        &lt;rule: block&gt; &lt;block_name&gt; &lt;block_num&gt; &lt;braced_item&gt;\n        &lt;token: block_name&gt; \\w+\n        &lt;token: block_num&gt; \\d+\n        &lt;rule: braced_item&gt;   \\{  (?: &lt;escape&gt; | &lt;braced_item&gt; | [^{}] )*  \\}\n        &lt;token: escape&gt; \\\\ .\n    !xms;\n\n    my $data = read_file('cfg.txt');\n    if ($data =~ $parser) {\n        print_blocks( $/{blocks}{block}, $block_name, $block_num );\n    }\n    else {\n        warn \"No match\";\n    }\n}\n\nsub print_blocks {\n    my ( $blocks, $block_name, $block_num ) = @_;\n\n    for my $block (@$blocks) {\n        next if ($block-&gt;{block_name} eq $block_name)\n          &amp;&amp; ($block-&gt;{block_num} == $block_num);\n        say $block-&gt;{block_name}, \" \", $block-&gt;{block_num},\n          \" \", $block-&gt;{braced_item}{braced_item};\n    }\n}\n\nsub read_file {\n    my ( $fn ) = @_;\n\n    open ( my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\n    my $str = do { local $/; &lt;$fh&gt; };\n    close $fh;\n    return $str;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1564821299, "last_edit_date": 1564821299, "creation_date": 1564737476, "answer_id": 57323443, "question_id": 57309911, "link": "https://stackoverflow.com/questions/57309911/perl-remove-string-block-from-file-and-save-to-file/57323443#57323443", "title": "perl remove string block from file and save to file", "body": "<p>Can use <a href=\"https://perldoc.perl.org/Text/Balanced.html\" rel=\"nofollow noreferrer\">Text::Balanced</a> to break the text into blocks delimited by <code>{}</code>, in a way that also keeps the text preceding and following the blocks.</p>\n\n<p>In that list drop the element with the specific skip-pattern (<code>string 1</code> here) and its following block and retain everything else. Then overwrite the source file with that.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Path::Tiny;\nuse Text::Balanced qw(extract_bracketed extract_multiple);\n\nmy $file = shift // die \"Usage: $0 file\\n\";  #/\nmy $text = path($file)-&gt;slurp;\n\n# returns: 'string 1', BLOCK, 'string 2', BLOCK (may have spaces/newlines)\nmy @elems = extract_multiple( \n    $text, [ sub { extract_bracketed($text, '{}') } ]\n); \n\nmy $skip_phrase = 'string 1';    \nmy (@text_keep, $skip);\n\nfor (@elems) {\n    if (/$skip_phrase/) { \n        $skip = 1;\n        next;\n    }   \n    elsif ($skip) {\n        $skip = 0;\n        next\n    }\n\n    push @text_keep, $_;\n}\n\nprint for @text_keep;\n\n# Overwrite source; uncomment when tested\n#open my $fh_out, '&gt;', $file or die \"Can't open $file: $!\";  \n#print $fh_out $_ for @text_keep;\n</code></pre>\n\n<p>Tested with files with more text and blocks, both before and after the one to drop.</p>\n\n<p>Another tool that can be used to extract delimited chunks is in <a href=\"https://metacpan.org/pod/Regexp::Common\" rel=\"nofollow noreferrer\">Regexp::Common</a>, see <a href=\"https://stackoverflow.com/a/46121634/4653379\">this post</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 3676, "user_id": 414279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd8e859d8cf73f2d49eb640964605bb?s=128&d=identicon&r=PG", "display_name": "rurban", "link": "https://stackoverflow.com/users/414279/rurban"}, "is_accepted": false, "score": 1, "last_activity_date": 1564739010, "creation_date": 1564739010, "answer_id": 57323869, "question_id": 57309911, "link": "https://stackoverflow.com/questions/57309911/perl-remove-string-block-from-file-and-save-to-file/57323869#57323869", "title": "perl remove string block from file and save to file", "body": "<p>I would use proper <strong>json</strong> as format and <strong>jq</strong> as processor for that format. Rewriting a hack in perl does not make much sense.</p>\n"}], "owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 57310498, "answer_count": 4, "score": 0, "last_activity_date": 1608469132, "creation_date": 1564665427, "question_id": 57309911, "link": "https://stackoverflow.com/questions/57309911/perl-remove-string-block-from-file-and-save-to-file", "title": "perl remove string block from file and save to file", "body": "<p>I have a file that looks like this:</p>\n\n<pre><code>string 1 {\n    abc { session 1 }\n    fairPrice {\n            ID LU0432618274456\n            Source 4\n            service xyz\n    }\n}\nstring 2 {\n    abc { session 23 }\n    fairPrice {\n            ID LU036524565456171\n            Source 4\n            service tzu \n    }\n}\n</code></pre>\n\n<p>My program should read in the file with a search-parameter given (for example \"string 1\") and search the complete block until \"}\" and remove that part from the file. Can someone assist on that...I have some code so far but how can I do the removal and saving to the same file again?</p>\n\n<pre><code>my $fh = IO::File-&gt;new( \"$fname\", \"r\" ) or die ( \"ERROR: Strategy file      \\\"$fname\\\" not found.\" );\nwhile($line=&lt;$fh&gt;)\n{\n    if ($line =~ /^\\s*string 1\\s*\\w+\\s*\\{\\s*$/) {\n            $inside_json_msg = 1;\n            $msg_json .= $line;\n    }\n    else {\n            if ($inside_json_msg)\n            {\n               if ($line =~ m/^\\}\\s*$/) {\n\n                 $msg_json.= $line if defined($line);\n                 $inside_json_msg = 0;\n               } else {\n                 $msg_json .= $line;\n               }\n            }\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "informix", "dbi", "perl5.30"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1564664320, "post_id": 57308854, "comment_id": 101111444, "body": "Are you on a windows machine?"}, {"owner": {"reputation": 1653, "user_id": 7761106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e643f7850e7d773cacc701f8b090e13f?s=128&d=identicon&r=PG&f=1", "display_name": "jsagrera", "link": "https://stackoverflow.com/users/7761106/jsagrera"}, "edited": false, "score": 0, "creation_date": 1564666205, "post_id": 57308854, "comment_id": 101112580, "body": "I think the Makefile.PL script automatically checks for a valid Informix environment, but just in case, I suggest to check that your esql works before trying to use it. Try something like &quot;esql esqlbasic.ec&quot;"}, {"owner": {"reputation": 125, "user_id": 714976, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f65f895befa184d79c103fa3a4a29989?s=128&d=identicon&r=PG", "display_name": "Qtdesigner", "link": "https://stackoverflow.com/users/714976/qtdesigner"}, "edited": false, "score": 0, "creation_date": 1564668156, "post_id": 57308854, "comment_id": 101113859, "body": "Thanks for the suggestion. This esql esqlbasic.ec works on my env."}, {"owner": {"reputation": 125, "user_id": 714976, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f65f895befa184d79c103fa3a4a29989?s=128&d=identicon&r=PG", "display_name": "Qtdesigner", "link": "https://stackoverflow.com/users/714976/qtdesigner"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1564668183, "post_id": 57308854, "comment_id": 101113874, "body": "@H&#229;konH&#230;gland yes i am on windows"}, {"owner": {"reputation": 1653, "user_id": 7761106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e643f7850e7d773cacc701f8b090e13f?s=128&d=identicon&r=PG&f=1", "display_name": "jsagrera", "link": "https://stackoverflow.com/users/7761106/jsagrera"}, "edited": false, "score": 0, "creation_date": 1564669041, "post_id": 57308854, "comment_id": 101114438, "body": "hmmm.. for what I see in the source, support for Windows was removed in the latest versions. which version are you trying? 2015.1101 or below?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1564706826, "post_id": 57308854, "comment_id": 101128399, "body": "As the author (&quot;Guardian&quot; in my signature blocks) of DBD::Informix, I can tell you that it did once more or less work on Windows NT platforms back in the day \u2014 the day being circa 2002 when NT was still more or less appropriate as the designator (XP was the new kid on the block). Since then, it has not reliably been maintained on Windows \u2014 though I&#39;ve done nothing to proactively break support. So, you are on a journey of investigation. Can we safely assume you&#39;re using DBD::Informix 2018.1031? We should probably take this discussion to email \u2014 the official support channel for DBD::Informix."}], "owner": {"reputation": 125, "user_id": 714976, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f65f895befa184d79c103fa3a4a29989?s=128&d=identicon&r=PG", "display_name": "Qtdesigner", "link": "https://stackoverflow.com/users/714976/qtdesigner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564661776, "creation_date": 1564661776, "question_id": 57308854, "link": "https://stackoverflow.com/questions/57308854/couldnt-execute-esql-exe-to-determine-the-esql-c-libraries", "title": "Couldn&#39;t execute ESQL.EXE to determine the ESQL/C libraries", "body": "<p>I am building perl 5.30 from source code. I successfully build perl.\nNow i am trying to build DBD::Informix with my perl.\nAll the esql test compiled successfully  but its failing when going for library.</p>\n\n<p>perl Makefile.pl</p>\n\n<p>The error which i am facing on console is\n\"</p>\n\n<blockquote>\n  <p>Determining which Informix libraries etc to use... MZ\u00c9$@: not found\n  \u00a3\u00e8E\u00b0\u00eaE\u00b0\u03b4\u00e8M\u00b0\u00c7\u2534\u00eaM\u00b0\u03b4\u03b4\u00a1\u2562\u00f2\u2265\u221a\u00a0\u00a0\u2562\u00e4\u03a6\u00b7\u00a0\u00a0\u00efM\u00ef\u00fc\u255e\u255f\u00e0\u2320\u221a\u00a0\u00a0\u2555\u255f\u00f1\u00e4G\u255f\u00bf\u00e4G\u00ed\u255d\u2310F\u2555\u255f\u00ee\u2551G\u255f\u00ee\u2551G\u255f\u00ee\u2551G\u255f\u2320\u00e7G\u2555\u00e7\u03c6\u00efM\u221e\u255bQ\u00ebU\u207f\u00efE\u2320Q\u00efR\u00a0\u2568\u250cGtB\u00efM\u221e\u255bQ\u00e2\u0393\u00e2\u00b7t3\u00efE\u221e\u255bH\u00e2\u00df\u00e2\u2219t$\u00efU\u221e\u255bB\u00e2\u03b1thL\u00e2\u2219:\n  not found jh\u20a7%\u00a0\u00a0\u03a6\u00ee\u2567\u00a0\u00a0\u00e2\u03b4\u00efU\u03a6\u00e2\u03a9: not found\"</p>\n</blockquote>\n\n<p>The code which giving error is : </p>\n\n<pre><code>\"my $esqlscript = (-f $esql) ? $esql : \"$ID/bin/esql\";\nmy $libs = `$Perl -pe 's/^\\\\s*exec/echo/' $esqlscript | sh -s -- -o pseudonym $esqlc_flags dbd::ix.o`    || die \"Couldn't execute $esqlscript to determine the ESQL/C libraries\\n\";\n</code></pre>\n\n<p>Note: I am using Informix client SDK 3.50.\"</p>\n\n<p>Any help would be appreciable.Thanks</p>\n"}, {"tags": ["arrays", "perl", "variables", "awk"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 5, "creation_date": 1564659066, "post_id": 57307369, "comment_id": 101108483, "body": "Why not just do it all in perl? <b>Especially</b> if you&#39;re dealing with HTML, since perl has many HTML parsing modules to choose from to do a proper job."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1564657202, "creation_date": 1564657202, "answer_id": 57307506, "question_id": 57307369, "link": "https://stackoverflow.com/questions/57307369/how-to-use-awk-command-where-the-file-is-perl-variable/57307506#57307506", "title": "how to use awk command where the file is perl variable", "body": "<p>When you write something like:</p>\n\n<pre><code>awk '/\"\"&gt;/{nr[NR]; nr[NR+6]}; NR in nr' XXXX\n</code></pre>\n\n<p>Then <code>awk</code> expects \"XXXX\" to be the name of a file that it should work on. But (as I understand it) that's not the situation that you have. It sounds to me as though \"XXXX\" is the actual data that you want to work on. In that case, you need to pipe the data into <code>awk</code>. The easiest option is to use <code>echo</code>:</p>\n\n<pre><code>echo XXXX | awk '/\"\"&gt;/{nr[NR]; nr[NR+6]}; NR in nr'\n</code></pre>\n\n<p>You should be able to do the same thing using Perl' <code>system()</code> function.</p>\n\n<p>But it might be simpler to reimplement your <code>awk</code> code as Perl.</p>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 3, "last_activity_date": 1564660161, "last_edit_date": 1564660161, "creation_date": 1564659487, "answer_id": 57308182, "question_id": 57307369, "link": "https://stackoverflow.com/questions/57307369/how-to-use-awk-command-where-the-file-is-perl-variable/57308182#57308182", "title": "how to use awk command where the file is perl variable", "body": "<p>Here is an example using <a href=\"https://metacpan.org/pod/IPC::Run3\" rel=\"nofollow noreferrer\"><code>IPC::Run3</code></a>:</p>\n\n<pre><code>use IPC::Run3;\n\n# [...]\n\nmy @cmd = ('awk', '/\"\"&gt;/{nr[NR]; nr[NR+6]}; NR in nr');\nmy $in = $download_content;\nmy $out;\nrun3 \\@cmd, \\$in, \\$out; \n$filter = $out;\n</code></pre>\n\n<p>Alternatively, you can do it in <code>perl</code> (not calling <code>awk</code>):</p>\n\n<pre><code>my @lines = split /\\n/, $download_content;\nmy %nr;\nmy $NR = 0;\nmy $filter = \"\";\nfor ( @lines ) {\n    if ( /\"\"&gt;/ ) {\n        $nr{$NR}++;\n        $nr{$NR + 6}++;\n    }\n    $filter .= \"$_\\n\" if $nr{$NR};\n    $NR++;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10932132, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ybpD-4yhnz0/AAAAAAAAAAI/AAAAAAAAAMI/yeC52GC6OJ8/photo.jpg?sz=128", "display_name": "kunal vyas", "link": "https://stackoverflow.com/users/10932132/kunal-vyas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1564660161, "creation_date": 1564656664, "last_edit_date": 1564656884, "question_id": 57307369, "link": "https://stackoverflow.com/questions/57307369/how-to-use-awk-command-where-the-file-is-perl-variable", "title": "how to use awk command where the file is perl variable", "body": "<ol>\n<li><p>Unable to run the awk command in perl script and my file is variable.</p></li>\n<li><p>I have tried in different ways like use system(<code>awk '/\"\"&gt;/{nr[NR]; nr[NR+6]}; NR in nr' $download_content</code>) and store the output in array but no luck.</p>\n\n<pre><code>$filter = `awk '/\"\"&gt;/{nr[NR]; nr[NR+6]}; NR in nr' $download_content`;\n</code></pre></li>\n<li><p>here $download_content is a webpage i.e in html format and i need to extract the search pattern line and its next 6th line.</p></li>\n</ol>\n"}, {"tags": ["perl", "xs", "perlapi"], "comments": [{"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 1, "creation_date": 1564671053, "post_id": 57305409, "comment_id": 101115677, "body": "The <code>PERL_IMPLICIT_CONTEXT</code> macro will pull <code>MULTIPLICITY</code> in, go look at the <a href=\"https://perl5.git.perl.org/perl.git/blob/45f8e7b102987a417bf55438e858cedced8aedbe:/perl.h#l169\" rel=\"nofollow noreferrer\"><code>perl.h</code></a> header. All that nastiness control what the <code>pTHX_</code>, <code>dTHX_</code>, etc macros will expand to."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564725908, "post_id": 57305409, "comment_id": 101132260, "body": "Re &quot;<i>So, when writing XS code is there any difference in writing <code>#ifdef MULTIPLICITY</code> versus writing <code>#ifdef PERL_IMPLICIT_CONTEXT</code>?</i>&quot;, Why would use either? (What are you trying to check for?)"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 1, "last_activity_date": 1564692143, "creation_date": 1564692143, "answer_id": 57316710, "question_id": 57305409, "link": "https://stackoverflow.com/questions/57305409/the-relationship-between-multiplicity-and-perl-implicit-context/57316710#57316710", "title": "The relationship between MULTIPLICITY and PERL_IMPLICIT_CONTEXT", "body": "<p>Here is what I have found so far. Running <a href=\"https://metacpan.org/pod/release/XSAWYERX/perl-5.30.0/INSTALL#Run-Configure\" rel=\"nofollow noreferrer\"><code>sh Configure -des</code></a> creates the header <code>config.h</code>. This header file will:</p>\n\n<ul>\n<li><p>define <code>USE_ITHREADS</code> if and only if <code>Configure</code> was given the flag <code>-Dusethreads</code>, e.g.:</p>\n\n<pre><code>sh Configure -des -Dusethreads\n</code></pre></li>\n<li><p>define <code>MULTIPLICITY</code> if and only if <code>Configure</code> was given the flag <code>-Dusemultiplicity</code>:</p>\n\n<pre><code>sh Configure -des -Dusemultiplicity\n</code></pre></li>\n<li><p>Setting <code>MULTIPLICITY</code> through <code>ccflags</code> will <strong>not</strong> set <code>MULTIPLICITY</code> in <code>config.h</code>, e.g.:</p>\n\n<pre><code>sh Configure -des -Accflags=\"-DMULTIPLICITY\"\n</code></pre></li>\n<li><p><code>Configure</code> has no <code>-D</code> flag for <code>PERL_IMPLICIT_CONTEXT</code>, and defining it through <code>ccflags</code> will <strong>not</strong> define it in <code>config.h</code>.</p></li>\n</ul>\n\n<p>The generated <code>config.h</code> header is <code>#include</code>d by <a href=\"https://perl5.git.perl.org/perl.git/blob/HEAD:/perl.h\" rel=\"nofollow noreferrer\"><code>perl.h</code></a>. Note, that the latter header is also usually included by Perl XS extension files (<code>.xs</code>-files).\nAt line 59 in <a href=\"https://perl5.git.perl.org/perl.git/blob/HEAD:/perl.h#l59\" rel=\"nofollow noreferrer\"><code>perl.h</code></a> we have:</p>\n\n<pre><code>#ifdef USE_ITHREADS  \n#  if !defined(MULTIPLICITY)\n#    define MULTIPLICITY\n#  endif\n#endif\n\n#ifdef PERL_GLOBAL_STRUCT_PRIVATE\n#  ifndef PERL_GLOBAL_STRUCT\n#    define PERL_GLOBAL_STRUCT\n#  endif\n#endif\n\n#ifdef PERL_GLOBAL_STRUCT\n#  ifndef MULTIPLICITY\n#    define MULTIPLICITY\n#  endif\n#endif\n\n#ifdef MULTIPLICITY\n#  ifndef PERL_IMPLICIT_CONTEXT\n#    define PERL_IMPLICIT_CONTEXT\n#  endif\n#endif\n</code></pre>\n\n<p>This means that:</p>\n\n<ul>\n<li><p>if <code>-Dusethreads</code> is given, <code>USE_ITHREADS</code>, <code>MULTIPLICITY</code>, and <code>PERL_IMPLICIT_CONTEXT</code> will all be defined.</p></li>\n<li><p>if <code>-Dusemultiplicity</code> is given, <code>MULTIPLICITY</code> and <code>PERL_IMPLICIT_CONTEXT</code> will be defined, whereas <code>USE_ITHREADS</code> will be undefined.</p></li>\n<li><p>if none of <code>-Dusethreads</code> or <code>-Dusemultiplicity</code> is given <code>USE_ITHREADS</code>, <code>MULTIPLICITY</code>, and <code>PERL_IMPLICIT_CONTEXT</code> will all be undefined.</p></li>\n<li><p>it is not possible to have <code>MULTIPLICITY</code> defined and <code>PERL_IMPLICIT_CONTEXT</code> undefined (unless one uses <code>ccflags</code>, but then this will only be during the perl build. XS extension modules that include <code>perl.h</code> will not see this)</p></li>\n</ul>\n\n<p>So extension modules can usually assume that either:</p>\n\n<ul>\n<li><code>MULTIPLICITY</code> and <code>PERL_IMPLICIT_CONTEXT</code> are both defined, or </li>\n<li><code>MULTIPLICITY</code> and <code>PERL_IMPLICIT_CONTEXT</code> are both undefined.</li>\n</ul>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 57316710, "answer_count": 1, "score": 1, "last_activity_date": 1564692143, "creation_date": 1564650227, "question_id": 57305409, "link": "https://stackoverflow.com/questions/57305409/the-relationship-between-multiplicity-and-perl-implicit-context", "title": "The relationship between MULTIPLICITY and PERL_IMPLICIT_CONTEXT", "body": "<p>What is the relationship between the Perl API macros <code>MULTIPLICITY</code> and <code>PERL_IMPLICIT_CONTEXT</code>? </p>\n\n<p>According to <a href=\"https://perldoc.perl.org/perlguts.html#How-multiple-interpreters-and-concurrency-are-supported\" rel=\"nofollow noreferrer\"><code>perlguts</code></a>:</p>\n\n<blockquote>\n  <p>One macro controls the major Perl build flavor: <code>MULTIPLICITY</code>. The\n  <code>MULTIPLICITY</code> build has a C structure that packages all the interpreter\n  state. With multiplicity-enabled perls, <code>PERL_IMPLICIT_CONTEXT</code> is also\n  normally defined, and enables the support for passing in a \"hidden\"\n  first argument that represents all three data structures.</p>\n</blockquote>\n\n<p>(by the way, which <em>\"three data structures\"</em> are referred to here?)</p>\n\n<p>I have noticed that when I build perl with <a href=\"https://metacpan.org/pod/release/XSAWYERX/perl-5.30.0/INSTALL#Threads\" rel=\"nofollow noreferrer\"><code>usethreads</code></a>:</p>\n\n<pre><code>./Configure -des -Dusethreads\n</code></pre>\n\n<p>the macros <code>PERL_IMPLICIT_CONTEXT</code> and <code>MULTIPLICITY</code> will both be set (defined). \nAlso, in <a href=\"https://metacpan.org/source/XSAWYERX/perl-5.30.0/embedvar.h\" rel=\"nofollow noreferrer\"><code>embedvar.h</code></a> there is a comment that may be relevant:</p>\n\n<blockquote>\n  <p>The following combinations of <code>MULTIPLICITY</code> and\n  <code>PERL_IMPLICIT_CONTEXT</code>    are supported:<br>\n       1) none<br>\n       2) MULTIPLICITY  # supported for compatibility<br>\n       3) MULTIPLICITY &amp;&amp; PERL_IMPLICIT_CONTEXT  </p>\n  \n  <p>All other combinations of these flags are errors.</p>\n  \n  <p>only #3 is supported directly, while #2 is a special\n    case of #3 (supported by redefining vTHX appropriately).</p>\n</blockquote>\n\n<ul>\n<li><p>So, when writing XS code is there any difference in writing\n<code>#ifdef MULTIPLICITY</code> versus writing <code>#ifdef PERL_IMPLICIT_CONTEXT</code>?</p></li>\n<li><p>What is the history behind the two variables? It seems like they today could be reduced to a single. For example, what would happen if all occurences of <code>MULTIPLICITY</code> was replaced with <code>PERL_IMPLICIT_CONTEXT</code> in the perl source? What would it break?</p></li>\n</ul>\n"}, {"tags": ["shell", "perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1564626641, "post_id": 57300884, "comment_id": 101095669, "body": "There are a number of Perl modules for sending emails that you could use. Search around on metacpan for one that looks good."}, {"owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1564626770, "post_id": 57300884, "comment_id": 101095684, "body": "@Shawn i know that. But i have some restriction under which i have to use this"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564634162, "post_id": 57300884, "comment_id": 101096964, "body": "Various versions of <code>mailx</code> exist, which differ (a lot) in how to specify headers.  Even <code>sendmail</code> is better (more consistent) -- can you use that instead?"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1564643657, "post_id": 57300884, "comment_id": 101100104, "body": "@Developer : If you want to handle everything in shell, write it as a shell script, and invoke your script from your Perl application. This also makes debugging easier."}, {"owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564663023, "post_id": 57300884, "comment_id": 101110757, "body": "@zdim sendmail is also a good option i will try that as well."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1564677113, "post_id": 57300884, "comment_id": 101118877, "body": "&quot;<i>sendmail is also a good option</i>&quot; --- then how&#39;s <a href=\"https://stackoverflow.com/a/39459204/4653379\">this post</a>, for example?  Something I could find readily.  There&#39;s a lot more on SO."}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1564635463, "creation_date": 1564635463, "answer_id": 57302038, "question_id": 57300884, "link": "https://stackoverflow.com/questions/57300884/how-to-use-shell-script-code-in-a-perl-script/57302038#57302038", "title": "How to use shell script code in a Perl script", "body": "<p>A somewhat literal translation of your shell code would be:</p>\n\n<pre><code>if($ARGV[0] eq \"ty\" &amp;&amp; $ARG[1]){\n    my $pid = open(STDIN, '-|') // die \"Can't fork(): $!\";\n    if ($pid == 0) {\n        print \"MIME-Version: 1.0\\n\";\n        print \"Subject: \\n\";\n        print \"Content-Type: text/html\\n\";\n\n        exec 'cat', ... or die \"Can't exec() cat: $!\";\n        # or print more text, but don't forget to exit() afterwards if you don't exec\n    }\n}\n</code></pre>\n\n<p>The idea is to create a pipe and a subprocess. Using <a href=\"https://perldoc.pl/functions/open\" rel=\"nofollow noreferrer\"><code>open</code></a> as shown above does that, with the write end of the pipe connected to the child's <code>STDOUT</code> and the read end connected to the parent's <code>STDIN</code>.</p>\n\n<p>The child process then writes data to the pipe and exits. It can do all the work by itself and <code>exit</code>, or <code>exec</code> into <code>cat</code> at the end.</p>\n\n<p>All of the output produced by the child is available on the parent's <code>STDIN</code>, which is inherited by <code>mailx</code>.</p>\n"}], "owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 57302038, "answer_count": 1, "score": 0, "last_activity_date": 1564635463, "creation_date": 1564624332, "question_id": 57300884, "link": "https://stackoverflow.com/questions/57300884/how-to-use-shell-script-code-in-a-perl-script", "title": "How to use shell script code in a Perl script", "body": "<p>I want to convert a shell script code in Perl and use exec to execute the code. I have program written in perl but on a condition i have to add a code which i know how we can do in shell script but not sure how we can do in perl.</p>\n\n<p>Shell Script Code:</p>\n\n<pre><code>(\necho \"MIME-Version: 1.0\"\necho \"Subject: \"\necho \"Content-Type: text/html\"\ncat &lt;emailbody&gt;\n) | mailx -r \"test@gmail.com\" \n</code></pre>\n\n<p>My Perl Code:</p>\n\n<pre><code>!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $mailx = \"/usr/bin/mailx\";\n\nif($ARGV[0] eq \"ty\" &amp;&amp; $ARG[1]){\n /// Here we want to use the shell script code .\n}\n\nmy @args_to_pass = ($mailx, @ARGV);\nexec @args_to_pass;\n</code></pre>\n"}]