[{"tags": ["file", "perl", "hash"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547682060, "post_id": 54226628, "comment_id": 95280089, "body": "The <code>$output</code> is a string with all of the file (even newlines included).  That won&#39;t make <code>%format_key</code> very happy and is different from what you do &quot;manually.&quot;  What is the format of the file?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547684636, "post_id": 54226628, "comment_id": 95280639, "body": "If you can choose in which format to store these things in the file see answer by @Grinnz for some options, where the most reasonable ones are presented in sample code. But if the file is given  then my question above stands: what is the format of that file?  (Unless it <i>is</i> one of options in the answer.)"}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 2, "last_activity_date": 1547682037, "creation_date": 1547682037, "answer_id": 54227035, "question_id": 54226628, "link": "https://stackoverflow.com/questions/54226628/perl-hashes-using-key-value-pairs-from-external-text-file/54227035#54227035", "title": "Perl Hashes: Using key/value pairs from external text file", "body": "<p>When you read from the file, you get a string (or multiple strings, if you read line-by-line). The Perl parser only parses source code passed to the Perl interpreter, not anything you read from files or elsewhere. You can use the <a href=\"https://perldoc.pl/functions/eval\" rel=\"nofollow noreferrer\">eval</a> function to evaluate arbitrary strings like this as perl code and return the result of the last expression (in this case, a list of strings), but string eval is dangerous because it can run any code; if you accidentally read a file containing <code>system 'rm -rf ~/*'</code> you have a problem.</p>\n\n<p>A better option is to store your data in a known serialization format. A common format used for such things is <a href=\"https://json.org/\" rel=\"nofollow noreferrer\">JSON</a>, because it maps neatly to Perl data structures, but you can also just store your strings as lines (without Perl syntax like quoting) for a simple case like this. There are any number of other options like YAML, or even XML, but they are harder to decode; and binary formats like Storable, Sereal, and CBOR, but they are not human-readable so can only be interacted with by your code.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse JSON::MaybeXS;\n# if you store it as JSON: {\"SGBK\":\"PRINT\",\"SGDVD\":\"VIDEO\"}\nmy %format_key = %{decode_json($output)};\n# or from an even-sized array: [\"SGBK\",\"PRINT\",\"SGDVD\",\"VIDEO\"]\nmy %format_key = @{decode_json($output)};\n\n# if you store it as one value per line\nmy %format_key = split /\\n/, $output;\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9942419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfec2be272f79c81ffd5566ae1caa4f7?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Field", "link": "https://stackoverflow.com/users/9942419/chris-field"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 1, "accepted_answer_id": 54227035, "answer_count": 1, "score": 1, "last_activity_date": 1547682037, "creation_date": 1547679358, "question_id": 54226628, "link": "https://stackoverflow.com/questions/54226628/perl-hashes-using-key-value-pairs-from-external-text-file", "title": "Perl Hashes: Using key/value pairs from external text file", "body": "<p>I am trying to to create a hash which draws its key/value pairs from a separate text file on my server.  </p>\n\n<p>When I manually enter key/value pairs into a hash inside my perl script like in the example below, the hash works perfectly when I call it later on:</p>\n\n<pre><code># Initialize hash \nmy %format_key = ('SGBK', 'PRINT', 'SGDVD', 'VIDEO');\n\n# Call hash (this is much later in the program)\n$item_format = $format_key{$fields[2]};\n</code></pre>\n\n<p>When I save those exact same arguments to a text file, and then read in that file, save the contents to a scalar variable, and assign that variable to the arguments in the hash, the hash does not function.  Here is what I have done:</p>\n\n<pre><code># Open file path saved in $format_key_file and save contents to $output\nopen(my $fh, '&lt;', $format_key_file) or die \"Could not read from $format_key_file, program halting.\"; {\n local $/;\n $output = &lt;$fh&gt;;\n }\n close($fh);\n\nmy %format_key = $output;\n\n # Call hash (this is much later in the program)\n    $item_format = $format_key{$fields[2]};\n</code></pre>\n\n<p>I'm completely stumped.  I suppose I can just manually enter all of my hash arguments into the script itself, but there will be lots of these and I would prefer to have them saved in a file for ease of updating down the road.  </p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 4, "last_activity_date": 1547681182, "last_edit_date": 1547681182, "creation_date": 1547680745, "answer_id": 54226840, "question_id": 54226489, "link": "https://stackoverflow.com/questions/54226489/what-are-allowed-symbols-for-naming-perl5-modules-and-subroutines/54226840#54226840", "title": "What are allowed symbols for naming perl5 modules and subroutines?", "body": "<p>See <a href=\"https://perldoc.pl/perlvar#The-Syntax-of-Variable-Names\" rel=\"nofollow noreferrer\">perlvar</a>; since named subroutines are just variables in the package stash, they have the same identifier requirements as other variables. <a href=\"https://perldoc.pl/perldata#Identifier-parsing\" rel=\"nofollow noreferrer\">perldata</a> has the full gritty details. Remember that unicode characters are valid in identifiers as long as you have <code>use utf8;</code> active which will decode your source code from UTF-8.</p>\n\n<p>Package names are just part of variables names, so they have the same restrictions plus they can contain the <code>::</code> or <code>'</code> separators, however there is an additional practical restriction here for any module you <code>use</code>, because this converts it to a filename and then it's up to what your filesystem supports. Many parts of the CPAN toolchain are also not equipped to deal with non-ASCII package names. So it's generally not a good idea. There are some <a href=\"https://metacpan.org/release/Acme-LookOfDisapproval\" rel=\"nofollow noreferrer\">Acme modules</a> that test the waters here.</p>\n\n<p>Essentially:</p>\n\n<ul>\n<li>if <code>use utf8</code> is not active, identifiers may consist of \"any word character in the ASCII range, as long as the first character is not a digit.\" \"Word character\" here means <code>[a-zA-Z0-9_]</code>.</li>\n<li>if <code>use utf8</code> is active, identifiers may start with a unicode \"start\" character or underscore, followed by unicode \"continue\" characters. All characters are additionally required to be unicode word characters.</li>\n</ul>\n\n<p>The <code>-</code> hyphen is not valid in any identifiers (except punctuation identifiers mentioned below).</p>\n\n<p>There are also \"special identifiers\", which consist of mostly special Perl globals: all-digit variables, variables consisting of a single punctuation character, variables consisting of <code>^</code> followed by a letter, and variables consisting of <code>^</code> followed by a word with required braces (such as <code>@{^CAPTURE}</code>). None of these are used for sigil-optional subroutines that I can recall.</p>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1547681182, "creation_date": 1547678471, "question_id": 54226489, "link": "https://stackoverflow.com/questions/54226489/what-are-allowed-symbols-for-naming-perl5-modules-and-subroutines", "title": "What are allowed symbols for naming perl5 modules and subroutines?", "body": "<p>Is it </p>\n\n<p><code>[A-Za-z]</code> and <code>::</code> for module names </p>\n\n<p>and <code>[A-Za-z_-]</code> for subroutine names ?</p>\n\n<p>P.S. I'm writing regex for parsing some debug output.</p>\n"}, {"tags": ["java", "perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1547656019, "post_id": 54221152, "comment_id": 95268434, "body": "<code>== &quot;&quot;</code> is wrong, <code>==</code> compares numbers, use <code>eq</code> to compare strings in Perl."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1547656241, "creation_date": 1547656241, "answer_id": 54221395, "question_id": 54221152, "link": "https://stackoverflow.com/questions/54221152/how-to-pass-an-empty-string-from-perl-script-to-java-file-as-a-command-line-argu/54221395#54221395", "title": "how to pass an empty String from perl Script to java file as a command line argument", "body": "<p>In the string variant of <a href=\"http://p3rl.org/system\" rel=\"nofollow noreferrer\">system</a>, you need to quote the empty string.\nHave you tried the list version of <code>system</code>?</p>\n\n<pre><code>my $DBFetch = system 'java', 'GetWOConfHold_Auto' ,$dbcount, $TimeStamp;\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 10717966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e912cd9d509512cefba2a02a489392bd?s=128&d=identicon&r=PG&f=1", "display_name": "sravs", "link": "https://stackoverflow.com/users/10717966/sravs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1547656241, "creation_date": 1547655404, "last_edit_date": 1547655938, "question_id": 54221152, "link": "https://stackoverflow.com/questions/54221152/how-to-pass-an-empty-string-from-perl-script-to-java-file-as-a-command-line-argu", "title": "how to pass an empty String from perl Script to java file as a command line argument", "body": "<p>I have a Script order.pl it has 3 variables </p>\n\n<pre><code>$dbcount=$ARGV[0];\nif($dbcount == \"\"){$dbcount = 196001;}\n\n$Num_Batches =$ARGV[1];\nif($Num_Batches == \"\"){$Num_Batches=1;}\nprint \"batches:$Num_Batches\\t\";\n\n$TimeStamp = $ARGV[2];\nif($TimeStamp == \"\"){$TimeStamp = \"\";}\n\n$DBFetch = 'java GetWOConfHold_Auto '. $dbcount.\" \".$TimeStamp ;\nprint \"DBFetch:$DBFetch\\n\";\nprint \"timestamp :$TimeStamp\";\nsystem($DBFetch);\n</code></pre>\n\n<p>Here the java file is GetWOConfHold_Auto.java and i want to sent both dbcount and  empty String    to the GetWoConfHol_Auto  java file as a command line arguments  but </p>\n\n<p>while running it is showing </p>\n\n<pre><code>perl order.pl 196000 1\nbatches:1       timestamp:      dbcount:196000  DBFetch:java GetWOConfHold_Auto 196000 \n\ntimestamp :args[0] 19600 \n\nException in thread \"main\" java.lang.ArrayIndexOutOfBoundsException: 1\n        at GetWOConfHold_Auto.main(GetWOConfHold_Auto.java:18)\nno of picking updates data : 0\nNo data.exiting\n</code></pre>\n\n<p>I tried to print the timestamp but it is showing </p>\n\n<pre><code>timestamp :args[0] 19600  not the empty String\n</code></pre>\n\n<p>and in java it is stopping at the main method signature</p>\n\n<p>I want to sent the empty String to java file  as a command line argument. and  i check if timestamp is null just go and pick the value from the properties file</p>\n"}, {"tags": ["mysql", "perl", "optimization", "text"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 3, "creation_date": 1547636359, "post_id": 54211635, "comment_id": 95256725, "body": "Sounds like a good excuse for some fun experimentation! Give it a try and see what happens? You might also want to have a look at SQLite as an alternative to MySQL"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1547636945, "post_id": 54211635, "comment_id": 95257048, "body": "I&#39;d definitely suggest SQLite as well over MySQL. But depending on how you plan to select those, a key/value store might be better suited. Redis comes to mind first. There are very good implementations in Perl to work with it, and it&#39;s super simple to use. It also implements arrays."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1547637165, "post_id": 54211635, "comment_id": 95257168, "body": "When you say you have scraped 15 million files, are these all HTML files with multiple data points inside them? Are you splitting into individual <i>tweets</i> (for a lack of a better word), or do you build up a sort of log of what each person said, concatenating to the end of each person&#39;s file whenever there&#39;s a new tweet by that person?"}, {"owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1547679889, "post_id": 54211635, "comment_id": 95279451, "body": "Sounds like you need the &quot;learning experience&quot; of implementing it both ways.  Then pit them against each other -- optimizing each until you get a &#39;clear winner&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 514, "user_id": 283438, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/70c14b69cd69ba09b07f836c538d5037?s=128&d=identicon&r=PG", "display_name": "Micah", "link": "https://stackoverflow.com/users/283438/micah"}, "edited": false, "score": 1, "creation_date": 1547835564, "post_id": 54215967, "comment_id": 95343025, "body": "So I&#39;ve spent the last couple of days checkdisking and defragging the volume in question. MySQL is up and running on the same disk now and I&#39;m back to parsing 5000 raw HTML files in about 30 seconds consistently. The issue had to do with the window index file becoming fragmented from the process of spamming the disk with a multitude of tiny files."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 4, "last_activity_date": 1547637661, "creation_date": 1547637661, "answer_id": 54215967, "question_id": 54211635, "link": "https://stackoverflow.com/questions/54211635/optimization-mysql-vs-many-flat-files-and-hdd-utilization/54215967#54215967", "title": "Optimization MySQL vs Many Flat Files and HDD Utilization", "body": "<p>A file system can be interpreted as a hierarchical key-value store, and it is frequently used as such by Unix-ish programs. However, creating files can be somewhat expensive, depending also on the OS and file system you are using. In particular, different file systems differ significantly by how access times scale with the number of files within one directory. E.g. see <a href=\"https://stackoverflow.com/q/197162/1521179\">NTFS performance and large volumes of files and directories</a> and <a href=\"https://stackoverflow.com/q/115882/1521179\">How do you deal with lots of small files?</a>: \u201cNTFS performance severely degrades after 10,000 files in a directory.\u201d</p>\n\n<p>You may therefore see significant benefits by moving from a pseudo-database using millions of small files to a \u201creal\u201d database such as SQLite that stores the data in a single file, thus making access to individual records cheaper.</p>\n\n<p>On the other hand, 2 million records are not that much, suggesting that file system overhead might not be the limiting factor for you. Consider running your software with a test workload and use a profiler or other debugging tools to see where the time is spent. Is it really the <code>open()</code> that takes so much time? Or is there other expensive processing that could be optimized? If there is a pre-processing step that can be parallelized, that alone may slash the processing time quite noticeably.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10993497, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/c2b6ba8f363a4aff45757839e4371fbf?s=128&d=identicon&r=PG", "display_name": "user10993497", "link": "https://stackoverflow.com/users/10993497/user10993497"}, "is_accepted": false, "score": 1, "last_activity_date": 1548900723, "creation_date": 1548900723, "answer_id": 54452352, "question_id": 54211635, "link": "https://stackoverflow.com/questions/54211635/optimization-mysql-vs-many-flat-files-and-hdd-utilization/54452352#54452352", "title": "Optimization MySQL vs Many Flat Files and HDD Utilization", "body": "<p>Whow!</p>\n\n<p>A few years ago, we had massive problems in the popular cms. By the plain mostly a good performance. But it changes to the down, when sidepass inlines comes too. </p>\n\n<p>So i wrote some ugly lines to find the fastest way. Note, that the ressources setting the different limits!</p>\n\n<p>1st) I used the time for establishing of a direct adressable point. Everyone haves an own set of flatfiles. </p>\n\n<p>2nd) I made a Ramdisk. Be sure that you have enough for your Project!</p>\n\n<p>3rd) For the backup i used rsync and renundance i compressed/extracted to the Ramdisk in a tar.gz </p>\n\n<p>In practical this way the fastest one is. The conversion of timecode and generating recursive folder-structures is very simple. Read, write, replace, delete too.</p>\n\n<p>The final release results in processing from:</p>\n\n<p>PHP/MySQL > 5  sec\nPerl/HDD ~ 1.2 sec \nPerl/RamDisk ~ 0.001 sec</p>\n\n<p>When i see, what you are doing there, this construct may be usuable for you. I am not know about the internals your project.</p>\n\n<p>The harddisk will live much longer, your workflow can be optimized through direct addressing. Its accessable from other stages. Will say, you can work on that base from other scripts too. As you believe, a dataprocessing in R, a notifier from shell, or anything else...</p>\n\n<p>Buffering errors like MySQL are no longer needed. Your CPU no longer loops noops. </p>\n"}], "owner": {"reputation": 514, "user_id": 283438, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/70c14b69cd69ba09b07f836c538d5037?s=128&d=identicon&r=PG", "display_name": "Micah", "link": "https://stackoverflow.com/users/283438/micah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 54215967, "answer_count": 2, "score": 2, "last_activity_date": 1548900723, "creation_date": 1547620684, "question_id": 54211635, "link": "https://stackoverflow.com/questions/54211635/optimization-mysql-vs-many-flat-files-and-hdd-utilization", "title": "Optimization MySQL vs Many Flat Files and HDD Utilization", "body": "<p>I want to run a machine learning algorithm as my endgame- research code that is thusfar unproven and unpublished for text mining purposes. The text is already obtained, but was scraped from warc format obtained from the Common Crawl. I'm in the process of preparing the data for machine learning purposes, and one of the analysis tasks that's desirable is IDF- Inverse Document Frequency analysis of the corpus prior to launching into the ML application proper.</p>\n\n<p>It's my understanding that for IDF to work, each file should represent one speaker or one idea- generally a short paragraph of ascii text not much longer than a tweet. The challenge is that I've scraped some 15 million files. I'm using Strawberry Perl on Windows 7 to read each file and split on the  tag contained in the document such that each comment from the social media in question falls into an element of an array (and in a more strongly-typed language would be of type string).</p>\n\n<p>From here I'm experiencing performance issues. I've let my script run all day and it's only made it through 400,000 input files in a 24 hour period. From those input files it's spawned about 2 million output files representing one file per speaker of html-stripped text with Perl's HTML::Strip module. As I look at my system, I see that disk utilization on my local data drive is very high- there's a tremendous number of ASCII text writes, much smaller than 1 KB, each of which is being crammed into a 1 KB sector of my local NTFS-formatted HDD.</p>\n\n<p>Is it a worthwhile endeavor to stop the run, set up a MySQL database on my home system, set up a text field in the database that is perhaps 500-1000 characters in max length, then rerun the perl script such that it slurps an input html file, splits it, HTML-strips it, then prepares and executes a string insert vs a database table? </p>\n\n<p>In general- will switching from a file output format that is a tremendous number of individual text files to a format that is a tremendous number of database inserts be easier on my hard drive / faster to write out in the long run due to some caching or RAM/disk-space utilization magic in the DBMS?</p>\n"}, {"tags": ["perl", "android-gradle-plugin"], "comments": [{"owner": {"reputation": 17784, "user_id": 1646322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9fd7a75e0d8ace7bb3276476786c2c0?s=128&d=identicon&r=PG", "display_name": "Ruslan Osmanov", "link": "https://stackoverflow.com/users/1646322/ruslan-osmanov"}, "edited": false, "score": 0, "creation_date": 1547614479, "post_id": 54210525, "comment_id": 95247301, "body": "<code>$resultsfile</code> needs to be escaped properly, e.g.: <code>\\Q$resultsfile\\E</code>. There might be an <a href=\"https://en.wikipedia.org/wiki/Internal_field_separator\" rel=\"nofollow noreferrer\"><code>$IFS</code></a>-separated word in it that might invoke an executable with the matching name (for instance, <code>read the docs.txt</code> might &quot;call&quot; the <code>read</code> command)"}, {"owner": {"reputation": 11, "user_id": 8994965, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3k9KTj9CcPs/AAAAAAAAAAI/AAAAAAAAAC8/S8Sp_O9mSks/photo.jpg?sz=128", "display_name": "Tim Hu", "link": "https://stackoverflow.com/users/8994965/tim-hu"}, "reply_to_user": {"reputation": 17784, "user_id": 1646322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9fd7a75e0d8ace7bb3276476786c2c0?s=128&d=identicon&r=PG", "display_name": "Ruslan Osmanov", "link": "https://stackoverflow.com/users/1646322/ruslan-osmanov"}, "edited": false, "score": 0, "creation_date": 1547616381, "post_id": 54210525, "comment_id": 95247754, "body": "Thanks for Ruslan&#39;s answer. It sounds quite making sense. I&#39;ll try and observe on it"}], "owner": {"reputation": 11, "user_id": 8994965, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3k9KTj9CcPs/AAAAAAAAAAI/AAAAAAAAAC8/S8Sp_O9mSks/photo.jpg?sz=128", "display_name": "Tim Hu", "link": "https://stackoverflow.com/users/8994965/tim-hu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1547614365, "creation_date": 1547613595, "last_edit_date": 1592644375, "question_id": 54210525, "link": "https://stackoverflow.com/questions/54210525/usage-of-gradlew-in-perl-hang-up", "title": "Usage of &#39;gradlew&#39; in Perl hang up", "body": "<p>I'm using perl script to invoke the gradlew batch file generated from Android Project.</p>\n<p>\nThere is chance that my whole build would get hang at calling 'gradlew clean' or 'gradlew assembleRelease'. When the problem happened, the log showed 'BUILD SUCCESSFUL\nTotal time: 31 seconds' something like that. While it never returned.\n</p>\n<p>My script was like following ,</p>\n<pre><code>`gradlew clean -S --offline -Dorg.gradle.daemon.idletimeout=300000&gt;&gt; $resultsfile 2&gt;&amp;1`;\n`echo gradlew clean done &gt;&gt; $resultsfile 2&gt;&amp;1;\n</code></pre>\n<p>How can I debug into this problem?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 2, "creation_date": 1547592838, "post_id": 54207976, "comment_id": 95242715, "body": "Welcome to SO! I&#39;m sorry, but I don&#39;t quite follow your expected output. Can you show an example of exactly what you want your output CSV to look like?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1547593499, "post_id": 54207976, "comment_id": 95242900, "body": "Please make sure to <code>use strict;</code> and <code>use warnings;</code>, and I recommend using <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a> to render your CSV output. The <code>csv</code> function it provides is the simplest way to write an array of hashes to a CSV file, or you can use the object interface for more control."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1547618674, "post_id": 54207976, "comment_id": 95248425, "body": "Obvious errors in your script after adding <code>use strict;</code>: (a) <code>%rlsSite</code> not defined, (b) <code>%rlsAuthor</code> not defined, (c) your last <code>print</code> is missing OUTCSV (I guess its output should go to the CSV?)"}], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1547620006, "last_edit_date": 1547620006, "creation_date": 1547619593, "answer_id": 54211430, "question_id": 54207976, "link": "https://stackoverflow.com/questions/54207976/parse-text-file-line-by-line-then-put-matching-string-into-an-array-then-output/54211430#54211430", "title": "parse text file line by line then put matching string into an array then output to csv file", "body": "<p>As you have not specified what the output should actually look like, I took a stab in the dark and made a guess by looking at the input data and your regexes.</p>\n\n<p>For production quality code please follow the advice of @Grinnz to use <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a> instead.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nprint \"Entry,Site,Author,Release,Date,Version,Changes,Comment\\n\";\n\nmy @entries;\nwhile(&lt;DATA&gt; ) {\n    chomp;\n    if (my($site) = /^Route:\\s+(.+)$/) {\n        # start of new entry\n        push(@entries, {\n            site =&gt; $site,\n        });\n    } elsif (my($author) = /^Author:\\s+(.+)$/) {\n        $entries[-1]-&gt;{author} = $author;\n    }\n}\n\nforeach my $index (0..$#entries) {\n    my $entry = $entries[$index];\n    print \"$index,$entry-&gt;{site},$entry-&gt;{author},,,,,\\n\";\n}\n\n__DATA__\nRoute:  TUCSON-AZ\nAuthor: upham\nDate:   2018-06-07 20:09:17 UTC\nRelease:0.0\nContent:\n        Full Release\nComment:\n        Initial setup\n\n*** Modified on Mon Jun 11 19:18:40 PDT 2018 by upham ***\nQRC Acceptor: Admin\nLog: http://universityofarizona/ECE101/rev0.0_060718_130854-4307-1528769914.qclog\nSuccessful\nStatus: {Objects succeeded (1)} {}\n--------------------------------------------------\nRoute:  YUMA-AZ\nAuthor: upham\nDate:   2018-06-07 20:09:18 UTC\nRelease:0.0\nContent:\n        Full Release\nComment:\n        Initial setup\n\n*** Modified on Tue Sep 25 15:40:02 PDT 2018 by upham ***\nQRC Acceptor: Admin\nLog: http://universityofarizona/ECE101/rev0.0_060718_130854-4307-1537915198.qclog\nSuccessful \nStatus: {Objects succeeded (33)} {}\n--------------------------------------------------\n</code></pre>\n\n<p>Example run:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>$ perl dummy.pl\nEntry,Site,Author,Release,Date,Version,Changes,Comment\n0,TUCSON-AZ,upham,,,,,\n1,YUMA-AZ,upham,,,,,\n</code></pre>\n\n<p><strong>EDIT:</strong> an alternative approach would be to use</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>if (/^Route:/../^----------/) {\n    # we are inside a log entry...\n}\n</code></pre>\n\n<p>and then detect</p>\n\n<ul>\n<li>keyword lines with <code>my($keyword, $data) = /^(\\w+):\\s*(.*)$/;</code></li>\n<li>text lines with <code>my($line) = /^\\s+(.+)$/;</code></li>\n</ul>\n\n<p>inside that block.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10919060, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-B_yDjX-tjyA/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbXUhv8lX6OGkqVm3HALG5Z5AR7hA/mo/photo.jpg?sz=128", "display_name": "Maddog Pham", "link": "https://stackoverflow.com/users/10919060/maddog-pham"}, "edited": false, "score": 0, "creation_date": 1547671325, "post_id": 54216173, "comment_id": 95275919, "body": "Hi Dave and all,"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1547638294, "creation_date": 1547638294, "answer_id": 54216173, "question_id": 54207976, "link": "https://stackoverflow.com/questions/54207976/parse-text-file-line-by-line-then-put-matching-string-into-an-array-then-output/54216173#54216173", "title": "parse text file line by line then put matching string into an array then output to csv file", "body": "<p>Step 1: Add <code>use strict</code> and <code>use warnings</code>. This throws up errors about undeclared variables.</p>\n\n<p>Step 2: Add <code>my</code> to declare <code>$rlseHistRepo</code>. Also add <code>my (%rlsSite, %rlsAuthor)</code> to declare two hashes used in your final loop. But that's weird as you're reading values from those hashes without every storing data in them. This gives us a few \"uninitialized value\" errors. So I think we're going to need to rethink things.</p>\n\n<p>The idea is going to be to build one hash for each record. And when the record is ended (when we get a line of dashes) we output that record. Something like this:</p>\n\n<pre><code>my @keys = qw[Route Author Date Release Log\n              Status Content Comment];\n\nmy %record;\n\nwhile(&lt;IN&gt; ) {\n  chomp;\n  if (/-----/) {\n    say OUTCSV join ',', @record{@keys};\n    %record = ();\n  }\n\n  # ignore lines without a ':'\n  next unless /:/;\n  # ignore the '***' lines\n  next if /\\*\\*\\*/;\n\n  my ($key, $value) = split /\\s*:\\s*/, $_, 2);\n  # Some keys have their values on the next line\n  if ($value !~ /\\S/) {  \n    chomp($value = &lt;IN&gt;);\n    $value =~ s/^\\s+//;\n  } \n  $record{$key} = $value;\n}\n</code></pre>\n\n<p>Step 3: Clean things up a bit by removing a few unnecessary variables and making it into a Unix filter (reading from <code>STDIN</code> and writing to <code>STDOUT</code>) - this is actually easier to write and makes your program far more flexible.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nmy @keys = qw[Route Author Date Release Log\n              Status Content Comment];\n\nsay \"Site,Author,Release,Date,Version,Changes,Comment\";\nsay \",,,,,,,\";\n\nmy %record;\n\nwhile (&lt;&gt;) {\n  chomp;\n\n  if (/-----/) {\n    say join ',', @record{@keys};\n    %record = ();\n  }\n\n  # ignore lines without a ':'\n  next unless /:/;\n  # ignore the '***' lines\n  next if /\\*\\*\\*/;\n\n  if (my ($key, $value) = split /\\s*:\\s*/, $_, 2) {\n    # Some keys have their values on the next line\n    if ($value !~ /\\S/) {\n      chomp($value = &lt;&gt;);\n      $value =~ s/^\\s+//;\n    }\n    $record{$key} = $value;\n  }\n}\n</code></pre>\n\n<p>As others have mentioned, in production code you'd want to use <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a> to produce the output.</p>\n"}], "owner": {"reputation": 1, "user_id": 10919060, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-B_yDjX-tjyA/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbXUhv8lX6OGkqVm3HALG5Z5AR7hA/mo/photo.jpg?sz=128", "display_name": "Maddog Pham", "link": "https://stackoverflow.com/users/10919060/maddog-pham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1547671862, "creation_date": 1547592572, "last_edit_date": 1547592716, "question_id": 54207976, "link": "https://stackoverflow.com/questions/54207976/parse-text-file-line-by-line-then-put-matching-string-into-an-array-then-output", "title": "parse text file line by line then put matching string into an array then output to csv file", "body": "<p>Input text file as below. I called it <code>$rlseHistRepo</code>.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Route:  TUCSON-AZ\nAuthor: upham\nDate:   2018-06-07 20:09:17 UTC\nRelease:0.0\nContent:\n        Full Release\nComment:\n        Initial setup\n\n*** Modified on Mon Jun 11 19:18:40 PDT 2018 by upham ***\nQRC Acceptor: Admin\nLog: http://universityofarizona/ECE101/rev0.0_060718_130854-4307-1528769914.qclog\nSuccessful\nStatus: {Objects succeeded (1)} {}\n--------------------------------------------------\nRoute:  YUMA-AZ\nAuthor: upham\nDate:   2018-06-07 20:09:18 UTC\nRelease:0.0\nContent:\n        Full Release\nComment:\n        Initial setup\n\n*** Modified on Tue Sep 25 15:40:02 PDT 2018 by upham ***\nQRC Acceptor: Admin\nLog: http://universityofarizona/ECE101/rev0.0_060718_130854-4307-1537915198.qclog\nSuccessful \nStatus: {Objects succeeded (33)} {}\n--------------------------------------------------\n</code></pre>\n\n<p>I want to write a perl script to parse the input file above and output to a csv file but I ran into issue with the hash and array which I am lacking of knowledge of manipulating data in the array. \nThe key here is to get \nHere is what find line begins with \nRoute:\nAuthor:\nDate:\nRelease:\nLog:\nStatus:\nContent:\nComments:\ninfo then get the string thereafter and write out to csv file</p>\n\n<p>Here is my starting script and I am struggling get the csv printout array properly. Appreciate your help to correct it and point out where and why the array didn't get printout properly in order.\nThank you very much in advance</p>\n\n<pre><code>#!/usr/bin/perl\n\n$rlseHistRepo   = $ARGV[0];\n\nmy %menu;\nopen(IN, \"&lt; $rlseHistRepo\" ) || die \"cannot read input file: $!\\n\";\nopen(OUTCSV , \"&gt; rlseLoggingRepo.csv\" ) || die \"cannot write output file: $!\\n\";\nprint OUTCSV \"Site,Author,Release,Date,Version,Changes,Comment\\n\";\nprint OUTCSV \",,,,,,,\\n\";\n\nwhile(&lt;IN&gt; ) {\n    my $line = $_;\n    chomp($line);\n    if( $line =~ m/^Route:/) {\n    my ($item, $rlsSite) = split(/\\s+/, $line);\n    $menu{$item} = $rlsSite;\n    }\n    if( $line =~ m/^Author:/) {\n    my ($item, $rlsAuthor) = split(/\\s+/, $line);\n    $menu{$item} = $rlsAuthor;\n    }\n\n} \nclose(IN);\n\nforeach $item ( keys %menu ) {\n    print OUTCSV \"$menu{$item},,,,,\\n\";\n    print \"$rlsSite{$item},$rlsAuthor{$item},,,,\\n\";\n} \n\nclose(OUTCSV);\n</code></pre>\n"}, {"tags": ["perl", "datetime", "macos-mojave", "cpanm"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1547587897, "post_id": 54206572, "comment_id": 95240843, "body": "Two things - you should not need sudo to install to your perlbrew perl (in fact that may confuse it, since perlbrew depends on your environment), and the failure is in the installation of Variable::Magic, you need to check the log it mentions for details."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1547587968, "post_id": 54206572, "comment_id": 95240872, "body": "What is in <code>&#47;Users&#47;bpark1&#47;.cpanm&#47;work&#47;1547585021.44629&#47;build.log</code>?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1547588013, "post_id": 54206572, "comment_id": 95240895, "body": "Since it was Variable::Magic and Package::Stash::XS that failed, my guess is that you do not have a complete C compiler/build toolchain setup."}, {"owner": {"reputation": 11, "user_id": 10919033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5b8eb5e6081f2da100eb103c3881ba?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/10919033/brian"}, "edited": false, "score": 0, "creation_date": 1547588865, "post_id": 54206572, "comment_id": 95241230, "body": "I did tried cpanm without &quot;sudo&quot;, but still same error appeared."}, {"owner": {"reputation": 11, "user_id": 10919033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5b8eb5e6081f2da100eb103c3881ba?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/10919033/brian"}, "edited": false, "score": 0, "creation_date": 1547588973, "post_id": 54206572, "comment_id": 95241282, "body": "Thanks for the insightful feedbacks Grinnz/mob! Please help me with toolchain setup check. I&#39;m new to this and not sure how to check.. :-(  Also, I&#39;ll update the main thread with the build.log info."}, {"owner": {"reputation": 11, "user_id": 10919033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5b8eb5e6081f2da100eb103c3881ba?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/10919033/brian"}, "edited": false, "score": 0, "creation_date": 1547589702, "post_id": 54206572, "comment_id": 95241585, "body": "Apologies... Apparently, I don&#39;t know how to post a file nor put a large log info here... I&#39;m new to StackOverflow and any guidance would be greatly appreciated..."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1547590761, "post_id": 54206572, "comment_id": 95241978, "body": "Paste it into your question, select the text, and do CTRL+K to indent it so it appears as a code block."}, {"owner": {"reputation": 11, "user_id": 10919033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5b8eb5e6081f2da100eb103c3881ba?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/10919033/brian"}, "edited": false, "score": 0, "creation_date": 1547591665, "post_id": 54206572, "comment_id": 95242314, "body": "Added what I could fit. There is 30k char limit that I couldn&#39;t include last 1/3rd the log. Hope this is enough."}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1547597130, "post_id": 54206572, "comment_id": 95243721, "body": "Hi @Brian, I see you wrote &quot;opted out for perlbrew&quot; ... and indeed it looks like you try to install a more or less new &#39;system&#39; perl, using <code>brew</code>. @Grinnz is correct, iff using perlbrew, than <code>sudo cpanm</code> would not be needed. @Brian, unless you have specific reasons you do not want to use perlbrew, I would suggest to start all over again (even reinstall Mojave to get rid off artefacts from previous attempts). Perlbrew makes playing with perl and even running large scale webservers just a breeze. Also, look at <code>https:&#47;&#47;perlbrew.pl&#47;Perlbrew-and-Friends.html</code> after installing from <code>perlbrew.pl</code>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1547597523, "post_id": 54206572, "comment_id": 95243812, "body": "I misread the question earlier, am I understanding correctly that this is a homebrew perl not perlbrew, and that&#39;s why it&#39;s in <code>&#47;usr&#47;local&#47;Cellar</code>? These are different tools."}, {"owner": {"reputation": 11, "user_id": 10919033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5b8eb5e6081f2da100eb103c3881ba?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/10919033/brian"}, "reply_to_user": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1547597878, "post_id": 54206572, "comment_id": 95243884, "body": "@vanHoesel, thanks for the pointer, but this is work laptop and reinstalling the OS and starting from scratch is challenging. Hoping to see if we can resolve this."}, {"owner": {"reputation": 11, "user_id": 10919033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5b8eb5e6081f2da100eb103c3881ba?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/10919033/brian"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1547679505, "post_id": 54206572, "comment_id": 95279305, "body": "@Grinnz, I installed via &quot;brew perl&quot;. Frankly, I lost track of perlbrew vs brew vs homebrew... Let me know if there is anything I can try in this front. Or is there a way to &quot;uninstall&quot; the tool to see if I can try it again without having to reinstall OSX Mojave?"}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1547709445, "post_id": 54206572, "comment_id": 95286446, "body": "@Brian, no worries, if you can, start all over again \u2013 without wiping the Mac \u2013 , following the instructions on perlbrew.pl. Most likely, the perl installed by homebrew can safely be removed."}], "answers": [{"tags": [], "owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "is_accepted": false, "score": 0, "last_activity_date": 1547709329, "creation_date": 1547709329, "answer_id": 54230770, "question_id": 54206572, "link": "https://stackoverflow.com/questions/54206572/having-trouble-installing-datetime-on-osx-mojave/54230770#54230770", "title": "Having trouble installing DateTime on OSX Mojave", "body": "<p>@Brian, no worries, if you can, start all over again, following the instructions on perlbrew.pl. Most likely, the perl installed by homebrew can safely be removed.</p>\n"}], "owner": {"reputation": 11, "user_id": 10919033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5b8eb5e6081f2da100eb103c3881ba?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/10919033/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 418, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1552076861, "creation_date": 1547585268, "last_edit_date": 1547591606, "question_id": 54206572, "link": "https://stackoverflow.com/questions/54206572/having-trouble-installing-datetime-on-osx-mojave", "title": "Having trouble installing DateTime on OSX Mojave", "body": "<p>All my perl codes were working fine in the past. I got a new Mac which came with Mojave OSX Ver10.14.1. Got excited and ported in all my old stuff. Now all the scripts are failing and I am not able to install any new modules via cpan. So, after some of research, I opted out for perlbrew.</p>\n\n<p>I have installed \"brew install perl\" and and now on perl v5.28.1.</p>\n\n<p>When I run my script, it fails as so.</p>\n\n<p><code>Can't locate DateTime.pm in @INC (you may need to install the DateTime module) (@INC contains: /usr/local/Cellar/perl/5.28.1/lib/perl5/site_perl/5.28.1/darwin-thread-multi-2level /usr/local/Cellar/perl/5.28.1/lib/perl5/site_perl/5.28.1 /usr/local/Cellar/perl/5.28.1/lib/perl5/5.28.1/darwin-thread-multi-2level /usr/local/Cellar/perl/5.28.1/lib/perl5/5.28.1 /usr/local/lib/perl5/site_perl/5.28.1/darwin-thread-multi-2level /usr/local/lib/perl5/site_perl/5.28.1) at sch_update.pl line 6.\nBEGIN failed--compilation aborted at sch_update.pl line 6.</code></p>\n\n<p>That should be easy and just install the module. So, I proceeded. Ended up with following error message.</p>\n\n<p><code>&gt; sudo cpanm DateTime\n--&gt; Working on DateTime\nFetching http://www.cpan.org/authors/id/D/DR/DROLSKY/DateTime-1.50.tar.gz ... OK\nConfiguring DateTime-1.50 ... OK\n==&gt; Found dependencies: DateTime::Locale, DateTime::TimeZone, namespace::autoclean\n--&gt; Working on DateTime::Locale\nFetching http://www.cpan.org/authors/id/D/DR/DROLSKY/DateTime-Locale-1.23.tar.gz ... OK\nConfiguring DateTime-Locale-1.23 ... OK\n==&gt; Found dependencies: namespace::autoclean\n--&gt; Working on namespace::autoclean\nFetching http://www.cpan.org/authors/id/E/ET/ETHER/namespace-autoclean-0.28.tar.gz ... OK\nConfiguring namespace-autoclean-0.28 ... OK\n==&gt; Found dependencies: B::Hooks::EndOfScope, namespace::clean\n--&gt; Working on B::Hooks::EndOfScope\nFetching http://www.cpan.org/authors/id/E/ET/ETHER/B-Hooks-EndOfScope-0.24.tar.gz ... OK\nConfiguring B-Hooks-EndOfScope-0.24 ... OK\n==&gt; Found dependencies: Variable::Magic\n--&gt; Working on Variable::Magic\nFetching http://www.cpan.org/authors/id/V/VP/VPIT/Variable-Magic-0.62.tar.gz ... OK\nConfiguring Variable-Magic-0.62 ... OK\nBuilding and testing Variable-Magic-0.62 ... FAIL\n! Installing Variable::Magic failed. See /Users/bpark1/.cpanm/work/1547585021.44629/build.log for details. Retry with --force to force install it.\n! Installing the dependencies failed: Module 'Variable::Magic' is not installed\n! Bailing out the installation for B-Hooks-EndOfScope-0.24.\n--&gt; Working on namespace::clean\nFetching http://www.cpan.org/authors/id/R/RI/RIBASUSHI/namespace-clean-0.27.tar.gz ... OK\nConfiguring namespace-clean-0.27 ... OK\n==&gt; Found dependencies: Package::Stash, B::Hooks::EndOfScope\n--&gt; Working on Package::Stash\nFetching http://www.cpan.org/authors/id/E/ET/ETHER/Package-Stash-0.38.tar.gz ... OK\nConfiguring Package-Stash-0.38 ... OK\n==&gt; Found dependencies: Package::Stash::XS\n--&gt; Working on Package::Stash::XS\nFetching http://www.cpan.org/authors/id/E/ET/ETHER/Package-Stash-XS-0.29.tar.gz ... OK\nConfiguring Package-Stash-XS-0.29 ... OK\nBuilding and testing Package-Stash-XS-0.29 ... FAIL\n! Installing Package::Stash::XS failed. See /Users/bpark1/.cpanm/work/1547585021.44629/build.log for details. Retry with --force to force install it.\n! Installing the dependencies failed: Module 'Package::Stash::XS' is not installed\n! Bailing out the installation for Package-Stash-0.38.\n! Installing the dependencies failed: Module 'B::Hooks::EndOfScope' is not installed, Module 'Package::Stash' is not installed\n! Bailing out the installation for namespace-clean-0.27.\n! Installing the dependencies failed: Module 'namespace::clean' is not installed, Module 'B::Hooks::EndOfScope' is not installed\n! Bailing out the installation for namespace-autoclean-0.28.\n! Installing the dependencies failed: Module 'namespace::autoclean' is not installed\n! Bailing out the installation for DateTime-Locale-1.23.\n--&gt; Working on DateTime::TimeZone\nFetching http://www.cpan.org/authors/id/D/DR/DROLSKY/DateTime-TimeZone-2.23.tar.gz ... OK\nConfiguring DateTime-TimeZone-2.23 ... OK\n==&gt; Found dependencies: namespace::autoclean\n! Installing the dependencies failed: Module 'namespace::autoclean' is not installed\n! Bailing out the installation for DateTime-TimeZone-2.23.\n! Installing the dependencies failed: Module 'DateTime::TimeZone' is not installed, Module 'namespace::autoclean' is not installed, Module 'DateTime::Locale' is not installed\n! Bailing out the installation for DateTime-1.50.</code></p>\n\n<p>I tried using '--installdeps' in cpanm to see if the dependancies would be taken care, but not work.</p>\n\n<p>Please help.</p>\n\n<p>Adding build.log</p>\n\n<pre><code>cpanm (App::cpanminus) 1.9018 on perl 5.028001 built for darwin-thread-multi-2level\nWork directory is /Users/bpark1/.cpanm/work/1547585021.44629\nYou have make /usr/bin/make\nYou have /usr/bin/curl: curl 7.54.0 (x86_64-apple-darwin18.0) libcurl/7.54.0 LibreSSL/2.6.4 zlib/1.2.11 nghttp2/1.24.1\nYou have /usr/bin/tar: bsdtar 2.8.3 - libarchive 2.8.3\nYou have /usr/bin/unzip\nSearching DateTime () on cpanmetadb ...\n--&gt; Working on DateTime\nFetching http://www.cpan.org/authors/id/D/DR/DROLSKY/DateTime-1.50.tar.gz\n-&gt; OK\nUnpacking DateTime-1.50.tar.gz\nEntering DateTime-1.50\nChecking configure dependencies from META.json\nChecking if you have Dist::CheckConflicts 0.02 ... Yes (0.11)\nChecking if you have ExtUtils::MakeMaker 6.58 ... Yes (7.34)\nConfiguring DateTime-1.50\nRunning Makefile.PL\nWarning: prerequisite DateTime::Locale 1.06 not found.\nWarning: prerequisite DateTime::TimeZone 2.02 not found.\nWarning: prerequisite namespace::autoclean 0.19 not found.\nChecking if your kit is complete...\nLooks good\nGenerating a Unix-style Makefile\nWriting Makefile for DateTime\nWriting MYMETA.yml and MYMETA.json\n-&gt; OK\nChecking dependencies from MYMETA.json ...\nChecking if you have Specio 0.18 ... Yes (0.43)\nChecking if you have utf8 0 ... Yes (1.21)\nChecking if you have Carp 0 ... Yes (1.50)\nChecking if you have warnings 0 ... Yes (1.42)\nChecking if you have Test::Warnings 0.005 ... Yes (0.026)\nChecking if you have DateTime::Locale 1.06 ... No\nChecking if you have Dist::CheckConflicts 0.02 ... Yes (0.11)\nChecking if you have Test::More 0.96 ... Yes (1.302156)\nChecking if you have strict 0 ... Yes (1.11)\nChecking if you have Specio::Library::Builtins 0 ... Yes (0.43)\nChecking if you have Specio::Library::String 0 ... Yes (0.43)\nChecking if you have Specio::Declare 0 ... Yes (0.43)\nChecking if you have Try::Tiny 0 ... Yes (0.30)\nChecking if you have CPAN::Meta::Check 0.011 ... Yes (0.014)\nChecking if you have Test::Fatal 0 ... Yes (0.014)\nChecking if you have ExtUtils::MakeMaker 0 ... Yes (7.34)\nChecking if you have File::Spec 0 ... Yes (3.74)\nChecking if you have integer 0 ... Yes (1.01)\nChecking if you have DateTime::TimeZone 2.02 ... No\nChecking if you have XSLoader 0 ... Yes (0.30)\nChecking if you have namespace::autoclean 0.19 ... No\nChecking if you have warnings::register 0 ... Yes (1.04)\nChecking if you have Scalar::Util 0 ... Yes (1.50)\nChecking if you have CPAN::Meta::Requirements 0 ... Yes (2.140)\nChecking if you have Specio::Exporter 0 ... Yes (0.43)\nChecking if you have Params::ValidationCompiler 0.26 ... Yes (0.30)\nChecking if you have overload 0 ... Yes (1.30)\nChecking if you have Specio::Library::Numeric 0 ... Yes (0.43)\nChecking if you have POSIX 0 ... Yes (1.84)\nChecking if you have Storable 0 ... Yes (3.08)\nChecking if you have base 0 ... Yes (2.27)\nChecking if you have parent 0 ... Yes (0.236)\n==&gt; Found dependencies: DateTime::Locale, DateTime::TimeZone, namespace::autoclean\nSearching DateTime::Locale (1.06) on cpanmetadb ...\n--&gt; Working on DateTime::Locale\nFetching http://www.cpan.org/authors/id/D/DR/DROLSKY/DateTime-Locale-1.23.tar.gz\n-&gt; OK\nUnpacking DateTime-Locale-1.23.tar.gz\nEntering DateTime-Locale-1.23\nChecking configure dependencies from META.json\nChecking if you have ExtUtils::MakeMaker 6.58 ... Yes (7.34)\nChecking if you have File::ShareDir::Install 0.03 ... Yes (0.13)\nChecking if you have Dist::CheckConflicts 0.02 ... Yes (0.11)\nConfiguring DateTime-Locale-1.23\nRunning Makefile.PL\nWarning: prerequisite namespace::autoclean 0.19 not found.\nChecking if your kit is complete...\nLooks good\nGenerating a Unix-style Makefile\nWriting Makefile for DateTime::Locale\nWriting MYMETA.yml and MYMETA.json\n-&gt; OK\nChecking dependencies from MYMETA.json ...\nChecking if you have Storable 0 ... Yes (3.08)\nChecking if you have base 0 ... Yes (2.27)\nChecking if you have File::ShareDir 0 ... Yes (1.116)\nChecking if you have Params::ValidationCompiler 0.13 ... Yes (0.30)\nChecking if you have Exporter 0 ... Yes (5.73)\nChecking if you have File::Temp 0 ... Yes (0.2304)\nChecking if you have namespace::autoclean 0.19 ... No\nChecking if you have CPAN::Meta::Requirements 0 ... Yes (2.140)\nChecking if you have IPC::System::Simple 0 ... Yes (1.25)\nChecking if you have CPAN::Meta::Check 0.011 ... Yes (0.014)\nChecking if you have strict 0 ... Yes (1.11)\nChecking if you have Test::More 0.96 ... Yes (1.302156)\nChecking if you have Specio::Library::String 0 ... Yes (0.43)\nChecking if you have Specio::Declare 0 ... Yes (0.43)\nChecking if you have Test::Requires 0 ... Yes (0.10)\nChecking if you have Test::Fatal 0 ... Yes (0.014)\nChecking if you have ExtUtils::MakeMaker 0 ... Yes (7.34)\nChecking if you have File::Spec 0 ... Yes (3.74)\nChecking if you have Test::File::ShareDir::Dist 0 ... Yes (1.001002)\nChecking if you have utf8 0 ... Yes (1.21)\nChecking if you have Carp 0 ... Yes (1.50)\nChecking if you have warnings 0 ... Yes (1.42)\nChecking if you have Test::Warnings 0 ... Yes (0.026)\nChecking if you have List::Util 1.45 ... Yes (1.50)\nChecking if you have Dist::CheckConflicts 0.02 ... Yes (0.11)\n==&gt; Found dependencies: namespace::autoclean\nSearching namespace::autoclean (0.19) on cpanmetadb ...\n--&gt; Working on namespace::autoclean\nFetching http://www.cpan.org/authors/id/E/ET/ETHER/namespace-autoclean-0.28.tar.gz\n-&gt; OK\nUnpacking namespace-autoclean-0.28.tar.gz\nEntering namespace-autoclean-0.28\nChecking configure dependencies from META.json\nChecking if you have ExtUtils::MakeMaker 6.58 ... Yes (7.34)\nConfiguring namespace-autoclean-0.28\nRunning Makefile.PL\nWarning: prerequisite B::Hooks::EndOfScope 0.12 not found.\nWarning: prerequisite namespace::clean 0.20 not found.\nChecking if your kit is complete...\nLooks good\nGenerating a Unix-style Makefile\nWriting Makefile for namespace::autoclean\nWriting MYMETA.yml and MYMETA.json\n-&gt; OK\nChecking dependencies from MYMETA.json ...\nChecking if you have Test::Requires 0 ... Yes (0.10)\nChecking if you have B::Hooks::EndOfScope 0.12 ... No\nChecking if you have Test::More 0.88 ... Yes (1.302156)\nChecking if you have FindBin 0 ... Yes (1.51)\nChecking if you have strict 0 ... Yes (1.11)\nChecking if you have File::Spec 0 ... Yes (3.74)\nChecking if you have overload 0 ... Yes (1.30)\nChecking if you have ExtUtils::MakeMaker 0 ... Yes (7.34)\nChecking if you have base 0 ... Yes (2.27)\nChecking if you have List::Util 0 ... Yes (1.50)\nChecking if you have Carp 0 ... Yes (1.50)\nChecking if you have warnings 0 ... Yes (1.42)\nChecking if you have Sub::Identify 0 ... Yes (0.14)\nChecking if you have namespace::clean 0.20 ... No\nChecking if you have File::Basename 0 ... Yes (2.85)\nChecking if you have constant 0 ... Yes (1.33)\nChecking if you have Scalar::Util 0 ... Yes (1.50)\n==&gt; Found dependencies: B::Hooks::EndOfScope, namespace::clean\nSearching B::Hooks::EndOfScope (0.12) on cpanmetadb ...\n--&gt; Working on B::Hooks::EndOfScope\nFetching http://www.cpan.org/authors/id/E/ET/ETHER/B-Hooks-EndOfScope-0.24.tar.gz\n-&gt; OK\nUnpacking B-Hooks-EndOfScope-0.24.tar.gz\nEntering B-Hooks-EndOfScope-0.24\nChecking configure dependencies from META.json\nChecking if you have ExtUtils::MakeMaker 6.58 ... Yes (7.34)\nChecking if you have Text::ParseWords 0 ... Yes (3.30)\nConfiguring B-Hooks-EndOfScope-0.24\nRunning Makefile.PL\nDistribution opts in x_use_unsafe_inc: 0\nIn file included from HASCOMPILERel7O/TESTQjCr.c:3:\n/usr/local/Cellar/perl/5.28.1/lib/perl5/5.28.1/darwin-thread-multi-2level/CORE/perl.h:719:13: warning: non-portable path to file '&lt;Xlocale.h&gt;'; specified path differs in case from file name on disk [-Wnonportable-include-path]\n#   include &lt;xlocale.h&gt;\n            ^~~~~~~~~~~\n            &lt;Xlocale.h&gt;\n1 warning generated.\nWarning: prerequisite Variable::Magic 0.48 not found.\nChecking if your kit is complete...\nLooks good\nGenerating a Unix-style Makefile\nWriting Makefile for B::Hooks::EndOfScope\nWriting MYMETA.yml and MYMETA.json\n-&gt; OK\nChecking dependencies from MYMETA.json ...\nChecking if you have strict 0 ... Yes (1.11)\nChecking if you have Test::More 0.88 ... Yes (1.302156)\nChecking if you have ExtUtils::MakeMaker 0 ... Yes (7.34)\nChecking if you have Module::Implementation 0.05 ... Yes (0.09)\nChecking if you have File::Spec 0 ... Yes (3.74)\nChecking if you have IPC::Open2 0 ... Yes (1.04)\nChecking if you have File::Glob 0 ... Yes (1.31)\nChecking if you have Tie::Hash 0 ... Yes (1.05)\nChecking if you have Hash::Util::FieldHash 0 ... Yes (1.20)\nChecking if you have warnings 0 ... Yes (1.42)\nChecking if you have Scalar::Util 0 ... Yes (1.50)\nChecking if you have lib 0 ... Yes (0.64)\nChecking if you have Sub::Exporter::Progressive 0.001006 ... Yes (0.001013)\nChecking if you have Variable::Magic 0.48 ... No\n==&gt; Found dependencies: Variable::Magic\nSearching Variable::Magic (0.48) on cpanmetadb ...\n--&gt; Working on Variable::Magic\nFetching http://www.cpan.org/authors/id/V/VP/VPIT/Variable-Magic-0.62.tar.gz\n-&gt; OK\nUnpacking Variable-Magic-0.62.tar.gz\nEntering Variable-Magic-0.62\nChecking configure dependencies from META.json\nChecking if you have ExtUtils::MakeMaker 6.58 ... Yes (7.34)\nChecking if you have Config 0 ... Yes (5.028001)\nConfiguring Variable-Magic-0.62\nRunning Makefile.PL\nChecking if this is ActiveState Perl 5.8.8 build 822 or higher... no\nChecking if this is gcc 3.4 on Windows trying to link against an import library... no\nChecking if your kit is complete...\nLooks good\nGenerating a Unix-style Makefile\nWriting Makefile for Variable::Magic\nWriting MYMETA.yml and MYMETA.json\n-&gt; OK\nChecking dependencies from MYMETA.json ...\nChecking if you have base 0 ... Yes (2.27)\nChecking if you have Socket 0 ... Yes (2.027)\nChecking if you have ExtUtils::MakeMaker 0 ... Yes (7.34)\nChecking if you have POSIX 0 ... Yes (1.84)\nChecking if you have Exporter 0 ... Yes (5.73)\nChecking if you have IO::Handle 0 ... Yes (1.39)\nChecking if you have Config 0 ... Yes (5.028001)\nChecking if you have IPC::Open3 0 ... Yes (1.20)\nChecking if you have Test::More 0 ... Yes (1.302156)\nChecking if you have lib 0 ... Yes (0.64)\nChecking if you have IO::Select 0 ... Yes (1.39)\nChecking if you have Carp 0 ... Yes (1.50)\nChecking if you have XSLoader 0 ... Yes (0.30)\nBuilding and testing Variable-Magic-0.62\ncp lib/Variable/Magic.pm blib/lib/Variable/Magic.pm\nRunning Mkbootstrap for Magic ()\nchmod 644 \"Magic.bs\"\n\"/usr/local/Cellar/perl/5.28.1/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- Magic.bs blib/arch/auto/Variable/Magic/Magic.bs 644\n\"/usr/local/Cellar/perl/5.28.1/bin/perl\" \"/usr/local/Cellar/perl/5.28.1/lib/perl5/5.28.1/ExtUtils/xsubpp\"  -typemap '/usr/local/Cellar/perl/5.28.1/lib/perl5/5.28.1/ExtUtils/typemap'  Magic.xs &gt; Magic.xsc\nmv Magic.xsc Magic.c\ncc -c   -fno-common -DPERL_DARWIN -mmacosx-version-min=10.14 -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -DPERL_USE_SAFE_PUTENV -O3   -DVERSION=\\\"0.62\\\" -DXS_VERSION=\\\"0.62\\\"  \"-I/usr/local/Cellar/perl/5.28.1/lib/perl5/5.28.1/darwin-thread-multi-2level/CORE\"   Magic.c\nIn file included from Magic.xs:10:\n/usr/local/Cellar/perl/5.28.1/lib/perl5/5.28.1/darwin-thread-multi-2level/CORE/perl.h:719:13: warning: non-portable path to file '&lt;Xlocale.h&gt;'; specified path differs in case from file name on disk [-Wnonportable-include-path]\n#   include &lt;xlocale.h&gt;\n            ^~~~~~~~~~~\n            &lt;Xlocale.h&gt;\nMagic.xs:1297:12: warning: initializing 'const U8 *' (aka 'const unsigned char *') with an expression of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]\n const U8 *s = VOID2(const U8 *, VOID2(const void *, SvPV_const(sv, len)));\n           ^   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n2 warnings generated.\nrm -f blib/arch/auto/Variable/Magic/Magic.bundle\ncc  -mmacosx-version-min=10.14 -bundle -undefined dynamic_lookup -L/usr/local/lib -fstack-protector-strong  Magic.o  -o blib/arch/auto/Variable/Magic/Magic.bundle  \\\n          \\\n\nchmod 755 blib/arch/auto/Variable/Magic/Magic.bundle\nManifying 1 pod document\n\"/usr/local/Cellar/perl/5.28.1/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- Magic.bs blib/arch/auto/Variable/Magic/Magic.bs 644\nPERL_DL_NONLAZY=1 \"/usr/local/Cellar/perl/5.28.1/bin/perl\" \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'blib/lib', 'blib/arch')\" t/*.t\n# Testing Variable::Magic 0.62, Perl 5.028001 (no patchlevel), /usr/local/Cellar/perl/5.28.1/bin/perl\nt/00-load.t .......... ok\nt/01-import.t ........ ok\nt/02-constants.t ..... ok\n# Using threads 2.22\n# Using threads::shared 1.58\nt/09-load-threads.t .. \nAll 2 subtests passed \nt/10-simple.t ........ ok\nt/11-multiple.t ...... \nFailed 59/74 subtests \nt/13-data.t .......... \nFailed 32/35 subtests \nt/14-callbacks.t ..... \nFailed 21/26 subtests \n# According to Config::Perl::V version 0.29, this is NOT a debugging perl\n# Not testing global destruction\nt/15-self.t .......... \nFailed 159/162 subtests \n# Using Hash::Util::FieldHash 1.20\nt/16-huf.t ........... \nFailed 11/18 subtests \n# Using IO::Handle 1.39\n# Using IO::Select 1.39\n# Using IPC::Open3 1.20\nt/17-ctl.t ........... \nFailed 96/96 subtests \nt/18-opinfo.t ........ \nFailed 138/139 subtests \nt/20-get.t ........... \nFailed 11/15 subtests \nt/21-set.t ........... \nFailed 14/18 subtests \nt/22-len.t ........... \nFailed 53/55 subtests \nt/23-clear.t ......... \nFailed 14/18 subtests \nt/24-free.t .......... \nFailed 7/11 subtests \n# Using Tie::Array 1.07\nt/25-copy.t .......... \nFailed 43/48 subtests \nt/27-local.t ......... \nFailed 19/24 subtests \nt/28-uvar.t .......... \nFailed 70/75 subtests \nt/30-scalar.t ........ \nFailed 72/76 subtests \nt/31-array.t ......... \nFailed 61/68 subtests \nt/32-hash.t .......... \nFailed 90/94 subtests \nt/33-code.t .......... \nFailed 25/36 subtests \n# Using Symbol 1.08\nt/34-glob.t .......... \nFailed 31/35 subtests \nt/35-stash.t ......... \nFailed 43/43 subtests \n# Using threads 2.22\n# Using threads::shared 1.58\nt/40-threads.t ....... \nAll 3 subtests passed \n# Using threads 2.22\n# Using threads::shared 1.58\nt/41-clone.t ......... \nAll 6 subtests passed \nt/50-return.t ........ \nFailed 33/33 subtests \nt/80-leaks.t ......... \nFailed 47/47 subtests \n\nTest Summary Report\n-------------------\nt/09-load-threads.t (Wstat: 11 Tests: 2 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: No plan found in TAP output\nt/11-multiple.t    (Wstat: 11 Tests: 15 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 74 tests but ran 15.\nt/13-data.t        (Wstat: 11 Tests: 3 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 35 tests but ran 3.\nt/14-callbacks.t   (Wstat: 11 Tests: 5 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 26 tests but ran 5.\nt/15-self.t        (Wstat: 11 Tests: 3 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 162 tests but ran 3.\nt/16-huf.t         (Wstat: 11 Tests: 7 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 18 tests but ran 7.\nt/17-ctl.t         (Wstat: 11 Tests: 0 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 96 tests but ran 0.\nt/18-opinfo.t      (Wstat: 11 Tests: 1 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 139 tests but ran 1.\nt/20-get.t         (Wstat: 11 Tests: 4 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 15 tests but ran 4.\nt/21-set.t         (Wstat: 11 Tests: 4 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 18 tests but ran 4.\nt/22-len.t         (Wstat: 11 Tests: 2 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 55 tests but ran 2.\nt/23-clear.t       (Wstat: 11 Tests: 4 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 18 tests but ran 4.\nt/24-free.t        (Wstat: 11 Tests: 4 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 11 tests but ran 4.\nt/25-copy.t        (Wstat: 11 Tests: 5 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 48 tests but ran 5.\nt/27-local.t       (Wstat: 11 Tests: 5 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 24 tests but ran 5.\nt/28-uvar.t        (Wstat: 11 Tests: 5 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 75 tests but ran 5.\nt/30-scalar.t      (Wstat: 11 Tests: 4 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 76 tests but ran 4.\nt/31-array.t       (Wstat: 11 Tests: 7 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 68 tests but ran 7.\nt/32-hash.t        (Wstat: 11 Tests: 4 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 94 tests but ran 4.\nt/33-code.t        (Wstat: 11 Tests: 11 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 36 tests but ran 11.\nt/34-glob.t        (Wstat: 11 Tests: 4 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 35 tests but ran 4.\nt/35-stash.t       (Wstat: 11 Tests: 0 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 43 tests but ran 0.\nt/40-threads.t     (Wstat: 11 Tests: 3 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: No plan found in TAP output\nt/41-clone.t       (Wstat: 11 Tests: 6 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: No plan found in TAP output\nt/50-return.t      (Wstat: 11 Tests: 0 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 33 tests but ran 0.\nt/80-leaks.t       (Wstat: 11 Tests: 0 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: Bad plan.  You planned 47 tests but ran 0.\nFiles=30, Tests=198,  2 wallclock secs ( 0.07 usr  0.05 sys +  1.42 cusr  0.23 csys =  1.77 CPU)\nResult: FAIL\nFailed 26/30 test programs. 0/198 subtests failed.\nmake: *** [test_dynamic] Error 255\n-&gt; FAIL Installing Variable::Magic failed. See /Users/bpark1/.cpanm/work/1547585021.44629/build.log for details. Retry with --force to force install it.\n-&gt; FAIL Installing the dependencies failed: Module 'Variable::Magic' is not installed\n-&gt; FAIL Bailing out the installation for B-Hooks-EndOfScope-0.24.\nSearching namespace::clean (0.20) on cpanmetadb ...\n--&gt; Working on namespace::clean\nFetching http://www.cpan.org/authors/id/R/RI/RIBASUSHI/namespace-clean-0.27.tar.gz\n-&gt; OK\nUnpacking namespace-clean-0.27.tar.gz\nEntering namespace-clean-0.27\nChecking configure dependencies from META.json\nChecking if you have ExtUtils::MakeMaker 6.58 ... Yes (7.34)\nConfiguring namespace-clean-0.27\nRunning Makefile.PL\nWarning: prerequisite B::Hooks::EndOfScope 0.12 not found.\nWarning: prerequisite Package::Stash 0.23 not found.\nChecking if your kit is complete...\nLooks good\nGenerating a Unix-style Makefile\nWriting Makefile for namespace::clean\nWriting MYMETA.yml and MYMETA.json\n-&gt; OK\nChecking dependencies from MYMETA.json ...\nChecking if you have Package::Stash 0.23 ... No\nChecking if you have B::Hooks::EndOfScope 0.12 ... No\nChecking if you have Test::More 0.47 ... Yes (1.302156)\n==&gt; Found dependencies: Package::Stash, B::Hooks::EndOfScope\nSearching Package::Stash (0.23) on cpanmetadb ...\n--&gt; Working on Package::Stash\nFetching http://www.cpan.org/authors/id/E/ET/ETHER/Package-Stash-0.38.tar.gz\n-&gt; OK\nUnpacking Package-Stash-0.38.tar.gz\nEntering Package-Stash-0.38\nChecking configure dependencies from META.json\nChecking if you have Text::ParseWords 0 ... Yes (3.30)\nChecking if you have Config 0 ... Yes (5.028001)\nChecking if you have Dist::CheckConflicts 0.02 ... Yes (0.11)\nChecking if you have ExtUtils::MakeMaker 6.58 ... Yes (7.34)\nChecking if you have File::Spec 0 ... Yes (3.74)\nConfiguring Package-Stash-0.38\nRunning Makefile.PL\nDistribution opts in x_use_unsafe_inc: 0\nWarning: prerequisite Package::Stash::XS 0.26 not found.\nChecking if your kit is complete...\nLooks good\nGenerating a Unix-style Makefile\nWriting Makefile for Package::Stash\nWriting MYMETA.yml and MYMETA.json\n-&gt; OK\nChecking dependencies from MYMETA.json ...\nChecking if you have IPC::Open3 0 ... Yes (1.20)\nChecking if you have IO::Handle 0 ... Yes (1.39)\nChecking if you have B 0 ... Yes (1.74)\nChecking if you have Test::Requires 0 ... Yes (0.10)\nChecking if you have strict 0 ... Yes (1.11)\nChecking if you have Test::More 0.88 ... Yes (1.302156)\nChecking if you have Symbol 0 ... Yes (1.08)\nChecking if you have base 0 ... Yes (2.27)\nChecking if you have Module::Implementation 0.06 ... Yes (0.09)\nChecking if you have File::Spec 0 ... Yes (3.74)\nChecking if you have ExtUtils::MakeMaker 0 ... Yes (7.34)\nChecking if you have Test::Fatal 0 ... Yes (0.014)\nChecking if you have warnings 0 ... Yes (1.42)\nChecking if you have Package::Stash::XS 0.26 ... No\nChecking if you have Carp 0 ... Yes (1.50)\nChecking if you have constant 0 ... Yes (1.33)\nChecking if you have Getopt::Long 0 ... Yes (2.5)\nChecking if you have Dist::CheckConflicts 0.02 ... Yes (0.11)\nChecking if you have Scalar::Util 0 ... Yes (1.50)\nChecking if you have lib 0 ... Yes (0.64)\n==&gt; Found dependencies: Package::Stash::XS\nSearching Package::Stash::XS (0.26) on cpanmetadb ...\n--&gt; Working on Package::Stash::XS\nFetching http://www.cpan.org/authors/id/E/ET/ETHER/Package-Stash-XS-0.29.tar.gz\n-&gt; OK\nUnpacking Package-Stash-XS-0.29.tar.gz\nEntering Package-Stash-XS-0.29\nChecking configure dependencies from META.json\nChecking if you have ExtUtils::MakeMaker 6.58 ... Yes (7.34)\nConfiguring Package-Stash-XS-0.29\nRunning Makefile.PL\nDistribution opts in x_use_unsafe_inc: 0\nChecking if your kit is complete...\nLooks good\nGenerating a Unix-style Makefile\nWriting Makefile for Package::Stash::XS\nWriting MYMETA.yml and MYMETA.json\n-&gt; OK\nChecking dependencies from MYMETA.json ...\nChecking if you have lib 0 ... Yes (0.64)\nChecking if you have Scalar::Util 0 ... Yes (1.50)\nChecking if you have constant 0 ... Yes (1.33)\nChecking if you have XSLoader 0 ... Yes (0.30)\nChecking if you have warnings 0 ... Yes (1.42)\nChecking if you have Test::Fatal 0 ... Yes (0.014)\nChecking if you have ExtUtils::MakeMaker 0 ... Yes (7.34)\nChecking if you have File::Spec 0 ... Yes (3.74)\nChecking if you have base 0 ... Yes (2.27)\nChecking if you have Symbol 0 ... Yes (1.08)\nChecking if you have Test::More 0.88 ... Yes (1.302156)\nChecking if you have strict 0 ... Yes (1.11)\nChecking if you have Test::Requires 0 ... Yes (0.10)\nChecking if you have B 0 ... Yes (1.74)\nChecking if you have IO::Handle 0 ... Yes (1.39)\nChecking if you have IPC::Open3 0 ... Yes (1.20)\nBuilding and testing Package-Stash-XS-0.29\nDistribution opts in x_use_unsafe_inc: 0\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 3, "creation_date": 1547578347, "post_id": 54204971, "comment_id": 95236994, "body": "Seems like there is a missing backslash in front of <code>$all</code>. It should be <code>&#39;all|everything|universe&#39; =&gt; \\$all</code>"}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 2799433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b011e057102e676020e526b0b82f1949?s=128&d=identicon&r=PG&f=1", "display_name": "user2799433", "link": "https://stackoverflow.com/users/2799433/user2799433"}, "edited": false, "score": 0, "creation_date": 1547584208, "post_id": 54205242, "comment_id": 95239414, "body": "Ok, it is my mistake. Thanks"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1547578747, "creation_date": 1547578747, "answer_id": 54205242, "question_id": 54204971, "link": "https://stackoverflow.com/questions/54204971/undefined-argument-in-option-spec/54205242#54205242", "title": "Undefined argument in option spec", "body": "<pre><code>'all|everything|universe' =&gt; $all\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>'all|everything|universe' =&gt; \\$all\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 2799433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b011e057102e676020e526b0b82f1949?s=128&d=identicon&r=PG&f=1", "display_name": "user2799433", "link": "https://stackoverflow.com/users/2799433/user2799433"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 620, "favorite_count": 0, "accepted_answer_id": 54205242, "answer_count": 1, "score": 0, "last_activity_date": 1547578747, "creation_date": 1547577438, "question_id": 54204971, "link": "https://stackoverflow.com/questions/54204971/undefined-argument-in-option-spec", "title": "Undefined argument in option spec", "body": "<p>I am writing perl code by komodo ide in my open suse os.</p>\n\n<p>In command line I pass:</p>\n\n<pre><code>--verbose --verbose -v --more --lib='/lib' -l '/lib64' -f a=1 --flag b=2\u00a0 --debug 2 -t fukai\n</code></pre>\n\n<p>to my script that has following code:</p>\n\n<pre><code>use Getopt::Long;\nuse Smart::Comments;\n\nmy @libs = ();\nmy %flags = ();\nmy ($verbose, $all, $more, $diam, $debug, $test, $step);\n\nGetOptions(\n\u00a0\u00a0 'verbose+' =&gt; \\$verbose,\n\u00a0\u00a0 'more!' =&gt; \\$more,\n\u00a0\u00a0 'debug:i' =&gt; \\$debug,\n\u00a0\u00a0 'lib=s' =&gt; \\@libs,\n\u00a0\u00a0 'flag=s' =&gt; \\%flags,\n\u00a0\u00a0 'test|t' =&gt; \\$test,\n\u00a0\u00a0 'all|everything|universe' =&gt; $all\n);\n\u00a0\u00a0 \u00a0\n### $verbose\n### $more\n### $debug\n### $test\n### @libs;\n### %flags\n</code></pre>\n\n<p>I get error:</p>\n\n<pre><code>Undefined argument in option spec\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547572426, "post_id": 54203714, "comment_id": 95234283, "body": "If the output file is blank, which file do you mean? THe file opened by <code>$filename</code> or the file opened by <code>$outfile</code>?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1547572458, "post_id": 54203714, "comment_id": 95234303, "body": "It looks like you are trying to download data off an API, and that the format you receive the data in is CSV. While LWP::Simple is not my first choice, it should do the trick for you. However, I think I&#39;d use Text::CSV rather than doing some homebrew parsing that I will have to read two more times to wrap my head around."}, {"owner": {"reputation": 35, "user_id": 10890263, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o1WZ5aounP0/AAAAAAAAAAI/AAAAAAAAAtQ/nB5YRja5GWE/photo.jpg?sz=128", "display_name": "Philip Ankrah", "link": "https://stackoverflow.com/users/10890263/philip-ankrah"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547572553, "post_id": 54203714, "comment_id": 95234369, "body": "@Corion the data that is supposed to be written in $outfile is missing when I go to open the file"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547572627, "post_id": 54203714, "comment_id": 95234407, "body": "Then the next step is to output the progress as you are writing to <code>$out</code>. Print each <code>$curr</code> to the screen, and also add <code>use Data::Dumper; print Dumper \\%data;</code> to your code to see what content you have in <code>%data</code> at all."}, {"owner": {"reputation": 35, "user_id": 10890263, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o1WZ5aounP0/AAAAAAAAAAI/AAAAAAAAAtQ/nB5YRja5GWE/photo.jpg?sz=128", "display_name": "Philip Ankrah", "link": "https://stackoverflow.com/users/10890263/philip-ankrah"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547572805, "post_id": 54203714, "comment_id": 95234489, "body": "@Corion the output i get is $VAR1 = {};"}, {"owner": {"reputation": 35, "user_id": 10890263, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o1WZ5aounP0/AAAAAAAAAAI/AAAAAAAAAtQ/nB5YRja5GWE/photo.jpg?sz=128", "display_name": "Philip Ankrah", "link": "https://stackoverflow.com/users/10890263/philip-ankrah"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1547572980, "post_id": 54203714, "comment_id": 95234581, "body": "@simbabque I will try using Text:CSV"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547573172, "post_id": 54203714, "comment_id": 95234679, "body": "If you get <code>$VAR1 = {}</code>, that means that <code>%data</code> was never filled with data, which means that <code>$in</code> does not contain any data. Maybe debug this by printing the lines from <code>$in</code> as you read them in your program."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547574176, "post_id": 54203714, "comment_id": 95235158, "body": "Are you sure that <code>$data{$curr}</code> has data?  When you read from <code>$in</code> and <code>split</code> the line does the third field actually have those fixed currencies from <code>@curOrd</code> (which is how you index <code>%data</code> when printing to <code>$out</code>)?"}, {"owner": {"reputation": 35, "user_id": 10890263, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o1WZ5aounP0/AAAAAAAAAAI/AAAAAAAAAtQ/nB5YRja5GWE/photo.jpg?sz=128", "display_name": "Philip Ankrah", "link": "https://stackoverflow.com/users/10890263/philip-ankrah"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547574438, "post_id": 54203714, "comment_id": 95235274, "body": "@zdim I know the data is there as the output for doc3.txt is accurate and in the desired format. However everything goes away when I try to sort."}, {"owner": {"reputation": 35, "user_id": 10890263, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o1WZ5aounP0/AAAAAAAAAAI/AAAAAAAAAtQ/nB5YRja5GWE/photo.jpg?sz=128", "display_name": "Philip Ankrah", "link": "https://stackoverflow.com/users/10890263/philip-ankrah"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1547575004, "post_id": 54203714, "comment_id": 95235562, "body": "is there a way to directly just add the $string into the array and sort it? @simbabque"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547577125, "post_id": 54203714, "comment_id": 95236469, "body": "In your program, there is no call to <code>sort</code>, so where are you trying to sort anything? If <code>@curOrd</code> describes the order of currencies, then most likely your data is not there even before you try to write it. If the output of <code>print Dumper \\%data</code> shows <code>$VAR1 = {}</code>, then you didn&#39;t read in any data."}, {"owner": {"reputation": 35, "user_id": 10890263, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o1WZ5aounP0/AAAAAAAAAAI/AAAAAAAAAtQ/nB5YRja5GWE/photo.jpg?sz=128", "display_name": "Philip Ankrah", "link": "https://stackoverflow.com/users/10890263/philip-ankrah"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547587057, "post_id": 54203714, "comment_id": 95240529, "body": "I actually figured it out @Corion"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1547588140, "post_id": 54203714, "comment_id": 95240944, "body": "Please post your solution as an answer for future visitors to this question."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547633039, "post_id": 54203714, "comment_id": 95254857, "body": "@Corion: <i>where are you trying to sort anything?</i> It&#39;s a weird kind of sorting, but by iterating over <code>@curOrd</code> and print the bit of <code>%data</code> which matches each currency in turn, he prints the rates in the order he wants them."}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 7138824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a66d7031537be2518560e1074e87d64f?s=128&d=identicon&r=PG&f=1", "display_name": "ElectricLab", "link": "https://stackoverflow.com/users/7138824/electriclab"}, "is_accepted": false, "score": 5, "last_activity_date": 1547591466, "creation_date": 1547591466, "answer_id": 54207806, "question_id": 54203714, "link": "https://stackoverflow.com/questions/54203714/output-file-is-blank/54207806#54207806", "title": "Output file is blank", "body": "<p>You need to close $file after you fetch the data from the server and are writing it to a file:</p>\n\n<pre><code>open(my $file, '&gt;', $filename) or die $!;\nprint $file $string;\nclose($file)  # Add this line\n</code></pre>\n\n<p>I also had to use http:// instead of https:// in $address, but I'm on a CentOS box with an old LWP install that doesn't seem to do TLS.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 4, "last_activity_date": 1547635512, "last_edit_date": 1547635512, "creation_date": 1547630414, "answer_id": 54213789, "question_id": 54203714, "link": "https://stackoverflow.com/questions/54203714/output-file-is-blank/54213789#54213789", "title": "Output file is blank", "body": "<p>Your problem is that you need to explicitly <code>close()</code> the file you're writing to before you can re-open it to read from it.</p>\n\n<p>But that whole intermediate file is pointless (<a href=\"https://stackoverflow.com/questions/54148007/sort-contents-of-input-file-and-writing-output-file/54149370#54149370\">as I've suggested before</a>). Just process all the data in memory before writing it to your output file.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\nuse LWP::Simple;\n\nmy $dateField = 'date=2018-12-31';\nmy $currency  = \"USD\";\nmy $filename = 'doc3.txt';\nmy $address = \"https://www.oanda.com/rates/api/v1/rates/$currency.csv?\"\n            . \"api_key=gpolonsky&amp;decimal_places=4&amp;$dateField&amp;fields=averages&amp;\"\n            . \"quote=USD&amp;quote=AUD&amp;quote=BRL&amp;quote=CAD&amp;quote=GBP&amp;\"\n            . \"quote=CHF&amp;quote=CNY&amp;quote=DKK&amp;quote=HKD&amp;quote=INR&amp;\"\n            . \"quote=IDR&amp;quote=ILS&amp;quote=JPY&amp;quote=MXN&amp;quote=NOK&amp;\"\n            . \"quote=PHP&amp;quote=PLN&amp;quote=SGD&amp;quote=sKK&amp;quote=ZAR&amp;\"\n            . \"quote=KRW&amp;quote=SEK&amp;quote=TWD&amp;quote=THB&amp;quote=EUR&amp;\"\n            . \"quote=MYR&amp;quote=NZD&amp;quote=SAR&amp;quote=TRY&amp;quote=RUB&amp;\"\n            . \"quote=CZK&amp;quote=AED&amp;quote=CLP&amp;quote=EGP&amp;quote=MAD&amp;\"\n            . \"quote=NGN&amp;quote=OMR&amp;quote=QAR\";\n\nmy $content = get($address);\n\n# I've removed $! from the die() error below. $! is the last\n# *operating system* error. And making an HTTP request is not\n# an operating system operation - so the contents will have no\n# connection to the results of our GET request.\ndefined $content or die \"Cannot read '$address'\";\n$content =~  s/^[^\\n]*\\n//s;\n$content =~  s/^/20181231,/gm; # The m option makes ^ match at the start of each line\n$content =~  s/,2018-12-3[0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9]\\+0000*//g;\n$content =~  s/([A-Z][A-Z][A-Z]),[0-9]*\\.[0-9][0-9][0-9][0-9]/$1/g;\n\nmy @curOrd = qw( USD AUD BRL GBP CAD CNY DKK HKD INR IDR ILS JPY MXN\n                 NOK PHP PLN SGD SKK ZAR KRW SEK CHF TWD THB EUR MYR\n                 NZD SAR TRY RUB CZK AED CLP EGP MAD NGN OMR QAR );\n\nmy $i = 1;\nmy %curr_lookup = map { $_ =&gt; $i++ } @curOrd;\n\nmy @data = map { [ split /,/ ] } split /\\n/, $content;\n\nmy $outfile = 'file2.txt';\n\n@data = sort { $curr_lookup{$a-&gt;[2]} &lt;=&gt; $curr_lookup{$b-&gt;[2]} }\n        @data;\n\nopen my $out, '&gt;', $outfile or die \"Can't open $outfile for writing: $!\";\n\nsay $out join ',', @$_ for @data;\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 10890263, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o1WZ5aounP0/AAAAAAAAAAI/AAAAAAAAAtQ/nB5YRja5GWE/photo.jpg?sz=128", "display_name": "Philip Ankrah", "link": "https://stackoverflow.com/users/10890263/philip-ankrah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 54213789, "answer_count": 2, "score": 1, "last_activity_date": 1547635512, "creation_date": 1547572180, "last_edit_date": 1547574457, "question_id": 54203714, "link": "https://stackoverflow.com/questions/54203714/output-file-is-blank", "title": "Output file is blank", "body": "<p>I don't know why the following code outputs a blank file. I am running Windows 8. I've received help from this community for previous perl help and this is just what I've been able to put together with the help I've received. However, I can't figure out where this script goes awry.</p>\n\n<pre><code>#! perl\nuse strict;\nuse warnings;\nuse HTML::FormatText;\nuse LWP::Simple;\n\nmy $dateField = 'date=2018-12-31';\nmy $currency  = \"USD\";\nmy $filename = 'C:\\Users\\Name\\Desktop\\doc3.txt';\nmy $address = \"https://www.oanda.com/rates/api/v1/rates/$currency.csv?api_key=gpolonsky&amp;decimal_places=4&amp;$dateField&amp;fields=averages&amp;quote=USD&amp;quote=AUD&amp;quote=BRL&amp;quote=CAD&amp;quote=GBP&amp;quote=CHF&amp;quote=CNY&amp;quote=DKK&amp;quote=HKD&amp;quote=INR&amp;quote=IDR&amp;quote=ILS&amp;quote=JPY&amp;quote=MXN&amp;quote=NOK&amp;quote=PHP&amp;quote=PLN&amp;quote=SGD&amp;quote=sKK&amp;quote=ZAR&amp;quote=KRW&amp;quote=SEK&amp;quote=TWD&amp;quote=THB&amp;quote=EUR&amp;quote=MYR&amp;quote=NZD&amp;quote=SAR&amp;quote=TRY&amp;quote=RUB&amp;quote=CZK&amp;quote=AED&amp;quote=CLP&amp;quote=EGP&amp;quote=MAD&amp;quote=NGN&amp;quote=OMR&amp;quote=QAR\";\nmy $content = get($address);\nmy $s = 1;\n\ndefined $content or die \"Cannot read '$address': $!\";\n$content =~  s/^[^\\n]*\\n//s; \n$content =~  s/^/20181231,/gm; # The m option makes ^ match at the start of each line\n$content =~  s/,2018-12-3[0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9]\\+0000*//g;\n$content =~  s/([A-Z][A-Z][A-Z]),[0-9]*\\.[0-9][0-9][0-9][0-9]/$1/g;\n\nmy $string = HTML::FormatText-&gt;format_string(\n    $content,\n    leftmargin  =&gt;  0,\n    rightmargin =&gt; 23,\n);\n\nopen(my $file, '&gt;', $filename) or die $!;\nprint $file $string;\n\nmy @curOrd = qw( USD AUD BRL GBP CAD CNY DKK HKD INR IDR ILS JPY MXN NOK PHP PLN SGD SKK ZAR KRW SEK CHF TWD THB EUR MYR NZD SAR TRY RUB CZK AED CLP EGP MAD NGN OMR QAR );\nmy %data;\nmy $infile = 'C:\\Users\\Name\\Desktop\\doc3.txt';\nmy $outfile = 'file2.txt';\n\nopen (my $in, \"&lt;\", $infile ) || die \"can't open $infile file\"; \nwhile (my $line = &lt;$in&gt;) {\n    push(@{$data{(split ',', $line)[2]}}, $line);\n} \nprint $infile;\nclose $in;\n\nopen (my $out, \"&gt;\", $outfile) || die \"can't open $outfile file\"; \nforeach my $curr (@curOrd) {\n    foreach my $line (@{$data{$curr}}) {\n        print $out $line;\n    }\n}\nclose $out;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1532, "user_id": 3670387, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1LTvV.jpg?s=128&g=1", "display_name": "Adrian Pop", "link": "https://stackoverflow.com/users/3670387/adrian-pop"}, "edited": false, "score": 1, "creation_date": 1547544166, "post_id": 54195441, "comment_id": 95218560, "body": "Did you try something so far?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1547544590, "post_id": 54195441, "comment_id": 95218795, "body": "See also <a href=\"http://perldoc.perl.org/perlfaq4.html#How-do-I-sort-a-hash-(optionally-by-value-instead-of-key)%3f\" rel=\"nofollow noreferrer\">perldoc.perl.org/&hellip;</a> - this is a FAQ"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1547544663, "post_id": 54195441, "comment_id": 95218840, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5972224/the-simple-way-to-sort-based-on-values-in-a-hash-in-perl\">The simple way to sort based on values in a hash in perl</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1547575182, "post_id": 54195927, "comment_id": 95235639, "body": "Also check out <a href=\"https://metacpan.org/pod/List::UtilsBy\" rel=\"nofollow noreferrer\">List::UtilsBy</a> for sorting by possibly slow method calls more efficiently: <code>use List::UtilsBy &#39;nsort_by&#39;; my @keys = nsort_by { $hash{$_}-&gt;val1 } keys %hash;</code>"}], "tags": [], "owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "is_accepted": true, "score": 6, "last_activity_date": 1547544299, "creation_date": 1547544299, "answer_id": 54195927, "question_id": 54195441, "link": "https://stackoverflow.com/questions/54195441/how-can-i-sort-a-hash-with-objects-in-perl/54195927#54195927", "title": "How can I sort a hash with objects in perl", "body": "<p>I'm going to use an array-based object for illustration.</p>\n\n<pre><code>package obj;\n\nsub new { my $class = shift; bless [@_], $class }\nsub val1 { my $self = shift; $self-&gt;[0] }\nsub val2 { my $self = shift; $self-&gt;[1] }\nsub val3 { my $self = shift; $self-&gt;[2] }\n\npackage main;\n\nmy %hash = (\n    p =&gt; obj-&gt;new(4,2,5),\n    e =&gt; obj-&gt;new(1,2,5),\n    z =&gt; obj-&gt;new(2,2,5),\n    x =&gt; obj-&gt;new(3,2,5),\n);\n\n# sort the keys of hash according to the 'val1' attribute\nmy @keys = sort { $hash{$a}-&gt;val1 &lt;=&gt; $hash{$b}-&gt;val1 } keys %hash;\n\nprint join(\", \", @keys);\n</code></pre>\n\n<p>Will print <code>e, z, x, p</code>.</p>\n\n<p>Note that if the object uses hash-based representation, as is the case with your example code, you can either use the above code or simply access the attribute directly as hash.</p>\n\n<pre><code># sort the keys of hash according to the 'val1' attribute\nmy @keys = sort { $hash{$a}{val1} &lt;=&gt; $hash{$b}{val1} } keys %hash;\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 6443097, "user_type": "registered", "profile_image": "https://graph.facebook.com/1715557505351547/picture?type=large", "display_name": "yasara malshan", "link": "https://stackoverflow.com/users/6443097/yasara-malshan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 1, "accepted_answer_id": 54195927, "answer_count": 1, "score": 3, "last_activity_date": 1547555033, "creation_date": 1547542291, "last_edit_date": 1547555033, "question_id": 54195441, "link": "https://stackoverflow.com/questions/54195441/how-can-i-sort-a-hash-with-objects-in-perl", "title": "How can I sort a hash with objects in perl", "body": "<p>I need to sort (or re-arrange keys) a hash with objects by looking on a common  attribute(eg: <code>val1</code>) on those objects. How can I do that?</p>\n\n<p><a href=\"https://i.stack.imgur.com/aA65a.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aA65a.jpg\" alt=\"Sample\"></a></p>\n"}, {"tags": ["perl", "ssh"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547567184, "post_id": 54193302, "comment_id": 95231412, "body": "If you have <code>perl</code> on the remote end as well, just use <code>$ssh-&gt;cmd(qq{perl -wle &#39;exit -e shift&#39; &#39;$filename&#39;})</code> and then look at the exit code"}], "answers": [{"tags": [], "owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "is_accepted": false, "score": 4, "last_activity_date": 1547539800, "creation_date": 1547539800, "answer_id": 54194871, "question_id": 54193302, "link": "https://stackoverflow.com/questions/54193302/how-to-check-if-remote-directory-exists-using-netsshperl/54194871#54194871", "title": "How to check if remote directory exists using Net::SSH::Perl", "body": "<p>The <code>-p</code> option for <code>mkdir</code> accomplishes what you want (no error if existing), so something like:</p>\n\n<pre><code>my($stdout, $stderr, $exit) = $ssh-&gt;cmd(\"mkdir -p /home/mydir/mydir_1\");\n</code></pre>\n"}], "owner": {"reputation": 427, "user_id": 6368549, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/89560160519f167db71632379e29d843?s=128&d=identicon&r=PG&f=1", "display_name": "Landon Statis", "link": "https://stackoverflow.com/users/6368549/landon-statis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1547626970, "creation_date": 1547531064, "last_edit_date": 1547626970, "question_id": 54193302, "link": "https://stackoverflow.com/questions/54193302/how-to-check-if-remote-directory-exists-using-netsshperl", "title": "How to check if remote directory exists using Net::SSH::Perl", "body": "<p>Check to see if remote directory exists using Perl Net::SSH::Perl</p>\n\n<p>I want to check if a directory exists on a report server using  the Net::SSH::Perl module.</p>\n\n<p>This command works:</p>\n\n<pre><code>my($stdout, $stderr, $exit) = $ssh-&gt;cmd(\"ls -al /home/mydir\");\n</code></pre>\n\n<p>But how can I do like:</p>\n\n<pre><code>if ( ! -e \"/home/mydir/mydir_1\" ) {\n   mkdir \"/home/mydir/mydir_1\";\n}\n</code></pre>\n\n<p>Any way to do this using this Perl module?</p>\n"}, {"tags": ["perl", "fork"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1547521729, "post_id": 54191639, "comment_id": 95212048, "body": "<code>$forks</code> will not be incremented in the parent process, because you only increment it in the child processes. Your code only ever calls <code>run1()</code> Where do you call <code>sub1</code> .. <code>subN</code>?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1547521821, "post_id": 54191639, "comment_id": 95212058, "body": "<code>wait()</code> is what prevents zombies, not <code>exit</code>. You must call <code>wait()</code> N times before calling exiting the main process if you had N successful forks."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1547522207, "post_id": 54191639, "comment_id": 95212128, "body": "How about <code>if ($pid &lt; 1) { &#47;* child or failed *&#47; sub1(); &#47;* child *&#47; exit() if $pid == 0; } else ( &#47;* parent *&#47; $forks++; }</code>? But while <code>subX</code> is executing for a failed fork, you will have zombies, because you are only calling <code>wait()</code> after everything is done."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1547539190, "post_id": 54191639, "comment_id": 95216405, "body": "Crossposted at <a href=\"https://perlmonks.org/?node_id=1228560\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=1228560</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1547546832, "post_id": 54191639, "comment_id": 95220010, "body": "Re &quot;<i>This will work only if ...</i>&quot;, Actually, it doesn;t work. <code>$forks</code> is always <code>0</code> in the parent."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1547575022, "post_id": 54194857, "comment_id": 95235571, "body": "The other benefit of wait and waitpid is that after it has reaped a process, <code>$?</code> will tell you the exit status."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1547577507, "post_id": 54194857, "comment_id": 95236623, "body": "@Grinnz Right, and while it&#39;s in the text and code I should&#39;ve stated it right up front, the first time it&#39;s mentioned. Edited, thanks"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1548819376, "last_edit_date": 1548819376, "creation_date": 1547539740, "answer_id": 54194857, "question_id": 54191639, "link": "https://stackoverflow.com/questions/54191639/understanding-how-perl-fork-works/54194857#54194857", "title": "Understanding how Perl fork works", "body": "<p>There are a few questions to clear up here.</p>\n\n<p>A basic example</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy @coderefs;    \nfor my $i (1..4) { \n    push @coderefs, sub { \n        my @args = @_; \n        say \"Sub #$i with args: @args\";\n    };\n}\n\nmy @procs;\nfor my $i (0..$#coderefs) {\n    my $pid = fork  // do {\n        warn \"Can't fork: $!\";\n        # retry, or record which subs failed so to run later\n        next;\n    };  \n    if ($pid==0) { \n        $coderefs[$i]-&gt;(\"In $$: $i\");\n        exit;\n    }   \n    push @procs, $pid;\n    #sleep 1;\n}    \nsay \"Started: @procs\";\n\nfor (@procs) {\n    my $goner = wait;\n    say \"$goner exited with $?\";\n}\n</code></pre>\n\n<p>We generate anonymous subroutines and store those code references in an array, then go through that array and start that many processes, running a sub in each. After that the parent <code>wait</code>s on all these, but normally you'll use <code>waitpid</code>; see docs listed below.</p>\n\n<p>A child process always <code>exit</code>s, or you'd have multiple processes executing all of the rest of the code in the program.  Once a child process exits the kernel will notify the parent, and the parent can \"pick up\" that notification (\"reap\" the exit status of the child process) via <code>wait</code>/<code>waitpid</code>, or use a signal handler to ignore it.</p>\n\n<p>If the parent never does this after the child exited, and exits itself later, then the OS stays stuck with that information about the (exited) child process in the process table; that's a zombie. So you do need to <code>wait</code>, so that OS gets done with the child process (and you check up on how it went). Or, use a signal handler to indicate that you don't care about the child's exit.  Modern systems reap would-be zombies but not always and you cannot rely on that; clean up after yourself.</p>\n\n<p>Note, you'll need to be reading <a href=\"https://perldoc.perl.org/perlipc.html\" rel=\"nofollow noreferrer\">perlipc</a>, <a href=\"https://perldoc.perl.org/functions/fork.html\" rel=\"nofollow noreferrer\">fork</a>, <a href=\"https://perldoc.perl.org/functions/wait.html\" rel=\"nofollow noreferrer\">wait</a> and <a href=\"https://perldoc.perl.org/functions/waitpid.html\" rel=\"nofollow noreferrer\">waitpid</a>, <a href=\"https://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\">perlvar</a> ... and many other pages that you'll run into while working on all this. It will take a little playing and some trial and error.  Once you get it all down you may want to start using modules, at least for some types of tasks.</p>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 0, "accepted_answer_id": 54194857, "answer_count": 1, "score": 1, "last_activity_date": 1548819376, "creation_date": 1547516664, "question_id": 54191639, "link": "https://stackoverflow.com/questions/54191639/understanding-how-perl-fork-works", "title": "Understanding how Perl fork works", "body": "<p>What would be the right way to fork processes that each one of them runs a different subroutine <code>sub1,sub2,...,subN</code>. After reading a lot of previous thread and material, I feel that I understand the logic but a bit confused on how to write in the cleanest way possible (readability is important to me).</p>\n\n<p>Consider 4 subs. Each one of them gets different arguments. It feels like that the most efficient way would be to create 7 forks that each one of them will run a different sub. The code will look something like this:</p>\n\n<pre><code>my $forks = 0;\nforeach my $i (1..4) {\n    if ($i == 1) {\n        my $pid = fork();\n        if ($pid == 0) {\n            $forks++;\n            run1();\n            exit;\n        }\n    } elsif ($i == 2) {\n        my $pid = fork();\n        if ($pid == 0) {\n            $forks++;\n            run1();\n            exit;\n        }\n    } elsif ($i == 3) {\n        my $pid = fork();\n        if ($pid == 0) {\n            $forks++;\n            run1();\n            exit;\n        }\n    } elsif ($i == 4) {\n        my $pid = fork();\n        if ($pid == 0) {\n            $forks++;\n            run1();\n            exit;\n        }\n    }\n\n}\n\nfor (1 .. $forks) {\n    my $pid = wait();\n    print \"Parent saw $pid exiting\\n\";\n}\nprint \"done\\n\";\n</code></pre>\n\n<p>Some points:</p>\n\n<ul>\n<li><p>This will work only if all of the forks were successful. But I would like to run the subs even though the fork failed (even though it will not be parallel. In that case, I guess we need to take the subs out of the if and exit only if the $pid wasn't <code>0</code>. something like:</p>\n\n<pre><code>my $pid = fork();\nrun1();\n$forks++ if ($pid == 0);\nexit if ($pid == 0);\n</code></pre>\n\n<p>But it still feels not right.</p></li>\n<li><p>Using <code>exit</code> is the right way to kill the child process? if the processes were killed with <code>exit</code> should I still use <code>wait</code>? Will it prevent zombies?</p></li>\n<li><p>Maybe the most interesting question: What will I do if we have 15 function calls? I would like to somehow create 15 forks but I can't create 15 if-else statements - the code will not be readable that way. At first, I thought that it is possible to insert those function calls into an array (somehow) and loop over that array. But after some research, I didn't find a way that it is possible.</p></li>\n<li>If possible, I prefer not to use any additional modules like <code>Parallel::ForkManager</code>.</li>\n</ul>\n\n<p>Is there a clean and simple way to solve it?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1547506702, "post_id": 54190262, "comment_id": 95208914, "body": "Perfect! thank you! Is there a variable for <code>NO_NO_ELEMENTS</code> like the one for <code>DISPLAY_ADDRESS</code> (<code>$Data::TreeDumper::Displayaddress</code>)?"}, {"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1547507462, "post_id": 54190262, "comment_id": 95209131, "body": "Also, is it possible to not print the title? something like: <code>DumpTree($clone, &#39;Contents of $h&#39;,                NO_NO_ELEMENTS  =&gt; 1,                DISPLAY_ADDRESS =&gt; 0);</code> Although it won&#39;t work because it will think that <code>NO_NO_ELEMENTS</code> is a title."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1547507510, "post_id": 54190262, "comment_id": 95209146, "body": "What do you mean by &quot;title&quot;?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1547507553, "post_id": 54190262, "comment_id": 95209157, "body": "I don&#39;t see any variable mentioned in the documentation. I haven&#39;t checked the source, though."}, {"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1547508438, "post_id": 54190262, "comment_id": 95209396, "body": "I check the source and sadly there is no such variable. By title I meant removing <code>&#39;Contents of $h&#39;,</code>"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 1, "creation_date": 1547508930, "post_id": 54190262, "comment_id": 95209513, "body": "You can supply <code>&quot;&quot;</code>, but it will still print an empty line."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1547505602, "creation_date": 1547505602, "answer_id": 54190262, "question_id": 54189950, "link": "https://stackoverflow.com/questions/54189950/removing-the-values-of-leafs-in-datatreedumper/54190262#54190262", "title": "Removing the values of leafs in Data::TreeDumper", "body": "<p>Filters can change the labels, but you want to change the values.</p>\n\n<p>So, I made a deep copy of the hash and replaced the non-ref values by empty hashes (empty arrays would work, too) and set NO_NO_ELEMENTS to get no output for them. I also had to turn off addresses (maybe you set the corresponding flag somewhere else?)</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nuse Data::TreeDumper;\nuse Storable qw{ dclone };\n\nsub remove_leaves {\n    my $h = $_[0];\n    for (values %$h) {\n        if (ref) {\n            remove_leaves($_);\n        } else {\n            $_ = {};\n        }\n    }\n}\n\nmy $h = {file1 =&gt; 1,\n         file2 =&gt; {file3 =&gt; 3,\n                   file4 =&gt; 4},\n         file5 =&gt; 5};\n\nmy $clone = dclone($h);\n\nremove_leaves($clone);\nprint DumpTree($clone, 'Contents of $h',\n               NO_NO_ELEMENTS  =&gt; 1,\n               DISPLAY_ADDRESS =&gt; 0);\n</code></pre>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 54190262, "answer_count": 1, "score": 1, "last_activity_date": 1547505602, "creation_date": 1547503871, "last_edit_date": 1547504229, "question_id": 54189950, "link": "https://stackoverflow.com/questions/54189950/removing-the-values-of-leafs-in-datatreedumper", "title": "Removing the values of leafs in Data::TreeDumper", "body": "<p>I'm trying to learn how to work with the <code>Data::TreeDumper</code> module. I have a hash that looks as follows:</p>\n\n<pre><code>my $h = {'file1' =&gt; 1,\n         'file2' =&gt; { \n                      'file3' =&gt; 3,\n                      'file4' =&gt; 4\n                    },\n         'file5' =&gt; 5\n};\n</code></pre>\n\n<p>I use <code>Data::TreeDumper</code> as following:</p>\n\n<pre><code>print DumpTree($h,'Contents of $h');\n</code></pre>\n\n<p>And the output is:</p>\n\n<pre><code>Contents of $d\n|- file1 = 1\n|- file2\n|  |- file3 = 3\n|  `- file4 = 4\n`- file5 = 5\n</code></pre>\n\n<p>It works great but I would like to somehow remove the values of the <strong>leafs</strong> of the hash, meaning the output should be:</p>\n\n<pre><code>Contents of $d\n|- file1 \n|- file2\n|  |- file3\n|  `- file4\n`- file5\n</code></pre>\n\n<p>After reading the docs <a href=\"https://metacpan.org/pod/Data::TreeDumper\" rel=\"nofollow noreferrer\">(link)</a> I found out that I can pass a filter that will do changes on the output. But they didn't show how to do it. Also, I think that it is possible to achieve by using the <code>Tree::Simple</code> module but I prefer not to do it. If there does not exist a variable which I can set in order to get the wanted output, then can I do it with some special filter? if so, how?</p>\n"}, {"tags": ["windows", "perl"], "answers": [{"tags": [], "owner": {"reputation": 761, "user_id": 7050476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44c2df49356fac6994f4b447eb135c37?s=128&d=identicon&r=PG&f=1", "display_name": "afarah", "link": "https://stackoverflow.com/users/7050476/afarah"}, "is_accepted": true, "score": 3, "last_activity_date": 1547499998, "creation_date": 1547499998, "answer_id": 54189194, "question_id": 54189141, "link": "https://stackoverflow.com/questions/54189141/perl-on-windows-cant-do-inplace-edit-on-file-file-exists/54189194#54189194", "title": "perl on Windows: Can&#39;t do inplace edit on file: File exists", "body": "<p>Turns out the file was open (for reading) by another process.</p>\n\n<pre><code>$ handle 20180619.Xml\n\nNthandle v4.11 - Handle viewer\nCopyright (C) 1997-2017 Mark Russinovich\nSysinternals - www.sysinternals.com\n\nRgui.exe           pid: 11520  type: File           488: C:\\20180619.Xml\nRgui.exe           pid: 11520  type: File           530: C:\\20180619.Xml\nRgui.exe           pid: 11520  type: File           680: C:\\20180619.Xml\n</code></pre>\n\n<p>Killing the process solves the issue.</p>\n"}], "owner": {"reputation": 761, "user_id": 7050476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44c2df49356fac6994f4b447eb135c37?s=128&d=identicon&r=PG&f=1", "display_name": "afarah", "link": "https://stackoverflow.com/users/7050476/afarah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 632, "favorite_count": 0, "accepted_answer_id": 54189194, "answer_count": 1, "score": 2, "last_activity_date": 1547499998, "creation_date": 1547499795, "question_id": 54189141, "link": "https://stackoverflow.com/questions/54189141/perl-on-windows-cant-do-inplace-edit-on-file-file-exists", "title": "perl on Windows: Can&#39;t do inplace edit on file: File exists", "body": "<p>I've alread read <a href=\"https://stackoverflow.com/q/2616865/7050476\">this</a> and <a href=\"https://stackoverflow.com/q/32469663/7050476\">this</a> question, which led me to:</p>\n\n<pre><code>for f in *.Xml\ndo\n  perl -pi.bak -e 's/\\x03//g' \"$f\"\ndone\nrm *.bak\n</code></pre>\n\n<p>I am using a for loop and I'm using <code>-pi.bak</code>. I still get <code>Can't do inplace edit on 20180619.Xml: File exists.</code>. I also tried this from Windows' <code>cmd.exe</code> instead of from git bash:</p>\n\n<pre><code>for %i in (*.Xml) do perl -pi.bak -e \"s/\\x03//g\" \"%i\"\n</code></pre>\n\n<p>Same thing. Any ideas?</p>\n\n<p>Version info:</p>\n\n<pre><code>$ perl --version\n\nThis is perl 5, version 26, subversion 1 (v5.26.1) built for x86_64-msys-thread-multi\n</code></pre>\n\n<p>I am using the latest version of Windows 10 Pro.</p>\n"}, {"tags": ["bash", "perl", "unix", "awk", "sed"], "comments": [{"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 1, "creation_date": 1547498856, "post_id": 54188794, "comment_id": 95205999, "body": "Welcome to StackOverflow! This site is about helping people fix their code. It&#39;s not a free coding service. Any code is better than no code at all. Meta-code, even, will demonstrate how you&#39;re thinking a program should work, even if you don&#39;t know how to write a solution. Given the tags you&#39;ve included, I&#39;d expect to see bash, perl, awk and sed code in your question. Review <a href=\"http://stackoverflow.com/help/how-to-ask\">how-to-ask</a>, show us your work so far in an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>, the result you were expecting and the results you got, and we&#39;ll help you figure it out."}, {"owner": {"reputation": 13, "user_id": 10913780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31faf26029a0ac0875ff8b0974f31744?s=128&d=identicon&r=PG&f=1", "display_name": "sTeaLth", "link": "https://stackoverflow.com/users/10913780/stealth"}, "reply_to_user": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1547499458, "post_id": 54188794, "comment_id": 95206269, "body": "I tried it with following regex <code>&lt;\\?php\\n\\#[a-zA-Z0-9]{6}\\#.*\\?&gt;</code> in sed and awk, but don&#39;t get a working solution."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547501365, "post_id": 54188794, "comment_id": 95207050, "body": "<code>sed</code> and <code>awk</code> only work line-by-line, so a multiline regex will not work easily there. You can try Perl: <code>perl -0777 -i.bak -wple &#39;s&#47;&lt;\\?php\\s+#(\\w{6})#.*?\\s+#\\1#\\s+\\?&gt;&#47;&#47;msg&#39;</code>"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1547502958, "post_id": 54188794, "comment_id": 95207672, "body": "Is there any chance of &quot;?&gt;&quot; appearing in the inner lines?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547503230, "post_id": 54188794, "comment_id": 95207779, "body": "@Corion no, awk works record by record, not line by line, and so awk can be used with multi-line regexps. sTealth please <a href=\"https://stackoverflow.com/posts/54188794/edit\">edit</a> your question to include concise, testable sample input (not just the block you want removed from that input) and expected output so we can help you."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10913780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31faf26029a0ac0875ff8b0974f31744?s=128&d=identicon&r=PG&f=1", "display_name": "sTeaLth", "link": "https://stackoverflow.com/users/10913780/stealth"}, "edited": false, "score": 0, "creation_date": 1547506763, "post_id": 54189927, "comment_id": 95208932, "body": "It worked for me with <code>perl -0777 -i.bak -wple &#39;s&#47;&lt;\\?php\\r\\n\\#[a-zA-Z0-9]{6}\\#.*\\?&gt;&#47;&#47;msg&#39; file</code> many thanks to your help Ed and Corion."}, {"owner": {"reputation": 13, "user_id": 10913780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31faf26029a0ac0875ff8b0974f31744?s=128&d=identicon&r=PG&f=1", "display_name": "sTeaLth", "link": "https://stackoverflow.com/users/10913780/stealth"}, "edited": false, "score": 1, "creation_date": 1547507243, "post_id": 54189927, "comment_id": 95209058, "body": "I also tried it with awk now and it works with <code>awk -v RS=&#39;&lt;[?]php\\r\\n#[[:alnum:]]{6}#.*#&#47;[[:alnum:]]{6}#\\r\\n[?]&gt;&#39; -v ORS= &#39;1&#39; file</code> thank you Ed"}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": 1, "last_activity_date": 1547512037, "last_edit_date": 1547512037, "creation_date": 1547503755, "answer_id": 54189927, "question_id": 54188794, "link": "https://stackoverflow.com/questions/54188794/how-to-substitude-delete-multiple-lines-inplace/54189927#54189927", "title": "How to substitude / delete multiple lines inplace?", "body": "<p>This may or may not be what you're looking for (since you didn't provide sample input/output we could test against) using GNU awk for multi-char RS:</p>\n\n<pre><code>$ cat file\nfoo\n&lt;?php\n#bVj7Gt#\nline1\n...\nlineX\n#/bVj7Gt#\n?&gt;\nbar\n\n$ awk -v RS='&lt;[?]php\\n#[[:alnum:]]{6}#.*#/[[:alnum:]]{6}#\\n[?]&gt;\\n' -v ORS= '1' file\nfoo\nbar\n</code></pre>\n\n<p>Make it <code>awk -i inplace -v RS=...</code> if you want to do \"inplace\" editing.</p>\n"}], "owner": {"reputation": 13, "user_id": 10913780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31faf26029a0ac0875ff8b0974f31744?s=128&d=identicon&r=PG&f=1", "display_name": "sTeaLth", "link": "https://stackoverflow.com/users/10913780/stealth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 54189927, "answer_count": 1, "score": 1, "last_activity_date": 1554769619, "creation_date": 1547498131, "last_edit_date": 1547498680, "question_id": 54188794, "link": "https://stackoverflow.com/questions/54188794/how-to-substitude-delete-multiple-lines-inplace", "title": "How to substitude / delete multiple lines inplace?", "body": "<p>I want to use <code>find . -name *.php -exec COMMAND {} \\;</code> on a debian based system to delete pattern like this:</p>\n\n<pre><code>&lt;?php\n#bVj7Gt#\nline1\n...\nlineX\n#/bVj7Gt#\n?&gt;\n</code></pre>\n\n<p>The line after <code>&lt;?php</code> = hash + six alphanumeric + hash</p>\n\n<p>The line before <code>?&gt;</code> = hash + slash + six alphanumeric + hash</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 4, "creation_date": 1547494322, "post_id": 54187853, "comment_id": 95204083, "body": "@TTaJTa4 Please always post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, that way you will get answer that address the problems of the code you show, not the code you hide from us."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1547494548, "post_id": 54187853, "comment_id": 95204173, "body": "@TTaJTa4  Re &quot;<i>didn&#39;t include all the script</i>&quot; -- (1) please do include enough; this isn&#39;t clear (2) Still, <code>0..scalar @ARGV</code> is off-by-one as @toolic says; you need <code>0..$#ARGV</code> (to iterate up to the last index, not up to array size!).  (Btw, you wouldn&#39;t need <code>scalar</code> there anyway)"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 2, "creation_date": 1547494635, "post_id": 54187853, "comment_id": 95204221, "body": "Why not <code>use Getopt::Long;</code> instead of manually processing <code>@ARGV</code>?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547494639, "post_id": 54187853, "comment_id": 95204223, "body": "If you undef an element of @ARGV, how is that going to help <code>Getopt</code>?? Did you consider that it might well confuse it?  I&#39;d suggest, show us a brief example of what you want to do."}, {"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1547494666, "post_id": 54187853, "comment_id": 95204231, "body": "switching to <code>0..$#ARGV</code> solves it :). is the scalar necessarily?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547494706, "post_id": 54187853, "comment_id": 95204251, "body": "Well, <code>$#ARGV</code> is a scalar, a number: the last value of index. So no need for <code>scalar</code>.  What I meant above is that if you stick <code>@ary</code> in a scalar context, what the range operator <code>..</code> imposes, you still don&#39;t need <code>scalar</code>; so <code>0..@ary</code> will count from 0 to the size-of-array.  Incidentally, you practically never need this: if iterating over indices you want to stop at the last index, which is array-size - 1, not array size."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1547554202, "last_edit_date": 1547554202, "creation_date": 1547542684, "answer_id": 54195549, "question_id": 54187853, "link": "https://stackoverflow.com/questions/54187853/handling-with-two-warnings-of-args/54195549#54195549", "title": "Handling with two warnings of @ARGS", "body": "<p>Let's expand on those comments a bit.</p>\n\n<p>Imagine <code>@ARGV</code> contains four elements. They will have the indexes 0, 1, 2 and 3 (as arrays in Perl are zero-based).</p>\n\n<p>And your loop looks like this:</p>\n\n<pre><code>foreach my $i (0..scalar(@ARGV)) {\n</code></pre>\n\n<p>You want to visit each element in <code>@ARGV</code>, so you use the range operator (<code>..</code>) to generate a list of all those indexes. But <code>scalar @ARGV</code> returns the number of elements in <code>@ARGV</code> and that's 4. So your range is 0 .. 4. And there's no value at <code>$ARGV[4]</code> - so you get an \"undefined value\" warning (as you're trying to read past the end of an array).</p>\n\n<p>A better way to do this is to use <code>$#ARGV</code> instead of <code>scalar @ARGV</code>. For every array variable in Perl (say <code>@foo</code>) you also get a variable (called <code>$#foo</code>) which contains the last index number in the array. In our case, that's 3 and your range (<code>0 .. $#ARGV</code>) now contains the integers 0 .. 3 and you no longer try to read past the end of the array and you don't get the \"undefined value\" warnings.</p>\n\n<p>There's one other improvement I would suggest. Inside your loop, you only ever use <code>$i</code> to access an element from <code>@ARGV</code>. It's only used in expressions like <code>$ARGV[$i]</code>. In this case, it's probably better to skip the middle man and to iterate across the elements in the array, not the indexes.</p>\n\n<p>I mean you can write your code like this:</p>\n\n<pre><code>foreach my $arg (@ARGV) {\n    $data{$OPTION} .= $arg . \" \" if($flag);\n    $flag = 1 if($arg =~ /$OPTION/);\n    undef $arg if($flag);\n}\n</code></pre>\n\n<p>I think that's a little easier to follow.</p>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547554202, "creation_date": 1547493655, "question_id": 54187853, "link": "https://stackoverflow.com/questions/54187853/handling-with-two-warnings-of-args", "title": "Handling with two warnings of @ARGS", "body": "<p>Small debug question I can't solve for some reason. Consider the following code:</p>\n\n<pre><code>use warnings;\nmy $flag = 0;\nforeach my $i (0..scalar(@ARGV)) {\n    $data{$OPTION} .= $ARGV[$i].\" \" if($flag);\n    $flag = 1 if($ARGV[$i] =~ /$OPTION/);\n    undef $ARGV[$i] if($flag);\n}\n</code></pre>\n\n<p>I get the following two warnings:</p>\n\n<pre><code>Use of uninitialized value within @ARGV in concatenation (.) or string at line 4\nUse of uninitialized value in pattern match (m//) at line 5\n</code></pre>\n\n<p>I get the reason is that I undefine some value of <code>@ARGV</code> and then it tries to check it.</p>\n\n<p>The way I do it like this is because I would like to 'cut' some of the data of <code>@ARGV</code> before using <code>GetOpt</code> module (which uses this array).</p>\n\n<p>How to solve it?</p>\n"}, {"tags": ["regex", "shell", "perl"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 4400468, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b0c5838b20d475b42a8ad1a7fdc61f54?s=128&d=identicon&r=PG&f=1", "display_name": "huuy", "link": "https://stackoverflow.com/users/4400468/huuy"}, "edited": false, "score": 0, "creation_date": 1547494638, "post_id": 54187899, "comment_id": 95204222, "body": "This is not working &quot;perl -pe &#39;s/\\s+(\\w+)=&gt;(\\d+)/ $2 $1/&#39; filename&quot;"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 15, "user_id": 4400468, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b0c5838b20d475b42a8ad1a7fdc61f54?s=128&d=identicon&r=PG&f=1", "display_name": "huuy", "link": "https://stackoverflow.com/users/4400468/huuy"}, "edited": false, "score": 0, "creation_date": 1547494790, "post_id": 54187899, "comment_id": 95204287, "body": "Just inserted your test data into a file and it worked. Updated my answer to use a file instead of copy &amp; paste"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 15, "user_id": 4400468, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b0c5838b20d475b42a8ad1a7fdc61f54?s=128&d=identicon&r=PG&f=1", "display_name": "huuy", "link": "https://stackoverflow.com/users/4400468/huuy"}, "edited": false, "score": 0, "creation_date": 1547495664, "post_id": 54187899, "comment_id": 95204676, "body": "In case that your supplied test data is misleading and <i>does not</i> start with white space I have removed the <code>\\s+</code> from my solution"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "reply_to_user": {"reputation": 15, "user_id": 4400468, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b0c5838b20d475b42a8ad1a7fdc61f54?s=128&d=identicon&r=PG&f=1", "display_name": "huuy", "link": "https://stackoverflow.com/users/4400468/huuy"}, "edited": false, "score": 0, "creation_date": 1547495984, "post_id": 54187899, "comment_id": 95204802, "body": "@huuy, &quot;not working&quot; is not helpful: what <i>is</i> happening?"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1547495602, "last_edit_date": 1547495602, "creation_date": 1547493859, "answer_id": 54187899, "question_id": 54187812, "link": "https://stackoverflow.com/questions/54187812/exchange-the-strings-and-digits-ordering-in-all-lines-of-a-file-using-regex-shel/54187899#54187899", "title": "Exchange the strings and digits ordering in all lines of a file using regex shell command", "body": "<p>This should do it:</p>\n\n<pre><code>$ perl -pe 's/(\\w+)=&gt;(\\d+)/$2 $1/'\n</code></pre>\n\n<p>Example run with your test data:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>$ cat dummy.txt\narray databse\n(\n     user_content_1=&gt;0\n     no_entry=&gt;1\n     user_content_2=&gt;2\n     user_content_2=&gt;3`\n     left=&gt;4\n     ....\n)\n\n$ perl -pe 's/(\\w+)=&gt;(\\d+)/$2 $1/' dummy.txt\narray databse\n(\n     0 user_content_1\n     1 no_entry\n     2 user_content_2\n     3 user_content_2`\n     4 left\n     ....\n)\n</code></pre>\n\n<p>You'll have to work on the <code>\\w+</code> and <code>\\d+</code> if your real data contains more characters than what your example shows.</p>\n"}], "owner": {"reputation": 15, "user_id": 4400468, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b0c5838b20d475b42a8ad1a7fdc61f54?s=128&d=identicon&r=PG&f=1", "display_name": "huuy", "link": "https://stackoverflow.com/users/4400468/huuy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1547495602, "creation_date": 1547493507, "question_id": 54187812, "link": "https://stackoverflow.com/questions/54187812/exchange-the-strings-and-digits-ordering-in-all-lines-of-a-file-using-regex-shel", "title": "Exchange the strings and digits ordering in all lines of a file using regex shell command", "body": "<p>I have a file having data as follow. the data here is 0-64 and assigned with special character\"=>\". Expected output is shown below as well.</p>\n\n<pre><code>array databse\n(\n user_content_1=&gt;0\n no_entry=&gt;1\n user_content_2=&gt;2\n user_content_2=&gt;3`\n left=&gt;4\n ....\n )\n</code></pre>\n\n<p>I want output as follow.</p>\n\n<pre><code>array databse\n(\n  0 user_content_1\n  1 no_entry\n  2 user_content_2\n  3 user_content_2\n  4 left\n  ....\n )\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "https", "cgi"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1547505617, "post_id": 54187319, "comment_id": 95208569, "body": "Please see <a href=\"http://blogs.perl.org/users/grinnz/2018/11/modern-perl-cgi.html\" rel=\"nofollow noreferrer\">my blog post</a> and the responses for better options for creating CGI scripts than CGI.pm, if it is a case where you have such options. But to begin with, your load balancer should ideally be passing the header <code>X-Forwarded-Proto: https</code> for any of these solutions to use."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1547506677, "post_id": 54187978, "comment_id": 95208904, "body": "I hope that it does not automatically use such headers, as this would be a possible vulnerability if the client can tell the code it&#39;s using a different protocol when there&#39;s no proxy setting the header! This is why you have to enable it with <code>MOJO_REVERSE_PROXY=1</code> or the hypnotoad <code>proxy</code> option in Mojolicious."}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 2, "last_activity_date": 1547494234, "creation_date": 1547494234, "answer_id": 54187978, "question_id": 54187319, "link": "https://stackoverflow.com/questions/54187319/how-to-code-in-perl-cgi-to-include-action-with-https-not-http/54187978#54187978", "title": "How to code in Perl CGI to include action with https, not http", "body": "<p>At least according to the documentation and the code of <code>CGI.pm</code>, <code>url()</code> and <code>url( full =&gt; 1)</code> should both return <code>https://</code> if your CGI script was served from an <code>https://</code> URL. If the load balancer strips https and does not provide the appropriate headers, you can set <code>$ENV{HTTPS}</code> to <code>ON</code> to fake that in your script yourself:</p>\n\n<pre><code>#!perl\nuse strict;\nuse warnings;\n\nuse CGI qw(url);\n\n$ENV{HTTPS} = 'ON';\nprint url();\n</code></pre>\n\n<h3>See also</h3>\n\n<p><a href=\"https://metacpan.org/release/CGI\" rel=\"nofollow noreferrer\">CGI</a></p>\n"}], "owner": {"reputation": 3419, "user_id": 1255872, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rYiyd.jpg?s=128&g=1", "display_name": "D Mac", "link": "https://stackoverflow.com/users/1255872/d-mac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 54187978, "answer_count": 1, "score": 2, "last_activity_date": 1547494234, "creation_date": 1547491157, "question_id": 54187319, "link": "https://stackoverflow.com/questions/54187319/how-to-code-in-perl-cgi-to-include-action-with-https-not-http", "title": "How to code in Perl CGI to include action with https, not http", "body": "<p>I have a server behind a load balancer. The LB translates out of https into http so the web server only sees http.</p>\n\n<p>I have a perl script that uses CGI standard to generate an input form using </p>\n\n<pre><code>start_form( -action=&gt;url())\n</code></pre>\n\n<p>Right now, the url in the HTML points to the http version of the url, not the https. What is the cleanest way to get it to always use https (if https is being used by the user)?</p>\n\n<p>I've tried \"-rewrite\" as both 0 and 1 and that didn't make the difference.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547490322, "post_id": 54186947, "comment_id": 95202486, "body": "I don&#39;t understand what the problem is with the code or/and what other/more you want to do?  (But then, indeed, I don&#39;t know your &quot;ASA&quot;/&quot;ACL&quot;/&quot;object-groups&quot;/etc problem.)"}, {"owner": {"reputation": 3, "user_id": 10912940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8435714b4ea577d3365598398a1e12ae?s=128&d=identicon&r=PG&f=1", "display_name": "Limbic", "link": "https://stackoverflow.com/users/10912940/limbic"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547490980, "post_id": 54186947, "comment_id": 95202749, "body": "The example I provided works currently. I was hoping to find another way for me to handle lines that could also have less than 4 replacements without writing a seperate foreach loop per scenario. (The other @line arrays I provided are examples)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547491701, "post_id": 54186947, "comment_id": 95202996, "body": "OK. So your <code>@line</code> has <code>ob1</code> through <code>ob4</code>, or perhaps not all of them; if some are missing the regex <code>s&#47;&#47;&#47;</code> for those just won&#39;t do anything to <code>$buffer</code>.  Is that what you mean by &quot;<i>could also have less than 4 replacements</i>&quot;?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547492231, "post_id": 54186947, "comment_id": 95203194, "body": "The one problem I see is that <code>ob4</code> must come last -- and be there -- since its regex is the only one without a trailing space.  If that&#39;s the only issue then just make space optional  (or an alternation with the end of string anchor)."}, {"owner": {"reputation": 3, "user_id": 10912940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8435714b4ea577d3365598398a1e12ae?s=128&d=identicon&r=PG&f=1", "display_name": "Limbic", "link": "https://stackoverflow.com/users/10912940/limbic"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547492382, "post_id": 54186947, "comment_id": 95203259, "body": "On my end, it works. (perl 5.26.0)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547492556, "post_id": 54186947, "comment_id": 95203336, "body": "With these examples, yes; but if <code>@line</code> happens to end with <code>ob1</code> or <code>ob2</code> or <code>ob3</code> then it won&#39;t work (because there&#39;ll be no space behind them and the regex expects it).  But, maybe your data can&#39;t ever be that way, in which case it will work.  So then what you are asking here is simply for a nicer / cleaner / ... way to write this?"}, {"owner": {"reputation": 3, "user_id": 10912940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8435714b4ea577d3365598398a1e12ae?s=128&d=identicon&r=PG&f=1", "display_name": "Limbic", "link": "https://stackoverflow.com/users/10912940/limbic"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547494006, "post_id": 54186947, "comment_id": 95203941, "body": "Correct, I was hoping to discover a different approach for this. ob4 was first on my list for ease of viewing the output, any order of ob[1-4] works. The order of ob1 to ob4 does not matter to me."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10912940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8435714b4ea577d3365598398a1e12ae?s=128&d=identicon&r=PG&f=1", "display_name": "Limbic", "link": "https://stackoverflow.com/users/10912940/limbic"}, "edited": false, "score": 0, "creation_date": 1553003269, "post_id": 54205600, "comment_id": 97218067, "body": "Almost forgot to circle back and thank you. This was EXACTLY what I was looking for."}], "tags": [], "owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "is_accepted": true, "score": 1, "last_activity_date": 1547580406, "creation_date": 1547580406, "answer_id": 54205600, "question_id": 54186947, "link": "https://stackoverflow.com/questions/54186947/recursive-variable-expansion-in-perl/54205600#54205600", "title": "Recursive variable expansion in Perl", "body": "<p>What you're looking for is a cross-product of the values in <code>%OG</code>.  <a href=\"https://metacpan.org\" rel=\"nofollow noreferrer\">CPAN</a> to the rescue.  The following code uses  <a href=\"https://metacpan.org/pod/Set::Product\" rel=\"nofollow noreferrer\">Set::Product</a> to create the cross-products.</p>\n\n<pre><code>use Set::Product qw[ product ];\n\nmy @line = (\n    'access-list',  'vlan_in', 'extended',     'permit',\n    'object-group', 'ob1',     'object-group', 'ob2',\n    'object-group', 'ob3',     'object-group', 'ob4'\n);\n\n# same order as things fed to product\nmy @placeholders = qw[ ob1 ob2 ob3 ob4 ];\n\nproduct {\n    # for efficiency, this should be done outside of this loop\n    my $buffer = join( ' ', grep { !/object-group/ } @line );\n\n    # product places the values in @_; shift them off in order\n    $buffer =~ s/$_/shift()/ge for @placeholders;\n\n    print $buffer . \"\\n\";\n}\n  [ 'tcp',         'udp' ],\n  [ '10.0.0.10', '10.0.0.20' ],\n  [ '20.0.0.15', '20.0.0.25' ],\n  [ 'eq 22',     'eq 443' ]\n;\n</code></pre>\n\n<p>which results in</p>\n\n<pre><code>access-list vlan_in extended permit tcp 10.0.0.10 20.0.0.15 eq 22\naccess-list vlan_in extended permit tcp 10.0.0.10 20.0.0.15 eq 443\naccess-list vlan_in extended permit tcp 10.0.0.10 20.0.0.25 eq 22\naccess-list vlan_in extended permit tcp 10.0.0.10 20.0.0.25 eq 443\naccess-list vlan_in extended permit tcp 10.0.0.20 20.0.0.15 eq 22\naccess-list vlan_in extended permit tcp 10.0.0.20 20.0.0.15 eq 443\naccess-list vlan_in extended permit tcp 10.0.0.20 20.0.0.25 eq 22\naccess-list vlan_in extended permit tcp 10.0.0.20 20.0.0.25 eq 443\naccess-list vlan_in extended permit udp 10.0.0.10 20.0.0.15 eq 22\naccess-list vlan_in extended permit udp 10.0.0.10 20.0.0.15 eq 443\naccess-list vlan_in extended permit udp 10.0.0.10 20.0.0.25 eq 22\naccess-list vlan_in extended permit udp 10.0.0.10 20.0.0.25 eq 443\naccess-list vlan_in extended permit udp 10.0.0.20 20.0.0.15 eq 22\naccess-list vlan_in extended permit udp 10.0.0.20 20.0.0.15 eq 443\naccess-list vlan_in extended permit udp 10.0.0.20 20.0.0.25 eq 22\naccess-list vlan_in extended permit udp 10.0.0.20 20.0.0.25 eq 443\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10912940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8435714b4ea577d3365598398a1e12ae?s=128&d=identicon&r=PG&f=1", "display_name": "Limbic", "link": "https://stackoverflow.com/users/10912940/limbic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 54205600, "answer_count": 1, "score": 0, "last_activity_date": 1547580406, "creation_date": 1547489389, "last_edit_date": 1547494825, "question_id": 54186947, "link": "https://stackoverflow.com/questions/54186947/recursive-variable-expansion-in-perl", "title": "Recursive variable expansion in Perl", "body": "<p>I have a need to expand ASA access-lists for reference after a migration.\nThe ASA is gone now and I want to expand the object-group references to validate we captured all expected access.\nI have a working idea for an ACL line with 4 object-groups.\nMy rub is ACLs could have 0-4 object-group references and I need a loop to run through and handle each possible combination.\nI can write a loop for each possible combination but I know there has to be a more elegant way.</p>\n\n<p>I already have code to expand and store the object groups individually, but substituting them in-line is the challenge.</p>\n\n<p>Thank you for your time and consideration.</p>\n\n<pre><code>@line = ('access-list','vlan_in','extended','permit','object-group','ob1','object-group','ob2','object-group','ob3','object-group','ob4');\n# @line = ('access-list','vlan_in','extended','permit','object-group','ob1','object-group','ob2','object-group','ob3','eq','53');\n# @line = ('access-list','vlan_in','extended','permit','object-group','ob1','host','30.0.0.30','object-group','ob2','eq','23');\n# @line = ('access-list','vlan_in','extended','permit','tcp','host','40.0.0.10','object-group','ob1','eq 80');\n\n$OG{'ob1'} = ['tcp','udp'];\n$OG{'ob2'} = ['10.0.0.10', '10.0.0.20'];\n$OG{'ob3'} = ['20.0.0.15', '20.0.0.25'];\n$OG{'ob4'} = ['eq 22', 'eq 443'];\n\nforeach $ins4 (@{$OG{ob4}}) {\n  foreach $ins1 (@{$OG{ob1}}) {\n    foreach $ins2 (@{$OG{ob2}}) {\n      foreach $ins3(@{$OG{ob3}}) {\n        $buffer = \"\";\n        foreach $element (@line) {\n          if($element =~ /object-group/) { next; }\n          $buffer = $buffer . ' ' . $element;\n        }\n        $buffer =~ s/ob1/$ins1/;\n        $buffer =~ s/ob2/$ins2/;\n        $buffer =~ s/ob3/$ins3/;\n        $buffer =~ s/ob4/$ins4/;\n        print \"$buffer\\n\";\n      }\n    }\n  }\n}\n\n(Current Output)\naccess-list vlan_in extended permit tcp 10.0.0.10 20.0.0.15 eq 22\naccess-list vlan_in extended permit tcp 10.0.0.10 20.0.0.25 eq 22\naccess-list vlan_in extended permit tcp 10.0.0.20 20.0.0.15 eq 22\naccess-list vlan_in extended permit tcp 10.0.0.20 20.0.0.25 eq 22\naccess-list vlan_in extended permit udp 10.0.0.10 20.0.0.15 eq 22\naccess-list vlan_in extended permit udp 10.0.0.10 20.0.0.25 eq 22\naccess-list vlan_in extended permit udp 10.0.0.20 20.0.0.15 eq 22\naccess-list vlan_in extended permit udp 10.0.0.20 20.0.0.25 eq 22\naccess-list vlan_in extended permit tcp 10.0.0.10 20.0.0.15 eq 443\naccess-list vlan_in extended permit tcp 10.0.0.10 20.0.0.25 eq 443\naccess-list vlan_in extended permit tcp 10.0.0.20 20.0.0.15 eq 443\naccess-list vlan_in extended permit tcp 10.0.0.20 20.0.0.25 eq 443\naccess-list vlan_in extended permit udp 10.0.0.10 20.0.0.15 eq 443\naccess-list vlan_in extended permit udp 10.0.0.10 20.0.0.25 eq 443\naccess-list vlan_in extended permit udp 10.0.0.20 20.0.0.15 eq 443\naccess-list vlan_in extended permit udp 10.0.0.20 20.0.0.25 eq 443\n</code></pre>\n\n<p>I can brute force this but was hoping for some inspiration rather than repeating code excessively. I can write separate loops for each scenario, but was hoping for some inspiration on a more elegant way. </p>\n\n<pre><code>(if 3 occurrences of ob#)\n# @line = ('access-list','vlan_in','extended','permit','object-group','ob1','object-group','ob2','object-group','ob3','eq','53');\n\nforeach $ins1 (@{$OG{ob1}}) {\n  foreach $ins2 (@{$OG{ob2}}) {\n    foreach $ins3(@{$OG{ob3}}) {\n      $buffer = \"\";\n      foreach $element (@line) {\n        if($element =~ /object-group/) { next; }\n        $buffer = $buffer . ' ' . $element;\n      }\n      $buffer =~ s/ob1/$ins1/;\n      $buffer =~ s/ob2/$ins2/;\n      $buffer =~ s/ob3/$ins3/;\n      print \"$buffer\\n\";\n    }\n  }\n}\n\n(if 2 occurrences of ob#)\n# @line = ('access-list','vlan_in','extended','permit','object-group','ob1','host','30.0.0.30','object-group','ob2','eq','23');\n\nforeach $ins1 (@{$OG{ob1}}) {\n  foreach $ins2 (@{$OG{ob2}}) {\n    $buffer = \"\";\n    foreach $element (@line) {\n      if($element =~ /object-group/) { next; }\n      $buffer = $buffer . ' ' . $element;\n    }\n    $buffer =~ s/ob1/$ins1/;\n    $buffer =~ s/ob2/$ins2/;\n    print \"$buffer\\n\";\n  }\n}\n\n(if 1 occurrence of ob#)\n# @line = ('access-list','vlan_in','extended','permit','tcp','host','40.0.0.10','object-group','ob1','eq 80');\n\nforeach $ins1 (@{$OG{ob1}}) {\n  $buffer = \"\";\n  foreach $element (@line) {\n    if($element =~ /object-group/) { next; }\n    $buffer = $buffer . ' ' . $element;\n  }\n  $buffer =~ s/ob1/$ins1/;\n  print \"$buffer\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "docker", "nano-server"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1547483103, "post_id": 54185286, "comment_id": 95199184, "body": "Your code is slightly wrong, it should be <code>print &quot;Return: &quot; . ($status &amp; 0x7f) . &quot;\\n&quot;;</code>, because <code>0x3 &lt;&lt; 8 == 768</code>"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1547483551, "post_id": 54185286, "comment_id": 95199441, "body": "You might want you consult the documentation of the POSIX module <a href=\"https://metacpan.org/pod/distribution/perl/ext/POSIX/lib/POSIX.pod#WAIT\" rel=\"nofollow noreferrer\">metacpan.org/pod/distribution/perl/ext/POSIX/lib/POSIX.pod#W&zwnj;&#8203;AIT</a> to interpret the return value from <code>system()</code> (which is derived from <code>waitpid()</code>) with the standard macros, e.g. <code>POSIX::WEXITSTATUS()</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1547485015, "post_id": 54185286, "comment_id": 95200260, "body": "Re &quot;<i>returns 768 (whatever that means)</i>&quot;, I means it wasn&#39;t killed by a signal, and that the child exited with error <code>3</code>. Remember, the child is the shell given by <code>perl -V:sh</code>, not <code>perl</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1547485120, "post_id": 54185286, "comment_id": 95200319, "body": "A far more likely explanation is that that <code>system</code> does wait, but the the shell it created exited before the shell command finished executing."}, {"owner": {"reputation": 1029, "user_id": 4275854, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7fbb7391f5e6dd70008e5f390b2a77a9?s=128&d=identicon&r=PG&f=1", "display_name": "MuhKuh", "link": "https://stackoverflow.com/users/4275854/muhkuh"}, "edited": false, "score": 0, "creation_date": 1547485689, "post_id": 54185286, "comment_id": 95200567, "body": "thx for the hint with <code>perl -V:sh</code>. This returns <code>sh=&#39;cmd &#47;x &#47;c&#39;;</code> in both cases. But now I can play around with this and see if <code>cmd</code> behaves differently."}, {"owner": {"reputation": 1029, "user_id": 4275854, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7fbb7391f5e6dd70008e5f390b2a77a9?s=128&d=identicon&r=PG&f=1", "display_name": "MuhKuh", "link": "https://stackoverflow.com/users/4275854/muhkuh"}, "edited": false, "score": 0, "creation_date": 1547486107, "post_id": 54185286, "comment_id": 95200760, "body": "So I tried <code>cmd &#47;x &#47;c &quot;ping google.com&quot;</code> on both environments, and both are blocking until the ping completes. However <code>system(&#39;ping google.com&#39;)</code> does not block and returns immediately in the Docker Nano Server. So there must be some more magic somewhere between <code>system()</code> and <code>cmd</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1029, "user_id": 4275854, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7fbb7391f5e6dd70008e5f390b2a77a9?s=128&d=identicon&r=PG&f=1", "display_name": "MuhKuh", "link": "https://stackoverflow.com/users/4275854/muhkuh"}, "is_accepted": true, "score": 0, "last_activity_date": 1547712909, "creation_date": 1547712909, "answer_id": 54231573, "question_id": 54185286, "link": "https://stackoverflow.com/questions/54185286/perl-system-does-not-wait-in-nano-server/54231573#54231573", "title": "Perl system() does not wait in nano server", "body": "<p>I got a response from the ActiveState support regarding this issue.</p>\n\n<blockquote>\n  <p>The standard ActiveState builds are not supported on Nano servers. There are too many missing components with Nano. If you were interested in pursuing a custom build I could connect you with our sales team, and they could describe our Enterprise tier offering.</p>\n</blockquote>\n\n<p>So it seems if I want to stick with Nano server I either have to wait until someone decides to implement it into the standard build, or I need to switch to a different Perl distribution.</p>\n\n<p>Until then I will use Server Core which works.</p>\n"}], "owner": {"reputation": 1029, "user_id": 4275854, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7fbb7391f5e6dd70008e5f390b2a77a9?s=128&d=identicon&r=PG&f=1", "display_name": "MuhKuh", "link": "https://stackoverflow.com/users/4275854/muhkuh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 54231573, "answer_count": 1, "score": 0, "last_activity_date": 1547712909, "creation_date": 1547482722, "last_edit_date": 1547489485, "question_id": 54185286, "link": "https://stackoverflow.com/questions/54185286/perl-system-does-not-wait-in-nano-server", "title": "Perl system() does not wait in nano server", "body": "<p>I am trying to run a Perl script in a docker container based on Windows 2016 Nano Server. For that I am using ActivePerl 5.24.</p>\n\n<p>Now I ran into an interesting issue where the system() call behaves differently on my 2016 Server host and in the 2016 Nano Server container.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $status = system('perl.exe -c test.plx');\nprint \"Return: \" . $status . \"\\n\";\nprint \"Exit: \" . ($status &gt;&gt; 8) . \"\\n\";\nprint \"Signal: \" . ($status &amp; 127) . \"\\n\";\nprint \"Message: $!\\n\";\n</code></pre>\n\n<p>On the host Windows 2016 Server it works as expected:</p>\n\n<pre><code>c:\\&gt;perl test.plx\ntest.plx syntax OK\nReturn: 0\nExit: 0\nSignal: 0\nMessage:\n</code></pre>\n\n<p>On the Nano server in my Docker container it looks like this:</p>\n\n<pre><code>C:\\&gt;perl test.plx\nReturn: 768\nExit: 3\nSignal: 0\nMessage:\n</code></pre>\n\n<p>So as you can see the output is missing and the return code is not 0.</p>\n\n<p>If I now press return..</p>\n\n<pre><code>C:\\&gt;\nC:\\&gt;test.plx syntax OK\n</code></pre>\n\n<p>So it looks like system() is not waiting and returns 768 (whatever that means)</p>\n\n<p>I also tried with \"ping -v\" instead of \"perl -c\" but the same thing happens, so it must be something connected to the system() implementation.</p>\n\n<p>Does anyone know why the same call behaves completely different in the docker container and what I could do to make system() wait?</p>\n\n<p><strong>Update:</strong>\nI confirmed that it works when I use microsoft/windowsservercore as the base image. So whatever happens here seems to be specific to the Nano Server.</p>\n"}, {"tags": ["regex", "perl", "grep"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1547476421, "post_id": 54183400, "comment_id": 95195281, "body": "I&#39;m not sure that this ever makes sense: <code>grep(&#47;$_&#47;,@modifier_lists)</code> - what do you expect this to do? Can you describe the value of <code>$_</code> and the contents of <code>@modifier_lists</code> and when it makes sense to use <code>grep &#47;$_&#47;, @modifier_lists</code> at all? Note: <code>$_</code> will be set to each element of <code>@modifier_lists</code>, so it is not the value of <code>$_</code> further above. My suggestion is to first make the program work correctly before trying to make it work fast."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1547476563, "post_id": 54183400, "comment_id": 95195347, "body": "Also, please <a href=\"https://stackoverflow.com/posts/54183400/edit\">edit</a> your post and add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Without this, we cannot really give you good advice because we cannot reproduce your situation."}, {"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547476790, "post_id": 54183400, "comment_id": 95195484, "body": "Thanks Corion. I expect grep(/$_/,@modifier_lists) to search the array, if the atom name is in @modifier_lists, $cnt_modf_intf++ or $cnt_modf_exbox++. I explained it in the beginning."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547477144, "post_id": 54183400, "comment_id": 95195695, "body": "And where is the atom name stored?"}, {"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547477887, "post_id": 54183400, "comment_id": 95196114, "body": "I update the program. Now, you may run it on your side."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547478255, "post_id": 54183400, "comment_id": 95196319, "body": "No, the code you&#39;ve shown is still incomplete. When running it I get <code>Name &quot;main::tmp&quot; used only once: possible typo at q:\\tmp.pl line 53. Name &quot;main::cnt_hydg_exbox&quot; used only once: possible typo at q:\\tmp.pl line 46. Name &quot;main::cnt_hydg_intf&quot; used only once: possible typo at q:\\tmp.pl line 37. Use of uninitialized value $flg_interface in numeric eq (==) at q:\\tmp.pl line 34.</code> (and many more warnings). Also, the output I get is <code>1021 17588      $flg_interface=         $cnt_former_intf=0      $cnt_modf_intf=0        $cnt_modf_intf=0        $cnt_former_exbox=0     $cnt_modf_exbox=0</code>."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547478622, "post_id": 54183400, "comment_id": 95196538, "body": "You can reduce your problem to the following code: <code>#!perl use strict; use warnings;  my @former_lists = (&#39;SI&#39;,&#39;AL&#39;);  $_ = &#39;SI&#39;; print &#39;In @former_lists: &#39; . (grep(&#47;$_&#47;,@former_lists) eq 1). &quot;\\n&quot;; print &#39;In @former_lists: &#39;, join( &quot;, &quot;, grep(&#47;$_&#47;,@former_lists) ), &quot;\\n&quot;; </code> . The expression <code>grep(&#47;$_&#47;,@former_lists)</code> will always return all elements in <code>@former_lists</code>."}, {"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547478835, "post_id": 54183400, "comment_id": 95196672, "body": "The codes shown here is from my program which have almost 2000 lines. I cannot list everything here. Following your suggestion, I gave an executable codes here. I DID &quot;use strict; use warnings;.....&quot;"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547479104, "post_id": 54183400, "comment_id": 95196824, "body": "Well, reducing the code is the main task you have here. And I really doubt that you did <code>use warnings</code> with the sample code you posted here. Again, the problem is in the faulty logic in <code>grep(&#47;$_&#47;,@former_lists)</code> (and <code>grep(&#47;$_&#47;,@any_list)</code>. That expression almost never makes sense. Your general program approach can be optimized but this part is simply wrong."}], "answers": [{"comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1547480092, "post_id": 54184484, "comment_id": 95197412, "body": "There is no regular expression in your code. Also, it would be much faster to create a hash instead of grepping the lists. But that is a new question that you need to ask."}, {"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547480476, "post_id": 54184484, "comment_id": 95197628, "body": "Thanks. I will do it later."}], "tags": [], "owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "is_accepted": true, "score": 1, "last_activity_date": 1547479980, "creation_date": 1547479980, "answer_id": 54184484, "question_id": 54183400, "link": "https://stackoverflow.com/questions/54183400/why-the-second-regex-grep-keyword-array-does-not-work-using-in-perl/54184484#54184484", "title": "Why the second regex &quot;grep(/keyword/,@array&quot; does not work using in Perl?", "body": "<p>Thanks for everybody's time and help.</p>\n\n<p>After searching online, I found the regex expression is not correct. If I want to search whether the array has the element, I need to use </p>\n\n<pre><code>            $tmp=uc($hash_type_spc{$hash_key});chomp($tmp);\n            if($tmp eq 'O'){$cnt_oxyg_intf++;}\n            elsif($tmp eq 'H'){$cnt_hydg_intf++;}\n            #elsif($tmp eq \"CA\"){$cnt_modf_intf++;}\n            elsif(grep { $tmp eq $_ } @former_lists){$cnt_former_intf++;}\n            elsif(grep { $tmp eq $_ } @modifer_lists){$cnt_modf_intf++;}\n            else{$cnt_other_intf++;}\n</code></pre>\n\n<p>here, I modified $_=uc($hash_type_spc{$hash_key});chomp($_) into $tmp=...</p>\n\n<p>If the regex expression is changed into above, I can get the correct result. However, I do not fully understand this regex expression. Any explanation would be highly appreciated.</p>\n"}], "owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 2, "accepted_answer_id": 54184484, "answer_count": 1, "score": 1, "last_activity_date": 1547479980, "creation_date": 1547476124, "last_edit_date": 1547477816, "question_id": 54183400, "link": "https://stackoverflow.com/questions/54183400/why-the-second-regex-grep-keyword-array-does-not-work-using-in-perl", "title": "Why the second regex &quot;grep(/keyword/,@array&quot; does not work using in Perl?", "body": "<p>I wrote a Perl program to analyze my research data.<br>\nOne function of my Perl scripts is used to count atom number in different groups (I used two arrays <code>@former_lists</code> and <code>@modifier_lists</code> to identify two groups).</p>\n\n<p>If atom name is in group1 (<code>@former_lists</code>), then the variable <code>$cnt_former_intf++</code>;<br>\nif it is in group2 (<code>@modifier_lists</code>), then the variable <code>$cnt_modf_intf++</code>;<br>\nif it is oxygen atom, then <code>$cnt_oxyg_intf++</code>;<br>\nelse{<code>$cnt_other_intf++</code>}.   </p>\n\n<p>Below is the part of my codes.</p>\n\n<pre><code>......\nmy $flg_interface;\nmy @former_lists;\nmy $cnt_former_intf=0;\nmy $cnt_former_exbox=0;\nmy $cnt_modf_intf=0;\nmy $cnt_modf_exbox=0;\nmy $cnt_oxyg_intf=0;\nmy $cnt_oxyg_exbox=0;\nmy $cnt_other_intf=0;\nmy $cnt_other_exbox=0;\n$former_lists[0]='SI';$former_lists[1]='AL';\nmy @modifier_lists;\n$modifier_lists[0]='CA';$modifier_lists[1]='NA';\nmy $hash_key;\nmy %hash_type_spc;\n$hash_type_spc{1}='SI';\n$hash_type_spc{2}='AL';\n$hash_type_spc{3}='CA';\n$hash_type_spc{4}='O';\n$hash_type_spc{5}='H';\n$hash_type_spc{6}='NA';\nmy @atom_type;\n$atom_type[1]=1;\n$atom_type[2]=2;\n$atom_type[3]=3;\n$atom_type[4]=4;\n$atom_type[5]=5;\n$atom_type[6]=6;\nmy $atom_id;\n\nfor($atom_id=1;$atom_id&lt;=17587;$atom_id++)\n{  $hash_key=$atom_type[$atom_id];\n  $_=uc($hash_type_spc{$hash_key});chomp($_);\n  if ($flg_interface ==1)   #atom is in interface box\n  {\n    if($_ eq 'O'){$cnt_oxyg_intf++;}\n    elsif($_ eq 'H'){$cnt_hydg_intf++;}\n    elsif(grep(/$_/,@former_lists)  eq 1){$cnt_former_intf++;}\n    #elsif(grep(/$_/,@modifier_lists) == 1){$cnt_modf_intf++;}\n    elsif(grep(/$_/,@modifier_lists) eq 1){$cnt_modf_intf++;}\n    else{$cnt_other_intf++;}\n  }\n  else                      #atom is in extended box\n  {\n    if($_ eq \"O\"){$cnt_oxyg_exbox++;}\n    elsif($_ eq \"H\"){$cnt_hydg_exbox++;}\n    elsif(grep(/$_/,@former_lists) eq 1){$cnt_former_exbox++;}\n    elsif(grep(/$_/,@modifier_lists) eq 1){$cnt_modf_exbox++;}\n    else{$cnt_other_exbox++;}\n  }\n}#end for\nprint \"1021 $_$atom_id \\t\\$flg_interface=$flg_interface \\t\\$cnt_former_intf=$cnt_former_intf \\t\\$cnt_modf_intf=$cnt_modf_intf \\t\\$cnt_modf_intf=$cnt_modf_intf\\t\\$cnt_former_exbox=$cnt_former_exbox\\t\\$cnt_modf_exbox=$cnt_modf_exbox\\n\";\n$tmp=&lt;STDIN&gt;; \n\n....\n</code></pre>\n\n<p>The result shows below.  </p>\n\n<pre><code>1021 SI6090 $flg_interface=0    $cnt_former_intf=0  $cnt_modf_intf=0    $cnt_former_exbox=0 $cnt_modf_exbox=1\n1021 AL7235 $flg_interface=0    $cnt_former_intf=0  $cnt_modf_intf=0    $cnt_former_exbox=0 $cnt_modf_exbox=2\n1021 CA8029 $flg_interface=0    $cnt_former_intf=0  $cnt_modf_intf=0    $cnt_former_exbox=0 $cnt_modf_exbox=3\n</code></pre>\n\n<p>where, 1021 is a label. Here, </p>\n\n<p>the 1st output SI6090 should have <code>$cnt_former_exbox=1</code> instead of <code>0</code>;<br>\nthe 2nd output AL7235 should have <code>$cnt_former_exbox=2</code> instead of <code>0</code>;<br>\nthe 3rd output CA8029 should have <code>$cnt_modf_exbox=1</code> instead of <code>3</code>.</p>\n\n<p>Any suggestion and help would be highly appreciated.<br>\nI highly appreciate it if you can share a more efficient way. </p>\n\n<p><strong>NOTE: My data is heavy data. I have to consider running efficiency.</strong></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 4, "creation_date": 1547470827, "post_id": 54181886, "comment_id": 95192234, "body": "Which version of Perl are you using. The results of running <code>perl -v </code>. The <code>r</code> option to the <code>s</code> command is newish. You code in the example compiles under Perl 5.20.2"}, {"owner": {"reputation": 991, "user_id": 2018343, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/u5fpE.jpg?s=128&g=1", "display_name": "Dinesh Ravi", "link": "https://stackoverflow.com/users/2018343/dinesh-ravi"}, "reply_to_user": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1547471097, "post_id": 54181886, "comment_id": 95192381, "body": "I am using v5.12.3"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 9, "last_activity_date": 1547471353, "creation_date": 1547471353, "answer_id": 54182189, "question_id": 54181886, "link": "https://stackoverflow.com/questions/54181886/bareword-found-where-operator-expected-syntax-error/54182189#54182189", "title": "bareword found where operator expected syntax error", "body": "<p>The <code>/r</code> option on <code>s/.../.../</code> was added in Perl 5.14 (in 2011). If you're using an earlier version, your code won't work. I don't have an earlier version available to test on, so I can't tell for sure whether it would give the error message you're seeing.</p>\n\n<p>The easiest fix to get this working on earlier versions of Perl would be something like this:</p>\n\n<pre><code>sub getBackupFileName {\n  my ($containerName, $volume) = @_;\n\n  (my $backupFileName = $volume) =~ s%/%_%g;\n\n  return \"${containerName}_${backupFileName}.tar\";\n}\n</code></pre>\n"}], "owner": {"reputation": 991, "user_id": 2018343, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/u5fpE.jpg?s=128&g=1", "display_name": "Dinesh Ravi", "link": "https://stackoverflow.com/users/2018343/dinesh-ravi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 54182189, "answer_count": 1, "score": 0, "last_activity_date": 1547471353, "creation_date": 1547470193, "question_id": 54181886, "link": "https://stackoverflow.com/questions/54181886/bareword-found-where-operator-expected-syntax-error", "title": "bareword found where operator expected syntax error", "body": "<p>I am new to perl. Anyhow I tried to debug myself. But I couldn't nail it</p>\n\n<p>The syntax error is</p>\n\n<pre><code>Bareword found where operator expected at D:\\DevelopmentLab\\softwares\\sc-master\\sc.pl line 468, near \"s%/%_%gr\"\nsyntax error at D:\\DevelopmentLab\\softwares\\sc-master\\sc.pl line 468, near \"s%/%_%gr\"\nExecution of D:\\DevelopmentLab\\softwares\\sc-master\\sc.pl aborted due to compilation errors.\n</code></pre>\n\n<p>The code is</p>\n\n<pre><code>sub getBackupFileName {\nmy ($containerName, $volume) = @_;\nmy $backupFileName = $volume =~ s%/%_%gr;\nreturn \"${containerName}_${backupFileName}.tar\";\n}\n</code></pre>\n\n<p>Any help would be highly appreciated..</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1547467455, "post_id": 54180973, "comment_id": 95190543, "body": "You have an explicit scalar context (<code>my ($x) = ...</code>) in your second example."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1547467635, "post_id": 54180973, "comment_id": 95190633, "body": "Not quite, you can check <code>$x</code> is 44, and <code>$r</code> is 1. <code>$x</code> would also be 1 if it was scalar context."}, {"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1547469001, "post_id": 54180973, "comment_id": 95191348, "body": "Well <code>perl -MO=Concise ...</code> shows differences but I can&#39;t explain where the context list/scalar is really set."}], "answers": [{"comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 2, "creation_date": 1547472249, "post_id": 54181921, "comment_id": 95192996, "body": "Not all scalar contexts are equal. :-) <code>my $r = () = (1,3,5,7)</code> vs <code>my $r = (1,3,5,7)</code>"}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1547475340, "post_id": 54181921, "comment_id": 95194681, "body": "() = (1,3,5,7) is a list assignment to an empty list. $r = ... is a scalar assignment from ( () = (1.3.5.7) ) which gives the number of elements assigned to the empty list."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1547478149, "post_id": 54181921, "comment_id": 95196268, "body": "@\u0421\u0443\u0445\u043e\u043927, Re &quot;<i>Not all scalar contexts are equal</i>&quot;. Not quite. Not all <b>assignment operators</b> are equal. There is a <b>scalar assignment operator</b> (which returns its LHS as an lvalue in scalar context), and there&#39;s a <b>list assignment operator</b> (which returns the number of scalars returned by its RHS in scalar context). See the link in my answer for more details."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1547478297, "post_id": 54181921, "comment_id": 95196351, "body": "Re &quot;<i>returns a list of length 1</i>&quot;, That&#39;s just a weird way of saying &quot;returns a single scalar&quot;."}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 7, "last_activity_date": 1547470352, "creation_date": 1547470352, "answer_id": 54181921, "question_id": 54180973, "link": "https://stackoverflow.com/questions/54180973/scalar-vs-list-context/54181921#54181921", "title": "Scalar vs list context", "body": "<p>In both cases the assignment to $r is forcing scalar context on the do. However in the first case scalar context on a list returns the last value of the list, '44'. </p>\n\n<p>In the second instance the assignment to <code>my ($x)</code> forces a list context, The result of assigning to a list in scalar context is the number of elements on the right hand side of the assignment. So you get.</p>\n\n<p><code>map $_, 44</code> returns a list of length 1 containing (44)</p>\n\n<p><code>my ($x) =</code> assigns the results above in list context, because of the brackets around <code>$x</code>, to the list <code>($x)</code> making $x = 44</p>\n\n<p>The <code>do</code> block is in scalar context because of the assignment to <code>$r</code>, note the lack of brackets, and as I said above this returns the length of the right hand side of the list assignment. 1 in this case.</p>\n\n<p>See what happens if you do this:</p>\n\n<pre><code>perl -wE 'say my $r = () = (1,3,5,7)'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1548640154, "last_edit_date": 1548640154, "creation_date": 1547478014, "answer_id": 54183910, "question_id": 54180973, "link": "https://stackoverflow.com/questions/54180973/scalar-vs-list-context/54183910#54183910", "title": "Scalar vs list context", "body": "<p>First of all, neither <code>do</code> returns a list. They are evaluated in scalar context so they must return a single scalar, not an arbitrary number of scalars (\"a list\"). </p>\n\n<p>In the first case, the <code>do</code> returns the result of evaluating <code>44</code> in scalar context. This returns <code>44</code>.</p>\n\n<pre><code>scalar(    44    ) \u21d2 44\n</code></pre>\n\n<p>In the second case, the <code>do</code> returns the result of evaluating a list assignment in scalar context. This returns the number of elements returned by the right-hand side of the assignment.</p>\n\n<pre><code>scalar(    () = 44    ) \u21d2 1\n</code></pre>\n\n<p>I believe the real cause of your confusion is that you don't know about the assignment operators and how they are affected by context. If so, see <a href=\"https://www.perlmonks.org/?node_id=790129\" rel=\"nofollow noreferrer\">Scalar vs List Assignment Operator</a> for the answer to your real question.</p>\n"}], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 54181921, "answer_count": 2, "score": 6, "last_activity_date": 1548640154, "creation_date": 1547466596, "question_id": 54180973, "link": "https://stackoverflow.com/questions/54180973/scalar-vs-list-context", "title": "Scalar vs list context", "body": "<p>Wonder what is the rationale behind following two examples giving different results when in both cases <code>do {}</code> returns lists.</p>\n\n<pre><code>perl -wE 'say my $r = do {  (44); }'\n44\n\nperl -wE 'say my $r = do {  my ($x) = map $_, 44; }'\n1\n</code></pre>\n"}, {"tags": ["perl", "perl-tidy"], "owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1563915157, "creation_date": 1547463271, "question_id": 54180110, "link": "https://stackoverflow.com/questions/54180110/perltidy-indentation-on-method-calls-with-or-operator", "title": "perltidy indentation on method calls with or operator", "body": "<p>I am attempting to get perltidy to indent correctly. It works almost perfectly, but there are issues with some lines of code.</p>\n\n<p>For example:</p>\n\n<pre><code>$foo = something()\n   or Foo-&gt;throw(\n   'a string which is longer than -l line length. Gets wrapped to next line, but not indented further than line above'\n   );\n</code></pre>\n\n<p>which should be:</p>\n\n<pre><code>$foo = something()\n   or Foo-&gt;throw(\n       'a string which is longer than -l line length. Gets wrapped to next line, but not indented further than line above'\n   );\n</code></pre>\n\n<p>Also, if a line break already exists, it does not  get the indentation right:</p>\n\n<pre><code>$foo = something()\n   or Foo-&gt;throw(\n   'string'\n   );\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>$foo = something()\n   or Foo-&gt;throw(\n       'string'\n   );\n</code></pre>\n\n<p>Funnily enough, it gets it right if the function call contains a hashref...</p>\n\n<p>The perltidyrc:</p>\n\n<pre><code># Line\n-l=78           # Max line width is 78 cols\n-ole=unix       # Unix line endings\n\n# Indentation\n-i=4            # Indent level is 4 cols\n-ci=4           # Continuation indent is 4 cols\n-dt=4           # Default tab size is 4 cols\n-noll           # Don't outdent long quoted strings or lines\n\n# Comments\n-iscl           # Ignore inline comment (side comments) length\n\n# Blank lines\n-blbs=1         # Ensure a blank line before methods\n-bbb            # Ensure a blank line before blocks\n-mbl=1          # Maximum consecutive blank lines\n\n# Braces/parens/brackets\n-nbl            # Opening braces on same line (incl. methods)\n-pt=0           # Low parenthesis tightness\n-sbt=0          # Low square bracket tightness\n-bt=0           # Low brace tightness\n-bbt=0          # Low block brace tightness\n\n# Semicolons\n-nsfs           # No space for semicolons within for loops\n-nsts           # No space before terminating semicolons\n\n# Spaces / Tightness\n-baao           # Break after all operators\n-bbao           # Break before all operators\n-cti=0          # No extra indentation for closing brackets\n\n# General perltidy settings\n-conv           # Use as many iterations as necessary to beautify, until successive runs produce identical output (converge)\n-b              # Backup files and modify in-place\n-se             # Errors to STDERR\n</code></pre>\n\n<p>I've gone back and forth a lot with varying degrees of success, but not managed to get it exactly right. Any pointers?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1547462972, "post_id": 54179876, "comment_id": 95188366, "body": "Can you describe how the resulting hash should be constructed from the input data?"}, {"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1547463346, "post_id": 54179876, "comment_id": 95188582, "body": "@choroba, please take a look at my edit."}], "answers": [{"comments": [{"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1547509839, "post_id": 54183317, "comment_id": 95209720, "body": "Is it possible to somehow replace <code>hashify</code> with a loop? I was trying to switch it by using the <code>foreach</code> loop but without any success."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1547547556, "post_id": 54183317, "comment_id": 95220396, "body": "Why? Recursion can be always replaced by a loop, but you have to provide the bookkeeping to emulate the stack."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1547475805, "creation_date": 1547475805, "answer_id": 54183317, "question_id": 54179876, "link": "https://stackoverflow.com/questions/54179876/reorganize-hash-in-specific-format/54183317#54183317", "title": "Reorganize hash in specific format", "body": "<p>I used a recursive subroutine that adds a chain of file names into an existing hash. I had to fix your expected structure by prepending <code>.</code> to <code>/src/bin/perl</code>.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy %files_data = (\n    './GetOpt.pm'    =&gt; {pid =&gt; {56061 =&gt; 1,\n                                 56065 =&gt; 1}},\n    'file1'          =&gt; {pid =&gt; {56061 =&gt; 2}},\n    'file2'          =&gt; {pid =&gt; {56065 =&gt; 2}},\n    './src/bin/perl' =&gt; {pid =&gt; {56061 =&gt; 1,\n                                 56065 =&gt; 1}}\n);\n\nmy %process_data = (\n    '56061' =&gt; {'parent' =&gt; 'NA',\n                'name' =&gt; 'file1'},\n    '56069' =&gt; {'parent' =&gt; '56065',\n                'name' =&gt; 'echo Hello_file1'},\n    '56062' =&gt; {'parent' =&gt; '56061',\n                'name' =&gt; 'echo Hello_file2'},\n    '56065' =&gt; {'parent' =&gt; '56061',\n                'name' =&gt; 'file2'}\n);\n\nmy %expected = (\n    'file1' =&gt; {\n        './src/bin/perl' =&gt; 1,\n        'file2' =&gt; {\n            './src/bin/perl' =&gt; 1,\n            './GetOpt.pm' =&gt; 1\n        },\n        './GetOpt.pm' =&gt; 1,\n    }\n);\n\nuse Test::More;\nuse Test::Deep;\n\nsub hashify {\n    my ($tree, @chain) = @_;\n    my $head = shift @chain;\n    $tree-&gt;{$head} = @chain ? {} : 1 unless ref $tree-&gt;{$head};\n    hashify($tree-&gt;{$head}, @chain) if @chain;\n}\n\nsub add {\n    my ($tree, $key) = @_;\n    for my $pid (keys %{ $files_data{$key}{pid} }) {\n        my @chain = $key;\n        while ($pid ne 'NA') {\n            my ($parent, $name) = @{ $process_data{$pid} }{qw{ parent name }};\n            unshift @chain, $name unless $name eq $chain[0];\n            $pid = $parent;\n        }\n        hashify($tree, @chain);\n    }\n}\n\nmy $result = {};\nadd($result, $_) for keys %files_data;\n\ncmp_deeply($result, \\%expected);\ndone_testing();\n</code></pre>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 54183317, "answer_count": 1, "score": -1, "last_activity_date": 1547475805, "creation_date": 1547462383, "last_edit_date": 1547463333, "question_id": 54179876, "link": "https://stackoverflow.com/questions/54179876/reorganize-hash-in-specific-format", "title": "Reorganize hash in specific format", "body": "<pre><code>%files_data = {                                                                                                                                                                                                                                     \n\n              './GetOpt.pm' =&gt; {\n                          'pid' =&gt; {\n                                     '56061' =&gt; 1,\n                                     '56065' =&gt; 1\n                                   }\n                            },\n              'file1' =&gt; {\n                          'pid' =&gt; {\n                                     '56061' =&gt; 2\n                                   }\n                        },\n              'file2' =&gt; {\n                         'pid' =&gt; {\n                                    '56065' =&gt; 2\n                                  }\n                       },\n              './src/bin/perl' =&gt; {\n                            'pid' =&gt; {\n                                       '56061' =&gt; 1,\n                                       '56065' =&gt; 1\n                                     }\n                          }\n                    };\n\n%process_data = (\n\n          '56061' =&gt; {\n                       'parent' =&gt; 'NA',\n                       'name' =&gt; 'file1'\n                     },\n          '56069' =&gt; {\n                       'parent' =&gt; '56065',\n                       'name' =&gt; 'echo Hello_file1'\n                     },\n          '56062' =&gt; {\n                       'parent' =&gt; '56061',\n                       'name' =&gt; 'echo Hello_file2'\n                     },\n          '56065' =&gt; {\n                       'parent' =&gt; '56061',\n                       'name' =&gt; 'file2'\n                     }\n        );\n</code></pre>\n\n<p>I would like to iterate through the <code>$files_data</code> hash and for each file get the chain of files.\nSo I'll get the following hash:</p>\n\n<pre><code>%hash = (\n        'file1' =&gt; {\n            '/src/bin/perl' =&gt; 1,\n            'file2' =&gt; { \n                '/src/bin/perl' =&gt; 1,\n                './GetOpt.pm' =&gt; 1\n            },\n            './GetOpt.pm' =&gt; 1,\n    }\n);\n</code></pre>\n\n<p>I need to follow the pid chain up to the main parent ('NA') for each file.</p>\n\n<p>What would be the most efficient way to solve it? I need some guidance on how to implment it.</p>\n\n<p><strong>EDIT</strong>: Lets take for example <code>'./GetOpt.pm'</code> file. it has a pid <code>56061</code> so we go to the <code>%process_data</code> and see <code>'file1'</code> (which is a file). Also we see that the parent of <code>56061</code> is <code>NA</code> so we stop and get:</p>\n\n<pre><code>file1 =&gt; ./GetOpt.pm\n</code></pre>\n\n<p>But <code>./GetOpt.pm</code> has another pid - <code>56065</code> so we go to <code>56065</code> and see <code>file2</code> (which is a file). Then we go to <code>56061</code> which has <code>file1</code> (which is s file). so we get:</p>\n\n<pre><code>file1 =&gt; file2 =&gt; ./GetOpt.pm\n</code></pre>\n\n<p>Combine it:</p>\n\n<pre><code>file1 =&gt; {\n    ./GetOpt.pm,\n    file2 =&gt; ./GetOpt.pm\n}\n</code></pre>\n\n<p>I would like to build a process file chain (only with files). the <code>%files_data</code> contains valid files and <code>%process_data</code> contains the hierarchy of the process we need to follow</p>\n"}, {"tags": ["python", "perl", "cmd", "character-encoding"], "answers": [{"comments": [{"owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1547428299, "post_id": 54174658, "comment_id": 95178294, "body": "Hi, ysth, Thank you so much for quick response. So what about python, why it can print correctly in both code page?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1547429268, "post_id": 54174658, "comment_id": 95178458, "body": "don&#39;t know; are there environment variables set that indicate the encoding?"}, {"owner": {"reputation": 705370, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "edited": false, "score": 0, "creation_date": 1547429394, "post_id": 54174658, "comment_id": 95178474, "body": "In Python3, <a href=\"https://docs.python.org/3/howto/unicode.html#the-string-type\" rel=\"nofollow noreferrer\">&quot;The default encoding for Python source code is UTF-8, so you can simply include a Unicode character in a string literal&quot;</a>."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1547504778, "post_id": 54174658, "comment_id": 95208334, "body": "Note that Perl tried to set handles to open with a UTF-8 encoding (if your locale iis UTF-8) by default once. It <a href=\"https://perldoc.pl/perl581delta#UTF-8-no-longer-default-under-UTF-8-locales\" rel=\"nofollow noreferrer\">did not work out</a>. You can activate this behavior yourself by passing <code>-CLSD</code>, but it will probably break any module you use that is not expecting it."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1547504985, "post_id": 54174658, "comment_id": 95208388, "body": "Regarding the source code encoding, there was <a href=\"https://www.nntp.perl.org/group/perl.perl5.porters/2017/10/msg246838.html\" rel=\"nofollow noreferrer\">a proposal</a> to eventually make <code>use utf8</code> the default, but it has not yet been acted upon."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 7, "last_activity_date": 1547478731, "last_edit_date": 1547478731, "creation_date": 1547427608, "answer_id": 54174658, "question_id": 54174463, "link": "https://stackoverflow.com/questions/54174463/difference-in-python-and-perl-print-regarding-character-encoding/54174658#54174658", "title": "Difference in Python and Perl print regarding character encoding", "body": "<p>perl is printing the literal bytes you have in your source file. It sees the string as \"\\xe4\\xb8\\xad\" unless you explicitly declare that your source file is utf8 with <code>use utf8;</code>.</p>\n\n<p>Once you do that, you would (if you enabled warnings as you should) get a <code>Wide character in print</code> warning; perl requires you to specify the encoding to be used when outputing non-ASCII characters.  You can do that with <code>use open ':std' =&gt; ':encoding(cp936)';</code> or with <code>binmode STDOUT, ':encoding(cp936)';</code> or (for some filehandle you are opening) with the 3rd argument to <code>open</code>.</p>\n"}], "owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1547478731, "creation_date": 1547425394, "last_edit_date": 1547426064, "question_id": 54174463, "link": "https://stackoverflow.com/questions/54174463/difference-in-python-and-perl-print-regarding-character-encoding", "title": "Difference in Python and Perl print regarding character encoding", "body": "<p>I am on windows system.</p>\n\n<p>I created two utf-8 file <code>python_print.py</code> for python and <code>perl_print.pl</code> for perl respectively, the two files contains same line as below</p>\n\n<pre><code>print(\"\u4e2d\")\n</code></pre>\n\n<p>and perl has <code>;</code> delimiter.</p>\n\n<p>My CMD is in <code>code page 936</code> by default, and I run </p>\n\n<pre><code>python python_print.py\n</code></pre>\n\n<p>I got</p>\n\n<pre><code>\u4e2d\n</code></pre>\n\n<p>However, when I run </p>\n\n<pre><code>perl perl_print.pl\n</code></pre>\n\n<p>for the first time, it gives</p>\n\n<pre><code>\u6d93\n</code></pre>\n\n<p>running it for the second time, I got</p>\n\n<p><a href=\"https://i.stack.imgur.com/Eg1cw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Eg1cw.png\" alt=\"enter image description here\"></a></p>\n\n<p>why??</p>\n\n<p>I continue testing, I run <code>chcp 65001</code> to change cmd encoding to utf-8, and this time, both python and perl gives correct <code>\"\u4e2d\"</code>.</p>\n\n<p>Now I am completely confused, it seems that print in python and perl are quite different. It seems that perl alway print out utf8 bytes? and python print can detect CMD code page to print correct byte? Can somebody explain my test result?</p>\n"}, {"tags": ["perl", "subset"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1547399044, "post_id": 54171131, "comment_id": 95171239, "body": "How is this &quot;likely a memory problem&quot;?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1547399605, "post_id": 54171131, "comment_id": 95171400, "body": "@melpomene Maybe the subroutine closes over <code>$RecursiveSolve</code> and keeps itself alive through that process. But I agree this is not likely IMO. Making <code>$RecursiveSolve</code> a global variable could easily prove that."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1547399701, "post_id": 54171131, "comment_id": 95171420, "body": "There&#39;s only one call to <code>Solve</code>, so only one instance of <code>$RecursiveSolve</code> is ever created (and the circular reference is broken explicitly)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1547399998, "post_id": 54171131, "comment_id": 95171531, "body": "I can&#39;t reproduce the &quot;doesn&#39;t print anything&quot; issue because the program takes too long to run. It doesn&#39;t terminate even after minutes of running (and it eats gigabytes of memory)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1547400421, "post_id": 54171131, "comment_id": 95171644, "body": "As far as I can tell, the issue is simply that there are too many combinations to check (which is why it takes so long), and there are too many solutions (so <code>@results</code> keeps growing and growing, which you don&#39;t see because you only print it at the end)."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1547400630, "post_id": 54171131, "comment_id": 95171701, "body": "It is possible to save some memory by pushing strings instead of arrayrefs into the results array, but that merely delays the problem that your results array grows very very large. Consider printing them out directly."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 6, "creation_date": 1547400859, "post_id": 54171131, "comment_id": 95171764, "body": "&quot;<i>the program tries finding a subset of &quot;a&quot; that sums to &quot;b&quot;</i>&quot; - no, the program does an exhaustive search to find <i>all</i> subsets of <code>a</code> that sum to <code>b</code>. It keeps all those found subsets in memory until it exits. Your set has 200 elements, so the number of candidate subsets to check is on the order of 2^200 = 160693804425899027554196209234116260252220299378279283530137&zwnj;&#8203;6. Good luck."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 1, "creation_date": 1547404652, "post_id": 54171131, "comment_id": 95172878, "body": "The most simple suggestion I can think of would be to print when found, without storing. What is the point of @results?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547492716, "post_id": 54171131, "comment_id": 95203387, "body": "Crossposted at <a href=\"https://perlmonks.org/?node_id=1228495\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=1228495</a>"}], "owner": {"reputation": 244, "user_id": 6797650, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ba292a35e8ce6a4517c2d8594bb706cd?s=128&d=identicon&r=PG&f=1", "display_name": "J. Linne", "link": "https://stackoverflow.com/users/6797650/j-linne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1547399027, "creation_date": 1547398801, "last_edit_date": 1547399027, "question_id": 54171131, "link": "https://stackoverflow.com/questions/54171131/subset-sum-program-perl", "title": "Subset sum program (Perl)", "body": "<p>The code below is an algorithm that tries to solve the well known subset sum problem. Someone gave me this code, I made a few tweaks and adjustments to it so it would run properly in Perl (the above code will run). Here, \"a\" is a set of integers, and \"b\" is the sum, and the program tries finding a subset of \"a\" that sums to \"b\", and then prints the result at the end. However when the index of \"a\" (the number of integers in the set) is relatively large (about 200), the program fails to print all of the subsets of \"a\" that sum to \"b\". I know this because I have intentionally chose a subset \"a\" that sums to an integer \"b\" I also chose. The program failed to print any subset of \"a\" (while it was obvious there existed at least one). Believing this was an overflow of some sort, I tried output file directory, and again, checking the files, I found nothing. Any ideas? </p>\n\n<hr>\n\n<pre><code>sub Solve\n{\n  my ($goal, $elements) = @_;\n\n  # For extra speed, you can remove this next line\n\n  my (@results, $RecursiveSolve, $nextValue);\n\n  $RecursiveSolve = sub {\n    my ($currentGoal, $included, $index) = @_;\n\n    for ( ; $index &lt; @$elements; ++$index) {\n      $nextValue = $elements-&gt;[$index];\n      # Since elements are sorted, there's no point in trying a\n      # non-final element unless it's less than goal/2:\n      if ($currentGoal &gt; 2 * $nextValue) {\n        $RecursiveSolve-&gt;($currentGoal - $nextValue,\n                          [ @$included, $nextValue ],\n                          $index + 1);\n      } else {\n        push @results, [ @$included, $nextValue ]\n            if $currentGoal == $nextValue;\n        return if $nextValue &gt;= $currentGoal;\n      }\n    } # end for\n  }; # end $RecursiveSolve\n\n  $RecursiveSolve-&gt;($goal, [], 0);\n  undef $RecursiveSolve; # Avoid memory leak from circular reference\n  return @results;\n} # end Solve\n\n\nmy @results = Solve(b, [a]\n);\nprint \"@$_\\n\" for @results;\n</code></pre>\n\n<p>To give an example, I went to <a href=\"https://random.org\" rel=\"nofollow noreferrer\">random.org</a> and generated a set \"a\" of 200 random integers from 1 to 2000, took 4 of those random 200 integers, and created a sum \"b\". Then the code looks like this:</p>\n\n<pre><code>sub Solve\n{\n  my ($goal, $elements) = @_;\n\n  # For extra speed, you can remove this next line\n\n  my (@results, $RecursiveSolve, $nextValue);\n\n  $RecursiveSolve = sub {\n    my ($currentGoal, $included, $index) = @_;\n\n    for ( ; $index &lt; @$elements; ++$index) {\n      $nextValue = $elements-&gt;[$index];\n      # Since elements are sorted, there's no point in trying a\n      # non-final element unless it's less than goal/2:\n      if ($currentGoal &gt; 2 * $nextValue) {\n        $RecursiveSolve-&gt;($currentGoal - $nextValue,\n                          [ @$included, $nextValue ],\n                          $index + 1);\n      } else {\n        push @results, [ @$included, $nextValue ]\n            if $currentGoal == $nextValue;\n        return if $nextValue &gt;= $currentGoal;\n      }\n    } # end for\n  }; # end $RecursiveSolve\n\n  $RecursiveSolve-&gt;($goal, [], 0);\n  undef $RecursiveSolve; # Avoid memory leak from circular reference\n  return @results;\n} # end Solve\n\n\nmy @results = Solve(4022, [34, 63, 83, 86, 88, 90, 95, 105, 107, 115, 120, 132, 140, 145, 146, 149, 154, 165, 167, 173, 175, 197, 199, 250, 267, 289, 291, 306, 328, 341, 344, 347, 349, 355, 370, 379, 389, 390, 393, 409, 430, 454, 474, 475, 476, 483, 488, 518, 522, 544, 554, 571, 582, 587, 591, 606, 614, 615, 639, 647, 663, 673, 679, 703, 742, 754, 765, 791, 803, 816, 819, 829, 841, 848, 852, 858, 861, 865, 870, 872, 873, 903, 909, 914, 915, 918, 931, 934, 937, 947, 970, 974, 983, 986, 1008, 1013, 1018, 1019, 1071, 1074, 1093, 1095, 1097, 1101, 1104, 1115, 1118, 1122, 1143, 1154, 1163, 1165, 1166, 1173, 1174, 1175, 1177, 1182, 1188, 1192, 1195, 1196, 1248, 1259, 1270, 1277, 1285, 1296, 1306, 1312, 1314, 1317, 1319, 1325, 1326, 1333, 1341, 1346, 1355, 1372, 1393, 1394, 1402, 1404, 1407, 1412, 1425, 1426, 1432, 1433, 1436, 1437, 1452, 1454, 1489, 1498, 1504, 1505, 1515, 1521, 1525, 1542, 1556, 1569, 1591, 1592, 1599, 1622, 1624, 1658, 1680, 1685, 1686, 1696, 1725, 1738, 1757, 1768, 1776, 1781, 1782, 1807, 1815, 1820, 1853, 1866, 1868, 1882, 1888, 1891, 1895, 1909, 1911, 1924, 1942, 1946, 1975, 1983, 1988, 1997]\n);\nprint \"@$_\\n\" for @results;\n</code></pre>\n\n<p>There is an obvious subset of \"a\" whose sum is \"b = 4022\": [389, 1071, 1248, 1314], however running the code (with the already fixed set \"a\") prints nothing on the command line, nor anything in the output file. Again, this is likely a memory problem, I'm just not sure how to work around it. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1547431638, "post_id": 54170272, "comment_id": 95178844, "body": "show what you have tried?"}], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1547394189, "last_edit_date": 1547394189, "creation_date": 1547393888, "answer_id": 54170415, "question_id": 54170272, "link": "https://stackoverflow.com/questions/54170272/perl-transpose-row-to-column/54170415#54170415", "title": "Perl transpose row to column", "body": "<p>Assuming that you have read the CSV into an array of arrays with one of the CSV modules (please don't parse CSV yourself), I would proceed like this:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @rows = (\n    ['Jack',12,'M',10,20,0,999],\n    ['Mary',20,'F',40,50,0,111],\n    );\n\nmy @output;\nforeach my $row (@rows) {\n   foreach my $col (3..$#{$row}) {\n       if ($row-&gt;[$col] != 0) {\n           push(@output, [$col + 1, @{$row}[0,1,2,$col]]);\n       }\n   }\n}\n\nforeach my $row (@output) {\n    print join(',', @{$row}), \"\\n\";\n}\n</code></pre>\n\n<p>Example output:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>$ perl dummy.pl\n4,Jack,12,M,10\n5,Jack,12,M,20\n7,Jack,12,M,999\n4,Mary,20,F,40\n5,Mary,20,F,50\n7,Mary,20,F,111\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 560, "user_id": 10850601, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3R2h7RDJ9yU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYNkQa9HPTd778Jo28o4mlsEFPJpw/mo/photo.jpg?sz=128", "display_name": "Ed Grimm", "link": "https://stackoverflow.com/users/10850601/ed-grimm"}, "is_accepted": false, "score": 1, "last_activity_date": 1547615251, "creation_date": 1547615251, "answer_id": 54210750, "question_id": 54170272, "link": "https://stackoverflow.com/questions/54170272/perl-transpose-row-to-column/54210750#54210750", "title": "Perl transpose row to column", "body": "<p>I'm guessing this source data is in a file, rather than handily parsed into a perl assignment.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nprint \"Column_ID,Name,Age,Gender,Acct\\n\";\nforeach my $file (@ARGV) {\n    open my $FH, '&lt;', $file\n    or warn(\"Couldn't open $file: $!\\n\"), next;\n\n    while (&lt;$FH&gt;) {\n        chomp;\n        my @cols = split /\\,/;\n        my @retained = @rows[0 .. 2];\n        foreach my $col (3 .. $#cols) {\n            print join(',', 1 + $col, @retained, $cols[$col]) . \"\\n\"\n            if $cols[$col];\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 1, "last_activity_date": 1547654511, "creation_date": 1547654511, "answer_id": 54220925, "question_id": 54170272, "link": "https://stackoverflow.com/questions/54170272/perl-transpose-row-to-column/54220925#54220925", "title": "Perl transpose row to column", "body": "<p>Using Perl one-liner</p>\n\n<pre><code>$ cat liquan.txt\nName,Age,Gender,Acct1,Acct2,Acct3,Acct4\nJack,12,M,10,20,0,999\nMary,20,F,40,50,0,111\n$ perl -F, -lane ' BEGIN { print \"Column_ID,Name,Age,Gender,Acct\" } for(3..$#F) { if($F[$_]!=0 and $.&gt;1) { print $_+1,\",$F[0],$F[1],$F[2],\",$F[$_] }}' liquan.txt\nColumn_ID,Name,Age,Gender,Acct\n4,Jack,12,M,10\n5,Jack,12,M,20\n7,Jack,12,M,999\n4,Mary,20,F,40\n5,Mary,20,F,50\n7,Mary,20,F,111\n$\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10908189, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HqDLBIZHSjM/AAAAAAAAAAI/AAAAAAAAAUw/pfY1KS8jczQ/photo.jpg?sz=128", "display_name": "liquan lim", "link": "https://stackoverflow.com/users/10908189/liquan-lim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1547654511, "creation_date": 1547392865, "last_edit_date": 1547399046, "question_id": 54170272, "link": "https://stackoverflow.com/questions/54170272/perl-transpose-row-to-column", "title": "Perl transpose row to column", "body": "<p>I have been searching around for some ways to transpose a large csv file using Perl, but can't get it right with my loops.</p>\n\n<p>There is a header row with 7 columns (I have 200+ columns actually). The first 3 columns are fixed and the subsequent columns are numbers. If the account amount is 0, skip and do not transpose.</p>\n\n<p>Source Data:</p>\n\n<pre><code>Name,Age,Gender,Acct1,Acct2,Acct3,Acct4\nJack,12,M,10,20,0,999\nMary,20,F,40,50,0,111\n</code></pre>\n\n<p>Transposed Data:</p>\n\n<pre><code>Column_ID,Name,Age,Gender,Acct\n4,Jack,12,M,10\n5,Jack,12,M,20\n7,Jack,12,M,999\n4,Mary,20,F,40\n5,Mary,20,F,50\n7,Mary,20,F,111\n</code></pre>\n"}, {"tags": ["routing", "routes", "perl", "mojolicious-lite"], "answers": [{"tags": [], "owner": {"reputation": 586, "user_id": 5216673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d8b8e0713574ae9a4836651a39e56?s=128&d=identicon&r=PG", "display_name": "thrig", "link": "https://stackoverflow.com/users/5216673/thrig"}, "is_accepted": true, "score": 3, "last_activity_date": 1550279972, "last_edit_date": 1550279972, "creation_date": 1550248553, "answer_id": 54713511, "question_id": 54170151, "link": "https://stackoverflow.com/questions/54170151/how-to-declare-a-route-path-with-an-optional-placeholder-in-mojoliciouslite/54713511#54713511", "title": "How to declare a route path with an optional placeholder in Mojolicious::Lite?", "body": "<pre><code>% mojo generate lite_app optional\n...\n% $EDITOR optional\n</code></pre>\n\n<p>One could mark the date as optional by giving it a default value of <code>undef</code>:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse Mojolicious::Lite -signatures;\n\nget '/vote/:value/*when' =&gt; { when =&gt; undef } =&gt; sub ($c) {\n    my $value = $c-&gt;stash('value');\n    my $when  = $c-&gt;stash('when');\n    $c-&gt;render(\n        format =&gt; 'txt',\n        text   =&gt; $value . ' ' . ( defined $when ? $when : 'nope' ) . \"\\n\"\n    );\n};\n\napp-&gt;start;\n</code></pre>\n\n<p>which then allows with-or-without the date queries:</p>\n\n<pre><code>% ./optional get /vote/42 2&gt;/dev/null\n42 nope\n% ./optional get /vote/42/2020/01/07 2&gt;/dev/null\n42 2020/01/07\n% \n</code></pre>\n"}], "owner": {"reputation": 3160, "user_id": 954777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/heMKU.jpg?s=128&g=1", "display_name": "smonff", "link": "https://stackoverflow.com/users/954777/smonff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 1, "accepted_answer_id": 54713511, "answer_count": 1, "score": 1, "last_activity_date": 1559068382, "creation_date": 1547392010, "last_edit_date": 1559068382, "question_id": 54170151, "link": "https://stackoverflow.com/questions/54170151/how-to-declare-a-route-path-with-an-optional-placeholder-in-mojoliciouslite", "title": "How to declare a route path with an optional placeholder in Mojolicious::Lite?", "body": "<p>I need to declare a route that could treat two kinds of requests:</p>\n\n<pre><code>GET /api/vote/:value \nGET /api/vote/:value/:date\n</code></pre>\n\n<p>The way I treat the data is not that different in both cases, so I would like them to be defined in the same place.</p>\n\n<p>What I did for now is that I used a <a href=\"https://mojolicious.org/perldoc/Mojolicious/Guides/Tutorial#Wildcard-placeholders\" rel=\"nofollow noreferrer\">wilcard placeholder</a> :</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use Mojolicious::Lite -signatures;\nuse DateTime;\n\nget '/vote/*values' =&gt; sub ($c) {\n    my $datetime = DateTime-&gt;now;\n    # Then we process the route parameters\n    my @params = split('/', $c-&gt;param('values'), 2);\n     # Optional if no date provided in the route\n    if ( defined $params[1] ) {\n        my @dates_params = split('-', $params[1], 3);\n        my %datetime = (\n            year  =&gt; $dates_params[0],\n            month =&gt; $dates_params[1],\n            day   =&gt; $dates_params[2],\n        );\n        $datetime =  DateTime-&gt;new(%datetime);\n    }\n    my %vote = (\n        value =&gt; $params[0],\n        datetime =&gt; $datetime,\n    );\n    # ... More code here\n    $c-&gt;render(json =&gt; $data);\n}\n</code></pre>\n\n<p>It works fine this way, but I don't feel very comfortable with this solution because it is not very explicit nor readable, and I know other frameworks allows the possibility of doing something similar in a way that seems more satisfactory.</p>\n\n<p>E.g., the following, using the <a href=\"https://expressjs.com/en/guide/routing.html\" rel=\"nofollow noreferrer\">Express.js routing capabilities</a>, allows to reach <code>/vote/123</code> and <code>/vote/123/2019-01-13</code> in only one route declaration.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>router.get('/vote/:value/:date*?', function(req, res, next) {\n    // Processing here...\n    res.json(// etc.);\n});\n</code></pre>\n\n<p>Note: this example comes from <a href=\"https://stackoverflow.com/questions/10020099/express-js-routing-optional-spat-param\">this SO question</a>.</p>\n\n<p>After trying various possibilities with <code>Mojolicious::Lite</code>, I found out regular expressions in Mojolicious routes are not a thing and the best solution I found was the wildcard placeholder. Am I missing something? </p>\n"}, {"tags": ["bash", "perl"], "answers": [{"comments": [{"owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "edited": false, "score": 0, "creation_date": 1547397368, "post_id": 54170336, "comment_id": 95170748, "body": "Of course, you&#39;re right! A simple -L would accomplish what I want."}], "tags": [], "owner": {"reputation": 7205, "user_id": 9288200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1c4dc5d3f7433e18f4aa04319ebaec?s=128&d=identicon&r=PG&f=1", "display_name": "Ondrej K.", "link": "https://stackoverflow.com/users/9288200/ondrej-k"}, "is_accepted": true, "score": 5, "last_activity_date": 1547393301, "creation_date": 1547393301, "answer_id": 54170336, "question_id": 54169151, "link": "https://stackoverflow.com/questions/54169151/du-follow-symlinks-if-symlink-points-to-outside-directories-dont-follow-other/54170336#54170336", "title": "du: Follow symlinks if symlink points to outside directories, don&#39;t follow otherwise", "body": "<p>Unless I have missed something in your question, <code>du</code> already does that when instructed to follow symlinks (<code>-L</code>).</p>\n\n<p>I got two trees:</p>\n\n<p><code>tree1/</code>:</p>\n\n<pre><code>\u251c\u2500\u2500 dir1\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 file\n\u251c\u2500\u2500 dirA -&gt; ../tree2/dirA\n\u2514\u2500\u2500 link1 -&gt; dir1\n</code></pre>\n\n<p>and <code>tree2/</code>:</p>\n\n<pre><code>.\n\u2514\u2500\u2500 dirA\n    \u2514\u2500\u2500 file\n</code></pre>\n\n<p>File is in both cases 1MB in size.</p>\n\n<p>Now run <code>du -shL</code> on <code>tree1/</code>:</p>\n\n<pre><code>$ du -shL tree1\n2.0M    tree1\n</code></pre>\n\n<p>While file can be seen three times in <code>tree1/</code> when following symlinks:</p>\n\n<pre><code>$ find tree1 -follow -type f\ntree1/dirA/file\ntree1/link1/file\ntree1/dir1/file\n</code></pre>\n\n<p>It only counted twice towards the total. Namely once from <code>tree1/</code> and once linked in from <code>tree2/dirA/</code> (or what I understood as you meaning from outside / not being sub-directories of <code>tree1/</code>).</p>\n\n<p>It would also seem to make sense, because being links inside the same tree, they do not really consume additional disk space (beyond the symlink entry).</p>\n\n<hr>\n\n<p>I've also grown the <code>tree1</code> a bit to:</p>\n\n<pre><code>.\n\u251c\u2500\u2500 dir1\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 file\n\u251c\u2500\u2500 dir2\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 file -&gt; ../dir1/file\n\u251c\u2500\u2500 dirA -&gt; ../tree2/dirA\n\u2514\u2500\u2500 link1 -&gt; dir1\n</code></pre>\n\n<p>And ran:</p>\n\n<pre><code>$ du -abcL .\n1048576 ./dir2/file\n1048636 ./dir2\n1048576 ./dirA/file\n1048636 ./dirA\n60      ./link1\n2097452 .\n2097452 total\n</code></pre>\n\n<p>As you can see, links only count towards total / size of <code>.</code> with size of link entry (even though I admit <code>60</code> confuses me a but, I'd expect <code>4</code>) and not (dereferenced) content of the file they point to.</p>\n\n<p>Is this what you wanted or close enough?</p>\n"}], "owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2761, "favorite_count": 0, "accepted_answer_id": 54170336, "answer_count": 1, "score": 3, "last_activity_date": 1547393301, "creation_date": 1547384690, "question_id": 54169151, "link": "https://stackoverflow.com/questions/54169151/du-follow-symlinks-if-symlink-points-to-outside-directories-dont-follow-other", "title": "du: Follow symlinks if symlink points to outside directories, don&#39;t follow otherwise", "body": "<p>I wonder whether there's some rather simple shell incantation to calculate the disk usage of a directory (using the <code>du</code> command) but with the following requirements: symlinks that point to files/subdirectories inside the directory should not be followed, but symlinks to outside files/subdirectories should. Or whether I need to do some scripting to accomplish this.</p>\n"}, {"tags": ["regex", "perl", "split"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 2, "creation_date": 1547369087, "post_id": 54167271, "comment_id": 95163910, "body": "The core <a href=\"http://perldoc.perl.org/Text/Balanced.html\" rel=\"nofollow noreferrer\">Text::Balanced</a> module will be helpful."}], "answers": [{"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 3, "last_activity_date": 1547370732, "creation_date": 1547370732, "answer_id": 54167449, "question_id": 54167271, "link": "https://stackoverflow.com/questions/54167271/perl-split-and-regex-query/54167449#54167449", "title": "Perl split and regex query", "body": "<p>Example of using <a href=\"http://perldoc.perl.org/Text/Balanced.html\" rel=\"nofollow noreferrer\">Text::Balanced</a> to extract the quoted substrings:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw/say/;\nuse Text::Balanced qw/extract_multiple extract_delimited/;\n\nmy $test = q{This \"is\" a test \"of very interesting\" problems \"that can\" be solved};\n\nsub just_quotes {\n  extract_multiple $_[0], [ sub { extract_delimited $_[0], '\"' } ], undef, 1;\n}\n\nsay for just_quotes $test;\n</code></pre>\n\n<p>this will produce:</p>\n\n<pre><code>\"is\"\n\"of very interesting\"\n\"that can\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1556303293, "last_edit_date": 1556303293, "creation_date": 1547370988, "answer_id": 54167482, "question_id": 54167271, "link": "https://stackoverflow.com/questions/54167271/perl-split-and-regex-query/54167482#54167482", "title": "Perl split and regex query", "body": "<p>Presuming that there can be no sensible nesting</p>\n\n<pre><code>my @quoted = $string =~ /\"([^\"]+)\"/g;\n</code></pre>\n\n<p>or, if you need to be able to do some processing while collecting them</p>\n\n<pre><code>my @quoted;    \nwhile ($string =~ /\"([^\"]+)\"/g) {      #\" (stop faulty markup highlight)\n    # ...\n    push @quoted, $1;\n}\n</code></pre>\n\n<p>Note that we need the closing <code>\"</code>, even though <code>[^\"]+</code> will match up to it anyway. This is so that the engine consumes it and gets past it, so the next match of <code>\"</code> is indeed the next opening one. </p>\n\n<p>If the quotations \"<em>can be \"nested\" as well</em>\" then you'd want <code>Text::Balanced</code></p>\n\n<hr>\n\n<p>As an aside, note the difference in behavior of the <code>/g</code> modifier in list and scalar <a href=\"https://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">contexts</a>.  </p>\n\n<ul>\n<li><p>In the list context, imposed by the <a href=\"https://stackoverflow.com/q/54564428/4653379\">list assignment</a> (to <code>@quoted</code> in the first example), with the <code>/g</code> modifier the match operator returns a list of all captures, or of all matches if there is no capturing in the pattern (no parens)</p></li>\n<li><p>In the scalar context, when evaluated as the <code>while</code> condition (for example), its behavior with <code>/g</code> is more complex. After a match, the next time the regex runs it continues searching the string from the position of (one after) the previous match, thus iterating through matches.</p>\n\n<p>Note that we don't need a loop for this (what is a subtle cause for subtle bugs)</p>\n\n<pre><code>my $string = q(one simple string);\n\n$string =~ /(\\w+)/g; \nsay $1;               #--&gt; one\n\n$string =~ /(\\w+)g;\nsay $1;               #--&gt; simple\n</code></pre>\n\n<p>Without <code>/g</code> in either regex we don't get this behavior, but rather <code>one</code> is printed both times.</p></li>\n</ul>\n\n<p>See <em>Global matching</em> <a href=\"https://perldoc.perl.org/perlretut.html#Using-regular-expressions-in-Perl\" rel=\"nofollow noreferrer\">in perlretut</a>, and for instance <em><code>\\G</code> assertion</em> <a href=\"https://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">in perlop</a> and <a href=\"https://perldoc.perl.org/functions/pos.html\" rel=\"nofollow noreferrer\">pos</a></p>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 1, "last_activity_date": 1550105897, "last_edit_date": 1550105897, "creation_date": 1550061199, "answer_id": 54670300, "question_id": 54167271, "link": "https://stackoverflow.com/questions/54167271/perl-split-and-regex-query/54670300#54670300", "title": "Perl split and regex query", "body": "<p>Try this.</p>\n\n<pre><code>$ a='This \"is\" a test \"of very interesting\" problems \"that can\" be solved'\n\n$ echo $a | perl -lne ' @arr=$_=~/\"(.+?)\"/g; print join(\"\\n\",@arr) '\nis\nof very interesting\nthat can\n\n$\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10907226, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MdACfPXBfCQ/AAAAAAAAAAI/AAAAAAAAApQ/kLDTHy4Yz_A/photo.jpg?sz=128", "display_name": "Robert Dodd", "link": "https://stackoverflow.com/users/10907226/robert-dodd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 2, "answer_count": 3, "score": 0, "last_activity_date": 1556303293, "creation_date": 1547368652, "question_id": 54167271, "link": "https://stackoverflow.com/questions/54167271/perl-split-and-regex-query", "title": "Perl split and regex query", "body": "<p>I have a line of text such as </p>\n\n<p>This \"is\" a test \"of very interesting\" problems \"that can\" be solved</p>\n\n<p>And I'm trying to split it so that my array @goodtext would contain however many strings there are from quoted sections.\nSo my array would contain the following:</p>\n\n<pre><code>$goodtext[0] is\n$goodtext[1] of very interesting\n$goodtext[2] that can\n</code></pre>\n\n<p>The number of quoted sections in each line varies, unfortunately...</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 1, "creation_date": 1547375963, "post_id": 54166775, "comment_id": 95165157, "body": "Hopefully you are NOT using the <code>X</code> as a wildcard charter. Reading the comment on @stefan, this is not about 4 letter codes, but actual words. How would you make the difference between searching for &quot;NEXT&quot; should that now return &quot;NEST&quot; too? or looking for &quot;TOXIC&quot; should that return &quot;TOPIC&quot;? ... Please consider &#39;non-word&#39; character for wild-cards. A commonly used character is <code>?</code>. Regular Expressions have their built-in and are shown below in the <code>grep</code> commands. @Shawn is giving a very good solution, where he first substitutes the <code>X</code> for <code>[[:alnum]]</code> which matches alph-numericals."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 7988873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d93e484d4fec65fc38a6d110aa800e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/7988873/victor"}, "edited": false, "score": 0, "creation_date": 1547366955, "post_id": 54166882, "comment_id": 95163569, "body": "Thank you for the response, Stefan! Actually, the keys are not of fixed length. Very dynamic. Examples:my keys could be MATERIAL1, SOFTWAREV1P2, HARDWAREV5P2.  I could search to see MATXXXALX, SXFXWAREVXPX, XARDWAREX5X2 exist in the hash (the character &quot;X&quot; is the keypoint)."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 29, "user_id": 7988873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d93e484d4fec65fc38a6d110aa800e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/7988873/victor"}, "edited": false, "score": 0, "creation_date": 1547375468, "post_id": 54166882, "comment_id": 95165049, "body": "Then the 2nd solution is better unless you have a lot of keys to search through. The 1st solution can be adapted for keys of any (well reasonable) length keys, but I would then add another hash <code>( 1 =&gt; ... keys of length 1.., 2 =&gt; ... )</code> to quickly access those keys with the correct length"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1547365778, "last_edit_date": 1547365778, "creation_date": 1547364267, "answer_id": 54166882, "question_id": 54166775, "link": "https://stackoverflow.com/questions/54166775/how-to-check-if-a-hash-key-is-present-in-the-hash-by-matching-any-letter-number/54166882#54166882", "title": "How to check if a hash key is present in the hash by matching any letter/number for a character {say X}", "body": "<p>No you can't. A single hash is the wrong approach for this kind of search.</p>\n\n<p>If your keys are fixed sized, e.g. 4 characters long as per your example, you could use multiple hashes. Here is a sketch of the algorithm:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my %first = (\n   A =&gt; { AAAA =&gt; 1, ... all keys starting with A... },\n   ...\n);\nmy %second = {\n   A =&gt; { AAAA =&gt; 1, ... all keys having A as 2nd character... },\n   ...\n);\nmy %third  = ...\nmy %fourth = ...\n\n# match first (F) and last (D) character in key\nmy $matches_first = $first{F};\nmy $matches_last  = $fourth{D};\nmy @matches =\n    grep { exists $matches_fourth-&gt;{$_} }\n    keys %{ $matches_first };\n</code></pre>\n\n<p>In a real program you would generate the contents of <code>%first</code> etc from the list of keys and calculate the match code from the search pattern.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>foreach my $c ('A'..'Z') {\n    $first{$c}  = {};\n    $second{$c} = {};\n    $third{$c}  = {};\n    $fourth{$c} = {}; \n}\nforeach my $key (keys %identifier) {\n    my($c1, $c2, $c3, $c4) = split(//, $key);\n    $first{$c1}-&gt;{$key}++;\n    $second{$c2}-&gt;{$key}++;\n    $third{$c3}-&gt;{$key}++;\n    $fourth($c4}-&gt;{$key}++;\n}\n</code></pre>\n\n<p><strong>EDIT 2:</strong> Depending on the amount of your data it might also be possible to use a simple search function, e.g. for your example</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my @matches = grep { /^F..D$/ } keys %identifier; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1547371630, "creation_date": 1547371630, "answer_id": 54167548, "question_id": 54166775, "link": "https://stackoverflow.com/questions/54166775/how-to-check-if-a-hash-key-is-present-in-the-hash-by-matching-any-letter-number/54167548#54167548", "title": "How to check if a hash key is present in the hash by matching any letter/number for a character {say X}", "body": "<p>To select keys that satisfy a pattern</p>\n\n<pre><code>my @spec_keys = grep { /F..D/ } keys %identifier;\n</code></pre>\n\n<p>where the <code>F..D</code> pattern can be anywhere in the key. If it should match the key without any leading or trailing characters then anchor it, <code>/^F..D$/</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 5, "last_activity_date": 1547372691, "last_edit_date": 1547372691, "creation_date": 1547372331, "answer_id": 54167625, "question_id": 54166775, "link": "https://stackoverflow.com/questions/54166775/how-to-check-if-a-hash-key-is-present-in-the-hash-by-matching-any-letter-number/54167625#54167625", "title": "How to check if a hash key is present in the hash by matching any letter/number for a character {say X}", "body": "<p>First, turn the X's in your string into a regular expression character class that matches a single alphanumeric character, and then the good old <code>grep</code>/<code>keys</code>:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw/say/;\n\nmy $test = { FACD =&gt; 1, BDCD =&gt; 1, DDSE =&gt; 1, CDSD =&gt; 1, QFADD =&gt; 1 };\n\nsub matches {\n  my ($hash, $key) = @_;\n\n  # X matches all alphanumeric characters\n  $key =~ s/X/[[:alnum:]]/g;\n  my $pat = qr/^$key$/;\n  return grep { m/$pat/ } keys %$hash;\n}\n\nfor (qw/FXXD FXDD BXXX/) {\n  say $_, (matches($test, $_) ? \" matches!\" : \" doesn't match!\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1547466307, "last_edit_date": 1547466307, "creation_date": 1547463724, "answer_id": 54180242, "question_id": 54166775, "link": "https://stackoverflow.com/questions/54166775/how-to-check-if-a-hash-key-is-present-in-the-hash-by-matching-any-letter-number/54180242#54180242", "title": "How to check if a hash key is present in the hash by matching any letter/number for a character {say X}", "body": "<p>If you're not too concerned with performance, you could use <a href=\"https://metacpan.org/pod/Tie::Hash::Regex\" rel=\"nofollow noreferrer\">Tie::Hash::Regex</a>.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nuse Tie::Hash::Regex;\n\nmy %hash : Regex;\n\n%hash = (\n  FACD =&gt; 1,\n  BDCD =&gt; 1,\n  DDSE =&gt; 1,\n  CDSD =&gt; 1,\n);\n\nif (exists $hash{'F\\w\\wD'}) {\n  say 'Found key matching FXXD';\n} else {\n  say 'No key matching FXXD';\n}\n</code></pre>\n\n<p>[Full disclosure - I wrote this module as a stupid demonstration of tying. I don't really recommend that you use it in production.]</p>\n"}], "owner": {"reputation": 29, "user_id": 7988873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d93e484d4fec65fc38a6d110aa800e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/7988873/victor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 1, "answer_count": 4, "score": 2, "last_activity_date": 1547466307, "creation_date": 1547362972, "question_id": 54166775, "link": "https://stackoverflow.com/questions/54166775/how-to-check-if-a-hash-key-is-present-in-the-hash-by-matching-any-letter-number", "title": "How to check if a hash key is present in the hash by matching any letter/number for a character {say X}", "body": "<p>I have a hash, say \"Identifier\" with keys such as FACD,BDCD,DDSE,CDSD. I would like to search if the key \"FXXD\" is present in the hash \"Identifier\" by considering X to match any alphanumeric. In this scenario, it should come back with found as \"FXXD\" matches \"FACD\" considering X can be anything.  </p>\n\n<p>Can hash key search be done by adding a character to match anything?</p>\n\n<p>Any idea would be really helpful?</p>\n\n<p>Thanks in Advance!</p>\n"}, {"tags": ["perl", "ssl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1547324665, "post_id": 54163002, "comment_id": 95156916, "body": "You could&#39;ve shortened those installation commands to <code>sudo cpan Text::CSV_XS Mozilla::CA LWP LWP::Protocol::https</code>. And <code>cpan install</code> is unnecessary because that installs <code>install.pm</code>, which is a dummy module and never used. Also, <code>sudo cpan</code> is a generally a bad idea."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1547324795, "post_id": 54163002, "comment_id": 95156942, "body": "If you need help with debugging Perl code, you should post that code. On the other hand, if you&#39;re merely trying to use a tool that happens to be written in Perl, you&#39;re on the wrong site: StackOverflow is for questions about programming. Try <a href=\"https://superuser.com/\">superuser.com</a> maybe? Or does this tool have an official support forum?"}, {"owner": {"reputation": 67, "user_id": 8883170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e59693e706fd660dfa9956052e25a5?s=128&d=identicon&r=PG&f=1", "display_name": "kiaora", "link": "https://stackoverflow.com/users/8883170/kiaora"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1547325195, "post_id": 54163002, "comment_id": 95157036, "body": "@melpomene thanks for the advice. I&#39;ll keep it in mind. Any idea how to deal with the error? As I mentioned in the question I have no idea how perl works, at all. Did my fair share of googling, this is how I figured out the commands listed in the question. I&#39;ll add the code of the script, though."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 5, "creation_date": 1547333072, "post_id": 54163002, "comment_id": 95158779, "body": "You are running an older version of macOS which suggests that you also use the long outdated version 0.9.8 of OpenSSL which got shipped with old macOS versions. This version does not have any support for TLS 1.1 or TLS 1.2 but the server needs at least support for TLS 1.1. Please check your version of OpenSSL with <code>perl -MNet::SSLeay -E &#39;say Net::SSLeay::SSLeay_version&#39;</code>."}, {"owner": {"reputation": 67, "user_id": 8883170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e59693e706fd660dfa9956052e25a5?s=128&d=identicon&r=PG&f=1", "display_name": "kiaora", "link": "https://stackoverflow.com/users/8883170/kiaora"}, "edited": false, "score": 1, "creation_date": 1547378980, "post_id": 54163002, "comment_id": 95165813, "body": "Thanks Steffen! I was indeed running <code>OpenSSL 0.9.8zg 14 July 2015</code> I promptly installed openssl via homebrew and then updated <code>sudo cpan  Net::SSLeay</code>"}, {"owner": {"reputation": 67, "user_id": 8883170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e59693e706fd660dfa9956052e25a5?s=128&d=identicon&r=PG&f=1", "display_name": "kiaora", "link": "https://stackoverflow.com/users/8883170/kiaora"}, "edited": false, "score": 0, "creation_date": 1547379035, "post_id": 54163002, "comment_id": 95165823, "body": "I still get one minor error <code>Wide character in print at &#47;System&#47;Library&#47;Perl&#47;5.18&#47;darwin-thread-multi-2level&#47;IO&#47;Hand&zwnj;&#8203;le.pm line 420.</code>But a csv file is created nevertheless!"}], "owner": {"reputation": 67, "user_id": 8883170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e59693e706fd660dfa9956052e25a5?s=128&d=identicon&r=PG&f=1", "display_name": "kiaora", "link": "https://stackoverflow.com/users/8883170/kiaora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1333, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1547325377, "creation_date": 1547320324, "last_edit_date": 1547325377, "question_id": 54163002, "link": "https://stackoverflow.com/questions/54163002/500-cant-connect-to-example-com443-lwpprotocolhttpssocket-ssl-connect", "title": "500 Can&#39;t connect to example.com:443 (LWP::Protocol::https::Socket: SSL connect attempt failed with unknown error SSL wants a read first)", "body": "<p>I want to export issue from the GitLab CE using this <a href=\"https://gitlab.com/emobix/get-all-gitlab-issues-as-csv/blob/master/get-all-project-issues.pl\" rel=\"nofollow noreferrer\">script.</a></p>\n\n<p>I ran the following commands on macOS 10.10.5:</p>\n\n<pre><code>sudo /usr/bin/perl -MCPAN -e'install Text::CSV_XS'\nsudo cpan Mozilla::CA\nsudo cpan install LWP\nsudo cpan LWP::Protocol::https\n</code></pre>\n\n<p>However, I still get this error:</p>\n\n<blockquote>\n  <p>500 Can't connect to gitlab.lrz.de:443 (LWP::Protocol::https::Socket: SSL connect attempt failed with unknown error SSL wants a read first) /Users/kiaora/Downloads/get-all-project-issues.pl line 41.`</p>\n</blockquote>\n\n<p>This is literally my first experience with perl. Any help is greatly appreciated.</p>\n\n<p>I only changed these lines:</p>\n\n<pre><code>my $PROJECT_ID=\"myProjectID\"; # numeric project id, can be found in project -&gt; general settings\nmy $GITLAB_API_PRIVATE_TOKEN='myToken(scope read_repository)'; # obtained from https://gitlab.lrz.de/profile/personal_access_tokens\nmy $baseurl = \"https://gitlab.lrz.de/\"; # change if using a private install\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\n\nuse LWP::UserAgent;\nuse Text::CSV_XS qw( csv );\nuse JSON::PP qw(decode_json);\n# Uncomment these for debugging\n# use LWP::ConsoleLogger::Easy qw( debug_ua );\n# use Data::Dumper;\n\nmy $PROJECT_ID=\"--my-project-id--\"; # numeric project id, can be found in project -&gt; general settings\nmy $GITLAB_API_PRIVATE_TOKEN='--my-api-private-token--'; # obtained from https://gitlab.com/profile/personal_access_tokens\nmy $baseurl = \"https://gitlab.lrz.de/\"; # change if using a private install\n\n$baseurl .= \"api/v4/\";\nmy $issuesurl = $baseurl.\"projects/\".$PROJECT_ID.\"/issues\";\n\nmy @issues = ();\nmy $page = 1;\nmy $totalpages;\n\ndo\n{\n\n    my %query_hash = (\n        'per_page' =&gt; 100,\n        'page' =&gt; $page\n    );\n\n    print \"Fetching page $page\".(defined($totalpages)?\" (of $totalpages)\":\"\").\"\\n\";\n\n    my $ua = LWP::UserAgent-&gt;new();\n    # debug_ua($ua);\n    $ua-&gt;default_header('PRIVATE-TOKEN' =&gt; $GITLAB_API_PRIVATE_TOKEN);\n\n    my $uri = URI-&gt;new($issuesurl);\n    $uri-&gt;query_form(%query_hash);\n    my $resp = $ua-&gt;get($uri);\n    if (!$resp-&gt;is_success) {\n        die $resp-&gt;status_line;\n    }\n    $totalpages = int($resp-&gt;header(\"X-Total-Pages\"));\n\n    my $resptext;\n    $resptext = $resp-&gt;decoded_content;\n\n    my $issuedata = decode_json($resptext);\n\n    push(@issues, @{$issuedata});\n}\nwhile ($page++ &lt; $totalpages);\n\nmy $outputfname = \"issues.csv\";\nmy $csv = Text::CSV_XS-&gt;new ({ binary =&gt; 1, eol =&gt; $/ });\nopen my $fh, \"&gt;\", $outputfname or die \"$outputfname: $!\";\n\nmy @headings = [\n    \"URL\",\n    \"Milestone\",\n    \"Author\",\n    \"Title\",\n    \"Description\",\n    \"State\",\n    \"Assignees\",\n    \"Labels\",\n    \"Created At\",\n    \"Updated At\",\n    \"Closed At\",\n    \"Due date\",\n    \"Confidental\",\n    \"Weight\",\n    \"Locked\",\n    \"Time estimate\",\n    \"Time spent\",\n    \"Human Time estimate\",\n    \"Human Time spent\",\n];\n$csv-&gt;print ($fh, @headings) or $csv-&gt;error_diag;\n\nforeach my $i (@issues)\n{\n#    print Dumper([$i]).\"\\n\";\n    my @values = [\n        $i-&gt;{'web_url'},\n        $i-&gt;{'milestone'}-&gt;{'title'},\n        $i-&gt;{'author'}-&gt;{'username'},\n        $i-&gt;{'title'},\n        $i-&gt;{'description'},\n        $i-&gt;{'state'},\n        join(',', map {$_-&gt;{'username'}} @{$i-&gt;{'assignees'}}),\n        join(',', @{$i-&gt;{'labels'}}),\n        $i-&gt;{'created_at'},\n        $i-&gt;{'updated_at'},\n        $i-&gt;{'closed_at'},\n        $i-&gt;{'due_date'},\n        $i-&gt;{'confidential'},\n        $i-&gt;{'weight'},\n        $i-&gt;{'discussion_locked'},\n        $i-&gt;{'time_stats'}-&gt;{'time_estimate'},\n        $i-&gt;{'time_stats'}-&gt;{'total_time_spent'},\n        $i-&gt;{'time_stats'}-&gt;{'human_time_estimate'},\n        $i-&gt;{'time_stats'}-&gt;{'human_total_time_spent'},\n        $i-&gt;{'closed_by'}-&gt;{'username'},\n\n    ];\n    $csv-&gt;print ($fh, @values) or $csv-&gt;error_diag;    \n}\n\nclose $fh or die \"$outputfname: $!\";\n\nprint \"Issues saved to $outputfname\\n\";\n</code></pre>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 39, "user_id": 3819464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf68207a7173e5c883472c85e7c7a49?s=128&d=identicon&r=PG&f=1", "display_name": "Picasa", "link": "https://stackoverflow.com/users/3819464/picasa"}, "edited": false, "score": 0, "creation_date": 1547317223, "post_id": 54161394, "comment_id": 95154928, "body": "It is not totally the same: the other thread talk about exact match while my question look for index even if I have a partial match (like grep)"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 3819464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf68207a7173e5c883472c85e7c7a49?s=128&d=identicon&r=PG&f=1", "display_name": "Picasa", "link": "https://stackoverflow.com/users/3819464/picasa"}, "edited": false, "score": 0, "creation_date": 1547317088, "post_id": 54161674, "comment_id": 95154875, "body": "I have this error:  Global symbol &quot;$VAR1&quot; requires explicit package name at tuto.pl line 164."}, {"owner": {"reputation": 340, "user_id": 8244977, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007678740593/picture?type=large", "display_name": "BingLi224", "link": "https://stackoverflow.com/users/8244977/bingli224"}, "reply_to_user": {"reputation": 39, "user_id": 3819464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf68207a7173e5c883472c85e7c7a49?s=128&d=identicon&r=PG&f=1", "display_name": "Picasa", "link": "https://stackoverflow.com/users/3819464/picasa"}, "edited": false, "score": 0, "creation_date": 1547317230, "post_id": 54161674, "comment_id": 95154930, "body": "@user3819464 you have to declare before, like:  <b>my</b> $VAR1 = [       &#39;ID=T_03192&#39;,       &#39;Name=T_03192&#39;,       &#39;Alias=augustus_masked-2_Tcm_b3v06_scaf000585-processed-gene&zwnj;&#8203;-0.22&#39;,       &#39;arth_ontology_term=GO:0006412,GO:0003735,GO:0005840&#39;,       &#39;arth_topblasthit=gi|1370630763|gb|PSN39892.1|60S ribosomal protein L12 [Blattella germanica]&#39;,       &#39;droso_ontology_term=GO:0003735,GO:0002181,GO:0000027,GO:001&zwnj;&#8203;9843,GO:0022625&#39;,       &#39;droso_topblasthit=gi|17864452|ref|NP_524819.1|ribosomal protein L12, isoform A [Drosophila melanogaster]&#39;     ];"}, {"owner": {"reputation": 39, "user_id": 3819464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf68207a7173e5c883472c85e7c7a49?s=128&d=identicon&r=PG&f=1", "display_name": "Picasa", "link": "https://stackoverflow.com/users/3819464/picasa"}, "edited": false, "score": 0, "creation_date": 1547326820, "post_id": 54161674, "comment_id": 95157421, "body": "Ahh ok I understand now but I have an array under this form: @VAR1 = (&#39;ID, ...)"}, {"owner": {"reputation": 340, "user_id": 8244977, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007678740593/picture?type=large", "display_name": "BingLi224", "link": "https://stackoverflow.com/users/8244977/bingli224"}, "reply_to_user": {"reputation": 39, "user_id": 3819464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf68207a7173e5c883472c85e7c7a49?s=128&d=identicon&r=PG&f=1", "display_name": "Picasa", "link": "https://stackoverflow.com/users/3819464/picasa"}, "edited": false, "score": 0, "creation_date": 1547344063, "post_id": 54161674, "comment_id": 95160508, "body": "@user3819464 if you declare as array <code>@VAR1</code>, the code changes a bit as the syntax issue, like <code>@array</code> is <code>$arrayref</code>, <code>$#array</code> is <code>$#$arrayref</code>, <code>$array[0]</code> is <code>$arrayref-&gt;[0]</code>"}], "tags": [], "owner": {"reputation": 340, "user_id": 8244977, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007678740593/picture?type=large", "display_name": "BingLi224", "link": "https://stackoverflow.com/users/8244977/bingli224"}, "is_accepted": true, "score": 0, "last_activity_date": 1547317543, "last_edit_date": 1547317543, "creation_date": 1547311171, "answer_id": 54161674, "question_id": 54161394, "link": "https://stackoverflow.com/questions/54161394/perl-get-the-index-of-specific-words-in-an-array/54161674#54161674", "title": "Perl: get the index of specific words in an array", "body": "<p>Try this, as declared <code>$VAR1</code> as array reference earlier:</p>\n\n<pre><code>my $target = \"arth_topblasthit\";\nmy $idx = undef;\n\nforeach ( 0 .. $#$VAR1 ) {\n    if ( index ( $VAR1-&gt;[ $_ ], $target ) &gt;= 0 ) {\n        $idx = $_;\n        last;\n    }\n}\n\n## $idx is the targeting index, or undef if not found\n</code></pre>\n\n<p><strong>Note:</strong> if we use</p>\n\n<pre><code>my $idx = undef;\nforeach $idx ( ... ) {\n    $idx = *something*\n}\n\n## now $idx = undef whatsoever\n</code></pre>\n\n<p>after the loop, $idx will become as before the loop.</p>\n"}], "owner": {"reputation": 39, "user_id": 3819464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf68207a7173e5c883472c85e7c7a49?s=128&d=identicon&r=PG&f=1", "display_name": "Picasa", "link": "https://stackoverflow.com/users/3819464/picasa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1547316064, "accepted_answer_id": 54161674, "answer_count": 1, "score": 0, "last_activity_date": 1547317543, "creation_date": 1547309577, "question_id": 54161394, "link": "https://stackoverflow.com/questions/54161394/perl-get-the-index-of-specific-words-in-an-array", "closed_reason": "Duplicate", "title": "Perl: get the index of specific words in an array", "body": "<p>How can I get the index in an array that contain a word I am looking for.</p>\n\n<p>Example:</p>\n\n<pre><code>$VAR1 = [\n      'ID=T_03192',\n      'Name=T_03192',\n      'Alias=augustus_masked-2_Tcm_b3v06_scaf000585-processed-gene-0.22',\n      'arth_ontology_term=GO:0006412,GO:0003735,GO:0005840',\n      'arth_topblasthit=gi|1370630763|gb|PSN39892.1|60S ribosomal protein L12 [Blattella germanica]',\n      'droso_ontology_term=GO:0003735,GO:0002181,GO:0000027,GO:0019843,GO:0022625',\n      'droso_topblasthit=gi|17864452|ref|NP_524819.1|ribosomal protein L12, isoform A [Drosophila melanogaster]'\n    ];\n</code></pre>\n\n<p>I would like the index that contain 'arth_topblasthit' so the result will be :</p>\n\n<p>$VAR1[4]</p>\n\n<p>Thanks for your help.</p>\n"}, {"tags": ["regex", "bash", "perl", "sed"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1547279183, "post_id": 54157689, "comment_id": 95145656, "body": "I think you can run PHP in console mode where it takes input from STDIN and prints to STDOUT"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547279249, "post_id": 54157689, "comment_id": 95145665, "body": "Alternatively, use Perl: <code>perl -wple &#39;$_ = lc $_; $_ =~ s&#47;[^a-z]&#47;_&#47;g&#39;</code>"}, {"owner": {"reputation": 9439, "user_id": 300248, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bc25a8b55f2b511375416cfe60055d17?s=128&d=identicon&r=PG", "display_name": "simpatico", "link": "https://stackoverflow.com/users/300248/simpatico"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547280398, "post_id": 54157689, "comment_id": 95145861, "body": "This doesn&#39;t work: $output = $input &gt;&gt; php -r preg_replace(&quot;/[^a-z]/&quot;,&quot;_&quot;,strtolower(fgets(STDIN)));"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547281934, "post_id": 54157689, "comment_id": 95146076, "body": "What do you expect your snippet to do? It is not valid shell syntax at all. Maybe your question is how to send input on STDIN to a program from the shell?"}, {"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 1, "creation_date": 1547286151, "post_id": 54157689, "comment_id": 95146851, "body": "The question seems to be: What are the equivalent commands to achieve the same effect. I find the quite adequate and I am surprised where all the confusion comes from."}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1547286879, "post_id": 54157689, "comment_id": 95147015, "body": "Please take a look at <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 9439, "user_id": 300248, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bc25a8b55f2b511375416cfe60055d17?s=128&d=identicon&r=PG", "display_name": "simpatico", "link": "https://stackoverflow.com/users/300248/simpatico"}, "edited": false, "score": 0, "creation_date": 1547282143, "post_id": 54157883, "comment_id": 95146107, "body": "Please include $input and $output variables in your bash line"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 9439, "user_id": 300248, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bc25a8b55f2b511375416cfe60055d17?s=128&d=identicon&r=PG", "display_name": "simpatico", "link": "https://stackoverflow.com/users/300248/simpatico"}, "edited": false, "score": 0, "creation_date": 1547283858, "post_id": 54157883, "comment_id": 95146410, "body": "@simpatico You will really need to learn about how the shell works. There are no &quot;input variables&quot; and &quot;output variables&quot;. You need to pipe the values into the called program. You will need to learn shell programming, but this site is not about teaching how to program."}, {"owner": {"reputation": 9439, "user_id": 300248, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bc25a8b55f2b511375416cfe60055d17?s=128&d=identicon&r=PG", "display_name": "simpatico", "link": "https://stackoverflow.com/users/300248/simpatico"}, "edited": false, "score": 0, "creation_date": 1547285206, "post_id": 54157883, "comment_id": 95146668, "body": "OR: I learned how the shell works and wrote several bash scripts before, but there is a gap in my knowledge that I&#39;m humbly asking about here. Grateful to those who know and answer."}], "tags": [], "owner": {"reputation": 6870, "user_id": 6196568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cHprk.png?s=128&g=1", "display_name": "shingo", "link": "https://stackoverflow.com/users/6196568/shingo"}, "is_accepted": false, "score": 0, "last_activity_date": 1547281482, "creation_date": 1547281482, "answer_id": 54157883, "question_id": 54157689, "link": "https://stackoverflow.com/questions/54157689/how-to-lowercase-and-replace-spaces-in-bash/54157883#54157883", "title": "How to lowercase and replace spaces in bash?", "body": "<p>php in bash?</p>\n\n<pre><code>$ php -r \"echo preg_replace(\"\"/[^a-z]/\"\",\"\"_\"\",strtolower($argv[1]));\" A1B2C\na_b_c\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1483, "user_id": 7369280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf9dbdc445ae6834befd10a26daee65?s=128&d=identicon&r=PG&f=1", "display_name": "Ralf", "link": "https://stackoverflow.com/users/7369280/ralf"}, "edited": false, "score": 1, "creation_date": 1547290513, "post_id": 54158348, "comment_id": 95147870, "body": "Micha, I quoted your last sentence in my answer."}], "tags": [], "owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "is_accepted": false, "score": 6, "last_activity_date": 1547302841, "last_edit_date": 1547302841, "creation_date": 1547285954, "answer_id": 54158348, "question_id": 54157689, "link": "https://stackoverflow.com/questions/54157689/how-to-lowercase-and-replace-spaces-in-bash/54158348#54158348", "title": "How to lowercase and replace spaces in bash?", "body": "<p>Are you looking for <strong>Pattern substitution</strong> (<code>${parameter/pattern/string}</code>) and <strong>Case Modification</strong> (<code>${parameter,,pattern}</code>)? If so, you will find more in <a href=\"https://linux.die.net/man/1/bash\" rel=\"nofollow noreferrer\"><code>man bash</code></a> under the topic of <strong>Parameter Expansion</strong>. </p>\n\n<pre><code>$ a=\"FOO BAR BLUB\"\n$ tmp=${a// /_}\n$ echo ${tmp,,}\nfoo_bar_blub\n</code></pre>\n\n<p>One thing to note though is that the BASH version uses patterns instead of regular expressions. For examplem, the pattern <code>*</code> is similar to the regular expression <code>.*</code>. And the pattern <code>?</code> is <code>.</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 1, "creation_date": 1547286621, "post_id": 54158409, "comment_id": 95146950, "body": "Thank you for teaching me about <code>typeset -l</code>!"}, {"owner": {"reputation": 9439, "user_id": 300248, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bc25a8b55f2b511375416cfe60055d17?s=128&d=identicon&r=PG", "display_name": "simpatico", "link": "https://stackoverflow.com/users/300248/simpatico"}, "edited": false, "score": 0, "creation_date": 1547287720, "post_id": 54158409, "comment_id": 95147240, "body": "In bash-3.2, I get &quot;typeset: -l: invalid option,&quot; and as of man bash the options are only -a, -f, -i, -r, -t, and -x"}, {"owner": {"reputation": 9439, "user_id": 300248, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bc25a8b55f2b511375416cfe60055d17?s=128&d=identicon&r=PG", "display_name": "simpatico", "link": "https://stackoverflow.com/users/300248/simpatico"}, "edited": false, "score": 0, "creation_date": 1547288317, "post_id": 54158409, "comment_id": 95147365, "body": "Upgrading to bash-4.4 it works"}, {"owner": {"reputation": 1483, "user_id": 7369280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf9dbdc445ae6834befd10a26daee65?s=128&d=identicon&r=PG&f=1", "display_name": "Ralf", "link": "https://stackoverflow.com/users/7369280/ralf"}, "reply_to_user": {"reputation": 9439, "user_id": 300248, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bc25a8b55f2b511375416cfe60055d17?s=128&d=identicon&r=PG", "display_name": "simpatico", "link": "https://stackoverflow.com/users/300248/simpatico"}, "edited": false, "score": 0, "creation_date": 1547288468, "post_id": 54158409, "comment_id": 95147397, "body": "@simpatico  Updating to bash 4.* was a good idea. Most people here will assume we talk about bash4 when answering questions. BTW: Bash5 came out a few days ago, but I would wait before updating to that."}, {"owner": {"reputation": 9439, "user_id": 300248, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bc25a8b55f2b511375416cfe60055d17?s=128&d=identicon&r=PG", "display_name": "simpatico", "link": "https://stackoverflow.com/users/300248/simpatico"}, "edited": false, "score": 0, "creation_date": 1547288748, "post_id": 54158409, "comment_id": 95147462, "body": "@user7369280, macos latest default is still bash-3.2. The latest on macports is 4.4 and to use it the script has to start with #!/usr/bin/env bash"}], "tags": [], "owner": {"reputation": 1483, "user_id": 7369280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf9dbdc445ae6834befd10a26daee65?s=128&d=identicon&r=PG&f=1", "display_name": "Ralf", "link": "https://stackoverflow.com/users/7369280/ralf"}, "is_accepted": true, "score": 5, "last_activity_date": 1547290385, "last_edit_date": 1547290385, "creation_date": 1547286459, "answer_id": 54158409, "question_id": 54157689, "link": "https://stackoverflow.com/questions/54157689/how-to-lowercase-and-replace-spaces-in-bash/54158409#54158409", "title": "How to lowercase and replace spaces in bash?", "body": "<p>Requires bash4 (tested with 4.3.48).</p>\n\n<p>Assuming you never want a upper case character in the value of the variable <code>output</code>, I would propose the following:</p>\n\n<pre><code>typeset -l output\noutput=${input// /_}\n</code></pre>\n\n<ul>\n<li><p><code>typeset -l output</code>: Defines the variable to be lowercase only. From <code>man bash</code>:</p>\n\n<blockquote>\n  <p>When the variable is assigned a value, all upper-case characters are converted to lower-case.</p>\n</blockquote></li>\n<li><p><code>output=${input// /_}</code>: replaces all spaces with a underscore.</p></li>\n</ul>\n\n<p>BTW: There is also <code>typeset -u variable</code> to define it as \"all upercase\".\nSee <code>man bash</code>.</p>\n\n<hr>\n\n<p>Update: While revisiting, I realized that my answer matches the question question title, but not the PHP code. In the PHP example, all characters that are <strong>not</strong> <code>a-z</code> are replaced with a underscore. So, if <code>input</code> contains a colon or a comma, those would also be replaced by underscore. </p>\n\n<p>So here is code that also matches that:</p>\n\n<pre><code>typeset -l output\noutput=${input//[^a-z]/_}\n</code></pre>\n\n<p>Finally a quote from the answer of @micha-wiedenmann :</p>\n\n<blockquote>\n  <p>One thing to note though is that the BASH version uses patterns instead of regular expressions. For example, the pattern <code>*</code> is similar to the regular expression <code>.*</code>. And the pattern <code>?</code> is <code>.</code>.</p>\n</blockquote>\n\n<p>Check the man-page and search for \"Pattern Matching\".</p>\n"}, {"tags": [], "owner": {"reputation": 9439, "user_id": 300248, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bc25a8b55f2b511375416cfe60055d17?s=128&d=identicon&r=PG", "display_name": "simpatico", "link": "https://stackoverflow.com/users/300248/simpatico"}, "is_accepted": false, "score": 0, "last_activity_date": 1547296353, "creation_date": 1547296353, "answer_id": 54159606, "question_id": 54157689, "link": "https://stackoverflow.com/questions/54157689/how-to-lowercase-and-replace-spaces-in-bash/54159606#54159606", "title": "How to lowercase and replace spaces in bash?", "body": "<p>This works:</p>\n\n<pre><code>output=`php -r \"echo preg_replace(\"/[^a-z]/\",\"_\",strtolower($input));\"`\necho $output\n</code></pre>\n\n<p><code>$input</code> is simply a variable defined in the bash script.</p>\n\n<p>Alternatively, <a href=\"https://stackoverflow.com/users/7369280/user7369280\">@user7369280's answer</a> also works since bash4+.</p>\n"}], "owner": {"reputation": 9439, "user_id": 300248, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bc25a8b55f2b511375416cfe60055d17?s=128&d=identicon&r=PG", "display_name": "simpatico", "link": "https://stackoverflow.com/users/300248/simpatico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 939, "favorite_count": 0, "closed_date": 1547306992, "accepted_answer_id": 54158409, "answer_count": 4, "score": -5, "last_activity_date": 1547302841, "creation_date": 1547279129, "last_edit_date": 1547285994, "question_id": 54157689, "link": "https://stackoverflow.com/questions/54157689/how-to-lowercase-and-replace-spaces-in-bash", "closed_reason": "Needs more focus", "title": "How to lowercase and replace spaces in bash?", "body": "<p>In PHP:</p>\n\n<pre><code>$output = preg_replace(\"/[^a-z]/\",\"_\",strtolower($input));\n</code></pre>\n\n<p>How to do the same in a BASH script?</p>\n"}, {"tags": ["perl", "csv", "io", "character-encoding", "utf-16"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1547239968, "post_id": 54153807, "comment_id": 95138761, "body": "You&#39;re getting that error because you&#39;re passing already-decoded text to <code>decode</code>. Remove the explicit <code>encode</code> and <code>decode</code> if you&#39;re going to use <code>:encoding</code> layers."}, {"owner": {"reputation": 31, "user_id": 3079162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fde50cb54107ae90b18ffdb8e1e10ef2?s=128&d=identicon&r=PG&f=1", "display_name": "RocketBouchard", "link": "https://stackoverflow.com/users/3079162/rocketbouchard"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1547240130, "post_id": 54153807, "comment_id": 95138800, "body": "Thanks! Removing those lines results in a file (when using UTF-16 import in Libre Office) with Asian-looking characters: \u4700\u6500\u6f00\u6200"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1547240146, "post_id": 54153807, "comment_id": 95138804, "body": "what @ikegami said.  plus, historically there have been issues using :crlf with ucs2/utf-16 encodings; maybe remove that and just make sure you end any added lines with &quot;\\r\\n&quot; (before encoding)"}, {"owner": {"reputation": 31, "user_id": 3079162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fde50cb54107ae90b18ffdb8e1e10ef2?s=128&d=identicon&r=PG&f=1", "display_name": "RocketBouchard", "link": "https://stackoverflow.com/users/3079162/rocketbouchard"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1547240271, "post_id": 54153807, "comment_id": 95138844, "body": "Thanks for responding! removing the crlf (from both input open and output open) and adding \\r before my existing \\n results in the same problem I reported to @ikegami"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1547241424, "post_id": 54153807, "comment_id": 95139313, "body": "@RocketBouchard seems like the first step is just getting your data to roundtrip correctly, so your &quot;do stuff&quot; should just be <code>$output .= $line;</code> and verifying the output file is identical to the input file"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1547271136, "post_id": 54153807, "comment_id": 95144544, "body": "Do you have the same problem with <code>:raw:encoding(UTF-16le):crlf</code>? (Include <code>@ikegami</code> in the reply)"}, {"owner": {"reputation": 31, "user_id": 3079162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fde50cb54107ae90b18ffdb8e1e10ef2?s=128&d=identicon&r=PG&f=1", "display_name": "RocketBouchard", "link": "https://stackoverflow.com/users/3079162/rocketbouchard"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1547484052, "post_id": 54153807, "comment_id": 95199734, "body": "Great debugging thought, @ysth! I am embarrassed that I didn&#39;t try that. Commenting out everything except <code>$output .= $line;</code>, the problem goes away. I will update the code above with the &quot;processing&quot; I&#39;m doing to see if we can get to the bottom of this."}, {"owner": {"reputation": 31, "user_id": 3079162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fde50cb54107ae90b18ffdb8e1e10ef2?s=128&d=identicon&r=PG&f=1", "display_name": "RocketBouchard", "link": "https://stackoverflow.com/users/3079162/rocketbouchard"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1547486595, "post_id": 54153807, "comment_id": 95200987, "body": "@ikegami! Thanks so much! That was the fix that worked for me. Notes above in my question if you&#39;re interested."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1547486682, "post_id": 54153807, "comment_id": 95201027, "body": "I&#39;ll post a proper answer later today."}, {"owner": {"reputation": 31, "user_id": 3079162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fde50cb54107ae90b18ffdb8e1e10ef2?s=128&d=identicon&r=PG&f=1", "display_name": "RocketBouchard", "link": "https://stackoverflow.com/users/3079162/rocketbouchard"}, "edited": false, "score": 0, "creation_date": 1547486843, "post_id": 54153807, "comment_id": 95201079, "body": "Haha! I was just about to refer to <a href=\"https://meta.stackoverflow.com/questions/341258/how-can-i-reward-a-user-who-helped-me-in-the-comments\">this post about commenter rewards</a> and ask you to do just that. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 3079162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fde50cb54107ae90b18ffdb8e1e10ef2?s=128&d=identicon&r=PG&f=1", "display_name": "RocketBouchard", "link": "https://stackoverflow.com/users/3079162/rocketbouchard"}, "edited": false, "score": 0, "creation_date": 1547485724, "post_id": 54166386, "comment_id": 95200587, "body": "Thanks for this solution, @tshiono! Given your code, mine outputs the strange Asian characters again. I would love to be more specific, so if anyone knows what characters those are, please tell me. There is an update that I&#39;ll put above that is relevant to your answer."}, {"owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "reply_to_user": {"reputation": 31, "user_id": 3079162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fde50cb54107ae90b18ffdb8e1e10ef2?s=128&d=identicon&r=PG&f=1", "display_name": "RocketBouchard", "link": "https://stackoverflow.com/users/3079162/rocketbouchard"}, "edited": false, "score": 0, "creation_date": 1547514953, "post_id": 54166386, "comment_id": 95210710, "body": "It seems Perl may have a Windows specific problem. Please try to modify the line to open a file for writing as: <code>open(my $output_fh, &#39;&gt;:raw:encoding(UTF-16le):crlf:utf8&#39;, $outputFileName);</code>. BR."}, {"owner": {"reputation": 31, "user_id": 3079162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fde50cb54107ae90b18ffdb8e1e10ef2?s=128&d=identicon&r=PG&f=1", "display_name": "RocketBouchard", "link": "https://stackoverflow.com/users/3079162/rocketbouchard"}, "edited": false, "score": 0, "creation_date": 1547669699, "post_id": 54166386, "comment_id": 95275152, "body": "Thanks, @tshiono. Can you clarify what the utf-8 additions are trying to accomplish? Is your idea to treat all characters <i>within</i> the script (while it&#39;s doing things) as utf-8 but still output utf-16?"}, {"owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "reply_to_user": {"reputation": 31, "user_id": 3079162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fde50cb54107ae90b18ffdb8e1e10ef2?s=128&d=identicon&r=PG&f=1", "display_name": "RocketBouchard", "link": "https://stackoverflow.com/users/3079162/rocketbouchard"}, "edited": false, "score": 0, "creation_date": 1547707086, "post_id": 54166386, "comment_id": 95285493, "body": "Right. The &quot;utf-8&#39; notation in the output filter is intended to specify the internal coding. I suppose it may be omitted if your script works without it."}], "tags": [], "owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "is_accepted": false, "score": 1, "last_activity_date": 1547358094, "creation_date": 1547358094, "answer_id": 54166386, "question_id": 54153807, "link": "https://stackoverflow.com/questions/54153807/how-do-i-handle-a-wide-character-in-perl-using-utf-16/54166386#54166386", "title": "How do I handle a Wide character in Perl using UTF-16?", "body": "<p>The following script works on my system (Ubuntu 18.04) at least.</p>\n\n<pre><code>use Encode qw(encode decode);\nuse utf8;\n\nopen(my $input_fh, '&lt;:encoding(UTF-16le):crlf', $path.\"/\".$inputFile)\n or die \"Could not open file \".\"'\".$path.\"/\".$inputFile.\" $!\";\n\nwhile (my $line = &lt;$input_fh&gt;) {\n  # some operations on the input text\n  $line =~ s/\u30d5\u30a9\u30eb\u30c0\u30fc?/folder/g;\n  $line =~ s/Windows/\u30a6\u30a3\u30f3\u30c9\u30a6\u30ba/g;\n  $output .= $line;\n}\n\nopen(my $output_fh, '&gt;:encoding(UTF-16le):crlf', $outputFileName)\n or die \"Could not open file '$outputFileName' $!\";\n\nprint $output_fh $output;\n</code></pre>\n\n<ul>\n<li>I haven't tested the script on Windows10 but the input text is created on Windows encoded with UTF-16LE.</li>\n<li>The script itself is encoded with UTF-8.</li>\n</ul>\n\n<p>If you still have a problem, your providing the minimal set of input text and the processing stuff to reproduce the problem will be helpful.</p>\n"}], "owner": {"reputation": 31, "user_id": 3079162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fde50cb54107ae90b18ffdb8e1e10ef2?s=128&d=identicon&r=PG&f=1", "display_name": "RocketBouchard", "link": "https://stackoverflow.com/users/3079162/rocketbouchard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 715, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1547486558, "creation_date": 1547239526, "last_edit_date": 1547486558, "question_id": 54153807, "link": "https://stackoverflow.com/questions/54153807/how-do-i-handle-a-wide-character-in-perl-using-utf-16", "title": "How do I handle a Wide character in Perl using UTF-16?", "body": "<p>I am reading in a file (Little-endian UTF-16 Unicode text, with very long lines, with CRLF line), then I am doing some processing on that file, then I am using some data from the input file and outputting to a new file. I have tried many things from various questions and blog posts, and I will admit to being totally confused at this point. While writing this question, I was stuck on a BOM error, but upon suggestion from another question, I changed my \"open\" statement to include :encoding(UTF-16le), and now my error is \"Wide character in subroutine entry\", which I am also unable to resolve.</p>\n\n<p>OS: Windows 10<br />\nShell: cmd<br />\nPerl: This is perl 5, version 14, subversion 2 (v5.14.2) built for MSWin32-x86-multi-thread</p>\n\n<p>I have tried with and without the layers (:encoding(UTF-16le):crlf) on both the input and the output. I have tried with and without the encode/decode. The results included BOM errors, the wide character error that I'm currently on, and an exported file that (when opened using Libre Office) shows what look like some kind of Asian characters when Imported with UTF-16 but looks more normal with UTF-8 (though still incorrect). The best I have been able to manage outputs a file that is mostly correct but includes a nonsense character in place of a correct accented character (c with a cedilla). Unfortunately, due to poor experimentation protocol, I no longer have that file nor the steps to reproduce it.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Encode qw(encode decode);\n\nuse POSIX 'strftime'; # because I like timestamps for lots of things\n\n# removed :crlf per instructions\nopen(my $input_fh, '&lt;:encoding(UTF-16le)', $path.\"/\".$inputFile)\n or die \"Could not open file \".\"'\".$path.\"/\".$inputFile.\" $!\";\n\nwhile (my $line = &lt;$input_fh&gt;) {\n  #$line = decode ('UTF-16le', $line); # removed per instructions\n  chomp $line;\n  my @lineArray;\n  my $last_char = \"\";\n  my $current_char = \"\";\n  my $current_string = \"\";\n  my $field_count = 0;\n  my $inside_quote = 0;\n\n  for my $i (0..length($line)-1) {\n    $last_char = $current_char;\n    $current_char = substr($line, $i, 1);\n\n    # Catch first char in the string?\n    if ($current_char eq \",\" &amp;&amp; $inside_quote == 0) { # if you find a comma and we're not inside quotes, it's a new field\n      # put the whole string into the array as one field\n      $lineArray[$field_count] = $current_string;\n      $current_string = \"\";\n      $field_count++;\n    }\n    elsif ($current_char eq '\"' &amp;&amp; $inside_quote == 0) { # found the first of two quotes\n      $inside_quote = 1;\n      # no need to update $current_string\n      # no need to update $field_count\n    }\n    elsif ($current_char eq '\"' &amp;&amp; $inside_quote == 1) { # found a second quote, need to decide if it's in-field or an end quote\n      $inside_quote++;\n      $current_string .= '\"';\n      # no need to update $field_count\n    }\n    elsif ($current_char eq \",\" &amp;&amp; $inside_quote &gt;= 2) { # we are at the end of a string, but there was more than 1 quote\n      # removes the trailing quote, if there was one\n      if ($last_char eq '\"') { $lineArray[$field_count] = chop($current_string); }\n      else { $lineArray[$field_count] = $current_string; }\n      $current_string = \"\";\n      $field_count++;\n      $inside_quote = 0;\n    }\n    else {\n      $current_string .= $current_char;\n    }\n  } # for my $i (0..length($line)-1)\n  my $id = $lineArray[0];\n  my $name = $lineArray[1];\n  my $campus = $lineArray[2];\n  my $building = $lineArray[3];\n\n  $output .= '\"'.$id.'\",\"'.$name.'\",\"'.$campus.'\",\"'.$building.'\"'.\"\\r\\n\";\n}\nmy $output_fh;\n\n# removed :crlf per instructions\nopen($output_fh, '&gt;:encoding(UTF-16le)', $outputFileName) \n or die \"Could not open file '$outputFileName' $!\";\n\n#$output = encode ('UTF-16le', $output); #removed per instructions\n\nprint $output_fh $output;  \n</code></pre>\n\n<p>Error:\n   Wide character in subroutine entry at C:/Dwimperl/perl/lib/Encode.pm line 176,  line 1. </p>\n\n<p>I am hoping for a file that remains the same as the input (Little-endian UTF-16 Unicode text, with very long lines, with CRLF line) while maintaining \"correct\" special characters like the cedilla on the c. I am hitting a wall, and any help would be greatly appreciated.</p>\n\n<p>Update (2019-01-14): Updated the code to include the \"processing\" and changes suggested by the commenters. My purpose is to process a csv file and output a few different files. I tried to use the csv-processing libraries, but couldn't get them to work because the input csv is not well-formed (and I can't control it). Therefore, I'm making the classic mistake of making my own parser. What you see above is the beginning of that parser. There are many other fields and many other actions to be taken on those fields (which is why I have stored them in nicely named variables rather than leaving them in hard-to-remember array spots). My thanks to everyone who has responded thus far. You are most definitely helping me past the wall.</p>\n\n<p>Update 2 (2019-01-14): After uploading my code, I tried again, and I have more debugging info. First, my \"testing\" is trying to open the outputted file in LibreOffice Calc. As I noted, the UTF-16 import showed the Asian characters and the UTF-8 import looked more normal but still wrong (in this case some garbled characters and everything in one long line). HOWEVER, when I open the file in a text editor (like Atom), the file looks fine (except that every character has a space after it which I understand is to be expected with UTF-16).</p>\n\n<p>SOLUTION (2019-01-14): The last comment by @ikegami was the solution. Leaving my code alone and adding the raw to the open input and the open output created a UTF-16 file that LibreOffice Calc can import correctly. Interestingly, running the \"file\" utility on the output file results in: \"test.csv: data\" which is not super encouraging. If anyone wants to try to answer why it isn't the same as the input file, I would love to know, but in any case, I will consider this question answered. Thanks to all who helped! I will try to figure out how to upvote you are whatever. Greatly appreciated! Also, any comments that tell me how to properly close this and/or properly reward those who helped are welcome.</p>\n"}, {"tags": ["perl", "escaping"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1547237193, "post_id": 54152887, "comment_id": 95137719, "body": "(<code>s&#47;\\\\&#47;&#47;</code> removes the slash, leaving <code>t</code>, not a tab.)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1547240749, "post_id": 54152887, "comment_id": 95139013, "body": "See also <a href=\"https://metacpan.org/pod/String::Escape\" rel=\"nofollow noreferrer\">String::Escape</a>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1547247902, "post_id": 54152887, "comment_id": 95141331, "body": "<a href=\"https://metacpan.org/pod/String::Unescape\" rel=\"nofollow noreferrer\">String::Unescape</a> is also a slightly more direct solution to this general problem"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 21019, "user_id": 198183, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/52f281a988bae754991af26224c796af?s=128&d=identicon&r=PG", "display_name": "sid_com", "link": "https://stackoverflow.com/users/198183/sid-com"}, "edited": false, "score": 0, "creation_date": 1547295559, "post_id": 54153410, "comment_id": 95149117, "body": "So, broken by design, then. There&#39;s no way to specify one wants <code>\\ </code> followed by <code>t</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1547240066, "last_edit_date": 1547240066, "creation_date": 1547237414, "answer_id": 54153410, "question_id": 54152887, "link": "https://stackoverflow.com/questions/54152887/how-to-do-i-convert-an-escaped-t-into-a-tab-character/54153410#54153410", "title": "How to do I convert an escaped t into a tab character", "body": "<p>The following is the simplest solution:</p>\n\n<pre><code> $var = \"\\t\" if $var eq \"\\\\t\";\n</code></pre>\n\n<p>If you want to do this no matter where the sequence appears in the string, you could use</p>\n\n<pre><code> $var =~ s/\\\\t/\\t/g;\n</code></pre>\n\n<p>But it sounds like you're not asking the right question. Nothing supports <code>\\t</code> and nothing else. At the very least, I would also expect <code>\\\\</code> to produce <code>\\</code>. Are you perhaps trying to parse JSON? If so, there are number of other escape sequences you need to worry about.</p>\n"}], "owner": {"reputation": 21019, "user_id": 198183, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/52f281a988bae754991af26224c796af?s=128&d=identicon&r=PG", "display_name": "sid_com", "link": "https://stackoverflow.com/users/198183/sid-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 54153410, "answer_count": 1, "score": 0, "last_activity_date": 1547277908, "creation_date": 1547234900, "last_edit_date": 1547277908, "question_id": 54152887, "link": "https://stackoverflow.com/questions/54152887/how-to-do-i-convert-an-escaped-t-into-a-tab-character", "title": "How to do I convert an escaped t into a tab character", "body": "<p>I have a variable that contains a slash and a <code>t</code>.</p>\n\n<pre><code>my $var = \"\\\\t\";\n</code></pre>\n\n<p>I want to convert that to a tab. How do I do that?</p>\n\n<hr>\n\n<pre><code>use Data::Dumper;\nuse Term::ReadLine;\nmy $rl = Term::ReadLine-&gt;new();\nmy $var = $rl-&gt;readline( 'Enter \\t:' );\nprint Dumper $var;\n</code></pre>\n"}, {"tags": ["perl", "unix", "awk", "sed", "solaris"], "comments": [{"owner": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 0, "creation_date": 1547234943, "post_id": 54152786, "comment_id": 95136731, "body": "Are there always 3 columns?"}, {"owner": {"reputation": 53, "user_id": 10842759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tMaxGmTRYhg/AAAAAAAAAAI/AAAAAAAABN4/39toVPNi634/photo.jpg?sz=128", "display_name": "Jeevan Patil", "link": "https://stackoverflow.com/users/10842759/jeevan-patil"}, "reply_to_user": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 0, "creation_date": 1547235244, "post_id": 54152786, "comment_id": 95136875, "body": "yes. always 3 columns"}, {"owner": {"reputation": 53, "user_id": 10842759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tMaxGmTRYhg/AAAAAAAAAAI/AAAAAAAABN4/39toVPNi634/photo.jpg?sz=128", "display_name": "Jeevan Patil", "link": "https://stackoverflow.com/users/10842759/jeevan-patil"}, "reply_to_user": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 0, "creation_date": 1547236254, "post_id": 54152786, "comment_id": 95137293, "body": "it is possible that there can be more columns like 281475473926267,46,47,12,13"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 10842759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tMaxGmTRYhg/AAAAAAAAAAI/AAAAAAAABN4/39toVPNi634/photo.jpg?sz=128", "display_name": "Jeevan Patil", "link": "https://stackoverflow.com/users/10842759/jeevan-patil"}, "edited": false, "score": 0, "creation_date": 1547237959, "post_id": 54153388, "comment_id": 95137994, "body": "thanks. working to get the values in one row but not helping me to arrange in ascending order . please see my o/p---------------------------------------------------------&zwnj;&#8203;------sort -t, -k2n snclabeltest.txt | awk -F, &#39;{for(i=2;i&lt;=NF;i++) {a[$1]=a[$1] sep[$1] $i; sep[$1]=FS}} END {for(k in a) print k, a[k]}&#39; 281474984889537 112,68,248,249 281475473926267 16,17,46,47 281474985385546 20,28,310,311          ----------------------------------------------------------11&zwnj;&#8203;2,68,248,249 is not in ascending order (min to max)"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "reply_to_user": {"reputation": 53, "user_id": 10842759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tMaxGmTRYhg/AAAAAAAAAAI/AAAAAAAABN4/39toVPNi634/photo.jpg?sz=128", "display_name": "Jeevan Patil", "link": "https://stackoverflow.com/users/10842759/jeevan-patil"}, "edited": false, "score": 0, "creation_date": 1547238111, "post_id": 54153388, "comment_id": 95138065, "body": "yes, I noticed the same issue and updated the script.  Please test the new one."}, {"owner": {"reputation": 53, "user_id": 10842759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tMaxGmTRYhg/AAAAAAAAAAI/AAAAAAAABN4/39toVPNi634/photo.jpg?sz=128", "display_name": "Jeevan Patil", "link": "https://stackoverflow.com/users/10842759/jeevan-patil"}, "edited": false, "score": 0, "creation_date": 1547238558, "post_id": 54153388, "comment_id": 95138234, "body": "awk -F, &#39;{print $1,$2; print $1,$3}&#39; snclabeltest.txt | sort -k1n -k2n | awk &#39;p!=$1{if(p) print p,a[p]; a[$1]=$2; p=$1; next} {a[$1]=a[$1] &quot;,&quot; $2} END  {print p,a[p]}&#39; | sort -k2n 281475473926267 16,17,46,47 281474985385546 20,28,310,311 281474984889537 68,112,248,249"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 53, "user_id": 10842759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tMaxGmTRYhg/AAAAAAAAAAI/AAAAAAAABN4/39toVPNi634/photo.jpg?sz=128", "display_name": "Jeevan Patil", "link": "https://stackoverflow.com/users/10842759/jeevan-patil"}, "edited": false, "score": 0, "creation_date": 1547240281, "post_id": 54153388, "comment_id": 95138847, "body": "@JeevanPatil if the same value appears for the same key on multiple input lines then it&#39;ll show up multiple times in the output. Is that your desired behavior? Add a line like <code>281475473926267,16,18</code> to your posted sample input and then look at the script output to see what I mean."}, {"owner": {"reputation": 53, "user_id": 10842759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tMaxGmTRYhg/AAAAAAAAAAI/AAAAAAAABN4/39toVPNi634/photo.jpg?sz=128", "display_name": "Jeevan Patil", "link": "https://stackoverflow.com/users/10842759/jeevan-patil"}, "edited": false, "score": 0, "creation_date": 1547376852, "post_id": 54153388, "comment_id": 95165329, "body": "yes.. i got your point. Actually for input file, there should not be any duplicate value in 2nd column, as of now i just came across some garbage duplicate values and and i neglected them . So as of now above command look perfect."}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": true, "score": 1, "last_activity_date": 1547237825, "last_edit_date": 1547237825, "creation_date": 1547237336, "answer_id": 54153388, "question_id": 54152786, "link": "https://stackoverflow.com/questions/54152786/to-arrange-the-value-in-columns-as-per-value-in-1st-column/54153388#54153388", "title": "to arrange the value in columns as per value in 1st column", "body": "<p>multi-step</p>\n\n<pre><code>$ awk -F, '{print $1,$2; print $1,$3}' file             | \n  sort -k1n -k2n                                        | \n  awk 'p!=$1{if(p) print p,a[p]; a[$1]=$2; p=$1; next} \n            {a[$1]=a[$1] \",\" $2} \n       END  {print p,a[p]}'                             | \n  sort -k2n\n\n281475473926267 16,17,46,47\n281474985385546 20,28,310,311\n281474984889537 68,112,248,249\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 0, "last_activity_date": 1547237965, "last_edit_date": 1547237965, "creation_date": 1547237659, "answer_id": 54153461, "question_id": 54152786, "link": "https://stackoverflow.com/questions/54152786/to-arrange-the-value-in-columns-as-per-value-in-1st-column/54153461#54153461", "title": "to arrange the value in columns as per value in 1st column", "body": "<p>With GNU awk for true multi-dimensional arrays and sorted_in:</p>\n\n<pre><code>$ cat tst.awk\nBEGIN { FS=\",\" }\n{\n    for (i=2; i&lt;=NF; i++) {\n        keyVals[$1][$i]\n    }\n}\nEND {\n    PROCINFO[\"sorted_in\"] = \"@ind_num_asc\"\n    for (key in keyVals) {\n        vals = \"\"\n        for (val in keyVals[key]) {\n            vals = (vals == \"\" ? \"\" : vals \",\") val\n        }\n        print key, vals\n    }\n}\n\n$ awk -f tst.awk file\n281474984889537 68,112,248,249\n281474985385546 20,28,310,311\n281475473926267 16,17,46,47\n</code></pre>\n\n<p>The above will work no matter how many fields you have on each line and it will remove duplicate values when they occur on multiple lines for the same key value.</p>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 0, "last_activity_date": 1547289498, "creation_date": 1547289498, "answer_id": 54158777, "question_id": 54152786, "link": "https://stackoverflow.com/questions/54152786/to-arrange-the-value-in-columns-as-per-value-in-1st-column/54158777#54158777", "title": "to arrange the value in columns as per value in 1st column", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed -r 'H;x;s/((\\n[^\\n,]*),[^\\n]*)(.*)\\2([^\\n]*)\\n?/\\1\\4\\3/;x;$!d;x;s/.//;:b;h;s/\\n.*//;s/[^,]*,//;s/,/\\n/g;s/.*/echo \"&amp;\"|sort -n|paste -sd,/e;G;s/^([^\\n]*)\\n([^\\n,]*),[^\\n]*/\\2 \\1/;P;:c;tc;s/[^\\n]*\\n//;tb;d' file\n</code></pre>\n\n<p>The script works in two parts. In the first part of the processing the lines of the file are held in memory and reduced in size by appending values of the same key to a single key. At the end of file the second part of processing is enacted. Each line is broken into two, the appended values are sorted and re-appended to the key, printed and removed, until all the lines have been processed.</p>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 0, "last_activity_date": 1547383765, "creation_date": 1547383765, "answer_id": 54169039, "question_id": 54152786, "link": "https://stackoverflow.com/questions/54152786/to-arrange-the-value-in-columns-as-per-value-in-1st-column/54169039#54169039", "title": "to arrange the value in columns as per value in 1st column", "body": "<p>To correct your Perl-oneliner, use this.</p>\n\n<pre><code>$ cat text.txt\n281475473926267,46,47\n281474985385546,310,311\n281474984889537,248,249\n281475473926267,16,17\n281474985385546,20,28\n281474984889537,112,68\n\n$ cat text.txt | perl -F, -lanE ' @t1=@{$kv{$F[0]}}; push(@t1,@F[1..2]); $kv{$F[0]}=[@t1]; END { while(my($x,$y) = each(%kv)) { print \"$x \",join(\",\",@{$y}) }}'\n281474985385546 310,311,20,28\n281475473926267 46,47,16,17\n281474984889537 248,249,112,68\n\n$\n</code></pre>\n\n<p>When you have more columns, a small change on the above one-liner from <code>1..2</code> to <code>1..$#F</code> will do the trick. Check this out</p>\n\n<pre><code>$ cat &gt; text2.txt\n281475473926267,46,47,49\n281474985385546,310,311\n281474984889537,248,249,311,677,213\n281475473926267,16,17\n281474985385546,20,28\n281474984889537,112,68,54,78,324,67\n\n\n$ cat text2.txt | perl -F, -lanE ' @t1=@{$kv{$F[0]}}; push(@t1,@F[1..$#F]); $kv{$F[0]}=[@t1]; END { while(my($x,$y) = each(%kv)) { print \"$x \",join(\",\",@{$y}) }}'\n281474984889537 248,249,311,677,213,112,68,54,78,324,67\n281474985385546 310,311,20,28\n281475473926267 46,47,49,16,17\n\n$\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 10842759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tMaxGmTRYhg/AAAAAAAAAAI/AAAAAAAABN4/39toVPNi634/photo.jpg?sz=128", "display_name": "Jeevan Patil", "link": "https://stackoverflow.com/users/10842759/jeevan-patil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 54153388, "answer_count": 4, "score": 0, "last_activity_date": 1547383765, "creation_date": 1547234503, "last_edit_date": 1547264086, "question_id": 54152786, "link": "https://stackoverflow.com/questions/54152786/to-arrange-the-value-in-columns-as-per-value-in-1st-column", "title": "to arrange the value in columns as per value in 1st column", "body": "<p>I have a file with following data</p>\n\n<pre><code>cat text.txt\n281475473926267,46,47\n281474985385546,310,311\n281474984889537,248,249\n281475473926267,16,17\n281474985385546,20,28\n281474984889537,112,68\n</code></pre>\n\n<p>The values in 1st column are duplicate at some places\ni want o/p as given below</p>\n\n<pre><code>cat output.txt\n281475473926267 16,17,46,47\n281474985385546 20,28,310,311\n281474984889537 68,112,248,249\n</code></pre>\n\n<p>It should print uniq values of column 1 and then space and then it should print respective values of other column in one line arranged in ascending order.</p>\n\n<p>I tried below:</p>\n\n<pre><code>cat text.txt | perl -F, -lane ' $kv{$F[0]}{$F[1]}++; END { while(my($x,$y) = each(%kv)) { print \"$x \",join(\",\",keys %$y) }}'\n\n281474984889537 112,248\n281474985385546 310,20\n281475473926267 46,16\n</code></pre>\n\n<p>here i am not able to print all the values in front of value in 1st column</p>\n\n<p>for 281474984889537 it should print 68,112,248,249, but its printing only 112,248</p>\n\n<p>also i am not sure how to arrange them in ascending order.</p>\n\n<pre><code>cat text.txt | perl -F, -lane ' $kv{$F[0]}{$F[1]}++; END { while(my($x,$y) = each(%kv)) { print \"$x \",join(\",\",keys %$y) }}'\n\n281474984889537 112,248\n281474985385546 310,20\n281475473926267 46,16\n</code></pre>\n\n<p>here i am not able to print all the values in front of value in 1st column</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1547232921, "post_id": 54152325, "comment_id": 95135880, "body": "It&#39;s very dangerous to use nested calls to while-readline without a lexical. It assigns globally to <code>$_</code> without localizing it, so your calls to <code>meta</code> and <code>data</code> will clobber whatever is currently there. Try changing all your loops to assign to lexicals: <code>while (my $line = &lt;&gt;) { $line =~ m!...! }</code> It&#39;s also better to use <a href=\"https://perldoc.pl/perl5220delta#New-double-diamond-operator\" rel=\"nofollow noreferrer\">&lt;&lt;&gt;&gt;</a> instead of <code>&lt;&gt;</code> if you&#39;re on a new enough Perl (5.22+)"}, {"owner": {"reputation": 2285, "user_id": 1916711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ebc3c1d0b082618f5db9b06b44c6a2?s=128&d=identicon&r=PG", "display_name": "arayq2", "link": "https://stackoverflow.com/users/1916711/arayq2"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1547234033, "post_id": 54152325, "comment_id": 95136352, "body": "As it happens, the same bizarre behavior occurs even with scoped lexicals.  [The program is single purpose (load lines into custom structures and then produce post-processed output) so leveraging the global $_ is okay here.]"}, {"owner": {"reputation": 2285, "user_id": 1916711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ebc3c1d0b082618f5db9b06b44c6a2?s=128&d=identicon&r=PG", "display_name": "arayq2", "link": "https://stackoverflow.com/users/1916711/arayq2"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1547234187, "post_id": 54152325, "comment_id": 95136406, "body": "Perl 5.16.3 on Red Hat Maipo (Enterprise Linux 7.3).  The file names are quite normal too, no funny characters or the like."}], "answers": [{"comments": [{"owner": {"reputation": 2285, "user_id": 1916711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ebc3c1d0b082618f5db9b06b44c6a2?s=128&d=identicon&r=PG", "display_name": "arayq2", "link": "https://stackoverflow.com/users/1916711/arayq2"}, "edited": false, "score": 0, "creation_date": 1547242019, "post_id": 54153343, "comment_id": 95139510, "body": "Sorry, you lost me. What &quot;second go around&quot;?  The <code>while ( &lt;&gt; )</code> loop should end when @ARGV is exhausted.  There is no second while-loop after that."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2285, "user_id": 1916711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ebc3c1d0b082618f5db9b06b44c6a2?s=128&d=identicon&r=PG", "display_name": "arayq2", "link": "https://stackoverflow.com/users/1916711/arayq2"}, "edited": false, "score": 0, "creation_date": 1547244420, "post_id": 54153343, "comment_id": 95140295, "body": "You have not two, but three... You&#39;re getting into a situation where the loop in <code>meta</code> or <code>data</code> continues until EOF, after which you call <code>&lt;&gt;</code>  in the main program."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2285, "user_id": 1916711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ebc3c1d0b082618f5db9b06b44c6a2?s=128&d=identicon&r=PG", "display_name": "arayq2", "link": "https://stackoverflow.com/users/1916711/arayq2"}, "edited": false, "score": 0, "creation_date": 1547245361, "post_id": 54153343, "comment_id": 95140599, "body": "Solution: Use a proper HTML? XML? parser instead of this shoddy thing."}, {"owner": {"reputation": 2285, "user_id": 1916711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ebc3c1d0b082618f5db9b06b44c6a2?s=128&d=identicon&r=PG", "display_name": "arayq2", "link": "https://stackoverflow.com/users/1916711/arayq2"}, "edited": false, "score": 0, "creation_date": 1547247259, "post_id": 54153343, "comment_id": 95141166, "body": "These are not properly tagged files, so there is no off-the-shelf parser. Further, the nested while loops do not run to EOF: they specifically exit when a special line is encountered (return if...)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2285, "user_id": 1916711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ebc3c1d0b082618f5db9b06b44c6a2?s=128&d=identicon&r=PG", "display_name": "arayq2", "link": "https://stackoverflow.com/users/1916711/arayq2"}, "edited": false, "score": 0, "creation_date": 1547247495, "post_id": 54153343, "comment_id": 95141229, "body": "One if them isn&#39;t. You&#39;re getting into a situation where the loop in <code>meta</code> or <code>data</code> continues until EOF, after which you call <code>&lt;&gt;</code>  in the main program."}, {"owner": {"reputation": 2285, "user_id": 1916711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ebc3c1d0b082618f5db9b06b44c6a2?s=128&d=identicon&r=PG", "display_name": "arayq2", "link": "https://stackoverflow.com/users/1916711/arayq2"}, "edited": false, "score": 0, "creation_date": 1547248387, "post_id": 54153343, "comment_id": 95141459, "body": "Okay, that&#39;s a logical explanation, thank you. I&#39;ll scrutinize the code again."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1547237865, "last_edit_date": 1547237865, "creation_date": 1547237078, "answer_id": 54153343, "question_id": 54152325, "link": "https://stackoverflow.com/questions/54152325/hangs-on-stdin-after-reading-non-empty-argv/54153343#54153343", "title": "&lt;&gt; hangs on STDIN after reading non-empty @ARGV", "body": "<p>The problem is that you kept read from <code>ARGV</code> after it returned EOF.</p>\n\n<p>Reading from <code>ARGV</code> removes the entries from <code>@ARGV</code> as it opens them, so <code>@ARGV</code> was empty the second go around, causing the read to read from STDIN.</p>\n\n<p>Your program boils down to the following:</p>\n\n<pre><code>print \"\\@ARGV: @ARGV\\n\";     # Outputs: @ARGV: file.txt\nwhile (&lt;&gt;) { }               # Reads from file.txt.\nprint \"\\@ARGV: @ARGV\\n\";     # Outputs: @ARGV:\nwhile (&lt;&gt;) { }               # Reads from STDIN.\n</code></pre>\n\n<hr>\n\n<p>By the way, you should never expect a file handle that returned EOF to keep returning EOF. This is not always the case. For example, it's not the case for handles to terminals on POSIX systems.</p>\n"}], "owner": {"reputation": 2285, "user_id": 1916711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ebc3c1d0b082618f5db9b06b44c6a2?s=128&d=identicon&r=PG", "display_name": "arayq2", "link": "https://stackoverflow.com/users/1916711/arayq2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 54153343, "answer_count": 1, "score": 0, "last_activity_date": 1547243371, "creation_date": 1547232331, "last_edit_date": 1547243371, "question_id": 54152325, "link": "https://stackoverflow.com/questions/54152325/hangs-on-stdin-after-reading-non-empty-argv", "title": "&lt;&gt; hangs on STDIN after reading non-empty @ARGV", "body": "<p>The code below is the skeleton of a perl program to process some files with structured text. The program works as expected if the input is provided via STDIN:</p>\n\n<pre><code>./process_files.pl &lt; some_file\n</code></pre>\n\n<p>But it hangs if the file to be processed is a command line argument:</p>\n\n<pre><code>./process_files.pl some_file\n</code></pre>\n\n<p>Running this under strace showed that after reading the file, the program is stuck on <code>read(0, ...)</code>.  And sure enough, typing Ctrl-D at the terminal unsticks the program and it then runs to completion.</p>\n\n<p>Why is perl waiting on STDIN after reading from a non-empty @ARGV?  </p>\n\n<p>The perl code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nsub meta\n{\n    while ( &lt;&gt; )\n    {\n        return if m!&lt;/META&gt;!;\n        # process metadata line\n    }\n}\n\nsub data\n{\n    while ( &lt;&gt; )\n    {\n        return if m!&lt;/DATA&gt;!;\n        # process data line\n    }\n}\n\nwhile ( &lt;&gt; )\n{\n    meta if m!&lt;META&gt;!;\n    data if m!&lt;DATA&gt;!;\n}\n\n# post processing here\n\nexit 0;\n</code></pre>\n\n<p>ADDENDUM: the lines of the text file being processed have this pattern:</p>\n\n<pre><code>lines (ignored)\n&lt;META&gt;\nmeta data lines (processed)\n&lt;/META&gt;\nlines (ignored)\n&lt;DATA&gt;\ndata lines (processed)\n&lt;/DATA&gt;\noptional lines (ignored)\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 5, "last_activity_date": 1547232551, "creation_date": 1547232551, "answer_id": 54152361, "question_id": 54152297, "link": "https://stackoverflow.com/questions/54152297/proper-use-of-ipcrun-in-perl/54152361#54152361", "title": "Proper Use of IPC::Run in Perl", "body": "<p>You are passing the filename as the <code>STDIN</code> to <code>cat</code>, and since you didn't pass it any arguments, it is repeating that to the output; that's how <code>cat</code> works. Instead pass the filename as an argument:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse IPC::Run qw(run timeout);\n\nmy @cat = ('cat', __FILE__);\nrun \\@cat, \\undef, \\my $out, \\my $err, timeout( 10 ) or die \"cat: $?\";\n</code></pre>\n"}], "owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 1, "accepted_answer_id": 54152361, "answer_count": 1, "score": 0, "last_activity_date": 1547232551, "creation_date": 1547232180, "question_id": 54152297, "link": "https://stackoverflow.com/questions/54152297/proper-use-of-ipcrun-in-perl", "title": "Proper Use of IPC::Run in Perl", "body": "<p>I'm trying to run IPC::Run as described in <a href=\"https://metacpan.org/pod/IPC::Run\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/IPC::Run</a></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings FATAL =&gt; 'all';\nuse feature 'say';\nuse autodie qw(:all);\nuse IPC::Run qw(run timeout);\n\nmy ($out, $err);\n## First,a command to run:\nmy @cat = qw( cat );\n\n## Using run() instead of system():\nmy $in = __FILE__;\nrun \\@cat, \\$in, \\$out, \\$err, timeout( 10 ) or die \"cat: $?\";\nsay \"\\$out = $out\";\nsay \"\\$err = $err\";\nsay \"\\$in  = $in\";\n</code></pre>\n\n<p>However, the output is not correct:</p>\n\n<pre><code>con@con-VirtualBox:~/Scripts$ perl ipc_run.pl\n$out = ipc_run.pl\n$err = \n$in  = ipc_run.pl\n</code></pre>\n\n<p><code>$out</code> is just the file name, when it should be the contents of the file.  This should be doing <code>cat ipc_run.pl</code> on the command line</p>\n\n<p>How can I get <code>$out</code> to display the output as it should?</p>\n"}, {"tags": ["windows", "perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547245262, "post_id": 54151180, "comment_id": 95140570, "body": "Do you maybe want to launch an Explorer process? Then it&#39;s much easier to launch it via <code>system &#39;explorer.exe&#39;;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 1, "last_activity_date": 1547228504, "creation_date": 1547228504, "answer_id": 54151555, "question_id": 54151180, "link": "https://stackoverflow.com/questions/54151180/send-key-win-e/54151555#54151555", "title": "Send key win + E", "body": "<p>The easiest way to start explorer is to just start explorer:</p>\n\n<pre><code>system 'explorer.exe';\n</code></pre>\n\n<p>But if you really want to use Win32::GuiTest, here's something that works:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Win32::GuiTest qw(SendKeys SendRawKey :VK);\n\nSendRawKey VK_LWIN, 0;\nSendKeys 'e';\nSendRawKey VK_LWIN, KEYEVENTF_KEYUP;\n</code></pre>\n\n<p>The issue is that <code>SendKeys</code> emits keydown/keyup events for every single character. We need separate keydown and keyup events for the <kbd>Win</kbd> key, surrounding the inner <kbd>E</kbd></p>\n"}], "owner": {"reputation": 366, "user_id": 8569128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2cde21e40e767064c4e4e0b61f1b8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Imylor", "link": "https://stackoverflow.com/users/8569128/imylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 54151555, "answer_count": 1, "score": 1, "last_activity_date": 1547228527, "creation_date": 1547226874, "last_edit_date": 1547228527, "question_id": 54151180, "link": "https://stackoverflow.com/questions/54151180/send-key-win-e", "title": "Send key win + E", "body": "<p>I tried to do a shortcut from cmd (perl windows)\nThis work partially but not open the windows explorer.</p>\n\n<pre><code> use Win32::GuiTest;\n Win32::GuiTest::SendKeys(\"{LWI}E\");\n</code></pre>\n\n<p>This open the windows star menu then write E\nI want to open directly the windows explorer, I tried so many commands but nothing works. Can you give some advice?</p>\n"}, {"tags": ["perl", "mojo-dom"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 9492208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b99777970f84acc00d28a75d37ef6416?s=128&d=identicon&r=PG&f=1", "display_name": "Denis_HR", "link": "https://stackoverflow.com/users/9492208/denis-hr"}, "edited": false, "score": 0, "creation_date": 1547227024, "post_id": 54151054, "comment_id": 95133505, "body": "Thanks! This produces exactly the results I need. It would have taken me a couple of days more to delve deeper into Mojo and css to get a kind of half-baked solution which would not be nearly as usable and elegant :)"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1547231802, "post_id": 54151054, "comment_id": 95135444, "body": "Here&#39;s another way you could write it, making full use of Mojo chaining: <code>$dom-&gt;at(&#39;#PPClass_Contents&#39;)-&gt;find(&#39;dd&#39;)-&gt;map(sub { $_-&gt;find(&#39;span&#39;)-&gt;map(&#39;text&#39;)-&gt;join(&#39;|&#39;) })-&gt;tap(sub { unshift @$_, $celex })-&gt;join(&quot;\\t&quot;)-&gt;say;</code> Of course Mojo::DOM and Mojo::Collection are designed so you can use them as regular Perl data at whatever point makes sense."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1547233055, "post_id": 54151054, "comment_id": 95135935, "body": "@Grinnz I know this works, but I have to say it doesn&#39;t feel very readable to me."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1547233102, "post_id": 54151054, "comment_id": 95135969, "body": "I wouldn&#39;t write it that way either, I was just showing the other extreme. I would likely use somewhere in between, with more line breaks."}, {"owner": {"reputation": 45, "user_id": 9492208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b99777970f84acc00d28a75d37ef6416?s=128&d=identicon&r=PG&f=1", "display_name": "Denis_HR", "link": "https://stackoverflow.com/users/9492208/denis-hr"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1547234103, "post_id": 54151054, "comment_id": 95136370, "body": "@Grinnz, I tested your solution, and it also works. However, I agree with simbabque, it is not exactly &quot;transparent&quot; or obvious. :) BTW, how would your solution be redirected to a file?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 45, "user_id": 9492208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b99777970f84acc00d28a75d37ef6416?s=128&d=identicon&r=PG&f=1", "display_name": "Denis_HR", "link": "https://stackoverflow.com/users/9492208/denis-hr"}, "edited": false, "score": 0, "creation_date": 1547234174, "post_id": 54151054, "comment_id": 95136400, "body": "@Denis_HR if you remove the final <code>-&gt;say</code>, the return value is just a string. You can print that wherever you want, or <code>-&gt;say</code> also takes an optional filehandle to print to. (The <code>say</code> method is from Mojo::ByteStream FWIW)"}, {"owner": {"reputation": 45, "user_id": 9492208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b99777970f84acc00d28a75d37ef6416?s=128&d=identicon&r=PG&f=1", "display_name": "Denis_HR", "link": "https://stackoverflow.com/users/9492208/denis-hr"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1547234929, "post_id": 54151054, "comment_id": 95136727, "body": "@Grinnz, thanks for the help :) Actually, your solution produces even slightly better result, since it does not add an extraneous &quot;TAB&quot; character at the end of line :) So, the working script using your solution could be something like this:  <code>my $ua = Mojo::UserAgent-&gt;new; my $dom = $ua-&gt;get(&quot;https:&#47;&#47;eur-lex.europa.eu&#47;legal-content&#47;$lang&#47;ALL&#47;&zwnj;&#8203;?uri=CELEX:$celex&quot;)-&zwnj;&#8203;&gt;res-&gt;dom;  my $line = $dom-&gt;at(&#39;#PPClass_Contents&#39;)-&gt;find(&#39;dd&#39;)-&gt;map(sub { $_-&gt;find(&#39;span&#39;)-&gt;map(&#39;text&#39;)-&gt;join(&#39;|&#39;) })-&gt;tap(sub { unshift @$_, $celex })-&gt;join(&quot;\\t&quot;);  print NEW &quot;$line\\n&quot;; </code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1547235980, "post_id": 54151054, "comment_id": 95137158, "body": "Sounds like there is an empty element in the data that gets processed with mine."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1547226380, "creation_date": 1547226380, "answer_id": 54151054, "question_id": 54150431, "link": "https://stackoverflow.com/questions/54150431/targeting-individual-elements-in-html-using-perl-and-mojodom-in-well-formated/54151054#54151054", "title": "Targeting individual elements in HTML using Perl and Mojo::DOM in well-formated HTML", "body": "<p>You are on the right track. First, you need to understand the HTML inside your <code>#PPClass_Contents</code>. Each set of things is in a definition list. Since you only care about the definition texts, you can search directly for the <code>&lt;dd&gt;</code> elements.</p>\n\n<pre><code>$dom-&gt;at('#PPClass_Contents')-&gt;find('dd')\n</code></pre>\n\n<p>This will give you a <a href=\"https://metacpan.org/pod/Mojo::Collection\" rel=\"nofollow noreferrer\">Mojo::Collection</a>, which you can iterate with <a href=\"https://metacpan.org/pod/Mojo::Collection#each\" rel=\"nofollow noreferrer\"><code>-&gt;each</code></a>. We pass that an anonymous function, pretty much like a callback.</p>\n\n<pre><code>$dom-&gt;at('#PPClass_Contents')-&gt;find('dd')-&gt;each(sub {\n    $_; # this is the current element\n});\n</code></pre>\n\n<p>Each element will be passed to that sub, and can be referenced using the topic variable <code>$_</code>. There is an <code>&lt;ul&gt;</code> inside, and each <code>&lt;li&gt;</code> contains a <code>&lt;span&gt;</code> element with the text you want. So let's find those.</p>\n\n<pre><code>$_-&gt;find('span')\n</code></pre>\n\n<p>We can directly build the column in your output at this stage. Let's use the other form of <code>-&gt;each</code>, which turns the Mojo::Collection returned from <code>-&gt;find</code> into a normal Perl list. We can then use a regular <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\"><code>map</code> operation</a> to grab each <code>&lt;span&gt;</code>'s text node and <a href=\"http://perldoc.perl.org/functions/join.html\" rel=\"nofollow noreferrer\"><code>join</code></a> that into a string.</p>\n\n<pre><code> join '|', map { $_-&gt;text } $_-&gt;find('span')-&gt;each\n</code></pre>\n\n<p>To tie all that together, we declare an array outside this construct, and stick the <code>$celex</code> number in it as the first column.</p>\n\n<pre><code>my @columns = ($celex);\n$dom-&gt;at('#PPClass_Contents')-&gt;find('dd')-&gt;each(sub {\n    push @columns, join '|', map { $_-&gt;text } $_-&gt;find('span')-&gt;each;\n});\n</code></pre>\n\n<p>Producing the final tab-separated output is now trivial.</p>\n\n<pre><code>print join \"\\t\", @columns;\n</code></pre>\n\n<hr>\n\n<p>I've done this with <code>EN</code> as the language and the <code>$celex</code> number <em>32006L0121</em>, which the search used in its example tooltip. The result is this:</p>\n\n<blockquote>\n  <p>32006L0121    marketing standard|chemical product|approximation of laws|dangerous substance|scientific report|packaging|European Chemicals Agency|labelling   Internal market - Principles|Approximation of laws|Technical barriers|Environment|Consumer protection   Industrial policy and internal market|Internal market: approximation of laws|Dangerous substances</p>\n</blockquote>\n"}], "owner": {"reputation": 45, "user_id": 9492208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b99777970f84acc00d28a75d37ef6416?s=128&d=identicon&r=PG&f=1", "display_name": "Denis_HR", "link": "https://stackoverflow.com/users/9492208/denis-hr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 54151054, "answer_count": 1, "score": 1, "last_activity_date": 1547226557, "creation_date": 1547223938, "last_edit_date": 1547226557, "question_id": 54150431, "link": "https://stackoverflow.com/questions/54150431/targeting-individual-elements-in-html-using-perl-and-mojodom-in-well-formated", "title": "Targeting individual elements in HTML using Perl and Mojo::DOM in well-formated HTML", "body": "<p>Relative begginer with Perl, with my first question here, trying the following:</p>\n\n<p>I am trying to retrieve certain information from a large online dataset (Eur-Lex), where each HTML document is well-formed HTML, with constant elements. Each HTML file is identified by its Celex number, which is supplied as the argument to the script (see my Perl code below).\nThe HTML data looks like this (showing only the part I'm interested in):</p>\n\n<pre><code>&lt;!-- \n &lt;blahblah&gt;\n&lt; lots of stuff here, before the interesting part&gt;\n--&gt; \n\n      &lt;div id=\"PPClass_Contents\" class=\"panel-collapse collapse in\" role=\"tabpanel\"\n           aria-labelledby=\"PP_Class\"&gt;\n         &lt;div class=\"panel-body\"&gt;\n            &lt;dl class=\"NMetadata\"&gt;\n               &lt;dt xmlns=\"http://www.w3.org/1999/xhtml\"&gt;EUROVOC descriptor: &lt;/dt&gt;\n               &lt;dd xmlns=\"http://www.w3.org/1999/xhtml\"&gt;\n                  &lt;ul&gt;\n                     &lt;li&gt;\n                        &lt;a href=\"./../../../search.html?type=advanced&amp;amp;DTS_DOM=ALL&amp;amp;DTS_SUBDOM=ALL_ALL&amp;amp;SUBDOM_INIT=ALL_ALL&amp;amp;DC_CODED=341&amp;amp;lang=en\"&gt;\n                           &lt;span lang=\"en\"&gt;descriptor_1&lt;/span&gt;\n                        &lt;/a&gt;\n                     &lt;/li&gt;\n                     &lt;li&gt;\n                        &lt;a href=\"./../../../search.html?type=advanced&amp;amp;DTS_DOM=ALL&amp;amp;DTS_SUBDOM=ALL_ALL&amp;amp;SUBDOM_INIT=ALL_ALL&amp;amp;DC_CODED=5158&amp;amp;lang=en\"&gt;\n                           &lt;span lang=\"en\"&gt;descriptor_2&lt;/span&gt;\n                        &lt;/a&gt;\n                     &lt;/li&gt;\n                     &lt;li&gt;\n                        &lt;a href=\"./../../../search.html?type=advanced&amp;amp;DTS_DOM=ALL&amp;amp;DTS_SUBDOM=ALL_ALL&amp;amp;SUBDOM_INIT=ALL_ALL&amp;amp;DC_CODED=7983&amp;amp;lang=en\"&gt;\n                           &lt;span lang=\"en\"&gt;descriptor_3&lt;/span&gt;\n                        &lt;/a&gt;\n                     &lt;/li&gt;\n                     &lt;li&gt;\n                        &lt;a href=\"./../../../search.html?type=advanced&amp;amp;DTS_DOM=ALL&amp;amp;DTS_SUBDOM=ALL_ALL&amp;amp;SUBDOM_INIT=ALL_ALL&amp;amp;DC_CODED=933&amp;amp;lang=en\"&gt;\n                           &lt;span lang=\"en\"&gt;descriptor_4&lt;/span&gt;\n                        &lt;/a&gt;\n                     &lt;/li&gt;\n                  &lt;/ul&gt;\n               &lt;/dd&gt;\n               &lt;dt xmlns=\"http://www.w3.org/1999/xhtml\"&gt;Subject matter: &lt;/dt&gt;\n               &lt;dd xmlns=\"http://www.w3.org/1999/xhtml\"&gt;\n                  &lt;ul&gt;\n                     &lt;li&gt;\n                        &lt;a href=\"./../../../search.html?type=advanced&amp;amp;DTS_DOM=ALL&amp;amp;DTS_SUBDOM=ALL_ALL&amp;amp;SUBDOM_INIT=ALL_ALL&amp;amp;CT_CODED=BUDG&amp;amp;lang=en\"&gt;\n                           &lt;span lang=\"en\"&gt;Subject_1&lt;/span&gt;\n                        &lt;/a&gt;\n                     &lt;/li&gt;\n                  &lt;/ul&gt;\n               &lt;/dd&gt;\n               &lt;dt xmlns=\"http://www.w3.org/1999/xhtml\"&gt;Directory code: &lt;/dt&gt;\n               &lt;dd xmlns=\"http://www.w3.org/1999/xhtml\"&gt;\n                  &lt;ul&gt;\n                     &lt;li&gt;01.60.20.00 &lt;a href=\"./../../../search.html?type=advanced&amp;amp;DTS_DOM=ALL&amp;amp;DTS_SUBDOM=ALL_ALL&amp;amp;SUBDOM_INIT=ALL_ALL&amp;amp;CC_1_CODED=01&amp;amp;lang=en\"&gt;\n                           &lt;span lang=\"en\"&gt;Designation_level_1&lt;/span&gt;\n                        &lt;/a&gt; / &lt;a href=\"./../../../search.html?type=advanced&amp;amp;DTS_DOM=ALL&amp;amp;DTS_SUBDOM=ALL_ALL&amp;amp;SUBDOM_INIT=ALL_ALL&amp;amp;CC_2_CODED=0160&amp;amp;lang=en\"&gt;\n                           &lt;span lang=\"en\"&gt;Designation_level_2&lt;/span&gt;\n                        &lt;/a&gt; / &lt;a href=\"./../../../search.html?type=advanced&amp;amp;DTS_DOM=ALL&amp;amp;DTS_SUBDOM=ALL_ALL&amp;amp;SUBDOM_INIT=ALL_ALL&amp;amp;CC_3_CODED=016020&amp;amp;lang=en\"&gt;\n                           &lt;span lang=\"en\"&gt;Designation_level_3&lt;/span&gt;\n                        &lt;/a&gt;\n                     &lt;/li&gt;\n                  &lt;/ul&gt;\n               &lt;/dd&gt;\n            &lt;/dl&gt;\n         &lt;/div&gt;\n      &lt;/div&gt;\n   &lt;/div&gt;\n\n&lt;!-- \n&lt;still more stuff here&gt;\n--&gt; \n</code></pre>\n\n<p>I am interested in the info contained in \"PPClass_Contents\" div id, which consists of 3 elements:</p>\n\n<pre>\n\n    - EUROVOC descriptor:\n    - Subject matter:\n    - Directory code:\n\n</pre>\n\n<p>Based on the above HTML, I would like to get the children of those 3 main elements, using Perl and Mojo, getting the result similar to this (single line text file, 3 groups separated by tabs, multiple child elements within a grup are separated by pipe characters, something like this:</p>\n\n<pre>\n\n    CELEX_No \"TAB\" descriptor_1|descriptor_2|descriptor_3|descriptor_4|..|descriptor_n \"TAB\" Subject_1|..|Subject_n \"TAB\" Designation_level_1|Designation_level_2|Designation_level_3|..|Designation_level_n\n\n</pre>\n\n<p>\"descriptors\", \"Subjects\" and \"Designation_levels\" elements (children of those 3 main groups) can be from 1 to \"n\", the number is not fixed, and is not known in advance.</p>\n\n<p>I have the following code, which does print out the plain text of the interesting part, but I need to address the individual elements and print them out in a new file as described above:</p>\n\n<pre>\n\n    #!/usr/bin/perl\n    # returns \"Classification\" descriptors for given CELEX and Language\n\n    use strict;\n    use warnings;\n\n    use Mojo::UserAgent;\n\n    if ($#ARGV ne \"1\") {\n        print \"Wrong number of arguments!\\n\";\n        print \"Syntax: clookup.pl Lang_ID celex_No.\\n\";\n        exit -1;\n    }\n\n    my $lang = $ARGV[0];   \n    my $celex = $ARGV[1];\n    my $lclang = lc $lang;\n\n    # fetch the eurlex page\n\n    my $ua = Mojo::UserAgent->new;\n    my $dom = $ua->get(\"https://eur-lex.europa.eu/legal-content/$lang/ALL/?uri=CELEX:$celex\")->res->dom;\n\n\n    ################ let's extract interesting parts:\n\n\n    my $text = $dom->at('#PPClass_Contents')->all_text;\n    print \"$text\\n\";\n\n</pre>\n\n<p>EDIT (added):\nYou can try my Perl script using two arguments:</p>\n\n<ul>\n<li><p>lang_code (\"DE\",\"EN\",\"IT\", etc.)</p></li>\n<li><p>Celex number (e.g.: E2014C0303, 52015BP2212, 52015BP0930(48), 52015BP0930(36), 52015BP0930(41), E2014C0302, E2014C0301, E2014C0271, E2014C0134).</p></li>\n</ul>\n\n<p>For example (if you name my script \"clookup.pl\"):\n<code>$ perl clookup.pl EN E2014C0303</code></p>\n\n<p>So, how can I address individual elements (of unknown number) as described above, using Mojo::DOM?</p>\n\n<p>Or, is there something simpler or faster (using Perl)?</p>\n"}, {"tags": ["perl", "sorting", "file-io"], "comments": [{"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 0, "creation_date": 1547216250, "post_id": 54148007, "comment_id": 95127560, "body": "It&#39;s best to start all perl scripts with <code>use autodie qw(:all)</code> as you don&#39;t have to keep writing &quot;or die: $!&quot; even time you open a filehandle."}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1547216529, "post_id": 54148007, "comment_id": 95127688, "body": "How big is the file?"}, {"owner": {"reputation": 35, "user_id": 10890263, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o1WZ5aounP0/AAAAAAAAAAI/AAAAAAAAAtQ/nB5YRja5GWE/photo.jpg?sz=128", "display_name": "Philip Ankrah", "link": "https://stackoverflow.com/users/10890263/philip-ankrah"}, "reply_to_user": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1547216674, "post_id": 54148007, "comment_id": 95127772, "body": "@Andrey just shy of 1kb"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1547218820, "post_id": 54148007, "comment_id": 95128979, "body": "In the first line of this code, you have an example of opening a file following all the current best practices (lexical filehandle, three-arg <code>open()</code>, checking the return value and <code>die()</code>ing if it fails). But when you come to the actual files you use, you go back to bareword filehandles and two-arg <code>open()</code> and you don&#39;t check the return value from <code>open()</code>. Why is that?"}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1547220367, "post_id": 54149344, "comment_id": 95129856, "body": "Trying to read beyond the end of an array does not kill the program."}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1547222513, "post_id": 54149344, "comment_id": 95131073, "body": "It seems to die on Windows. The script termintates with the error Perl Command Line Interpreter stopped working ... Which prevents the out file to be written."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1547223034, "post_id": 54149344, "comment_id": 95131385, "body": "I&#39;m afraid I know next to nothing about running Perl on Windows. But whatever is causing that, it&#39;s not from trying to read beyond the end of the array."}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1547223277, "post_id": 54149344, "comment_id": 95131533, "body": "Maybe not, however $curKnt--; does fix it."}], "tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": 1, "last_activity_date": 1547223615, "last_edit_date": 1547223615, "creation_date": 1547220051, "answer_id": 54149344, "question_id": 54148007, "link": "https://stackoverflow.com/questions/54148007/sort-contents-of-input-file-and-writing-output-file/54149344#54149344", "title": "Sort contents of input file and writing output file", "body": "<p>The reason why your code does not work is because yare trying to read the value of array that is out of range. The script dies at that point.\nTo fix it add line $curKnt--;</p>\n\n<pre><code>my $curKnt = scalar @curOrd;\n$curKnt--;\n</code></pre>\n\n<p>Another issue with your script, it opens and closes $infile 30+ times, which is not a good idea. I think you should rewrite your code to read $infile once into array or hash and then process that array or hash. I would write it this way:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @curOrd = qw( USD AUD BRL GBP CAD CNY DKK HKD INR IDR ILS JPY MXN NOK PHP PLN SGD SKK ZAR KRW SEK CHF TWD THB EUR MYR NZD SAR TRY RUB CZK AED CLP EGP MAD NGN OMR QAR );\n\nmy %data;\nmy $infile  = 'file2.txt';\nmy $outfile = 'file1.txt';\n\nopen (my $in, \"&lt;\", $infile) || die \"can't open $infile file\"; \nwhile (my $line = &lt;$in&gt;) {\n    push(@{$data{(split ',', $line)[2]}}, $line);\n}\nclose $in;\n\nopen (my $out, \"&gt;\", $outfile) || die \"can't open $outfile file\"; \nforeach my $curr (@curOrd) {\n    foreach my $line (@{$data{$curr}}) {\n        print $out $line;\n    }\n}\nclose $out;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 10890263, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o1WZ5aounP0/AAAAAAAAAAI/AAAAAAAAAtQ/nB5YRja5GWE/photo.jpg?sz=128", "display_name": "Philip Ankrah", "link": "https://stackoverflow.com/users/10890263/philip-ankrah"}, "edited": false, "score": 0, "creation_date": 1547222585, "post_id": 54149370, "comment_id": 95131127, "body": "Ok so first of all, thanks for such a detailed explanation and revision. This solves the problem of the file not writing correctly, however, the output file has no information in it"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 35, "user_id": 10890263, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o1WZ5aounP0/AAAAAAAAAAI/AAAAAAAAAtQ/nB5YRja5GWE/photo.jpg?sz=128", "display_name": "Philip Ankrah", "link": "https://stackoverflow.com/users/10890263/philip-ankrah"}, "edited": false, "score": 0, "creation_date": 1547223963, "post_id": 54149370, "comment_id": 95131900, "body": "@PhilipAnkrah: Which version are you using? They both work fine for me, given your input data."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1547221126, "last_edit_date": 1547221126, "creation_date": 1547220144, "answer_id": 54149370, "question_id": 54148007, "link": "https://stackoverflow.com/questions/54148007/sort-contents-of-input-file-and-writing-output-file/54149370#54149370", "title": "Sort contents of input file and writing output file", "body": "<p>This works as expected when I test it. I can only suggest that there are some local problems that prevent you from either opening and writing to the output file. You'd see what that problem is if you checked the return value from <code>open()</code> and took appropriate action.</p>\n\n<p>I've taken the liberty of tightening up some of your code:</p>\n\n<pre><code>my @curOrd = qw( USD AUD BRL GBP CAD CNY DKK HKD INR IDR ILS JPY MXN NOK\n                 PHP PLN SGD SKK ZAR KRW SEK CHF TWD THB EUR MYR NZD SAR\n                 TRY RUB CZK AED CLP EGP MAD NGN OMR QAR );\n\nmy $outfile = 'file1.txt';\nmy $infile = 'file2.txt';\nopen (my $out_fh, '&gt;', $outfile)\n  or die \"Cannot open $outfile: $!\";\n\n# Iterating over the values in a list is usually\n# better than iterating over the indexes.\nforeach my $cur (@curOrd) {\n  open ($in_fh, '&lt;', $infile)\n    or die \"Cannot open $infile: $!\";\n\n  while(&lt;$in_fh&gt;) {\n    my @x = split(/,/);\n    print \"x2 = $x[2]\\n\";\n    print \"cur_ord = $cur\\n\";\n\n    if ($x[2] eq $cur)  {\n      print $out_fh $_;\n    }\n  }  # end of while\n\n  close ($in_fh);\n}  # end of foreach\n\nclose ($out_fh);\n</code></pre>\n\n<p><strong>Update:</strong> Opening and closing your input file so many times is very inefficient. This version opens it once, splits the data into a two-dimensional array and then sorts that.</p>\n\n<pre><code>my @curOrd = qw( USD AUD BRL GBP CAD CNY DKK HKD INR IDR ILS JPY MXN NOK\n                 PHP PLN SGD SKK ZAR KRW SEK CHF TWD THB EUR MYR NZD SAR \n                 TRY RUB CZK AED CLP EGP MAD NGN OMR QAR );\n\n# Build a look-up table mapping currencies to their\n# sort position\nmy $i = 0;\nmy %cur_lookup = map { $_ =&gt; $i++ } @curOrd;\n\nmy $outfile = 'file1.txt';\nmy $infile = 'file2.txt';\nopen (my $out_fh, '&gt;', $outfile)\n  or die \"Cannot open $outfile: $!\";\n\nopen(my $in_fh, '&lt;', $infile)\n  or die \"Cannot open $infile: $!\";\n\nmy @in_data = map { [ split /,/ ] } &lt;$in_fh&gt;;\n\nprint $out_fh\n  map { join ',', @$_ }\n  sort { $cur_lookup{$a-&gt;[2]} &lt;=&gt; $cur_lookup{$b-&gt;[2]} } @in_data;\n\nclose ($in_fh);\nclose ($out_fh);\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 10890263, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o1WZ5aounP0/AAAAAAAAAAI/AAAAAAAAAtQ/nB5YRja5GWE/photo.jpg?sz=128", "display_name": "Philip Ankrah", "link": "https://stackoverflow.com/users/10890263/philip-ankrah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1547223615, "creation_date": 1547215258, "last_edit_date": 1547221975, "question_id": 54148007, "link": "https://stackoverflow.com/questions/54148007/sort-contents-of-input-file-and-writing-output-file", "title": "Sort contents of input file and writing output file", "body": "<p>I want to sort the contents of a text file and save it as another text file (or overwrite the previous one). I'm not particularly good with perl so I can't seem to figure out why this code snippet does not work.</p>\n\n<pre><code>open(my $file, '&gt;', $filename) or die $!;\nprint $file $string;\n\nmy @curOrd = qw( USD AUD BRL GBP CAD CNY DKK HKD INR IDR ILS JPY MXN NOK \nPHP PLN SGD SKK ZAR KRW SEK CHF TWD THB EUR MYR NZD SAR TRY RUB CZK AED CLP \nEGP MAD NGN OMR QAR );\n\nmy $curKnt = scalar @curOrd;\nmy $outfile = 'file1.txt';\nmy $infile = 'file2.txt';\nopen (OUTFILE, \"&gt;$outfile\");\n\n   foreach my $i (0..$curKnt) {\n   open (INFILE, $infile);\n   while(&lt;INFILE&gt;)\n   {\n        my @x= split(',', $_);\n        print \"x2 = $x[2]\\n\";\n        print \"cur_ord = $curOrd[$i]\\n\";\n        if ($x[2] eq $curOrd[$i])  {\n           print OUTFILE \"$_\";\n        }\n       @x=();\n   }  # end of while\n\n   close (INFILE);   \n\n}  # end of foreach\n\nclose (OUTFILE);\n</code></pre>\n\n<p>The code is supposed to sort each row while keeping the same format. When I run it, however, I get no errors but the output file is nowhere to be found.</p>\n\n<p>inputfile:</p>\n\n<pre><code>20181231,USD,AED,3.6736\n20181231,USD,AUD,1.4179\n20181231,USD,BRL,3.8817\n20181231,USD,CAD,1.3632\n20181231,USD,CHF,0.9842\n20181231,USD,CLP,694.7432\n20181231,USD,CNY,6.8787\n20181231,USD,CZK,22.4985\n20181231,USD,DKK,6.5252\n20181231,USD,EGP,17.9426\n20181231,USD,EUR,0.8738\n20181231,USD,GBP,0.7853\n20181231,USD,HKD,7.8322\n20181231,USD,IDR,14483.0392\n20181231,USD,ILS,3.7554\n20181231,USD,INR,69.5662\n20181231,USD,JPY,110.0258\n20181231,USD,KRW,1114.7559\n20181231,USD,MAD,9.6044\n20181231,USD,MXN,19.6584\n20181231,USD,MYR,4.1383\n20181231,USD,NGN,365.4984\n20181231,USD,NOK,8.6848\n20181231,USD,NZD,1.4902\n20181231,USD,OMR,0.3858\n20181231,USD,PHP,52.5907\n20181231,USD,PLN,3.7581\n20181231,USD,QAR,3.6734\n20181231,USD,RUB,69.5418\n20181231,USD,SAR,3.7533\n20181231,USD,SEK,8.9336\n20181231,USD,SGD,1.3637\n20181231,USD,SKK,26.3251\n20181231,USD,THB,32.4579\n20181231,USD,TRY,5.2938\n20181231,USD,TWD,30.6034\n20181231,USD,USD,1.0000\n20181231,USD,ZAR,14.4104\n</code></pre>\n\n<p>Outputfile:</p>\n\n<pre><code>20181231,USD,USD,1.0000\n20181231,USD,AUD,1.4220\n20181231,USD,BRL,3.8828\n20181231,USD,GBP,0.7880\n20181231,USD,CAD,1.3643\n20181231,USD,CNY,6.8782\n20181231,USD,DKK,6.5295\n20181231,USD,HKD,7.8316\n20181231,USD,INR,69.7304\n20181231,USD,IDR,14565.1115\n20181231,USD,ILS,3.7693\n20181231,USD,JPY,110.3364\n20181231,USD,MXN,19.6687\n20181231,USD,NOK,8.7288\n20181231,USD,PHP,52.7242\n20181231,USD,PLN,3.7660\n20181231,USD,SGD,1.3674\n20181231,USD,SKK,26.3387\n20181231,USD,ZAR,14.4448\n20181231,USD,KRW,1117.0950\n20181231,USD,SEK,8.9869\n20181231,USD,CHF,0.9846\n20181231,USD,TWD,30.6213\n20181231,USD,THB,32.6870\n20181231,USD,EUR,0.8743\n20181231,USD,MYR,4.1555\n20181231,USD,NZD,1.4927\n20181231,USD,SAR,3.7565\n20181231,USD,TRY,5.2892\n20181231,USD,RUB,69.4108\n20181231,USD,CZK,22.5409\n20181231,USD,AED,3.6728\n20181231,USD,CLP,694.7031\n20181231,USD,EGP,17.9262\n20181231,USD,MAD,9.5636\n20181231,USD,NGN,365.4074\n20181231,USD,OMR,0.3860\n20181231,USD,QAR,3.6423\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 59167, "user_id": 134713, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5143bb3f979be36f8508d2605b215a4d?s=128&d=identicon&r=PG", "display_name": "Vijay", "link": "https://stackoverflow.com/users/134713/vijay"}, "is_accepted": true, "score": 0, "last_activity_date": 1547204851, "creation_date": 1547204851, "answer_id": 54145307, "question_id": 54144992, "link": "https://stackoverflow.com/questions/54144992/access-repeated-value-in-a-string-using-perl/54145307#54145307", "title": "Access repeated value in a string using perl", "body": "<p>use this cli:</p>\n\n<pre><code> perl -lne 'push @a,/=(.*?)\\;/g;END{print \"@a\"}' your_file\n</code></pre>\n\n<p>Test below:</p>\n\n<pre><code>$ cat temp\nC_SAS=1;word=0.01;ExAC_EAS=0;ExAC_FIN=1;ExAC_NFE=0;word=0.0136;\n$ perl -lne 'push @a,/=(.*?)\\;/g;END{print \"@a\"}' temp\n1 0.01 0 1 0 0.0136\n$\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10424254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1beb02a0dbbd7dc9f7ab11fcfce7410?s=128&d=identicon&r=PG&f=1", "display_name": "dhasa", "link": "https://stackoverflow.com/users/10424254/dhasa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 54145307, "answer_count": 1, "score": 0, "last_activity_date": 1547204851, "creation_date": 1547203778, "question_id": 54144992, "link": "https://stackoverflow.com/questions/54144992/access-repeated-value-in-a-string-using-perl", "title": "Access repeated value in a string using perl", "body": "<p>I'm very beginner in Perl, and I faced the following issue,</p>\n\n<p>I have a text file, contains values of different string,e.g.\n<em>ExAC_SAS=1;<strong>word=0.01</strong>;ExAC_EAS=0;ExAC_FIN=1;ExAC_NFE=0;<strong>word=0.0136</strong>;</em></p>\n\n<p>And I want to add both values in an array.</p>\n\n<p>I have tried to loop through the files and added the values to an array, and it works well but it only add the first value not the second.</p>\n\n<pre><code>\n    while ($line=&lt;IN&gt;)\n    { chop $line; @result=();\n    @arr=split('\\t', $line);\n\n    if ($arr[7]=~/word=(.*?);/) {push (@result,$1);}\n</code></pre>\n\n<p>I want my array @result to have the following values:\n<code>1,0.01,0,1,0,0.136</code></p>\n\n<p>Thank you,</p>\n"}, {"tags": ["python", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547185591, "post_id": 54140487, "comment_id": 95113125, "body": "So what is &quot;motif&quot; ?  A three-letter pattern?  Why is it &quot;RRK&quot; in one example but then HHK in the other, overlapping with HKK in the next one and then RRR in the last one?  Can you please explain? (Or do you want only people who know this to respond?)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547185989, "post_id": 54140487, "comment_id": 95113231, "body": "Hang on ... any three-character combination out of [HKR]?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547186420, "post_id": 54140487, "comment_id": 95113372, "body": "How large can these files be?"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547187993, "post_id": 54140487, "comment_id": 95113871, "body": "@zdim It won&#39;t be only HKR or some other pattern it will differ, we have to look on the protein folding and protein properties. Protein sequence not like DNA sequence so the maximum size of the protein ~50K characters. But in the file we can keep n number of sequence, Fasta sequence header starts with <code>&gt;</code>"}, {"owner": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547188937, "post_id": 54140487, "comment_id": 95114178, "body": "@zdim\uff0cthe Regex pattern syntax could be used to search predefined pattern among any strings, this example is just protein sequences. The file size is about 40Mb, thank you!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1547189074, "post_id": 54140487, "comment_id": 95114225, "body": "@mkHun and <code>james</code>: Look, I am not a biologist. I am prepared to help out here but you aren&#39;t helping.  Can you please look at my first comment and tell me what &quot;motif&quot; means? Is it what I guessed in my second comment?"}, {"owner": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 0, "creation_date": 1547190288, "post_id": 54140487, "comment_id": 95114674, "body": "@ zdim, thank you very much! motif is some character position conserved strings, for example: P[A-Z]{2}P, the Ps in the 1st and last positon are conserved, while in the 2nd postion, the character can be any character among A~Z, here it can be doubled, so there is the 3rd postion which is the same as 2nd because of {2} parameter, means: AA, AC, ...YZ, any 2 character combinations there are OK."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547190608, "post_id": 54140487, "comment_id": 95114773, "body": "OK, that does explain what &quot;motif&quot; is, thank you.  So in this question it is specifically [HKR]{3}, correct?  (Meaning either of HHH, HHK, HKR, ... etc).  See my answer."}, {"owner": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547191310, "post_id": 54140487, "comment_id": 95115049, "body": "@zdim, Yes, you are right! For [KHR]{3}, it means, there are 3 postions, and the character at  3 postions are any character among K, H or R, so RRK  is correct, obviously, HHK, HHH,HKK ...if it has that of strings, are all correct."}, {"owner": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 0, "creation_date": 1547191439, "post_id": 54140487, "comment_id": 95115092, "body": "@ zdim, in fact, you can define the motif based on your research and the rules of Regex."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547191442, "post_id": 54140487, "comment_id": 95115099, "body": "Alright, good, that&#39;s what I figured.  So that is what you need in this question, specifically [KHR]{3}?  Then my answer should be fine."}, {"owner": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 0, "creation_date": 1547191595, "post_id": 54140487, "comment_id": 95115161, "body": "@ zdim, yes, In the question, I want to combine the two scripts or other script created to output the results I wanted, Thank you !"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547191764, "post_id": 54140487, "comment_id": 95115225, "body": "@james  I wrote code to produce the output you explained;  I didn&#39;t use (nor care for) those two scripts. It catches all you stated, overlapping motifs included."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547191997, "post_id": 54140487, "comment_id": 95115314, "body": "Note: the python code you show <i>cannot</i> catch overlapping motifs (like HHKK) since after the first match (HHK) their regex will have passed the needed position for the second match (it is <i>after</i> the first K so all it sees next is only one K). To get that one can use &quot;lookahead&quot; (or other more complex approaches), as in my answer."}, {"owner": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547192502, "post_id": 54140487, "comment_id": 95115522, "body": "@zdim, Yes, your considerations are right, if there are overlapping motifs, it is best to find them in a pool or collected form (like HHKK). Just as mkHun said, the pattern or motif in this case will differ, so I can change your code to match the motif I wanted besides of [KHR]{3} ?  Thank you very much !"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547192691, "post_id": 54140487, "comment_id": 95115591, "body": "@james  Yes, you can change that, at that one place where it&#39;s used.  I didn&#39;t extract it into a variable because: (1) I didn&#39;t know what &quot;motif&quot; was (2) After your explanation, I see that there may be fixed characters (&quot;conserved&quot; ones) in which case the regex may need a tweak."}, {"owner": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547285260, "post_id": 54140487, "comment_id": 95146676, "body": "@zdim, thank you for your explanation in detail $ patient."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1555143866, "post_id": 54140487, "comment_id": 98014325, "body": "I&#39;ve edited the title to be more precise, and to mention overlapping which is an important part of the problem here.  If you don&#39;t like it please by all means &quot;roll back&quot; :).  You can do that by clicking on &quot;edited ...&quot; below the middle of the question (above my username) and then you&#39;ll see the revisions, and &quot;roll back&quot; option on the previous one."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1547193293, "post_id": 54141728, "comment_id": 95115798, "body": "@james Added a detailed explanation of how the regex in the answer catches overlapping motifs.  (Note, there are yet other ways of course.)"}, {"owner": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 0, "creation_date": 1547196122, "post_id": 54141728, "comment_id": 95117008, "body": "@ zdim\uff0c It works very well and very fast ! I appreciate your great help \uff01"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 0, "creation_date": 1547196498, "post_id": 54141728, "comment_id": 95117164, "body": "@james  Great :)  Let me know if questions pop up"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 1, "creation_date": 1547198023, "post_id": 54141728, "comment_id": 95117917, "body": "@james Welcome :)  I just fixed numbers for an &quot;edge case&quot; (when there isn&#39;t enough characters in the string before the match, to print 10 for context -- it was off by 1)"}, {"owner": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 0, "creation_date": 1547210522, "post_id": 54141728, "comment_id": 95124627, "body": "Exellent ! If no matches found in sequence, for example, NP_123456.1 no matches found, would it give the result &gt;NP_123456.1 \\n no match found ? I have edited the post."}, {"owner": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 0, "creation_date": 1547212639, "post_id": 54141728, "comment_id": 95125631, "body": "please see the last comment and edited post. Many thanks!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 1, "creation_date": 1547230042, "post_id": 54141728, "comment_id": 95134812, "body": "@james If you wish that, add a flag (<code>my $cnt=0;</code>) at the beginning of the function, and increment it inside the <code>while</code> loop, so when there are matches.  After the <code>while</code> loop, check that variable and if it is still zero then there were no matches found and you can print that."}, {"owner": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 0, "creation_date": 1547285044, "post_id": 54141728, "comment_id": 95146650, "body": "I try it as you said, it is perfect !  Thank you very much!"}, {"owner": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 0, "creation_date": 1547556688, "post_id": 54141728, "comment_id": 95225090, "body": "when the pattern is like &#39;/([KHR])(?=([KHR]{2,}))/g&#39;, sometime it will return the correct pattern in the sequence, but wrong postion of the border, for example, &gt;NP_001002156.1  (150~152) glwntflleHHKKksipkdtwnl, it is actually 150~153. How to fix this bug ? Thank you very much !"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 1, "creation_date": 1547573474, "post_id": 54141728, "comment_id": 95234820, "body": "@james  That is now a variable motif length?  Then you&#39;d have to see how much you actually got in the second capture.  The <code>$pos+2</code> is there now since in the example in the question we always have two more chars (after the first one).  If that is not fixed then take the length: <code>$pos+length($2)</code>.  (Or, since that will be used more than once store it in a variable first.)"}, {"owner": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 0, "creation_date": 1547629833, "post_id": 54141728, "comment_id": 95252928, "body": "awsome !!!,  I changed the $pos+2 into $pos+length($2), and place $cnt as matchnumber, it is perfectly running ! Your perl code is a gate for me to learn perl, Thank you very much !!!"}, {"owner": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 0, "creation_date": 1555123021, "post_id": 54141728, "comment_id": 98011001, "body": "If one sequence of multifasta file has many defined motifs, I want the output is one line for later easy handling, for example, the fasta sequence NP_001002156.1 has 3 defined motifs, I want the 3 motifs and their ranges presented in one line as following: &gt;NP_001002156.1  (7~9) mktavRRKldllysrykd (148~150) glwntfllehHHKksipkdtwnl (149~151) lwntfllehhHKKsipkdtwnll. I have tried to edit your script to get that, but sadly I failed, Could you help me to figure it out ? Thanks!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 1, "creation_date": 1555139539, "post_id": 54141728, "comment_id": 98013461, "body": "@james  Editing ... once we are at it, a question: is it useful to have output lined up in some way -- for example, so that it&#39;s columnar? It doesn&#39;t seem to matter, since there can be many different positions/numbers of motifs, but if it does it&#39;s easy to add."}, {"owner": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 0, "creation_date": 1555140044, "post_id": 54141728, "comment_id": 98013567, "body": "I just want it lined up in a line and separated by space, because motif is just one factor I want to filtered, it is just enough for the pairs of motif region and motif seperated by space, Thank you for your kind reply !"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 1, "creation_date": 1555140639, "post_id": 54141728, "comment_id": 98013693, "body": "@james OK. Edited, please have a look.  I will now edit some more, to improve text/explanations; please let me know if something isn&#39;t right or can be improved."}, {"owner": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 0, "creation_date": 1555142496, "post_id": 54141728, "comment_id": 98014057, "body": "it gives me the result I wanted, It is awsome  !!!  One question is when the sequence do not have a motif, I want to add &quot;no match found&quot;, and one more stuff is to add a $cnt to count the number of the motif, for example, &quot;&gt;NP_001002156.1 matchnumber1(7~9) mktavdRRKldllysrykd matchnumber2(148~150) lglwntflleHHKksipkdtwnl matchnumber3(149~151) glwntfllehHKKsipkdtwnll&quot;, Could you help me ? Thank you vey much!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 0, "creation_date": 1555142585, "post_id": 54141728, "comment_id": 98014077, "body": "@james Sure ... literally <code>matchnumberX</code> ?  (It&#39;s a big phrase, I&#39;d rather use <code>numX</code> or even <code>nX</code> :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 0, "creation_date": 1555143254, "post_id": 54141728, "comment_id": 98014198, "body": "@james Added (and tested but of course please check)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 0, "creation_date": 1555143504, "post_id": 54141728, "comment_id": 98014252, "body": "@james For some reason I forgot to actually add it here (only tested in my code), sorry -- now it <b>is</b> added. And count report changed to <code>nX</code>"}, {"owner": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 0, "creation_date": 1555144184, "post_id": 54141728, "comment_id": 98014378, "body": "@yeah, it is great !, please add the  $cnt++ before the &quot;my $motif = $1 . $2;&quot; in the while loop, just as you suggested before. Now, It gives me the desired result !"}, {"owner": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "edited": false, "score": 0, "creation_date": 1555145406, "post_id": 54141728, "comment_id": 98014622, "body": "wow, when I am busy testing your code, you have write a detailed techinique article for the question. Thank you very much for helping us!!!"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1602371816, "last_edit_date": 1602371816, "creation_date": 1547189928, "answer_id": 54141728, "question_id": 54140487, "link": "https://stackoverflow.com/questions/54140487/find-all-patterns-in-a-multifasta-file-including-overlapping-motifs/54141728#54141728", "title": "Find all patterns in a multifasta file, including overlapping motifs", "body": "<p>The &quot;motif&quot; here is any three-long combination of [HKR] characters; motifs may overlap.</p>\n<p>The overlapping is resolved by using a &quot;lookahead&quot; in the regex.   See details below. Neither of quoted or shown resources seem to handle that and I don't see how they would catch overlapping motifs.</p>\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $file = shift || die &quot;Usage: $0 fasta-file\\n&quot;;    \nopen my $fh, '&lt;', $file or die &quot;Can't open $file: $!&quot;;\n\nmy ($seq, $seq_name);\nwhile (&lt;$fh&gt;) {\n    chomp;\n    if (/^&gt;(.*)/) {\n        # Process the previous assembled sequence\n        if ($seq) {\n            proc_seq($seq_name, $seq);\n            $seq = ''; \n        }\n        $seq_name = $1; \n        next;\n    }   \n    $seq .= $_; \n}\n# Process the last one    \nproc_seq($seq_name, $seq);\n\nsub proc_seq {\n    my ($seq_name, $seq, $multiline) = @_; \n\n    # Build output in the loop, as motifs are found. By default, print all\n    # output for one seq_name in one line. To print each motif on its own\n    # line instead, invoke this sub with a true third argument (1 will do).\n    my $output = &quot;&gt;$seq_name&quot;;\n\n    my $cnt = 0;\n    while ($seq =~ /([HKR])(?=([HKR]{2}))/g) { \n        ++$cnt;\n        my $motif = $1 . $2; \n        my $pos = pos($seq);\n        my $pre_context = ($pos &gt;= 11) \n            ? substr($seq, $pos-11, 10) \n            : substr($seq, 0,       $pos-1);\n        my $post_context = substr $seq, $pos+2, 10;\n\n        $output .= &quot; n$cnt($pos~&quot; . ($pos+2) . &quot;) &quot;;\n        $output .= &quot;\\n&quot;  if $multiline;\n        $output .= lc($pre_context) . $motif . lc($post_context);\n    } \n    say ($cnt &gt; 0  ? $output  : $output . ' no match found');\n}\n</code></pre>\n<p>Note on the regex: we need a <a href=\"https://perldoc.perl.org/perlretut.html#Looking-ahead-and-looking-behind\" rel=\"nofollow noreferrer\">lookahead</a> for the second and third character in order to be able to catch the overlapping motifs as well.</p>\n<p>An example. There is <code>HHKK</code> in the first sequence, with overlapping motifs <code>HHK</code> and <code>HKK</code>. If the regex matches <code>HHK</code> using <code>/[HKR]{3}/</code> then after that the position of the regex engine in the string is after the first <code>K</code>, as it &quot;consumed&quot; <code>HHK</code>.  So all it can see next is just one <code>K</code> and so there is no <code>[HKR]{3}</code> to match next, and it thus misses the next motif.</p>\n<p>So, instead, I match only one letter and do a &quot;lookahead&quot; for the next two. Then after matching <code>H</code> (and &quot;seeing&quot; that there is indeed <code>HK</code> following) only one letter is consumed and the engine got past only that first <code>H</code>, and it is positioned before the second <code>H</code> for the next match. Now it will be able to next match the <code>HKK</code>, in the same manner (and so it can keep matching even multiply overlapping motifs).</p>\n<p>This identifies everything indicated in the desired output (which has a typo); note the change in the requirements in the comment, to print all motifs for one sequence on one line. So it prints</p>\n<pre>\n>NP_001002156.1 n1(7~9) mktavdRRKldllysrykd n2(148~150) lglwntflleHHKksipkdtwnl n3(149~151) glwntfllehHKKsipkdtwnll\n>NP_957070.2 n1(163~165) schvydqkniRRRvydalnvlma\n>NP_bogus_with_no_motifs  no match found\n</pre>\n<p>with all motifs for the same sequence name on one line, as wanted. I've added a bogus line to input, with no motifs, to test the <code>no match found</code> addition; this drew the last line in the output above.</p>\n<hr />\n<p>There is still an option to print each motif on a separate line, as was originally wanted: invoke the <code>proc_seq</code> function with an additional, third, argument which is true, like</p>\n<pre><code>proc_seq($seq_name, $seq, 1)\n</code></pre>\n<p>and then it'll print</p>\n<pre>\n>NP_001002156.1 n1(7~9) \nmktavdRRKldllysrykd n2(148~150) \nlglwntflleHHKksipkdtwnl n3(149~151) \nglwntfllehHKKsipkdtwnll\n>NP_957070.2 n1(163~165) \nschvydqkniRRRvydalnvlma\n>NP_bogus_with_no_motifs  no match found\n</pre>\n"}], "owner": {"reputation": 81, "user_id": 10744519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d94293f513bf53230e02870d1c3e02d?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/10744519/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 2, "accepted_answer_id": 54141728, "answer_count": 1, "score": 1, "last_activity_date": 1602371816, "creation_date": 1547181928, "last_edit_date": 1555143775, "question_id": 54140487, "link": "https://stackoverflow.com/questions/54140487/find-all-patterns-in-a-multifasta-file-including-overlapping-motifs", "title": "Find all patterns in a multifasta file, including overlapping motifs", "body": "<p>I have a multifasta file, it looks like this: </p>\n\n<pre><code>&gt;NP_001002156.1\nMKTAVDRRKLDLLYSRYKDPQDENKIGVDGIQQFCDDLMLDPASVSVLIVAWKFRAATQCEFSRQEFLDG\nMTDLGCDSPEKLKSLLPRLEQELKDSGKFRDFYRFTFSFAKSPGQKCLDLEMAVAYWNLILSGRFKFLGL\nWNTFLLEHHKKSIPKDTWNLLLDFGNMIADDMSNYAEEGAWPVLIDDFVEFARPIVTAENLQTL\n&gt;NP_957070.2\nMAKDAGLKETNGEIKLFINQSPGKAAGVLQLLTVHPASITTVKQILPKTLTVTGAHVLPHMVVSTPQRPT\nIPVLLTSPHTPTAQTQQESSPWSSGHCRRADKSGKGLRHFSMKVCEKVQKKVVTSYNEVADELVQEFSSA\nDHSSISPNDAVSSCHVYDQKNIRRRVYDALNVLMAMNIISKDKKEIKWIGFPTNSAQECEDLKAERQRRQ\nERIKQKQSQLQELIVQQIAFKNLVQRNREVEQQSKRSPSANTIIQLPFIIINTSKKTIIDCSISNDKFEY\nLFNFDSMFEIHDDVEVLKRLGLALGLESGRCSAEQMKIATSLVSKALQPYVTEMAQGSVNQPMDFSHVAA\nERRASSSTSSRVETPTSLMEEDEEDEEEDYEEEDD\n&gt;NP_123456.1\nMALLLLLGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG\n...\n</code></pre>\n\n<p>Although there is a great python script to handle motif searches in a multifasta file (<a href=\"https://www.biostars.org/p/14305/\" rel=\"nofollow noreferrer\">https://www.biostars.org/p/14305/</a>), if pattern \"[KHR]{3}\" was used,\nit would return only motif list and many empty results:</p>\n\n<pre><code>&gt;NP_001002156.1\n:['RRK']\n&gt;NP_001002156.1\n:[]\n&gt;NP_001002156.1\n:['HHK']\n&gt;NP_957070.2\n:[]\n&gt;NP_957070.2\n:['RRR']\n...\n</code></pre>\n\n<p>and some motif (HKK) was leaked in the same sequence.</p>\n\n<p>Here I found another python script:</p>\n\n<pre><code>#coding:utf-8\nimport re\npattern = \"[KHR]{3}\"\nwith open('seq.fasta') as fh:\n    fh.readline() \n    seq = \"\"\n    for line in fh:\n         seq += line.strip() \nrgx = re.compile(pattern)\nresult = rgx.search(seq)\npatternfound = result.group()\nspan = result.span()\nleftpos = span[0]-10\nif leftpos &lt; 0:\n   leftpos = 0\nprint(seq[leftpos:span[0]].lower() + patternfound + seq[span[1]:span[1]+10].lower())\n</code></pre>\n\n<p>it returns the first matched motif found in a context (forward 10 amino acids after the matched motif, \nand backward 10 before the matched motif) for only one fasta (the 1st one) sequence, for the first fasta \nsequence NP_001002156.1 using the scirpt, the returned result: </p>\n\n<pre><code>mktavdRRKldllysrykd\n</code></pre>\n\n<p>but it has no file header\">NP_001002156.1\" and other 2 motifs in context were all ommitted:</p>\n\n<pre><code>glwntfllehHHKksipkdtwnl\nlwntfllehhHKKsipkdtwnll\n</code></pre>\n\n<p>Here, I want the desired script to return matched motif with its postition in a context of each fasta \nsequence in the multifasta file, and it would present the results as following:</p>\n\n<pre><code>&gt;NP_001002156.1_matchnumber_1_(7~9)\nmktavdrRRKldllysrykd\n&gt;NP_001002156.1_matchnumber_2_(148~150) \nglwntfllehHHKksipkdtwnl\n&gt;NP_001002156.1_matchnumber_3_(149~151)\nlwntfllehhHKKsipkdtwnll\n&gt;NP_957070.2_matchnumber_1_(163~165)\nchvydqknirRRRvydalnvlma\n&gt;NP_123456.1\nno match found\n</code></pre>\n\n<p>Note:\nThe positon of matched pattern is not the position of context.</p>\n\n<p>Anyone could help me? Thanks in advance.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1547191123, "post_id": 54139311, "comment_id": 95114972, "body": "Win32::Clipboard doesn&#39;t currently permit this, so you&#39;d have to reimplement it using Win32::API. There is a <a href=\"https://github.com/jandubois/win32-clipboard/pull/5\" rel=\"nofollow noreferrer\">pull request</a> that would add the ability to set arbitrary text"}], "answers": [{"comments": [{"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1547208700, "post_id": 54139946, "comment_id": 95123690, "body": "@ikegami: Thanks for the pointer about <code>Win32::GetACP()</code>! That&#39;s indeed way easier. I amended the answer."}, {"owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1547226179, "post_id": 54139946, "comment_id": 95133059, "body": "Thank you so much. Your method works for accented character, but it seems that it is not working for arbitrary unicode symbol. for example, try this <code>1\u2212x</code>"}], "tags": [], "owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "is_accepted": false, "score": 0, "last_activity_date": 1547208637, "last_edit_date": 1547208637, "creation_date": 1547176813, "answer_id": 54139946, "question_id": 54139311, "link": "https://stackoverflow.com/questions/54139311/is-there-an-easy-way-to-send-unicode-string-to-windows-clipboard-in-perl/54139946#54139946", "title": "Is there an easy way to send unicode string to windows clipboard in perl?", "body": "<p>With <code>Win32::Clipboard</code> you can only write <code>CF_TEXT</code>, i.e. encoded in the current code page, to the clipboard. <code>CF_UNICODETEXT</code> is not supported. But you can encode the string you want to write to the clipboard using the current code page.</p>\n\n<p>The code page can be obtained using <a href=\"https://metacpan.org/pod/Win32\" rel=\"nofollow noreferrer\"><code>Win32::GetACP()</code></a>. It needs <code>cp</code> to be prepended, so that <code>encode()</code> can use it.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse utf8;\n\nuse Encode qw(encode);\nuse Win32;\nuse Win32::Clipboard;\n\nmy $to_clip = 'Tsch\u00fc\u00df!';\n\nmy $cp = Win32::GetACP();\n\nmy $clip = Win32::Clipboard();\n\n$clip-&gt;Set(encode(\"cp$cp\", $to_clip));\n</code></pre>\n"}], "owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1547208637, "creation_date": 1547171279, "question_id": 54139311, "link": "https://stackoverflow.com/questions/54139311/is-there-an-easy-way-to-send-unicode-string-to-windows-clipboard-in-perl", "title": "Is there an easy way to send unicode string to windows clipboard in perl?", "body": "<p>Is there an easy way to send unicode string to windows clipboard in perl? I have tried Win32::Clipboard, but it seems doesn't work, \u00fc will become nonsense.</p>\n\n<pre><code>use Win32::Clipboard;\n\n$CLIP = Win32::Clipboard();\n$CLIP-&gt;Set('B\u00fcchner');\n\n$CLIP-&gt;WaitForChange();\nprint \"Clipboard has changed!\\n\";\n</code></pre>\n"}, {"tags": ["shell", "perl"], "comments": [{"owner": {"reputation": 6955, "user_id": 6136214, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0385d5a1c27a6707139e7dc7ad29b6d6?s=128&d=identicon&r=PG&f=1", "display_name": "agc", "link": "https://stackoverflow.com/users/6136214/agc"}, "edited": false, "score": 0, "creation_date": 1547157843, "post_id": 54136666, "comment_id": 95106639, "body": "Please include the desired output."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 1, "last_activity_date": 1547154232, "creation_date": 1547154232, "answer_id": 54136851, "question_id": 54136666, "link": "https://stackoverflow.com/questions/54136666/shell-command-to-collapse-tabular-data-to-make-a-non-redundant-column/54136851#54136851", "title": "Shell command to collapse tabular data to make a non-redundant column", "body": "<p>Perl anticipated problems like this and came up with concise solutions:</p>\n\n<pre><code>perl -ane 'print unless $seen{$F[1]}++' &lt; data.csv &gt; data.clean.csv\n</code></pre>\n\n<p>See <a href=\"http://metacpan.org/pod/perlrun\" rel=\"nofollow noreferrer\"><code>perlrun</code></a> for information about the <code>-a</code> and <code>-n</code> switches.</p>\n\n<p>With the helpful <code>B::Deparse</code> module, you can see how Perl expands the command-line switches into something that resembles your original script.</p>\n\n<pre><code>$ perl -MO=Deparse -ane 'print unless $seen{$F[1]}++' \nLINE: while (defined($_ = &lt;ARGV&gt;)) {\n    our(@F) = split(' ', $_, 0);\n    print $_ unless $seen{$F[1]}++;\n}\n-e syntax OK\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1547154249, "creation_date": 1547154249, "answer_id": 54136858, "question_id": 54136666, "link": "https://stackoverflow.com/questions/54136666/shell-command-to-collapse-tabular-data-to-make-a-non-redundant-column/54136858#54136858", "title": "Shell command to collapse tabular data to make a non-redundant column", "body": "<p>Need not be messy</p>\n\n<pre><code>perl -ne'print unless $exists{(split)[1]}++' dup_data.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6955, "user_id": 6136214, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0385d5a1c27a6707139e7dc7ad29b6d6?s=128&d=identicon&r=PG&f=1", "display_name": "agc", "link": "https://stackoverflow.com/users/6136214/agc"}, "edited": false, "score": 0, "creation_date": 1547158375, "post_id": 54137599, "comment_id": 95106825, "body": "Using <code>bash</code> to compare to the OP code:  <code>cmp &lt;(perl -e &#39;%seen = (); for (&lt;&gt;) { @v = split(&#47;\\s+&#47;); unless (exists($seen{$v[1]})) { $seen{$v[1]} = 1; print } }&#39; &lt; data.tsv) &lt;(uniq -f 1 data.tsv); echo $?</code>, which returns <code>0</code> (<i>i.e.</i> true, the outputs are the same)."}], "tags": [], "owner": {"reputation": 6955, "user_id": 6136214, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0385d5a1c27a6707139e7dc7ad29b6d6?s=128&d=identicon&r=PG&f=1", "display_name": "agc", "link": "https://stackoverflow.com/users/6136214/agc"}, "is_accepted": false, "score": 1, "last_activity_date": 1547187995, "last_edit_date": 1547187995, "creation_date": 1547158082, "answer_id": 54137599, "question_id": 54136666, "link": "https://stackoverflow.com/questions/54136666/shell-command-to-collapse-tabular-data-to-make-a-non-redundant-column/54137599#54137599", "title": "Shell command to collapse tabular data to make a non-redundant column", "body": "<p>Since <em>data.tsv</em> is already sorted on the <em>2nd</em> field, a simpler method, no <code>perl</code> needed:</p>\n\n<pre><code>uniq -f 1 data.tsv &gt; data.clean.tsv\n</code></pre>\n\n<p>Output, (contents of <em>data.clean.tsv</em>):</p>\n\n<pre><code>1f2edc31defc588a369544ac32215afec2ae65da  2019-01-08\ne95c31b76be6b99eb8a0670b93b91c9e9abf2efb  2018-11-27\nc6b6b534addff919150d94276f61eb8d0882f3f6  2018-09-04\n459a495a929cffa2205d31c6cc7ba2750af2580b  2018-06-25\n0970c0fef779a4ea89638140f339c2047d10d0c5  2017-12-29\n</code></pre>\n"}], "owner": {"reputation": 7107, "user_id": 459780, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/55b2cca3b7a11df3a961d57a68705503?s=128&d=identicon&r=PG", "display_name": "Daniel Standage", "link": "https://stackoverflow.com/users/459780/daniel-standage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 54136851, "answer_count": 3, "score": 2, "last_activity_date": 1547187995, "creation_date": 1547153318, "question_id": 54136666, "link": "https://stackoverflow.com/questions/54136666/shell-command-to-collapse-tabular-data-to-make-a-non-redundant-column", "title": "Shell command to collapse tabular data to make a non-redundant column", "body": "<p>I have some tabular data that looks like this.</p>\n\n<pre><code>1f2edc31defc588a369544ac32215afec2ae65da  2019-01-08\ne95c31b76be6b99eb8a0670b93b91c9e9abf2efb  2018-11-27\nc2dd1d6be6434b6ef109fa0394546fa500501efe  2018-11-27\nc6b6b534addff919150d94276f61eb8d0882f3f6  2018-09-04\n459a495a929cffa2205d31c6cc7ba2750af2580b  2018-06-25\n11f7883b29295e39bc964522deb96132d6a2803e  2018-06-25\n73a2a72ee9d0a9acf0ed02b0959f3fb5a44c3fc7  2018-06-25\n0970c0fef779a4ea89638140f339c2047d10d0c5  2017-12-29\n</code></pre>\n\n<p>I need to remove lines from the table so that no value is duplicated in the second (date) column--only the first occurrence should remain.</p>\n\n<p>I haven't used Perl in a while, but after a couple google searches to remind myself of the correct syntax I was able to come up with this one-liner.</p>\n\n<pre><code>$ perl -e '%seen = (); for (&lt;&gt;) { @v = split(/\\s+/); unless (exists($seen{$v[1]})) { $seen{$v[1]} = 1; print } }' &lt; data.tsv &gt; data.clean.tsv\n</code></pre>\n\n<p>After a quick glance this seems to do the trick, but it's a mess. Is there a cleaner more concise way to do this using portable (UNIX) shell commands, or is any solution going to involve a mess of Perl/sed/awk/etc.?</p>\n"}, {"tags": ["perl", "rules"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 4309334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e01ddf1f5b5a3c1bc1830c74e0656203?s=128&d=identicon&r=PG&f=1", "display_name": "danidar", "link": "https://stackoverflow.com/users/4309334/danidar"}, "edited": false, "score": 0, "creation_date": 1547207965, "post_id": 54192199, "comment_id": 95212035, "body": "do you need somehow to convert the base of the output of mode?  if i run the stats command on a file i get the value of 33279 which in octal would mean 100777? what the 3 ciffers before the 777? I asume it is the uid/gid?"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 59, "user_id": 4309334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e01ddf1f5b5a3c1bc1830c74e0656203?s=128&d=identicon&r=PG&f=1", "display_name": "danidar", "link": "https://stackoverflow.com/users/4309334/danidar"}, "edited": false, "score": 0, "creation_date": 1547208569, "post_id": 54192199, "comment_id": 95212036, "body": "No, those are the file type and setuid/setgid/sticky bits. Octal is just another way to represent an integer, so for comparing values in your program, you don&#39;t need to convert anything - in the Perl source code, <code>0100777</code> is the same as <code>33279</code>. For output in octal, you can use <code>printf</code>/<code>sprintf</code>, for example <code>printf &quot;%04o&quot;, 0644;</code> prints <code>0644</code>. To convert a Perl string that contains an octal number to an integer, Perl provides the <code>oct</code> function: <code>print oct(&quot;664&quot;);</code> prints <code>436</code>, in other words, <code>oct(&quot;664&quot;) == 436 == 0664</code>."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 59, "user_id": 4309334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e01ddf1f5b5a3c1bc1830c74e0656203?s=128&d=identicon&r=PG&f=1", "display_name": "danidar", "link": "https://stackoverflow.com/users/4309334/danidar"}, "edited": false, "score": 0, "creation_date": 1547208721, "post_id": 54192199, "comment_id": 95212037, "body": "Regarding the <code>mode</code> bits, see e.g. <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/basedefs/sys/stat.h.html\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/009695399/basedefs/sys/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": true, "score": 3, "last_activity_date": 1547147549, "creation_date": 1547147549, "answer_id": 54192199, "question_id": 54192198, "link": "https://stackoverflow.com/questions/54192198/how-to-use-perls-filefindrule-module-to-find-files-with-777-perms/54192199#54192199", "title": "How to use Perl&#39;s File::Find::Rule module to find files with 777 perms", "body": "<p>The <code>mode</code> includes the file permissions <em>and type</em>. You need to mask it so that you only get the permission bits. Personally I'd implement a custom rule:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse File::stat;\nuse Fcntl qw/S_IMODE/;\nuse File::Find::Rule 'rule';\n\nmy $rule = rule-&gt;file-&gt;exec(sub{ S_IMODE(stat($_[2])-&gt;mode)==0777 });\n\nmy @files = $rule-&gt;in('/root');\nfor my $file (@files) {\n    print $file, \"\\n\";\n}\n</code></pre>\n\n<p>Note that this masked mode still includes the setuid/setgid/sticky bits (often known as <code>Xst</code>). If you want to ignore those too, and check only the <code>ugo</code>/<code>rwx</code> bits, then you'd have to mask against <code>0777</code> (e.g. <code>$mode &amp; 0777</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 1697581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zyySw.jpg?s=128&g=1", "display_name": "aod", "link": "https://stackoverflow.com/users/1697581/aod"}, "is_accepted": false, "score": -1, "last_activity_date": 1550262313, "creation_date": 1550262313, "answer_id": 54716545, "question_id": 54192198, "link": "https://stackoverflow.com/questions/54192198/how-to-use-perls-filefindrule-module-to-find-files-with-777-perms/54716545#54716545", "title": "How to use Perl&#39;s File::Find::Rule module to find files with 777 perms", "body": "<p>Using <code>File::Find::Rule</code> is cool, but you could do it easily with <code>find</code> and get the answers back in perl:</p>\n\n<pre><code>@files = split /\\n/, `/bin/find /root -perm 777`;\n</code></pre>\n"}], "migrated_from": {"other_site": {"markdown_extensions": ["Prettify"], "launch_date": 1243296000, "open_beta_date": 1241049600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/serverfault/Img/apple-touch-icon@2.png", "twitter_account": "ServerFault", "favicon_url": "https://cdn.sstatic.net/Sites/serverfault/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/serverfault/Img/apple-touch-icon.png", "audience": "system and network administrators", "site_url": "https://serverfault.com", "api_site_parameter": "serverfault", "logo_url": "https://cdn.sstatic.net/Sites/serverfault/Img/logo.png", "name": "Server Fault", "site_type": "main_site"}, "on_date": 1547521689, "question_id": 948474}, "owner": {"reputation": 59, "user_id": 4309334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e01ddf1f5b5a3c1bc1830c74e0656203?s=128&d=identicon&r=PG&f=1", "display_name": "danidar", "link": "https://stackoverflow.com/users/4309334/danidar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 54192199, "answer_count": 2, "score": 3, "last_activity_date": 1550262998, "creation_date": 1547139922, "last_edit_date": 1550262998, "question_id": 54192198, "link": "https://stackoverflow.com/questions/54192198/how-to-use-perls-filefindrule-module-to-find-files-with-777-perms", "title": "How to use Perl&#39;s File::Find::Rule module to find files with 777 perms", "body": "<p>I want to use perl File::Find::Rule in order to find files in the server that have perms 777</p>\n\n<p>I know that the module has stats tests so i could simply do this: </p>\n\n<pre><code>$rule-&gt;mode(33279)\n</code></pre>\n\n<p>I found the 33279 by creating a file and printing the permission on it assuming that File::Find::Rule takes decimal? or should it be formatted somehow? </p>\n\n<p>Is this the right approach to have all the file that have  exactly the 777 permissions? </p>\n\n<p>this is a script that finds all files on the home dir of a test server.. i want to change it so that it only finds those with 777 permissions. </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse File::Find::Rule;\n\nmy $rule = File::Find::Rule-&gt;new;\n$rule-&gt;file;\n$rule-&gt;name( '*' );\nmy @files = $rule-&gt;in( \"/root\" );\n\nfor my $file (@files) {\n     my $mode = (stat $file)[2];\n     printf (\"%04o %s\\n\",$mode &amp; 07777, $file);\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 95, "user_id": 3309907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1692603033e82f51001cdc23fc7babec?s=128&d=identicon&r=PG&f=1", "display_name": "Jong-Hyouk Yun", "link": "https://stackoverflow.com/users/3309907/jong-hyouk-yun"}, "edited": false, "score": 1, "creation_date": 1547138721, "post_id": 54133288, "comment_id": 95097948, "body": "SOLVED: <code>perl -pe &#39;$_=uc&#39; ...</code>"}], "answers": [{"comments": [{"owner": {"reputation": 6928, "user_id": 1015385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc84a03227c566697c4a16b2e9f8782?s=128&d=identicon&r=PG", "display_name": "JRFerguson", "link": "https://stackoverflow.com/users/1015385/jrferguson"}, "edited": false, "score": 1, "creation_date": 1547144435, "post_id": 54133801, "comment_id": 95100928, "body": "You can use <code>perl -MO=Deparse ...</code> to see exactly what&#39;s happening under-the-covers."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1547140581, "creation_date": 1547140581, "answer_id": 54133801, "question_id": 54133288, "link": "https://stackoverflow.com/questions/54133288/perl-uc-function-oneliner-p-n-difference/54133801#54133801", "title": "Perl `uc` function oneliner -p/-n difference?", "body": "<p>You're doing different things. So it's not surprising that you get different results.</p>\n\n<p>In the first example, you take the value of <code>$_</code>, pass it to <code>uc</code> and print the results (which is an upper case version of the original text).</p>\n\n<p>In the second example, you take the value of <code>$_</code>, pass it to <code>uc</code> and print the value in <code>$_</code>. But you've done nothing to update <code>$_</code> so you get the unaltered value. The fix (as you've already noted in a comment) is to update <code>$_</code> with the value that is returned by <code>uc</code>.</p>\n\n<pre><code>perl -pe '$_ = uc' /etc/passwd\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 3309907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1692603033e82f51001cdc23fc7babec?s=128&d=identicon&r=PG&f=1", "display_name": "Jong-Hyouk Yun", "link": "https://stackoverflow.com/users/3309907/jong-hyouk-yun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1547140581, "creation_date": 1547138612, "question_id": 54133288, "link": "https://stackoverflow.com/questions/54133288/perl-uc-function-oneliner-p-n-difference", "title": "Perl `uc` function oneliner -p/-n difference?", "body": "<p>It works as intended:</p>\n\n<pre><code>perl -ne \"print uc\" /etc/passwd\n</code></pre>\n\n<p>But following isn't (it just prints in original case\":</p>\n\n<pre><code>perl -pe uc /etc/passwd\n</code></pre>\n\n<p>I don't understand what's wrong with it.</p>\n\n<p>thanks.</p>\n"}, {"tags": ["perl", "rpc"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1547159203, "post_id": 54132927, "comment_id": 95107152, "body": "Why are you trying to use XML::RPC? Nothing in the Metasploit API documentation even mentions XML."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1547159482, "post_id": 54132927, "comment_id": 95107254, "body": "<a href=\"https://metacpan.org/pod/MsgPack::RPC\" rel=\"nofollow noreferrer\">metacpan.org/pod/MsgPack::RPC</a> and <a href=\"https://metacpan.org/pod/Net::MPRPC::Client\" rel=\"nofollow noreferrer\">metacpan.org/pod/Net::MPRPC::Client</a> look relevant."}, {"owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1547159724, "post_id": 54132927, "comment_id": 95107334, "body": "melpomene , I know it uses binary/message-pack , I have seen many python scripts and attempt to translate it , cause I have found many using rpc xml module to connect to msf rpc server"}, {"owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1547159759, "post_id": 54132927, "comment_id": 95107344, "body": "and thank you about that module , it seems a handy one , i were searching for a one all the day"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1547160266, "post_id": 54132927, "comment_id": 95107502, "body": "... I just searched MetaCPAN for <code>msgpack</code> and <code>messagepack</code>."}], "owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1547158900, "creation_date": 1547137403, "last_edit_date": 1547158900, "question_id": 54132927, "link": "https://stackoverflow.com/questions/54132927/perl-cant-get-data-from-metasploit-rpc-server", "title": "Perl - Can&#39;t get data from metasploit RPC server", "body": "<p>What I have used as resource : <a href=\"https://metasploit.help.rapid7.com/v1/docs/rpc-api\" rel=\"nofollow noreferrer\">https://metasploit.help.rapid7.com/v1/docs/rpc-api</a></p>\n\n<p>First I have started msf rpc server :</p>\n\n<pre><code>msfrpcd -U msf -P test -f -S -a 127.0.0.1\n[*] MSGRPC starting on 127.0.0.1:55553 (NO SSL):Msg...\n[*] MSGRPC ready at 2019-01-11 00:56:29 +0900.\n</code></pre>\n\n<p>after that the server is up and is showing up via browser in <a href=\"http://127.0.0.1:55553\" rel=\"nofollow noreferrer\">http://127.0.0.1:55553</a></p>\n\n<p>The script I have used while using XML::RPC to get data</p>\n\n<pre><code>use XML::RPC;\nuse strict;\nuse warnings;\n\nmy $fm = XML::RPC-&gt;new( 'http://127.0.0.1:55553/api/' );\n\nmy $session = $fm-&gt;call( 'auth.login', { username =&gt; 'msf', password =&gt; 'test' });\n\nmy $x = $fm-&gt;call('group.command'); #api\n</code></pre>\n\n<p>The error when I run the script :</p>\n\n<pre><code>no data at /usr/local/share/perl/5.26.1/XML/RPC.pm line 288.\n</code></pre>\n\n<p>It seems that the api used is not working or perphaps something wrong</p>\n\n<p>Do you have any better way to get data from msf rpc server?</p>\n"}, {"tags": ["perl", "perl-critic", "parse-recdescent"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1547136550, "post_id": 54131671, "comment_id": 95096646, "body": "Can you turn <code>## critic</code> back on at the end of the file? Also, is this pre-compile thing code you&#39;re using inside one of your code files, or is it something you&#39;ve written in its own file? Or maybe a third-party dependency that just happens to live in your repository to make deployment easier?"}, {"owner": {"reputation": 587, "user_id": 2245633, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/SLpQK.gif?s=128&g=1", "display_name": "CodeGorilla", "link": "https://stackoverflow.com/users/2245633/codegorilla"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1547191997, "post_id": 54131671, "comment_id": 95115315, "body": "@simbabque - this is a distinct &amp; separate package, as created using <code>Parse::RecDescent-&gt;Precompile( { -standalone =&gt; 1, }, $grammar, &#39;My::Specific::Class&#39; )</code>"}], "answers": [{"comments": [{"owner": {"reputation": 587, "user_id": 2245633, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/SLpQK.gif?s=128&g=1", "display_name": "CodeGorilla", "link": "https://stackoverflow.com/users/2245633/codegorilla"}, "edited": false, "score": 0, "creation_date": 1547195789, "post_id": 54135633, "comment_id": 95116842, "body": "I&#39;m actually running a <code>brutal</code> level, which makes the whole Package un-checkable... however you have answered one of the questions asked"}, {"owner": {"reputation": 587, "user_id": 2245633, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/SLpQK.gif?s=128&g=1", "display_name": "CodeGorilla", "link": "https://stackoverflow.com/users/2245633/codegorilla"}, "edited": false, "score": 0, "creation_date": 1547567808, "post_id": 54135633, "comment_id": 95231869, "body": "yes I did.... I&#39;ve been distracted by a broken service - however I&#39;ll also try that. This would give two options: (a) exclude the whole file, or (b) allow the &#39;no critic&#39; options - which is nice"}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": true, "score": 3, "last_activity_date": 1547207078, "last_edit_date": 1547207078, "creation_date": 1547148264, "answer_id": 54135633, "question_id": 54131671, "link": "https://stackoverflow.com/questions/54131671/disable-critic-for-an-entire-file-parserecdescent-precompiled-parser-perlc/54135633#54135633", "title": "Disable critic for an entire file - Parse::RecDescent precompiled parser &amp; PerlCritic/Tidyall", "body": "<blockquote>\n  <p>why doesn't <code>tidyall</code> critique the same as <code>critic</code>?</p>\n</blockquote>\n\n<p>A simple <code>perlcritic</code> on the command line defaults to severity 5, unless you've configured something different in your <code>~/.perlcriticrc</code>. The rule <code>ProhibitUnrestrictedNoCritic</code> defaults to severity 3, so your <code>tidyall</code> is running <code>Perl::Critic</code> with at least severity 3. As per its documentation, you can change that via something like this in the <code>tidyall.ini</code>:</p>\n\n<pre><code>[PerlCritic]\nargv = -severity 4\n</code></pre>\n\n<p>And then <code>tidyall</code>'s checks <em>should</em> be the same as a <code>perlcritic -4</code> from the command line. (Unless you've configured custom severity levels in your <code>.perlcriticrc</code>.)</p>\n\n<hr>\n\n<p><em>Update:</em> As per your comment, you want to check everything at the \"brutal\" level. In that case, you can create a <code>perlcriticrc</code> file containing the line <code>[-Miscellanea::ProhibitUnrestrictedNoCritic]</code> which will disable that policy, and then point <code>perlcritic</code> at that file by adding the command-line argument <code>--profile /path/to/custom/perlcriticrc</code>.</p>\n"}], "owner": {"reputation": 587, "user_id": 2245633, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/SLpQK.gif?s=128&g=1", "display_name": "CodeGorilla", "link": "https://stackoverflow.com/users/2245633/codegorilla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 54135633, "answer_count": 1, "score": 4, "last_activity_date": 1613216893, "creation_date": 1547133238, "last_edit_date": 1613216893, "question_id": 54131671, "link": "https://stackoverflow.com/questions/54131671/disable-critic-for-an-entire-file-parserecdescent-precompiled-parser-perlc", "title": "Disable critic for an entire file - Parse::RecDescent precompiled parser &amp; PerlCritic/Tidyall", "body": "<p>I'm trying to remove an error from my sanity-checking [when I push code to my git repo, there's a hook that checks the code with <code>perltidy</code> &amp; <code>critic</code>... using <code>tidyall</code> as the handler.]</p>\n\n<p>The specific issue I have is with a pre-compiled Grammar Parser.... and this is not something I want to dive in &amp; fix (sorry - that's outside my comfort zone)</p>\n\n<p>If I add a simple <code>## no critic</code> to the start of the file, then</p>\n\n<pre><code>perlcritic path/to/class/file.pm\n</code></pre>\n\n<p>comes back</p>\n\n<pre><code>path/to/class/file.pm source OK\n</code></pre>\n\n<p>however</p>\n\n<pre><code>tidyall --check-only -r .\n</code></pre>\n\n<p>comes back with</p>\n\n<pre><code>perlcritic /tmp/Code-TidyAll-Frb0/path/to/class/file.pm failed\n    exited with 2 - output was:\nUnrestricted '## no critic' annotation at line 6, column 1. (Miscellanea::ProhibitUnrestrictedNoCritic, severity 3)\n</code></pre>\n\n<p>I know I can fix this in the <code>tidyall.ini</code> file:</p>\n\n<pre><code>[PerlCritic lib]\nselect = **/*.{pm}\nignore = **/class/file.pm\n</code></pre>\n\n<p>.... however I feel there should be a <em>cleaner</em> solution.</p>\n\n<p>(or, why doesn't <code>tidyall</code> critique the same as <code>critic</code>?)</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1547133165, "post_id": 54130828, "comment_id": 95094493, "body": "Is it guaranteed that both the keys from hash one and hash two exist in the third one? Also, you only need to do half of the comparisons in general, because <code>a == b</code> and <code>b == a</code> are equivalent."}, {"owner": {"reputation": 4804, "user_id": 101289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XiDX2.jpg?s=128&g=1", "display_name": "Abdel", "link": "https://stackoverflow.com/users/101289/abdel"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1547134372, "post_id": 54130828, "comment_id": 95095227, "body": "Yes, it is guaranteed that they exist in the third one! And indeed, I would only have to do half of them, you&#39;re right! But that would still make it take too long unfortunately..."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1547135535, "post_id": 54130828, "comment_id": 95096002, "body": "Can you do them in parallel?"}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 6, "last_activity_date": 1547138749, "last_edit_date": 1547138749, "creation_date": 1547137099, "answer_id": 54132832, "question_id": 54130828, "link": "https://stackoverflow.com/questions/54130828/comparing-all-elements-from-two-hashes-more-efficiently/54132832#54132832", "title": "Comparing all elements from two hashes more efficiently", "body": "<p>Probably. It looks like you can reformulate the problem as</p>\n\n<blockquote>\n  <p>Find all pairs of keys <code>K1</code> and <code>K2</code> such that:</p>\n  \n  <ul>\n  <li><code>$some_other_hash{K1} == $some_other_hash{K2}</code></li>\n  <li><code>K1</code> exists in <code>%hash1</code> and <code>K2</code> exists in <code>%hash2</code></li>\n  </ul>\n</blockquote>\n\n<p>so let's try an approach where you find solutions to the first condition first and then see if they satisfy the second condition. Iterating through all pairs of keys is O(n<sup>2</sup>) but we already have a strategy for finding keys that map to the same hash value quickly: use another hash!</p>\n\n<p>Let's build a \"reverse hash\" of <code>%some_other_hash</code> so that <code>$hash7{VAL}</code> produces a list of all keys in <code>%some_other_hash</code> such that <code>$some_other_hash{KEY} == VAL</code>:</p>\n\n<pre><code>push @{$hash7{ $some_other_hash{$_} }, $_ for keys %some_other_hash;\n</code></pre>\n\n<p>That was an O(n) operation. Next we need to find values that map to more than one key.</p>\n\n<pre><code>foreach my $v (keys %hash7) {\n    @k = @{$hash7{$v}};\n    next if @k &lt; 2;\n    ...\n}\n</code></pre>\n\n<p>If you find such a value, check if some of the keys are in <code>%hash1</code> and if some are in <code>%hash2</code>.</p>\n\n<pre><code>foreach my $v (keys %hash7) {\n    @k = @{$hash7{$v}};\n    next if @k &lt; 2;\n    @k1 = grep { exists $hash1{$_} } @k;\n    @k2 = grep { exists $hash2{$_} } @k;\n    if (@k1 &amp;&amp; @k2) {\n        foreach my $k1 (@k1) {\n            foreach my $k2 (@k2) {\n                print \"$k1 from %hash1 and $k2 from %hash2 \",\n                      \"have the same value $v in %some_other_hash\\n\";\n                ...\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Worst case, where it is common to find values in <code>%some_other_hash</code> that are mapped by more than one key, this loop is O(mn). Depending on your data, this search could be significantly faster than iterating through all pairs of keys in <code>%hash1</code> and <code>%hash2</code>.</p>\n"}], "owner": {"reputation": 4804, "user_id": 101289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XiDX2.jpg?s=128&g=1", "display_name": "Abdel", "link": "https://stackoverflow.com/users/101289/abdel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 54132832, "answer_count": 1, "score": 1, "last_activity_date": 1547181297, "creation_date": 1547130471, "last_edit_date": 1547134725, "question_id": 54130828, "link": "https://stackoverflow.com/questions/54130828/comparing-all-elements-from-two-hashes-more-efficiently", "title": "Comparing all elements from two hashes more efficiently", "body": "<p>I have two hashes in perl that each consist of about 250,000 elements. I have to compare each element from both hashes with each other, and perform another operation on the elements that are equal to each other. I have the following code, which makes ~60 billion comparisons, so takes way too long to finish:</p>\n\n<pre><code>foreach $key1 (keys %large_hash_1)\n    {\n    foreach $key2 (keys %large_hash_2)\n        {\n        if($some_other_var{$key1} == $some_other_var{$key2}) # so actually I compare another hash variable, using the keys from %large_hash_1 and %large_hash_2\n             {\n             # I print some stuff here to an output file using the $key1 and $key2 variables\n             }\n        }\n    }\n</code></pre>\n\n<p>Is there a way to do this more rapidly?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1547116336, "post_id": 54126576, "comment_id": 95084673, "body": "What is your input format? Certainly it&#39;s not a picture, as you can&#39;t use regex on text in images. Is it an Excel file? Or a CSV file? What is the delimiter for the columns you are showing us? And does it literally say <code>12</code> and <code>1A</code> in the file? <code>\\x12</code> is a control character, not the two characters <code>1</code> and <code>2</code>. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and <a href=\"https://stackoverflow.com/posts/54126576/edit\">edit</a> your question to tell us what your real input is. If it contains control characters, you can use Data::Dumper to stringify it and show us that."}, {"owner": {"reputation": 101, "user_id": 2787859, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004041835408/picture?type=large", "display_name": "\u0e15\u0e49\u0e2d\u0e07 \u0e40\u0e2d\u0e01\u0e21\u0e31\u0e22", "link": "https://stackoverflow.com/users/2787859/%e0%b8%95%e0%b9%89%e0%b8%ad%e0%b8%87-%e0%b9%80%e0%b8%ad%e0%b8%81%e0%b8%a1%e0%b8%b1%e0%b8%a2"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1547116601, "post_id": 54126576, "comment_id": 95084821, "body": "It&#39;s raw hexdump data."}, {"owner": {"reputation": 101, "user_id": 2787859, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004041835408/picture?type=large", "display_name": "\u0e15\u0e49\u0e2d\u0e07 \u0e40\u0e2d\u0e01\u0e21\u0e31\u0e22", "link": "https://stackoverflow.com/users/2787859/%e0%b8%95%e0%b9%89%e0%b8%ad%e0%b8%87-%e0%b9%80%e0%b8%ad%e0%b8%81%e0%b8%a1%e0%b8%b1%e0%b8%a2"}, "edited": false, "score": 0, "creation_date": 1547118317, "post_id": 54126576, "comment_id": 95085850, "body": "Yes, Column F is the number of bytes.  Please refresh again. I just edited."}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 2787859, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004041835408/picture?type=large", "display_name": "\u0e15\u0e49\u0e2d\u0e07 \u0e40\u0e2d\u0e01\u0e21\u0e31\u0e22", "link": "https://stackoverflow.com/users/2787859/%e0%b8%95%e0%b9%89%e0%b8%ad%e0%b8%87-%e0%b9%80%e0%b8%ad%e0%b8%81%e0%b8%a1%e0%b8%b1%e0%b8%a2"}, "edited": false, "score": 0, "creation_date": 1547118568, "post_id": 54127106, "comment_id": 95085993, "body": "Yes, very well assumptions. I urgently edit the question several times."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547120250, "post_id": 54127106, "comment_id": 95086933, "body": "It might be a fun idea to use <code>unpack &#39;xwxC&#47;ax&#39;</code>, but I&#39;m too lazy to check that/work that out."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547123049, "post_id": 54127106, "comment_id": 95088436, "body": "To my surprise, <code>unpack</code> actually works, but if the input data is as unreliable as the OP shows (and not just typing errors, as some of the stuff suggests), then a regex based approach is much saner."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547123087, "post_id": 54127106, "comment_id": 95088450, "body": "@Corion, oh, I didn&#39;t realize the number format was standard an supported by <code>pack</code>! You&#39;ve made some additional assumptions (about the order of fields and number of fields of each type), though."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1547123340, "post_id": 54127106, "comment_id": 95088595, "body": "Yeah, error checking/reporting is invariably required at some point, so <code>unpack</code> might be &quot;good for now&quot;, but it&#39;s probably just a temporary solution. A proper parser such as the one I posted will eventually be needed. Doesn&#39;t necessarily have to be re-based, though"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547124886, "post_id": 54127106, "comment_id": 95089402, "body": "I&#39;ve now added dynamic parsing as well, and error checking and the input data either is really badly typed from Excel or it does not conform to the specification by the OP at all."}, {"owner": {"reputation": 101, "user_id": 2787859, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004041835408/picture?type=large", "display_name": "\u0e15\u0e49\u0e2d\u0e07 \u0e40\u0e2d\u0e01\u0e21\u0e31\u0e22", "link": "https://stackoverflow.com/users/2787859/%e0%b8%95%e0%b9%89%e0%b8%ad%e0%b8%87-%e0%b9%80%e0%b8%ad%e0%b8%81%e0%b8%a1%e0%b8%b1%e0%b8%a2"}, "edited": false, "score": 0, "creation_date": 1547136814, "post_id": 54127106, "comment_id": 95096826, "body": "Sorry. the data field 08 are just example since I hurry to edit the question. Some of them are not valid."}, {"owner": {"reputation": 101, "user_id": 2787859, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004041835408/picture?type=large", "display_name": "\u0e15\u0e49\u0e2d\u0e07 \u0e40\u0e2d\u0e01\u0e21\u0e31\u0e22", "link": "https://stackoverflow.com/users/2787859/%e0%b8%95%e0%b9%89%e0%b8%ad%e0%b8%87-%e0%b9%80%e0%b8%ad%e0%b8%81%e0%b8%a1%e0%b8%b1%e0%b8%a2"}, "edited": false, "score": 0, "creation_date": 1547138478, "post_id": 54127106, "comment_id": 95097811, "body": "But the actual data will be very valid."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1547123463, "last_edit_date": 1547123463, "creation_date": 1547117621, "answer_id": 54127106, "question_id": 54126576, "link": "https://stackoverflow.com/questions/54126576/i-have-raw-hexdump-data-how-to-match-variable-length-with-many-different-delimi/54127106#54127106", "title": "I have raw hexdump data. How to match variable length with many different delimiters", "body": "<p>I'm assuming the record format is defined as followed:</p>\n\n<ol>\n<li>Each record is made of up of fields that start with a type (e.g. <code>08</code>, <code>09</code>, <code>1A</code>).</li>\n<li>Field type <code>1A</code> is a special type that signals the end of the record.</li>\n<li>All records have a field of type <code>1A</code>.</li>\n<li>Field type <code>08</code> is followed by a number encoded using <a href=\"https://stackoverflow.com/q/54060613/589924\">this format</a>.</li>\n<li>Field type <code>09</code> is followed by a single byte that defines the number of bytes in the remainder of the field, which appears to be an ASCII-encoded string. (Another reasonable assumption is that the field type <code>09</code> is followed by a single byte that defines the number of Code Points encoded using UTF-8 that follow).</li>\n<li>A record may not have two fields of the same type.</li>\n</ol>\n\n<p>I made no assumptions about the following:</p>\n\n<ol>\n<li>If a field of type <code>08</code> must be present or not.</li>\n<li>If a field of type <code>09</code> must be present or not.</li>\n<li>The order of the fields.</li>\n</ol>\n\n<p>To parse such records, you can use the following:</p>\n\n<pre><code>for ($file) {  # Makes $_ an alias for $file.\n   REC: while (1) {\n      my %rec;\n      FIELD: while (1) {\n         my $field_start = pos() || 0;\n         if (!/\\G ( . )/sxgc) {\n            last REC if !%rec;\n            die(\"Premature EOF\\n\");\n         }\n\n         if ($type eq \"\\x1A\") {\n            last;\n         }\n\n         elsif ($type eq \"\\x08\") {\n            !exists($rec{\"09\"})\n               or warn(sprintf(\"Duplicate field of type %02X at pos %s\\n\", $type, $field_start));\n\n            /\\G ( [\\x80-\\xFF]*[\\x00-\\x7F] ) /sxgc\n               or die(sprintf(\"Bad field of type %02X at pos %s\\n\", $type, $field_start));\n\n            $rec{\"08\"} = unpack(\"w\", \"$1\");\n         }\n\n         elsif ($type eq \"\\x09\") {\n            !exists($rec{\"09\"})\n               or warn(sprintf(\"Duplicate field of type %02X at pos %s\\n\", $type, $field_start));\n\n            /\\G ( . ) /sxgc\n               or die(sprintf(\"Bad field of type %02X at pos %s\\n\", $type, $field_start));\n\n            my $len = ord($1);\n            length() &gt;= pos() + $len\n               or die(sprintf(\"Bad field of type %02X at pos %s\\n\", $type, $field_start));\n\n            $rec{\"09\"} = substr($_, pos(), $len);\n            pos() += $len;\n         }\n\n         else {\n            die(sprintf(\"Unrecognized record type %02X at pos %s\\n\", $type, $field_start));\n         }\n       }\n\n      # Do something with %rec\n   }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 101, "user_id": 2787859, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004041835408/picture?type=large", "display_name": "\u0e15\u0e49\u0e2d\u0e07 \u0e40\u0e2d\u0e01\u0e21\u0e31\u0e22", "link": "https://stackoverflow.com/users/2787859/%e0%b8%95%e0%b9%89%e0%b8%ad%e0%b8%87-%e0%b9%80%e0%b8%ad%e0%b8%81%e0%b8%a1%e0%b8%b1%e0%b8%a2"}, "edited": false, "score": 0, "creation_date": 1547136856, "post_id": 54128650, "comment_id": 95096855, "body": "Sorry. the data field 08 are just example since I hurry to edit the question. Some of them are not valid"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 101, "user_id": 2787859, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004041835408/picture?type=large", "display_name": "\u0e15\u0e49\u0e2d\u0e07 \u0e40\u0e2d\u0e01\u0e21\u0e31\u0e22", "link": "https://stackoverflow.com/users/2787859/%e0%b8%95%e0%b9%89%e0%b8%ad%e0%b8%87-%e0%b9%80%e0%b8%ad%e0%b8%81%e0%b8%a1%e0%b8%b1%e0%b8%a2"}, "edited": false, "score": 0, "creation_date": 1547136988, "post_id": 54128650, "comment_id": 95096940, "body": "@\u0e15\u0e49\u0e2d\u0e07\u0e40\u0e2d\u0e01\u0e21\u0e31\u0e22 - how do you expect to parse the input properly if your input is invalid?!"}, {"owner": {"reputation": 101, "user_id": 2787859, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004041835408/picture?type=large", "display_name": "\u0e15\u0e49\u0e2d\u0e07 \u0e40\u0e2d\u0e01\u0e21\u0e31\u0e22", "link": "https://stackoverflow.com/users/2787859/%e0%b8%95%e0%b9%89%e0%b8%ad%e0%b8%87-%e0%b9%80%e0%b8%ad%e0%b8%81%e0%b8%a1%e0%b8%b1%e0%b8%a2"}, "edited": false, "score": 0, "creation_date": 1547138311, "post_id": 54128650, "comment_id": 95097725, "body": "Both of you are really cool. @ikegami help me alot in the previous question. The real actual data are very valid. So I think unpack method is easy to use."}, {"owner": {"reputation": 101, "user_id": 2787859, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004041835408/picture?type=large", "display_name": "\u0e15\u0e49\u0e2d\u0e07 \u0e40\u0e2d\u0e01\u0e21\u0e31\u0e22", "link": "https://stackoverflow.com/users/2787859/%e0%b8%95%e0%b9%89%e0%b8%ad%e0%b8%87-%e0%b9%80%e0%b8%ad%e0%b8%81%e0%b8%a1%e0%b8%b1%e0%b8%a2"}, "edited": false, "score": 0, "creation_date": 1547140196, "post_id": 54128650, "comment_id": 95098799, "body": "I saw someone use postponed eval. Does it good too ? <code>&#47;\\x08.+?\\x09(.)((??{ $n = ord($1) ; &quot;.{$n}&quot; }))\\x1A&#47;</code>"}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 4, "last_activity_date": 1547124824, "last_edit_date": 1547124824, "creation_date": 1547122987, "answer_id": 54128650, "question_id": 54126576, "link": "https://stackoverflow.com/questions/54126576/i-have-raw-hexdump-data-how-to-match-variable-length-with-many-different-delimi/54128650#54128650", "title": "I have raw hexdump data. How to match variable length with many different delimiters", "body": "<p>It seems that <code>$dat[4]</code> is invalid data. At least the first field should contain a second byte because <code>D5</code> indicates that there is at least one more byte following.</p>\n\n<p><code>$dat[2]</code> is also invalid data because the length field for <code>0x09</code> is <code>0x03</code>, but the field itself contains four characters.</p>\n\n<p><code>$dat[5]</code> contains an invalid hex escape. Instead of <code>\\xEO</code>, I use <code>\\xE0</code>.</p>\n\n<p>With these two corrections, you can parse your input messages using the <a href=\"http://perldoc.perl.org/functions/unpack.html\" rel=\"nofollow noreferrer\">unpack</a> function:</p>\n\n<pre><code>my( $number, $name ) = unpack 'xwxC/ax', $d;\n</code></pre>\n\n<p>The template for <code>unpack</code> means:</p>\n\n<p><code>x</code> - throw away this byte (0x08)</p>\n\n<p><code>w</code> - read a BER-encoded number</p>\n\n<p><code>x</code> - throw away this byte (0x09)</p>\n\n<p><code>C</code> - read this byte and use it as the length for the following string</p>\n\n<p><code>a</code> - read the next bytes and use them as string characters</p>\n\n<p><code>x</code> - throw away this byte (0x1A)</p>\n\n<p>If you want to keep the field numbers as well, use</p>\n\n<pre><code>    unpack 'CwCC/aC', $d\n</code></pre>\n\n<p>At least for the data as shown the <code>unpack</code> template works, with the assumptions I've stated. If this is actual ASN.1 data then there should be far more validation etc., and if the field separators might be missing, a regexp-based approach as shown by @ikegami is certainly more robust.</p>\n\n<h3>Fixed/dynamic field order</h3>\n\n<p>The template relies on a fixed order of the fields. If the field order is not certain to be fixed, you will need to determine the <code>unpack</code> template(s) based on the type of each field in a loop. This brings the unpack approach close to the approach by ikegami.</p>\n\n<pre><code>my ($message_type), $d = unpack 'CA*', $d;\nif( $message_type eq \"\\x08\" ) {\n    my ($number), $d = unpack 'wA*', $d;\n    print \"Field 0x08: $number\\n\";\n} elsif ...\n</code></pre>\n\n<p>See the following complete program for the fixed field order:</p>\n\n<pre><code>#!perl\nuse strict;\nuse warnings;\n\nmy @dat;\n\n$dat[1] = \"\\x08\\xB3\\xE3\\x0C\\x09\\x07\\x4D\\x6F\\x68\\x61\\x6D\\x65\\x64\\x1A\";\n#$dat[2] = \"\\x08\\x84\\x03\\x09\\x03\\x53\\x6F\\x6C\\x6C\\x1A\";\n$dat[3] = \"\\x08\\xD4\\xEA\\x0E\\x09\\x03\\x54\\x6F\\x6C\\x1A\";\n#$dat[4] = \"\\x08\\xD5\\x09\\x03\\x55\\x6F\\x6C\\x1A\";\n$dat[5] = \"\\x08\\xD4\\xEA\\x09\\x09\\x03\\x54\\x6F\\x6C\\x1A\";\n$dat[6] = \"\\x08\\xD4\\xEA\\x0E\\x09\\x09\\x54\\x6F\\x6C\\x61\\x6D\\x65\\x64\\x61\\x61\\x1A\";\n$dat[7] = \"\\x08\\xD4\\xEA\\x09\\x09\\x09\\x54\\x6F\\x6C\\x61\\x6D\\x65\\x64\\x61\\x61\\x1A\";\n\n@dat = grep {defined } @dat;\n\nuse Data::Dumper;\n\nfor my $d (@dat) {\n    # Hardcoded message parser\n    print Dumper [\n        unpack 'CwCC/aC', $d\n    ];\n\n    # Dynamic message parser\n    while( length $d ) {\n        (my ($message_type), $d) = unpack 'aa*', $d;\n        if( $message_type eq \"\\x08\" ) {\n            (my ($number), $d) = unpack 'wa*', $d;\n            print \"Field 0x08: $number\\n\";\n        } elsif ( $message_type eq \"\\x09\" ) {\n            (my ($len)) = unpack 'C', $d;\n            (my ($name), $d) = unpack 'C/aa*', $d;\n            print \"Field 0x09: $name\\n\";\n        } elsif ( $message_type eq \"\\x1A\" ) {\n            # finished\n            print \"Field 0x1A\\n\";\n        } else {\n            die sprintf \"Unknown message type %08x\", ord($message_type);\n        };\n    };\n};\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>$VAR1 = [\n          8,\n          848268,\n          9,\n          'Mohamed',\n          26\n        ];\nField 0x08: 848268\nField 0x09: Mohamed\nField 0x1A\n$VAR1 = [\n          8,\n          515,\n          9,\n          'Sol',\n          26\n        ];\nField 0x08: 515\nField 0x09: Sol\nField 0x1A\n$VAR1 = [\n          8,\n          1389838,\n          9,\n          'Tol',\n          26\n        ];\nField 0x08: 1389838\nField 0x09: Tol\nField 0x1A\n$VAR1 = [\n          8,\n          1389833,\n          9,\n          'Tol',\n          26\n        ];\nField 0x08: 1389833\nField 0x09: Tol\nField 0x1A\n$VAR1 = [\n          8,\n          1389838,\n          9,\n          'Tolamedaa',\n          26\n        ];\nField 0x08: 1389838\nField 0x09: Tolamedaa\nField 0x1A\n$VAR1 = [\n          8,\n          1389833,\n          9,\n          'Tolamedaa',\n          26\n        ];\nField 0x08: 1389833\nField 0x09: Tolamedaa\nField 0x1A\n</code></pre>\n\n<h3>See also</h3>\n\n<p><a href=\"http://perldoc.perl.org/functions/unpack.html\" rel=\"nofollow noreferrer\">unpack function</a></p>\n\n<p><a href=\"http://perldoc.perl.org/functions/pack.html\" rel=\"nofollow noreferrer\">(un)pack parameters</a></p>\n"}], "owner": {"reputation": 101, "user_id": 2787859, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004041835408/picture?type=large", "display_name": "\u0e15\u0e49\u0e2d\u0e07 \u0e40\u0e2d\u0e01\u0e21\u0e31\u0e22", "link": "https://stackoverflow.com/users/2787859/%e0%b8%95%e0%b9%89%e0%b8%ad%e0%b8%87-%e0%b9%80%e0%b8%ad%e0%b8%81%e0%b8%a1%e0%b8%b1%e0%b8%a2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 54128650, "answer_count": 2, "score": 0, "last_activity_date": 1547124824, "creation_date": 1547115914, "last_edit_date": 1547118223, "question_id": 54126576, "link": "https://stackoverflow.com/questions/54126576/i-have-raw-hexdump-data-how-to-match-variable-length-with-many-different-delimi", "title": "I have raw hexdump data. How to match variable length with many different delimiters", "body": "<p><img src=\"https://i.imgur.com/6dQdrHj.png\" alt=\"Data\"></p>\n\n<pre><code>$dat[1] = \"\\x08\\xB3\\xE3\\x0C\\x09\\x07\\x4D\\x6F\\x68\\x61\\x6D\\x65\\x64\\x1A\";\n$dat[2] = \"\\x08\\x84\\x03\\x09\\x03\\x53\\x6F\\x6C\\x6C\\x1A\";\n$dat[3] = \"\\x08\\xD4\\xEA\\x0E\\x09\\x03\\x54\\x6F\\x6C\\x1A\";\n$dat[4] = \"\\x08\\xD5\\x09\\x03\\x55\\x6F\\x6C\\x1A\";\n$dat[5] = \"\\x08\\xD4\\xEA\\x09\\x09\\x03\\x54\\x6F\\x6C\\x1A\";\n$dat[6] = \"\\x08\\xD4\\xEA\\xOE\\x09\\x09\\x54\\x6F\\x6C\\x61\\x6D\\x65\\x64\\x61\\x61\\x1A\";\n$dat[7] = \"\\x08\\xD4\\xEA\\x09\\x09\\x09\\x54\\x6F\\x6C\\x61\\x6D\\x65\\x64\\x61\\x61\\x1A\";\n</code></pre>\n\n<p>I have raw hexdump data in the pattern above. <code>08</code>, <code>09</code> and <code>1A</code> are the delimiters. The problem is column <code>D</code> and <code>F</code> can be <code>09</code>. Is it possible to match regex ? I need data between those delimiters.</p>\n\n<p>My code is not accuracy:</p>\n\n<pre><code>m/\\x08(.+?\\x09?)\\x09(.+?)\\x1A/s;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547120281, "post_id": 54126529, "comment_id": 95086958, "body": "How would you exclude the files using a plain <code>rsync</code> command line?"}, {"owner": {"reputation": 25, "user_id": 9948224, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qnHd2oCAJ5k/AAAAAAAAAAI/AAAAAAAAAAA/QzPalcLRtMI/photo.jpg?sz=128", "display_name": "Raimo", "link": "https://stackoverflow.com/users/9948224/raimo"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547121666, "post_id": 54126529, "comment_id": 95087699, "body": "Hi, I haven&#180;t used plain rsync but, there is mentioned on internet pages. That following syntax should work /bin/rsync -avz --exclude &#39;*.typ&#39; source/ destination/. With perl library that I I am using. source and destination has to write elsewhere... # Receive files from remote srcDirectory to local destDirectory&lt;br&gt;  # # by running rsyncCmd with rsyncArgs.    $rs-&gt;remoteStart(1, srcDirectory);   #   $rs-&gt;go(destDirectory);  #"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547121721, "post_id": 54126529, "comment_id": 95087726, "body": "So, maybe follow what the internet pages suggest?"}, {"owner": {"reputation": 25, "user_id": 9948224, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qnHd2oCAJ5k/AAAAAAAAAAI/AAAAAAAAAAA/QzPalcLRtMI/photo.jpg?sz=128", "display_name": "Raimo", "link": "https://stackoverflow.com/users/9948224/raimo"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547122090, "post_id": 54126529, "comment_id": 95087906, "body": "ok, after pause, I try to write source and destination, into both places after rsync command. and into libraries place... Now I take a pause of one hour"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547122251, "post_id": 54126529, "comment_id": 95087995, "body": "<code>--include &#39;*.pl&#39; --exclude &#39;*&#39;</code> -  you first include all <code>.pl</code> files, but then exclude all files - that makes little sense. Maybe explain which files you want to include and which files you want to exclude and show some examples."}, {"owner": {"reputation": 25, "user_id": 9948224, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qnHd2oCAJ5k/AAAAAAAAAAI/AAAAAAAAAAA/QzPalcLRtMI/photo.jpg?sz=128", "display_name": "Raimo", "link": "https://stackoverflow.com/users/9948224/raimo"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547129277, "post_id": 54126529, "comment_id": 95091958, "body": "my purpose is include *.xml files   I have tried: rsyncCmd   =&gt; &quot;/bin/rsync -avz --include &#39;*.xml&#39; srcDirectory destDirectory &quot;,  and I have tired rsyncCmd   =&gt; &quot;/bin/rsync -avz --include &#39;*.xml&#39; destDirectory srcDirectory &quot;,.."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547129738, "post_id": 54126529, "comment_id": 95092263, "body": "Can you please <a href=\"https://stackoverflow.com/posts/54126529/edit\">edit</a> your post and add the above comment to it? Maybe also add some example directory structure and explain what <code>rsync</code> does and also what you want it to do?"}, {"owner": {"reputation": 25, "user_id": 9948224, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qnHd2oCAJ5k/AAAAAAAAAAI/AAAAAAAAAAA/QzPalcLRtMI/photo.jpg?sz=128", "display_name": "Raimo", "link": "https://stackoverflow.com/users/9948224/raimo"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547133268, "post_id": 54126529, "comment_id": 95094564, "body": "hi, I don&#180;t have enough points for chat. I have updated my question"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547133557, "post_id": 54126529, "comment_id": 95094756, "body": "Are there other files in <code>&#47;home&#47;raimo&#47;A&#47;SRC&#47;srcDirectory&#47;</code> that you want to avoid? <a href=\"https://stackoverflow.com/questions/14655834/rsync-include-option-does-not-exclude-other-files\" title=\"rsync include option does not exclude other files\">stackoverflow.com/questions/14655834/&hellip;</a> shows that your first approach should be what you want, <code>--include &#39;*.xml&#39; --exclude &#39;*&#39;</code>"}, {"owner": {"reputation": 25, "user_id": 9948224, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qnHd2oCAJ5k/AAAAAAAAAAI/AAAAAAAAAAA/QzPalcLRtMI/photo.jpg?sz=128", "display_name": "Raimo", "link": "https://stackoverflow.com/users/9948224/raimo"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547133773, "post_id": 54126529, "comment_id": 95094874, "body": "exclude is not necessary, only files what match for example with filename2019*.xml. my filename variable comes... word +wildcard +extension (xml) in this case. problem is that File::RsyncP; does not react to --include &#39;*.xml&#39;...instead it copies all files in a directory"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547133979, "post_id": 54126529, "comment_id": 95094989, "body": "Try adding <code>--include</code> and <code>*.xml</code> to the <code>rsyncArgs</code>, not the <code>rsyncCmd</code>."}, {"owner": {"reputation": 25, "user_id": 9948224, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qnHd2oCAJ5k/AAAAAAAAAAI/AAAAAAAAAAA/QzPalcLRtMI/photo.jpg?sz=128", "display_name": "Raimo", "link": "https://stackoverflow.com/users/9948224/raimo"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547134433, "post_id": 54126529, "comment_id": 95095270, "body": "I have tried already.  rsyncArgs  =&gt; [                     &quot;--numeric-ids&quot;,                     &quot;--perms&quot;,                     &quot;--owner&quot;,                     &quot;--group&quot;,                     &quot;--devices&quot;,                     &quot;--links&quot;,                     &quot;--ignore-times&quot;,                     &quot;--block-size=700&quot;,                     &quot;--relative&quot;,                     &quot;--recursive&quot;,                     &quot;--verbose&quot;, \t\t\t\t\t&quot;--include &#39;*.xml&#39;&quot;,. causes an error Fatal error (bad version): rsync: on remote machine: --include &#39;*.xml&#39;: unknown option"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547135554, "post_id": 54126529, "comment_id": 95096010, "body": "Split it up: <code>&quot;--include&quot;, &quot;*.xml&quot;</code>"}, {"owner": {"reputation": 25, "user_id": 9948224, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qnHd2oCAJ5k/AAAAAAAAAAI/AAAAAAAAAAA/QzPalcLRtMI/photo.jpg?sz=128", "display_name": "Raimo", "link": "https://stackoverflow.com/users/9948224/raimo"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547136178, "post_id": 54126529, "comment_id": 95096401, "body": "ok, I did it. now it copies all files but not xml.Can&#39;t chmod(destDirectory/test.xml, 0100777) Can&#39;t chown(1000, 1000, destDirectory/test.xml) Can&#39;t mtime(1547135663, 1547135663, destDirectory/test.xml)"}, {"owner": {"reputation": 25, "user_id": 9948224, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qnHd2oCAJ5k/AAAAAAAAAAI/AAAAAAAAAAA/QzPalcLRtMI/photo.jpg?sz=128", "display_name": "Raimo", "link": "https://stackoverflow.com/users/9948224/raimo"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547137044, "post_id": 54126529, "comment_id": 95096973, "body": "test.xml was empty, I filled it. test.xml is copied also, but so are all files"}, {"owner": {"reputation": 25, "user_id": 9948224, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qnHd2oCAJ5k/AAAAAAAAAAI/AAAAAAAAAAA/QzPalcLRtMI/photo.jpg?sz=128", "display_name": "Raimo", "link": "https://stackoverflow.com/users/9948224/raimo"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547137288, "post_id": 54126529, "comment_id": 95097116, "body": "exclude txt works perfectly now, but include not work with patterns, you have helped me alot, If I could do filter by pattern, I could maybe put this little by little into production.&quot;--include&quot;, &quot;<i>.xml&quot;, \t\t\t\t\t&quot;--exclude&quot;, &quot;</i>.txt&quot;,"}], "owner": {"reputation": 25, "user_id": 9948224, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qnHd2oCAJ5k/AAAAAAAAAAI/AAAAAAAAAAA/QzPalcLRtMI/photo.jpg?sz=128", "display_name": "Raimo", "link": "https://stackoverflow.com/users/9948224/raimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547133472, "creation_date": 1547115733, "last_edit_date": 1547133472, "question_id": 54126529, "link": "https://stackoverflow.com/questions/54126529/how-to-filter-files-by-extension-with-perl-filersyncp", "title": "How to filter files by extension with Perl File::RsyncP", "body": "<p>I am using Perl library File::RsyncP.</p>\n\n<p>This moment script copies all files, but I need to use\nextension and later pattern for example 2019*.xml</p>\n\n<p>I don\u00b4t know how to filter files by extension.\nI have tried following\u00a0\u00a0\u00a0\u00a0\u00a0</p>\n\n<p>I take a connection into localhost\nI have </p>\n\n<pre><code>/home/raimo/A/SRC/srcDirectory/1.xml\n/home/raimo/A/SRC/srcDirectory/2.xml\n/home/raimo/A/SRC/srcDirectory/3.txt\n</code></pre>\n\n<p>here\nI would like to copy only xml files into\u00a0\u00a0\u00a0\u00a0</p>\n\n<p>I have tried: </p>\n\n<pre><code>rsyncCmd =&gt; \"/bin/rsync -avz --include '*.xml' srcDirectory destDirectory \", and I have tired rsyncCmd =&gt; \"/bin/rsync -avz --include '*.xml' destDirectory srcDirectory \"\n</code></pre>\n\n<p>/home/raimo/A/SRC/destDirectory</p>\n\n<pre><code>my $rs = File::RsyncP-&gt;new({\n        logLevel   =&gt; 5,\n        rsyncCmd   =&gt; \"/bin/rsync --include '*.xml'\",   #check if possible to filter\n        rsyncArgs  =&gt; [\n                \"--numeric-ids\",\n                \"--perms\",\n                \"--owner\",\n                \"--group\",\n                \"--devices\",\n                \"--links\",\n                \"--ignore-times\",\n                \"--block-size=700\",\n                \"--relative\",\n                \"--recursive\",\n                \"--verbose\"\n            ],\n    });\n...\n # Receive files from remote srcDirectory to local destDirectory\n # # by running rsyncCmd with rsyncArgs.\n $rs-&gt;remoteStart(1, srcDirectory);\n</code></pre>\n"}, {"tags": ["perl", "syntax"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1547116282, "creation_date": 1547116282, "answer_id": 54126710, "question_id": 54126285, "link": "https://stackoverflow.com/questions/54126285/bareword-number-not-allowed-while-strict-subs-in-use/54126710#54126710", "title": "Bareword &quot;NUMBER&quot; not allowed while &quot;strict subs&quot; in use", "body": "<p>Without <code>use strict 'subs';</code>, identifiers that have no other grammatical meaning are treated as string literals that produce themselves when evaluated. That's very error-prone (because it easily leads to code doing one thing when doing another is expected), so we all use <code>use strict 'subs';</code> in our code to rid us of this mis-feature.</p>\n\n<p>If you want to create an operator that produces the string <code>NUMBER</code> or <code>SCALAR</code> when using <code>use strict 'subs';</code>, you'll need to use something other than <code>NUMBER</code> and <code>SCALAR</code>. As you mentioned, you could use <code>'NUMBER'</code> and <code>'SCALAR'</code>.</p>\n\n<p>The other possibility is that <code>NUMBER</code> is supposed to be the name of a constant, but that you forgot to declare/import the constant. This is exactly the type of error that <code>use strict 'subs';</code> is supposed to catch.</p>\n"}], "owner": {"reputation": 105, "user_id": 8064295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/605a5080ebf3a877a665fc1ab94d3694?s=128&d=identicon&r=PG&f=1", "display_name": "xksyvone", "link": "https://stackoverflow.com/users/8064295/xksyvone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 757, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547116282, "creation_date": 1547114925, "question_id": 54126285, "link": "https://stackoverflow.com/questions/54126285/bareword-number-not-allowed-while-strict-subs-in-use", "title": "Bareword &quot;NUMBER&quot; not allowed while &quot;strict subs&quot; in use", "body": "<p>the issue code:</p>\n\n<pre><code>{\n    port_id   =&gt; { type =&gt; SCALAR },\n    ipv4_addr =&gt; { type =&gt; SCALAR },\n    gateway   =&gt; { type =&gt; SCALAR },\n    netmask   =&gt; { type =&gt; SCALAR },\n    vlan_id   =&gt; { type =&gt; NUMBER, optional =&gt; 1 },\n}\n</code></pre>\n\n<p>I used 'use strict;' in my pm file, and based on the error info \"Bareword \"NUMBER\" not allowed while \"strict subs\" in use\", i know i need to add '' for types, such as 'NUMBER'. But before there is no NUMBER type in my code, and i did not add '' for these types, and it has not reported any errors. \nSo i want to know why NUMBER is special? </p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1547113412, "post_id": 54124096, "comment_id": 95082937, "body": "Thank you so much for explanation. I really had a very wrong view of <code>&#47;g</code> modifier before. Thanks for clarifying <code>&#47;g</code> and those context things."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1547164277, "post_id": 54124096, "comment_id": 95108587, "body": "@user15964  Most welcome :).  The <code>&#47;g</code> is indeed tricky, by context-dependent behavior. (If you want to play and see what it does a useful tool is <a href=\"https://perldoc.perl.org/functions/pos.html\" rel=\"nofollow noreferrer\">pos</a>.)  In general, context is one of the crucial concepts in Perl, and practically unavoidable."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1547164488, "last_edit_date": 1547164488, "creation_date": 1547106928, "answer_id": 54124096, "question_id": 54123633, "link": "https://stackoverflow.com/questions/54123633/value-of-binding-operator-expression-in-perl/54124096#54124096", "title": "value of binding operator expression in perl", "body": "<p>The return of the match operator depends on the context: in list context it returns all captured matches, in scalar context the true/false. The <code>say</code> imposes list context, but in the first example nothing is captured in the regex so you only get \"success.\"</p>\n\n<p>Next, the behavior of <code>/g</code> modifier also differs across contexts. In list context, with it the string keeps being scanned with the given pattern until all matches are found, and a list with them is returned.  These are your second and third examples.</p>\n\n<p>But in scalar context its behavior is a bit specific: with it the search will continue from the position of the last match, the next time round. One typical use is in the loop condition</p>\n\n<pre><code>while (/(\\w+)/g) { ... }\n</code></pre>\n\n<p>This is a bit of a tokenizer: after the body of the loop runs the next word is found, etc. </p>\n\n<p>Then the last example doesn't really make sense; you are getting the \"normal\" scalar-context matching success/fail, and <code>/g</code> doesn't do anything -- until you match on <code>$ss</code> the next time</p>\n\n<pre><code>perl -wE'\n    $s=shift||q(abc); \n    for (1..2) { $m = $s=~/(.)/g; say \"$m: $1\"; }\n'\n</code></pre>\n\n<p>prints lines <code>1:a</code> and then <code>1:b</code>.  </p>\n\n<p>Outside of iterative structures (like <code>while</code> condition) the <code>/g</code> in scalar context is usually an error, pointless at best or a quiet bug.</p>\n\n<p>See \"<em>Global matching</em>\" under <a href=\"https://perldoc.perl.org/perlretut.html#Using-regular-expressions-in-Perl\" rel=\"nofollow noreferrer\">\"Using regular expressions\" in perlretut</a> for <code>/g</code>.\nSee <a href=\"https://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">regex operators in perlop</a> in general, and about <code>/g</code> as well. A useful tool to explore <code>/g</code> workings is <a href=\"https://perldoc.perl.org/functions/pos.html\" rel=\"nofollow noreferrer\">pos</a>.</p>\n"}], "owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 54124096, "answer_count": 1, "score": 1, "last_activity_date": 1547164488, "creation_date": 1547104748, "question_id": 54123633, "link": "https://stackoverflow.com/questions/54123633/value-of-binding-operator-expression-in-perl", "title": "value of binding operator expression in perl", "body": "<p>I have some doubt about the outcome of a binding operator expression in perl. I mean expression like</p>\n\n<pre><code>string =~ /pattern/\n</code></pre>\n\n<p>I have done some simple test</p>\n\n<pre><code>$ss=\"a1b2c3\";\nsay $ss=~/a/;   # 1\nsay $ss=~/[a-z]/g;  # abc\n@aa=$ss=~/[a-z]/g;say @aa;  # abc\n$aa=@aa;say $aa;    # 3\n$aa=$ss=~/[a-z]/g;say $aa;  # 1\n</code></pre>\n\n<p>note the comment part above is the running result.</p>\n\n<p>So here comes the question, what on earth is returned by <code>$ss=~/[a-z]/g</code>, it seems that it returned an array according to code line 3,4,5. But what about the last line, why it gives 1 instead of 3 which is the length of array?</p>\n"}, {"tags": ["perl", "activestate"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1547099099, "post_id": 54122448, "comment_id": 95076904, "body": "<code>cpan SOAP::Lite</code>"}, {"owner": {"reputation": 241, "user_id": 5283489, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d6e76ba04252cfd6020fdce6ca29a076?s=128&d=identicon&r=PG&f=1", "display_name": "Anand Abhay", "link": "https://stackoverflow.com/users/5283489/anand-abhay"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1547109782, "post_id": 54122448, "comment_id": 95080934, "body": "Thank you  .. This worked."}], "owner": {"reputation": 241, "user_id": 5283489, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d6e76ba04252cfd6020fdce6ca29a076?s=128&d=identicon&r=PG&f=1", "display_name": "Anand Abhay", "link": "https://stackoverflow.com/users/5283489/anand-abhay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 241, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1547098380, "creation_date": 1547098380, "question_id": 54122448, "link": "https://stackoverflow.com/questions/54122448/unable-to-install-soap-lite", "title": "Unable to Install SOAP LITE", "body": "<p>I've tried to install SOAP::Lite from the Active State's repository but it\ngave the following error:</p>\n\n<pre><code>ppm install SOAP-Lite\nppm install failed: Can't find any package that provides SOAP-Lite\n</code></pre>\n\n<p>I read somewhere on Apache dependency but not sure if that is correct. I am using perl version 5.26.3 on windows 7</p>\n\n<p>Regards</p>\n"}]