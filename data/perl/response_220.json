[{"tags": ["bash", "perl", "syntax", "quoting"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 4, "creation_date": 1553729416, "post_id": 55388032, "comment_id": 97497833, "body": "<code>perl -lane &#39;system(qq&#47;echo &quot;$_&quot;&#47;)&#39;</code>?"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 3, "creation_date": 1553739691, "post_id": 55388032, "comment_id": 97500046, "body": "You should also consider passing system a <i>list</i> of arguments. That way, you don&#39;t have to invoke a shell and quoting is no longer an issue: <code>system(&#39;&#47;bin&#47;echo&#39;, $_)</code> -- <a href=\"https://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/system.html</a>"}, {"owner": {"reputation": 63, "user_id": 3367247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6689498393475b573470f4be9c4889d?s=128&d=identicon&r=PG&f=1", "display_name": "dqbydt", "link": "https://stackoverflow.com/users/3367247/dqbydt"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1553748546, "post_id": 55388032, "comment_id": 97501836, "body": "Thanks @Shawn, I guess my question is more about understanding bash syntax than seeking the best perl solution (although new perl knowledge is always welcome, of course). I thought I understood how single/double quoting works after reading the linked answer, but it fell short in this instance."}, {"owner": {"reputation": 63, "user_id": 3367247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6689498393475b573470f4be9c4889d?s=128&d=identicon&r=PG&f=1", "display_name": "dqbydt", "link": "https://stackoverflow.com/users/3367247/dqbydt"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1553748873, "post_id": 55388032, "comment_id": 97501905, "body": "@glennjackman I didn&#39;t know you can call <code>system</code> with a list, thanks."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1553758171, "post_id": 55388032, "comment_id": 97505114, "body": "@dqbydt For the first example, you need to insert the backslashes in front of the quotes: <code>... | perl -lane &#39;system(&quot;echo &#39;&#39;\\&quot;&#39;&#39;$_&#39;&#39;\\&quot;&#39;&#39;&quot;)&#39;</code> (compare with your original example, the backslash are not part of the shell syntax, but part of the perl argument string passed to <code>system</code>)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1553759096, "post_id": 55388032, "comment_id": 97505517, "body": "For the second example: You cannot use single quotes since <code>$_</code> is a perl variable and needs double quotes to be interpolated into the string"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 3367247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6689498393475b573470f4be9c4889d?s=128&d=identicon&r=PG&f=1", "display_name": "dqbydt", "link": "https://stackoverflow.com/users/3367247/dqbydt"}, "edited": false, "score": 0, "creation_date": 1553806035, "post_id": 55398560, "comment_id": 97533741, "body": "It turns out I <i>do</i> need double quotes in the echo command - but not because the perl string contains spaces, as I originally thought. It&#39;s because it contains <i>parentheses</i>. So the single-quote form of system needs to be changed to <code>system(&#39;echo &quot;&#39; . $_ . &#39;&quot;&#39;)</code>. And the shell&#39;s single quote escape sequence to accommodate that becomes pretty mind-numbing, lol."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 0, "last_activity_date": 1553778847, "creation_date": 1553778847, "answer_id": 55398560, "question_id": 55388032, "link": "https://stackoverflow.com/questions/55388032/how-can-i-escape-double-quotes-in-the-system-command-in-this-perl-oneliner/55398560#55398560", "title": "How can I escape double quotes in the system command in this perl oneliner?", "body": "<blockquote>\n  <p>I'd like to find out how to escape quotes within the system command in\n  the following perl oneliner:</p>\n\n<pre><code>$ ls -p | grep -v / | perl -lane 'system(\"echo \\\"$_\\\"\");'\n</code></pre>\n  \n  <p>without using the \\\" escape sequence, in the manner shown here: [...] </p>\n</blockquote>\n\n<p>Those examples are for escaping <em>single</em> quotes, your example uses <em>double</em> quotes <code>\\\"$_\\\"</code>. In Bash everything within single quote are taken literally (except the single quote itself), the same is not true for that within double quotes. For example a <code>$</code> within double quotes are not a literal <code>$</code> but indicates that a variable expansion is to follow.</p>\n\n<p>Now, in your command there are three levels of quote interpretation.</p>\n\n<ul>\n<li><p>First the outer shell (the command line):</p>\n\n<pre><code>perl -lane 'system(\"echo \\\"$_\\\"\");'\n</code></pre></li>\n<li><p>Then the perl interpreter:</p>\n\n<pre><code>system(\"echo \\\"$_\\\");\n</code></pre></li>\n<li><p>Then a second shell (here, Bash is used):</p>\n\n<pre><code>echo \"xxx\"\n</code></pre></li>\n</ul>\n\n<p>where <code>xxx</code> is the expansion of <code>$_</code> in the <code>perl</code> script</p>\n\n<p>Your command does not contain any internal <em>single</em> quotes, so there is no need to use the Bash quoting constructs for escaping single quotes, like</p>\n\n<pre><code>It's fine  -&gt; 'It'\"'\"'s fine'\n</code></pre>\n\n<p>or </p>\n\n<pre><code>It's fine  -&gt; 'It'\\''s fine'\n</code></pre>\n\n<p>Further, you need to escape the double quote in the perl script</p>\n\n<pre><code>system(\"echo \\\"$_\\\"\")\n</code></pre>\n\n<p>since they are inside double quotes, alternatively you could remove them\nsince <code>echo</code> does not need double quotes here:</p>\n\n<pre><code>system(\"echo $_\")\n</code></pre>\n\n<p>would work fine, or you could do as proposed in the comments:</p>\n\n<pre><code>system(qq/echo \"$_\"/)\n</code></pre>\n\n<p>or use the <a href=\"https://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">LIST form of <code>system</code> with more than one argument</a></p>\n\n<pre><code>system(\"/bin/echo\", $_)\n</code></pre>\n\n<p>However, if you wanted to use single quotes, for example:</p>\n\n<pre><code>system('echo ' . $_)\n</code></pre>\n\n<p>you would need to invoke the shell's single quote escapes:</p>\n\n<pre><code>'system('\"'\"'echo ''\"' . $_)'\n</code></pre>\n\n<p>or (using double quotes):</p>\n\n<pre><code>\"system('echo ' . \"'$'\"_)\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 63, "user_id": 3367247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6689498393475b573470f4be9c4889d?s=128&d=identicon&r=PG&f=1", "display_name": "dqbydt", "link": "https://stackoverflow.com/users/3367247/dqbydt"}, "is_accepted": false, "score": 1, "last_activity_date": 1553810024, "creation_date": 1553810024, "answer_id": 55407423, "question_id": 55388032, "link": "https://stackoverflow.com/questions/55388032/how-can-i-escape-double-quotes-in-the-system-command-in-this-perl-oneliner/55407423#55407423", "title": "How can I escape double quotes in the system command in this perl oneliner?", "body": "<p>I'd like to post some insights I have gleaned from the helpful comments and the accepted answer (thank you all!). In the original command I posed:\n<code>$ ls -p | grep -v / | perl -lane 'system(\"echo \\\"$_\\\"\");'</code>\nthere are <em>two</em> interpreters: bash, and perl, coming into play:</p>\n\n<ol>\n<li><p>The original command, interpreted by bash, doesn't touch anything within the (sole pair of) single quotes (i.e. everything after the <code>-lane</code>) and passes it intact as a script to perl.</p></li>\n<li><p>The perl interpreter then processes this script, which consists of the single <code>system</code> command. It is the <em>perl</em> interpreter that is responsible for generating the final <code>echo</code> command line which is tossed back to bash for interpretation. This final bash command needs to be dynamically generated from <code>$_</code>. There are two ways to do this:</p>\n\n<p>(a) Use the system command with double quotes so that the <code>$_</code> gets interpolated [i.e. <code>system(\"echo $_\")</code>] But note, the string echoed needs to have <code>\"</code>s around it because it could contain parentheses. So we need <em>perl</em> to emit, in this final <em>bash</em> command string, literal <code>\"</code>s, around the <code>$_</code> (which will get expanded by virtue of the outer <code>\"</code>s, prior to being sent to bash). There are two ways now to accomplish <em>this</em>:</p>\n\n<p>(a-i) Escape the <code>\"</code> using a <code>\\</code> to emit literal quotes: <code>\"echo \\\"$_\\\"\"</code></p>\n\n<p>(a-ii) Use the <code>qq</code> operator, which demotes the special status accorded to <code>\"</code>s within a perl string, and which then can be used as normal characters: <code>qq(echo \"$_\")</code>.</p>\n\n<p>(b) - OR - the other way of generating the final bash command is to use <em>single</em> quotes in the <code>system</code> command as suggested by @H\u00e5kon in his answer: <code>system('echo ' . $_)</code>. But we still do need the quotes around <code>$_</code> as discussed earlier, so we need to change this  to: <code>system('echo \"' . $_ . '\"')</code>. Now the task reduces to figuring out bash's single-quote escapes to make sure perl sees this string.</p></li>\n</ol>\n\n<p>The final forms of the perl command are:</p>\n\n<p>2-a-i: <code>perl -lane 'system(\"echo \\\"$_\\\"\");'</code></p>\n\n<p>2-a-ii: <code>perl -lane 'system(qq/echo \"$_\"/);'</code> </p>\n\n<p>And finally:</p>\n\n<p>2-b: <code>perl -lane 'system('\"'\"'echo \"'\"'\"'.$_.'\"'\"'\"'\"'\"');'</code></p>\n\n<p>This perversion of <code>'</code>s and <code>\"</code>s is what I set out to attain, so MISSION ACCOMPLISHED! :D</p>\n\n<p>Editorial note: From a practical, usability pov, the <code>qq</code> form seems most amenable to just pasting the final, desired bash command into the perl <code>system</code> call (and you can then just replace filenames with <code>$_</code>).</p>\n"}], "owner": {"reputation": 63, "user_id": 3367247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6689498393475b573470f4be9c4889d?s=128&d=identicon&r=PG&f=1", "display_name": "dqbydt", "link": "https://stackoverflow.com/users/3367247/dqbydt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 910, "favorite_count": 0, "accepted_answer_id": 55398560, "answer_count": 2, "score": 2, "last_activity_date": 1553810024, "creation_date": 1553729303, "last_edit_date": 1553806249, "question_id": 55388032, "link": "https://stackoverflow.com/questions/55388032/how-can-i-escape-double-quotes-in-the-system-command-in-this-perl-oneliner", "title": "How can I escape double quotes in the system command in this perl oneliner?", "body": "<p>For my edification, I'd like to find out how to escape quotes within the <code>system</code> command in the following perl oneliner:</p>\n\n<p><code>$ ls -p | grep -v / | perl -lane 'system(\"echo \\\"$_\\\"\");'</code></p>\n\n<p>without using the <code>\\\"</code> escape sequence, in the manner shown here: <a href=\"https://stackoverflow.com/a/1250279/3367247\">https://stackoverflow.com/a/1250279/3367247</a></p>\n\n<p>(Obviously this command does nothing useful; it just prints filenames that have spaces in them. But it serves to explain my problem succintly.)</p>\n\n<p>I tried the following (pardon the images, but I have found highlighting easiest to decipher the quoting):</p>\n\n<ol>\n<li>system command with double quotes: <code>system(\"echo \"$_\"\")</code>\n<a href=\"https://i.stack.imgur.com/JsLqo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JsLqo.png\" alt=\"enter image description here\"></a></li>\n</ol>\n\n<p>Code: <code>$ ls -p | grep -v / | perl -lane 'system(\"echo ''\"''$_''\"''\");'</code></p>\n\n<ol start=\"2\">\n<li>system command with single quotes: <code>system('echo \"$_\"')</code>\n<a href=\"https://i.stack.imgur.com/xaSsl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xaSsl.png\" alt=\"enter image description here\"></a></li>\n</ol>\n\n<p>Code: <code>$ ls -p | grep -v / | perl -lane 'system('\"'\"'echo \"$_\"'\"'\"');'</code></p>\n\n<p>Neither of these work. Is there a way to accomplish this in the manner of the linked answer?</p>\n\n<p>EDIT: I need double-quotes around the <code>$_</code> in the echo command because the string in <code>$_</code> contains <em>parentheses</em>, not because it contains spaces, as I originally thought.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "edited": false, "score": 0, "creation_date": 1553728358, "post_id": 55387674, "comment_id": 97497537, "body": "So basically &quot;loop variable&quot; in this context only refers to the iterator, and not anything else within the body of the loop?  If <code>continue</code> doesn&#39;t have access to the lexical variables inside the for loop, is there some other obvious method of ensuring the old file handle is closed after each iteration?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "edited": false, "score": 2, "creation_date": 1553732975, "post_id": 55387674, "comment_id": 97498687, "body": "@BryKKan it&#39;ll automatically be closed when it goes out of scope and the reference count on it drops to 0."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1554416066, "post_id": 55387674, "comment_id": 97755451, "body": "The proposed syntax doesn&#39;t actually help. Imagine <code>for (...) { next; my $x = 13; continue { ... $x ... } }</code>. I mean, we could still do it, but it introduces another case of undefined behaviour. Worse, it&#39;s one that&#39;s that&#39;s super easy to invoke by accident. Maybe that leading <code>next</code> wasn&#39;t there originally, but it gets added later... Whenever the <code>continue</code> block comes up, I think how much nice it would be to have it within the loop block, but that just wouldn&#39;t work."}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": true, "score": 4, "last_activity_date": 1553727130, "creation_date": 1553727130, "answer_id": 55387674, "question_id": 55387484, "link": "https://stackoverflow.com/questions/55387484/use-lexical-variable-declared-in-for-loop-in-continue-block/55387674#55387674", "title": "Use Lexical Variable Declared in For Loop in Continue Block", "body": "<p>Your <code>$path</code> variable is still in scope inside the <code>continue BLOCK</code>, but the stuff inside <code>for</code>'s BLOCK is out of scope because you've reached the end of that BLOCK (you've hit the end brace / exited the braces). The <code>$path</code> variable, however, is not inside the braces, so can be visible inside the <code>continue BLOCK</code> (even though it's not visible beyond that).</p>\n\n<p>If the syntax were like this:</p>\n\n<pre><code>for (...)\n{\n $x = stuff();\n continue { more_stuff($x) }\n}\n</code></pre>\n\n<p>then I would expect <code>$x</code> to be visible. IIRC, perl 6 has stuff like this, but in perl 5, the <code>continue BLOCK</code> is outside the loop's block, and thus doesn't see lexical variables inside that block.</p>\n"}, {"comments": [{"owner": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "edited": false, "score": 0, "creation_date": 1554414993, "post_id": 55392578, "comment_id": 97755113, "body": "+1 <code>Perl doesn&#39;t know at compile-time which of the loop block&#39;s variables will be declared when the continue block is entered</code> - I hadn&#39;t considered that, probably because my variable was declared on the first line, and therefore (seemingly?) guaranteed to exist. Of course, as I now see, from the perspective of the compiler, that&#39;s not true of the rest of the block, and may not even be true for some edge cases on the first line (i.e. conditional execution)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "edited": false, "score": 1, "creation_date": 1554416449, "post_id": 55392578, "comment_id": 97755552, "body": "The compiler could study the code and determine it&#39;s safe to use a variable, but that would feel even weirder than the current situation to programmers. For one, programmers would have to make the same analysis the compiler does to figure out exactly when a variable gets freed. This could matter if it contains an object with destructor."}, {"owner": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "edited": false, "score": 0, "creation_date": 1554416527, "post_id": 55392578, "comment_id": 97755581, "body": "Agreed. I just hadn&#39;t considered it from the perspective of someone trying to write a compiler until you pointed that out."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "edited": false, "score": 1, "creation_date": 1554416609, "post_id": 55392578, "comment_id": 97755608, "body": "My last comment is suppose to point out it would be weird from the perspective of the programmer too. Being simpler for the compiler not to handle it isn&#39;t reason enough not to handle it."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1553802012, "last_edit_date": 1553802012, "creation_date": 1553759710, "answer_id": 55392578, "question_id": 55387484, "link": "https://stackoverflow.com/questions/55387484/use-lexical-variable-declared-in-for-loop-in-continue-block/55392578#55392578", "title": "Use Lexical Variable Declared in For Loop in Continue Block", "body": "<p>The loop variable is garanteed to have been declared before the <code>continue</code> block is evaluated, so that variable can be provided to the <code>continue</code> block.</p>\n\n<p>But any part of the the loop block can be skipped (e.g. using <code>next</code>), so Perl doesn't know at compile-time which of the loop block's variables will be declared when the <code>continue</code> block is entered, so it can't make any of them available to the <code>continue</code> block.</p>\n\n<hr>\n\n<p>If you're not content with the file handle getting closed automatically (e.g. because you want to detect write errors), you could use a scope guard instead of a <code>continue</code> block.</p>\n\n<pre><code>use Sub::ScopeFinalizer qw( scope_finalizer );\n\nfor my $qfn (@qfns) {\n   my $fh;\n   my $guard = scope_finalizer {\n      if ($fh) {\n         close($fh)\n            or die(\"Error writing to \\\"$qfn\\\": $!\\n\");\n      }\n   };\n\n   open($fh, '&gt;', $qfn)\n      or die(\"Can't create \\\"$qfn\\\": $!\\n\");\n\n   ...\n}\n</code></pre>\n"}], "owner": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 55387674, "answer_count": 2, "score": 3, "last_activity_date": 1553802012, "creation_date": 1553725915, "question_id": 55387484, "link": "https://stackoverflow.com/questions/55387484/use-lexical-variable-declared-in-for-loop-in-continue-block", "title": "Use Lexical Variable Declared in For Loop in Continue Block", "body": "<p>I am having trouble getting one of my modules to compile with what looks a variable scoping issue, but I don't understand why.</p>\n\n<p><em>Sample Code</em>:</p>\n\n<pre><code>PATH: foreach my $path (@paths) {\n    open(my $file, '&lt;', $path) or next PATH;\n\n    my %properties;\n    LINE: while (&lt;$file&gt;) {\n        $_ =~ /$property_regex/ or next LINE;\n        $properties{$1} = $2;\n    }\n\n    foreach (@property_keys) {\n        unless ($properties{$_}) {\n            # do stuff\n            next PATH;\n    }\n\n    if ( $irrelevant_condition ) {\n        # do stuff\n        next PATH;\n    }\n\n    foreach my $new_var (@new_list) {\n        # do stuff (does not iterate PATH loop)\n    }\n} continue {\n    if (defined $file) { close($file) or die; }\n}\n</code></pre>\n\n<hr>\n\n<p>Translated to the stripped down code above, the error I'm getting is:</p>\n\n<blockquote>\n  <p>Global symbol \"$file\" requires explicit package name at line 25</p>\n</blockquote>\n\n<p>Namely, it seems to be complaining about the use of <code>$file</code> in the <code>continue</code> block at the bottom. As you can see, <code>$file</code> is declared as a lexical variable on line 2, within the outer foreach loop (labelled PATH).</p>\n\n<p>However, based on the <a href=\"https://perldoc.perl.org/functions/continue.html\" rel=\"nofollow noreferrer\">perldoc for continue</a>, I would expect <code>$file</code> to still be in scope:</p>\n\n<blockquote>\n  <p>[...] it is always executed just before the conditional is about to be evaluated again, just like the third part of a for loop in C. Thus it can be used to increment a loop variable, even when the loop has been continued [...]</p>\n</blockquote>\n\n<p>In order to be able to increment a loop variable, wouldn't the continue block have be treated as part of the same lexical scope as the loop to which it is attached?</p>\n\n<p>What am I missing?</p>\n\n<hr>\n\n<p><em>Note: This module is a Moo class, so while I do not have an explicit <code>use strict</code> statement anywhere, <a href=\"https://metacpan.org/pod/Moo#INCOMPATIBILITIES-WITH-MOOSE\" rel=\"nofollow noreferrer\">when you use Moo we enable strict and warnings</a>.</em></p>\n"}, {"tags": ["perl", "redirect", "pipe", "filenames"], "comments": [{"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1553708416, "post_id": 55383363, "comment_id": 97488753, "body": "uh, yes? If you have an argument, read from that file, otherwise read from stdin."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1553709502, "post_id": 55383363, "comment_id": 97489338, "body": "Yes, this is exactly the use case that the special filehandle <code>ARGV</code> addresses."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1553711794, "post_id": 55383363, "comment_id": 97490564, "body": "Nit: <code>cat dogcatrat  | fmt</code> and <code>fmt &lt; dogcatrat</code> both feed <code>fmt</code>&#39;s STDIN. There&#39;s no difference between the two as far as <code>fmt</code> is concerned."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553711878, "post_id": 55383752, "comment_id": 97490606, "body": "It will even read from multiple files if multiple files are provided, just like <code>cat</code>, <code>grep</code>, etc."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553711954, "post_id": 55383752, "comment_id": 97490636, "body": "What the answer doesn&#39;t make it clear is that you can use <code>use strict; use warnings; while (my $line = &lt;&gt;) { ... }</code> if you want to be compatible with older versions of Perl. But don&#39;t make setuid scripts (or scripts used by setuid scripts) that use <code>&lt;&gt;</code>."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 5, "last_activity_date": 1553721632, "last_edit_date": 1553721632, "creation_date": 1553709512, "answer_id": 55383752, "question_id": 55383363, "link": "https://stackoverflow.com/questions/55383363/can-a-perl-script-be-written-to-receive-data-from-any-of-1-file-2-stdin-3/55383752#55383752", "title": "can a perl script be written to receive data from any of (1) file, (2) stdin, (3) redirect?", "body": "<p>The <code>ARGV</code> special filehandle will do this by default. It is also the handle used by readline (aka the <code>&lt;&gt;</code> and <code>&lt;&lt;&gt;&gt;</code> operators) when not given a handle. So this is actually pretty common in Perl scripts.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse 5.022;\nuse warnings;\nwhile (my $line = &lt;&lt;&gt;&gt;) {\n  # $line from one of the filenames passed as an argument, otherwise STDIN\n  # $ARGV is the current filename, or - when reading from STDIN\n}\n</code></pre>\n\n<p>You can use the <code>&lt;&gt;</code> operator instead to support older versions of Perl, but the <code>&lt;&lt;&gt;&gt;</code> operator <a href=\"https://perldoc.pl/perl5220delta#New-double-diamond-operator\" rel=\"nofollow noreferrer\">added in Perl 5.22</a> is a better option for this task if available, because the standard <code>&lt;&gt;</code> operator allows passing strange things like <code>date|</code> to run processes rather than read files.</p>\n\n<p>For safer filename-only operation while supporting older versions of Perl, you could use <a href=\"https://metacpan.org/pod/ARGV::readonly\" rel=\"nofollow noreferrer\">ARGV::readonly</a> or emulate the <code>&lt;&lt;&gt;&gt;</code> operator like the following:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nunshift @ARGV, '-' unless @ARGV;\nwhile (my $file = shift) {\n  my $fh;\n  if ($file eq '-') {\n    $fh = \\*STDIN;\n  } else {\n    open $fh, '&lt;', $file or die \"open $file failed: $!\";\n  }\n  while (my $line = &lt;$fh&gt;) {\n    # ...\n  }\n}\n</code></pre>\n\n<p>(Technically the <code>&lt;&lt;&gt;&gt;</code> operator also does not allow passing <code>-</code> as an argument to read STDIN, but it is your choice if you want to allow that.)</p>\n"}, {"tags": [], "owner": {"reputation": 914, "user_id": 1461307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zhYSU.png?s=128&g=1", "display_name": "Jacob Wegelin", "link": "https://stackoverflow.com/users/1461307/jacob-wegelin"}, "is_accepted": false, "score": 1, "last_activity_date": 1553710160, "creation_date": 1553710160, "answer_id": 55383913, "question_id": 55383363, "link": "https://stackoverflow.com/questions/55383363/can-a-perl-script-be-written-to-receive-data-from-any-of-1-file-2-stdin-3/55383913#55383913", "title": "can a perl script be written to receive data from any of (1) file, (2) stdin, (3) redirect?", "body": "<p>It appears that the following script fills the bill. </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse 5.18.2;\nlocal $/ = \"\"; # input record separator: one paragraph at a time\nwhile (&lt;&gt;) {\n    print;\n    print \"\\n\";\n    say '-' x 30;\n}\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>printf '%b' 'dog \\ncat \\nrat\\n' &gt; aaa\ntry.pl aaa\ncat aaa | try.pl\ntry.pl &lt; aaa\n</code></pre>\n"}], "owner": {"reputation": 914, "user_id": 1461307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zhYSU.png?s=128&g=1", "display_name": "Jacob Wegelin", "link": "https://stackoverflow.com/users/1461307/jacob-wegelin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1553721632, "creation_date": 1553708060, "question_id": 55383363, "link": "https://stackoverflow.com/questions/55383363/can-a-perl-script-be-written-to-receive-data-from-any-of-1-file-2-stdin-3", "title": "can a perl script be written to receive data from any of (1) file, (2) stdin, (3) redirect?", "body": "<p>Several unix utilities, such as fmt, head, and cat, can receive data in any of 3 ways: a filename; a pipe from standard input; or a redirect \"&lt;\". For instance:</p>\n\n<pre><code>printf '%b' 'dog \\ncat \\nrat\\n' &gt; dogcatrat\nfmt dogcatrat\ncat dogcatrat  | fmt\nfmt &lt; dogcatrat\n</code></pre>\n\n<p>Can one write a perl script that will behave with the same versatility? Or is there a good reason not to attempt this? And is \"pipe from standard input\" the right way to refer to the line of code that starts with cat?</p>\n\n<p>I want to write myfmt.pl, to be used in any of these three ways.</p>\n"}, {"tags": ["perl", "parsing", "html-parsing", "html-lists", "token"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1553707096, "post_id": 55382883, "comment_id": 97488040, "body": "It&#39;s unclear what you&#39;re asking for"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1553707211, "post_id": 55382883, "comment_id": 97488091, "body": "It seems like you are trying to give a filename to <code>HTML::TokeParser</code>. Please clarify what you are trying to do? Why do you want call it without a filename?"}, {"owner": {"reputation": 1, "user_id": 11266476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd2e72296a0e97dd25698ea5e8b7b1d7?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11266476/jack"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1553707667, "post_id": 55382883, "comment_id": 97488326, "body": "@H&#229;konH&#230;gland I want because in some another folder whatever .html file are there my programme should be run. for that folder."}, {"owner": {"reputation": 1, "user_id": 11266476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd2e72296a0e97dd25698ea5e8b7b1d7?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11266476/jack"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553707787, "post_id": 55382883, "comment_id": 97488374, "body": "@ikegami I am going to ask how can I parse file without giving file specific file name?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1553707793, "post_id": 55382883, "comment_id": 97488376, "body": "So sometimes you give a filename, and sometimes you give a directory name? And when you give a directory name you want all files in the directory to be parsed?"}, {"owner": {"reputation": 1, "user_id": 11266476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd2e72296a0e97dd25698ea5e8b7b1d7?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11266476/jack"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1553707886, "post_id": 55382883, "comment_id": 97488432, "body": "@mob yes exactly."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1553707999, "post_id": 55382883, "comment_id": 97488505, "body": "So you&#39;re question has nothing to do with parsing or HTML::TokeParser, and is actually about determining whether a path references a directory or not, and getting the list of files in the directory if it references a directory? If I&#39;m correct, could you please edit your post to ask your actual question?"}, {"owner": {"reputation": 1, "user_id": 11266476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd2e72296a0e97dd25698ea5e8b7b1d7?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11266476/jack"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553708395, "post_id": 55382883, "comment_id": 97488738, "body": "@ikegami In the first line, I give the file name. then my programme will start to parse that file and all other files. But my question is I don&#39;t want to pass that file name. If I run my programme only with directory then it should be automatically select all the .html file and need to start parsing."}, {"owner": {"reputation": 1, "user_id": 11266476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd2e72296a0e97dd25698ea5e8b7b1d7?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11266476/jack"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553708485, "post_id": 55382883, "comment_id": 97488793, "body": "@ikegami if you see the &quot;mob&quot; comment. you will understand."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1553708932, "post_id": 55382883, "comment_id": 97489035, "body": "You need to write code that determines whether it was given a filename or a directory name, and then act accordingly. If it&#39;s a directory, find all the HTML files, then process them. If it&#39;s a file, process just that file. As ikegami says, it&#39;s irrelevant to the question what you actually do with those files."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1553764629, "last_edit_date": 1553764629, "creation_date": 1553711631, "answer_id": 55384301, "question_id": 55382883, "link": "https://stackoverflow.com/questions/55382883/how-can-i-parser-file-without-giving-file-name-in-perl/55384301#55384301", "title": "How can I Parser file without giving file name in Perl?", "body": "<p>Your question doesn't appear to have anything to do with parsing or HTML::TokeParser; it appears to be about determining whether a path references a directory or not, and getting the list of files in the directory if it references a directory.</p>\n\n<p><a href=\"http://perldoc.perl.org/functions/stat.html\" rel=\"nofollow noreferrer\"><code>stat</code></a> and <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\"><code>-d</code></a> (in conjunction or independently) can be used to test if a path references a directory.</p>\n\n<p>At the lowest level, <a href=\"http://perldoc.perl.org/functions/opendir.html\" rel=\"nofollow noreferrer\"><code>opendir</code></a>+<a href=\"http://perldoc.perl.org/functions/readdir.html\" rel=\"nofollow noreferrer\"><code>readdir</code></a>+<a href=\"http://perldoc.perl.org/functions/closedir.html\" rel=\"nofollow noreferrer\"><code>closedir</code></a> is used to read a directory. The <a href=\"http://perldoc.perl.org/functions/glob.html\" rel=\"nofollow noreferrer\"><code>glob</code></a> builtin and numerous modules provide alternatives ways of doing this.</p>\n\n<p>Recursive search:</p>\n\n<pre><code>sub process {\n   for my $qfn (@_) {\n      stat($qfn)\n         or die(\"Can't stat \\\"$qfn\\\": $!\\n\");\n\n       if (-d _) {\n          process(glob(\"\\Q$qfn\\E/*\"));\n       }\n       elsif ($qfn =~ /\\.html\\z/) {\n          process_html_file($qfn);\n       }\n   }\n}\n\nprocess('www');\n</code></pre>\n\n<p>Non-recursive search:</p>\n\n<pre><code>sub process {\n   for my $qfn (@_) {\n      stat($qfn)\n         or die(\"Can't stat \\\"$qfn\\\": $!\\n\");\n\n       if (-d _) {\n          process_html_file(glob(\"\\Q$qfn\\E/*.html\"));\n       }\n       elsif ($qfn =~ /\\.html\\z/) {\n          process_html_file($qfn);\n       }\n   }\n}\n\nprocess('www');\n</code></pre>\n\n<p>Alternatively, you could use <a href=\"https://metacpan.org/pod/File::Find::Rule\" rel=\"nofollow noreferrer\">File::Find::Rule</a>.</p>\n\n<p>Recursive search:</p>\n\n<pre><code>use File::Find::Rule qw( );\n\nprocess_html_file($_)\n   for File::Find::Rule-&gt;name('*.html')-&gt;file-&gt;in('www');\n</code></pre>\n\n<p>Non-recursive search:</p>\n\n<pre><code>use File::Find::Rule qw( );\n\nprocess_html_file($_)\n   for File::Find::Rule-&gt;maxdepth(1)-&gt;name('*.html')-&gt;file-&gt;in('www');\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11266476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd2e72296a0e97dd25698ea5e8b7b1d7?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11266476/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1553764629, "creation_date": 1553706417, "last_edit_date": 1553708167, "question_id": 55382883, "link": "https://stackoverflow.com/questions/55382883/how-can-i-parser-file-without-giving-file-name-in-perl", "title": "How can I Parser file without giving file name in Perl?", "body": "<p>When I run the programme at that time I only give a directory name I want all files in the directory to be parsed? Here is my code </p>\n\n<pre><code>my @indexFiles= \"www/I.html\";\nmy @rdata = readFile(\"@indexFiles\");\nsub readFile{\n  my $somefile = $_[0];\n  my @links = ($somefile);\n  my $p = HTML::TokeParser-&gt;new($somefile) || die \"Can't open: $!\";\n  while (my $token = $p-&gt;get_tag(\"img\",\"a\")){\n     my $currentlink = $token-&gt;[1]{href} || $token-&gt;[1]{src};\n     my $finalLink= $directory.\"/\".$currentlink ; \n     if($currentlink =~ /\\.html$/){\n         my @data = readFile($finalLink);  \n         push @links,@data;\n     } else{\n          push @links,$finalLink;\n     }\n  }\n  return @links;\n}\n</code></pre>\n\n<p>In <code>www</code> folder I have 3 HTML file, 2 folder.</p>\n\n<p><code>my @indexFiles= \"www/I.html\"</code> In this line I pass specific path name and file. I don't want to pass that name. Instead of this, it will select automatically. </p>\n\n<p>For example: When I run my programme <code>perl c.pl www</code>. It should be Parse all the file. \nI give the specific file name <code>I.html</code> then after it will be going to find img and a tag. </p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1553700516, "post_id": 55380778, "comment_id": 97484051, "body": "Which one is line 75?"}, {"owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1553700638, "post_id": 55380778, "comment_id": 97484129, "body": "The line that states: <code>@{ $loscore{$id}} = @arr;</code> throws the error"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1553701223, "post_id": 55380778, "comment_id": 97484512, "body": "Earlier you have <code>$loscore{$id} .= 0;</code> Appending a number to a string is a bit odd - I&#39;d have used <code>&quot;0&quot;</code>, but perl will convert it so it works. The key bit though is <code>%loscore</code> holds strings, not array references. Hence that error."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "edited": false, "score": 0, "creation_date": 1553703746, "post_id": 55381547, "comment_id": 97486159, "body": "I appreciate your help! After looking at it again, I think I want to use three hashes of arrays: <code>%HoA, %loscore, %maxscore</code>. If I want each initial value in <code>%loscore</code> to be <code>0</code> and each initial value in <code>%maxscore</code> to be <code>-30</code>, do you have any advice for creating these two hashes of arrays?"}, {"owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "edited": false, "score": 0, "creation_date": 1553703863, "post_id": 55381547, "comment_id": 97486235, "body": "I am currently trying <code>map</code> to do this."}, {"owner": {"reputation": 1280, "user_id": 8513648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c59086b9318c37cc02acaeb85fef8f6?s=128&d=identicon&r=PG", "display_name": "J-L", "link": "https://stackoverflow.com/users/8513648/j-l"}, "reply_to_user": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "edited": false, "score": 0, "creation_date": 1553708135, "post_id": 55381547, "comment_id": 97488577, "body": "If you want to initialize each entry of <code>%loscore</code> and <code>%maxscore</code> to 0 and -30, then they necessarily cannot be &quot;Hashes of Arrays.&quot;  Instead, they will be &quot;Hashes of Numbers.&quot;  In other words, if you have a hash that holds array references as values (making it a &quot;Hash of Arrays&quot;), you can&#39;t have it hold numbers as its values.  Maybe your intention was to initialize <code>%loscore</code> as <code>$loscore{$id} = [ 0 ];</code>.  That way <code>%loscore</code> is indeed a &quot;Hash of Arrays,&quot; where the arrays hold numbers as its elements."}, {"owner": {"reputation": 1280, "user_id": 8513648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c59086b9318c37cc02acaeb85fef8f6?s=128&d=identicon&r=PG", "display_name": "J-L", "link": "https://stackoverflow.com/users/8513648/j-l"}, "reply_to_user": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "edited": false, "score": 0, "creation_date": 1553708410, "post_id": 55381547, "comment_id": 97488748, "body": "Looking at your code again, I&#39;m thinking that when you wrote <code>$loscore{$id} .= 0;</code> you <i>meant</i> to write <code>push @{ $loscore{$id} }, 0;</code>.  (And when you wrote <code>$maxscore{$id} .= 0;</code> you meant to write <code>push @{ $maxscore{$id} }, -30;</code>.)  This change will append 0 (or -30) to a value in <code>%loscore</code> that happens to be an array.  Maybe this is what you want?"}, {"owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "edited": false, "score": 0, "creation_date": 1553712615, "post_id": 55381547, "comment_id": 97490937, "body": "The <code>push</code> method you suggested is the closest to what I want. Yes, I want a number associated with each <code>$id</code>, liked you stated, but I want multiple numbers within each <code>$id</code>. So <code>$loscore{$id}</code> will have multiple scores that can be accessed by the position in the array that is referenced."}], "tags": [], "owner": {"reputation": 1280, "user_id": 8513648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c59086b9318c37cc02acaeb85fef8f6?s=128&d=identicon&r=PG", "display_name": "J-L", "link": "https://stackoverflow.com/users/8513648/j-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1553702265, "creation_date": 1553702265, "answer_id": 55381547, "question_id": 55380778, "link": "https://stackoverflow.com/questions/55380778/perl-creating-and-manipulating-hash-of-arrays-for-log-odds-scores-of-dna-sequen/55381547#55381547", "title": "Perl: Creating and manipulating hash of arrays for log-odds scores of DNA sequences", "body": "<p>I see a few issues in your code.  Consider these lines:</p>\n\n<pre><code>$HoA{$id} = [ split(//) ];  # Splits the contents to allow for position reference later\n$loscore{$id} .= 0;  # Creates a hash with each id number to have a log-odds score (initial score 0)\n$maxscore{$id} .= -30;  # Creates a hash with each id number to have a maxscore (initial score -30)\n</code></pre>\n\n<p>According to your comments, you appear to want to initialize the entries of <code>%loscore</code> and <code>%maxscore</code> with 0 and -30.  However, instead of using the good old <code>=</code> sign, you're using the <code>.=</code> operator (which appends strings).  I don't think this is what you want, so consider changing the <code>.=</code> to just <code>=</code>.</p>\n\n<p>(Or maybe you meant to use <code>//=</code> instead.  That way, if <code>%loscore</code> and <code>%maxscore</code> already have an <code>$id</code> entry, it won't be overwritten.  But only you can say for sure if you meant to use the <code>//=</code> operator.)</p>\n\n<p>So now let's look at <code>$loscore{$id} = 0</code>.  This tells us that <code>%loscore</code> is a hash (or \"associated array\") that, for each entry, takes an $id for the key, and a number as a value.</p>\n\n<p>However, further down in your code you have this:</p>\n\n<pre><code>@{ $loscore{$id} } = @arr;\n</code></pre>\n\n<p>The fact that <code>$loscore{$id}</code> is wrapped by <code>${ ... }</code> tells us that the values in <code>%loscore</code> are array references.  But we already established above that its values are numbers!</p>\n\n<p>And because you're treating a number as an array reference, Perl sees that as an error.</p>\n\n<p>What you <em>may</em> have meant to write instead was:</p>\n\n<pre><code>@{ $HoA{$id} } = @arr;\n</code></pre>\n\n<p>Since the values to the <code>%HoA</code> hash contains array references, it makes sense that you would want to de-reference <em>that</em> as an array.</p>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "is_accepted": false, "score": 0, "last_activity_date": 1553713964, "creation_date": 1553713964, "answer_id": 55384885, "question_id": 55380778, "link": "https://stackoverflow.com/questions/55380778/perl-creating-and-manipulating-hash-of-arrays-for-log-odds-scores-of-dna-sequen/55384885#55384885", "title": "Perl: Creating and manipulating hash of arrays for log-odds scores of DNA sequences", "body": "<p>I THINK this solves the problem:\nReplace</p>\n\n<p><code>$loscore{$id} .= 0;\n$maxscore{$id} .= -30;</code></p>\n\n<p>With</p>\n\n<pre><code>foreach $id (keys %HoA)\n    {\n        for my $len (0..(length($HoA{$id})-$width-1))\n        {\n            push @{ $loscore{$id} }, 0;\n            push @{ $maxscore{$id} }, -30;\n        }\n    }\n</code></pre>\n\n<p>Let me know if you have anything to add.</p>\n"}], "owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1553713964, "creation_date": 1553700074, "last_edit_date": 1553700582, "question_id": 55380778, "link": "https://stackoverflow.com/questions/55380778/perl-creating-and-manipulating-hash-of-arrays-for-log-odds-scores-of-dna-sequen", "title": "Perl: Creating and manipulating hash of arrays for log-odds scores of DNA sequences", "body": "<p>it's me again. I am having trouble creating a hash of arrays even after looking at documentation. I want the HoA to contain the log-odds score of a motif (smaller sequence) within a DNA sequence. I want the structure to look like:</p>\n\n<pre><code>$HoA{$id}[$pos] = #score based on the position\n</code></pre>\n\n<p>Where the <code>$id</code> is the sequence ID and the <code>$pos</code> is the position within the sequence at which the motif starts. I input a .txt file containing DNA sequences that is formatted as such:</p>\n\n<pre><code>&gt;Sequence_1\nTCAGAACCAGTTATAAATTTATCATTTCCTTCTCCACTCCT\n&gt;Sequence_2\nCCCACGCAGCCGCCCTCCTCCCCGGTCACTGACTGGTCCTG\n&gt;Sequence_3\nTCGACCCTCTGGAACCTATCAGGGACCACAGTCAGCCAGGCAAG\n</code></pre>\n\n<p>For example: a motif at position 2 for Sequence 1 would be 'AGA'.\nBelow is the code I have so far (it is simplified a little):</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper; \n\nprint \"Please enter the filename of the fasta sequence data: \";\nmy $filename1 = &lt;STDIN&gt;;\n\n#Remove newline from file\nchomp $filename1;\n\n#Open the file and store each dna seq in hash\nmy %HoA = ();\nmy %loscore = ();\nmy $id = '';\nopen (FILE, '&lt;', $filename1) or die \"Cannot open $filename1.\",$!;\nmy $dna;\nwhile (&lt;FILE&gt;)\n{\n    if($_ =~ /^&gt;(.+)/)\n    {\n        $id = $1; #Stores 'Sequence 1' as the first $id, etc.\n    }\n    else\n    {\n        $HoA{$id} = [ split(//) ]; #Splits the contents to allow for position reference later\n        $loscore{$id} .= 0; #Creates a hash with each id number to have a log-odds score (initial score 0)\n        $maxscore{$id} .= -30; #Creates a hash with each id number to have a maxscore (initial score -30)\n    }\n}\nclose FILE;\n\nmy $width = 3;\n\nmy %logodds;  #I know there is a better way to do this - this is just for simplicity\n$logodds{'A'}[0] = 0.1;\n$logodds{'A'}[1] = 0.2;\n$logodds{'A'}[2] = 0.3;\n$logodds{'C'}[0] = 0.2;\n$logodds{'C'}[1] = 0.5;\n$logodds{'C'}[2] = 0.2;\n$logodds{'G'}[0] = 0.3;\n$logodds{'G'}[1] = 0.2;\n$logodds{'G'}[2] = 0.4;\n$logodds{'T'}[0] = 0.4;\n$logodds{'T'}[1] = 0.1;\n$logodds{'T'}[2] = 0.1;\n\nprint Dumper (\\%logodds);\nprint \"\\n\\n\";\nfor my $base (qw( A C G T))\n{\n    print \"logodds$base @{$logodds{$base}}\\n\";\n}\n\nmy @arr;\n\nforeach $id (keys %HoA)\n{   \n    for my $pos1 (0..length($HoA{$id})-$width-1)    #Look through all positions the motif can start at\n    {\n        for my $pos2 ($pos1..$pos1+($width-1)) #look through the positions at a specific motif starting point\n        {\n            for my $base (qw( A C G T))\n            {\n                if ($HoA{$id}[$pos2] eq $base)  #If the character matches a base:\n                {\n                    for my $pos3 (0..$width-1) #for the length of the motif:\n                    {\n                        $arr[$pos1] += $logodds{$base}[$pos3]; \n                        @{ $loscore{$id}} = @arr; #Throws error here\n                    }\n                }   \n            }   \n        }\n    }\n}\nprint Dumper(\\%loscore);\n</code></pre>\n\n<p>I keep getting the error:\nCan't use string (\"0\") as an ARRAY ref while \"strict refs\" in use at line 75.</p>\n\n<p>An example of a log-odds score with this data that I want is:</p>\n\n<pre><code>$HoA{'Sequence 1'}[2] = 0.1 + 0.2 + 0.3 = 0.6\n</code></pre>\n\n<p>So, the log-odds score of the motif 'AGA' that begins a position 2 in Sequence 1 is 0.6. I appreciate all of your patience and help! Let me know if I need to clarify anything.</p>\n"}, {"tags": ["html", "css", "perl", "markdown"], "comments": [{"owner": {"reputation": 24616, "user_id": 866026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96fae8527632d33d7bf929fada83e8d1?s=128&d=identicon&r=PG", "display_name": "Waylan", "link": "https://stackoverflow.com/users/866026/waylan"}, "edited": false, "score": 1, "creation_date": 1553701083, "post_id": 55379528, "comment_id": 97484412, "body": "The <a href=\"https://daringfireball.net/projects/markdown/syntax#html\" rel=\"nofollow noreferrer\">HTML</a> section of the rules seem to make is pretty clear that this sort of thing is out-of-scope for Markdown and should be addressed by using raw HTML. Personally, I&#39;m not aware of any Markdown implementations which support <code>picture</code> tags. So yeah, insert raw HTML in your documents. Whether you insert that raw HTML manually or with a script is up to you."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1553709132, "post_id": 55379528, "comment_id": 97489137, "body": "If you are using Template Toolkit, you can write a template for that and follow a certain naming convention, then include that template. If that&#39;s too much work, you can write Perl code and export it as a vmethod that will do that for you. You&#39;d then have to pass in your file name, much like your Markdown, and it will generate the right template calls."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1553709152, "post_id": 55379528, "comment_id": 97489146, "body": "Or you could subclass the markdown parser you are using to teach it to generate different HTML."}, {"owner": {"reputation": 1677, "user_id": 1816138, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ed2ddfe3ce5e547c20fafa0c82b3e970?s=128&d=identicon&r=PG", "display_name": "Sherwood Botsford", "link": "https://stackoverflow.com/users/1816138/sherwood-botsford"}, "edited": false, "score": 0, "creation_date": 1553738105, "post_id": 55379528, "comment_id": 97499735, "body": "@sunbabqye Looked at that.  May do that, but I really don&#39;t understand the code.  I&#39;ve tried modifying it before, and usually have to revert."}], "owner": {"reputation": 1677, "user_id": 1816138, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ed2ddfe3ce5e547c20fafa0c82b3e970?s=128&d=identicon&r=PG", "display_name": "Sherwood Botsford", "link": "https://stackoverflow.com/users/1816138/sherwood-botsford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 405, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1553714140, "creation_date": 1553696458, "last_edit_date": 1553714140, "question_id": 55379528, "link": "https://stackoverflow.com/questions/55379528/integrating-markdown-and-srcset", "title": "Integrating Markdown and SrcSet", "body": "<p>I like markdown.  I use it in combination with Template Toolkit, and basically I don't have to write any html.  My webpages are static, having only the js snippet that Google analytics uses.  I would mostly like to keep it that way.  I have zero javascript experience.</p>\n\n<p>I can do some degree of simple page layout using a handful of classes applied to DIVs.  </p>\n\n<p>So this</p>\n\n<pre><code>&lt;DIV class=picr3&gt;\n\n![Shelterbelt-12][2]\n\nPlanting a shelterbelt, or any tree project...\n\n***\n\n&lt;/DIV&gt;\n[2]: /Images/Shelterbelt/Shelterbelt-12.jpg\n</code></pre>\n\n<p>is all the html I need to use to have an image sized to width 30% of the Content div floated to the right.  The system isn't perfect, but it resizes reasonably well, and since the page is static it caches well, and is fast to deliver.</p>\n\n<p>More important to me:  I can spend time writing content, and very little tweaking layout.</p>\n\n<p>The problem:  If I serve an nice desktop image to a mobile phone, download times are high.  If I serve an image of reduced resolution to make phone access quick, it looks like crap on a desktop.</p>\n\n<p>In Html we now have the  element, combined with the srcset and size attributes.  This turns what used to be a simple img tag into this: </p>\n\n<pre><code>&lt;picture&gt;\n&lt;source media=\"(max-width: 700px)\" sizes=\"(max-width: 500px) 50vw, 10vw\"\nsrcset=\"stick-figure-narrow.png 138w, stick-figure-hd-narrow.png 138w\"&gt;\n\n&lt;source media=\"(max-width: 1400px)\" sizes=\"(max-width: 1000px) 100vw, 50vw\"\nsrcset=\"stick-figure.png 416w, stick-figure-hd.png 416w\"&gt;\n\n&lt;img src=\"stick-original.png\" alt=\"Human\"&gt;\n&lt;/picture&gt;\n</code></pre>\n\n<p>At this point, I'm looking at having to roll my own solution much along this line:</p>\n\n<ul>\n<li><p>Replace &lt;DIV&gt; with &lt;div&gt;  On my implementation of Markdown, being between lower case tags means that the content of that tag is not Markdown processed.</p></li>\n<li><p>Come up with a standard naming convention, say whateverimage-L.jpg for the large version, -M.jpg for the medium version and -S. jpg for the small version.</p></li>\n<li><p>Pre process the resulting markdown files to generate the full  element from the embedded markdown.  I think this is within my limited perl programming capabilities.</p></li>\n</ul>\n\n<p>Gotchas?</p>\n\n<p>This wheel has been invented already?</p>\n\n<p>Better ways to approach this?  Should I bite the bullet and do this with a javascript snippet?</p>\n\n<p>Some other solution I've missing in my wandering of 'a maze of twisty passages, all different' that is the internet?</p>\n\n<p><em>Note to moderators:  This may be a better fit for webmasters.SE.  Seemed it was more program-y.  If you feel it should be over there, please move it.</em></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553684369, "post_id": 55375071, "comment_id": 97473097, "body": "I&#39;m not sure what are the best pratices, so I won&#39;t answer. However, an easy way to do it is <code>my $hash = do &quot;output.pl&quot;</code>."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553684429, "post_id": 55375071, "comment_id": 97473132, "body": "By the way, you should probably <code>print Dumper \\%hash</code> rather than <code>print Dumper(keys(%hash))</code>."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553684916, "post_id": 55375071, "comment_id": 97473443, "body": "You could also have a look at <a href=\"https://metacpan.org/pod/release/MINIMAL/Config-Hash-0.920/lib/Config/Hash.pm\" rel=\"nofollow noreferrer\"><code>Config::Hash</code></a>."}, {"owner": {"reputation": 980, "user_id": 2486083, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/pZudJ.jpg?s=128&g=1", "display_name": "Chetan", "link": "https://stackoverflow.com/users/2486083/chetan"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553690344, "post_id": 55375071, "comment_id": 97476836, "body": "I am not sure why you are hesitant with my $hash = do &quot;output.pl&quot; as &#39;may not be best practice&#39;. It worked like a charm. I will also look in Config::Hash . Thanks."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1553690653, "post_id": 55375071, "comment_id": 97477031, "body": "Because if <code>output.pl</code> contains something like <code>system &quot;rm -rf &#47;&quot;</code>, you won&#39;t like what <code>do &quot;output.pl&quot;</code> just did. Whereas if you were just regularly parsing your file, this wouldn&#39;t be an issue. But once again, I don&#39;t have any strong opinion on the matter, so I&#39;m just gonna wait for other people to share their thoughts"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553691612, "post_id": 55375071, "comment_id": 97477707, "body": "@Dada <code>eval EXPR</code> has the same issue, so in that respect my answer isn&#39;t better..."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553693157, "post_id": 55375071, "comment_id": 97478847, "body": "There also is <a href=\"https://metacpan.org/pod/Data::Undump\" rel=\"nofollow noreferrer\">Data::Undump</a>, but which seems quite fragile."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1553708857, "post_id": 55375071, "comment_id": 97488993, "body": "<code>import</code> is not a perl keyword, you wanted <code>use</code>. Avoid File::Slurp, <a href=\"https://metacpan.org/pod/File::Slurper\" rel=\"nofollow noreferrer\">File::Slurper</a> is better."}], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1553691560, "last_edit_date": 1553691560, "creation_date": 1553691024, "answer_id": 55377642, "question_id": 55375071, "link": "https://stackoverflow.com/questions/55375071/read-a-perl-hash-file-in-perl/55377642#55377642", "title": "Read a perl hash file in perl", "body": "<p>I see at least two problems in your code:</p>\n\n<ol>\n<li>you are trying to assign the contents of the file to the hash (instead of evaluating it)</li>\n<li>your file contains a hash ref, not a hash.</li>\n</ol>\n\n<p>This is one alternative how to load and parse the file contents:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse Data::Dumper;\n\n# replacement for loading external file - not relevant for solution\nmy $content;\n{\n    local $/;\n    $content = &lt;DATA&gt;;\n}\n#print \"${content}\\n\";\n\nmy $hash = eval $content;\ndie \"eval error: $@\" if $@;\n#print \"${hash}\\n\";\n\nprint Dumper($hash);\n\nexit 0;\n\n__DATA__\n{\n    \"A\" =&gt; {\n        \"name\" =&gt; \"chetan\",\n        \"age\" =&gt; \"28\",\n    },\n    \"B\" =&gt; {\n        \"name\" =&gt; \"vivek\",\n        \"age\" =&gt; \"31\",\n    },\n};\n</code></pre>\n\n<p>Test Run:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$ perl dummy.pl\n$VAR1 = {\n          'A' =&gt; {\n                   'name' =&gt; 'chetan',\n                   'age' =&gt; '28'\n                 },\n          'B' =&gt; {\n                   'name' =&gt; 'vivek',\n                   'age' =&gt; '31'\n                 }\n        };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 2, "last_activity_date": 1553708422, "creation_date": 1553708422, "answer_id": 55383459, "question_id": 55375071, "link": "https://stackoverflow.com/questions/55375071/read-a-perl-hash-file-in-perl/55383459#55383459", "title": "Read a perl hash file in perl", "body": "<p>You can load such data using the <a href=\"https://perldoc.pl/functions/do\" rel=\"nofollow noreferrer\">do function</a>.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $file = './output.pl';\nmy $data = do $file;\n# unfortunately 'do' error checking is very fragile\n# there is no way to differentiate certain errors from the file returning false or undef\nunless ($data) {\n  die \"couldn't parse $file: $@\" if $@;\n  die \"couldn't do $file: $!\" unless defined $data;\n  die \"$file did not return data\";\n}\n</code></pre>\n\n<p>This will of course run any arbitrary code within the file, but it is not generally a problem as long as the config file is not writable by anyone who can't also edit the script.</p>\n\n<p>Some other options for config files that don't allow running arbitrary code would be <a href=\"https://metacpan.org/pod/JSON::MaybeXS\" rel=\"nofollow noreferrer\">JSON</a> and <a href=\"https://metacpan.org/pod/Config::Tiny\" rel=\"nofollow noreferrer\">Config::Tiny</a>.</p>\n\n<p>Make sure to use <code>./output.pl</code> and not <code>output.pl</code>; without the leading <code>./</code> the <code>do</code> function will search <code>@INC</code> (which no longer contains the current directory in 5.26+) rather than just using the current directory.</p>\n\n<p>If you want to load a file from the same directory as the current file rather than the current working directory (generally a more robust solution) see <a href=\"https://metacpan.org/pod/Dir::Self\" rel=\"nofollow noreferrer\">Dir::Self</a> or <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> or similar, with an absolute path so that <code>@INC</code> is not searched.</p>\n\n<pre><code>use Dir::Self;\nmy $file = __DIR__ . '/output.pl';\n\nuse Path::Tiny;\nmy $file = path(__FILE__)-&gt;realpath-&gt;sibling('output.pl');\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 322, "user_id": 300113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2e2857243a00c807abd5e6b5d9e3a6?s=128&d=identicon&r=PG", "display_name": "Hugh Barnard", "link": "https://stackoverflow.com/users/300113/hugh-barnard"}, "is_accepted": false, "score": 0, "last_activity_date": 1587638400, "creation_date": 1587638400, "answer_id": 61385187, "question_id": 55375071, "link": "https://stackoverflow.com/questions/55375071/read-a-perl-hash-file-in-perl/61385187#61385187", "title": "Read a perl hash file in perl", "body": "<p>As above with Slurp, in a single line.</p>\n\n<pre><code>use File::Slurp ;\n\n# no easy way to get current Mojolicious config, so this is a hack\nmy $config  = eval (read_file( '/etc/smsmap/sms_map.conf'));\n</code></pre>\n"}], "owner": {"reputation": 980, "user_id": 2486083, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/pZudJ.jpg?s=128&g=1", "display_name": "Chetan", "link": "https://stackoverflow.com/users/2486083/chetan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 554, "favorite_count": 0, "accepted_answer_id": 55383459, "answer_count": 3, "score": 1, "last_activity_date": 1587638400, "creation_date": 1553682781, "last_edit_date": 1553789115, "question_id": 55375071, "link": "https://stackoverflow.com/questions/55375071/read-a-perl-hash-file-in-perl", "title": "Read a perl hash file in perl", "body": "<p>I have a file which has the data like below:</p>\n\n<p>output.pl</p>\n\n<pre><code>{\n    \"A\" =&gt; {\n        \"name\" =&gt; \"chetan\",\n        \"age\" =&gt; \"28\",\n    },\n    \"B\" =&gt; {\n        \"name\" =&gt; \"vivek\",\n        \"age\" =&gt; \"31\",\n    },\n};\n</code></pre>\n\n<p>Basically it is hash stored in other file.</p>\n\n<p>How do I write a perl program to load this as a hash in a variable ?</p>\n\n<p>I tried something like this:</p>\n\n<pre><code>use Data::Dumper;\nuse File::Slurp;\n\nmy %hash = read_file(\"output.pl\");\nprint Dumper(keys(%hash));\n</code></pre>\n\n<p>But i see that it says odd number of elements assigned to hash.</p>\n"}, {"tags": ["perl", "unix"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1553679713, "post_id": 55371828, "comment_id": 97470266, "body": "What have you tried? What problems are you having? Please show us your code."}, {"owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "edited": false, "score": 0, "creation_date": 1554166848, "post_id": 55371828, "comment_id": 97642785, "body": "if we have answered your question, could you please accept an answer/upvote as detailed in: <a href=\"https://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>"}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 4786572, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-qytX23alkm8/AAAAAAAAAAI/AAAAAAAAABs/f44-z9GMZBE/photo.jpg?sz=128", "display_name": "user4786572", "link": "https://stackoverflow.com/users/4786572/user4786572"}, "edited": false, "score": 0, "creation_date": 1553676120, "post_id": 55372081, "comment_id": 97468052, "body": "Thank you..Any suggestions how can I try for multiple pattern ? I tried using egrep but didn&#39;t worked . Ex: grep for 1= and 2="}, {"owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "reply_to_user": {"reputation": 79, "user_id": 4786572, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-qytX23alkm8/AAAAAAAAAAI/AAAAAAAAABs/f44-z9GMZBE/photo.jpg?sz=128", "display_name": "user4786572", "link": "https://stackoverflow.com/users/4786572/user4786572"}, "edited": false, "score": 0, "creation_date": 1553676379, "post_id": 55372081, "comment_id": 97468187, "body": "@user4786572: if you want <code>1</code> and <code>2</code>, then replace <code>grep -o &#39;1=[^,]\\+&#39;</code> by <code>grep -o &#39;[12]=[^,]\\+&#39;</code> Let me know if you have any question!"}, {"owner": {"reputation": 79, "user_id": 4786572, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-qytX23alkm8/AAAAAAAAAAI/AAAAAAAAABs/f44-z9GMZBE/photo.jpg?sz=128", "display_name": "user4786572", "link": "https://stackoverflow.com/users/4786572/user4786572"}, "edited": false, "score": 0, "creation_date": 1553676898, "post_id": 55372081, "comment_id": 97468531, "body": "Sorry Allan..I have something starts with 1 , 11 and 38 to search how I use this ? 1=xyz,11=pqr,38=lmn"}, {"owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "reply_to_user": {"reputation": 79, "user_id": 4786572, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-qytX23alkm8/AAAAAAAAAAI/AAAAAAAAABs/f44-z9GMZBE/photo.jpg?sz=128", "display_name": "user4786572", "link": "https://stackoverflow.com/users/4786572/user4786572"}, "edited": false, "score": 0, "creation_date": 1553676942, "post_id": 55372081, "comment_id": 97468557, "body": "@user4786572: why are you sorry? lol  If we have answered your question, could you please accept an answer/upvote as detailed in: <a href=\"https://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>"}, {"owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "reply_to_user": {"reputation": 79, "user_id": 4786572, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-qytX23alkm8/AAAAAAAAAAI/AAAAAAAAABs/f44-z9GMZBE/photo.jpg?sz=128", "display_name": "user4786572", "link": "https://stackoverflow.com/users/4786572/user4786572"}, "edited": false, "score": 0, "creation_date": 1553677323, "post_id": 55372081, "comment_id": 97468800, "body": "@user4786572: just use <code>grep -oE &#39;(1|11|38)=[^,]+&#39; grep.in</code> this should work fine."}, {"owner": {"reputation": 79, "user_id": 4786572, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-qytX23alkm8/AAAAAAAAAAI/AAAAAAAAABs/f44-z9GMZBE/photo.jpg?sz=128", "display_name": "user4786572", "link": "https://stackoverflow.com/users/4786572/user4786572"}, "edited": false, "score": 0, "creation_date": 1553679275, "post_id": 55372081, "comment_id": 97469992, "body": "Thank you that worked  ..One last how I print the output in same line not one below one..I want to print as  1=xyz 11=mno 38=pqr"}, {"owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "reply_to_user": {"reputation": 79, "user_id": 4786572, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-qytX23alkm8/AAAAAAAAAAI/AAAAAAAAABs/f44-z9GMZBE/photo.jpg?sz=128", "display_name": "user4786572", "link": "https://stackoverflow.com/users/4786572/user4786572"}, "edited": false, "score": 0, "creation_date": 1553687615, "post_id": 55372081, "comment_id": 97475136, "body": "@user4786572: after the command just add <code>| tr &#39;\\n&#39; &#39; &#39;</code> to transform all the EOL char into spaces and have everything on one single line This gives you the command <code>grep -oE &#39;(1|11|38)=[^,]+&#39; grep.in | tr &#39;\\n&#39; &#39; &#39;</code>"}], "tags": [], "owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "is_accepted": false, "score": 1, "last_activity_date": 1553672645, "creation_date": 1553672645, "answer_id": 55372081, "question_id": 55371828, "link": "https://stackoverflow.com/questions/55371828/how-i-search-and-print-matched-wold-in-unix-or-perl/55372081#55372081", "title": "How I search and print matched wold in UNIX or perl?", "body": "<p><strong>Input:</strong></p>\n\n<pre><code>$ cat grep.in \n1=ABC,2=mnz,3=xyz\n1=pqr,3=ijk,2=lmn\n4=pqr,3=ijk,2=lmn\n</code></pre>\n\n<p><strong>Command:</strong></p>\n\n<pre><code>$ grep -o '1=[^,]\\+' grep.in \n1=ABC\n1=pqr\n</code></pre>\n\n<p><strong>Explanations:</strong></p>\n\n<p>You can just use <code>grep</code> on your input</p>\n\n<ul>\n<li><code>-o</code> is to output only the matching pattern</li>\n<li><code>1=[^,]\\+</code> the regex will match strings that start by <code>1=</code> followed by at least one character that is not a comma (I have based this on the hypothesis that there is no comma in the right part of the <code>=</code> except the separator) </li>\n<li>if you want to accept empty result you can change the <code>\\+</code> by <code>*</code></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1553679582, "post_id": 55372363, "comment_id": 97470193, "body": "Honestly, for simple CSV like this, I&#39;d call <code>Text::CSV</code> overkill, and split more than sufficient."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1553673910, "creation_date": 1553673910, "answer_id": 55372363, "question_id": 55371828, "link": "https://stackoverflow.com/questions/55371828/how-i-search-and-print-matched-wold-in-unix-or-perl/55372363#55372363", "title": "How I search and print matched wold in UNIX or perl?", "body": "<p>It appears that your input data is in CSV format. Here is a Perl solution based on <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a></p>\n\n<ul>\n<li>parse the CSV content row-wise</li>\n<li>print out columns that start with <code>1=</code></li>\n</ul>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse Text::CSV;\n\nmy $csv = Text::CSV-&gt;new({\n    binary   =&gt; 1,\n    eol      =&gt; \"\\n\",\n}) or die \"CSV\\n\";\n\n# parse\nwhile (my $row = $csv-&gt;getline(\\*DATA)) {\n    foreach (@{ $row }) {\n        print \"$_\\n\" if /^1=/;\n    }\n}\n\nexit 0;\n\n__DATA__\n1=ABC,2=mnz,3=xyz\n1=pqr,3=ijk,2=lmn\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\n1=ABC\n1=pqr\n</code></pre>\n\n<p>Replace <code>DATA</code> with <code>STDIN</code> to read the input from standard input instead.</p>\n"}], "owner": {"reputation": 79, "user_id": 4786572, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-qytX23alkm8/AAAAAAAAAAI/AAAAAAAAABs/f44-z9GMZBE/photo.jpg?sz=128", "display_name": "user4786572", "link": "https://stackoverflow.com/users/4786572/user4786572"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1553673910, "creation_date": 1553671535, "last_edit_date": 1553672274, "question_id": 55371828, "link": "https://stackoverflow.com/questions/55371828/how-i-search-and-print-matched-wold-in-unix-or-perl", "title": "How I search and print matched wold in UNIX or perl?", "body": "<pre><code>1=ABC,2=mnz,3=xyz\n1=pqr,3=ijk,2=lmn\n</code></pre>\n\n<p>I have this in text file I want to search <code>1=</code> and that should print only matched word <code>1=ABC</code> and <code>1=pqr</code></p>\n\n<p>Any suggestions in Perl or Unix?</p>\n"}, {"tags": ["xml", "perl", "validation"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1553664552, "post_id": 55370299, "comment_id": 97463372, "body": "Re &quot;<i>How can i successfully validate an xml which have ampersand inside any of the xml tag</i>&quot;, That&#39;s not allowed (unless the ampersand is part of a defined entity), so it sounds like everything is working correctly."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1553686488, "post_id": 55370299, "comment_id": 97474435, "body": "In addition to your problems with using an XML parser to parse a document that isn&#39;t well-formed XML, you are giving yourself another problem by using XML::Simple. In the <a href=\"https://metacpan.org/pod/XML::Simple\" rel=\"nofollow noreferrer\">documentation</a>, the modules author says &quot;PLEASE DO NOT USE THIS MODULE IN NEW CODE&quot; and &quot;The use of this module in new code is strongly discouraged&quot;. Please don&#39;t ignore his advice."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6360526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9d8225b0c0cda52e3e714017c861287?s=128&d=identicon&r=PG&f=1", "display_name": "Kalesh", "link": "https://stackoverflow.com/users/6360526/kalesh"}, "edited": false, "score": 0, "creation_date": 1553665860, "post_id": 55370402, "comment_id": 97463756, "body": "Ok, so there is no Perl XML module using which i can use by implicitly tell to ignore if ampersand is encountered."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 11, "user_id": 6360526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9d8225b0c0cda52e3e714017c861287?s=128&d=identicon&r=PG&f=1", "display_name": "Kalesh", "link": "https://stackoverflow.com/users/6360526/kalesh"}, "edited": false, "score": 0, "creation_date": 1553665930, "post_id": 55370402, "comment_id": 97463778, "body": "Such a parser would be buggy."}, {"owner": {"reputation": 137436, "user_id": 415448, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/P2vVZ.png?s=128&g=1", "display_name": "Michael Kay", "link": "https://stackoverflow.com/users/415448/michael-kay"}, "edited": false, "score": 0, "creation_date": 1553762224, "post_id": 55370402, "comment_id": 97506856, "body": "It would be buggy if it were marketed as an XML parser. If it were marketed as a tool for repairing ill-formed XML, that would be a different matter..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 137436, "user_id": 415448, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/P2vVZ.png?s=128&g=1", "display_name": "Michael Kay", "link": "https://stackoverflow.com/users/415448/michael-kay"}, "edited": false, "score": 0, "creation_date": 1553763699, "post_id": 55370402, "comment_id": 97507667, "body": "@Michael Kay, 1) The OP asked for an XML parser/validator. 2) The OP didn&#39;t for anything to be repaired. 3) How would such a tool repair <code>&amp;foo</code>? It is a missing semicolon or an unescaped <code>&amp;</code>?"}, {"owner": {"reputation": 137436, "user_id": 415448, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/P2vVZ.png?s=128&g=1", "display_name": "Michael Kay", "link": "https://stackoverflow.com/users/415448/michael-kay"}, "edited": false, "score": 0, "creation_date": 1553779691, "post_id": 55370402, "comment_id": 97517832, "body": "(1) They asked &quot;how can I&quot; without constraining the solution, (2) Writing repair tools is a completely different art from writing parsers. The answer is, you make guesses, and then it&#39;s a question of how intelligent to make your guess. For example, you could take into account whether an entity named foo actually exists. But the key message is, while you can recover a lot of corrupt data this way, it&#39;s better to insist on getting clean data in the first place rather than having to repair a mess."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 137436, "user_id": 415448, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/P2vVZ.png?s=128&g=1", "display_name": "Michael Kay", "link": "https://stackoverflow.com/users/415448/michael-kay"}, "edited": false, "score": 0, "creation_date": 1553801640, "post_id": 55370402, "comment_id": 97531726, "body": "@Michael Kay, Re &quot;<i>They asked &quot;how can I&quot; without constraining the solution,</i>&quot;, No. Again, they clearly asked how to validate, not how to perform modifications. Furthermore, they specifically said changes are not allowed. /// Re &quot;<i>Writing repair tools</i>&quot;, huh, you were talking about using existing tools earlier, and you just made my point by pointing out it would need to be a custom solution. StackOverflow is NOT a code writing service, so this idea of yours is off-topic. /// Please cease your off-topic comments."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1553764565, "last_edit_date": 1553764565, "creation_date": 1553664772, "answer_id": 55370402, "question_id": 55370299, "link": "https://stackoverflow.com/questions/55370299/how-can-i-validate-an-xml-doc-which-has-ampersands-inside-any-of-elements-withou/55370402#55370402", "title": "How can I validate an XML doc which has ampersands inside any of elements without getting an exception?", "body": "<p>The correct terminology for what you are doing is checking to see if the document is <a href=\"https://www.w3.org/TR/xml/#sec-well-formed\" rel=\"nofollow noreferrer\"><em>well-formed</em></a> (matches the definition of an XML document), not if it's <a href=\"https://www.w3.org/TR/xml/#sec-prolog-dtd\" rel=\"nofollow noreferrer\"><em>valid</em></a> (matches the definition of an XML document and the definition of a schema). You can use <a href=\"https://metacpan.org/pod/distribution/XML-LibXML/lib/XML/LibXML/Schema.pod\" rel=\"nofollow noreferrer\">XML::LibXML::Schema</a> to validate documents.</p>\n\n<p>That said, it sounds like your check is working correctly. What you are providing isn't (well-formed) XML, and the parser is telling you that.</p>\n\n<hr>\n\n<p>This isn't (well-formed) XML:</p>\n\n<pre><code>&lt;ele url=\"http://www.example.org/form?foo=bar&amp;moo=mar\"/&gt;\n</code></pre>\n\n<p>It should be</p>\n\n<pre><code>&lt;ele url=\"http://www.example.org/form?foo=bar&amp;amp;moo=mar\"/&gt;\n</code></pre>\n\n<hr>\n\n<p>This isn't (well-formed) XML:</p>\n\n<pre><code>&lt;ele&gt;http://www.example.org/form?foo=bar&amp;moo=mar&lt;/ele&gt;\n</code></pre>\n\n<p>It should be</p>\n\n<pre><code>&lt;ele&gt;http://www.example.org/form?foo=bar&amp;amp;moo=mar&lt;/ele&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 6360526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9d8225b0c0cda52e3e714017c861287?s=128&d=identicon&r=PG&f=1", "display_name": "Kalesh", "link": "https://stackoverflow.com/users/6360526/kalesh"}, "edited": false, "score": 0, "creation_date": 1553685019, "post_id": 55372615, "comment_id": 97473506, "body": "The file which i get in a clearcase vob is of .xml extension, inside the file there is a tag description with text as &lt;description&gt;https/blahblah.blah.com/isynch.dll?panel=Module&zwnj;&#8203;Config&amp;Type=ModuleVi&zwnj;&#8203;ew&amp;Module&lt;/descripti&zwnj;&#8203;on&gt;.  Is there any way i can comprehend this??"}, {"owner": {"reputation": 137436, "user_id": 415448, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/P2vVZ.png?s=128&g=1", "display_name": "Michael Kay", "link": "https://stackoverflow.com/users/415448/michael-kay"}, "reply_to_user": {"reputation": 11, "user_id": 6360526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9d8225b0c0cda52e3e714017c861287?s=128&d=identicon&r=PG&f=1", "display_name": "Kalesh", "link": "https://stackoverflow.com/users/6360526/kalesh"}, "edited": false, "score": 1, "creation_date": 1553691351, "post_id": 55372615, "comment_id": 97477517, "body": "I don&#39;t know what a &quot;clearcase vob&quot; is, but despite its file extension, it is not XML, and it&#39;s about as much use to you as a car with comfy seats, four wheels, shiny trim on the headlights, and no starter motor. Send it back and complain."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1553702545, "post_id": 55372615, "comment_id": 97485400, "body": "@MichaelKay: ClearCase is a version control system and VOB is &quot;Versioned Object Base&quot; which is the mechanism it uses for storing version information."}], "tags": [], "owner": {"reputation": 137436, "user_id": 415448, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/P2vVZ.png?s=128&g=1", "display_name": "Michael Kay", "link": "https://stackoverflow.com/users/415448/michael-kay"}, "is_accepted": false, "score": 2, "last_activity_date": 1553674896, "creation_date": 1553674896, "answer_id": 55372615, "question_id": 55370299, "link": "https://stackoverflow.com/questions/55370299/how-can-i-validate-an-xml-doc-which-has-ampersands-inside-any-of-elements-withou/55372615#55372615", "title": "How can I validate an XML doc which has ampersands inside any of elements without getting an exception?", "body": "<p>You don't have an XML file. The parser is telling you that it's not an XML file. If you want to use non-XML files, don't try to process them using XML tools.</p>\n\n<p>If the originator of the file claimed that it was XML, tell them they have sent you a faulty file and ask for it to be fixed, or switch to a more reliable supplier. (What would you do if you downloaded a program claiming to be Java and it didn't compile?)</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553764187, "post_id": 55373160, "comment_id": 97507936, "body": "Re &quot;<i>The naked <code>&amp;</code> in URLs can be replaced either by <code>&amp;amp;</code> or by <code>;</code></i>, 1) You can&#39;t arbitrarily replace <code>&amp;</code> in URLs with <code>;</code>. CGI.pm (and others) consider them the same, but that&#39;s neither standard nor universal, even if you assume that all queries are form data. 2) It&#39;s possible that replacing <code>&amp;</code> with <code>&amp;amp;</code> isn&#39;t the correct repair either (e.g. <code>&amp;foo</code> could have been a typo for <code>&amp;foo;</code>), so even that isn&#39;t guaranteed to be a correct fix either.incorrect fixes."}], "tags": [], "owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "is_accepted": false, "score": 2, "last_activity_date": 1553764237, "last_edit_date": 1553764237, "creation_date": 1553676952, "answer_id": 55373160, "question_id": 55370299, "link": "https://stackoverflow.com/questions/55370299/how-can-i-validate-an-xml-doc-which-has-ampersands-inside-any-of-elements-withou/55373160#55373160", "title": "How can I validate an XML doc which has ampersands inside any of elements without getting an exception?", "body": "<p>You may be able <a href=\"https://metacpan.org/pod/XML::Liberal\" rel=\"nofollow noreferrer\">XML::Liberal</a>, which will happily take this kind of broken XML. It may also break your XML is other ways, so buyer beware!</p>\n\n<p>Since it is a subclass of XML::LibXML you could use it instead of XML::LibXML, but I would not do that. I would instead have a first pass where you convert your quasi-XML to proper XML (and you can check it), and then use regular XML tools for the rest of your processing (probably not XML::Simple though, see the warning in the docs of the module).</p>\n\n<p>The converter could be as simple as:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse XML::Liberal;\n\nmy $parser = XML::Liberal-&gt;new('LibXML');\nmy $doc = $parser-&gt;parse_file( 'broken_xml.xml');\n\nprint $doc-&gt;toString;\n</code></pre>\n\n<p>Realize that this is a dangerous solution, using a module that is in alpha state and has not been touched in 6 years. So it definitely cannot be used as part of a production system. </p>\n\n<p>The real solution is to get the input to be real (well-formed) XML. Which is possible, the naked <code>&amp;</code> in URLs can be replaced either by <code>&amp;amp;</code> or by <code>;</code>, but you should use HTML tools for this, not XML ones. Or shame your provider into sending you real XML.</p>\n\n<p>In the meantime, XML::Liberal may be part of a temporary solution.  </p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 6360526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9d8225b0c0cda52e3e714017c861287?s=128&d=identicon&r=PG&f=1", "display_name": "Kalesh", "link": "https://stackoverflow.com/users/6360526/kalesh"}, "edited": false, "score": 0, "creation_date": 1553684833, "post_id": 55374001, "comment_id": 97473394, "body": "Yes Dave you are correct, i have this XML file (rather would call it as a file with .xml extension :) ) inside a clear case vob where i do not have checkout/checkin  access. Thanks for your comments."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 11, "user_id": 6360526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9d8225b0c0cda52e3e714017c861287?s=128&d=identicon&r=PG&f=1", "display_name": "Kalesh", "link": "https://stackoverflow.com/users/6360526/kalesh"}, "edited": false, "score": 0, "creation_date": 1553686024, "post_id": 55374001, "comment_id": 97474143, "body": "@Kalesh: So you need to trace the file to its source. Where did it come from? Who created it? Someone will have the ability to fix this for you. You just need to work out who."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1553679646, "creation_date": 1553679646, "answer_id": 55374001, "question_id": 55370299, "link": "https://stackoverflow.com/questions/55370299/how-can-i-validate-an-xml-doc-which-has-ampersands-inside-any-of-elements-withou/55374001#55374001", "title": "How can I validate an XML doc which has ampersands inside any of elements without getting an exception?", "body": "<blockquote>\n  <p>I have a non-editable XML file</p>\n</blockquote>\n\n<p>Actually, no. You don't have an XML file. You have something that is almost, but not quite, an XML file. A well-formed XML document does not contain ampersands other than ones that make the start of an entity (which these ones aren't). An ampersand in a well-formed XML documented should be encoded as <code>&amp;amp;</code>.</p>\n\n<p>I guess you have three options:</p>\n\n<ol>\n<li>Go back to the source of this \"not-XML\" document and ask them to send you something that is well-formed XML. If this comes from an external supplier, there may well be contracts in place saying that they will supply you with XML. If so, they are breach of contract.</li>\n<li>Pre-parse the document to correct the encoding of the ampersands. This is likely to be fragile and I don't recommend it.</li>\n<li>Use something like XML::Liberal to parse the document. I don't recommend this as once you allow non-standard XML, it's a slippery slope that leads to the mess that we saw in HTML parsers in the 1990s :-)</li>\n</ol>\n\n<p>If it was down to me, I would definitely take the first option.</p>\n"}], "owner": {"reputation": 11, "user_id": 6360526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9d8225b0c0cda52e3e714017c861287?s=128&d=identicon&r=PG&f=1", "display_name": "Kalesh", "link": "https://stackoverflow.com/users/6360526/kalesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1553764565, "creation_date": 1553664164, "last_edit_date": 1553665858, "question_id": 55370299, "link": "https://stackoverflow.com/questions/55370299/how-can-i-validate-an-xml-doc-which-has-ampersands-inside-any-of-elements-withou", "title": "How can I validate an XML doc which has ampersands inside any of elements without getting an exception?", "body": "<p>I have a non-editable XML file which has a few unwanted tags placed in between, so I get an exception when I validate the XML document using XML::Simple. This is expected.</p>\n\n<pre><code>my $xml = new XML::Simple(); \nif (eval { $xml-&gt;parse(\"sample.xml\") }) {\n    print \"success!!\\n\";\n} else {\n    print \"failed!!!\\n\";\n} \n</code></pre>\n\n<p>However, the parser is also throwing exceptions for ampersands inside a URL in the XML doc. The expected result is that ampersands inside the body of the XML shouldn't cause an error to be thrown. How can I overcome this using XML::Simple or any other XML parser module? I tried XML::Simple, XML::LibXML and XML::Mini::Document. None of them succeeded with the ampersand issue.</p>\n"}, {"tags": ["perl", "parse-recdescent"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1553664143, "last_edit_date": 1553664143, "creation_date": 1553650657, "answer_id": 55368538, "question_id": 55368327, "link": "https://stackoverflow.com/questions/55368327/parserecdescent-and-grammar/55368538#55368538", "title": "Parse::RecDescent and Grammar", "body": "<p><code>build_parser.pl</code>:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Parse::RecDescent qw( );\n\nParse::RecDescent-&gt;Precompile(&lt;&lt;'__EOS__', \"Parser\");\n   {\n      # The code in rules is also covered by these pragmas.\n      use strict;\n      use warnings;\n\n      sub dequote { substr($_[0], 1, -1) =~ s/\\\\(.)/$1/srg }\n   }\n\n   start     : assign /\\Z/ { $item[1] }\n\n   assign    : lvalue '=' expr { [ 'assign', $item[1], $item[3] ] }\n\n   lvalue    : IDENT\n\n   expr      : NUM_LIT { [ 'num_const', $item[1] ] }\n             | STR_LIT { [ 'str_const', $item[1] ] }\n\n   # TOKENS\n   # ----------------------------------------\n\n   IDENT     : \\w+\n\n   NUM_LIT   : /[0-9]+/\n\n   STR_LIT   : /'(?:[^'\\\\]++|\\\\.)*+'/s { dequote($item[1]) }\n             | /\"(?:[^\"\\\\]++|\\\\.)*+\"/s { dequote($item[1]) }\n\n__EOS__\n</code></pre>\n\n<p>Adjust the definition of string literals to your needs (but remember to adjust both the rule and <code>dequote</code>).</p>\n\n<p>Running <code>build_parser.pl</code> will generate <code>Parser.pm</code>, which can be used as follows:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse FindBin qw( $RealBin );\nuse lib $RealBin;\n\nuse Data::Dumper qw( Dumper );\nuse Parser       qw( );\n\nmy $parser = Parser-&gt;new();\nprint(Dumper( $parser-&gt;start('x = 2') ));\n</code></pre>\n"}], "owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 55368538, "answer_count": 1, "score": 1, "last_activity_date": 1553664143, "creation_date": 1553648727, "last_edit_date": 1553654882, "question_id": 55368327, "link": "https://stackoverflow.com/questions/55368327/parserecdescent-and-grammar", "title": "Parse::RecDescent and Grammar", "body": "<p>I defined the following grammar using Parse::RecDescent</p>\n\n<pre><code>my $grammar = q{\n\ntop : operand equal value { print $item{value} }\n\noperand: /\\w+/     \n\nequal : /\\=/\n\nvalue : { my $value = extract_quotelike($text) ;$return =$value;} \n\n};\n</code></pre>\n\n<p>which i wants it to handle the following cases :</p>\n\n<p>X = 2 -> should print 2</p>\n\n<p>X = \"2\" -> should print 2</p>\n\n<p>x = '2' -> should print 2</p>\n\n<p>but the above grammar provide different results :</p>\n\n<p>for x=2 it fail to parse it</p>\n\n<p>for x=\"2\" -> it print \"2\"</p>\n\n<p>for x ='2' -> it pring '2'</p>\n\n<p>any idea to change the above grammar to print 2 on all the the 3 above cases , i.e removing the quotes</p>\n"}, {"tags": ["php", "sql", "regex", "perl"], "comments": [{"owner": {"reputation": 1262, "user_id": 11241615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68685ca51efecacb3033314f39be8a47?s=128&d=identicon&r=PG&f=1", "display_name": "xavier", "link": "https://stackoverflow.com/users/11241615/xavier"}, "edited": false, "score": 0, "creation_date": 1553721904, "post_id": 55367513, "comment_id": 97495303, "body": "When you want to exclude <code>domain</code>, this means you want to exclude  <code>thisdomain.com</code>,  <code>domain.org</code>, and so on?"}, {"owner": {"reputation": 35, "user_id": 11191832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89cdb8e51fab11f9ef4dd7ec82336ddc?s=128&d=identicon&r=PG&f=1", "display_name": "kwas", "link": "https://stackoverflow.com/users/11191832/kwas"}, "reply_to_user": {"reputation": 1262, "user_id": 11241615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68685ca51efecacb3033314f39be8a47?s=128&d=identicon&r=PG&f=1", "display_name": "xavier", "link": "https://stackoverflow.com/users/11241615/xavier"}, "edited": false, "score": 0, "creation_date": 1553728657, "post_id": 55367513, "comment_id": 97497620, "body": "That means that I want to exclude below Upper Case, so below domains should does not match and whole regexp should be false.  <code>ABC.com</code>  <code>subdomain.ABC.com</code>"}, {"owner": {"reputation": 1262, "user_id": 11241615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68685ca51efecacb3033314f39be8a47?s=128&d=identicon&r=PG&f=1", "display_name": "xavier", "link": "https://stackoverflow.com/users/11241615/xavier"}, "edited": false, "score": 0, "creation_date": 1553758540, "post_id": 55367513, "comment_id": 97505305, "body": "In you exemple niceDomain, \u201cnice\u201d is not a subdomain. And .org, .net, .com... do you want to exclude them all?"}, {"owner": {"reputation": 35, "user_id": 11191832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89cdb8e51fab11f9ef4dd7ec82336ddc?s=128&d=identicon&r=PG&f=1", "display_name": "kwas", "link": "https://stackoverflow.com/users/11191832/kwas"}, "reply_to_user": {"reputation": 1262, "user_id": 11241615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68685ca51efecacb3033314f39be8a47?s=128&d=identicon&r=PG&f=1", "display_name": "xavier", "link": "https://stackoverflow.com/users/11241615/xavier"}, "edited": false, "score": 0, "creation_date": 1553763603, "post_id": 55367513, "comment_id": 97507616, "body": "I want to make regexp false when the domain e.g. = <code>niceDomain</code>, also when any subdomain exists e.g. <code>subdomain.niceDomain.com</code>."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 11191832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89cdb8e51fab11f9ef4dd7ec82336ddc?s=128&d=identicon&r=PG&f=1", "display_name": "kwas", "link": "https://stackoverflow.com/users/11191832/kwas"}, "edited": false, "score": 1, "creation_date": 1553778588, "post_id": 55394031, "comment_id": 97517037, "body": "I&#39;ve added also parameters - <code>(?!.*.?(domain|domain2)&#47;?.*)(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-&zwnj;&#8203;z0-9])?.)+[A-Z]{2,6}&zwnj;&#8203;[&#47;?][A-Z0-9]{3,50}</code>, works like a charm!"}], "tags": [], "owner": {"reputation": 1262, "user_id": 11241615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68685ca51efecacb3033314f39be8a47?s=128&d=identicon&r=PG&f=1", "display_name": "xavier", "link": "https://stackoverflow.com/users/11241615/xavier"}, "is_accepted": true, "score": 1, "last_activity_date": 1553764970, "creation_date": 1553764970, "answer_id": 55394031, "question_id": 55367513, "link": "https://stackoverflow.com/questions/55367513/regexp-exclude-subdomains-from-matching/55394031#55394031", "title": "RegExp exclude subdomains from matching", "body": "<p>Try this:</p>\n\n<pre><code>\\b(?!.*\\.?(domain|orsubdomain)\\/?.*)(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\\.)+[a-z0-9][a-z0-9-]\n</code></pre>\n\n<p>It works, at least with your examples!</p>\n"}], "owner": {"reputation": 35, "user_id": 11191832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89cdb8e51fab11f9ef4dd7ec82336ddc?s=128&d=identicon&r=PG&f=1", "display_name": "kwas", "link": "https://stackoverflow.com/users/11191832/kwas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 1, "accepted_answer_id": 55394031, "answer_count": 1, "score": 1, "last_activity_date": 1553764970, "creation_date": 1553641981, "last_edit_date": 1553719188, "question_id": 55367513, "link": "https://stackoverflow.com/questions/55367513/regexp-exclude-subdomains-from-matching", "title": "RegExp exclude subdomains from matching", "body": "<p>I have a below RegExp</p>\n\n<p><code>[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&amp;//=][A-Z0-9]{3,10})</code></p>\n\n<p>It matches domain along with its subdomain and parameters are also needed to be provided in an address, however, I want to be able to exclude some subdomains from matching.\nI've tried using negative Lookhead in order to achieve this, but without success.</p>\n\n<p><code>^((?!(domain|orsubdomain)).)*$</code></p>\n\n<p>Texts which should match the pattern:</p>\n\n<p><code>nicesite.abc.com/abcs</code></p>\n\n<p><code>nicesite.com/abcs</code></p>\n\n<p>and shouldn't match:</p>\n\n<p><code>niceDomain.com/abcs</code></p>\n\n<p><code>hello.orsubdomain.com/abcs</code></p>\n\n<p>Any help would be much appreciated.</p>\n"}, {"tags": ["bash", "perl", "recursion", "pipe", "string-substitution"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553644439, "post_id": 55367221, "comment_id": 97459216, "body": "<code>-0</code> doesn&#39;t actually enable slurp mode; use <code>-0777</code> for that."}, {"owner": {"reputation": 914, "user_id": 1461307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zhYSU.png?s=128&g=1", "display_name": "Jacob Wegelin", "link": "https://stackoverflow.com/users/1461307/jacob-wegelin"}, "edited": false, "score": 0, "creation_date": 1553651531, "post_id": 55367221, "comment_id": 97460619, "body": "@Tanktalus, this is very helpful. Where are -0 and -0777 documented? How does syntax change to perform this in a perl script, rather than a command-line invocation?"}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": true, "score": 3, "last_activity_date": 1553640170, "creation_date": 1553640170, "answer_id": 55367221, "question_id": 55367141, "link": "https://stackoverflow.com/questions/55367141/why-do-i-have-to-pipe-perl-output-into-a-new-perl-command/55367221#55367221", "title": "why do I have to pipe perl output into a new perl command", "body": "<p>Because your <code>perl -p</code> is splitting on newlines, your first perl removes them, and the second one sees everything as if it were on one line.</p>\n\n<pre><code>printf '%b' 'Well, `\\n he said it \\n' | perl -p0 -e 'use strict; use warnings; s|\\n||g; s|([\\x60])\\s*(\\w)|$1$2|g;' ; echo\n</code></pre>\n\n<p>By telling perl to slurp it all in at once, the first <code>s</code> can remove the new lines, and the second will remove the spaces after your quote.</p>\n"}], "owner": {"reputation": 914, "user_id": 1461307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zhYSU.png?s=128&g=1", "display_name": "Jacob Wegelin", "link": "https://stackoverflow.com/users/1461307/jacob-wegelin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 55367221, "answer_count": 1, "score": 1, "last_activity_date": 1553640170, "creation_date": 1553639673, "question_id": 55367141, "link": "https://stackoverflow.com/questions/55367141/why-do-i-have-to-pipe-perl-output-into-a-new-perl-command", "title": "why do I have to pipe perl output into a new perl command", "body": "<p>I want to remove whitespace between back-tick (\\x60) and word characters, inside of a perl script that performs many other regex substitutions. If I print the result of the earlier substitutions to the bash shell and then pipe into a new perl invocation, it works. But inside a single perl invocation, it doesn't. In the example below, the third line (a single perl command) does not work whereas the fourth line (two separate commands) does work.</p>\n\n<pre><code>printf '%b' 'Well, `\\n he said it \\n' \nprintf '%b' 'Well, `\\n he said it \\n' | perl -p -e 'use strict; use warnings; s|\\n||g;' ; echo\nprintf '%b' 'Well, `\\n he said it \\n' | perl -p -e 'use strict; use warnings; s|\\n||g; s|([\\x60])\\s*(\\w)|$1$2|g;' ; echo\nprintf '%b' 'Well, `\\n he said it \\n' | perl -p -e 'use strict; use warnings; s|\\n||g;' | perl -p -e 'use strict; use warnings; s|([\\x60])\\s*(\\w)|$1$2|g;'; echo\n</code></pre>\n\n<p>Why does it not work inside a single perl invocation? I thought we were supposed to avoid multiple or nested pipes (subshells).</p>\n\n<p>This is perl 5, version 18 and GNU bash, version 3.2.57(1) in BSD unix.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553646435, "post_id": 55367707, "comment_id": 97459664, "body": "can you check once.. im not getting -3 for my examples"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553648242, "post_id": 55367707, "comment_id": 97460005, "body": "Argh, I got the condition backwards throughout. Fixed."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1553667409, "last_edit_date": 1553667409, "creation_date": 1553643489, "answer_id": 55367707, "question_id": 55366489, "link": "https://stackoverflow.com/questions/55366489/perl-parse-signed-integer-for-byte-lengths-of-3-5-6-7/55367707#55367707", "title": "perl - parse signed integer for byte lengths of 3,5,6,7", "body": "<p>To extend the size of a 2's-complement integer, one must use <a href=\"https://en.wikipedia.org/wiki/Sign_extension\" rel=\"nofollow noreferrer\">sign extension</a>. This means you need to copy sign bit of the number into every bit you add.</p>\n\n<pre><code>  +---+---+---+---+---+---+---+------+\n  |   |   |   |   |   |   |   |      |\n  v   v   v   v   v   v   v   v      |\n+---+---+---+---+---+---+---+---+  +---+---+---+---+---+---+---+---+--\n|   |   |   |   |   |   |   |   |  |   |   |   |   |   |   |   |   | ...\n+---+---+---+---+---+---+---+---+  +---+---+---+---+---+---+---+---+--\nMSB         new byte          LSB  MSB        old byte(s)        LSB\n</code></pre>\n\n<p>So <code>0000 0011</code> (3) becomes <code>0000 0000 0000 0011</code> (3)<br>\nAnd <code>1111 1101</code> (-3) becomes <code>1111 1111 1111 1101</code> (-3).</p>\n\n<p>General solutions:</p>\n\n<ul>\n<li><p>To unpack a 1- to 8-byte, big-endian number:</p>\n\n<pre><code>unpack( \"q&gt;\", substr( ( ord($_) &amp; 0x80 ? \"\\xFF\"x7 : \"\\x00\"x7 ) . $_, -8 ) )\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>$ perl -e'\n   for ( map { ( \"\\x00\" x $_ ) . \"\\x03\", ( \"\\xFF\" x $_ ) . \"\\xFD\" } 0..7 ) {\n      printf \"%v02X =&gt; %d\\n\",\n         $_, unpack( \"q&gt;\", substr( ( ord($_) &amp; 0x80 ? \"\\xFF\"x7 : \"\\x00\"x7 ) . $_, -8 ) );\n   }\n'\n03 =&gt; 3\nFD =&gt; -3\n00.03 =&gt; 3\nFF.FD =&gt; -3\n00.00.03 =&gt; 3\nFF.FF.FD =&gt; -3\n00.00.00.03 =&gt; 3\nFF.FF.FF.FD =&gt; -3\n00.00.00.00.03 =&gt; 3\nFF.FF.FF.FF.FD =&gt; -3\n00.00.00.00.00.03 =&gt; 3\nFF.FF.FF.FF.FF.FD =&gt; -3\n00.00.00.00.00.00.03 =&gt; 3\nFF.FF.FF.FF.FF.FF.FD =&gt; -3\n00.00.00.00.00.00.00.03 =&gt; 3\nFF.FF.FF.FF.FF.FF.FF.FD =&gt; -3\n</code></pre></li>\n<li><p>To unpack a 1- to 8-byte, little-endian number:</p>\n\n<pre><code>unpack( \"q&lt;\", $_ . ( ord(substr($_, -1)) &amp; 0x80 ? \"\\xFF\"x7 : \"\\x00\"x7 ) )\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>$ perl -e'\n   for ( map { \"\\x03\" . ( \"\\x00\" x $_ ), \"\\xFD\" . ( \"\\xFF\" x $_ ) } 0..7 ) {\n      printf \"%v02X =&gt; %d\\n\",\n         $_, unpack( \"q&lt;\", $_ . ( ord(substr($_, -1)) &amp; 0x80 ? \"\\xFF\"x7 : \"\\x00\"x7 ) );\n   }\n'\n03 =&gt; 3\nFD =&gt; -3\n03.00 =&gt; 3\nFD.FF =&gt; -3\n03.00.00 =&gt; 3\nFD.FF.FF =&gt; -3\n03.00.00.00 =&gt; 3\nFD.FF.FF.FF =&gt; -3\n03.00.00.00.00 =&gt; 3\nFD.FF.FF.FF.FF =&gt; -3\n03.00.00.00.00.00 =&gt; 3\nFD.FF.FF.FF.FF.FF =&gt; -3\n03.00.00.00.00.00.00 =&gt; 3\nFD.FF.FF.FF.FF.FF.FF =&gt; -3\n03.00.00.00.00.00.00.00 =&gt; 3\nFD.FF.FF.FF.FF.FF.FF.FF =&gt; -3\n</code></pre></li>\n</ul>\n\n<p>Specific solutions:</p>\n\n<ul>\n<li><p>To unpack a 3-byte, big-endian number:</p>\n\n<pre><code>unpack( \"l&gt;\", ( ord($_) &amp; 0x80 ? \"\\xFF\" : \"\\x00\" ) . $_ )\n</code></pre></li>\n<li><p>To unpack a 3-byte, little-endian number:</p>\n\n<pre><code>unpack( \"l&lt;\", $_ . ( ord(substr($_, -1)) &amp; 0x80 ? \"\\xFF\" : \"\\x00\" ) )\n</code></pre></li>\n<li><p>To unpack a 5-byte big-endian number:</p>\n\n<pre><code>unpack( \"q&gt;\", ( ord($_) &amp; 0x80 ? \"\\xFF\"x3 : \"\\x00\"x3 ) . $_ )\n</code></pre></li>\n<li><p>To unpack a 5-byte little-endian number:</p>\n\n<pre><code>unpack( \"q&lt;\", $_ . ( ord(substr($_, -1)) &amp; 0x80 ? \"\\xFF\"x3 : \"\\x00\"x3 ) )\n</code></pre></li>\n<li><p>To unpack a 6-byte big-endian number:</p>\n\n<pre><code>unpack( \"q&gt;\", ( ord($_) &amp; 0x80 ? \"\\xFF\"x2 : \"\\x00\"x2 ) . $_ )\n</code></pre></li>\n<li><p>To unpack a 6-byte little-endian number:</p>\n\n<pre><code>unpack( \"q&lt;\", $_ . ( ord(substr($_, -1)) &amp; 0x80 ? \"\\xFF\"x2 : \"\\x00\"x2 ) )\n</code></pre></li>\n<li><p>To unpack a 7-byte, big-endian number:</p>\n\n<pre><code>unpack( \"q&gt;\", ( ord($_) &amp; 0x80 ? \"\\xFF\" : \"\\x00\" ) . $_ )\n</code></pre></li>\n<li><p>To unpack a 7-byte, little-endian number:</p>\n\n<pre><code>unpack( \"q&lt;\", $_ . ( ord(substr($_, -1)) &amp; 0x80 ? \"\\xFF\" : \"\\x00\" ) )\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 1, "accepted_answer_id": 55367707, "answer_count": 1, "score": 2, "last_activity_date": 1553667409, "creation_date": 1553635822, "last_edit_date": 1553637867, "question_id": 55366489, "link": "https://stackoverflow.com/questions/55366489/perl-parse-signed-integer-for-byte-lengths-of-3-5-6-7", "title": "perl - parse signed integer for byte lengths of 3,5,6,7", "body": "<p>I have a business requirement to read signed integer values with byte lengths varying from 1 to 8.</p>\n\n<p>The standard implementation of int values occupies bytes of the order of 2**n</p>\n\n<pre><code>&gt; perl -e ' $x=chr(253); $y=unpack \"c\",$x; printf(\"%d\\n\",$y) ' # 1 byte\n-3\n&gt; perl -e ' $x=chr(255).chr(253); $y=unpack \"s&gt;\",$x; printf(\"%d\\n\",$y)' # 2 byte\n-3\n&gt; perl -e ' $x=chr(255) x 3;$x.=chr(253); $y=unpack \"i&gt;\",$x; printf(\"%d\\n\",$y) ' # 4 byte\n-3\n&gt; perl -e ' $x=chr(255) x 7;$x.=chr(253); $y=unpack \"q&gt;\",$x; printf(\"%d\\n\",$y) ' # 8 byte\n-3\n&gt;\n</code></pre>\n\n<p>For 3, 5, 6, 7 bytes, I'm trying like below</p>\n\n<pre><code>&gt; perl -e ' $x=chr(255) x 2;$x.=chr(253); $y=unpack \"i&gt;\",$x; printf(\"%d\\n\",$y) '\n0\n&gt;\n</code></pre>\n\n<p>But it is wrong, I need -3.</p>\n\n<p>This link <a href=\"https://stackoverflow.com/questions/15512295/decoding-3-byte-integer-in-perl\">Decoding 3-byte integer in Perl</a> answers for unsigned numbers but doesn't solve my problem.</p>\n\n<p>Can someone help to get signed values for 3, 5, 6, 7 bytes?</p>\n"}, {"tags": ["perl", "sorting", "substring"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1553635677, "last_edit_date": 1553635677, "creation_date": 1553635235, "answer_id": 55366361, "question_id": 55366314, "link": "https://stackoverflow.com/questions/55366314/sort-an-array-based-on-a-substring-in-the-array-element/55366361#55366361", "title": "Sort an array based on a substring in the array element", "body": "<p><a href=\"https://perldoc.pl/functions/sort\" rel=\"nofollow noreferrer\">sort</a> can take the first parameter that is a code block that compares two elements:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nmy @myArray = qw( AAA|111|bbb CCC|333|ddd EEE|444|fff GGG|222|hhh );\n\n\nsay for sort { substr($a, 4, 3) cmp substr($b, 4, 3) } @myArray;\n</code></pre>\n\n<p>See also <a href=\"http://p3rl.org/substr\" rel=\"nofollow noreferrer\">substr</a>.</p>\n\n<p>Note that I removed the double quotes from the <code>qw()</code>. \"qw\" stands for \"quote words\", so no quotes are needed (in fact, they would be part of the strings which isn't what you wanted).</p>\n\n<p>Using the <a href=\"http://p3rl.org/Sort::Key\" rel=\"nofollow noreferrer\">Sort::Key</a> module, it can get even simpler:</p>\n\n<pre><code>use Sort::Key qw{ keysort };\n...\nsay for keysort { substr $_, 4, 3 } @myArray;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 11195588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0dbc17fc876cf987c4dc310466af8c?s=128&d=identicon&r=PG&f=1", "display_name": "Angelo", "link": "https://stackoverflow.com/users/11195588/angelo"}, "edited": false, "score": 0, "creation_date": 1553654603, "post_id": 55367903, "comment_id": 97461180, "body": "Thanks Choroba, I will try out your code and get back to you.  ikegami, I didn&#39;t intend for the array element to resemble a fixed-length record but you are right, it is now and I can remove the pipes. I was so involved in writing my code I didn&#39;t realize what had transpired. Thanks for the heads-up.  Angelo"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7, "user_id": 11195588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0dbc17fc876cf987c4dc310466af8c?s=128&d=identicon&r=PG&f=1", "display_name": "Angelo", "link": "https://stackoverflow.com/users/11195588/angelo"}, "edited": false, "score": 0, "creation_date": 1553655068, "post_id": 55367903, "comment_id": 97461282, "body": "You&#39;ll find <code>pack &quot;a3 a3 a3&quot;</code> and <code>unpack &quot;a3 a3 a3&quot;</code> useful"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1553655125, "last_edit_date": 1553655125, "creation_date": 1553645027, "answer_id": 55367903, "question_id": 55366314, "link": "https://stackoverflow.com/questions/55366314/sort-an-array-based-on-a-substring-in-the-array-element/55367903#55367903", "title": "Sort an array based on a substring in the array element", "body": "<p>What's the use of pipes if this is a record of fixed-length fields?</p>\n\n<p>If you were to treat the input as pipe-separated values, then your code would become</p>\n\n<pre><code>say for sort { ( split /\\|/, $a )[1] &lt;=&gt; ( split /\\|/, $b )[1] } @myArray;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>use Sort::Key qw( ikeysort );\n\nsay for ikeysort { ( split /\\|/ )[1] } @myArray;\n</code></pre>\n\n<p>[<em>This is not meant to be a complete answer, but an extension of choroba's.</em>]</p>\n"}], "owner": {"reputation": 7, "user_id": 11195588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0dbc17fc876cf987c4dc310466af8c?s=128&d=identicon&r=PG&f=1", "display_name": "Angelo", "link": "https://stackoverflow.com/users/11195588/angelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 1, "accepted_answer_id": 55366361, "answer_count": 2, "score": 0, "last_activity_date": 1553655125, "creation_date": 1553635014, "last_edit_date": 1553635292, "question_id": 55366314, "link": "https://stackoverflow.com/questions/55366314/sort-an-array-based-on-a-substring-in-the-array-element", "title": "Sort an array based on a substring in the array element", "body": "<p>Is there a way that I can sort an array based on a sub-string of the array element. For example, lets say I have the following array:</p>\n\n<pre><code>@myArray = qw(\"AAA|111|bbb\" \"CCC|333|ddd\" \"EEE|444|fff\" \"GGG|222|hhh\");\n</code></pre>\n\n<p>I want to sort this array based on the sub-string starting at position 4 (zero-based) for a length of 3 (in the first array element in my example, that would be \"111\").</p>\n\n<p>The length of each array element will always be the same for all elements and the sub-string I want to sort on will always be in the same position for the same length in the array element.</p>\n\n<p>This is what my sorted output would look like:</p>\n\n<pre><code>AAA|111|bbb\n\nGGG|222|hhh\n\nCCC|333|ddd\n\nEEE|444|fff\n</code></pre>\n\n<p>Also, while I am showing numbers as the sub-string in my example, it could be non-number values in there too. So the sort would have to work for non-numbers too.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1553629521, "post_id": 55365062, "comment_id": 97453934, "body": "Hint: what happens when <code>$n &lt;= 0</code> in the <code>factorial</code> sub?"}, {"owner": {"reputation": 655, "user_id": 9345938, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XVV2JO7Xl1M/AAAAAAAAAAI/AAAAAAAAFus/a44EGq2HBC0/photo.jpg?sz=128", "display_name": "Aureliano Guedes", "link": "https://stackoverflow.com/users/9345938/aureliano-guedes"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1553638502, "post_id": 55365062, "comment_id": 97457496, "body": "@mob actually is expected never have <code>$n &lt; 1</code> anyway if <code>$n == 0</code> it will return 0, and of course follows the same logic of any mathematical operation. Decreasing to lower than <code>0</code> the result should away return <code>0</code>. Anyway I understand that is better use <code>$n &lt;= 1</code> in <code>sub fac</code> routine. So: <code>sub fac{ my ($n) = @_; $n &lt;= 1 ? 1 : $n * fac($n -1)}</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553645177, "post_id": 55365062, "comment_id": 97459399, "body": "Note: If you&#39;re using a 32-bit build of Perl, the maximum amount of memory the process can use is 2-3 GiB (depending on the OS), regardless of how much RAM the machine has."}], "answers": [{"comments": [{"owner": {"reputation": 655, "user_id": 9345938, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XVV2JO7Xl1M/AAAAAAAAAAI/AAAAAAAAFus/a44EGq2HBC0/photo.jpg?sz=128", "display_name": "Aureliano Guedes", "link": "https://stackoverflow.com/users/9345938/aureliano-guedes"}, "edited": false, "score": 0, "creation_date": 1553638794, "post_id": 55365203, "comment_id": 97457598, "body": "Thanks. So it was bad implemented, better do <code>sub fac{ my ($n) = @_; $n == 1 ? 1 : $n * fac($n -1)}</code>."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 6, "last_activity_date": 1553631537, "last_edit_date": 1553631537, "creation_date": 1553629757, "answer_id": 55365203, "question_id": 55365062, "link": "https://stackoverflow.com/questions/55365062/out-of-memory-with-simple-calc/55365203#55365203", "title": "Out of memory with simple calc?", "body": "<p>With <code>$n = 3</code> your <code>toplogies(3)</code> will call <code>factorial(1)</code> and <code>factorial(0)</code>. The latter one is improperly implemented and tries to create the factorial by calling <code>factorial(-1)</code> which then calls <code>factorial(-2)</code> which then calls <code>factorial(-3)</code> ..., i.e. an endless recursion where each step allocates more memory. This endless recursion will result  therefore in the out of memory. Similar things happen with <code>$n&lt;3</code>.</p>\n"}], "owner": {"reputation": 655, "user_id": 9345938, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XVV2JO7Xl1M/AAAAAAAAAAI/AAAAAAAAFus/a44EGq2HBC0/photo.jpg?sz=128", "display_name": "Aureliano Guedes", "link": "https://stackoverflow.com/users/9345938/aureliano-guedes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 55365203, "answer_count": 1, "score": 1, "last_activity_date": 1553631537, "creation_date": 1553629104, "question_id": 55365062, "link": "https://stackoverflow.com/questions/55365062/out-of-memory-with-simple-calc", "title": "Out of memory with simple calc?", "body": "<p>I'm getting <code>out of memory</code> with a very simple calc.</p>\n\n<p>I'm try to calc ow many topologies a binary tree might has given a number <code>n</code> of samples</p>\n\n<p>So I simple try <code>perl -E 'sub fac{ my ($n) = @_; $n == 1 ? 1 : $n * fac($n -1)} sub top{ my ($n) = @_; $t = fac(2 * $n - 5) / (2 ** ($n - 3) * fac($n - 3) ) } say top(3)'</code> \nAlso, a other version of same math:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\n#use features;\n\nsub factorial{\n        my ($n) = @_;\n        $n == 1 ? 1 : $n * factorial($n -1)\n}\n\nsub topologies{\n        my ($n) = @_;\n        my $a = (2 * $n) - 5;\n        my $a_f = factorial($a);\n        my $b = $n -3;\n        my $b_f = factorial($b);\n        my $c = 2 ** $b;\n        my $q = $c * $b_f;\n        my $t = $a_f / $q;\n        return $t;\n}\n\nprint \"Enter number of taxas: \";\nmy $input = &lt;STDIN&gt;;\nmy $ntop = topologies();\n\nprint $ntop, \"\\n\";\n</code></pre>\n\n<p>And when I try even for a sample size <code>3</code>. I got <code>out of memory</code> in a computer with 4GB of ram and 4GB of cache. The same to a 128GB or ram server.</p>\n\n<p>I do not need this calc, I was just try for fun.\nBut I cannot figure out why I'm getting this <code>out of memory</code> message.</p>\n\n<p>EDIT: I just get it when the sample is equal or smaller than 3</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553628860, "post_id": 55364839, "comment_id": 97453630, "body": "thank you for the answer.. will not using chr() on a binmode string change characters"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553628976, "post_id": 55364839, "comment_id": 97453681, "body": "Re &quot;<i>will not using chr() on a binmode string change characters</i>&quot;, huh? None of the solutions use <code>chr</code> on a string."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553629345, "post_id": 55364839, "comment_id": 97453865, "body": "just curious..  this is something like A minus B set operation, so can it be done with 2 arrays of byte values?."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553629850, "post_id": 55364839, "comment_id": 97454076, "body": "You could consider the list of bytes to strip a set, but not the data because the values of sets are unique and unordered. But you aren&#39;t wrong. The non-regex solution is I&#39;ve just added is basically exactly how I&#39;d do a set difference (if the elements of the sets started in arrays): <code>my %B = map { $_ =&gt; 1 } @B; my @AminusB = grep !$B{$_}, @A;</code>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1553631445, "post_id": 55364839, "comment_id": 97454708, "body": "<code>list2re</code> from <a href=\"https://metacpan.org/pod/Data::Munge\" rel=\"nofollow noreferrer\">Data::Munge</a> can nicely wrap the logic of creating the regex (though I don&#39;t know if the resulting regex will be as efficient as a character class in this case)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1553632311, "post_id": 55364839, "comment_id": 97455082, "body": "@Grinnz, <code>list2re</code> doesn&#39;t perform any optimizations (unlike Regexp::Assemble, though most of the optimizations might not be needed since Perl switched to using tries for alternations), but it does help handle a couple corner cases."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553646367, "post_id": 55364839, "comment_id": 97459651, "body": "how about <code>tr&#47;&#47;d</code> instead of <code>$data =~ s&#47;$re&#47;&#47;g</code>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1553647565, "post_id": 55364839, "comment_id": 97459864, "body": "tr/// would be a good choice for this problem as well (and wouldn&#39;t require the quotemeta step)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553649115, "post_id": 55364839, "comment_id": 97460162, "body": "tr/// would be fastest and quite simple if the bytes to remove were hardcoded (though it would definitely still require some form of encoding/escaping contrary to what Grinnz says). On the other hand, using tr/// with a dynamic liste of character would be far more complex (because you can&#39;t interpolate into tr///). You&#39;d have to build a whole sub dynamically, and call the sub to do the replace. But since subs are quire slow to call (relatively speaking), it would outweigh the benefit of switching tr/// except for very long strings."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1553651281, "last_edit_date": 1553651281, "creation_date": 1553628250, "answer_id": 55364839, "question_id": 55364557, "link": "https://stackoverflow.com/questions/55364557/perl-remove-bytes-from-a-binmode-string-by-looking-up-an-array/55364839#55364839", "title": "perl - remove bytes from a binmode string by looking up an array", "body": "<p>The regex engine is perfectly happy to operate on strings of bytes (though using <code>\\d</code> and such may not make any sense), so your approach is perfectly fine. But white quite efficient, it can be sped up.</p>\n\n<p>What if we used <code>chr</code> on the bytes to strip rather than using <code>ord</code> on all the characters read?</p>\n\n<pre><code>my @to_strip = ( 5, 11, 12, 13, 21, 64, 91, 92, 98, 107 );\nmy %to_strip = map { chr($_) =&gt; 1 } @to_strip;\n\n$data =~ s/(.)/ $strip{$1} ? \"\" :$1 /ge;\n</code></pre>\n\n<p>What if we took it a step further, and made the replacement choice even sooner?</p>\n\n<pre><code>my @to_strip = ( 5, 11, 12, 13, 21, 64, 91, 92, 98, 107 );\nmy %to_strip = map { chr($_) =&gt; 1 } @to_strip;\nmy %map = map { $to_strip{$_} ? \"\" : $_ } map chr, 0x00..0xFF;\n\n$data =~ s/(.)/$map{$1}/sg;\n</code></pre>\n\n<p>But we're still doing a lot of needless replacements. What if we search for the specific character we want to replace?</p>\n\n<pre><code>my @to_strip = ( 5, 11, 12, 13, 21, 64, 91, 92, 98, 107 );\nmy $pat = \"[\" . quotemeta( pack( 'C*', @to_strip ) ) . \"]+\";\nmy $re = qr/$pat/;\n\n$data =~ s/$re//g;\n</code></pre>\n\n<p>This one is much faster for three reasons:</p>\n\n<ul>\n<li>As previously mentioned, we greatly reduced the number of matches, which reduces the number of times the replacement expression needs to be evaluated and concatenated.</li>\n<li>The regex engine can check for matching characters far faster than our Perl code can.</li>\n<li>We eliminated the need for captures, which are (relatively speaking) quite slow.</li>\n</ul>\n\n<p>Remember that <code>@to_strip</code>, <code>%to_strip</code>, <code>%map</code>, <code>$pat</code> and <code>$re</code> only need to be calculated once, not once per <code>read</code>. When I talked about speed above, I wasn't including the time needed to calculate these, since I assumed you will be doing multiple reads and replaces.</p>\n\n<hr>\n\n<p>That said, if it's reasonable to hardcode the bytes to remove, <code>tr///d</code> will give you the best performance.</p>\n\n<pre><code>$data =~ tr/\\x05\\x0B-\\x0D\\x15\\x40\\x5B\\x5C\\x62\\x6B//d;\n</code></pre>\n\n<p>It's not effective to use <code>tr///</code> from a dynamic list because <code>tr///</code> doesn't interpolate. We have to resort to building a sub, and invoking a sub is relatively slow.</p>\n\n<pre><code>my @to_strip = ( 5, 11, 12, 13, 21, 64, 91, 92, 98, 107 );\nmy $class = quotemeta( pack( 'C*', @to_strip ) );\nmy $inline_stripper = eval(\"sub { $_[0] =~ tr/$class//d; }\");\n\n$inline_stripper-&gt;($data);\n</code></pre>\n\n<hr>\n\n<p>The following is an efficient (but surely not as efficient) non-regex approach.</p>\n\n<pre><code>my @to_strip = ( 5, 11, 12, 13, 21, 64, 91, 92, 98, 107 );\nmy @to_strip_lookup; $to_strip_lookup[$_] = 1 for @to_strip;\n\n$data = pack 'C*', grep !$to_strip_lookup[$_], unpack 'C*', $data\n</code></pre>\n"}], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "accepted_answer_id": 55364839, "answer_count": 1, "score": 1, "last_activity_date": 1553651281, "creation_date": 1553627007, "question_id": 55364557, "link": "https://stackoverflow.com/questions/55364557/perl-remove-bytes-from-a-binmode-string-by-looking-up-an-array", "title": "perl - remove bytes from a binmode string by looking up an array", "body": "<p>I'm reading file in chunks using binmode() and wanted to strip out byte values that match any value in a static list</p>\n\n<pre><code>@strip = (91,   92,   98,   107,   5,   64,   21,   13,   11,   12)\n</code></pre>\n\n<p>what I'm doing in my script</p>\n\n<pre><code>binmode($fh);\nread($fh,$data,20);\n%strip = (91=&gt;1, 92=&gt;1,98=&gt;1,107=&gt;1,5=&gt;1,64=&gt;1,21=&gt;,13=&gt;1,11=&gt;1,12=&gt;1); \n$data=~s/(.)/$strip{ord($1)} ? \"\" :$1/ge\n</code></pre>\n\n<p>I'm afraid, doing it regex way might be incorrect and have some undesirable results.</p>\n\n<p>Can someone suggest alternative ways that is cleaner and efficient to achieve it</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1553617940, "post_id": 55361933, "comment_id": 97447991, "body": "Are you sure your dates got parsed correctly? I.e. can you f.ex. print <code>$curmark</code> and <code>$lastmark</code> as ISO-8601 timestamps?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1553618327, "post_id": 55361933, "comment_id": 97448261, "body": "According to the documentation ISO-8601 is the default formatter, so all needed would be to comment out the <code>-&gt;set_formatter()</code> calls and then <code>print &quot;$currmark\\n&quot;;</code>"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1553618884, "post_id": 55361933, "comment_id": 97448595, "body": "What do you get if you add <code>use Data::Dumper;</code>and <code>my %deltas = $diff-&gt;deltas(); print Dump(\\%deltas);</code>? If I understand the documentation correctly <code>-&gt;delta_days()</code> only returns the days difference, not the <b>whole</b> difference in days."}, {"owner": {"reputation": 133, "user_id": 10157177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cifsisoxCms/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qgl7bNfO7PoxgxvnAkalc7y4NiXw/mo/photo.jpg?sz=128", "display_name": "James Finnegan", "link": "https://stackoverflow.com/users/10157177/james-finnegan"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1553620247, "post_id": 55361933, "comment_id": 97449354, "body": "I tried removing the set_formatter but the result is the same.  I believe that your right, its not giving the whole difference in days as this is the output from the dump"}, {"owner": {"reputation": 133, "user_id": 10157177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cifsisoxCms/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qgl7bNfO7PoxgxvnAkalc7y4NiXw/mo/photo.jpg?sz=128", "display_name": "James Finnegan", "link": "https://stackoverflow.com/users/10157177/james-finnegan"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1553620257, "post_id": 55361933, "comment_id": 97449361, "body": "$VAR1 = {           &#39;seconds&#39; =&gt; 0,           &#39;minutes&#39; =&gt; 0,           &#39;nanoseconds&#39; =&gt; 0,           &#39;days&#39; =&gt; 3,           &#39;months&#39; =&gt; 1         };"}, {"owner": {"reputation": 133, "user_id": 10157177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cifsisoxCms/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qgl7bNfO7PoxgxvnAkalc7y4NiXw/mo/photo.jpg?sz=128", "display_name": "James Finnegan", "link": "https://stackoverflow.com/users/10157177/james-finnegan"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1553620347, "post_id": 55361933, "comment_id": 97449416, "body": "what makes this strange is that if you change the 2nd date from 20190223 to 20190228 it does return the number of days, not weeks."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1553622022, "post_id": 55361933, "comment_id": 97450367, "body": "The problem is that you are looking for an <i>absolute</i> duration (i.e. # of days), but <code>subtract_datetime()</code> doesn&#39;t return that (it returns a duration of 1 month and 3 days). Please read the accepted answer of the duplicate link. It should solve your issue."}], "owner": {"reputation": 133, "user_id": 10157177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cifsisoxCms/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qgl7bNfO7PoxgxvnAkalc7y4NiXw/mo/photo.jpg?sz=128", "display_name": "James Finnegan", "link": "https://stackoverflow.com/users/10157177/james-finnegan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "closed_date": 1553618093, "answer_count": 0, "score": 0, "last_activity_date": 1553617840, "creation_date": 1553617553, "last_edit_date": 1553617840, "question_id": 55361933, "link": "https://stackoverflow.com/questions/55361933/calculate-number-of-days-between-dates-with-datetime", "closed_reason": "Duplicate", "title": "Calculate number of days between dates with DateTime", "body": "<p>I have 2 dates using the DateTime object and in trying to get the difference in days only using delta_days, it isn't working properly.  I thought it would give me the total days, but it looks like its not including the months worth of days.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use DateTime;\nuse DateTime::Format::Strptime;\nuse DateTime::Format::Duration;\n\nmy $parseseq = DateTime::Format::Strptime-&gt;new(pattern =&gt; '%Y%m%d');\nmy $todaydate = \"20190326\";\nmy $lastdate  = \"20190223\";\n\nmy $currmark = $parseseq-&gt;parse_datetime($todaydate);\n$currmark-&gt;set_formatter($parseseq);\nmy $lastmark = $parseseq-&gt;parse_datetime($lastdate);\n$lastmark-&gt;set_formatter($parseseq);\nmy $diff = $currmark-&gt;subtract_datetime($lastmark);\nmy $diffdays = $diff-&gt;delta_days();\nprint \"\\ntodaydate $todaydate\\n\";\nprint \"lastdate  $lastdate\\n\";\nprint \"Diff Days $diffdays\\n\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>todaydate 20190326\nlastdate  20190223\nDiff Days 3\n</code></pre>\n"}, {"tags": ["perl", "module"], "comments": [{"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1553606389, "post_id": 55357821, "comment_id": 97440058, "body": "@H&#229;kon H&#230;gland: You are right, it&#39;s from editing while trying different variants. But I hope you agree that the <i>hash key</i> (e.g. <code>:default</code>) has nothing to do with the type of error I&#39;m seeing. Fixed anyway."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1553606897, "post_id": 55357821, "comment_id": 97440422, "body": "Re: <i>&quot;has nothing to do with the type of error I&#39;m seeing&quot;</i> I tested this now and I get exactly that error (<code>Can&#39;t use an undefined value as an ARRAY reference ...</code>) if I include the colon. If I remove the colon it seems to work fine."}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1553607876, "post_id": 55357821, "comment_id": 97441099, "body": "@H&#229;kon H&#230;gland: So that would mean the Perl <i>compiler</i> actually tries to do hash lookup (the error message reads like a compiler error to me)? I thought the assignment happens at (early) runtime. But actually yes: You seem to be right."}], "answers": [{"comments": [{"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 1, "creation_date": 1553608954, "post_id": 55358784, "comment_id": 97441887, "body": "You can avoid the extra variables using map like this: <code>@EXPORT = map { @{$EXPORT_TAGS{$_}} } qw(status_codes command_types status_codes); @EXPORT_OK = @EXPORT</code>."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1553610265, "post_id": 55358784, "comment_id": 97442833, "body": "@U.Windl ...your <code>map</code> idea, but a bit more dynamic: <code>push @EXPORT, map { @{$EXPORT_TAGS{$_ }} } (keys %EXPORT_TAGS);</code> (ie, if the tags ever get updated, no need to remember to update the <code>qw()</code> in the <code>map</code> command."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1553608512, "last_edit_date": 1553608512, "creation_date": 1553608191, "answer_id": 55358784, "question_id": 55357821, "link": "https://stackoverflow.com/questions/55357821/how-to-import-export-tags-to-exports-ok/55358784#55358784", "title": "How to import EXPORT_TAGS to EXPORTS_OK?", "body": "<p>According to the <a href=\"https://perldoc.perl.org/Exporter.html\" rel=\"nofollow noreferrer\">documentation</a>, you should not include the leading colons for the tag names in the <code>%EXPORT_TAGS</code> hash.</p>\n\n<p>So you could also try something like this:</p>\n\n<pre><code>our %EXPORT_TAGS = (\n    'command_types' =&gt; [qw(ENQ ACK NAK)],\n    'commands' =&gt; [qw(A B C)],\n    'status_codes' =&gt; [qw(OK FAILED)],\n);\nmy @default_tags = qw(status_codes command_types commands);\nmy @default;\npush @default, @{$EXPORT_TAGS{$_}} for @default_tags;\nour @EXPORT = @default;\nour @EXPORT_OK = @default;\n</code></pre>\n"}], "owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 55358784, "answer_count": 1, "score": -1, "last_activity_date": 1553608512, "creation_date": 1553605217, "last_edit_date": 1553608413, "question_id": 55357821, "link": "https://stackoverflow.com/questions/55357821/how-to-import-export-tags-to-exports-ok", "title": "How to import EXPORT_TAGS to EXPORTS_OK?", "body": "<p>Trying to group my module exports using tags, I want to avoid listing the names more than once, so I tried this:</p>\n\n<pre><code>our %EXPORT_TAGS = (\n    'command_types' =&gt; [qw(ENQ ACK NAK)],\n    'commands' =&gt; [qw(A B C)],\n    'status_codes' =&gt; [qw(OK FAILED)],\n    'default' =&gt; [\n        qw(:status_codes :command_types :status_codes)\n    ]);\nour @EXPORT = @{$EXPORT_TAGS{':default'}};\nour @EXPORT_OK = @{$EXPORT_TAGS{':default'}};\n</code></pre>\n\n<p>But unfortunately Perl 5.18 tells me something about an undefined array reference for <code>@{$EXPORT_TAGS{':default'}}</code> (\"<em>Can't use an undefined value as an ARRAY reference</em> ...\"). However when I remove the outer <code>@{...}</code>, Perl no longer complains, but the result (array reference instead of an array) is wrong.</p>\n\n<p>What did I miss?</p>\n\n<p><strong>Update:</strong></p>\n\n<p>When I remove the colons from <code>:default</code>, the error message disappears, but then I get an error about <code>Can't export symbol: :command_types</code>. If I remove the colon from <code>:command_types</code> I don't get an error any more (at this point), but wouldn't that try to export a <em>symbol</em> named <code>command_types</code> instead of all symbols for tag <code>command_types</code>?</p>\n\n<p>The result effectively is <code>@EXPORT = qw(status_codes command_types status_codes)</code> then.</p>\n"}, {"tags": ["perl", "split"], "comments": [{"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 1, "creation_date": 1553603314, "post_id": 55357022, "comment_id": 97437872, "body": "<code>File::Basename</code> is a core module. No need to reinvent the wheel."}, {"owner": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "reply_to_user": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1553603357, "post_id": 55357022, "comment_id": 97437897, "body": "@dgw How can i used that one?"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553604026, "post_id": 55357022, "comment_id": 97438364, "body": "Why don&#39;t you want to use any module? Is it because you can&#39;t install any? Because you don&#39;t want too many dependencies? Because this is homework and that&#39;s a requirement?"}, {"owner": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553605413, "post_id": 55357022, "comment_id": 97439384, "body": "@Dada It;s not a homework. I don&#39;t want tot dependent any lib. If I run that programme in another laptop or PC it should be run without any lib."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553607281, "post_id": 55357022, "comment_id": 97440694, "body": "Alright, then using core modules is fine (as suggested by dgw and Stefan Becker), since they are shipped with Perl and don&#39;t require installing anything."}], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 2, "last_activity_date": 1553603801, "creation_date": 1553603801, "answer_id": 55357372, "question_id": 55357022, "link": "https://stackoverflow.com/questions/55357022/how-to-split-multiple-file-name-and-get-last-name-in-output/55357372#55357372", "title": "How to split multiple file name and get last name in output", "body": "<p>You could substitute everything up to the last slash (<code>/</code>). But that approach is non-portable. Perl core comes with <a href=\"https://metacpan.org/pod/File::Spec\" rel=\"nofollow noreferrer\">File::Spec</a> which allows you to write portable code:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy @paths = (\n    \"xyz/c.html\",\n    \"xyz/i/x.gif\",\n);\n\n# Non-portable code using regex\nforeach my $path (@paths) {\n    (my $basename = $path) =~ s,.*/,,;\n    print \"$path -&gt; $basename\\n\";\n}\n\n# Portable implementation using Perl core modules\nuse File::Spec;\n\nforeach my $path (@paths) {\n    my(undef, undef, $basename) = File::Spec-&gt;splitpath($path);\n    print \"$path -&gt; $basename\\n\";\n}\n\nexit 0;\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nxyz/c.html -&gt; c.html\nxyz/i/x.gif -&gt; x.gif\nxyz/c.html -&gt; c.html\nxyz/i/x.gif -&gt; x.gif\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 55357372, "answer_count": 1, "score": -3, "last_activity_date": 1553605138, "creation_date": 1553602837, "last_edit_date": 1553605138, "question_id": 55357022, "link": "https://stackoverflow.com/questions/55357022/how-to-split-multiple-file-name-and-get-last-name-in-output", "title": "How to split multiple file name and get last name in output", "body": "<p>I have to split the path names I get from another function. I don't want to use any module. My current code is </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $val =\"@missing\";\nforeach($val){\n    my f= split '/', $val;\n    say ($f[1]);\n}\n</code></pre>\n\n<p>Output </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>xyz/c.html xyz/i/x.gif\n</code></pre>\n\n<p>I want only the file name like this.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>c.html\nx.gif\n</code></pre>\n"}, {"tags": ["perl", "perlbrew"], "answers": [{"comments": [{"owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "edited": false, "score": 0, "creation_date": 1553672397, "post_id": 55361272, "comment_id": 97466264, "body": "Thanks. Not what I expected, but at least I know it&#39;s an option. BTW, how long does it typically take to create an instance?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "edited": false, "score": 1, "creation_date": 1553679721, "post_id": 55361272, "comment_id": 97470268, "body": "Once you&#39;ve built the image? Seconds. <code>docker run -it perl</code> will get you a shell with your &#39;clean perl&#39; almost instantly. You might need to copy &#39;whatever&#39; you want to test into there. The build naturally is &#39;compiling perl&#39; sort of timescale, so can take a while. However, Docker uses intermediate stages, so you don&#39;t need a full rebuild for every tweak. (but as a result, you should probably put the things that change least, first). Which means you can have a penultimate line of <code>COPY script_to_test</code> and it&#39;s still pretty quick."}, {"owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "edited": false, "score": 0, "creation_date": 1553695859, "post_id": 55361272, "comment_id": 97480733, "body": "OK, color me intrigued. Will add a todo item to try out docker. Thanks."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1553616231, "last_edit_date": 1553616231, "creation_date": 1553615400, "answer_id": 55361272, "question_id": 55357004, "link": "https://stackoverflow.com/questions/55357004/fastest-cheapest-way-to-create-a-fresh-throw-away-installation-of-perl-using-p/55361272#55361272", "title": "Fastest, cheapest way to create a fresh, throw-away installation of perl using perlbrew?", "body": "<p>It's not quite the same, but I find <code>docker</code> works if I'm needing a clean install for certain testing scenarios - build up a base image and a clean perl install, fire up the container and run 'whatever'.</p>\n\n<p>You'll need root access and be able to install packages (e.g. docker) so it's not going to be suitable for every use case. </p>\n\n<p><a href=\"https://buildlogs.centos.org/centos/7/docker/\" rel=\"nofollow noreferrer\">https://buildlogs.centos.org/centos/7/docker/</a> has a base image you can use to build a 'clean' CentOS (or use whatever OS you prefer frankly - most have container versions)</p>\n\n<pre><code>FROM scratch\nADD CentOS-7-20140625-x86_64-docker_01.img.tar.xz\nLABEL name=\"CentOS Base Image\"\nCMD [\"/bin/bash\"]\n</code></pre>\n\n<p>In the working directory:</p>\n\n<pre><code>docker build -t mycentos . \n</code></pre>\n\n<p>This will give you a very basic image:</p>\n\n<p>Then your perl dockerfile:</p>\n\n<pre><code>FROM mycentos \nCOPY local.repo /etc/yum.repos.d/local.repo\nRUN yum clean all\nRUN yum install --nogpgcheck -y make gcc tar\nADD perl-5.28.1.tar.gz /build/\nRUN cd /build/perl-5.28.1 &amp;&amp; ./Configure -de\nRUN cd /build/perl-5.28.1 &amp;&amp; make &amp;&amp; make test &amp;&amp; make install\nCOPY MyConfig.pm /root/.cpan/CPAN/MyConfig.pm\nRUN cpan install Bundle::CPAN\nCMD [\"/bin/bash\"]\n</code></pre>\n\n<p>You'll be able to spin this up, with e.g. <code>docker run</code> and invoke a script using <code>/usr/local/bin/perl</code>. </p>\n\n<p>It's not quite what you asked for, but your base image can be started and discarded as you wish - you can maintain image for a few different OS and perl combinations too. </p>\n"}], "owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1553616231, "creation_date": 1553602768, "last_edit_date": 1553606436, "question_id": 55357004, "link": "https://stackoverflow.com/questions/55357004/fastest-cheapest-way-to-create-a-fresh-throw-away-installation-of-perl-using-p", "title": "Fastest, cheapest way to create a fresh, throw-away installation of perl using perlbrew?", "body": "<p>I tried doing the following. First, I install a relocatable perl, e.g.:</p>\n\n<pre><code>% perlbrew -Duserelocatableinc -j4 -n --as perl-5.28.1-fresh_src 5.28.1\n</code></pre>\n\n<p>Then, whenever I need a new throw-away fresh installation of perl to test things out, I do:</p>\n\n<pre><code>% cp -la ~/perl5/perlbrew/perls/perl-5.28.1-fresh{_src,1}\n% perlbrew switch 5.28.1-fresh1\n</code></pre>\n\n<p>(then would later create <code>fresh2</code>, <code>fresh3</code> and so on as needed; and when I want to throw these away I just <code>rm -rf ~/perl5/perlbrew/perls/*fresh1</code> and so on.)</p>\n\n<p>However, something (cpanm? EUMM?) is still confused. Scripts installed from CPAN still has the original perl path (in this case, <code>/home/USER/perl5/perlbrew/perls/perl-5.28.1-fresh_src/bin</code>) in their shebang line.</p>\n\n<p>Any hint to the problem above, or an alternative way to quickly create a fresh throw-away perl installation is appreciated. Also, would the <code>-l</code> (<code>--link</code>) option of <code>cp</code> in the above command cause issue (other than <code>perllocal.pod</code> being appended and will contain installation records of perl installations, which is fine for me)?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553595151, "post_id": 55354295, "comment_id": 97432787, "body": "Can you give a bit of context? This sounds like an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>. Typically, doing the shift on decimal numbers would make more sense. However, if you are sure that this is what you want to do, then use <a href=\"https://perldoc.perl.org/functions/substr.html\" rel=\"nofollow noreferrer\"><code>substr</code></a> (what you call a &quot;binary number&quot; is seen by Perl as a string, not a number)."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1553598417, "post_id": 55354295, "comment_id": 97434926, "body": "I assume that <code>$binary_number</code> is an integer scalar and not a string? If it would be a string you could simply use <code>substr()</code> to extract the right bits."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1553603667, "post_id": 55354295, "comment_id": 97438119, "body": "@StefanBecker Given OP&#39;s <a href=\"https://stackoverflow.com/questions/55351735/appending-0-before-binary-number-based-on-a-value-in-a-variable\">previous question</a>, I suppose that <code>$binary_number</code> is a string, but I might be wrong. (and that information should definitely be in the question: OP, please, clarify that)"}], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1553598774, "last_edit_date": 1553598774, "creation_date": 1553596958, "answer_id": 55355166, "question_id": 55354295, "link": "https://stackoverflow.com/questions/55354295/right-shift-a-binary-no-and-get-the-shifted-bits-in-a-variable/55355166#55355166", "title": "Right shift a binary no and get the shifted bits in a variable", "body": "<p>Generate a bit mask based on <code>$value</code> and use the AND (<code>&amp;</code>) operator:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $binary = 0b110000001;\nmy $value  = 4;\n\n# create mask with $value left-most bits 1\nmy $mask = ~(~0 &lt;&lt; $value);\n\nprint \"INPUT:     \", unpack(\"B*\", pack(\"N\", $binary)), \" ($binary)\\n\";\n\n# right shift by $value bits\nmy $right_shifted_binary = $binary &gt;&gt; $value;\nprint \"RIGHT:     \", unpack(\"B*\", pack(\"N\", $right_shifted_binary)), \" ($right_shifted_binary)\\n\";\n\n# extract \"remainder\" of shift using mask\nmy $bits_shifted = $binary &amp; $mask;\nprint \"REMAINDER: \", unpack(\"B*\", pack(\"N\", $bits_shifted)), \" ($bits_shifted)\\n\";\n\nexit 0;\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nINPUT:     00000000000000000000000110000001 (385)\nRIGHT:     00000000000000000000000000011000 (24)\nREMAINDER: 00000000000000000000000000000001 (1)\n\n# Proof\n$ echo \"24 * 16 + 1\" | bc\n385\n</code></pre>\n\n<hr>\n\n<p>If the binary number is given as string you can convert it to an integer first:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $binary_string = \"110000001\";\nmy $binary = unpack(\"N\", pack(\"B32\", substr(\"0\" x 32 . $binary_string, -32)));\n</code></pre>\n\n<p>But if it is already a string then the solution would be much simpler:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $binary_string = \"110000001\";\nmy $value  = 4;\n\nprint \"INPUT:     $binary_string\\n\";\nprint \"RIGHT:     \", substr($binary_string, 0, -$value), \"\\n\";\nprint \"REMAINDER: \", substr($binary_string, -$value),    \"\\n\";\n\nexit 0:\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nINPUT:     110000001\nRIGHT:     11000\nREMAINDER: 0001\n</code></pre>\n"}], "owner": {"reputation": 401, "user_id": 10004688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lURyY.jpg?s=128&g=1", "display_name": "rikki", "link": "https://stackoverflow.com/users/10004688/rikki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553598774, "creation_date": 1553594409, "last_edit_date": 1553598484, "question_id": 55354295, "link": "https://stackoverflow.com/questions/55354295/right-shift-a-binary-no-and-get-the-shifted-bits-in-a-variable", "title": "Right shift a binary no and get the shifted bits in a variable", "body": "<p>I have a binary no say and I have a value in variable say value = 4. \nI want to right shift the binary no by no of bits stored in \"value\" variable and then want to store the shifted bits in a variable and also want to save binary no obtained after right shift in another variable</p>\n\n<p>Example:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>binary_number = 110000001\nvalue =4 \nthen shifting no of bits in \"value\" to right (11000001 &gt;&gt; value)\n</code></pre>\n\n<p>Now I want to finally have two variables one containing the binary no after shift and one variable with shifted bits.</p>\n\n<p>For above example the solution that I want is</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>right_shifted_binary = 11000\nbits_shifted = 0001\n</code></pre>\n\n<p>I can not find a proper documentation for the problem as most of the problem are telling about arithmetic right shift.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553592044, "post_id": 55352667, "comment_id": 97430848, "body": "can you check your required output again?. the timing() is not deleted.."}, {"owner": {"reputation": 35, "user_id": 5423057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c81c0f99a55a7e4fba6f5f24d85dabf1?s=128&d=identicon&r=PG&f=1", "display_name": "anny", "link": "https://stackoverflow.com/users/5423057/anny"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553592426, "post_id": 55352667, "comment_id": 97431066, "body": "&quot;max_transition&quot; line must be deleted not the timing block. &quot;max_transition&quot; must be deleted in which pin group the code will find timing group. please see, from pin HIZIBI, max_transition is deleted."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1553594466, "post_id": 55352667, "comment_id": 97432369, "body": "Your simple solution &quot;read a line, don&#39;t print it when conditions are met&quot; won&#39;t work with your new requirement, as <code>timing(</code> occurs after the line you want to delete. You&#39;ll have to rewrite your code to read one whole <code>pin(..) { ... }</code> section in, decide which lines to delete and then dump it to the output. As you have several block-type statements you will either need to count the open brackets or write a real parser for the given syntax."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1553615884, "post_id": 55352667, "comment_id": 97446694, "body": "Code is far easier to read if it is indented properly. I&#39;ve just fixed that for the code in this question. Please do it yourself in the future."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5423057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c81c0f99a55a7e4fba6f5f24d85dabf1?s=128&d=identicon&r=PG&f=1", "display_name": "anny", "link": "https://stackoverflow.com/users/5423057/anny"}, "edited": false, "score": 0, "creation_date": 1553596884, "post_id": 55354781, "comment_id": 97433932, "body": "Dear stack0114106,  After running the command I am getting &quot;timing: Event not found&quot; from command line."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 35, "user_id": 5423057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c81c0f99a55a7e4fba6f5f24d85dabf1?s=128&d=identicon&r=PG&f=1", "display_name": "anny", "link": "https://stackoverflow.com/users/5423057/anny"}, "edited": false, "score": 0, "creation_date": 1553597079, "post_id": 55354781, "comment_id": 97434048, "body": "@anny..no it worked for me..anny_in is the input file..  please try again"}, {"owner": {"reputation": 35, "user_id": 5423057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c81c0f99a55a7e4fba6f5f24d85dabf1?s=128&d=identicon&r=PG&f=1", "display_name": "anny", "link": "https://stackoverflow.com/users/5423057/anny"}, "edited": false, "score": 0, "creation_date": 1553598365, "post_id": 55354781, "comment_id": 97434900, "body": "Dear stack0114106, I tried several times, but still getting the same issue. Is it due to we are using different OS version? I am using it into CentOS 6.7."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 35, "user_id": 5423057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c81c0f99a55a7e4fba6f5f24d85dabf1?s=128&d=identicon&r=PG&f=1", "display_name": "anny", "link": "https://stackoverflow.com/users/5423057/anny"}, "edited": false, "score": 0, "creation_date": 1553599753, "post_id": 55354781, "comment_id": 97435655, "body": "im running it in cygwin.. can you check if <code>\\r</code> is present?.. if so remove that and try again?"}, {"owner": {"reputation": 35, "user_id": 5423057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c81c0f99a55a7e4fba6f5f24d85dabf1?s=128&d=identicon&r=PG&f=1", "display_name": "anny", "link": "https://stackoverflow.com/users/5423057/anny"}, "edited": false, "score": 0, "creation_date": 1553600405, "post_id": 55354781, "comment_id": 97436035, "body": "\\r is not present"}, {"owner": {"reputation": 35, "user_id": 5423057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c81c0f99a55a7e4fba6f5f24d85dabf1?s=128&d=identicon&r=PG&f=1", "display_name": "anny", "link": "https://stackoverflow.com/users/5423057/anny"}, "edited": false, "score": 0, "creation_date": 1553601395, "post_id": 55354781, "comment_id": 97436644, "body": "Dear stack0114106, can you pleas post which perl verson you are using, I am using &quot;This is perl, v5.10.1 (*) built for x86_64-linux-thread-multi &quot;. I believe the version differences can create the issue."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 35, "user_id": 5423057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c81c0f99a55a7e4fba6f5f24d85dabf1?s=128&d=identicon&r=PG&f=1", "display_name": "anny", "link": "https://stackoverflow.com/users/5423057/anny"}, "edited": false, "score": 0, "creation_date": 1553604178, "post_id": 55354781, "comment_id": 97438481, "body": "I did try this in our Enterprise perl <code>This is perl, v5.10.1 (*) built for x86_64-linux-thread-multi</code> and got the same output.. Are you pasting the entire command in a single line or not ?"}, {"owner": {"reputation": 35, "user_id": 5423057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c81c0f99a55a7e4fba6f5f24d85dabf1?s=128&d=identicon&r=PG&f=1", "display_name": "anny", "link": "https://stackoverflow.com/users/5423057/anny"}, "edited": false, "score": 0, "creation_date": 1553608712, "post_id": 55354781, "comment_id": 97441709, "body": "Yes, I copied the whole perl command and paste it in a single line in command prompt. Can not figure out, where the actual issue at my end."}, {"owner": {"reputation": 35, "user_id": 5423057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c81c0f99a55a7e4fba6f5f24d85dabf1?s=128&d=identicon&r=PG&f=1", "display_name": "anny", "link": "https://stackoverflow.com/users/5423057/anny"}, "edited": false, "score": 0, "creation_date": 1553612508, "post_id": 55354781, "comment_id": 97444397, "body": "I use the same command for upgraded perl compiler and it is executing the way it should be :)  Thanks a lot for your support  stack0114106"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 35, "user_id": 5423057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c81c0f99a55a7e4fba6f5f24d85dabf1?s=128&d=identicon&r=PG&f=1", "display_name": "anny", "link": "https://stackoverflow.com/users/5423057/anny"}, "edited": false, "score": 0, "creation_date": 1553615313, "post_id": 55354781, "comment_id": 97446329, "body": "anny!.. great that it worked for you now..I was wondering what could have went wrong!.. please consider accepting the answer"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1553617729, "post_id": 55354781, "comment_id": 97447863, "body": "What is the point in posting this as a cryptic command line script? Wouldn&#39;t it make more sense to post it as a complete program? With comments explaining how it works."}], "tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 1, "last_activity_date": 1553595838, "creation_date": 1553595838, "answer_id": 55354781, "question_id": 55352667, "link": "https://stackoverflow.com/questions/55352667/need-to-save-a-single-line-from-delete-on-some-special-condition/55354781#55354781", "title": "Need to save a single line from delete on some special condition", "body": "<p>Try this command line Perl</p>\n\n<pre><code> perl -0777 -ne ' s/(pin\\s*\\(\".+?\"?\\)\\s+\\{.+?\\})/$x=$1;if($x=~m!timing\\s*\\(\\)! and $x=~m!direction : output!){$x=~s!^\\s*max_transition.+?\\n!!mg};$x/gse ; print ' anny_in.txt\n</code></pre>\n\n<p><strong>Results:</strong></p>\n\n<pre><code> cell (lib_1) {\n    dont_use : true ;\n    dont_touch : true ;\n    pin (\"HIZIBI_IN_1\") {\n      direction : input ;\n      clock : true ;\n      max_transition : 1 ;\n      capacitance : 12 ;\n    }\n    pin (\"HIZIBI_79\")    {\n      direction : output ;\n      max_transition : 10;\n      min_capacitance : 3 ;\n    }\n    pin (\"HIZIBI_IN_1\") {\n      direction : input ;\n      clock : true ;\n      max_transition : 1 ;\n      capacitance : 1 ;\n    }\n    pin (\"HIZIBI_78\")    {\n      direction : output ;\n      max_transition : 10;\n      min_capacitance : 34 ;\n      capacitance : 34 ;\n    }\n    pin (\"HIZIBI\")    {\n      direction : output ;\n      clock : true ;\n      related_power_pin : VDD ;\n      related_ground_pin : VSS ;\n      timing () {\n        cell_fall (into_f1) {\n          index_1(\"1,2,3,4,5\") ;\n          index_2(\"1,2,3,4,5\") ;\n          values(\"13, 13, 14, 16, 18\",\\\n                 \"13, 14, 15, 16, 19\",\\\n                 \"14, 15, 16, 17, 20\",\\\n                 \"15, 15, 16, 18, 20\",\\\n                 \"15, 16, 17, 18, 21\") ;\n        }\n      }\n    }\n  }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 5423057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c81c0f99a55a7e4fba6f5f24d85dabf1?s=128&d=identicon&r=PG&f=1", "display_name": "anny", "link": "https://stackoverflow.com/users/5423057/anny"}, "edited": false, "score": 0, "creation_date": 1553774794, "post_id": 55361924, "comment_id": 97514516, "body": "This is the best answer @Dave Cross. I believe you have done the best way it should be. No it is not &quot; fragile &quot;, the code is meeting every conditions which I did not mention here. Thank you Sir :)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 35, "user_id": 5423057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c81c0f99a55a7e4fba6f5f24d85dabf1?s=128&d=identicon&r=PG&f=1", "display_name": "anny", "link": "https://stackoverflow.com/users/5423057/anny"}, "edited": false, "score": 1, "creation_date": 1553777657, "post_id": 55361924, "comment_id": 97516443, "body": "@anny: If you think it&#39;s the best answer, then please consider accepting it. <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}, {"owner": {"reputation": 35, "user_id": 5423057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c81c0f99a55a7e4fba6f5f24d85dabf1?s=128&d=identicon&r=PG&f=1", "display_name": "anny", "link": "https://stackoverflow.com/users/5423057/anny"}, "edited": false, "score": 0, "creation_date": 1553783652, "post_id": 55361924, "comment_id": 97520932, "body": "I am very very sorry, I should  click on the check mark beside the answer. Just now I did it.  Sorry again."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1553617522, "creation_date": 1553617522, "answer_id": 55361924, "question_id": 55352667, "link": "https://stackoverflow.com/questions/55352667/need-to-save-a-single-line-from-delete-on-some-special-condition/55361924#55361924", "title": "Need to save a single line from delete on some special condition", "body": "<p>This gets a lot easier if you parse the file to deal with one <code>pin { ... }</code> section at a time. This code seems to do the trick, but it's probably fragile and might well break on more complex input.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\n# $counter will contain the number of unmatched { characters\n# we have seen. If it's a positive number then we are in a\n# pin section and we won't output anything until we get to\n# the end of that section.\nmy $counter;\n# Contains the contents of our current pin section.\nmy $pin = '';\n\n# Read a line at a time from STDIN\nwhile (&lt;&gt;) {\n  # If we're not in a pin block, then\n  # just print the line.\n  if (!$counter and !/\\bpin\\b/) {\n    print;\n    next;\n  }\n\n  # Increment $counter by the number of { characters in the line\n  $counter += tr/{/{/;\n  # Decrement $counter by the number of } characters in the line\n  $counter -= tr/}/}/;\n\n  # Append the current line to $pin\n  $pin .= $_;\n\n  # If $counter is 0 then we've just got to the end of a pin\n  # block. The text of that block will be in $pin.\n  if (!$counter) {\n    # If $pin contains \"directions : output\" and \"timings\"...\n    if ($pin =~ /direction\\s*:\\s*output/ and $pin =~ /timing\\s*/) {\n      # ... then remove the \"max_transitions\" line from $pin\n      $pin =~ s/\\s*max_transition\\s*:.*\\n//;\n    }\n    # Print the current $pin section\n    print $pin;\n    # And reset $pin to start the next section.\n    $pin = '';\n  }\n}\n</code></pre>\n\n<p>I've also written this as a Unix filter. That is, it reads from <code>STDIN</code> and writes to <code>STDOUT</code>. This is more flexible than hard-coding filenames. You would run it like this:</p>\n\n<pre><code>$ my_pin_filter &lt; in_file &gt; tmpdir/input_lib.lib\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 5423057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c81c0f99a55a7e4fba6f5f24d85dabf1?s=128&d=identicon&r=PG&f=1", "display_name": "anny", "link": "https://stackoverflow.com/users/5423057/anny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 2, "accepted_answer_id": 55361924, "answer_count": 2, "score": 1, "last_activity_date": 1553617522, "creation_date": 1553588643, "last_edit_date": 1553615836, "question_id": 55352667, "link": "https://stackoverflow.com/questions/55352667/need-to-save-a-single-line-from-delete-on-some-special-condition", "title": "Need to save a single line from delete on some special condition", "body": "<p>I have written a perl code which is able to search and delete a line from a file (IN_FILE) which contains \"max_transition\",when \"direction : output\" condition will satisfy. After deleting the line the code writes the modified file into a different location.</p>\n\n<p>Now I need to delete the line \"max_transition\" when the \"direction : output\" condition will satisfy as well as where it will find word \"timing\" in that particular pin group.</p>\n\n<p>IN_FILE, has output pin \"HIZIBI_79\", HIZIBI_78 and HIZIBI. After running the script \"max_transition\" line should not be deleted from pin \"HIZIBI_79\", HIZIBI_78\", because this pin group do not have \"timing\". Only \"max_transition\" line would be deleted from pin \"HIZIBI\", it has a \"timing\" group.</p>\n\n<p>Any idea how to implement it?</p>\n\n<p>Output file should be look like OUT_FILE</p>\n\n<pre><code>use warnings;\nuse strict;\nmy $inputfile = $ARGV[0]; # input lib FILE\n\nif ($#ARGV!=0)\n{\n  print \"USAGE :: perl max_tran_update.pl &lt;&lt;LIB_FILE&gt;&gt;  \\n\\n\" ;\n  exit(1);   \n}\n\nmy $cmd = \"mkdir  tmpdir;\";\nsystem ($cmd);\n\nmy $iline;\nmy $flag_outpin = 0;\nmy $out_pin_flag = 0;\n\nopen (INFILE,\"&lt;\",\"$inputfile\") || die \"Can not open Input LIB File\";\nopen (my $OPFILE,\"&gt;\",\"tmpdir/input_lib.lib\") || die \"Can not open Input Text File\";\n\nwhile ($iline = &lt;INFILE&gt;)\n{\n  chomp $iline;\n  print $OPFILE \"$iline\\n\";\n  if (($iline =~m/^\\s*direction\\s*:\\s*output\\s*;/g))\n  {\n    $flag_outpin=1;\n    while ($iline = &lt;INFILE&gt;)\n    {\n      if (($iline =~m/^\\s*direction\\s*:\\s*input\\s*;/g))\n      {\n        $flag_outpin=0;\n      }\n      if (($iline =~m/^\\s*direction\\s*:\\s*output\\s*;/g))\n      {\n        $flag_outpin=1;\n      }\n      if (($iline =~m/^\\s*max_transition\\s*:/g) &amp;&amp; ($flag_outpin == 1))\n      {\n        $iline =~ s/$iline//g ;\n      }\n      else \n      {\n        print $OPFILE \"$iline\";\n      }\n    }\n  }\n}      \nclose INFILE;\nclose $OPFILE;\n</code></pre>\n\n<p> IN_FILE </p>\n\n<pre><code>  cell (lib_1) {\n    dont_use : true ;\n    dont_touch : true ;\n    pin (\"HIZIBI_IN_1\") {\n      direction : input ;\n      clock : true ;\n      max_transition : 1 ;\n      capacitance : 12 ;\n    }  \n    pin (\"HIZIBI_79\")    {\n      direction : output ;\n      max_transition : 10;\n      min_capacitance : 3 ;\n    }              \n    pin (\"HIZIBI_IN_1\") {\n      direction : input ;\n      clock : true ;\n      max_transition : 1 ;\n      capacitance : 1 ;\n    }  \n    pin (\"HIZIBI_78\")    {\n      direction : output ;\n      max_transition : 10;\n      min_capacitance : 34 ;\n      capacitance : 34 ;\n    }            \n    pin (\"HIZIBI\")    {\n      direction : output ;\n      clock : true ;\n      max_transition : 20;\n      related_power_pin : VDD ;\n      related_ground_pin : VSS ;\n      timing () {\n        cell_fall (into_f1) {\n          index_1(\"1,2,3,4,5\") ;\n          index_2(\"1,2,3,4,5\") ;\n          values(\"13, 13, 14, 16, 18\",\\\n                 \"13, 14, 15, 16, 19\",\\\n                 \"14, 15, 16, 17, 20\",\\\n                 \"15, 15, 16, 18, 20\",\\\n                 \"15, 16, 17, 18, 21\") ;\n        }  \n      }  \n    }\n  }\n</code></pre>\n\n<p>OUT_FILE</p>\n\n<pre><code>\n  cell (lib_1) {\n    dont_use : true ;\n    dont_touch : true ;\n    pin (\"HIZIBI_IN_1\") {\n      direction : input ;\n      clock : true ;\n      max_transition : 1 ;\n      capacitance : 12 ;\n    }  \n    pin (\"HIZIBI_79\")    {\n      direction : output ;\n      max_transition : 10;\n      min_capacitance : 3 ;\n    }              \n    pin (\"HIZIBI_IN_1\") {\n      direction : input ;\n      clock : true ;\n      max_transition : 1 ;\n      capacitance : 1 ;\n    }  \n    pin (\"HIZIBI_78\")    {\n      direction : output ;\n      max_transition : 10;\n      min_capacitance : 34 ;\n      capacitance : 34 ;\n    }            \n    pin (\"HIZIBI\")    {\n      direction : output ;\n      clock : true ;\n      related_power_pin : VDD ;\n      related_ground_pin : VSS ;\n      timing () {\n        cell_fall (into_f1) {\n          index_1(\"1,2,3,4,5\") ;\n          index_2(\"1,2,3,4,5\") ;\n          values(\"13, 13, 14, 16, 18\",\\\n                 \"13, 14, 15, 16, 19\",\\\n                 \"14, 15, 16, 17, 20\",\\\n                 \"15, 15, 16, 18, 20\",\\\n                 \"15, 16, 17, 18, 21\") ;\n        }  \n      }  \n    }\n  }\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 3, "creation_date": 1553586298, "post_id": 55351735, "comment_id": 97427942, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2471298/how-do-i-use-sprintf-to-zero-fill-to-a-variable-length-in-perl\">How do I use sprintf to zero fill to a variable length in Perl?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553586335, "post_id": 55351937, "comment_id": 97427957, "body": "Just found out that this is a duplicate; gonna delete this answer."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553593419, "post_id": 55351937, "comment_id": 97431691, "body": "Well, I definitely don&#39;t like the accepted answer, so I&#39;m undeleting this answer, which I think provides a much better way to achieve what OP wants."}], "tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": false, "score": 1, "last_activity_date": 1553585869, "creation_date": 1553585869, "answer_id": 55351937, "question_id": 55351735, "link": "https://stackoverflow.com/questions/55351735/appending-0-before-binary-number-based-on-a-value-in-a-variable/55351937#55351937", "title": "Appending 0 before binary number based on a value in a variable", "body": "<p>See <a href=\"https://perldoc.perl.org/functions/sprintf.html#(minimum)-width\" rel=\"nofollow noreferrer\"><code>perldoc -f sprintf</code></a>:</p>\n\n<pre><code>$data_binary = sprintf( \"%0*b\", $size, $initial_data );\n</code></pre>\n\n<p>For instance,</p>\n\n<pre><code>printf \"%0*b\\n\", 10, 12\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>0000001100\n</code></pre>\n\n<p>If the binary representation of your number contains more than <code>$size</code> bits, it won't be truncated. Depending on your use case, you might want to add a <code>substr</code> afterward (but I'd be surprised if you'd actually need to do that).</p>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1553587482, "post_id": 55352341, "comment_id": 97428540, "body": "That&#39;s unnecessarily complicated. Also, why are you converting <code>$binary_length</code> to a float first?"}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1553588238, "post_id": 55352341, "comment_id": 97428948, "body": "@melpomene 1. It is &quot;general&quot; (any programming language) way.  It may be easily improved for perl. 2.  <code>int($binary_length)</code> - I prefer such extra safeguards."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1553588371, "post_id": 55352341, "comment_id": 97429012, "body": "<code>int($binary_length)</code> is not a safeguard. It unnecessarily converts the number to a float."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1553588539, "post_id": 55352341, "comment_id": 97429096, "body": "This solution is not general: It only works in programming languages where <code>printf</code> can take a runtime string. A truly general solution would be <code>sprintf &#39;%0*b&#39;, $binary_length, $initial_data</code>, which is also the shortest / simplest solution (except <code>%b</code> is non-standard)."}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1553592903, "post_id": 55352341, "comment_id": 97431358, "body": "@melpomene You can provide better answer (in your opinion)."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1553593226, "post_id": 55352341, "comment_id": 97431583, "body": "@AnFi This question is a duplicate. The better answers on the <a href=\"https://stackoverflow.com/questions/2471298/how-do-i-use-sprintf-to-zero-fill-to-a-variable-length-in-perl\">dup target</a>."}], "tags": [], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "is_accepted": false, "score": -1, "last_activity_date": 1553587378, "creation_date": 1553587378, "answer_id": 55352341, "question_id": 55351735, "link": "https://stackoverflow.com/questions/55351735/appending-0-before-binary-number-based-on-a-value-in-a-variable/55352341#55352341", "title": "Appending 0 before binary number based on a value in a variable", "body": "<p>You can use one sprintf to generate format string for another sprintf.<br>\n[ There is more than one way to do it ]</p>\n\n<pre><code>use strict; use warnings;\nmy $binary_length = 10;\nmy $initial_data = 12;\n\nmy $format = sprintf('%%0%db', int($binary_length));\nmy $data_binary = sprintf( $format, $initial_data );\nprint $data_binary,\"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 401, "user_id": 10004688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lURyY.jpg?s=128&g=1", "display_name": "rikki", "link": "https://stackoverflow.com/users/10004688/rikki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1553587378, "creation_date": 1553585005, "question_id": 55351735, "link": "https://stackoverflow.com/questions/55351735/appending-0-before-binary-number-based-on-a-value-in-a-variable", "title": "Appending 0 before binary number based on a value in a variable", "body": "<p>I am writing a code where I need to convert some forms of no to binary no for some processing. I want the size of binary no based on the value stored in a variable for which I need to append some leading zeroes.\nfor example, say there is variable $size =15\nNow I want to convert a no from decimal to 15 bit binary</p>\n\n<p>I know how to manually give the count\nfor ex -\nif we want 8 digit binary no from some decimal no then we will use-</p>\n\n<pre><code>    $data_binary = sprintf( \"%08b\", $initial_data );\n</code></pre>\n\n<p>But how to specify the size of binary no if the size is stored in some variable??</p>\n\n<p>For example=</p>\n\n<pre><code>    If size =10\n    decimal no =12\n    required binary no = 0000001100\n</code></pre>\n"}, {"tags": ["perl", "fork", "ipc"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553581644, "post_id": 55350668, "comment_id": 97425869, "body": "That code you posted doesn&#39;t run, much less demonstrate the problem. Please fix your question."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1553583889, "last_edit_date": 1553583889, "creation_date": 1553582258, "answer_id": 55351132, "question_id": 55350668, "link": "https://stackoverflow.com/questions/55350668/store-multiple-items-in-ipcsharelite-object/55351132#55351132", "title": "Store multiple items in IPC::ShareLite object", "body": "<p>You are creating a child using <code>fork</code>, and this child gets a copy of the <code>$share</code> object. When the child exits, the child's copy of the <code>$share</code> object is destroyed, which causes the underlying system resources to be destroyed because you used <code>-destroy =&gt; 'yes'</code>.</p>\n\n<p>In general, you want to create objects with destructors <em>after</em> performing the forks.</p>\n\n<p>But when creating a IPC::ShareLite object, you normally want to leave key to let the system choose the key for you, but you need to do that before creating the forks.</p>\n\n<p><strong>Workaround</strong></p>\n\n<p>Perform the following in the child:</p>\n\n<pre><code>$share-&gt;destroy(0);\n</code></pre>\n\n<p><strong>A better solution</strong></p>\n\n<p>Since the a normal usage mode for the module involves creating an object inherited by child processes, the module should handle that situation. </p>\n\n<p>To that end, you should have the module's maintainer change the module so that the destruction only occurs if the current PID is the same as the PID in which <code>$share</code> was created.</p>\n\n<pre><code>sub _initialize {\n  ...\n  $self-&gt;{pid} = $$;   # ADD\n  ...\n}\n\nsub DESTROY {\n  my $self = shift;\n\n  #destroy_share( $self-&gt;{share}, $self-&gt;{destroy} )                           # REMOVE\n  destroy_share( $self-&gt;{share}, $self-&gt;{pid} == $$ ? $self-&gt;{destroy} : 0 )   # ADD\n   if $self-&gt;{share};\n}\n</code></pre>\n"}], "owner": {"reputation": 3374, "user_id": 3227693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10975c33d9a42c36dbc03a939fc1ebc9?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Dvorzhak", "link": "https://stackoverflow.com/users/3227693/igor-dvorzhak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 55351132, "answer_count": 1, "score": 0, "last_activity_date": 1553583889, "creation_date": 1553579813, "question_id": 55350668, "link": "https://stackoverflow.com/questions/55350668/store-multiple-items-in-ipcsharelite-object", "title": "Store multiple items in IPC::ShareLite object", "body": "<p>I have a Perl program that forks subprocesses and processes N items in them, after that I need to return these processed items to main process.</p>\n\n<p>From multiple available IPC options to return processed items to main process, <a href=\"https://metacpan.org/pod/IPC::ShareLite\" rel=\"nofollow noreferrer\">IPC::ShareLite</a> seems to be a simplest one, but I'm not sure if it supports storing multiple items in one shared object.</p>\n\n<p>Here is a snippet from the program, but it doesn't work:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use IPC::ShareLite;\n\n# create shared object in main process\nmy $share = new IPC::ShareLite(\n    -key     =&gt; 1234,\n    -create  =&gt; 'yes',\n    -destroy =&gt; 'yes'\n) or die $!;\n\n# fork subprocesses, process and store N items in shared object\n$share-&gt;store($member);\n\n# After subprocesses finish, fetch items in main process\nmy $members_size = scalar @$members_ref;\n@$members_ref = ();\nwhile ($members_size &gt; 0) {\n    my $member = $share-&gt;fetch();\n    push @$members_ref, $member;\n    $members_size--;\n}\n</code></pre>\n\n<p>Above code fails with quite obscure error on <code>my $member = $share-&gt;fetch();</code>:</p>\n\n<blockquote>\n  <p>IPC::ShareLite fetch() error: Invalid argument at ...</p>\n</blockquote>\n\n<p>Is it possible to use IPC::ShareLite object as I intend or it can hold only one item?</p>\n"}, {"tags": ["perl", "fastcgi"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1553556542, "post_id": 55347257, "comment_id": 97420325, "body": "CGI::Fast is not simply a replacement for CGI.pm. It is an implementation of the CGI.pm API for the FastCGI protocol which happens to still work under the CGI protocol, but it still has all of the same problems as CGI.pm (and actually introduces a few more bugs). If you want to write a CGI (protocol) script using non-discouraged libraries see <a href=\"http://blogs.perl.org/users/grinnz/2018/11/modern-perl-cgi.html\" rel=\"nofollow noreferrer\">my blog post</a> for a start."}, {"owner": {"reputation": 3, "user_id": 4449187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e897a7814b17888de9f260bdf9d4e0d?s=128&d=identicon&r=PG&f=1", "display_name": "somloigaluska", "link": "https://stackoverflow.com/users/4449187/somloigaluska"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1553632743, "post_id": 55347257, "comment_id": 97455264, "body": "I spent a few hours looking into mojilicious, and the other frameworks listed on the &#39;CGI-alternatives&#39; page,  but I saw a lot about fully-fledged web-apps (not desirable in the least, as it needs to fit in with other bits of the server!) and nothing about file upload hooks, just basic &#39;move the already-written-to-disk uploaded file here&#39;, so I concluded that functionality had been lost. Was I wrong?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1553647687, "post_id": 55347257, "comment_id": 97459890, "body": "Yes. While everything done in these modern frameworks is a &quot;fully-fledged web app&quot;, you don&#39;t actually have to write one, just look at any Mojolicious::Lite or Dancer2 example. If you are concerned about how much is going on under the hood, you can use Web::Simple or even Plack directly, but I don&#39;t recommend it as it will greatly increase the amount of work you need to do and potential for bugs."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1553647819, "post_id": 55347257, "comment_id": 97459916, "body": "As for &quot;file upload hooks&quot; specifically, the modern frameworks are of course capable of such but it would not be called that. Though it would take a lot of research to figure out how to properly answer your question using such, I suspect a Plack middleware would be the easiest solution."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553918038, "post_id": 55349740, "comment_id": 97574614, "body": "CGI::Fast&#39;s lack of support has for passing through the constructor hook to CGI has been <a href=\"https://github.com/leejo/cgi-fast/issues/19\" rel=\"nofollow noreferrer\">fixed</a> in forthcoming CGI::Fast 2.15."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 0, "last_activity_date": 1553918005, "last_edit_date": 1553918005, "creation_date": 1553573560, "answer_id": 55349740, "question_id": 55347257, "link": "https://stackoverflow.com/questions/55347257/cgifast-without-tempfiles-for-upload/55349740#55349740", "title": "CGI::Fast without tempfiles for upload", "body": "<p>Once the CGI object is created, it's too late to set the hook. You can use the following:</p>\n\n<pre><code>while (1) {\n    my $q = CGI::Fast-&gt;new(\\&amp;hook, 'data', 0)\n       or die(\"Couldn't Accept FCGI request\\n\");\n\n    syslog('notice',\"Got a request!\");\n    # (Access control code cut)\n    print $q-&gt;header('text/plain','200 OK');\n}\n</code></pre>\n\n<p>Note that this requires CGI::Fast version 2.15 or newer. Earlier versions of CGI::Fast interpreted the upload hook as an initializer and would skip accepting a request.</p>\n"}], "owner": {"reputation": 3, "user_id": 4449187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e897a7814b17888de9f260bdf9d4e0d?s=128&d=identicon&r=PG&f=1", "display_name": "somloigaluska", "link": "https://stackoverflow.com/users/4449187/somloigaluska"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 55349740, "answer_count": 1, "score": 0, "last_activity_date": 1553918005, "creation_date": 1553552542, "question_id": 55347257, "link": "https://stackoverflow.com/questions/55347257/cgifast-without-tempfiles-for-upload", "title": "CGI::Fast without tempfiles for upload", "body": "<p>I wish to upload some relatively sensitive data to a server which should not be stored on disk in plaintext - I see it as far too easy to intercept a temporary file and copy the contents, plus there would be the issues of securely deleting the file against restores/journal entries, etc.\nI realise I could theoretically do this client-side, but prefer a server-side solution so an unusual browser does not mangle the upload.</p>\n\n<p>Perl CGI::upload_hook() seemed like a perfect solution, with encryption being applied on arrival. Plain CGI is deprecated, but using CGI::Fast, the hook code is never reached, whether I put the call inside or outside the loop.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use Sys::Syslog;\nuse CGI::Fast;\nsub hook {\n    my ( $filename, $buffer, $bytes_read, $data ) = @_;\n    syslog('notice',\"Hook used!\");\n}\n\n#CGI::upload_hook(\\&amp;hook,'',0); # No good here either\nwhile (my $q = CGI::Fast-&gt;new()) {\n    CGI::upload_hook(\\&amp;hook,'data',0); # No effect\n    syslog('notice',\"Got a request!\");    \n    # (Access control code cut)\n    print $q-&gt;header('text/plain','200 OK');\n    print (Dumper($q));\n}\n</code></pre>\n\n<p>hook() is never called. CGI::Fast->new() does not accept such hook code in the way that CGI->new() does.</p>\n"}, {"tags": ["perl", "loops", "cgi"], "comments": [{"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 1, "creation_date": 1553546990, "post_id": 55346161, "comment_id": 97417187, "body": "You&#39;ll also need to show us the <code>$return</code> or <code>$json_text</code> being used as input."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1553547087, "post_id": 55346161, "comment_id": 97417226, "body": "That code runs without errors when I fill in the blanks with the data that the rest of the code anticipates."}, {"owner": {"reputation": 1102, "user_id": 4208719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cd078e79ba74af02fe5692190dbc73d3?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro ", "link": "https://stackoverflow.com/users/4208719/pedro"}, "reply_to_user": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1553547547, "post_id": 55346161, "comment_id": 97417389, "body": "@Tanktalus $return is a hash reference and and i have updated the question so now yo ucan se the value of $json_text"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553547657, "post_id": 55346161, "comment_id": 97417429, "body": "Please, show us the output of <code>use Data::Dumper; print Dumper($return)</code>."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1553547679, "post_id": 55346161, "comment_id": 97417443, "body": "@Pedro, that text won&#39;t decode, so it must be incomplete. If the input is a hash, the output will be a hash, not an array, and thus, yeah, it&#39;s not going to work."}, {"owner": {"reputation": 1102, "user_id": 4208719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cd078e79ba74af02fe5692190dbc73d3?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro ", "link": "https://stackoverflow.com/users/4208719/pedro"}, "reply_to_user": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1553547853, "post_id": 55346161, "comment_id": 97417507, "body": "@Tanktalus i see the problem, I thought that by using enconde I was also changing the type to an array"}, {"owner": {"reputation": 1102, "user_id": 4208719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cd078e79ba74af02fe5692190dbc73d3?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro ", "link": "https://stackoverflow.com/users/4208719/pedro"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553547880, "post_id": 55346161, "comment_id": 97417523, "body": "@Dada It mean that I&#39;ll have to chance that first in order to loop thru the data"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1553548650, "post_id": 55346161, "comment_id": 97417836, "body": "What you claim isn&#39;t true. Please produces a minimal, runnable demontration of your problems. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1102, "user_id": 4208719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cd078e79ba74af02fe5692190dbc73d3?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro ", "link": "https://stackoverflow.com/users/4208719/pedro"}, "edited": false, "score": 0, "creation_date": 1553549711, "post_id": 55346525, "comment_id": 97418249, "body": "Still getting the same error and thats what I don&#39;t understand..... $return is a hash ref and $decode_file is also a hash ref and I don&#39;t know why :/  Im using ref($return) ref($decoded_file) and they both output ref(HASH(0x4884)).....the daya in $return look exacly as the one on $decoded_file"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1102, "user_id": 4208719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cd078e79ba74af02fe5692190dbc73d3?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro ", "link": "https://stackoverflow.com/users/4208719/pedro"}, "edited": false, "score": 2, "creation_date": 1553555683, "post_id": 55346525, "comment_id": 97420113, "body": "Re &quot;<i>Still getting the same error</i>&quot;, And your Question still doesn&#39;t demonstrate your problem. We can&#39;t help you until you actually demonstrate your problem. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1553549123, "last_edit_date": 1553549123, "creation_date": 1553548619, "answer_id": 55346525, "question_id": 55346161, "link": "https://stackoverflow.com/questions/55346161/not-an-array-reference-when-looping-a-json-file-perl/55346525#55346525", "title": "&quot;Not an ARRAY reference&quot; when looping a json file - Perl", "body": "<p>What you claim isn't true.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $decoded_file = [\n      {\n        'data' =&gt; {\n                    'status' =&gt; 'Y',\n                    'id' =&gt; 0,\n                    'type' =&gt; 'car',\n                    'details' =&gt; [\n                                   {\n                                     'year' =&gt; '2001',\n                                     'color' =&gt; 'red'\n                                   }\n                                 ]\n                  }\n      }                      # Added this.\n    ];                       # Added this.\n\nfor my $items (@{$decoded_file}) {\n\n}\n\nprint \"ok\\n\";\n</code></pre>\n\n<p>produces</p>\n\n<pre><code>ok\n</code></pre>\n\n<p>In what you showed us, <code>$decoded_file</code> holds a reference to an array, so your loop is indeed what you should be using.</p>\n"}], "owner": {"reputation": 1102, "user_id": 4208719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cd078e79ba74af02fe5692190dbc73d3?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro ", "link": "https://stackoverflow.com/users/4208719/pedro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1553549123, "creation_date": 1553546789, "last_edit_date": 1553548724, "question_id": 55346161, "link": "https://stackoverflow.com/questions/55346161/not-an-array-reference-when-looping-a-json-file-perl", "title": "&quot;Not an ARRAY reference&quot; when looping a json file - Perl", "body": "<p>I'm trying to read a json file thru a foor loop, but I get an error \"Not an ARRAY reference\" this is the code than I'm using;</p>\n\n<pre><code>$json_text = JSON::XS-&gt;new-&gt;utf8-&gt;encode ($return); \nmy $decoded_file = decode_json $json_text;\n\nfor my $items (@{$decoded_file}) {\n\n} \n</code></pre>\n\n<p>$decoded_file:</p>\n\n<pre><code>$VAR1 = [\n      {\n        'data' =&gt; {\n                   'id' =&gt; 0,   \n                   'type' =&gt; 'car',\n                   'details' =&gt; [\n                                 {\n                                   'year' =&gt; '2001',\n                                   'color' =&gt; 'red', \n                                 }\n                               ],\n                   'status' =&gt; 'Y'\n                 },\n</code></pre>\n"}, {"tags": ["bash", "postgresql", "perl", "centos", "postgresql-11"], "answers": [{"comments": [{"owner": {"reputation": 125670, "user_id": 6464308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12PVX.jpg?s=128&g=1", "display_name": "Laurenz Albe", "link": "https://stackoverflow.com/users/6464308/laurenz-albe"}, "edited": false, "score": 4, "creation_date": 1553527074, "post_id": 55340917, "comment_id": 97407069, "body": "I&#39;m not a Perl guru, but there seems to be a missing single quote in the <code>system</code> line."}, {"owner": {"reputation": 85, "user_id": 2266543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/962783cf76872a4d762c10bd55b3995c?s=128&d=identicon&r=PG", "display_name": "user2266543", "link": "https://stackoverflow.com/users/2266543/user2266543"}, "edited": false, "score": 0, "creation_date": 1553528098, "post_id": 55340917, "comment_id": 97407712, "body": "its working fine for me. Thank you so much Dave for your help."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1553539984, "post_id": 55340917, "comment_id": 97414001, "body": "It&#39;s bad practice to use <code>return</code> when the sub is expected to return a scalar (because the sub won&#39;t always return a scalar). <code>return 0</code> would make more sense here."}, {"owner": {"reputation": 25590, "user_id": 59135, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/90c563665ec03a1b9e80671bb95deeed?s=128&d=identicon&r=PG", "display_name": "daotoad", "link": "https://stackoverflow.com/users/59135/daotoad"}, "edited": false, "score": 0, "creation_date": 1553553352, "post_id": 55340917, "comment_id": 97419515, "body": "It&#39;s worth noting that Perl has two <i>logical and</i> operators that differ in precedence.  The high precedence form <code>&amp;&amp;</code> is great for compactly writing logical expressions, like <code>$foo == 27 &amp;&amp; $bar &gt;= 5</code>.  The low precedence form is best used for flow control, like <code>assert_we_are_done() and return 1;</code> (<code>or</code> gets used for this much more frequently)."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 5, "last_activity_date": 1553530546, "last_edit_date": 1553530546, "creation_date": 1553526683, "answer_id": 55340917, "question_id": 55340567, "link": "https://stackoverflow.com/questions/55340567/execute-a-bash-script-shell-script-from-postgres-function-procedure-trigger/55340917#55340917", "title": "Execute a Bash script (Shell Script) from postgres function/procedure/trigger", "body": "<p>Presumably, the code needs to be syntactically valid Perl. So you'll need to clean up a few bits.</p>\n\n<pre><code>CREATE or replace FUNCTION test() RETURNS boolean AS $$\n  my $filename = '/home/postgres';\n  if (-e $filename) { \n    system '/home/postgres/test.sh' and return 1;\n  }\n  return;\n$$ LANGUAGE plperlu;\n</code></pre>\n\n<p>I've changed a few things:</p>\n\n<ul>\n<li>I declare the variable <code>$filename</code> using <code>my</code></li>\n<li>I used <code>system</code> instead of <code>exec</code>. <code>exec</code> replaces the current process - effectively never returning to the calling function</li>\n<li><code>system</code> expects to be passed a string. So I've added quotes around the command</li>\n<li><code>and</code> is usually better in flow control statements than <code>&amp;&amp;</code> (and always much better than <code>&amp;</code> which is for bit-flipping, not flow control)</li>\n<li>Perl doesn't have <code>true</code> and <code>false</code>, so I've replaced <code>true</code> with 1 (which is a true value in Perl). And I've removed the <code>false</code> from the other <code>return</code> statement - the default behaviour of <code>return</code> is to return a false value</li>\n</ul>\n\n<p>I don't have a Postgresql installation to test this on. If it still doesn't work, please tell us what errors you get.</p>\n"}, {"tags": [], "owner": {"reputation": 649, "user_id": 5374205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096764467a245d60e85c4ff77941fea7?s=128&d=identicon&r=PG&f=1", "display_name": "A. Scherbaum", "link": "https://stackoverflow.com/users/5374205/a-scherbaum"}, "is_accepted": false, "score": 1, "last_activity_date": 1553695872, "creation_date": 1553695872, "answer_id": 55379336, "question_id": 55340567, "link": "https://stackoverflow.com/questions/55340567/execute-a-bash-script-shell-script-from-postgres-function-procedure-trigger/55379336#55379336", "title": "Execute a Bash script (Shell Script) from postgres function/procedure/trigger", "body": "<p>pl/sh exists, and can be used as a procedual language.</p>\n\n<p><a href=\"https://github.com/petere/plsh\" rel=\"nofollow noreferrer\">https://github.com/petere/plsh</a></p>\n"}], "owner": {"reputation": 85, "user_id": 2266543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/962783cf76872a4d762c10bd55b3995c?s=128&d=identicon&r=PG", "display_name": "user2266543", "link": "https://stackoverflow.com/users/2266543/user2266543"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2156, "favorite_count": 0, "accepted_answer_id": 55340917, "answer_count": 2, "score": 3, "last_activity_date": 1553695872, "creation_date": 1553525543, "last_edit_date": 1553526111, "question_id": 55340567, "link": "https://stackoverflow.com/questions/55340567/execute-a-bash-script-shell-script-from-postgres-function-procedure-trigger", "title": "Execute a Bash script (Shell Script) from postgres function/procedure/trigger", "body": "<pre><code>CREATE or replace FUNCTION test() RETURNS boolean AS $$\n$filename = '/home/postgres';\nif (-e $filename) { \nexec /home/postgres/test.sh &amp;\nreturn true; }\nreturn false;\n$$ LANGUAGE plperlu;\n</code></pre>\n\n<p>exec /home/postgres/test.sh &amp;  its showing syntax error.\nCould you please help how to call bash script into postgres funtion/procedure</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1553524436, "post_id": 55338223, "comment_id": 97405391, "body": "Maybe <code>open3</code> cannot handle string buffer handles? Why not just use regular file handles for the <code>open3</code> call?"}, {"owner": {"reputation": 71, "user_id": 4709398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54afce43fc565ca0beb664e160d87c7?s=128&d=identicon&r=PG&f=1", "display_name": "K.A.B.", "link": "https://stackoverflow.com/users/4709398/k-a-b"}, "edited": false, "score": 0, "creation_date": 1553524571, "post_id": 55338223, "comment_id": 97405483, "body": "Using <code>eval</code> I can get the error message of the run3 statement:  <code>Error: run3(): Invalid argument redirecting STDOUT at &#47;root&#47;test_io.pl line 25.</code>  This doesn&#39;t help me though. Without reassigning <code>STDOUT</code> and <code>STDERR</code> the code works as expected. I&#39;m at a bit of a loss here."}, {"owner": {"reputation": 71, "user_id": 4709398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54afce43fc565ca0beb664e160d87c7?s=128&d=identicon&r=PG&f=1", "display_name": "K.A.B.", "link": "https://stackoverflow.com/users/4709398/k-a-b"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1553524718, "post_id": 55338223, "comment_id": 97405573, "body": "@H&#229;konH&#230;gland I try to avoid that because I don&#39;t want hundreds of temporary files."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1553669609, "post_id": 55338223, "comment_id": 97465149, "body": "Can you clarify/confirm for me -- do you want to, simply put, redirect stdout and stderr (separately), both for prints from the program and from external commands?  Just that, to redirect the streams?  That&#39;s done fairly simply, in a few ways. (Must it be a buffer (variable) and not a file?)"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1553531760, "post_id": 55340866, "comment_id": 97409933, "body": "This code suffers from a race condition. If the child sends a sufficient amount to its STDERR, both the child and parent will block forever."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553532073, "post_id": 55340866, "comment_id": 97410134, "body": "@ikegami Good catch. I guess you mean one should implement a <code>select</code> loop to check whether STDOUT <i>or</i> STDERR is ready to reading? And then read from the handle which is ready"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1553532393, "post_id": 55340866, "comment_id": 97410301, "body": "It would be much better to use something like <a href=\"https://metacpan.org/pod/IO::Async::Process\" rel=\"nofollow noreferrer\">IO::Async::Process</a> to go down that road, but IPC::Run3 or IPC::Run are much simpler if they do what you need."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": -1, "last_activity_date": 1553526511, "creation_date": 1553526511, "answer_id": 55340866, "question_id": 55338223, "link": "https://stackoverflow.com/questions/55338223/perl-how-to-pass-ipcopen3-redirected-stdout-stderr-fhs/55340866#55340866", "title": "Perl: How to pass IPC::Open3 redirected STDOUT/STDERR fhs", "body": "<p>This is not an answer yet, but it seems like <code>open3</code> requires <code>STDOUT</code> to be a regular tty file handle at the time you call <code>open3</code>, for example:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nuse IPC::Open3;\nuse Symbol 'gensym';\n{\n    local *STDOUT;  # &lt;-- if you comment out this line open3 works as expected\n    my ($chld_in, $chld_out);\n    my $chld_err = gensym;\n    my $pid;\n    eval {\n        $pid = open3($chld_in, $chld_out, $chld_err, \"date\");\n    };\n    if ( $@ ) {\n        say \"IPC::Open::open3 failed: '$@'\";\n    }\n    print \"-&gt; $_\" for &lt;$chld_out&gt;;\n    waitpid $pid, 0;\n   # say \"Cannot print to invalid handle..\";\n}\nsay \"ok\";\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>ma. 25. mars 16:00:01 +0100 2019\nok\n</code></pre>\n\n<p>Note that the arrow <code>-&gt;</code> in the beginning of the line is missing, \nso nothing can be read from <code>$chld_out</code> in this case. However, if I comment out the line:</p>\n\n<pre><code>local *STDOUT;\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>-&gt; ma. 25. mars 16:01:10 +0100 2019\nok\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553527497, "post_id": 55340905, "comment_id": 97407331, "body": "To anyone who knows better than me: should this behavior of <code>IPC::Run3</code> be considered a bug?"}, {"owner": {"reputation": 71, "user_id": 4709398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54afce43fc565ca0beb664e160d87c7?s=128&d=identicon&r=PG&f=1", "display_name": "K.A.B.", "link": "https://stackoverflow.com/users/4709398/k-a-b"}, "edited": false, "score": 0, "creation_date": 1553527855, "post_id": 55340905, "comment_id": 97407558, "body": "Sadly this solution does not appear to have the desired effect. As long as I don&#39;t actually redirect STDOUT and STDERR and only redirect the output of <code>run3</code> this works fine. As soon as I do however the call fails:  run3(): Bad file descriptor restoring STDOUT, run3(): Bad file descriptor restoring STDERR at ./testio2.pl line 22"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 71, "user_id": 4709398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54afce43fc565ca0beb664e160d87c7?s=128&d=identicon&r=PG&f=1", "display_name": "K.A.B.", "link": "https://stackoverflow.com/users/4709398/k-a-b"}, "edited": false, "score": 0, "creation_date": 1553528241, "post_id": 55340905, "comment_id": 97407805, "body": "@K.A.B. Indeed, my bad, I have a good idea of why this is happening; I&#39;m trying to fix it right now."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1553531070, "post_id": 55340905, "comment_id": 97409484, "body": "This is not a bug, you must pass filehandles to IPC::Open3."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1553531861, "post_id": 55340905, "comment_id": 97410012, "body": "@Dada That is IPC::Run3. It is completely unrelated."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1553531942, "post_id": 55340905, "comment_id": 97410057, "body": "@Grinnz oh, sorry, I thought you were talking about IPC::Run3, not IPC::Open3, my bad. But my question about whether this is a bug was related to IPC::Run3, not IPC::Open3 ;-)"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1553538258, "post_id": 55340905, "comment_id": 97413243, "body": "@Dada It is common that closing STDOUT/STDERR causes problems like this so that&#39;s a reasonable conclusion."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1553670525, "post_id": 55340905, "comment_id": 97465482, "body": "The page with the question you link to <i>also shows a way for that to work</i> (in the other answer), using <code>IPC::Run3</code> (clearly acceptable here)."}], "tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": false, "score": 4, "last_activity_date": 1553532749, "last_edit_date": 1553532749, "creation_date": 1553526645, "answer_id": 55340905, "question_id": 55338223, "link": "https://stackoverflow.com/questions/55338223/perl-how-to-pass-ipcopen3-redirected-stdout-stderr-fhs/55340905#55340905", "title": "Perl: How to pass IPC::Open3 redirected STDOUT/STDERR fhs", "body": "<p>I don't have a solution to offer you, however I can provide some explanations as to the behavior you are seeing. </p>\n\n<p>First, <code>IPC::Open3</code> is not supposed to work when your filehandles are variables; see <a href=\"https://stackoverflow.com/questions/47045197/stdout-redirected-to-variable-not-catching-pipe-output\">this question</a> for more explanations.</p>\n\n<p>Now, why isn't <code>IPC::Run3</code> working? First, notice that if don't redirect <code>STDERR</code> and run </p>\n\n<pre><code>run3 [\"date\"], undef, \\$buffer, { append_stdout =&gt; 1 };\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>run3 [\"date\"], undef, \\*STDOUT;\n</code></pre>\n\n<p>then it works as expected. (you need to add <code>{ append_stdout =&gt; 1 }</code> or your previous outputs to <code>$buffer</code> will be overwritten)</p>\n\n<p>To understand what's happening, in your program, after </p>\n\n<pre><code>open(STDOUT, '&gt;', \\$buffer) or die \"Can't redirect STDOUT: $!\";\n</code></pre>\n\n<p>Add</p>\n\n<pre><code>print STDERR ref(\\$buffer), \"\\n\"\nprint STDERR ref(\\*STDOUT), \"\\n\"\n</code></pre>\n\n<p>Which will print</p>\n\n<pre><code>SCALAR\nGLOB\n</code></pre>\n\n<p>That's exactly what <code>IPC::Run3::run3</code> will do to know what to do with the \"stdout\" you give it (see the source: <a href=\"https://metacpan.org/release/IPC-Run3/source/lib/IPC/Run3.pm#L182\" rel=\"nofollow noreferrer\"><code>_fh_for_child_output</code></a>, which is called by <a href=\"https://metacpan.org/release/IPC-Run3/source/lib/IPC/Run3.pm#L354\" rel=\"nofollow noreferrer\"><code>run3</code></a>): </p>\n\n<ul>\n<li><p>if it's a scalar, then a temporary file is used (the corresponding line is <a href=\"https://metacpan.org/release/IPC-Run3/source/lib/IPC/Run3.pm#L208\" rel=\"nofollow noreferrer\"><code>$fh = $fh_cache{$what} ||= tempfile</code></a>, where <code>tempfile</code> is a function from <a href=\"https://perldoc.perl.org/File/Temp.html#*tempfile*\" rel=\"nofollow noreferrer\"><code>File::Temp</code></a>. </p></li>\n<li><p>On the other hand, when stdout is a <code>GLOB</code> (or tied to <code>IO::Handle</code>), that filehandle is used directly (that's this <a href=\"https://metacpan.org/release/IPC-Run3/source/lib/IPC/Run3.pm#L195\" rel=\"nofollow noreferrer\">line of code</a>).  </p></li>\n</ul>\n\n<p>Which explains why when you call <code>run3</code> with <code>\\$buffer</code> it works, but not with <code>\\*STDOUT</code>.</p>\n\n<hr>\n\n<p>When redirecting <code>STDERR</code> as well, and calling </p>\n\n<pre><code>run3 [\"date\"], undef, \\$buffer, \\$buffer, { append_stdout =&gt; 1, append_stderr =&gt; 1 };\n</code></pre>\n\n<p>, things start to appear weird. I don't understand what's happening, but I'll share here what I found, and hopefully someone will make sense of it.</p>\n\n<p>I modified the source of <code>IPC::Run3</code> and added </p>\n\n<pre><code>open my $FP, '&gt;', 'logs.txt' or die \"Can't open: $!\";\n</code></pre>\n\n<p>at the beginning of the sub <code>run3</code>. When running, I only see </p>\n\n<pre><code>Restored!\n1: Test\n</code></pre>\n\n<p>on STDOUT (my terminal), but <code>logs.txt</code> contains the date (something in the lines of <code>Mon Mar 25 17:49:44 CET 2019</code>). </p>\n\n<p>Investing a bit reveals that <code>fileno $FP</code> returns <code>1</code> (which, unless I mistaken, is usually <code>STDOUT</code> (but you closed it, so I'm no so surprised that its descriptor can be reused)), and <code>fileno STDOUT</code> returns <code>2</code> (this might depend on your Perl version and other opened filehandles though). What <em>seems</em> to be happening is that <code>system</code> assumes that <code>STDOUT</code> is the file descriptor <code>1</code> and thus prints to <code>$FP</code> instead of <code>STDOUT</code> (I'm just guessing though). </p>\n\n<p>Please feel free to comment/edit if you understand what's happening. </p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553536683, "post_id": 55342458, "comment_id": 97412495, "body": "Note that using lexical handles for STDIN had a problem before 5.14  <code>perl -MIPC::Open3 -we&#39;open(my $fh, &quot;&lt;&quot;, &quot;&#47;dev&#47;null&quot;) or die $!;  open3(&quot;&lt;&amp;&quot;.fileno($fh), &quot;&gt;&amp;STDOUT&quot;, &quot;&gt;&amp;STDERR&quot;, &quot;cat&quot;)&#39;</code> threw <code>open3: close(3) failed: Bad file descriptor at -e line 1</code> before that."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553537154, "post_id": 55342458, "comment_id": 97412715, "body": "@ikegami That syntax is duping handles, which also won&#39;t work with handles opened in-memory since they have no fd - my example isn&#39;t referring to that, but passing lexical handles to use directly."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553537314, "post_id": 55342458, "comment_id": 97412817, "body": "You post suggests that lexicals are just as good as globs when dealing with IPC::Open2/3, but that wasn&#39;t the case before 5.14. That&#39;s it. Just a comment in case it matters to someone. I&#39;m not saying your post should be edited."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 0, "last_activity_date": 1553537415, "last_edit_date": 1553537415, "creation_date": 1553531630, "answer_id": 55342458, "question_id": 55338223, "link": "https://stackoverflow.com/questions/55338223/perl-how-to-pass-ipcopen3-redirected-stdout-stderr-fhs/55342458#55342458", "title": "Perl: How to pass IPC::Open3 redirected STDOUT/STDERR fhs", "body": "<p>Is there a reason you need to use the parent's STDOUT and STDERR? IPC::Open3 is easily capable of redirecting the child's STDOUT and STDERR to unrelated handles in the parent which you can read from.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse IPC::Open3;\n\nmy $pid = open3 undef, my $outerr, undef, 'date';\nmy $output = do { local $/; readline $outerr };\nwaitpid $pid, 0;\nmy $exit = $? &gt;&gt; 8;\n</code></pre>\n\n<p>This will read STDOUT and STDERR together, if you want to read them separately you need to pass <code>my $stderr = Symbol::gensym</code> as the third argument (as shown in the IPC::Open3 docs), and use a non-blocking loop to avoid deadlocking when reading both handles. <a href=\"https://metacpan.org/pod/IO::Async::Process\" rel=\"nofollow noreferrer\">IO::Async::Process</a> or similar can fully automate this for you, but IPC::Run3 provides a much simpler solution if you only need to store the output in scalar variables. IPC::Run3 and Capture::Tiny can also both easily be <a href=\"https://metacpan.org/pod/App::FatPacker\" rel=\"nofollow noreferrer\">fatpacked</a> for deployment in scripts.</p>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 4709398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54afce43fc565ca0beb664e160d87c7?s=128&d=identicon&r=PG&f=1", "display_name": "K.A.B.", "link": "https://stackoverflow.com/users/4709398/k-a-b"}, "edited": false, "score": 0, "creation_date": 1553595201, "post_id": 55354422, "comment_id": 97432840, "body": "Adding <code>binmode_stdin =&gt; &quot;:utf8&quot;, binmode_stdout =&gt; &quot;:utf8&quot;, binmode_stderr =&gt; &quot;:utf8&quot;</code> to the run3 options fixed my enconding issues thankfully."}], "tags": [], "owner": {"reputation": 71, "user_id": 4709398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54afce43fc565ca0beb664e160d87c7?s=128&d=identicon&r=PG&f=1", "display_name": "K.A.B.", "link": "https://stackoverflow.com/users/4709398/k-a-b"}, "is_accepted": false, "score": 2, "last_activity_date": 1553594804, "creation_date": 1553594804, "answer_id": 55354422, "question_id": 55338223, "link": "https://stackoverflow.com/questions/55338223/perl-how-to-pass-ipcopen3-redirected-stdout-stderr-fhs/55354422#55354422", "title": "Perl: How to pass IPC::Open3 redirected STDOUT/STDERR fhs", "body": "<p>I ended up with the following code:</p>\n\n<pre><code>#!/usr/bin/perl -CSDAL\nuse warnings;\nuse strict;\nuse IPC::Run3;\nuse IO::Scalar;\nuse Encode;\nuse utf8;\n\n# Save old filehandles\nopen(my $oldout, \"&gt;&amp;STDOUT\") or die \"Can't dup STDOUT: $!\";\nopen(my $olderr, \"&gt;&amp;STDERR\") or die \"Can't dup STDERR: $!\";\n\nopen(my $FH, \"+&gt;&gt;:utf8\", undef) or die $!;\n$FH-&gt;autoflush;\n\nclose(STDOUT);\nclose(STDERR);\n\nopen(STDOUT, '&gt;&amp;', $FH) or die \"Can't redirect STDOUT: $!\";\nopen(STDERR, '&gt;&amp;', $FH) or die \"Can't redirect STDOUT: $!\";\n\nprint \"1: Test\\n\";\n\nrun3 [\"/bin/date\"], undef, $FH, $FH, { append_stdout =&gt; 1, append_stderr =&gt; 1 };\n\nprint STDERR \"2: Test\\n\";\n\nopen(STDOUT, \"&gt;&amp;\", $oldout) or die \"Can't dup \\$oldout: $!\";\nopen(STDERR, \"&gt;&amp;\", $olderr) or die \"Can't dup \\$olderr: $!\";\n\nprint \"Restored!\\n\";\nseek($FH, 0, 0);\nwhile(&lt;$FH&gt;)\n{\n  # No idea why this is even required\n  print Encode::decode_utf8($_);\n}\nclose($FH);\n</code></pre>\n\n<p>This is far from what I originally wanted, but appears to be working at least.</p>\n\n<p>The issues I have with this are:</p>\n\n<ol>\n<li>I need an anonymous file handle creating clutter on the hard disk.</li>\n<li>For some reason I need to fix the encoding manually.</li>\n</ol>\n\n<p>Thank you very much to the people who dedicated their time helping me out here.</p>\n"}], "owner": {"reputation": 71, "user_id": 4709398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54afce43fc565ca0beb664e160d87c7?s=128&d=identicon&r=PG&f=1", "display_name": "K.A.B.", "link": "https://stackoverflow.com/users/4709398/k-a-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 2, "answer_count": 4, "score": 5, "last_activity_date": 1553594804, "creation_date": 1553518205, "last_edit_date": 1553523876, "question_id": 55338223, "link": "https://stackoverflow.com/questions/55338223/perl-how-to-pass-ipcopen3-redirected-stdout-stderr-fhs", "title": "Perl: How to pass IPC::Open3 redirected STDOUT/STDERR fhs", "body": "<p>I'm trying to capture the output my <strong>perl</strong> code generates both from print and similar statements and external commands.</p>\n\n<p>Due to design constraints I can't use solutions like Capture::Tiny. I need to forward the output to the buffer variable as soon as it is generated and I need to be able to differentiate between <strong>STDOUT</strong> and <strong>STDERR</strong>. Ideally a solution for external commands would essentially work just like system apart from being able to capture <strong>STDOUT</strong> and <strong>STDERR</strong> instead of printing them.</p>\n\n<p>My code is supposed to:</p>\n\n<ol>\n<li>Save the old <strong>STDOUT</strong>/<strong>STDERR</strong> file handles.</li>\n<li>Create a new ones for both <strong>STDERR</strong> and <strong>STDOUT</strong>.</li>\n<li>Redirect all the output to this place.</li>\n<li>Print a couple of things.</li>\n<li>Restore the old filehandles.</li>\n<li>Do something with the captured output, e.g. print it.</li>\n</ol>\n\n<p>However I'm unable to capture the output generated from external commands. I can't do it with <code>IPC::Run3</code> nor with <code>IPC::Open3</code>.</p>\n\n<pre><code>#!/usr/bin/perl -CSDAL\nuse warnings;\nuse strict;\nuse IPC::Open3;\n#use IPC::Run3;\n\n# Save old filehandles\nopen(my $oldout, \"&gt;&amp;STDOUT\") or die \"Can't dup STDOUT: $!\";\nopen(my $olderr, \"&gt;&amp;STDERR\") or die \"Can't dup STDERR: $!\";\n\nmy $buffer = \"\";\n\nclose(STDOUT);\nclose(STDERR);\n\nopen(STDOUT, '&gt;', \\$buffer) or die \"Can't redirect STDOUT: $!\";\n*STDERR = *STDOUT; # In this example STDOUT and STDERR are printed to the same buffer.\n\nprint \"1: Test\\n\";\n#run3 [\"date\"], undef, \\*STDOUT, \\*STDERR; # This doesn't work as expected\nmy $pid = open3(\"&lt;&amp;STDIN\", \"&gt;&amp;STDOUT\", \"&gt;&amp;STDERR\", \"date\");\nwaitpid($pid,0); # Nor does this.\n\nprint STDERR \"2: Test\\n\";\n\nopen(STDOUT, \"&gt;&amp;\", $oldout) or die \"Can't dup \\$oldout: $!\";\nopen(STDERR, \"&gt;&amp;\", $olderr) or die \"Can't dup \\$olderr: $!\";\n\nprint \"Restored!\\n\";\nprint $buffer;\n\n</code></pre>\n\n<p>Expected result:</p>\n\n<pre><code>Restored!\n1: Test\nMo 25. M\u00e4r 13:44:53 CET 2019\n2: Test\n</code></pre>\n\n<p>Actual result:</p>\n\n<pre><code>Restored!\n1: Test\n2: Test\n</code></pre>\n"}, {"tags": ["text-processing", "scripting", "perl", "oracle"], "comments": [{"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 1, "creation_date": 1553514719, "post_id": 55361684, "comment_id": 97447287, "body": "You should show the SQL query you use to retrieve the data."}, {"owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 1, "creation_date": 1553516521, "post_id": 55361684, "comment_id": 97447288, "body": "When you say &quot;Oracle&quot;, you mean some database engine, right? You should be able to solve this in your query."}, {"owner": {"reputation": 3, "user_id": 6419678, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XyjAAlU6lh0/AAAAAAAAAAI/AAAAAAAACfA/qbMkP2XZM00/photo.jpg?sz=128", "display_name": "Senthil Prabu S", "link": "https://stackoverflow.com/users/6419678/senthil-prabu-s"}, "reply_to_user": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1553516997, "post_id": 55361684, "comment_id": 97447289, "body": "@Bodo, the table contains data from different dates, I&#39;m not sure what else I can provide on this."}, {"owner": {"reputation": 3, "user_id": 6419678, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XyjAAlU6lh0/AAAAAAAAAAI/AAAAAAAACfA/qbMkP2XZM00/photo.jpg?sz=128", "display_name": "Senthil Prabu S", "link": "https://stackoverflow.com/users/6419678/senthil-prabu-s"}, "reply_to_user": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 0, "creation_date": 1553517060, "post_id": 55361684, "comment_id": 97447290, "body": "@Kusalananda, i couldnt solve using queries, thats why i have posted here. Thanks for your time"}, {"owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 2, "creation_date": 1553517401, "post_id": 55361684, "comment_id": 97447291, "body": "@SenthilPrabuS The question would be suitable for e.g. StackOverflow if the SQL schema and the current SQL query was included."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6419678, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XyjAAlU6lh0/AAAAAAAAAAI/AAAAAAAACfA/qbMkP2XZM00/photo.jpg?sz=128", "display_name": "Senthil Prabu S", "link": "https://stackoverflow.com/users/6419678/senthil-prabu-s"}, "edited": false, "score": 0, "creation_date": 1553690561, "post_id": 55365008, "comment_id": 97476976, "body": "Thanks Ashish!! but i&#39;m not sure about the how many dates will be present to find the difference, upto 10 days maybe present. is it possible to modify accordingly? Also here <b>DATA</b> is a file, right?"}, {"owner": {"reputation": 746, "user_id": 654129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7799078b4fa5a823bc8e117669a64920?s=128&d=identicon&r=PG", "display_name": "Ashish Kumar", "link": "https://stackoverflow.com/users/654129/ashish-kumar"}, "reply_to_user": {"reputation": 3, "user_id": 6419678, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XyjAAlU6lh0/AAAAAAAAAAI/AAAAAAAACfA/qbMkP2XZM00/photo.jpg?sz=128", "display_name": "Senthil Prabu S", "link": "https://stackoverflow.com/users/6419678/senthil-prabu-s"}, "edited": false, "score": 0, "creation_date": 1554152212, "post_id": 55365008, "comment_id": 97639194, "body": "You can find more information about &lt;DATA&gt; at <a href=\"https://stackoverflow.com/questions/13463509/the-data-syntax-in-perl\" title=\"the data syntax in perl\">stackoverflow.com/questions/13463509/the-data-syntax-in-perl</a>  Copy all your dates below <b>DATA</b>  line and try running the code, share how this works and what&#39;s expected if it doesn&#39;t work per your requirements."}], "tags": [], "owner": {"reputation": 746, "user_id": 654129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7799078b4fa5a823bc8e117669a64920?s=128&d=identicon&r=PG", "display_name": "Ashish Kumar", "link": "https://stackoverflow.com/users/654129/ashish-kumar"}, "is_accepted": true, "score": 0, "last_activity_date": 1553628882, "creation_date": 1553628882, "answer_id": 55365008, "question_id": 55361684, "link": "https://stackoverflow.com/questions/55361684/compare-columns-and-find-the-difference-from-a-table-dynamically/55365008#55365008", "title": "Compare columns and find the difference from a table dynamically", "body": "<p>Something like this?</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nwhile (&lt;DATA&gt;) {\n        chomp;\n        my @line = split;\n        my $diff1 = $line[1] - $line[2];\n        my $diff2 = $line[2] - $line[3];\n        print \"$line[0]\\t$line[1]\\t$diff1\\t$line[2]\\t$diff2\\t$line[3]\\n\";\n}\n\n__DATA__\nA    682            614         600         \nB    194            194         190     \nC    62             62          0\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>$ perl t.pl \nA   682 68  614 14  600\nB   194 0   194 4   190\nC   62  0   62  62  0\n</code></pre>\n\n<p>The output of line C in your question doesn't look correct.  How did you calculate that?</p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 6419678, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XyjAAlU6lh0/AAAAAAAAAAI/AAAAAAAACfA/qbMkP2XZM00/photo.jpg?sz=128", "display_name": "Senthil Prabu S", "link": "https://stackoverflow.com/users/6419678/senthil-prabu-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1554277575, "creation_date": 1554277575, "answer_id": 55489705, "question_id": 55361684, "link": "https://stackoverflow.com/questions/55361684/compare-columns-and-find-the-difference-from-a-table-dynamically/55489705#55489705", "title": "Compare columns and find the difference from a table dynamically", "body": "<p>Finally, I could able to write the solution, Thanks all for your support! Specially Ashish:)</p>\n\n<p>===========================================================================\nDECLARE</p>\n\n<p>x varchar2(2000):= NULL;\ny varchar2(4000):= NULL;</p>\n\n<p>begin</p>\n\n<pre><code>for i in(select column_id,column_name,lead(column_name,1) OVER (ORDER BY column_id) next_column \n    from all_tab_cols where table_name='TABLE_NAME' and column_name not in ('Parameter'))\nloop\n\n    if i.next_column != 'NULL' then\n        x := x||'NVL(\"'||i.column_name||'\",0) as \"'||i.column_name||'\",NVL(\"'||i.column_name||'\", 0)-NVL(\"'||i.next_column||'\", 0) as \"'||i.column_name||'~\",';\n    else\n        x := x||'NVL(\"'||i.column_name||'\",0) as \"'||i.column_name||'\"';\n    end if;    \n end loop;\n\ny :=  'create  table TABLE_NAME_NEW as select Parameter,'|| x || ' from TABLE_NAME\norder by  Parameter';\n--dbms_output.put_line('y :'||y);  \nexecute immediate y;\n</code></pre>\n\n<p>END;</p>\n\n<h1>/</h1>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1553616796, "question_id": 508488}, "owner": {"reputation": 3, "user_id": 6419678, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XyjAAlU6lh0/AAAAAAAAAAI/AAAAAAAACfA/qbMkP2XZM00/photo.jpg?sz=128", "display_name": "Senthil Prabu S", "link": "https://stackoverflow.com/users/6419678/senthil-prabu-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 55365008, "answer_count": 2, "score": 0, "last_activity_date": 1554277575, "creation_date": 1553514094, "last_edit_date": 1553690313, "question_id": 55361684, "link": "https://stackoverflow.com/questions/55361684/compare-columns-and-find-the-difference-from-a-table-dynamically", "title": "Compare columns and find the difference from a table dynamically", "body": "<p>I have a table with 3 columns,first column is some parameter and remaining 3 are last 1 week count of those parameter and has content similar like below. first row is table columns from oracle. I have to calculate the difference 2 dates.</p>\n\n<pre><code>Parameter    20190319   20190315    20190313\n============================================\nA    682            614         600         \nB    194            194         190     \nC    62             62          0\n</code></pre>\n\n<p>Output should be like below,</p>\n\n<pre><code>Parameter    20190319   (20190319-20190315) 20190315    (20190315-20190313) 20190313\n========================================================\n A   682            68      614         14      600         \n B   194            0       194         4       190     \n C   62             0        62         62      0\n</code></pre>\n\n<p>Here the tricky part is dates are not in sequence and it can be up to 7dates, we have to calculate dynamically from column names. Would be great if can be done in oracle. Thank you!!</p>\n"}, {"tags": ["perl", "apache2", "cgi"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1553508325, "post_id": 55334368, "comment_id": 97395707, "body": "Looks like you have two Perl installations on your server, i.e. changing the <code>DocumentRoot</code> changed the Perl binary the CGI script was executed with. My educated guess would be that you have Perl 5.28.1 installed as <code>&#47;opt&#47;perl&#47;bin&#47;perl</code> and Perl 5.22.1 installed as <code>&#47;usr&#47;bin&#47;perl</code>."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1553537844, "last_edit_date": 1553537844, "creation_date": 1553537523, "answer_id": 55344106, "question_id": 55334368, "link": "https://stackoverflow.com/questions/55334368/can-apache-documentroot-change-perl-inc/55344106#55344106", "title": "Can apache DocumentRoot change perl @INC?", "body": "<p>You appear to have two different problems.</p>\n\n<p><strong>You are using your build of Perl 5.28.0 when you want to use your build of Perl 5.22.1.</strong></p>\n\n<p>To fix this, adjust the shebang (<code>#!</code>) line of the script to reference the correct build of Perl.</p>\n\n<p>For example, you might be using</p>\n\n<pre><code>#!/opt/perl/bin/perl\n</code></pre>\n\n<p>and what you might want to be using is</p>\n\n<pre><code>#!/usr/bin/perl\n</code></pre>\n\n<p><strong>You wish to locate modules installed in a position relative to the script.</strong></p>\n\n<p>The script should use <code>use lib</code> and a path relative to <code>$RealBin</code> for that.</p>\n\n<pre><code>use FindBin qw( $RealBin );\nuse lib $RealBin, \"$RealBin/work\";\n</code></pre>\n\n<p>(I'm assuming the script is in <code>/var/www_local/WWWHub</code>.)</p>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1553537844, "creation_date": 1553504811, "question_id": 55334368, "link": "https://stackoverflow.com/questions/55334368/can-apache-documentroot-change-perl-inc", "title": "Can apache DocumentRoot change perl @INC?", "body": "<p>I noticed that if I change <code>DocumentRoot</code> in my VirtualHost apache2 configuration perl <code>@INC</code> is also changed from</p>\n\n<pre><code>/opt/perl/lib/perl5/site_perl/5.28.0/x86_64-linux \n/opt/perl/lib/perl5/site_perl/5.28.0 \n/opt/perl/lib/perl5/5.28.0/x86_64-linux \n/opt/perl/lib/perl5/5.28.0 \n</code></pre>\n\n<p>to</p>\n\n<pre><code>/var/www_local/WWWHub \n/var/www_local/WWWHub/work\n/etc/perl\n/usr/local/lib/x86_64-linux-gnu/perl/5.22.1/\n/Usr/local/share/perl/5.22.1 \n/usr/lib/x86_64-linux-gnu/perl5/5.22 \n/usr/share/perl5 \n/usr/lib/x86_64-linux-gnu/perl/5.22 \n/usr/share/perl/5.22 \n/usr/local/lib/site_perl\n/usr/lib/x86_64-linux-gnu/perl-base\n</code></pre>\n\n<p>So if CGI script has CPAN module dependencies it wouldn't run correctly.</p>\n\n<p>Why it could happen ?</p>\n"}, {"tags": ["regex", "file", "perl"], "comments": [{"owner": {"reputation": 2171, "user_id": 3005263, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ce8d1237d3870df8150038f01d0e739?s=128&d=identicon&r=PG&f=1", "display_name": "Asunez", "link": "https://stackoverflow.com/users/3005263/asunez"}, "edited": false, "score": 0, "creation_date": 1553505097, "post_id": 55334255, "comment_id": 97393874, "body": "I don&#39;t know Perl regex limitations, but you might want to take a look at this Regex101 demo: <a href=\"https://regex101.com/r/X4ww0H/1\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553539637, "post_id": 55334255, "comment_id": 97413863, "body": "Don&#39;t use <code>if (&#47;...&#47;g)</code>; it makes no sense"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1553507734, "post_id": 55334993, "comment_id": 97395372, "body": "I&#39;d suggest just selecting the whole lot into a hash as an alternative approach. <code>my %lookup = </code>cat file` =~ m/(\\w+):(\\S+)/g;` which will pull out key-values."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1553509218, "post_id": 55334993, "comment_id": 97396193, "body": "@Sobrique indeed, it sounds more reasonable"}], "tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": false, "score": 7, "last_activity_date": 1553509321, "last_edit_date": 1553509321, "creation_date": 1553507093, "answer_id": 55334993, "question_id": 55334255, "link": "https://stackoverflow.com/questions/55334255/perl-regex-one-line-file/55334993#55334993", "title": "Perl regex one line file", "body": "<p><em>Edit: you probably don't really want to use 3 complicated regex to parse your file. See <a href=\"https://stackoverflow.com/a/55335160/4990392\">Stefan Becker's answer</a> for a better way.</em></p>\n\n<p>You need to remove the <code>/g</code> modifier. </p>\n\n<p>Successive matches against the same string with the <code>/g</code> start from the end of the previous match. Have a look at the relevant paragraph in <a href=\"https://perldoc.perl.org/perlretut.html#Global-matching\" rel=\"nofollow noreferrer\">perlretut</a>.<br>\nIn your file, <code>MODEM</code> comes first, then <code>IP</code>, then <code>PASSWORD</code>. Which means that after matching <code>/PASSWORD:(.+)/g</code>, you can't match <code>/IP/g</code> which comes before in your string.</p>\n\n<hr>\n\n<p><code>/g</code> modifier is mostly useful when you want to do something like</p>\n\n<pre><code>while ($string =~ /.../g) { ... }\n</code></pre>\n\n<p>Or of course, in list context, to get all the matches: </p>\n\n<pre><code> @matches = $string =~ /.../g\n</code></pre>\n\n<p>In your case, you just want to get different matches one by one, so no need for <code>/g</code> modifier.</p>\n"}, {"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 7, "last_activity_date": 1553507728, "creation_date": 1553507728, "answer_id": 55335160, "question_id": 55334255, "link": "https://stackoverflow.com/questions/55334255/perl-regex-one-line-file/55335160#55335160", "title": "Perl regex one line file", "body": "<p>Maybe not the answer you were looking for, but IMHO for your structured data a simpler approach than regex is possible:</p>\n\n<ul>\n<li>split at white space to access the fields</li>\n<li>each field is of the form <code>&lt;KEY&gt;:&lt;VALUE</code>, i.e. can be converted to a hash</li>\n</ul>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nwhile (&lt;DATA&gt;) {\n    chomp;\n    my %fields = map { split(/:/) } split(' ');\n\n    print \"$fields{MODEM} $fields{IP} $fields{PASSWORD}\\n\"\n}\n\nexit 0;\n\n__DATA__\nMODEM:SOMETHING ID:1000018 MAC:606060606060  ID2:123499  IP:1.1.1.1  PASSWORD:pass123\n</code></pre>\n\n<p>Another alternative would be</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my %fields = /(\\S+):(\\S+)/g;\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nSOMETHING 1.1.1.1 pass123\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10651767, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tE1zkJufBNs/AAAAAAAAAAI/AAAAAAAAAdE/OhbJUnk7zy0/photo.jpg?sz=128", "display_name": "Marcin K", "link": "https://stackoverflow.com/users/10651767/marcin-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 55335160, "answer_count": 2, "score": 2, "last_activity_date": 1553509321, "creation_date": 1553504391, "last_edit_date": 1553507153, "question_id": 55334255, "link": "https://stackoverflow.com/questions/55334255/perl-regex-one-line-file", "title": "Perl regex one line file", "body": "<p>I'm using cat to get content of the file, and then I use regex to get what I want. When I change order of if's in example i put PASSWORD as a second one, IP will be empty.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nmy $param = $ARGV[0];\n\nmy $IP;\nmy $PASSWORD;\nmy $MODEM;\nmy @cat = `cat file`;\n\n foreach my $line (@cat){\n    if ($line =~ /$param/){\n        if ($line =~ /MODEM:(\\w+)/g){ $MODEM = $1; }\n        if ($line =~ /IP:((\\d{1,3}\\.){3}\\d{1,3})/g){ $IP = $1; }\n        if ($line =~ /PASSWORD:(.+)/g){ $PASSWORD = $1; }\n\n        print $MODEM;\n        print $IP;\n        print $PASSWORD;\n\n        }\n}\n</code></pre>\n\n<p>The content of a file (data is changed to fake values) :</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>MODEM:SOMETHING ID:1000018 MAC:606060606060  ID2:123499  IP:1.1.1.1  PASSWORD:pass123\n</code></pre>\n\n<p>Expected result is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>SOMETHING1.1.1.1pass123 \n</code></pre>\n\n<p>But when I change the line of code to this:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>if ($line =~ /MODEM:(\\w+)/g){ $MODEM = $1; }\nif ($line =~ /PASSWORD:(.+)/g){ $PASSWORD = $1; }\nif ($line =~ /IP:((\\d{1,3}\\.){3}\\d{1,3})/g){ $IP = $1; }\n</code></pre>\n\n<p>the result is :</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>SOMETHINGpass123 \n</code></pre>\n\n<p>i.e. the IP is empty. Can someone explain me why this is happening?</p>\n"}, {"tags": ["perl", "hash", "anagram"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1553455343, "post_id": 55327501, "comment_id": 97381184, "body": "See also <a href=\"https://metacpan.org/pod/Word::Anagram\" rel=\"nofollow noreferrer\">Word::Anagram</a> and <a href=\"https://rosettacode.org/wiki/Anagrams/Deranged_anagrams#Perl\" rel=\"nofollow noreferrer\">rosetta code: anagrams</a>"}, {"owner": {"reputation": 11, "user_id": 7656228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472d7f4c8ddb62648ef4e7048531151d?s=128&d=identicon&r=PG&f=1", "display_name": "rising_thunder", "link": "https://stackoverflow.com/users/7656228/rising-thunder"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1553456744, "post_id": 55327501, "comment_id": 97381636, "body": "Much appreciate for your help. rosetta code: anagrams seems to be complicate for me to understand. can you show me some source with basic syntax."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1553457036, "post_id": 55327501, "comment_id": 97381726, "body": "You are welcome. The rosetta code looks quite simple, please explain what part of the code you do not understand. You could also take a look at the source code of the <code>Word::Anagram</code> module. You can find it <a href=\"https://metacpan.org/release/Word-Anagram/source/lib/Word/Anagram.pm\" rel=\"nofollow noreferrer\">here</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553468269, "post_id": 55328028, "comment_id": 97384479, "body": "Any particular reason for using <code>(_)</code>? (since you still write <code>key($_)</code>) Just feeling like using prototypes lately, or ... ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553469702, "post_id": 55328028, "comment_id": 97384784, "body": "@Dada, I&#39;m not taking advantage of it, but it&#39;s exactly the kind of function where the prototype could be useful"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1553550547, "last_edit_date": 1553550547, "creation_date": 1553457770, "answer_id": 55328028, "question_id": 55327501, "link": "https://stackoverflow.com/questions/55327501/comparing-two-strings-for-anagram-using-hash/55328028#55328028", "title": "Comparing two strings for Anagram using hash", "body": "<pre><code>sub key(_) { join \"\", sort split //, $_[0] }\n\nif (key(\"pool\") eq key(\"polo\") {\n   say \"Pool and polo are anagrams of each other.\";\n} else {\n   say \"Pool and polo aren't anagrams of each other.\";\n}\n</code></pre>\n\n<p>If you had a dictionary,</p>\n\n<pre><code>sub key(_) { join \"\", sort split //, $_[0] }\n\nmy $dict_qfn = \"...\";\nmy $search = \"pool\";\n\nmy %anagrams;\n{\n   open(my $fh, '&lt;', $dict_qfn)\n      or die(\"Can't open \\\"$dict_qfn\\\": $!\\n\");\n\n   while (&lt;$fh&gt;) {\n      chomp;\n      push @{ $anagrams{ key($_) } }, $_;\n   }\n}\n\nmy @results = grep { $_ ne $search } @{ $anagrams{$search} // [] };\nsay \"Anagrams of $search: \".( @results ? \"@results\" : \"[none]\" );\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7656228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472d7f4c8ddb62648ef4e7048531151d?s=128&d=identicon&r=PG&f=1", "display_name": "rising_thunder", "link": "https://stackoverflow.com/users/7656228/rising-thunder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "closed_date": 1553467080, "answer_count": 1, "score": -5, "last_activity_date": 1553550547, "creation_date": 1553454693, "question_id": 55327501, "link": "https://stackoverflow.com/questions/55327501/comparing-two-strings-for-anagram-using-hash", "closed_reason": "Not suitable for this site", "title": "Comparing two strings for Anagram using hash", "body": "<p>I'm new to perl. Can anyone give an example to a  perl code for detecting anagram between to given strings using hash's. two strings - pool and polo.</p>\n"}, {"tags": ["arrays", "string", "perl", "hash"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1553449250, "post_id": 55326503, "comment_id": 97379283, "body": "This statement looks a little bit suspect: <code>foreach $id (keys %HoA, %loscore)</code>. Why do you only take the keys of the first hash?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553449628, "post_id": 55326503, "comment_id": 97379416, "body": "Should be <code>foreach $id (keys %HoA)</code>"}, {"owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "edited": false, "score": 1, "creation_date": 1553449675, "post_id": 55326503, "comment_id": 97379426, "body": "I was apparently wrong with the format. I changed to <code>foreach $id (keys %HoA, keys %loscore)</code>, and it works perfectly now! Thanks for the quick help!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1553449721, "post_id": 55326503, "comment_id": 97379437, "body": "<code>foreach $id (keys %HoA, keys %loscore)</code> is the same thing as <code>foreach $id (keys %HoA, keys %HoA)</code>. Are you sure you want to loop through every key twice?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553449727, "post_id": 55326503, "comment_id": 97379439, "body": "Nit: <code>$loscore{$id} .= 0;</code> should be <code>$loscore{$id} = 0;</code>, and it should be in the &quot;then&quot; part of the <code>if</code>, not the &quot;else&quot; parse."}, {"owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "edited": false, "score": 0, "creation_date": 1553450097, "post_id": 55326503, "comment_id": 97379531, "body": "I think I want to loop through the keys twice. This is because I have the same keys for both hashes. Correct me if there is a better / more correct way to do this."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553453696, "post_id": 55326503, "comment_id": 97380632, "body": "If you still want to loop for each key twice, then there is indeed a better way. Replace <code>foreach $id (keys %HoA, keys %loscore) { ... $loscore{$id} += $logodds{$base}[$pos]; ... }</code> with <code>foreach $id (keys %HoA) { ... $loscore{$id} += $logodds{$base}[$pos] * 2; ... }</code>. That said, I seriously doubt you want to loop for each key twice. I think simply want <code>foreach $id (keys %HoA)</code>"}, {"owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553458562, "post_id": 55326503, "comment_id": 97382115, "body": "Thanks @ikegami. I was under the impression that I needed to have the other hashes included in the <code>foreach</code> statement to use them. <code>foreach $id (keys %HoA)</code> works great!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1553507859, "post_id": 55326503, "comment_id": 97395432, "body": "If you have a solution, please answer your question and accept it."}], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "is_accepted": false, "score": 0, "last_activity_date": 1553553462, "creation_date": 1553553462, "answer_id": 55347390, "question_id": 55326503, "link": "https://stackoverflow.com/questions/55326503/eliminating-unitialized-values-in-my-perl-hash-of-arrays/55347390#55347390", "title": "Eliminating unitialized values in my Perl hash of arrays", "body": "<p>Here is the code that I am using to iterate through the `%HoA. It calculates a log-odds score for each sequence, then works through each sequence to find a maximum score for each sequence. Big thanks to everyone for helping out!</p>\n\n<pre><code>foreach $id (keys %HoA)\n{\n    for my $pos1 (0..length($HoA{$id})-1)\n    {\n        for my $pos2 ($pos1..$pos1+($width-1))\n        {\n            for my $base (qw( A C G T))\n            {\n                if ($HoA{$id}[$pos2] eq $base)\n                {\n                    for my $pos3 (0..$width-1)\n                    {\n                        $loscore{$id} += $logodds{$base}[$pos3];\n\n                        if ($loscore{$id} &gt; $maxscore{$id})\n                        {\n                            $maxscore{$id} = $loscore{$id};\n                        }\n                    }\n                }\n                elsif ( ! defined $HoA{$id}[$pos2])\n                {\n                    print \"$pos2\\n\";\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553553462, "creation_date": 1553448449, "question_id": 55326503, "link": "https://stackoverflow.com/questions/55326503/eliminating-unitialized-values-in-my-perl-hash-of-arrays", "title": "Eliminating unitialized values in my Perl hash of arrays", "body": "<p>I successfully create a hash of arrays, and I am using it to calculate log-odds scores for each DNA sequence from a file (<a href=\"https://stackoverflow.com/questions/55316872/creating-a-hash-of-arrays-for-dna-sequences-perl\">Creating a hash of arrays for DNA sequences, Perl</a> has input file format). I get a score for each sequence, but I get a warning for each calculation. Naturally, I want to clear up the warning. The warning is: <code>Use of uninitialized value in string eq at line 148</code>.</p>\n\n<p>Here is a summarized version of the code (I can post the full code if necessary):</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\n#USER SPECIFICATIONS\nprint \"Please enter the filename of the fasta sequence data: \";\nmy $filename1 = &lt;STDIN&gt;;\n\n#Remove newline from file\nchomp $filename1;\n\n#Open the file and store each dna seq in hash\nmy %id2seq = ();\nmy %HoA = ();\nmy %loscore = ();\nmy $id = '';\nopen (FILE, '&lt;', $filename1) or die \"Cannot open $filename1.\",$!;\nmy $dna;\nwhile (&lt;FILE&gt;)\n{\n    if($_ =~ /^&gt;(.+)/)\n    {\n         $id = $1; #Stores 'Sequence 1' as the first $id, for example\n    }\n    else\n    {\n        $HoA{$id} = [ split(//) ]; #Splits the contents to allow for position reference later\n        $id2seq{$id} .= $_; #Creates a hash with each seq associated to an id number, used for calculating tables that have been omitted for space\n        $loscore{$id} .= 0; #Creates a hash with each id number to have a log-odds score\n    }\n}\nclose FILE;\n\n#User specifies motif width\nprint \"Please enter the motif width:\\n\";\nmy $width = &lt;STDIN&gt;;\n\n#Remove newline from file\nchomp $width;\n\n#Default width is 3 (arbitrary number chosen)\nif ($width eq '')\n{\n    $width = 3;\n}\n\n#Omitting code about $width&lt;=0, creation of log-odds score hash to save space\n\nforeach $id (keys %HoA, %loscore)\n{\n    for my $pos (0..($width-1))\n    {\n        for my $base (qw( A C G T))\n        {\n            if ($HoA{$id}[$pos] eq $base) #ERROR OCCURS HERE\n            {\n                $loscore{$id} += $logodds{$base}[$pos];\n            }\n            elsif ( ! defined $HoA{$id}[$pos]) \n            {\n                print \"$pos\\n\"; \n            }\n        }\n    }\n}\nprint Dumper(\\%loscore);\n</code></pre>\n\n<p>The output I get is:</p>\n\n<pre><code>Use of uninitialized value in string eq at line 148, &lt;STDIN&gt; line 2.\n2\n(This error repeats 4 times for each position - most likely due to matching to each $base?)\n\n$VAR1 = {\n         'Sequence 15' =&gt; '-1.27764697876093',\n         'Sequence 4' =&gt; '0.437512962981119',\n         (continues for 29 sequences)\n        }\n</code></pre>\n\n<p>To summarize, I want to calculate the log-odds score of each sequence. I have a log-odds score hash <code>%loscore</code> that contains the score of a base at each location within a motif. The log-odds score is calculated by summing the referenced values. For example, if the log-odds table was</p>\n\n<pre><code>A 4 3 2\nC 7 2 1\nG 6 9 2\nT 1 0 3\n</code></pre>\n\n<p>The log-odds score of the sequence <code>CAG</code> would be <code>7+3+2=12</code>. </p>\n\n<p>At the moment, I believe that the error occurs because of the way I split the strings of DNA to be put into the hash of arrays. As I previously stated, if you want all the code so you can copy-paste, I can provide it. I think the solution is pretty simple, and I just need someone to point me in the right direction. Any and all help is appreciated, and I can clarify as questions arise. Also, any tips that could help me to post more concise questions are appreciated (I know this one is lengthy, I just want to provide enough background information).</p>\n"}, {"tags": ["arrays", "perl", "hash", "dna-sequence"], "answers": [{"tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": true, "score": 0, "last_activity_date": 1553365292, "creation_date": 1553365292, "answer_id": 55316994, "question_id": 55316872, "link": "https://stackoverflow.com/questions/55316872/creating-a-hash-of-arrays-for-dna-sequences-perl/55316994#55316994", "title": "Creating a hash of arrays for DNA sequences, Perl", "body": "<p><code>@seqs</code> contains characters from the last sequence. <code>$id2seq{$id}[@seqs]</code> actually means <code>$id2seq{$id}[N]</code> where <code>N</code> is the length of the last sequence. So you print only one character from each sequence and get a warning if that sequence is shorter than the last one.</p>\n\n<p>If you <code>print</code> only for debugging it is easier with:</p>\n\n<pre><code>use Data::Dumper;\nprint Dumper(\\%id2seq);\n</code></pre>\n\n<p>Otherwise you have to iterate over <code>$id2seq{$id}</code> yourself in a nested loop.</p>\n"}, {"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1553366080, "last_edit_date": 1553366080, "creation_date": 1553365674, "answer_id": 55317055, "question_id": 55316872, "link": "https://stackoverflow.com/questions/55316872/creating-a-hash-of-arrays-for-dna-sequences-perl/55317055#55317055", "title": "Creating a hash of arrays for DNA sequences, Perl", "body": "<p>This line is incorrect:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>print \"$id2seq{$id}[@seqs]\\n\\n\";\n</code></pre>\n\n<p><code>$id2seq{$id}</code> is an array ref, so the correct way to print it would be</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>print \"@{ $id2seq{$id} }\\n\\n\";\n</code></pre>\n\n<p>A complete example would be:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $current_id;\nmy %id2seq;\nwhile (&lt;DATA&gt;) {\n    chomp;\n    if (/^&gt;(.+)/) {\n        $current_id = $1;\n    } else {\n        $id2seq{$current_id} = [ split(//) ];\n    }\n}\n\nprint \"@{ $_ }\\n\" foreach (values %id2seq);\n\nexit 0;\n\n__DATA__\n&gt;Sequence 1\nTCAGAACCAGTTATAAATTTATCATTTCCTTCTCCACTCCT\n&gt;Sequence 2\nCCCACGCAGCCGCCCTCCTCCCCGGTCACTGACTGGTCCTG\n&gt;Sequence 3\nTCGACCCTCTGGAACCTATCAGGGACCACAGTCAGCCAGGCAAG\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nT C G A C C C T C T G G A A C C T A T C A G G G A C C A C A G T C A G C C A G G C A A G\nC C C A C G C A G C C G C C C T C C T C C C C G G T C A C T G A C T G G T C C T G\nT C A G A A C C A G T T A T A A A T T T A T C A T T T C C T T C T C C A C T C C T\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553380680, "post_id": 55317110, "comment_id": 97364962, "body": "I concur with Dada."}], "tags": [], "owner": {"reputation": 7, "user_id": 10205280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/214d20613ad4be2abe386cba99f610df?s=128&d=identicon&r=PG&f=1", "display_name": "kmast", "link": "https://stackoverflow.com/users/10205280/kmast"}, "is_accepted": false, "score": -1, "last_activity_date": 1553366098, "creation_date": 1553366098, "answer_id": 55317110, "question_id": 55316872, "link": "https://stackoverflow.com/questions/55316872/creating-a-hash-of-arrays-for-dna-sequences-perl/55317110#55317110", "title": "Creating a hash of arrays for DNA sequences, Perl", "body": "<p>You need to print </p>\n\n<pre><code>$id2seq{$id}[3]\\n\\n\";\n</code></pre>\n\n<p>To get the fourth value.  Also, you never defined @seqs with 'my' so strict and warnings is complaining, thus the 'Use of unitialized value in concatenation (.) or string at line 37.'.  Either remove warnings/strict or define @seqs</p>\n"}], "owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 55316994, "answer_count": 3, "score": 0, "last_activity_date": 1553366098, "creation_date": 1553364607, "last_edit_date": 1553365116, "question_id": 55316872, "link": "https://stackoverflow.com/questions/55316872/creating-a-hash-of-arrays-for-dna-sequences-perl", "title": "Creating a hash of arrays for DNA sequences, Perl", "body": "<p>I have a hash called <code>%id2seq</code> that contains strings of DNA sequences that are referenced by the key <code>$id</code>. I want to be able to manipulate the DNA sequences by using a position within the string as a reference. For example, if my DNA sequence was <code>ACGTG</code>, my <code>$id</code> would be <code>Sequence 1</code>, my <code>$id2seq{'Sequence 1'}</code> would be <code>ACGTG</code>, and my \"theoretical\" <code>$id2seq{'Sequence 1'}[3]</code> would be <code>G</code>. \nI am attempting to create a hash of arrays to do this, but I'm getting a weird output (see below output). I'm pretty sure that it's just my formatting Any input is helpful, and I appreciate in advance.</p>\n\n<p>Here is a snippet of the input file:</p>\n\n<pre><code>&gt;Sequence 1\nTCAGAACCAGTTATAAATTTATCATTTCCTTCTCCACTCCT\n&gt;Sequence 2\nCCCACGCAGCCGCCCTCCTCCCCGGTCACTGACTGGTCCTG\n&gt;Sequence 3\nTCGACCCTCTGGAACCTATCAGGGACCACAGTCAGCCAGGCAAG\n</code></pre>\n\n<p>Here is a snippet of my attempt at the moment. (I have a hash table that accesses a file with the DNA sequences commented out):</p>\n\n<pre><code>use strict;\nuse warnings;\n\nprint \"Please enter the filename of the fasta sequence data: \";\nmy $filename1 = &lt;STDIN&gt;;\n\n#Remove newline from file\nchomp $filename1;\n\n#Open the file and store each dna seq in hash\nmy %id2seq = ();\nmy $id = '';\nopen (FILE, '&lt;', $filename1) or die \"Cannot open $filename1.\",$!;\nmy $dna;\nwhile (&lt;FILE&gt;)\n{\n    if($_ =~ /^&gt;(.+)/)\n    {\n        $id = $1;\n    }\n    else\n    {\n        ## $id2seq{$id} = $_; used to create hash table\n        @seqs = split '', $_;\n        $id2seq{$id} = [ @seqs ];\n    }\n}\nclose FILE;\nforeach $id (keys %id2seq)\n{\n    print \"$id2seq{$id}[@seqs]\\n\\n\";\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>Use of unitialized value in concatenation (.) or string at line 37.\n\n\nT\n\nG\n\nA\n\nT\n\nT\n</code></pre>\n"}, {"tags": ["xml", "perl", "xml-twig"], "comments": [{"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "edited": false, "score": 0, "creation_date": 1553361976, "post_id": 55315948, "comment_id": 97359883, "body": "your code does not compile under strict/warnings and <code>$Message_refid</code> is never set. Please fix this so it can be debugged."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553362731, "post_id": 55315948, "comment_id": 97360099, "body": "I&#39;m having a hard time understanding what you are trying to make your code do. What output are you trying to obtain?"}], "answers": [{"comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1553364391, "post_id": 55316703, "comment_id": 97360576, "body": "Updated answer with the <code>CDATA</code> instruction. I hope that is what you were looking for."}, {"owner": {"reputation": 7, "user_id": 11195588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0dbc17fc876cf987c4dc310466af8c?s=128&d=identicon&r=PG&f=1", "display_name": "Angelo", "link": "https://stackoverflow.com/users/11195588/angelo"}, "edited": false, "score": 0, "creation_date": 1553475476, "post_id": 55316703, "comment_id": 97385762, "body": "Hi Everyone, sorry for my unclear question. The sad part is...I thought it was clear.  I&#39;ll try to be more clear in the future.  With that said, Stefan, I think you&#39;re the only one that understands my language :). Don&#39;t know if that&#39;s good news or bad news. Anyway, your code was almost spot on. The only thing I added was [\\@refid=&#39;$Message_refid&#39;] to isolate only Content items under specific Message Nodes (see code below):      foreach my $Content ($_-&gt;findnodes(&quot;./Contents/Message[\\@refid=&#39;$Message_refid&#39;]&zwnj;&#8203;/Content[\\@language=&zwnj;&#8203;&#39;en&#39;]&quot;)) {  Thank You! I&#39;ve learned a lot from you.  Angelo"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 1, "last_activity_date": 1553364350, "last_edit_date": 1553364350, "creation_date": 1553363579, "answer_id": 55316703, "question_id": 55315948, "link": "https://stackoverflow.com/questions/55315948/navigating-xml-to-access-cdata-using-xmltwig/55316703#55316703", "title": "Navigating XML to access CDATA using XML::TWIG", "body": "<p>Here is a first attempt to try to understand what your code is supposed to do, based on the structure of the XML:</p>\n\n<ul>\n<li>handler for <code>Selection</code> nodes looks for children <code>Content</code> nodes  with attribute <code>language == 'en'</code> under <code>Message</code> nodes under <code>Content</code>nodes\n\n<ul>\n<li>translates to XPath <code>./Contents/Message/Content[@language='en']</code></li>\n<li>if it has an attribute <code>imagelibraryid</code>, store the value of that</li>\n<li>otherwise store the <code>CDATA</code> content of the first child</li>\n<li>set <code>refid</code> to the attribute value from parent <code>Message</code> node</li>\n</ul></li>\n<li>append them to the content list for the <code>Selection</code> node</li>\n<li>to show what was collected, use <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow noreferrer\">Data::Dumper</a> on the array ref</li>\n</ul>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse XML::Twig;\nuse Data::Dumper;\n\nmy %selections;\n\nmy $twig = XML::Twig-&gt;new(\n    twig_handlers =&gt; {\n        Selection =&gt; sub {\n            #$_-&gt;print();\n            print \"selection id: \", $_-&gt;att('id'), \"\\n\";\n\n            my @contents;\n            foreach my $content ($_-&gt;findnodes(\"./Contents/Message/Content[\\@language='en']\")) {\n                my $result = {\n                    refid =&gt; $content-&gt;parent-&gt;att('refid'),\n                };\n                my $id     = $content-&gt;att('imagelibraryid');\n                if (defined $id) {\n                    $result-&gt;{library} = $id;\n                } else {\n                    $result-&gt;{cata}    = $content-&gt;first_child-&gt;cdata;\n                }\n                push(@contents, $result);\n            }\n\n            # store collected Content nodes under selection ID\n            $selections{ $_-&gt;att('id') } = \\@contents;\n        },\n    }\n);\n\n$twig-&gt;parse(\\*DATA);\n\nwhile (my($id, $contents) = each %selections) {\n    my $dump = Dumper($contents);\n    print \"Selection '${id}' messages: $dump\\n\";\n}\n\nexit 0;\n\n__DATA__\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n... the rest of your XML left out ...\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nselection id: 54008473\nselection id: 54008475\nSelection '54008473' messages: $VAR1 = [\n          {\n            'refid' =&gt; '123991123',\n            'library' =&gt; '5492396'\n          },\n          {\n            'cata' =&gt; '&lt;p&gt;Some English content&lt;/p&gt;',\n            'refid' =&gt; '128054778'\n          }\n        ];\n\nSelection '54008475' messages: $VAR1 = [\n          {\n            'cata' =&gt; '&lt;p&gt;ada&lt;/p&gt;',\n            'refid' =&gt; '128054778'\n          }\n        ];\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 11195588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0dbc17fc876cf987c4dc310466af8c?s=128&d=identicon&r=PG&f=1", "display_name": "Angelo", "link": "https://stackoverflow.com/users/11195588/angelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 55316703, "answer_count": 1, "score": 0, "last_activity_date": 1553364350, "creation_date": 1553358912, "question_id": 55315948, "link": "https://stackoverflow.com/questions/55315948/navigating-xml-to-access-cdata-using-xmltwig", "title": "Navigating XML to access CDATA using XML::TWIG", "body": "<p>I have this XML file and I need to access specific nodes one at a time. Below is a sample of my XML along with my sample code.</p>\n\n<p>My code is working fine except that I loop through all of the Message/Content tags instead of just getting the specific Message/Content tag under the current Message tag. For example, I would get back 3 Message/Content tags when the current Message tag is being processed (the one with refid=\"123991123\") when I only want 1 returned (). Hope this is making sense. Any help here would be appreciated.</p>\n\n<p>Code:</p>\n\n<pre><code>my $twig = XML::Twig-&gt;new(\ntwig_handlers =&gt; {\n    Selection =&gt; sub {\n        foreach my $message ($_-&gt;findnodes('./Contents/Message')) {\n\n            if($message-&gt;att('custom')){\n                $Message_custom = $message-&gt;att('custom');\n                foreach my $Content ($_-&gt;findnodes('./Contents/Message/Content')) {\n                    print $Selection_id.\": \".$Message_refid.\": \".$TotalContents++.\"\\n\";\n                    if($Content-&gt;att('language') eq \"en\"){\n                        if($Content-&gt;att('imagelibraryid')){\n                            $Message_Content_language_en_imagelibraryid = $Content-&gt;att('imagelibraryid');\n                        }else{\n                            $Message_Content_language_en = substr($message-&gt;field('Content'), 0, 20);\n                        }\n                    }\n                }\n            }\n        }\n    },\n}\n);\n</code></pre>\n\n<p>XML:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Root&gt;\n  &lt;Selection id=\"54008473\"&gt;\n    &lt;Name&gt;Master&lt;/Name&gt;\n    &lt;Contents&gt;\n      &lt;Message refid=\"125796458\" suppress=\"true\" status=\"Unchanged\"/&gt;\n      &lt;Message refid=\"123991123\" suppress=\"true\" status=\"Unchanged\"&gt;\n        &lt;Content language=\"en\" imagelibraryid=\"5492396\"/&gt;\n      &lt;/Message&gt;\n      &lt;Message refid=\"128054778\" custom=\"true\" status=\"New\"&gt;\n        &lt;Content language=\"en\"&gt;&lt;![CDATA[&lt;p&gt;Some English content&lt;/p&gt;]]&gt;&lt;/Content&gt;\n        &lt;Content language=\"fr\"&gt;&lt;![CDATA[&lt;p&gt;Some French content&lt;/p&gt;]]&gt;&lt;/Content&gt;\n      &lt;/Message&gt;\n    &lt;/Contents&gt;\n  &lt;/Selection&gt;\n  &lt;Selection id=\"54008475\" datavaluerefid=\"54008479\"&gt;\n    &lt;Name&gt;RMBC&lt;/Name&gt;\n    &lt;Contents&gt;\n      &lt;Message refid=\"125796458\" sameasparent=\"true\" parentrefid=\"54008473\" status=\"Unchanged\"/&gt;\n      &lt;Message refid=\"123991123\" sameasparent=\"true\" parentrefid=\"54008473\" status=\"Unchanged\"/&gt;\n      &lt;Message refid=\"128054778\" custom=\"true\" status=\"New\"&gt;\n        &lt;Content language=\"en\"&gt;&lt;![CDATA[&lt;p&gt;ada&lt;/p&gt;]]&gt;&lt;/Content&gt;\n      &lt;/Message&gt;\n    &lt;/Contents&gt;\n  &lt;/Selection&gt;\n&lt;/Root&gt;\n</code></pre>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1553357048, "post_id": 55315590, "comment_id": 97358254, "body": "Why is <i>Protoperidinium denticulatum</i> selected and not <i>Protoperidinium divergens</i>? They both have 1800 in the last column."}, {"owner": {"reputation": 5, "user_id": 8794413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69c2827533f2fe7ca75fa16de0fb60a3?s=128&d=identicon&r=PG&f=1", "display_name": "cara", "link": "https://stackoverflow.com/users/8794413/cara"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1553357216, "post_id": 55315590, "comment_id": 97358307, "body": "I only need one to represent that genus. So if I have the same number then I just pick at random between the two or more."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1553357345, "post_id": 55315590, "comment_id": 97358349, "body": "Are the species of the same genus always adjacent?"}, {"owner": {"reputation": 5, "user_id": 8794413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69c2827533f2fe7ca75fa16de0fb60a3?s=128&d=identicon&r=PG&f=1", "display_name": "cara", "link": "https://stackoverflow.com/users/8794413/cara"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1553357454, "post_id": 55315590, "comment_id": 97358390, "body": "No, not always."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1553357509, "creation_date": 1553357509, "answer_id": 55315739, "question_id": 55315590, "link": "https://stackoverflow.com/questions/55315590/filter-file-by-unique-and-biggest-value-combine-two-arrays-into-hash/55315739#55315739", "title": "filter file by unique and biggest value; combine two arrays into hash", "body": "<pre><code>use Text::CSV_XS qw( );\n\nmy $csv = Text::CSV_XS-&gt;new({\n   auto_diag   =&gt; 2,\n   binary      =&gt; 1,\n   quote_space =&gt; 0,\n});\n\nmy %by_genus;\nwhile ( my $row = $csv-&gt;getline(\\*ARGV) ) {\n   my ($genus) = split(' ', $row-&gt;[3]);\n   $by_genus{$genus} = $row\n      if !$by_genus{$genus}\n      || $row-&gt;[5] &gt; $by_genus{$genus}[5];\n}\n\n$csv-&gt;say(select(), $_) for values(%by_genus);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553357632, "post_id": 55315752, "comment_id": 97358443, "body": "This assumes the last field will always be non-negative. (Probably ok, but you should have mentioned it!)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553357685, "post_id": 55315752, "comment_id": 97358464, "body": "This only handles a subset of CSV."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553358845, "post_id": 55315752, "comment_id": 97358830, "body": "Yes, the danger of guessing the spec from a sample input."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 0, "last_activity_date": 1553357575, "creation_date": 1553357575, "answer_id": 55315752, "question_id": 55315590, "link": "https://stackoverflow.com/questions/55315590/filter-file-by-unique-and-biggest-value-combine-two-arrays-into-hash/55315752#55315752", "title": "filter file by unique and biggest value; combine two arrays into hash", "body": "<p>Properly naming the variables makes the code more readable:</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nmy %selected;\nwhile (&lt;&gt;) {\n    my ($species, $value) = (split /,/)[3, 5];\n    my $genus = (split ' ', $species)[0];\n    if ($value &gt; ($selected{$genus}{max} || 0)) {\n        $selected{$genus}{max} = $value;\n        $selected{$genus}{line} = $_;\n    }\n}\nfor my $genus (keys %selected) {\n    print $selected{$genus}{line};\n}\n</code></pre>\n\n<p>The order of the output lines is random.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553368095, "post_id": 55316927, "comment_id": 97361695, "body": "Virtually identical to @choroba&#39;s answer, down to needlessly only handling a subset of CSV."}], "tags": [], "owner": {"reputation": 7, "user_id": 10205280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/214d20613ad4be2abe386cba99f610df?s=128&d=identicon&r=PG&f=1", "display_name": "kmast", "link": "https://stackoverflow.com/users/10205280/kmast"}, "is_accepted": false, "score": -1, "last_activity_date": 1553364911, "creation_date": 1553364911, "answer_id": 55316927, "question_id": 55315590, "link": "https://stackoverflow.com/questions/55315590/filter-file-by-unique-and-biggest-value-combine-two-arrays-into-hash/55316927#55316927", "title": "filter file by unique and biggest value; combine two arrays into hash", "body": "<p>Not fancy but gets the job done </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\n\nmy @data = `cat /var/tmp/test.in`;\n\nmy %genuses = ();\n\n\nforeach my $line ( @data ) {\n  chomp($line);\n  my @splitline = split(',', $line);\n  my $genus = $splitline[3];\n  my $num = $splitline[5];\n  my ( $name, $extra ) = split(' ', $genus);\n  if ( exists $genuses{$name}-&gt;{'num'} ) {\n    if ( $genuses{$name}-&gt;{'num'} &lt; $num ) {\n      $genuses{$name}-&gt;{'num'} = $num;\n      $genuses{$name}-&gt;{'line'} = $line;\n    }\n    else {\n        next;\n    }\n  }\n  else {\n    $genuses{$name}-&gt;{'num'} = $num;\n    $genuses{$name}-&gt;{'line'} = $line;\n }\n}\n\nforeach my $genus ( %genuses ) {\n  print \"$genuses{$genus}-&gt;{'line'}\";\n  print \"\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[root@localhost tmp]# ./test.pl\nAB179736.1.1725,AB179736.1.1725,278986,Pterocorys zancleus,0,1763\nAB179735.1.1711,AB179735.1.1711,278983,Eucyrtidium hexagonatum,0,1600\nAB120309.1.1800,AB120309.1.1800,4442,Camellia sinensis,0,1700\nAB120002.1.1725,AB120002.1.1725,244961,Gyrodinium fusiforme,0,1800\nAB181890.1.1709,AB181890.1.1709,281610,Protoperidinium denticulatum,0,1800\n</code></pre>\n\n<p>Don't see an obvious method that you are sorting your output by</p>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 0, "last_activity_date": 1553523945, "creation_date": 1553523945, "answer_id": 55340056, "question_id": 55315590, "link": "https://stackoverflow.com/questions/55315590/filter-file-by-unique-and-biggest-value-combine-two-arrays-into-hash/55340056#55340056", "title": "filter file by unique and biggest value; combine two arrays into hash", "body": "<p>You can this Perl command line as well</p>\n\n<pre><code>perl -F, -lane ' ($g=$F[3])=~s/(^\\S+).*/$1/; if( $mx{$g}&lt;$F[-1]) \n   { $kv{$g}=$_;$mx{$g}=$F[-1] } END { print $kv{$_} for(keys %kv) } ' file\n</code></pre>\n\n<p>with the given inputs in cara.txt file, the output is</p>\n\n<pre><code>$ perl -F, -lane ' ($g=$F[3])=~s/(^\\S+).*/$1/; if( $mx{$g}&lt;$F[-1]) \n       { $kv{$g}=$_;$mx{$g}=$F[-1] } END { print $kv{$_} for(keys %kv) }  ' cara.txt\nAB179736.1.1725,AB179736.1.1725,278986,Pterocorys zancleus,0,1763\nAB179735.1.1711,AB179735.1.1711,278983,Eucyrtidium hexagonatum,0,1600\nAB120309.1.1800,AB120309.1.1800,4442,Camellia sinensis,0,1700\nAB120002.1.1725,AB120002.1.1725,244961,Gyrodinium fusiforme,0,1800\nAB181890.1.1709,AB181890.1.1709,281610,Protoperidinium denticulatum,0,1800\n\n$\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 8794413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69c2827533f2fe7ca75fa16de0fb60a3?s=128&d=identicon&r=PG&f=1", "display_name": "cara", "link": "https://stackoverflow.com/users/8794413/cara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 55315752, "answer_count": 4, "score": 0, "last_activity_date": 1553523945, "creation_date": 1553356504, "last_edit_date": 1553398989, "question_id": 55315590, "link": "https://stackoverflow.com/questions/55315590/filter-file-by-unique-and-biggest-value-combine-two-arrays-into-hash", "title": "filter file by unique and biggest value; combine two arrays into hash", "body": "<p>I need to extract by unique genus (first part of the name of species) in one column but with by biggest number in another column in a CSV file when having multiples of the same name. </p>\n\n<p>So if have multiple genus (same first name) then take the biggest number in the last column to select which will represent that genus. </p>\n\n<p>I have extracted the information into arrays, but I am having trouble with combining the two in order to select.  I was using \n<a href=\"https://perlmaven.com/unique-values-in-an-array-in-perl\" rel=\"nofollow noreferrer\">https://perlmaven.com/unique-values-in-an-array-in-perl</a> \nto help but I need to include biggest number in last column when have the same genus situation. </p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen taxa_fh, '&lt;', \"$ARGV[0]\" or die qq{Failed to open \"$ARGV[0]\" for input: $!\\n};\n\nopen match_fh, \"&gt;$ARGV[0]_genusLongestLEN.csv\" or die qq{Failed to open for output: $!\\n};my @unique;\n\nmy %seen;\nmy %hash;\n\nwhile ( my $line = &lt;taxa_fh&gt; ) {\n   chomp( $line );\n   my @parts = split( /,/, $line );\n   my @name = split( / /, $parts[3]);\n   my @A = $name[0];\n   my @B = $parts[5];\n   @seen{@A} = ();\n   my @merged = (@A, grep{!exists $seen{$_}} @B);\n   my @merged = (@A, @B);\n   @hash{@A} = @B;\n   print \"$line\\n\";\n}\n\nclose taxa_fh;\nclose match_fh;\n</code></pre>\n\n<h1>Input example:</h1>\n\n<pre><code>AB179735.1.1711,AB179735.1.1711,278983,Eucyrtidium hexagonatum,0,1600\nAB179736.1.1725,AB179736.1.1725,278986,Pterocorys zancleus,0,1763\nAB181888.1.1758,AB181888.1.1758,281609,Protoperidinium crassipes,0,1700\nAB181890.1.1709,AB181890.1.1709,281610,Protoperidinium denticulatum,0,1800\nAB181892.1.1738,AB181892.1.1738,281611,Protoperidinium divergens,0,1800\nAB181894.1.1744,AB181894.1.1744,281612,Protoperidinium leonis,0,1500\nAB181899.1.1746,AB181899.1.1746,281613,Protoperidinium pallidum,0,1600\nAB181902.1.1741,AB181902.1.1741,261845,Protoperidinium pellucidum,0,1750\nAB181904.1.1734,AB181904.1.1734,281614,Protoperidinium punctulatum,0,1599\nAB181907.1.1687,AB181907.1.1687,281615,Protoperidinium thorianum,0,1600\nAB120001.1.1725,AB120001.1.1725,244960,Gyrodinium spirale,0,1500\nAB120002.1.1725,AB120002.1.1725,244961,Gyrodinium fusiforme,0,1800\nAB120003.1.1724,AB120003.1.1724,244962,Gyrodinium rubrum,0,1700\nAB120004.1.1723,AB120004.1.1723,244963,Gyrodinium helveticum,0,1500\nAB120309.1.1800,AB120309.1.1800,4442,Camellia sinensis,0,1700\n</code></pre>\n\n<h1>Wanted output:</h1>\n\n<pre><code>AB179735.1.1711,AB179735.1.1711,278983,Eucyrtidium hexagonatum,0,1600\nAB179736.1.1725,AB179736.1.1725,278986,Pterocorys zancleus,0,1763\nAB181890.1.1709,AB181890.1.1709,281610,Protoperidinium denticulatum,0,1800\nAB120002.1.1725,AB120002.1.1725,244961,Gyrodinium fusiforme,0,1800\nAB120309.1.1800,AB120309.1.1800,4442,Camellia sinensis,0,1700\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553354714, "post_id": 55312816, "comment_id": 97357593, "body": "If you mean &quot;check if <code>Text.xls</code> is opened by Excel&quot;, you might be able to use OLE to ask Excel what files it has open, and to close <code>Test.xls</code> if that&#39;s one of the files."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1553354792, "post_id": 55312816, "comment_id": 97357615, "body": "Another option would be to try to simply open the file for writing. Most Windows applications obtain a lock on the files they open which would cause that to return an error if it&#39;s open. That won&#39;t help you close it, though."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553354810, "post_id": 55312816, "comment_id": 97357622, "body": "In general, OS don&#39;t tend to list the resources processes have obtained, and they don&#39;t tend to let you invalidate the resources of other processes. That said, SysInternal&#39;s <a href=\"https://docs.microsoft.com/en-us/sysinternals/downloads/process-explorer\" rel=\"nofollow noreferrer\"><code>ProcessExplorer</code></a> (which has been bought by MS) is capable of doing this for file handles, so there is a way. It will surely involve making low-level system calls, which you can do using Win32::API"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11247039, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/53f15f309d5537aab7ff97d3728f119e?s=128&d=identicon&r=PG", "display_name": "TRSi", "link": "https://stackoverflow.com/users/11247039/trsi"}, "is_accepted": false, "score": -2, "last_activity_date": 1553343514, "creation_date": 1553343514, "answer_id": 55313639, "question_id": 55312816, "link": "https://stackoverflow.com/questions/55312816/how-to-check-if-a-file-is-already-being-used-open-using-perl-if-so-forcefully/55313639#55313639", "title": "How to check if a file is already being used (open) using perl. If so,forcefully close it using perl", "body": "<p>You can be creative! </p>\n\n<p>For the functionally you can realize on two ways. </p>\n\n<p>The popular first: a flat textfile, where the state of opened file(s) is notified.</p>\n\n<p>Second is the same, but just as array in RAM. It's faster, while direct acessable state improves your realtime experience. If system reboots no file is opened and will not fail from popular way. There will left the flatfile after reboot, which is on last state.</p>\n\n<p>Maybe you're looking for a combinition both ways, its your choice!</p>\n\n<p>So you're autonom from operating system.</p>\n"}], "owner": {"reputation": 27, "user_id": 2854259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a36c4f4fed0dc56e9b372a88b53b570a?s=128&d=identicon&r=PG&f=1", "display_name": "user2854259", "link": "https://stackoverflow.com/users/2854259/user2854259"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1553343514, "creation_date": 1553337382, "question_id": 55312816, "link": "https://stackoverflow.com/questions/55312816/how-to-check-if-a-file-is-already-being-used-open-using-perl-if-so-forcefully", "title": "How to check if a file is already being used (open) using perl. If so,forcefully close it using perl", "body": "<p>I am in a situation where I need to check if a file, say Test.xls is already opened. If the file is opened, I want my perl to forcefully close it with/without saving changes. </p>\n\n<p>If not opened, my perl will create a new file and carry on with its execution. </p>\n\n<p>Any inputs to it ?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 2, "creation_date": 1553326551, "post_id": 55310397, "comment_id": 97350420, "body": "Please, describe what &quot;it doesn&#39;t work&quot; means, and provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. Your regex does match <code>2018-09-19[</code>.  You might want to use <code>${1}</code> instead of <code>$1</code> in the replacement side though, or <code>$1\\[</code> instead of <code>$1[</code>."}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1553360704, "post_id": 55310397, "comment_id": 97359452, "body": "Your problem statement doesn&#39;t match your code. the code looks for square brackets."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3504250"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553363049, "post_id": 55310397, "comment_id": 97360189, "body": "@Dada hey thanks for the feedback. I added a verifiable method that I was using to just test the regex. I&#39;ll try out your recommendations i&#39;m sure i just have a small problem somewhere."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3504250"}, "reply_to_user": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1553363187, "post_id": 55310397, "comment_id": 97360224, "body": "@jhnc Not sure I understand doesn&#39;t my code try to match a date format namely this section of the code <code>([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))</code>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3504250"}, "edited": false, "score": 0, "creation_date": 1553368184, "post_id": 55317088, "comment_id": 97361718, "body": "This makes so much more sense. Thank you so much for the help man, I really appreciate it!"}], "tags": [], "owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "is_accepted": true, "score": 0, "last_activity_date": 1553366281, "last_edit_date": 1553366281, "creation_date": 1553365892, "answer_id": 55317088, "question_id": 55310397, "link": "https://stackoverflow.com/questions/55310397/how-to-append-after-regex-search-in-perl-script/55317088#55317088", "title": "How to append after Regex Search in Perl script", "body": "<p>Your problem statement says you want to turn:</p>\n\n<pre><code>2018-09-19\n</code></pre>\n\n<p>into:</p>\n\n<pre><code>2018-09-19 00:00:00.00\n</code></pre>\n\n<p>However, your code is:</p>\n\n<pre><code>s/([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))\\[/$1[00:00:00.00]][/\n</code></pre>\n\n<p>Using <code>/x</code> we can write it a bit more legibly as:</p>\n\n<pre><code>s/\n    (\n        [12]\\d{3}                    # year\n        -                            # hyphen\n        ( 0[1-9] | 1[0-2] )          # month (saved as $2)\n        -                            # hyphen\n        ( 0[1-9] | [12]\\d | 3[01] )  # day (saved as $3)\n    )                                # save this as $1\n    \\[                               # square bracket \n/$1[00:00:00.00]][/x\n</code></pre>\n\n<p>From this, it is clear that <code>2018-09-19</code> does not match because it does not end with a square bracket.</p>\n\n<p>The replacement value is:</p>\n\n<pre><code>$1[00:00:00.00]][\n</code></pre>\n\n<p>This (tries to) say:</p>\n\n<ul>\n<li>lookup index <code>00:00:00.00</code> in array <code>@1</code> and substitute value</li>\n<li>append <code>][</code></li>\n</ul>\n\n<p>However this is not valid perl and not what you wanted anyway.</p>\n\n<p>What is happening is that instead of <code>$x</code> + <code>[y]</code> (scalar followed by string value), perl is seeing <code>$x[y]</code> (value from array). To prevent this, either use braces ( <code>${x}[y]</code> ) or escape the bracket ( <code>$x\\[y]</code> ). This results in:</p>\n\n<pre><code>${1}[00:00:00.00]][\n</code></pre>\n\n<p>which is still not what the problem said was needed as the zeros are wrapped in brackets.</p>\n\n<p>To get what you say you want, remove the <code>\\[</code> from the end of the search part and remove the unnecessary brackets from the replacement part:</p>\n\n<pre><code>s/\n    (\n        [12]\\d{3}\n        - ( 0[1-9] | 1[0-2] )\n        - ( 0[1-9] | [12]\\d | 3[01] )\n    )\n    # no bracket here\n/$1 00:00:00.00/x;  # no brackets here\n</code></pre>\n\n<hr>\n\n<p>Note that your code as given has another bug which is that the final <code>print</code> needs to be separated from the <code>s///</code> by a semi-colon.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3504250"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 55317088, "answer_count": 1, "score": -2, "last_activity_date": 1553366281, "creation_date": 1553312241, "last_edit_date": 1553365066, "question_id": 55310397, "link": "https://stackoverflow.com/questions/55310397/how-to-append-after-regex-search-in-perl-script", "title": "How to append after Regex Search in Perl script", "body": "<p>I'm trying to convert a MySQL dump into SQLite database, for database migration. I need to edit the date to append time, so for example 2018-09-19 should be converted to 2018-09-19 00:00:00.00. The reason for this format has to do with how our application works. This is the solution I came up with but it doesn't work.</p>\n\n<pre><code>#!/usr/bin/perl\nwhile (&lt;&gt;){\n  &lt;Other Stuff&gt;\n  ....\n  s/([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))\\[/$1[00:00:00.00]][/\nprint;\n}\n</code></pre>\n\n<p>For testing I created a test.txt file with just for testing</p>\n\n<pre><code>2019-03-06\n</code></pre>\n\n<p>And in command line or terminal I used the following command to test if the append works.</p>\n\n<pre><code> perl -pe  's/([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))\\[/$1[00:00:00.00]][/' &lt; test.txt &gt; testout.txt\n</code></pre>\n\n<p>This gives a clear error of:</p>\n\n<pre><code>syntax error at -e line 1, near \"00:\" Execution of -e aborted due to compilation errors.\n</code></pre>\n\n<p>Using this @dada's solution that looks like this gives no error but also doesn't append the 00:00:00.00 at the end of the line</p>\n\n<p>The Expected output should be </p>\n\n<pre><code>2019-03-06 00:00:00.00\n</code></pre>\n"}, {"tags": ["perl", "date", "timestamp"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1553295307, "post_id": 55308595, "comment_id": 97345687, "body": "What have you tried? I&#39;m sure you know that on this forum, you require code, and a specific question regarding that code to get help."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1553295662, "post_id": 55308595, "comment_id": 97345764, "body": "do you know the timezone?  e.g. 2019-03-10T01:56:00.000000 in America/Los_Angeles rounds up to 2019-03-10T03:00:00.000000"}], "answers": [{"comments": [{"owner": {"reputation": 365, "user_id": 1701831, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/1641053119/picture?type=large", "display_name": "Cadz", "link": "https://stackoverflow.com/users/1701831/cadz"}, "edited": false, "score": 0, "creation_date": 1553296677, "post_id": 55308912, "comment_id": 97346003, "body": "Question, why you add 1 after truncate? also what happens when its not divisible by 5? and why 5 minus dt%5?"}, {"owner": {"reputation": 365, "user_id": 1701831, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/1641053119/picture?type=large", "display_name": "Cadz", "link": "https://stackoverflow.com/users/1701831/cadz"}, "edited": false, "score": 0, "creation_date": 1553296802, "post_id": 55308912, "comment_id": 97346041, "body": "Ohh okay, modulo, will return 0 if already 5, so meaning its already a 5 minute value right?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 365, "user_id": 1701831, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/1641053119/picture?type=large", "display_name": "Cadz", "link": "https://stackoverflow.com/users/1701831/cadz"}, "edited": false, "score": 0, "creation_date": 1553296858, "post_id": 55308912, "comment_id": 97346054, "body": "Re &quot;<i>why you add 1 after truncate?</i>&quot;, Because you asked to round up"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 365, "user_id": 1701831, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/1641053119/picture?type=large", "display_name": "Cadz", "link": "https://stackoverflow.com/users/1701831/cadz"}, "edited": false, "score": 0, "creation_date": 1553296914, "post_id": 55308912, "comment_id": 97346070, "body": "Re &quot;<i>what happens when its not divisible by 5?</i>&quot;, It adds a sufficient number of minutes to make it divisible by 5."}, {"owner": {"reputation": 365, "user_id": 1701831, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/1641053119/picture?type=large", "display_name": "Cadz", "link": "https://stackoverflow.com/users/1701831/cadz"}, "edited": false, "score": 0, "creation_date": 1553296930, "post_id": 55308912, "comment_id": 97346075, "body": "okay so if its not 5 minute value, why we add 5 minus the remainder of the not 5 minute value? why not subtract instead?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 365, "user_id": 1701831, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/1641053119/picture?type=large", "display_name": "Cadz", "link": "https://stackoverflow.com/users/1701831/cadz"}, "edited": false, "score": 0, "creation_date": 1553296942, "post_id": 55308912, "comment_id": 97346080, "body": "Re &quot;<i>why 5 minus dt%5?</i>&quot;, That&#39;s the number of minutes needed to be added to make the minute divisible by 5."}, {"owner": {"reputation": 365, "user_id": 1701831, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/1641053119/picture?type=large", "display_name": "Cadz", "link": "https://stackoverflow.com/users/1701831/cadz"}, "edited": false, "score": 0, "creation_date": 1553296984, "post_id": 55308912, "comment_id": 97346092, "body": "round up yaaahhhh sorry"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 365, "user_id": 1701831, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/1641053119/picture?type=large", "display_name": "Cadz", "link": "https://stackoverflow.com/users/1701831/cadz"}, "edited": false, "score": 0, "creation_date": 1553296999, "post_id": 55308912, "comment_id": 97346096, "body": "Re &quot;<i>why not subtract instead?</i>&quot;, We could subtract a negative number, but that would be weirder."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1553302111, "last_edit_date": 1553302111, "creation_date": 1553296189, "answer_id": 55308912, "question_id": 55308595, "link": "https://stackoverflow.com/questions/55308595/how-to-round-up-a-timestamp-to-nearest-5-minute-value/55308912#55308912", "title": "How to round up a timestamp to nearest 5 minute value", "body": "<pre><code>use DateTime::Format::Strptime qw( );\n\nmy $format = DateTime::Format::Strptime-&gt;new(\n    pattern   =&gt; '%FT%T.%6N',\n    time_zone =&gt; 'UTC',       # Or 'local' or 'America/Toronto' or '-0500'\n    on_error  =&gt; 'croak',\n);\n\nmy $dt = $format-&gt;parse_datetime('2019-01-24T00:00:05.011719');\n$dt-&gt;set_formatter($format);  # Set default stringification format.\n\n$dt-&gt;truncate( to =&gt; 'second' )-&gt;add( seconds =&gt; 1 ) if $dt-&gt;nanosecond;\n$dt-&gt;truncate( to =&gt; 'minute' )-&gt;add( minutes =&gt; 1 ) if $dt-&gt;second;\n$dt-&gt;add( minutes =&gt; 5 - ( $dt-&gt;minute % 5 ) ) if $dt-&gt;minute % 5;\n\nsay $dt;  # 2019-01-24T00:05:00.000000\n</code></pre>\n\n<p>Note that the format used by <code>2019-01-24T00:00:05.011719</code> is ambiguous if the associated time zone observes DST (because of the repeated hour in the fall).</p>\n\n<p>Aside from that, the above code correctly handles discontinuities in the passing of time such as the ones that occur at DST changes, as long as the discontinuity starts and ends at a rounding point.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553448004, "post_id": 55317682, "comment_id": 97378884, "body": "Re &quot;<i>The problem can be broken down to:</i>&quot;, This approach assumes that <i>all</i> discontinuities in the passing of time in the user&#39;s time zone (such as the ones that occur at DST changes) both <i>start</i> and <i>end</i> on a multiple of <code>PERIOD</code>. This assumption is valid for the combination of the time zone you assumed is the user&#39;s time zone (UTC) and for the value of <code>PERIOD</code> in question, but it&#39;s not valid in general."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553459494, "post_id": 55317682, "comment_id": 97382332, "body": "As long as the timestamp of a leapsecond (e.g. <code>2016-12-31T23:59:60</code>) isn&#39;t provided, your program handles leap seconds fine. It&#39;s because epoch time simply pretends they don&#39;t exists. Epoch time is the number of non-leap seconds since 1970 UTC. As far as Epoch time is concerned, <code>1483228800</code> is merely a very long second."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553459922, "post_id": 55317682, "comment_id": 97382446, "body": "I suppose for <code>PERIOD = 10</code>, your program would round <code>2016-12-31T23:59:58</code> to <code>2017-01-01T00:00:00</code> when <code>2016-12-31T23:59:60</code> is technically closer. But I&#39;m not convinced that&#39;s a problem. Most people pretend leap seconds don&#39;t exist."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1553370568, "last_edit_date": 1553370568, "creation_date": 1553370266, "answer_id": 55317682, "question_id": 55308595, "link": "https://stackoverflow.com/questions/55308595/how-to-round-up-a-timestamp-to-nearest-5-minute-value/55317682#55317682", "title": "How to round up a timestamp to nearest 5 minute value", "body": "<p>The problem can be broken down to:</p>\n\n<ul>\n<li>pick a time period <code>N</code> time units</li>\n<li>pick a starting point (epoch) where the first (0th) time period starts</li>\n<li>parse the timestamp and convert it into \"<code>X</code> time units since epoch\"\n\n<ul>\n<li>integer division of <code>X</code> by <code>N</code> gives you the # of the period the timestamp lies in</li>\n<li>the remainder of the division of <code>X</code> by <code>N</code> gives you the offset inside that period</li>\n<li>if the remainder is exactly <code>0</code> (zero) then the timestamp is at the start of that period</li>\n</ul></li>\n</ul>\n\n<p>Your requirements are</p>\n\n<ul>\n<li><code>N</code> is 5 minutes, or 300 seconds</li>\n<li>let's use the standard <a href=\"https://en.wikipedia.org/wiki/UNIX_Epoch\" rel=\"nofollow noreferrer\">UNIX Epoch</a>, i.e. <code>1970-01-01T00:00:00Z</code></li>\n<li>you want to round up to the next period, unless the timestamp is exactly the start of a period.</li>\n<li>as you have not given a time zone, I assume <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"nofollow noreferrer\">UTC</a> for simplicity.</li>\n</ul>\n\n<p>Just using core Perl, i.e. <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow noreferrer\">Time::Piece</a>, a solution would be:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse constant PERIOD =&gt; 5 * 60; # 5 minutes\n\nuse Time::Piece;\n\n# timezone for Time::Piece-&gt;new()\n$ENV{TZ} = \"UTC\";\n\nwhile (&lt;DATA&gt;) {\n    chomp;\n    my($iso8601, $fractional) = split(/\\./);\n\n    # NOTE: time is interpreted as UTC\n    my $t = Time::Piece-&gt;strptime($iso8601, '%FT%T');\n\n    # calculate multiple of PERIOD and offset in that period\n    my $index  = int($t-&gt;epoch / PERIOD);\n    my $offset = $t-&gt;epoch % PERIOD + \"0.${fractional}\";\n\n    # round up to next PERIOD unless time is exactly multiple of PERIOD\n    $index++ if $offset &gt; 0;\n\n    # convert index back to epoch and generate new Time::Piece object\n    # NOTE: timezone offset is set to $ENV{TZ} timezone\n    my $t2 = Time::Piece-&gt;new($index * PERIOD, 0);\n\n    print \"$_ -&gt; \", $t2-&gt;strftime('%FT%T'), \"\\n\";\n}\n\nexit 0;\n\n__DATA__\n2019-01-24T00:00:00.000000\n2019-01-24T00:00:05.011719\n2019-01-24T00:04:59.999999\n2019-01-24T00:05:00.000000\n2019-07-24T00:00:00.000000\n2019-07-24T00:00:05.011719\n2019-07-24T00:04:59.999999\n2019-07-24T00:05:00.000000\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\n2019-01-24T00:00:00.000000 -&gt; 2019-01-24T00:00:00\n2019-01-24T00:00:05.011719 -&gt; 2019-01-24T00:05:00\n2019-01-24T00:04:59.999999 -&gt; 2019-01-24T00:05:00\n2019-01-24T00:05:00.000000 -&gt; 2019-01-24T00:05:00\n2019-07-24T00:00:00.000000 -&gt; 2019-07-24T00:00:00\n2019-07-24T00:00:05.011719 -&gt; 2019-07-24T00:05:00\n2019-07-24T00:04:59.999999 -&gt; 2019-07-24T00:05:00\n2019-07-24T00:05:00.000000 -&gt; 2019-07-24T00:05:00\n</code></pre>\n"}], "owner": {"reputation": 365, "user_id": 1701831, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/1641053119/picture?type=large", "display_name": "Cadz", "link": "https://stackoverflow.com/users/1701831/cadz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 643, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1553370568, "creation_date": 1553293782, "last_edit_date": 1553295982, "question_id": 55308595, "link": "https://stackoverflow.com/questions/55308595/how-to-round-up-a-timestamp-to-nearest-5-minute-value", "title": "How to round up a timestamp to nearest 5 minute value", "body": "<p>I have this format for a timestamp: </p>\n\n<p>2019-01-24T00:00:05.011719</p>\n\n<p>How do I round this up to the nearest 5 minute value? in perl</p>\n\n<p>Edit: Okay the question is pretty vague and lazy. But the question stays, just want to add information to my problem.</p>\n\n<ol>\n<li><p>I don't know what kind of format that is, so if I know i can google, what function or method converts those kind of date formats.</p></li>\n<li><p>20190124000000 isn't this the correct 5 min value? I wanted it to be like that format by the way. But its too easy to be the correct approach, it makes me suspicious like answering math questions back in college. Anyway, I can just use regex for that.</p></li>\n</ol>\n"}, {"tags": ["windows", "postgresql", "apache", "perl"], "comments": [{"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 1, "creation_date": 1553283583, "post_id": 55306610, "comment_id": 97341738, "body": "I don&#39;t think there is a single package for all of these, but all three components have Windows installers. I suggest using a package manager like <a href=\"https://scoop.sh/\" rel=\"nofollow noreferrer\">scoop.sh</a> though"}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 1, "last_activity_date": 1553292016, "last_edit_date": 1553292016, "creation_date": 1553283852, "answer_id": 55306813, "question_id": 55306610, "link": "https://stackoverflow.com/questions/55306610/is-there-a-package-containing-apache-postgresql-perl-for-windows/55306813#55306813", "title": "Is there a package containing Apache PostgreSQL Perl for Windows?", "body": "<p>I don't believe so, but those sorts of bundles are not as necessary as they once were. They're no longer as wielded together. Instead, get the pieces.</p>\n\n<ul>\n<li><a href=\"http://strawberryperl.com/\" rel=\"nofollow noreferrer\">Strawberry Perl</a> which comes with PostgreSQL drivers and compilers and everything you need for Perl development.</li>\n<li><a href=\"https://www.postgresql.org/download/windows/\" rel=\"nofollow noreferrer\">PostgreSQL for Windows</a></li>\n<li><a href=\"https://httpd.apache.org/docs/current/platform/windows.html\" rel=\"nofollow noreferrer\">Apache for Windows</a></li>\n</ul>\n\n<p>I'd recommend skipping Apache unless you specifically need it, it's likely quite a bit more complex than you need. Instead, write web server generic code using <a href=\"https://en.wikipedia.org/wiki/Plack_(software)\" rel=\"nofollow noreferrer\">Plack</a>. Use a Perl web server for development, and then the application can be deployed to whatever web server you'd like for production. Using a Perl web framework such as <a href=\"http://perldancer.org/\" rel=\"nofollow noreferrer\">Dancer</a> will make that all much simpler.</p>\n"}], "owner": {"reputation": 401, "user_id": 4748387, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/h8kAO.jpg?s=128&g=1", "display_name": "K&#233;rdez&#246;sk&#246;d\u0151 Indi&#225;n", "link": "https://stackoverflow.com/users/4748387/k%c3%a9rdez%c3%b6sk%c3%b6d%c5%91-indi%c3%a1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553292016, "creation_date": 1553282977, "question_id": 55306610, "link": "https://stackoverflow.com/questions/55306610/is-there-a-package-containing-apache-postgresql-perl-for-windows", "title": "Is there a package containing Apache PostgreSQL Perl for Windows?", "body": "<p>I am looking for a package containig Apache Web server, PostgreSQL database and Perl for Windows (7, 10). Does anybody know such a package, possibly portable?</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1553278913, "post_id": 55305042, "comment_id": 97339747, "body": "First order of the day: add <code>use strict;</code> and <code>use warnings;</code>, fix the errors, then update your question with the new code."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11244296"}, "edited": false, "score": 0, "creation_date": 1553359799, "post_id": 55305940, "comment_id": 97359137, "body": "How the above could be altered, to add also a report, to have which files had a match, and had content appended, and of those that did not have a match?"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 2, "last_activity_date": 1553366634, "last_edit_date": 1553366634, "creation_date": 1553279976, "answer_id": 55305940, "question_id": 55305042, "link": "https://stackoverflow.com/questions/55305042/merge-append-the-contents-of-a-binary-file-with-a-certain-order/55305940#55305940", "title": "merge - append the contents of a binary file with a certain order", "body": "<p>One possible solution</p>\n\n<ul>\n<li><code>use autodie</code> to automatically handle open/close errors</li>\n<li><a href=\"https://metacpan.org/pod/File::Spec\" rel=\"nofollow noreferrer\">File::Spec</a> for path name handling</li>\n<li>read the source file as binary using <a href=\"https://metacpan.org/pod/File::Slurper\" rel=\"nofollow noreferrer\">File::Slurper</a></li>\n<li>open the destination file for appending as binary file\n\n<ul>\n<li>using the modern 3-argument version of <code>open()</code></li>\n<li>print the content to the destination file handle</li>\n</ul></li>\n</ul>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse autodie;\n\nuse File::Spec;\nuse File::Slurper qw(read_binary);\n\nmy $source_dir = \"tmp/source_dir\";\nmy $dest_dir   = \"tmp/dest_dir\";\n\nopendir(my $source, $source_dir);\n\nforeach my $file (readdir $source) {\n    unless ($file =~ /^\\.\\.?$/) {\n        my $content = read_binary(File::Spec-&gt;catfile($source_dir, $file));\n        open(my $ofh, '&gt;&gt; :raw :bytes', File::Spec-&gt;catfile($dest_dir, $file));\n        print $ofh $content;\n        close($ofh);\n    }\n}\n\nclosedir($source);\n\nexit 0;\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ls -lhtR tmp/\n...\ntmp/dest_dir:\n-rw-rw-r--. 1 stefanb stefanb 33 22. 3. 20:32 1.bin\n-rw-rw-r--. 1 stefanb stefanb 27 22. 3. 20:32 2.bin\n-rw-rw-r--. 1 stefanb stefanb 15 22. 3. 20:32 3.bin\n\ntmp/source_dir:\n-rw-rw-r--. 1 stefanb stefanb 11 22. 3. 20:32 1.bin\n-rw-rw-r--. 1 stefanb stefanb  9 22. 3. 20:32 2.bin\n-rw-rw-r--. 1 stefanb stefanb  5 22. 3. 20:31 3.bin\n\n$ perl dummy.pl\n\n$ ls -lhtR tmp/\n...\ntmp/dest_dir:\n-rw-rw-r--. 1 stefanb stefanb 44 22. 3. 20:34 1.bin\n-rw-rw-r--. 1 stefanb stefanb 36 22. 3. 20:34 2.bin\n-rw-rw-r--. 1 stefanb stefanb 20 22. 3. 20:34 3.bin\n\ntmp/source_dir:\n-rw-rw-r--. 1 stefanb stefanb 11 22. 3. 20:32 1.bin\n-rw-rw-r--. 1 stefanb stefanb  9 22. 3. 20:32 2.bin\n-rw-rw-r--. 1 stefanb stefanb  5 22. 3. 20:31 3.bin\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE:</strong> OP changed the requirements to only append if the destination file exists. The <code>unless</code> block would then look like:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $dest_file = File::Spec-&gt;catfile($dest_dir, $file);\n\n# only append if destination file exists\nif (-f $dest_file ) {\n    my $source_file = File::Spec-&gt;catfile($source_dir, $file);\n    my $content = read_binary($source_file);\n    open(my $ofh, '&gt;&gt; :raw :bytes', $dest_file);\n    print \"Appending contents of ${source_file} to ${dest_file}\\n\";\n    print $ofh $content;\n    close($ofh);\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11244296"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 55305940, "answer_count": 1, "score": 0, "last_activity_date": 1553366634, "creation_date": 1553276185, "question_id": 55305042, "link": "https://stackoverflow.com/questions/55305042/merge-append-the-contents-of-a-binary-file-with-a-certain-order", "title": "merge - append the contents of a binary file with a certain order", "body": "<p>in the source directory, i have some binary files named 1.bin, 2.bin, 3.bin, etc. In the dest directory, i have the same named binary files, but with different content. I need to append the contents of the dest directory to the files with the same name, in the source directory, but also be sure that the content of the destination directory will be added below the content of the source directory. This is where i have come: </p>\n\n<pre><code>#!/usr/bin/perl\n$source_dir = \"/data/source_dir\";\n$dest_dir   = \"/data/dest_dir\";\nopendir ($source, $source_dir);\n@source_files = readdir $source;\nforeach $each_file (@source_files){\n    if($each !~ /^(\\.|\\.\\.)$/) {\n        open $file_h , \"&lt; $source_dir/$each_file\";\n        @contents = &lt;$file_h&gt;;\n        open $dest_file, \"&gt;&gt;$dest_dir/$each_file\";\n        print $dest_file @contents;\n        @contents =();\n     }\n}\n</code></pre>\n\n<p>How can i be sure that 1.bin from dest directory is appended - merged under the content of the source directory?</p>\n\n<p>How then the code should look like?</p>\n"}, {"tags": ["regex", "perl", "command-line"], "answers": [{"comments": [{"owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "edited": false, "score": 0, "creation_date": 1553283612, "post_id": 55304510, "comment_id": 97341747, "body": "Any time you want to just find a pattern, use <code>&#47;pattern&#47;</code>. Use <code>s&#47;pattern&#47;string&#47;</code> only when you really want to change it."}], "tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": true, "score": 1, "last_activity_date": 1553274272, "last_edit_date": 1553274272, "creation_date": 1553274046, "answer_id": 55304510, "question_id": 55304227, "link": "https://stackoverflow.com/questions/55304227/perl-regex-command-line-how-to-get-matches-instead-replacing/55304510#55304510", "title": "perl regex command line - how to get matches instead replacing", "body": "<p>This should work:</p>\n\n<pre><code>perl -ne \"while(/(sample\\d)/g){print \\\"$1\\n\\\";}\" text.txt\n</code></pre>\n\n<p>This looks better I think:</p>\n\n<pre><code>perl -lne \"while(/(sample\\d)/g){print $1;}\" text.txt\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 1139359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469496619be64e60a0285994d484b266?s=128&d=identicon&r=PG", "display_name": "user1139359", "link": "https://stackoverflow.com/users/1139359/user1139359"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 55304510, "answer_count": 1, "score": 0, "last_activity_date": 1553292757, "creation_date": 1553272999, "last_edit_date": 1553273312, "question_id": 55304227, "link": "https://stackoverflow.com/questions/55304227/perl-regex-command-line-how-to-get-matches-instead-replacing", "title": "perl regex command line - how to get matches instead replacing", "body": "<p>I am new with perl. And I would like to get the matches, instead replacing the text.</p>\n\n<p>I there anyway to accomplish that using one line command?</p>\n\n<p>Sample text I am using:\ntext.txt</p>\n\n<pre><code>sample1 other sample2 other\n</code></pre>\n\n<p>Command I am using:</p>\n\n<pre><code>perl -0777 -pe 's/sample\\d/changed/gs' text.txt\n</code></pre>\n\n<p>I would like to have the following output (using one line command):</p>\n\n<pre><code>sample1\nsample2\n</code></pre>\n\n<p>I am using strawberry perl in Windows PowerShell.</p>\n"}, {"tags": ["perl", "subroutine"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1553258267, "post_id": 55299734, "comment_id": 97327846, "body": "<i>Always</i> <code>use strict; use warnings;</code>!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553270101, "post_id": 55299734, "comment_id": 97335299, "body": "Tip: <b>Always</b> use <code>use strict; use warnings;</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553270137, "post_id": 55299734, "comment_id": 97335320, "body": "Tip: You will likely never have a reason <code>undef @array;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553270163, "post_id": 55299734, "comment_id": 97335332, "body": "Tip: <code>push(my @temp_V,0);</code> is a weird way of writing <code>my @temp_V = 0;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553270200, "post_id": 55299734, "comment_id": 97335358, "body": "Tip: <code>for (my $pulse=0;$pulse&lt;$N_pulses;$pulse++)</code> is a complex way of writing <code>for my $pulse (0..$N_pulses-1)</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553270296, "post_id": 55299734, "comment_id": 97335414, "body": "Tip: <code>for my $pulse (0..$N_pulses-1) { ... ($pulse+1) ... }</code> can be simplified to <code>for my $pulse (1..$N_pulses) { ... $pulse ... }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 6, "last_activity_date": 1553258492, "creation_date": 1553258492, "answer_id": 55299850, "question_id": 55299734, "link": "https://stackoverflow.com/questions/55299734/return-multiple-array-from-perl-subroutine/55299850#55299850", "title": "Return multiple array from perl subroutine", "body": "<p>You can't. When you return something from a sub, Perl returns a list. There is no information about how many elements where in the array before it comes out of the sub.</p>\n\n<p>Lists are flat in Perl. They cannot be nested.</p>\n\n<pre><code>(1, 2, (3, 4), ((), 5, (6)), 7)\n</code></pre>\n\n<p>This is equivalent to:</p>\n\n<pre><code>(1, 2, 3, 4, 5, 6, 7)\n((1), (2), (3), (4), (5), (6), (7))\n</code></pre>\n\n<p>If you want to return two distinct arrays, you need to return references to them.</p>\n\n<pre><code>sub foo {\n    my @bar = qw/a b c/;\n    my @qrr = qw/1 2 3/;\n\n    return \\@bar, \\@qrr;\n}\n\nmy ($letters, $numbers) = foo();\n</code></pre>\n\n<p>You can then dereference those into array variables, or access them directly.</p>\n\n<p>See <a href=\"https://perldoc.perl.org/perlreftut.html\" rel=\"noreferrer\">perlreftut</a> and <a href=\"https://perldoc.perl.org/perlref.html\" rel=\"noreferrer\">perlref</a> for more information on references.</p>\n"}, {"comments": [{"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1617412573, "post_id": 55299851, "comment_id": 118303494, "body": "Yes, here we go :)"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 6, "last_activity_date": 1553270498, "last_edit_date": 1553270498, "creation_date": 1553258495, "answer_id": 55299851, "question_id": 55299734, "link": "https://stackoverflow.com/questions/55299734/return-multiple-array-from-perl-subroutine/55299851#55299851", "title": "Return multiple array from perl subroutine", "body": "<p>Return references to the arrays:</p>\n\n<pre><code>return \\@temp_v, \\@temp_t\n</code></pre>\n\n<p>You need to dereference them when assigning to real arrays:</p>\n\n<pre><code>my ($V_ref, $t_ref)=create_FORC($Vmin,$Vmax,$Freq,$N_pulses);\n</code></pre>\n\n<p>And then use <code>@$V_ref</code> instead of <code>@V</code> (and similarly for <code>@$t_ref</code> and <code>@t</code>).</p>\n\n<p>You can't assing to two arrays at the same time, as the list on the right hand side of the assignment gets flattened and the first array eats all the values for itself.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1553269854, "last_edit_date": 1553269854, "creation_date": 1553269494, "answer_id": 55303274, "question_id": 55299734, "link": "https://stackoverflow.com/questions/55299734/return-multiple-array-from-perl-subroutine/55303274#55303274", "title": "Return multiple array from perl subroutine", "body": "<p>Arrays can't be passed to subs, only a number of scalars.</p>\n\n<p>Arrays can't be returned by subs, only a number of scalars.</p>\n\n<p>When you do</p>\n\n<pre><code>return ( @temp_V, @temp_t );\n</code></pre>\n\n<p>you are returning the contents of both arrays, as if you had done</p>\n\n<pre><code>return ( $temp_V[0], $temp_V[1], ..., $temp_t[0], $temp_t[1], ... );\n</code></pre>\n\n<p>Perl has no idea how many items to assign to the caller's <code>@V</code> and how many to assign to the caller's <code>@t</code>, so it assigns everything to <code>@V</code>.</p>\n\n<p>The solution is to return references to the arrays (since references are scalars).</p>\n\n<pre><code>return ( \\@temp_V, \\@temp_t );\n</code></pre>\n\n<p>The caller then becomes</p>\n\n<pre><code>my ($V, $t) = create_FORC($Vmin, $Vmax, $Freq, $N_pulses);\n\nprint \"@$V\\n\\n@$t\\n\"; \n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 9104399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daabc05469bdc596944f1c1d07d636ef?s=128&d=identicon&r=PG&f=1", "display_name": "Alam ", "link": "https://stackoverflow.com/users/9104399/alam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1399, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1553270498, "creation_date": 1553258148, "question_id": 55299734, "link": "https://stackoverflow.com/questions/55299734/return-multiple-array-from-perl-subroutine", "title": "Return multiple array from perl subroutine", "body": "<p>I am giving four arguments to a perl subroutine, using them the routine creates two separate arrays <code>@temp_V</code>and <code>@temp_t</code>. When I try to return them to my main program, I don't get two separate arrays any more. Instead values in <code>@temp_t</code> append with <code>@temp_V</code>, giving me a single array. </p>\n\n<p>How to resolve this issue? Here is my code:</p>\n\n<pre><code>$Vmin=-5;\n$Vmax=5;\n$N_pulses=5;\n$Freq=25e3;\n\nmy (@V, @t)=create_FORC($Vmin,$Vmax,$Freq,$N_pulses);\n\nprint \"@V \\n\\n\\n\"; \n#print \"@t \\n\"; \n\nsub create_FORC($Vmin,$Vmax,$Freq,$N_pulses)\n{\nmy $Vmin=shift;\nmy $Vmax=shift;\nmy $Freq=shift;\nmy $N_pulses=shift;\n\nmy $rtime=1/(4*$Freq);\n#print \"$rtime \\n\";\n\nundef @temp_V;\nundef @temp_t;\n\npush(my @temp_V,0);\npush(my @temp_t,0);\n\npush(@temp_V,$Vmin);\n\n      for (my $pulse=0;$pulse&lt;$N_pulses;$pulse++)\n      {\n      $V_peak=($Vmax-$Vmin)/$N_pulses*($pulse+1)+$Vmin;\n      $del_t=($V_peak-$Vmin)*$rtime;  \n          push(@temp_V,$V_peak); \n          push(@temp_V,$Vmin);  \n          push(@temp_t,$del_t);\n      } \n push(@temp_V,0);\n\n print \"@temp_V \\n\";\n print \"@temp_t \\n\";\n\nreturn (@temp_V, @temp_t); \n\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6983, "user_id": 274350, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6680544d5ca7c1a0ea3eaba1f3c438f7?s=128&d=identicon&r=PG", "display_name": "Richard Neish", "link": "https://stackoverflow.com/users/274350/richard-neish"}, "edited": false, "score": 0, "creation_date": 1553254332, "post_id": 55298234, "comment_id": 97325701, "body": "It looks like you can chain a call to the Path::Tiny <code>.touch($seconds)</code> method to set the mtime and atime of the files, but I can&#39;t test this right now."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1553267739, "post_id": 55298234, "comment_id": 97333825, "body": "What have you tried? What problems are you having? Can I suggest you start by reading the <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> documentation?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1553275694, "post_id": 55298234, "comment_id": 97338319, "body": "<code>&quot;dir&#47;s&quot;.$_.&quot;.txt&quot;</code> is a weird way to write <code>&quot;dir&#47;s$_.txt&quot;</code>."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1553275885, "post_id": 55298234, "comment_id": 97338407, "body": "@DaveCross.. I have been trying but I dont see Time::Piece module in my RHEL Perl which is 5.010.."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1553278568, "post_id": 55298234, "comment_id": 97339611, "body": "Time::Piece was already core in Perl 5.10 (which itself is pretty ancient: 2007). Do you have both <code>perl</code> and <code>perl-core</code> packages installed?."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553278868, "post_id": 55298234, "comment_id": 97339725, "body": "@melpomeme..  perl --version is giving <code>This is perl, v5.10.1 (*) built for x86_64-linux-thread-multi</code> and <code>perl -E &#39; use Time::Piece &#39;</code> gives <code>Can&#39;t locate Time&#47;Piece.pm in @INC (@INC contains: &#47;usr&#47;local&#47;lib64&#47;perl5 &#47;usr&#47;local&#47;share&#47;perl5 &#47;usr&#47;lib64&#47;perl5&#47;vendor_perl &#47;usr&#47;share&#47;perl5&#47;vendor_perl &#47;usr&#47;lib64&#47;perl5 &#47;usr&#47;share&#47;perl5 .) at -e line 1</code> do you think it is there?.. should I do something with the INC?.."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1553278907, "post_id": 55298234, "comment_id": 97339743, "body": "Could you please answer the question I actually asked?"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1553278992, "post_id": 55298234, "comment_id": 97339784, "body": "@melpomene.. pls pardon my ignorance... I dont know how to check that perl vs perl-core"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553279095, "post_id": 55298234, "comment_id": 97339820, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/190522/discussion-between-melpomene-and-stack0114106\">continue this discussion in chat</a>."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1553291797, "post_id": 55298234, "comment_id": 97344730, "body": "It&#39;s really not the case that you ever need to use Time::Piece. But it does often make life easier. The default Perl installation on many versions of RHEL is broken (and Time::Piece is one of the bits that is missing). In order to fix it, you need to install the <code>perl-core</code> RPM. Ask your sysadmin to run <code>sudo yum install perl-core</code>."}], "answers": [{"comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553275992, "post_id": 55304783, "comment_id": 97338442, "body": "Hi zdim.. thank you..  actually I was struggling without the Time::Piece module"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553276192, "post_id": 55304783, "comment_id": 97338531, "body": "@stack0114106 Huh?  I thought that <code>Time::Piece</code> was core since, um, forever.  The doc lists year 2000.  Are you sure that your system is OK?  If you somehow legitimately don&#39;t have that, what date-time module do you have?"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553276224, "post_id": 55304783, "comment_id": 97338550, "body": "Is it possible to get the epoch range without the time piece module?.. you can add it as variant in the same answer"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553277350, "post_id": 55304783, "comment_id": 97339092, "body": "@stack0114106 Was just about to ask :).   With it you have <code>$sec_epoch = timelocal sec, min, hour, day, mon, year;</code>  Testing here, will edit"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553278389, "post_id": 55304783, "comment_id": 97339542, "body": "@stack0114106 Edited"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1553374826, "post_id": 55304783, "comment_id": 97363524, "body": "@zdim: <a href=\"https://perlhacks.com/2012/08/a-cautionary-tale/\" rel=\"nofollow noreferrer\">This explains</a> what the problem is with the Time::Piece installation on that system."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1553667215, "post_id": 55304783, "comment_id": 97464204, "body": "@DaveCross Indeed, very nicely written up (as always), years ago.  I&#39;d seen what it was from their &quot;chat&quot; but thank you for providing a solid resource. Added to my answer."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1554441690, "last_edit_date": 1554441690, "creation_date": 1553275142, "answer_id": 55304783, "question_id": 55298234, "link": "https://stackoverflow.com/questions/55298234/create-text-files-with-mtime-between-time-range/55304783#55304783", "title": "create text files with mtime between time range", "body": "<p>There is the <code>touch</code> method in <a href=\"https://metacpan.org/pod/Path::Tiny#touch\" rel=\"nofollow noreferrer\">Path::Tiny</a>, and the rest is about splitting up the desired range of dates.  Note that the script below creates files (10 by default) with very simple-minded names, so please run in a brand new directory so to not overwrite something</p>\n\n<pre><code>perl -MPath::Tiny -MTime::Piece -wE'\n    $n = shift // 10; \n    ($beg, $end) = map { \n        Time::Piece-&gt;strptime($_, \"%Y%m%d\")-&gt;epoch \n    } (20160101, 20181201); \n    $step = int ($end-$beg)/$n; \n    for (1..$n) { \n        $f = path(\"s$_.txt\"); \n        $f-&gt;spew(\"data..$_\\n\"); \n        $f-&gt;touch($beg += $s)\n' 5\n</code></pre>\n\n<p>Chaining calls to the desired <code>path(..)-&gt;spew(..)-&gt;touch(..)</code> doesn't work since <code>spew</code> returns true/false and not an object. (The <code>touch</code> does return the object and so it can have methods chained to it, but here it has to go after <code>spew</code> since <code>spew</code> changes the modification time.)</p>\n\n<p>The above creates files </p>\n\n<pre>\n-rw-rw-r--. 1 xxx 8 Jul 31  2016 s1.txt\n-rw-rw-r--. 1 xxx 8 Mar  1  2017 s2.txt\n-rw-rw-r--. 1 xxx 8 Sep 30  2017 s3.txt\n-rw-rw-r--. 1 xxx 8 May  1  2018 s4.txt\n-rw-rw-r--. 1 xxx 8 Nov 30  2018 s5.txt\n</pre>\n\n<p>You'll probably want to fiddle with the step size and first/last time stamps.</p>\n\n<hr>\n\n<p>Apparently there is a problem with <code>Time::Piece</code>, likely indicating a problem with that system<sup>&dagger;</sup> since the module has been in core since 5.9.5.  Then I'd use <code>Time::Local::timelocal</code></p>\n\n<pre><code>use Time::Local;    \nmy $seconds_epoch = timelocal $sec, $min, $hour, $mday, $mon, $year;\n</code></pre>\n\n<p>where <code>$mday</code> goes from <code>1</code> while all other start at <code>0</code>.  Note that while it is traditional to provide the year subject to <code>+1900</code> (so <code>116</code> for 2016) the normal years are accepted as well.  So</p>\n\n<pre><code>$beg = timelocal 0, 0, 0,  1,  0, 2016;\n$end = timelocal 0, 0, 0, 31, 11, 2018;\n</code></pre>\n\n<p>or, for more flexibility with dates</p>\n\n<pre><code>($beg, $end) = map { \n    ($yr, $m, $d) = unpack \"A4A2A2\"; \n    timelocal 0, 0, 0, $d, $m-1, $yr \n} (20160101, 20181231)\n</code></pre>\n\n<hr>\n\n<p><sup>&dagger;</sup>&thinsp; The problem of the missing <code>Time::Piece</code> is described in <a href=\"https://perlhacks.com/2012/08/a-cautionary-tale/\" rel=\"nofollow noreferrer\">this post in Dave Cross's blog</a>.  Also see comments under the question and a chat.</p>\n"}], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 55304783, "answer_count": 1, "score": 1, "last_activity_date": 1554441690, "creation_date": 1553252570, "last_edit_date": 1553276129, "question_id": 55298234, "link": "https://stackoverflow.com/questions/55298234/create-text-files-with-mtime-between-time-range", "title": "create text files with mtime between time range", "body": "<p>I found the below one-liner, that creates 50 text files</p>\n\n<pre><code>perl -MPath::Tiny -wE'\n    path(\"dir/s\".$_.\".txt\")-&gt;spew(\"some data...$_\\n\") for 1..50\n</code></pre>\n\n<p>but it creates all the files with mtime as current time.</p>\n\n<p>Is it possible to have the mtime between a date range?. like Jan 2016 to Dec 2018 for the text files?.</p>\n\n<p>I understand that I have to use Time::Piece module, but I don't see Time::Piece module in my RHEL Perl which is 5.010.</p>\n"}, {"tags": ["perl", "hash"], "answers": [{"tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": true, "score": 1, "last_activity_date": 1553250936, "creation_date": 1553250936, "answer_id": 55297753, "question_id": 55297607, "link": "https://stackoverflow.com/questions/55297607/perl-save-hash-references-in-a-hash-for-imageexiftool/55297753#55297753", "title": "Perl: save hash-references in a hash for Image::ExifTool", "body": "<p>To add a new key-value to a hash you need:</p>\n\n<pre><code>$file_catalog{$file_string} = $info;\n</code></pre>\n"}], "owner": {"reputation": 671, "user_id": 7773582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTDmb.jpg?s=128&g=1", "display_name": "Jochen Gebsattel", "link": "https://stackoverflow.com/users/7773582/jochen-gebsattel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 55297753, "answer_count": 1, "score": 0, "last_activity_date": 1553250948, "creation_date": 1553250536, "last_edit_date": 1553250948, "question_id": 55297607, "link": "https://stackoverflow.com/questions/55297607/perl-save-hash-references-in-a-hash-for-imageexiftool", "title": "Perl: save hash-references in a hash for Image::ExifTool", "body": "<p>Trying for two days to save all the readable (non-binary) output of ExifTool into a hash with the path to the files as key:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Image::ExifTool;\nuse Data::Types qw(:all);\nuse v5.28;\n\nmy @directories = (\"/some/filepath/to-pictures\");\nmy @suffixes = qw(jpg jpeg gif png raw svg tif tiff psd orf nef eps cr2 arw);\n\nmy %file_catalog = ();\nwhile (my $folder = shift @directories) {\n\n    opendir(DirHandle, \"$folder\") or die \"Cannot open $folder\\n\";\n    my @files = readdir(DirHandle);\n    closedir(DirHandle);\n\n    foreach my $file (@files) {\n        my $file_string = \"$folder/$file\";\n        if (-f $file_string) {\n            my $sep_pos = rindex($file, \".\");\n            my $end_chars = -($sep_pos - (length $file) + 1);\n            my $suffix = substr $file, $sep_pos + 1, $end_chars;\n            if (grep ( lc $suffix, @suffixes)) {\n                my $exif_tool = new Image::ExifTool;\n                my $info = $exif_tool-&gt;ImageInfo($file_string);\n                say \"Datei: $file_string\";\n                %file_catalog = ($file_string =&gt; $info);\n                foreach (keys %{$info}) {\n                    say \"Key: $_ =&gt; Value: $$info{ $_ }\";\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Also not working: <code>%file_catalog = ($file_string =&gt; %{$info});</code>.</p>\n\n<p>But I either I don't get more than one picture's information in my <code>%file_catalog</code> - can you explain this to me?</p>\n\n<p>Or I get a lot of problems with dereferencing (<code>\"Can't use string as a HASH ref while \"strict refs\" in use\"</code>) or storing (<code>\"Odd number of elements in hash assignment\"</code>) as you can see in my <a href=\"https://github.com/Mesqualito/IPTC-Foto-Database\" rel=\"nofollow noreferrer\">repo</a>'s commit history.</p>\n\n<p>Of course, not all images have the same exif-informations, every image provides different key->values.</p>\n\n<p>For test output:</p>\n\n<pre><code>my $hash_size = keys %file_catalog;\nprint \"\\n---------------------------\\n\";\nprint \"In 'file_catalog'-hash recorded image-path (key)-/ exif-data (value)-hashes: \", $hash_size;\nprint \"\\n---------------------------\\n\";\n\nmy ($i, $j) = 0;\nforeach my $key (sort keys %file_catalog) {\n    $i++;\n    printf \"%s. key: $key\\n\", uc chr($i + ord('A') - 1 );\n    foreach my $inner_key (keys %{$file_catalog{ $key }}) {\n        $j++;\n        say \"$j. inner key: $inner_key: $file_catalog{$key}{$inner_key}\";\n    }\n}\n</code></pre>\n\n<p>Maybe somebody can help me understanding. Also there might be a better construct than my neophyte code.</p>\n"}, {"tags": ["file", "perl"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553262817, "post_id": 55297302, "comment_id": 97330736, "body": "What&#39;s the issue? Given the code you already have, this looks like something you should be able to do. One way would be to use an hash of hashes where years are the first keys and months the second ones (so you&#39;ll write something like <code>$rept{$year}-&gt;{$month} += $size</code>). It&#39;s a little bit more verbose, but definitely reasonable."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553276580, "post_id": 55297302, "comment_id": 97338728, "body": "@Dada.. yes, you are right.. but now I realize that I would have missed ikegami&#39;s hack to it.."}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553269332, "post_id": 55302337, "comment_id": 97334850, "body": "@stack0114106: <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1553272353, "post_id": 55302337, "comment_id": 97336552, "body": "This can be solved using just two small changes. See my answer."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1553266461, "creation_date": 1553266461, "answer_id": 55302337, "question_id": 55297302, "link": "https://stackoverflow.com/questions/55297302/sum-file-sizes-by-year-month-and-include-year-wise-totals-when-printing/55302337#55302337", "title": "Sum file sizes by year-month and include year-wise totals when printing", "body": "<p>Given that you've built the <code>%rept</code> hash in the first part of your code, the display section should be something like this:</p>\n\n<pre><code># Keep track of current year and current year total\nmy ($year, $year_total);\n\nfor (sort keys %rept) {\n  # Get the year from the current record\n  my $this_year = substr($_, 0, 4);\n  # If the year has changed, then print a total line\n  # and reset the year total.\n  if (defined $year and $year ne $this_year) {\n    say \"$year   =&gt; $year_total bytes\";\n    $year_total = 0;\n  }\n  # Add to the year total and store the current year\n  $year_total += $rept{$_};\n  $year = $this_year;\n\n  say \"$_ =&gt; $rept{$_} bytes\";\n}\n\n# Final year total line\nsay \"$year   =&gt; $year_total bytes\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1553272306, "creation_date": 1553272306, "answer_id": 55304027, "question_id": 55297302, "link": "https://stackoverflow.com/questions/55297302/sum-file-sizes-by-year-month-and-include-year-wise-totals-when-printing/55304027#55304027", "title": "Sum file sizes by year-month and include year-wise totals when printing", "body": "<p>Two small changes will do the trick.</p>\n\n<pre><code>perl -MFile::Find -E' use POSIX;\n    $dir = shift // \".\"; \n    find( sub { \n        return if /^\\.\\.?\\z/;                             # Fixed $ -&gt; \\z\n        my ($mtime, $size) = (stat)[9,7];\n        my $yearmon = strftime \"%Y%m\",localtime($mtime);\n        $rept{$yearmon} += $size;\n        $rept{substr($yearmon, 0, 4)} += $size;           # &lt;---\n    }, $dir ); \n    say \"$_ =&gt; $rept{$_} bytes\"\n        for sort { \"${a}99\" cmp \"${b}99\" } keys %rept;    # &lt;---\n'\n</code></pre>\n"}], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "accepted_answer_id": 55304027, "answer_count": 2, "score": 1, "last_activity_date": 1561655301, "creation_date": 1553249487, "last_edit_date": 1561655301, "question_id": 55297302, "link": "https://stackoverflow.com/questions/55297302/sum-file-sizes-by-year-month-and-include-year-wise-totals-when-printing", "title": "Sum file sizes by year-month and include year-wise totals when printing", "body": "<p>I'm following @zdim's recursive solution in this question\n<a href=\"https://stackoverflow.com/questions/55283652/fastest-way-to-sum-the-file-sizes-by-owner-in-a-directory/\">fastest way to sum the file sizes by owner in a directory</a> to get my file sizes summed up by year-month</p>\n\n<pre><code>perl -MFile::Find -E' use POSIX;\n    $dir = shift // \".\"; \n    find( sub { \n        return if /^\\.\\.?$/; \n        my ($mtime, $size) = (stat)[9,7];\n        my $yearmon = strftime \"%Y%m\",localtime($mtime);\n        $rept{$yearmon} += $size ;\n    }, $dir ); \n    say (\"$_ =&gt; $rept{$_} bytes\") for sort keys %rept\n'\n</code></pre>\n\n<p>It gives results like this.</p>\n\n<pre><code>201701 =&gt; 7759 bytes\n201702 =&gt; 530246 bytes\n201703 =&gt; 3573094 bytes\n201704 =&gt; 425827 bytes\n201705 =&gt; 3637771 bytes\n201706 =&gt; 2325391018 bytes\n201707 =&gt; 127005 bytes\n201708 =&gt; 2303 bytes\n201709 =&gt; 231465431 bytes\n201710 =&gt; 273667 bytes\n201711 =&gt; 6397659 bytes\n201712 =&gt; 333587 bytes\n201802 =&gt; 874676 bytes\n201803 =&gt; 147825681 bytes\n201804 =&gt; 84971454 bytes\n201805 =&gt; 3483547 bytes\n201806 =&gt; 8004797 bytes\n201807 =&gt; 184676 bytes\n201808 =&gt; 1967947 bytes\n201809 =&gt; 1592310 bytes\n201810 =&gt; 24176 bytes\n201811 =&gt; 883378 bytes\n201812 =&gt; 6661592 bytes\n201901 =&gt; 33979401 bytes\n</code></pre>\n\n<p>But I need to include year-wise totals after printing all available months in a given year, like below</p>\n\n<pre><code>201710 =&gt; 1111 bytes\n201711 =&gt; 2222 bytes\n201712 =&gt; 3333 bytes\n2017  =&gt; 6666 bytes ( summed up )\n201803 =&gt; 11111 bytes\n201809 =&gt; 22222 bytes\n2018  =&gt; 33333 bytes ( summed up )\n</code></pre>\n\n<p>How do I get that?. There might be blanks in a year-month and it need not end with month 12 for every year.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1553246967, "post_id": 55296480, "comment_id": 97321371, "body": "What do you mean by &quot;official site&quot;? There is a source distribution at <a href=\"https://cpan.metacpan.org/authors/id/L/LB/LBROCARD/perl-5.12.4.tar.bz2\" rel=\"nofollow noreferrer\">metacpan</a> but I presume you want a binary build?"}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 1, "creation_date": 1553247117, "post_id": 55296480, "comment_id": 97321446, "body": "Also, is there a specific reason you need a version of perl that is eight years old? Perl tends to be very good at backwards compatibility."}, {"owner": {"reputation": 9, "user_id": 8520896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a61226ff2a6d758d3815d8aabea652c?s=128&d=identicon&r=PG&f=1", "display_name": "sarah18", "link": "https://stackoverflow.com/users/8520896/sarah18"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1553269047, "post_id": 55296480, "comment_id": 97334667, "body": "Is there any way to use the package perl-5.12.4.tar.bz2 to install activeperl in windows system ?"}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1553269415, "post_id": 55296480, "comment_id": 97334904, "body": "Not without a lot of pain. It looks like ActiveState (the maintainers of ActivePerl) have stopped supporting that old version. <a href=\"http://strawberryperl.com/releases.html\" rel=\"nofollow noreferrer\">Strawberry Perl</a> is a community-supported Perl build that still has older versions available, though not exactly 5.12.4. I suggest using 5.12.3 if you absolutely <i>must</i> be in the 5.12 branch, or just using 5.14.x or an even more modern version."}], "owner": {"reputation": 9, "user_id": 8520896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a61226ff2a6d758d3815d8aabea652c?s=128&d=identicon&r=PG&f=1", "display_name": "sarah18", "link": "https://stackoverflow.com/users/8520896/sarah18"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "closed_date": 1553246875, "answer_count": 0, "score": 0, "last_activity_date": 1553246918, "creation_date": 1553246720, "question_id": 55296480, "link": "https://stackoverflow.com/questions/55296480/get-perl-5-12-4-version", "closed_reason": "Duplicate", "title": "Get perl 5.12.4 VERSION", "body": "<p>I need to get Perl 5.12.4 version.</p>\n\n<p>I searched in the official site but I didn't find it.</p>\n\n<p>Does someone have any idea how can I get it ?</p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1553212667, "post_id": 55290765, "comment_id": 97310998, "body": "Please <i>not not not</i> with <code>XML::Simple</code>.  While that module certainly had its place it&#39;s been outdated for a long time, and its own author has <a href=\"https://metacpan.org/pod/XML::Simple#STATUS-OF-THIS-MODULE\" rel=\"nofollow noreferrer\">&quot;strongly discouraged&quot;</a> its use for years, and has written a <a href=\"https://grantm.github.io/perl-libxml-by-example/\" rel=\"nofollow noreferrer\">tutorial</a> for another. Go for either <a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow noreferrer\">XML::LibXML</a> or <a href=\"https://metacpan.org/pod/XML::Twig\" rel=\"nofollow noreferrer\">XML::Twig</a>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1553269725, "last_edit_date": 1553269725, "creation_date": 1553214558, "answer_id": 55291168, "question_id": 55290765, "link": "https://stackoverflow.com/questions/55290765/perl-xml-obtain-child-details-of-same-parent/55291168#55291168", "title": "Perl XML obtain child details of same parent", "body": "<p>There is no easy way with XML::Simple because <a href=\"https://stackoverflow.com/a/33273488/589924\">it's the hardest XML parser to use</a>. It's own documentation warns against using it. (\"The use of this module in new code is <strong>strongly discouraged</strong>.\")</p>\n\n<hr>\n\n<p>What you have there isn't valid XML, so we first have to make it valid XML</p>\n\n<pre><code>use XML::LibXML qw( );\n\nmy $parser = XML::LibXML-&gt;new();\nmy $doc = $parser-&gt;parse_string(\"&lt;movies&gt;$not_quite_xml&lt;/movies&gt;\");\n\nmy ($movie_node) = $doc-&gt;findnodes('/movies/movie[title/text()=\"Titanic\"]')\n   or die(\"Titanic not found\\n\");\n\nmy $year = $movie_node-&gt;findvalue('year/text()');\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "is_accepted": false, "score": 1, "last_activity_date": 1553216698, "creation_date": 1553216698, "answer_id": 55291439, "question_id": 55290765, "link": "https://stackoverflow.com/questions/55290765/perl-xml-obtain-child-details-of-same-parent/55291439#55291439", "title": "Perl XML obtain child details of same parent", "body": "<p>You can also call a command line tool like <code>xmlstarlet</code> from Perl to quickly extract just the information you need.</p>\n\n<p>For instance, if your fragment of an XML document was stored at <code>/tmp/foo.xml</code>, then the following shell script will convert it into a tabular form which is easier to process in Perl by reading a line at a time.</p>\n\n<pre><code>{ echo '&lt;movies&gt;' ; cat /tmp/foo.xml ; echo '&lt;/movies&gt;'; } \\\n    | xmlstarlet sel -T -t -m '//movie' -v \"concat(title, '|', year)\" -n\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>Titanic|1997\nMoneyball|2011\nFight Club|1999\n</code></pre>\n\n<p>This particular way  of converting the xml document to a more convenient form is not robust against newlines or <code>|</code>s in movie titles and requires an external tool, but it is easy.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1556431734, "last_edit_date": 1556431734, "creation_date": 1553240165, "answer_id": 55294870, "question_id": 55290765, "link": "https://stackoverflow.com/questions/55290765/perl-xml-obtain-child-details-of-same-parent/55294870#55294870", "title": "Perl XML obtain child details of same parent", "body": "<p>I hope that it has been conveyed that <code>XML::Simple</code> should not be used, being superseded by far better modules a long time ago and <a href=\"https://metacpan.org/pod/XML::Simple#STATUS-OF-THIS-MODULE\" rel=\"nofollow noreferrer\">\"strongly discouraged\"</a> against by its own author, also years ago. </p>\n\n<p>This example shows a way to use the parent's node in order to query siblings, as specifically asked for. (I pad your sample with the <code>&lt;document&gt;</code> root node so to have a well-formed XML.) The answer by ikegami shows how you can more directly do what you seem to need.</p>\n\n<p>If you have a reason to scan through the <code>&lt;title&gt;</code> nodes (perhaps looking for a variety of titles), then their sibling <code>&lt;year&gt;</code> nodes can be found by</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';    \n\nuse XML::LibXML;    \n\nmy $file = shift || die \"Usage: $0 filename\\n\";\n\nmy $doc = XML::LibXML-&gt;load_xml(location =&gt; $file, no_blanks =&gt; 1); \n\nmy $xpath = '/document/movie/title';\n\nforeach my $node ($doc-&gt;findnodes($xpath)) {\n    if ($node-&gt;to_literal =~ /(Titanic)/) {\n        say \"Title: $1\";\n        foreach my $yr ($node-&gt;parentNode-&gt;findnodes('./year')) {\n            say \"\\tyear: \", $yr-&gt;to_literal;\n        }   \n    }   \n}\n</code></pre>\n\n<p>If there is always a single <code>&lt;year&gt;</code> node under one <code>&lt;movie&gt;</code>  node then this can be simplified by the shortcut <code>findvalue</code>, replacing the loop over <code>$node-&gt;parentNode-&gt;findnodes</code>, for </p>\n\n<pre><code>foreach my $node ($doc-&gt;findnodes($xpath)) {\n    if ($node-&gt;to_literal =~ /(Titanic)/) {\n        say \"Title: $1\";\n        say \"\\tyear: \", $node-&gt;parentNode-&gt;findvalue('./year');\n    }   \n}\n</code></pre>\n\n<p>Here we get the text directly and so there is no need for <code>-&gt;to_literal</code> either.</p>\n\n<p>There are many more methods  in <a href=\"https://metacpan.org/pod/release/SHLOMIF/XML-LibXML-2.0128/lib/XML/LibXML/Node.pod\" rel=\"nofollow noreferrer\">XML::LibXML::Node</a>, the base class for nodes used to derive other particular classes. One of interest here may be <code>nextSibling</code>, as a way to peruse other information about the title within one <code>&lt;movie&gt;</code>. </p>\n\n<p>Note that this complete and feature-full library provides many more tools for working with XML.  For one, adding details to your source file, like attributes, would allow use of the library's other strengths. </p>\n\n<p>The documentation is spread over a number of pages. See <a href=\"https://stackoverflow.com/a/41051651/4653379\">this post</a> for a summary of links to relevant docs. There is also a <a href=\"https://grantm.github.io/perl-libxml-by-example/\" rel=\"nofollow noreferrer\">tutorial for XML::LibXML</a>, by the author of <code>XML::Simple</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 424, "user_id": 2691732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c5b2d9aae7d942f7061319189d67e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sachin Dangol", "link": "https://stackoverflow.com/users/2691732/sachin-dangol"}, "edited": false, "score": 0, "creation_date": 1554117617, "post_id": 55447466, "comment_id": 97621327, "body": "Mojo::DOM is indeed such a fun way to deal with html or xml. Love it."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 2, "last_activity_date": 1554086512, "creation_date": 1554086512, "answer_id": 55447466, "question_id": 55290765, "link": "https://stackoverflow.com/questions/55290765/perl-xml-obtain-child-details-of-same-parent/55447466#55447466", "title": "Perl XML obtain child details of same parent", "body": "<p>Yet another way to do it, with <a href=\"https://mojolicious.org/perldoc/Mojo/DOM\" rel=\"nofollow noreferrer\">Mojo::DOM</a> this time. There's nothing to recommend this over other solutions (besides the XML::Simple one).</p>\n\n<p>This adds a root element then uses a CSS selector to grab the titles:</p>\n\n<pre><code>use utf8;\nuse strict;\nuse warnings;\n\nmy $xml = &lt;&lt;'HERE';\n&lt;movies&gt;\n&lt;movie&gt;\n    &lt;title&gt;Titanic&lt;/title&gt;\n    &lt;year&gt;1997&lt;/year&gt;\n    &lt;genre&gt;Drama&lt;/genre&gt;\n&lt;/movie&gt;\n&lt;movie&gt;\n    &lt;title&gt;Moneyball&lt;/title&gt;\n    &lt;year&gt;2011&lt;/year&gt;\n    &lt;genre&gt;Sport/Drama&lt;/genre&gt;\n&lt;/movie&gt;\n&lt;movie&gt;\n    &lt;title&gt;Fight Club&lt;/title&gt;\n    &lt;year&gt;1999&lt;/year&gt;\n    &lt;genre&gt;Drama/Action&lt;/genre&gt;\n&lt;/movie&gt;\n&lt;/movies&gt;\nHERE\n\nuse Mojo::DOM;\n\nmy @movies = Mojo::DOM\n    -&gt;new( $xml )\n    -&gt;find( 'movies title' )\n    -&gt;map( 'text' )\n    -&gt;each;\n\nsay join \"\\n\", @movies;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11240291, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-096dyXJ6b-w/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pwNlTDvwbCAP-rOsDHpdO-I4ciZg/mo/photo.jpg?sz=128", "display_name": "samuel testar", "link": "https://stackoverflow.com/users/11240291/samuel-testar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1556431734, "creation_date": 1553211238, "question_id": 55290765, "link": "https://stackoverflow.com/questions/55290765/perl-xml-obtain-child-details-of-same-parent", "title": "Perl XML obtain child details of same parent", "body": "<p>I have the following XML and I'm hoping to obtain the child element from the same parent if a regex matches another child element. The problem is, the XML has duplicate naming tags all over the place, so it's hard to simply do Movie->Year because there are many movie elements.</p>\n\n<p>e.g.</p>\n\n<p>Data:</p>\n\n<pre><code>&lt;movie&gt;\n    &lt;title&gt;Titanic&lt;/title&gt;\n    &lt;year&gt;1997&lt;/year&gt;\n    &lt;genre&gt;Drama&lt;/genre&gt;\n&lt;/movie&gt;\n&lt;movie&gt;\n    &lt;title&gt;Moneyball&lt;/title&gt;\n    &lt;year&gt;2011&lt;/year&gt;\n    &lt;genre&gt;Sport/Drama&lt;/genre&gt;\n&lt;/movie&gt;\n&lt;movie&gt;\n    &lt;title&gt;Fight Club&lt;/title&gt;\n    &lt;year&gt;1999&lt;/year&gt;\n    &lt;genre&gt;Drama/Action&lt;/genre&gt;\n&lt;/movie&gt;\n</code></pre>\n\n<p>Perl</p>\n\n<pre><code> my $simple = XML::Simple-&gt;new( );\n my $tree = $simple-&gt;XMLin($_);\n my $movie = $tree-&gt;{movie}{title};\n\nif($movie =~ /Titanic/)\n{\n    # $movie -&gt; year ???\n    # desired output = 1997\n}\n</code></pre>\n\n<p>What is the easiest way to do this with XML::Simple ?</p>\n"}, {"tags": ["regex", "string", "perl"], "comments": [{"owner": {"reputation": 3230, "user_id": 6997335, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/0c1af.jpg?s=128&g=1", "display_name": "Damo", "link": "https://stackoverflow.com/users/6997335/damo"}, "edited": false, "score": 0, "creation_date": 1553208055, "post_id": 55290194, "comment_id": 97309826, "body": "Please post what you have tried so that other users can better help you with your solution."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1553208687, "post_id": 55290194, "comment_id": 97310022, "body": "I&#39;ve edited a little, to break up that block of text for readability.  However, more importantly: (1) Please show the code that you have in mind but that isn&#39;t quite working. It always helps (2) Do you mean the longest sequence that repeats -- so, not <code>no</code> and of course not <code>in</code>? I suggest to offer well chosen sample input with expected results.  (And did I mention code, your code?)"}, {"owner": {"reputation": 4244, "user_id": 3348112, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ab4cd9458f5debd780353a5554b718d8?s=128&d=identicon&r=PG&f=1", "display_name": "CAustin", "link": "https://stackoverflow.com/users/3348112/caustin"}, "edited": false, "score": 0, "creation_date": 1553209254, "post_id": 55290194, "comment_id": 97310199, "body": "In this example, why wouldn&#39;t &quot;no&quot; also be a match?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1553211339, "post_id": 55290194, "comment_id": 97310738, "body": "Or &quot;no &quot; which is also 3 chars long"}, {"owner": {"reputation": 43, "user_id": 11240107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace1f82f5e719a0934f4581aae826ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Nobunaga", "link": "https://stackoverflow.com/users/11240107/nobunaga"}, "edited": false, "score": 0, "creation_date": 1553265198, "post_id": 55290194, "comment_id": 97332288, "body": "To begin, thank you for your advices."}, {"owner": {"reputation": 43, "user_id": 11240107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace1f82f5e719a0934f4581aae826ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Nobunaga", "link": "https://stackoverflow.com/users/11240107/nobunaga"}, "edited": false, "score": 0, "creation_date": 1553265586, "post_id": 55290194, "comment_id": 97332558, "body": "Then I would say that I need a trigam at least but the longest sequence that repeats would be better."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1553242531, "post_id": 55291013, "comment_id": 97319030, "body": "But this matches specifically for length 3 --- how do you know the length of the maximal substring that repeats?  That&#39;s the problem, that we don&#39;t know that."}, {"owner": {"reputation": 43, "user_id": 11240107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace1f82f5e719a0934f4581aae826ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Nobunaga", "link": "https://stackoverflow.com/users/11240107/nobunaga"}, "edited": false, "score": 0, "creation_date": 1553266682, "post_id": 55291013, "comment_id": 97333232, "body": "Thank you very mutch @Jose Fernando Lopez Fernandez, it works very well."}, {"owner": {"reputation": 43, "user_id": 11240107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace1f82f5e719a0934f4581aae826ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Nobunaga", "link": "https://stackoverflow.com/users/11240107/nobunaga"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1553266878, "post_id": 55291013, "comment_id": 97333352, "body": "@zdim Indeed it matches only for length 3, but if you replace <code>{3}</code> by <code>{3, 6}</code> for example, you don&#39;t get the longest sequence but at least you get sequences between length 3 and length 6 so you can put the number of your choice."}, {"owner": {"reputation": 43, "user_id": 11240107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace1f82f5e719a0934f4581aae826ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Nobunaga", "link": "https://stackoverflow.com/users/11240107/nobunaga"}, "edited": false, "score": 0, "creation_date": 1553275460, "post_id": 55291013, "comment_id": 97338205, "body": "Finally, it would be better if it could match all the sequences of length 3. For example, in this sentence: <code>loud and proud and etch a sketch</code>, it would be matching <code>oud</code> and <code>etc</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 43, "user_id": 11240107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace1f82f5e719a0934f4581aae826ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Nobunaga", "link": "https://stackoverflow.com/users/11240107/nobunaga"}, "edited": false, "score": 0, "creation_date": 1553279416, "post_id": 55291013, "comment_id": 97339958, "body": "@Nobunaga That (<code>{3,6}</code>) won&#39;t work -- try it.  But you <i>can</i> scan the string repeatedly, changing that number each time. If this is normal text the number won&#39;t go too far (but once you stop you <i>may</i> miss some).  This as it stands will always get only the first such thing in the string.  Note that in your nice example sentence above you actually have <code>etch</code> (not just <code>etc</code>)  :)"}], "tags": [], "owner": {"reputation": 1053, "user_id": 7885081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CZvVb.png?s=128&g=1", "display_name": "Jose Fernando Lopez Fernandez", "link": "https://stackoverflow.com/users/7885081/jose-fernando-lopez-fernandez"}, "is_accepted": false, "score": 0, "last_activity_date": 1553213441, "creation_date": 1553213441, "answer_id": 55291013, "question_id": 55290194, "link": "https://stackoverflow.com/questions/55290194/perl-find-same-sequence-of-characters-in-strings/55291013#55291013", "title": "Perl - Find same sequence of characters in strings", "body": "<p>This is a simple proof of concept that matches the <code>ain</code> of \"pain\" and then looks for that same match later on in the string, which it then finds in \"gain\". I'm using the \"match named subpattern 'Match', which is how the regex matches ain (or no).</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $string = \"no pain no gain\";\n\nif ($string =~ m/(?&lt;Match&gt;[a-zA-Z]{3}).*\\k&lt;Match&gt;/g) {\n    print \"Match: $+{Match}\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Match: ain\n</code></pre>\n\n<p>Note that if you change the length specifier to 2, the match becomes \"no\", rather than \"ain\".</p>\n\n<p>Implementing a more robust regex for whatever your actual needs are and just iterate over every line you have and test for a match.</p>\n\n<p>By the way, <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101.com</a> is an amazing resource for learning and practicing regular expressions. I recommend it 10000%.</p>\n"}], "owner": {"reputation": 43, "user_id": 11240107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace1f82f5e719a0934f4581aae826ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Nobunaga", "link": "https://stackoverflow.com/users/11240107/nobunaga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553284408, "creation_date": 1553207398, "last_edit_date": 1553265893, "question_id": 55290194, "link": "https://stackoverflow.com/questions/55290194/perl-find-same-sequence-of-characters-in-strings", "title": "Perl - Find same sequence of characters in strings", "body": "<p>In fact, I have a text file where sentences are written on each line  and I have to find the same sequences of characters for each sentence of each line. For instance, one of the sentences is</p>\n\n<pre>\nno pain no gain\n</pre>\n\n<p>and I want to be able to determine that the sequence of shared characters in this string is <code>ain</code>.</p>\n\n<p>I tried with regular expressions (found on stackoverflow by the way) but it was to find sequences of same consecutive characters, and it's not what I'm looking for. So as a beginner in perl, I don't know how to implement that.\nThank you by advance for your time and attention.</p>\n\n<p>edit: here is what I've tried but not what I want:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse utf8;\n\nopen $file, \"&lt;:encoding(utf8)\", \"text.txt\";\n\nwhile($ligne=&lt;$file&gt;)\n{   \n    while($ligne =~ /(.)\\1+/g)\n    {\n        $gram = $1;\n        print \"$ligne\\n\";\n        print \"$gram\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": ["regex", "perl", "grep"], "answers": [{"comments": [{"owner": {"reputation": 381, "user_id": 3521305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2fb5b12ebaf83e8c25aa14b15adb194?s=128&d=identicon&r=PG&f=1", "display_name": "user3521305", "link": "https://stackoverflow.com/users/3521305/user3521305"}, "edited": false, "score": 0, "creation_date": 1553206429, "post_id": 55289803, "comment_id": 97309267, "body": "Thank you for the quick response...I am testing it now..I noticed the missing closing } but looks like you fixed it.  Thank you for the explanation, very helpful."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 381, "user_id": 3521305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2fb5b12ebaf83e8c25aa14b15adb194?s=128&d=identicon&r=PG&f=1", "display_name": "user3521305", "link": "https://stackoverflow.com/users/3521305/user3521305"}, "edited": false, "score": 0, "creation_date": 1553206571, "post_id": 55289803, "comment_id": 97309311, "body": "@user3521305 Ah, yes, there was a typo (or a couple?) in what I initially posted -- have fixed them, and edited more.  Let me know if things are unclear."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553206667, "post_id": 55289803, "comment_id": 97309342, "body": "<code>\\z</code> matches the end of the string. <code>$</code> matches more than the end of the string."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553214704, "post_id": 55289803, "comment_id": 97311441, "body": "hum? You&#39;re still using <code>$</code>, and you still claim it matches the end of the string. Even without <code>&#47;m</code>, <code>$</code> doesn&#39;t just match the end of the string.   <code>$</code> is equivalent to <code>(?=\\n\\z)|\\z</code> without <code>&#47;m</code>, and it&#39;s it&#39;s equivalent to <code>(?=\\n)|\\z</code>) with <code>&#47;m</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1553232976, "post_id": 55289803, "comment_id": 97315539, "body": "@ikegami OK, you mean that it matches <i>before</i> the newline if there is one at the end (like <code>\\Z</code>) so not at the end. Thank you again. (It&#39;s interesting that this is <i>never</i> distinguished, except in docs.)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1554018922, "last_edit_date": 1554018922, "creation_date": 1553205119, "answer_id": 55289803, "question_id": 55289754, "link": "https://stackoverflow.com/questions/55289754/perl-grep-command-to-search-in-array/55289803#55289803", "title": "Perl Grep command to search in array", "body": "<p>Regex allows you to encode requirements into a \"pattern\" with a lot more precision:</p>\n\n<pre><code>my @filtered = grep { m{^/tmp/[0-9]+\\.hash$} } @all;\n</code></pre>\n\n<p>I use <code>{}</code> for delimiters since with the usual <code>//</code> ones every <code>/</code> in the pattern must be escaped. Then <code>m</code> is required in front (unlike with <code>//</code> delimiters where it may be omitted). </p>\n\n<p>The anchor <code>^</code> matches the beginning of the string (and at yet other positions if the <code>/m</code> \"modifier\" is in effect)<sup>&dagger;</sup>.  The <code>/tmp</code> seems to be the beginning of a path, but if there were (for example) leading spaces before it then the above wouldn't match (unless you change it to <code>^\\s*/tmp</code> so to allow for optional spaces). Consider your data carefully.</p>\n\n<p>The <code>$</code> matches the end of the string, or before the newline at the end if there is one (<code>/m</code> modifier changes this)<sup>&dagger;</sup>. To also match strings with more characters after <code>hash</code> remove the <code>$</code>.</p>\n\n<p>The pattern itself sets down what you say in the problem description: there must be an integer, which varies, and the rest is fixed.</p>\n\n<p>Perl's own (excellent) documentation comes with the tutorial <a href=\"https://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a>.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup>&thinsp; With the modifier, <code>$str =~ /.../m</code>, the string is treated as a multi-line string so that if there are linefeeds in it then <code>^</code> and <code>$</code> in that regex match the beginning and end of each line as well.</p>\n\n<p>The anchor to always match only the end of the string is <code>\\z</code> (also see <code>\\Z</code> which matches like <code>$</code> but is insensitive to <code>/m</code>).  See <a href=\"https://perldoc.perl.org/perlre.html#Assertions\" rel=\"nofollow noreferrer\">Assertions in perlre</a>, and see answers on <a href=\"https://stackoverflow.com/q/32526929/4653379\">this page</a>.</p>\n"}], "owner": {"reputation": 381, "user_id": 3521305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2fb5b12ebaf83e8c25aa14b15adb194?s=128&d=identicon&r=PG&f=1", "display_name": "user3521305", "link": "https://stackoverflow.com/users/3521305/user3521305"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554018922, "creation_date": 1553204882, "last_edit_date": 1553205942, "question_id": 55289754, "link": "https://stackoverflow.com/questions/55289754/perl-grep-command-to-search-in-array", "title": "Perl Grep command to search in array", "body": "<p>I am using Perl and grep command to look for pattern in an array output.\nI am interested in searching for the following text in an array:</p>\n\n<pre>\n/tmp/12345.hash\n</pre>\n\n<p>The <code>12345</code> could be any sequence of numbers like <code>234</code> or <code>567889</code> but the <code>/tmp/</code> and the <code>.hash</code> will be consistent.  I am not great with regex therefore not sure how to build the proper regex statement.</p>\n\n<pre><code>@line = grep /hash/, @exp;\n</code></pre>\n\n<p>My original search was to look just the word hash but that matched on other lines and i ended up with the wrong result.</p>\n"}, {"tags": ["perl", "utf-8", "hex"], "answers": [{"comments": [{"owner": {"reputation": 5841, "user_id": 2426316, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fca24c9457510c17786a9ab424553963?s=128&d=identicon&r=PG", "display_name": "user2426316", "link": "https://stackoverflow.com/users/2426316/user2426316"}, "edited": false, "score": 0, "creation_date": 1553200461, "post_id": 55288078, "comment_id": 97307017, "body": "Thanks for the (quickest) answer! Works perfectly! For anyone reading this, I also added <code>binmode STDOUT, &quot;:utf8&quot;;</code>. I had some &quot;wide&quot; characters"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5841, "user_id": 2426316, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fca24c9457510c17786a9ab424553963?s=128&d=identicon&r=PG", "display_name": "user2426316", "link": "https://stackoverflow.com/users/2426316/user2426316"}, "edited": false, "score": 0, "creation_date": 1553203127, "post_id": 55288078, "comment_id": 97308125, "body": "@user2426316, You should NEVER use <code>:utf8</code>. <code>binmode STDOUT, &quot;:utf8&quot;;</code> should be <code>binmode STDOUT, &quot;:encoding(UTF-8)&quot;;</code>, and you should also be doing the same for STDIN and STDERR. <code>use open &#39;:std&#39;, &#39;:encoding(UTF-8)&#39;;</code> does all of that."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 2, "last_activity_date": 1553196890, "creation_date": 1553196890, "answer_id": 55288078, "question_id": 55287855, "link": "https://stackoverflow.com/questions/55287855/how-do-print-a-sequence-of-characters-hex-as-utf8-characters-in-perl/55288078#55288078", "title": "How do print a sequence of characters (hex) as UTF8 characters in Perl?", "body": "<p>With <a href=\"http://metacpan.org/pod/perlfunc#pack\" rel=\"nofollow noreferrer\"><code>pack</code></a></p>\n\n<pre><code>print pack(\"H*\", $var);\n</code></pre>\n\n<p>or if the data really is UTF-8 encoded after it gets decoded</p>\n\n<pre><code>use Encode;\nprint Encode::decode(\"UTF-8\", pack(\"H*\", $var));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1553196916, "creation_date": 1553196916, "answer_id": 55288087, "question_id": 55287855, "link": "https://stackoverflow.com/questions/55287855/how-do-print-a-sequence-of-characters-hex-as-utf8-characters-in-perl/55288087#55288087", "title": "How do print a sequence of characters (hex) as UTF8 characters in Perl?", "body": "<p>To get the text:</p>\n\n<pre><code>use Encode qw( decode_utf8 );\n\nmy $hex   = \"48656c6c6f20576f726c64\";\nmy $bytes = pack('H*', $hex);\nmy $text  = decode_utf8($bytes);\n</code></pre>\n\n<p>To print it:</p>\n\n<pre><code>use feature qw( say );\nuse open ':std', ':encoding(UTF-8)';\n\nsay $text;\n</code></pre>\n"}], "owner": {"reputation": 5841, "user_id": 2426316, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fca24c9457510c17786a9ab424553963?s=128&d=identicon&r=PG", "display_name": "user2426316", "link": "https://stackoverflow.com/users/2426316/user2426316"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 2, "accepted_answer_id": 55288078, "answer_count": 2, "score": 2, "last_activity_date": 1553196916, "creation_date": 1553196049, "question_id": 55287855, "link": "https://stackoverflow.com/questions/55287855/how-do-print-a-sequence-of-characters-hex-as-utf8-characters-in-perl", "title": "How do print a sequence of characters (hex) as UTF8 characters in Perl?", "body": "<p>I have a variable in Perl that is just a sequence of letters and digits:</p>\n\n<pre><code>my $var = \"48656c6c6f20576f726c64\";\n</code></pre>\n\n<p>The sequence represents the string <code>Hello World</code>.</p>\n\n<p>I.e. one can think of it as <code>0x48 0x65 0x6c 0x6c 0x6f 0x20 0x57 0x6f 0x72 0x6c 0x64</code>, the hex representation of <code>Hello World</code>.</p>\n\n<p>How do I print <code>$var</code> as a readable UTF8?</p>\n\n<p>Short: How do I print <code>Hello World</code>?</p>\n"}, {"tags": ["linux", "shell", "perl"], "comments": [{"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1553181519, "post_id": 55283652, "comment_id": 97297307, "body": "<a href=\"https://unix.stackexchange.com/questions/128985/why-not-parse-ls\">why not parse ls</a>"}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1553181545, "post_id": 55283652, "comment_id": 97297322, "body": "You don&#39;t need to escape newlines inside a string."}, {"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 0, "creation_date": 1553182314, "post_id": 55283652, "comment_id": 97297844, "body": "check <a href=\"https://superuser.com/a/597173\">superuser.com/a/597173</a>"}, {"owner": {"reputation": 296564, "user_id": 34088, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8a4d6f03a8879432d8563aefbf48e787?s=128&d=identicon&r=PG", "display_name": "Aaron Digulla", "link": "https://stackoverflow.com/users/34088/aaron-digulla"}, "edited": false, "score": 0, "creation_date": 1553185785, "post_id": 55283652, "comment_id": 97300037, "body": "When it&#39;s slow, how fast is <code>ls -l $dir</code> alone? On some file systems, listing large directories is very, very slow."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 296564, "user_id": 34088, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8a4d6f03a8879432d8563aefbf48e787?s=128&d=identicon&r=PG", "display_name": "Aaron Digulla", "link": "https://stackoverflow.com/users/34088/aaron-digulla"}, "edited": false, "score": 0, "creation_date": 1553188020, "post_id": 55283652, "comment_id": 97301341, "body": "@AaronDigulla.. yes the ls -l $dir is also slow.. there are more than 2000 files created by different functional ids.."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 1, "creation_date": 1553192041, "post_id": 55283652, "comment_id": 97303351, "body": "I have around 308,530 files under one such directory.."}], "answers": [{"comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553184874, "post_id": 55284728, "comment_id": 97299477, "body": "It should print for all owners..not just the current user.. the files are owned by diff users"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553185590, "post_id": 55284728, "comment_id": 97299909, "body": "Updated accordingly"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1553186125, "last_edit_date": 1553186125, "creation_date": 1553184534, "answer_id": 55284728, "question_id": 55283652, "link": "https://stackoverflow.com/questions/55283652/fastest-way-to-sum-the-file-sizes-by-owner-in-a-directory/55284728#55284728", "title": "fastest way to sum the file sizes by owner in a directory", "body": "<p>Parsing output from <code>ls</code> - bad idea.</p>\n\n<p>How about using <code>find</code> instead?</p>\n\n<ul>\n<li>start in directory <code>${dir}</code>\n\n<ul>\n<li>limit to that directory level (<code>-maxdepth 1</code>)</li>\n<li>limit to files (<code>-type f</code>)</li>\n<li>print a line with user name and file size in bytes (<code>-printf \"%u %s\\n\"</code>)</li>\n</ul></li>\n<li>run the results through a perl filter\n\n<ul>\n<li>split each line (<code>-a</code>)</li>\n<li>add to a hash under key (field 0) the size (field 1)</li>\n<li>at the end (<code>END {...}</code>) print out the hash contents, sorted by key, i.e. user name</li>\n</ul></li>\n</ul>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ find ${dir} -maxdepth 1 -type f -printf \"%u %s\\n\" | \\\n     perl -ane '$s{$F[0]} += $F[1]; END { print \"$_ $s{$_}\\n\" foreach (sort keys %s); }'\nstefanb 263305714\n</code></pre>\n\n<hr>\n\n<p>A solution using Perl:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse autodie;\n\nuse File::Spec;\n\nmy %users;\nforeach my $dir (@ARGV) {\n    opendir(my $dh, $dir);\n\n    # files in this directory\n    while (my $entry = readdir($dh)) {\n        my $file = File::Spec-&gt;catfile($dir, $entry);\n\n        # only files\n        if (-f $file) {\n            my($uid, $size) = (stat($file))[4, 7];\n            $users{$uid} += $size\n        }\n    }\n\n    closedir($dh);\n}\n\nprint \"$_ $users{$_}\\n\" foreach (sort keys %users);\n\nexit 0;\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl .\n1000 263618544\n</code></pre>\n\n<p>Interesting difference. The Perl solution discovers 3 more files in my test directory than the <code>find</code> solution. I have to ponder why that is...</p>\n"}, {"comments": [{"owner": {"reputation": 296564, "user_id": 34088, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8a4d6f03a8879432d8563aefbf48e787?s=128&d=identicon&r=PG", "display_name": "Aaron Digulla", "link": "https://stackoverflow.com/users/34088/aaron-digulla"}, "edited": false, "score": 0, "creation_date": 1553185670, "post_id": 55284930, "comment_id": 97299954, "body": "I don&#39;t see <code>m&#47;&#47;&#47;</code> in the script. My guess is you&#39;re referring to <code>!&#47;^[.][.]?$&#47;o</code>?"}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "reply_to_user": {"reputation": 296564, "user_id": 34088, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8a4d6f03a8879432d8563aefbf48e787?s=128&d=identicon&r=PG", "display_name": "Aaron Digulla", "link": "https://stackoverflow.com/users/34088/aaron-digulla"}, "edited": false, "score": 0, "creation_date": 1553185777, "post_id": 55284930, "comment_id": 97300032, "body": "yes. <code>&#47;&#47;</code> is shortcut for <code>m&#47;&#47;</code>. <code>m</code> is only needed if you want to use different delimiter (eg <code>m[]</code>, <code>m&lt;&gt;</code>, etc). Three slashes was typo."}, {"owner": {"reputation": 296564, "user_id": 34088, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8a4d6f03a8879432d8563aefbf48e787?s=128&d=identicon&r=PG", "display_name": "Aaron Digulla", "link": "https://stackoverflow.com/users/34088/aaron-digulla"}, "edited": false, "score": 1, "creation_date": 1553185942, "post_id": 55284930, "comment_id": 97300134, "body": "Please either use <code>m&#47;&#47;</code> in the script or use the code from the script in the explanation. As it is, it&#39;s very confusing for people who don&#39;t know a lot about Perl."}], "tags": [], "owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "is_accepted": false, "score": 1, "last_activity_date": 1553198915, "last_edit_date": 1553198915, "creation_date": 1553185161, "answer_id": 55284930, "question_id": 55283652, "link": "https://stackoverflow.com/questions/55283652/fastest-way-to-sum-the-file-sizes-by-owner-in-a-directory/55284930#55284930", "title": "fastest way to sum the file sizes by owner in a directory", "body": "<p>Not sure why question is tagged perl when awk is being used.</p>\n\n<p>Here's a simple perl version:</p>\n\n<pre><code>#!/usr/bin/perl\n\nchdir($ARGV[0]) or die(\"Usage: $0 dir\\n\");\n\nmap {\n    if ( ! m/^[.][.]?$/o ) {\n        ($s,$u) = (stat)[7,4];\n        $h{$u} += $s;\n    }\n} glob \".* *\";\n\nmap {\n    $s = $h{$_};\n    $u = !( $s      &gt;&gt;10) ? \"\"\n       : !(($s&gt;&gt;=10)&gt;&gt;10) ? \"k\"\n       : !(($s&gt;&gt;=10)&gt;&gt;10) ? \"M\"\n       : !(($s&gt;&gt;=10)&gt;&gt;10) ? \"G\"\n       :   ($s&gt;&gt;=10)      ? \"T\"\n       :                    undef\n       ;\n    printf \"%-8s %12d\\t%s\\n\", $s.$u, $h{$_}, getpwuid($_)//$_;\n} keys %h;\n\n</code></pre>\n\n<ul>\n<li><code>glob</code> gets our file list</li>\n<li><code>m//</code> discards <code>.</code> and <code>..</code></li>\n<li><code>stat</code> the size and uid</li>\n<li>accumulate sizes in <code>%h</code></li>\n<li>compute the unit by bitshifting (<code>&gt;&gt;10</code> is integer divide by 1024)</li>\n<li>map uid to username (<code>//</code> provides fallback)</li>\n<li>print results (unsorted)</li>\n<li><strong>NOTE:</strong> unlike some other answers, this code doesn't recurse into subdirectories</li>\n</ul>\n\n<p>To exclude symlinks, subdirectories, etc, change the <code>if</code> to appropriate <code>-X</code> tests. (eg. <code>(-f $_)</code>, <code>(!-d $_ and !-l $_)</code>, etc). See <a href=\"https://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\">perl docs</a> on the <code>_</code> filehandle optimisation for caching stat results.</p>\n"}, {"comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553202588, "post_id": 55285067, "comment_id": 97307929, "body": "@stack0114106 It limits the size tracking to regular files - skips directories, fifos, sockets, devices, etc. Same idea as the <code>-f $file</code> in another answer, just a different way of checking."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 4, "last_activity_date": 1553186157, "last_edit_date": 1553186157, "creation_date": 1553185657, "answer_id": 55285067, "question_id": 55283652, "link": "https://stackoverflow.com/questions/55283652/fastest-way-to-sum-the-file-sizes-by-owner-in-a-directory/55285067#55285067", "title": "fastest way to sum the file sizes by owner in a directory", "body": "<p>Another perl one, that displays total sizes sorted by user:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse autodie;\nuse feature qw/say/;\nuse File::Spec;\nuse Fcntl qw/:mode/;\n\nmy $dir = shift;\nmy %users;\n\nopendir(my $d, $dir);\nwhile (my $file = readdir $d) {\n  my $filename = File::Spec-&gt;catfile($dir, $file);\n  my ($mode, $uid, $size) = (stat $filename)[2, 4, 7];\n  $users{$uid} += $size if S_ISREG($mode);\n}\nclosedir $d;\n\nmy @sizes = sort { $a-&gt;[0] cmp $b-&gt;[0] }\n  map { [ getpwuid($_) // $_, $users{$_} ] } keys %users;\nlocal $, = \"\\t\";\nsay @$_ for @sizes;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553191480, "post_id": 55285993, "comment_id": 97303128, "body": "looks like my awk doesn&#39;t have filefuncs <code>awk: foo.awk:1: ^ invalid char &#39;@&#39; in expression</code>"}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553192231, "post_id": 55285993, "comment_id": 97303434, "body": "TIme to upgrade to a modern version of GNU awk."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553192680, "post_id": 55285993, "comment_id": 97303639, "body": "this is in Enterprise Linux - RHEL 6.10.. I see gawk pointing to /bin/gawk and the version is GNU Awk 3.1.7.. does it support @loadfiles?.. or is there any other location that would have another awk??.."}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553192955, "post_id": 55285993, "comment_id": 97303780, "body": "A wild guess that extensions came in GNU awk 4. But I saw you mentioned 300k files, this solution can&#39;t handle that many."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 1, "creation_date": 1553193104, "post_id": 55285993, "comment_id": 97303848, "body": "ok.. anyway good to know loadfiles...I did run this in my cygwin and it works..so ++"}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553197330, "post_id": 55285993, "comment_id": 97305776, "body": "Well, this rewrite can handle at least 100k files (tested)."}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553238605, "post_id": 55285993, "comment_id": 97317348, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/190481/discussion-between-james-brown-and-stack0114106\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "is_accepted": false, "score": 2, "last_activity_date": 1553238490, "last_edit_date": 1553238490, "creation_date": 1553189025, "answer_id": 55285993, "question_id": 55283652, "link": "https://stackoverflow.com/questions/55283652/fastest-way-to-sum-the-file-sizes-by-owner-in-a-directory/55285993#55285993", "title": "fastest way to sum the file sizes by owner in a directory", "body": "<p>Did I see some awk in the op? Here is one in GNU awk using <a href=\"https://www.gnu.org/software/gawk/manual/html_node/Extension-Sample-File-Functions.html\" rel=\"nofollow noreferrer\">filefuncs</a> extension:</p>\n\n<pre><code>$ cat bar.awk\n@load \"filefuncs\"\nBEGIN {\n    FS=\":\"                                     # passwd field sep\n    passwd=\"/etc/passwd\"                       # get usernames from passwd\n    while ((getline &lt; passwd)&gt;0)\n        users[$3]=$1\n    close(passwd)                              # close passwd\n\n    if(path=\"\")                                # set path with -v path=...\n        path=\".\"                               # default path is cwd\n    pathlist[1]=path                           # path from the command line\n                                               # you could have several paths\n    fts(pathlist,FTS_PHYSICAL,filedata)        # dont mind links (vs. FTS_LOGICAL)\n    for(p in filedata)                         # p for paths\n        for(f in filedata[p])                  # f for files\n            if(filedata[p][f][\"stat\"][\"type\"]==\"file\")      # mind files only\n                size[filedata[p][f][\"stat\"][\"uid\"]]+=filedata[p][f][\"stat\"][\"size\"]\n    for(i in size)\n        print (users[i]?users[i]:i),size[i]    # print username if found else uid\n    exit\n}\n</code></pre>\n\n<p>Sample outputs:</p>\n\n<pre><code>$ ls -l\ntotal 3623\ndrwxr-xr-x 2 james james  3690496 Mar 21 21:32 100kfiles/\n-rw-r--r-- 1 root  root         4 Mar 21 18:52 bar\n-rw-r--r-- 1 james james      424 Mar 21 21:33 bar.awk\n-rw-r--r-- 1 james james      546 Mar 21 21:19 bar.awk~\n-rw-r--r-- 1 james james      315 Mar 21 19:14 foo.awk\n-rw-r--r-- 1 james james      125 Mar 21 18:53 foo.awk~\n$ awk -v path=. -f bar.awk\nroot 4\njames 1410\n</code></pre>\n\n<p>Another:</p>\n\n<pre><code>$ time awk -v path=100kfiles -f bar.awk\nroot 4\njames 342439926\n\nreal    0m1.289s\nuser    0m0.852s\nsys     0m0.440s\n</code></pre>\n\n<p>Yet another test with a million empty files:</p>\n\n<pre><code>$ time awk -v path=../million_files -f bar.awk\n\nreal    0m5.057s\nuser    0m4.000s\nsys     0m1.056s\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1553194898, "post_id": 55286132, "comment_id": 97304687, "body": "as well as getpwuid possibly returning nothing (and thus merging distinct uids), if you invoke it in the find sub, you call it once per file, compared to once per uid if you do it during the say."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1553195722, "post_id": 55286132, "comment_id": 97305082, "body": "@jhnc Yes, on both: (1) just added error handling, (2)  I&#39;m not concerned with an extra syscall in processing (getting list out of the system is slow) and wanted to gather names, but yes, that would be faster (and probably generally better to keep it as returned by <code>stat</code>)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553196327, "post_id": 55286132, "comment_id": 97305325, "body": "@stack0114106 Ah! So that must&#39;ve been about users that have been removed (or such) so <code>getwpuid</code> returned nothing (<code>undef</code>)  --- a reminder to <i>always, indeed</i> include all requisite tests!!!   (Still don&#39;t see why the debugging prints failed with the warning &quot;<i>uninitialized value <code>$owner_id</code></i>&quot;)"}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1553201013, "post_id": 55286132, "comment_id": 97307279, "body": "@zdim I created a folder with 200k files and ran your code with getpwuid in <code>for</code> and then moved to <code>say</code>. First took 2.456s/1.063s/1.369s, second took 0.862s/0.347s/0.515s. Those extra calls add up! (on an SSD at least...)  :-)"}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1553201816, "post_id": 55286132, "comment_id": 97307616, "body": "btw, I think your find version has typo in the regexp - should be <code>&#47;^\\.\\.?$&#47;</code> or similar"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1553202247, "post_id": 55286132, "comment_id": 97307794, "body": "@jhnc  ouch, absolutely need be <code>\\.</code> in regex -- thank you! Funnily, it worked in my tests because it excludes only entries with one or two chars in name, and the only such ones I have are indeed <code>.</code> and <code>..</code> :).  Will revisit this as soon as I can, and will now try to optimize.  Thanks for timing it -- I suspect that it will always be (more or less) the same; so that when processing drops to minutes (for hundreds of thousands of files in a dir) that we still have on the order of a second of the delay because of those syscalls.  I&#39;ll time it :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553245834, "post_id": 55286132, "comment_id": 97320708, "body": "@stack0114106 Changed the code to call <code>getpwuid</code> only when printing the report.  It is generally better, and it does appear to have a large effect, increasing with the number of files (?!).  I guess I misgauged that.  More to come..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553803647, "post_id": 55286132, "comment_id": 97532685, "body": "@stack0114106 By &quot;<i>current directory</i>&quot; do you mean without recursion? Like with a command-line flag, either do current dir only or do it all with recursion?"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553803729, "post_id": 55286132, "comment_id": 97532736, "body": "@zdim.. yes.. right.. like one solution is the extension of other with some change of flags"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553804195, "post_id": 55286132, "comment_id": 97532979, "body": "@zdim.. cleaned up mine.. :-)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553845162, "post_id": 55286132, "comment_id": 97544484, "body": "@stack0114106 Edited. Apart from adding a single script for both, I also changed the recursive one a little: it was including the sizes of directories, what I thought you probably don&#39;t want here. If you actually do please let me know and I&#39;ll restore the previous behavior."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553850045, "post_id": 55286132, "comment_id": 97546598, "body": "@zdim.. thank you so much for consolidating..yes, the directory sizes can be omitted.."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1607305743, "last_edit_date": 1607305743, "creation_date": 1553189495, "answer_id": 55286132, "question_id": 55283652, "link": "https://stackoverflow.com/questions/55283652/fastest-way-to-sum-the-file-sizes-by-owner-in-a-directory/55286132#55286132", "title": "fastest way to sum the file sizes by owner in a directory", "body": "<p>Get a listing, add up sizes, and sort it by owner (with Perl)</p>\n<pre><code>perl -wE'\n    chdir (shift // &quot;.&quot;); \n    for (glob &quot;.* *&quot;) { \n        next if not -f;\n        ($owner_id, $size) = (stat)[4,7]\n            or do { warn &quot;Trouble stat for: $_&quot;; next };\n        $rept{$owner_id} += $size \n    } \n    say (getpwuid($_)//$_, &quot; =&gt; $rept{$_} bytes&quot;) for sort keys %rept\n'\n</code></pre>\n<p>I didn't get to benchmark it, and it'd be worth trying it out against an approach where the directory is iterated over, as opposed to <code>glob</code>-ed (while I found <code>glob</code> much faster in a <a href=\"https://stackoverflow.com/a/49334580/4653379\">related problem</a>).</p>\n<p>I expect good runtimes in comparison with <code>ls</code>, which slows down <em>dramatically</em> as a file list in a single directory gets long.  This is due to the system so Perl will be affected as well but as far as I recall it handles it far better.  However, I've seen a dramatic slowdown only once entries get to half a million or so, not a few thousand, so I am not sure why it runs slow on your system.</p>\n<p>If this need be recursive in directories it finds then use <a href=\"https://perldoc.perl.org/File/Find.html\" rel=\"nofollow noreferrer\">File::Find</a>.  For example</p>\n<pre><code>perl -MFile::Find -wE'\n    $dir = shift // &quot;.&quot;; \n    find( sub { \n        return if not -f;\n        ($owner_id, $size) = (stat)[4,7] \n            or do { warn &quot;Trouble stat for: $_&quot;; return }; \n        $rept{$owner_id} += $size \n    }, $dir ); \n    say (getpwuid($_)//$_, &quot;$_ =&gt; $rept{$_} bytes&quot;) for keys %rept\n'\n</code></pre>\n<p>This scans a directory with 2.4 Gb, of mostly small files over a hierarchy of subdirectories, in a little over 2 seconds. The <code>du -sh</code> took around 5 seconds (the first time round).</p>\n<hr />\n<p>It is reasonable to bring these two into one script</p>\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';    \nuse File::Find;\nuse Getopt::Long;\n\nmy %rept;    \nsub get_sizes {\n    return if not -f; \n    my ($owner_id, $size) = (stat)[4,7] \n        or do { warn &quot;Trouble stat for: $_&quot;; return };\n    $rept{$owner_id} += $size \n}\n\nmy ($dir, $recurse) = ('.', '');\nGetOptions('recursive|r!' =&gt; \\$recurse, 'directory|d=s' =&gt; \\$dir)\n    or die &quot;Usage: $0 [--recursive] [--directory dirname]\\n&quot;;\n\n($recurse) \n    ? find( { wanted =&gt; \\&amp;get_sizes }, $dir )\n    : find( { wanted =&gt; \\&amp;get_sizes, \n              preprocess =&gt; sub { return grep { -f } @_ } }, $dir );\n\nsay (getpwuid($_)//$_, &quot; =&gt; $rept{$_} bytes&quot;) for keys %rept;\n</code></pre>\n<p>I find this to perform about the same as the one-dir-only code above, when run non-recursively (default as it stands).</p>\n<p>Note that <a href=\"https://metacpan.org/pod/File::Find::Rule\" rel=\"nofollow noreferrer\">File::Find::Rule</a> interface has many conveniences but is <a href=\"https://rjbs.manxome.org/rubric/entry/1981\" rel=\"nofollow noreferrer\">slower</a> in some important use cases, what clearly matters here.  (That analysis should be redone since it's a few years old.)</p>\n"}, {"comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553254727, "post_id": 55298768, "comment_id": 97325902, "body": "@agc..the answer seems to be simple.. is datamash available in RHEL 6.1?"}, {"owner": {"reputation": 6955, "user_id": 6136214, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0385d5a1c27a6707139e7dc7ad29b6d6?s=128&d=identicon&r=PG&f=1", "display_name": "agc", "link": "https://stackoverflow.com/users/6136214/agc"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553255908, "post_id": 55298768, "comment_id": 97326578, "body": "@stack0114106, Not sure -- <a href=\"https://rpmfind.net/linux/rpm2html/search.php?query=datamash&amp;submit=Search+...\" rel=\"nofollow noreferrer\">RPM files exist</a>, but whether those work in RHEL 6.1 is unclear without a 6.1 box to test on."}], "tags": [], "owner": {"reputation": 6955, "user_id": 6136214, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0385d5a1c27a6707139e7dc7ad29b6d6?s=128&d=identicon&r=PG&f=1", "display_name": "agc", "link": "https://stackoverflow.com/users/6136214/agc"}, "is_accepted": false, "score": 0, "last_activity_date": 1553254840, "last_edit_date": 1553254840, "creation_date": 1553254601, "answer_id": 55298768, "question_id": 55283652, "link": "https://stackoverflow.com/questions/55283652/fastest-way-to-sum-the-file-sizes-by-owner-in-a-directory/55298768#55298768", "title": "fastest way to sum the file sizes by owner in a directory", "body": "<p>Using <a href=\"https://savannah.gnu.org/projects/datamash/\" rel=\"nofollow noreferrer\"><code>datamash</code></a> (and <a href=\"https://stackoverflow.com/a/55284728/6136214\"><em>Stefan Becker</em>'s <code>find</code> code</a>):</p>\n\n<pre><code>find ${dir} -maxdepth 1 -type f -printf \"%u\\t%s\\n\" | datamash -sg 1 sum 2\n</code></pre>\n"}], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 0, "accepted_answer_id": 55286132, "answer_count": 6, "score": 2, "last_activity_date": 1607305743, "creation_date": 1553181210, "question_id": 55283652, "link": "https://stackoverflow.com/questions/55283652/fastest-way-to-sum-the-file-sizes-by-owner-in-a-directory", "title": "fastest way to sum the file sizes by owner in a directory", "body": "<p>I'm using the below command using an alias to print the sum of all file sizes by owner in a directory</p>\n\n<pre><code>ls -l $dir | awk ' NF&gt;3 { file[$3]+=$5 } \\\nEND { for( i in file) { ss=file[i]; \\\nif(ss &gt;=1024*1024*1024 ) {size=ss/1024/1024/1024; unit=\"G\"} else \\ \nif(ss&gt;=1024*1024) {size=ss/1024/1024; unit=\"M\"} else {size=ss/1024; unit=\"K\"}; \\\nformat=\"%.2f%s\"; res=sprintf(format,size,unit); \\\nprintf \"%-8s %12d\\t%s\\n\",res,file[i],i }}' | sort -k2 -nr\n</code></pre>\n\n<p>but, it doesn't seem to be fast all the times.</p>\n\n<p>Is it possible to get the same output in some other way, but faster?</p>\n"}, {"tags": ["perl", "websocket"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1553186372, "post_id": 55281448, "comment_id": 97300376, "body": "<code>recv</code> doesn&#39;t guarantee that data is read in one chunk: &quot;<code>recv SOCKET,SCALAR,LENGTH,FLAGS</code>             Receives a message on a socket. <b>Attempts to receive LENGTH             characters of data into variable SCALAR from the specified             SOCKET filehandle</b>. SCALAR will be grown or shrunk to the length             actually read.&quot; As you are processing HTTP you must loop until you have received all data (header + content-length body) before processing the request."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1553187429, "post_id": 55281448, "comment_id": 97300947, "body": "Why don&#39;t you avoid all the hassle of HTTP request parsing and let <a href=\"https://metacpan.org/pod/Net::Server::HTTP\" rel=\"nofollow noreferrer\">Net::Server::HTTP</a> do all the work? You just need to write the request handler. Maybe you should look also into <a href=\"https://metacpan.org/pod/Net::WebSocket\" rel=\"nofollow noreferrer\">Net::WebSocket</a>..."}, {"owner": {"reputation": 43, "user_id": 8344347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3f057322157f3eb6ece9241757732e6?s=128&d=identicon&r=PG&f=1", "display_name": "Michal Kurina", "link": "https://stackoverflow.com/users/8344347/michal-kurina"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1553188020, "post_id": 55281448, "comment_id": 97301340, "body": "Stefan Becker : Cause I enjoy using sockets (Yea, I know it&#39;s not effective or fast like using a Module for that). Yes, I cloud use Net::WebSocket, but I just want to get deeper into that."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 8344347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3f057322157f3eb6ece9241757732e6?s=128&d=identicon&r=PG&f=1", "display_name": "Michal Kurina", "link": "https://stackoverflow.com/users/8344347/michal-kurina"}, "edited": false, "score": 0, "creation_date": 1553327950, "post_id": 55308205, "comment_id": 97350692, "body": "The <code>while (my $line = &lt;$client&gt;) {</code> is running fine, it&#39;s just like when you read a file, but thanks for the answer, it&#39;s worked."}], "tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": true, "score": 1, "last_activity_date": 1553291163, "creation_date": 1553291163, "answer_id": 55308205, "question_id": 55281448, "link": "https://stackoverflow.com/questions/55281448/websocket-server-from-scratch-showing-opcode-1/55308205#55308205", "title": "WebSocket server from scratch showing opcode -1", "body": "<p>(Opcode -1) is a generic error. In your case it is a bad <code>Sec-WebSocket-Accept</code> header. You forgot to use <code>$magic_string</code>:</p>\n\n<pre><code>my $accept = sha1_base64($key.$magic_string);\n</code></pre>\n\n<p>Also <code>while (my $line = &lt;$client&gt;) {</code> will probably run forever. You need to check for an empty line.</p>\n"}], "owner": {"reputation": 43, "user_id": 8344347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3f057322157f3eb6ece9241757732e6?s=128&d=identicon&r=PG&f=1", "display_name": "Michal Kurina", "link": "https://stackoverflow.com/users/8344347/michal-kurina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 1, "accepted_answer_id": 55308205, "answer_count": 1, "score": 4, "last_activity_date": 1553291163, "creation_date": 1553174607, "last_edit_date": 1592644375, "question_id": 55281448, "link": "https://stackoverflow.com/questions/55281448/websocket-server-from-scratch-showing-opcode-1", "title": "WebSocket server from scratch showing opcode -1", "body": "<p>I am trying to create a simple WebSocket server in perl from scratch, when I tried it in Google Chrome it gave me <em>opcode -1</em>, How can I fix it?</p>\n<h3>websocket.pl</h3>\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse IO::Socket::INET;\nuse Digest::SHA1 &quot;sha1_base64&quot;;\n \n$| = 1;\n\nmy $magic_string = &quot;258EAFA5-E914-47DA-95CA-C5AB0DC85B11&quot;;\n\n\n# Create a server\nmy $socket = IO::Socket::INET-&gt;new( LocalHost =&gt; 'localhost',\n                                    LocalPort =&gt; 7777,\n                                    Proto     =&gt; 'tcp',\n                                    Listen    =&gt; 5,\n                                    Reuse     =&gt; 1\n) || die &quot;$!&quot;;\n\nprint &quot;Server is running on port 7777\\n&quot;;\n\n  \nwhile (1) {\n    my $client = $socket-&gt;accept();\n    my $key = &quot;&quot;;\n\n    # Get the Request\n    my $data = &quot;&quot;;\n    while (my $line = &lt;$client&gt;) {\n            $data .= $line;\n    }\n      \n    # Get the Sec-WebSocket-Key value\n      foreach my $line ( split /\\n/ =&gt; $data ) {\n          if ( $line =~ /^Sec-WebSocket-Key: (\\S+)/ ) {\n                  $key = $1;\n            }\n      }\n      print &quot;Sec-WebSocket-Key: $key\\n&quot;;\n    \n      # Create the Sec-WebSocket-Accept header value\n      my $accept = sha1_base64($key);\n      $accept .= &quot;=&quot;x(4-(length($accept)%4));\n      print &quot;Sec-WebSocket-Accept: $accept\\n&quot;;\n      \n      # Response\n      print $client &quot;HTTP/1.1 101 Switching Protocols\\r\\n&quot;;\n      print $client &quot;Upgrade: websocket\\r\\n&quot;;\n      print $client &quot;Connection: Upgrade\\r\\n&quot;;\n      print $client &quot;Sec-WebSocket-Accept: $accept\\r\\n\\r\\n&quot;;\n      \n      shutdown($client, 1);\n}\n\n$socket-&gt;close();\n</code></pre>\n<p>I am pretty sure that the key returned to website is correct, so where is the problem? What went wrong?</p>\n<h3>ws.js</h3>\n<pre><code>var ws = new WebSocket(&quot;ws://localhost:7777/&quot;);\n\nws.onopen = function() {\n    alert(&quot;connected!&quot;);\n    ws.send( 'Hello server' );\n};\n\nws.onclose = function() {\n    alert( 'Connection is closed... ');\n};\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/N7wtG.png\" rel=\"nofollow noreferrer\">Web Browser network traffic</a></p>\n<h2>Edit</h2>\n<p><em>Stefan Becker</em>: Yea, I know, but in this case I was sure that the request is under 1024 bytes, I've fixed it, thanks.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1553170805, "creation_date": 1553170805, "answer_id": 55280299, "question_id": 55280143, "link": "https://stackoverflow.com/questions/55280143/execute-routine-from-another-routine-in-the-same-hash/55280299#55280299", "title": "Execute routine from another routine in the same hash", "body": "<p>Just declare the variable in a previous statement so you can use it in the next one:</p>\n\n<pre><code> my $disp;\n $disp = {\n    option1 =&gt; sub { if(true){$disp-&gt;{option2}-&gt;();}},\n    option2 =&gt; sub { print \"opt 2\\n\"},\n    option3 =&gt; sub { print \"opt 3\\n\"},\n    default =&gt; sub { print \"default\\n\" },\n };\n\n $disp-&gt;{($disp-&gt;{$option})?$option:'default'}-&gt;(@args);\n</code></pre>\n\n<p>Also, I'd probably write the last line as</p>\n\n<pre><code>($disp-&gt;{$option} || $disp-&gt;{default})-&gt;(@args);\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 6430847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65ad23fa8c0d4ff9a23abd60d5b56767?s=128&d=identicon&r=PG&f=1", "display_name": "j.broklin", "link": "https://stackoverflow.com/users/6430847/j-broklin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 55280299, "answer_count": 1, "score": 1, "last_activity_date": 1553171219, "creation_date": 1553170193, "last_edit_date": 1553171219, "question_id": 55280143, "link": "https://stackoverflow.com/questions/55280143/execute-routine-from-another-routine-in-the-same-hash", "title": "Execute routine from another routine in the same hash", "body": "<p>I'm trying to replace a problematic and long snippet of code in Perl to something like this:</p>\n\n<pre><code> my $disp = {\n      option1 =&gt; sub { if(true){$disp-&gt;{option2}-&gt;();}},\n      option2 =&gt; sub { print \"opt 2\\n\"},\n      option3 =&gt; sub { print \"opt 3\\n\"},\n      default =&gt; sub { print \"default\\n\" },\n    };\n\n    $disp-&gt;{($disp-&gt;{$option})?$option:'default'}-&gt;(@args);\n</code></pre>\n\n<p>My problem occurs when I need to execute for example <code>option2</code> when the execution is inside <code>option1</code>, but I can't access <code>$disp</code> within <code>$disp</code> and <code>$self</code> isn't present, ideas?</p>\n"}, {"tags": ["perl", "xml-parsing"], "answers": [{"tags": [], "owner": {"reputation": 386, "user_id": 6400711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83370d2a7cf7c28e08586f262badff7b?s=128&d=identicon&r=PG&f=1", "display_name": "Phx Dev", "link": "https://stackoverflow.com/users/6400711/phx-dev"}, "is_accepted": false, "score": 0, "last_activity_date": 1553171858, "last_edit_date": 1553171858, "creation_date": 1553171466, "answer_id": 55280476, "question_id": 55280110, "link": "https://stackoverflow.com/questions/55280110/how-can-i-create-xml-content-doc-using-perl-module-xmllibxml/55280476#55280476", "title": "how can i create xml content/doc using perl module XML::LibXML", "body": "<p>Something like that</p>\n\n<pre><code>use XML::LibXML;\n\nmy $doc = XML::LibXML-&gt;createDocument( \"1.0\", \"UTF-8\" );\nmy $root = $doc-&gt;createElement(\"response\");\n$root-&gt;setAttribute('status'=&gt; 'Not Found');\n\nmy %tags = (\n    errorcode =&gt; 500,\n    message =&gt; 'some message',\n    description =&gt; 'some description',\n);\n\nfor my $name (keys %tags) {\n    my $tag = $doc-&gt;createElement($name);\n    my $value = $tags{$name};\n    $tag-&gt;appendTextNode($value);\n    $root-&gt;appendChild($tag);\n}\n\n$doc-&gt;setDocumentElement($root);\nprint $doc-&gt;toString(2); # &lt;= XML indentation\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8052645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3213baa1a73e79352c23ecdb9f8b67b4?s=128&d=identicon&r=PG&f=1", "display_name": "sudarsan", "link": "https://stackoverflow.com/users/8052645/sudarsan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553171858, "creation_date": 1553170097, "last_edit_date": 1553170619, "question_id": 55280110, "link": "https://stackoverflow.com/questions/55280110/how-can-i-create-xml-content-doc-using-perl-module-xmllibxml", "title": "how can i create xml content/doc using perl module XML::LibXML", "body": "<p>How can I generate the below xml content in perl using XML::LibXML</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;response status=\"Not Found\"&gt;\n   &lt;errorcode&gt;500&lt;/errorcode&gt;\n   &lt;message&gt;some message&lt;/message&gt;\n   &lt;description&gt;some description&lt;/description&gt;\n&lt;/response&gt;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 2, "creation_date": 1553180031, "post_id": 55278221, "comment_id": 97296271, "body": "It took me a little while to write my <a href=\"https://stackoverflow.com/a/55239110/4990392\">answer</a> to your previous question; it&#39;s sad that you ignored half my suggestions... If you have a hard time understanding the pieces of advice I gave you, then please let me know and I&#39;ll clarify."}, {"owner": {"reputation": 99, "user_id": 10063873, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XqwEqS3G7nI/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7o6sjf_HyLgV4ex0Wxh5mu-kZ8ARQ/mo/photo.jpg?sz=128", "display_name": "User0110101", "link": "https://stackoverflow.com/users/10063873/user0110101"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553525466, "post_id": 55278221, "comment_id": 97406044, "body": "Hey @Dada sorry I did not forget I just hadn&#39;t had the time to change my script or to check stackoverflow as well. However it&#39;s been modified now, thank you again."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 4, "last_activity_date": 1553173818, "creation_date": 1553173818, "answer_id": 55281186, "question_id": 55278221, "link": "https://stackoverflow.com/questions/55278221/perl-implementing-perl-script-with-perl-module/55281186#55281186", "title": "Perl - Implementing Perl Script with Perl Module", "body": "<p><code>sub grid</code> does not appear to be a method, but you are calling it as one</p>\n\n<pre><code>$self-&gt;grid($min_X,$max_X,$min_Y,$max_Y,$distance);\n</code></pre>\n\n<p>This syntax actually sends <code>$self</code> as the first argument, so that call is equivalent to the function call</p>\n\n<pre><code>grid($self,$min_X,$max_X,$min_Y,$max_Y,$distance);\n</code></pre>\n\n<p>What you probably want is to just say</p>\n\n<pre><code>grid($min_X,$max_X,$min_Y,$max_Y,$distance);\n</code></pre>\n\n<p>(You also really want to say</p>\n\n<pre><code>use strict;\nuse warnings;\n</code></pre>\n\n<p>at the top of every script)</p>\n"}], "owner": {"reputation": 99, "user_id": 10063873, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XqwEqS3G7nI/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7o6sjf_HyLgV4ex0Wxh5mu-kZ8ARQ/mo/photo.jpg?sz=128", "display_name": "User0110101", "link": "https://stackoverflow.com/users/10063873/user0110101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 55281186, "answer_count": 1, "score": -1, "last_activity_date": 1553218475, "creation_date": 1553163637, "question_id": 55278221, "link": "https://stackoverflow.com/questions/55278221/perl-implementing-perl-script-with-perl-module", "title": "Perl - Implementing Perl Script with Perl Module", "body": "<p>I would imagine this is too big and too specific for a normal StackOverflow question, so I can understand if there isn't any possible help. However I will try and show what is the issue I am facing. Also I am new to Perl and I know you shouldn't declare all variables at the start, I'm just trying to see if I can get this implemented first. </p>\n\n<p>I have a Perl script:</p>\n\n<pre><code>use 5.010;\nuse Math::Trig ':radial';\nuse Math::Trig;\nuse List::Util qw(max min);\n\n#Input parameters:\n\n#The ouput filename:\n$outfile = 'Tree.scad';\n\n#The coordinates of the points that is to be supported.\n$min_X=0;\n$max_X=60;\n$min_Y=0;\n$max_Y=60;\n$distance=10;\n\n#The minimum angle from horizontal your printer can make, in degrees\n$min_angle= 40;\n\n#Ignore the next line, it is not an input parameter.\n($X_ref,$Y_ref)=grid($min_X,$max_X,$min_Y,$max_Y,$distance);@X=@$X_ref;@Y=@{$Y_ref};\nfor $i (0..$#X){\n    $Z[$i]=20;#The function that defined the height of each point. This setting wil give you a flat roof. For a more advanced tree, try:\n    #$Z[$i]=-0.01*$X[$i]**2+0.2*$Y[$i]-0.005*$Y[$i]**2+20;\n}\n\n#End of input parameters.\n\n$min_radian = deg2rad($min_angle);\n$b = tan($min_radian);\n@Z=map{$_/$b}@Z;\nopen $output, '&gt;', $outfile or die \"error writing to '$outfile'\"; \n\nprint $output \"width=2;\\n\";\nprint $output \"sphere_radius=0;\\n\";\nprint $output \"base_plate_size=10;\\n\\n\";\n\nwhile ($#X&gt;0){\n  ($I,$J)=find_min_dist(\\@X,\\@Y,\\@Z);\n  ($X_branch,$Y_branch,$Z_branch)=find_branch($X[$I],$Y[$I],$Z[$I],$X[$J],$Y[$J],$Z[$J]);\n  @X_list=($X_branch,$X[$I],$X[$J]);\n  @Y_list=($Y_branch,$Y[$I],$Y[$J]);\n  @Z_list=($Z_branch,$Z[$I],$Z[$J]);\n  for $j (0..$#Y_list){\n      if (abs($X_list[$j]) &lt; 0.001){\n      $X_list[$j]=0;\n      }\n      if (abs($Y_list[$j]) &lt; 0.001){\n      $Y_list[$j]=0;\n      }\n      if (abs($Z_list[$j]) &lt; 0.001){\n      $Z_list[$J]=0;\n      }\n  }\n  branch(\\@X_list,\\@Y_list,\\@Z_list);\n  splice(@X,$I,1,$X_branch);\n  splice(@X,$J,1);\n  splice(@Y,$I,1,$Y_branch);\n  splice(@Y,$J,1);\n  splice(@Z,$I,1,$Z_branch);\n  splice(@Z,$J,1);\n}\n\nprint $output 'if(base_plate_size&gt;0){';\nprint $output \"\\n translate([$X[0],$Y[0],$Z[0]*$b])\\n\";\nprint $output \"cube([base_plate_size,base_plate_size,1],center=true);}\";\n\nsub grid{\n    my $d=$_[4];\n    @X_values=$_[0]/$d..$_[1]/$d;\n    @X_values=map{$_*$d} @X_values;\n    @Y_values=$_[2]/$d..$_[3]/$d;\n    @Y_values=map{$_*$d} @Y_values;\n    for $i (0..$#X_values){\n    @Y=(@Y,@Y_values);\n    for $j (0..$#Y_values){\n        $X[$i*($#Y_values+1)+$j]= $X_values[$i];\n    }\n    }\n    return (\\@X,\\@Y);\n}\n\nsub branch{\n  my @X=@{ $_[0] };\n  my @Y=@{ $_[1] };\n  my @Z=@{ $_[2] };\n  @Z=map{$_*$b}@Z;\n  for $i (1..$#X){\n    ($rho, $theta, $phi) = cartesian_to_spherical($X[$i]-$X[0],$Y[$i]-$Y[0],$Z[$i]-$Z[0]);\n    $phi = rad2deg($phi);\n    if (abs($phi)&lt;0.001){$phi=0;}\n    $theta = rad2deg($theta)+90;\n    if (abs($theta)&lt;0.001){$theta=0;}\n    if (abs($rho)&gt;0.001){\n    print $output \"translate([$X[0],$Y[0],$Z[0]])\\n\";\n    print $output \"rotate([0,0,$theta])\\n\";\n    print $output \"rotate([$phi,0,0])\\n\";\n    print $output \"translate([-width/2,-width/2,0])\";\n    print $output \"cube([width,width,$rho]);\\n\";\n    print $output 'if (sphere_radius&gt;0){';\n    print $output \"\\n translate([$X[$i],$Y[$i],$Z[$i]])\\n\";\n    print $output \"sphere(sphere_radius,center=1);}\\n\";}\n  }\n}\n\nsub find_min_dist{\n  my @X=@{ $_[0] };\n  my @Y=@{ $_[1] };\n  my @Z=@{ $_[2] };\n  my $min_dist=($X[0]-$X[1])**2+($Y[0]-$Y[1])**2+($Z[0]-$Z[1])**2;\n  my $max_Z=$Z[0];\n  my $I=0;\n  my $J=1;\n  for $i (1..$#Z){\n      if ($Z[$i]&gt;=$max_Z){\n      $max_Z=$Z[$i];\n      $I=$i;}\n  }\n  for $j (0..$#X){\n    if ($j!=$I){\n      $dist=(($X[$I]-$X[$j])**2+($Y[$I]-$Y[$j])**2+($Z[$I]-$Z[$j])**2);\n      if ($min_dist&gt;$dist){\n    $min_dist=$dist;\n    $J=$j;\n      }}}\n  return ($I,$J);\n}\n\nsub find_branch{\n  my $X1=$_[0];\n  my $Y1=$_[1];\n  my $Z1=$_[2];\n  my $X2=$_[3];\n  my $Y2=$_[4];\n  my $Z2=$_[5];\n  $rXY=sqrt(($X1-$X2)**2+($Y1-$Y2)**2);\n  if (abs($Z1-$Z2) &lt; $rXY) {\n    $Z_branch=($Z1+$Z2-$rXY)/2;\n    $a=($Z1-$Z_branch)/$rXY;\n    $X_branch=(1-$a)*$X1+$a*$X2;\n    $Y_branch=(1-$a)*$Y1+$a*$Y2;\n  }\n  elsif ($Z1 &lt; $Z2) {\n    $X_branch=$X1;\n    $Y_branch=$Y1;\n    $Z_branch=$Z1;\n  }\n  else {\n    $X_branch=$X2;\n    $Y_branch=$Y2;\n    $Z_branch=$Z2;\n  }\n  return ($X_branch,$Y_branch,$Z_branch);\n}\n</code></pre>\n\n<p>Which produces a scad file and outputs it as this:\n<a href=\"https://i.stack.imgur.com/MnTF9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MnTF9.png\" alt=\"enter image description here\"></a></p>\n\n<p>I thought it would be good to implement this method in a slicing program, Slic3r. Now what I have done is attempted to still keep it separate since I would like to show at least this structure in the program and decide whether or not it is possible to do. </p>\n\n<p>Slic3r Original Code: <a href=\"https://github.com/slic3r/Slic3r/blob/21eb603cc16946b14e77d3c10cbee2f1163503c6/lib/Slic3r/Print/SupportMaterial.pm\" rel=\"nofollow noreferrer\">https://github.com/slic3r/Slic3r/blob/21eb603cc16946b14e77d3c10cbee2f1163503c6/lib/Slic3r/Print/SupportMaterial.pm</a></p>\n\n<p>Modified Slic3r Code: <a href=\"https://pastebin.com/aHzXT4RW\" rel=\"nofollow noreferrer\">https://pastebin.com/aHzXT4RW</a></p>\n\n<p>So the comparison is, I removed the generate_pillar_supports and added my grid subroutine. I assumed I would just have to call it since this script is separate to how it's generated compared to the other support structures on:</p>\n\n<p>So replaced this:</p>\n\n<pre><code> my $shape = [];\n    if ($self-&gt;object_config-&gt;support_material_pattern eq 'pillars') {\n        $self-&gt;generate_pillars_shape($contact, $support_z, $shape);\n    }\n</code></pre>\n\n<p>With this:</p>\n\n<pre><code>my $shape = [];\n    if ($self-&gt;object_config-&gt;support_material_pattern eq 'pillars') {\n        $self-&gt;grid($min_X,$max_X,$min_Y,$max_Y,$distance);\n    }\n</code></pre>\n\n<p>However unfortunately, I have not been able to get a nice structure to form but rather this:\n<a href=\"https://i.stack.imgur.com/YM2OJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YM2OJ.png\" alt=\"enter image description here\"></a></p>\n\n<p>As I said, I know this is a large question and I'm not diving into the entire Slic3ing program so it might be even harder to understand. However just from a brief look, would anyone know what the issue is? Am I calling the subroutine wrong, does the script only work to produce a scad file, etc. All I would need is just to see if this is able to show or not. Thanks.</p>\n"}, {"tags": ["linux", "perl", "unix", "sed"], "comments": [{"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 1, "creation_date": 1553149818, "post_id": 55274403, "comment_id": 97280076, "body": "See: <a href=\"http://stackoverflow.com/q/6697753/3776858\">Difference between single and double quotes in bash</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1553149968, "creation_date": 1553149968, "answer_id": 55274931, "question_id": 55274403, "link": "https://stackoverflow.com/questions/55274403/replacing-text-with-mixed-special-characters-in-a-file/55274931#55274931", "title": "Replacing text with mixed special characters in a file", "body": "<p>You are passing a string containing special shell characters, e.g. <code>$</code>, through shell parsing, i.e. they are processed by the shell and therefore get lost:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -e '$test=\"XXX\\$YYY\"; qx/set -x; echo $test/' \n+ echo XXX\n</code></pre>\n\n<p>Back-ticks, <code>qx//</code> and <code>system(\"...\")</code> are prone to such problems and are unsafe in general.</p>\n\n<p>You should instead use the safe array version of <code>system()</code>, i.e. bypass the shell completely so that parameters are passed into the called command as-is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> $ perl -e '$i=\"AAA\"; $test=\"XXX\\$YYY\"; system(qw(echo perl -pi.back -e), \"s/$i/$test/\", qw(configure.tcl));'\n perl -pi.back -e s/AAA/XXX$YYY/ configure.tcl\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10170449, "user_type": "registered", "profile_image": "https://graph.facebook.com/2544178898929487/picture?type=large", "display_name": "Alan Saldanha", "link": "https://stackoverflow.com/users/10170449/alan-saldanha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553149968, "creation_date": 1553147053, "question_id": 55274403, "link": "https://stackoverflow.com/questions/55274403/replacing-text-with-mixed-special-characters-in-a-file", "title": "Replacing text with mixed special characters in a file", "body": "<p>I'm trying to replace a string <strong>VCC_TGL</strong> to <strong>$G_CORNER_SQL_DETAILS($corner+vcc_tgl)</strong>\nI have tried using the perl one liner, but it is missing the <strong>$</strong> character.</p>\n\n<pre><code>my $i=\"VCC_TGL\";\nmy $test=\"\\$G_CORNER_SQL_DETAILS(\\$corner+vcc_tgl)\";\nprint \"replace $i with $test\\n\";\n`perl -pi.back -e 's/$i/$test/' configure.tcl`;\n</code></pre>\n\n<p>The output im getting on executing the above perl script is ,</p>\n\n<pre><code>set vccio G_CORNER_SQL_DETAILS(corner+vcc_tgl)\n</code></pre>\n"}, {"tags": ["perl", "gnuplot", "heatmap"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1553176463, "post_id": 55272831, "comment_id": 97293856, "body": "Your data set looks fine, what was your question about it? Regarding the <code>xticks</code>: I tested this with <code>xtics =&gt; {labels =&gt; [0, 1, 2, 3]}</code> and the labels shows fine. The <code>x</code> labels you used (3.14 and -3.14) are outside the data range, so they will not show."}, {"owner": {"reputation": 325, "user_id": 2365884, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3cf67b8cf7af05ee0e93a1205a8f8de6?s=128&d=identicon&r=PG", "display_name": "Jitesh", "link": "https://stackoverflow.com/users/2365884/jitesh"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1553229481, "post_id": 55272831, "comment_id": 97314553, "body": "I need to see the x and y axis values like in the image above(01-oct, 02-oct ), Should I add it in the dataset or do i add it in xtics or ytics?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1553248394, "post_id": 55272831, "comment_id": 97322219, "body": "See my answer for an example of how you can set the ticks."}], "answers": [{"comments": [{"owner": {"reputation": 325, "user_id": 2365884, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3cf67b8cf7af05ee0e93a1205a8f8de6?s=128&d=identicon&r=PG", "display_name": "Jitesh", "link": "https://stackoverflow.com/users/2365884/jitesh"}, "edited": false, "score": 0, "creation_date": 1553511975, "post_id": 55296964, "comment_id": 97397853, "body": "I have a doubt, Can I use xtic label inside loop like this: my $xtics; for(my $i=0;$i&lt;($interval_count-1);$i++){ \t\t$dt-&gt;add(minutes =&gt; $interval_period);\t \t\t$xtics .= &quot;&#39;&quot;.&#39;&quot;&#39;.$dt-&gt;hour.&#39;:&#39;.$dt-&gt;minute.&#39;&quot;&#39;.&#39; &#39;.$i.&quot;&#39;,&quot;; \t} \t$xtics =~ s/,$//; and inside gnuplot-&gt;new(), give xtic the value xtics      =&gt; { \t    \tlabels =&gt; [$xtic], \t         rotate   =&gt; 90, \t    }, but its showing me error- Invalid expression"}, {"owner": {"reputation": 325, "user_id": 2365884, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3cf67b8cf7af05ee0e93a1205a8f8de6?s=128&d=identicon&r=PG", "display_name": "Jitesh", "link": "https://stackoverflow.com/users/2365884/jitesh"}, "edited": false, "score": 0, "creation_date": 1553573789, "post_id": 55296964, "comment_id": 97423815, "body": "I got an issue with Xtics and Ytics not showing fully, may be its the space?I added the code imagesize =&gt; &quot;0.8, 0.5&quot; but doesn&#39;t seem anything good. Added the details in the question"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 325, "user_id": 2365884, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3cf67b8cf7af05ee0e93a1205a8f8de6?s=128&d=identicon&r=PG", "display_name": "Jitesh", "link": "https://stackoverflow.com/users/2365884/jitesh"}, "edited": false, "score": 0, "creation_date": 1553585451, "post_id": 55296964, "comment_id": 97427554, "body": "@Jitesh Could you send me the whole code you are working with? Then I will have a look at it. (My email is in my profile)"}, {"owner": {"reputation": 325, "user_id": 2365884, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3cf67b8cf7af05ee0e93a1205a8f8de6?s=128&d=identicon&r=PG", "display_name": "Jitesh", "link": "https://stackoverflow.com/users/2365884/jitesh"}, "edited": false, "score": 1, "creation_date": 1553598567, "post_id": 55296964, "comment_id": 97435010, "body": "mailed you the details"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 1, "last_activity_date": 1553515928, "last_edit_date": 1553515928, "creation_date": 1553248353, "answer_id": 55296964, "question_id": 55272831, "link": "https://stackoverflow.com/questions/55272831/heat-map-using-chartgnuplot-perl/55296964#55296964", "title": "Heat Map using Chart::Gnuplot Perl", "body": "<p>Here is an example of how you can set the axis labels:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Chart::Gnuplot;\n\nmy @data = (\n        [0, 0, 10],\n        [0, 1, 10],\n        [0, 2, 10],\n        [0, 3, 10],\n        [],\n        [1, 0, 10],\n        [1, 1, 5],\n        [1, 2, 10],\n        [1, 3, 10],\n        [],\n        [2, 0, 10],\n        [2, 1, 1],\n        [2, 2, 1],\n        [2, 3, 10],\n        [],\n        [3, 0, 10],\n        [3, 1, 0],\n        [3, 2, 5],\n        [3, 3, 10],\n       );\n\nmy $chart = Chart::Gnuplot-&gt;new(\n    bg         =&gt; 'white',\n    pm3d       =&gt; 'map',\n    palette    =&gt; 'defined (0 0 0 1, 1 1 1 0, 2 1 0 0)',\n    output     =&gt; \"test.png\",\n    title      =&gt; \"3D plot from arrays of x, y and z coordinates\",\n    xlabel     =&gt; 'x',\n    ylabel     =&gt; 'y',\n    xtics      =&gt; {\n        labels   =&gt; ['\"0030\" 0', '\"0100\" 1', '\"0130\" 2', '\"0200\" 3'],\n        rotate   =&gt; 90,\n    },\n    ytics      =&gt; {\n        labels   =&gt; ['\"04-Oct\" 0', '\"03-Oct\" 1', '\"02-Oct\" 2', '\"01-Oct\" 3'],\n    },\n);\nmy $dataSet = Chart::Gnuplot::DataSet-&gt;new( points =&gt; \\@data );\n$chart-&gt;plot3d($dataSet);\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/1dSrN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1dSrN.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Update</strong>:</p>\n\n<p>You can create the <code>xtics</code> in a loop like this (given a DataTime <code>$dt</code>):</p>\n\n<pre><code>my @xtics;\nfor ( my $i=0; $i&lt;($interval_count-1); $i++ ){\n    $dt-&gt;add(minutes =&gt; $interval_period);\n    my $xtic = '\"' . $dt-&gt;hour . ':' . $dt-&gt;minute . '\"' . ' ' . $i;\n    push @xtics, $xtic;\n}\n</code></pre>\n\n<p>Then set the <code>xtics</code> parameter to <code>Chart::Gnuplot-&gt;new()</code> like this:</p>\n\n<pre><code>xtics =&gt; { labels =&gt; \\@xtics, rotate =&gt; 90, },\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 2365884, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3cf67b8cf7af05ee0e93a1205a8f8de6?s=128&d=identicon&r=PG", "display_name": "Jitesh", "link": "https://stackoverflow.com/users/2365884/jitesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 55296964, "answer_count": 1, "score": 1, "last_activity_date": 1553573866, "creation_date": 1553134504, "last_edit_date": 1553573866, "question_id": 55272831, "link": "https://stackoverflow.com/questions/55272831/heat-map-using-chartgnuplot-perl", "title": "Heat Map using Chart::Gnuplot Perl", "body": "<p>I was trying to create something like <a href=\"https://i.stack.imgur.com/AEA0W.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AEA0W.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>But I was not able to get the x and y axis tics coming in \nI tried something like this to see if the x axis tics are coming </p>\n\n<pre><code>my @data = (\n        [0, 0, 10],\n        [0, 1, 10],\n        [0, 2, 10],\n        [],\n        [1, 0, 10],\n        [1, 1, 5],\n        [1, 2, 10],\n        [],\n        [2, 0, 10],\n        [2, 1, 1],\n        [2, 2, 10],\n        [],\n        [3, 0, 10],\n        [3, 1, 0],\n        [3, 2, 10],\n       );\n\nmy $chart = Chart::Gnuplot-&gt;new(\n    output =&gt; \"test1.png\",\n    title  =&gt; \"3D plot from arrays of x, y and z coordinates\",\n    xlabel =&gt; 'x',\n    ylabel =&gt; 'y',\n    xtics  =&gt; {\n        labels =&gt; ['\"pi\" 3.1416', '\"-pi\" -3.1416'],\n    },\n\n);\n$chart-&gt;set(pm3d =&gt; 'map');\n$chart-&gt;set(palette =&gt; 'defined (0 0 0 1, 1 1 1 0, 2 1 0 0)');\nmy $dataSet = Chart::Gnuplot::DataSet-&gt;new(\n\n    points =&gt; \\@data,\n);\n\n$chart-&gt;plot3d($dataSet);\n</code></pre>\n\n<p>I am not sure how the dataset should be and how the x and y axis tics should be added\nI tested the above with some examples that I got from the internet but was not able to see the result . \nAny help to get this like the image would be greatly appreciated</p>\n\n<p>Got one more issue, when tried to get all the values on X and Y axis, the xtics and ytics are not showing fully as in the above image, the one I got seems like this\n<a href=\"https://i.stack.imgur.com/Q0Bs9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q0Bs9.png\" alt=\"enter image description here\"></a></p>\n\n<p>The dataset is like this</p>\n\n<pre><code>[\n            0,\n            1,\n            '2.66556908091426'\n          ],\n          [\n            0,\n            2,\n            '4.37897014657203'\n          ],\n          [\n            0,\n            3,\n            '1.22514023397498'\n          ],\n          [\n            0,\n            4,\n            '4.53000730040497'\n          ],\n          [\n            0,\n            5,\n            '3.01982096624856'\n          ],\n          [\n            0,\n            6,\n            '0.499618756879272'\n          ],\n          [\n            0,\n            7,\n            '4.84182728928223'\n          ],\n          [\n            0,\n            8,\n            '1.96005062661005'\n          ],\n          [\n            0,\n            9,\n            '2.42800730644825'\n          ],\n          [\n            0,\n            10,\n            '1.86670807696721'\n          ],\n          [\n            0,\n            11,\n            '1.81614100038358'\n          ],\n          [\n            0,\n            12,\n            '4.39616981937487'\n          ],\n          [\n            0,\n            13,\n            '3.35256272447085'\n          ],\n          [\n            0,\n            14,\n            '3.24814393010016'\n          ],\n          [\n            0,\n            15,\n            '1.06219230833835'\n          ],\n          [\n            0,\n            16,\n            '1.12793288928973'\n          ],\n          [\n            0,\n            17,\n            '3.26476861756371'\n          ],\n          [\n            0,\n            18,\n            '3.10578946862982'\n          ],\n          [\n            0,\n            19,\n            '2.93146341009402'\n          ],\n          [\n            0,\n            20,\n            '1.72192716962012'\n          ],\n          [\n            0,\n            21,\n            '4.04316953579938'\n          ],\n          [\n            0,\n            22,\n            '0.32291976646917'\n          ],\n          [\n            0,\n            23,\n            '4.42019093014144'\n          ],\n          [\n            0,\n            24,\n            '3.31129513399691'\n          ],\n          [\n            0,\n            25,\n            '4.561835018284'\n          ],\n          [\n            0,\n            26,\n            '1.23709783845847'\n          ],\n          [\n            0,\n            27,\n            '2.65864379090912'\n          ],\n          [\n            0,\n            28,\n            '2.30212288203429'\n          ],\n          [\n            0,\n            29,\n            '0.621743568938786'\n          ],\n          [\n            0,\n            30,\n            '1.80416068716383'\n          ],\n          [\n            0,\n            31,\n            '2.66465304546164'\n          ],\n          [\n            0,\n            32,\n            '3.45680173240485'\n          ],\n          [\n            0,\n            33,\n            '2.70739617274879'\n          ],\n          [\n            0,\n            34,\n            '1.11428672300967'\n          ],\n          [\n            0,\n            35,\n            '1.67761705545201'\n          ],\n          [\n            0,\n            36,\n            '2.74299975084073'\n          ],\n          [\n            0,\n            37,\n            '1.80397491377351'\n          ],\n          [\n            0,\n            38,\n            '4.47728976228916'\n          ],\n          [\n            0,\n            39,\n            '4.68895286431879'\n          ],\n          [\n            0,\n            40,\n            '0.14021332300036'\n          ],\n          [\n            0,\n            41,\n            '2.33736192052044'\n          ],\n          [\n            0,\n            42,\n            '0.177482592020581'\n          ],\n          [\n            0,\n            43,\n            '4.73906999291613'\n          ],\n          [\n            0,\n            44,\n            '2.31796437164231'\n          ],\n          [\n            0,\n            45,\n            '3.99016409499582'\n          ],\n          [\n            0,\n            46,\n            '3.38293261332254'\n          ],\n          [\n            0,\n            47,\n            '2.61350773461833'\n          ],\n          [\n            0,\n            48,\n            '4.73763682658106'\n          ],\n          [\n            0,\n            49,\n            '0.882213941365624'\n          ],\n          [\n            0,\n            50,\n            '0.772076148467349'\n          ],\n          [\n            0,\n            51,\n            '0.211627911950369'\n          ],\n          [\n            0,\n            52,\n            '0.983901796963771'\n          ],\n          [\n            0,\n            53,\n            '4.20512536118553'\n          ],\n          [\n            0,\n            54,\n            '1.23297443353948'\n          ],\n          [\n            0,\n            55,\n            '3.81554353946163'\n          ],\n          [\n            0,\n            56,\n            '3.65498488100304'\n          ],\n          [\n            0,\n            57,\n            '2.57928958709011'\n          ],\n          [\n            0,\n            58,\n            '2.59561593117475'\n          ],\n          [\n            0,\n            59,\n            '0.00576648038274286'\n          ],\n          [\n            0,\n            60,\n            '3.7901264909274'\n          ],\n          [\n            0,\n            61,\n            '2.01073954816936'\n          ],\n          [\n            0,\n            62,\n            '4.20235419868604'\n          ],\n          [\n            0,\n            63,\n            '0.0699755500835941'\n          ],\n          [\n            0,\n            64,\n            '1.89704728306967'\n          ],\n          [\n            0,\n            65,\n            '3.60775496050488'\n          ],\n          [\n            0,\n            66,\n            '0.210700948492715'\n          ],\n          [\n            0,\n            67,\n            '1.46456716998541'\n          ],\n          [\n            0,\n            68,\n            '1.17475107720264'\n          ],\n          [\n            0,\n            69,\n            '3.05671437798837'\n          ],\n          [\n            0,\n            70,\n            '2.68927795266336'\n          ],\n          [\n            0,\n            71,\n            '2.51310517387102'\n          ],\n          [\n            0,\n            72,\n            '2.47339733795219'\n          ],\n          [\n            0,\n            73,\n            '0.0279383841017911'\n          ],\n          [\n            0,\n            74,\n            '0.722901884055389'\n          ],\n          [\n            0,\n            75,\n            '2.87491127698443'\n          ],\n          [\n            0,\n            76,\n            '4.06219968687022'\n          ],\n          [\n            0,\n            77,\n            '1.10014911730135'\n          ],\n          [\n            0,\n            78,\n            '2.12579086549013'\n          ],\n          [\n            0,\n            79,\n            '0.969934599414497'\n          ],\n          [\n            0,\n            80,\n            '0.0104263290325335'\n          ],\n          [\n            0,\n            81,\n            '4.76235946351673'\n          ],\n          [\n            0,\n            82,\n            '0.790123228138313'\n          ],\n          [\n            0,\n            83,\n            '0.0974340515172223'\n          ],\n          [\n            0,\n            84,\n            '2.25078802534153'\n          ],\n          [\n            0,\n            85,\n            '1.52078958155231'\n          ],\n          [\n            0,\n            86,\n            '1.81615557330844'\n          ],\n          [\n            0,\n            87,\n            '4.29625290304719'\n          ],\n          [\n            0,\n            88,\n            '3.46711963355933'\n          ],\n          [\n            0,\n            89,\n            '3.9427030133586'\n          ],\n          [\n            0,\n            90,\n            '0.10345150062939'\n          ],\n          [\n            0,\n            91,\n            '3.43953703174092'\n          ],\n          [\n            0,\n            92,\n            '4.31073758997368'\n          ],\n          [\n            0,\n            93,\n            '2.58639853373042'\n          ],\n          [\n            0,\n            94,\n            '4.08224212269872'\n          ],\n          [],\n</code></pre>\n"}]